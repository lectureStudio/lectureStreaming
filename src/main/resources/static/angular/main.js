var xU=Object.defineProperty,MU=Object.defineProperties,PU=Object.getOwnPropertyDescriptors,zA=Object.getOwnPropertySymbols,IU=Object.prototype.hasOwnProperty,RU=Object.prototype.propertyIsEnumerable,wm=(it,L,W)=>L in it?xU(it,L,{enumerable:!0,configurable:!0,writable:!0,value:W}):it[L]=W,fc=(it,L)=>{for(var W in L||(L={}))IU.call(L,W)&&wm(it,W,L[W]);if(zA)for(var W of zA(L))RU.call(L,W)&&wm(it,W,L[W]);return it},pc=(it,L)=>MU(it,PU(L)),Ln=(it,L,W)=>(wm(it,"symbol"!=typeof L?L+"":L,W),W),Am=(it,L,W)=>{if(!L.has(it))throw TypeError("Cannot "+W)},G=(it,L,W)=>(Am(it,L,"read from private field"),W?W.call(it):L.get(it)),He=(it,L,W)=>{if(L.has(it))throw TypeError("Cannot add the same private member more than once");L instanceof WeakSet?L.add(it):L.set(it,W)},lt=(it,L,W,_)=>(Am(it,L,"write to private field"),_?_.call(it,W):L.set(it,W),W),Tm=(it,L,W,_)=>({set _(N){lt(it,L,N,W)},get _(){return G(it,L,_)}}),We=(it,L,W)=>(Am(it,L,"access private method"),W);(self.webpackChunkangularPlayer=self.webpackChunkangularPlayer||[]).push([[179],{901:(it,L,W)=>{"use strict";function _(n){return"function"==typeof n}function N(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Se=N(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ce(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Re{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(_(r))try{r()}catch(s){e=s instanceof Se?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{B(s)}catch(o){e=null!=e?e:[],o instanceof Se?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Se(e)}}add(e){var t;if(e&&e!==this)if(this.closed)B(e);else{if(e instanceof Re){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ce(t,e)}remove(e){const{_finalizers:t}=this;t&&ce(t,e),e instanceof Re&&e._removeParent(this)}}Re.EMPTY=(()=>{const n=new Re;return n.closed=!0,n})();const re=Re.EMPTY;function m(n){return n instanceof Re||n&&"closed"in n&&_(n.remove)&&_(n.add)&&_(n.unsubscribe)}function B(n){_(n)?n():n.unsubscribe()}const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},x={setTimeout(n,e,...t){const{delegate:r}=x;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=x;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function j(n){x.setTimeout(()=>{const{onUnhandledError:e}=D;if(!e)throw n;e(n)})}function C(){}const u=I("C",void 0,void 0);function I(n,e,t){return{kind:n,value:e,error:t}}let O=null;function b(n){if(D.useDeprecatedSynchronousErrorHandling){const e=!O;if(e&&(O={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=O;if(O=null,t)throw r}}else n()}class f extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,m(e)&&e.add(this)):this.destination=De}static create(e,t,r){return new M(e,t,r)}next(e){this.isStopped?Ce(function g(n){return I("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ce(function d(n){return I("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ce(u,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const E=Function.prototype.bind;function y(n,e){return E.call(n,e)}class R{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){z(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){z(r)}else z(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){z(t)}}}class M extends f{constructor(e,t,r){let i;if(super(),_(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let s;this&&D.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&y(e.next,s),error:e.error&&y(e.error,s),complete:e.complete&&y(e.complete,s)}):i=e}this.destination=new R(i)}}function z(n){D.useDeprecatedSynchronousErrorHandling?function h(n){D.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=n)}(n):j(n)}function Ce(n,e){const{onStoppedNotification:t}=D;t&&x.setTimeout(()=>t(n,e))}const De={closed:!0,next:C,error:function ye(n){throw n},complete:C},ze="function"==typeof Symbol&&Symbol.observable||"@@observable";function Oe(n){return n}let pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function fe(n){return n&&n instanceof f||function Je(n){return n&&_(n.next)&&_(n.error)&&_(n.complete)}(n)&&m(n)}(t)?t:new M(t,r,i);return b(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=we(r))((i,s)=>{const o=new M({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ze](){return this}pipe(...t){return function Q(n){return 0===n.length?Oe:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=we(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function we(n){var e;return null!==(e=null!=n?n:D.Promise)&&void 0!==e?e:Promise}const S=N(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let F=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new te(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new S}next(t){b(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){b(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){b(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?re:(this.currentObservers=null,s.push(t),new Re(()=>{this.currentObservers=null,ce(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new pe;return t.source=this,t}}return n.create=(e,t)=>new te(e,t),n})();class te extends F{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:re}}function ve(n){return _(null==n?void 0:n.lift)}function le(n){return e=>{if(ve(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Ie(n,e,t,r,i)}class Ie extends f{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Te(n,e){return le((t,r)=>{let i=0;t.subscribe(_e(r,s=>{r.next(n.call(e,s,i++))}))})}function Ne(n){return this instanceof Ne?(this.v=n,this):new Ne(n)}function tt(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(k){r[k]&&(i[k]=function($){return new Promise(function(he,je){s.push([k,$,he,je])>1||a(k,$)})})}function a(k,$){try{!function l(k){k.value instanceof Ne?Promise.resolve(k.value.v).then(c,p):v(s[0][2],k)}(r[k]($))}catch(he){v(s[0][3],he)}}function c(k){a("next",k)}function p(k){a("throw",k)}function v(k,$){k($),s.shift(),s.length&&a(s[0][0],s[0][1])}}function de(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ke(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const X=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function V(n){return _(null==n?void 0:n.then)}function K(n){return _(n[ze])}function Me(n){return Symbol.asyncIterator&&_(null==n?void 0:n[Symbol.asyncIterator])}function qe(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ht=function ct(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xt(n){return _(null==n?void 0:n[ht])}function Ct(n){return tt(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Ne(t.read());if(i)return yield Ne(void 0);yield yield Ne(r)}}finally{t.releaseLock()}})}function Dt(n){return _(null==n?void 0:n.getReader)}function Mt(n){if(n instanceof pe)return n;if(null!=n){if(K(n))return function on(n){return new pe(e=>{const t=n[ze]();if(_(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(X(n))return function an(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(V(n))return function nn(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,j)})}(n);if(Me(n))return er(n);if(xt(n))return function kt(n){return new pe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Dt(n))return function kr(n){return er(Ct(n))}(n)}throw qe(n)}function er(n){return new pe(e=>{(function Xr(n,e){var t,r,i,s;return function ot(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(p){try{c(r.next(p))}catch(v){o(v)}}function l(p){try{c(r.throw(p))}catch(v){o(v)}}function c(p){p.done?s(p.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(p.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=de(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function cn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function $t(n,e,t=1/0){return _(e)?$t((r,i)=>Te((s,o)=>e(r,s,i,o))(Mt(n(r,i))),t):("number"==typeof e&&(t=e),le((r,i)=>function mr(n,e,t,r,i,s,o,a){const l=[];let c=0,p=0,v=!1;const k=()=>{v&&!l.length&&!c&&e.complete()},$=je=>c<r?he(je):l.push(je),he=je=>{s&&e.next(je),c++;let st=!1;Mt(t(je,p++)).subscribe(_e(e,rt=>{null==i||i(rt),s?$(rt):e.next(rt)},()=>{st=!0},void 0,()=>{if(st)try{for(c--;l.length&&c<r;){const rt=l.shift();o?cn(e,o,()=>he(rt)):he(rt)}k()}catch(rt){e.error(rt)}}))};return n.subscribe(_e(e,$,()=>{v=!0,k()})),()=>{null==a||a()}}(r,i,n,t)))}function _n(n=1/0){return $t(Oe,n)}const yn=new pe(n=>n.complete());function Gd(n){return n[n.length-1]}function Lm(n){return _(Gd(n))?n.pop():void 0}function Oa(n){return function yT(n){return n&&_(n.schedule)}(Gd(n))?n.pop():void 0}function Nm(n,e=0){return le((t,r)=>{t.subscribe(_e(r,i=>cn(r,n,()=>r.next(i),e),()=>cn(r,n,()=>r.complete(),e),i=>cn(r,n,()=>r.error(i),e)))})}function Bm(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function jm(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{cn(t,e,()=>{const r=n[Symbol.asyncIterator]();cn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tr(n,e){return e?function AT(n,e){if(null!=n){if(K(n))return function bT(n,e){return Mt(n).pipe(Bm(e),Nm(e))}(n,e);if(X(n))return function CT(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(V(n))return function ST(n,e){return Mt(n).pipe(Bm(e),Nm(e))}(n,e);if(Me(n))return jm(n,e);if(xt(n))return function ET(n,e){return new pe(t=>{let r;return cn(t,e,()=>{r=n[ht](),cn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>_(null==r?void 0:r.return)&&r.return()})}(n,e);if(Dt(n))return function wT(n,e){return jm(Ct(n),e)}(n,e)}throw qe(n)}(n,e):Mt(n)}function Wd(...n){const e=Oa(n),t=function _T(n,e){return"number"==typeof Gd(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Mt(r[0]):_n(t)(tr(r,e)):yn}function Vm(n={}){const{connector:e=(()=>new F),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,p=!1,v=!1;const k=()=>{null==a||a.unsubscribe(),a=void 0},$=()=>{k(),o=l=void 0,p=v=!1},he=()=>{const je=o;$(),null==je||je.unsubscribe()};return le((je,st)=>{c++,!v&&!p&&k();const rt=l=null!=l?l:e();st.add(()=>{c--,0===c&&!v&&!p&&(a=qd(he,i))}),rt.subscribe(st),!o&&c>0&&(o=new M({next:Le=>rt.next(Le),error:Le=>{v=!0,k(),a=qd($,t,Le),rt.error(Le)},complete:()=>{p=!0,k(),a=qd($,r),rt.complete()}}),Mt(je).subscribe(o))})(s)}}function qd(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new M({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function pn(n){for(let e in n)if(n[e]===pn)return e;throw Error("Could not find renamed property on target object.")}function Xd(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function un(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(un).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Kd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const TT=pn({__forward_ref__:pn});function Yd(n){return n.__forward_ref__=Yd,n.toString=function(){return un(this())},n}function Gt(n){return Hm(n)?n():n}function Hm(n){return"function"==typeof n&&n.hasOwnProperty(TT)&&n.__forward_ref__===Yd}class tn extends Error{constructor(e,t){super(function Jd(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function jt(n){return"string"==typeof n?n:null==n?"":String(n)}function nr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():jt(n)}function yc(n,e){const t=e?` in ${e}`:"";throw new tn(-201,`No provider for ${nr(n)} found${t}`)}function Lr(n,e){null==n&&function dn(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function It(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const IT=It;function vr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zd(n){return Um(n,_c)||Um(n,zm)}function Um(n,e){return n.hasOwnProperty(e)?n[e]:null}function $m(n){return n&&(n.hasOwnProperty(Qd)||n.hasOwnProperty(kT))?n[Qd]:null}const _c=pn({\u0275prov:pn}),Qd=pn({\u0275inj:pn}),zm=pn({ngInjectableDef:pn}),kT=pn({ngInjectorDef:pn});var Bt=(()=>((Bt=Bt||{})[Bt.Default=0]="Default",Bt[Bt.Host=1]="Host",Bt[Bt.Self=2]="Self",Bt[Bt.SkipSelf=4]="SkipSelf",Bt[Bt.Optional=8]="Optional",Bt))();let eh;function fs(n){const e=eh;return eh=n,e}function Gm(n,e,t){const r=Zd(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Bt.Optional?null:void 0!==e?e:void yc(un(n),"Injector")}function ps(n){return{toString:n}.toString()}var ui=(()=>((ui=ui||{})[ui.OnPush=0]="OnPush",ui[ui.Default=1]="Default",ui))(),Ai=(()=>{return(n=Ai||(Ai={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ai;var n})();const LT="undefined"!=typeof globalThis&&globalThis,NT="undefined"!=typeof window&&window,BT="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fn=LT||"undefined"!=typeof global&&global||NT||BT,bo={},gn=[],bc=pn({\u0275cmp:pn}),th=pn({\u0275dir:pn}),nh=pn({\u0275pipe:pn}),Wm=pn({\u0275mod:pn}),Gi=pn({\u0275fac:pn}),ka=pn({__NG_ELEMENT_ID__:pn});let jT=0;function On(n){return ps(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ui.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||gn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ai.Emulated,id:"c",styles:n.styles||gn,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=jT++,r.inputs=Jm(n.inputs,t),r.outputs=Jm(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Xm):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(Km):null,r})}function Xm(n){return rr(n)||function gs(n){return n[th]||null}(n)}function Km(n){return function Ls(n){return n[nh]||null}(n)}const Ym={};function Mr(n){return ps(()=>{const e={type:n.type,bootstrap:n.bootstrap||gn,declarations:n.declarations||gn,imports:n.imports||gn,exports:n.exports||gn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ym[n.id]=n.type),e})}function Jm(n,e){if(null==n)return bo;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Xn=On;function rr(n){return n[bc]||null}function Kr(n,e){const t=n[Wm]||null;if(!t&&!0===e)throw new Error(`Type ${un(n)} does not have '\u0275mod' property.`);return t}function Ti(n){return Array.isArray(n)&&"object"==typeof n[1]}function hi(n){return Array.isArray(n)&&!0===n[1]}function sh(n){return 0!=(8&n.flags)}function wc(n){return 2==(2&n.flags)}function Ac(n){return 1==(1&n.flags)}function fi(n){return null!==n.template}function zT(n){return 0!=(512&n[2])}function Vs(n,e){return n.hasOwnProperty(Gi)?n[Gi]:null}class qT{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Wi(){return Qm}function Qm(n){return n.type.prototype.ngOnChanges&&(n.setInput=KT),XT}function XT(){const n=tv(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===bo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function KT(n,e,t,r){const i=tv(n)||function YT(n,e){return n[ev]=e}(n,{previous:bo,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new qT(l&&l.currentValue,e,o===bo),n[r]=e}Wi.ngInherit=!0;const ev="__ngSimpleChanges__";function tv(n){return n[ev]||null}let uh;function dh(){return void 0!==uh?uh:"undefined"!=typeof document?document:void 0}function Pn(n){return!!n.listen}const nv={createRenderer:(n,e)=>dh()};function Nn(n){for(;Array.isArray(n);)n=n[0];return n}function Tc(n,e){return Nn(e[n])}function Br(n,e){return Nn(e[n.index])}function hh(n,e){return n.data[e]}function jr(n,e){const t=e[n];return Ti(t)?t:t[0]}function rv(n){return 4==(4&n[2])}function fh(n){return 128==(128&n[2])}function ms(n,e){return null==e?null:n[e]}function iv(n){n[18]=0}function ph(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Vt={lFrame:fv(null),bindingsEnabled:!0};function ov(){return Vt.bindingsEnabled}function dt(){return Vt.lFrame.lView}function Qt(){return Vt.lFrame.tView}function Sn(n){return Vt.lFrame.contextLView=n,n[8]}function Hn(){let n=av();for(;null!==n&&64===n.type;)n=n.parent;return n}function av(){return Vt.lFrame.currentTNode}function Di(n,e){const t=Vt.lFrame;t.currentTNode=n,t.isParent=e}function gh(){return Vt.lFrame.isParent}function mh(){Vt.lFrame.isParent=!1}function To(){return Vt.lFrame.bindingIndex++}function Xi(n){const e=Vt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fD(n,e){const t=Vt.lFrame;t.bindingIndex=t.bindingRootIndex=n,vh(e)}function vh(n){Vt.lFrame.currentDirectiveIndex=n}function uv(){return Vt.lFrame.currentQueryIndex}function _h(n){Vt.lFrame.currentQueryIndex=n}function gD(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function dv(n,e,t){if(t&Bt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Bt.Host||(i=gD(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Vt.lFrame=hv();return r.currentTNode=e,r.lView=n,!0}function xc(n){const e=hv(),t=n[1];Vt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function hv(){const n=Vt.lFrame,e=null===n?null:n.child;return null===e?fv(n):e}function fv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function pv(){const n=Vt.lFrame;return Vt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const gv=pv;function Mc(){const n=pv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function br(){return Vt.lFrame.selectedIndex}function vs(n){Vt.lFrame.selectedIndex=n}function wn(){const n=Vt.lFrame;return hh(n.tView,n.selectedIndex)}function ja(){Vt.lFrame.currentNamespace="svg"}function Pc(){!function _D(){Vt.lFrame.currentNamespace=null}()}function Ic(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:p}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=p&&(n.destroyHooks||(n.destroyHooks=[])).push(t,p)}}function Rc(n,e,t){mv(n,e,3,t)}function Oc(n,e,t,r){(3&n[2])===t&&mv(n,e,t,r)}function bh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function mv(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(CD(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function CD(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Va{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function kc(n,e,t){const r=Pn(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];Ch(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function vv(n){return 3===n||4===n||6===n}function Ch(n){return 64===n.charCodeAt(0)}function Fc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||yv(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function yv(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function _v(n){return-1!==n}function Do(n){return 32767&n}function xo(n,e){let t=function DD(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Eh=!0;function Lc(n){const e=Eh;return Eh=n,e}let xD=0;function Ua(n,e){const t=Ah(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,wh(r.data,n),wh(e,null),wh(r.blueprint,null));const i=Nc(n,e),s=n.injectorIndex;if(_v(i)){const o=Do(i),a=xo(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function wh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ah(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Nc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Bc(n,e,t){!function MD(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ka)&&(r=t[ka]),null==r&&(r=t[ka]=xD++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Cv(n,e,t){if(t&Bt.Optional)return n;yc(e,"NodeInjector")}function Ev(n,e,t,r){if(t&Bt.Optional&&void 0===r&&(r=null),0==(t&(Bt.Self|Bt.Host))){const i=n[9],s=fs(void 0);try{return i?i.get(e,r,t&Bt.Optional):Gm(e,r,t&Bt.Optional)}finally{fs(s)}}return Cv(r,e,t)}function wv(n,e,t,r=Bt.Default,i){if(null!==n){const s=function OD(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ka)?n[ka]:void 0;return"number"==typeof e?e>=0?255&e:ID:e}(t);if("function"==typeof s){if(!dv(e,n,r))return r&Bt.Host?Cv(i,t,r):Ev(e,t,r,i);try{const o=s(r);if(null!=o||r&Bt.Optional)return o;yc(t)}finally{gv()}}else if("number"==typeof s){let o=null,a=Ah(n,e),l=-1,c=r&Bt.Host?e[16][6]:null;for((-1===a||r&Bt.SkipSelf)&&(l=-1===a?Nc(n,e):e[a+8],-1!==l&&Dv(r,!1)?(o=e[1],a=Do(l),e=xo(l,e)):a=-1);-1!==a;){const p=e[1];if(Tv(s,a,p.data)){const v=RD(a,e,t,o,r,c);if(v!==Av)return v}l=e[a+8],-1!==l&&Dv(r,e[1].data[a+8]===c)&&Tv(s,a,e)?(o=p,a=Do(l),e=xo(l,e)):a=-1}}}return Ev(e,t,r,i)}const Av={};function ID(){return new Mo(Hn(),dt())}function RD(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],p=jc(a,o,t,null==r?wc(a)&&Eh:r!=o&&0!=(3&a.type),i&Bt.Host&&s===a);return null!==p?$a(e,o,p,a):Av}function jc(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,p=s>>20,k=i?a+p:n.directiveEnd;for(let $=r?a:a+p;$<k;$++){const he=o[$];if($<l&&t===he||$>=l&&he.type===t)return $}if(i){const $=o[l];if($&&fi($)&&$.type===t)return l}return null}function $a(n,e,t,r){let i=n[t];const s=e.data;if(function ED(n){return n instanceof Va}(i)){const o=i;o.resolving&&function DT(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new tn(-200,`Circular dependency in DI detected for ${n}${t}`)}(nr(s[t]));const a=Lc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?fs(o.injectImpl):null;dv(n,r,Bt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function SD(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Qm(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&fs(l),Lc(a),o.resolving=!1,gv()}}return i}function Tv(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Dv(n,e){return!(n&Bt.Self||n&Bt.Host&&e)}class Mo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wv(this._tNode,this._lView,e,r,t)}}function Vc(n){return ps(()=>{const e=n.prototype.constructor,t=e[Gi]||Th(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Gi]||Th(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Th(n){return Hm(n)?()=>{const e=Th(Gt(n));return e&&e()}:Vs(n)}function Po(n){return function PD(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(vv(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Hn(),n)}const Ro="__parameters__";function ko(n,e,t){return ps(()=>{const r=function Dh(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,p){const v=l.hasOwnProperty(Ro)?l[Ro]:Object.defineProperty(l,Ro,{value:[]})[Ro];for(;v.length<=p;)v.push(null);return(v[p]=v[p]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Pt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=It({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const FD=new Pt("AnalyzeForEntryComponents");function Zr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Zr(r,e)):e!==n&&e.push(r)}return e}function xi(n,e){n.forEach(t=>Array.isArray(t)?xi(t,e):e(t))}function Mv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Wa(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Vr(n,e,t){let r=Fo(n,e);return r>=0?n[1|r]=t:(r=~r,function BD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Mh(n,e){const t=Fo(n,e);if(t>=0)return n[1|t]}function Fo(n,e){return function Rv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const qa={},Ih="__NG_DI_FLAG__",$c="ngTempTokenPath",GD=/\n/gm,kv="__source",qD=pn({provide:String,useValue:pn});let Xa;function Fv(n){const e=Xa;return Xa=n,e}function XD(n,e=Bt.Default){if(void 0===Xa)throw new tn(203,"");return null===Xa?Gm(n,void 0,e):Xa.get(n,e&Bt.Optional?null:void 0,e)}function _t(n,e=Bt.Default){return(function FT(){return eh}()||XD)(Gt(n),e)}const Lo=_t;function Rh(n){const e=[];for(let t=0;t<n.length;t++){const r=Gt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new tn(900,"");let i,s=Bt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=KD(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(_t(i,s))}else e.push(_t(r))}return e}function Ka(n,e){return n[Ih]=e,n.prototype[Ih]=e,n}function KD(n){return n[Ih]}const zc=Ka(ko("Inject",n=>({token:n})),-1),pi=Ka(ko("Optional"),8),No=Ka(ko("SkipSelf"),4);var Hr=(()=>((Hr=Hr||{})[Hr.Important=1]="Important",Hr[Hr.DashCase=2]="DashCase",Hr))();const $v="__ngContext__";function lr(n,e){n[$v]=e}function Fh(n){const e=function Ja(n){return n[$v]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Nh(n,e){return undefined(n,e)}function Za(n){const e=n[3];return hi(e)?e[3]:e}function Bh(n){return Yv(n[13])}function jh(n){return Yv(n[4])}function Yv(n){for(;null!==n&&!hi(n);)n=n[4];return n}function jo(n,e,t,r,i){if(null!=r){let s,o=!1;hi(r)?s=r:Ti(r)&&(o=!0,r=r[0]);const a=Nn(r);0===n&&null!==t?null==i?ny(e,t,a):Hs(e,t,a,i||null,!0):1===n&&null!==t?Hs(e,t,a,i||null,!0):2===n?function Wh(n,e,t){const r=Wc(n,e);r&&function Tx(n,e,t,r){Pn(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Mx(n,e,t,r,i){const s=t[7];s!==Nn(t)&&jo(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];Qa(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function Hh(n,e,t){if(Pn(n))return n.createElement(e,t);{const r=null!==t?function eD(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function Zv(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ph(i,-1)),t.splice(r,1)}function Uh(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Zv(i,r),e>0&&(n[t-1][4]=r[4]);const s=Hc(n,10+e);!function yx(n,e){Qa(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Qv(n,e){if(!(256&e[2])){const t=e[11];Pn(t)&&t.destroyNode&&Qa(n,e,t,3,null,null),function Sx(n){let e=n[13];if(!e)return $h(n[1],n);for(;e;){let t=null;if(Ti(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Ti(e)&&$h(e[1],e),e=e[3];null===e&&(e=n),Ti(e)&&$h(e[1],e),t=e&&e[4]}e=t}}(e)}}function $h(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function Ax(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Va)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function wx(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Nn(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&Pn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&hi(e[3])){t!==e[3]&&Zv(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function ey(n,e,t){return function ty(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Ai.None||i===Ai.Emulated)return null}return Br(r,t)}(n,e.parent,t)}function Hs(n,e,t,r,i){Pn(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function ny(n,e,t){Pn(n)?n.appendChild(e,t):e.appendChild(t)}function ry(n,e,t,r,i){null!==r?Hs(n,e,t,r,i):ny(n,e,t)}function Wc(n,e){return Pn(n)?n.parentNode(e):e.parentNode}function iy(n,e,t){return oy(n,e,t)}let Kc,Yc,oy=function sy(n,e,t){return 40&n.type?Br(n,t):null};function qc(n,e,t,r){const i=ey(n,r,e),s=e[11],a=iy(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)ry(s,i,t[l],a,!1);else ry(s,i,t,a,!1)}function Xc(n,e){if(null!==e){const t=e.type;if(3&t)return Br(e,n);if(4&t)return Gh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Xc(n,r);{const i=n[e.index];return hi(i)?Gh(-1,i):Nn(i)}}if(32&t)return Nh(e,n)()||Nn(n[e.index]);{const r=ly(n,e);return null!==r?Array.isArray(r)?r[0]:Xc(Za(n[16]),r):Xc(n,e.next)}}return null}function ly(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Gh(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Xc(r,i)}return e[7]}function qh(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&lr(Nn(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)qh(n,e,t.child,r,i,s,!1),jo(e,n,i,a,s);else if(32&l){const c=Nh(t,r);let p;for(;p=c();)jo(e,n,i,p,s);jo(e,n,i,a,s)}else 16&l?cy(n,e,r,t,i,s):jo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Qa(n,e,t,r,i,s){qh(t,r,n.firstChild,e,i,s,!1)}function cy(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)jo(e,n,i,l[c],s);else qh(n,e,l,o[3],i,s,!0)}function uy(n,e,t){Pn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Xh(n,e,t){Pn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Us(n){var e;return(null===(e=function Kh(){if(void 0===Kc&&(Kc=null,fn.trustedTypes))try{Kc=fn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Kc}())||void 0===e?void 0:e.createHTML(n))||n}function dy(n){var e;return(null===(e=function Yh(){if(void 0===Yc&&(Yc=null,fn.trustedTypes))try{Yc=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Yc}())||void 0===e?void 0:e.createHTML(n))||n}class $s{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kx extends $s{getTypeName(){return"HTML"}}class Fx extends $s{getTypeName(){return"Style"}}class Lx extends $s{getTypeName(){return"Script"}}class Nx extends $s{getTypeName(){return"URL"}}class Bx extends $s{getTypeName(){return"ResourceURL"}}function Ur(n){return n instanceof $s?n.changingThisBreaksApplicationSecurity:n}function Mi(n,e){const t=py(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function py(n){return n instanceof $s&&n.getTypeName()||null}class zx{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Us(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Gx{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Us(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Us(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const qx=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xx=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function el(n){return(n=String(n)).match(qx)||n.match(Xx)?n:"unsafe:"+n}function Pi(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function tl(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const vy=Pi("area,br,col,hr,img,wbr"),yy=Pi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_y=Pi("rp,rt"),Jh=tl(vy,tl(yy,Pi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tl(_y,Pi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tl(_y,yy)),Zh=Pi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qh=Pi("srcset"),by=tl(Zh,Qh,Pi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Pi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Kx=Pi("script,style,template");class Yx{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Jh.hasOwnProperty(t))return this.sanitizedSomething=!0,!Kx.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!by.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Zh[a]&&(l=el(l)),Qh[a]&&(n=l,l=(n=String(n)).split(",").map(e=>el(e.trim())).join(", ")),this.buf.push(" ",o,'="',Sy(l),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Jh.hasOwnProperty(t)&&!vy.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Sy(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Jx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zx=/([^\#-~ |!])/g;function Sy(n){return n.replace(/&/g,"&amp;").replace(Jx,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Zx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jc;function Cy(n,e){let t=null;try{Jc=Jc||function gy(n){const e=new Gx(n);return function Wx(){try{return!!(new window.DOMParser).parseFromString(Us(""),"text/html")}catch(n){return!1}}()?new zx(e):e}(n);let r=e?String(e):"";t=Jc.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Jc.getInertBodyElement(r)}while(r!==s);return Us((new Yx).sanitizeChildren(ef(t)||t))}finally{if(t){const r=ef(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function ef(n){return"content"in n&&function Qx(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function tf(n){const e=function nl(){const n=dt();return n&&n[12]}();return e?dy(e.sanitize(rn.HTML,n)||""):Mi(n,"HTML")?dy(Ur(n)):Cy(dh(),jt(n))}function sf(n){return n.ngOriginalError}function cM(n,...e){n.error(...e)}class _s{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function lM(n){return n&&n.ngErrorLogger||cM}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&sf(e);for(;t&&sf(t);)t=sf(t);return t||null}}const mM=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function wy(n){return n.ownerDocument.defaultView}function Ii(n){return n instanceof Function?n():n}function Ty(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Dy="ng-template";function _M(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Ty(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function xy(n){return 4===n.type&&n.value!==Dy}function bM(n,e,t){return e===(4!==n.type||t?n.value:Dy)}function SM(n,e,t){let r=4;const i=n.attrs||[],s=function wM(n){for(let e=0;e<n.length;e++)if(vv(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!bM(n,l,t)||""===l&&1===e.length){if(gi(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!_M(n.attrs,c,t)){if(gi(r))return!1;o=!0}continue}const v=CM(8&r?"class":l,i,xy(n),t);if(-1===v){if(gi(r))return!1;o=!0;continue}if(""!==c){let k;k=v>s?"":i[v+1].toLowerCase();const $=8&r?k:null;if($&&-1!==Ty($,c,0)||2&r&&c!==k){if(gi(r))return!1;o=!0}}}}else{if(!o&&!gi(r)&&!gi(l))return!1;if(o&&gi(l))continue;o=!1,r=l|1&r}}return gi(r)||o}function gi(n){return 0==(1&n)}function CM(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function AM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function My(n,e,t=!1){for(let r=0;r<e.length;r++)if(SM(n,e[r],t))return!0;return!1}function TM(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Py(n,e){return n?":not("+e.trim()+")":e}function DM(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gi(o)&&(e+=Py(s,i),i=""),r=o,s=s||!gi(r);t++}return""!==i&&(e+=Py(s,i)),e}const Ht={};function Et(n){Iy(Qt(),dt(),br()+n,!1)}function Iy(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Rc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Oc(e,s,0,t)}vs(t)}function Zc(n,e){return n<<17|e<<2}function mi(n){return n>>17&32767}function af(n){return 2|n}function Ki(n){return(131068&n)>>2}function lf(n,e){return-131069&n|e<<2}function cf(n){return 1|n}function Uy(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];_h(i),o.contentQueries(2,e[s],s)}}}function rl(n,e,t,r,i,s,o,a,l,c){const p=e.blueprint.slice();return p[0]=i,p[2]=140|r,iv(p),p[3]=p[15]=n,p[8]=t,p[10]=o||n&&n[10],p[11]=a||n&&n[11],p[12]=l||n&&n[12]||null,p[9]=c||n&&n[9]||null,p[6]=s,p[16]=2==e.type?n[16]:p,p}function Ho(n,e,t,r,i){let s=n.data[e];if(null===s)s=function yf(n,e,t,r,i){const s=av(),o=gh(),l=n.data[e]=function GM(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function hD(){return Vt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Ba(){const n=Vt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Di(s,!0),s}function Uo(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function il(n,e,t){xc(e);try{const r=n.viewQuery;null!==r&&Df(1,r,t);const i=n.template;null!==i&&$y(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Uy(n,e),n.staticViewQueries&&Df(2,n.viewQuery,t);const s=n.components;null!==s&&function UM(n,e){for(let t=0;t<e.length;t++)cP(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Mc()}}function $o(n,e,t,r){const i=e[2];if(256!=(256&i)){xc(e);try{iv(e),function lv(n){return Vt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&$y(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Rc(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Oc(e,c,0,null),bh(e,0)}if(function aP(n){for(let e=Bh(n);null!==e;e=jh(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&ph(s,1),i[2]|=1024}}}(e),function oP(n){for(let e=Bh(n);null!==e;e=jh(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];fh(r)&&$o(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&Uy(n,e),o){const c=n.contentCheckHooks;null!==c&&Rc(e,c)}else{const c=n.contentHooks;null!==c&&Oc(e,c,1),bh(e,1)}!function VM(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)vs(~i);else{const s=i,o=t[++r],a=t[++r];fD(o,s),a(2,e[s])}}}finally{vs(-1)}}(n,e);const a=n.components;null!==a&&function HM(n,e){for(let t=0;t<e.length;t++)lP(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Df(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Rc(e,c)}else{const c=n.viewHooks;null!==c&&Oc(e,c,2),bh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,ph(e[3],-1))}finally{Mc()}}}function $M(n,e,t,r){const i=e[10],o=rv(e);try{!o&&i.begin&&i.begin(),o&&il(n,e,r),$o(n,e,t,r)}finally{!o&&i.end&&i.end()}}function $y(n,e,t,r,i){const s=br(),o=2&r;try{vs(-1),o&&e.length>20&&Iy(n,e,20,!1),t(r,i)}finally{vs(s)}}function zy(n,e,t){if(sh(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function _f(n,e,t){!ov()||(function ZM(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Ua(t,e),lr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=fi(l);c&&rP(e,t,l);const p=$a(e,n,a,t);lr(p,e),null!==o&&iP(0,a-i,p,l,0,o),c&&(jr(t.index,e)[8]=p)}}(n,e,t,Br(t,e)),128==(128&t.flags)&&function QM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function pD(){return Vt.lFrame.currentDirectiveIndex}();try{vs(o);for(let l=r;l<i;l++){const c=n.data[l],p=e[l];vh(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Zy(c,p)}}finally{vs(-1),vh(a)}}(n,e,t))}function bf(n,e,t=Br){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Gy(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=tu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function tu(n,e,t,r,i,s,o,a,l,c){const p=20+r,v=p+i,k=function zM(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ht);return t}(p,v),$="function"==typeof c?c():c;return k[1]={type:n,blueprint:k,template:t,queries:null,viewQuery:a,declTNode:e,data:k.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:$,incompleteFirstPass:!1}}function Xy(n,e,t,r){const i=i_(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&s_(n).push(r,i.length-1))}function Ky(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Sf(n,e,t,r){let i=!1;if(ov()){const s=function eP(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];My(t,o.selectors,!1)&&(i||(i=[]),Bc(Ua(t,e),n,o.type),fi(o)?(Qy(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,e_(t,n.data.length,s.length);for(let p=0;p<s.length;p++){const v=s[p];v.providersResolver&&v.providersResolver(v)}let a=!1,l=!1,c=Uo(n,e,s.length,null);for(let p=0;p<s.length;p++){const v=s[p];t.mergedAttrs=Fc(t.mergedAttrs,v.hostAttrs),t_(n,t,e,c,v),nP(c,v,o),null!==v.contentQueries&&(t.flags|=8),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(t.flags|=128);const k=v.type.prototype;!a&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function WM(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const p=i[c],v=p.inputs,k=null===s||xy(e)?null:sP(v,s);o.push(k),a=Ky(v,c,a),l=Ky(p.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function tP(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new tn(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=Fc(t.mergedAttrs,t.attrs),i}function Jy(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function JM(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function Zy(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Qy(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function nP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;fi(e)&&(t[""]=n)}}function e_(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function t_(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Vs(i.type)),o=new Va(s,fi(i),null);n.blueprint[r]=o,t[r]=o,Jy(n,e,0,r,Uo(n,t,i.hostVars,Ht),i)}function rP(n,e,t){const r=Br(e,n),i=Gy(t),s=n[10],o=nu(n,rl(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function Ri(n,e,t,r,i,s){const o=Br(n,e);!function Cf(n,e,t,r,i,s,o){if(null==s)Pn(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?jt(s):o(s,r||"",i);Pn(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function iP(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],p=o[l++],v=o[l++];null!==a?r.setInput(t,v,c,p):t[p]=v}}}function sP(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function n_(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function lP(n,e){const t=jr(e,n);if(fh(t)){const r=t[1];80&t[2]?$o(r,t,r.template,t[8]):t[5]>0&&Ef(t)}}function Ef(n){for(let r=Bh(n);null!==r;r=jh(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];$o(o,s,o.template,s[8])}else s[5]>0&&Ef(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=jr(t[r],n);fh(i)&&i[5]>0&&Ef(i)}}function cP(n,e){const t=jr(e,n),r=t[1];(function uP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),il(r,t,t[8])}function nu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function wf(n){for(;n;){n[2]|=64;const e=Za(n);if(zT(n)&&!e)return n;n=e}return null}function r_(n){!function Af(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Fh(t),i=r[1];$M(i,r,i.template,t)}}(n[8])}function Df(n,e,t){_h(0),e(n,t)}const hP=(()=>Promise.resolve(null))();function i_(n){return n[7]||(n[7]=[])}function s_(n){return n.cleanup||(n.cleanup=[])}function a_(n,e){const t=n[9],r=t?t.get(_s,null):null;r&&r.handleError(e)}function l_(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Yi(n,e,t){const r=Tc(e,n);!function Jv(n,e,t){Pn(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function ru(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Kd(i,a):2==s&&(r=Kd(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const xf=new Pt("INJECTOR",-1);class c_{get(e,t=qa){if(t===qa){const r=new Error(`NullInjectorError: No provider for ${un(e)}!`);throw r.name="NullInjectorError",r}return t}}const Mf=new Pt("Set Injector scope."),sl={},gP={};let Pf;function u_(){return void 0===Pf&&(Pf=new c_),Pf}function d_(n,e=null,t=null,r){const i=h_(n,e,t,r);return i._resolveInjectorDefTypes(),i}function h_(n,e=null,t=null,r){return new mP(n,t,e||u_(),r)}class mP{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&xi(t,a=>this.processProvider(a,e,t)),xi([e],a=>this.processInjectorType(a,[],s)),this.records.set(xf,zo(void 0,this));const o=this.records.get(Mf);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:un(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=qa,r=Bt.Default){this.assertNotDestroyed();const i=Fv(this),s=fs(void 0);try{if(!(r&Bt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function wP(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pt}(e)&&Zd(e);a=l&&this.injectableDefInScope(l)?zo(If(e),sl):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Bt.Self?u_():this.parent).get(e,t=r&Bt.Optional&&t===qa?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[$c]=o[$c]||[]).unshift(un(e)),i)throw o;return function YD(n,e,t,r){const i=n[$c];throw e[kv]&&i.unshift(e[kv]),n.message=function JD(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=un(e);if(Array.isArray(e))i=e.map(un).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):un(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(GD,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[$c]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{fs(s),Fv(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(un(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tn(205,!1)}processInjectorType(e,t,r){if(!(e=Gt(e)))return!1;let i=$m(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=$m(s)),null==i)return!1;if(null!=i.imports&&!a){let p;r.push(o);try{xi(i.imports,v=>{this.processInjectorType(v,t,r)&&(void 0===p&&(p=[]),p.push(v))})}finally{}if(void 0!==p)for(let v=0;v<p.length;v++){const{ngModule:k,providers:$}=p[v];xi($,he=>this.processProvider(he,k,$||gn))}}this.injectorDefTypes.add(o);const l=Vs(o)||(()=>new o);this.records.set(o,zo(l,sl));const c=i.providers;if(null!=c&&!a){const p=e;xi(c,v=>this.processProvider(v,p,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Go(e=Gt(e))?e:Gt(e&&e.provide);const s=function yP(n,e,t){return p_(n)?zo(void 0,n.useValue):zo(function f_(n,e,t){let r;if(Go(n)){const i=Gt(n);return Vs(i)||If(i)}if(p_(n))r=()=>Gt(n.useValue);else if(function bP(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Rh(n.deps||[]));else if(function _P(n){return!(!n||!n.useExisting)}(n))r=()=>_t(Gt(n.useExisting));else{const i=Gt(n&&(n.useClass||n.provide));if(!function CP(n){return!!n.deps}(n))return Vs(i)||If(i);r=()=>new i(...Rh(n.deps))}return r}(n),sl)}(e);if(Go(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=zo(void 0,sl,!0),o.factory=()=>Rh(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===sl&&(t.value=gP,t.value=t.factory()),"object"==typeof t.value&&t.value&&function EP(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Gt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function If(n){const e=Zd(n),t=null!==e?e.factory:Vs(n);if(null!==t)return t;if(n instanceof Pt)throw new tn(204,!1);if(n instanceof Function)return function vP(n){const e=n.length;if(e>0)throw Wa(e,"?"),new tn(204,!1);const t=function RT(n){const e=n&&(n[_c]||n[zm]);if(e){const t=function OT(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new tn(204,!1)}function zo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function p_(n){return null!==n&&"object"==typeof n&&qD in n}function Go(n){return"function"==typeof n}let Yn=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return d_({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return d_({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=qa,n.NULL=new c_,n.\u0275prov=It({token:n,providedIn:"any",factory:()=>_t(xf)}),n.__NG_ELEMENT_ID__=-1,n})();function RP(n,e){Ic(Fh(n)[1],Hn())}function Wo(n){let e=function T_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new tn(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=kf(n.inputs),o.declaredInputs=kf(n.declaredInputs),o.outputs=kf(n.outputs);const a=i.hostBindings;a&&LP(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&kP(n,l),c&&FP(n,c),Xd(n.inputs,i.inputs),Xd(n.declaredInputs,i.declaredInputs),Xd(n.outputs,i.outputs),fi(i)&&i.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Wo&&(t=!1)}}e=Object.getPrototypeOf(e)}!function OP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fc(i.hostAttrs,t=Fc(t,i.hostAttrs))}}(r)}function kf(n){return n===bo?{}:n===gn?[]:n}function kP(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function FP(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function LP(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let iu=null;function qo(){if(!iu){const n=fn.Symbol;if(n&&n.iterator)iu=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(iu=r)}}}return iu}function ol(n){return!!Ff(n)&&(Array.isArray(n)||!(n instanceof Map)&&qo()in n)}function Ff(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ou(n,e,t,r){const i=dt();return cr(i,To(),e)&&(Qt(),Ri(wn(),i,n,e,t,r)),ou}function sn(n,e,t,r,i,s,o,a){const l=dt(),c=Qt(),p=n+20,v=c.firstCreatePass?function $P(n,e,t,r,i,s,o,a,l){const c=e.consts,p=Ho(e,n,4,o||null,ms(c,a));Sf(e,t,p,ms(c,l)),Ic(e,p);const v=p.tViews=tu(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,p),v.queries=e.queries.embeddedTView(p)),p}(p,c,l,e,t,r,i,s,o):c.data[p];Di(v,!1);const k=l[11].createComment("");qc(c,l,k,v),lr(k,l),nu(l,l[p]=n_(k,l,k,v)),Ac(v)&&_f(c,l,v),null!=o&&bf(l,v,a)}function ll(n){return function Ao(n,e){return n[e]}(function dD(){return Vt.lFrame.contextLView}(),20+n)}function vt(n,e=Bt.Default){const t=dt();return null===t?_t(n,e):wv(Hn(),t,Gt(n),e)}function Vf(){throw new Error("invalid")}function wt(n,e,t){const r=dt();return cr(r,To(),e)&&function $r(n,e,t,r,i,s,o,a){const l=Br(e,t);let p,c=e.inputs;!a&&null!=c&&(p=c[r])?(l_(n,t,p,r,i),wc(e)&&function XM(n,e){const t=jr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function qM(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,Pn(s)?s.setProperty(l,r,i):Ch(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Qt(),wn(),r,n,e,r[11],t,!1),wt}function Hf(n,e,t,r,i){const o=i?"class":"style";l_(n,t,e.inputs[o],o,r)}function yt(n,e,t,r){const i=dt(),s=Qt(),o=20+n,a=i[11],l=i[o]=Hh(a,e,function bD(){return Vt.lFrame.currentNamespace}()),c=s.firstCreatePass?function uI(n,e,t,r,i,s,o){const a=e.consts,c=Ho(e,n,2,i,ms(a,s));return Sf(e,t,c,ms(a,o)),null!==c.attrs&&ru(c,c.attrs,!1),null!==c.mergedAttrs&&ru(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];Di(c,!0);const p=c.mergedAttrs;null!==p&&kc(a,l,p);const v=c.classes;null!==v&&Xh(a,l,v);const k=c.styles;return null!==k&&uy(a,l,k),64!=(64&c.flags)&&qc(s,i,l,c),0===function oD(){return Vt.lFrame.elementDepthCount}()&&lr(l,i),function aD(){Vt.lFrame.elementDepthCount++}(),Ac(c)&&(_f(s,i,c),zy(s,c,i)),null!==r&&bf(i,c),yt}function At(){let n=Hn();gh()?mh():(n=n.parent,Di(n,!1));const e=n;!function lD(){Vt.lFrame.elementDepthCount--}();const t=Qt();return t.firstCreatePass&&(Ic(t,n),sh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function AD(n){return 0!=(16&n.flags)}(e)&&Hf(t,e,dt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function TD(n){return 0!=(32&n.flags)}(e)&&Hf(t,e,dt(),e.stylesWithoutHost,!1),At}function ln(n,e,t,r){return yt(n,e,t,r),At(),ln}function Gs(n,e,t){const r=dt(),i=Qt(),s=n+20,o=i.firstCreatePass?function dI(n,e,t,r,i){const s=e.consts,o=ms(s,r),a=Ho(e,n,8,"ng-container",o);return null!==o&&ru(a,o,!0),Sf(e,t,a,ms(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Di(o,!0);const a=r[s]=r[11].createComment("");return qc(i,r,a,o),lr(a,r),Ac(o)&&(_f(i,r,o),zy(i,o,r)),null!=t&&bf(r,o),Gs}function Ws(){let n=Hn();const e=Qt();return gh()?mh():(n=n.parent,Di(n,!1)),e.firstCreatePass&&(Ic(e,n),sh(n)&&e.queries.elementEnd(n)),Ws}function lu(n,e,t){return Gs(n,e,t),Ws(),lu}function ei(){return dt()}function cu(n){return!!n&&"function"==typeof n.then}const q_=function W_(n){return!!n&&"function"==typeof n.subscribe};function Xt(n,e,t,r){const i=dt(),s=Qt(),o=Hn();return function K_(n,e,t,r,i,s,o,a){const l=Ac(r),p=n.firstCreatePass&&s_(n),v=e[8],k=i_(e);let $=!0;if(3&r.type||a){const st=Br(r,e),rt=a?a(st):st,Le=k.length,Ge=a?gt=>a(Nn(gt[r.index])):r.index;if(Pn(t)){let gt=null;if(!a&&l&&(gt=function hI(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=s,gt.__ngLastListenerFn__=s,$=!1;else{s=Uf(r,e,v,s,!1);const Ot=t.listen(rt,i,s);k.push(s,Ot),p&&p.push(i,Ge,Le,Le+1)}}else s=Uf(r,e,v,s,!0),rt.addEventListener(i,s,o),k.push(s),p&&p.push(i,Ge,Le,o)}else s=Uf(r,e,v,s,!1);const he=r.outputs;let je;if($&&null!==he&&(je=he[i])){const st=je.length;if(st)for(let rt=0;rt<st;rt+=2){const En=e[je[rt]][je[rt+1]].subscribe(s),Ye=k.length;k.push(s,En),p&&p.push(i,r.index,Ye,-(Ye+1))}}}(s,i,i[11],o,n,e,!!t,r),Xt}function Y_(n,e,t,r){try{return!1!==t(r)}catch(i){return a_(n,i),!1}}function Uf(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?jr(n.index,e):e;0==(32&e[2])&&wf(a);let l=Y_(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=Y_(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Lt(n=1){return function mD(n){return(Vt.lFrame.contextLView=function vD(n,e){for(;n>0;)e=e[15],n--;return e}(n,Vt.lFrame.contextLView))[8]}(n)}function fI(n,e){let t=null;const r=function EM(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?My(n,s,!0):TM(r,s))return i}else t=i}return t}function cl(n){const e=dt()[16][6];if(!e.projection){const r=e.projection=Wa(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?fI(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function ia(n,e=0,t){const r=dt(),i=Qt(),s=Ho(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),mh(),64!=(64&s.flags)&&function xx(n,e,t){cy(e[11],0,e,t,ey(n,t,e),iy(t.parent||e[6],t,e))}(i,r,s)}function ob(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?mi(s):Ki(s),l=!1;for(;0!==a&&(!1===l||o);){const p=n[a+1];mI(n[a],e)&&(l=!0,n[a+1]=r?cf(p):af(p)),a=r?mi(p):Ki(p)}l&&(n[t+1]=r?af(s):cf(s))}function mI(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Fo(n,e)>=0}const $n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ab(n){return n.substring($n.key,$n.keyEnd)}function lb(n,e){const t=$n.textEnd;return t===e?-1:(e=$n.keyEnd=function bI(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,$n.key=e,t),sa(n,e,t))}function sa(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ji(n,e,t){return yi(n,e,t,!1),Ji}function ur(n,e){return yi(n,e,null,!0),ur}function zf(n){!function _i(n,e,t,r){const i=Qt(),s=Xi(2);i.firstUpdatePass&&pb(i,null,s,r);const o=dt();if(t!==Ht&&cr(o,s,t)){const a=i.data[br()];if(yb(a,r)&&!fb(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Kd(l,t||"")),Hf(i,a,o,t,r)}else!function MI(n,e,t,r,i,s,o,a){i===Ht&&(i=gn);let l=0,c=0,p=0<i.length?i[0]:null,v=0<s.length?s[0]:null;for(;null!==p||null!==v;){const k=l<i.length?i[l+1]:void 0,$=c<s.length?s[c+1]:void 0;let je,he=null;p===v?(l+=2,c+=2,k!==$&&(he=v,je=$)):null===v||null!==p&&p<v?(l+=2,he=p):(c+=2,he=v,je=$),null!==he&&mb(n,e,t,r,he,je,o,a),p=l<i.length?i[l]:null,v=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function xI(n,e,t){if(null==t||""===t)return gn;const r=[],i=Ur(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(Vr,Fi,n,!0)}function Fi(n,e){for(let t=function yI(n){return function ub(n){$n.key=0,$n.keyEnd=0,$n.value=0,$n.valueEnd=0,$n.textEnd=n.length}(n),lb(n,sa(n,0,$n.textEnd))}(e);t>=0;t=lb(e,t))Vr(n,ab(e),!0)}function yi(n,e,t,r){const i=dt(),s=Qt(),o=Xi(2);s.firstUpdatePass&&pb(s,n,o,r),e!==Ht&&cr(i,o,e)&&mb(s,s.data[br()],i,i[11],n,i[o+1]=function PI(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=un(Ur(n)))),n}(e,t),r,o)}function fb(n,e){return e>=n.expandoStartIndex}function pb(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[br()],o=fb(n,t);yb(s,r)&&null===e&&!o&&(e=!1),e=function wI(n,e,t,r){const i=function yh(n){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ul(t=Gf(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Gf(i,n,e,t,r),null===s){let l=function AI(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ki(r))return n[mi(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Gf(null,n,e,l[1],r),l=ul(l,e.attrs,r),function TI(n,e,t,r){n[mi(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function DI(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ul(r,n[s].hostAttrs,t);return ul(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function pI(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=mi(o),l=Ki(o);n[r]=t;let p,c=!1;if(Array.isArray(t)){const v=t;p=v[1],(null===p||Fo(v,p)>0)&&(c=!0)}else p=t;if(i)if(0!==l){const k=mi(n[a+1]);n[r+1]=Zc(k,a),0!==k&&(n[k+1]=lf(n[k+1],r)),n[a+1]=function PM(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Zc(a,0),0!==a&&(n[a+1]=lf(n[a+1],r)),a=r;else n[r+1]=Zc(l,0),0===a?a=r:n[l+1]=lf(n[l+1],r),l=r;c&&(n[r+1]=af(n[r+1])),ob(n,p,r,!0),ob(n,p,r,!1),function gI(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Fo(s,e)>=0&&(t[r+1]=cf(t[r+1]))}(e,p,n,r,s),o=Zc(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function Gf(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=ul(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ul(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Vr(n,o,!!t||e[++s]))}return void 0===n?null:n}function mb(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];uu(function ky(n){return 1==(1&n)}(c)?vb(l,e,t,i,Ki(c),o):void 0)||(uu(s)||function Oy(n){return 2==(2&n)}(c)&&(s=vb(l,null,t,i,a,o)),function Px(n,e,t,r,i){const s=Pn(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Hr.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=Hr.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Tc(br(),t),i,s))}function vb(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),p=c?l[1]:l,v=null===p;let k=t[i+1];k===Ht&&(k=v?gn:void 0);let $=v?Mh(k,r):p===r?k:void 0;if(c&&!uu($)&&($=Mh(l,r)),uu($)&&(a=$,o))return a;const he=n[i+1];i=o?mi(he):Ki(he)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Mh(l,r))}return a}function uu(n){return void 0!==n}function yb(n,e){return 0!=(n.flags&(e?16:32))}function Cn(n,e=""){const t=dt(),r=Qt(),i=n+20,s=r.firstCreatePass?Ho(r,i,1,e,null):r.data[i],o=t[i]=function Vh(n,e){return Pn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);qc(r,t,o,s),Di(s,!1)}function oa(n){return qs("",n,""),oa}function qs(n,e,t){const r=dt(),i=function Ko(n,e,t,r){return cr(n,To(),t)?e+jt(t)+r:Ht}(r,n,e,t);return i!==Ht&&Yi(r,br(),i),qs}const du="en-US";let Vb=du;class h0{}class eR{resolveComponentFactory(e){throw function Q1(n){const e=Error(`No component factory found for ${un(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ca=(()=>{class n{}return n.NULL=new eR,n})();function tR(){return ua(Hn(),dt())}function ua(n,e){return new zr(Br(n,e))}let zr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=tR,n})();function nR(n){return n instanceof zr?n.nativeElement:n}class p0{}let gl=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function iR(){const n=dt(),t=jr(Hn().index,n);return function rR(n){return n[11]}(Ti(t)?t:n)}(),n})(),sR=(()=>{class n{}return n.\u0275prov=It({token:n,providedIn:"root",factory:()=>null}),n})();class da{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const oR=new da("13.3.12"),Zf={};function mu(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Nn(s)),hi(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&mu(l[1],l,c,r)}const o=t.type;if(8&o)mu(n,e,t.child,r);else if(32&o){const a=Nh(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=ly(e,t);if(Array.isArray(a))r.push(...a);else{const l=Za(e[16]);mu(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class ml{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return mu(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(hi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Uh(e,r),Hc(t,r))}this._attachedToViewContainer=!1}Qv(this._lView[1],this._lView)}onDestroy(e){Xy(this._lView[1],this._lView,null,e)}markForCheck(){wf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Tf(n,e,t){const r=e[10];r.begin&&r.begin();try{$o(n,e,n.template,t)}catch(i){throw a_(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bx(n,e){Qa(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new tn(902,"");this._appRef=e}}class aR extends ml{constructor(e){super(e),this._view=e}detectChanges(){r_(this._view)}checkNoChanges(){}get context(){return null}}class g0 extends ca{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=rr(e);return new Qf(t,this.ngModule)}}function m0(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Qf extends h0{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function xM(n){return n.map(DM).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return m0(this.componentDef.inputs)}get outputs(){return m0(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function cR(n,e){return{get:(t,r,i)=>{const s=n.get(t,Zf,i);return s!==Zf||r===Zf?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(p0,nv),a=s.get(sR,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",p=r?function qy(n,e,t){if(Pn(n))return n.selectRootElement(e,t===Ai.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Hh(o.createRenderer(null,this.componentDef),c,function lR(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),v=this.componentDef.onPush?576:528,k=function A_(n,e){return{components:[],scheduler:n||mM,clean:hP,playerHandler:e||null,flags:0}}(),$=tu(0,null,null,1,0,null,null,null,null,null),he=rl(null,$,k,v,null,null,o,l,a,s);let je,st;xc(he);try{const rt=function E_(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=Ho(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(ru(l,c,!0),null!==n&&(kc(i,n,c),null!==l.classes&&Xh(i,n,l.classes),null!==l.styles&&uy(i,n,l.styles)));const p=r.createRenderer(n,e),v=rl(t,Gy(e),null,e.onPush?64:16,t[20],l,r,p,s||null,null);return o.firstCreatePass&&(Bc(Ua(l,t),o,e.type),Qy(o,l),e_(l,t.length,1)),nu(t,v),t[20]=v}(p,this.componentDef,he,o,l);if(p)if(r)kc(l,p,["ng-version",oR.full]);else{const{attrs:Le,classes:Ge}=function MM(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!gi(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);Le&&kc(l,p,Le),Ge&&Ge.length>0&&Xh(l,p,Ge.join(" "))}if(st=hh($,20),void 0!==t){const Le=st.projection=[];for(let Ge=0;Ge<this.ngContentSelectors.length;Ge++){const gt=t[Ge];Le.push(null!=gt?Array.from(gt):null)}}je=function w_(n,e,t,r,i){const s=t[1],o=function YM(n,e,t){const r=Hn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),t_(n,r,e,Uo(n,e,1,null),t));const i=$a(e,n,r.directiveStart,r);lr(i,e);const s=Br(r,e);return s&&lr(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Hn();e.contentQueries(1,o,l.directiveStart)}const a=Hn();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(vs(a.index),Jy(t[1],a,0,a.directiveStart,a.directiveEnd,e),Zy(e,o)),o}(rt,this.componentDef,he,k,[RP]),il($,he,null)}finally{Mc()}return new dR(this.componentType,je,ua(st,he),he,st)}}class dR extends class Z1{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new aR(i),this.componentType=e}get injector(){return new Mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Zi{}class v0{}const ha=new Map;class b0 extends Zi{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new g0(this);const r=Kr(e);this._bootstrapComponents=Ii(r.bootstrap),this._r3Injector=h_(e,t,[{provide:Zi,useValue:this},{provide:ca,useValue:this.componentFactoryResolver}],un(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Yn.THROW_IF_NOT_FOUND,r=Bt.Default){return e===Yn||e===Zi||e===xf?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ep extends v0{constructor(e){super(),this.moduleType=e,null!==Kr(e)&&function fR(n){const e=new Set;!function t(r){const i=Kr(r,!0),s=i.id;null!==s&&(function y0(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${un(e)} vs ${un(e.name)}`)}(s,ha.get(s),r),ha.set(s,r));const o=Ii(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new b0(this.moduleType,e)}}function vl(n,e,t,r){return function S0(n,e,t,r,i,s){const o=e+t;return cr(n,o,i)?function Oi(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function yl(n,e){const t=n[e];return t===Ht?void 0:t}(n,o+1)}(dt(),function _r(){const n=Vt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function tp(n){return e=>{setTimeout(n,void 0,e)}}const dr=class PR extends F{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),c=r;if(e&&"object"==typeof e){const v=e;a=null===(i=v.next)||void 0===i?void 0:i.bind(v),l=null===(s=v.error)||void 0===s?void 0:s.bind(v),c=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}this.__isAsync&&(l=tp(l),a&&(a=tp(a)),c&&(c=tp(c)));const p=super.subscribe({next:a,error:l,complete:c});return e instanceof Re&&e.add(p),p}};function IR(){return this._results[qo()]()}class np{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=qo(),r=np.prototype;r[t]||(r[t]=IR)}get changes(){return this._changes||(this._changes=new dr)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Zr(e);(this._changesDetected=!function LD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Gr=(()=>{class n{}return n.__NG_ELEMENT_ID__=kR,n})();const RR=Gr,OR=class extends RR{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=rl(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),il(t,r,e),new ml(r)}};function kR(){return vu(Hn(),dt())}function vu(n,e){return 4&n.type?new OR(e,n,ua(n,e)):null}let ti=(()=>{class n{}return n.__NG_ELEMENT_ID__=FR,n})();function FR(){return x0(Hn(),dt())}const LR=ti,T0=class extends LR{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ua(this._hostTNode,this._hostLView)}get injector(){return new Mo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Nc(this._hostTNode,this._hostLView);if(_v(e)){const t=xo(e,this._hostLView),r=Do(e);return new Mo(t[1].data[r+8],t)}return new Mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=D0(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function Ga(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const v=t||{};a=v.index,r=v.injector,i=v.projectableNodes,s=v.ngModuleRef}const l=o?e:new Qf(rr(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const k=(o?c:this.parentInjector).get(Zi,null);k&&(s=k)}const p=l.create(c,i,void 0,s);return this.insert(p.hostView,a),p}insert(e,t){const r=e._lView,i=r[1];if(function sD(n){return hi(n[3])}(r)){const p=this.indexOf(e);if(-1!==p)this.detach(p);else{const v=r[3],k=new T0(v,v[6],v[3]);k.detach(k.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Cx(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],Mv(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Ex(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=Gh(s,o),l=r[11],c=Wc(l,o[7]);return null!==c&&function _x(n,e,t,r,i,s){r[0]=i,r[6]=e,Qa(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),Mv(rp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=D0(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Uh(this._lContainer,t);r&&(Hc(rp(this._lContainer),t),Qv(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Uh(this._lContainer,t);return r&&null!=Hc(rp(this._lContainer),t)?new ml(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function D0(n){return n[8]}function rp(n){return n[8]||(n[8]=[])}function x0(n,e){let t;const r=e[n.index];if(hi(r))t=r;else{let i;if(8&n.type)i=Nn(r);else{const s=e[11];i=s.createComment("");const o=Br(n,e);Hs(s,Wc(s,o),i,function Dx(n,e){return Pn(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=n_(r,e,i,n),nu(e,t)}return new T0(t,n,e)}class ip{constructor(e){this.queryList=e,this.matches=null}clone(){return new ip(this.queryList)}setDirty(){this.queryList.setDirty()}}class sp{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new sp(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==O0(e,t).matches&&this.queries[t].setDirty()}}class M0{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class op{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new op(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ap{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ap(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,jR(t,s)),this.matchTNodeWithReadOption(e,t,jc(t,e,s,!1,!1))}else r===Gr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===zr||i===ti||i===Gr&&4&t.type)this.addMatch(t.index,-2);else{const s=jc(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function jR(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function HR(n,e,t,r){return-1===t?function VR(n,e){return 11&n.type?ua(n,e):4&n.type?vu(n,e):null}(e,n):-2===t?function UR(n,e,t){return t===zr?ua(e,n):t===Gr?vu(e,n):t===ti?x0(e,n):void 0}(n,e,r):$a(n,n[1],t,e)}function P0(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:HR(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function lp(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=P0(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],p=e[-l];for(let v=10;v<p.length;v++){const k=p[v];k[17]===k[3]&&lp(k[1],k,c,r)}if(null!==p[9]){const v=p[9];for(let k=0;k<v.length;k++){const $=v[k];lp($[1],$,c,r)}}}}}return r}function zn(n){const e=dt(),t=Qt(),r=uv();_h(r+1);const i=O0(t,r);if(n.dirty&&rv(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?lp(t,e,r,[]):P0(t,e,i,r);n.reset(s,nR),n.notifyOnChanges()}return!0}return!1}function ir(n,e,t){const r=Qt();r.firstCreatePass&&(function R0(n,e,t){null===n.queries&&(n.queries=new op),n.queries.track(new ap(e,t))}(r,new M0(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function I0(n,e,t){const r=new np(4==(4&t));Xy(n,e,r,r.destroy),null===e[19]&&(e[19]=new sp),e[19].queries.push(new ip(r))}(r,dt(),e)}function Gn(){return function $R(n,e){return n[19].queries[e].queryList}(dt(),uv())}function O0(n,e){return n.queries.getByIndex(e)}function up(n,e){return vu(n,e)}function bu(...n){}const mp=new Pt("Application Initializer");let vp=(()=>{class n{constructor(t){this.appInits=t,this.resolve=bu,this.reject=bu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(cu(s))t.push(s);else if(q_(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(_t(mp,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sl=new Pt("AppId",{providedIn:"root",factory:function Y0(){return`${yp()}${yp()}${yp()}`}});function yp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const J0=new Pt("Platform Initializer"),Su=new Pt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Z0=new Pt("appBootstrapListener");let aO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Qi=new Pt("LocaleId",{providedIn:"root",factory:()=>Lo(Qi,Bt.Optional|Bt.SkipSelf)||function lO(){return"undefined"!=typeof $localize&&$localize.locale||du}()});class uO{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Q0=(()=>{class n{compileModuleSync(t){return new ep(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ii(Kr(t).declarations).reduce((o,a)=>{const l=rr(a);return l&&o.push(new Qf(l)),o},[]);return new uO(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hO=(()=>Promise.resolve(0))();function _p(n){"undefined"==typeof Zone?hO.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Wn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dr(!1),this.onMicrotaskEmpty=new dr(!1),this.onStable=new dr(!1),this.onError=new dr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function fO(){let n=fn.requestAnimationFrame,e=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function mO(n){const e=()=>{!function gO(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(fn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Sp(n),n.isCheckStableRunning=!0,bp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Sp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return eS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),tS(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return eS(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),tS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Sp(n),bp(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Wn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,pO,bu,bu);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const pO={};function bp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function eS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tS(n){n._nesting--,bp(n)}class vO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dr,this.onMicrotaskEmpty=new dr,this.onStable=new dr,this.onError=new dr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let Cp=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wn.assertNotInAngularZone(),_p(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_p(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(_t(Wn))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),yO=(()=>{class n{constructor(){this._applications=new Map,Ep.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Ep.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class _O{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let Ep=new _O,Ks=null;const nS=new Pt("AllowMultipleToken"),rS=new Pt("PlatformOnDestroy");class iS{constructor(e,t){this.name=e,this.token=t}}function sS(n,e,t=[]){const r=`Platform: ${e}`,i=new Pt(r);return(s=[])=>{let o=wp();if(!o||o.injector.get(nS,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function EO(n){if(Ks&&!Ks.get(nS,!1))throw new tn(400,"");Ks=n;const e=n.get(oS),t=n.get(J0,null);t&&t.forEach(r=>r())}(function AO(n=[],e){return Yn.create({name:e,providers:[{provide:Mf,useValue:"platform"},{provide:rS,useValue:()=>Ks=null},...n]})}(a,r))}return function wO(n){const e=wp();if(!e)throw new tn(401,"");return e}()}}function wp(){var n;return null!==(n=null==Ks?void 0:Ks.get(oS))&&void 0!==n?n:null}let oS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function TO(n,e){let t;return t="noop"===n?new vO:("zone.js"===n?void 0:n)||new Wn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:Wn,useValue:a}];return a.run(()=>{const c=Yn.create({providers:l,parent:this.injector,name:t.moduleType.name}),p=t.create(c),v=p.injector.get(_s,null);if(!v)throw new tn(402,"");return a.runOutsideAngular(()=>{const k=a.onError.subscribe({next:$=>{v.handleError($)}});p.onDestroy(()=>{Ap(this._modules,p),k.unsubscribe()})}),function DO(n,e,t){try{const r=t();return cu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(v,a,()=>{const k=p.injector.get(vp);return k.runInitializers(),k.donePromise.then(()=>(function t1(n){Lr(n,"Expected localeId to be defined"),"string"==typeof n&&(Vb=n.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Qi,du)||du),this._moduleDoBootstrap(p),p))})})}bootstrapModule(t,r=[]){const i=aS({},r);return function SO(n,e,t){const r=new ep(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Cu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new tn(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tn(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(rS,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(_t(Yn))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function aS(n,e){return Array.isArray(e)?e.reduce(aS,n):Object.assign(Object.assign({},n),e)}let Cu=(()=>{class n{constructor(t,r,i,s){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new pe(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new pe(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Wn.assertNotInAngularZone(),_p(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{Wn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),p.unsubscribe()}});this.isStable=Wd(o,a.pipe(Vm()))}bootstrap(t,r){if(!this._initStatus.done)throw new tn(405,"");let i;i=t instanceof h0?t:this._injector.get(ca).resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function CO(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Zi),a=i.create(Yn.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(Cp,null),p=c&&a.injector.get(yO);return c&&p&&p.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),Ap(this.components,a),p&&p.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new tn(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Ap(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Z0,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(_t(Wn),_t(Yn),_t(_s),_t(vp))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ap(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let cS=!0,Tp=(()=>{class n{}return n.__NG_ELEMENT_ID__=PO,n})();function PO(n){return function IO(n,e,t){if(wc(n)&&!t){const r=jr(n.index,e);return new ml(r,r)}return 47&n.type?new ml(e[16],e):null}(Hn(),dt(),16==(16&n))}class pS{constructor(){}supports(e){return ol(e)}create(e){return new NO(e)}}const LO=(n,e)=>e;class NO{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||LO}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<mS(r,i,s)?t:r,a=mS(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,p=l-i;if(c!=p){for(let k=0;k<c;k++){const $=k<s.length?s[k]:s[k]=0,he=$+k;p<=he&&he<c&&(s[k]=$+1)}s[o.previousIndex]=p-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ol(e))throw new tn(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function UP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[qo()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new BO(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new gS),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class BO{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jO{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class gS{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new jO,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mS(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class vS{constructor(){}supports(e){return e instanceof Map||Ff(e)}create(){return new VO}}class VO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ff(e)))throw new tn(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new HO(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class HO{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yS(){return new Au([new pS])}let Au=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||yS()),deps:[[n,new No,new pi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new tn(901,"")}}return n.\u0275prov=It({token:n,providedIn:"root",factory:yS}),n})();function _S(){return new Cl([new vS])}let Cl=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||_S()),deps:[[n,new No,new pi]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new tn(901,"")}}return n.\u0275prov=It({token:n,providedIn:"root",factory:_S}),n})();const zO=sS(null,"core",[]);let GO=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(_t(Cu))},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({}),n})(),Tu=null;function Cs(){return Tu}const An=new Pt("DocumentToken");let Js=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:function(){return function KO(){return _t(bS)}()},providedIn:"platform"}),n})();const YO=new Pt("Location Initialized");let bS=(()=>{class n extends Js{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cs().getBaseHref(this._doc)}onPopState(t){const r=Cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){SS()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){SS()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_t(An))},n.\u0275prov=It({token:n,factory:function(){return function JO(){return new bS(_t(An))}()},providedIn:"platform"}),n})();function SS(){return!!window.history.pushState}function Ip(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function CS(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function es(n){return n&&"?"!==n[0]?"?"+n:n}let pa=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:function(){return function ZO(n){const e=_t(An).location;return new ES(_t(Js),e&&e.origin||"")}()},providedIn:"root"}),n})();const Rp=new Pt("appBaseHref");let ES=(()=>{class n extends pa{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ip(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+es(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+es(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+es(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_t(Js),_t(Rp,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),QO=(()=>{class n extends pa{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ip(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+es(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+es(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_t(Js),_t(Rp,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),Op=(()=>{class n{constructor(t,r){this._subject=new dr,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=CS(wS(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+es(r))}normalize(t){return n.stripTrailingSlash(function tk(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,wS(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+es(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+es(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=es,n.joinWithSlash=Ip,n.stripTrailingSlash=CS,n.\u0275fac=function(t){return new(t||n)(_t(pa),_t(Js))},n.\u0275prov=It({token:n,factory:function(){return function ek(){return new Op(_t(pa),_t(Js))}()},providedIn:"root"}),n})();function wS(n){return n.replace(/\/index.html$/,"")}function OS(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Vk{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Al=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Vk(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),kS(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{kS(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(vt(ti),vt(Gr),vt(Au))},n.\u0275dir=Xn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function kS(n,e){n.context.$implicit=e.item}let ns=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){FS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){FS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(vt(ti),vt(Gr))},n.\u0275dir=Xn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Hk{constructor(){this.$implicit=null,this.ngIf=null}}function FS(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${un(e)}'.`)}class $p{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Lu=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Xn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),LS=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new $p(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(vt(ti),vt(Gr),vt(Lu,9))},n.\u0275dir=Xn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Nu=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(vt(zr),vt(Cl),vt(gl))},n.\u0275dir=Xn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),BS=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(vt(ti))},n.\u0275dir=Xn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Wi]}),n})(),VS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({}),n})();const HS="browser";let gF=(()=>{class n{}return n.\u0275prov=It({token:n,providedIn:"root",factory:()=>new mF(_t(An),window)}),n})();class mF{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vF(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=US(this.window.history)||US(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function US(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $S{}class Wp extends class yF extends class XO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function qO(n){Tu||(Tu=n)}(new Wp)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _F(){return Tl=Tl||document.querySelector("base"),Tl?Tl.getAttribute("href"):null}();return null==t?null:function bF(n){Bu=Bu||document.createElement("a"),Bu.setAttribute("href",n);const e=Bu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Tl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return OS(document.cookie,e)}}let Bu,Tl=null;const zS=new Pt("TRANSITION_ID"),CF=[{provide:mp,useFactory:function SF(n,e,t){return()=>{t.get(vp).donePromise.then(()=>{const r=Cs(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[zS,An,Yn],multi:!0}];class qp{static init(){!function bO(n){Ep=n}(new qp)}addToWindow(e){fn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},fn.getAllAngularTestabilities=()=>e.getAllTestabilities(),fn.getAllAngularRootElements=()=>e.getAllRootElements(),fn.frameworkStabilizers||(fn.frameworkStabilizers=[]),fn.frameworkStabilizers.push(r=>{const i=fn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?Cs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let EF=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const ju=new Pt("EventManagerPlugins");let Vu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_t(ju),_t(Wn))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();class GS{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Cs().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let WS=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),Dl=(()=>{class n extends WS{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(qS),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(qS))}}return n.\u0275fac=function(t){return new(t||n)(_t(An))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function qS(n){Cs().remove(n)}const Xp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kp=/%COMP%/g;function Hu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Hu(n,i,t):(i=i.replace(Kp,n),t.push(i))}return t}function YS(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Yp=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jp(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ai.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new MF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ai.ShadowDom:return new PF(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Hu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_t(Vu),_t(Dl),_t(Sl))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();class Jp{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Xp[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Xp[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Xp[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hr.DashCase|Hr.Important)?e.style.setProperty(t,r,i&Hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,YS(r)):this.eventManager.addEventListener(e,t,YS(r))}}class MF extends Jp{constructor(e,t,r,i){super(e),this.component=r;const s=Hu(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function TF(n){return"_ngcontent-%COMP%".replace(Kp,n)}(i+"-"+r.id),this.hostAttr=function DF(n){return"_nghost-%COMP%".replace(Kp,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class PF extends Jp{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Hu(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let IF=(()=>{class n extends GS{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_t(An))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const ZS=["alt","control","meta","shift"],OF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},kF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let FF=(()=>{class n extends GS{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cs().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(ZS.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function LF(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&QS.hasOwnProperty(e)&&(e=QS[e]))}return OF[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ZS.forEach(s=>{s!=i&&kF[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_t(An))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const VF=sS(zO,"browser",[{provide:Su,useValue:HS},{provide:J0,useValue:function NF(){Wp.makeCurrent(),qp.init()},multi:!0},{provide:An,useFactory:function jF(){return function tD(n){uh=n}(document),document},deps:[]}]),HF=[{provide:Mf,useValue:"root"},{provide:_s,useFactory:function BF(){return new _s},deps:[]},{provide:ju,useClass:IF,multi:!0,deps:[An,Wn,Su]},{provide:ju,useClass:FF,multi:!0,deps:[An]},{provide:Yp,useClass:Yp,deps:[Vu,Dl,Sl]},{provide:p0,useExisting:Yp},{provide:WS,useExisting:Dl},{provide:Dl,useClass:Dl,deps:[An]},{provide:Cp,useClass:Cp,deps:[Wn]},{provide:Vu,useClass:Vu,deps:[ju,Wn]},{provide:$S,useClass:EF,deps:[]}];let UF=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Sl,useValue:t.appId},{provide:zS,useExisting:Sl},CF]}}}return n.\u0275fac=function(t){return new(t||n)(_t(n,12))},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({providers:HF,imports:[VS,GO]}),n})();"undefined"!=typeof window&&window;let Qp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:function(t){let r=null;return r=t?new(t||n):_t(nC),r},providedIn:"root"}),n})(),nC=(()=>{class n extends Qp{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case rn.NONE:return r;case rn.HTML:return Mi(r,"HTML")?Ur(r):Cy(this._doc,String(r)).toString();case rn.STYLE:return Mi(r,"Style")?Ur(r):r;case rn.SCRIPT:if(Mi(r,"Script"))return Ur(r);throw new Error("unsafe value used in a script context");case rn.URL:return py(r),Mi(r,"URL")?Ur(r):el(String(r));case rn.RESOURCE_URL:if(Mi(r,"ResourceURL"))return Ur(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function jx(n){return new kx(n)}(t)}bypassSecurityTrustStyle(t){return function Vx(n){return new Fx(n)}(t)}bypassSecurityTrustScript(t){return function Hx(n){return new Lx(n)}(t)}bypassSecurityTrustUrl(t){return function Ux(n){return new Nx(n)}(t)}bypassSecurityTrustResourceUrl(t){return function $x(n){return new Bx(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(_t(An))},n.\u0275prov=It({token:n,factory:function(t){let r=null;return r=t?new t:function ZF(n){return new nC(n.get(An))}(_t(Yn)),r},providedIn:"root"}),n})();function Nt(...n){return tr(n,Oa(n))}class Ci extends F{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:QF}=Array,{getPrototypeOf:eL,prototype:tL,keys:nL}=Object;function rC(n){if(1===n.length){const e=n[0];if(QF(e))return{args:e,keys:null};if(function rL(n){return n&&"object"==typeof n&&eL(n)===tL}(e)){const t=nL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:iL}=Array;function eg(n){return Te(e=>function sL(n,e){return iL(e)?n(...e):n(e)}(n,e))}function iC(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function sC(n,e,t){n?cn(t,n,e):e()}function xl(n,e){const t=_(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}const Uu=N(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tg(...n){return function lL(){return _n(1)}()(tr(n,Oa(n)))}function oC(n){return new pe(e=>{Mt(n()).subscribe(e)})}function aC(){return le((n,e)=>{let t=null;n._refCount++;const r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cL extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ve(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;const t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return aC()(this)}}function ws(n,e){return le((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(_e(r,l=>{null==i||i.unsubscribe();let c=0;const p=s++;Mt(n(l,p)).subscribe(i=_e(r,v=>r.next(e?e(l,v,p,c++):v),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function $u(n){return n<=0?()=>yn:le((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dL(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(_e(o,p=>{const v=c++;l=a?n(l,p,v):(a=!0,p),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function lC(n,e){return le(dL(n,e,arguments.length>=2,!0))}function Rr(n,e){return le((t,r)=>{let i=0;t.subscribe(_e(r,s=>n.call(e,s,i++)&&r.next(s)))})}function rs(n){return le((e,t)=>{let s,r=null,i=!1;r=e.subscribe(_e(t,void 0,void 0,o=>{s=Mt(n(o,rs(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ga(n,e){return _(e)?$t(n,e,1):$t(n,1)}function ng(n){return n<=0?()=>yn:le((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cC(n=hL){return le((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hL(){return new Uu}function rg(n){return le((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Zs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rr((i,s)=>n(i,s,r)):Oe,$u(1),t?rg(e):cC(()=>new Uu))}function hr(n,e,t){const r=_(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(_e(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Oe}function uC(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class is{constructor(e,t){this.id=e,this.url=t}}class ig extends is{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ml extends is{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dC extends is{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pL extends is{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gL extends is{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mL extends is{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vL extends is{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yL extends is{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _L extends is{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hC{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fC{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bL{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SL{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CL{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EL{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Kt="primary";class wL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ma(n){return new wL(n)}const gC="ngNavigationCancelingError";function sg(n){const e=Error("NavigationCancelingError: "+n);return e[gC]=!0,e}function TL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Li(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!mC(n[i],e[i]))return!1;return!0}function mC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function vC(n){return Array.prototype.concat.apply([],n)}function yC(n){return n.length>0?n[n.length-1]:null}function sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ni(n){return q_(n)?n:cu(n)?tr(Promise.resolve(n)):Nt(n)}const ML={exact:function SC(n,e,t){if(!eo(n.segments,e.segments)||!zu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!SC(n.children[r],e.children[r],t))return!1;return!0},subset:CC},_C={exact:function PL(n,e){return Li(n,e)},subset:function IL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mC(n[t],e[t]))},ignored:()=>!0};function bC(n,e,t){return ML[t.paths](n.root,e.root,t.matrixParams)&&_C[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function CC(n,e,t){return EC(n,e,e.segments,t)}function EC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!eo(i,t)||e.hasChildren()||!zu(i,t,r))}if(n.segments.length===t.length){if(!eo(n.segments,t)||!zu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!CC(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(eo(n.segments,i)&&zu(n.segments,i,r)&&n.children[Kt])&&EC(n.children[Kt],e,s,r)}}function zu(n,e,t){return e.every((r,i)=>_C[t](n[i].parameters,r.parameters))}class Qs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ma(this.queryParams)),this._queryParamMap}toString(){return kL.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}}class Pl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ma(this.parameters)),this._parameterMap}toString(){return xC(this)}}function eo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wC{}class AC{parse(e){const t=new $L(e);return new Qs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Il(e.root,!0)}`,r=function NL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Wu(t)}=${Wu(i)}`).join("&"):`${Wu(t)}=${Wu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function FL(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kL=new AC;function Gu(n){return n.segments.map(e=>xC(e)).join("/")}function Il(n,e){if(!n.hasChildren())return Gu(n);if(e){const t=n.children[Kt]?Il(n.children[Kt],!1):"",r=[];return sr(n.children,(i,s)=>{s!==Kt&&r.push(`${s}:${Il(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function OL(n,e){let t=[];return sr(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),sr(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[Il(n.children[Kt],!1)]:[`${i}:${Il(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${Gu(n)}/${t[0]}`:`${Gu(n)}/(${t.join("//")})`}}function TC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wu(n){return TC(n).replace(/%3B/gi,";")}function og(n){return TC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qu(n){return decodeURIComponent(n)}function DC(n){return qu(n.replace(/\+/g,"%20"))}function xC(n){return`${og(n.path)}${function LL(n){return Object.keys(n).map(e=>`;${og(e)}=${og(n[e])}`).join("")}(n.parameters)}`}const BL=/^[^\/()?;=#]+/;function Xu(n){const e=n.match(BL);return e?e[0]:""}const jL=/^[^=?&#]+/,HL=/^[^&#]+/;class $L{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new Zt(e,t)),r}parseSegment(){const e=Xu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Pl(qu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Xu(this.remaining);i&&(r=i,this.capture(r))}e[qu(t)]=qu(r)}parseQueryParam(e){const t=function VL(n){const e=n.match(jL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function UL(n){const e=n.match(HL);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=DC(t),s=DC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Kt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Kt]:new Zt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class MC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ag(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ag(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lg(e,this._root).map(t=>t.value)}}function ag(n,e){if(n===e.value)return e;for(const t of e.children){const r=ag(n,t);if(r)return r}return null}function lg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lg(n,t);if(r.length)return r.unshift(e),r}return[]}class ss{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function va(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class PC extends MC{constructor(e,t){super(e),this.snapshot=t,cg(this,e)}toString(){return this.snapshot.toString()}}function IC(n,e){const t=function zL(n,e){const o=new Ku([],{},{},"",{},Kt,e,null,n.root,-1,{});return new OC("",new ss(o,[]))}(n,e),r=new Ci([new Pl("",{})]),i=new Ci({}),s=new Ci({}),o=new Ci({}),a=new Ci(""),l=new to(r,i,o,a,s,Kt,e,t.root);return l.snapshot=t.root,new PC(new ss(l,[]),t)}class to{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Te(e=>ma(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Te(e=>ma(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function GL(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ku{constructor(e,t,r,i,s,o,a,l,c,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=p,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ma(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ma(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class OC extends MC{constructor(e,t){super(t),this.url=e,cg(this,t)}toString(){return kC(this._root)}}function cg(n,e){e.value._routerState=n,e.children.forEach(t=>cg(n,t))}function kC(n){const e=n.children.length>0?` { ${n.children.map(kC).join(", ")} } `:"";return`${n.value}${e}`}function ug(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Li(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Li(e.params,t.params)||n.params.next(t.params),function DL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Li(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Li(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function dg(n,e){const t=Li(n.params,e.params)&&function RL(n,e){return eo(n,e)&&n.every((t,r)=>Li(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dg(n.parent,e.parent))}function Rl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function qL(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rl(n,r,i);return Rl(n,r)})}(n,e,t);return new ss(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Rl(n,a)),o}}const r=function XL(n){return new to(new Ci(n.url),new Ci(n.params),new Ci(n.queryParams),new Ci(n.fragment),new Ci(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Rl(n,s));return new ss(r,i)}}function Yu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ol(n){return"object"==typeof n&&null!=n&&n.outlets}function hg(n,e,t,r,i){let s={};if(r&&sr(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new Qs(t,s,i);const o=FC(n,e,t);return new Qs(o,s,i)}function FC(n,e,t){const r={};return sr(n.children,(i,s)=>{r[s]=i===e?t:FC(i,e,t)}),new Zt(n.segments,r)}class LC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yu(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ol);if(i&&i!==yC(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function NC(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return Ju(n,e,t);const r=function eN(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Ol(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!jC(l,c,o))return s;r+=2}else{if(!jC(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Zt(n.segments.slice(0,r.pathIndex),{});return s.children[Kt]=new Zt(n.segments.slice(r.pathIndex),n.children),Ju(s,0,i)}return r.match&&0===i.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?pg(n,e,t):r.match?Ju(n,0,i):pg(n,e,t)}function Ju(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const r=function QL(n){return Ol(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return sr(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=NC(n.children[o],e,s))}),sr(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Zt(n.segments,i)}}function pg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ol(s)){const l=tN(s.outlets);return new Zt(r,l)}if(0===i&&Yu(t[0])){r.push(new Pl(n.segments[e].path,BC(t[0]))),i++;continue}const o=Ol(s)?s.outlets[Kt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Yu(a)?(r.push(new Pl(o,BC(a))),i+=2):(r.push(new Pl(o,{})),i++)}return new Zt(r,{})}function tN(n){const e={};return sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=pg(new Zt([],{}),0,t))}),e}function BC(n){const e={};return sr(n,(t,r)=>e[r]=`${t}`),e}function jC(n,e,t){return n==t.path&&Li(e,t.parameters)}class rN{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ug(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=va(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),sr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=va(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=va(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=va(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new EL(s.value.snapshot))}),e.children.length&&this.forwardEvent(new SL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ug(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ug(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function iN(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class gg{constructor(e,t){this.routes=e,this.module=t}}function As(n){return"function"==typeof n}function no(n){return n instanceof Qs}const kl=Symbol("INITIAL_VALUE");function Fl(){return ws(n=>function oL(...n){const e=Oa(n),t=Lm(n),{args:r,keys:i}=rC(n);if(0===r.length)return tr([],e);const s=new pe(function aL(n,e,t=Oe){return r=>{sC(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)sC(e,()=>{const c=tr(n[l],e);let p=!1;c.subscribe(_e(r,v=>{s[l]=v,p||(p=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>iC(i,o):Oe));return t?s.pipe(eg(t)):s}(n.map(e=>e.pipe($u(1),function uL(...n){const e=Oa(n);return le((t,r)=>{(e?tg(n,t,e):tg(n,t)).subscribe(r)})}(kl)))).pipe(lC((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==kl?i:(s===kl&&(r=!0),r||!1!==s&&o!==t.length-1&&!no(s)?i:s),e)},kl),Rr(e=>e!==kl),Te(e=>no(e)?e:!0===e),$u(1)))}class uN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ll,this.attachRef=null}}class Ll{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new uN,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let mg=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new dr,this.deactivateEvents=new dr,this.attachEvents=new dr,this.detachEvents=new dr,this.name=s||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new dN(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(vt(Ll),vt(ti),vt(ca),Po("name"),vt(Tp))},n.\u0275dir=Xn({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class dN{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===to?this.route:e===Ll?this.childContexts:this.parent.get(e,t)}}let VC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&ln(0,"router-outlet")},directives:[mg],encapsulation:2}),n})();function HC(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];hN(r,fN(e,r))}}function hN(n,e){n.children&&HC(n.children,e)}function fN(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function vg(n){const e=n.children&&n.children.map(vg),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=VC),t}function ii(n){return n.outlet||Kt}function UC(n,e){const t=n.filter(r=>ii(r)===e);return t.push(...n.filter(r=>ii(r)!==e)),t}const $C={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},$C):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||TL)(t,n,e);if(!s)return Object.assign({},$C);const o={};sr(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Qu(n,e,t,r,i="corrected"){if(t.length>0&&function mN(n,e,t){return t.some(r=>ed(n,e,r)&&ii(r)!==Kt)}(n,t,r)){const o=new Zt(e,function gN(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ii(s)!==Kt){const o=new Zt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[ii(s)]=o}return i}(n,e,r,new Zt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function vN(n,e,t){return t.some(r=>ed(n,e,r))}(n,t,r)){const o=new Zt(n.segments,function pN(n,e,t,r,i,s){const o={};for(const a of r)if(ed(n,t,a)&&!i[ii(a)]){const l=new Zt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[ii(a)]=l}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Zt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ed(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function zC(n,e,t,r){return!!(ii(n)===r||r!==Kt&&ed(e,t,n))&&("**"===n.path||Zu(e,n,t).matched)}function GC(n,e,t){return 0===e.length&&!n.children[t]}class td{constructor(e){this.segmentGroup=e||null}}class WC{constructor(e){this.urlTree=e}}function Nl(n){return xl(new td(n))}function qC(n){return xl(new WC(n))}class SN{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Zi)}apply(){const e=Qu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Kt).pipe(Te(s=>this.createUrlTree(yg(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rs(s=>{if(s instanceof WC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof td?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Kt).pipe(Te(i=>this.createUrlTree(yg(i),e.queryParams,e.fragment))).pipe(rs(i=>{throw i instanceof td?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Zt([],{[Kt]:e}):e;return new Qs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Te(s=>new Zt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return tr(i).pipe(ga(s=>{const o=r.children[s],a=UC(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Te(l=>({segment:l,outlet:s})))}),lC((s,o)=>(s[o.outlet]=o.segment,s),{}),function fL(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rr((i,s)=>n(i,s,r)):Oe,ng(1),t?rg(e):cC(()=>new Uu))}())}expandSegment(e,t,r,i,s,o){return tr(r).pipe(ga(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(rs(c=>{if(c instanceof td)return Nt(null);throw c}))),Zs(a=>!!a),rs((a,l)=>{if(a instanceof Uu||"EmptyError"===a.name)return GC(t,i,s)?Nt(new Zt([],{})):Nl(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return zC(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Nl(t):Nl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qC(s):this.lineralizeSegments(r,s).pipe($t(o=>{const a=new Zt(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:p}=Zu(t,i,s);if(!a)return Nl(t);const v=this.applyRedirectCommands(l,i.redirectTo,p);return i.redirectTo.startsWith("/")?qC(v):this.lineralizeSegments(i,v).pipe($t(k=>this.expandSegment(e,t,r,k.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Nt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(Te(v=>(r._loadedConfig=v,new Zt(i,{})))):Nt(new Zt(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Zu(t,r,i);return o?this.getChildConfig(e,r,i).pipe($t(p=>{const v=p.module,k=p.routes,{segmentGroup:$,slicedSegments:he}=Qu(t,a,l,k),je=new Zt($.segments,$.children);if(0===he.length&&je.hasChildren())return this.expandChildren(v,k,je).pipe(Te(Ge=>new Zt(a,Ge)));if(0===k.length&&0===he.length)return Nt(new Zt(a,{}));const st=ii(r)===s;return this.expandSegment(v,je,k,he,st?Kt:s,!0).pipe(Te(Le=>new Zt(a.concat(Le.segments),Le.children)))})):Nl(t)}getChildConfig(e,t,r){return t.children?Nt(new gg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe($t(i=>i?this.configLoader.load(e.injector,t).pipe(Te(s=>(t._loadedConfig=s,s))):function _N(n){return xl(sg(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Nt(new gg([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Nt(i.map(o=>{const a=e.get(o);let l;if(function oN(n){return n&&As(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!As(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return Ni(l)})).pipe(Fl(),hr(o=>{if(!no(o))return;const a=sg(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Te(o=>!0===o)):Nt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Nt(r);if(i.numberOfChildren>1||!i.children[Kt])return xl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Qs(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return sr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new Zt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function yg(n){const e={};for(const r of Object.keys(n.children)){const s=yg(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function CN(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}class XC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class nd{constructor(e,t){this.component=e,this.route=t}}function wN(n,e,t){const r=n._root;return Bl(r,e?e._root:null,t,[r.value])}function rd(n,e,t){const r=function TN(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Bl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=va(e);return n.children.forEach(o=>{(function DN(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function xN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!eo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!eo(n.url,e.url)||!Li(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dg(n,e)||!Li(n.queryParams,e.queryParams);default:return!dg(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new XC(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Bl(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new nd(a.outlet.component,o))}else o&&jl(e,a,i),i.canActivateChecks.push(new XC(r)),Bl(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),sr(s,(o,a)=>jl(o,t.getContext(a),i)),i}function jl(n,e,t){const r=va(n),i=n.value;sr(r,(s,o)=>{jl(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new nd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class NN{}function KC(n){return new pe(e=>e.error(n))}class jN{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Qu(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Kt);if(null===t)return null;const r=new Ku([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ss(r,t),s=new OC(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=RC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=UC(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=YC(r);return function VN(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return GC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!zC(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const $=r.length>0?yC(r).parameters:{};s=new Ku(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,QC(e),ii(e),e.component,e,JC(t),ZC(t)+r.length,eE(e))}else{const $=Zu(t,e,r);if(!$.matched)return null;o=$.consumedSegments,a=$.remainingSegments,s=new Ku(o,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,QC(e),ii(e),e.component,e,JC(t),ZC(t)+o.length,eE(e))}const l=function HN(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:p}=Qu(t,o,a,l.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);if(0===p.length&&c.hasChildren()){const $=this.processChildren(l,c);return null===$?null:[new ss(s,$)]}if(0===l.length&&0===p.length)return[new ss(s,[])];const v=ii(e)===i,k=this.processSegment(l,c,p,v?Kt:i);return null===k?null:[new ss(s,k)]}}function UN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function YC(n){const e=[],t=new Set;for(const r of n){if(!UN(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=YC(r.children);e.push(new ss(r.value,i))}return e.filter(r=>!t.has(r))}function JC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ZC(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function QC(n){return n.data||{}}function eE(n){return n.resolve||{}}function tE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _g(n){return ws(e=>{const t=n(e);return t?tr(t).pipe(Te(()=>e)):Nt(e)})}class YN extends class KN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bg=new Pt("ROUTES");class nE{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(Te(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new gg(vC(o.injector.get(bg,void 0,Bt.Self|Bt.Optional)).map(vg),o)}),rs(s=>{throw t._loader$=void 0,s}));return t._loader$=new cL(i,()=>new F).pipe(aC()),t._loader$}loadModuleFactory(e){return Ni(e()).pipe($t(t=>t instanceof v0?Nt(t):tr(this.compiler.compileModuleAsync(t))))}}class ZN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function QN(n){throw n}function e2(n,e,t){return e.parse("/")}function rE(n,e){return Nt(null)}const t2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fr=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new F,this.errorHandler=QN,this.malformedUriErrorHandler=e2,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rE,afterPreactivation:rE},this.urlHandlingStrategy=new ZN,this.routeReuseStrategy=new YN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Zi),this.console=o.get(aO);const v=o.get(Wn);this.isNgZoneEnabled=v instanceof Wn&&Wn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function xL(){return new Qs(new Zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nE(o,a,k=>this.triggerEvent(new hC(k)),k=>this.triggerEvent(new fC(k))),this.routerState=IC(this.currentUrlTree,this.rootComponentType),this.transitions=new Ci({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Rr(i=>0!==i.id),Te(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ws(i=>{let s=!1,o=!1;return Nt(i).pipe(hr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ws(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return iE(a.source)&&(this.browserUrlTree=a.extractedUrl),Nt(a).pipe(ws(v=>{const k=this.transitions.getValue();return r.next(new ig(v.id,this.serializeUrl(v.extractedUrl),v.source,v.restoredState)),k!==this.transitions.getValue()?yn:Promise.resolve(v)}),function EN(n,e,t,r){return ws(i=>function bN(n,e,t,r,i){return new SN(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Te(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),hr(v=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:v.urlAfterRedirects})}),function $N(n,e,t,r,i){return $t(s=>function BN(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new jN(n,e,t,r,i,s).recognize();return null===o?KC(new NN):Nt(o)}catch(o){return KC(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(Te(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,v=>this.serializeUrl(v),this.paramsInheritanceStrategy,this.relativeLinkResolution),hr(v=>{if("eager"===this.urlUpdateStrategy){if(!v.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl);this.setBrowserUrl($,v)}this.browserUrlTree=v.urlAfterRedirects}const k=new gL(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);r.next(k)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:$,source:he,restoredState:je,extras:st}=a,rt=new ig(k,this.serializeUrl($),he,je);r.next(rt);const Le=IC($,this.rootComponentType).snapshot;return Nt(Object.assign(Object.assign({},a),{targetSnapshot:Le,urlAfterRedirects:$,extras:Object.assign(Object.assign({},st),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),yn}),_g(a=>{const{targetSnapshot:l,id:c,extractedUrl:p,rawUrl:v,extras:{skipLocationChange:k,replaceUrl:$}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:p,rawUrlTree:v,skipLocationChange:!!k,replaceUrl:!!$})}),hr(a=>{const l=new mL(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Te(a=>Object.assign(Object.assign({},a),{guards:wN(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function MN(n,e){return $t(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function PN(n,e,t,r){return tr(n).pipe($t(i=>function LN(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Nt(s.map(a=>{const l=rd(a,e,i);let c;if(function cN(n){return n&&As(n.canDeactivate)}(l))c=Ni(l.canDeactivate(n,e,t,r));else{if(!As(l))throw new Error("Invalid CanDeactivate guard");c=Ni(l(n,e,t,r))}return c.pipe(Zs())})).pipe(Fl()):Nt(!0)}(i.component,i.route,t,e,r)),Zs(i=>!0!==i,!0))}(o,r,i,n).pipe($t(a=>a&&function sN(n){return"boolean"==typeof n}(a)?function IN(n,e,t,r){return tr(e).pipe(ga(i=>tg(function ON(n,e){return null!==n&&e&&e(new bL(n)),Nt(!0)}(i.route.parent,r),function RN(n,e){return null!==n&&e&&e(new CL(n)),Nt(!0)}(i.route,r),function FN(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function AN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>oC(()=>Nt(o.guards.map(l=>{const c=rd(l,o.node,t);let p;if(function lN(n){return n&&As(n.canActivateChild)}(c))p=Ni(c.canActivateChild(r,n));else{if(!As(c))throw new Error("Invalid CanActivateChild guard");p=Ni(c(r,n))}return p.pipe(Zs())})).pipe(Fl())));return Nt(s).pipe(Fl())}(n,i.path,t),function kN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Nt(!0);const i=r.map(s=>oC(()=>{const o=rd(s,e,t);let a;if(function aN(n){return n&&As(n.canActivate)}(o))a=Ni(o.canActivate(e,n));else{if(!As(o))throw new Error("Invalid CanActivate guard");a=Ni(o(e,n))}return a.pipe(Zs())}));return Nt(i).pipe(Fl())}(n,i.route,t))),Zs(i=>!0!==i,!0))}(r,s,n,e):Nt(a)),Te(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),hr(a=>{if(no(a.guardsResult)){const c=sg(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new vL(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Rr(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),_g(a=>{if(a.guards.canActivateChecks.length)return Nt(a).pipe(hr(l=>{const c=new yL(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),ws(l=>{let c=!1;return Nt(l).pipe(function zN(n,e){return $t(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Nt(t);let s=0;return tr(i).pipe(ga(o=>function GN(n,e,t,r){return function WN(n,e,t,r){const i=tE(n);if(0===i.length)return Nt({});const s={};return tr(i).pipe($t(o=>function qN(n,e,t,r){const i=rd(n,e,r);return Ni(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(hr(a=>{s[o]=a}))),ng(1),$t(()=>tE(s).length===i.length?Nt(s):yn))}(n._resolve,n,e,r).pipe(Te(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),RC(n,t).resolve),null)))}(o.route,r,n,e)),hr(()=>s++),ng(1),$t(o=>s===i.length?Nt(t):yn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),hr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),hr(l=>{const c=new _L(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),_g(a=>{const{targetSnapshot:l,id:c,extractedUrl:p,rawUrl:v,extras:{skipLocationChange:k,replaceUrl:$}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:p,rawUrlTree:v,skipLocationChange:!!k,replaceUrl:!!$})}),Te(a=>{const l=function WL(n,e,t){const r=Rl(n,e._root,t?t._root:void 0);return new PC(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),hr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Te(r=>(new rN(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),hr({next(){s=!0},complete(){s=!0}}),uC(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),rs(a=>{if(o=!0,function AL(n){return n&&n[gC]}(a)){const l=no(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new dC(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const p=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),v={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iE(i.source)};this.scheduleNavigation(p,"imperative",null,v,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new pL(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return yn}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){HC(t),this.config=t.map(vg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,p=l?this.currentUrlTree.fragment:o;let v=null;switch(a){case"merge":v=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=s||null}return null!==v&&(v=this.removeEmptyProps(v)),function KL(n,e,t,r,i){if(0===t.length)return hg(e.root,e.root,e.root,r,i);const s=function YL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LC(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return sr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new LC(t,e,r)}(t);if(s.toRoot())return hg(e.root,e.root,new Zt([],{}),r,i);const o=function JL(n,e,t){if(n.isAbsolute)return new fg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new fg(s,s===e.root,0)}const r=Yu(n.commands[0])?0:1;return function ZL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new fg(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Ju(o.segmentGroup,o.index,s.commands):NC(o.segmentGroup,o.index,s.commands);return hg(e.root,o.segmentGroup,a,r,i)}(c,this.currentUrlTree,t,v,null!=p?p:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=no(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function r2(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},t2):!1===r?Object.assign({},n2):r,no(t))return bC(this.currentUrlTree,t,i);const s=this.parseUrl(t);return bC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ml(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,p,v;o?(c=o.resolve,p=o.reject,v=o.promise):v=new Promise((he,je)=>{c=he,p=je});const k=++this.navigationId;let $;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),$=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):$=0,this.setTransition({id:k,targetPageId:$,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:p,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(he=>Promise.reject(he))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new dC(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Vf()},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function iE(n){return"imperative"!==n}class sE{}class oE{preload(e,t){return Nt(null)}}let aE=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new nE(i,r,l=>t.triggerEvent(new hC(l)),l=>t.triggerEvent(new fC(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Rr(t=>t instanceof Ml),ga(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zi);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return tr(i).pipe(_n(),Te(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Nt(r._loadedConfig):this.loader.load(t.injector,r)).pipe($t(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_t(fr),_t(Q0),_t(Yn),_t(sE))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),Eg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ig?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ml&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new pC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Vf()},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const ro=new Pt("ROUTER_CONFIGURATION"),lE=new Pt("ROUTER_FORROOT_GUARD"),a2=[Op,{provide:wC,useClass:AC},{provide:fr,useFactory:function h2(n,e,t,r,i,s,o={},a,l){const c=new fr(null,n,e,t,r,i,vC(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function f2(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(p=>{var v,k;null===(v=console.group)||void 0===v||v.call(console,`Router Event: ${p.constructor.name}`),console.log(p.toString()),console.log(p),null===(k=console.groupEnd)||void 0===k||k.call(console)}),c},deps:[wC,Ll,Op,Yn,Q0,bg,ro,[class JN{},new pi],[class XN{},new pi]]},Ll,{provide:to,useFactory:function p2(n){return n.routerState.root},deps:[fr]},aE,oE,class o2{preload(e,t){return t().pipe(rs(()=>Nt(null)))}},{provide:ro,useValue:{enableTracing:!1}}];function l2(){return new iS("Router",fr)}let cE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[a2,uE(t),{provide:lE,useFactory:d2,deps:[[fr,new pi,new No]]},{provide:ro,useValue:r||{}},{provide:pa,useFactory:u2,deps:[Js,[new zc(Rp),new pi],ro]},{provide:Eg,useFactory:c2,deps:[fr,gF,ro]},{provide:sE,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:oE},{provide:iS,multi:!0,useFactory:l2},[wg,{provide:mp,multi:!0,useFactory:g2,deps:[wg]},{provide:dE,useFactory:m2,deps:[wg]},{provide:Z0,multi:!0,useExisting:dE}]]}}static forChild(t){return{ngModule:n,providers:[uE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_t(lE,8),_t(fr,8))},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({}),n})();function c2(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Eg(n,e,t)}function u2(n,e,t={}){return t.useHash?new QO(n,e):new ES(n,e)}function d2(n){return"guarded"}function uE(n){return[{provide:FD,multi:!0,useValue:n},{provide:bg,multi:!0,useValue:n}]}let wg=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new F}appInitializer(){return this.injector.get(YO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(fr),o=this.injector.get(ro);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Nt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ro),i=this.injector.get(aE),s=this.injector.get(Eg),o=this.injector.get(fr),a=this.injector.get(Cu);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_t(Yn))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function g2(n){return n.appInitializer.bind(n)}function m2(n){return n.bootstrapListener.bind(n)}const dE=new Pt("Router Initializer");function hE(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function Rn(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){hE(s,r,i,o,a,"next",l)}function a(l){hE(s,r,i,o,a,"throw",l)}o(void 0)})}}class _a{createDataView(e){let t=new ArrayBuffer(5+e),r=new DataView(t);return r.setInt32(0,e),r.setInt8(4,this.getType()),r}}var hn=(()=>{return(n=hn||(hn={}))[n.STREAM_INIT=0]="STREAM_INIT",n[n.STREAM_START=1]="STREAM_START",n[n.STREAM_PAGE_ACTION=2]="STREAM_PAGE_ACTION",n[n.STREAM_PAGE_ACTIONS=3]="STREAM_PAGE_ACTIONS",n[n.STREAM_PAGE_CREATED=4]="STREAM_PAGE_CREATED",n[n.STREAM_PAGE_DELETED=5]="STREAM_PAGE_DELETED",n[n.STREAM_PAGE_SELECTED=6]="STREAM_PAGE_SELECTED",n[n.STREAM_DOCUMENT_CREATED=7]="STREAM_DOCUMENT_CREATED",n[n.STREAM_DOCUMENT_CLOSED=8]="STREAM_DOCUMENT_CLOSED",n[n.STREAM_DOCUMENT_SELECTED=9]="STREAM_DOCUMENT_SELECTED",n[n.STREAM_SPEECH_PUBLISHED=10]="STREAM_SPEECH_PUBLISHED",hn;var n})();class id extends _a{constructor(e,t){super(),this.documentId=e,this.pageNumber=t}getType(){return hn.STREAM_PAGE_ACTIONS}toByteBuffer(){let e=this.createDataView(12);return e.setBigInt64(5,this.documentId),e.setInt32(13,this.pageNumber),e.buffer}}class io extends id{constructor(e,t){super(e,t)}getType(){return hn.STREAM_PAGE_SELECTED}}let Dn=(()=>{class n{createDataView(t){let r=0;this.keyEvent&&(t+=9,r|=n.KEY_EVENT_MASK);let i=this.createActionBuffer(t+4),s=i.dataView,o=i.byteOffset;if(s.setInt32(o,r),o+=4,this.keyEvent){s.setInt32(o,Number(this.keyEvent.code)),o+=4,s.setInt32(o,0),o+=4;let a=-1;switch(this.keyEvent.type){case"keydown":a=0;break;case"keyup":a=1;break;case"keypressed":a=2}-1===a&&console.error("KeyboardEvent type is not assigned correctly!"),s.setInt8(o,a),o++}return{dataView:s,byteOffset:o}}createActionBuffer(t){let r=new ArrayBuffer(t+9),i=new DataView(r);return i.setInt32(0,t+5),i.setInt8(4,this.getType()),i.setInt32(5,this.timestamp),{dataView:i,byteOffset:9}}}return n.KEY_EVENT_MASK=1,n})();var ut=(()=>{return(n=ut||(ut={}))[n.TOOL_BEGIN=0]="TOOL_BEGIN",n[n.TOOL_EXECUTE=1]="TOOL_EXECUTE",n[n.TOOL_END=2]="TOOL_END",n[n.PEN=3]="PEN",n[n.HIGHLIGHTER=4]="HIGHLIGHTER",n[n.POINTER=5]="POINTER",n[n.ARROW=6]="ARROW",n[n.LINE=7]="LINE",n[n.RECTANGLE=8]="RECTANGLE",n[n.ELLIPSE=9]="ELLIPSE",n[n.TEXT=10]="TEXT",n[n.TEXT_CHANGE=11]="TEXT_CHANGE",n[n.TEXT_FONT_CHANGE=12]="TEXT_FONT_CHANGE",n[n.TEXT_LOCATION_CHANGE=13]="TEXT_LOCATION_CHANGE",n[n.TEXT_REMOVE=14]="TEXT_REMOVE",n[n.TEXT_SELECTION=15]="TEXT_SELECTION",n[n.LATEX=16]="LATEX",n[n.LATEX_FONT_CHANGE=17]="LATEX_FONT_CHANGE",n[n.UNDO=18]="UNDO",n[n.REDO=19]="REDO",n[n.CLONE=20]="CLONE",n[n.SELECT=21]="SELECT",n[n.SELECT_GROUP=22]="SELECT_GROUP",n[n.RUBBER=23]="RUBBER",n[n.CLEAR_SHAPES=24]="CLEAR_SHAPES",n[n.PANNING=25]="PANNING",n[n.EXTEND_VIEW=26]="EXTEND_VIEW",n[n.ZOOM=27]="ZOOM",n[n.ZOOM_OUT=28]="ZOOM_OUT",n[n.NEXT_PAGE=29]="NEXT_PAGE",n[n.KEY=30]="KEY",n[n.STATIC=31]="STATIC",n[n.PAGE=32]="PAGE",n[n.RUBBER_EXT=33]="RUBBER_EXT",n[n.TEXT_SELECTION_EXT=34]="TEXT_SELECTION_EXT",n[n.CURSOR=35]="CURSOR",ut;var n})();class sd extends Dn{constructor(e){super(),this.pageNumber=e}execute(e){e.setPageNumber(this.pageNumber)}toByteBuffer(){let e=this.createDataView(12),t=e.dataView,r=e.byteOffset;return t.setBigInt64(r,BigInt(0)),t.setInt32(r+8,this.pageNumber),t.buffer}getType(){return ut.PAGE}}class Ag extends _a{constructor(e,t,r,i){super(),this.documentId=e,this.documentType=t,this.documentTitle=r,this.documentFile=i}getType(){return hn.STREAM_PAGE_ACTIONS}toByteBuffer(){let e=[],t=[],r=0,i=0,o=8;if(null!=this.documentTitle){for(let p=0;p<this.documentTitle.length;++p){let v=this.documentTitle.charCodeAt(p);e=e.concat([v])}r=e.length,o+=e.length}if(null!=this.documentFile){for(let p=0;p<this.documentFile.length;++p){let v=this.documentFile.charCodeAt(p);t=t.concat([v])}i=t.length,o+=t.length}let a=new ArrayBuffer(22+o),l=new DataView(a);l.setInt32(0,14+o),l.setInt8(4,this.getType()),l.setBigInt64(5,this.documentId),l.setInt8(13,this.documentType),l.setInt32(14,r),l.setInt32(18,i),l.setInt32(22,0);let c=26;for(const p in e)l.setUint8(c,e[p]),c++;for(const p in t)l.setUint8(c,t[p]),c++;return l.buffer}}class ba extends Ag{constructor(e,t,r,i){super(e,t,r,i)}getType(){return hn.STREAM_DOCUMENT_SELECTED}}class Tg extends id{constructor(e,t,r){super(e,t),this.action=r}getType(){return hn.STREAM_PAGE_ACTION}}class fE extends Ag{constructor(e,t,r,i){super(e,t,r,i)}getType(){return hn.STREAM_DOCUMENT_CLOSED}}class Vl{constructor(e,t,r,i){this._page=e,this._changeType=t,r&&(this._shape=r),i&&(this._dirtyRegion=i)}get changeType(){return this._changeType}get page(){return this._page}get shape(){return this._shape}get dirtyRegion(){return this._dirtyRegion}}var Wr=(()=>{return(n=Wr||(Wr={})).Clear="Clear",n.ShapeAdded="ShapeAdded",n.ShapeRemoved="ShapeRemoved",n.ShapeModified="ShapeModified",n.PageTransform="PageTransform",Wr;var n})();class od{constructor(){this.listeners=[],this.listenersOncer=[]}subscribe(e){return this.listeners.push(e),{dispose:()=>this.unsubscribe(e)}}subscribeOnce(e){this.listenersOncer.push(e)}unsubscribe(e){const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}publish(e){this.listeners.forEach(t=>t(e)),this.listenersOncer.forEach(t=>t(e)),this.listenersOncer=[]}pipe(e){return this.subscribe(t=>e.publish(t))}}class y2{constructor(e){this.undoActions=[],this.redoActions=[],this.model=e}executeAction(e){this.undoActions.push(e),this.redoActions.length=0,e.execute(this.model)}undo(){if(this.undoActions.length<1)return;const e=this.undoActions.pop();e&&(this.redoActions.push(e),e.undo(this.model))}redo(){if(this.redoActions.length<1)return;const e=this.redoActions.pop();e&&(this.undoActions.push(e),e.redo(this.model))}clear(){this.undoActions.length=0,this.redoActions.length=0}}class wr{constructor(e,t){this._shape=e,this._dirtyRegion=t}get shape(){return this._shape}get dirtyRegion(){return this._dirtyRegion}}class Ar{constructor(e,t,r,i){this.set(e,t,r,i)}set(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i}isEmpty(){return this.width<=0||this.height<=0}containsPoint(e){const t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t<this.x+this.width&&r<this.y+this.height}containsRect(e){if(this.isEmpty()||e.isEmpty())return!1;const t=e.x,r=e.y,o=this.x,a=this.y;return t>=o&&r>=a&&t+e.width<=o+this.width&&r+e.height<=a+this.height}intersectsLine(e,t,r,i){const s=this.x,o=this.x+this.width,a=this.y,l=this.y+this.height;let c=this.computeCode(e,t,s,o,a,l),p=this.computeCode(r,i,s,o,a,l);for(;;){if(!(c|p))return!0;if(c&p)return!1;{let k,$,v=c||p;8&v?(k=e+(r-e)*(l-t)/(i-t),$=l):4&v?(k=e+(r-e)*(a-t)/(i-t),$=a):2&v?($=t+(i-t)*(o-e)/(r-e),k=o):1&v&&($=t+(i-t)*(s-e)/(r-e),k=s),void 0!==k&&void 0!==$&&v==c?c=this.computeCode(e=k,t=$,s,o,a,l):void 0!==k&&void 0!==$&&(p=this.computeCode(r=k,i=$,s,o,a,l))}}}intersection(e){const t=Math.max(this.x,e.x),r=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width)-t,s=Math.min(this.y+this.height,e.y+e.height)-r;return i<=0||s<=0?null:new Ar(t,r,i,s)}union(e){const t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);this.set(t,r,i-t,s-r)}equals(e){return!!e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}toString(){return`[${this.x}, ${this.y}, ${this.height}, ${this.width}]`}static empty(){return new Ar(0,0,0,0)}computeCode(e,t,r,i,s,o){let a=0;return e<r?a|=1:e>i&&(a|=2),t<s?a|=4:t>o&&(a|=8),a}}class ad{constructor(e){this._points=[],this._bounds=Ar.empty(),this.changeEvent=new od,this._handle=e}get handle(){return this._handle}addPoint(e){const t=this._points.length;let r=null;return t>0&&(r=this._points[t-1]),!(r&&e.equals(r)||(this._points.push(e),0))}get points(){return this._points}contains(e){return this._bounds.containsPoint(e)}intersects(e){return null!=this._bounds.intersection(e)}get bounds(){return this._bounds}getKeyEvent(){return this.keyEvent}setKeyEvent(e){this.keyEvent=e}isSelected(){return this.selected}setSelected(e){this.selected!=e&&(this.selected=e,this.fireShapeEvent(new wr(this,this.bounds)))}moveByDelta(e){for(let t of this._points)t.subtract(e);this.updateBoundsByDelta(e),this.fireShapeEvent(new wr(this,this.bounds))}clone(){return Object.create(this)}addChangeListener(e){return this.changeEvent.subscribe(e)}removeChangeListener(e){this.changeEvent.unsubscribe(e)}updateBoundsByDelta(e){this.bounds.x-=e.x,this.bounds.y-=e.y}fireShapeEvent(e){this.changeEvent.publish(e)}}class yE extends ad{constructor(e){super(0),this.page=e,this.updateBounds()}getPage(){return this.page}setPageRect(e){this.bounds.equals(e)||(this.bounds.set(e.x,e.y,e.width,e.height),this.fireShapeEvent(new wr(this,this.bounds)))}updateBounds(){this.bounds.set(0,0,1,1)}}class _E{constructor(e,t){this.actionHandler=new y2(this),this.changeEvent=new od,this.shapes=[],this.document=e,this.pageNumber=t,this.slideShape=new yE(this),this.slideShape.addChangeListener(this.onSlideTransform.bind(this)),this.shapeChangeListener=this.onShapeModified.bind(this)}render(e,t,r){return this.document.renderPage(this.pageNumber,e,t,r)}renderText(e,t){this.document.renderPageText(this.pageNumber,e,t,this.getSlideShape().bounds)}addChangeListener(e){return this.changeEvent.subscribe(e)}removeChangeListener(e){this.changeEvent.unsubscribe(e)}addShape(e){const t=this.shapes.length;this.shapes.push(e)>t&&(e.addChangeListener(this.shapeChangeListener),this.firePageEvent(new Vl(this,Wr.ShapeAdded,e)))}removeShape(e){const t=this.shapes.indexOf(e);t>-1&&this.shapes.splice(t,1).length>0&&(e.removeChangeListener(this.shapeChangeListener),this.firePageEvent(new Vl(this,Wr.ShapeRemoved,e)))}getSlideShape(){return this.slideShape}getShapes(){return this.shapes}hasShapes(){return this.shapes.length>0}addAction(e){this.actionHandler.executeAction(e)}undo(){this.actionHandler.undo()}redo(){this.actionHandler.redo()}clear(){this.actionHandler.clear(),this.shapes.length=0,this.firePageEvent(new Vl(this,Wr.Clear,void 0))}getPageNumber(){return this.pageNumber}getDocument(){return this.document}onSlideTransform(e){this.firePageEvent(new Vl(this,Wr.PageTransform,e.shape,e.dirtyRegion))}onShapeModified(e){this.firePageEvent(new Vl(this,Wr.ShapeModified,e.shape,e.dirtyRegion))}firePageEvent(e){this.changeEvent.publish(e)}getPageBounds(){var e=this;return Rn(function*(){return yield e.document.getPageBounds(e.pageNumber)})()}}class bE{constructor(){}getDocumentId(){return this.documentId}setDocumentId(e){this.documentId=e}getPageCount(){return this.pages.length}getPage(e){if(e<0||e>this.pages.length-1)throw new Error(`Page number ${e} out of bounds.`);return this.pages[e]}}class b2{render(e,t,r){return Rn(function*(){return new Promise(i=>{e.canvas.width=r.width,e.canvas.height=r.height,e.fillStyle="white",e.fillRect(r.x,r.y,r.width,r.height),i(e.canvas)})})()}}class Hl extends bE{constructor(){super(),this.renderer=new b2,this.loadPages()}getPageBounds(e){return new Promise(t=>{t(new Ar(0,0,640,480))})}getPageText(e){return Rn(function*(){return Promise.resolve("")})()}renderPage(e,t,r,i){return this.renderer.render(t,r,i)}renderPageText(e,t,r,i){}loadPages(){this.pages=[];for(let e=0;e<300;e++)this.pages.push(new _E(this,e))}}class ld extends Ag{constructor(e,t,r,i){super(e,t,r,i)}getType(){return hn.STREAM_DOCUMENT_CREATED}}class S2 extends id{constructor(e,t){super(e,t)}getType(){return hn.STREAM_PAGE_CREATED}}class C2 extends id{constructor(e,t){super(e,t)}getType(){return hn.STREAM_PAGE_DELETED}}class E2 extends _a{constructor(e,t){super(),this.documentId=e,this.recordedPage=t}getType(){return hn.STREAM_PAGE_ACTIONS}toByteBuffer(){let t=this.createDataView([].length+8);return t.setBigInt64(5,this.documentId),t.buffer}}class w2 extends _a{constructor(e){super(),this.courseId=e}getType(){return hn.STREAM_START}toByteBuffer(){let e=this.createDataView(8);return e.setBigInt64(5,BigInt(this.courseId)),e.buffer}}class A2 extends _a{constructor(e){super(),this.publisherId=e}getType(){return hn.STREAM_SPEECH_PUBLISHED}toByteBuffer(){return new ArrayBuffer(12)}}class T2 extends A2{constructor(e){super(e)}getType(){return hn.STREAM_SPEECH_PUBLISHED}}class or{constructor(e,t){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}distance(e){const t=e.x-this.x,r=e.y-this.y;return Math.sqrt(t*t+r*r)}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return this.x*=e,this.y*=e,this}normalize(){const e=Math.sqrt(this.x*this.x+this.y*this.y);return this.x/=e,this.y/=e,this}equals(e){return!!e&&this.x===e.x&&this.y===e.y}}class Or extends or{constructor(e,t,r){super(e,t),this.p=r}clone(){return new Or(this.x,this.y,this.p)}equals(e){return!!e&&this.x===e.x&&this.y===e.y&&this.p===e.p}static createZero(){return new Or(0,0,0)}}class Ts extends Dn{constructor(e,t){super(),this.shapeHandle=e,t&&(this.brush=t)}toByteBuffer(){let t=this.createDataView(this.brush?17:4),r=t.dataView,i=t.byteOffset;return r.setInt32(i,this.shapeHandle),this.brush&&(r.setInt8(i+4,this.brush.color.a),r.setInt8(i+5,this.brush.color.r),r.setInt8(i+6,this.brush.color.g),r.setInt8(i+7,this.brush.color.b),r.setInt8(i+8,0),r.setFloat64(i+9,this.brush.width)),r.buffer}}class so{begin(e,t){}execute(e){}end(e){}}class SE{constructor(e){this.shapes=e}}class os extends SE{constructor(e){super(e)}execute(e){for(let t of this.shapes)e.addShape(t)}undo(e){for(let t of this.shapes)e.removeShape(t)}redo(e){this.execute(e)}}class Bi{constructor(e,t,r,i){this.set(e,t,r,i)}set(e,t,r,i){this.x1=e,this.y1=t,this.x2=r,this.y2=i}getStartPoint(){return new or(this.x1,this.y1)}getEndPoint(){return new or(this.x2,this.y2)}distance(e,t){const r=this.x2-this.x1,i=this.y2-this.y1,s=Math.sqrt(r*r+i*i);return Math.abs(((this.y1-this.y2)*e+r*t+(this.x1*this.y2-this.x2*this.y1))/s)}intersects(e){return Bi.intersects(this.x1,this.y1,this.x2,this.y2,e.x1,e.y1,e.x2,e.y2)}getIntersectionPoint(e,t,r,i){const s=(i-t)*(this.x2-this.x1)-(r-e)*(this.y2-this.y1);if(Math.abs(s)<.01)return null;const l=((r-e)*(this.y1-t)-(i-t)*(this.x1-e))/s,c=((this.x2-this.x1)*(this.y1-t)-(this.y2-this.y1)*(this.x1-e))/s;if(l>=0&&l<=1&&c>=0&&c<=1){const p=this.y2-this.y1,v=this.x1-this.x2,k=p*this.x1+v*this.y1,$=i-t,he=e-r,je=$*e+he*t;return new or((he*k-v*je)/s,(p*je-$*k)/s)}return null}static intersects(e,t,r,i,s,o,a,l){const c=(l-o)*(r-e)-(a-s)*(i-t);if(0==c)return!1;const k=((a-s)*(t-o)-(l-o)*(e-s))/c,$=((r-e)*(t-o)-(i-t)*(e-s))/c;return k>=0&&k<=1&&$>=0&&$<=1}}class oo extends ad{constructor(e,t){super(e),this.minPoint=new or(0,0),this.maxPoint=new or(0,0),t&&(this._brush=t)}get brush(){return this._brush}addPoint(e){const t=super.addPoint(e);return t&&(this.minPoint.x=Math.min(this.minPoint.x,e.x),this.minPoint.y=Math.min(this.minPoint.y,e.y),this.maxPoint.x=Math.max(this.maxPoint.x,e.x),this.maxPoint.y=Math.max(this.maxPoint.y,e.y),this.updateBounds(),this.fireShapeEvent(new wr(this,this.bounds))),t}contains(e){const t=this.brush.width/2;if(0===this.points.length)return!1;if(1===this.points.length)return this.points[0].distance(e)<=t;const r=new Bi(e.x+t,e.y+t,e.x-t,e.y-t),i=new Bi(e.x-t,e.y+t,e.x+t,e.y-t);let s=0,o=this.points[s++],a=null,l=null;for(;s<this.points.length;){if(a=this.points[s++],l=new Bi(o.x,o.y,a.x,a.y),l.intersects(r)||l.intersects(i))return!0;o=a}return!1}intersects(e){if(0===this.points.length)return!1;if(1===this.points.length)return e.containsPoint(this.points[0]);let t=0,r=this.points[t++],i=null;for(;t<this.points.length;){if(i=this.points[t++],e.intersectsLine(r.x,r.y,i.x,i.y))return!0;r=i}return!1}updateBounds(){this.bounds.set(this.minPoint.x,this.minPoint.y,this.maxPoint.x-this.minPoint.x,this.maxPoint.y-this.minPoint.y)}clone(){const e=new oo(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class Dg{constructor(e){this.vector=new or(0,0),this.normal=new or(0,0),this.miter=new or(0,0),this.offsetA=new or(0,0),this.offsetB=new or(0,0),this.lastLineTop=new Bi(0,0,0,0),this.lastLineBottom=new Bi(0,0,0,0),this.A=new Array,this.B=new Array,this.points=new Array,this.strokeWidth=e}getStrokeList(){if(0===this.points.length)return null;const e=new Array;return 1==this.points.length?(this.capOnePoint(e,this.points[0],this.strokeWidth),e):(e.push(...this.A),this.capEndpoint(e,this.points[1],this.points[0],!1),e.push(...this.B),e)}addPoint(e){this.points.push(e.clone());const t=this.points.length;if(t>1){t>2&&this.points.shift();const r=this.points[0];0===this.A.length||0===this.B.length?(this.capEndpoint(this.A,r,e,!1),this.beginPath(r,e)):this.advance(r,e)}}intersects(e){return 0!==this.points.length&&(1===this.points.length?e.containsPoint(this.points[0]):!(!this.intersectsRect(this.A,e)&&!this.intersectsRect(this.B,e)))}moveByDelta(e){for(let t of this.A)t.subtract(e);for(let t of this.B)t.subtract(e);for(let t of this.points)t.subtract(e)}clone(){const e=new Dg(this.strokeWidth);for(let t of this.A)e.A.push(t.clone());for(let t of this.B)e.B.push(t.clone());for(let t of this.points)e.points.push(t.clone());return e}advance(e,t){this.advancePath(this.A,e,t,!1),this.advancePath(this.B,e,t,!0)}advancePath(e,t,r,i){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y),this.offset(this.offsetA,this.miter,i),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetB.set(r.x,r.y),this.offset(this.offsetB,this.miter,i);const s=new Bi(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),o=i?this.lastLineTop:this.lastLineBottom,a=o.getIntersectionPoint(s.x1,s.y1,s.x2,s.y2);if(null!=a)this.intersect(e,a,i);else{const l=o.getEndPoint(),c=s.getStartPoint();let p=this.toDegrees(l,t),v=this.toDegrees(c,t);Math.abs(p-v)>180&&(p%=360,v%=360),this.cap(e,t,p,v,this.strokeWidth*this.toPressure(t)/2,2,i)}o.set(s.x1,s.y1,s.x2,s.y2)}beginPath(e,t){this.vector.set(t.x,t.y).subtract(e).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(e)/2),this.offsetA.set(e.x,e.y).add(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetB.set(t.x,t.y).add(this.miter),this.addPathPoint(this.A,this.offsetB.x,this.offsetB.y,!1),this.lastLineBottom.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(e)/2),this.offsetA.set(e.x,e.y).subtract(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetB.set(t.x,t.y).subtract(this.miter),this.addPathPoint(this.B,this.offsetA.x,this.offsetA.y,!0),this.addPathPoint(this.B,this.offsetB.x,this.offsetB.y,!0),this.lastLineTop.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y)}cap(e,t,r,i,s,o,a){if(r>i)for(let l=r;l>=i;l-=o){const c=Math.PI*l/180,p=t.x+s*Math.cos(c),v=t.y+s*Math.sin(c);this.addPathPoint(e,p,v,a)}else for(let l=r;l<=i;l+=o){const c=Math.PI*l/180,p=t.x+s*Math.cos(c),v=t.y+s*Math.sin(c);this.addPathPoint(e,p,v,a)}}capOnePoint(e,t,r){this.addPathPoint(e,t.x+r*this.toPressure(t)/2,t.y,!1),this.cap(e,t,0,360,r*this.toPressure(t)/2,2,!1)}capEndpoint(e,t,r,i){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y).add(this.miter),this.offsetB.set(t.x,t.y).subtract(this.miter),this.addPathPoint(e,this.offsetB.x,this.offsetB.y,i);const s=this.toDegrees(this.offsetB,this.offsetA);this.cap(e,t,s,s-180,this.strokeWidth*this.toPressure(t)/2,2,i)}addPathPoint(e,t,r,i){i?e.unshift(new Or(t,r,1)):e.push(new Or(t,r,1))}intersect(e,t,r){r?e[0].set(t.x,t.y):e[e.length-1].set(t.x,t.y)}offset(e,t,r){r?e.subtract(t):e.add(t)}toPressure(e){return Math.min(1,Math.sqrt(e.p+.1))}toDegrees(e,t){const r=Math.atan2(e.y-t.y,e.x-t.x);return 180*(2*Math.PI+r)/Math.PI}intersectsRect(e,t){let r=0,i=e[r++],s=null;for(;r<e.length;){if(s=e[r++],t.intersectsLine(i.x,i.y,s.x,s.y))return!0;i=s}return!1}}class cd extends oo{constructor(e,t){super(e,t),this.stroke=new Dg(t.width)}addPoint(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return this.stroke.addPoint(e),this.updateBounds(),this.fireShapeEvent(new wr(this,this.bounds)),console.log("I added a point.",this.bounds,e),!0}contains(e){return this.stroke.intersects(new Ar(e.x,e.y,e.x,e.y))}intersects(e){return this.stroke.intersects(e)}getPenStroke(){return this.stroke}moveByDelta(e){this.stroke.moveByDelta(e),this.updateBoundsByDelta(e),this.fireShapeEvent(new wr(this,this.bounds))}clone(){const e=new cd(this.handle,this.brush.clone());return e.stroke=this.stroke.clone(),e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected()),e}}class D2 extends so{begin(e,t){this.shape=new cd(this.shapeHandle,this.brush),this.shape.addPoint(e),t.page.addAction(new os([this.shape]))}execute(e){this.shape.addPoint(e)}end(e){}}class CE extends Ts{execute(e){const t=new D2;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setTool(t)}getType(){return ut.PEN}}class ji extends class x2{constructor(e){this.color=e}}{constructor(e,t){super(e),this.width=t}clone(){return new ji(this.color,this.width)}}const M2=/\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d*.\d*))?\)/;class Fn{constructor(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i||1}toHex(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)}toRgb(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toRgba(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}toAlpha(e){return`rgba(${this.r}, ${this.g}, ${this.b}, ${e})`}equals(e){return this.a===e.a&&this.r===e.r&&this.g===e.g&&this.b===e.b}static fromHex(e){let t=e.trim();if(0!==t.indexOf("#"))throw new Error("Not a hex color representation");t=t.substr(t.indexOf("#")+1);const r=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),s=parseInt(t.substr(4,2),16);return new Fn(r,i,s)}static fromRGBString(e){let t=e.trim();if(0!==t.indexOf("rgb"))throw new Error("Not a rgb color representation");const r=M2.exec(t);if(r){const i=parseInt(r[1],10),s=parseInt(r[2],10),o=parseInt(r[3],10),a=r[5]?parseFloat(r[5]):1;return new Fn(i,s,o,a)}return null}static fromRGBNumber(e){return new Fn(e>>16&255,e>>8&255,255&e,(e>>24&255)/255)}}class P2 extends so{begin(e,t){this.shape=new oo(this.shapeHandle,this.brush),this.shape.addPoint(e),t.page.addAction(new os([this.shape]))}execute(e){this.shape.addPoint(e)}}class EE extends Ts{execute(e){const t=new P2;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setTool(t)}getType(){return ut.HIGHLIGHTER}}class wE extends oo{addPoint(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return this.updateBounds(),this.fireShapeEvent(new wr(this,this.bounds)),!0}updateBounds(){const e=this.points[0],t=this.brush.width;this.bounds.set(e.x-t,e.y-t,e.x+2*t,e.y+2*t)}}class I2 extends so{begin(e,t){this.page=t.page,this.shape=new wE(this.shapeHandle,this.brush),this.shape.addPoint(e),this.page.addShape(this.shape)}execute(e){this.shape.addPoint(e)}end(e){this.page.removeShape(this.shape)}}class AE extends Ts{execute(e){const t=new I2;t.brush=this.brush,e.setTool(t)}getType(){return ut.POINTER}}class Sa extends oo{setP0(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return!0}setP1(e){if(this.points.length>1){if(e.equals(this.points[1]))return!1;this.points[1]=e}else this.points.push(e);return this.updateBounds(),this.fireShapeEvent(new wr(this,this.bounds)),!0}updateBounds(){if(this.points.length<2)return;const e=this.points[0],t=this.points[1];t.x<e.x?(this.bounds.x=t.x,this.bounds.width=e.x-t.x):(this.bounds.x=e.x,this.bounds.width=t.x-e.x),t.y<e.y?(this.bounds.y=t.y,this.bounds.height=e.y-t.y):(this.bounds.y=e.y,this.bounds.height=t.y-e.y)}fill(){const e=this.getKeyEvent();return null!=e&&e.altKey}}class ud extends Sa{clone(){const e=new ud(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class R2 extends so{begin(e,t){this.context=t,this.shape=new ud(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new os([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class TE extends Ts{execute(e){const t=new R2;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}getType(){return ut.ARROW}}class dd extends Sa{clone(){const e=new dd(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class O2 extends so{begin(e,t){this.context=t,this.shape=new dd(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new os([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class DE extends Ts{execute(e){const t=new O2;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}getType(){return ut.LINE}}class hd extends Sa{contains(e){if(this.points.length<2)return!1;if(this.fill())return this.bounds.containsPoint(e);const t=this.brush.width;let r=this.bounds.x,i=this.bounds.y,s=this.bounds.x+this.bounds.width,o=this.bounds.y;return!!(this.intersectsSegment(t,r,i,s,o,e)||(r=this.bounds.x+this.bounds.width,i=this.bounds.y,s=this.bounds.x+this.bounds.width,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e))||(r=this.bounds.x+this.bounds.width,i=this.bounds.y+this.bounds.height,s=this.bounds.x,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e))||(r=this.bounds.x,i=this.bounds.y,s=this.bounds.x,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e)))}intersects(e){return null!=this.bounds.intersection(e)}clone(){const e=new hd(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}intersectsSegment(e,t,r,i,s,o){let a=o.x+e,l=o.y+e,c=o.x-e,p=o.y-e;return!(!Bi.intersects(t,r,i,s,a,l,c,p)&&(a=o.x-e,l=o.y+e,c=o.x+e,p=o.y-e,!Bi.intersects(t,r,i,s,a,l,c,p)))}}class k2 extends so{begin(e,t){this.context=t,this.shape=new hd(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new os([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class xE extends Ts{execute(e){const t=new k2;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}getType(){return ut.RECTANGLE}}class ME{constructor(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i,this.radiusX=.5*r,this.radiusY=.5*i,this.centerX=e+this.radiusX,this.centerY=t+this.radiusY}containsPoint(e,t){const r=this.width;if(r<=0)return!1;const i=this.height;if(i<=0)return!1;const s=(e-this.x)/r-.5,o=(t-this.y)/i-.5;return s*s+o*o<.25}containsRect(e,t,r,i){return this.containsPoint(e,t)&&this.containsPoint(e+r,t)&&this.containsPoint(e,t+i)&&this.containsPoint(e+r,t+i)}intersectsRect(e,t,r,i){return!(r<=0||i<=0||this.width<=0||this.height<=0)&&(this.centerX>=e&&this.centerY>=t&&this.centerX<=e+r&&this.centerY<=t+i||this.intersectsLine(e,t,e+r,t)||this.intersectsLine(e,t+i,e+r,t+i)||this.intersectsLine(e,t,e,t+i)||this.intersectsLine(e+r,t,e+r,t+i))}intersectsLine(e,t,r,i){if(this.width<=0||this.height<=0)return!1;e-=this.centerX,r-=this.centerX,t-=this.centerY,i-=this.centerY;const s=this.radiusX*this.radiusX,o=this.radiusY*this.radiusY,a=Math.pow(r-e,2)/s+Math.pow(i-t,2)/o,l=2*e*(r-e)/s+2*t*(i-t)/o,p=l*l-4*a*(e*e/s+t*t/o-1);if(0===p){const v=-l/2/a;return v>=0&&v<=1}if(p>0){const v=Math.sqrt(p),k=(-l+v)/2/a,$=(-l-v)/2/a;return k>=0&&k<=1||$>=0&&$<=1}return!1}}class fd extends Sa{contains(e){if(this.points.length<2)return!1;const t=new ME(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return this.fill()?t.containsPoint(e.x,e.y):t.intersectsLine(e.x,e.y,e.x+this.brush.width,e.y+this.brush.width)}intersects(e){return!(this.points.length<2)&&new ME(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height).intersectsRect(e.x,e.y,e.width,e.height)}clone(){const e=new fd(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class F2 extends so{begin(e,t){this.context=t,this.shape=new fd(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new os([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class PE extends Ts{execute(e){const t=new F2;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}getType(){return ut.ELLIPSE}}class xg extends Dn{constructor(e){super(),e&&(this.point=e)}toByteBuffer(){if(!this.point)return this.createDataView(0).dataView.buffer;let e=this.createDataView(12),t=e.dataView,r=e.byteOffset;return t.setFloat32(r,this.point.x),t.setFloat32(r+4,this.point.y),t.setFloat32(r+8,this.point.p),t.buffer}}class Mg extends xg{execute(e){e.beginTool(this.point)}getType(){return ut.TOOL_BEGIN}}class Pg extends xg{execute(e){e.executeTool(this.point)}getType(){return ut.TOOL_EXECUTE}}class IE extends xg{execute(e){e.endTool(this.point)}getType(){return ut.TOOL_END}}class si{execute(e){}end(e){}}class L2 extends si{begin(e,t){t.page.undo()}}class RE extends Dn{execute(e){e.selectAndExecuteTool(new L2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.UNDO}}class N2 extends si{begin(e,t){t.page.redo()}}class OE extends Dn{execute(e){e.selectAndExecuteTool(new N2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.REDO}}class kE extends SE{constructor(e){super(e)}execute(e){for(let t of this.shapes)e.removeShape(t)}undo(e){for(let t of this.shapes)e.addShape(t)}redo(e){this.execute(e)}}class B2 extends si{begin(e,t){const r=Object.assign([],t.page.getShapes());t.page.addAction(new kE(r))}}class FE extends Dn{execute(e){e.selectAndExecuteTool(new B2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.CLEAR_SHAPES}}class LE extends Dn{execute(e){e.setKeyEvent(this.keyEvent)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.KEY}}class j2{begin(e,t){if(this.sourcePoint=e.clone(),this.context=t,this.getSelectedShapes(),this.hasSelectedShapes())if(this.hitSelected(e)){const r=new Array;for(let i of this.selectedShapes){const s=i.clone();r.push(s)}t.page.addAction(new os(r))}else this.removeSelection();else{const r=this.getTopLevelShape(e);if(null!=r){const i=r.clone();t.page.addAction(new os([i])),this.addSelection(i)}}}execute(e){this.sourcePoint.subtract(e),this.moveShapes(e,this.sourcePoint),this.sourcePoint=e.clone()}end(e){}getTopLevelShape(e){let t=null;for(let r of this.context.page.getShapes())r.contains(e)&&(t=r);return t}getSelectedShapes(){this.selectedShapes=new Array;for(let e of this.context.page.getShapes())e.isSelected()&&this.selectedShapes.push(e)}moveShapes(e,t){if(this.hasSelectedShapes()){this.context.beginBulkRender();for(let r of this.selectedShapes)r.moveByDelta(t);this.context.endBulkRender()}}hasSelectedShapes(){return 0!=this.selectedShapes.length}addSelection(e){e.setSelected(!0),this.selectedShapes.push(e)}removeSelection(){this.context.beginBulkRender();for(let e of this.selectedShapes)e.setSelected(!1);this.selectedShapes.length=0,this.context.endBulkRender()}hitSelected(e){for(let t of this.selectedShapes)if(t.contains(e))return!0;return!1}}class NE extends Dn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new j2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.CLONE}}class V2{begin(e,t){this.sourcePoint=e.clone(),this.context=t,this.selectedShape=this.getTopLevelShape(e),this.removeSelection(),null!=this.selectedShape&&this.selectedShape.setSelected(!0)}execute(e){null!=this.selectedShape&&(this.sourcePoint.subtract(e),this.context.beginBulkRender(),this.selectedShape.moveByDelta(this.sourcePoint),this.context.endBulkRender(),this.sourcePoint=e.clone())}end(e){null!=this.selectedShape&&(this.context.beginBulkRender(),this.selectedShape.setSelected(!1),this.context.endBulkRender())}getTopLevelShape(e){let t=null;for(let r of this.context.page.getShapes())r.contains(e)&&(t=r);return t}removeSelection(){this.context.beginBulkRender();for(let e of this.context.page.getShapes())e.isSelected()&&e.setSelected(!1);this.context.endBulkRender()}}class BE extends Dn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new V2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.SELECT}}class jE extends Sa{constructor(){super(0,null)}}var Ds=(()=>{return(n=Ds||(Ds={}))[n.Select=0]="Select",n[n.Move=1]="Move",Ds;var n})();class H2{begin(e,t){this.sourcePoint=e.clone(),this.context=t,this.initialized=!1,this.shape=new jE,this.context.page.addShape(this.shape),this.getSelectedShapes(),this.hasSelectedShapes()?this.hitSelected(e)?this.mode=Ds.Move:(this.context.beginBulkRender(),this.removeSelection(),this.context.endBulkRender(),this.mode=Ds.Select):this.mode=Ds.Select}execute(e){this.mode==Ds.Select?(this.initialized||(this.shape.setP0(e),this.initialized=!0),this.shape.addPoint(e.clone()),this.shape.setP1(e),this.selectGroup(this.shape.bounds)):this.mode==Ds.Move&&(this.sourcePoint.subtract(e),this.moveShapes(this.sourcePoint),this.sourcePoint=e.clone())}end(e){this.context.page.removeShape(this.shape),this.initialized=!1}selectGroup(e){this.context.beginBulkRender(),this.removeSelection();for(let t of this.context.page.getShapes())t!==this.shape&&t.intersects(e)&&this.addSelection(t);this.context.endBulkRender()}addSelection(e){e.setSelected(!0),this.selectedShapes.push(e)}getSelectedShapes(){this.selectedShapes=new Array;for(let e of this.context.page.getShapes())e.isSelected()&&this.selectedShapes.push(e)}hasSelectedShapes(){return 0!=this.selectedShapes.length}hitSelected(e){for(let t of this.selectedShapes)if(t.contains(e))return!0;return!1}removeSelection(){for(let e of this.selectedShapes)e.setSelected(!1);this.selectedShapes.length=0}moveShapes(e){if(this.hasSelectedShapes()){this.context.beginBulkRender();for(let t of this.selectedShapes)t.moveByDelta(e);this.context.endBulkRender()}}}class VE extends Dn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new H2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.SELECT_GROUP}}class U2{begin(e,t){this.context=t,this.lastPoint=e}execute(e){const t=this.context.page.getSlideShape(),r=t.bounds;t.setPageRect(new Ar(r.x+(this.lastPoint.x-e.x),r.y+(this.lastPoint.y-e.y),r.width,r.height)),this.lastPoint=e}end(e){}}class HE extends Dn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new U2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.PANNING}}class $2 extends si{constructor(e){super(),this.rect=e}begin(e,t){t.page.getSlideShape().setPageRect(this.rect)}}class z2 extends Dn{constructor(e){super(),this.rect=e}execute(e){e.setKeyEvent(this.keyEvent),e.selectAndExecuteTool(new $2(this.rect))}getType(){return ut.EXTEND_VIEW}toByteBuffer(){let e=this.createDataView(32),t=e.dataView,r=e.byteOffset;return t.setFloat64(r,this.rect.x),t.setFloat64(r+8,this.rect.y),t.setFloat64(r+16,this.rect.width),t.setFloat64(r+24,this.rect.height),t.buffer}}class UE extends Sa{constructor(){super(0,null)}updateBounds(){super.updateBounds();const t=Math.abs(3*this.bounds.width/4)*Math.sign(this.bounds.height);this.bounds.height=t}}class G2{begin(e,t){this.context=t,this.shape=new UE,this.context.page.addShape(this.shape)}execute(e){this.initialized||(this.shape.setP0(e),this.initialized=!0),this.shape.setP1(e)}end(e){this.initialized=!1,this.context.page.removeShape(this.shape),this.context.page.getSlideShape().setPageRect(this.shape.bounds)}}class pd extends Ts{constructor(e,t){super(0,t)}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new G2)}getType(){return ut.ZOOM}}class W2 extends si{begin(e,t){t.page.getSlideShape().setPageRect(new Ar(0,0,1,1))}}class $E extends Dn{execute(e){e.setKeyEvent(this.keyEvent),e.selectAndExecuteTool(new W2)}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.ZOOM_OUT}}class zE{constructor(e){this.shapeHandle=e}begin(e,t){for(const r of t.page.getShapes())if(r.handle===this.shapeHandle){t.page.addAction(new kE(new Array(r)));break}}execute(e){}end(e){}}class q2 extends Dn{constructor(e){super(),this.shapeHandle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new zE(this.shapeHandle)),e.beginTool(new Or(0,0,0))}toByteBuffer(){return this.createDataView(0).dataView.buffer}getType(){return ut.RUBBER}}class Ul extends ad{setText(e){this.text!==e&&(this.text=e,this.fireShapeEvent(new wr(this,this.bounds)))}getText(){return this.text}setTextColor(e){this.textColor&&this.textColor.equals(e)||(this.textColor=e,this.fireShapeEvent(new wr(this,this.bounds)))}getTextColor(){return this.textColor}setTextAttributes(e){this.textAttributes=new Map(e),this.fireShapeEvent(new wr(this,this.bounds))}getTextAttributes(){return this.textAttributes}isUnderline(){var e;return null!==(e=this.textAttributes.get("underline"))&&void 0!==e&&e}isStrikethrough(){var e;return null!==(e=this.textAttributes.get("strikethrough"))&&void 0!==e&&e}setLocation(e){return(this.bounds.x!==e.x||this.bounds.y!==e.y)&&(this.bounds.x=e.x,this.bounds.y=e.y,this.fireShapeEvent(new wr(this,this.bounds)),!0)}updateBounds(){}}class $l extends Ul{setFont(e){this.font&&this.font.equals(e)||(this.font=e,this.fireShapeEvent(new wr(this,this.bounds)))}getFont(){return this.font}clone(){const e=new $l(this.handle);return e.setLocation(new or(this.bounds.x,this.bounds.y)),e.setFont(this.font),e.setTextColor(this.getTextColor()),e.setTextAttributes(new Map(this.getTextAttributes())),e}}class zl{constructor(e,t,r,i){this.family=e,this.size=t,r&&(this.style=r),i&&(this.weight=i)}equals(e){return!!e&&(this===e||this.family===e.family&&this.size===e.size&&this.style===e.style&&this.weight===e.weight)}toString(){let e=this.size+"px "+this.family;return this.weight&&(e=this.weight+" "+e),this.style&&(e=this.style+" "+e),e}}class X2{constructor(e){this.handle=e}begin(e,t){this.context=t,this.shape=new $l(this.handle),this.shape.setFont(new zl("arial",.05)),this.shape.setTextColor(new Fn(0,0,0,255)),this.shape.setText("Test")}execute(e){}end(e){this.shape.setLocation(e),this.context.page.addShape(this.shape)}}class GE extends Dn{constructor(e){super(),this.handle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new X2(this.handle))}toByteBuffer(){let e=this.createDataView(4),t=e.dataView;return t.setInt32(e.byteOffset,this.handle),t.buffer}getType(){return ut.TEXT}}class K2 extends si{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof $l&&i.handle===this.handle){i.setFont(this.font),i.setTextColor(this.textColor),i.setTextAttributes(this.textAttributes);break}}}class Y2 extends Dn{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}execute(e){e.selectAndExecuteTool(new K2(this.handle,this.font,this.textColor,this.textAttributes))}toByteBuffer(){const t=(new TextEncoder).encode(this.font.family);let r=this.createDataView(12),i=r.dataView,s=r.byteOffset;i.setInt32(s,this.handle),i.setInt32(s+4,Number(this.textColor.toRgba())),i.setInt32(s+8,t.buffer.byteLength);let o=new ArrayBuffer(12),a=new DataView(o);a.setFloat64(0,this.font.size),a.setInt8(8,0),a.setInt8(9,0),a.setInt8(10,this.textAttributes.get("strikethrough")?1:0),a.setInt8(11,this.textAttributes.get("underline")?1:0);let l=new Uint8Array(i.buffer.byteLength+t.byteLength+a.buffer.byteLength);return l.set(new Uint8Array(i.buffer),0),l.set(new Uint8Array(t.buffer),i.buffer.byteLength),l.set(new Uint8Array(a.buffer),i.buffer.byteLength+t.buffer.byteLength),l.buffer}getType(){return ut.TEXT_FONT_CHANGE}}class J2 extends si{constructor(e,t){super(),this.handle=e,this.text=t}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof Ul&&i.handle===this.handle){i.setText(this.text);break}}}class WE extends Dn{constructor(e,t){super(),this.handle=e,this.text=t}execute(e){e.selectAndExecuteTool(new J2(this.handle,this.text))}toByteBuffer(){const t=(new TextEncoder).encode(this.text);let r=this.createDataView(8+t.byteLength),i=r.dataView,s=r.byteOffset;i.setInt32(s,this.handle),i.setInt32(s+4,t.byteLength);let o=new Uint8Array(i.buffer.byteLength+t.byteLength);return o.set(new Uint8Array(i.buffer),0),o.set(new Uint8Array(t.buffer),i.buffer.byteLength),o.buffer}getType(){return ut.TEXT_CHANGE}}class Z2 extends si{constructor(e,t){super(),this.handle=e,this.point=t}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof Ul&&i.handle===this.handle){t.beginBulkRender(),i.setLocation(this.point),t.endBulkRender();break}}}class qE extends Dn{constructor(e,t){super(),this.handle=e,this.point=t}execute(e){e.selectAndExecuteTool(new Z2(this.handle,this.point))}toByteBuffer(){let e=this.createDataView(20),t=e.dataView,r=e.byteOffset;return t.setInt32(r,this.handle),t.setBigInt64(r+4,BigInt(this.point.x)),t.setBigInt64(r+12,BigInt(this.point.y)),t.buffer}getType(){return ut.TEXT_LOCATION_CHANGE}}class Q2 extends si{constructor(e){super(),this.handle=e}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof Ul&&i.handle===this.handle){t.page.removeShape(i);break}}}class XE extends Dn{constructor(e){super(),this.handle=e}execute(e){e.selectAndExecuteTool(new Q2(this.handle))}toByteBuffer(){let e=this.createDataView(4),t=e.dataView;return t.setInt32(e.byteOffset,this.handle),t.buffer}getType(){return ut.TEXT_REMOVE}}class gd extends ad{constructor(e,t){super(e),this.color=t}addTextBounds(e){this.bounds.isEmpty()?this.bounds.set(e.x,e.y,e.width,e.height):this.bounds.union(e),this.fireShapeEvent(new wr(this,this.bounds))}getColor(){return this.color}contains(e){return this.bounds.containsPoint(e)}intersects(e){return null!=this.bounds.intersection(e)}clone(){const e=new gd(this.handle,this.color);return e.setKeyEvent(this.getKeyEvent()),e}updateBounds(){}}class eB{constructor(e,t,r){this.shapeHandle=e,this.color=t,this.textBounds=r}begin(e,t){if(this.textBounds.length<1)return;let r=null;for(const i of t.page.getShapes())if(i.handle===this.shapeHandle){r=i;break}r||(r=new gd(this.shapeHandle,this.color),t.page.addAction(new os([r])));for(const i of this.textBounds)r.addTextBounds(i)}execute(e){}end(e){}}class KE extends Dn{constructor(e,t,r){super(),this.shapeHandle=e,this.color=t,this.textBounds=r}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new eB(this.shapeHandle,this.color,this.textBounds)),e.beginTool(new Or(0,0,0))}toByteBuffer(){let t=this.createDataView(8+32*this.textBounds.length),r=t.dataView,i=t.byteOffset;if(r.setInt8(i,this.color.r),r.setInt8(i+1,this.color.g),r.setInt8(i+2,this.color.b),r.setInt8(i+3,this.color.a),r.setInt32(i+4,this.textBounds.length),0!==this.textBounds.length)for(const s of this.textBounds)r.setFloat64(i+8,s.x),r.setFloat64(i+16,s.y),r.setFloat64(i+24,s.width),r.setFloat64(i+32,s.height);return r.buffer}getType(){return ut.TEXT_SELECTION_EXT}}class Gl extends Ul{setFont(e){this.font&&this.font.equals(e)||(this.font=e,this.fireShapeEvent(new wr(this,this.bounds)))}getFont(){return this.font}clone(){const e=new Gl(this.handle);return e.setLocation(new or(this.bounds.x,this.bounds.y)),e.setFont(this.font),e.setTextColor(this.getTextColor()),e.setTextAttributes(new Map(this.getTextAttributes())),e}}class tB{constructor(e){this.handle=e}begin(e,t){this.context=t,this.shape=new Gl(this.handle)}execute(e){}end(e){this.shape.setLocation(e),this.context.page.addShape(this.shape)}}class YE extends Dn{constructor(e){super(),this.handle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new tB(this.handle))}toByteBuffer(){let e=this.createDataView(4),t=e.dataView;return t.setInt32(e.byteOffset,this.handle),t.buffer}getType(){return ut.LATEX}}class nB extends si{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof Gl&&i.handle===this.handle){i.setFont(this.font),i.setTextColor(this.textColor),i.setTextAttributes(this.textAttributes);break}}}class rB extends Dn{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}execute(e){e.selectAndExecuteTool(new nB(this.handle,this.font,this.textColor,this.textAttributes))}toByteBuffer(){let e=this.createDataView(16),t=e.dataView,r=e.byteOffset;t.setInt32(r,this.handle);let s=Object.values(md).indexOf(this.font.family);return t.setInt32(r+4,s),t.setInt32(r+8,this.font.size),t.setInt32(r+12,Number(this.textColor.toRgba())),t.buffer}getType(){return ut.LATEX_FONT_CHANGE}}var md=(()=>{return(n=md||(md={})).SERIF="Serif",n.SANSSERIF="Sanserif",n.BOLD="Bold",n.ITALIC="Italic",n.BOLD_ITALIC="Bold_Italic",n.ROMAN="Roman",n.TYPEWRITER="Typewriter",md;var n})();class JE{constructor(e){e&&(this.renderController=e)}beginBulkRender(){this.renderController.beginBulkRender()}endBulkRender(){this.renderController.endBulkRender()}}class iB{constructor(e){this.documentPageNumberMap=new Map,this.renderController=e,this.toolContext=new JE(e)}setOnSelectPageIndex(e){this.pageIndexObserver=e}setKeyEvent(e){this.toolContext.keyEvent=e}setSeek(e){this.renderController.setSeek(e)}setDocument(e){this.document=e}setPageNumber(e){const t=this.document.getPage(e);this.pageNumber=e,this.documentPageNumberMap.set(this.document.getDocumentId(),e),this.toolContext.page=t,this.renderController.setPage(t),this.pageIndexObserver&&this.pageIndexObserver(e)}setTool(e){if(!e)throw new Error("Tool must not be null");!this.tool&&this.tool===e||(this.setPreviousTool(this.tool),this.tool=e)}selectAndExecuteTool(e){this.executeAtomicTool(e)}beginTool(e){this.tool.begin(e.clone(),this.toolContext)}executeTool(e){this.tool.execute(e.clone())}endTool(e){this.tool.end(e.clone())}executeAtomicTool(e){const t=Or.createZero();this.setTool(e),this.beginTool(t),this.executeTool(t),this.endTool(t),this.setPreviousTool(this.previousTool)}setPreviousTool(e){!e||e instanceof si||(this.previousTool=e)}}var Tt=(()=>{return(n=Tt||(Tt={})).Created="Created",n.Initializing="Initializing",n.Initialized="Initialized",n.Starting="Starting",n.Started="Started",n.Stopping="Stopping",n.Stopped="Stopped",n.Suspending="Suspending",n.Suspended="Suspended",n.Destroying="Destroying",n.Destroyed="Destroyed",n.Error="Error",Tt;var n})();class lB extends class aB extends class oB extends class sB{constructor(){this.stateEvent=new od,this._state=Tt.Created,this._prevState=Tt.Created}get state(){return this._state}get previousState(){return this._prevState}initialized(){return this._state===Tt.Initialized}created(){return this._state===Tt.Created}started(){return this._state===Tt.Started}stopped(){return this._state===Tt.Stopped}suspended(){return this._state===Tt.Suspended}destroyed(){return this._state===Tt.Destroyed}error(){return this._state===Tt.Error}addStateListener(e){return this.stateEvent.subscribe(e)}removeStateListener(e){this.stateEvent.unsubscribe(e)}fireStateChanged(){this.stateEvent.publish(this._state)}setState(e){if(!this.validateNextState(e))throw new Error(`Invalid state transition for ${this.constructor.name}: [${this.state}] -> [${e}].`);this._prevState=this._state,this._state=e,this.fireStateChanged()}validateNextState(e){switch(this._state){case Tt.Created:return this.isAllowed(e,Tt.Initializing,Tt.Destroying);case Tt.Initializing:return this.isAllowed(e,Tt.Initialized,Tt.Error);case Tt.Initialized:return this.isAllowed(e,Tt.Starting,Tt.Destroying);case Tt.Starting:return this.isAllowed(e,Tt.Started,Tt.Error);case Tt.Started:return this.isAllowed(e,Tt.Suspending,Tt.Stopping,Tt.Destroying,Tt.Error);case Tt.Stopping:return this.isAllowed(e,Tt.Stopped,Tt.Error);case Tt.Stopped:return this.isAllowed(e,Tt.Starting,Tt.Destroying);case Tt.Suspending:return this.isAllowed(e,Tt.Suspended,Tt.Error);case Tt.Suspended:return this.isAllowed(e,Tt.Starting,Tt.Stopping,Tt.Destroying);case Tt.Destroying:return this.isAllowed(e,Tt.Destroyed,Tt.Error);case Tt.Destroyed:return this.isAllowed(e,Tt.Initializing);case Tt.Error:return this.isAllowed(e,Tt.Starting,Tt.Stopping,Tt.Destroying);default:return!1}}isAllowed(e,...t){if(!t)throw new Error("No allowed states provided.");for(let r of t)if(e==r)return!0;return!1}}{init(){this.setState(Tt.Initializing);try{this.initInternal()}catch(e){throw this.setState(Tt.Error),new Error(`Failed to init ${this.constructor.name}: ${e}`)}this.setState(Tt.Initialized)}start(){(this.created()||this.destroyed())&&this.init(),this.setState(Tt.Starting);try{this.startInternal()}catch(e){throw this.setState(Tt.Error),new Error(`Failed to start ${this.constructor.name}: ${e}`)}this.setState(Tt.Started)}stop(){this.setState(Tt.Stopping);try{this.stopInternal()}catch(e){throw this.setState(Tt.Error),new Error(`Failed to stop ${this.constructor.name}: ${e}`)}this.setState(Tt.Stopped)}suspend(){this.setState(Tt.Suspending);try{this.suspendInternal()}catch(e){throw this.setState(Tt.Error),new Error(`Failed to suspend ${this.constructor.name}: ${e}`)}this.setState(Tt.Suspended)}suspendInternal(){}destroy(){(this.started()||this.suspended())&&stop(),this.setState(Tt.Destroying);try{this.destroyInternal()}catch(e){throw this.setState(Tt.Error),new Error(`Failed to destroy ${this.constructor.name}: ${e}`)}this.setState(Tt.Destroyed)}}{constructor(e){super(),this.executor=e}}{constructor(e,t){super(e),this.syncState=t}addAction(e){this.actions.push(e)}setDocument(e){this.executor.setDocument(e)}seekByTime(e){throw new Error("Method not implemented.")}seekByPage(e){throw new Error("Method not implemented.")}executeActions(){let e=this.actions.length;for(;e>0;){const t=this.actions[0];console.log("Execute action ",t);try{t.execute(this.executor)}catch(i){}this.actions.shift(),e=this.actions.length}}initInternal(){this.actions=[]}startInternal(){try{this.run()}catch(e){throw console.error(e),new Error("Execute action failed.")}}stopInternal(){cancelAnimationFrame(this.requestID)}suspendInternal(){cancelAnimationFrame(this.requestID)}destroyInternal(){this.actions.length=0}run(){this.executeActions(),this.requestID=requestAnimationFrame(this.run.bind(this))}}class cB{render(e,t,r){const i=t.points,s=i.length;if(s<1)return;const o=t.brush,a=t.isSelected()?"rgba(255, 0, 100, 0.5)":o.color.toRgba();let l=0,c=i[l++];if(l!==s){for(e.beginPath(),e.strokeStyle=a,e.lineWidth=o.width,e.lineCap="round",e.lineJoin="round",e.globalAlpha=1,e.globalCompositeOperation="multiply",e.moveTo(c.x,c.y);l<s;)c=i[l++],e.lineTo(c.x,c.y);e.stroke()}else this.drawCircle(e,o,c.x,c.y,c.p)}drawCircle(e,t,r,i,s){const a=s*t.width/2;e.beginPath(),e.fillStyle=t.color.toRgba(),e.arc(r,i,a,0,2*Math.PI),e.fill()}}class uB{render(e,t,r){return Rn(function*(){return t.getPage().render(e,t.bounds,r)})()}}class dB{render(e,t,r){const i=t.points[0];if(!i)return;const s=t.brush,o=s.width,a=o/2;e.beginPath(),e.fillStyle=s.color.toAlpha(.4),e.arc(i.x,i.y,o,0,2*Math.PI),e.fill(),e.beginPath(),e.strokeStyle=s.color.toRgb(),e.lineWidth=o/4,e.arc(i.x,i.y,a,0,2*Math.PI),e.stroke()}}class hB{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush;if(e.save(),this.createArrowPath(e,o,i,s,a.width),e.fillStyle=a.color.toRgba(),e.fill(),e.restore(),t.isSelected()){const l=e.getTransformExt().getScaleX();this.createArrowPath(e,o,i,s,a.width),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=2/l,e.setLineDash([5/l]),e.stroke()}}createArrowPath(e,t,r,i,s){const a=null!=t&&t.shiftKey,l=r.x,c=r.y,k=null!=t&&t.altKey?2*s:s,$=k/2,he=i.x-l,je=i.y-c,st=Math.atan2(je,he),rt=Math.sqrt(he*he+je*je),Ge=5*k,Ot=rt-.5*k/.5,En=rt-.5*Ge,Ye=.5*Ge*.5*.35,Zn=.5*Ge,Qn=a?.5*k/.5+.75*Ge:0;if(e.translate(l,c),e.rotate(st),e.beginPath(),e.moveTo(Qn,-$),e.lineTo(Ot-.75*Ge,-$),e.lineTo(Ot-Ge,-Zn),e.quadraticCurveTo(En,-Ye,rt,0),e.quadraticCurveTo(En,Ye,Ot-Ge,Zn),e.lineTo(Ot-.75*Ge,$),e.lineTo(Qn,$),a){const xn=Qn-.5*Ge,pr=.5*Ge*.5*.35;e.lineTo(Qn+.25*Ge,Zn),e.quadraticCurveTo(xn,pr,0,0),e.quadraticCurveTo(xn,-pr,Qn+.25*Ge,-Zn)}e.closePath()}}class fB{render(e,t,r){const i=t.bounds;if(i.isEmpty())return;const s=t.getKeyEvent(),o=t.brush,a=o.color.toRgba(),l=s&&s.altKey;let c=i.x,p=i.y,v=i.width,k=i.height;e.beginPath(),l?(e.fillStyle=a,e.rect(c,p,v,k),e.fill()):(e.strokeStyle=a,e.lineWidth=o.width,e.rect(c,p,v,k),e.stroke()),t.isSelected()&&(l&&(c+=o.width/2,p+=o.width/2,v-=o.width,k-=o.width),e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=o.width,e.setLineDash([5/e.getTransformExt().getScaleX()]),e.rect(c,p,v,k),e.stroke())}}class pB{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush,l=null!=o&&o.altKey,c=l?2*a.width:a.width;if(e.beginPath(),e.strokeStyle=a.color.toRgba(),e.lineWidth=c,e.lineCap="round",e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke(),t.isSelected()){const p=e.getTransformExt().getScaleX(),v=l?7/p:5/p,k=l?15/p:12/p;e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=c,e.setLineDash([v,k]),e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke()}}}class gB{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush,l=a.color.toRgba(),c=o&&o.altKey,p=Math.min(i.x,s.x),v=Math.min(i.y,s.y),k=Math.max(i.x,s.x),$=Math.max(i.y,s.y),he=.5*Math.abs(k-p),je=.5*Math.abs($-v),st=p+he,rt=v+je;if(e.beginPath(),c?(e.fillStyle=l,e.ellipse(st,rt,he,je,0,0,2*Math.PI),e.fill()):(e.strokeStyle=l,e.lineWidth=a.width,e.ellipse(st,rt,he,je,0,0,2*Math.PI),e.stroke()),t.isSelected()){let Le=0;c&&(Le=a.width/2),e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=a.width,e.setLineDash([5/e.getTransformExt().getScaleX()]),e.ellipse(st,rt,he-Le,je-Le,0,0,2*Math.PI),e.stroke()}}}class mB{constructor(){this.FRAME_COLOR="#FF0064"}render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=2/e.getTransformExt().getScaleX(),a=4/e.getTransformExt().getScaleY();e.beginPath(),e.strokeStyle=this.FRAME_COLOR,e.lineWidth=o,e.lineDashOffset=0,e.setLineDash([a]),e.lineCap="butt",e.lineJoin="bevel",e.rect(i.x,i.y,s.x-i.x,s.y-i.y),e.stroke()}}class vB{constructor(){this.FILL_COLOR="rgba(0, 163, 232, 0.4)",this.FRAME_COLOR="rgb(255, 0, 100)"}render(e,t,r){const i=t.bounds;e.fillStyle=this.FILL_COLOR,e.fillRect(i.x,i.y,i.width,i.height),e.beginPath(),e.strokeStyle=this.FRAME_COLOR,e.lineWidth=2/e.getTransformExt().getScaleX(),e.rect(i.x,i.y,i.width,i.height),e.stroke()}}class yB{render(e,t,r){const i=t.getText();if(!i||0===i.length)return;const s=t.bounds,o=t.getFont(),a=e.getTransformExt(),l=a.getScaleX(),c=o.size*l,p=a.getTranslateX()+s.x*l,v=a.getTranslateY()+s.y*l,k=new zl(o.family,c,o.style,o.weight);e.setTransform(1,0,0,1,0,0),e.font=k.toString(),e.fillStyle=t.getTextColor().toRgba(),e.fillText(i,p,v+c)}}class Tr{constructor(e){this.m=e?e.slice(0,6):[1,0,0,1,0,0]}getScaleX(){return this.m[0]}getScaleY(){return this.m[3]}getShearX(){return this.m[1]}getShearY(){return this.m[2]}getTranslateX(){return this.m[4]}getTranslateY(){return this.m[5]}clone(){return new Tr(this.m)}reset(){this.setValues(1,0,0,1,0,0)}setTransform(e){this.m[0]=e.getScaleX(),this.m[1]=e.getShearX(),this.m[2]=e.getShearY(),this.m[3]=e.getScaleY(),this.m[4]=e.getTranslateX(),this.m[5]=e.getTranslateY()}setValues(e,t,r,i,s,o){this.m[0]=e,this.m[1]=t,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]);this.m[0]=this.m[3]*e,this.m[1]=-this.m[1]*e,this.m[2]=-this.m[2]*e,this.m[3]=this.m[0]*e,this.m[4]=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),this.m[5]=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5])}multiply(e){this.m[0]=this.m[0]*e.m[0]+this.m[2]*e.m[1],this.m[1]=this.m[1]*e.m[0]+this.m[3]*e.m[1],this.m[2]=this.m[0]*e.m[2]+this.m[2]*e.m[3],this.m[3]=this.m[1]*e.m[2]+this.m[3]*e.m[3],this.m[4]=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],this.m[5]=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5]}rotate(e){const t=Math.cos(e),r=Math.sin(e);this.m[0]=this.m[0]*t+this.m[1]*r,this.m[1]=this.m[0]*-r+this.m[1]*t,this.m[2]=this.m[2]*t+this.m[3]*r,this.m[3]=this.m[2]*-r+this.m[3]*t}scale(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}translate(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}transformPoint(e,t){const r=e;return new or(e=r*this.m[0]+t*this.m[2]+this.m[4],t=r*this.m[1]+t*this.m[3]+this.m[5])}translatePoint(e,t){return new or(e=e/this.m[0]+this.m[4],t=t/this.m[0]+this.m[5])}equals(e){return!!e&&this.m.length===e.m.length&&this.m.every(function(t,r){return t===e.m[r]})}toString(){return"["+this.m.join(", ")+"]"}}class _B{render(e,t,r){const i=t.bounds;i.isEmpty()||(e.beginPath(),e.globalAlpha=1,e.globalCompositeOperation="multiply",e.fillStyle=t.getColor().toRgba(),e.rect(i.x,i.y,i.width,i.height),e.fill())}}class bB{render(e,t,r){const i=t.getText();if(!i||0===i.length)return;const s=t.bounds,o=t.getFont(),a=e.getTransformExt(),l=a.getScaleX(),c=o.size*l,p=a.getTranslateX()+s.x*l,v=a.getTranslateY()+s.y*l,k=new zl(o.family,c,o.style,o.weight);e.setTransform(1,0,0,1,0,0),e.font=k.toString(),e.fillStyle=t.getTextColor().toRgba(),e.fillText(i,p,v+c)}}class SB{render(e,t,r){const i=t.brush,s=t.isSelected()?"rgb(255, 0, 100)":i.color.toRgb(),a=t.getPenStroke().getStrokeList();if(a){const l=a.length;let c=0,p=a[c++];for(e.beginPath(),e.fillStyle=s,e.beginPath(),e.moveTo(p.x,p.y);c<l;)p=a[c++],c<l&&e.lineTo(p.x,p.y)}e.fill()}}class CB{constructor(){this.seek=!1,this.pageChangeListener=this.pageChanged.bind(this),this.lastTransform=new Tr}getLastTransform(){return this.lastTransform}setPage(e){this.page&&this.disableRendering(),this.page=e,this.updateSurfaceSize(e).then(()=>{this.seek||this.enableRendering(),this.renderAllLayers(e)}).catch(t=>{console.error(t)})}setSeek(e){this.seek=e,e?this.disableRendering():(this.enableRendering(),this.lastTransform.equals(this.getPageTransform())?this.refreshAnnotationLayers():this.renderAllLayers(this.page))}setSlideRenderSurface(e){this.slideRenderSurface=e,this.slideRenderSurface.registerRenderer(yE.name,new uB),this.slideRenderSurface.addSizeListener(this.slideRenderSurfaceSizeChanged.bind(this))}setActionRenderSurface(e){this.actionRenderSurface=e,this.actionRenderSurface.addSizeListener(this.actionRenderSurfaceSizeChanged.bind(this)),this.registerShapeRenderers(e)}setVolatileRenderSurface(e){this.volatileRenderSurface=e,this.registerShapeRenderers(e)}setTextLayerSurface(e){this.textLayerSurface=e}updateSurfaceSize(e){return new Promise(t=>{e.getPageBounds().then(r=>{this.slideRenderSurface.setPageSize(r),this.actionRenderSurface.setPageSize(r),this.volatileRenderSurface.setPageSize(r),this.textLayerSurface.setPageSize(r),t()})})}beginBulkRender(){this.seek||this.disableRendering()}endBulkRender(){this.seek||(this.refreshAnnotationLayers(),this.enableRendering())}getPage(){return this.page}enableRendering(){this.page.addChangeListener(this.pageChangeListener)}disableRendering(){this.page.removeChangeListener(this.pageChangeListener)}slideRenderSurfaceSizeChanged(e){this.renderAllLayers(this.page)}actionRenderSurfaceSizeChanged(e){this.refreshAnnotationLayers()}pageChanged(e){switch(e.changeType){case Wr.PageTransform:this.renderAllLayers(this.page);break;case Wr.Clear:this.clearAnnotationLayers();break;case Wr.ShapeAdded:if(this.lastShape&&this.lastShape!=e.shape){const t=this.actionRenderSurface.getSize(),r=new Ar(0,0,t.width,t.height);this.renderPermanentLayer(this.lastShape,r)}this.renderVolatileLayer(e.shape,e.dirtyRegion);break;case Wr.ShapeRemoved:this.refreshAnnotationLayers();break;case Wr.ShapeModified:this.renderVolatileLayer(e.shape,e.dirtyRegion)}}clearAnnotationLayers(){this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}refreshAnnotationLayers(){const e=this.page.getShapes(),t=e.length-1;if(t>=0){this.actionRenderSurface.renderSurface(this.slideRenderSurface),t>0&&this.actionRenderSurface.renderShapes(e.slice(0,t));const r=e[t];this.renderVolatileLayer(r,r.bounds)}else this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}renderAllLayers(e){const t=this.slideRenderSurface.getSize();t&&this.renderSlideLayer(e).then(i=>{if(i){const s=this.getPageTransform();this.lastTransform.setTransform(s),this.actionRenderSurface.setTransform(s),this.volatileRenderSurface.setTransform(s),this.actionRenderSurface.renderImageSource(i),this.actionRenderSurface.renderShapes(e.getShapes()),this.volatileRenderSurface.clear(),this.textLayerSurface.render(e),this.lastShape=null,Object.is(e,this.page)||this.renderAllLayers(this.page),t.equals(this.slideRenderSurface.getSize())||this.renderAllLayers(this.page)}}).catch(i=>{console.error("RenderController",i)})}renderPermanentLayer(e,t){this.actionRenderSurface.renderShape(e,t)}renderVolatileLayer(e,t){this.volatileRenderSurface.renderSurface(this.actionRenderSurface),this.volatileRenderSurface.renderShape(e,t),this.lastShape=e}renderSlideLayer(e){const t=this.slideRenderSurface.getSize();if(!t)return this.slideRenderSurface.renderSlideShape(e.getSlideShape(),new Ar(0,0,0,0));const r=new Ar(0,0,t.width,t.height);return this.slideRenderSurface.renderSlideShape(e.getSlideShape(),r)}getPageTransform(){const e=this.page.getSlideShape().bounds,t=new Tr;return t.translate(e.x,e.y),t.scale(1/e.width,1/e.height),t}registerShapeRenderers(e){e.registerRenderer(cd.name,new SB),e.registerRenderer(oo.name,new cB),e.registerRenderer(wE.name,new dB),e.registerRenderer(ud.name,new hB),e.registerRenderer(hd.name,new fB),e.registerRenderer(dd.name,new pB),e.registerRenderer(fd.name,new gB),e.registerRenderer(jE.name,new mB),e.registerRenderer($l.name,new yB),e.registerRenderer(gd.name,new _B),e.registerRenderer(Gl.name,new bB),e.registerRenderer(UE.name,new vB)}}class EB{constructor(e){e&&(this.mediaPlayer=e)}get audioTime(){return this.mediaPlayer?1e3*this.mediaPlayer.time:0}}class Jn{constructor(e){this.playbackModel=e,this.documents=new Map,Jn._instance=this}static getInstance(){return this._instance}getCurrentDocumentId(){return this.currentDocumentId}initialize(e,t,r,i){this._slideView=e,r.forEach(l=>{this.addDocument(l)}),Number(i);const o=t.avtiveDocument;let a=null;if(o)for(const l of r)if(l.getDocumentId()===o.documentId){a=l;break}this.renderController=new CB,this.renderController.setActionRenderSurface(e.getActionRenderSurface()),this.renderController.setSlideRenderSurface(e.getSlideRenderSurface()),this.renderController.setVolatileRenderSurface(e.getVolatileRenderSurface()),this.renderController.setTextLayerSurface(e.getTextLayerSurface()),this.streamActionExecutor=new iB(this.renderController),a&&this.streamActionExecutor.setDocument(a),o&&o.activePage&&this.streamActionExecutor.setPageNumber(o.activePage.pageNumber),this.actionPlayer=new lB(this.streamActionExecutor,new EB),this.actionPlayer.start(),console.log("PlaybackService initialized. Action player is there.")}addAction(e){this.actionPlayer.addAction(e)}addDocument(e){this.documents.set(BigInt(e.getDocumentId()),e)}removeDocument(e){this.documents.delete(BigInt(e))}selectDocument(e){console.log("Selected a document: ",e),this._slideView.repaint(),this.currentDocumentId=e;const t=this.documents.get(BigInt(e));t&&this.actionPlayer.setDocument(t)}getDocuments(){return this.documents}}class wB extends Dn{constructor(e){super(),this.shapeHandle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new zE(this.shapeHandle)),e.beginTool(new Or(0,0,0))}toByteBuffer(){let e=this.createDataView(4),t=e.dataView;return t.setInt32(e.byteOffset,this.shapeHandle),t.buffer}getType(){return ut.RUBBER_EXT}}var ZE=W(97).Z;P.sessions={},P.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){let n=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),e=33;return window.navigator.userAgent.match("Linux")&&(e=35),n>=26&&n<=e||P.extension.isInstalled()}return!0};var QE={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(n){let e=window.setTimeout(function(){let t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',n(t)},1e3);this.cache[e]=n,window.postMessage({type:"janusGetScreen",id:e},"*")},init:function(){let n={};this.cache=n,window.addEventListener("message",function(e){if(e.origin==window.location.origin)if("janusGotScreen"==e.data.type&&n[e.data.id]){let t=n[e.data.id];if(delete n[e.data.id],""===e.data.sourceId){let r=new Error("NavigatorUserMediaError");r.name="You cancelled the request for permission, giving up...",t(r)}else t(null,e.data.sourceId)}else"janusGetScreenPending"==e.data.type&&(console.log("clearing ",e.data.id),window.clearTimeout(e.data.id))})}};function P(n){if((n=n||{}).success="function"==typeof n.success?n.success:P.noop,n.error="function"==typeof n.error?n.error:P.noop,n.destroyed="function"==typeof n.destroyed?n.destroyed:P.noop,!P.initDone)return n.error("Library not initialized"),{};if(!P.isWebrtcSupported())return n.error("WebRTC not supported by this browser"),{};if(P.log("Library initialized: "+P.initDone),!n.server)return n.error("Invalid server url"),{};let e=!1,t=null,r={},i=null,s=null,o=0,a=n.server;P.isArray(a)?(P.log("Multiple servers provided ("+a.length+"), will use the first that works"),a=null,s=n.server,P.debug(s)):0===a.indexOf("ws")?(e=!0,P.log("Using WebSockets to contact Janus: "+a)):(e=!1,P.log("Using REST API to contact Janus: "+a));let l=n.iceServers||[{urls:"stun:stun.l.google.com:19302"}],c=n.iceTransportPolicy,p=n.bundlePolicy,v=!1;null!=n.withCredentials&&(v=!0===n.withCredentials);let k=10;null!=n.max_poll_events&&(k=n.max_poll_events),k<1&&(k=1);let $=null;null!=n.token&&($=n.token);let he=null;null!=n.apisecret&&(he=n.apisecret),this.destroyOnUnload=!0,null!=n.destroyOnUnload&&(this.destroyOnUnload=!0===n.destroyOnUnload);let je=25e3;null!=n.keepAlivePeriod&&(je=n.keepAlivePeriod),isNaN(je)&&(je=25e3);let st=6e4;function rt(se){let Y={high:9e5,medium:3e5,low:1e5};return null!=se&&(se.high&&(Y.high=se.high),se.medium&&(Y.medium=se.medium),se.low&&(Y.low=se.low)),Y}null!=n.longPollTimeout&&(st=n.longPollTimeout),isNaN(st)&&(st=6e4);let Le=!1,Ge=null,gt={},Ot=this,En=0,Ye={};function Zn(){if(null==Ge)return;if(P.debug("Long poll..."),!Le)return void P.warn("Is the server down? (connected=false)");let se=a+"/"+Ge+"?rid="+(new Date).getTime();k&&(se=se+"&maxev="+k),$&&(se=se+"&token="+encodeURIComponent($)),he&&(se=se+"&apisecret="+encodeURIComponent(he)),P.httpAPICall(se,{verb:"GET",withCredentials:v,success:Qn,timeout:st,error:function(Y,Ee){if(P.error(Y+":",Ee),En++,En>3)return Le=!1,void n.error("Lost connection to the server (is it down?)");Zn()}})}function Qn(se,Y){if(En=0,!e&&null!=Ge&&!0!==Y&&Zn(),e||!P.isArray(se))if("keepalive"!==se.janus)if("server_info"!==se.janus)if("ack"!==se.janus)if("success"!==se.janus)if("trickle"===se.janus){const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");const ne=gt[Ee];if(!ne)return void P.debug("This handle is not attached to this session");let Ue=se.candidate;P.debug("Got a trickled candidate on session "+Ge),P.debug(Ue);let Ze=ne.webrtcStuff;Ze.pc&&Ze.remoteSdp?(P.debug("Adding remote candidate:",Ue),Ze.pc.addIceCandidate(Ue&&!0!==Ue.completed?Ue:P.endOfCandidates)):(P.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),Ze.candidates||(Ze.candidates=[]),Ze.candidates.push(Ue),P.debug(Ze.candidates))}else{if("webrtcup"===se.janus){P.debug("Got a webrtcup event on session "+Ge),P.debug(se);const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");const ne=gt[Ee];return ne?void ne.webrtcState(!0):void P.debug("This handle is not attached to this session")}if("hangup"===se.janus){P.debug("Got a hangup event on session "+Ge),P.debug(se);const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");const ne=gt[Ee];if(!ne)return void P.debug("This handle is not attached to this session");ne.webrtcState(!1,se.reason),ne.hangup()}else if("detached"===se.janus){P.debug("Got a detached event on session "+Ge),P.debug(se);const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");const ne=gt[Ee];if(!ne)return;ne.ondetached(),ne.detach()}else if("media"===se.janus){P.debug("Got a media event on session "+Ge),P.debug(se);const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");const ne=gt[Ee];if(!ne)return void P.debug("This handle is not attached to this session");ne.mediaState(se.type,se.receiving,se.mid)}else if("slowlink"===se.janus){P.debug("Got a slowlink event on session "+Ge),P.debug(se);const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");const ne=gt[Ee];if(!ne)return void P.debug("This handle is not attached to this session");ne.slowLink(se.uplink,se.lost,se.mid)}else{if("error"===se.janus){P.error("Ooops: "+se.error.code+" "+se.error.reason),P.debug(se);let Ee=se.transaction;if(Ee){let ne=Ye[Ee];ne&&ne(se),delete Ye[Ee]}return}if("event"===se.janus){P.debug("Got a plugin event on session "+Ge),P.debug(se);const Ee=se.sender;if(!Ee)return void P.warn("Missing sender...");let ne=se.plugindata;if(!ne)return void P.warn("Missing plugindata...");P.debug("  -- Event is coming from "+Ee+" ("+ne.plugin+")");let Ue=ne.data;P.debug(Ue);const Ze=gt[Ee];if(!Ze)return void P.warn("This handle is not attached to this session");let $e=se.jsep;$e&&(P.debug("Handling SDP as well..."),P.debug($e));let ft=Ze.onmessage;ft?(P.debug("Notifying application..."),ft(Ue,$e)):P.debug("No provided notification callback")}else{if("timeout"===se.janus)return P.error("Timeout on session "+Ge),P.debug(se),void(e&&t.close(3504,"Gateway timeout"));P.warn("Unknown message/event  '"+se.janus+"' on session "+Ge),P.debug(se)}}}else{P.debug("Got a success on session "+Ge),P.debug(se);const Ee=se.transaction;if(Ee){const ne=Ye[Ee];ne&&ne(se),delete Ye[Ee]}}else{P.debug("Got an ack on session "+Ge),P.debug(se);const Ee=se.transaction;if(Ee){const ne=Ye[Ee];ne&&ne(se),delete Ye[Ee]}}else{P.debug("Got info on the Janus instance"),P.debug(se);const Ee=se.transaction;if(Ee){const ne=Ye[Ee];ne&&ne(se),delete Ye[Ee]}}else P.vdebug("Got a keepalive on session "+Ge);else for(let Ee=0;Ee<se.length;Ee++)Qn(se[Ee],!0)}function xn(){if(!a||!e||!Le)return;i=setTimeout(xn,je);let se={janus:"keepalive",session_id:Ge,transaction:P.randomString(12)};$&&(se.token=$),he&&(se.apisecret=he),t.send(JSON.stringify(se))}function pr(se){let Y=P.randomString(12),Ee={janus:"create",transaction:Y};if(se.reconnect&&(Le=!1,Ee.janus="claim",Ee.session_id=Ge,t&&(t.onopen=null,t.onerror=null,t.onclose=null,i&&(clearTimeout(i),i=null))),$&&(Ee.token=$),he&&(Ee.apisecret=he),!a&&P.isArray(s)&&(a=s[o],0===a.indexOf("ws")?(e=!0,P.log("Server #"+(o+1)+": trying WebSockets to contact Janus ("+a+")")):(e=!1,P.log("Server #"+(o+1)+": trying REST API to contact Janus ("+a+")"))),e){t=P.newWebSocket(a,"janus-protocol"),r={error:function(){if(P.error("Error connecting to the Janus WebSockets server... "+a),P.isArray(s)&&!se.reconnect)return o++,o===s.length?void se.error("Error connecting to any of the provided Janus servers: Is the server down?"):(a=null,void setTimeout(function(){pr(se)},200));se.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){Ye[Y]=function(ne){if(P.debug(ne),"success"!==ne.janus)return P.error("Ooops: "+ne.error.code+" "+ne.error.reason),void se.error(ne.error.reason);i=setTimeout(xn,je),Le=!0,Ge=ne.session_id?ne.session_id:ne.data.id,P.log(se.reconnect?"Claimed session: "+Ge:"Created session: "+Ge),P.sessions[Ge]=Ot,se.success()},t.send(JSON.stringify(Ee))},message:function(ne){Qn(JSON.parse(ne.data))},close:function(){!a||!Le||(Le=!1,n.error("Lost connection to the server (is it down?)"))}};for(let ne in r)t.addEventListener(ne,r[ne])}else P.httpAPICall(a,{verb:"POST",withCredentials:v,body:Ee,success:function(ne){if(P.debug(ne),"success"!==ne.janus)return P.error("Ooops: "+ne.error.code+" "+ne.error.reason),void se.error(ne.error.reason);Le=!0,Ge=ne.session_id?ne.session_id:ne.data.id,P.log(se.reconnect?"Claimed session: "+Ge:"Created session: "+Ge),P.sessions[Ge]=Ot,Zn(),se.success()},error:function(ne,Ue){if(P.error(ne+":",Ue),P.isArray(s)&&!se.reconnect)return o++,o===s.length?void se.error("Error connecting to any of the provided Janus servers: Is the server down?"):(a=null,void setTimeout(function(){pr(se)},200));se.error(""===Ue?ne+": Is the server down?":Ue&&Ue.error?ne+": "+Ue.error.message:ne+": "+Ue)}})}function Os(se,Y){if((Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:P.noop,!Le)return P.warn("Is the server down? (connected=false)"),void Y.error("Is the server down? (connected=false)");let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)return P.warn("Invalid handle"),void Y.error("Invalid handle");let ne=Y.message,Ue=Y.jsep,Ze=P.randomString(12),$e={janus:"message",body:ne,transaction:Ze};if(Ee.token&&($e.token=Ee.token),he&&($e.apisecret=he),Ue&&($e.jsep={type:Ue.type,sdp:Ue.sdp},Ue.e2ee&&($e.jsep.e2ee=!0),("hml"===Ue.rid_order||"lmh"===Ue.rid_order)&&($e.jsep.rid_order=Ue.rid_order),Ue.force_relay&&($e.jsep.force_relay=!0)),P.debug("Sending message to plugin (handle="+se+"):"),P.debug($e),e)return $e.session_id=Ge,$e.handle_id=se,Ye[Ze]=function(ft){if(P.debug("Message sent!"),P.debug(ft),"success"===ft.janus){let at=ft.plugindata;if(!at)return P.warn("Request succeeded, but missing plugindata..."),void Y.success();P.log("Synchronous transaction successful ("+at.plugin+")");let Ve=at.data;return P.debug(Ve),void Y.success(Ve)}"ack"===ft.janus?Y.success():ft.error?(P.error("Ooops: "+ft.error.code+" "+ft.error.reason),Y.error(ft.error.code+" "+ft.error.reason)):(P.error("Unknown error"),Y.error("Unknown error"))},void t.send(JSON.stringify($e));P.httpAPICall(a+"/"+Ge+"/"+se,{verb:"POST",withCredentials:v,body:$e,success:function(ft){if(P.debug("Message sent!"),P.debug(ft),"success"===ft.janus){let at=ft.plugindata;if(!at)return P.warn("Request succeeded, but missing plugindata..."),void Y.success();P.log("Synchronous transaction successful ("+at.plugin+")");let Ve=at.data;return P.debug(Ve),void Y.success(Ve)}"ack"===ft.janus?Y.success():ft.error?(P.error("Ooops: "+ft.error.code+" "+ft.error.reason),Y.error(ft.error.code+" "+ft.error.reason)):(P.error("Unknown error"),Y.error("Unknown error"))},error:function(ft,at){P.error(ft+":",at),Y.error(ft+": "+at)}})}function ks(se,Y){if(!Le)return void P.warn("Is the server down? (connected=false)");let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)return void P.warn("Invalid handle");let ne={janus:"trickle",candidate:Y,transaction:P.randomString(12)};if(Ee.token&&(ne.token=Ee.token),he&&(ne.apisecret=he),P.vdebug("Sending trickle candidate (handle="+se+"):"),P.vdebug(ne),e)return ne.session_id=Ge,ne.handle_id=se,void t.send(JSON.stringify(ne));P.httpAPICall(a+"/"+Ge+"/"+se,{verb:"POST",withCredentials:v,body:ne,success:function(Ue){P.vdebug("Candidate sent!"),P.vdebug(Ue),"ack"===Ue.janus||P.error("Ooops: "+Ue.error.code+" "+Ue.error.reason)},error:function(Ue,Ze){P.error(Ue+":",Ze)}})}function oc(se,Y,Ee,ne,Ue){let Ze=gt[se];if(!Ze||!Ze.webrtcStuff)return void P.warn("Invalid handle");let $e=Ze.webrtcStuff;if(!$e.pc)return void P.warn("Invalid PeerConnection");let at=function(et){P.log("Received state change on data channel:",et);let mt=et.target.label,Ut=et.target.protocol,en=$e.dataChannel[mt]?$e.dataChannel[mt].readyState:"null";if(P.log("State change on <"+mt+"> data channel: "+en),"open"===en){if($e.dataChannel[mt].pending&&$e.dataChannel[mt].pending.length>0){P.log("Sending pending messages on <"+mt+">:",$e.dataChannel[mt].pending.length);for(let li of $e.dataChannel[mt].pending)P.log("Sending data on data channel <"+mt+">"),P.debug(li),$e.dataChannel[mt].send(li);$e.dataChannel[mt].pending=[]}Ze.ondataopen(mt,Ut)}};if(ne)$e.dataChannel[Y]=ne;else{let et=$e.dataChannelOptions;Ee&&(et.protocol=Ee),$e.dataChannel[Y]=$e.pc.createDataChannel(Y,et)}$e.dataChannel[Y].onmessage=function(et){P.log("Received message on data channel:",et),Ze.ondata(et.data,et.target.label)},$e.dataChannel[Y].onopen=at,$e.dataChannel[Y].onclose=at,$e.dataChannel[Y].onerror=function(et){P.error("Got error on data channel:",et)},$e.dataChannel[Y].pending=[],Ue&&$e.dataChannel[Y].pending.push(Ue)}function ac(se,Y){(Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:P.noop;let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)return P.warn("Invalid handle"),void Y.error("Invalid handle");let ne=Ee.webrtcStuff,Ue=Y.text||Y.data;if(!Ue)return P.warn("Invalid data"),void Y.error("Invalid data");let Ze=Y.label?Y.label:P.dataChanDefaultLabel;return ne.dataChannel[Ze]?"open"!==ne.dataChannel[Ze].readyState?(ne.dataChannel[Ze].pending.push(Ue),void Y.success()):(P.log("Sending data on data channel <"+Ze+">"),P.debug(Ue),ne.dataChannel[Ze].send(Ue),void Y.success()):(oc(se,Ze,Y.protocol,!1,Ue),void Y.success())}function qr(se,Y){(Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:P.noop;let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)return P.warn("Invalid handle"),void Y.error("Invalid handle");let ne=Ee.webrtcStuff;if(!ne.dtmfSender){if(ne.pc){let Ve=ne.pc.getSenders().find(function(et){return et.track&&"audio"===et.track.kind});if(!Ve)return P.warn("Invalid DTMF configuration (no audio track)"),void Y.error("Invalid DTMF configuration (no audio track)");ne.dtmfSender=Ve.dtmf,ne.dtmfSender&&(P.log("Created DTMF Sender"),ne.dtmfSender.ontonechange=function(et){P.debug("Sent DTMF tone: "+et.tone)})}if(!ne.dtmfSender)return P.warn("Invalid DTMF configuration"),void Y.error("Invalid DTMF configuration")}let Ue=Y.dtmf;if(!Ue)return P.warn("Invalid DTMF parameters"),void Y.error("Invalid DTMF parameters");let Ze=Ue.tones;if(!Ze)return P.warn("Invalid DTMF string"),void Y.error("Invalid DTMF string");let $e="number"==typeof Ue.duration?Ue.duration:500,ft="number"==typeof Ue.gap?Ue.gap:50;P.debug("Sending DTMF string "+Ze+" (duration "+$e+"ms, gap "+ft+"ms)"),ne.dtmfSender.insertDTMF(Ze,$e,ft),Y.success()}function xa(se,Y){(Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:P.noop;let Ee=!0===Y.noRequest;P.log("Destroying handle "+se+" (only-locally="+Ee+")"),vo(se);let ne=gt[se];if(!ne||ne.detached)return delete gt[se],void Y.success();if(ne.detached=!0,Ee)return delete gt[se],void Y.success();if(!Le)return P.warn("Is the server down? (connected=false)"),void Y.error("Is the server down? (connected=false)");let Ue={janus:"detach",transaction:P.randomString(12)};if(ne.token&&(Ue.token=ne.token),he&&(Ue.apisecret=he),e)return Ue.session_id=Ge,Ue.handle_id=se,t.send(JSON.stringify(Ue)),delete gt[se],void Y.success();P.httpAPICall(a+"/"+Ge+"/"+se,{verb:"POST",withCredentials:v,body:Ue,success:function(Ze){P.log("Destroyed handle:"),P.debug(Ze),"success"!==Ze.janus&&P.error("Ooops: "+Ze.error.code+" "+Ze.error.reason),delete gt[se],Y.success()},error:function(Ze,$e){P.error(Ze+":",$e),delete gt[se],Y.success()}})}function Ld(se,Y){let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)throw P.warn("Invalid handle"),"Invalid handle";let ne=Ee.webrtcStuff;if(ne.pc)return;let Ue={iceServers:l,iceTransportPolicy:c,bundlePolicy:p,sdpSemantics:"unified-plan"},Ze=!1;if(Y.tracks)for(let $e of Y.tracks)if($e.transforms&&($e.transforms.sender||$e.transforms.receiver)){Ze=!0;break}RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&Ze&&(ne.insertableStreams=!0,Ue.forceEncodedAudioInsertableStreams=!0,Ue.forceEncodedVideoInsertableStreams=!0,Ue.encodedInsertableStreams=!0),P.log("Creating PeerConnection"),ne.pc=new RTCPeerConnection(Ue),P.debug(ne.pc),ne.pc.getStats&&(ne.volume={},ne.bitrate.value="0 kbits/sec"),P.log("Preparing local SDP and gathering candidates (trickle="+ne.trickle+")"),ne.pc.oniceconnectionstatechange=function(){ne.pc&&Ee.iceState(ne.pc.iceConnectionState)},ne.pc.onicecandidate=function($e){if(!$e.candidate||$e.candidate.candidate&&$e.candidate.candidate.indexOf("endOfCandidates")>0)P.log("End of candidates."),ne.iceDone=!0,!0===ne.trickle?ks(se,{completed:!0}):function Bd(se,Y){(Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:P.noop;let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)return void P.warn("Invalid handle, not sending anything");let ne=Ee.webrtcStuff;P.log("Sending offer/answer SDP..."),ne.mySdp?(ne.mySdp={type:ne.pc.localDescription.type,sdp:ne.pc.localDescription.sdp},!1===ne.trickle&&(ne.mySdp.trickle=!1),P.debug(Y),ne.sdpSent=!0,Y.success(ne.mySdp)):P.warn("Local SDP instance is invalid, not sending anything...")}(se,Y);else{let ft={candidate:$e.candidate.candidate,sdpMid:$e.candidate.sdpMid,sdpMLineIndex:$e.candidate.sdpMLineIndex};!0===ne.trickle&&ks(se,ft)}},ne.pc.ontrack=function($e){if(P.log("Handling Remote Track",$e),!$e.streams||!$e.track)return;let ft=$e.transceiver?$e.transceiver.mid:$e.track.id;try{Ee.onremotetrack($e.track,ft,!0)}catch(Ve){P.error("Error calling onremotetrack",Ve)}if($e.track.onended)return;let at=null;P.log("Adding onended callback to track:",$e.track),$e.track.onended=function(Ve){P.log("Remote track removed:",Ve),clearTimeout(at);let et=ne.pc?ne.pc.getTransceivers():null,mt=et?et.find(en=>en.receiver.track===Ve.target):null,Ut=mt?mt.mid:Ve.target.id;try{Ee.onremotetrack(Ve.target,Ut,!1)}catch(en){P.error("Error calling onremotetrack on removal",en)}},$e.track.onmute=function(Ve){P.log("Remote track muted:",Ve),at||(at=setTimeout(function(){P.log("Removing remote track");let et=ne.pc.getTransceivers().find(Ut=>Ut.receiver.track===Ve.target),mt=et?et.mid:Ve.target.id;try{Ee.onremotetrack(Ve.target,mt,!1)}catch(Ut){P.error("Error calling onremotetrack on mute",Ut)}at=null},2520))},$e.track.onunmute=function(Ve){if(P.log("Remote track flowing again:",Ve),null!=at)clearTimeout(at),at=null;else try{let et=ne.pc.getTransceivers().find(Ut=>Ut.receiver.track===Ve.target);Ee.onremotetrack(Ve.target,et?et.mid:Ve.target.id,!0)}catch(et){P.error("Error calling onremotetrack on unmute",et)}}}}function us(se,Y,Ee){return lc.apply(this,arguments)}function lc(){return(lc=Rn(function*(se,Y,Ee){(Ee=Ee||{}).success="function"==typeof Ee.success?Ee.success:P.noop,Ee.error="function"==typeof Ee.error?Ee.error:jd;let ne=Ee.jsep;if(Y&&ne)return P.error("Provided a JSEP to a createOffer"),void Ee.error("Provided a JSEP to a createOffer");if(!(Y||ne&&ne.type&&ne.sdp))return P.error("A valid JSEP is required for createAnswer"),void Ee.error("A valid JSEP is required for createAnswer");if(Ee.media&&!Ee.tracks){if(Ee.tracks=P.mediaToTracks(Ee.media),!0===Ee.simulcast||!0===Ee.simulcast2||Ee.svc)for(let $e of Ee.tracks)if("video"===$e.type){!0===Ee.simulcast||!0===Ee.simulcast2?$e.simulcast=!0:Ee.svc&&($e.svc=Ee.svc);break}P.warn("Deprecated media object passed, use tracks instead. Automatically translated to:",Ee.tracks)}if(Ee.tracks&&!Array.isArray(Ee.tracks))return P.error("Tracks must be an array"),void Ee.error("Tracks must be an array");let Ue=gt[se];if(!Ue||!Ue.webrtcStuff)return P.warn("Invalid handle"),void Ee.error("Invalid handle");let Ze=Ue.webrtcStuff;Ze.trickle=yo(Ee.trickle);try{if(Ld(se,Ee),Y&&(yield Fs(se,Ee)),ne){if(yield Ze.pc.setRemoteDescription(ne),P.log("Remote description accepted!"),Ze.remoteSdp=ne.sdp,Ze.candidates&&Ze.candidates.length>0){for(let ft=0;ft<Ze.candidates.length;ft++){let at=Ze.candidates[ft];P.debug("Adding remote candidate:",at),Ze.pc.addIceCandidate(at&&!0!==at.completed?at:P.endOfCandidates)}Ze.candidates=[]}yield Fs(se,Ee);let $e=yield Em(se,Ee);Ee.success($e)}else{let $e=yield Nd(se,Ee);Ee.success($e)}}catch($e){P.error($e),Ee.error($e)}})).apply(this,arguments)}function cc(se,Y){(Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:jd,Y.customizeSdp="function"==typeof Y.customizeSdp?Y.customizeSdp:P.noop;let Ee=Y.jsep,ne=gt[se];if(!ne||!ne.webrtcStuff)return P.warn("Invalid handle"),void Y.error("Invalid handle");let Ue=ne.webrtcStuff;if(Ee){if(!Ue.pc)return P.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void Y.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");Y.customizeSdp(Ee),Ue.pc.setRemoteDescription(Ee).then(function(){if(P.log("Remote description accepted!"),Ue.remoteSdp=Ee.sdp,Ue.candidates&&Ue.candidates.length>0){for(let Ze=0;Ze<Ue.candidates.length;Ze++){let $e=Ue.candidates[Ze];P.debug("Adding remote candidate:",$e),Ue.pc.addIceCandidate($e&&!0!==$e.completed?$e:P.endOfCandidates)}Ue.candidates=[]}Y.success()},Y.error)}else Y.error("Invalid JSEP")}function Nd(se,Y){return Ma.apply(this,arguments)}function Ma(){return(Ma=Rn(function*(se,Y){(Y=Y||{}).customizeSdp="function"==typeof Y.customizeSdp?Y.customizeSdp:P.noop;let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)throw P.warn("Invalid handle"),"Invalid handle";let ne=Ee.webrtcStuff;P.log("Creating offer (iceDone="+ne.iceDone+")");let Ue={};!0===Y.iceRestart&&(Ue.iceRestart=!0),P.debug(Ue);let $e=yield ne.pc.createOffer(Ue);P.debug($e);let ft={type:"offer",sdp:$e.sdp};return Y.customizeSdp(ft),$e.sdp=ft.sdp,P.log("Setting local description"),ne.mySdp={type:"offer",sdp:$e.sdp},yield ne.pc.setLocalDescription($e),ne.mediaConstraints=Ue,ne.iceDone||ne.trickle?(ne.insertableStreams&&($e.e2ee=!0),$e):(P.log("Waiting for all candidates..."),null)})).apply(this,arguments)}function Em(se,Y){return po.apply(this,arguments)}function po(){return(po=Rn(function*(se,Y){(Y=Y||{}).customizeSdp="function"==typeof Y.customizeSdp?Y.customizeSdp:P.noop;let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)throw P.warn("Invalid handle"),"Invalid handle";let ne=Ee.webrtcStuff;P.log("Creating answer (iceDone="+ne.iceDone+")");let Ue=yield ne.pc.createAnswer();P.debug(Ue);let Ze={type:"answer",sdp:Ue.sdp};return Y.customizeSdp(Ze),Ue.sdp=Ze.sdp,P.log("Setting local description"),ne.mySdp={type:"answer",sdp:Ue.sdp},yield ne.pc.setLocalDescription(Ue),ne.iceDone||ne.trickle?(ne.insertableStreams&&(Ue.e2ee=!0),Ue):(P.log("Waiting for all candidates..."),null)})).apply(this,arguments)}function uc(se,Y){return Pa.apply(this,arguments)}function Pa(){return(Pa=Rn(function*(se,Y){if((Y=Y||{}).success="function"==typeof Y.success?Y.success:P.noop,Y.error="function"==typeof Y.error?Y.error:P.noop,Y.tracks&&!Array.isArray(Y.tracks))return P.error("Tracks must be an array"),void Y.error("Tracks must be an array");for(let Ee of Y.tracks)(Ee.add||!Ee.replace&&!Ee.remove)&&(Ee.replace=!0);try{yield Fs(se,Y),Y.success()}catch(Ee){P.error(Ee),Y.error(Ee)}})).apply(this,arguments)}function Fs(se,Y){return dc.apply(this,arguments)}function dc(){return(dc=Rn(function*(se,Y){let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)throw P.warn("Invalid handle, not sending anything"),"Invalid handle";let ne=Ee.webrtcStuff;if(!ne.pc)throw P.warn("Invalid PeerConnection"),"Invalid PeerConnection";let Ue=Y.tracks;if(!Ue||!Array.isArray(Ue)||0===Ue.length)return;let Ze=!1,$e={};for(let Ve of Ue){if(delete Ve.gumGroup,!Ve.type||!["audio","video"].includes(Ve.type)||!Ve.capture||Ve.capture instanceof MediaStreamTrack)continue;let et=Ve.group?Ve.group:"default";$e[et]||($e[et]={}),!$e[et][Ve.type]&&(Ve.gumGroup=et,$e[et][Ve.type]=Ve)}let ft=Object.keys($e);for(let Ve of ft){let et=$e[Ve];(!et.audio||!et.video)&&(et.audio&&delete et.audio.gumGroup,et.video&&delete et.video.gumGroup,delete $e[Ve])}let at=!!Y.jsep;for(let Ve of Ue){if(!Ve.type){P.warn("Missing track type:",Ve);continue}if("data"===Ve.type){if(ne.pc.ondatachannel){P.warn("Data channel exists already, not creating another one");continue}P.log("Creating default data channel"),oc(se,P.dataChanDefaultLabel,null,!1),ne.pc.ondatachannel=function(pt){P.log("Data channel created by Janus:",pt),oc(se,pt.channel.label,pt.channel.protocol,pt.channel)};continue}if(void 0===Ve.add&&null===Ve.add&&void 0===Ve.remove&&null===Ve.remove&&void 0===Ve.replace&&null===Ve.replace&&(Ve.add=!0),Ve.add&&Ve.remove||Ve.add&&Ve.remove&&Ve.replace){P.warn("Conflicting actions for track, ignoring:",Ve);continue}Ve.add&&Ve.replace?(P.warn("Both add and replace provided, falling back to replace:",Ve),delete Ve.add):Ve.remove&&Ve.replace&&(P.warn("Both remove and replace provided, falling back to remove:",Ve),delete Ve.replace);let et=Ve.type;"screen"===Ve.type&&(et="video");let mt=null,Ut=null;if(mt=Ve.mid?ne.pc.getTransceivers().find(pt=>pt.mid===Ve.mid&&pt.receiver.track.kind===et):ne.pc.getTransceivers().find(pt=>pt.receiver.track.kind===et),Ve.replace||Ve.remove){if(!mt){P.warn("Couldn't find a transceiver for track:",Ve);continue}if(!mt.sender){P.warn("No sender in the transceiver for track:",Ve);continue}Ut=mt.sender}if(at&&!mt&&(mt=ne.pc.getTransceivers().find(pt=>pt.receiver.track.kind===et),!mt)){P.warn("Couldn't find a transceiver for track:",Ve);continue}let en=null,li=null;if(Ve.remove)P.log("Removing track from PeerConnection",Ve),li=Ut.track?Ut.track.id:null,yield Ut.replaceTrack(null);else if(Ve.capture){if(Ve.gumGroup&&$e[Ve.gumGroup]&&$e[Ve.gumGroup].stream){let pt=$e[Ve.gumGroup].stream;en="audio"===Ve.type?pt.getAudioTracks()[0]:pt.getVideoTracks()[0],delete $e[Ve.gumGroup].stream,delete $e[Ve.gumGroup],delete Ve.gumGroup}else if(Ve.capture instanceof MediaStreamTrack)en=Ve.capture;else{Ze||(Ze=!0,Ee.consentDialog(!0));let pt=P.trackConstraints(Ve),Jt=null;if("audio"===Ve.type||"video"===Ve.type){if(Ve.gumGroup){let gr="audio"===Ve.type?"video":"audio";if($e[Ve.gumGroup]&&$e[Ve.gumGroup][gr]){let DU=P.trackConstraints($e[Ve.gumGroup][gr]);pt[gr]=DU[gr]}}Jt=yield navigator.mediaDevices.getUserMedia(pt),Ve.gumGroup&&pt.audio&&pt.video&&($e[Ve.gumGroup].stream=Jt,delete Ve.gumGroup)}else Jt=yield navigator.mediaDevices.getDisplayMedia(pt);en="audio"===Ve.type?Jt.getAudioTracks()[0]:Jt.getVideoTracks()[0]}if(Ve.replace){yield Ut.replaceTrack(en);let pt="sendrecv";(!1===Ve.recv||"inactive"===mt.direction||"sendonly"===mt.direction)&&(pt="sendonly"),mt.setDirection?mt.setDirection(pt):mt.direction=pt}else{if(ne.myStream||(ne.myStream=new MediaStream),"audio"===et||!Ve.simulcast&&!Ve.svc)Ut=ne.pc.addTrack(en,ne.myStream),mt=ne.pc.getTransceivers().find(pt=>pt.sender===Ut);else if(Ve.simulcast){if("firefox"!==P.webRTCAdapter.browserDetails.browser){P.log("Enabling rid-based simulcasting:",en);let pt=rt(Ve.simulcastMaxBitrates);mt=ne.pc.addTransceiver(en,{direction:"sendrecv",streams:[ne.myStream],sendEncodings:Ve.sendEncodings||[{rid:"h",active:!0,maxBitrate:pt.high},{rid:"m",active:!0,maxBitrate:pt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:pt.low,scaleResolutionDownBy:4}]})}else if(P.log("Enabling Simulcasting for Firefox (RID)"),mt=ne.pc.addTransceiver(en,{direction:"sendrecv",streams:[ne.myStream]}),Ut=mt?mt.sender:null,Ut){let pt=Ut.getParameters();pt||(pt={});let Jt=rt(Ve.simulcastMaxBitrates);pt.encodings=Ve.sendEncodings||[{rid:"h",active:!0,maxBitrate:Jt.high},{rid:"m",active:!0,maxBitrate:Jt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:Jt.low,scaleResolutionDownBy:4}],Ut.setParameters(pt)}}else P.log("Enabling SVC ("+Ve.svc+"):",en),mt=ne.pc.addTransceiver(en,{direction:"sendrecv",streams:[ne.myStream],sendEncodings:[{scalabilityMode:Ve.svc}]});if(Ut||(Ut=mt?mt.sender:null),Ve.codec)if("firefox"===P.webRTCAdapter.browserDetails.browser)P.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",Ve);else if("string"!=typeof Ve.codec)P.warn("Invalid codec value, ignoring for track:",Ve);else{let pt=et+"/"+Ve.codec.toLowerCase(),Jt=RTCRtpReceiver.getCapabilities(et).codecs.filter(function(gr){return gr.mimeType.toLowerCase()===pt});if(Jt&&0!==Jt.length){if(mt)try{mt.setCodecPreferences(Jt)}catch(gr){P.warn("Failed enforcing codec for this "+et+" track:",gr)}}else P.warn("Codec not supported in this browser for this track, ignoring:",Ve)}if(Ve.bitrate)if(Ve.simulcast||Ve.svc)P.warn("Ignoring bitrate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(Ve.bitrate)||Ve.bitrate<0)P.warn("Ignoring invalid bitrate for track:",Ve);else if(Ut){let pt=Ut.getParameters();pt&&pt.encodings&&0!==pt.encodings.length?(pt.encodings[0].maxBitrate=Ve.bitrate,yield Ut.setParameters(pt)):P.warn("No encodings in the sender parameters, ignoring bitrate for track:",Ve)}if("video"===et&&Ve.framerate)if(Ve.simulcast||Ve.svc)P.warn("Ignoring framerate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(Ve.framerate)||Ve.framerate<0)P.warn("Ignoring invalid framerate for track:",Ve);else if(Ut){let pt=Ut.getParameters();pt&&pt.encodings&&0!==pt.encodings.length?(pt.encodings[0].maxFramerate=Ve.framerate,yield Ut.setParameters(pt)):P.warn("No encodings in the sender parameters, ignoring framerate for track:",Ve)}if(Ve.transforms){if(Ut&&Ve.transforms.sender){let pt=null;RTCRtpSender.prototype.createEncodedStreams?pt=Ut.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===et?pt=Ut.createEncodedAudioStreams():"video"===et&&(pt=Ut.createEncodedVideoStreams())),pt&&(console.log("Insertable Streams sender transform:",pt),pt.readableStream&&pt.writableStream?pt.readableStream.pipeThrough(Ve.transforms.sender).pipeTo(pt.writableStream):pt.readable&&pt.writable&&pt.readable.pipeThrough(Ve.transforms.sender).pipeTo(pt.writable))}if(mt&&mt.receiver&&Ve.transforms.receiver){let pt=null;RTCRtpReceiver.prototype.createEncodedStreams?pt=mt.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===et?pt=mt.receiver.createEncodedAudioStreams():"video"===et&&(pt=mt.receiver.createEncodedVideoStreams())),pt&&(console.log("Insertable Streams receiver transform:",pt),pt.readableStream&&pt.writableStream?pt.readableStream.pipeThrough(Ve.transforms.receiver).pipeTo(pt.writableStream):pt.readable&&pt.writable&&pt.readable.pipeThrough(Ve.transforms.receiver).pipeTo(pt.writable))}}}en&&!0===Ve.dontStop&&(en.dontStop=!0)}if(li&&ne.myStream){let pt=null;if("audio"===et&&ne.myStream.getAudioTracks()&&ne.myStream.getAudioTracks().length)for(let Jt of ne.myStream.getAudioTracks())Jt.id===li&&(pt=Jt,P.log("Removing audio track:",pt));else if("video"===et&&ne.myStream.getVideoTracks()&&ne.myStream.getVideoTracks().length)for(let Jt of ne.myStream.getVideoTracks())Jt.id===li&&(pt=Jt,P.log("Removing video track:",pt));if(pt){try{ne.myStream.removeTrack(pt),Ee.onlocaltrack(pt,!1)}catch(Jt){P.error("Error calling onlocaltrack on removal for renegotiation",Jt)}if(!0!==pt.dontStop)try{pt.stop()}catch(Jt){}}}if(en){ne.myStream.addTrack(en),en.onended=function(pt){P.log("Local track removed:",pt);try{Ee.onlocaltrack(pt.target,!1)}catch(Jt){P.error("Error calling onlocaltrack following end",Jt)}};try{Ee.onlocaltrack(en,!0)}catch(pt){P.error("Error calling onlocaltrack for track add",pt)}}if(mt){let pt=mt.direction,Jt=null,gr=en&&mt.sender.track,Ra=!1!==Ve.recv&&mt.receiver.track;gr&&Ra?Jt="sendrecv":gr&&!Ra?Jt="sendonly":!gr&&Ra?Jt="recvonly":!gr&&!Ra&&(Jt="inactive"),Jt&&Jt!==pt&&(P.warn("Changing direction of transceiver to "+Jt+" (was "+pt+")",Ve),mt.setDirection?mt.setDirection(Jt):mt.direction=Jt)}}Ze&&Ee.consentDialog(!1)})).apply(this,arguments)}function go(se){let Y=gt[se];if(!Y||!Y.webrtcStuff)return P.warn("Invalid handle"),null;let Ee=Y.webrtcStuff;if(!Ee.pc)return P.warn("Invalid PeerConnection"),null;let ne=[],Ue=Ee.pc.getTransceivers();for(let Ze of Ue){let $e=null;Ze.sender&&Ze.sender.track&&($e={mid:Ze.mid},$e.type=Ze.sender.track.kind,$e.id=Ze.sender.track.id,$e.label=Ze.sender.track.label),$e&&ne.push($e)}return ne}function Ui(se){let Y=gt[se];if(!Y||!Y.webrtcStuff)return P.warn("Invalid handle"),null;let Ee=Y.webrtcStuff;if(!Ee.pc)return P.warn("Invalid PeerConnection"),null;let ne=[],Ue=Ee.pc.getTransceivers();for(let Ze of Ue){let $e=null;Ze.receiver&&Ze.receiver.track&&($e={mid:Ze.mid},$e.type=Ze.receiver.track.kind,$e.id=Ze.receiver.track.id,$e.label=Ze.receiver.track.label),$e&&ne.push($e)}return ne}function ds(se,Y,Ee,ne){ne="function"==typeof ne?ne:P.noop;let Ue=gt[se];if(!Ue||!Ue.webrtcStuff)return P.warn("Invalid handle"),void ne(0);let Ze=Ee?"remote":"local",$e=Ue.webrtcStuff;if($e.volume[Ze]||($e.volume[Ze]={value:0}),!$e.pc.getStats||"chrome"!==P.webRTCAdapter.browserDetails.browser&&"safari"!==P.webRTCAdapter.browserDetails.browser)return P.warn("Getting the "+Ze+" volume unsupported by browser"),void ne(0);{let ft=$e.pc;if(Y){let at=$e.pc.getTransceivers().find(Ve=>Ve.mid===Y&&"audio"===Ve.receiver.track.kind);if(!at)return P.warn("No audio transceiver with mid "+Y),void ne(0);if(Ee&&!at.receiver)return P.warn("Remote transceiver track unavailable"),void ne(0);if(!Ee&&!at.sender)return P.warn("Local transceiver track unavailable"),void ne(0);ft=Ee?at.receiver:at.sender}return ft.getStats().then(function(at){at.forEach(function(Ve){!Ve||"audio"!==Ve.kind||Ee&&!Ve.remoteSource||!Ee&&"media-source"!==Ve.type||ne(Ve.audioLevel?Ve.audioLevel:0)})}),$e.volume[Ze].value}}function Ia(se,Y,Ee){let ne=gt[se];if(!ne||!ne.webrtcStuff)return P.warn("Invalid handle"),!0;let Ue=ne.webrtcStuff;if(!Ue.pc)return P.warn("Invalid PeerConnection"),!0;if(!Ue.myStream)return P.warn("Invalid local MediaStream"),!0;if(Ee){if(!Ue.myStream.getVideoTracks()||0===Ue.myStream.getVideoTracks().length)return P.warn("No video track"),!0;if(Y){let Ze=Ue.pc.getTransceivers().find($e=>$e.mid===Y&&"video"===$e.receiver.track.kind);return Ze?Ze.sender&&Ze.sender.track?!Ze.sender.track.enabled:(P.warn("No video sender with mid "+Y),!0):(P.warn("No video transceiver with mid "+Y),!0)}return!Ue.myStream.getVideoTracks()[0].enabled}if(!Ue.myStream.getAudioTracks()||0===Ue.myStream.getAudioTracks().length)return P.warn("No audio track"),!0;if(Y){let Ze=Ue.pc.getTransceivers().find($e=>$e.mid===Y&&"audio"===$e.receiver.track.kind);return Ze?Ze.sender&&Ze.sender.track?!Ze.sender.track.enabled:(P.warn("No audio sender with mid "+Y),!0):(P.warn("No audio transceiver with mid "+Y),!0)}return!Ue.myStream.getAudioTracks()[0].enabled}function $i(se,Y,Ee,ne){let Ue=gt[se];if(!Ue||!Ue.webrtcStuff)return P.warn("Invalid handle"),!1;let Ze=Ue.webrtcStuff;if(!Ze.pc)return P.warn("Invalid PeerConnection"),!1;if(!Ze.myStream)return P.warn("Invalid local MediaStream"),!1;if(Ee){if(!Ze.myStream.getVideoTracks()||0===Ze.myStream.getVideoTracks().length)return P.warn("No video track"),!1;if(Y){let $e=Ze.pc.getTransceivers().find(ft=>ft.mid===Y&&"video"===ft.receiver.track.kind);if(!$e)return P.warn("No video transceiver with mid "+Y),!1;if(!$e.sender||!$e.sender.track)return P.warn("No video sender with mid "+Y),!1;$e.sender.track.enabled=!ne}else for(const $e of Ze.myStream.getVideoTracks())$e.enabled=!ne}else{if(!Ze.myStream.getAudioTracks()||0===Ze.myStream.getAudioTracks().length)return P.warn("No audio track"),!1;if(Y){let $e=Ze.pc.getTransceivers().find(ft=>ft.mid===Y&&"audio"===ft.receiver.track.kind);if(!$e)return P.warn("No audio transceiver with mid "+Y),!1;if(!$e.sender||!$e.sender.track)return P.warn("No audio sender with mid "+Y),!1;$e.sender.track.enabled=!ne}else for(const $e of Ze.myStream.getAudioTracks())$e.enabled=!ne}return!0}function mo(se,Y){let Ee=gt[se];if(!Ee||!Ee.webrtcStuff)return P.warn("Invalid handle"),"Invalid handle";let ne=Ee.webrtcStuff;if(!ne.pc)return"Invalid PeerConnection";if(ne.pc.getStats){let Ue=ne.pc,Ze=Y||"default";if(Y){let $e=ne.pc.getTransceivers().find(ft=>ft.mid===Y&&"video"===ft.receiver.track.kind);if(!$e)return P.warn("No video transceiver with mid "+Y),"No video transceiver with mid "+Y;if(!$e.receiver)return P.warn("No video receiver with mid "+Y),"No video receiver with mid "+Y;Ue=$e.receiver}return ne.bitrate[Ze]||(ne.bitrate[Ze]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),ne.bitrate[Ze].timer?ne.bitrate[Ze].value:(P.log("Starting bitrate timer"+(Y?" for mid "+Y:"")+" (via getStats)"),ne.bitrate[Ze].timer=setInterval(function(){Ue.getStats().then(function($e){$e.forEach(function(ft){if(!ft)return;let at=!1;if((("video"===ft.mediaType||ft.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===ft.type&&ft.id.indexOf("rtcp")<0||"ssrc"==ft.type&&ft.bytesReceived&&("VP8"===ft.googCodecName||""===ft.googCodecName))&&(at=!0),at)if(ne.bitrate[Ze].bsnow=ft.bytesReceived,ne.bitrate[Ze].tsnow=ft.timestamp,null===ne.bitrate[Ze].bsbefore||null===ne.bitrate[Ze].tsbefore)ne.bitrate[Ze].bsbefore=ne.bitrate[Ze].bsnow,ne.bitrate[Ze].tsbefore=ne.bitrate[Ze].tsnow;else{let Ve=ne.bitrate[Ze].tsnow-ne.bitrate[Ze].tsbefore;"safari"===P.webRTCAdapter.browserDetails.browser&&(Ve/=1e3);let et=Math.round(8*(ne.bitrate[Ze].bsnow-ne.bitrate[Ze].bsbefore)/Ve);"safari"===P.webRTCAdapter.browserDetails.browser&&(et=parseInt(et/1e3)),ne.bitrate[Ze].value=et+" kbits/sec",ne.bitrate[Ze].bsbefore=ne.bitrate[Ze].bsnow,ne.bitrate[Ze].tsbefore=ne.bitrate[Ze].tsnow}})})},1e3),"0 kbits/sec")}return P.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function hc(se,Y,Ee){let ne=gt[se];if(!ne||!ne.webrtcStuff)return void P.warn("Invalid handle");let Ue=ne.webrtcStuff;if(!Ue.pc)return void P.warn("Invalid PeerConnection");let Ze=Ue.pc.getTransceivers().find(ft=>ft.mid===Y);if(!Ze)return void P.warn("No transceiver with mid",Y);if(!Ze.sender)return void P.warn("No sender for transceiver with mid",Y);let $e=Ze.sender.getParameters();$e&&$e.encodings&&0!==$e.encodings.length?$e.encodings.length>1?P.warn("Ignoring bitrate for simulcast track, use sendEncodings for that"):isNaN(Ee)||Ee<0?P.warn("Invalid bitrate (must be a positive integer)"):($e.encodings[0].maxBitrate=Ee,Ze.sender.setParameters($e)):P.warn("No parameters encodings")}function jd(se){P.error("WebRTC error:",se)}function vo(se,Y){P.log("Cleaning WebRTC stuff");let Ee=gt[se];if(!Ee)return;let ne=Ee.webrtcStuff;if(ne){if(!0===Y){let Ue={janus:"hangup",transaction:P.randomString(12)};Ee.token&&(Ue.token=Ee.token),he&&(Ue.apisecret=he),P.debug("Sending hangup request (handle="+se+"):"),P.debug(Ue),e?(Ue.session_id=Ge,Ue.handle_id=se,t.send(JSON.stringify(Ue))):P.httpAPICall(a+"/"+Ge+"/"+se,{verb:"POST",withCredentials:v,body:Ue})}ne.volume&&(ne.volume.local&&ne.volume.local.timer&&clearInterval(ne.volume.local.timer),ne.volume.remote&&ne.volume.remote.timer&&clearInterval(ne.volume.remote.timer));for(let Ue in ne.bitrate)ne.bitrate[Ue].timer&&clearInterval(ne.bitrate[Ue].timer);ne.bitrate={},!ne.streamExternal&&ne.myStream&&(P.log("Stopping local stream tracks"),P.stopAllTracks(ne.myStream)),ne.streamExternal=!1,ne.myStream=null;try{ne.pc.close()}catch(Ue){}ne.pc=null,ne.candidates=null,ne.mySdp=null,ne.remoteSdp=null,ne.iceDone=!1,ne.dataChannel={},ne.dtmfSender=null,ne.insertableStreams=!1}Ee.oncleanup()}function yo(se){return P.debug("isTrickleEnabled:",se),!1!==se}pr(n),this.getServer=function(){return a},this.isConnected=function(){return Le},this.reconnect=function(se){(se=se||{}).success="function"==typeof se.success?se.success:P.noop,se.error="function"==typeof se.error?se.error:P.noop,se.reconnect=!0,pr(se)},this.getSessionId=function(){return Ge},this.getInfo=function(se){!function Is(se){if((se=se||{}).success="function"==typeof se.success?se.success:P.noop,se.error="function"==typeof se.error?se.error:P.noop,P.log("Getting info on Janus instance"),!Le)return P.warn("Is the server down? (connected=false)"),void se.error("Is the server down? (connected=false)");let Y=P.randomString(12),Ee={janus:"info",transaction:Y};if($&&(Ee.token=$),he&&(Ee.apisecret=he),e)return Ye[Y]=function(ne){P.log("Server info:"),P.debug(ne),"server_info"!==ne.janus&&P.error("Ooops: "+ne.error.code+" "+ne.error.reason),se.success(ne)},void t.send(JSON.stringify(Ee));P.httpAPICall(a,{verb:"POST",withCredentials:v,body:Ee,success:function(ne){P.log("Server info:"),P.debug(ne),"server_info"!==ne.janus&&P.error("Ooops: "+ne.error.code+" "+ne.error.reason),se.success(ne)},error:function(ne,Ue){P.error(ne+":",Ue),se.error(""===Ue?ne+": Is the server down?":ne+": "+Ue)}})}(se)},this.destroy=function(se){!function Rs(se){(se=se||{}).success="function"==typeof se.success?se.success:P.noop,se.error="function"==typeof se.error?se.error:P.noop;let Y=!0===se.unload,Ee=!0;null!=se.notifyDestroyed&&(Ee=!0===se.notifyDestroyed);let ne=!0===se.cleanupHandles;if(P.log("Destroying session "+Ge+" (unload="+Y+")"),!Ge)return P.warn("No session to destroy"),se.success(),void(Ee&&n.destroyed());if(ne)for(let Ze in gt)xa(Ze,{noRequest:!0});if(!Le)return P.warn("Is the server down? (connected=false)"),Ge=null,void se.success();let Ue={janus:"destroy",transaction:P.randomString(12)};if($&&(Ue.token=$),he&&(Ue.apisecret=he),Y)return e?(t.onclose=null,t.close(),t=null):navigator.sendBeacon(a+"/"+Ge,JSON.stringify(Ue)),P.log("Destroyed session:"),Ge=null,Le=!1,se.success(),void(Ee&&n.destroyed());if(e){Ue.session_id=Ge;let Ze=function(){for(let at in r)t.removeEventListener(at,r[at]);t.removeEventListener("message",$e),t.removeEventListener("error",ft),i&&clearTimeout(i),t.close()},$e=function(at){let Ve=JSON.parse(at.data);Ve.session_id==Ue.session_id&&Ve.transaction==Ue.transaction&&(Ze(),se.success(),Ee&&n.destroyed())},ft=function(){Ze(),se.error("Failed to destroy the server: Is the server down?"),Ee&&n.destroyed()};return t.addEventListener("message",$e),t.addEventListener("error",ft),void(1===t.readyState?t.send(JSON.stringify(Ue)):ft())}P.httpAPICall(a+"/"+Ge,{verb:"POST",withCredentials:v,body:Ue,success:function(Ze){P.log("Destroyed session:"),P.debug(Ze),Ge=null,Le=!1,"success"!==Ze.janus&&P.error("Ooops: "+Ze.error.code+" "+Ze.error.reason),se.success(),Ee&&n.destroyed()},error:function(Ze,$e){P.error(Ze+":",$e),Ge=null,Le=!1,se.success(),Ee&&n.destroyed()}})}(se)},this.attach=function(se){!function cs(se){if((se=se||{}).success="function"==typeof se.success?se.success:P.noop,se.error="function"==typeof se.error?se.error:P.noop,se.dataChannelOptions=se.dataChannelOptions||{ordered:!0},se.consentDialog="function"==typeof se.consentDialog?se.consentDialog:P.noop,se.iceState="function"==typeof se.iceState?se.iceState:P.noop,se.mediaState="function"==typeof se.mediaState?se.mediaState:P.noop,se.webrtcState="function"==typeof se.webrtcState?se.webrtcState:P.noop,se.slowLink="function"==typeof se.slowLink?se.slowLink:P.noop,se.onmessage="function"==typeof se.onmessage?se.onmessage:P.noop,se.onlocaltrack="function"==typeof se.onlocaltrack?se.onlocaltrack:P.noop,se.onremotetrack="function"==typeof se.onremotetrack?se.onremotetrack:P.noop,se.ondata="function"==typeof se.ondata?se.ondata:P.noop,se.ondataopen="function"==typeof se.ondataopen?se.ondataopen:P.noop,se.oncleanup="function"==typeof se.oncleanup?se.oncleanup:P.noop,se.ondetached="function"==typeof se.ondetached?se.ondetached:P.noop,!Le)return P.warn("Is the server down? (connected=false)"),void se.error("Is the server down? (connected=false)");let Y=se.plugin;if(!Y)return P.error("Invalid plugin"),void se.error("Invalid plugin");let Ee=se.opaqueId,ne=se.loopIndex,Ue=se.token?se.token:$,Ze=P.randomString(12),$e={janus:"attach",plugin:Y,opaque_id:Ee,loop_index:ne,transaction:Ze};if(Ue&&($e.token=Ue),he&&($e.apisecret=he),e)return Ye[Ze]=function(ft){if(P.debug(ft),"success"!==ft.janus)return P.error("Ooops: "+ft.error.code+" "+ft.error.reason),void se.error("Ooops: "+ft.error.code+" "+ft.error.reason);let at=ft.data.id;P.log("Created handle: "+at);let Ve={session:Ot,plugin:Y,id:at,token:Ue,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:se.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return at},getPlugin:function(){return Y},getVolume:function(et,mt){return ds(at,et,!0,mt)},getRemoteVolume:function(et,mt){return ds(at,et,!0,mt)},getLocalVolume:function(et,mt){return ds(at,et,!1,mt)},isAudioMuted:function(et){return Ia(at,et,!1)},muteAudio:function(et){return $i(at,et,!1,!0)},unmuteAudio:function(et){return $i(at,et,!1,!1)},isVideoMuted:function(et){return Ia(at,et,!0)},muteVideo:function(et){return $i(at,et,!0,!0)},unmuteVideo:function(et){return $i(at,et,!0,!1)},getBitrate:function(et){return mo(at,et)},setMaxBitrate:function(et,mt){return hc(at,et,mt)},send:function(et){Os(at,et)},data:function(et){ac(at,et)},dtmf:function(et){qr(at,et)},consentDialog:se.consentDialog,iceState:se.iceState,mediaState:se.mediaState,webrtcState:se.webrtcState,slowLink:se.slowLink,onmessage:se.onmessage,createOffer:function(et){us(at,!0,et)},createAnswer:function(et){us(at,!1,et)},handleRemoteJsep:function(et){cc(at,et)},replaceTracks:function(et){uc(at,et)},getLocalTracks:function(){return go(at)},getRemoteTracks:function(){return Ui(at)},onlocaltrack:se.onlocaltrack,onremotetrack:se.onremotetrack,ondata:se.ondata,ondataopen:se.ondataopen,oncleanup:se.oncleanup,ondetached:se.ondetached,hangup:function(et){vo(at,!0===et)},detach:function(et){xa(at,et)}};gt[at]=Ve,se.success(Ve)},$e.session_id=Ge,void t.send(JSON.stringify($e));P.httpAPICall(a+"/"+Ge,{verb:"POST",withCredentials:v,body:$e,success:function(ft){if(P.debug(ft),"success"!==ft.janus)return P.error("Ooops: "+ft.error.code+" "+ft.error.reason),void se.error("Ooops: "+ft.error.code+" "+ft.error.reason);let at=ft.data.id;P.log("Created handle: "+at);let Ve={session:Ot,plugin:Y,id:at,token:Ue,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:se.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return at},getPlugin:function(){return Y},getVolume:function(et,mt){return ds(at,et,!0,mt)},getRemoteVolume:function(et,mt){return ds(at,et,!0,mt)},getLocalVolume:function(et,mt){return ds(at,et,!1,mt)},isAudioMuted:function(et){return Ia(at,et,!1)},muteAudio:function(et){return $i(at,et,!1,!0)},unmuteAudio:function(et){return $i(at,et,!1,!1)},isVideoMuted:function(et){return Ia(at,et,!0)},muteVideo:function(et){return $i(at,et,!0,!0)},unmuteVideo:function(et){return $i(at,et,!0,!1)},getBitrate:function(et){return mo(at,et)},setMaxBitrate:function(et,mt){return hc(at,et,mt)},send:function(et){Os(at,et)},data:function(et){ac(at,et)},dtmf:function(et){qr(at,et)},consentDialog:se.consentDialog,iceState:se.iceState,mediaState:se.mediaState,webrtcState:se.webrtcState,slowLink:se.slowLink,onmessage:se.onmessage,createOffer:function(et){us(at,!0,et)},createAnswer:function(et){us(at,!1,et)},handleRemoteJsep:function(et){cc(at,et)},replaceTracks:function(et){uc(at,et)},getLocalTracks:function(){return go(at)},getRemoteTracks:function(){return Ui(at)},onlocaltrack:se.onlocaltrack,onremotetrack:se.onremotetrack,ondata:se.ondata,ondataopen:se.ondataopen,oncleanup:se.oncleanup,ondetached:se.ondetached,hangup:function(et){vo(at,!0===et)},detach:function(et){xa(at,et)}};gt[at]=Ve,se.success(Ve)},error:function(ft,at){P.error(ft+":",at),se.error(""===at?ft+": Is the server down?":ft+": "+at)}})}(se)}}P.useDefaultDependencies=function(n){let e=n&&n.fetch||fetch,t=n&&n.Promise||Promise,r=n&&n.WebSocket||WebSocket;return{newWebSocket:function(i,s){return new r(i,s)},extension:n&&n.extension||QE,isArray:function(i){return Array.isArray(i)},webRTCAdapter:n&&n.adapter||ZE,httpAPICall:function(i,s){let o={method:s.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===s.verb&&(o.headers["Content-Type"]="application/json"),void 0!==s.withCredentials&&(o.credentials=!0===s.withCredentials?"include":s.withCredentials?s.withCredentials:"omit"),s.body&&(o.body=JSON.stringify(s.body));let a=e(i,o).catch(function(l){return t.reject({message:"Probably a network error, is the server down?",error:l})});if(s.timeout){let l=new t(function(c,p){let v=setTimeout(function(){return clearTimeout(v),p({message:"Request timed out",timeout:s.timeout})},s.timeout)});a=t.race([a,l])}return a.then(function(l){return l.ok?typeof s.success==typeof P.noop?l.json().then(function(c){try{s.success(c)}catch(p){P.error("Unhandled httpAPICall success callback error",p)}},function(c){return t.reject({message:"Failed to parse response body",error:c,response:l})}):void 0:t.reject({message:"API call failed",response:l})}).catch(function(l){typeof s.error==typeof P.noop&&s.error(l.message||"<< internal error >>",l)}),a}}},P.useOldDependencies=function(n){let e=n&&n.jQuery||jQuery,t=n&&n.WebSocket||WebSocket;return{newWebSocket:function(r,i){return new t(r,i)},isArray:function(r){return e.isArray(r)},extension:n&&n.extension||QE,webRTCAdapter:n&&n.adapter||ZE,httpAPICall:function(r,i){let s=void 0!==i.body?{contentType:"application/json",data:JSON.stringify(i.body)}:{};return e.ajax(e.extend(s,void 0!==i.withCredentials?{xhrFields:{withCredentials:i.withCredentials}}:{},{url:r,type:i.verb,cache:!1,dataType:"json",async:i.async,timeout:i.timeout,success:function(a){typeof i.success==typeof P.noop&&i.success(a)},error:function(a,l,c){typeof i.error==typeof P.noop&&i.error(l,c)}}))}}},P.mediaToTracks=function(n){let e=[];if(n){if(!n.keepAudio&&!1!==n.audio&&(void 0===n.audio||n.audio||n.audioSend||n.audioRecv||n.addAudio||n.replaceAudio||n.removeAudio)){let t={type:"audio"};n.removeAudio?t.remove=!0:(n.addAudio?t.add=!0:n.replaceAudio&&(t.replace=!0),!1!==n.audioSend&&(t.capture=n.audio||!0),!1!==n.audioRecv&&(t.recv=!0)),(t.remove||t.capture||t.recv)&&e.push(t)}if(!n.keepVideo&&!1!==n.video&&(void 0===n.video||n.video||n.videoSend||n.videoRecv||n.addVideo||n.replaceVideo||n.removeVideo)){let t={type:"video"};n.removeVideo?t.remove=!0:(n.addVideo?t.add=!0:n.replaceVideo&&(t.replace=!0),!1!==n.videoSend&&(t.capture=n.video||!0,["screen","window","desktop"].includes(t.capture)&&(t.type="screen",t.capture={video:{}},n.screenshareFrameRate&&(t.capture.frameRate=n.screenshareFrameRate),n.screenshareHeight&&(t.capture.height=n.screenshareHeight),n.screenshareWidth&&(t.capture.width=n.screenshareWidth))),!1!==n.videoRecv&&(t.recv=!0)),(t.remove||t.capture||t.recv)&&e.push(t)}n.data&&e.push({type:"data"})}else e.push({type:"audio",capture:!0,recv:!0}),e.push({type:"video",capture:!0,recv:!0});return e},P.trackConstraints=function(n){let e={};if(!n||!n.capture)return e;if("audio"===n.type)e.audio=n.capture;else if("video"===n.type)if((n.simulcast||n.svc)&&!0===n.capture&&(n.capture="hires"),!0===n.capture||"object"==typeof n.capture)e.video=n.capture;else{let t=0,r=0;"lowres"===n.capture?(t=320,r=240):"lowres-16:9"===n.capture?(t=320,r=180):"hires"===n.capture||"hires-16:9"===n.capture||"hdres"===n.capture?(t=1280,r=720):"fhdres"===n.capture?(t=1920,r=1080):"4kres"===n.capture?(t=3840,r=2160):"stdres"===n.capture?(t=640,r=480):"stdres-16:9"===n.capture?(t=640,r=360):(P.log("Default video setting is stdres 4:3"),t=640,r=480),e.video={width:{ideal:t},height:{ideal:r}}}else"screen"===n.type&&(e.video=n.capture);return e},P.noop=function(){},P.dataChanDefaultLabel="JanusDataChannel",P.endOfCandidates=null,P.stopAllTracks=function(n){try{let e=n.getTracks();for(let t of e)P.log(t),t&&!0!==t.dontStop&&t.stop()}catch(e){}},P.init=function(n){if((n=n||{}).callback="function"==typeof n.callback?n.callback:P.noop,P.initDone)n.callback();else{if(void 0===console.log&&(console.log=function(){}),P.trace=P.noop,P.debug=P.noop,P.vdebug=P.noop,P.log=P.noop,P.warn=P.noop,P.error=P.noop,!0===n.debug||"all"===n.debug)P.trace=console.trace.bind(console),P.debug=console.debug.bind(console),P.vdebug=console.debug.bind(console),P.log=console.log.bind(console),P.warn=console.warn.bind(console),P.error=console.error.bind(console);else if(Array.isArray(n.debug))for(let s of n.debug)switch(s){case"trace":P.trace=console.trace.bind(console);break;case"debug":P.debug=console.debug.bind(console);break;case"vdebug":P.vdebug=console.debug.bind(console);break;case"log":P.log=console.log.bind(console);break;case"warn":P.warn=console.warn.bind(console);break;case"error":P.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+s+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}P.log("Initializing library");let e=n.dependencies||P.useDefaultDependencies();P.isArray=e.isArray,P.webRTCAdapter=e.webRTCAdapter,P.httpAPICall=e.httpAPICall,P.newWebSocket=e.newWebSocket,(P.extension=e.extension).init(),P.listDevices=function(s,o){s="function"==typeof s?s:P.noop,o||(o={audio:!0,video:!0}),P.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(o).then(function(a){navigator.mediaDevices.enumerateDevices().then(function(l){P.debug(l),s(l),P.stopAllTracks(a)})}).catch(function(a){P.error(a),s([])}):(P.warn("navigator.mediaDevices unavailable"),s([]))},P.attachMediaStream=function(s,o){try{s.srcObject=o}catch(a){try{s.src=URL.createObjectURL(o)}catch(l){P.error("Error attaching stream to element",l)}}},P.reattachMediaStream=function(s,o){try{s.srcObject=o.srcObject}catch(a){try{s.src=o.src}catch(l){P.error("Error reattaching stream to element",l)}}};let r=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",i=window["on"+r];if(window.addEventListener(r,function(){P.log("Closing window");for(let s in P.sessions)P.sessions[s]&&P.sessions[s].destroyOnUnload&&(P.log("Destroying session "+s),P.sessions[s].destroy({unload:!0,notifyDestroyed:!1}));i&&"function"==typeof i&&i()}),P.safariVp8=!1,"safari"===P.webRTCAdapter.browserDetails.browser&&P.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(let s of RTCRtpSender.getCapabilities("video").codecs)if(s&&s.mimeType&&"video/vp8"===s.mimeType.toLowerCase()){P.safariVp8=!0;break}P.safariVp8?P.log("This version of Safari supports VP8"):P.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{let s=new RTCPeerConnection({});s.createOffer({offerToReceiveVideo:!0}).then(function(o){(P.safariVp8=-1!==o.sdp.indexOf("VP8"))?P.log("This version of Safari supports VP8"):P.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),s.close(),s=null})}P.initDone=!0,n.callback()}},P.isWebrtcSupported=function(){return!!window.RTCPeerConnection},P.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},P.randomString=function(n){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let r=0;r<n;r++){let i=Math.floor(Math.random()*e.length);t+=e.charAt(i)}return t};var AB=W(164);class ew extends _a{constructor(e){super(),this.courseId=e}getType(){return hn.STREAM_INIT}toByteBuffer(){let e=this.createDataView(8);return e.setBigInt64(5,BigInt(this.courseId)),e.buffer}}let TB=(()=>{class n{constructor(){}init(t){return Promise.resolve()}sendBinary(t){}reconnect(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ca=(()=>{class n{constructor(t,r){this.ngZone=t,this.websocketService=r,this.serverUrl="wss://"+window.location.hostname+"/janus-ws",this.websocketServerURL=`wss://${window.location.hostname}/api/publisher/course-state`,this.subscriberJanusHandle=null,this.screensharingIsActive=!1,this.myScreenshareIsActive=!1,this.feedStreams={},this.localTracks={},this.isMuted=!1,this.isVideoMuted=!1,this.isCurrentlyCreatingASubscription=!1,this.subscriptions={},this.feeds={},this.remoteTracks={},this.simulcastStarted={},this.mids={},this.slots={},this.subStreams={},this.audioDevices={},this.videoDevices={},this.currentlyChosenOverrideAudioDeviceId="",this.currentlyChosenOverrideVideoDeviceId="",this.talkingFeeds={},this.talkingFeedsSubject=new F,this.screenshareStateSubject=new F,this.doSimulcast=!1,this.subscriberMode=!1,this.locallyMutedRemoteAudioFeeds={},this.initDeviceList=i=>{this.audioDevices={},this.videoDevices={};for(const s of i){let o=s.label;(!o||""===o)&&(o=s.deviceId),console.log("Device found: ",o,s),"audioinput"===s.kind?(this.audioDevices[s.deviceId]=o,console.log("audio devices",this.audioDevices)):"videoinput"===s.kind&&(this.videoDevices[s.deviceId]=o)}},this.opaqueId="course-"+P.randomString(12),this.myUsername=P.randomString(12),window.janusService=this}setUsername(t){t&&""!==t&&(this.myUsername=t,console.log("(JanusService) Set username to ",this.myUsername))}start(){this.isCurrentlyCreatingASubscription=!1,this.subscriptions={},this.feeds={},this.remoteTracks={},this.simulcastStarted={},this.mids={},this.slots={},this.subStreams={},this.subscriberJanusHandle=null,this.publisherJanusHandle=null,this.screenshareJanusHandle=null,this.janus=null,P.init({debug:"all",callback:()=>{console.log("Does browser support webrtc?"),P.isWebrtcSupported()?(console.log("WebRTC is supported."),this.createSession()):console.error("No WebRTC support...")}})}end(){this.unpublishOwnFeed();for(const[t,r]of Object.entries(this.feedStreams))this.unsubscribeFrom(t);this.publisherJanusHandle.hangup(),this.screenshareJanusHandle&&this.screenshareJanusHandle.hangup(),this.subscriberJanusHandle&&this.subscriberJanusHandle.hangup(),this.janus.destroy()}createSession(){this.janus=new P({server:this.serverUrl,success:()=>{console.log("Janus handle created!"),this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:t=>{this.publisherJanusHandle=t,P.log("Plugin attached!"+this.publisherJanusHandle.getPlugin()+", id="+this.publisherJanusHandle.getId()+")"),this.registerUsernameToJoinAsPublisher(),P.listDevices(this.initDeviceList)},iceState:t=>{console.log("ICE state changed to "+t)},webrtcState:t=>{P.log("Janus says our WebRTC PeerConnection is "+(t?"up":"down")+" now")},onmessage:(t,r)=>{P.debug("::: Got a message (publisher) :::");const i=t.videoroom;if(i&&("joined"===i?this.messageHandle_OnJoinedEvent(t):"destroyed"===i?this.messageHandle_OnDestroyedEvent(t):"event"===i&&this.messageHandle_OnGeneralEvent(t)),r){P.debug("Handling SDP as well...",r),this.publisherJanusHandle.handleRemoteJsep({jsep:r});const s=t.audio_codec;this.myStream&&this.myStream.getAudioStracks()&&this.myStream.getAudioTracks().length>0&&!s&&P.warn("Our audio stream has been rejected, viewers won't hear us.");const o=t.video_codec;this.myStream&&this.myStream.getVideoTracks()&&this.myStream.getVideoTracks().length>0&&!o&&P.warn("Our video stream has been rejected, viewers won't see us.")}},error:t=>{P.error(t)},destroyed:()=>{P.log("Janus destroyed")},onlocaltrack:(t,r)=>{P.debug("Got a local track event"),P.debug("Local track "+(r?"added":"removed")+":",t);var i=t.id.replace(/[{}]/g,"");if(r){var l=this.localTracks[i];if(!l)if("audio"===t.kind){for(const[c,p]of Object.entries(this.audioDevices))if(p==t.label)return void(this.currentlyChosenOverrideAudioDeviceId=c)}else{const c=new MediaStream;c.addTrack(t.clone()),this.localTracks[i]={stream:c,feedId:i,userName:this.myUsername+" (You)",isMyStream:!0},P.log("Created local stream:",l),P.log(c.getTracks()),P.log(c.getVideoTracks());for(const[p,v]of Object.entries(this.videoDevices))if(v==t.label)return void(this.currentlyChosenOverrideVideoDeviceId=p)}}else{const c=this.localTracks[i];if(c)try{var s=c.stream.getTracks();for(var o in s){var a=s[o];a&&a.stop()}}catch(p){}delete this.localTracks[i]}},onremotetrack:(t,r,i)=>{},oncleanup:()=>{P.log(" ::: Got a cleanup notification: we are unpublished now :::"),this.myStream=null,this.myId&&delete this.feedStreams[this.myId]}})},error:t=>{P.error(t)},destroyed:()=>{console.log("Janus instance destroyed.")}}),void 0!==this.myRoomId&&this.websocketService.init(this.websocketServerURL).then(t=>{const r=new ew(this.myRoomId),i=new ew(this.myRoomId),s=oi.parseActionToBinary(r),o=oi.parseActionToBinary(i);this.websocketService.sendBinary(s),this.websocketService.sendBinary(o)})}registerUsernameToJoinAsPublisher(){this.publisherJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"publisher",display:this.myUsername}})}publishOwnFeed(t,r,i){const s={};r&&(s.audio||(s.audio={}),s.audio={deviceId:{exact:r}},s.replaceAudio=!0),i&&(s.video||(s.video={}),s.video={deviceId:{exact:i}},s.replaceVideo=!0),this.publisherJanusHandle.createOffer({media:Object.assign(Object.assign({},s),{audioRecv:!1,videoRecv:!1,audioSend:t,videoSend:!0,data:!0}),simulcast:this.doSimulcast,success:o=>{P.debug("Got a publisher SDP!",o),this.publisherJanusHandle.send({message:{request:"configure",audio:t,video:!0},jsep:o})},error:o=>{P.error("WebRTC error: ",o),t&&this.publishOwnFeed(!1)}})}toggleMute(){this.isMuted=this.publisherJanusHandle.isAudioMuted(),P.log((this.isMuted?"Unmuting":"Muting")+" local stream..."),this.isMuted?this.publisherJanusHandle.unmuteAudio():this.publisherJanusHandle.muteAudio(),this.isMuted=this.publisherJanusHandle.isAudioMuted()}toggleCamera(){this.isVideoMuted=this.publisherJanusHandle.isVideoMuted(),P.log((this.isMuted?"Unmuting":"Muting")+" local video stream..."),this.isVideoMuted?this.publisherJanusHandle.unmuteVideo():this.publisherJanusHandle.muteVideo(),this.isVideoMuted=this.publisherJanusHandle.isVideoMuted()}selectAudioDevice(t){this.currentlyChosenOverrideAudioDeviceId=t,this.publishOwnFeed(!0,t)}selectVideoDevice(t){this.currentlyChosenOverrideVideoDeviceId=t,this.publishOwnFeed(!0,void 0,t)}unpublishOwnFeed(){this.publisherJanusHandle.send({message:{request:"unpublish"}})}messageHandle_OnJoinedEvent(t){this.myId=t.id,this.myPrivateId=t.private_id,P.log("Successfully joined room "+t.room+" with ID "+this.myId+" and private ID "+this.myPrivateId),this.subscriberMode||this.publishOwnFeed(!0),t.publishers&&this.handlePublisherEvent(t)}messageHandle_OnDestroyedEvent(t){P.warn("The room has been destroyed.")}messageHandle_OnGeneralEvent(t){if(t.streams){const r=t.streams;for(const i in r){const s=r[i];s.id=this.myId,s.display=this.myUsername}if(!this.myId)return;this.feedStreams[this.myId]={id:this.myId,display:this.myUsername,streams:r}}else if(t.publishers)P.debug("Got a list of available pubs: ",t.publishers),this.handlePublisherEvent(t);else if(t.leaving){const r=t.leaving;P.log("A publisher left: "+r,t),this.unsubscribeFrom(r)}else if(t.unpublished){const r=t.unpublished;P.log("Publisher left: "+r,t),this.unsubscribeFrom(r)}else t.error&&P.log("Some kind of error occurred.",t.error)}handlePublisherEvent(t){const r=t.publishers;let i;P.debug("Got a list of available publishers: ",r);for(const s in r){if(r[s].dummy)continue;const o=r[s].id,a=r[s].display,l=r[s].streams;for(const c in l){const p=l[c];p.id=o,p.display=a}this.feedStreams[o]={id:o,display:a,streams:l},P.debug("Stream "+o+" display: "+a+" streams: ",l),i||(i=[]),o!==this.screenshareId&&o!==this.myId&&i.push(l)}i&&this.subscribeTo(i)}subscribeTo(t){if(this.isCurrentlyCreatingASubscription)setTimeout(()=>{this.subscribeTo(t)},500);else if(this.subscriberJanusHandle){const r=this.subscriber_HandleSubscription(t);r.length>0&&this.subscriberJanusHandle.send({message:{request:"subscribe",streams:r}})}else this.isCurrentlyCreatingASubscription=!0,this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:r=>{this.subscriberJanusHandle=r,this.remoteTracks={},P.log("Plugin attached! ("+this.subscriberJanusHandle.getPlugin()+", id="+this.subscriberJanusHandle.getId()+")"),P.log("  -- This is a multistream subscriber");const i=this.subscriber_HandleSubscription(t);this.subscriberJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"subscriber",streams:i,private_id:this.myPrivateId}})},error:r=>{P.error("Error attaching plugin...",r)},iceState:r=>{P.log("ICE state (remote feed) changed to "+r)},webrtcState:r=>{P.log("Janus says this WebRTC PeerConnection (remote feed) is "+(r?"up":"down")+" now")},slowLink:(r,i,s)=>{P.warn("Janus reports problems "+(r?"sending":"receiving")+" packets on mid "+s+" ("+i+" lost packets)")},onmessage:(r,i)=>{P.debug("Got a message (subscriber)",r);const s=r.videoroom;if(P.debug("Event: ",s),r.error?P.warn("Subscriber error: ",r.error):s&&("attached"===s?(this.isCurrentlyCreatingASubscription=!1,P.log("Successfully attached to feed in room "+r.room)):"event"===s&&this.subscriber_HandleGeneralEvent(r)),r.streams&&this.subscriber_HandleStreamsEvent(r),i){P.debug("Handling SDP as well...",i);const o=this.myRoomId,a=this.subscriberJanusHandle;this.subscriberJanusHandle.createAnswer({jsep:i,media:{audioSend:!1,videoSend:!1,data:!0},success:function(l){P.debug("Got SDP!"),P.debug(l),a.send({message:{request:"start",room:o},jsep:l})},error:function(l){P.error("WebRTC error:",l)}})}},onlocaltrack:(r,i)=>{},onremotetrack:(r,i,s)=>{const o=this.subStreams[i],a=this.feedStreams[o.feed_id];P.debug("This track is coming from feed "+o.feed_id+":",a);let l=this.slots[i];if(a&&!l&&(l=a.slot,this.slots[i]=a.slot,this.mids[a.slot]=i),P.debug("mid "+i+" is in slot "+l),!s){const c=this.remoteTracks[i];if(c)try{const p=c.stream.getTracks();for(const v in p){const k=p[v];k&&k.stop()}}catch(p){}return"video"===r.kind&&a&&a.remoteVideos--,this.ngZone.run(()=>{delete this.remoteTracks[i]}),void delete this.mids[this.slots]}if(a.spinner&&(a.spinner.stop(),a.spinner=null),"audio"===r.kind){const c=new MediaStream;c.addTrack(r.clone()),this.ngZone.run(()=>{this.remoteTracks[i]={stream:c,feedId:a.id,userName:a.display}});const p=AB(c,{}),v=this;p.on("speaking",function(){v.ngZone.run(()=>{v.talkingFeeds[a.id]=!0,v.talkingFeedsSubject.next(v.talkingFeeds)}),console.log("speaking: ",a.id,v.talkingFeeds)}),p.on("stopped_speaking",function(){v.ngZone.run(()=>{v.talkingFeeds[a.id]=!1,v.talkingFeedsSubject.next(v.talkingFeeds)}),console.log("stopped_speaking: ",a.id)}),P.log("Created remote audio stream: ",c)}else{a.remoteVideos++;const c=new MediaStream;c.addTrack(r.clone());let p=!1;a.display.includes("_screen")&&(p=!0,this.screensharingIsActive=!0,this.screenshareStateSubject.next("start"),this.talkingFeedsSubject.next(this.talkingFeeds)),this.ngZone.run(()=>{this.remoteTracks[i]={stream:c,feedId:a.id,isScreenshare:p,userName:a.display.replace("_screen","'s Screen")}}),P.log("Created remote video stream: ",c,"for feed: ",a)}},ondataopen:(r,i)=>{P.log("The DataChannel is available! - "+r+" - "+i)},oncleanup:()=>{P.log("Got a cleanup notification (remote feed)")},ondata:r=>{this.dataCallback(r)}})}unsubscribeFrom(t){const r=this.feedStreams[t];r&&(P.debug("Feed "+t+" ("+r.display+") has left the room, detaching"),delete this.simulcastStarted[r.slot],delete this.feeds[r.slot],delete this.feedStreams[t],null!==this.subscriberJanusHandle&&this.subscriberJanusHandle.send({message:{request:"unsubscribe",streams:[{feed:t}]}}),delete this.subscriptions[t],r.display.includes("_screen")&&(this.screensharingIsActive=!1,this.screenshareStateSubject.next("stop"),this.talkingFeedsSubject.next(this.talkingFeeds)))}subscriber_HandleSubscription(t){var r;const i=[];for(const s in t){const o=t[s];for(const a in o){const l=o[a];if("video"!==l.type||"safari"!==P.webRTCAdapter.browserDetails.browser||"vp9"!==l.codec&&("vp8"!==l.codec||P.safariVp8))if(l.disabled)P.log("Disabled stream:",l);else if(this.subscriptions[l.id]&&this.subscriptions[l.id][l.mid])P.log("Already subscribed to stream, skipping:",l);else{if(!(null===(r=this.feedStreams[l.id])||void 0===r?void 0:r.slot)){let c;for(let p=1;p<6;p++)this.feeds[p]||(c=p,this.feeds[c]=l.id,this.feedStreams[l.id].slot=c,this.feedStreams[l.id].remoteVideos=0)}i.push({feed:l.id,mid:l.mid}),this.subscriptions[l.id]||(this.subscriptions[l.id]={}),this.subscriptions[l.id][l.mid]=!0}else P.warn("Publisher is using "+l.codec.toUpperCase+", but Safari doesn't support it: disabling video stream #"+l.mindex)}}return i}subscriber_HandleGeneralEvent(t){if(null!=t.substream||null!=t.temporal){const l=this.slots[t.mid];this.simulcastStarted[l]||(this.simulcastStarted[l]=!0)}}subscriber_HandleStreamsEvent(t){for(const r in t.streams){const i=t.streams[r].mid;this.subStreams[i]=t.streams[r];const s=this.feedStreams[t.streams[r].feed_id];s&&s.slot&&(this.slots[i]=s.slot,this.mids[s.slot]=i)}}startScreenshare(){var t=this;return Rn(function*(){t.screenshareJanusHandle?t.screenshareJanusHandle.createOffer({media:{audioRecv:!1,videoRecv:!1,audioSend:!1,videoSend:!0,video:"screen",screenshareFrameRate:60},simulcast:t.doSimulcast,success:i=>{P.debug("Got a publisher SDP!",i),t.screenshareJanusHandle.send({message:{request:"configure",audio:!0,video:!0},jsep:i}),t.myScreenshareIsActive=!0},error:i=>{P.error("WebRTC error: ",i)}}):t.attachScreenshareHandle()})()}stopScreenshare(){this.myScreenshareIsActive&&(this.screenshareJanusHandle.send({message:{request:"unpublish"}}),this.screenshareJanusHandle.hangup(),this.myScreenshareIsActive=!1)}attachScreenshareHandle(){this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:t=>{this.screenshareJanusHandle=t,P.log("Plugin attached!"+this.screenshareJanusHandle.getPlugin()+", id="+this.screenshareJanusHandle.getId()+")"),this.screenshareJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"publisher",display:this.myUsername+"_screen"}})},iceState:t=>{console.log("ICE state changed to "+t)},webrtcState:t=>{P.log("Janus says our WebRTC PeerConnection is "+(t?"up":"down")+" now")},onmessage:(t,r)=>{P.debug("::: Got a message (publisher) :::");const i=t.videoroom;if(i&&("joined"===i?(this.screenshareId=t.id,this.privateScreenshareId=t.private_id,P.log("Successfully joined room "+t.room+" with ID "+this.screenshareId+" and private ID "+this.privateScreenshareId),this.startScreenshare()):"destroyed"===i?this.messageHandle_OnDestroyedEvent(t):"event"===i&&this.messageHandle_OnGeneralEvent(t)),r){P.debug("Handling SDP as well...",r),this.screenshareJanusHandle.handleRemoteJsep({jsep:r});const s=t.audio_codec;this.myScreenshareStream&&this.myScreenshareStream.getAudioStracks()&&this.myScreenshareStream.getAudioTracks().length>0&&!s&&P.warn("Our audio stream has been rejected, viewers won't hear us.");const o=t.video_codec;this.myScreenshareStream&&this.myScreenshareStream.getVideoTracks()&&this.myScreenshareStream.getVideoTracks().length>0&&!o&&P.warn("Our video stream has been rejected, viewers won't see us.")}},error:t=>{P.error(t)},destroyed:()=>{P.log("Janus destroyed")},onlocaltrack:(t,r)=>{P.debug("Got a local track event"),P.debug("Local track "+(r?"added":"removed")+":",t),t.addEventListener("ended",()=>{this.stopScreenshare()});var i=t.id.replace(/[{}]/g,"");if(r){var l=this.localTracks[i];if(!l&&"audio"!==t.kind){const c=new MediaStream;c.addTrack(t.clone()),this.localTracks[i]={stream:c,feedId:i,isScreenshare:!0,userName:"My Screenshare",isMyStream:!0},P.log("Created local stream:",l),P.log(c.getTracks()),P.log(c.getVideoTracks())}}else{const c=this.localTracks[i];if(c)try{var s=c.stream.getTracks();for(var o in s){var a=s[o];a&&a.stop()}}catch(p){}delete this.localTracks[i]}},onremotetrack:(t,r,i)=>{},oncleanup:()=>{P.log(" ::: Got a cleanup notification: we are unpublished now :::"),this.myScreenshareStream=null,this.screenshareId&&delete this.feedStreams[this.screenshareId]}})}toggleScreenshare(){if(this.myScreenshareIsActive)if(this.myScreenshareIsActive){for(const[r,i]of Object.entries(this.localTracks))if(i.isScreenshare){for(var t of i.stream.getTracks())t&&t.stop();delete this.localTracks[r]}this.stopScreenshare()}else console.error("Something went horribly wrong with screenshare!");else this.startScreenshare()}muteRemoteAudioLocallyForFeedId(t){let r=!0;this.locallyMutedRemoteAudioFeeds[t]&&(r=!1),this.locallyMutedRemoteAudioFeeds[t]=r}setOnData(t){this.dataCallback=t}sendData(t){this.publisherJanusHandle.data({data:t}),this.websocketService.sendBinary(t)}}return n.\u0275fac=function(t){return new(t||n)(_t(Wn),_t(TB))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vd=(()=>{class n{constructor(t){this.janusService=t,this.availableColors=[new Fn(0,0,0,255),new Fn(255,0,0,255),new Fn(0,255,0,255),new Fn(0,0,255,255)],this.basicColors=[new Fn(0,0,0,255),new Fn(255,0,0,255),new Fn(0,255,0,255),new Fn(0,0,255,255)],this.highlighterColors=[new Fn(0,248,248,255),new Fn(0,255,0,255),new Fn(255,0,255,255),new Fn(251,247,20,255)],this.toolColorMap=new Map,this.currentColorId=0,this.currentTool=ut.CURSOR,this.minLineThickness=.0025,this.lineThickness=.0025,this.currentThicknessModifierId="0",this.isMouseDown=!1,this.rubberSelected=!1,this.isCursorMode=!0,this.isAllowedToDraw=!0,this.toolColorMap.set(ut.POINTER,1),n._instance=this}static getInstance(){return this._instance}setColor(t){this.currentColorId=t,this.toolColorMap.set(this.currentTool,t),this.setTool(this.currentTool)}setLineThickness(t,r){this.currentThicknessModifierId=r,this.lineThickness=this.minLineThickness*t,console.log("Set line thickness to ",this.lineThickness," (used modifier: ",t,")"),this.setTool(this.currentTool)}setTool(t){this.currentTool=t,this.isCursorMode=t===ut.CURSOR,this.availableColors=t===ut.HIGHLIGHTER?this.highlighterColors:this.basicColors,this.currentColorId=void 0!==this.toolColorMap.get(this.currentTool)?this.toolColorMap.get(this.currentTool):0}selectStaticTool(t){if(!this.isAllowedToDraw)return void console.log("Not allowed to draw, ignoring static action.");let r;switch(t){case ut.CLEAR_SHAPES:r=new FE;break;case ut.UNDO:r=new RE;break;case ut.REDO:r=new OE;break;case ut.KEY:r=new LE;break;case ut.ZOOM_OUT:r=new $E}if(r){Jn.getInstance().addAction(r);const i=Ei.parseActionToBinary(r);this.janusService.sendData(i)}}executeToolSelectionAction(t){this.rubberSelected=!1;let r,i=Date.now();switch(this.currentTool){case ut.PEN:r=new CE(i,new ji(this.availableColors[this.currentColorId],this.lineThickness));break;case ut.HIGHLIGHTER:r=new EE(i,new ji(this.highlighterColors[this.currentColorId],2*this.lineThickness));break;case ut.POINTER:r=new AE(i,new ji(this.availableColors[this.currentColorId],2*this.lineThickness));break;case ut.ARROW:r=new TE(i,new ji(this.availableColors[this.currentColorId],this.lineThickness));break;case ut.LINE:r=new DE(i,new ji(this.availableColors[this.currentColorId],this.lineThickness));break;case ut.RECTANGLE:r=new xE(i,new ji(this.availableColors[this.currentColorId],this.lineThickness));break;case ut.ELLIPSE:r=new PE(i,new ji(this.availableColors[this.currentColorId],this.lineThickness));break;case ut.CLONE:r=new NE;break;case ut.SELECT:r=new BE;break;case ut.SELECT_GROUP:r=new VE;break;case ut.LATEX:r=new YE(i);break;case ut.LATEX_FONT_CHANGE:break;case ut.TEXT:r=new GE(1);break;case ut.TEXT_CHANGE:r=new WE(1,"Text");break;case ut.TEXT_FONT_CHANGE:break;case ut.TEXT_LOCATION_CHANGE:r=new qE(i,new or(0,0));break;case ut.TEXT_REMOVE:r=new XE(i);break;case ut.TEXT_SELECTION_EXT:r=new KE(i,this.availableColors[this.currentColorId],[new Ar(0,0,1,1)]);break;case ut.PANNING:r=new HE;break;case ut.EXTEND_VIEW:break;case ut.ZOOM:length,r=new pd(i);break;case ut.RUBBER_EXT:this.rubberSelected=!0}if(r){Jn.getInstance().addAction(r);const s=Ei.parseActionToBinary(r);this.janusService.sendData(s)}}mouseDown(t){if(console.log("MOUSE DOWN!",t),!this.isAllowedToDraw||this.isCursorMode)return void console.log("Not allowed to draw, ignoring mouse event.");this.isMouseDown=!0;const r=this.eventToPenPoint(t);if(this.executeToolSelectionAction(r),this.rubberSelected)return console.log("Rubber has been selected!"),void this.executeRubber(r);const i=new Mg(r);Jn.getInstance().addAction(i);const s=Ei.parseActionToBinary(i);this.janusService.sendData(s);let o=new Or(r.x+1e-16,r.y+1e-16,r.p);const a=new Pg(o);Jn.getInstance().addAction(a);const l=Ei.parseActionToBinary(a);this.janusService.sendData(l)}drag(t){if(this.isMouseDown){if(!this.isAllowedToDraw||this.isCursorMode)return void console.log("Not allowed to draw, ignoring mous event.");console.log("MOUSE DRAG!",t);const r=this.eventToPenPoint(t);if(this.rubberSelected)return void this.executeRubber(r);const i=new Pg(r);Jn.getInstance().addAction(i);const s=Ei.parseActionToBinary(i);this.janusService.sendData(s)}}mouseUp(t){if(this.isMouseDown){if(!this.isAllowedToDraw||this.isCursorMode)return void console.log("Not allowed to draw, ignoring mous event.");this.isMouseDown=!1,console.log("MOUSE UP!",t);const r=this.eventToPenPoint(t);if(this.rubberSelected)return void this.executeRubber(r);const i=new IE(r);Jn.getInstance().addAction(i);const s=Ei.parseActionToBinary(i);this.janusService.sendData(s)}}eventToPenPoint(t){const r=t.target.getBoundingClientRect(),i=t.clientX-r.left,s=t.clientY-r.top,a=Jn.getInstance().renderController.getLastTransform();console.log("REAL: ",i/r.width,s/r.width);let l=new Or(i/r.width,s/r.width,1);const c=a.translatePoint(l.x,l.y);return new Or(c.x,c.y,l.p)}executeRubber(t){let r=Jn.getInstance();const i=r.renderController.getPage().getShapes();for(const s of i)if(s.contains(t)){const o=new wB(s.handle);r.addAction(o);const a=Ei.parseActionToBinary(o);this.janusService.sendData(a);const l=new Mg(t);r.addAction(l);const c=Ei.parseActionToBinary(l);this.janusService.sendData(c)}}}return n.\u0275fac=function(t){return new(t||n)(_t(Ca))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ei=(()=>{class n{static parse(t,r,i){let s=null;const o=this.parseActionHeader(t);switch(i-=13,r){case ut.CLEAR_SHAPES:s=this.atomicAction(t,FE);break;case ut.UNDO:s=this.atomicAction(t,RE);break;case ut.REDO:s=this.atomicAction(t,OE);break;case ut.KEY:s=this.atomicAction(t,LE);break;case ut.PEN:s=this.toolBrushAction(t,CE);break;case ut.HIGHLIGHTER:s=this.toolBrushAction(t,EE);break;case ut.POINTER:s=this.toolBrushAction(t,AE);break;case ut.ARROW:s=this.toolBrushAction(t,TE);break;case ut.LINE:s=this.toolBrushAction(t,DE);break;case ut.RECTANGLE:s=this.toolBrushAction(t,xE);break;case ut.ELLIPSE:s=this.toolBrushAction(t,PE);break;case ut.CLONE:s=this.atomicAction(t,NE);break;case ut.SELECT:s=this.atomicAction(t,BE);break;case ut.SELECT_GROUP:s=this.atomicAction(t,VE);break;case ut.LATEX:s=this.textAction(t,YE);break;case ut.LATEX_FONT_CHANGE:s=this.latexFontAction(t);break;case ut.TEXT:s=this.textAction(t,GE);break;case ut.TEXT_CHANGE:s=this.textChangeAction(t);break;case ut.TEXT_FONT_CHANGE:s=this.textFontAction(t);break;case ut.TEXT_LOCATION_CHANGE:s=this.textMoveAction(t);break;case ut.TEXT_REMOVE:s=this.textRemoveAction(t);break;case ut.TEXT_SELECTION_EXT:s=this.textHighlightAction(t);break;case ut.TOOL_BEGIN:vd.getInstance().isAllowedToDraw=!1,s=this.toolDragAction(t,Mg);break;case ut.TOOL_EXECUTE:s=this.toolDragAction(t,Pg);break;case ut.TOOL_END:vd.getInstance().isAllowedToDraw=!0,s=this.toolDragAction(t,IE);break;case ut.PANNING:s=this.atomicAction(t,HE);break;case ut.EXTEND_VIEW:s=this.extendViewAction(t);break;case ut.ZOOM:s=i<1?this.atomicAction(t,pd):this.toolBrushAction(t,pd);break;case ut.ZOOM_OUT:s=this.atomicAction(t,$E);break;case ut.RUBBER_EXT:s=this.rubberAction(t)}return s&&o&&(s.keyEvent=o),s}static parseActionHeader(t){let i=null;return(t.getInt32()&this.KEY_EVENT_MASK)==this.KEY_EVENT_MASK&&(i=this.parseKeyEvent(t)),i}static parseKeyEvent(t){t.getInt32();const i=t.getInt32();let o;switch(t.getInt8()){case 0:o="keydown";break;case 1:o="keyup";break;case 2:o="keypress";break;default:throw new Error("Unknown key event type")}return new KeyboardEvent(o,{shiftKey:0!=(2&i),ctrlKey:0!=(4&i),altKey:0!=(8&i)})}static atomicAction(t,r){return new r}static toolBrushAction(t,r){const i=t.getInt32(),s=t.getInt32(),a=(t.getInt8(),t.getFloat64()),l=Fn.fromRGBNumber(s);return new r(i,new ji(l,a))}static rubberAction(t){const r=t.getInt32();return new q2(r)}static toolDragAction(t,r){return new r(new Or(t.getFloat32(),t.getFloat32(),t.getFloat32()))}static extendViewAction(t){const r=t.getFloat64(),i=t.getFloat64(),s=t.getFloat64(),o=t.getFloat64();return new z2(new Ar(r,i,s,o))}static textAction(t,r){return new r(t.getInt32())}static textChangeAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getString(i);return new WE(r,s)}static textMoveAction(t){const r=t.getInt32(),i=new or(t.getFloat64(),t.getFloat64());return new qE(r,i)}static textRemoveAction(t){const r=t.getInt32();return new XE(r)}static textHighlightAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getInt32(),o=Fn.fromRGBNumber(i),a=new Array;for(let l=0;l<s;l++){const c=t.getFloat64(),p=t.getFloat64(),v=t.getFloat64(),k=t.getFloat64();a.push(new Ar(c,p,v,k))}return new KE(r,o,a)}static textFontAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getInt32(),o=t.getString(s),a=t.getFloat64(),l=t.getInt8(),c=t.getInt8(),p=t.getInt8()>0,v=t.getInt8()>0;let $,k=100*(c+1);switch(l){case 0:$="normal";break;case 1:$="italic";break;default:console.error("Unsupported font style")}const he=Fn.fromRGBNumber(i),je=new zl(o,a,$,k.toString()),st=new Map;return st.set("strikethrough",p),st.set("underline",v),new Y2(r,je,he,st)}static latexFontAction(t){const r=t.getInt32(),s=(t.getInt32(),t.getFloat32()),o=t.getInt32(),a=Fn.fromRGBNumber(o),l=new zl("Arial",s);return new rB(r,l,a,new Map)}static parseActionToBinary(t){const r=t.toByteBuffer();let i=new ArrayBuffer(17),s=new DataView(i);s.setInt32(0,r.byteLength),s.setInt8(4,hn.STREAM_PAGE_ACTION);let a=Jn.getInstance().renderController.getPage(),l=a.getDocument().getDocumentId(),c=a.getPageNumber();s.setBigInt64(5,BigInt(l)),s.setInt32(13,c);const p=s.buffer;let v=new Uint8Array(r.byteLength+p.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(r),p.byteLength),v.buffer}}return n.KEY_EVENT_MASK=1,n})();class DB{constructor(){this.staticActions=[],this.playbackActions=[]}}class tw{parse(e){const t=new DB,r=e.getInt32(),i=e.getInt32();t.pageNumber=r,t.timestamp=i;const s=e.getInt32();if(s>0){const a=e.byteOffset+s;for(;e.byteOffset<a;){const l=e.getInt32(),c=e.getInt8(),p=e.getInt32(),v=Ei.parse(e,c,l);v&&(v.timestamp=p,t.staticActions.push(v))}}const o=e.getInt32();if(o>0){const a=e.byteOffset+o;for(;e.byteOffset<a;){const l=e.getInt32(),c=e.getInt8(),p=e.getInt32(),v=Ei.parse(e,c,l);v&&(v.timestamp=p,t.playbackActions.push(v))}}return t}}class oi{static parse(e,t,r){let i=null;switch(t){case hn.STREAM_INIT:break;case hn.STREAM_START:i=this.startAction(e);break;case hn.STREAM_PAGE_ACTION:i=this.playbackAction(e);break;case hn.STREAM_PAGE_ACTIONS:i=this.playbackActions(e);break;case hn.STREAM_PAGE_CREATED:i=this.pageAction(e,S2);break;case hn.STREAM_PAGE_DELETED:i=this.pageAction(e,C2);break;case hn.STREAM_PAGE_SELECTED:i=this.pageAction(e,io);break;case hn.STREAM_DOCUMENT_CREATED:i=this.documentAction(e,ld);break;case hn.STREAM_DOCUMENT_CLOSED:i=this.documentAction(e,fE);break;case hn.STREAM_DOCUMENT_SELECTED:i=this.documentAction(e,ba);break;case hn.STREAM_SPEECH_PUBLISHED:i=this.speechAction(e,T2)}return i}static startAction(e){const t=e.getUint32();return new w2(t)}static playbackAction(e){const t=e.getInt64(),r=e.getInt32(),i=e.getInt32(),s=e.getInt8(),o=e.getInt32(),a=Ei.parse(e,s,i);return a?(a.timestamp=o,new Tg(t,r,a)):null}static playbackActions(e){const t=e.getInt64(),s=(e.getInt32(),(new tw).parse(e));return new E2(t,s)}static pageAction(e,t){return new t(e.getInt64(),e.getInt32())}static documentAction(e,t){const r=e.getInt64(),i=e.getInt8(),s=e.getInt32(),o=e.getInt32(),a=e.getInt32(),l=e.getString(s),c=e.getString(o);return e.getString(a),new t(r,i,l,c)}static speechAction(e,t){const r=e.getInt32(),i=e.getString(r);return new t(BigInt(i))}static parseActionToBinary(e){return e.toByteBuffer()}}class nw{constructor(e,t,r){this.dataView=new DataView(e,t,r),this.offset=t||0}get byteOffset(){return this.offset}skip(e){if(this.offset+e>=this.dataView.byteLength)throw new Error(`Out of bounds ${this.offset+e} exceeds length ${this.dataView.byteLength}`);this.offset+=e}getString(e){let t="",r=-1;for(let i=0;i<e&&(r=this.getUint8(),0!=r);i++)t+=String.fromCharCode(r);return t}getFloat32(e){const t=this.dataView.getFloat32(this.offset,e);return this.offset+=4,t}getFloat64(e){const t=this.dataView.getFloat64(this.offset,e);return this.offset+=8,t}getInt8(){const e=this.dataView.getInt8(this.offset);return this.offset+=1,e}getInt16(e){const t=this.dataView.getInt16(this.offset,e);return this.offset+=2,t}getInt32(e){const t=this.dataView.getInt32(this.offset,e);return this.offset+=4,t}getInt64(e){const t=this.dataView.getBigInt64(this.offset,e);return this.offset+=8,t}getUint8(){const e=this.dataView.getUint8(this.offset);return this.offset+=1,e}getUint16(e){const t=this.dataView.getUint16(this.offset,e);return this.offset+=2,t}getUint32(e){const t=this.dataView.getUint32(this.offset,e);return this.offset+=4,t}}class xB{constructor(e){this.document=e,this.toolContext=new JE(null)}setOnSelectPageIndex(e){}setSeek(e){}setKeyEvent(e){this.toolContext.keyEvent=e}setDocument(e){}setPageNumber(e){if(this.pageNumber===e)return;const t=this.document.getPage(e);this.pageNumber=e,this.toolContext.page=t}setTool(e){if(!e)throw new Error("Tool must not be null");!this.tool&&this.tool===e||(this.setPreviousTool(this.tool),this.tool=e)}selectAndExecuteTool(e){const t=Or.createZero();this.setTool(e),this.beginTool(t),this.executeTool(t),this.endTool(t),this.setPreviousTool(this.previousTool)}beginTool(e){this.tool.begin(e.clone(),this.toolContext)}executeTool(e){this.tool.execute(e.clone())}endTool(e){this.tool.end(e.clone())}setPreviousTool(e){!e||e instanceof si||(this.previousTool=e)}}class Ig{constructor(e){this.requestOptions=e||{returnType:"body",responseType:"json",withCredentials:!1,timeout:0}}setHttpParams(e){return this.requestOptions.params=e,this}setHttpHeaders(e){return this.requestOptions.headers=e,this}setReturnType(e){return this.requestOptions.returnType=e,this}setResponseType(e){return this.requestOptions.responseType=e,this}setWithCredentials(e){return this.requestOptions.withCredentials=e,this}setTimeout(e){return this.requestOptions.timeout=e,this}setOptions(e){return this.requestOptions=e,this}setOnProgress(e){return this.onProgress=e,this}delete(e){return this.request("DELETE",e)}get(e){return this.request("GET",e)}head(e){return this.request("HEAD",e)}options(e){return this.request("OPTIONS",e)}patch(e,t){return this.request("PATCH",e,t)}post(e,t){return this.request("POST",e,t)}put(e,t){return this.request("PUT",e,t)}request(e,t,r){const i=new XMLHttpRequest;return i.open(e,this.composeUrl(t),!0),this.requestOptions.responseType&&(i.responseType=this.requestOptions.responseType),this.requestOptions.timeout&&(i.timeout=this.requestOptions.timeout),this.requestOptions.withCredentials&&(i.withCredentials=this.requestOptions.withCredentials),this.setHeaders(r,i),new Promise((s,o)=>{const a=()=>{o(this.getResponse(i))};i.onload=()=>{if(i.status>=200&&i.status<400){let l=null;l="response"===this.requestOptions.returnType?this.getResponse(i):this.decodeBody(i),s(l)}else a()},i.ontimeout=a,i.onerror=a,this.onProgress&&(r&&i.upload?i.upload.onprogress=this.onProgress:i.onprogress=this.onProgress),i.send(this.encodeBody(r))})}getResponse(e){return{body:this.decodeBody(e),headers:this.getHeaders(e),status:e.status,statusText:e.statusText}}composeUrl(e){const t=this.requestOptions.params;if(!t)return e;const r=t?t.toString():"";if(r){const i=e.indexOf("?");e=e+(-1===i?"?":i<e.length-1?"&":"")+r}return e}getContentType(e){return null==e?"":e instanceof Blob?e.type:e instanceof FormData?"":"string"==typeof e?"text/plain":e instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=UTF-8":"object"==typeof e||"number"==typeof e||Array.isArray(e)?"application/json":""}encodeBody(e){return null==e?null:e instanceof ArrayBuffer||e instanceof Blob||e instanceof FormData||"string"==typeof e?e:"object"==typeof e||"boolean"==typeof e||Array.isArray(e)?JSON.stringify(e):e.toString()}decodeBody(e){var t;let r=e.response||null,i=e.responseType;if(!i){i=null!==(t=e.getResponseHeader("Content-Type"))&&void 0!==t?t:"";const s=new RegExp("^\\w+/(\\w+);?").exec(i);s&&(i=s[1])}return"json"===i&&"string"==typeof r&&(r=""!==r?JSON.parse(r):null),r}setHeaders(e,t){const r=this.requestOptions.headers;if(r)for(const[i,s]of r)if(Array.isArray(s))for(const o of s)t.setRequestHeader(i,o);else t.setRequestHeader(i,s);if(!r||!r.has("Content-Type")){const i=this.getContentType(e);i&&t.setRequestHeader("Content-Type",i)}(!r||!r.has("Accept"))&&t.setRequestHeader("Accept","application/json, text/plain, */*")}getHeaders(e){const t=new Map,r=e.getAllResponseHeaders();if(r){const i=r.trim().split(/[\r\n]+/);for(const s of i){const o=s.indexOf(":");if(o>0){const a=s.slice(0,o),l=s.slice(o+1).trim(),c=a.toLowerCase(),p=t.get(c);p?("string"==typeof p?[p]:p).push(l):t.set(c,l)}}}return t}}var Rg=W(36);class MB{constructor(){this.backCanvas=document.createElement("canvas")}render(e,t,r,i){var s=this;return Rn(function*(){if(s.renderTask)return null;const o=1/r.width,a=i.width*o,l=r.x*a,c=r.y*a,k=e.getViewport({scale:o*(i.width/(e.view[2]-e.view[0])),dontFlip:!1});return k.transform[4]-=l,k.transform[5]-=c,s.backCanvas.width=i.width,s.backCanvas.height=i.height,s.renderTask=e.render({canvasContext:s.backCanvas.getContext("2d"),viewport:k}),s.renderTask.promise.then(()=>(t.canvas.width=s.backCanvas.width,t.canvas.height=s.backCanvas.height,t.drawImage(s.backCanvas,0,0),s.renderTask=null,s.backCanvas),$=>{})})()}}var rw=W(813);class PB{render(e,t,r,i){return Rn(function*(){const s=yield e.getTextContent(),o=1/i.width,a=r.width*o,l=i.x*a,c=i.y*a,k=e.getViewport({scale:o*(r.width/(e.view[2]-e.view[0])),dontFlip:!1});k.transform[4]-=l,k.transform[5]-=c,(0,Rg.renderTextLayer)({textContent:s,container:t,viewport:k,enhanceTextSelection:!0,textDivs:[]}).promise.catch(je=>{console.error(je)});const $=new rw.SimpleLinkService;$.externalLinkTarget=2,new rw.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,linkService:$}).render(k)})()}}class IB extends bE{constructor(e){super(),this.document=e,this.renderer=new MB,this.textRenderer=new PB,this.loadPages(e)}getPageBounds(e){var t=this;return Rn(function*(){const i=(yield t.getPdfPage(e)).view;return new Ar(i[0],i[1],i[2],i[3])})()}getPageText(e){var t=this;return Rn(function*(){return(yield(yield t.document.getPage(e+1)).getTextContent()).items.map(function(s){return s.str}).join(" ")})()}renderPage(e,t,r,i){var s=this;return Rn(function*(){const o=yield s.getPdfPage(e);return s.renderer.render(o,t,r,i)})()}renderPageText(e,t,r,i){var s=this;return Rn(function*(){const o=yield s.getPdfPage(e);s.textRenderer.render(o,t,r,i)})()}getPdfPage(e){return this.document.getPage(e+1)}loadPages(e){this.pages=[];for(let t=0;t<e.numPages;t++)this.pages.push(new _E(this,t))}}class RB{loadDocument(e){return new Promise((t,r)=>{(0,Rg.getDocument)(e).promise.then(i=>{t(new IB(i))},i=>{r(i)})})}}class OB{constructor(e){this.apiPath="/course/state",this.host=e}getCourseState(e){return(new Ig).get(this.getFullPath("/"+e))}getStateDocument(e,t){return new Promise(t.documentFile?(r,i)=>{(new Ig).setResponseType("arraybuffer").get(t.documentFile).then(s=>{if(!s)throw new Error("Received empty course document");const o=new Uint8Array(s);return(new RB).loadDocument(o)}).then(s=>{s.setDocumentId(t.documentId),r(s)}).catch(s=>{i(s)})}:(r,i)=>{(new Hl).setDocumentId(t.documentId)})}getStateDocumentActions(e,t){return new Promise((r,i)=>(new Ig).setResponseType("arraybuffer").get(this.getFullPath("/"+e+"/pages/"+t.documentId)).then(s=>{if(!s)return void i("Received empty course document");const o=new nw(s),a=s.byteLength,l=[];for(;o.byteOffset<a;){o.getInt32();const v=(new tw).parse(o);v&&l.push(v)}r(l)}).catch(s=>{i(s)}))}preloadSlideDocument(e,t,r){return this.getStateDocumentActions(e,t).then(i=>{const s=new xB(r);for(const o of i)this.loadActions(s,o)})}loadActions(e,t){const r=t.playbackActions;if(!(r.length<1)){e.setPageNumber(t.pageNumber);for(let s of r)try{s.execute(e)}catch(o){console.error(o)}}}getFullPath(e){return this.host+this.apiPath+e}}class Dr extends class kB{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}notify(e){this.observers.forEach(t=>t(e))}}{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.notify(this._value))}notifyObservers(){super.notify(this._value)}}class FB{constructor(){this._elementA=new Dr,this._raisedHand=new Dr,this._showQuiz=new Dr,this._showChat=new Dr,this._showQuizActive=new Dr,this._webrtcConnected=new Dr,this._webrtcPublisherConnected=new Dr,this._videoAvailable=new Dr,this._mainVideoAvailable=new Dr,this._localVideoAvailable=new Dr,this._selectedPageIndex=new Dr,this._duration=new Dr,this._time=new Dr,this._volume=new Dr,this._muted=new Dr}get elementAProperty(){return this._elementA}get selectedPageIndexProperty(){return this._selectedPageIndex}get selectedPageIndex(){return this._selectedPageIndex.value}set selectedPageIndex(e){this._selectedPageIndex.value=e}get raisedHandProperty(){return this._raisedHand}set raisedHand(e){this._raisedHand.value=e}get showChatProperty(){return this._showChat}get showChat(){return this._showChat.value}set showChat(e){this._showChat.value=e}get showQuizProperty(){return this._showQuiz}set showQuiz(e){this._showQuiz.value=e}get showQuizActiveProperty(){return this._showQuizActive}set showQuizActive(e){this._showQuizActive.value=e}get webrtcConnectedProperty(){return this._webrtcConnected}set webrtcConnected(e){this._webrtcConnected.value=e}get webrtcPublisherConnectedProperty(){return this._webrtcPublisherConnected}set webrtcPublisherConnected(e){this._webrtcPublisherConnected.value=e}get videoAvailableProperty(){return this._videoAvailable}get videoAvailable(){return this._videoAvailable.value}set videoAvailable(e){this._videoAvailable.value=e}get mainVideoAvailableProperty(){return this._mainVideoAvailable}get mainVideoAvailable(){return this._mainVideoAvailable.value}set mainVideoAvailable(e){this._mainVideoAvailable.value=e}get localVideoAvailableProperty(){return this._localVideoAvailable}get localVideoAvailable(){return this._localVideoAvailable.value}set localVideoAvailable(e){this._localVideoAvailable.value=e}get durationProperty(){return this._duration}getDuration(){return this._duration.value}setDuration(e){this._duration.value=e}get timeProperty(){return this._time}getTime(){return this._time.value}setTime(e){this._time.value=e}get volumeProperty(){return this._volume}getVolume(){return this._volume.value}setVolume(e){this._volume.value=e}get mutedProperty(){return this._muted}getMuted(){return this._muted.value}setMuted(e){this._muted.value=e}}class iw{constructor(e,t){this.width=e,this.height=t}equals(e){return!!e&&Math.fround(this.width)===Math.fround(e.width)&&Math.fround(this.height)===Math.fround(e.height)}toString(){return`[${this.height}, ${this.width}]`}}class LB{constructor(e){this._size=e}get size(){return this._size}}class Og{constructor(e){this.sizeEvent=new od,this.canvas=e,this.canvasContext=e.getContext("2d"),this.renderers=new Map,this.transform=new Tr}clear(){this.canvasContext&&this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}registerRenderer(e,t){this.renderers.set(e,t)}renderImageSource(e){this.canvasContext&&this.canvasContext.drawImage(e,0,0)}renderSurface(e){0===e.canvas.width||0===e.canvas.height||this.canvasContext&&this.canvasContext.drawImage(e.canvas,0,0)}renderShapes(e){for(let t of e)this.renderShape(t,t.bounds)}renderShape(e,t){const r=this.renderers.get(e.constructor.name);if(r){const i=this.canvas.width*this.transform.getScaleX(),s=this.transform.getTranslateX(),o=this.transform.getTranslateY();this.canvasContext&&(this.canvasContext.save(),this.canvasContext.scale(i,i),this.canvasContext.translate(-s,-o),t&&r.render(this.canvasContext,e,t),this.canvasContext.restore())}}getSize(){return this.size}setSize(e,t){if(e<=1||t<=1)return;const r=window.devicePixelRatio||1,i=new iw(e*r,t*r);i.equals(this.size)||(this.size=i,this.resizeCanvas(e,t,r),this.fireSizeEvent(new LB(this.size)))}setPageSize(e){let t=this.canvas.clientWidth,r=this.canvas.clientHeight;const i=e.width/e.height;t/r>i?t=r*i:r=t/i,0!==t&&0!==r&&this.setSize(t,r)}setTransform(e){this.transform.setTransform(e)}addSizeListener(e){return this.sizeEvent.subscribe(e)}removeSizeListener(e){this.sizeEvent.unsubscribe(e)}fireSizeEvent(e){this.sizeEvent.publish(e)}resizeCanvas(e,t,r){const i=this.canvas.getAttribute("scale");i&&"full"===i&&(this.canvas.width=e*r,this.canvas.height=t*r),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"}}class NB extends Og{renderSlideShape(e,t){return new Promise(this.canvasContext&&this.canvasContext.canvas.style.width&&this.canvasContext.canvas.style.height?(r,i)=>{const s=this.renderers.get(e.constructor.name);if(s&&this.canvasContext){const a=this.canvas.width/e.bounds.width;this.canvasContext.save(),this.canvasContext.scale(a,a);const l=s.render(this.canvasContext,e,t);this.canvasContext.restore(),r(l)}else i("No renderer or canvascontext available for slide-render-surface.")}:(r,i)=>{i("Canvas has no real size")})}}class BB{constructor(e){this.root=e}clear(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild)}render(e){var t=this;return Rn(function*(){t.clear(),e.renderText(t.root,t.size)})()}getSize(){return this.size}setSize(e,t){this.size=new iw(e,t),this.root.style.width=e+"px",this.root.style.height=t+"px"}setPageSize(e){let t=this.root.clientWidth,r=this.root.clientHeight;const i=e.width/e.height;t/r>i?t=r*i:r=t/i,0!==t&&0!==r&&this.setSize(t,r)}}const jB=["actionCanvas"],VB=["slideCanvas"],HB=["volatileCanvas"],UB=["textLayer"],$B=["parent"],zB=["pdfActionBar"];function GB(n,e){if(1&n&&(yt(0,"div",13),ln(1,"div",14),yt(2,"div",15),ln(3,"app-gallery-view",16),At()()),2&n){const t=Lt();Et(3),wt("isTinyView",!0)("skipAnimations",!0)("allowNavigation",!0)("cameraStreams",t._cameraStreams)}}const WB=function(n){return{cursor:n}},qB=function(n){return{"pointer-events":n}};let kg=(()=>{class n{constructor(t,r){this.janusService=t,this.annotationService=r,this.actionType=ut}set cameraStreams(t){var r;((null===(r=this._cameraStreams)||void 0===r?void 0:r.length)||-1)!==t.length&&(this._cameraStreams=t)}ngOnInit(){}ngAfterViewInit(){this.slideRenderSurface=new NB(this.slideCanvas.nativeElement),this.actionRenderSurface=new Og(this.actionCanvas.nativeElement),this.volatileRenderSurface=new Og(this.volatileCanvas.nativeElement),this.textLayerSurface=new BB(this.textLayer.nativeElement),new ResizeObserver(this.resize.bind(this)).observe(this.parent.nativeElement);for(const t of this.parent.nativeElement.children)new ResizeObserver(this.resize.bind(this)).observe(t);this.renderController=Jn.getInstance().renderController,this.repaint()}getActionRenderSurface(){return this.actionRenderSurface}getSlideRenderSurface(){return this.slideRenderSurface}getTextLayerSurface(){return this.textLayerSurface}getVolatileRenderSurface(){return this.volatileRenderSurface}repaint(){this.resize()}resize(){this.renderController?this.renderController.getPage().getPageBounds().then(r=>{let i=this.parent.nativeElement.clientWidth,s=this.parent.nativeElement.clientHeight;const o=r.width/r.height;i/s>o?i=s*o:s=i/o,0!==i&&0!==s&&(this.slideRenderSurface.setSize(i,s),this.actionRenderSurface.setSize(i,s),this.volatileRenderSurface.setSize(i,s),this.textLayerSurface.setSize(i,s))}):this.renderController=Jn.getInstance().renderController}}return n.\u0275fac=function(t){return new(t||n)(vt(Ca),vt(vd))},n.\u0275cmp=On({type:n,selectors:[["app-document-view"]],viewQuery:function(t,r){if(1&t&&(ir(jB,5),ir(VB,5),ir(HB,5),ir(UB,5),ir($B,5),ir(zB,5)),2&t){let i;zn(i=Gn())&&(r.actionCanvas=i.first),zn(i=Gn())&&(r.slideCanvas=i.first),zn(i=Gn())&&(r.volatileCanvas=i.first),zn(i=Gn())&&(r.textLayer=i.first),zn(i=Gn())&&(r.parent=i.first),zn(i=Gn())&&(r.pdfActionBar=i.first)}},inputs:{cameraStreams:"cameraStreams"},decls:13,vars:7,consts:[[1,"conferenceContainer"],["class","topBar",4,"ngIf"],[1,"documentContainer"],[1,"slide-view"],["parent",""],[1,"slide-canvas"],["slideCanvas",""],["scale","full",1,"action-canvas",3,"ngStyle","mousedown","mouseup","mousemove"],["actionCanvas",""],["scale","full",1,"volatile-canvas"],["volatileCanvas",""],[1,"text-layer",3,"ngStyle"],["textLayer",""],[1,"topBar"],[1,"me"],[1,"attendants"],[3,"isTinyView","skipAnimations","allowNavigation","cameraStreams"]],template:function(t,r){1&t&&(yt(0,"div",0),sn(1,GB,4,4,"div",1),yt(2,"div",2)(3,"div",3,4),ln(5,"canvas",5,6),yt(7,"canvas",7,8),Xt("mousedown",function(s){return r.annotationService.mouseDown(s)})("mouseup",function(s){return r.annotationService.mouseUp(s)})("mousemove",function(s){return r.annotationService.drag(s)}),At(),ln(9,"canvas",9,10)(11,"div",11,12),At()()()),2&t&&(Et(1),wt("ngIf",r._cameraStreams.length>1),Et(6),wt("ngStyle",vl(3,WB,r.annotationService.isAllowedToDraw?"url('/angular/assets/icons/pen-cursor.svg') 12 12, auto":"not-allowed")),Et(4),wt("ngStyle",vl(5,qB,r.annotationService.isCursorMode?"auto":"none")))},styles:["[_nghost-%COMP%]{flex:1;display:flex}.slide-view[_ngcontent-%COMP%]{flex:1;min-height:1px;padding:0;margin:0;overflow:hidden;position:relative;text-align:center;box-sizing:border-box;display:flex!important;align-items:center!important;justify-content:center!important;border:none}.slide-view[_ngcontent-%COMP%] > canvas[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);left:50%;border-radius:.2em;border:none}.slide-view[_ngcontent-%COMP%]   .slide-canvas[_ngcontent-%COMP%]{visibility:hidden;z-index:0;pointer-events:none}.slide-view[_ngcontent-%COMP%]   .action-canvas[_ngcontent-%COMP%]{z-index:1}.slide-view[_ngcontent-%COMP%]   .volatile-canvas[_ngcontent-%COMP%]{z-index:2;pointer-events:none}[_nghost-%COMP%]{display:flex;flex:1}.conferenceContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{display:flex;max-height:10vh;margin-bottom:.75em}.attendants[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;min-height:12vh}.attendantStreams[_ngcontent-%COMP%]{flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}mat-icon[_ngcontent-%COMP%]{color:#fff}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}.button[_ngcontent-%COMP%]:hover{background-color:#555}.attendantStreams[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;max-height:100%;max-width:95%}.documentContainer[_ngcontent-%COMP%]{flex:1;display:flex;position:relative;justify-content:center}.attendantStreamContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:100%;aspect-ratio:4/3;padding-right:1em}.attendantStreamContainer[_ngcontent-%COMP%]:first-of-type   [_ngcontent-%COMP%]:last-of-type{padding:0}video[_ngcontent-%COMP%]{background:transparent;border-radius:10px;overflow:hidden}.menubarContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.menubarContainer[_ngcontent-%COMP%] > app-menubar[_ngcontent-%COMP%]{z-index:10;margin-bottom:.33em;margin-top:.33em;border-radius:1em;min-width:30vw;grid-column-gap:0!important;display:flex}"]}),n})(),XB=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["app-settings"]],decls:1,vars:0,consts:[[1,"content"]],template:function(t,r){1&t&&ln(0,"div",0)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1}.content[_ngcontent-%COMP%]{flex:1}"]}),n})();var as=(()=>{return(n=as||(as={}))[n.PDF=0]="PDF",n[n.WHITEBOARD=1]="WHITEBOARD",n[n.QUIZ=2]="QUIZ",as;var n})();let Fg=(()=>{class n{constructor(){this.isOverlayVisible=!1,this.isSlimOverlayVisible=!1}trigger(t,r,i,s){if(t.stopPropagation(),this.lastTarget===t.target)return this.isOverlayVisible=!1,this.options=[],void(this.lastTarget=void 0);this.lastTarget=t.target;const o=t.target.getBoundingClientRect(),a=o.left;this.topPx=o.top+"px",this.leftPx=a+"px",this.isOverlayVisible=!0,this.isSlimOverlayVisible=!1,this.options=r,this.callback=i,this.activeKey=s}triggerSlim(t,r,i,s){if(t.stopPropagation(),this.lastTarget===t.target)return this.isSlimOverlayVisible=!1,this.slimOptions=[],void(this.lastTarget=void 0);this.lastTarget=t.target;const o=t.target.getBoundingClientRect(),a=o.left;this.topPx=o.top+"px",this.leftPx=a+"px",this.isOverlayVisible=!1,this.isSlimOverlayVisible=!0,this.slimOptions=r,this.slimCallback=i,this.activeKey=s}hideAll(){this.options=[],this.callback=void 0,this.activeKey="",this.isOverlayVisible=!1,this.isSlimOverlayVisible=!1}optionSelected(t){"key"in t&&this.callback?(this.callback(t),this.callback=void 0):this.slimCallback&&(this.slimCallback(t),this.slimCallback=void 0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KB=["addListener","removeListener"],YB=["addEventListener","removeEventListener"],JB=["on","off"];function ao(n,e,t,r){if(_(t)&&(r=t,t=void 0),r)return ao(n,e,t).pipe(eg(r));const[i,s]=function ej(n){return _(n.addEventListener)&&_(n.removeEventListener)}(n)?YB.map(o=>a=>n[o](e,a,t)):function ZB(n){return _(n.addListener)&&_(n.removeListener)}(n)?KB.map(sw(n,e)):function QB(n){return _(n.on)&&_(n.off)}(n)?JB.map(sw(n,e)):[];if(!i&&X(n))return $t(o=>ao(o,e,t))(Mt(n));if(!i)throw new TypeError("Invalid event target");return new pe(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function sw(n,e){return t=>r=>n[t](e,r)}function Wl(n){return le((e,t)=>{Mt(n).subscribe(_e(t,()=>t.complete(),C)),!t.closed&&e.subscribe(t)})}function ij(n,e){1&n&&ln(0,"h2",10),2&n&&wt("innerHTML",Lt().title.content,tf)}function sj(n,e){1&n&&lu(0)}function oj(n,e){if(1&n&&(yt(0,"h2"),sn(1,sj,1,0,"ng-container",11),At()),2&n){const t=Lt();Et(1),wt("ngTemplateOutlet",t.title.content)("ngTemplateOutletContext",t.context)}}function aj(n,e){if(1&n&&ln(0,"p",10),2&n){const t=Lt();ur("with-title",t.title),wt("innerHTML",t.body.content,tf)}}function lj(n,e){1&n&&lu(0)}function cj(n,e){if(1&n&&(yt(0,"p"),sn(1,lj,1,0,"ng-container",11),At()),2&n){const t=Lt();ur("with-title",t.title),Et(1),wt("ngTemplateOutlet",t.body.content)("ngTemplateOutletContext",t.context)}}const uj=[[["",8,"icon"]],[["",8,"btn"]]],dj=[".icon",".btn"],cw="[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}",hj=["backdrop"],fj=["dialog"];function pj(n,e){if(1&n&&ln(0,"div",6),2&n){const t=Lt(),r=ll(3);wt("dialogDragEnabled",!0)("dialogDragTarget",r)("dragConstraint",t.config.dragConstraint)}}function gj(n,e){if(1&n){const t=ei();yt(0,"div",7),Xt("click",function(){return Sn(t),Lt().closeDialog()}),ja(),yt(1,"svg",8),ln(2,"path",9),At()()}}function _d(n){return function mj(n){return null==n}(n)?"":function vj(n){return"string"==typeof n}(n)?n:`${n}px`}const Ng=Symbol("Dialog Content Data");class Bg{}class jg extends Bg{constructor(e={}){super(),this.beforeCloseGuards=[],this.mutate(e)}close(e){this.canClose(e).pipe(Rr(Boolean)).subscribe({next:()=>this.onClose(e)})}beforeClose(e){this.beforeCloseGuards.push(e)}resetDrag(e){this.onReset(e)}canClose(e){return Wd(...this.beforeCloseGuards.map(r=>r(e)).filter(r=>void 0!==r&&!0!==r).map(r=>"boolean"==typeof r?Nt(r):tr(r).pipe(Rr(i=>!i)))).pipe(rg(!0),Zs())}mutate(e){Object.assign(this,e)}asDialogRef(){return this}}let lo=(()=>{class n{constructor(t){this.ref=t,this.title=this.ref.data[Ng].title,this.body=this.ref.data[Ng].body,this.context={$implicit:this.ref,data:this.ref.data}}}return n.\u0275fac=function(t){return new(t||n)(vt(Bg))},n.\u0275cmp=On({type:n,selectors:[["ngneat-dialog-base"]],ngContentSelectors:dj,decls:12,vars:6,consts:[[1,"dialog"],[1,"dialog-header"],[1,"dialog-icon"],[3,"ngSwitch"],[3,"innerHTML",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"dialog-content",3,"ngSwitch"],[3,"with-title","innerHTML",4,"ngSwitchCase"],[3,"with-title",4,"ngSwitchCase"],[1,"dialog-footer"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(cl(uj),yt(0,"div",0)(1,"div",1)(2,"span",2),ia(3),At(),Gs(4,3),sn(5,ij,1,1,"h2",4),sn(6,oj,2,2,"h2",5),Ws(),At(),yt(7,"div",6),sn(8,aj,1,3,"p",7),sn(9,cj,2,4,"p",8),At(),yt(10,"div",9),ia(11,1),At()()),2&t&&(Et(4),wt("ngSwitch",null==r.title?null:r.title.type),Et(1),wt("ngSwitchCase","string"),Et(1),wt("ngSwitchCase","template"),Et(1),wt("ngSwitch",r.body.type),Et(1),wt("ngSwitchCase","string"),Et(1),wt("ngSwitchCase","template"))},directives:[Lu,LS,BS],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex-grow:1}.dialog[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;flex-direction:column;justify-content:flex-start;overflow:hidden}.dialog-header[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;width:100%;margin:0;padding:18px 40px 10px 30px}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]    {display:flex}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon{width:24px;margin-right:10px}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-success{fill:#72c140}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-question{fill:#f0af41}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-error{fill:#e74c3c}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin:0}.dialog-content[_ngcontent-%COMP%]{width:100%;flex-grow:1;overflow:auto;position:relative;display:flex;flex-direction:column;padding:0 30px 30px}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.75;margin:5px 0}.dialog-content[_ngcontent-%COMP%]   .with-title[_ngcontent-%COMP%]{padding-left:35px}.dialog-footer[_ngcontent-%COMP%]    {display:flex;width:100%;justify-content:flex-end;padding:17px 30px 16px;border-top:1px solid #f1f2f5}.dialog-footer[_ngcontent-%COMP%]     .btn{margin-right:10px;padding:10px 18px;border:0;border-radius:4px;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]     .btn:focus{outline:none}.dialog-footer[_ngcontent-%COMP%]     .btn:last-child{margin-right:0}.dialog-footer[_ngcontent-%COMP%]     .btn-success{background-color:#4091f7;color:#fff}.dialog-footer[_ngcontent-%COMP%]     .btn-error{background-color:#e74c3c;color:#fff}.dialog-footer[_ngcontent-%COMP%]     .btn-cancel{background-color:#fff;border:2px solid #4091f7;color:#4091f7}"],changeDetection:0}),n})(),uw=(()=>{class n extends lo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Vc(n)))(r||n)}}(),n.\u0275cmp=On({type:n,selectors:[["ngneat-dialog-success"]],features:[Wo],decls:7,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 496 496",1,"icon","icon-success"],["d","M248,0C111.033,0,0,111.033,0,248s111.033,248,248,248s248-111.033,248-248C495.841,111.099,384.901,0.159,248,0z      M248,480C119.87,480,16,376.13,16,248S119.87,16,248,16s232,103.87,232,232C479.859,376.072,376.072,479.859,248,480z"],["d","M370.344,158.344L208,320.688l-82.344-82.344c-3.178-3.07-8.242-2.982-11.312,0.196c-2.994,3.1-2.994,8.015,0,11.116     l88,88c3.124,3.123,8.188,3.123,11.312,0l168-168c3.07-3.178,2.982-8.242-0.196-11.312     C378.359,155.35,373.444,155.35,370.344,158.344z"],[1,"btn","btn-success","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(yt(0,"ngneat-dialog-base"),ja(),yt(1,"svg",0)(2,"g"),ln(3,"path",1)(4,"path",2),At()(),Pc(),yt(5,"button",3),Xt("click",function(){return r.ref.close()}),Cn(6,"OK"),At()())},directives:[lo],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}"],changeDetection:0}),n})(),dw=(()=>{class n extends lo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Vc(n)))(r||n)}}(),n.\u0275cmp=On({type:n,selectors:[["ngneat-dialog-confirm"]],features:[Wo],decls:10,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 512 512",1,"icon","icon-question"],["cx","256","cy","378.5","r","25"],["d","M256,0C114.516,0,0,114.497,0,256c0,141.484,114.497,256,256,256c141.484,0,256-114.497,256-256     C512,114.516,397.503,0,256,0z M256,472c-119.377,0-216-96.607-216-216c0-119.377,96.607-216,216-216     c119.377,0,216,96.607,216,216C472,375.377,375.393,472,256,472z"],["d","M256,128.5c-44.112,0-80,35.888-80,80c0,11.046,8.954,20,20,20s20-8.954,20-20c0-22.056,17.944-40,40-40     c22.056,0,40,17.944,40,40c0,22.056-17.944,40-40,40c-11.046,0-20,8.954-20,20v50c0,11.046,8.954,20,20,20     c11.046,0,20-8.954,20-20v-32.531c34.466-8.903,60-40.26,60-77.469C336,164.388,300.112,128.5,256,128.5z"],[1,"btn","btn-cancel","ngneat-dialog-secondary-btn",3,"click"],[1,"btn","btn-success","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(yt(0,"ngneat-dialog-base"),ja(),yt(1,"svg",0)(2,"g"),ln(3,"circle",1)(4,"path",2)(5,"path",3),At()(),Pc(),yt(6,"button",4),Xt("click",function(){return r.ref.close(!1)}),Cn(7,"Cancel"),At(),yt(8,"button",5),Xt("click",function(){return r.ref.close(!0)}),Cn(9,"OK"),At()())},directives:[lo],styles:[cw],changeDetection:0}),n})(),hw=(()=>{class n extends lo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Vc(n)))(r||n)}}(),n.\u0275cmp=On({type:n,selectors:[["ngneat-dialog-error"]],features:[Wo],decls:7,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 512 512",1,"icon","icon-error"],["d","M256,0C114.508,0,0,114.497,0,256c0,141.493,114.497,256,256,256c141.492,0,256-114.497,256-256    C512,114.507,397.503,0,256,0z M256,472c-119.384,0-216-96.607-216-216c0-119.385,96.607-216,216-216    c119.384,0,216,96.607,216,216C472,375.385,375.393,472,256,472z"],["d","M343.586,315.302L284.284,256l59.302-59.302c7.81-7.81,7.811-20.473,0.001-28.284c-7.812-7.811-20.475-7.81-28.284,0    L256,227.716l-59.303-59.302c-7.809-7.811-20.474-7.811-28.284,0c-7.81,7.811-7.81,20.474,0.001,28.284L227.716,256    l-59.302,59.302c-7.811,7.811-7.812,20.474-0.001,28.284c7.813,7.812,20.476,7.809,28.284,0L256,284.284l59.303,59.302    c7.808,7.81,20.473,7.811,28.284,0C351.398,335.775,351.397,323.112,343.586,315.302z"],[1,"btn","btn-error","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(yt(0,"ngneat-dialog-base"),ja(),yt(1,"svg",0)(2,"g"),ln(3,"path",1)(4,"path",2),At()(),Pc(),yt(5,"button",3),Xt("click",function(){return r.ref.close()}),Cn(6,"OK"),At()())},directives:[lo],styles:[cw],changeDetection:0}),n})();const fw=new Pt("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>Lo(An)}),pw=new Pt("Global dialog config token"),bd=new Pt("Dialog config token",{providedIn:"root",factory:()=>({id:void 0,container:Lo(fw).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{minHeight:"200px",width:"400px"},md:{minHeight:"280px",width:"560px"},lg:{minHeight:"350px",width:"800px"},fullScreen:{height:"100%",width:"100%"}},success:{component:uw},confirm:{component:dw},error:{component:hw},onClose:void 0,onOpen:void 0})}),gw=new Pt("Nodes inserted into the dialog");let mw=(()=>{class n{constructor(t,r,i){this.host=t,this.zone=r,this.renderer=i,this.dialogDragEnabled=!1,this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new F}set dialogDragOffset(t){this.reset(t)}ngAfterViewInit(){!this.enabled||this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.renderer.setStyle(this.handle,"cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.renderer.setStyle(this.handle,"cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(t){const r={x:0,y:0};this.offset=Object.assign(Object.assign({},r),t),this.delta=Object.assign({},r),this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const t=ao(this.handle,"mousedown"),r=ao(document,"mousemove"),i=ao(document,"mouseup");t.pipe(Rr(()=>this.enabled),Te(o=>({startX:o.clientX,startY:o.clientY})),ws(({startX:o,startY:a})=>r.pipe(Te(l=>{l.preventDefault(),this.delta={x:l.clientX-o,y:l.clientY-a},"constrain"===this.dragConstraint&&this.checkConstraint()}),Wl(i))),Wl(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),i.pipe(Rr(()=>this.enabled),Rr(()=>0!==this.delta.x||0!==this.delta.y),Wl(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.renderer.setStyle(this.target,"transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.renderer.setStyle(this.handle,"cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:r,height:i}=this.target.getBoundingClientRect(),{innerWidth:o,innerHeight:a}=window,l=this.translateY>0?this.translateY+i/2:this.translateY-i/2,c=a/2,p=this.translateX>0?this.translateX+r/2:this.translateX-r/2,v=o/2;-c>l&&(this.delta.y=i/2-c-this.offset.y),c<l&&(this.delta.y=c-i/2-this.offset.y),-v>p&&(this.delta.x=r/2-v-this.offset.x),v<p&&(this.delta.x=v-r/2-this.offset.x)}}return n.\u0275fac=function(t){return new(t||n)(vt(zr),vt(Wn),vt(gl))},n.\u0275dir=Xn({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},features:[Wi]}),n})(),yj=(()=>{class n{constructor(t,{nativeElement:r},i,s,o){var a,l,c,p,v;this.document=t,this.dialogRef=i,this.config=s,this.nodes=o,this.size=null===(a=this.config.sizes)||void 0===a?void 0:a[this.config.size||"md"],this.styles={width:_d(this.config.width||(null===(l=this.size)||void 0===l?void 0:l.width)),height:_d(this.config.height||(null===(c=this.size)||void 0===c?void 0:c.height)),minHeight:_d(this.config.minHeight||(null===(p=this.size)||void 0===p?void 0:p.minHeight)),maxHeight:_d(this.config.maxHeight||(null===(v=this.size)||void 0===v?void 0:v.maxHeight))},this.destroy$=new F,r.id=this.config.id,this.nodes.forEach(k=>r.appendChild(k)),s.windowClass&&s.windowClass.split(/\s/).filter($=>$).forEach($=>r.classList.add($))}ngOnInit(){const r=this.dialogElement.nativeElement,i=ao(this.config.backdrop?this.backdrop.nativeElement:this.document.body,"click",{capture:!0}).pipe(Rr(({target:s})=>!r.contains(s)));i.pipe(Wl(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&Wd(ao(this.document.body,"keyup").pipe(Rr(({key:s})=>"Escape"===s)),i).pipe(Wl(this.destroy$)).subscribe(()=>this.closeDialog()),this.nodes.forEach(s=>r.appendChild(s))}reset(t){this.config.draggable&&this.draggable.reset(t)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(t){return new(t||n)(vt(An),vt(zr),vt(jg),vt(bd),vt(gw))},n.\u0275cmp=On({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(t,r){if(1&t&&(ir(hj,7),ir(fj,7),ir(mw,5)),2&t){let i;zn(i=Gn())&&(r.backdrop=i.first),zn(i=Gn())&&(r.dialogElement=i.first),zn(i=Gn())&&(r.draggable=i.first)}},decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],[1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(t,r){1&t&&(yt(0,"div",0,1)(2,"div",2,3),sn(4,pj,1,3,"div",4),sn(5,gj,3,0,"div",5),At()()),2&t&&(ur("ngneat-dialog-backdrop-visible",r.config.backdrop),wt("hidden",!r.config.backdrop),Et(2),ur("ngneat-dialog-resizable",r.config.resizable),wt("ngStyle",r.styles),Et(2),wt("ngIf",r.config.draggable),Et(1),wt("ngIf",r.config.closeButton))},directives:[Nu,ns,mw],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;-webkit-animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:4px;box-sizing:border-box;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f;background:#fff;color:#000000de;width:auto;max-width:100%;height:auto;max-height:100%}@-webkit-keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;top:0;left:0;bottom:0;right:0;height:100%;width:100%;padding:30px;z-index:1050;background:rgba(0,0,0,.32);-webkit-animation:dialog-open-backdrop .3s;animation:dialog-open-backdrop .3s}@-webkit-keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px;z-index:1051}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;top:10px;cursor:pointer;right:10px;width:24px;height:24px;color:#5f6368;transition:color .2s ease-in-out;z-index:1051}.ngneat-close-dialog svg{width:12px;height:12px}.ngneat-close-dialog:hover{color:#5d9ff1}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const vw="ngneat-dialog-hidden";let _j=(()=>{class n{constructor(t,r,i,s,o,a){this.appRef=t,this.componentFactoryResolver=r,this.injector=i,this.document=s,this.defaultConfig=o,this.globalConfig=a,this.dialogs=[],this.dialogFactory=this.componentFactoryResolver.resolveComponentFactory(yj)}closeAll(){this.dialogs.forEach(t=>t.close())}success(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.success.component,i)}confirm(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.confirm.component,i)}error(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.error.component,i)}open(t,r={}){var i;const s=this.mergeConfig(r);null===(i=s.onOpen)||void 0===i||i.call(s);const o=new jg({id:s.id,data:s.data,backdropClick$:new F}),a={config:s,dialogRef:o};return this.throwIfIDAlreadyExists(s.id),this.dialogs.push(o),1===this.dialogs.length&&this.document.body.classList.add(vw),t instanceof Gr?this.openTemplate(t,a):"function"==typeof t?this.openComponent(t,a):this.throwMustBeAComponentOrATemplateRef(t)}openTemplate(t,{config:r,dialogRef:i}){var s;const o={$implicit:i,config:r},a=(null===(s=r.vcr)||void 0===s?void 0:s.createEmbeddedView(t,o))||t.createEmbeddedView(o);return this.attach({dialogRef:i,config:r,ref:t,view:a,attachToApp:!r.vcr})}openComponent(t,{config:r,dialogRef:i}){var s;const a=this.componentFactoryResolver.resolveComponentFactory(t).create(Yn.create({providers:[{provide:Bg,useValue:i},{provide:bd,useValue:r}],parent:(null===(s=r.vcr)||void 0===s?void 0:s.injector)||this.injector}));return this.attach({dialogRef:i,config:r,ref:a,view:a.hostView,attachToApp:!0})}attach({dialogRef:t,config:r,ref:i,view:s,attachToApp:o}){const a=this.createDialog(r,t,s),l=r.container instanceof zr?r.container.nativeElement:r.container,c={after:new F};return t.mutate({id:r.id,data:r.data,ref:i,onClose:k=>{var $,he;null===(he=($=this.globalConfig).onClose)||void 0===he||he.call($),this.dialogs=this.dialogs.filter(({id:je})=>t.id!==je),l.removeChild(a.location.nativeElement),this.appRef.detachView(a.hostView),this.appRef.detachView(s),a.destroy(),s.destroy(),t.backdropClick$.complete(),t.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),c.after.next(k),c.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(vw)},afterClosed$:c.after.asObservable(),onReset:k=>{a.instance.reset(k)}}),l.appendChild(a.location.nativeElement),this.appRef.attachView(a.hostView),o&&this.appRef.attachView(s),t.asDialogRef()}createDialog(t,r,i){return this.dialogFactory.create(Yn.create({providers:[{provide:jg,useValue:r},{provide:bd,useValue:t},{provide:gw,useValue:i.rootNodes}],parent:this.injector}))}mergeConfig(t){var r;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.defaultConfig),{id:`dialog-${Math.random().toString(36).substring(7)}`}),this.globalConfig),this.cleanConfig(t)),{sizes:Object.assign(Object.assign(Object.assign({},this.defaultConfig.sizes),null===(r=this.globalConfig)||void 0===r?void 0:r.sizes),null==t?void 0:t.sizes)})}mergeConfigWithContent(t,r){const i=this.mergeConfig(t),{data:s}=i,o=function tj(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(i,["data"]);return Object.assign(Object.assign({},o),{data:Object.assign(Object.assign({},s),{[Ng]:this.isTemplateOrString(r)?{title:null,body:{type:this.getTypeOfContent(r),content:r}}:Object.entries(r).reduce((a,[l,c])=>(a[l]={type:this.getTypeOfContent(c),content:c},a),{})})})}cleanConfig(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}isTemplateOrString(t){return t instanceof Gr||"string"==typeof t}getTypeOfContent(t){return t instanceof Gr?"template":"string"}throwMustBeAComponentOrATemplateRef(t){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${t}`)}throwIfIDAlreadyExists(t){if(this.dialogs.find(r=>r.id===t))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${t}`)}applyDefaultSize(t){return Object.assign(Object.assign({},t),{size:t.size||"sm"})}}return n.\u0275fac=function(t){return new(t||n)(_t(Cu),_t(ca),_t(Yn),_t(fw),_t(bd),_t(pw))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sj=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:pw,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({imports:[[VS]]}),n})();class yw{}class _w{}class ls{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ls?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ls;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ls?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Cj{encodeKey(e){return bw(e)}encodeValue(e){return bw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const wj=/%(\d[a-f0-9])/gi,Aj={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function bw(n){return encodeURIComponent(n).replace(wj,(e,t)=>{var r;return null!==(r=Aj[t])&&void 0!==r?r:e})}function Sw(n){return`${n}`}class xs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Cj,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ej(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new xs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Sw(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Sw(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Tj{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Cw(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Ew(n){return"undefined"!=typeof Blob&&n instanceof Blob}function ww(n){return"undefined"!=typeof FormData&&n instanceof FormData}class ql{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Dj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ls),this.context||(this.context=new Tj),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new xs,this.urlWithParams=t}serializeBody(){return null===this.body?null:Cw(this.body)||Ew(this.body)||ww(this.body)||function xj(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ww(this.body)?null:Ew(this.body)?this.body.type||null:Cw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,p=e.params||this.params;const v=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((k,$)=>k.set($,e.setHeaders[$]),c)),e.setParams&&(p=Object.keys(e.setParams).reduce((k,$)=>k.set($,e.setParams[$]),p)),new ql(r,i,o,{params:p,headers:c,context:v,reportProgress:l,responseType:s,withCredentials:a})}}var Vn=(()=>((Vn=Vn||{})[Vn.Sent=0]="Sent",Vn[Vn.UploadProgress=1]="UploadProgress",Vn[Vn.ResponseHeader=2]="ResponseHeader",Vn[Vn.DownloadProgress=3]="DownloadProgress",Vn[Vn.Response=4]="Response",Vn[Vn.User=5]="User",Vn))();class Vg{constructor(e,t=200,r="OK"){this.headers=e.headers||new ls,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Hg extends Vg{constructor(e={}){super(e),this.type=Vn.ResponseHeader}clone(e={}){return new Hg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Sd extends Vg{constructor(e={}){super(e),this.type=Vn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Sd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Aw extends Vg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ug(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Cd=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ql)s=t;else{let l,c;l=i.headers instanceof ls?i.headers:new ls(i.headers),i.params&&(c=i.params instanceof xs?i.params:new xs({fromObject:i.params})),s=new ql(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Nt(s).pipe(ga(l=>this.handler.handle(l)));if(t instanceof ql||"events"===i.observe)return o;const a=o.pipe(Rr(l=>l instanceof Sd));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Te(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Te(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Te(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Te(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new xs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ug(i,r))}post(t,r,i={}){return this.request("POST",t,Ug(i,r))}put(t,r,i={}){return this.request("PUT",t,Ug(i,r))}}return n.\u0275fac=function(t){return new(t||n)(_t(yw))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();class Tw{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Dw=new Pt("HTTP_INTERCEPTORS");let Mj=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const Pj=/^\)\]\}',?\n/;let xw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new pe(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach(($,he)=>i.setRequestHeader($,he.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const $=t.detectContentTypeHeader();null!==$&&i.setRequestHeader("Content-Type",$)}if(t.responseType){const $=t.responseType.toLowerCase();i.responseType="json"!==$?$:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const $=i.statusText||"OK",he=new ls(i.getAllResponseHeaders()),je=function Ij(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return o=new Hg({headers:he,status:i.status,statusText:$,url:je}),o},l=()=>{let{headers:$,status:he,statusText:je,url:st}=a(),rt=null;204!==he&&(rt=void 0===i.response?i.responseText:i.response),0===he&&(he=rt?200:0);let Le=he>=200&&he<300;if("json"===t.responseType&&"string"==typeof rt){const Ge=rt;rt=rt.replace(Pj,"");try{rt=""!==rt?JSON.parse(rt):null}catch(gt){rt=Ge,Le&&(Le=!1,rt={error:gt,text:rt})}}Le?(r.next(new Sd({body:rt,headers:$,status:he,statusText:je,url:st||void 0})),r.complete()):r.error(new Aw({error:rt,headers:$,status:he,statusText:je,url:st||void 0}))},c=$=>{const{url:he}=a(),je=new Aw({error:$,status:i.status||0,statusText:i.statusText||"Unknown Error",url:he||void 0});r.error(je)};let p=!1;const v=$=>{p||(r.next(a()),p=!0);let he={type:Vn.DownloadProgress,loaded:$.loaded};$.lengthComputable&&(he.total=$.total),"text"===t.responseType&&!!i.responseText&&(he.partialText=i.responseText),r.next(he)},k=$=>{let he={type:Vn.UploadProgress,loaded:$.loaded};$.lengthComputable&&(he.total=$.total),r.next(he)};return i.addEventListener("load",l),i.addEventListener("error",c),i.addEventListener("timeout",c),i.addEventListener("abort",c),t.reportProgress&&(i.addEventListener("progress",v),null!==s&&i.upload&&i.upload.addEventListener("progress",k)),i.send(s),r.next({type:Vn.Sent}),()=>{i.removeEventListener("error",c),i.removeEventListener("abort",c),i.removeEventListener("load",l),i.removeEventListener("timeout",c),t.reportProgress&&(i.removeEventListener("progress",v),null!==s&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(_t($S))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const $g=new Pt("XSRF_COOKIE_NAME"),zg=new Pt("XSRF_HEADER_NAME");class Mw{}let Wg,Rj=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=OS(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(_t(An),_t(Su),_t($g))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),Gg=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(_t(Mw),_t(zg))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),Oj=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Dw,[]);this.chain=r.reduceRight((i,s)=>new Tw(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(_t(_w),_t(Yn))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),kj=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Gg,useClass:Mj}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:$g,useValue:t.cookieName}:[],t.headerName?{provide:zg,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({providers:[Gg,{provide:Dw,useExisting:Gg,multi:!0},{provide:Mw,useClass:Rj},{provide:$g,useValue:"XSRF-TOKEN"},{provide:zg,useValue:"X-XSRF-TOKEN"}]}),n})(),Fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({providers:[Cd,{provide:yw,useClass:Oj},xw,{provide:_w,useExisting:xw}],imports:[[kj.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Pw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({}),n})();try{Wg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Wg=!1}let Bj=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function pF(n){return n===HS}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Wg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(_t(Su))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lw="cdk-high-contrast-black-on-white",Nw="cdk-high-contrast-white-on-black",Kg="cdk-high-contrast-active";let tV=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Kg),t.remove(Lw),t.remove(Nw),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(Kg),t.add(Lw)):2===r&&(t.add(Kg),t.add(Nw))}}}return n.\u0275fac=function(t){return new(t||n)(_t(Bj),_t(An))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rV=new Pt("mat-sanity-checks",{providedIn:"root",factory:function nV(){return!0}});let jw=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function Hj(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(_t(tV),_t(rV,8),_t(An))},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({imports:[[Pw],Pw]}),n})();function iV(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}const fV=["*"];let wd;function Yl(n){var e;return(null===(e=function pV(){if(void 0===wd&&(wd=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(wd=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return wd}())||void 0===e?void 0:e.createHTML(n))||n}function $w(n){return Error(`Unable to find icon with the name "${n}"`)}function zw(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Gw(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class uo{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Ad=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new uo(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(rn.HTML,i);if(!o)throw Gw(i);const a=Yl(o);return this._addSvgIconConfig(t,r,new uo("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new uo(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(rn.HTML,r);if(!s)throw Gw(r);const o=Yl(s);return this._addSvgIconSetConfig(t,new uo("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(rn.RESOURCE_URL,t);if(!r)throw zw(t);const i=this._cachedIconsByUrl.get(r);return i?Nt(Td(i)):this._loadSvgIconFromConfig(new uo(t,null)).pipe(hr(s=>this._cachedIconsByUrl.set(r,s)),Te(s=>Td(s)))}getNamedSvgIcon(t,r=""){const i=Ww(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):xl($w(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Nt(Td(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Te(r=>Td(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Nt(i):function hV(...n){const e=Lm(n),{args:t,keys:r}=rC(n),i=new pe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let p=0;p<o;p++){let v=!1;Mt(t[p]).subscribe(_e(s,k=>{v||(v=!0,c--),a[p]=k},()=>l--,void 0,()=>{(!l||!v)&&(c||s.next(r?iC(r,a):a),s.complete())}))}});return e?i.pipe(eg(e)):i}(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(rs(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(rn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Nt(null)})))).pipe(Te(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw $w(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(hr(r=>t.svgText=r),Te(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Nt(null):this._fetchIcon(t).pipe(hr(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(Yl("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Yl("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,o=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function gV(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(rn.RESOURCE_URL,i);if(!a)throw zw(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Te(p=>Yl(p)),uC(()=>this._inProgressUrlFetches.delete(a)),Vm());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(Ww(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return vV(s)?new uo(s.url,null,s.options):new uo(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(_t(Cd,8),_t(Qp),_t(An,8),_t(_s))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Td(n){return n.cloneNode(!0)}function Ww(n,e){return n+":"+e}function vV(n){return!(!n.url||!n.options)}const yV=iV(class{constructor(n){this._elementRef=n}}),_V=new Pt("mat-icon-location",{providedIn:"root",factory:function bV(){const n=Lo(An),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),qw=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],SV=qw.map(n=>`[${n}]`).join(", "),CV=/^url\(['"]?#(.*?)['"]?\)$/;let Dd=(()=>{class n extends yV{constructor(t,r,i,s,o){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=Re.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=function uV(n){return null!=n&&"false"!=`${n}`}(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(SV),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)qw.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(CV):null;if(c){let p=i.get(a);p||(p=[],i.set(a,p)),p.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe($u(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(vt(zr),vt(Ad),Po("aria-hidden"),vt(_V),vt(_s))},n.\u0275cmp=On({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(ou("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),ur("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Wo],ngContentSelectors:fV,decls:1,vars:0,template:function(t,r){1&t&&(cl(),ia(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Xw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({imports:[[jw],jw]}),n})();const EV=["renderSpace"],wV=["conferenceView"],AV=["dish"];function TV(n,e){if(1&n){const t=ei();yt(0,"div",8)(1,"div",9),Xt("click",function(){return Sn(t),Lt().changePage(-1)}),yt(2,"mat-icon"),Cn(3,"arrow_left"),At()()()}}function DV(n,e){if(1&n){const t=ei();yt(0,"video",15),Xt("loadedmetadata",function(){return Sn(t),Lt().$implicit.loadingFinished=!0}),At()}if(2&n){const t=Lt().$implicit;ur("animatedVideo",!t.firstRenderFinished)("loading",!t.loadingFinished)("screenshareNoCrop",t.isScreenshare),wt("srcObject",t.stream)}}function xV(n,e){1&n&&(yt(0,"div",16)(1,"mat-icon"),Cn(2,"videocam_off"),At()())}function MV(n,e){if(1&n){const t=ei();yt(0,"div",17)(1,"div",9),Xt("click",function(){Sn(t);const i=Lt().$implicit;return i.isVideoMuted=!i.isVideoMuted}),yt(2,"mat-icon"),Cn(3),At()(),yt(4,"div",9),Xt("click",function(){Sn(t);const i=Lt().$implicit;return Lt().muteAudioForFeedId(i.feedId)}),yt(5,"mat-icon"),Cn(6),At()()()}if(2&n){const t=Lt().$implicit,r=Lt();Et(2),ur("tinyView",r.isTinyView)("red",t.isVideoMuted),Et(1),oa(t.isVideoMuted?"videocam_off":"videocam"),Et(2),ur("tinyView",r.isTinyView)("red",!0===r.janusService.locallyMutedRemoteAudioFeeds[t.feedId]),Et(1),oa(!0===r.janusService.locallyMutedRemoteAudioFeeds[t.feedId]?"mic_off":"mic")}}function PV(n,e){if(1&n){const t=ei();yt(0,"div",10),Xt("mouseover",function(){const s=Sn(t).$implicit;return Lt().mouseHoverFeedId=s.feedId})("mouseleave",function(){return Sn(t),Lt().mouseHoverFeedId=""}),sn(1,DV,1,7,"video",11),sn(2,xV,3,0,"div",12),yt(3,"div",13),Cn(4),At(),sn(5,MV,7,10,"div",14),At()}if(2&n){const t=e.$implicit,r=Lt();ur("isTalking",r.janusService.talkingFeeds[t.feedId])("screenshareNoCrop",t.isScreenshare)("animatedDiv",!t.firstRenderFinished),Et(1),wt("ngIf",!t.isVideoMuted),Et(1),wt("ngIf",t.isVideoMuted),Et(1),ur("tinyViewUsernameContainer",r.isTinyView),Et(1),qs(" ",t.userName," "),Et(1),wt("ngIf",!t.isMyStream&&r.mouseHoverFeedId===t.feedId)}}function IV(n,e){if(1&n){const t=ei();yt(0,"div",8)(1,"div",9),Xt("click",function(){return Sn(t),Lt().changePage(1)}),yt(2,"mat-icon"),Cn(3,"arrow_right"),At()()()}}let Jg=(()=>{class n{constructor(t){this.janusService=t,this.pageinatedStreams=[],this._cameraStreams=[],this.skipAnimations=!1,this.allowNavigation=!0,this.isTinyView=!1,this.width=0,this.height=0,this.ratios=["4:3","16:9","1:1","1:2"],this.aspect=1,this.margin=5,this.cameras=15,this.ratio=this.calculateRatio(),this.maximumAmountOfCamsPerPage=6,this.currentPage=0,this.mouseHoverFeedId=""}set cameraStreams(t){let r=!1;t&&t.length!==this._cameraStreams.length&&(r=!0),this.skipAnimations&&(t=t.map(i=>Object.assign(Object.assign({},i),{firstRenderFinished:!0,loadingFinished:!0}))),this._cameraStreams=t,this.pageinatedStreams=this._cameraStreams.sort().slice(this.currentPage*this.maximumAmountOfCamsPerPage,this.currentPage*this.maximumAmountOfCamsPerPage+this.maximumAmountOfCamsPerPage),this.dish&&r&&(this.render(),this.resize())}ngOnInit(){}ngAfterViewInit(){this.render(),this.resize()}ngAfterContentChecked(){this.dish&&(this.render(),this.resize())}onResize(t){this.render(),this.resize()}changePage(t){this.pageinatedStreams.forEach(i=>i.firstRenderFinished=!0);const r=this.currentPage+t;r>=0&&r<=this._cameraStreams.length/this.maximumAmountOfCamsPerPage&&(this.currentPage=r,this.pageinatedStreams=this._cameraStreams.sort().slice(this.currentPage*this.maximumAmountOfCamsPerPage,this.currentPage*this.maximumAmountOfCamsPerPage+this.maximumAmountOfCamsPerPage))}calculateDimensions(){this.width=this.dish.nativeElement.offsetWidth-2*this.margin,this.height=this.dish.nativeElement.offsetHeight-2*this.margin}render(){}resize(){this.calculateDimensions();let t=0,r=0;for(;r<5e3;){if(!1===this.area(r)){t=r-1;break}r++}t-=2*this.margin,this.resizer(t)}resizer(t){for(var r=0;r<this.dish.nativeElement.children.length;r++){let i=this.dish.nativeElement.children[r];i.style.margin=this.margin+"px",i.style.width=t+"px",i.style.height=t*this.ratio+"px"}}calculateRatio(){const t=this.ratios[this.aspect].split(":");return Number.parseInt(t[1])/Number.parseInt(t[0])}area(t){let r=0,i=0,s=t*this.ratio+2*this.margin;for(;r<this.dish.nativeElement.children.length;)i+t>this.width&&(i=0,s=s+t*this.ratio+2*this.margin),i=i+t+2*this.margin,r++;return!(s>this.height||t>this.width)&&t}add(){this.cameras++,this.render(),this.resize()}delete(){this.cameras--,this.render(),this.resize()}getRatios(){return this.ratios}getCameras(){return this.cameras}setAspect(t){this.aspect=t,this.ratio=this.calculateRatio(),this.resize()}expand(){let t=this.conferenceView.nativeElement.querySelector(".Screen");if(t)this.conferenceView.nativeElement.removeChild(t);else{let r=document.createElement("div");r.classList.add("Screen"),this.conferenceView.nativeElement.prepend(r)}this.resize()}muteAudioForFeedId(t){this.janusService.muteRemoteAudioLocallyForFeedId(t)}}return n.\u0275fac=function(t){return new(t||n)(vt(Ca))},n.\u0275cmp=On({type:n,selectors:[["app-gallery-view"]],viewQuery:function(t,r){if(1&t&&(ir(EV,5),ir(wV,5),ir(AV,5)),2&t){let i;zn(i=Gn())&&(r.renderSpace=i.first),zn(i=Gn())&&(r.conferenceView=i.first),zn(i=Gn())&&(r.dish=i.first)}},hostBindings:function(t,r){1&t&&Xt("resize",function(s){return r.onResize(s)},!1,wy)},inputs:{cameraStreams:"cameraStreams",skipAnimations:"skipAnimations",allowNavigation:"allowNavigation",isTinyView:"isTinyView"},decls:9,vars:3,consts:[[1,"renderSpace"],["renderSpace",""],[1,"conferenceView"],["conferenceView",""],["class","buttonContainer",4,"ngIf"],[1,"dish"],["dish",""],[3,"isTalking","screenshareNoCrop","animatedDiv","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"buttonContainer"],[1,"button",3,"click"],[3,"mouseover","mouseleave"],["autoplay","","playsinline","",3,"animatedVideo","loading","srcObject","screenshareNoCrop","loadedmetadata",4,"ngIf"],["class","videoUnavailable",4,"ngIf"],[1,"usernameContainer","notextselection"],["class","controlButtons",4,"ngIf"],["autoplay","","playsinline","",3,"srcObject","loadedmetadata"],[1,"videoUnavailable"],[1,"controlButtons"]],template:function(t,r){1&t&&(yt(0,"div",0,1)(2,"div",2,3),sn(4,TV,4,0,"div",4),yt(5,"div",5,6),sn(7,PV,6,12,"div",7),At(),sn(8,IV,4,0,"div",4),At()()),2&t&&(Et(4),wt("ngIf",r.allowNavigation&&r._cameraStreams.length>r.maximumAmountOfCamsPerPage),Et(3),wt("ngForOf",r.pageinatedStreams),Et(1),wt("ngIf",r.allowNavigation&&r._cameraStreams.length>r.maximumAmountOfCamsPerPage))},directives:[ns,Dd,Al],styles:['[_nghost-%COMP%]{display:flex;flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}mat-icon[_ngcontent-%COMP%]{font-size:5vw;width:5vw;height:5vw;margin:0;color:#fff}.tinyView[_ngcontent-%COMP%]{font-size:1.5vw!important;width:1.5vw!important;height:1.5vw!important}.button[_ngcontent-%COMP%]:hover{background-color:#555}.renderSpace[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.conferenceView[_ngcontent-%COMP%]{display:flex;flex:1;max-height:100%;max-width:100%}.dish[_ngcontent-%COMP%]{overflow:hidden;display:flex;align-content:center;flex-wrap:wrap;align-items:center;justify-content:center;vertical-align:middle;flex:1}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;vertical-align:middle;align-self:center;border-radius:10px;overflow:hidden;display:inline-block;box-shadow:var(--shadow-dark);border:2px solid transparent}.animatedDiv[_ngcontent-%COMP%]{animation:show .4s ease}.animatedVideo[_ngcontent-%COMP%]{transition:margin-top .4s ease-in-out}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .videoUnavailable[_ngcontent-%COMP%]{position:absolute;object-fit:cover;width:100%;height:100%;background:transparent;border-radius:10px;inset:0;background-size:cover;overflow:hidden}.videoUnavailable[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#666}.isTalking[_ngcontent-%COMP%]{border-color:#7cfc00!important}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   video.loading[_ngcontent-%COMP%]{margin-top:100%}.usernameContainer[_ngcontent-%COMP%]{color:#aaa;font-size:1em;font-family:Arial,Helvetica,sans-serif;position:absolute;left:1%;bottom:1%;font-weight:100;display:block;background:rgba(0,0,0,.6);padding:.75em;border-radius:.75em}.tinyViewUsernameContainer[_ngcontent-%COMP%]{font-size:.45vw!important;background:rgba(0,0,0,.6);padding:.35em;border-radius:.45em}.controlButtons[_ngcontent-%COMP%]{position:absolute;left:1%;display:flex;flex-direction:column;top:50%;transform:translateY(-50%)}.dish[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{position:absolute;height:100%;background-size:100% 100%;width:100%;opacity:.3;font-weight:100;content:"";display:block}.screen[_ngcontent-%COMP%]{flex:2;background:#000;opacity:.8;border-radius:10px}@keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}.button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:5vw;width:100%;margin-left:.5em;margin-right:.5em}.red[_ngcontent-%COMP%]{color:red}.screenshareNoCrop[_ngcontent-%COMP%]{object-fit:contain!important;background:#252525}']}),n})();function RV(n,e){if(1&n&&(yt(0,"div",4),ln(1,"div",5),yt(2,"div",6),ln(3,"app-gallery-view",7),At()()),2&n){const t=Lt();Et(3),wt("isTinyView",!0)("skipAnimations",!0)("allowNavigation",!0)("cameraStreams",t.nonTalkingFeedStreams)}}const OV=function(n){return[n]};let kV=(()=>{class n{constructor(t){this.janusService=t,this.talkingFeedId=""}set cameraStreams(t){var r;const i=(null===(r=this._cameraStreams)||void 0===r?void 0:r.length)||-1;this._cameraStreams=t,i!==t.length&&this.refreshViews(this.janusService.talkingFeeds)}ngOnInit(){}ngAfterContentInit(){!this.talkingFeedId&&!this.talkingFeedStream&&this._cameraStreams.length>0&&(this.talkingFeedId=this._cameraStreams[0].feedId,this.talkingFeedStream=this._cameraStreams[0],this.nonTalkingFeedStreams=this.nonTalkingFeeds),this.janusService.talkingFeedsSubject.subscribe(t=>{this.refreshViews(t)})}refreshViews(t){const r=Object.keys(t).filter(s=>t[s])[0],i=this._cameraStreams.find(s=>!0===s.isScreenshare);if(console.log(t),this.janusService.screensharingIsActive&&i)this.talkingFeedId=i.feedId,this.talkingFeedStream=i,this.nonTalkingFeedStreams=this.nonTalkingFeeds;else if(1===this._cameraStreams.length&&(this.talkingFeedId=this._cameraStreams[0].feedId),r&&""!=r&&this.talkingFeedId!==r){this.talkingFeedId=r,console.log("(Speaker View) Active speaker changed: ",this.talkingFeedId);const s=this.talkingFeed;s&&(this.talkingFeedStream=s),this.nonTalkingFeedStreams=this.nonTalkingFeeds,console.log("Non talking feed streams: ",this.nonTalkingFeedStreams)}else{const s=this._cameraStreams.find(o=>!o.isScreenshare);s&&(this.talkingFeedId=s.feedId,this.talkingFeedStream=s,this.nonTalkingFeedStreams=this.nonTalkingFeeds)}}get talkingFeed(){return this._cameraStreams.find(t=>t.feedId==this.talkingFeedId)}get nonTalkingFeeds(){return this._cameraStreams.filter(t=>t.feedId!=this.talkingFeedId)}}return n.\u0275fac=function(t){return new(t||n)(vt(Ca))},n.\u0275cmp=On({type:n,selectors:[["app-speaker-view"]],inputs:{cameraStreams:"cameraStreams"},decls:4,vars:6,consts:[[1,"conferenceContainer"],["class","topBar",4,"ngIf"],[1,"speakerContainer"],[3,"skipAnimations","allowNavigation","cameraStreams"],[1,"topBar"],[1,"me"],[1,"attendants"],[3,"isTinyView","skipAnimations","allowNavigation","cameraStreams"]],template:function(t,r){1&t&&(yt(0,"div",0),sn(1,RV,4,4,"div",1),yt(2,"div",2),ln(3,"app-gallery-view",3),At()()),2&t&&(Et(1),wt("ngIf",r._cameraStreams.length>1),Et(2),wt("skipAnimations",!0)("allowNavigation",!1)("cameraStreams",vl(4,OV,r.talkingFeedStream)))},directives:[ns,Jg],styles:["[_nghost-%COMP%]{display:flex;flex:1}.conferenceContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{display:flex;max-height:10vh;margin-bottom:.75em}.attendants[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;min-height:12vh}.attendantStreams[_ngcontent-%COMP%]{flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}mat-icon[_ngcontent-%COMP%]{color:#fff}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}.button[_ngcontent-%COMP%]:hover{background-color:#555}.attendantStreams[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;max-height:100%;max-width:95%}.speakerContainer[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.attendantStreamContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:100%;aspect-ratio:4/3;padding-right:1em}.attendantStreamContainer[_ngcontent-%COMP%]:first-of-type   [_ngcontent-%COMP%]:last-of-type{padding:0}video[_ngcontent-%COMP%]{background:transparent;border-radius:10px;overflow:hidden}"]}),n})();const FV=["*"];let LV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["app-menubar"]],ngContentSelectors:FV,decls:1,vars:0,template:function(t,r){1&t&&(cl(),ia(0))},styles:["[_nghost-%COMP%]{background:#151515;display:grid;grid-auto-flow:column;grid-auto-columns:minmax(0,1fr);grid-column-gap:10%}[_nghost-%COMP%]     app-menubar-buttongroup:last-of-type{justify-content:flex-end!important}[_nghost-%COMP%]     app-menubar-buttongroup:first-of-type{justify-content:flex-start!important}"]}),n})();const NV=["*"];let BV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["app-menubar-buttongroup"]],ngContentSelectors:NV,decls:1,vars:0,template:function(t,r){1&t&&(cl(),ia(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;justify-content:center}"]}),n})();var Jl="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,jV=function(){for(var n=["Edge","Trident","Firefox"],e=0;e<n.length;e+=1)if(Jl&&navigator.userAgent.indexOf(n[e])>=0)return 1;return 0}(),$V=Jl&&window.Promise?function VV(n){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,n()}))}}:function HV(n){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,n()},jV))}};function Kw(n){return n&&"[object Function]"==={}.toString.call(n)}function ho(n,e){if(1!==n.nodeType)return[];var r=n.ownerDocument.defaultView.getComputedStyle(n,null);return e?r[e]:r}function Zg(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function Zl(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}var e=ho(n);return/(auto|scroll|overlay)/.test(e.overflow+e.overflowY+e.overflowX)?n:Zl(Zg(n))}function Yw(n){return n&&n.referenceNode?n.referenceNode:n}var Jw=Jl&&!(!window.MSInputMethodContext||!document.documentMode),Zw=Jl&&/MSIE 10/.test(navigator.userAgent);function wa(n){return 11===n?Jw:10===n?Zw:Jw||Zw}function Aa(n){if(!n)return document.documentElement;for(var e=wa(10)?document.body:null,t=n.offsetParent||null;t===e&&n.nextElementSibling;)t=(n=n.nextElementSibling).offsetParent;var r=t&&t.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===ho(t,"position")?Aa(t):t:n?n.ownerDocument.documentElement:document.documentElement}function Qg(n){return null!==n.parentNode?Qg(n.parentNode):n}function xd(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;var t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,s=document.createRange();s.setStart(r,0),s.setEnd(i,0);var o=s.commonAncestorContainer;if(n!==o&&e!==o||r.contains(i))return function zV(n){var e=n.nodeName;return"BODY"!==e&&("HTML"===e||Aa(n.firstElementChild)===n)}(o)?o:Aa(o);var a=Qg(n);return a.host?xd(a.host,e):xd(n,Qg(e).host)}function Ta(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){var i=n.ownerDocument.documentElement,s=n.ownerDocument.scrollingElement||i;return s[t]}return n[t]}function GV(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ta(e,"top"),i=Ta(e,"left"),s=t?-1:1;return n.top+=r*s,n.bottom+=r*s,n.left+=i*s,n.right+=i*s,n}function Qw(n,e){var t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n["border"+t+"Width"])+parseFloat(n["border"+r+"Width"])}function eA(n,e,t,r){return Math.max(e["offset"+n],e["scroll"+n],t["client"+n],t["offset"+n],t["scroll"+n],wa(10)?parseInt(t["offset"+n])+parseInt(r["margin"+("Height"===n?"Top":"Left")])+parseInt(r["margin"+("Height"===n?"Bottom":"Right")]):0)}function tA(n){var e=n.body,t=n.documentElement,r=wa(10)&&getComputedStyle(t);return{height:eA("Height",e,t,r),width:eA("Width",e,t,r)}}var WV=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},qV=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Da=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},ai=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function Ms(n){return ai({},n,{right:n.left+n.width,bottom:n.top+n.height})}function em(n){var e={};try{if(wa(10)){e=n.getBoundingClientRect();var t=Ta(n,"top"),r=Ta(n,"left");e.top+=t,e.left+=r,e.bottom+=t,e.right+=r}else e=n.getBoundingClientRect()}catch(v){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},s="HTML"===n.nodeName?tA(n.ownerDocument):{},l=n.offsetWidth-(s.width||n.clientWidth||i.width),c=n.offsetHeight-(s.height||n.clientHeight||i.height);if(l||c){var p=ho(n);l-=Qw(p,"x"),c-=Qw(p,"y"),i.width-=l,i.height-=c}return Ms(i)}function tm(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=wa(10),i="HTML"===e.nodeName,s=em(n),o=em(e),a=Zl(n),l=ho(e),c=parseFloat(l.borderTopWidth),p=parseFloat(l.borderLeftWidth);t&&i&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var v=Ms({top:s.top-o.top-c,left:s.left-o.left-p,width:s.width,height:s.height});if(v.marginTop=0,v.marginLeft=0,!r&&i){var k=parseFloat(l.marginTop),$=parseFloat(l.marginLeft);v.top-=c-k,v.bottom-=c-k,v.left-=p-$,v.right-=p-$,v.marginTop=k,v.marginLeft=$}return(r&&!t?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(v=GV(v,e)),v}function XV(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n.ownerDocument.documentElement,r=tm(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),s=Math.max(t.clientHeight,window.innerHeight||0),o=e?0:Ta(t),a=e?0:Ta(t,"left"),l={top:o-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:i,height:s};return Ms(l)}function nA(n){var e=n.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===ho(n,"position"))return!0;var t=Zg(n);return!!t&&nA(t)}function rA(n){if(!n||!n.parentElement||wa())return document.documentElement;for(var e=n.parentElement;e&&"none"===ho(e,"transform");)e=e.parentElement;return e||document.documentElement}function nm(n,e,t,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},o=i?rA(n):xd(n,Yw(e));if("viewport"===r)s=XV(o,i);else{var a=void 0;"scrollParent"===r?"BODY"===(a=Zl(Zg(e))).nodeName&&(a=n.ownerDocument.documentElement):a="window"===r?n.ownerDocument.documentElement:r;var l=tm(a,o,i);if("HTML"!==a.nodeName||nA(o))s=l;else{var c=tA(n.ownerDocument),p=c.height,v=c.width;s.top+=l.top-l.marginTop,s.bottom=p+l.top,s.left+=l.left-l.marginLeft,s.right=v+l.left}}var k="number"==typeof(t=t||0);return s.left+=k?t:t.left||0,s.top+=k?t:t.top||0,s.right-=k?t:t.right||0,s.bottom-=k?t:t.bottom||0,s}function KV(n){return n.width*n.height}function iA(n,e,t,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===n.indexOf("auto"))return n;var o=nm(t,r,s,i),a={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},l=Object.keys(a).map(function(k){return ai({key:k},a[k],{area:KV(a[k])})}).sort(function(k,$){return $.area-k.area}),c=l.filter(function(k){return k.width>=t.clientWidth&&k.height>=t.clientHeight}),p=c.length>0?c[0].key:l[0].key,v=n.split("-")[1];return p+(v?"-"+v:"")}function sA(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?rA(e):xd(e,Yw(t));return tm(t,i,r)}function oA(n){var t=n.ownerDocument.defaultView.getComputedStyle(n),r=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:n.offsetWidth+i,height:n.offsetHeight+r}}function Md(n){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,function(t){return e[t]})}function aA(n,e,t){t=t.split("-")[0];var r=oA(n),i={width:r.width,height:r.height},s=-1!==["right","left"].indexOf(t),o=s?"top":"left",a=s?"left":"top",l=s?"height":"width",c=s?"width":"height";return i[o]=e[o]+e[l]/2-r[l]/2,i[a]=t===a?e[a]-r[c]:e[Md(a)],i}function Ql(n,e){return Array.prototype.find?n.find(e):n.filter(e)[0]}function lA(n,e,t){var r=void 0===t?n:n.slice(0,function YV(n,e,t){if(Array.prototype.findIndex)return n.findIndex(function(i){return i[e]===t});var r=Ql(n,function(i){return i[e]===t});return n.indexOf(r)}(n,"name",t));return r.forEach(function(i){i.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var s=i.function||i.fn;i.enabled&&Kw(s)&&(e.offsets.popper=Ms(e.offsets.popper),e.offsets.reference=Ms(e.offsets.reference),e=s(e,i))}),e}function JV(){if(!this.state.isDestroyed){var n={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};n.offsets.reference=sA(this.state,this.popper,this.reference,this.options.positionFixed),n.placement=iA(this.options.placement,n.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),n.originalPlacement=n.placement,n.positionFixed=this.options.positionFixed,n.offsets.popper=aA(this.popper,n.offsets.reference,n.placement),n.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",n=lA(this.modifiers,n),this.state.isCreated?this.options.onUpdate(n):(this.state.isCreated=!0,this.options.onCreate(n))}}function cA(n,e){return n.some(function(t){return t.enabled&&t.name===e})}function rm(n){for(var e=[!1,"ms","Webkit","Moz","O"],t=n.charAt(0).toUpperCase()+n.slice(1),r=0;r<e.length;r++){var i=e[r],s=i?""+i+t:n;if(void 0!==document.body.style[s])return s}return null}function ZV(){return this.state.isDestroyed=!0,cA(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[rm("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function uA(n){var e=n.ownerDocument;return e?e.defaultView:window}function dA(n,e,t,r){var i="BODY"===n.nodeName,s=i?n.ownerDocument.defaultView:n;s.addEventListener(e,t,{passive:!0}),i||dA(Zl(s.parentNode),e,t,r),r.push(s)}function QV(n,e,t,r){t.updateBound=r,uA(n).addEventListener("resize",t.updateBound,{passive:!0});var i=Zl(n);return dA(i,"scroll",t.updateBound,t.scrollParents),t.scrollElement=i,t.eventsEnabled=!0,t}function eH(){this.state.eventsEnabled||(this.state=QV(this.reference,0,this.state,this.scheduleUpdate))}function nH(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function tH(n,e){return uA(n).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function im(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}function sm(n,e){Object.keys(e).forEach(function(t){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&im(e[t])&&(r="px"),n.style[t]=e[t]+r})}var aH=Jl&&/Firefox/i.test(navigator.userAgent);function hA(n,e,t){var r=Ql(n,function(a){return a.name===e}),i=!!r&&n.some(function(a){return a.name===t&&a.enabled&&a.order<r.order});if(!i){var s="`"+e+"`";console.warn("`"+t+"` modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return i}var fA=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],om=fA.slice(3);function pA(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=om.indexOf(n),r=om.slice(t+1).concat(om.slice(0,t));return e?r.reverse():r}var SH={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function vH(n){var e=n.placement,t=e.split("-")[0],r=e.split("-")[1];if(r){var i=n.offsets,s=i.reference,o=i.popper,a=-1!==["bottom","top"].indexOf(t),l=a?"left":"top",c=a?"width":"height",p={start:Da({},l,s[l]),end:Da({},l,s[l]+s[c]-o[c])};n.offsets.popper=ai({},o,p[r])}return n}},offset:{order:200,enabled:!0,fn:function gH(n,e){var l,t=e.offset,i=n.offsets,s=i.popper,o=i.reference,a=n.placement.split("-")[0];return l=im(+t)?[+t,0]:function pH(n,e,t,r){var i=[0,0],s=-1!==["right","left"].indexOf(r),o=n.split(/(\+|\-)/).map(function(p){return p.trim()}),a=o.indexOf(Ql(o,function(p){return-1!==p.search(/,|\s/)}));o[a]&&-1===o[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[o.slice(0,a).concat([o[a].split(l)[0]]),[o[a].split(l)[1]].concat(o.slice(a+1))]:[o];return c=c.map(function(p,v){var k=(1===v?!s:s)?"height":"width",$=!1;return p.reduce(function(he,je){return""===he[he.length-1]&&-1!==["+","-"].indexOf(je)?(he[he.length-1]=je,$=!0,he):$?(he[he.length-1]+=je,$=!1,he):he.concat(je)},[]).map(function(he){return function fH(n,e,t,r){var i=n.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+i[1],o=i[2];return s?0===o.indexOf("%")?Ms("%p"===o?t:r)[e]/100*s:"vh"===o||"vw"===o?("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s:s:n}(he,k,e,t)})}),c.forEach(function(p,v){p.forEach(function(k,$){im(k)&&(i[v]+=k*("-"===p[$-1]?-1:1))})}),i}(t,s,o,a),"left"===a?(s.top+=l[0],s.left-=l[1]):"right"===a?(s.top+=l[0],s.left+=l[1]):"top"===a?(s.left+=l[0],s.top-=l[1]):"bottom"===a&&(s.left+=l[0],s.top+=l[1]),n.popper=s,n},offset:0},preventOverflow:{order:300,enabled:!0,fn:function mH(n,e){var t=e.boundariesElement||Aa(n.instance.popper);n.instance.reference===t&&(t=Aa(t));var r=rm("transform"),i=n.instance.popper.style,s=i.top,o=i.left,a=i[r];i.top="",i.left="",i[r]="";var l=nm(n.instance.popper,n.instance.reference,e.padding,t,n.positionFixed);i.top=s,i.left=o,i[r]=a,e.boundaries=l;var p=n.offsets.popper,v={primary:function($){var he=p[$];return p[$]<l[$]&&!e.escapeWithReference&&(he=Math.max(p[$],l[$])),Da({},$,he)},secondary:function($){var he="right"===$?"left":"top",je=p[he];return p[$]>l[$]&&!e.escapeWithReference&&(je=Math.min(p[he],l[$]-("right"===$?p.width:p.height))),Da({},he,je)}};return e.priority.forEach(function(k){var $=-1!==["left","top"].indexOf(k)?"primary":"secondary";p=ai({},p,v[$](k))}),n.offsets.popper=p,n},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function hH(n){var e=n.offsets,t=e.popper,r=e.reference,i=n.placement.split("-")[0],s=Math.floor,o=-1!==["top","bottom"].indexOf(i),a=o?"right":"bottom",l=o?"left":"top",c=o?"width":"height";return t[a]<s(r[l])&&(n.offsets.popper[l]=s(r[l])-t[c]),t[l]>s(r[a])&&(n.offsets.popper[l]=s(r[a])),n}},arrow:{order:500,enabled:!0,fn:function cH(n,e){var t;if(!hA(n.instance.modifiers,"arrow","keepTogether"))return n;var r=e.element;if("string"==typeof r){if(!(r=n.instance.popper.querySelector(r)))return n}else if(!n.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),n;var i=n.placement.split("-")[0],s=n.offsets,o=s.popper,a=s.reference,l=-1!==["left","right"].indexOf(i),c=l?"height":"width",p=l?"Top":"Left",v=p.toLowerCase(),k=l?"left":"top",$=l?"bottom":"right",he=oA(r)[c];a[$]-he<o[v]&&(n.offsets.popper[v]-=o[v]-(a[$]-he)),a[v]+he>o[$]&&(n.offsets.popper[v]+=a[v]+he-o[$]),n.offsets.popper=Ms(n.offsets.popper);var je=a[v]+a[c]/2-he/2,st=ho(n.instance.popper),rt=parseFloat(st["margin"+p]),Le=parseFloat(st["border"+p+"Width"]),Ge=je-n.offsets.popper[v]-rt-Le;return Ge=Math.max(Math.min(o[c]-he,Ge),0),n.arrowElement=r,n.offsets.arrow=(Da(t={},v,Math.round(Ge)),Da(t,k,""),t),n},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function dH(n,e){if(cA(n.instance.modifiers,"inner")||n.flipped&&n.placement===n.originalPlacement)return n;var t=nm(n.instance.popper,n.instance.reference,e.padding,e.boundariesElement,n.positionFixed),r=n.placement.split("-")[0],i=Md(r),s=n.placement.split("-")[1]||"",o=[];switch(e.behavior){case"flip":o=[r,i];break;case"clockwise":o=pA(r);break;case"counterclockwise":o=pA(r,!0);break;default:o=e.behavior}return o.forEach(function(a,l){if(r!==a||o.length===l+1)return n;r=n.placement.split("-")[0],i=Md(r);var c=n.offsets.popper,p=n.offsets.reference,v=Math.floor,k="left"===r&&v(c.right)>v(p.left)||"right"===r&&v(c.left)<v(p.right)||"top"===r&&v(c.bottom)>v(p.top)||"bottom"===r&&v(c.top)<v(p.bottom),$=v(c.left)<v(t.left),he=v(c.right)>v(t.right),je=v(c.top)<v(t.top),st=v(c.bottom)>v(t.bottom),rt="left"===r&&$||"right"===r&&he||"top"===r&&je||"bottom"===r&&st,Le=-1!==["top","bottom"].indexOf(r),Ot=!!e.flipVariations&&(Le&&"start"===s&&$||Le&&"end"===s&&he||!Le&&"start"===s&&je||!Le&&"end"===s&&st)||!!e.flipVariationsByContent&&(Le&&"start"===s&&he||Le&&"end"===s&&$||!Le&&"start"===s&&st||!Le&&"end"===s&&je);(k||rt||Ot)&&(n.flipped=!0,(k||rt)&&(r=o[l+1]),Ot&&(s=function uH(n){return"end"===n?"start":"start"===n?"end":n}(s)),n.placement=r+(s?"-"+s:""),n.offsets.popper=ai({},n.offsets.popper,aA(n.instance.popper,n.offsets.reference,n.placement)),n=lA(n.instance.modifiers,n,"flip"))}),n},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function _H(n){var e=n.placement,t=e.split("-")[0],r=n.offsets,i=r.popper,s=r.reference,o=-1!==["left","right"].indexOf(t),a=-1===["top","left"].indexOf(t);return i[o?"left":"top"]=s[t]-(a?i[o?"width":"height"]:0),n.placement=Md(e),n.offsets.popper=Ms(i),n}},hide:{order:800,enabled:!0,fn:function yH(n){if(!hA(n.instance.modifiers,"hide","preventOverflow"))return n;var e=n.offsets.reference,t=Ql(n.instance.modifiers,function(r){return"preventOverflow"===r.name}).boundaries;if(e.bottom<t.top||e.left>t.right||e.top>t.bottom||e.right<t.left){if(!0===n.hide)return n;n.hide=!0,n.attributes["x-out-of-boundaries"]=""}else{if(!1===n.hide)return n;n.hide=!1,n.attributes["x-out-of-boundaries"]=!1}return n}},computeStyle:{order:850,enabled:!0,fn:function lH(n,e){var t=e.x,r=e.y,i=n.offsets.popper,s=Ql(n.instance.modifiers,function(Ge){return"applyStyle"===Ge.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var he,je,o=void 0!==s?s:e.gpuAcceleration,a=Aa(n.instance.popper),l=em(a),c={position:i.position},p=function oH(n,e){var t=n.offsets,r=t.popper,s=Math.round,o=Math.floor,a=function(rt){return rt},l=s(t.reference.width),c=s(r.width),p=-1!==["left","right"].indexOf(n.placement),v=-1!==n.placement.indexOf("-"),he=e?p||v||l%2==c%2?s:o:a,je=e?s:a;return{left:he(l%2==1&&c%2==1&&!v&&e?r.left-1:r.left),top:je(r.top),bottom:je(r.bottom),right:he(r.right)}}(n,window.devicePixelRatio<2||!aH),v="bottom"===t?"top":"bottom",k="right"===r?"left":"right",$=rm("transform");if(je="bottom"===v?"HTML"===a.nodeName?-a.clientHeight+p.bottom:-l.height+p.bottom:p.top,he="right"===k?"HTML"===a.nodeName?-a.clientWidth+p.right:-l.width+p.right:p.left,o&&$)c[$]="translate3d("+he+"px, "+je+"px, 0)",c[v]=0,c[k]=0,c.willChange="transform";else{var rt="right"===k?-1:1;c[v]=je*("bottom"===v?-1:1),c[k]=he*rt,c.willChange=v+", "+k}return n.attributes=ai({},{"x-placement":n.placement},n.attributes),n.styles=ai({},c,n.styles),n.arrowStyles=ai({},n.offsets.arrow,n.arrowStyles),n},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function iH(n){return sm(n.instance.popper,n.styles),function rH(n,e){Object.keys(e).forEach(function(t){!1!==e[t]?n.setAttribute(t,e[t]):n.removeAttribute(t)})}(n.instance.popper,n.attributes),n.arrowElement&&Object.keys(n.arrowStyles).length&&sm(n.arrowElement,n.arrowStyles),n},onLoad:function sH(n,e,t,r,i){var s=sA(i,e,n,t.positionFixed),o=iA(t.placement,s,e,n,t.modifiers.flip.boundariesElement,t.modifiers.flip.padding);return e.setAttribute("x-placement",o),sm(e,{position:t.positionFixed?"fixed":"absolute"}),t},gpuAcceleration:void 0}}},Pd=function(){function n(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};WV(this,n),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=$V(this.update.bind(this)),this.options=ai({},n.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(ai({},n.Defaults.modifiers,i.modifiers)).forEach(function(o){r.options.modifiers[o]=ai({},n.Defaults.modifiers[o]||{},i.modifiers?i.modifiers[o]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(o){return ai({name:o},r.options.modifiers[o])}).sort(function(o,a){return o.order-a.order}),this.modifiers.forEach(function(o){o.enabled&&Kw(o.onLoad)&&o.onLoad(r.reference,r.popper,r.options,o,r.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return qV(n,[{key:"update",value:function(){return JV.call(this)}},{key:"destroy",value:function(){return ZV.call(this)}},{key:"enableEventListeners",value:function(){return eH.call(this)}},{key:"disableEventListeners",value:function(){return nH.call(this)}}]),n}();Pd.Utils=("undefined"!=typeof window?window:global).PopperUtils,Pd.placements=fA,Pd.Defaults=SH;const CH=Pd;function xr(){return xr=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xr.apply(this,arguments)}var ec="undefined"!=typeof window&&"undefined"!=typeof document,gA=ec?navigator.userAgent:"",mA=/MSIE |Trident\//.test(gA),vA=/UCBrowser\//.test(gA),yA=ec&&/iPhone|iPad|iPod/.test(navigator.platform)&&!window.MSStream,Vi={a11y:!0,allowHTML:!0,animateFill:!0,animation:"shift-away",appendTo:function(){return document.body},aria:"describedby",arrow:!1,arrowType:"sharp",boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flip:!0,flipBehavior:"flip",flipOnUpdate:!1,followCursor:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,maxWidth:350,multiple:!1,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},placement:"top",popperOptions:{},role:"tooltip",showOnInit:!1,size:"regular",sticky:!1,target:"",theme:"dark",touch:!0,touchHold:!1,trigger:"mouseenter focus",triggerTarget:null,updateDuration:0,wait:null,zIndex:9999},AH=["arrow","arrowType","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"],tc=ec?Element.prototype:{},lm=tc.matches||tc.matchesSelector||tc.webkitMatchesSelector||tc.mozMatchesSelector||tc.msMatchesSelector;function nc(n){return[].slice.call(n)}function Id(n,e){return cm(n,function(t){return lm.call(t,e)})}function cm(n,e){for(;n;){if(e(n))return n;n=n.parentElement}return null}var um={passive:!0},hm="x-placement",fm="x-out-of-boundaries",_A="tippy-iOS",bA="tippy-active",SA="tippy-popper",CA="tippy-tooltip",EA="tippy-content",wA="tippy-backdrop",AA="tippy-arrow",TA="tippy-roundarrow",pm=".".concat(SA),TH=".".concat(CA),DH=".".concat(EA),xH=".".concat(wA),MH=".".concat(AA),PH=".".concat(TA),Ps=!1;function IH(){Ps||(Ps=!0,yA&&document.body.classList.add(_A),window.performance&&document.addEventListener("mousemove",xA))}var DA=0;function xA(){var n=performance.now();n-DA<20&&(Ps=!1,document.removeEventListener("mousemove",xA),yA||document.body.classList.remove(_A)),DA=n}function RH(){var e=document.activeElement;e&&e.blur&&e._tippy&&e.blur()}var kH=Object.keys(Vi);function BH(n){return!!n._tippy&&!lm.call(n,pm)}function Rd(n,e){return{}.hasOwnProperty.call(n,e)}function Od(n,e,t){if(Array.isArray(n)){var r=n[e];return null==r?t:r}return n}function MA(n,e){return 0===e?n:function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)};var t}function kd(n,e){return n&&n.modifiers&&n.modifiers[e]}function gm(n,e){return n.indexOf(e)>-1}function rc(n){return n instanceof Element}function PA(n){return!(!n||!Rd(n,"isVirtual"))||rc(n)}function mm(n,e){return"function"==typeof n?n.apply(null,e):n}function RA(n,e){n.filter(function(t){return"flip"===t.name})[0].enabled=e}function ic(){return document.createElement("div")}function sc(n,e){n.forEach(function(t){t&&(t.style.transitionDuration="".concat(e,"ms"))})}function OA(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function kA(n,e){var t=xr({},e,{content:mm(e.content,[n])},e.ignoreAttributes?{}:function FH(n){return kH.reduce(function(e,t){var r=(n.getAttribute("data-tippy-".concat(t))||"").trim();if(!r)return e;if("content"===t)e[t]=r;else try{e[t]=JSON.parse(r)}catch(i){e[t]=r}return e},{})}(n));return(t.arrow||vA)&&(t.animateFill=!1),t}function FA(n,e){Object.keys(n).forEach(function(t){if(!Rd(e,t))throw new Error("[tippy]: `".concat(t,"` is not a valid option"))})}function LA(n,e){n.innerHTML=rc(e)?e.innerHTML:e}function NA(n,e){rc(e.content)?(LA(n,""),n.appendChild(e.content)):"function"!=typeof e.content&&(n[e.allowHTML?"innerHTML":"textContent"]=e.content)}function vm(n){return{tooltip:n.querySelector(TH),backdrop:n.querySelector(xH),content:n.querySelector(DH),arrow:n.querySelector(MH)||n.querySelector(PH)}}function BA(n){n.setAttribute("data-inertia","")}function ym(n){var e=ic();return"round"===n?(e.className=TA,LA(e,'<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>')):e.className=AA,e}function jA(){var n=ic();return n.className=wA,n.setAttribute("data-state","hidden"),n}function VA(n,e){n.setAttribute("tabindex","-1"),e.setAttribute("data-interactive","")}function _m(n,e,t){var r=vA&&void 0!==document.body.style.webkitTransition?"webkitTransitionEnd":"transitionend";n[e+"EventListener"](r,t)}function bm(n){var e=n.getAttribute(hm);return e?e.split("-")[0]:""}function Sm(n,e,t){t.split(" ").forEach(function(r){n.classList[e](r+"-theme")})}var KH=1,Fd=[];function HA(n,e){var t=kA(n,e);if(!t.multiple&&n._tippy)return null;var r,i,s,o,a,p,$,he,st,l=!1,c=!1,v=!1,k=!1,je=[],rt=MA(Nd,t.interactiveDebounce),Le=KH++,Ge=function zH(n,e){var t=ic();t.className=SA,t.id="tippy-".concat(n),t.style.zIndex=""+e.zIndex,t.style.position="absolute",t.style.top="0",t.style.left="0",e.role&&t.setAttribute("role",e.role);var r=ic();r.className=CA,r.style.maxWidth=e.maxWidth+("number"==typeof e.maxWidth?"px":""),r.setAttribute("data-size",e.size),r.setAttribute("data-animation",e.animation),r.setAttribute("data-state","hidden"),Sm(r,"add",e.theme);var i=ic();return i.className=EA,i.setAttribute("data-state","hidden"),e.interactive&&VA(t,r),e.arrow&&r.appendChild(ym(e.arrowType)),e.animateFill&&(r.appendChild(jA()),r.setAttribute("data-animatefill","")),e.inertia&&BA(r),NA(i,e),r.appendChild(i),t.appendChild(r),t}(Le,t),gt=vm(Ge),Ye={id:Le,reference:n,popper:Ge,popperChildren:gt,popperInstance:null,props:t,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},clearDelayTimeouts:mo,set:hc,setContent:function jd(Y){hc({content:Y})},show:vo,hide:yo,enable:function Ia(){Ye.state.isEnabled=!0},disable:function $i(){Ye.state.isEnabled=!1},destroy:function se(Y){if(!Ye.state.isDestroyed){c=!0,Ye.state.isMounted&&yo(0),Ld(),delete n._tippy;var Ee=Ye.props.target;Ee&&Y&&rc(n)&&nc(n.querySelectorAll(Ee)).forEach(function(ne){ne._tippy&&ne._tippy.destroy()}),Ye.popperInstance&&Ye.popperInstance.destroy(),c=!1,Ye.state.isDestroyed=!0}}};return n._tippy=Ye,Ge._tippy=Ye,xa(),t.lazy||Fs(),t.showOnInit&&go(),t.a11y&&!t.target&&!function VH(n){return!rc(n)||lm.call(n,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!n.hasAttribute("disabled")}(xn())&&xn().setAttribute("tabindex","0"),Ge.addEventListener("mouseenter",function(Y){Ye.props.interactive&&Ye.state.isVisible&&"mouseenter"===r&&go(Y,!0)}),Ge.addEventListener("mouseleave",function(){Ye.props.interactive&&"mouseenter"===r&&document.addEventListener("mousemove",rt)}),Ye;function Zn(){document.removeEventListener("mousemove",us)}function Qn(){document.body.removeEventListener("mouseleave",Ui),document.removeEventListener("mousemove",rt),Fd=Fd.filter(function(Y){return Y!==rt})}function xn(){return Ye.props.triggerTarget||n}function pr(){document.addEventListener("click",ds,!0)}function Is(){document.removeEventListener("click",ds,!0)}function Rs(){return[Ye.popperChildren.tooltip,Ye.popperChildren.backdrop,Ye.popperChildren.content]}function cs(){var Y=Ye.props.followCursor;return Y&&"focus"!==r||Ps&&"initial"===Y}function Os(){sc([Ge],mA?0:Ye.props.updateDuration);var Y=n.getBoundingClientRect();!function Ee(){var ne=n.getBoundingClientRect();(Y.top!==ne.top||Y.right!==ne.right||Y.bottom!==ne.bottom||Y.left!==ne.left)&&Ye.popperInstance.scheduleUpdate(),Y=ne,Ye.state.isMounted&&requestAnimationFrame(Ee)}()}function ks(Y,Ee){ac(Y,function(){!Ye.state.isVisible&&Ge.parentNode&&Ge.parentNode.contains(Ge)&&Ee()})}function oc(Y,Ee){ac(Y,Ee)}function ac(Y,Ee){var ne=Ye.popperChildren.tooltip;function Ue(Ze){Ze.target===ne&&(_m(ne,"remove",Ue),Ee())}if(0===Y)return Ee();_m(ne,"remove",he),_m(ne,"add",Ue),he=Ue}function qr(Y,Ee){var ne=arguments.length>2&&void 0!==arguments[2]&&arguments[2];xn().addEventListener(Y,Ee,ne),je.push({eventType:Y,handler:Ee,options:ne})}function xa(){Ye.props.touchHold&&!Ye.props.target&&(qr("touchstart",cc,um),qr("touchend",Ma,um)),Ye.props.trigger.trim().split(" ").forEach(function(Y){if("manual"!==Y)if(Ye.props.target)switch(Y){case"mouseenter":qr("mouseover",po),qr("mouseout",Bd);break;case"focus":qr("focusin",po),qr("focusout",Bd);break;case"click":qr(Y,po)}else switch(qr(Y,cc),Y){case"mouseenter":qr("mouseleave",Ma);break;case"focus":qr(mA?"focusout":"blur",Em)}})}function Ld(){je.forEach(function(Y){var Ee=Y.eventType,ne=Y.handler,Ue=Y.options;xn().removeEventListener(Ee,ne,Ue)}),je=[]}function us(Y){var Ee=i=Y,ne=Ee.clientX,Ue=Ee.clientY;if(st){var Ze=cm(Y.target,function(gr){return gr===n}),$e=n.getBoundingClientRect(),ft=Ye.props.followCursor,at="horizontal"===ft,Ve="vertical"===ft,et=gm(["top","bottom"],bm(Ge)),mt=Ge.getAttribute(hm),Ut=!!mt&&!!mt.split("-")[1],en=et?Ge.offsetWidth:Ge.offsetHeight,li=en/2,pt=et?0:Ut?en:li,Jt=et?Ut?en:li:0;(Ze||!Ye.props.interactive)&&(Ye.popperInstance.reference=xr({},Ye.popperInstance.reference,{referenceNode:n,clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{width:et?en:0,height:et?0:en,top:(at?$e.top:Ue)-pt,bottom:(at?$e.bottom:Ue)+pt,left:(Ve?$e.left:ne)-Jt,right:(Ve?$e.right:ne)+Jt}}}),Ye.popperInstance.update()),"initial"===ft&&Ye.state.isVisible&&Zn()}}function cc(Y){!Ye.state.isEnabled||uc(Y)||(Ye.state.isVisible||(r=Y.type,Y instanceof MouseEvent&&(i=Y,Fd.forEach(function(Ee){return Ee(Y)}))),"click"===Y.type&&!1!==Ye.props.hideOnClick&&Ye.state.isVisible?Ui():go(Y))}function Nd(Y){var Ee=Id(Y.target,pm)===Ge,ne=cm(Y.target,function(Ue){return Ue===n});Ee||ne||function qH(n,e,t,r){if(!n)return!0;var i=t.clientX,s=t.clientY,o=r.interactiveBorder,a=r.distance;return e.top-s>("top"===n?o+a:o)||s-e.bottom>("bottom"===n?o+a:o)||e.left-i>("left"===n?o+a:o)||i-e.right>("right"===n?o+a:o)}(bm(Ge),Ge.getBoundingClientRect(),Y,Ye.props)&&(Qn(),Ui())}function Ma(Y){if(!uc(Y)){if(Ye.props.interactive)return document.body.addEventListener("mouseleave",Ui),document.addEventListener("mousemove",rt),void Fd.push(rt);Ui()}}function Em(Y){Y.target===xn()&&(Ye.props.interactive&&Y.relatedTarget&&Ge.contains(Y.relatedTarget)||Ui())}function po(Y){Id(Y.target,Ye.props.target)&&go(Y)}function Bd(Y){Id(Y.target,Ye.props.target)&&Ui()}function uc(Y){var Ee="ontouchstart"in window,ne=gm(Y.type,"touch"),Ue=Ye.props.touchHold;return Ee&&Ps&&Ue&&!ne||Ps&&!Ue&&ne}function Pa(){!k&&$&&(k=!0,$())}function Fs(){var Y=Ye.props.popperOptions,Ee=Ye.popperChildren,ne=Ee.tooltip,Ue=Ee.arrow,Ze=kd(Y,"preventOverflow");function $e(at){Ye.props.flip&&!Ye.props.flipOnUpdate&&(at.flipped&&(Ye.popperInstance.options.placement=at.placement),RA(Ye.popperInstance.modifiers,!1)),ne.setAttribute(hm,at.placement),!1!==at.attributes[fm]?ne.setAttribute(fm,""):ne.removeAttribute(fm),p&&p!==at.placement&&v&&(ne.style.transition="none",requestAnimationFrame(function(){ne.style.transition=""})),p=at.placement,v=Ye.state.isVisible;var Ve=bm(Ge),et=ne.style;et.top=et.bottom=et.left=et.right="",et[Ve]=function XH(n){return-(n-10)+"px"}(Ye.props.distance);var mt=Ze&&void 0!==Ze.padding?Ze.padding:4,Ut="number"==typeof mt,en=xr({top:Ut?mt:mt.top,bottom:Ut?mt:mt.bottom,left:Ut?mt:mt.left,right:Ut?mt:mt.right},!Ut&&mt);en[Ve]=Ut?mt+Ye.props.distance:(mt[Ve]||0)+Ye.props.distance,Ye.popperInstance.modifiers.filter(function(li){return"preventOverflow"===li.name})[0].padding=en,st=en}var ft=xr({eventsEnabled:!1,placement:Ye.props.placement},Y,{modifiers:xr({},Y?Y.modifiers:{},{preventOverflow:xr({boundariesElement:Ye.props.boundary,padding:4},Ze),arrow:xr({element:Ue,enabled:!!Ue},kd(Y,"arrow")),flip:xr({enabled:Ye.props.flip,padding:Ye.props.distance+4,behavior:Ye.props.flipBehavior},kd(Y,"flip")),offset:xr({offset:Ye.props.offset},kd(Y,"offset"))}),onCreate:function(Ve){$e(Ve),Pa(),Y&&Y.onCreate&&Y.onCreate(Ve)},onUpdate:function(Ve){$e(Ve),Pa(),Y&&Y.onUpdate&&Y.onUpdate(Ve)}});Ye.popperInstance=new CH(n,Ge,ft)}function dc(){k=!1;var Y=cs();Ye.popperInstance?(RA(Ye.popperInstance.modifiers,Ye.props.flip),Y||(Ye.popperInstance.reference=n,Ye.popperInstance.enableEventListeners()),Ye.popperInstance.scheduleUpdate()):(Fs(),Y||Ye.popperInstance.enableEventListeners());var Ee=Ye.props.appendTo,ne="parent"===Ee?n.parentNode:mm(Ee,[n]);ne.contains(Ge)||(ne.appendChild(Ge),Ye.props.onMount(Ye),Ye.state.isMounted=!0)}function go(Y,Ee){if(mo(),!Ye.state.isVisible){if(Ye.props.target)return function lc(Y){if(Y){var Ee=Id(Y.target,Ye.props.target);Ee&&!Ee._tippy&&HA(Ee,xr({},Ye.props,{content:mm(e.content,[Ee]),appendTo:e.appendTo,target:"",showOnInit:!0}))}}(Y);if(l=!0,Y&&!Ee&&Ye.props.onTrigger(Ye,Y),Ye.props.wait)return Ye.props.wait(Ye,Y);cs()&&!Ye.state.isMounted&&(Ye.popperInstance||Fs(),document.addEventListener("mousemove",us)),pr();var ne=Od(Ye.props.delay,0,Vi.delay);ne?s=setTimeout(function(){vo()},ne):vo()}}function Ui(){if(mo(),!Ye.state.isVisible)return Zn(),void Is();l=!1;var Y=Od(Ye.props.delay,1,Vi.delay);Y?o=setTimeout(function(){Ye.state.isVisible&&yo()},Y):a=requestAnimationFrame(function(){yo()})}function ds(Y){Ye.props.interactive&&Ge.contains(Y.target)||xn().contains(Y.target)&&(Ps||Ye.state.isVisible&&gm(Ye.props.trigger,"click"))||!0===Ye.props.hideOnClick&&(mo(),yo())}function mo(){clearTimeout(s),clearTimeout(o),cancelAnimationFrame(a)}function hc(Y){FA(Y=Y||{},Vi),Ld();var Ee=Ye.props,ne=kA(n,xr({},Ye.props,{},Y,{ignoreAttributes:!0}));ne.ignoreAttributes=Rd(Y,"ignoreAttributes")?Y.ignoreAttributes||!1:Ee.ignoreAttributes,Ye.props=ne,xa(),Qn(),rt=MA(Nd,ne.interactiveDebounce),function GH(n,e,t){var r=vm(n),i=r.tooltip,s=r.content,o=r.backdrop,a=r.arrow;n.style.zIndex=""+t.zIndex,i.setAttribute("data-size",t.size),i.setAttribute("data-animation",t.animation),i.style.maxWidth=t.maxWidth+("number"==typeof t.maxWidth?"px":""),t.role?n.setAttribute("role",t.role):n.removeAttribute("role"),e.content!==t.content&&NA(s,t),!e.animateFill&&t.animateFill?(i.appendChild(jA()),i.setAttribute("data-animatefill","")):e.animateFill&&!t.animateFill&&(i.removeChild(o),i.removeAttribute("data-animatefill")),!e.arrow&&t.arrow?i.appendChild(ym(t.arrowType)):e.arrow&&!t.arrow&&i.removeChild(a),e.arrow&&t.arrow&&e.arrowType!==t.arrowType&&i.replaceChild(ym(t.arrowType),a),!e.interactive&&t.interactive?VA(n,i):e.interactive&&!t.interactive&&function UH(n,e){n.removeAttribute("tabindex"),e.removeAttribute("data-interactive")}(n,i),!e.inertia&&t.inertia?BA(i):e.inertia&&!t.inertia&&function HH(n){n.removeAttribute("data-inertia")}(i),e.theme!==t.theme&&(Sm(i,"remove",e.theme),Sm(i,"add",t.theme))}(Ge,Ee,ne),Ye.popperChildren=vm(Ge),Ye.popperInstance&&(AH.some(function(Ue){return Rd(Y,Ue)&&Y[Ue]!==Ee[Ue]})?(Ye.popperInstance.destroy(),Fs(),Ye.state.isVisible&&Ye.popperInstance.enableEventListeners(),Ye.props.followCursor&&i&&us(i)):Ye.popperInstance.update())}function vo(){var Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Od(Ye.props.duration,0,Vi.duration[1]);if(!Ye.state.isDestroyed&&Ye.state.isEnabled&&(!Ps||Ye.props.touch)&&!xn().hasAttribute("disabled")&&!1!==Ye.props.onShow(Ye)){pr(),Ge.style.visibility="visible",Ye.state.isVisible=!0,Ye.props.interactive&&xn().classList.add(bA);var Ee=Rs();sc(Ee.concat(Ge),0),$=function(){if(Ye.state.isVisible){var Ue=cs();Ue&&i?us(i):Ue||Ye.popperInstance.update(),Ye.popperChildren.backdrop&&(Ye.popperChildren.content.style.transitionDelay=Math.round(Y/12)+"ms"),Ye.props.sticky&&Os(),sc([Ge],Ye.props.updateDuration),sc(Ee,Y),OA(Ee,"visible"),oc(Y,function(){Ye.props.aria&&xn().setAttribute("aria-".concat(Ye.props.aria),Ge.id),Ye.props.onShown(Ye),Ye.state.isShown=!0})}},dc()}}function yo(){var Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Od(Ye.props.duration,1,Vi.duration[1]);if(!Ye.state.isDestroyed&&(Ye.state.isEnabled||c)&&(!1!==Ye.props.onHide(Ye)||c)){Is(),Ge.style.visibility="hidden",Ye.state.isVisible=!1,Ye.state.isShown=!1,v=!1,Ye.props.interactive&&xn().classList.remove(bA);var Ee=Rs();sc(Ee,Y),OA(Ee,"hidden"),ks(Y,function(){l||Zn(),Ye.props.aria&&xn().removeAttribute("aria-".concat(Ye.props.aria)),Ye.popperInstance.disableEventListeners(),Ye.popperInstance.options.placement=Ye.props.placement,Ge.parentNode.removeChild(Ge),Ye.props.onHidden(Ye),Ye.state.isMounted=!1})}}}var UA=!1;function fo(n,e){FA(e||{},Vi),UA||(function OH(){document.addEventListener("touchstart",IH,um),window.addEventListener("blur",RH)}(),UA=!0);var t=xr({},Vi,{},e);(function NH(n){return"[object Object]"==={}.toString.call(n)&&!n.addEventListener})(n)&&function LH(n){var e={isVirtual:!0,attributes:n.attributes||{},contains:function(){},setAttribute:function(i,s){n.attributes[i]=s},getAttribute:function(i){return n.attributes[i]},removeAttribute:function(i){delete n.attributes[i]},hasAttribute:function(i){return i in n.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(i){n.classList.classNames[i]=!0},remove:function(i){delete n.classList.classNames[i]},contains:function(i){return i in n.classList.classNames}}};for(var t in e)n[t]=e[t]}(n);var r=function jH(n){if(PA(n))return[n];if(n instanceof NodeList)return nc(n);if(Array.isArray(n))return n;try{return nc(document.querySelectorAll(n))}catch(e){return[]}}(n).reduce(function(i,s){var o=s&&HA(s,t);return o&&i.push(o),i},[]);return PA(n)?r[0]:r}fo.version="4.3.5",fo.defaults=Vi,fo.setDefaults=function(n){Object.keys(n).forEach(function(e){Vi[e]=n[e]})},fo.hideAll=function WH(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.exclude,t=n.duration;nc(document.querySelectorAll(pm)).forEach(function(r){var i=r._tippy;if(i){var s=!1;e&&(s=BH(e)?i.reference===e:r===e.popper),s||i.hide(t)}})},fo.group=function YH(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.delay,r=void 0===t?n[0].props.delay:t,i=e.duration,s=void 0===i?0:i,o=!1;function a(k){o=k,v()}function l(k){k._originalProps.onShow(k),n.forEach(function($){$.set({duration:s}),$.state.isVisible&&$.hide()}),a(!0)}function c(k){k._originalProps.onHide(k),a(!1)}function p(k){k._originalProps.onShown(k),k.set({duration:k._originalProps.duration})}function v(){n.forEach(function(k){k.set({onShow:l,onShown:p,onHide:c,delay:o?[0,Array.isArray(r)?r[1]:r]:r,duration:o?s:k._originalProps.duration})})}n.forEach(function(k){k._originalProps?k.set(k._originalProps):k._originalProps=xr({},k.props)}),v()},ec&&setTimeout(function JH(){nc(document.querySelectorAll("[data-tippy]")).forEach(function(n){var e=n.getAttribute("data-tippy");e&&fo(n,{content:e})})}),function ZH(n){if(ec){var e=document.createElement("style");e.type="text/css",e.textContent=n,e.setAttribute("data-tippy-stylesheet","");var t=document.head,r=t.querySelector("style,link");r?t.insertBefore(e,r):t.appendChild(e)}}('.tippy-iOS{cursor:pointer!important;-webkit-tap-highlight-color:transparent}.tippy-popper{transition-timing-function:cubic-bezier(.165,.84,.44,1);max-width:calc(100% - 8px);pointer-events:none;outline:0}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-7px;bottom:-6.5px;-webkit-transform-origin:50% 0;transform-origin:50% 0;margin:0 3px}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 3px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%)}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(-10px);transform:perspective(700px) translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateX(60deg);transform:perspective(700px) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=top] [data-animation=scale]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px) scale(.5);transform:translateY(-10px) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-7px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;margin:0 3px}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 3px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%)}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(10px);transform:perspective(700px) translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateX(-60deg);transform:perspective(700px) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=scale]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px) scale(.5);transform:translateY(10px) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-12px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%;margin:3px 0}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(-10px);transform:perspective(700px) translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateY(-60deg);transform:perspective(700px) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=left] [data-animation=scale]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px) scale(.5);transform:translateX(-10px) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-12px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%;margin:3px 0}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(10px);transform:perspective(700px) translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateY(60deg);transform:perspective(700px) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=right] [data-animation=scale]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px) scale(.5);transform:translateX(10px) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:.25rem;font-size:.875rem;padding:.3125rem .5625rem;line-height:1.4;text-align:center;background-color:#333}.tippy-tooltip[data-size=small]{padding:.1875rem .375rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.375rem .75rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:initial}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] .tippy-roundarrow path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:18px;height:7px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity;will-change:opacity}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}');const $A=fo;class Hi{constructor(){}init(e,t){return this.instance=$A(e.nativeElement,t),this.instance}}Hi.\u0275fac=function(e){return new(e||Hi)},Hi.\u0275prov=It({token:Hi,factory:Hi.\u0275fac,providedIn:"root"}),Hi.ngInjectableDef=IT({factory:function(){return new Hi},token:Hi,providedIn:"root"});let QH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({imports:[[]]}),n})();const eU=["elementForTooltip"];function tU(n,e){if(1&n){const t=ei();yt(0,"div",5),Xt("click",function(i){return Sn(t),Lt().subButtonClickAction(i)}),yt(1,"mat-icon"),Cn(2,"keyboard_arrow_up"),At()()}}function nU(n,e){if(1&n&&ln(0,"span",6),2&n){const t=Lt();zf(t.highlightToggleStateActive?t.matIconNameHighlightedToggleState:t.iconName),Ji("color",t.colorObject?"rgb("+t.colorObject.r+", "+t.colorObject.g+", "+t.colorObject.b+")":null)}}function rU(n,e){if(1&n&&(yt(0,"mat-icon"),Cn(1),At()),2&n){const t=Lt();Ji("color",t.colorObject?"rgb("+t.colorObject.r+", "+t.colorObject.g+", "+t.colorObject.b+")":null),ur("red",t.highlightToggleStateActive),Et(1),oa(t.highlightToggleStateActive?t.matIconNameHighlightedToggleState:t.matIconName)}}const iU=function(n){return{cursor:n}};let sU=(()=>{class n{constructor(t){this.tippy=t,this.highlightToggleStateActive=!1,this.clicked=new dr}ngOnInit(){console.log("COLOR OBJECT: ",this.colorObject)}ngAfterViewInit(){const t={content:this.tooltip?this.tooltip:this.highlightToggleStateActive?this.captionHighlightedToggleState:this.caption};t.content&&(this.tippyInstance=this.tippy.init(this.elementForTooltip,t))}ngOnChanges(t){var r;if(this.elementForTooltip&&((null==t?void 0:t.tooltip)||(null==t?void 0:t.caption)||(null==t?void 0:t.highlightToggleStateActive))){void 0!==this.tippyInstance&&(this.tippyInstance.disable(),this.tippyInstance.destroy());const i={content:this.tooltip?this.tooltip:(null===(r=null==t?void 0:t.highlightToggleStateActive)||void 0===r?void 0:r.currentValue)?this.captionHighlightedToggleState:this.caption};i.content&&(this.tippyInstance=this.tippy.init(this.elementForTooltip,i),this.tippyInstance.show(3e4))}}}return n.\u0275fac=function(t){return new(t||n)(vt(Hi))},n.\u0275cmp=On({type:n,selectors:[["app-menubar-button"]],viewQuery:function(t,r){if(1&t&&ir(eU,5),2&t){let i;zn(i=Gn())&&(r.elementForTooltip=i.first)}},inputs:{clickAction:"clickAction",subButtonClickAction:"subButtonClickAction",highlightToggleStateActive:"highlightToggleStateActive",iconName:"iconName",matIconName:"matIconName",matIconNameHighlightedToggleState:"matIconNameHighlightedToggleState",caption:"caption",captionHighlightedToggleState:"captionHighlightedToggleState",highlighted:"highlighted",colorObject:"colorObject",tooltip:"tooltip",disabled:"disabled"},outputs:{clicked:"clicked"},features:[Wi],decls:6,vars:8,consts:[[1,"button",3,"ngStyle","click"],["elementForTooltip",""],["class","subbutton",3,"click",4,"ngIf"],["class","notextselection",3,"class","color",4,"ngIf","ngIfElse"],["matIcon",""],[1,"subbutton",3,"click"],[1,"notextselection"]],template:function(t,r){if(1&t&&(yt(0,"div",0,1),Xt("click",function(s){return!r.disabled&&r.clicked.emit(),!r.disabled&&r.clickAction&&r.clickAction(s)}),sn(2,tU,3,0,"div",2),sn(3,nU,1,4,"span",3),sn(4,rU,2,5,"ng-template",null,4,up),At()),2&t){const i=ll(5);ur("highlighted",r.highlighted),wt("ngStyle",vl(6,iU,r.disabled?"not-allowed":"pointer")),Et(2),wt("ngIf",r.subButtonClickAction),Et(1),wt("ngIf",r.iconName)("ngIfElse",i)}},directives:[Nu,ns,Dd],styles:["[_nghost-%COMP%]{display:contents}.button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:6.5vw;width:100%;padding-top:.3em;padding-bottom:.3em}.red[_ngcontent-%COMP%]{color:red}.button[_ngcontent-%COMP%]:hover{background-color:#555}mat-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:min(2.25vw,2.5em);width:min(2.25vw,2.5em);height:min(2.25vw,2.5em);margin:0;color:#fff;text-align:center;pointer-events:none}.button[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-weight:700;font-size:min(.75vw,1em);margin:.25em;color:#fff;pointer-events:none}.subbutton[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:flex;align-items:center;justify-content:center;cursor:context-menu;border-radius:.5em}.subbutton[_ngcontent-%COMP%]:hover{background-color:#393939}.subbutton[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:min(2vw,3em);margin:0}.highlighted[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #00f inset}"]}),n})();function oU(n,e){1&n&&(yt(0,"mat-icon"),Cn(1,"check"),At())}function aU(n,e){if(1&n){const t=ei();yt(0,"div",2),Xt("click",function(){const s=Sn(t).$implicit;return Lt().selectOverlayService.optionSelected(s)}),sn(1,oU,2,0,"mat-icon",3),Cn(2),At()}if(2&n){const t=e.$implicit,r=Lt();ur("active",r.selectOverlayService.activeKey===t.key),Et(1),wt("ngIf",r.selectOverlayService.activeKey===t.key),Et(1),qs(" ",t.value," ")}}let lU=(()=>{class n{constructor(t){this.selectOverlayService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(vt(Fg))},n.\u0275cmp=On({type:n,selectors:[["app-select-overlay"]],decls:2,vars:7,consts:[[1,"selectList"],["class","selectListItem notextselection",3,"active","click",4,"ngFor","ngForOf"],[1,"selectListItem","notextselection",3,"click"],[4,"ngIf"]],template:function(t,r){1&t&&(yt(0,"div",0),sn(1,aU,3,4,"div",1),At()),2&t&&(Ji("top",r.selectOverlayService.topPx)("left",r.selectOverlayService.leftPx)("display",r.selectOverlayService.isOverlayVisible?"":"none"),Et(1),wt("ngForOf",r.selectOverlayService.options))},directives:[Al,ns,Dd],styles:[".selectList[_ngcontent-%COMP%]{background:#151515;border:1px solid black;border-radius:1em;display:flex;flex-direction:column;position:absolute;transform:translateY(-100%);min-width:15vw;z-index:99}.selectListItem[_ngcontent-%COMP%]{color:#fff;height:4em;display:flex;flex-direction:row;cursor:pointer;justify-content:center;align-items:center;padding:.5em 1em;border-radius:1em}.selectListItem[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:25px;height:25px;width:25px;margin-bottom:4px;margin-right:4px}.active[_ngcontent-%COMP%]{background-color:#444}.selectListItem[_ngcontent-%COMP%]:hover{background-color:#555}"]}),n})();const cU=["elementForTooltip"];function uU(n,e){if(1&n&&(yt(0,"span"),Cn(1),At()),2&n){const t=Lt().$implicit;zf(t.iconName),Ji("font-size",t.iconSize)("width",t.iconSize)("height",t.iconSize),Et(1),qs("",t.icon," ")}}function dU(n,e){if(1&n&&(yt(0,"mat-icon"),Cn(1),At()),2&n){const t=Lt().$implicit;Ji("font-size",t.iconSize)("width",t.iconSize)("height",t.iconSize),Et(1),oa(t.icon)}}function hU(n,e){if(1&n){const t=ei();yt(0,"div",3,4),Xt("click",function(){const s=Sn(t).$implicit;return Lt().selectOverlayService.optionSelected(s)}),sn(2,uU,2,9,"span",5),sn(3,dU,2,7,"ng-template",null,6,up),Cn(5),At()}if(2&n){const t=e.$implicit,r=ll(1),i=ll(4),s=Lt();ur("active",s.selectOverlayService.activeKey===t.id),Et(2),wt("ngIf",t.iconName)("ngIfElse",i),Et(3),qs(" ",s.attachTippyComponent(r,null==t?null:t.tooltip)," ")}}let fU=(()=>{class n{constructor(t,r){this.selectOverlayService=t,this.tippy=r}ngOnInit(){}ngAfterViewInit(){}attachTippyComponent(t,r){const i={content:r};i.content&&(this.tippyInstance=this.tippy.init({nativeElement:t},i))}}return n.\u0275fac=function(t){return new(t||n)(vt(Fg),vt(Hi))},n.\u0275cmp=On({type:n,selectors:[["app-slim-select-overlay"]],viewQuery:function(t,r){if(1&t&&ir(cU,5),2&t){let i;zn(i=Gn())&&(r.elementForTooltip=i.first)}},decls:3,vars:7,consts:[[1,"slimSelectList"],["elementForTooltip",""],["class","selectListItem notextselection",3,"active","click",4,"ngFor","ngForOf"],[1,"selectListItem","notextselection",3,"click"],["item",""],[3,"class","font-size","width","height",4,"ngIf","ngIfElse"],["matIcon",""]],template:function(t,r){1&t&&(yt(0,"div",0,1),sn(2,hU,6,5,"div",2),At()),2&t&&(Ji("top",r.selectOverlayService.topPx)("left",r.selectOverlayService.leftPx)("display",r.selectOverlayService.isSlimOverlayVisible?"":"none"),Et(2),wt("ngForOf",r.selectOverlayService.slimOptions))},directives:[Al,ns,Dd],styles:[".slimSelectList[_ngcontent-%COMP%]{background:#151515;border:1px solid black;border-radius:1em;display:flex;flex-direction:row;position:absolute;transform:translateY(-100%);z-index:99}.selectListItem[_ngcontent-%COMP%]{color:#fff;height:3em;width:3em;display:flex;flex-direction:row;cursor:pointer;justify-content:center;align-items:center;border-radius:1em}.selectListItem[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:2em;width:2em;margin-right:4px;text-align:center;display:flex;justify-content:center;align-items:center}.active[_ngcontent-%COMP%]{background-color:#444}.selectListItem[_ngcontent-%COMP%]:hover{background-color:#555}"]}),n})();const pU=["slideView"],gU=["fileInput"];function mU(n,e){1&n&&ln(0,"app-gallery-view",2),2&n&&wt("cameraStreams",Lt().videoStreams)}function vU(n,e){1&n&&ln(0,"app-speaker-view",2),2&n&&wt("cameraStreams",Lt().videoStreams)}function yU(n,e){if(1&n){const t=ei();Gs(0),yt(1,"app-menubar-button",28),Xt("clicked",function(){const s=Sn(t).index;return Lt(2).annotationService.setColor(s)}),At(),Ws()}if(2&n){const t=e.$implicit,r=e.index,i=Lt(2);Et(1),wt("colorObject",t)("disabled",!i.annotationService.isAllowedToDraw)("highlighted",i.annotationService.currentColorId===r)}}function _U(n,e){if(1&n){const t=ei();Gs(0),yt(1,"app-menubar-button",14),Xt("clicked",function(){return Sn(t),Lt().documentPageBack()}),At(),yt(2,"app-menubar-button",15),Xt("clicked",function(){return Sn(t),Lt().documentPageForward()}),At(),yt(3,"div",16),Cn(4,"\xa0"),At(),yt(5,"app-menubar-button",17),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.CURSOR)}),At(),yt(6,"app-menubar-button",18),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.POINTER)}),At(),yt(7,"app-menubar-button",19),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.PEN)}),At(),yt(8,"app-menubar-button",20),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.HIGHLIGHTER)}),At(),yt(9,"app-menubar-button",21),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.RUBBER_EXT)}),At(),yt(10,"app-menubar-button",22),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.selectStaticTool(i.actionType.CLEAR_SHAPES)}),At(),ln(11,"app-menubar-button",23),yt(12,"div",16),Cn(13,"\xa0"),At(),ln(14,"app-menubar-button",24),yt(15,"div",16),Cn(16,"\xa0"),At(),yt(17,"app-menubar-button",25),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.ZOOM)}),At(),yt(18,"app-menubar-button",26),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.selectStaticTool(i.actionType.ZOOM_OUT)}),At(),yt(19,"app-menubar-button",27),Xt("clicked",function(){Sn(t);const i=Lt();return i.annotationService.setTool(i.actionType.PANNING)}),At(),yt(20,"div",16),Cn(21,"\xa0"),At(),sn(22,yU,2,3,"ng-container",11),Ws()}if(2&n){const t=Lt();Et(1),wt("disabled",!t.annotationService.isAllowedToDraw),Et(1),wt("disabled",!t.annotationService.isAllowedToDraw),Et(3),wt("highlighted",t.annotationService.currentTool===t.actionType.CURSOR),Et(1),wt("highlighted",t.annotationService.currentTool===t.actionType.POINTER)("disabled",!t.annotationService.isAllowedToDraw),Et(1),wt("highlighted",t.annotationService.currentTool===t.actionType.PEN)("disabled",!t.annotationService.isAllowedToDraw),Et(1),wt("highlighted",t.annotationService.currentTool===t.actionType.HIGHLIGHTER)("disabled",!t.annotationService.isAllowedToDraw),Et(1),wt("highlighted",t.annotationService.currentTool===t.actionType.RUBBER_EXT)("disabled",!t.annotationService.isAllowedToDraw),Et(1),wt("disabled",!t.annotationService.isAllowedToDraw),Et(1),wt("disabled",!t.annotationService.isAllowedToDraw)("highlighted",t.isExtendedToolSelected)("clickAction",t.openExtendedAnnotationToolList),Et(3),wt("disabled",!t.annotationService.isAllowedToDraw)("clickAction",t.openToolThicknessSetting),Et(3),wt("disabled",!t.annotationService.isAllowedToDraw)("highlighted",t.annotationService.currentTool===t.actionType.ZOOM),Et(1),wt("disabled",!t.annotationService.isAllowedToDraw)("highlighted",t.annotationService.currentTool===t.actionType.ZOOM_OUT),Et(1),wt("disabled",!t.annotationService.isAllowedToDraw)("highlighted",t.annotationService.currentTool===t.actionType.PANNING),Et(3),wt("ngForOf",t.annotationService.availableColors)}}function bU(n,e){1&n&&ln(0,"audio",30),2&n&&wt("srcObject",Lt().$implicit.stream)}function SU(n,e){if(1&n&&(Gs(0),sn(1,bU,1,1,"audio",29),Ws()),2&n){const t=e.$implicit,r=Lt();Et(1),wt("ngIf",!r.janusService.locallyMutedRemoteAudioFeeds[t.feedId])}}const CU=[{path:"",component:(()=>{class n{constructor(t){this.router=t}ngOnInit(){}buttonPressed(){this.router.navigate(["/course/1"])}}return n.\u0275fac=function(t){return new(t||n)(vt(fr))},n.\u0275cmp=On({type:n,selectors:[["app-home"]],decls:11,vars:0,consts:[["placeholder","Room ID"],["placeholder","Room Password"],["placeholder","Your name"],[3,"click"]],template:function(t,r){1&t&&(Cn(0,"Please enter your room details."),ln(1,"br")(2,"br")(3,"input",0)(4,"br")(5,"input",1)(6,"br")(7,"input",2)(8,"br"),yt(9,"button",3),Xt("click",function(){return r.buttonPressed()}),Cn(10,"Join Room"),At())},styles:[""]}),n})()},{path:"course/:courseId",component:(()=>{class n{constructor(t,r,i,s,o,a,l){var p,c=this;this.janusService=t,this.router=r,this.selectOverlayService=i,this.activatedRoute=s,this.dialog=o,this.http=a,this.annotationService=l,this.chosenViewMode="gallery",this.prevViewMode="gallery",this.screenShareActive=!1,this.availableViewModes={gallery:"Gallery view",speaker:"Speaker view",document:"Document view"},this.actionType=ut,this.extendedToolListActions=[{id:ut.RECTANGLE,iconName:"icon-rectangle-tool",toolActionType:ut.RECTANGLE,tooltip:"Rectangle"},{id:ut.ARROW,iconName:"icon-arrow-tool",toolActionType:ut.ARROW,tooltip:"Arrow"},{id:ut.LINE,iconName:"icon-line-tool",toolActionType:ut.LINE,tooltip:"Line"},{id:ut.ELLIPSE,iconName:"icon-ellipse-tool",toolActionType:ut.ELLIPSE,tooltip:"Ellipse"}],this.showAvailableMicrophones=v=>{this.selectOverlayService.trigger(v,Object.keys(this.janusService.audioDevices).map(k=>({key:k,value:this.janusService.audioDevices[k]})),k=>{this.janusService.selectAudioDevice(k.key)},this.janusService.currentlyChosenOverrideAudioDeviceId)},this.showAvailableCameras=v=>{this.selectOverlayService.trigger(v,Object.keys(this.janusService.videoDevices).map(k=>({key:k,value:this.janusService.videoDevices[k]})),k=>{this.janusService.selectVideoDevice(k.key)},this.janusService.currentlyChosenOverrideVideoDeviceId)},this.showAvailableViewModes=v=>{const k=[{key:"gallery",value:this.availableViewModes.gallery},{key:"speaker",value:this.availableViewModes.speaker}];Jn.getInstance().renderController&&k.push({key:"document",value:this.availableViewModes.document}),this.selectOverlayService.trigger(v,k,$=>{this.chosenViewMode=$.key},this.chosenViewMode)},this.openExtendedAnnotationToolList=function(){var v=Rn(function*(k){c.selectOverlayService.triggerSlim(k,c.extendedToolListActions,$=>{$.toolActionType&&c.annotationService.setTool($.toolActionType)},c.annotationService.currentTool)});return function(k){return v.apply(this,arguments)}}(),this.openToolThicknessSetting=function(){var v=Rn(function*(k){c.selectOverlayService.triggerSlim(k,[{id:"0",icon:"lens",iconSize:"1vh",value:1},{id:"1",icon:"lens",iconSize:"1.2vh",value:2},{id:"2",icon:"lens",iconSize:"1.4vh",value:2.5},{id:"3",icon:"lens",iconSize:"1.6vh",value:3},{id:"4",icon:"lens",iconSize:"1.8vh",value:3.5}],he=>{he.value&&he.id&&c.annotationService.setLineThickness(he.value,""+he.id)},c.annotationService.currentThicknessModifierId)});return function(k){return v.apply(this,arguments)}}(),this.openShareView=function(){var v=Rn(function*(k){let $="";const he=[{key:"screen",value:c.janusService.myScreenshareIsActive?"Stop sharing your screen":"Share your screen"},{key:"pdf",value:"Upload a PDF file"},{key:"whiteboard",value:"Open a blank whiteboard"}];let je=0,st=0;for(const[rt,Le]of c.playbackService.getDocuments().entries()){let Ge="Whiteboard",gt=-1;Le instanceof Hl?(gt=++st,Ge="Whiteboard"):(Ge="Document",gt=++je),he.push({key:`opendoc_${rt}`,value:`${Ge} ${gt}`})}c.janusService.myScreenshareIsActive?$="screen":"document"===c.chosenViewMode&&($="opendoc_"+c.playbackService.getCurrentDocumentId()),c.selectOverlayService.trigger(k,he,rt=>{var Le;if("screen"===rt.key)c.janusService.toggleScreenshare();else if("pdf"===rt.key)c.fileInput.nativeElement.click();else if("whiteboard"===rt.key)c.openBlankWhiteboard();else if(rt.key.includes("opendoc")){const Ge=rt.key.split("_")[1];console.log("OPENING DOC ID: ",Ge),c.playbackService.selectDocument(BigInt(Ge));const gt=null!==(Le=c.playbackService.streamActionExecutor.documentPageNumberMap.get(BigInt(Number.parseInt(Ge))))&&void 0!==Le?Le:0,Ot=new sd(gt);Ot.timestamp=0,c.playbackService.addAction(Ot);const En=c.playbackService.getDocuments().get(BigInt(Ge));let Ye=as.PDF;En instanceof Hl&&(Ye=as.WHITEBOARD);const Zn=new ba(BigInt(Ge),Ye,`${Ge}`,""),Qn=oi.parseActionToBinary(Zn);c.janusService.sendData(Qn);const xn=new io(BigInt(Ge),gt),pr=oi.parseActionToBinary(xn);c.janusService.sendData(pr)}},$)});return function(k){return v.apply(this,arguments)}}(),this.janusService.myRoomId=null!==(p=Number(this.activatedRoute.snapshot.params.courseId))&&void 0!==p?p:1,console.log("Read room id: ",this.janusService.myRoomId),this.courseStateService=new OB(""),this.playbackModel=new FB,this.playbackService=new Jn(this.playbackModel)}ngOnInit(){this.janusService.start(),this.janusService.setOnData(t=>{t instanceof Blob?t.arrayBuffer().then(r=>{this.processData(r)}):this.processData(t)}),document.addEventListener("click",()=>{this.selectOverlayService.hideAll()}),this.janusService.screenshareStateSubject.subscribe(t=>{"start"===t?this.screenShareActive||(this.prevViewMode=this.chosenViewMode,this.chosenViewMode="speaker",this.screenShareActive=!0):this.screenShareActive&&(this.chosenViewMode=this.prevViewMode,this.screenShareActive=!1)}),this.courseStateService.getCourseState(this.janusService.myRoomId||0).then(t=>{console.log("Course state",t);const r=[];try{for(const i of Object.values(t.documentMap)){const s=this.courseStateService.getStateDocument(this.janusService.myRoomId||0,i);r.push(s)}}catch(i){console.log("CourseState documentMap is probably empty.",i)}Promise.all(r).then(i=>{try{this.playbackService.initialize(this.slideView,t,i,BigInt(0))}catch(s){return void console.log("Error initializing: ",s)}}).catch(i=>{console.log("Error initializing 2: ",i)})}).catch(t=>{console.error("Error getting course state: ",t)})}ngOnDestroy(){this.janusService.end()}ngAfterViewInit(){}get audioStreams(){return Object.values(this.janusService.remoteTracks).filter(t=>t.stream.getAudioTracks().length>0)}get videoStreams(){return Object.values(Object.assign(Object.assign({},this.janusService.remoteTracks),this.janusService.localTracks)).filter(t=>t.stream.getVideoTracks().length>0)}leave(){try{this.janusService.end()}catch(t){console.log("Could not end janus session: ",t)}document.location.href=""}openSettingsDialog(){this.dialog.open(XB)}openBlankWhiteboard(){var t=this;return Rn(function*(){const r=`Whiteboard ${Date.now()}`,i=Date.now(),s=new ld(BigInt(i),as.WHITEBOARD,r,"");console.log("Action: ",s);const o=oi.parseActionToBinary(s);t.janusService.sendData(o),(new Hl).setDocumentId(BigInt(i)),t.processData(o);const l=new ba(BigInt(i),as.WHITEBOARD,r,""),c=oi.parseActionToBinary(l);t.janusService.sendData(c),t.processData(c);const p=new io(BigInt(i),0),v=oi.parseActionToBinary(p);t.janusService.sendData(v),t.processData(v),t.chosenViewMode="document"})()}onFileInputChange(t){var r=this;return Rn(function*(){const i=r.fileInput.nativeElement.files[0];console.log("Selected file: ",i);const s=new FormData;s.append("file",i,i.name),r.http.post("/course/file/upload",s,{responseType:"text"}).subscribe(o=>{console.log("Gotten link: ",o);const a=Date.now(),l=new ld(BigInt(a),as.PDF,i.name,o);console.log("Action: ",l);const c=oi.parseActionToBinary(l);r.janusService.sendData(c),r.processData(c);const p=new ba(BigInt(a),as.PDF,i.name,o),v=oi.parseActionToBinary(p);r.janusService.sendData(v),r.processData(v);const k=new io(BigInt(a),0),$=oi.parseActionToBinary(k);setTimeout(()=>{r.janusService.sendData($),r.processData($)},10)})})()}processData(t){if(!this.janusService.myRoomId)return;const r=new nw(t),i=r.getInt32(),s=r.getInt8(),o=oi.parse(r,s,i);if(console.log("Stream action parsing: ",o),o instanceof ba)this.bufferAction(o,o.documentId)||this.playbackService.selectDocument(o.documentId);else if(o instanceof ld)if(1===o.documentType){const a=new Hl;a.setDocumentId(o.documentId),this.playbackService.addDocument(a)}else this.streamActionBuffer={bufferedActions:[],docId:BigInt(o.documentId)},this.courseStateService.getStateDocument(this.janusService.myRoomId,{activePage:null,documentFile:o.documentFile,documentId:o.documentId,documentName:o.documentTitle,pages:null,type:"pdf"}).then(l=>{this.playbackService.addDocument(l),this.flushActionBuffer(l.getDocumentId())}).catch(l=>{console.error(l)});else if(o instanceof fE)this.playbackService.removeDocument(o.documentId);else if(o instanceof io){if(!this.bufferAction(o,o.documentId)){const a=new sd(o.pageNumber);a.timestamp=0,this.playbackService.addAction(a),this.chosenViewMode="document"}}else o instanceof Tg&&(this.bufferAction(o,o.documentId)||this.playbackService.addAction(o.action))}bufferAction(t,r){return!(!this.streamActionBuffer||this.streamActionBuffer.docId!==BigInt(r)||(this.streamActionBuffer.bufferedActions.push(t),0))}flushActionBuffer(t){this.streamActionBuffer&&this.streamActionBuffer.docId===BigInt(t)&&this.streamActionBuffer.bufferedActions.forEach(r=>{if(r instanceof ba)this.playbackService.selectDocument(r.documentId);else if(r instanceof io){const i=new sd(r.pageNumber);i.timestamp=0,this.playbackService.addAction(i),this.chosenViewMode="document"}else r instanceof Tg&&this.playbackService.addAction(r.action)}),this.streamActionBuffer=null}documentPageBack(t=!1){const r=Jn.getInstance().renderController.getPage().getPageNumber();this.modifyPage(r-1,t)}documentPageForward(t=!1){const r=Jn.getInstance().renderController.getPage().getPageNumber();this.modifyPage(r+1,t)}modifyPage(t,r=!1){const i=new io(BigInt(0),t),s=oi.parseActionToBinary(i);r||this.janusService.sendData(s);const o=new sd(i.pageNumber);o.timestamp=0,Jn.getInstance().addAction(o)}get isExtendedToolSelected(){return void 0!==this.extendedToolListActions.find(t=>t.toolActionType===this.annotationService.currentTool)}}return n.\u0275fac=function(t){return new(t||n)(vt(Ca),vt(fr),vt(Fg),vt(to),vt(_j),vt(Cd),vt(vd))},n.\u0275cmp=On({type:n,selectors:[["app-player"]],viewQuery:function(t,r){if(1&t&&(ir(pU,5,kg),ir(gU,5)),2&t){let i;zn(i=Gn())&&(r.slideView=i.first),zn(i=Gn())&&(r.fileInput=i.first)}},decls:21,vars:14,consts:[["xmlns","http://www.w3.org/1999/html",1,"conferenceContainer"],[3,"cameraStreams",4,"ngIf"],[3,"cameraStreams"],["slideView",""],["caption","Microphone off","captionHighlightedToggleState","Microphone on","iconName","icon-microphone","matIconNameHighlightedToggleState","icon-microphone-off",3,"highlightToggleStateActive","subButtonClickAction","clicked"],["caption","Camera off","captionHighlightedToggleState","Camera on","iconName","icon-camera","matIconNameHighlightedToggleState","icon-camera-off",3,"highlightToggleStateActive","subButtonClickAction","clicked"],["caption","Share...","iconName","icon-edit",3,"clickAction"],[4,"ngIf"],["caption","View mode","matIconName","image",3,"clickAction"],["captionHighlightedToggleState","Leave","tooltip","Leave","matIconNameHighlightedToggleState","exit_to_app",3,"highlightToggleStateActive","clicked"],[1,"not-rendered"],[4,"ngFor","ngForOf"],["type","file","id","input",1,"fileInput",3,"change"],["fileInput",""],["iconName","icon-prev-slide-tool","tooltip","Page back",3,"disabled","clicked"],["iconName","icon-next-slide-tool","tooltip","Page forward",3,"disabled","clicked"],[1,"separator","notextselection"],["iconName","icon-cursor","tooltip","Cursor",3,"highlighted","clicked"],["iconName","icon-pointer-tool","tooltip","Laserpointer",3,"highlighted","disabled","clicked"],["iconName","icon-pen-tool","tooltip","Brush",3,"highlighted","disabled","clicked"],["iconName","icon-highlighter-tool","tooltip","Highlighter",3,"highlighted","disabled","clicked"],["iconName","icon-rubber-tool","tooltip","Eraser",3,"highlighted","disabled","clicked"],["iconName","icon-clear-tool","tooltip","Delete all annotations",3,"disabled","clicked"],["matIconName","more_horiz","tooltip","More tools...",3,"disabled","highlighted","clickAction"],["matIconName","format_size","tooltip","Select line thickness",3,"disabled","clickAction"],["iconName","icon-zoom-in-tool","tooltip","Zoom in",3,"disabled","highlighted","clicked"],["iconName","icon-zoom-out-tool","tooltip","Zoom out",3,"disabled","highlighted","clicked"],["iconName","icon-pan-tool","tooltip","Move board",3,"disabled","highlighted","clicked"],["matIconName","lens",3,"colorObject","disabled","highlighted","clicked"],["autoplay","",3,"srcObject",4,"ngIf"],["autoplay","",3,"srcObject"]],template:function(t,r){1&t&&(yt(0,"div",0),sn(1,mU,1,1,"app-gallery-view",1),sn(2,vU,1,1,"app-speaker-view",1),ln(3,"app-document-view",2,3),yt(5,"app-menubar")(6,"app-menubar-buttongroup")(7,"app-menubar-button",4),Xt("clicked",function(){return r.janusService.toggleMute()}),At(),yt(8,"app-menubar-button",5),Xt("clicked",function(){return r.janusService.toggleCamera()}),At(),ln(9,"app-menubar-button",6),At(),yt(10,"app-menubar-buttongroup"),sn(11,_U,23,24,"ng-container",7),At(),yt(12,"app-menubar-buttongroup"),ln(13,"app-menubar-button",8),yt(14,"app-menubar-button",9),Xt("clicked",function(){return r.leave()}),At()()()(),ln(15,"app-select-overlay")(16,"app-slim-select-overlay"),yt(17,"div",10),sn(18,SU,2,1,"ng-container",11),yt(19,"input",12,13),Xt("change",function(s){return r.onFileInputChange(s)}),At()()),2&t&&(Et(1),wt("ngIf","gallery"===r.chosenViewMode),Et(1),wt("ngIf","speaker"===r.chosenViewMode),Et(1),Ji("display","document"!==r.chosenViewMode?"none":""),wt("cameraStreams",r.videoStreams),Et(4),wt("highlightToggleStateActive",r.janusService.isMuted)("subButtonClickAction",r.showAvailableMicrophones),Et(1),wt("highlightToggleStateActive",r.janusService.isVideoMuted)("subButtonClickAction",r.showAvailableCameras),Et(1),wt("clickAction",r.openShareView),Et(2),wt("ngIf","document"===r.chosenViewMode),Et(2),wt("clickAction",r.showAvailableViewModes),Et(1),wt("highlightToggleStateActive",!0),Et(4),wt("ngForOf",r.audioStreams))},directives:[ns,Jg,kV,kg,LV,BV,sU,Al,lU,fU],styles:["body[_ngcontent-%COMP%]{background:#222222;overflow:hidden}.conferenceContainer[_ngcontent-%COMP%]{background-color:#333;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;max-height:100vh;height:100%;width:100%}.videoFeedContainer[_ngcontent-%COMP%]{background:#222222;flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(min(33.3333333333%,max(64px,20%)),1fr));grid-auto-columns:min-content;align-items:center;max-height:90vh}.videoContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;aspect-ratio:4/3}video[_ngcontent-%COMP%]{object-fit:contain;border-radius:.75em;overflow:hidden;max-height:90vh;border:2px solid transparent}.isTalking[_ngcontent-%COMP%]{border-color:#7cfc00}.not-rendered[_ngcontent-%COMP%]{visibility:hidden;display:none}  .separator{width:1px;background-color:#fff;margin:2% 1em}"]}),n})()}];let EU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n}),n.\u0275inj=vr({imports:[[cE.forRoot(CU)],cE]}),n})(),wU=(()=>{class n{constructor(t,r,i){this.router=t,this.janusService=r,this.elementRef=i,this.title="angularPlayer",this.janusService.setUsername(this.elementRef.nativeElement.getAttribute("userdisplayname"))}}return n.\u0275fac=function(t){return new(t||n)(vt(fr),vt(Ca),vt(zr))},n.\u0275cmp=On({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&ln(0,"router-outlet")},directives:[mg],styles:[""]}),n})(),AU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mr({type:n,bootstrap:[wU]}),n.\u0275inj=vr({providers:[],imports:[[UF,EU,Xw,Fj,Sj.forRoot({closeButton:!0,resizable:!1,draggable:!1,sizes:{md:{width:"40vw",height:"60vh"}}}),QH],Xw]}),n})();!function qm(n,e,t){const r=n.\u0275cmp;r.directiveDefs=()=>e.map(Xm),r.pipeDefs=()=>t.map(Km)}(kg,[ns,Jg,Nu],[]);const Cm=CanvasRenderingContext2D.prototype.getTransform;if(CanvasRenderingContext2D.prototype.getTransformExt=function(){if(Cm){const n=Cm.apply(this,Array.from(arguments));this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.setValues(n.a,n.b,n.c,n.d,n.e,n.f)}return this._transform_ext},!Cm){const n=CanvasRenderingContext2D.prototype.resetTransform,e=CanvasRenderingContext2D.prototype.rotate,t=CanvasRenderingContext2D.prototype.scale,r=CanvasRenderingContext2D.prototype.setTransform,i=CanvasRenderingContext2D.prototype.transform,s=CanvasRenderingContext2D.prototype.translate,o=CanvasRenderingContext2D.prototype.save,a=CanvasRenderingContext2D.prototype.restore;CanvasRenderingContext2D.prototype.resetTransform=function(){n&&n.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.reset()},CanvasRenderingContext2D.prototype.rotate=function(l){e&&e.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.rotate(l)},CanvasRenderingContext2D.prototype.scale=function(l,c){t&&t.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.scale(l,c)},CanvasRenderingContext2D.prototype.setTransform=function(l,c,p,v,k,$){if(r&&r.apply(this,Array.from(arguments)),c);else{const he=l;l=he.a,c=he.b,p=he.c,v=he.d,k=he.e,$=he.f}this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.setValues(l,c,p,v,k,$)},CanvasRenderingContext2D.prototype.transform=function(l,c,p,v,k,$){i&&i.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.multiply(new Tr([l,c,p,v,k,$]))},CanvasRenderingContext2D.prototype.translate=function(l,c){s&&s.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new Tr),this._transform_ext.translate(l,c)},CanvasRenderingContext2D.prototype.save=function(){o&&o.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext||(this._transform_ext=new Tr),this._transform_ext_stack.push(this._transform_ext.clone())},CanvasRenderingContext2D.prototype.restore=function(){a&&a.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext=this._transform_ext_stack.pop(),this._transform_ext||(this._transform_ext=new Tr)}}Rg.GlobalWorkerOptions.workerSrc="./angular/assets/pdf.worker.js",function MO(){cS=!1}(),VF().bootstrapModule(AU).catch(n=>console.error(n))},164:(it,L,W)=>{var Se,_=W(69);"undefined"!=typeof window&&(Se=window.AudioContext||window.webkitAudioContext);var ce=null;it.exports=function(Re,B){var m=new _;if(!Se)return m;var g,I,O,D=(B=B||{}).smoothing||.1,x=B.interval||50,j=B.threshold,C=B.play,u=B.history||10,d=!0;ce=B.audioContext||ce||new Se,(O=ce.createAnalyser()).fftSize=512,O.smoothingTimeConstant=D,I=new Float32Array(O.frequencyBinCount),Re.jquery&&(Re=Re[0]),Re instanceof HTMLAudioElement||Re instanceof HTMLVideoElement?(g=ce.createMediaElementSource(Re),void 0===C&&(C=!0),j=j||-50):(g=ce.createMediaStreamSource(Re),j=j||-50),g.connect(O),C&&O.connect(ce.destination),m.speaking=!1,m.suspend=function(){return ce.suspend()},m.resume=function(){return ce.resume()},Object.defineProperty(m,"state",{get:function(){return ce.state}}),ce.onstatechange=function(){m.emit("state_change",ce.state)},m.setThreshold=function(f){j=f},m.setInterval=function(f){x=f},m.stop=function(){d=!1,m.emit("volume_change",-100,j),m.speaking&&(m.speaking=!1,m.emit("stopped_speaking")),O.disconnect(),g.disconnect()},m.speakingHistory=[];for(var b=0;b<u;b++)m.speakingHistory.push(0);var h=function(){setTimeout(function(){if(d){var f=function N(Re,re){var m=-1/0;Re.getFloatFrequencyData(re);for(var B=4,D=re.length;B<D;B++)re[B]>m&&re[B]<0&&(m=re[B]);return m}(O,I);m.emit("volume_change",f,j);var E=0;if(f>j&&!m.speaking){for(var y=m.speakingHistory.length-3;y<m.speakingHistory.length;y++)E+=m.speakingHistory[y];E>=2&&(m.speaking=!0,m.emit("speaking"))}else if(f<j&&m.speaking){for(y=0;y<m.speakingHistory.length;y++)E+=m.speakingHistory[y];0==E&&(m.speaking=!1,m.emit("stopped_speaking"))}m.speakingHistory.shift(),m.speakingHistory.push(0+(f>j)),h()}},x)};return h(),m}},36:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(926).default,W;globalThis,W=()=>(()=>{"use strict";var __webpack_modules__=[,(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.VerbosityLevel=L.Util=L.UnknownErrorException=L.UnexpectedResponseException=L.UNSUPPORTED_FEATURES=L.TextRenderingMode=L.StreamType=L.RenderingIntentFlag=L.PermissionFlag=L.PasswordResponses=L.PasswordException=L.PageActionEventType=L.OPS=L.MissingPDFException=L.LINE_FACTOR=L.LINE_DESCENT_FACTOR=L.InvalidPDFException=L.ImageKind=L.IDENTITY_MATRIX=L.FormatError=L.FontType=L.FeatureTest=L.FONT_IDENTITY_MATRIX=L.DocumentActionEventType=L.CMapCompressionType=L.BaseException=L.AnnotationType=L.AnnotationStateModelType=L.AnnotationReviewState=L.AnnotationReplyType=L.AnnotationMode=L.AnnotationMarkedState=L.AnnotationFlag=L.AnnotationFieldFlag=L.AnnotationEditorType=L.AnnotationEditorPrefix=L.AnnotationEditorParamsType=L.AnnotationBorderStyleType=L.AnnotationActionEventType=L.AbortException=void 0,L.arrayByteLength=Ke,L.arraysToBytes=function ot(X){const V=X.length;if(1===V&&X[0]instanceof Uint8Array)return X[0];let K=0;for(let ct=0;ct<V;ct++)K+=Ke(X[ct]);let Me=0;const qe=new Uint8Array(K);for(let ct=0;ct<V;ct++){let ht=X[ct];ht instanceof Uint8Array||(ht="string"==typeof ht?Pe(ht):new Uint8Array(ht));const xt=ht.byteLength;qe.set(ht,Me),Me+=xt}return qe},L.assert=function S(X,V){X||fe(V)},L.bytesToString=function ae(X){("object"!=typeof X||null===X||void 0===X.length)&&fe("Invalid argument for bytesToString");const V=X.length,K=8192;if(V<K)return String.fromCharCode.apply(null,X);const Me=[];for(let qe=0;qe<V;qe+=K){const ct=Math.min(qe+K,V),ht=X.subarray(qe,ct);Me.push(String.fromCharCode.apply(null,ht))}return Me.join("")},L.createPromiseCapability=function Be(){const X=Object.create(null);let V=!1;return Object.defineProperty(X,"settled",{get:()=>V}),X.promise=new Promise(function(K,Me){X.resolve=function(qe){V=!0,K(qe)},X.reject=function(qe){V=!0,Me(qe)}}),X},L.createValidAbsoluteUrl=function te(X,V=null,K=null){if(!X)return null;try{if(K&&"string"==typeof X){if(K.addDefaultProtocol&&X.startsWith("www.")){const qe=X.match(/\./g);qe&&qe.length>=2&&(X=`http://${X}`)}if(K.tryConvertEncoding)try{X=oe(X)}catch(qe){}}const Me=V?new URL(X,V):new URL(X);if(function F(X){if(!X)return!1;switch(X.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Me))return Me}catch(Me){}return null},L.escapeString=function T(X){return X.replace(/([()\\\n\r])/g,V=>"\n"===V?"\\n":"\r"===V?"\\r":`\\${V}`)},L.getModificationDate=function be(X=new Date){return[X.getUTCFullYear().toString(),(X.getUTCMonth()+1).toString().padStart(2,"0"),X.getUTCDate().toString().padStart(2,"0"),X.getUTCHours().toString().padStart(2,"0"),X.getUTCMinutes().toString().padStart(2,"0"),X.getUTCSeconds().toString().padStart(2,"0")].join("")},L.getVerbosityLevel=function pe(){return J},L.info=function we(X){J>=ye.INFOS&&console.log(`Info: ${X}`)},L.isArrayBuffer=function Xe(X){return"object"==typeof X&&null!==X&&void 0!==X.byteLength},L.isArrayEqual=function ue(X,V){if(X.length!==V.length)return!1;for(let K=0,Me=X.length;K<Me;K++)if(X[K]!==V[K])return!1;return!0},L.isAscii=function de(X){return/^[\x00-\x7F]*$/.test(X)},L.objectFromMap=function me(X){const V=Object.create(null);for(const[K,Me]of X)V[K]=Me;return V},L.objectSize=function nt(X){return Object.keys(X).length},L.setVerbosityLevel=function Q(X){Number.isInteger(X)&&(J=X)},L.shadow=ve,L.string32=function Fe(X){return String.fromCharCode(X>>24&255,X>>16&255,X>>8&255,255&X)},L.stringToBytes=Pe,L.stringToPDFString=function tt(X){if(X[0]>="\xef"){let K;if("\xfe"===X[0]&&"\xff"===X[1]?K="utf-16be":"\xff"===X[0]&&"\xfe"===X[1]?K="utf-16le":"\xef"===X[0]&&"\xbb"===X[1]&&"\xbf"===X[2]&&(K="utf-8"),K)try{const Me=new TextDecoder(K,{fatal:!0}),qe=Pe(X);return Me.decode(qe)}catch(Me){Je(`stringToPDFString: "${Me}".`)}}const V=[];for(let K=0,Me=X.length;K<Me;K++){const qe=Ne[X.charCodeAt(K)];V.push(qe?String.fromCharCode(qe):X.charAt(K))}return V.join("")},L.stringToUTF16BEString=function Ae(X){const V=["\xfe\xff"];for(let K=0,Me=X.length;K<Me;K++){const qe=X.charCodeAt(K);V.push(String.fromCharCode(qe>>8&255),String.fromCharCode(255&qe))}return V.join("")},L.stringToUTF8String=oe,L.unreachable=fe,L.utf8StringToString=function xe(X){return unescape(encodeURIComponent(X))},L.warn=Je,W(2),L.IDENTITY_MATRIX=[1,0,0,1,0,0],L.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],L.LINE_FACTOR=1.35,L.LINE_DESCENT_FACTOR=.35,L.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},L.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},L.AnnotationEditorPrefix="pdfjs_internal_editor_",L.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},L.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},L.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},L.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},L.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},L.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},L.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},L.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},L.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},L.AnnotationReplyType={GROUP:"Group",REPLY:"R"},L.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},L.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},L.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},L.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},L.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},L.PageActionEventType={O:"PageOpen",C:"PageClose"},L.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},L.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const ye={ERRORS:0,WARNINGS:1,INFOS:5};L.VerbosityLevel=ye,L.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},L.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},L.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},L.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let J=ye.WARNINGS;function Je(X){J>=ye.WARNINGS&&console.log(`Warning: ${X}`)}function fe(X){throw new Error(X)}function ve(X,V,K){return Object.defineProperty(X,V,{value:K,enumerable:!0,configurable:!0,writable:!1}),K}const le=function(){function V(K,Me){this.constructor===V&&fe("Cannot initialize BaseException."),this.message=K,this.name=Me}return V.prototype=new Error,V.constructor=V,V}();function Pe(X){"string"!=typeof X&&fe("Invalid argument for stringToBytes");const V=X.length,K=new Uint8Array(V);for(let Me=0;Me<V;++Me)K[Me]=255&X.charCodeAt(Me);return K}function Ke(X){return void 0!==X.length?X.length:void 0!==X.byteLength?X.byteLength:void fe("Invalid argument for arrayByteLength")}L.BaseException=le,L.PasswordException=class _e extends le{constructor(V,K){super(V,"PasswordException"),this.code=K}},L.UnknownErrorException=class Ie extends le{constructor(V,K){super(V,"UnknownErrorException"),this.details=K}},L.InvalidPDFException=class Te extends le{constructor(V){super(V,"InvalidPDFException")}},L.MissingPDFException=class w extends le{constructor(V){super(V,"MissingPDFException")}},L.UnexpectedResponseException=class U extends le{constructor(V,K){super(V,"UnexpectedResponseException"),this.status=K}},L.FormatError=class q extends le{constructor(V){super(V,"FormatError")}},L.AbortException=class ie extends le{constructor(V){super(V,"AbortException")}},L.FeatureTest=class ee{static get isLittleEndian(){return ve(this,"isLittleEndian",function ke(){const X=new Uint8Array(4);return X[0]=1,1===new Uint32Array(X.buffer,0,1)[0]}())}static get isEvalSupported(){return ve(this,"isEvalSupported",function Qe(){try{return new Function(""),!0}catch(X){return!1}}())}static get isOffscreenCanvasSupported(){return ve(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const H=[...Array(256).keys()].map(X=>X.toString(16).padStart(2,"0"));class ge{static makeHexColor(V,K,Me){return`#${H[V]}${H[K]}${H[Me]}`}static scaleMinMax(V,K){let Me;V[0]?(V[0]<0&&(Me=K[0],K[0]=K[1],K[1]=Me),K[0]*=V[0],K[1]*=V[0],V[3]<0&&(Me=K[2],K[2]=K[3],K[3]=Me),K[2]*=V[3],K[3]*=V[3]):(Me=K[0],K[0]=K[2],K[2]=Me,Me=K[1],K[1]=K[3],K[3]=Me,V[1]<0&&(Me=K[2],K[2]=K[3],K[3]=Me),K[2]*=V[1],K[3]*=V[1],V[2]<0&&(Me=K[0],K[0]=K[1],K[1]=Me),K[0]*=V[2],K[1]*=V[2]),K[0]+=V[4],K[1]+=V[4],K[2]+=V[5],K[3]+=V[5]}static transform(V,K){return[V[0]*K[0]+V[2]*K[1],V[1]*K[0]+V[3]*K[1],V[0]*K[2]+V[2]*K[3],V[1]*K[2]+V[3]*K[3],V[0]*K[4]+V[2]*K[5]+V[4],V[1]*K[4]+V[3]*K[5]+V[5]]}static applyTransform(V,K){return[V[0]*K[0]+V[1]*K[2]+K[4],V[0]*K[1]+V[1]*K[3]+K[5]]}static applyInverseTransform(V,K){const Me=K[0]*K[3]-K[1]*K[2];return[(V[0]*K[3]-V[1]*K[2]+K[2]*K[5]-K[4]*K[3])/Me,(-V[0]*K[1]+V[1]*K[0]+K[4]*K[1]-K[5]*K[0])/Me]}static getAxialAlignedBoundingBox(V,K){const Me=ge.applyTransform(V,K),qe=ge.applyTransform(V.slice(2,4),K),ct=ge.applyTransform([V[0],V[3]],K),ht=ge.applyTransform([V[2],V[1]],K);return[Math.min(Me[0],qe[0],ct[0],ht[0]),Math.min(Me[1],qe[1],ct[1],ht[1]),Math.max(Me[0],qe[0],ct[0],ht[0]),Math.max(Me[1],qe[1],ct[1],ht[1])]}static inverseTransform(V){const K=V[0]*V[3]-V[1]*V[2];return[V[3]/K,-V[1]/K,-V[2]/K,V[0]/K,(V[2]*V[5]-V[4]*V[3])/K,(V[4]*V[1]-V[5]*V[0])/K]}static apply3dTransform(V,K){return[V[0]*K[0]+V[1]*K[1]+V[2]*K[2],V[3]*K[0]+V[4]*K[1]+V[5]*K[2],V[6]*K[0]+V[7]*K[1]+V[8]*K[2]]}static singularValueDecompose2dScale(V){const K=[V[0],V[2],V[1],V[3]],Me=V[0]*K[0]+V[1]*K[2],ht=V[2]*K[1]+V[3]*K[3],xt=(Me+ht)/2,Ct=Math.sqrt((Me+ht)**2-4*(Me*ht-(V[2]*K[0]+V[3]*K[2])*(V[0]*K[1]+V[1]*K[3])))/2,Mt=xt-Ct||1;return[Math.sqrt(xt+Ct||1),Math.sqrt(Mt)]}static normalizeRect(V){const K=V.slice(0);return V[0]>V[2]&&(K[0]=V[2],K[2]=V[0]),V[1]>V[3]&&(K[1]=V[3],K[3]=V[1]),K}static intersect(V,K){const Me=Math.max(Math.min(V[0],V[2]),Math.min(K[0],K[2])),qe=Math.min(Math.max(V[0],V[2]),Math.max(K[0],K[2]));if(Me>qe)return null;const ct=Math.max(Math.min(V[1],V[3]),Math.min(K[1],K[3])),ht=Math.min(Math.max(V[1],V[3]),Math.max(K[1],K[3]));return ct>ht?null:[Me,ct,qe,ht]}static bezierBoundingBox(V,K,Me,qe,ct,ht,xt,Ct){const Dt=[],Mt=[[],[]];let on,an,nn,kt,er,kr,Xr,cn;for(let yn=0;yn<2;++yn)if(0===yn?(an=6*V-12*Me+6*ct,on=-3*V+9*Me-9*ct+3*xt,nn=3*Me-3*V):(an=6*K-12*qe+6*ht,on=-3*K+9*qe-9*ht+3*Ct,nn=3*qe-3*K),Math.abs(on)<1e-12){if(Math.abs(an)<1e-12)continue;kt=-nn/an,0<kt&&kt<1&&Dt.push(kt)}else Xr=an*an-4*nn*on,cn=Math.sqrt(Xr),!(Xr<0)&&(er=(-an+cn)/(2*on),0<er&&er<1&&Dt.push(er),kr=(-an-cn)/(2*on),0<kr&&kr<1&&Dt.push(kr));let $t,mr=Dt.length;const _n=mr;for(;mr--;)kt=Dt[mr],$t=1-kt,Mt[0][mr]=$t*$t*$t*V+3*$t*$t*kt*Me+3*$t*kt*kt*ct+kt*kt*kt*xt,Mt[1][mr]=$t*$t*$t*K+3*$t*$t*kt*qe+3*$t*kt*kt*ht+kt*kt*kt*Ct;return Mt[0][_n]=V,Mt[1][_n]=K,Mt[0][_n+1]=xt,Mt[1][_n+1]=Ct,Mt[0].length=Mt[1].length=_n+2,[Math.min(...Mt[0]),Math.min(...Mt[1]),Math.max(...Mt[0]),Math.max(...Mt[1])]}}L.Util=ge;const Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(X){return decodeURIComponent(escape(X))}},(it,L,W)=>{W(3)},(it,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.isNodeJS=void 0;const W=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);L.isNodeJS=W},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var it,W,_,N,Se,ce,Re,re,m,GA,D,x;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:C,NodeCMapReaderFactory:u,NodeStandardFontDataFactory:d}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=C,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=u,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=d}function setPDFNetworkStreamFactory(C){createPDFNetworkStream=C}function getDocument(C){const u=new PDFDocumentLoadingTask;let d;if("string"==typeof C||C instanceof URL)d={url:C};else if((0,_util.isArrayBuffer)(C))d={data:C};else if(C instanceof PDFDataRangeTransport)d={range:C};else{if("object"!=typeof C)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!C.url&&!C.data&&!C.range)throw new Error("Invalid parameter object: need either .data, .range or .url");d=C}const g=Object.create(null);let I=null,O=null;for(const h in d){const f=d[h];switch(h){case"url":if("undefined"!=typeof window)try{g[h]=new URL(f,window.location).href;continue}catch(E){(0,_util.warn)(`Cannot create valid URL: "${E}".`)}else if("string"==typeof f||f instanceof URL){g[h]=f.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":I=f;continue;case"worker":O=f;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&f instanceof Buffer)g[h]=new Uint8Array(f);else{if(f instanceof Uint8Array)break;if("string"==typeof f)g[h]=(0,_util.stringToBytes)(f);else if("object"!=typeof f||null===f||isNaN(f.length)){if(!(0,_util.isArrayBuffer)(f))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");g[h]=new Uint8Array(f)}else g[h]=new Uint8Array(f)}continue}g[h]=f}if(g.CMapReaderFactory=g.CMapReaderFactory||DefaultCMapReaderFactory,g.StandardFontDataFactory=g.StandardFontDataFactory||DefaultStandardFontDataFactory,g.ignoreErrors=!0!==g.stopAtErrors,g.fontExtraProperties=!0===g.fontExtraProperties,g.pdfBug=!0===g.pdfBug,g.enableXfa=!0===g.enableXfa,(!Number.isInteger(g.rangeChunkSize)||g.rangeChunkSize<1)&&(g.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof g.docBaseUrl||(0,_display_utils.isDataScheme)(g.docBaseUrl))&&(g.docBaseUrl=null),(!Number.isInteger(g.maxImageSize)||g.maxImageSize<-1)&&(g.maxImageSize=-1),"string"!=typeof g.cMapUrl&&(g.cMapUrl=null),"string"!=typeof g.standardFontDataUrl&&(g.standardFontDataUrl=null),"boolean"!=typeof g.useWorkerFetch&&(g.useWorkerFetch=g.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&g.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof g.isEvalSupported&&(g.isEvalSupported=!0),"boolean"!=typeof g.disableFontFace&&(g.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof g.useSystemFonts&&(g.useSystemFonts=!_is_node.isNodeJS&&!g.disableFontFace),("object"!=typeof g.ownerDocument||null===g.ownerDocument)&&(g.ownerDocument=globalThis.document),"boolean"!=typeof g.disableRange&&(g.disableRange=!1),"boolean"!=typeof g.disableStream&&(g.disableStream=!1),"boolean"!=typeof g.disableAutoFetch&&(g.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(g.verbosity),!O){const h={verbosity:g.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};O=h.port?PDFWorker.fromPort(h):new PDFWorker(h),u._worker=O}const b=u.docId;return O.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const h=_fetchDocument(O,g,I,b),f=new Promise(function(E){let y;I?y=new _transport_stream.PDFDataTransportStream({length:g.length,initialData:g.initialData,progressiveDone:g.progressiveDone,contentDispositionFilename:g.contentDispositionFilename,disableRange:g.disableRange,disableStream:g.disableStream},I):g.data||(y=createPDFNetworkStream({url:g.url,length:g.length,httpHeaders:g.httpHeaders,withCredentials:g.withCredentials,rangeChunkSize:g.rangeChunkSize,disableRange:g.disableRange,disableStream:g.disableStream})),E(y)});return Promise.all([h,f]).then(function([E,y]){if(u.destroyed)throw new Error("Loading aborted");const R=new _message_handler.MessageHandler(b,E,O.port),M=new WorkerTransport(R,u,y,g);u._transport=M,R.send("Ready",null)})}).catch(u._capability.reject),u}function _fetchDocument(C,u,d,g){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(C,u,d,g){if(C.destroyed)throw new Error("Worker was destroyed");d&&(u.length=d.length,u.initialData=d.initialData,u.progressiveDone=d.progressiveDone,u.contentDispositionFilename=d.contentDispositionFilename);const I=yield C.messageHandler.sendWithPromise("GetDocRequest",{docId:g,apiVersion:"2.16.105",source:{data:u.data,url:u.url,password:u.password,disableAutoFetch:u.disableAutoFetch,rangeChunkSize:u.rangeChunkSize,length:u.length},maxImageSize:u.maxImageSize,disableFontFace:u.disableFontFace,docBaseUrl:u.docBaseUrl,ignoreErrors:u.ignoreErrors,isEvalSupported:u.isEvalSupported,fontExtraProperties:u.fontExtraProperties,enableXfa:u.enableXfa,useSystemFonts:u.useSystemFonts,cMapUrl:u.useWorkerFetch?u.cMapUrl:null,standardFontDataUrl:u.useWorkerFetch?u.standardFontDataUrl:null});if(u.data&&(u.data=null),C.destroyed)throw new Error("Worker was destroyed");return I})).apply(this,arguments)}const L=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+Tm(L,it)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var u=this;return _asyncToGenerator(function*(){var d;u.destroyed=!0,yield null==(d=u._transport)?void 0:d.destroy(),u._transport=null,u._worker&&(u._worker.destroy(),u._worker=null)})()}};let PDFDocumentLoadingTask=L;it=new WeakMap,He(PDFDocumentLoadingTask,it,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(u,d,g=!1,I=null){this.length=u,this.initialData=d,this.progressiveDone=g,this.contentDispositionFilename=I,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,d){for(const g of this._rangeListeners)g(u,d)}onDataProgress(u,d){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(u,d)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const d of this._progressiveReadListeners)d(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,d){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(u,d){var I,g=this;this._pdfInfo=u,this._transport=d,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(I=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),g.stats||{streamTypes:{},fontTypes:{}}}),function(){return I.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(u,d,g,I,O=!1){this._pageIndex=u,this._pageInfo=d,this._ownerDocument=I,this._transport=g,this._stats=O?new _display_utils.StatTimer:null,this._pdfBug=O,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:d=this.rotate,offsetX:g=0,offsetY:I=0,dontFlip:O=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:u,rotation:d,offsetX:g,offsetY:I,dontFlip:O})}getAnnotations({intent:u="display"}={}){const d=this._transport.getRenderingIntent(u);let g=this._annotationPromises.get(d.cacheKey);return g||(g=this._transport.getAnnotations(this._pageIndex,d.renderingIntent),this._annotationPromises.set(d.cacheKey,g),g=g.then(I=>{for(const O of I)void 0!==O.titleObj&&Object.defineProperty(O,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),O.titleObj.str)}),void 0!==O.contentsObj&&Object.defineProperty(O,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),O.contentsObj.str)});return I})),g}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var u=this;return _asyncToGenerator(function*(){var d;return(null==(d=u._transport._htmlForXfa)?void 0:d.children[u._pageIndex])||null})()}render({canvasContext:u,viewport:d,intent:g="display",annotationMode:I=_util.AnnotationMode.ENABLE,transform:O=null,imageLayer:b=null,canvasFactory:h=null,background:f=null,optionalContentConfigPromise:E=null,annotationCanvasMap:y=null,pageColors:R=null,printAnnotationStorage:M=null}){var Q,pe;void 0!==(null==(Q=arguments[0])?void 0:Q.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&I===_util.AnnotationMode.ENABLE&&(I=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(pe=arguments[0])?void 0:pe.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&I===_util.AnnotationMode.ENABLE&&(I=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const z=this._transport.getRenderingIntent(g,I,M);this.pendingCleanup=!1,E||(E=this._transport.getOptionalContentConfig());let ye=this._intentStates.get(z.cacheKey);ye||(ye=Object.create(null),this._intentStates.set(z.cacheKey,ye)),ye.streamReaderCancelTimeout&&(clearTimeout(ye.streamReaderCancelTimeout),ye.streamReaderCancelTimeout=null);const Ce=h||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),De=!!(z.renderingIntent&_util.RenderingIntentFlag.PRINT);ye.displayReadyCapability||(ye.displayReadyCapability=(0,_util.createPromiseCapability)(),ye.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(z));const ze=we=>{ye.renderTasks.delete(Oe),(this.cleanupAfterRender||De)&&(this.pendingCleanup=!0),this._tryCleanup(),we?(Oe.capability.reject(we),this._abortOperatorList({intentState:ye,reason:we instanceof Error?we:new Error(we)})):Oe.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},Oe=new InternalRenderTask({callback:ze,params:{canvasContext:u,viewport:d,transform:O,imageLayer:b,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:y,operatorList:ye.operatorList,pageIndex:this._pageIndex,canvasFactory:Ce,useRequestAnimationFrame:!De,pdfBug:this._pdfBug,pageColors:R});(ye.renderTasks||(ye.renderTasks=new Set)).add(Oe);const J=Oe.task;return Promise.all([ye.displayReadyCapability.promise,E]).then(([we,Je])=>{this.pendingCleanup?ze():(this._stats&&this._stats.time("Rendering"),Oe.initializeGraphics({transparency:we,optionalContentConfig:Je}),Oe.operatorListChanged())}).catch(ze),J}getOperatorList({intent:u="display",annotationMode:d=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){const O=this._transport.getRenderingIntent(u,d,g,!0);let h,b=this._intentStates.get(O.cacheKey);return b||(b=Object.create(null),this._intentStates.set(O.cacheKey,b)),b.opListReadCapability||(h=Object.create(null),h.operatorListChanged=function I(){b.operatorList.lastChunk&&(b.opListReadCapability.resolve(b.operatorList),b.renderTasks.delete(h))},b.opListReadCapability=(0,_util.createPromiseCapability)(),(b.renderTasks||(b.renderTasks=new Set)).add(h),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(O)),b.opListReadCapability.promise}streamTextContent({disableCombineTextItems:u=!1,includeMarkedContent:d=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==u,includeMarkedContent:!0===d},{highWaterMark:100,size:I=>I.items.length})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const d=this.streamTextContent(u);return new Promise(function(g,I){const b=d.getReader(),h={items:[],styles:Object.create(null)};!function O(){b.read().then(function({value:f,done:E}){E?g(h):(Object.assign(h.styles,f.styles),h.items.push(...f.items),O())},I)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const u=[];for(const d of this._intentStates.values())if(this._abortOperatorList({intentState:d,reason:new Error("Page was destroyed."),force:!0}),!d.opListReadCapability)for(const g of d.renderTasks)u.push(g.completed),g.cancel();this.objs.clear();for(const d of this._bitmaps)d.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(u)}cleanup(u=!1){return this.pendingCleanup=!0,this._tryCleanup(u)}_tryCleanup(u=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:d,operatorList:g}of this._intentStates.values())if(d.size>0||!g.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,u&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const d of this._bitmaps)d.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(u,d){const g=this._intentStates.get(d);!g||(this._stats&&this._stats.timeEnd("Page Request"),g.displayReadyCapability&&g.displayReadyCapability.resolve(u))}_renderPageChunk(u,d){for(let g=0,I=u.length;g<I;g++)d.operatorList.fnArray.push(u.fnArray[g]),d.operatorList.argsArray.push(u.argsArray[g]);d.operatorList.lastChunk=u.lastChunk,d.operatorList.separateAnnots=u.separateAnnots;for(const g of d.renderTasks)g.operatorListChanged();u.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:u,cacheKey:d,annotationStorageMap:g}){const O=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:d,annotationStorage:g}).getReader(),b=this._intentStates.get(d);b.streamReader=O;const h=()=>{O.read().then(({value:f,done:E})=>{E?b.streamReader=null:this._transport.destroyed||(this._renderPageChunk(f,b),h())},f=>{if(b.streamReader=null,!this._transport.destroyed){if(b.operatorList){b.operatorList.lastChunk=!0;for(const E of b.renderTasks)E.operatorListChanged();this._tryCleanup()}if(b.displayReadyCapability)b.displayReadyCapability.reject(f);else{if(!b.opListReadCapability)throw f;b.opListReadCapability.reject(f)}}})};h()}_abortOperatorList({intentState:u,reason:d,force:g=!1}){if(u.streamReader){if(!g){if(u.renderTasks.size>0)return;if(d instanceof _display_utils.RenderingCancelledException)return void(u.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:u,reason:d,force:!0}),u.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(u.streamReader.cancel(new _util.AbortException(d.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[I,O]of this._intentStates)if(O===u){this._intentStates.delete(I);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(u,d){const g={data:structuredClone(u,d)};this._deferred.then(()=>{for(const I of this._listeners)I.call(this,g)})}addEventListener(u,d){this._listeners.push(d)}removeEventListener(u,d){const g=this._listeners.indexOf(d);this._listeners.splice(g,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const C=null==(W=null==document?void 0:document.currentScript)?void 0:W.src;C&&(PDFWorkerUtil.fallbackWorkerSrc=C.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(C,u){let d;try{if(d=new URL(C),!d.origin||"null"===d.origin)return!1}catch(I){return!1}const g=new URL(u,d);return d.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(C){return URL.createObjectURL(new Blob([`importScripts("${C}");`]))};const _PDFWorker=class{constructor({name:C=null,port:u=null,verbosity:d=(0,_util.getVerbosityLevel)()}={}){if(u&&G(_PDFWorker,_).has(u))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=C,this.destroyed=!1,this.verbosity=d,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,u)return G(_PDFWorker,_).set(u,this),void this._initializeFromPort(u);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(C){this._port=C,this._messageHandler=new _message_handler.MessageHandler("main","worker",C),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:C}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,C)||(C=PDFWorkerUtil.createCDNWrapper(new URL(C,window.location).href));const u=new Worker(C),d=new _message_handler.MessageHandler("main","worker",u),g=()=>{u.removeEventListener("error",I),d.destroy(),u.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},I=()=>{this._webWorker||g()};u.addEventListener("error",I),d.on("test",b=>{u.removeEventListener("error",I),this.destroyed?g():b?(this._messageHandler=d,this._port=u,this._webWorker=u,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),d.destroy(),u.terminate())}),d.on("ready",b=>{if(u.removeEventListener("error",I),this.destroyed)g();else try{O()}catch(h){this._setupFakeWorker()}});const O=()=>{const b=new Uint8Array;d.send("test",b,[b.buffer])};return void O()}catch(u){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(C=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const u=new LoopbackPort;this._port=u;const d="fake"+PDFWorkerUtil.fakeWorkerId++,g=new _message_handler.MessageHandler(d+"_worker",d,u);C.setup(g,u);const I=new _message_handler.MessageHandler(d,d+"_worker",u);this._messageHandler=I,this._readyCapability.resolve(),I.send("configure",{verbosity:this.verbosity})}).catch(C=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${C.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),G(_PDFWorker,_).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(C){if(!(null==C?void 0:C.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return G(this,_).has(C.port)?G(this,_).get(C.port):new _PDFWorker(C)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var C;try{return(null==(C=globalThis.pdfjsWorker)?void 0:C.WorkerMessageHandler)||null}catch(u){return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function C(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;_=new WeakMap,He(PDFWorker,_,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(u,d,g,I){He(this,N,null),He(this,Se,new Map),He(this,ce,new Map),He(this,Re,null),this.messageHandler=u,this.loadingTask=d,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:d.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:I.ownerDocument,styleElement:I.styleElement}),this._params=I,I.useWorkerFetch||(this.CMapReaderFactory=new I.CMapReaderFactory({baseUrl:I.cMapUrl,isCompressed:I.cMapPacked}),this.StandardFontDataFactory=new I.StandardFontDataFactory({baseUrl:I.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return G(this,N)}getRenderingIntent(u,d=_util.AnnotationMode.ENABLE,g=null,I=!1){let O=_util.RenderingIntentFlag.DISPLAY,b=null;switch(u){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(d){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,b=(O&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${d}`)}return I&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${_annotation_storage.AnnotationStorage.getHash(b)}`,annotationStorageMap:b}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const g of G(this,Se).values())u.push(g._destroy());G(this,Se).clear(),G(this,ce).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const d=this.messageHandler.sendWithPromise("Terminate",null);return u.push(d),Promise.all(u).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),lt(this,Re,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:d}=this;u.on("GetReader",(g,I)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},I.onPull=()=>{this._fullReader.read().then(function({value:O,done:b}){b?I.close():((0,_util.assert)((0,_util.isArrayBuffer)(O),"GetReader - expected an ArrayBuffer."),I.enqueue(new Uint8Array(O),1,[O]))}).catch(O=>{I.error(O)})},I.onCancel=O=>{this._fullReader.cancel(O),I.ready.catch(b=>{if(!this.destroyed)throw b})}}),u.on("ReaderHeadersReady",g=>{const I=(0,_util.createPromiseCapability)(),O=this._fullReader;return O.headersReady.then(()=>{var b;(!O.isStreamingSupported||!O.isRangeSupported)&&(this._lastProgress&&(null==(b=d.onProgress)||b.call(d,this._lastProgress)),O.onProgress=h=>{var f;null==(f=d.onProgress)||f.call(d,{loaded:h.loaded,total:h.total})}),I.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},I.reject),I.promise}),u.on("GetRangeReader",(g,I)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const O=this._networkStream.getRangeReader(g.begin,g.end);O?(I.onPull=()=>{O.read().then(function({value:b,done:h}){h?I.close():((0,_util.assert)((0,_util.isArrayBuffer)(b),"GetRangeReader - expected an ArrayBuffer."),I.enqueue(new Uint8Array(b),1,[b]))}).catch(b=>{I.error(b)})},I.onCancel=b=>{O.cancel(b),I.ready.catch(h=>{if(!this.destroyed)throw h})}):I.close()}),u.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,d._capability.resolve(new PDFDocumentProxy(g,this))}),u.on("DocException",function(g){let I;switch(g.name){case"PasswordException":I=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":I=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":I=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":I=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":I=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}d._capability.reject(I)}),u.on("PasswordRequest",g=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),d.onPassword){const I=O=>{O instanceof Error?this._passwordCapability.reject(O):this._passwordCapability.resolve({password:O})};try{d.onPassword(I,g.code)}catch(O){this._passwordCapability.reject(O)}}else this._passwordCapability.reject(new _util.PasswordException(g.message,g.code));return this._passwordCapability.promise}),u.on("DataLoaded",g=>{var I;null==(I=d.onProgress)||I.call(d,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),u.on("StartRenderPage",g=>{this.destroyed||G(this,Se).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),u.on("commonobj",([g,I,O])=>{var b;if(!this.destroyed&&!this.commonObjs.has(g))switch(I){case"Font":const h=this._params;if("error"in O){const y=O.error;(0,_util.warn)(`Error during font loading: ${y}`),this.commonObjs.resolve(g,y);break}let f=null;h.pdfBug&&(null==(b=globalThis.FontInspector)?void 0:b.enabled)&&(f={registerFont(y,R){globalThis.FontInspector.fontAdded(y,R)}});const E=new _font_loader.FontFaceObject(O,{isEvalSupported:h.isEvalSupported,disableFontFace:h.disableFontFace,ignoreErrors:h.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:f});this.fontLoader.bind(E).catch(y=>u.sendWithPromise("FontFallback",{id:g})).finally(()=>{!h.fontExtraProperties&&E.data&&(E.data=null),this.commonObjs.resolve(g,E)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,O);break;default:throw new Error(`Got unknown common object type ${I}`)}}),u.on("obj",([g,I,O,b])=>{var f;if(this.destroyed)return;const h=G(this,Se).get(I);if(!h.objs.has(g))switch(O){case"Image":h.objs.resolve(g,b);const E=8e6;if(b){let y;if(b.bitmap){const{bitmap:R,width:M,height:z}=b;y=M*z*4,h._bitmaps.add(R)}else y=(null==(f=b.data)?void 0:f.length)||0;y>E&&(h.cleanupAfterRender=!0)}break;case"Pattern":h.objs.resolve(g,b);break;default:throw new Error(`Got unknown object type ${O}`)}}),u.on("DocProgress",g=>{var I;this.destroyed||null==(I=d.onProgress)||I.call(d,{loaded:g.loaded,total:g.total})}),u.on("DocStats",g=>{this.destroyed||lt(this,N,Object.freeze({streamTypes:Object.freeze(g.streamTypes),fontTypes:Object.freeze(g.fontTypes)}))}),u.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),u.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:u}){var d,g;this.destroyed||null==(g=(d=this.loadingTask).onUnsupportedFeature)||g.call(d,u)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const d=u-1,g=G(this,ce).get(d);if(g)return g;const I=this.messageHandler.sendWithPromise("GetPage",{pageIndex:d}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");const b=new PDFPageProxy(d,O,this,this._params.ownerDocument,this._params.pdfBug);return G(this,Se).set(d,b),b});return G(this,ce).set(d,I),I}getPageIndex(u){return"object"!=typeof u||null===u||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,d){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:d})}saveDocument(){var u,d;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(d=null==(u=this._fullReader)?void 0:u.filename)?d:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return"string"!=typeof u?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(u=>new _optional_content_config.OptionalContentConfig(u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return G(this,Re)||lt(this,Re,this.messageHandler.sendWithPromise("GetMetadata",null).then(u=>{var d,g,I,O;return{info:u[0],metadata:u[1]?new _metadata.Metadata(u[1]):null,contentDispositionFilename:null!=(g=null==(d=this._fullReader)?void 0:d.filename)?g:null,contentLength:null!=(O=null==(I=this._fullReader)?void 0:I.contentLength)?O:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(u=!1){var d=this;return _asyncToGenerator(function*(){if(yield d.messageHandler.sendWithPromise("Cleanup",null),!d.destroyed){for(const g of G(d,Se).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);d.commonObjs.clear(),u||d.fontLoader.clear(),lt(d,Re,null),d._getFieldObjectsPromise=null,d._hasJSActionsPromise=null}})()}get loadingParams(){const u=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:u.disableAutoFetch,enableXfa:u.enableXfa})}}N=new WeakMap,Se=new WeakMap,ce=new WeakMap,Re=new WeakMap;class PDFObjects{constructor(){He(this,m),He(this,re,Object.create(null))}get(u,d=null){if(d){const I=We(this,m,GA).call(this,u);return I.capability.promise.then(()=>d(I.data)),null}const g=G(this,re)[u];if(!(null==g?void 0:g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${u}.`);return g.data}has(u){const d=G(this,re)[u];return(null==d?void 0:d.capability.settled)||!1}resolve(u,d=null){const g=We(this,m,GA).call(this,u);g.data=d,g.capability.resolve()}clear(){lt(this,re,Object.create(null))}}re=new WeakMap,m=new WeakSet,GA=function(u){return G(this,re)[u]||(G(this,re)[u]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(u){He(this,D,null),lt(this,D,u),this.onContinue=null}get promise(){return G(this,D).capability.promise}cancel(){G(this,D).cancel()}get separateAnnots(){const{separateAnnots:u}=G(this,D).operatorList;if(!u)return!1;const{annotationCanvasMap:d}=G(this,D);return u.form||u.canvas&&(null==d?void 0:d.size)>0}}D=new WeakMap,exports.RenderTask=RenderTask;const j=class{constructor({callback:u,params:d,objs:g,commonObjs:I,annotationCanvasMap:O,operatorList:b,pageIndex:h,canvasFactory:f,useRequestAnimationFrame:E=!1,pdfBug:y=!1,pageColors:R=null}){this.callback=u,this.params=d,this.objs=g,this.commonObjs=I,this.annotationCanvasMap=O,this.operatorListIdx=null,this.operatorList=b,this._pageIndex=h,this.canvasFactory=f,this._pdfBug=y,this.pageColors=R,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===E&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=d.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:d}){var f;if(this.cancelled)return;if(this._canvas){if(G(j,x).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");G(j,x).add(this._canvas)}this._pdfBug&&(null==(f=globalThis.StepperManager)?void 0:f.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:I,transform:O,imageLayer:b,background:h}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,b,d,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:O,viewport:I,transparency:u,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(u=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&G(j,x).delete(this._canvas),this.callback(u||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var u=this;return _asyncToGenerator(function*(){u.cancelled||(u.operatorListIdx=u.gfx.executeOperatorList(u.operatorList,u.operatorListIdx,u._continueBound,u.stepper),u.operatorListIdx===u.operatorList.argsArray.length&&(u.running=!1,u.operatorList.lastChunk&&(u.gfx.endDrawing(),u._canvas&&G(j,x).delete(u._canvas),u.callback())))})()}};let InternalRenderTask=j;x=new WeakMap,He(InternalRenderTask,x,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(it,L,W)=>{var re,OU,B;Object.defineProperty(L,"__esModule",{value:!0}),L.PrintAnnotationStorage=L.AnnotationStorage=void 0;var _=W(1),N=W(6),Se=W(10);class ce{constructor(){He(this,re),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(x,j){const C=this._storage.get(x);return void 0===C?j:Object.assign(j,C)}getRawValue(x){return this._storage.get(x)}remove(x){if(this._storage.delete(x),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const j of this._storage.values())if(j instanceof N.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(x,j){const C=this._storage.get(x);let u=!1;if(void 0!==C)for(const[d,g]of Object.entries(j))C[d]!==g&&(u=!0,C[d]=g);else u=!0,this._storage.set(x,j);u&&We(this,re,OU).call(this),j instanceof N.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(j.constructor._type)}has(x){return this._storage.has(x)}getAll(){return this._storage.size>0?(0,_.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new Re(this)}get serializable(){if(0===this._storage.size)return null;const x=new Map;for(const[j,C]of this._storage){const u=C instanceof N.AnnotationEditor?C.serialize():C;u&&x.set(j,u)}return x}static getHash(x){if(!x)return"";const j=new Se.MurmurHash3_64;for(const[C,u]of x)j.update(`${C}:${JSON.stringify(u)}`);return j.hexdigest()}}re=new WeakSet,OU=function(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())},L.AnnotationStorage=ce;class Re extends ce{constructor(x){super(),He(this,B,null),lt(this,B,structuredClone(x.serializable))}get print(){(0,_.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return G(this,B)}}B=new WeakMap,L.PrintAnnotationStorage=Re},(it,L,W)=>{var ce,Re,re,m,B,D;Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationEditor=void 0;var _=W(7),N=W(1);const x=class{constructor(C){He(this,ce,this.focusin.bind(this)),He(this,Re,this.focusout.bind(this)),He(this,re,!1),He(this,m,!1),He(this,B,!1),He(this,D,x._zIndex++),this.constructor===x&&(0,N.unreachable)("Cannot initialize AnnotationEditor."),this.parent=C.parent,this.id=C.id,this.width=this.height=null,this.pageIndex=C.parent.pageIndex,this.name=C.name,this.div=null;const[u,d]=this.parent.viewportBaseDimensions;this.x=C.x/u,this.y=C.y/d,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,N.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=G(this,D)}focusin(C){G(this,re)?lt(this,re,!1):this.parent.setSelected(this)}focusout(C){if(!this.isAttachedToDOM)return;const u=C.relatedTarget;(null==u?void 0:u.closest(`#${this.id}`))||(C.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(C){const u=this.parent.div.getBoundingClientRect();this.startX=C.clientX-u.x,this.startY=C.clientY-u.y,C.dataTransfer.setData("text/plain",this.id),C.dataTransfer.effectAllowed="move"}setAt(C,u,d,g){const[I,O]=this.parent.viewportBaseDimensions;[d,g]=this.screenToPageTranslation(d,g),this.x=(C+d)/I,this.y=(u+g)/O,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(C,u){const[d,g]=this.parent.viewportBaseDimensions;[C,u]=this.screenToPageTranslation(C,u),this.x+=C/d,this.y+=u/g,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(C,u){const{rotation:d}=this.parent.viewport;switch(d){case 90:return[u,-C];case 180:return[-C,-u];case 270:return[-u,C];default:return[C,u]}}setDims(C,u){const[d,g]=this.parent.viewportBaseDimensions;this.div.style.width=100*C/d+"%",this.div.style.height=100*u/g+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",G(this,ce)),this.div.addEventListener("focusout",G(this,Re));const[C,u]=this.getInitialTranslation();return this.translate(C,u),(0,_.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(C){const u=_.KeyboardManager.platform.isMac;0!==C.button||C.ctrlKey&&u?C.preventDefault():(C.ctrlKey&&!u||C.shiftKey||C.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this),lt(this,re,!0))}getRect(C,u){const[d,g]=this.parent.viewportBaseDimensions,[I,O]=this.parent.pageDimensions,b=I*C/d,h=O*u/g,f=this.x*I,E=this.y*O,y=this.width*I,R=this.height*O;switch(this.rotation){case 0:return[f+b,O-E-h-R,f+b+y,O-E-h];case 90:return[f+h,O-E+b,f+h+R,O-E+b+y];case 180:return[f-b-y,O-E+h,f-b,O-E+h+R];case 270:return[f-h-R,O-E-b-y,f-h,O-E-b];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(C,u){const[d,g,I,O]=C,b=I-d,h=O-g;switch(this.rotation){case 0:return[d,u-O,b,h];case 90:return[d,u-g,h,b];case 180:return[I,u-g,b,h];case 270:return[I,u-O,h,b];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){lt(this,B,!0)}disableEditMode(){lt(this,B,!1)}isInEditMode(){return G(this,B)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var C;null==(C=this.div)||C.addEventListener("focusin",G(this,ce))}serialize(){(0,N.unreachable)("An editor must be serializable")}static deserialize(C,u){const d=new this.prototype.constructor({parent:u,id:u.getNextId()});d.rotation=C.rotation;const[g,I]=u.pageDimensions,[O,b,h,f]=d.getRectInCurrentCoords(C.rect,I);return d.x=O/g,d.y=b/I,d.width=h/g,d.height=f/I,d}remove(){this.div.removeEventListener("focusin",G(this,ce)),this.div.removeEventListener("focusout",G(this,Re)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var C;null==(C=this.div)||C.classList.add("selectedEditor")}unselect(){var C;null==(C=this.div)||C.classList.remove("selectedEditor")}updateParams(C,u){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return G(this,m)}set isEditing(C){lt(this,m,C),C?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let Se=x;ce=new WeakMap,Re=new WeakMap,re=new WeakMap,m=new WeakMap,B=new WeakMap,D=new WeakMap,Ln(Se,"_colorManager",new _.ColorManager),Ln(Se,"_zIndex",1),L.AnnotationEditor=Se},(it,L,W)=>{var j,C,u,d,g,I,kU,h,E,y,R,M,z,ye,Ce,De,ze,Oe,J,Q,pe,we,Je,fe,S,F,FU,ve,WA,_e,ci,Te,Vd,U,LU,ie,NU,Pe,qA,ot,Hd,nt,Dm;Object.defineProperty(L,"__esModule",{value:!0}),L.KeyboardManager=L.CommandManager=L.ColorManager=L.AnnotationEditorUIManager=void 0,L.bindEvents=function Se(Qe,ee,H){for(const ge of H)ee.addEventListener(ge,Qe[ge].bind(Qe))},L.opacityToHex=function ce(Qe){return Math.round(Math.min(255,Math.max(1,255*Qe))).toString(16).padStart(2,"0")};var _=W(1),N=W(8);class Re{constructor(){He(this,j,0)}getId(){return`${_.AnnotationEditorPrefix}${Tm(this,j)._++}`}}j=new WeakMap;class re{constructor(ee=128){He(this,C,[]),He(this,u,!1),He(this,d,void 0),He(this,g,-1),lt(this,d,ee)}add({cmd:ee,undo:H,mustExec:ge,type:Ne=NaN,overwriteIfSameType:tt=!1,keepUndo:T=!1}){if(ge&&ee(),G(this,u))return;const de={cmd:ee,undo:H,type:Ne};if(-1===G(this,g))return G(this,C).length>0&&(G(this,C).length=0),lt(this,g,0),void G(this,C).push(de);if(tt&&G(this,C)[G(this,g)].type===Ne)return T&&(de.undo=G(this,C)[G(this,g)].undo),void(G(this,C)[G(this,g)]=de);const Ae=G(this,g)+1;Ae===G(this,d)?G(this,C).splice(0,1):(lt(this,g,Ae),Ae<G(this,C).length&&G(this,C).splice(Ae)),G(this,C).push(de)}undo(){-1!==G(this,g)&&(lt(this,u,!0),G(this,C)[G(this,g)].undo(),lt(this,u,!1),lt(this,g,G(this,g)-1))}redo(){G(this,g)<G(this,C).length-1&&(lt(this,g,G(this,g)+1),lt(this,u,!0),G(this,C)[G(this,g)].cmd(),lt(this,u,!1))}hasSomethingToUndo(){return-1!==G(this,g)}hasSomethingToRedo(){return G(this,g)<G(this,C).length-1}destroy(){lt(this,C,null)}}C=new WeakMap,u=new WeakMap,d=new WeakMap,g=new WeakMap,L.CommandManager=re;const b=class{constructor(ee){He(this,I),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const H=b.platform.isMac;for(const[ge,Ne]of ee)for(const tt of ge){const T=tt.startsWith("mac+");H&&T?(this.callbacks.set(tt.slice(4),Ne),this.allKeys.add(tt.split("+").at(-1))):!H&&!T&&(this.callbacks.set(tt,Ne),this.allKeys.add(tt.split("+").at(-1)))}}static get platform(){const ee="undefined"!=typeof navigator?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:ee.includes("Win"),isMac:ee.includes("Mac")})}exec(ee,H){if(!this.allKeys.has(H.key))return;const ge=this.callbacks.get(We(this,I,kU).call(this,H));!ge||(ge.bind(ee)(),H.stopPropagation(),H.preventDefault())}};let m=b;I=new WeakSet,kU=function(ee){ee.altKey&&this.buffer.push("alt"),ee.ctrlKey&&this.buffer.push("ctrl"),ee.metaKey&&this.buffer.push("meta"),ee.shiftKey&&this.buffer.push("shift"),this.buffer.push(ee.key);const H=this.buffer.join("+");return this.buffer.length=0,H},L.KeyboardManager=m;class B{constructor(){He(this,h,null)}copy(ee){!ee||(Array.isArray(ee)?lt(this,h,ee.map(H=>H.serialize())):lt(this,h,[ee.serialize()]),lt(this,h,G(this,h).filter(H=>!!H)),0===G(this,h).length&&lt(this,h,null))}paste(){return G(this,h)}isEmpty(){return null===G(this,h)}destroy(){lt(this,h,null)}}h=new WeakMap;const f=class{get _colors(){const ee=new Map([["CanvasText",null],["Canvas",null]]);return(0,N.getColorValues)(ee),(0,_.shadow)(this,"_colors",ee)}convert(ee){const H=(0,N.getRGB)(ee);if(!window.matchMedia("(forced-colors: active)").matches)return H;for(const[ge,Ne]of this._colors)if(Ne.every((tt,T)=>tt===H[T]))return f._colorsMapping.get(ge);return H}getHexCode(ee){const H=this._colors.get(ee);return H?_.Util.makeHexColor(...H):ee}};let D=f;Ln(D,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),L.ColorManager=D;const ke=class{constructor(ee,H){He(this,F),He(this,ve),He(this,_e),He(this,Te),He(this,U),He(this,ie),He(this,Pe),He(this,ot),He(this,nt),He(this,E,null),He(this,y,new Map),He(this,R,new Map),He(this,M,new B),He(this,z,new re),He(this,ye,0),He(this,Ce,null),He(this,De,null),He(this,ze,new Re),He(this,Oe,!1),He(this,J,_.AnnotationEditorType.NONE),He(this,Q,new Set),He(this,pe,this.keydown.bind(this)),He(this,we,this.onEditingAction.bind(this)),He(this,Je,this.onPageChanging.bind(this)),He(this,fe,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),He(this,S,null),lt(this,S,ee),lt(this,De,H),G(this,De)._on("editingaction",G(this,we)),G(this,De)._on("pagechanging",G(this,Je))}destroy(){We(this,ve,WA).call(this),G(this,De)._off("editingaction",G(this,we)),G(this,De)._off("pagechanging",G(this,Je));for(const ee of G(this,R).values())ee.destroy();G(this,R).clear(),G(this,y).clear(),lt(this,E,null),G(this,Q).clear(),G(this,M).destroy(),G(this,z).destroy()}onPageChanging({pageNumber:ee}){lt(this,ye,ee-1)}focusMainContainer(){G(this,S).focus()}keydown(ee){var H;(null==(H=this.getActive())?void 0:H.shouldGetKeyboardEvents())||ke._keyboardManager.exec(this,ee)}onEditingAction(ee){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ee.name)&&this[ee.name]()}setEditingState(ee){ee?(We(this,F,FU).call(this),We(this,_e,ci).call(this,{isEditing:G(this,J)!==_.AnnotationEditorType.NONE,isEmpty:We(this,ot,Hd).call(this),hasSomethingToUndo:G(this,z).hasSomethingToUndo(),hasSomethingToRedo:G(this,z).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:G(this,M).isEmpty()})):(We(this,ve,WA).call(this),We(this,_e,ci).call(this,{isEditing:!1}))}registerEditorTypes(ee){lt(this,Ce,ee);for(const H of G(this,Ce))We(this,Te,Vd).call(this,H.defaultPropertiesToUpdate)}getId(){return G(this,ze).getId()}addLayer(ee){G(this,R).set(ee.pageIndex,ee),G(this,Oe)?ee.enable():ee.disable()}removeLayer(ee){G(this,R).delete(ee.pageIndex)}updateMode(ee){if(lt(this,J,ee),ee===_.AnnotationEditorType.NONE)this.setEditingState(!1),We(this,ie,NU).call(this);else{this.setEditingState(!0),We(this,U,LU).call(this);for(const H of G(this,R).values())H.updateMode(ee)}}updateToolbar(ee){ee!==G(this,J)&&G(this,De).dispatch("switchannotationeditormode",{source:this,mode:ee})}updateParams(ee,H){for(const ge of G(this,Q))ge.updateParams(ee,H);for(const ge of G(this,Ce))ge.updateDefaultParams(ee,H)}getEditors(ee){const H=[];for(const ge of G(this,y).values())ge.pageIndex===ee&&H.push(ge);return H}getEditor(ee){return G(this,y).get(ee)}addEditor(ee){G(this,y).set(ee.id,ee)}removeEditor(ee){G(this,y).delete(ee.id),this.unselect(ee)}setActiveEditor(ee){G(this,E)!==ee&&(lt(this,E,ee),ee&&We(this,Te,Vd).call(this,ee.propertiesToUpdate))}toggleSelected(ee){if(G(this,Q).has(ee))return G(this,Q).delete(ee),ee.unselect(),void We(this,_e,ci).call(this,{hasSelectedEditor:this.hasSelection});G(this,Q).add(ee),ee.select(),We(this,Te,Vd).call(this,ee.propertiesToUpdate),We(this,_e,ci).call(this,{hasSelectedEditor:!0})}setSelected(ee){for(const H of G(this,Q))H!==ee&&H.unselect();G(this,Q).clear(),G(this,Q).add(ee),ee.select(),We(this,Te,Vd).call(this,ee.propertiesToUpdate),We(this,_e,ci).call(this,{hasSelectedEditor:!0})}isSelected(ee){return G(this,Q).has(ee)}unselect(ee){ee.unselect(),G(this,Q).delete(ee),We(this,_e,ci).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==G(this,Q).size}undo(){G(this,z).undo(),We(this,_e,ci).call(this,{hasSomethingToUndo:G(this,z).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:We(this,ot,Hd).call(this)})}redo(){G(this,z).redo(),We(this,_e,ci).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:G(this,z).hasSomethingToRedo(),isEmpty:We(this,ot,Hd).call(this)})}addCommands(ee){G(this,z).add(ee),We(this,_e,ci).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:We(this,ot,Hd).call(this)})}delete(){if(G(this,E)&&G(this,E).commitOrRemove(),!this.hasSelection)return;const ee=[...G(this,Q)];this.addCommands({cmd:()=>{for(const Ne of ee)Ne.remove()},undo:()=>{for(const Ne of ee)We(this,Pe,qA).call(this,Ne)},mustExec:!0})}copy(){if(G(this,E)&&G(this,E).commitOrRemove(),this.hasSelection){const ee=[];for(const H of G(this,Q))H.isEmpty()||ee.push(H);if(0===ee.length)return;G(this,M).copy(ee),We(this,_e,ci).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(G(this,M).isEmpty())return;this.unselectAll();const ee=G(this,R).get(G(this,ye)),H=G(this,M).paste().map(tt=>ee.deserialize(tt));this.addCommands({cmd:()=>{for(const tt of H)We(this,Pe,qA).call(this,tt);We(this,nt,Dm).call(this,H)},undo:()=>{for(const tt of H)tt.remove()},mustExec:!0})}selectAll(){for(const ee of G(this,Q))ee.commit();We(this,nt,Dm).call(this,G(this,y).values())}unselectAll(){if(G(this,E))G(this,E).commitOrRemove();else if(0!==We(this,nt,Dm).size){for(const ee of G(this,Q))ee.unselect();G(this,Q).clear(),We(this,_e,ci).call(this,{hasSelectedEditor:!1})}}isActive(ee){return G(this,E)===ee}getActive(){return G(this,E)}getMode(){return G(this,J)}};let x=ke;E=new WeakMap,y=new WeakMap,R=new WeakMap,M=new WeakMap,z=new WeakMap,ye=new WeakMap,Ce=new WeakMap,De=new WeakMap,ze=new WeakMap,Oe=new WeakMap,J=new WeakMap,Q=new WeakMap,pe=new WeakMap,we=new WeakMap,Je=new WeakMap,fe=new WeakMap,S=new WeakMap,F=new WeakSet,FU=function(){G(this,S).addEventListener("keydown",G(this,pe))},ve=new WeakSet,WA=function(){G(this,S).removeEventListener("keydown",G(this,pe))},_e=new WeakSet,ci=function(ee){Object.entries(ee).some(([ge,Ne])=>G(this,fe)[ge]!==Ne)&&G(this,De).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(G(this,fe),ee)})},Te=new WeakSet,Vd=function(ee){G(this,De).dispatch("annotationeditorparamschanged",{source:this,details:ee})},U=new WeakSet,LU=function(){if(!G(this,Oe)){lt(this,Oe,!0);for(const ee of G(this,R).values())ee.enable()}},ie=new WeakSet,NU=function(){if(this.unselectAll(),G(this,Oe)){lt(this,Oe,!1);for(const ee of G(this,R).values())ee.disable()}},Pe=new WeakSet,qA=function(ee){const H=G(this,R).get(ee.pageIndex);H?H.addOrRebuild(ee):this.addEditor(ee)},ot=new WeakSet,Hd=function(){if(0===G(this,y).size)return!0;if(1===G(this,y).size)for(const ee of G(this,y).values())return ee.isEmpty();return!1},nt=new WeakSet,Dm=function(ee){G(this,Q).clear();for(const H of ee)H.isEmpty()||(G(this,Q).add(H),H.select());We(this,_e,ci).call(this,{hasSelectedEditor:!0})},Ln(x,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],ke.prototype.selectAll],[["ctrl+c","mac+meta+c"],ke.prototype.copy],[["ctrl+v","mac+meta+v"],ke.prototype.paste],[["ctrl+x","mac+meta+x"],ke.prototype.cut],[["ctrl+z","mac+meta+z"],ke.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ke.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ke.prototype.delete],[["Escape","mac+Escape"],ke.prototype.unselectAll]])),L.AnnotationEditorUIManager=x},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.StatTimer=L.RenderingCancelledException=L.PixelsPerInch=L.PageViewport=L.PDFDateString=L.DOMStandardFontDataFactory=L.DOMSVGFactory=L.DOMCanvasFactory=L.DOMCMapReaderFactory=L.AnnotationPrefix=void 0,L.deprecated=function E(Oe){console.log("Deprecated API usage: "+Oe)},L.getColorValues=function ye(Oe){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const Q of Oe.keys()){J.style.color=Q;const pe=window.getComputedStyle(J).color;Oe.set(Q,z(pe))}J.remove()},L.getCurrentTransform=function Ce(Oe){const{a:J,b:Q,c:pe,d:we,e:Je,f:fe}=Oe.getTransform();return[J,Q,pe,we,Je,fe]},L.getCurrentTransformInverse=function De(Oe){const{a:J,b:Q,c:pe,d:we,e:Je,f:fe}=Oe.getTransform().invertSelf();return[J,Q,pe,we,Je,fe]},L.getFilenameFromUrl=function I(Oe){const J=Oe.indexOf("#"),Q=Oe.indexOf("?"),pe=Math.min(J>0?J:Oe.length,Q>0?Q:Oe.length);return Oe.substring(Oe.lastIndexOf("/",pe)+1,pe)},L.getPdfFilenameFromUrl=function O(Oe,J="document.pdf"){if("string"!=typeof Oe)return J;if(d(Oe))return(0,N.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const pe=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,we=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(Oe);let Je=pe.exec(we[1])||pe.exec(we[2])||pe.exec(we[3]);if(Je&&(Je=Je[0],Je.includes("%")))try{Je=pe.exec(decodeURIComponent(Je))[0]}catch(fe){}return Je||J},L.getRGB=z,L.getXfaPageViewport=function M(Oe,{scale:J=1,rotation:Q=0}){const{width:pe,height:we}=Oe.attributes.style,Je=[0,0,parseInt(pe),parseInt(we)];return new C({viewBox:Je,scale:J,rotation:Q})},L.isDataScheme=d,L.isPdfFile=function g(Oe){return"string"==typeof Oe&&/\.pdf$/i.test(Oe)},L.isValidFetchUrl=h,L.loadScript=function f(Oe,J=!1){return new Promise((Q,pe)=>{const we=document.createElement("script");we.src=Oe,we.onload=function(Je){J&&we.remove(),Q(Je)},we.onerror=function(){pe(new Error(`Cannot load script at: ${we.src}`))},(document.head||document.documentElement).append(we)})};var _=W(9),N=W(1);L.AnnotationPrefix="pdfjs_internal_id_";const ze=class{};let y,Re=ze;function m(Oe){return B.apply(this,arguments)}function B(){return(B=_asyncToGenerator(function*(Oe,J=!1){if(h(Oe,document.baseURI)){const Q=yield fetch(Oe);if(!Q.ok)throw new Error(Q.statusText);return J?new Uint8Array(yield Q.arrayBuffer()):(0,N.stringToBytes)(yield Q.text())}return new Promise((Q,pe)=>{const we=new XMLHttpRequest;we.open("GET",Oe,!0),J&&(we.responseType="arraybuffer"),we.onreadystatechange=()=>{if(we.readyState===XMLHttpRequest.DONE){if(200===we.status||0===we.status){let Je;if(J&&we.response?Je=new Uint8Array(we.response):!J&&we.responseText&&(Je=(0,N.stringToBytes)(we.responseText)),Je)return void Q(Je)}pe(new Error(we.statusText))}},we.send(null)})})).apply(this,arguments)}Ln(Re,"CSS",96),Ln(Re,"PDF",72),Ln(Re,"PDF_TO_CSS_UNITS",ze.CSS/ze.PDF),L.PixelsPerInch=Re,L.DOMCanvasFactory=class re extends _.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,Q){const pe=this._document.createElement("canvas");return pe.width=J,pe.height=Q,pe}},L.DOMCMapReaderFactory=class D extends _.BaseCMapReaderFactory{_fetchData(J,Q){return m(J,this.isCompressed).then(pe=>({cMapData:pe,compressionType:Q}))}},L.DOMStandardFontDataFactory=class x extends _.BaseStandardFontDataFactory{_fetchData(J){return m(J,!0)}},L.DOMSVGFactory=class j extends _.BaseSVGFactory{_createSVG(J){return document.createElementNS("http://www.w3.org/2000/svg",J)}};class C{constructor({viewBox:J,scale:Q,rotation:pe,offsetX:we=0,offsetY:Je=0,dontFlip:fe=!1}){this.viewBox=J,this.scale=Q,this.rotation=pe,this.offsetX=we,this.offsetY=Je;const S=(J[2]+J[0])/2,F=(J[3]+J[1])/2;let te,ve,le,_e,Ie,Te,w,U;switch((pe%=360)<0&&(pe+=360),pe){case 180:te=-1,ve=0,le=0,_e=1;break;case 90:te=0,ve=1,le=1,_e=0;break;case 270:te=0,ve=-1,le=-1,_e=0;break;case 0:te=1,ve=0,le=0,_e=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}fe&&(le=-le,_e=-_e),0===te?(Ie=Math.abs(F-J[1])*Q+we,Te=Math.abs(S-J[0])*Q+Je,w=Math.abs(J[3]-J[1])*Q,U=Math.abs(J[2]-J[0])*Q):(Ie=Math.abs(S-J[0])*Q+we,Te=Math.abs(F-J[1])*Q+Je,w=Math.abs(J[2]-J[0])*Q,U=Math.abs(J[3]-J[1])*Q),this.transform=[te*Q,ve*Q,le*Q,_e*Q,Ie-te*Q*S-le*Q*F,Te-ve*Q*S-_e*Q*F],this.width=w,this.height=U}clone({scale:J=this.scale,rotation:Q=this.rotation,offsetX:pe=this.offsetX,offsetY:we=this.offsetY,dontFlip:Je=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:J,rotation:Q,offsetX:pe,offsetY:we,dontFlip:Je})}convertToViewportPoint(J,Q){return N.Util.applyTransform([J,Q],this.transform)}convertToViewportRectangle(J){const Q=N.Util.applyTransform([J[0],J[1]],this.transform),pe=N.Util.applyTransform([J[2],J[3]],this.transform);return[Q[0],Q[1],pe[0],pe[1]]}convertToPdfPoint(J,Q){return N.Util.applyInverseTransform([J,Q],this.transform)}}function d(Oe){const J=Oe.length;let Q=0;for(;Q<J&&""===Oe[Q].trim();)Q++;return"data:"===Oe.substring(Q,Q+5).toLowerCase()}function h(Oe,J){try{const{protocol:Q}=J?new URL(Oe,J):new URL(Oe);return"http:"===Q||"https:"===Q}catch(Q){return!1}}function z(Oe){if(Oe.startsWith("#")){const J=parseInt(Oe.slice(1),16);return[(16711680&J)>>16,(65280&J)>>8,255&J]}return Oe.startsWith("rgb(")?Oe.slice(4,-1).split(",").map(J=>parseInt(J)):Oe.startsWith("rgba(")?Oe.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,N.warn)(`Not a valid color format: "${Oe}"`),[0,0,0])}L.PageViewport=C,L.RenderingCancelledException=class u extends N.BaseException{constructor(J,Q){super(J,"RenderingCancelledException"),this.type=Q}},L.StatTimer=class b{constructor(){this.started=Object.create(null),this.times=[]}time(J){J in this.started&&(0,N.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,N.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let Q=0;for(const pe of this.times){const we=pe.name;we.length>Q&&(Q=we.length)}for(const pe of this.times){const we=pe.end-pe.start;J.push(`${pe.name.padEnd(Q)} ${we}ms\n`)}return J.join("")}},L.PDFDateString=class R{static toDateObject(J){if(!J||"string"!=typeof J)return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Q=y.exec(J);if(!Q)return null;const pe=parseInt(Q[1],10);let we=parseInt(Q[2],10);we=we>=1&&we<=12?we-1:0;let Je=parseInt(Q[3],10);Je=Je>=1&&Je<=31?Je:1;let fe=parseInt(Q[4],10);fe=fe>=0&&fe<=23?fe:0;let S=parseInt(Q[5],10);S=S>=0&&S<=59?S:0;let F=parseInt(Q[6],10);F=F>=0&&F<=59?F:0;const te=Q[7]||"Z";let ve=parseInt(Q[8],10);ve=ve>=0&&ve<=23?ve:0;let le=parseInt(Q[9],10)||0;return le=le>=0&&le<=59?le:0,"-"===te?(fe+=ve,S+=le):"+"===te&&(fe-=ve,S-=le),new Date(Date.UTC(pe,we,Je,fe,S,F))}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.BaseStandardFontDataFactory=L.BaseSVGFactory=L.BaseCanvasFactory=L.BaseCMapReaderFactory=void 0;var _=W(1);class N{constructor(){this.constructor===N&&(0,_.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,B){if(m<=0||B<=0)throw new Error("Invalid canvas size");const D=this._createCanvas(m,B);return{canvas:D,context:D.getContext("2d")}}reset(m,B,D){if(!m.canvas)throw new Error("Canvas is not specified");if(B<=0||D<=0)throw new Error("Invalid canvas size");m.canvas.width=B,m.canvas.height=D}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,B){(0,_.unreachable)("Abstract method `_createCanvas` called.")}}L.BaseCanvasFactory=N;class Se{constructor({baseUrl:m=null,isCompressed:B=!1}){this.constructor===Se&&(0,_.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=B}fetch({name:m}){var B=this;return _asyncToGenerator(function*(){if(!B.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const D=B.baseUrl+m+(B.isCompressed?".bcmap":"");return B._fetchData(D,B.isCompressed?_.CMapCompressionType.BINARY:_.CMapCompressionType.NONE).catch(j=>{throw new Error(`Unable to load ${B.isCompressed?"binary ":""}CMap at: ${D}`)})})()}_fetchData(m,B){(0,_.unreachable)("Abstract method `_fetchData` called.")}}L.BaseCMapReaderFactory=Se;class ce{constructor({baseUrl:m=null}){this.constructor===ce&&(0,_.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}fetch({filename:m}){var B=this;return _asyncToGenerator(function*(){if(!B.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const D=`${B.baseUrl}${m}`;return B._fetchData(D).catch(x=>{throw new Error(`Unable to load font data at: ${D}`)})})()}_fetchData(m){(0,_.unreachable)("Abstract method `_fetchData` called.")}}L.BaseStandardFontDataFactory=ce;class Re{constructor(){this.constructor===Re&&(0,_.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,B,D=!1){if(m<=0||B<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),D||(x.setAttribute("width",`${m}px`),x.setAttribute("height",`${B}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${m} ${B}`),x}createElement(m){if("string"!=typeof m)throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,_.unreachable)("Abstract method `_createSVG` called.")}}L.BaseSVGFactory=Re},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.MurmurHash3_64=void 0;var _=W(1);const N=3285377520,Se=4294901760,ce=65535;L.MurmurHash3_64=class Re{constructor(m){this.h1=m?4294967295&m:N,this.h2=m?4294967295&m:N}update(m){let B,D;if("string"==typeof m){B=new Uint8Array(2*m.length),D=0;for(let E=0,y=m.length;E<y;E++){const R=m.charCodeAt(E);R<=255?B[D++]=R:(B[D++]=R>>>8,B[D++]=255&R)}}else{if(!(0,_.isArrayBuffer)(m))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");B=m.slice(),D=B.byteLength}const x=D>>2,j=D-4*x,C=new Uint32Array(B.buffer,0,x);let u=0,d=0,g=this.h1,I=this.h2;const O=3432918353,b=461845907,h=O&ce,f=b&ce;for(let E=0;E<x;E++)1&E?(u=C[E],u=u*O&Se|u*h&ce,u=u<<15|u>>>17,u=u*b&Se|u*f&ce,g^=u,g=g<<13|g>>>19,g=5*g+3864292196):(d=C[E],d=d*O&Se|d*h&ce,d=d<<15|d>>>17,d=d*b&Se|d*f&ce,I^=d,I=I<<13|I>>>19,I=5*I+3864292196);switch(u=0,j){case 3:u^=B[4*x+2]<<16;case 2:u^=B[4*x+1]<<8;case 1:u^=B[4*x],u=u*O&Se|u*h&ce,u=u<<15|u>>>17,u=u*b&Se|u*f&ce,1&x?g^=u:I^=u}this.h1=g,this.h2=I}hexdigest(){let m=this.h1,B=this.h2;m^=B>>>1,m=3981806797*m&Se|36045*m&ce,B=4283543511*B&Se|(2950163797*(B<<16|m>>>16)&Se)>>>16,m^=B>>>1,m=444984403*m&Se|60499*m&ce,B=3301882366*B&Se|(3120437893*(B<<16|m>>>16)&Se)>>>16,m^=B>>>1;const D=(m>>>0).toString(16),x=(B>>>0).toString(16);return D.padStart(8,"0")+x.padStart(8,"0")}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.FontLoader=L.FontFaceObject=void 0;var _=W(1);class N{constructor({docId:re,onUnsupportedFeature:m,ownerDocument:B=globalThis.document,styleElement:D=null}){this.constructor===N&&(0,_.unreachable)("Cannot initialize BaseFontLoader."),this.docId=re,this._onUnsupportedFeature=m,this._document=B,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(re){this.nativeFontFaces.push(re),this._document.fonts.add(re)}insertRule(re){let m=this.styleElement;m||(m=this.styleElement=this._document.createElement("style"),m.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(m));const B=m.sheet;B.insertRule(re,B.cssRules.length)}clear(){for(const re of this.nativeFontFaces)this._document.fonts.delete(re);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(re){var m=this;return _asyncToGenerator(function*(){if(re.attached||re.missingFile)return;if(re.attached=!0,m.isFontLoadingAPISupported){const D=re.createNativeFontFace();if(D){m.addNativeFontFace(D);try{yield D.loaded}catch(x){throw m._onUnsupportedFeature({featureId:_.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_.warn)(`Failed to load font '${D.family}': '${x}'.`),re.disableFontFace=!0,x}}return}const B=re.createFontFaceRule();if(B){if(m.insertRule(B),m.isSyncFontLoadingSupported)return;yield new Promise(D=>{const x=m._queueLoadingCallback(D);m._prepareFontLoadEvent([B],[re],x)})}})()}_queueLoadingCallback(re){(0,_.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var m;const re=!!(null==(m=this._document)?void 0:m.fonts);return(0,_.shadow)(this,"isFontLoadingAPISupported",re)}get isSyncFontLoadingSupported(){(0,_.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,_.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(re,m,B){(0,_.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let Se;L.FontLoader=Se,L.FontLoader=Se=class extends N{constructor(re){super(re),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let re=!1;if("undefined"==typeof navigator)re=!0;else{const m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==m?void 0:m[1])>=14&&(re=!0)}return(0,_.shadow)(this,"isSyncFontLoadingSupported",re)}_queueLoadingCallback(re){const B=this.loadingContext,D={id:"pdfjs-font-loading-"+B.nextRequestId++,done:!1,complete:function m(){for((0,_.assert)(!D.done,"completeRequest() cannot be called twice."),D.done=!0;B.requests.length>0&&B.requests[0].done;){const x=B.requests.shift();setTimeout(x.callback,0)}},callback:re};return B.requests.push(D),D}get _loadTestFont(){return(0,_.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(re,m,B){function D(Ce,De){return Ce.charCodeAt(De)<<24|Ce.charCodeAt(De+1)<<16|Ce.charCodeAt(De+2)<<8|255&Ce.charCodeAt(De+3)}function x(Ce,De,ze,Oe){return Ce.substring(0,De)+Oe+Ce.substring(De+ze)}let j,C;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let g=0;const O=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=x(b,976,O.length,O);const E=1482184792;let y=D(b,16);for(j=0,C=O.length-3;j<C;j+=4)y=y-E+D(O,j)|0;j<O.length&&(y=y-E+D(O+"XXX",j)|0),b=x(b,16,4,(0,_.string32)(y));const R=`url(data:font/opentype;base64,${btoa(b)});`;this.insertRule(`@font-face {font-family:"${O}";src:${R}}`);const z=[];for(const Ce of m)z.push(Ce.loadedName);z.push(O);const ye=this._document.createElement("div");ye.style.visibility="hidden",ye.style.width=ye.style.height="10px",ye.style.position="absolute",ye.style.top=ye.style.left="0px";for(const Ce of z){const De=this._document.createElement("span");De.textContent="Hi",De.style.fontFamily=Ce,ye.append(De)}this._document.body.append(ye),function I(Ce,De){if(g++,g>30)return(0,_.warn)("Load test font never loaded."),void De();d.font="30px "+Ce,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0?De():setTimeout(I.bind(null,Ce,De))}(O,()=>{ye.remove(),B.complete()})}},L.FontFaceObject=class ce{constructor(re,{isEvalSupported:m=!0,disableFontFace:B=!1,ignoreErrors:D=!1,onUnsupportedFeature:x,fontRegistry:j=null}){this.compiledGlyphs=Object.create(null);for(const C in re)this[C]=re[C];this.isEvalSupported=!1!==m,this.disableFontFace=!0===B,this.ignoreErrors=!0===D,this._onUnsupportedFeature=x,this.fontRegistry=j}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let re;if(this.cssFontInfo){const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),re=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}else re=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),re}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const re=(0,_.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(re)});`;let B;if(this.cssFontInfo){let D=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(D+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),B=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${D}src:${m}}`}else B=`@font-face {font-family:"${this.loadedName}";src:${m}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,m),B}getPathGenerator(re,m){if(void 0!==this.compiledGlyphs[m])return this.compiledGlyphs[m];let B;try{B=re.get(this.loadedName+"_path_"+m)}catch(D){if(!this.ignoreErrors)throw D;return this._onUnsupportedFeature({featureId:_.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_.warn)(`getPathGenerator - ignoring character: "${D}".`),this.compiledGlyphs[m]=function(x,j){}}if(this.isEvalSupported&&_.FeatureTest.isEvalSupported){const D=[];for(const x of B){const j=void 0!==x.args?x.args.join(","):"";D.push("c.",x.cmd,"(",j,");\n")}return this.compiledGlyphs[m]=new Function("c","size",D.join(""))}return this.compiledGlyphs[m]=function(D,x){for(const j of B)"scale"===j.cmd&&(j.args=[x,-x]),D[j.cmd].apply(D,j.args)}}}},(it,L,W)=>{var pe,XA;Object.defineProperty(L,"__esModule",{value:!0}),L.CanvasGraphics=void 0;var _=W(8),N=W(1),Se=W(13),ce=W(14),Re=W(3);const B=4096,j=Re.isNodeJS&&"undefined"==typeof Path2D?-1:1e3,C=16;class d{constructor(S){this.canvasFactory=S,this.cache=Object.create(null)}getCanvas(S,F,te){let ve;return void 0!==this.cache[S]?(ve=this.cache[S],this.canvasFactory.reset(ve,F,te)):(ve=this.canvasFactory.create(F,te),this.cache[S]=ve),ve}delete(S){delete this.cache[S]}clear(){for(const S in this.cache)this.canvasFactory.destroy(this.cache[S]),delete this.cache[S]}}function g(fe,S,F,te,ve,le,_e,Ie,Te,w){const[U,q,ie,ae,Pe,Ke]=(0,_.getCurrentTransform)(fe);if(0===q&&0===ie){const me=Math.round(_e*U+Pe),Qe=Math.round(Ie*ae+Ke),H=Math.abs(Math.round((_e+Te)*U+Pe)-me)||1,Ne=Math.abs(Math.round((Ie+w)*ae+Ke)-Qe)||1;return fe.setTransform(Math.sign(U),0,0,Math.sign(ae),me,Qe),fe.drawImage(S,F,te,ve,le,0,0,H,Ne),fe.setTransform(U,q,ie,ae,Pe,Ke),[H,Ne]}if(0===U&&0===ae){const me=Math.round(Ie*ie+Pe),Qe=Math.round(_e*q+Ke),H=Math.abs(Math.round((Ie+w)*ie+Pe)-me)||1,Ne=Math.abs(Math.round((_e+Te)*q+Ke)-Qe)||1;return fe.setTransform(0,Math.sign(q),Math.sign(ie),0,me,Qe),fe.drawImage(S,F,te,ve,le,0,0,Ne,H),fe.setTransform(U,q,ie,ae,Pe,Ke),[Ne,H]}return fe.drawImage(S,F,te,ve,le,_e,Ie,Te,w),[Math.hypot(U,q)*Te,Math.hypot(ie,ae)*w]}class O{constructor(S,F){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=N.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=N.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=N.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,S,F])}clone(){const S=Object.create(this);return S.clipBox=this.clipBox.slice(),S}setCurrentPoint(S,F){this.x=S,this.y=F}updatePathMinMax(S,F,te){[F,te]=N.Util.applyTransform([F,te],S),this.minX=Math.min(this.minX,F),this.minY=Math.min(this.minY,te),this.maxX=Math.max(this.maxX,F),this.maxY=Math.max(this.maxY,te)}updateRectMinMax(S,F){const te=N.Util.applyTransform(F,S),ve=N.Util.applyTransform(F.slice(2),S);this.minX=Math.min(this.minX,te[0],ve[0]),this.minY=Math.min(this.minY,te[1],ve[1]),this.maxX=Math.max(this.maxX,te[0],ve[0]),this.maxY=Math.max(this.maxY,te[1],ve[1])}updateScalingPathMinMax(S,F){N.Util.scaleMinMax(S,F),this.minX=Math.min(this.minX,F[0]),this.maxX=Math.max(this.maxX,F[1]),this.minY=Math.min(this.minY,F[2]),this.maxY=Math.max(this.maxY,F[3])}updateCurvePathMinMax(S,F,te,ve,le,_e,Ie,Te,w,U){const q=N.Util.bezierBoundingBox(F,te,ve,le,_e,Ie,Te,w);if(U)return U[0]=Math.min(U[0],q[0],q[2]),U[1]=Math.max(U[1],q[0],q[2]),U[2]=Math.min(U[2],q[1],q[3]),void(U[3]=Math.max(U[3],q[1],q[3]));this.updateRectMinMax(S,q)}getPathBoundingBox(S=Se.PathType.FILL,F=null){const te=[this.minX,this.minY,this.maxX,this.maxY];if(S===Se.PathType.STROKE){F||(0,N.unreachable)("Stroke bounding box must include transform.");const ve=N.Util.singularValueDecompose2dScale(F),le=ve[0]*this.lineWidth/2,_e=ve[1]*this.lineWidth/2;te[0]-=le,te[1]-=_e,te[2]+=le,te[3]+=_e}return te}updateClipFromPath(){const S=N.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(S||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(S){this.clipBox=S,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(S=Se.PathType.FILL,F=null){return N.Util.intersect(this.clipBox,this.getPathBoundingBox(S,F))}}function b(fe,S,F=null){if("undefined"!=typeof ImageData&&S instanceof ImageData)return void fe.putImageData(S,0,0);const te=S.height,ve=S.width,le=te%C,_e=(te-le)/C,Ie=0===le?_e:_e+1,Te=fe.createImageData(ve,C);let U,w=0;const q=S.data,ie=Te.data;let ae,Pe,Ke,ot,Fe,nt,me,ke;if(F)switch(F.length){case 1:Fe=F[0],nt=F[0],me=F[0],ke=F[0];break;case 4:Fe=F[0],nt=F[1],me=F[2],ke=F[3]}if(S.kind===N.ImageKind.GRAYSCALE_1BPP){const Qe=q.byteLength,ee=new Uint32Array(ie.buffer,0,ie.byteLength>>2),H=ee.length,ge=ve+7>>3;let Ne=4294967295,tt=N.FeatureTest.isLittleEndian?4278190080:255;for(ke&&255===ke[0]&&0===ke[255]&&([Ne,tt]=[tt,Ne]),ae=0;ae<Ie;ae++){for(Ke=ae<_e?C:le,U=0,Pe=0;Pe<Ke;Pe++){const T=Qe-w;let de=0;const Ae=T>ge?ve:8*T-7,oe=-8&Ae;let xe=0,Xe=0;for(;de<oe;de+=8)Xe=q[w++],ee[U++]=128&Xe?Ne:tt,ee[U++]=64&Xe?Ne:tt,ee[U++]=32&Xe?Ne:tt,ee[U++]=16&Xe?Ne:tt,ee[U++]=8&Xe?Ne:tt,ee[U++]=4&Xe?Ne:tt,ee[U++]=2&Xe?Ne:tt,ee[U++]=1&Xe?Ne:tt;for(;de<Ae;de++)0===xe&&(Xe=q[w++],xe=128),ee[U++]=Xe&xe?Ne:tt,xe>>=1}for(;U<H;)ee[U++]=0;fe.putImageData(Te,0,ae*C)}}else if(S.kind===N.ImageKind.RGBA_32BPP){const Qe=!!(Fe||nt||me);for(Pe=0,ot=ve*C*4,ae=0;ae<_e;ae++){if(ie.set(q.subarray(w,w+ot)),w+=ot,Qe)for(let ee=0;ee<ot;ee+=4)Fe&&(ie[ee+0]=Fe[ie[ee+0]]),nt&&(ie[ee+1]=nt[ie[ee+1]]),me&&(ie[ee+2]=me[ie[ee+2]]);fe.putImageData(Te,0,Pe),Pe+=C}if(ae<Ie){if(ot=ve*le*4,ie.set(q.subarray(w,w+ot)),Qe)for(let ee=0;ee<ot;ee+=4)Fe&&(ie[ee+0]=Fe[ie[ee+0]]),nt&&(ie[ee+1]=nt[ie[ee+1]]),me&&(ie[ee+2]=me[ie[ee+2]]);fe.putImageData(Te,0,Pe)}}else{if(S.kind!==N.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${S.kind}`);{const Qe=!!(Fe||nt||me);for(Ke=C,ot=ve*Ke,ae=0;ae<Ie;ae++){for(ae>=_e&&(Ke=le,ot=ve*Ke),U=0,Pe=ot;Pe--;)ie[U++]=q[w++],ie[U++]=q[w++],ie[U++]=q[w++],ie[U++]=255;if(Qe)for(let ee=0;ee<U;ee+=4)Fe&&(ie[ee+0]=Fe[ie[ee+0]]),nt&&(ie[ee+1]=nt[ie[ee+1]]),me&&(ie[ee+2]=me[ie[ee+2]]);fe.putImageData(Te,0,ae*C)}}}}function h(fe,S){if(S.bitmap)return void fe.drawImage(S.bitmap,0,0);const F=S.height,te=S.width,ve=F%C,le=(F-ve)/C,_e=0===ve?le:le+1,Ie=fe.createImageData(te,C);let Te=0;const w=S.data,U=Ie.data;for(let q=0;q<_e;q++){const ie=q<le?C:ve;({srcPos:Te}=(0,ce.applyMaskImageData)({src:w,srcPos:Te,dest:U,width:te,height:ie})),fe.putImageData(Ie,0,q*C)}}function f(fe,S){const F=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let te=0,ve=F.length;te<ve;te++){const le=F[te];void 0!==fe[le]&&(S[le]=fe[le])}void 0!==fe.setLineDash&&(S.setLineDash(fe.getLineDash()),S.lineDashOffset=fe.lineDashOffset)}function E(fe,S){fe.strokeStyle=fe.fillStyle=S||"#000000",fe.fillRule="nonzero",fe.globalAlpha=1,fe.lineWidth=1,fe.lineCap="butt",fe.lineJoin="miter",fe.miterLimit=10,fe.globalCompositeOperation="source-over",fe.font="10px sans-serif",void 0!==fe.setLineDash&&(fe.setLineDash([]),fe.lineDashOffset=0)}function y(fe,S,F,te){const ve=fe.length;for(let le=3;le<ve;le+=4){const _e=fe[le];if(0===_e)fe[le-3]=S,fe[le-2]=F,fe[le-1]=te;else if(_e<255){const Ie=255-_e;fe[le-3]=fe[le-3]*_e+S*Ie>>8,fe[le-2]=fe[le-2]*_e+F*Ie>>8,fe[le-1]=fe[le-1]*_e+te*Ie>>8}}}function R(fe,S,F){const te=fe.length;for(let le=3;le<te;le+=4)S[le]=S[le]*(F?F[fe[le]]:fe[le])*.00392156862745098|0}function M(fe,S,F){const te=fe.length;for(let ve=3;ve<te;ve+=4){const le=77*fe[ve-3]+152*fe[ve-2]+28*fe[ve-1];S[ve]=F?S[ve]*F[le>>8]>>8:S[ve]*le>>16}}function Ce(fe,S){const F=N.Util.singularValueDecompose2dScale(fe);F[0]=Math.fround(F[0]),F[1]=Math.fround(F[1]);const te=Math.fround((globalThis.devicePixelRatio||1)*_.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==S?S:F[0]<=te||F[1]<=te}const De=["butt","round","square"],ze=["miter","round","bevel"],Oe={},J={},Je=class{constructor(S,F,te,ve,le,_e,Ie,Te){He(this,pe),this.ctx=S,this.current=new O(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=F,this.objs=te,this.canvasFactory=ve,this.imageLayer=le,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=_e,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ie,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==Te?void 0:Te.background)||null,this.foregroundColor=(null==Te?void 0:Te.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(S,F=null){return"string"==typeof S?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):F}beginDrawing({transform:S,viewport:F,transparency:te=!1,background:ve=null}){const le=this.ctx.canvas.width,_e=this.ctx.canvas.height,Ie=ve||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Te=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const w=this.backgroundColor=this.ctx.fillStyle;let U=!0,q=Ie;if(this.ctx.fillStyle=Ie,q=this.ctx.fillStyle,U="string"==typeof q&&/^#[0-9A-Fa-f]{6}$/.test(q),"#000000"===Te&&"#ffffff"===w||Te===w||!U)this.foregroundColor=this.backgroundColor=null;else{const[ie,ae,Pe]=(0,_.getRGB)(q),Ke=Fe=>(Fe/=255)<=.03928?Fe/12.92:((Fe+.055)/1.055)**2.4,ot=Math.round(.2126*Ke(ie)+.7152*Ke(ae)+.0722*Ke(Pe));this.selectColor=(Fe,nt,me)=>{const ke=.2126*Ke(Fe)+.7152*Ke(nt)+.0722*Ke(me);return Math.round(ke)===ot?w:Te}}}if(this.ctx.fillStyle=this.backgroundColor||Ie,this.ctx.fillRect(0,0,le,_e),this.ctx.restore(),te){const Te=this.cachedCanvases.getCanvas("transparent",le,_e);this.compositeCtx=this.ctx,this.transparentCanvas=Te.canvas,this.ctx=Te.context,this.ctx.save(),this.ctx.transform(...(0,_.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),E(this.ctx,this.foregroundColor),S&&(this.ctx.transform(...S),this.outputScaleX=S[0],this.outputScaleY=S[0]),this.ctx.transform(...F.transform),this.viewportScale=F.scale,this.baseTransform=(0,_.getCurrentTransform)(this.ctx),this.imageLayer&&((0,_.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(S,F,te,ve){const le=S.argsArray,_e=S.fnArray;let Ie=F||0;const Te=le.length;if(Te===Ie)return Ie;const w=Te-Ie>10&&"function"==typeof te,U=w?Date.now()+15:0;let q=0;const ie=this.commonObjs,ae=this.objs;let Pe;for(;;){if(void 0!==ve&&Ie===ve.nextBreakPoint)return ve.breakIt(Ie,te),Ie;if(Pe=_e[Ie],Pe!==N.OPS.dependency)this[Pe].apply(this,le[Ie]);else for(const Ke of le[Ie]){const ot=Ke.startsWith("g_")?ie:ae;if(!ot.has(Ke))return ot.get(Ke,te),Ie}if(Ie++,Ie===Te)return Ie;if(w&&++q>10){if(Date.now()>U)return te(),Ie;q=0}}}endDrawing(){We(this,pe,XA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const S of this._cachedBitmapsMap.values()){for(const F of S.values())"undefined"!=typeof HTMLCanvasElement&&F instanceof HTMLCanvasElement&&(F.width=F.height=0);S.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(S,F){const te=S.width,ve=S.height;let U,q,le=Math.max(Math.hypot(F[0],F[1]),1),_e=Math.max(Math.hypot(F[2],F[3]),1),Ie=te,Te=ve,w="prescale1";for(;le>2&&Ie>1||_e>2&&Te>1;){let ie=Ie,ae=Te;le>2&&Ie>1&&(ie=Math.ceil(Ie/2),le/=Ie/ie),_e>2&&Te>1&&(ae=Math.ceil(Te/2),_e/=Te/ae),U=this.cachedCanvases.getCanvas(w,ie,ae),q=U.context,q.clearRect(0,0,ie,ae),q.drawImage(S,0,0,Ie,Te,0,0,ie,ae),S=U.canvas,Ie=ie,Te=ae,w="prescale1"===w?"prescale2":"prescale1"}return{img:S,paintWidth:Ie,paintHeight:Te}}_createMaskCanvas(S){const F=this.ctx,{width:te,height:ve}=S,le=this.current.fillColor,_e=this.current.patternFill,Ie=(0,_.getCurrentTransform)(F);let Te,w,U,q;if((S.bitmap||S.data)&&S.count>1){const H=S.bitmap||S.data.buffer,ge=Ie.slice(0,4);w=JSON.stringify(_e?ge:[ge,le]),Te=this._cachedBitmapsMap.get(H),Te||(Te=new Map,this._cachedBitmapsMap.set(H,Te));const Ne=Te.get(w);if(Ne&&!_e)return{canvas:Ne,offsetX:Math.round(Math.min(Ie[0],Ie[2])+Ie[4]),offsetY:Math.round(Math.min(Ie[1],Ie[3])+Ie[5])};U=Ne}U||(q=this.cachedCanvases.getCanvas("maskCanvas",te,ve),h(q.context,S));let ie=N.Util.transform(Ie,[1/te,0,0,-1/ve,0,0]);ie=N.Util.transform(ie,[1,0,0,1,0,-ve]);const ae=N.Util.applyTransform([0,0],ie),Pe=N.Util.applyTransform([te,ve],ie),Ke=N.Util.normalizeRect([ae[0],ae[1],Pe[0],Pe[1]]),ot=Math.round(Ke[2]-Ke[0])||1,Fe=Math.round(Ke[3]-Ke[1])||1,nt=this.cachedCanvases.getCanvas("fillCanvas",ot,Fe),me=nt.context,ke=Math.min(ae[0],Pe[0]),Qe=Math.min(ae[1],Pe[1]);me.translate(-ke,-Qe),me.transform(...ie),U||(U=this._scaleImage(q.canvas,(0,_.getCurrentTransformInverse)(me)),U=U.img,Te&&_e&&Te.set(w,U)),me.imageSmoothingEnabled=Ce((0,_.getCurrentTransform)(me),S.interpolate),g(me,U,0,0,U.width,U.height,0,0,te,ve),me.globalCompositeOperation="source-in";const ee=N.Util.transform((0,_.getCurrentTransformInverse)(me),[1,0,0,1,-ke,-Qe]);return me.fillStyle=_e?le.getPattern(F,this,ee,Se.PathType.FILL):le,me.fillRect(0,0,te,ve),Te&&!_e&&(this.cachedCanvases.delete("fillCanvas"),Te.set(w,nt.canvas)),{canvas:nt.canvas,offsetX:Math.round(ke),offsetY:Math.round(Qe)}}setLineWidth(S){S!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=S,this.ctx.lineWidth=S}setLineCap(S){this.ctx.lineCap=De[S]}setLineJoin(S){this.ctx.lineJoin=ze[S]}setMiterLimit(S){this.ctx.miterLimit=S}setDash(S,F){const te=this.ctx;void 0!==te.setLineDash&&(te.setLineDash(S),te.lineDashOffset=F)}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(let F=0,te=S.length;F<te;F++){const ve=S[F],_e=ve[1];switch(ve[0]){case"LW":this.setLineWidth(_e);break;case"LC":this.setLineCap(_e);break;case"LJ":this.setLineJoin(_e);break;case"ML":this.setMiterLimit(_e);break;case"D":this.setDash(_e[0],_e[1]);break;case"RI":this.setRenderingIntent(_e);break;case"FL":this.setFlatness(_e);break;case"Font":this.setFont(_e[0],_e[1]);break;case"CA":this.current.strokeAlpha=ve[1];break;case"ca":this.current.fillAlpha=ve[1],this.ctx.globalAlpha=ve[1];break;case"BM":this.ctx.globalCompositeOperation=_e;break;case"SMask":this.current.activeSMask=_e?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=_e}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const S=this.inSMaskMode;this.current.activeSMask&&!S?this.beginSMaskMode():!this.current.activeSMask&&S&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ve=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=ve.context;const le=this.ctx;le.setTransform(...(0,_.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,le),function u(fe,S){if(fe._removeMirroring)throw new Error("Context is already forwarding operations.");fe.__originalSave=fe.save,fe.__originalRestore=fe.restore,fe.__originalRotate=fe.rotate,fe.__originalScale=fe.scale,fe.__originalTranslate=fe.translate,fe.__originalTransform=fe.transform,fe.__originalSetTransform=fe.setTransform,fe.__originalResetTransform=fe.resetTransform,fe.__originalClip=fe.clip,fe.__originalMoveTo=fe.moveTo,fe.__originalLineTo=fe.lineTo,fe.__originalBezierCurveTo=fe.bezierCurveTo,fe.__originalRect=fe.rect,fe.__originalClosePath=fe.closePath,fe.__originalBeginPath=fe.beginPath,fe._removeMirroring=()=>{fe.save=fe.__originalSave,fe.restore=fe.__originalRestore,fe.rotate=fe.__originalRotate,fe.scale=fe.__originalScale,fe.translate=fe.__originalTranslate,fe.transform=fe.__originalTransform,fe.setTransform=fe.__originalSetTransform,fe.resetTransform=fe.__originalResetTransform,fe.clip=fe.__originalClip,fe.moveTo=fe.__originalMoveTo,fe.lineTo=fe.__originalLineTo,fe.bezierCurveTo=fe.__originalBezierCurveTo,fe.rect=fe.__originalRect,fe.closePath=fe.__originalClosePath,fe.beginPath=fe.__originalBeginPath,delete fe._removeMirroring},fe.save=function(){S.save(),this.__originalSave()},fe.restore=function(){S.restore(),this.__originalRestore()},fe.translate=function(te,ve){S.translate(te,ve),this.__originalTranslate(te,ve)},fe.scale=function(te,ve){S.scale(te,ve),this.__originalScale(te,ve)},fe.transform=function(te,ve,le,_e,Ie,Te){S.transform(te,ve,le,_e,Ie,Te),this.__originalTransform(te,ve,le,_e,Ie,Te)},fe.setTransform=function(te,ve,le,_e,Ie,Te){S.setTransform(te,ve,le,_e,Ie,Te),this.__originalSetTransform(te,ve,le,_e,Ie,Te)},fe.resetTransform=function(){S.resetTransform(),this.__originalResetTransform()},fe.rotate=function(te){S.rotate(te),this.__originalRotate(te)},fe.clip=function(te){S.clip(te),this.__originalClip(te)},fe.moveTo=function(F,te){S.moveTo(F,te),this.__originalMoveTo(F,te)},fe.lineTo=function(F,te){S.lineTo(F,te),this.__originalLineTo(F,te)},fe.bezierCurveTo=function(F,te,ve,le,_e,Ie){S.bezierCurveTo(F,te,ve,le,_e,Ie),this.__originalBezierCurveTo(F,te,ve,le,_e,Ie)},fe.rect=function(F,te,ve,le){S.rect(F,te,ve,le),this.__originalRect(F,te,ve,le)},fe.closePath=function(){S.closePath(),this.__originalClosePath()},fe.beginPath=function(){S.beginPath(),this.__originalBeginPath()}}(le,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(S){this.current.activeSMask&&(S?(S[0]=Math.floor(S[0]),S[1]=Math.floor(S[1]),S[2]=Math.ceil(S[2]),S[3]=Math.ceil(S[3])):S=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function ye(fe,S,F,te){const ve=te[0],le=te[1],_e=te[2]-ve,Ie=te[3]-le;0===_e||0===Ie||(function z(fe,S,F,te,ve,le,_e,Ie,Te,w,U){const q=!!le,ie=q?le[0]:0,ae=q?le[1]:0,Pe=q?le[2]:0;let Ke;Ke="Luminosity"===ve?M:R;const Fe=Math.min(te,Math.ceil(1048576/F));for(let nt=0;nt<te;nt+=Fe){const me=Math.min(Fe,te-nt),ke=fe.getImageData(Ie-w,nt+(Te-U),F,me),Qe=S.getImageData(Ie,nt+Te,F,me);q&&y(ke.data,ie,ae,Pe),Ke(ke.data,Qe.data,_e),S.putImageData(Qe,Ie,nt+Te)}}(S.context,F,_e,Ie,S.subtype,S.backdrop,S.transferMap,ve,le,S.offsetX,S.offsetY),fe.save(),fe.globalAlpha=1,fe.globalCompositeOperation="source-over",fe.setTransform(1,0,0,1,0,0),fe.drawImage(F.canvas,0,0),fe.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,S),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const S=this.current;this.stateStack.push(S),this.current=S.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(S,F,te,ve,le,_e){this.ctx.transform(S,F,te,ve,le,_e),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(S,F,te){const ve=this.ctx,le=this.current;let Te,w,_e=le.x,Ie=le.y;const U=(0,_.getCurrentTransform)(ve),q=0===U[0]&&0===U[3]||0===U[1]&&0===U[2],ie=q?te.slice(0):null;for(let ae=0,Pe=0,Ke=S.length;ae<Ke;ae++)switch(0|S[ae]){case N.OPS.rectangle:_e=F[Pe++],Ie=F[Pe++];const ot=F[Pe++],Fe=F[Pe++],nt=_e+ot,me=Ie+Fe;ve.moveTo(_e,Ie),0===ot||0===Fe?ve.lineTo(nt,me):(ve.lineTo(nt,Ie),ve.lineTo(nt,me),ve.lineTo(_e,me)),q||le.updateRectMinMax(U,[_e,Ie,nt,me]),ve.closePath();break;case N.OPS.moveTo:_e=F[Pe++],Ie=F[Pe++],ve.moveTo(_e,Ie),q||le.updatePathMinMax(U,_e,Ie);break;case N.OPS.lineTo:_e=F[Pe++],Ie=F[Pe++],ve.lineTo(_e,Ie),q||le.updatePathMinMax(U,_e,Ie);break;case N.OPS.curveTo:Te=_e,w=Ie,_e=F[Pe+4],Ie=F[Pe+5],ve.bezierCurveTo(F[Pe],F[Pe+1],F[Pe+2],F[Pe+3],_e,Ie),le.updateCurvePathMinMax(U,Te,w,F[Pe],F[Pe+1],F[Pe+2],F[Pe+3],_e,Ie,ie),Pe+=6;break;case N.OPS.curveTo2:Te=_e,w=Ie,ve.bezierCurveTo(_e,Ie,F[Pe],F[Pe+1],F[Pe+2],F[Pe+3]),le.updateCurvePathMinMax(U,Te,w,_e,Ie,F[Pe],F[Pe+1],F[Pe+2],F[Pe+3],ie),_e=F[Pe+2],Ie=F[Pe+3],Pe+=4;break;case N.OPS.curveTo3:Te=_e,w=Ie,_e=F[Pe+2],Ie=F[Pe+3],ve.bezierCurveTo(F[Pe],F[Pe+1],_e,Ie,_e,Ie),le.updateCurvePathMinMax(U,Te,w,F[Pe],F[Pe+1],_e,Ie,_e,Ie,ie),Pe+=4;break;case N.OPS.closePath:ve.closePath()}q&&le.updateScalingPathMinMax(U,ie),le.setCurrentPoint(_e,Ie)}closePath(){this.ctx.closePath()}stroke(S){S=void 0===S||S;const F=this.ctx,te=this.current.strokeColor;F.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof te&&(null==te?void 0:te.getPattern)?(F.save(),F.strokeStyle=te.getPattern(F,this,(0,_.getCurrentTransformInverse)(F),Se.PathType.STROKE),this.rescaleAndStroke(!1),F.restore()):this.rescaleAndStroke(!0)),S&&this.consumePath(this.current.getClippedPathBoundingBox()),F.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(S){S=void 0===S||S;const F=this.ctx,te=this.current.fillColor;let le=!1;this.current.patternFill&&(F.save(),F.fillStyle=te.getPattern(F,this,(0,_.getCurrentTransformInverse)(F),Se.PathType.FILL),le=!0);const _e=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==_e&&(this.pendingEOFill?(F.fill("evenodd"),this.pendingEOFill=!1):F.fill()),le&&F.restore(),S&&this.consumePath(_e)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Oe}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=N.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const S=this.pendingTextPaths,F=this.ctx;if(void 0!==S){F.save(),F.beginPath();for(const te of S)F.setTransform(...te.transform),F.translate(te.x,te.y),te.addToPath(F,te.fontSize);F.restore(),F.clip(),F.beginPath(),delete this.pendingTextPaths}else F.beginPath()}setCharSpacing(S){this.current.charSpacing=S}setWordSpacing(S){this.current.wordSpacing=S}setHScale(S){this.current.textHScale=S/100}setLeading(S){this.current.leading=-S}setFont(S,F){const te=this.commonObjs.get(S),ve=this.current;if(!te)throw new Error(`Can't find font for ${S}`);if(ve.fontMatrix=te.fontMatrix||N.FONT_IDENTITY_MATRIX,(0===ve.fontMatrix[0]||0===ve.fontMatrix[3])&&(0,N.warn)("Invalid font matrix for font "+S),F<0?(F=-F,ve.fontDirection=-1):ve.fontDirection=1,this.current.font=te,this.current.fontSize=F,te.isType3Font)return;let _e="normal";te.black?_e="900":te.bold&&(_e="bold");const Ie=te.italic?"italic":"normal",Te=`"${te.loadedName||"sans-serif"}", ${te.fallbackName}`;let w=F;F<16?w=16:F>100&&(w=100),this.current.fontSizeScale=F/w,this.ctx.font=`${Ie} ${_e} ${w}px ${Te}`}setTextRenderingMode(S){this.current.textRenderingMode=S}setTextRise(S){this.current.textRise=S}moveText(S,F){this.current.x=this.current.lineX+=S,this.current.y=this.current.lineY+=F}setLeadingMoveText(S,F){this.setLeading(-F),this.moveText(S,F)}setTextMatrix(S,F,te,ve,le,_e){this.current.textMatrix=[S,F,te,ve,le,_e],this.current.textMatrixScale=Math.hypot(S,F),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(S,F,te,ve){const le=this.ctx,_e=this.current,Ie=_e.font,Te=_e.textRenderingMode,w=_e.fontSize/_e.fontSizeScale,U=Te&N.TextRenderingMode.FILL_STROKE_MASK,q=!!(Te&N.TextRenderingMode.ADD_TO_PATH_FLAG),ie=_e.patternFill&&!Ie.missingFile;let ae;(Ie.disableFontFace||q||ie)&&(ae=Ie.getPathGenerator(this.commonObjs,S)),Ie.disableFontFace||ie?(le.save(),le.translate(F,te),le.beginPath(),ae(le,w),ve&&le.setTransform(...ve),(U===N.TextRenderingMode.FILL||U===N.TextRenderingMode.FILL_STROKE)&&le.fill(),(U===N.TextRenderingMode.STROKE||U===N.TextRenderingMode.FILL_STROKE)&&le.stroke(),le.restore()):((U===N.TextRenderingMode.FILL||U===N.TextRenderingMode.FILL_STROKE)&&le.fillText(S,F,te),(U===N.TextRenderingMode.STROKE||U===N.TextRenderingMode.FILL_STROKE)&&le.strokeText(S,F,te)),q&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_.getCurrentTransform)(le),x:F,y:te,fontSize:w,addToPath:ae})}get isFontSubpixelAAEnabled(){const{context:S}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);S.scale(1.5,1),S.fillText("I",0,10);const F=S.getImageData(0,0,10,10).data;let te=!1;for(let ve=3;ve<F.length;ve+=4)if(F[ve]>0&&F[ve]<255){te=!0;break}return(0,N.shadow)(this,"isFontSubpixelAAEnabled",te)}showText(S){const F=this.current,te=F.font;if(te.isType3Font)return this.showType3Text(S);const ve=F.fontSize;if(0===ve)return;const le=this.ctx,_e=F.fontSizeScale,Ie=F.charSpacing,Te=F.wordSpacing,w=F.fontDirection,U=F.textHScale*w,q=S.length,ie=te.vertical,ae=ie?1:-1,Pe=te.defaultVMetrics,Ke=ve*F.fontMatrix[0],ot=F.textRenderingMode===N.TextRenderingMode.FILL&&!te.disableFontFace&&!F.patternFill;let Fe;if(le.save(),le.transform(...F.textMatrix),le.translate(F.x,F.y+F.textRise),le.scale(U,w>0?-1:1),F.patternFill){le.save();const ee=F.fillColor.getPattern(le,this,(0,_.getCurrentTransformInverse)(le),Se.PathType.FILL);Fe=(0,_.getCurrentTransform)(le),le.restore(),le.fillStyle=ee}let nt=F.lineWidth;const me=F.textMatrixScale;if(0===me||0===nt){const ee=F.textRenderingMode&N.TextRenderingMode.FILL_STROKE_MASK;(ee===N.TextRenderingMode.STROKE||ee===N.TextRenderingMode.FILL_STROKE)&&(nt=this.getSinglePixelWidth())}else nt/=me;1!==_e&&(le.scale(_e,_e),nt/=_e),le.lineWidth=nt;let Qe,ke=0;for(Qe=0;Qe<q;++Qe){const ee=S[Qe];if("number"==typeof ee){ke+=ae*ee*ve/1e3;continue}let H=!1;const ge=(ee.isSpace?Te:0)+Ie,Ne=ee.fontChar,tt=ee.accent;let T,de,oe,Ae=ee.width;if(ie){const xe=ee.vmetric||Pe,Xe=-(ee.vmetric?xe[1]:.5*Ae)*Ke;Ae=xe?-xe[0]:Ae,T=Xe/_e,de=(ke+xe[2]*Ke)/_e}else T=ke/_e,de=0;if(te.remeasure&&Ae>0){const xe=1e3*le.measureText(Ne).width/ve*_e;if(Ae<xe&&this.isFontSubpixelAAEnabled){const Xe=Ae/xe;H=!0,le.save(),le.scale(Xe,1),T/=Xe}else Ae!==xe&&(T+=(Ae-xe)/2e3*ve/_e)}this.contentVisible&&(ee.isInFont||te.missingFile)&&(ot&&!tt?le.fillText(Ne,T,de):(this.paintChar(Ne,T,de,Fe),tt&&this.paintChar(tt.fontChar,T+ve*tt.offset.x/_e,de-ve*tt.offset.y/_e,Fe))),oe=ie?Ae*Ke-ge*w:Ae*Ke+ge*w,ke+=oe,H&&le.restore()}ie?F.y-=ke:F.x+=ke*U,le.restore(),this.compose()}showType3Text(S){const F=this.ctx,te=this.current,ve=te.font,le=te.fontSize,_e=te.fontDirection,Ie=ve.vertical?1:-1,Te=te.charSpacing,w=te.wordSpacing,U=te.textHScale*_e,q=te.fontMatrix||N.FONT_IDENTITY_MATRIX,ie=S.length;let Pe,Ke,ot,Fe;if(te.textRenderingMode!==N.TextRenderingMode.INVISIBLE&&0!==le){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,F.save(),F.transform(...te.textMatrix),F.translate(te.x,te.y),F.scale(U,_e),Pe=0;Pe<ie;++Pe){if(Ke=S[Pe],"number"==typeof Ke){Fe=Ie*Ke*le/1e3,this.ctx.translate(Fe,0),te.x+=Fe*U;continue}const nt=(Ke.isSpace?w:0)+Te,me=ve.charProcOperatorList[Ke.operatorListId];me?(this.contentVisible&&(this.processingType3=Ke,this.save(),F.scale(le,le),F.transform(...q),this.executeOperatorList(me),this.restore()),ot=N.Util.applyTransform([Ke.width,0],q)[0]*le+nt,F.translate(ot,0),te.x+=ot*U):(0,N.warn)(`Type3 character "${Ke.operatorListId}" is not available.`)}F.restore(),this.processingType3=null}}setCharWidth(S,F){}setCharWidthAndBounds(S,F,te,ve,le,_e){this.ctx.rect(te,ve,le-te,_e-ve),this.ctx.clip(),this.endPath()}getColorN_Pattern(S){let F;if("TilingPattern"===S[0]){const te=S[1],ve=this.baseTransform||(0,_.getCurrentTransform)(this.ctx);F=new Se.TilingPattern(S,te,this.ctx,{createCanvasGraphics:_e=>new Je(_e,this.commonObjs,this.objs,this.canvasFactory)},ve)}else F=this._getPattern(S[1],S[2]);return F}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(S,F,te){var le;const ve=(null==(le=this.selectColor)?void 0:le.call(this,S,F,te))||N.Util.makeHexColor(S,F,te);this.ctx.strokeStyle=ve,this.current.strokeColor=ve}setFillRGBColor(S,F,te){var le;const ve=(null==(le=this.selectColor)?void 0:le.call(this,S,F,te))||N.Util.makeHexColor(S,F,te);this.ctx.fillStyle=ve,this.current.fillColor=ve,this.current.patternFill=!1}_getPattern(S,F=null){let te;return this.cachedPatterns.has(S)?te=this.cachedPatterns.get(S):(te=(0,Se.getShadingPattern)(this.objs.get(S)),this.cachedPatterns.set(S,te)),F&&(te.matrix=F),te}shadingFill(S){if(!this.contentVisible)return;const F=this.ctx;this.save();const te=this._getPattern(S);F.fillStyle=te.getPattern(F,this,(0,_.getCurrentTransformInverse)(F),Se.PathType.SHADING);const ve=(0,_.getCurrentTransformInverse)(F);if(ve){const le=F.canvas,_e=le.width,Ie=le.height,Te=N.Util.applyTransform([0,0],ve),w=N.Util.applyTransform([0,Ie],ve),U=N.Util.applyTransform([_e,0],ve),q=N.Util.applyTransform([_e,Ie],ve),ie=Math.min(Te[0],w[0],U[0],q[0]),ae=Math.min(Te[1],w[1],U[1],q[1]),Pe=Math.max(Te[0],w[0],U[0],q[0]),Ke=Math.max(Te[1],w[1],U[1],q[1]);this.ctx.fillRect(ie,ae,Pe-ie,Ke-ae)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,N.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,N.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(S,F){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(S)&&6===S.length&&this.transform(...S),this.baseTransform=(0,_.getCurrentTransform)(this.ctx),F)&&(this.ctx.rect(F[0],F[1],F[2]-F[0],F[3]-F[1]),this.current.updateRectMinMax((0,_.getCurrentTransform)(this.ctx),F),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(S){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const F=this.ctx;S.isolated||(0,N.info)("TODO: Support non-isolated groups."),S.knockout&&(0,N.warn)("Knockout groups not supported.");const te=(0,_.getCurrentTransform)(F);if(S.matrix&&F.transform(...S.matrix),!S.bbox)throw new Error("Bounding box is required.");let ve=N.Util.getAxialAlignedBoundingBox(S.bbox,(0,_.getCurrentTransform)(F));ve=N.Util.intersect(ve,[0,0,F.canvas.width,F.canvas.height])||[0,0,0,0];const _e=Math.floor(ve[0]),Ie=Math.floor(ve[1]);let Te=Math.max(Math.ceil(ve[2])-_e,1),w=Math.max(Math.ceil(ve[3])-Ie,1),U=1,q=1;Te>B&&(U=Te/B,Te=B),w>B&&(q=w/B,w=B),this.current.startNewPathAndClipBox([0,0,Te,w]);let ie="groupAt"+this.groupLevel;S.smask&&(ie+="_smask_"+this.smaskCounter++%2);const ae=this.cachedCanvases.getCanvas(ie,Te,w),Pe=ae.context;Pe.scale(1/U,1/q),Pe.translate(-_e,-Ie),Pe.transform(...te),S.smask?this.smaskStack.push({canvas:ae.canvas,context:Pe,offsetX:_e,offsetY:Ie,scaleX:U,scaleY:q,subtype:S.smask.subtype,backdrop:S.smask.backdrop,transferMap:S.smask.transferMap||null,startTransformInverse:null}):(F.setTransform(1,0,0,1,0,0),F.translate(_e,Ie),F.scale(U,q),F.save()),f(F,Pe),this.ctx=Pe,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(F),this.groupLevel++}endGroup(S){if(!this.contentVisible)return;this.groupLevel--;const F=this.ctx,te=this.groupStack.pop();if(this.ctx=te,this.ctx.imageSmoothingEnabled=!1,S.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const ve=(0,_.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...ve);const le=N.Util.getAxialAlignedBoundingBox([0,0,F.canvas.width,F.canvas.height],ve);this.ctx.drawImage(F.canvas,0,0),this.ctx.restore(),this.compose(le)}}beginAnnotation(S,F,te,ve,le){if(We(this,pe,XA).call(this),E(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(F)&&4===F.length){const _e=F[2]-F[0],Ie=F[3]-F[1];if(le&&this.annotationCanvasMap){(te=te.slice())[4]-=F[0],te[5]-=F[1],(F=F.slice())[0]=F[1]=0,F[2]=_e,F[3]=Ie;const[Te,w]=N.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(this.ctx)),{viewportScale:U}=this,q=Math.ceil(_e*this.outputScaleX*U),ie=Math.ceil(Ie*this.outputScaleY*U);this.annotationCanvas=this.canvasFactory.create(q,ie);const{canvas:ae,context:Pe}=this.annotationCanvas;this.annotationCanvasMap.set(S,ae),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Pe,this.ctx.setTransform(Te,0,0,-w,0,Ie*w),E(this.ctx,this.foregroundColor)}else E(this.ctx,this.foregroundColor),this.ctx.rect(F[0],F[1],_e,Ie),this.ctx.clip(),this.endPath()}this.current=new O(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...te),this.transform(...ve)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(S){if(!this.contentVisible)return;const F=S.count;(S=this.getObject(S.data,S)).count=F;const te=this.ctx,ve=this.processingType3;if(ve&&(void 0===ve.compiled&&(ve.compiled=function I(fe){const{width:S,height:F}=fe;if(S>j||F>j)return null;const ve=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),le=S+1;let Ie,Te,w,_e=new Uint8Array(le*(F+1));const U=S+7&-8;let q=new Uint8Array(U*F),ie=0;for(const Fe of fe.data){let nt=128;for(;nt>0;)q[ie++]=Fe&nt?0:255,nt>>=1}let ae=0;for(ie=0,0!==q[ie]&&(_e[0]=1,++ae),Te=1;Te<S;Te++)q[ie]!==q[ie+1]&&(_e[Te]=q[ie]?2:1,++ae),ie++;for(0!==q[ie]&&(_e[Te]=2,++ae),Ie=1;Ie<F;Ie++){ie=Ie*U,w=Ie*le,q[ie-U]!==q[ie]&&(_e[w]=q[ie]?1:8,++ae);let Fe=(q[ie]?4:0)+(q[ie-U]?8:0);for(Te=1;Te<S;Te++)Fe=(Fe>>2)+(q[ie+1]?4:0)+(q[ie-U+1]?8:0),ve[Fe]&&(_e[w+Te]=ve[Fe],++ae),ie++;if(q[ie-U]!==q[ie]&&(_e[w+Te]=q[ie]?2:4,++ae),ae>1e3)return null}for(ie=U*(F-1),w=Ie*le,0!==q[ie]&&(_e[w]=8,++ae),Te=1;Te<S;Te++)q[ie]!==q[ie+1]&&(_e[w+Te]=q[ie]?4:8,++ae),ie++;if(0!==q[ie]&&(_e[w+Te]=4,++ae),ae>1e3)return null;const Pe=new Int32Array([0,le,-1,0,-le,0,0,0,1]),Ke=new Path2D;for(Ie=0;ae&&Ie<=F;Ie++){let Fe=Ie*le;const nt=Fe+S;for(;Fe<nt&&!_e[Fe];)Fe++;if(Fe===nt)continue;Ke.moveTo(Fe%le,Ie);const me=Fe;let ke=_e[Fe];do{const Qe=Pe[ke];do{Fe+=Qe}while(!_e[Fe]);const ee=_e[Fe];5!==ee&&10!==ee?(ke=ee,_e[Fe]=0):(ke=ee&51*ke>>4,_e[Fe]&=ke>>2|ke<<2),Ke.lineTo(Fe%le,Fe/le|0),_e[Fe]||--ae}while(me!==Fe);--Ie}return q=null,_e=null,function(Fe){Fe.save(),Fe.scale(1/S,-1/F),Fe.translate(0,-F),Fe.fill(Ke),Fe.beginPath(),Fe.restore()}}(S)),ve.compiled))return void ve.compiled(te);const le=this._createMaskCanvas(S),_e=le.canvas;te.save(),te.setTransform(1,0,0,1,0,0),te.drawImage(_e,le.offsetX,le.offsetY),te.restore(),this.compose()}paintImageMaskXObjectRepeat(S,F,te=0,ve=0,le,_e){if(!this.contentVisible)return;S=this.getObject(S.data,S);const Ie=this.ctx;Ie.save();const Te=(0,_.getCurrentTransform)(Ie);Ie.transform(F,te,ve,le,0,0);const w=this._createMaskCanvas(S);Ie.setTransform(1,0,0,1,0,0);for(let U=0,q=_e.length;U<q;U+=2){const ie=N.Util.transform(Te,[F,te,ve,le,_e[U],_e[U+1]]),[ae,Pe]=N.Util.applyTransform([0,0],ie);Ie.drawImage(w.canvas,ae,Pe)}Ie.restore(),this.compose()}paintImageMaskXObjectGroup(S){if(!this.contentVisible)return;const F=this.ctx,te=this.current.fillColor,ve=this.current.patternFill;for(const le of S){const{data:_e,width:Ie,height:Te,transform:w}=le,U=this.cachedCanvases.getCanvas("maskCanvas",Ie,Te),q=U.context;q.save(),h(q,this.getObject(_e,le)),q.globalCompositeOperation="source-in",q.fillStyle=ve?te.getPattern(q,this,(0,_.getCurrentTransformInverse)(F),Se.PathType.FILL):te,q.fillRect(0,0,Ie,Te),q.restore(),F.save(),F.transform(...w),F.scale(1,-1),g(F,U.canvas,0,0,Ie,Te,0,-1,1,1),F.restore()}this.compose()}paintImageXObject(S){if(!this.contentVisible)return;const F=this.getObject(S);F?this.paintInlineImageXObject(F):(0,N.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(S,F,te,ve){if(!this.contentVisible)return;const le=this.getObject(S);if(!le)return void(0,N.warn)("Dependent image isn't ready yet");const _e=le.width,Ie=le.height,Te=[];for(let w=0,U=ve.length;w<U;w+=2)Te.push({transform:[F,0,0,te,ve[w],ve[w+1]],x:0,y:0,w:_e,h:Ie});this.paintInlineImageXObjectGroup(le,Te)}paintInlineImageXObject(S){if(!this.contentVisible)return;const F=S.width,te=S.height,ve=this.ctx;let le;if(this.save(),ve.scale(1/F,-1/te),"function"==typeof HTMLElement&&S instanceof HTMLElement||!S.data)le=S;else{const w=this.cachedCanvases.getCanvas("inlineImage",F,te);b(w.context,S,this.current.transferMaps),le=w.canvas}const _e=this._scaleImage(le,(0,_.getCurrentTransformInverse)(ve));ve.imageSmoothingEnabled=Ce((0,_.getCurrentTransform)(ve),S.interpolate);const[Ie,Te]=g(ve,_e.img,0,0,_e.paintWidth,_e.paintHeight,0,-te,F,te);if(this.imageLayer){const[w,U]=N.Util.applyTransform([0,-te],(0,_.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:S,left:w,top:U,width:Ie,height:Te})}this.compose(),this.restore()}paintInlineImageXObjectGroup(S,F){if(!this.contentVisible)return;const te=this.ctx,ve=S.width,le=S.height,_e=this.cachedCanvases.getCanvas("inlineImage",ve,le);b(_e.context,S,this.current.transferMaps);for(const Te of F){if(te.save(),te.transform(...Te.transform),te.scale(1,-1),g(te,_e.canvas,Te.x,Te.y,Te.w,Te.h,0,-1,1,1),this.imageLayer){const[w,U]=N.Util.applyTransform([Te.x,Te.y],(0,_.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:S,left:w,top:U,width:ve,height:le})}te.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(S){}markPointProps(S,F){}beginMarkedContent(S){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(S,F){this.markedContentStack.push("OC"===S?{visible:this.optionalContentConfig.isVisible(F)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(S){const F=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(S);const te=this.ctx;this.pendingClip&&(F||(this.pendingClip===J?te.clip("evenodd"):te.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),te.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const S=(0,_.getCurrentTransform)(this.ctx);if(0===S[1]&&0===S[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(S[0]),Math.abs(S[3]));else{const F=Math.abs(S[0]*S[3]-S[2]*S[1]),te=Math.hypot(S[0],S[2]),ve=Math.hypot(S[1],S[3]);this._cachedGetSinglePixelWidth=Math.max(te,ve)/F}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:S}=this.current,F=(0,_.getCurrentTransform)(this.ctx);let te,ve;if(0===F[1]&&0===F[2]){const le=Math.abs(F[0]),_e=Math.abs(F[3]);if(0===S)te=1/le,ve=1/_e;else{const Ie=le*S,Te=_e*S;te=Ie<1?1/Ie:1,ve=Te<1?1/Te:1}}else{const le=Math.abs(F[0]*F[3]-F[2]*F[1]),_e=Math.hypot(F[0],F[1]),Ie=Math.hypot(F[2],F[3]);if(0===S)te=Ie/le,ve=_e/le;else{const Te=S*le;te=Ie>Te?Ie/Te:1,ve=_e>Te?_e/Te:1}}this._cachedScaleForStroking=[te,ve]}return this._cachedScaleForStroking}rescaleAndStroke(S){const{ctx:F}=this,{lineWidth:te}=this.current,[ve,le]=this.getScaleForStroking();if(F.lineWidth=te||1,1===ve&&1===le)return void F.stroke();let _e,Ie,Te;S&&(_e=(0,_.getCurrentTransform)(F),Ie=F.getLineDash().slice(),Te=F.lineDashOffset),F.scale(ve,le);const w=Math.max(ve,le);F.setLineDash(F.getLineDash().map(U=>U/w)),F.lineDashOffset/=w,F.stroke(),S&&(F.setTransform(..._e),F.setLineDash(Ie),F.lineDashOffset=Te)}isContentVisible(){for(let S=this.markedContentStack.length-1;S>=0;S--)if(!this.markedContentStack[S].visible)return!1;return!0}};let Q=Je;pe=new WeakSet,XA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},L.CanvasGraphics=Q;for(const fe in N.OPS)void 0!==Q.prototype[fe]&&(Q.prototype[N.OPS[fe]]=Q.prototype[fe])},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.TilingPattern=L.PathType=void 0,L.getShadingPattern=function C(g){switch(g[0]){case"RadialAxial":return new m(g);case"Mesh":return new x(g);case"Dummy":return new j}throw new Error(`Unknown IR type: ${g[0]}`)};var _=W(1),N=W(8),Se=W(3);const ce={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Re(g,I){if(!I||Se.isNodeJS)return;const O=I[2]-I[0],b=I[3]-I[1],h=new Path2D;h.rect(I[0],I[1],O,b),g.clip(h)}L.PathType=ce;class re{constructor(){this.constructor===re&&(0,_.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_.unreachable)("Abstract method `getPattern` called.")}}class m extends re{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let O;"axial"===this._type?O=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(O=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)O.addColorStop(b[0],b[1]);return O}getPattern(I,O,b,h){let f;if(h===ce.STROKE||h===ce.FILL){const E=O.current.getClippedPathBoundingBox(h,(0,N.getCurrentTransform)(I))||[0,0,0,0],y=Math.ceil(E[2]-E[0])||1,R=Math.ceil(E[3]-E[1])||1,M=O.cachedCanvases.getCanvas("pattern",y,R,!0),z=M.context;z.clearRect(0,0,z.canvas.width,z.canvas.height),z.beginPath(),z.rect(0,0,z.canvas.width,z.canvas.height),z.translate(-E[0],-E[1]),b=_.Util.transform(b,[1,0,0,1,E[0],E[1]]),z.transform(...O.baseTransform),this.matrix&&z.transform(...this.matrix),Re(z,this._bbox),z.fillStyle=this._createGradient(z),z.fill(),f=I.createPattern(M.canvas,"no-repeat");const ye=new DOMMatrix(b);try{f.setTransform(ye)}catch(Ce){(0,_.warn)(`RadialAxialShadingPattern.getPattern: "${null==Ce?void 0:Ce.message}".`)}}else Re(I,this._bbox),f=this._createGradient(I);return f}}function B(g,I,O,b,h,f,E,y){const R=I.coords,M=I.colors,z=g.data,ye=4*g.width;let Ce;R[O+1]>R[b+1]&&(Ce=O,O=b,b=Ce,Ce=f,f=E,E=Ce),R[b+1]>R[h+1]&&(Ce=b,b=h,h=Ce,Ce=E,E=y,y=Ce),R[O+1]>R[b+1]&&(Ce=O,O=b,b=Ce,Ce=f,f=E,E=Ce);const De=(R[O]+I.offsetX)*I.scaleX,ze=(R[O+1]+I.offsetY)*I.scaleY,Oe=(R[b]+I.offsetX)*I.scaleX,J=(R[b+1]+I.offsetY)*I.scaleY,Q=(R[h]+I.offsetX)*I.scaleX,pe=(R[h+1]+I.offsetY)*I.scaleY;if(ze>=pe)return;const we=M[f],Je=M[f+1],fe=M[f+2],S=M[E],F=M[E+1],te=M[E+2],ve=M[y],le=M[y+1],_e=M[y+2],Ie=Math.round(ze),Te=Math.round(pe);let w,U,q,ie,ae,Pe,Ke,ot;for(let Fe=Ie;Fe<=Te;Fe++){if(Fe<J){let ee;ee=Fe<ze?0:(ze-Fe)/(ze-J),w=De-(De-Oe)*ee,U=we-(we-S)*ee,q=Je-(Je-F)*ee,ie=fe-(fe-te)*ee}else{let ee;ee=Fe>pe?1:J===pe?0:(J-Fe)/(J-pe),w=Oe-(Oe-Q)*ee,U=S-(S-ve)*ee,q=F-(F-le)*ee,ie=te-(te-_e)*ee}let nt;nt=Fe<ze?0:Fe>pe?1:(ze-Fe)/(ze-pe),ae=De-(De-Q)*nt,Pe=we-(we-ve)*nt,Ke=Je-(Je-le)*nt,ot=fe-(fe-_e)*nt;const me=Math.round(Math.min(w,ae)),ke=Math.round(Math.max(w,ae));let Qe=ye*Fe+4*me;for(let ee=me;ee<=ke;ee++)nt=(w-ee)/(w-ae),nt<0?nt=0:nt>1&&(nt=1),z[Qe++]=U-(U-Pe)*nt|0,z[Qe++]=q-(q-Ke)*nt|0,z[Qe++]=ie-(ie-ot)*nt|0,z[Qe++]=255}}function D(g,I,O){const b=I.coords,h=I.colors;let f,E;switch(I.type){case"lattice":const y=I.verticesPerRow,R=Math.floor(b.length/y)-1,M=y-1;for(f=0;f<R;f++){let z=f*y;for(let ye=0;ye<M;ye++,z++)B(g,O,b[z],b[z+1],b[z+y],h[z],h[z+1],h[z+y]),B(g,O,b[z+y+1],b[z+1],b[z+y],h[z+y+1],h[z+1],h[z+y])}break;case"triangles":for(f=0,E=b.length;f<E;f+=3)B(g,O,b[f],b[f+1],b[f+2],h[f],h[f+1],h[f+2]);break;default:throw new Error("illegal figure")}}class x extends re{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,O,b){const y=Math.floor(this._bounds[0]),R=Math.floor(this._bounds[1]),M=Math.ceil(this._bounds[2])-y,z=Math.ceil(this._bounds[3])-R,ye=Math.min(Math.ceil(Math.abs(M*I[0]*1.1)),3e3),Ce=Math.min(Math.ceil(Math.abs(z*I[1]*1.1)),3e3),De=M/ye,ze=z/Ce,Oe={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-R,scaleX:1/De,scaleY:1/ze},pe=b.getCanvas("mesh",ye+4,Ce+4,!1),we=pe.context,Je=we.createImageData(ye,Ce);if(O){const S=Je.data;for(let F=0,te=S.length;F<te;F+=4)S[F]=O[0],S[F+1]=O[1],S[F+2]=O[2],S[F+3]=255}for(const S of this._figures)D(Je,S,Oe);return we.putImageData(Je,2,2),{canvas:pe.canvas,offsetX:y-2*De,offsetY:R-2*ze,scaleX:De,scaleY:ze}}getPattern(I,O,b,h){let f;if(Re(I,this._bbox),h===ce.SHADING)f=_.Util.singularValueDecompose2dScale((0,N.getCurrentTransform)(I));else if(f=_.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const y=_.Util.singularValueDecompose2dScale(this.matrix);f=[f[0]*y[0],f[1]*y[1]]}const E=this._createMeshCanvas(f,h===ce.SHADING?null:this._background,O.cachedCanvases);return h!==ce.SHADING&&(I.setTransform(...O.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(E.offsetX,E.offsetY),I.scale(E.scaleX,E.scaleY),I.createPattern(E.canvas,"no-repeat")}}class j extends re{getPattern(){return"hotpink"}}class d{static get MAX_PATTERN_SIZE(){return(0,_.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(I,O,b,h,f){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=O,this.ctx=b,this.canvasGraphicsFactory=h,this.baseTransform=f}createPatternCanvas(I){const O=this.operatorList,b=this.bbox,h=this.xstep,f=this.ystep,E=this.paintType,R=this.color,M=this.canvasGraphicsFactory;(0,_.info)("TilingType: "+this.tilingType);const z=b[0],ye=b[1],Ce=b[2],De=b[3],ze=_.Util.singularValueDecompose2dScale(this.matrix),Oe=_.Util.singularValueDecompose2dScale(this.baseTransform),J=[ze[0]*Oe[0],ze[1]*Oe[1]],Q=this.getSizeAndScale(h,this.ctx.canvas.width,J[0]),pe=this.getSizeAndScale(f,this.ctx.canvas.height,J[1]),we=I.cachedCanvases.getCanvas("pattern",Q.size,pe.size,!0),Je=we.context,fe=M.createCanvasGraphics(Je);fe.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(fe,E,R);let S=z,F=ye,te=Ce,ve=De;return z<0&&(S=0,te+=Math.abs(z)),ye<0&&(F=0,ve+=Math.abs(ye)),Je.translate(-Q.scale*S,-pe.scale*F),fe.transform(Q.scale,0,0,pe.scale,0,0),Je.save(),this.clipBbox(fe,S,F,te,ve),fe.baseTransform=(0,N.getCurrentTransform)(fe.ctx),fe.executeOperatorList(O),fe.endDrawing(),{canvas:we.canvas,scaleX:Q.scale,scaleY:pe.scale,offsetX:S,offsetY:F}}getSizeAndScale(I,O,b){I=Math.abs(I);const h=Math.max(d.MAX_PATTERN_SIZE,O);let f=Math.ceil(I*b);return f>=h?f=h:b=f/I,{scale:b,size:f}}clipBbox(I,O,b,h,f){I.ctx.rect(O,b,h-O,f-b),I.current.updateRectMinMax((0,N.getCurrentTransform)(I.ctx),[O,b,h,f]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,O,b){const h=I.ctx,f=I.current;switch(O){case 1:const E=this.ctx;h.fillStyle=E.fillStyle,h.strokeStyle=E.strokeStyle,f.fillColor=E.fillStyle,f.strokeColor=E.strokeStyle;break;case 2:const y=_.Util.makeHexColor(b[0],b[1],b[2]);h.fillStyle=y,h.strokeStyle=y,f.fillColor=y,f.strokeColor=y;break;default:throw new _.FormatError(`Unsupported paint type: ${O}`)}}getPattern(I,O,b,h){let f=b;h!==ce.SHADING&&(f=_.Util.transform(f,O.baseTransform),this.matrix&&(f=_.Util.transform(f,this.matrix)));const E=this.createPatternCanvas(O);let y=new DOMMatrix(f);y=y.translate(E.offsetX,E.offsetY),y=y.scale(1/E.scaleX,1/E.scaleY);const R=I.createPattern(E.canvas,"repeat");try{R.setTransform(y)}catch(M){(0,_.warn)(`TilingPattern.getPattern: "${null==M?void 0:M.message}".`)}return R}}L.TilingPattern=d},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.applyMaskImageData=function N({src:Se,srcPos:ce=0,dest:Re,destPos:re=0,width:m,height:B,inverseDecode:D=!1}){const x=_.FeatureTest.isLittleEndian?4278190080:255,[j,C]=D?[0,x]:[x,0],u=m>>3,d=7&m,g=Se.length;Re=new Uint32Array(Re.buffer);for(let I=0;I<B;I++){for(const b=ce+u;ce<b;ce++){const h=ce<g?Se[ce]:255;Re[re++]=128&h?C:j,Re[re++]=64&h?C:j,Re[re++]=32&h?C:j,Re[re++]=16&h?C:j,Re[re++]=8&h?C:j,Re[re++]=4&h?C:j,Re[re++]=2&h?C:j,Re[re++]=1&h?C:j}if(0===d)continue;const O=ce<g?Se[ce++]:255;for(let b=0;b<d;b++)Re[re++]=O&1<<7-b?C:j}return{srcPos:ce,destPos:re}};var _=W(1)},(it,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.GlobalWorkerOptions=void 0;const W=Object.create(null);L.GlobalWorkerOptions=W,W.workerPort=void 0===W.workerPort?null:W.workerPort,W.workerSrc=void 0===W.workerSrc?"":W.workerSrc},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.MessageHandler=void 0;var _=W(1);function ce(re){switch(re instanceof Error||"object"==typeof re&&null!==re||(0,_.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),re.name){case"AbortException":return new _.AbortException(re.message);case"MissingPDFException":return new _.MissingPDFException(re.message);case"PasswordException":return new _.PasswordException(re.message,re.code);case"UnexpectedResponseException":return new _.UnexpectedResponseException(re.message,re.status);case"UnknownErrorException":return new _.UnknownErrorException(re.message,re.details);default:return new _.UnknownErrorException(re.message,re.toString())}}L.MessageHandler=class Re{constructor(m,B,D){this.sourceName=m,this.targetName=B,this.comObj=D,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const j=x.data;if(j.targetName!==this.sourceName)return;if(j.stream)return void this._processStreamMessage(j);if(j.callback){const u=j.callbackId,d=this.callbackCapabilities[u];if(!d)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],1===j.callback)d.resolve(j.data);else{if(2!==j.callback)throw new Error("Unexpected callback case");d.reject(ce(j.reason))}return}const C=this.actionHandler[j.action];if(!C)throw new Error(`Unknown action from worker: ${j.action}`);if(j.callbackId){const u=this.sourceName,d=j.sourceName;new Promise(function(g){g(C(j.data))}).then(function(g){D.postMessage({sourceName:u,targetName:d,callback:1,callbackId:j.callbackId,data:g})},function(g){D.postMessage({sourceName:u,targetName:d,callback:2,callbackId:j.callbackId,reason:ce(g)})})}else j.streamId?this._createStreamSink(j):C(j.data)},D.addEventListener("message",this._onComObjOnMessage)}on(m,B){const D=this.actionHandler;if(D[m])throw new Error(`There is already an actionName called "${m}"`);D[m]=B}send(m,B,D){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,data:B},D)}sendWithPromise(m,B,D){const x=this.callbackId++,j=(0,_.createPromiseCapability)();this.callbackCapabilities[x]=j;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,callbackId:x,data:B},D)}catch(C){j.reject(C)}return j.promise}sendWithStream(m,B,D,x){const j=this.streamId++,C=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:g=>{const I=(0,_.createPromiseCapability)();return this.streamControllers[j]={controller:g,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:C,targetName:u,action:m,streamId:j,data:B,desiredSize:g.desiredSize},x),I.promise},pull:g=>{const I=(0,_.createPromiseCapability)();return this.streamControllers[j].pullCall=I,d.postMessage({sourceName:C,targetName:u,stream:6,streamId:j,desiredSize:g.desiredSize}),I.promise},cancel:g=>{(0,_.assert)(g instanceof Error,"cancel must have a valid reason");const I=(0,_.createPromiseCapability)();return this.streamControllers[j].cancelCall=I,this.streamControllers[j].isClosed=!0,d.postMessage({sourceName:C,targetName:u,stream:1,streamId:j,reason:ce(g)}),I.promise}},D)}_createStreamSink(m){const B=m.streamId,D=this.sourceName,x=m.sourceName,j=this.comObj,C=this,u=this.actionHandler[m.action],d={enqueue(g,I=1,O){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=I,b>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_.createPromiseCapability)(),this.ready=this.sinkCapability.promise),j.postMessage({sourceName:D,targetName:x,stream:4,streamId:B,chunk:g},O)},close(){this.isCancelled||(this.isCancelled=!0,j.postMessage({sourceName:D,targetName:x,stream:3,streamId:B}),delete C.streamSinks[B])},error(g){(0,_.assert)(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,j.postMessage({sourceName:D,targetName:x,stream:5,streamId:B,reason:ce(g)}))},sinkCapability:(0,_.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:m.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[B]=d,new Promise(function(g){g(u(m.data,d))}).then(function(){j.postMessage({sourceName:D,targetName:x,stream:8,streamId:B,success:!0})},function(g){j.postMessage({sourceName:D,targetName:x,stream:8,streamId:B,reason:ce(g)})})}_processStreamMessage(m){const B=m.streamId,D=this.sourceName,x=m.sourceName,j=this.comObj,C=this.streamControllers[B],u=this.streamSinks[B];switch(m.stream){case 8:m.success?C.startCall.resolve():C.startCall.reject(ce(m.reason));break;case 7:m.success?C.pullCall.resolve():C.pullCall.reject(ce(m.reason));break;case 6:if(!u){j.postMessage({sourceName:D,targetName:x,stream:7,streamId:B,success:!0});break}u.desiredSize<=0&&m.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=m.desiredSize,new Promise(function(d){d(u.onPull&&u.onPull())}).then(function(){j.postMessage({sourceName:D,targetName:x,stream:7,streamId:B,success:!0})},function(d){j.postMessage({sourceName:D,targetName:x,stream:7,streamId:B,reason:ce(d)})});break;case 4:if((0,_.assert)(C,"enqueue should have stream controller"),C.isClosed)break;C.controller.enqueue(m.chunk);break;case 3:if((0,_.assert)(C,"close should have stream controller"),C.isClosed)break;C.isClosed=!0,C.controller.close(),this._deleteStreamController(C,B);break;case 5:(0,_.assert)(C,"error should have stream controller"),C.controller.error(ce(m.reason)),this._deleteStreamController(C,B);break;case 2:m.success?C.cancelCall.resolve():C.cancelCall.reject(ce(m.reason)),this._deleteStreamController(C,B);break;case 1:if(!u)break;new Promise(function(d){d(u.onCancel&&u.onCancel(ce(m.reason)))}).then(function(){j.postMessage({sourceName:D,targetName:x,stream:2,streamId:B,success:!0})},function(d){j.postMessage({sourceName:D,targetName:x,stream:2,streamId:B,reason:ce(d)})}),u.sinkCapability.reject(ce(m.reason)),u.isCancelled=!0,delete this.streamSinks[B];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(m,B){var D=this;return _asyncToGenerator(function*(){yield Promise.allSettled([m.startCall&&m.startCall.promise,m.pullCall&&m.pullCall.promise,m.cancelCall&&m.cancelCall.promise]),delete D.streamControllers[B]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(it,L,W)=>{var Se,ce;Object.defineProperty(L,"__esModule",{value:!0}),L.Metadata=void 0;var _=W(1);Se=new WeakMap,ce=new WeakMap,L.Metadata=class N{constructor({parsedData:re,rawData:m}){He(this,Se,void 0),He(this,ce,void 0),lt(this,Se,re),lt(this,ce,m)}getRaw(){return G(this,ce)}get(re){var m;return null!=(m=G(this,Se).get(re))?m:null}getAll(){return(0,_.objectFromMap)(G(this,Se))}has(re){return G(this,Se).has(re)}}},(it,L,W)=>{var Re,re,m,B,D,x,KA;Object.defineProperty(L,"__esModule",{value:!0}),L.OptionalContentConfig=void 0;var _=W(1);const N=Symbol("INTERNAL");class Se{constructor(u,d){He(this,Re,!0),this.name=u,this.intent=d}get visible(){return G(this,Re)}_setVisible(u,d){u!==N&&(0,_.unreachable)("Internal method `_setVisible` called."),lt(this,Re,d)}}Re=new WeakMap,re=new WeakMap,m=new WeakMap,B=new WeakMap,D=new WeakMap,x=new WeakSet,KA=function(u){const d=u.length;if(d<2)return!0;const g=u[0];for(let I=1;I<d;I++){const O=u[I];let b;if(Array.isArray(O))b=We(this,x,KA).call(this,O);else{if(!G(this,m).has(O))return(0,_.warn)(`Optional content group not found: ${O}`),!0;b=G(this,m).get(O).visible}switch(g){case"And":if(!b)return!1;break;case"Or":if(b)return!0;break;case"Not":return!b;default:return!0}}return"And"===g},L.OptionalContentConfig=class ce{constructor(u){if(He(this,x),He(this,re,!0),He(this,m,new Map),He(this,B,null),He(this,D,null),this.name=null,this.creator=null,null!==u){this.name=u.name,this.creator=u.creator,lt(this,D,u.order);for(const d of u.groups)G(this,m).set(d.id,new Se(d.name,d.intent));if("OFF"===u.baseState)for(const d of G(this,m).values())d._setVisible(N,!1);for(const d of u.on)G(this,m).get(d)._setVisible(N,!0);for(const d of u.off)G(this,m).get(d)._setVisible(N,!1);lt(this,B,new Map);for(const[d,g]of G(this,m))G(this,B).set(d,g.visible)}}isVisible(u){if(0===G(this,m).size)return!0;if(!u)return(0,_.warn)("Optional content group not defined."),!0;if("OCG"===u.type)return G(this,m).has(u.id)?G(this,m).get(u.id).visible:((0,_.warn)(`Optional content group not found: ${u.id}`),!0);if("OCMD"===u.type){if(u.expression)return We(this,x,KA).call(this,u.expression);if(!u.policy||"AnyOn"===u.policy){for(const d of u.ids){if(!G(this,m).has(d))return(0,_.warn)(`Optional content group not found: ${d}`),!0;if(G(this,m).get(d).visible)return!0}return!1}if("AllOn"===u.policy){for(const d of u.ids){if(!G(this,m).has(d))return(0,_.warn)(`Optional content group not found: ${d}`),!0;if(!G(this,m).get(d).visible)return!1}return!0}if("AnyOff"===u.policy){for(const d of u.ids){if(!G(this,m).has(d))return(0,_.warn)(`Optional content group not found: ${d}`),!0;if(!G(this,m).get(d).visible)return!0}return!1}if("AllOff"===u.policy){for(const d of u.ids){if(!G(this,m).has(d))return(0,_.warn)(`Optional content group not found: ${d}`),!0;if(G(this,m).get(d).visible)return!1}return!0}return(0,_.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,_.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,d=!0){G(this,m).has(u)?(G(this,m).get(u)._setVisible(N,!!d),lt(this,re,null)):(0,_.warn)(`Optional content group not found: ${u}`)}get hasInitialVisibility(){if(null!==G(this,re))return G(this,re);for(const[u,d]of G(this,m)){const g=G(this,B).get(u);if(d.visible!==g)return lt(this,re,!1)}return lt(this,re,!0)}getOrder(){return G(this,m).size?G(this,D)?G(this,D).slice():[...G(this,m).keys()]:null}getGroups(){return G(this,m).size>0?(0,_.objectFromMap)(G(this,m)):null}getGroup(u){return G(this,m).get(u)||null}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFDataTransportStream=void 0;var _=W(1),N=W(8);L.PDFDataTransportStream=class Se{constructor(m,B){(0,_.assert)(B,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m.progressiveDone||!1,this._contentDispositionFilename=m.contentDispositionFilename||null;const D=m.initialData;if((null==D?void 0:D.length)>0){const x=new Uint8Array(D).buffer;this._queuedChunks.push(x)}this._pdfDataRangeTransport=B,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._contentLength=m.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((x,j)=>{this._onReceiveData({begin:x,chunk:j})}),this._pdfDataRangeTransport.addProgressListener((x,j)=>{this._onProgress({loaded:x,total:j})}),this._pdfDataRangeTransport.addProgressiveReadListener(x=>{this._onReceiveData({chunk:x})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(m){const B=new Uint8Array(m.chunk).buffer;if(void 0===m.begin)this._fullRequestReader?this._fullRequestReader._enqueue(B):this._queuedChunks.push(B);else{const D=this._rangeReaders.some(function(x){return x._begin===m.begin&&(x._enqueue(B),!0)});(0,_.assert)(D,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m,B;return null!=(B=null==(m=this._fullRequestReader)?void 0:m._loaded)?B:0}_onProgress(m){if(void 0===m.total){const B=this._rangeReaders[0];(null==B?void 0:B.onProgress)&&B.onProgress({loaded:m.loaded})}else{const B=this._fullRequestReader;(null==B?void 0:B.onProgress)&&B.onProgress({loaded:m.loaded,total:m.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const B=this._rangeReaders.indexOf(m);B>=0&&this._rangeReaders.splice(B,1)}getFullReader(){(0,_.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new ce(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,B){if(B<=this._progressiveDataLength)return null;const D=new Re(this,m,B);return this._pdfDataRangeTransport.requestDataRange(m,B),this._rangeReaders.push(D),D}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);for(const B of this._rangeReaders.slice(0))B.cancel(m);this._pdfDataRangeTransport.abort()}};class ce{constructor(m,B,D=!1,x=null){this._stream=m,this._done=D||!1,this._filename=(0,N.isPdfFile)(x)?x:null,this._queuedChunks=B||[],this._loaded=0;for(const j of this._queuedChunks)this._loaded+=j.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var m=this;return _asyncToGenerator(function*(){if(m._queuedChunks.length>0)return{value:m._queuedChunks.shift(),done:!1};if(m._done)return{value:void 0,done:!0};const B=(0,_.createPromiseCapability)();return m._requests.push(B),B.promise})()}cancel(m){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Re{constructor(m,B,D){this._stream=m,this._begin=B,this._end=D,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(0===this._requests.length)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var m=this;return _asyncToGenerator(function*(){if(m._queuedChunk){const D=m._queuedChunk;return m._queuedChunk=null,{value:D,done:!1}}if(m._done)return{value:void 0,done:!0};const B=(0,_.createPromiseCapability)();return m._requests.push(B),B.promise})()}cancel(m){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(it,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.XfaText=void 0;class W{static textContent(N){const Se=[],ce={items:Se,styles:Object.create(null)};return function Re(re){var D;if(!re)return;let m=null;const B=re.name;if("#text"===B)m=re.value;else{if(!W.shouldBuildText(B))return;(null==(D=null==re?void 0:re.attributes)?void 0:D.textContent)?m=re.attributes.textContent:re.value&&(m=re.value)}if(null!==m&&Se.push({str:m}),re.children)for(const x of re.children)Re(x)}(N),ce}static shouldBuildText(N){return!("textarea"===N||"input"===N||"option"===N||"select"===N)}}L.XfaText=W},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.NodeStandardFontDataFactory=L.NodeCanvasFactory=L.NodeCMapReaderFactory=void 0;var _=W(9);const N=function(re){return new Promise((m,B)=>{__webpack_require__(172).readFile(re,(x,j)=>{!x&&j?m(new Uint8Array(j)):B(new Error(x))})})};L.NodeCanvasFactory=class Se extends _.BaseCanvasFactory{_createCanvas(m,B){return __webpack_require__(414).createCanvas(m,B)}},L.NodeCMapReaderFactory=class ce extends _.BaseCMapReaderFactory{_fetchData(m,B){return N(m).then(D=>({cMapData:D,compressionType:B}))}},L.NodeStandardFontDataFactory=class Re extends _.BaseStandardFontDataFactory{_fetchData(m){return N(m)}}},(it,L,W)=>{var re,m,B,D,x,j,C,u,d,YA,I,BU,b,JA,f,jU;Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationEditorLayer=void 0;var _=W(7),N=W(1),Se=W(23),ce=W(24);const y=class{constructor(M){He(this,d),He(this,I),He(this,b),He(this,f),He(this,re,void 0),He(this,m,!1),He(this,B,this.pointerup.bind(this)),He(this,D,this.pointerdown.bind(this)),He(this,x,new Map),He(this,j,!1),He(this,C,!1),He(this,u,void 0),y._initialized||(y._initialized=!0,Se.FreeTextEditor.initialize(M.l10n),ce.InkEditor.initialize(M.l10n),M.uiManager.registerEditorTypes([Se.FreeTextEditor,ce.InkEditor])),lt(this,u,M.uiManager),this.annotationStorage=M.annotationStorage,this.pageIndex=M.pageIndex,this.div=M.div,lt(this,re,M.accessibilityManager),G(this,u).addLayer(this)}updateToolbar(M){G(this,u).updateToolbar(M)}updateMode(M=G(this,u).getMode()){We(this,f,jU).call(this),M===N.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),G(this,u).unselectAll()}addInkEditorIfNeeded(M){if(M||G(this,u).getMode()===N.AnnotationEditorType.INK){if(!M)for(const ye of G(this,x).values())if(ye.isEmpty())return void ye.setInBackground();We(this,b,JA).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(M){G(this,u).setEditingState(M)}addCommands(M){G(this,u).addCommands(M)}enable(){this.div.style.pointerEvents="auto";for(const M of G(this,x).values())M.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const M of G(this,x).values())M.disableEditing()}setActiveEditor(M){G(this,u).getActive()!==M&&G(this,u).setActiveEditor(M)}enableClick(){this.div.addEventListener("pointerdown",G(this,D)),this.div.addEventListener("pointerup",G(this,B))}disableClick(){this.div.removeEventListener("pointerdown",G(this,D)),this.div.removeEventListener("pointerup",G(this,B))}attach(M){G(this,x).set(M.id,M)}detach(M){var z;G(this,x).delete(M.id),null==(z=G(this,re))||z.removePointerInTextLayer(M.contentDiv)}remove(M){G(this,u).removeEditor(M),this.detach(M),this.annotationStorage.remove(M.id),M.div.style.display="none",setTimeout(()=>{M.div.style.display="",M.div.remove(),M.isAttachedToDOM=!1,document.activeElement===document.body&&G(this,u).focusMainContainer()},0),G(this,C)||this.addInkEditorIfNeeded(!1)}add(M){if(We(this,d,YA).call(this,M),G(this,u).addEditor(M),this.attach(M),!M.isAttachedToDOM){const z=M.render();this.div.append(z),M.isAttachedToDOM=!0}this.moveEditorInDOM(M),M.onceAdded(),this.addToAnnotationStorage(M)}moveEditorInDOM(M){var z;null==(z=G(this,re))||z.moveElementInDOM(this.div,M.div,M.contentDiv,!0)}addToAnnotationStorage(M){!M.isEmpty()&&!this.annotationStorage.has(M.id)&&this.annotationStorage.setValue(M.id,M)}addOrRebuild(M){M.needsToBeRebuilt()?M.rebuild():this.add(M)}addANewEditor(M){this.addCommands({cmd:()=>{this.addOrRebuild(M)},undo:()=>{M.remove()},mustExec:!0})}addUndoableEditor(M){this.addCommands({cmd:()=>{this.addOrRebuild(M)},undo:()=>{M.remove()},mustExec:!1})}getNextId(){return G(this,u).getId()}deserialize(M){switch(M.annotationType){case N.AnnotationEditorType.FREETEXT:return Se.FreeTextEditor.deserialize(M,this);case N.AnnotationEditorType.INK:return ce.InkEditor.deserialize(M,this)}return null}setSelected(M){G(this,u).setSelected(M)}toggleSelected(M){G(this,u).toggleSelected(M)}isSelected(M){return G(this,u).isSelected(M)}unselect(M){G(this,u).unselect(M)}pointerup(M){if(!(0!==M.button||M.ctrlKey&&_.KeyboardManager.platform.isMac)&&M.target===this.div&&G(this,j)){if(lt(this,j,!1),!G(this,m))return void lt(this,m,!0);We(this,b,JA).call(this,M)}}pointerdown(M){if(0!==M.button||M.ctrlKey&&_.KeyboardManager.platform.isMac||M.target!==this.div)return;lt(this,j,!0);const ye=G(this,u).getActive();lt(this,m,!ye||ye.isEmpty())}drop(M){const z=M.dataTransfer.getData("text/plain"),ye=G(this,u).getEditor(z);if(!ye)return;M.preventDefault(),M.dataTransfer.dropEffect="move",We(this,d,YA).call(this,ye);const Ce=this.div.getBoundingClientRect();ye.translate(M.clientX-Ce.x-ye.startX,M.clientY-Ce.y-ye.startY),this.moveEditorInDOM(ye),ye.div.focus()}dragover(M){M.preventDefault()}destroy(){var M,z;(null==(M=G(this,u).getActive())?void 0:M.parent)===this&&G(this,u).setActiveEditor(null);for(const ye of G(this,x).values())null==(z=G(this,re))||z.removePointerInTextLayer(ye.contentDiv),ye.isAttachedToDOM=!1,ye.div.remove(),ye.parent=null;this.div=null,G(this,x).clear(),G(this,u).removeLayer(this)}render(M){this.viewport=M.viewport,(0,_.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const z of G(this,u).getEditors(this.pageIndex))this.add(z);this.updateMode()}update(M){this.viewport=M.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[M,z,ye,Ce]=this.viewport.viewBox;return[ye-M,Ce-z]}get viewportBaseDimensions(){const{width:M,height:z,rotation:ye}=this.viewport;return ye%180==0?[M,z]:[z,M]}setDimensions(){const{width:M,height:z,rotation:ye}=this.viewport,Ce=ye%180!=0,De=Math.floor(M)+"px",ze=Math.floor(z)+"px";this.div.style.width=Ce?ze:De,this.div.style.height=Ce?De:ze,this.div.setAttribute("data-main-rotation",ye)}};let Re=y;re=new WeakMap,m=new WeakMap,B=new WeakMap,D=new WeakMap,x=new WeakMap,j=new WeakMap,C=new WeakMap,u=new WeakMap,d=new WeakSet,YA=function(M){var z;M.parent!==this&&(this.attach(M),M.pageIndex=this.pageIndex,null==(z=M.parent)||z.detach(M),M.parent=this,M.div&&M.isAttachedToDOM&&(M.div.remove(),this.div.append(M.div)))},I=new WeakSet,BU=function(M){switch(G(this,u).getMode()){case N.AnnotationEditorType.FREETEXT:return new Se.FreeTextEditor(M);case N.AnnotationEditorType.INK:return new ce.InkEditor(M)}return null},b=new WeakSet,JA=function(M){const z=this.getNextId(),ye=We(this,I,BU).call(this,{parent:this,id:z,x:M.offsetX,y:M.offsetY});return ye&&this.add(ye),ye},f=new WeakSet,jU=function(){lt(this,C,!0);for(const M of G(this,x).values())M.isEmpty()&&M.remove();lt(this,C,!1)},Ln(Re,"_initialized",!1),L.AnnotationEditorLayer=Re},(it,L,W)=>{var Re,re,m,B,D,x,j,C,VU,d,HU,I,UU,b,ZA;Object.defineProperty(L,"__esModule",{value:!0}),L.FreeTextEditor=void 0;var _=W(1),N=W(7),Se=W(6);const f=class extends Se.AnnotationEditor{constructor(y){super(pc(fc({},y),{name:"freeTextEditor"})),He(this,C),He(this,d),He(this,I),He(this,b),He(this,Re,this.editorDivBlur.bind(this)),He(this,re,this.editorDivFocus.bind(this)),He(this,m,this.editorDivKeydown.bind(this)),He(this,B,void 0),He(this,D,""),He(this,x,!1),He(this,j,void 0),lt(this,B,y.color||f._defaultColor||Se.AnnotationEditor._defaultLineColor),lt(this,j,y.fontSize||f._defaultFontSize)}static initialize(y){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(M=>[M,y.get(M)]));const R=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(R.getPropertyValue("--freetext-padding"))}static updateDefaultParams(y,R){switch(y){case _.AnnotationEditorParamsType.FREETEXT_SIZE:f._defaultFontSize=R;break;case _.AnnotationEditorParamsType.FREETEXT_COLOR:f._defaultColor=R}}updateParams(y,R){switch(y){case _.AnnotationEditorParamsType.FREETEXT_SIZE:We(this,C,VU).call(this,R);break;case _.AnnotationEditorParamsType.FREETEXT_COLOR:We(this,d,HU).call(this,R)}}static get defaultPropertiesToUpdate(){return[[_.AnnotationEditorParamsType.FREETEXT_SIZE,f._defaultFontSize],[_.AnnotationEditorParamsType.FREETEXT_COLOR,f._defaultColor||Se.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_.AnnotationEditorParamsType.FREETEXT_SIZE,G(this,j)],[_.AnnotationEditorParamsType.FREETEXT_COLOR,G(this,B)]]}getInitialTranslation(){return[-f._internalPadding*this.parent.scaleFactor,-(f._internalPadding+G(this,j))*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",G(this,m)),this.editorDiv.addEventListener("focus",G(this,re)),this.editorDiv.addEventListener("blur",G(this,Re)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",G(this,m)),this.editorDiv.removeEventListener("focus",G(this,re)),this.editorDiv.removeEventListener("blur",G(this,Re)),this.div.focus(),this.isEditing=!1)}focusin(y){super.focusin(y),y.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),G(this,x)||(lt(this,x,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),lt(this,D,We(this,I,UU).call(this).trimEnd()),We(this,b,ZA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(y){this.enableEditMode(),this.editorDiv.focus()}keydown(y){y.target===this.div&&"Enter"===y.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(y){f._keyboardManager.exec(this,y)}editorDivFocus(y){this.isEditing=!0}editorDivBlur(y){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let y,R;this.width&&(y=this.x,R=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),f._l10nPromise.get("editor_free_text_aria_label").then(z=>{var ye;return null==(ye=this.editorDiv)?void 0:ye.setAttribute("aria-label",z)}),f._l10nPromise.get("free_text_default_content").then(z=>{var ye;return null==(ye=this.editorDiv)?void 0:ye.setAttribute("default-content",z)}),this.editorDiv.contentEditable=!0;const{style:M}=this.editorDiv;if(M.fontSize=`calc(${G(this,j)}px * var(--scale-factor))`,M.color=G(this,B),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,N.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[z,ye]=this.parent.viewportBaseDimensions;this.setAt(y*z,R*ye,this.width*z,this.height*ye);for(const Ce of G(this,D).split("\n")){const De=document.createElement("div");De.append(Ce?document.createTextNode(Ce):document.createElement("br")),this.editorDiv.append(De)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(y,R){const M=super.deserialize(y,R);return lt(M,j,y.fontSize),lt(M,B,_.Util.makeHexColor(...y.color)),lt(M,D,y.value),M}serialize(){if(this.isEmpty())return null;const y=f._internalPadding*this.parent.scaleFactor,R=this.getRect(y,y),M=Se.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:_.AnnotationEditorType.FREETEXT,color:M,fontSize:G(this,j),value:G(this,D),pageIndex:this.parent.pageIndex,rect:R,rotation:this.rotation}}};let ce=f;Re=new WeakMap,re=new WeakMap,m=new WeakMap,B=new WeakMap,D=new WeakMap,x=new WeakMap,j=new WeakMap,C=new WeakSet,VU=function(y){const R=z=>{this.editorDiv.style.fontSize=`calc(${z}px * var(--scale-factor))`,this.translate(0,-(z-G(this,j))*this.parent.scaleFactor),lt(this,j,z),We(this,b,ZA).call(this)},M=G(this,j);this.parent.addCommands({cmd:()=>{R(y)},undo:()=>{R(M)},mustExec:!0,type:_.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},d=new WeakSet,HU=function(y){const R=G(this,B);this.parent.addCommands({cmd:()=>{lt(this,B,y),this.editorDiv.style.color=y},undo:()=>{lt(this,B,R),this.editorDiv.style.color=R},mustExec:!0,type:_.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,UU=function(){const y=this.editorDiv.getElementsByTagName("div");if(0===y.length)return this.editorDiv.innerText;const R=[];for(let M=0,z=y.length;M<z;M++){const Ce=y[M].firstChild;R.push("#text"===(null==Ce?void 0:Ce.nodeName)?Ce.data:"")}return R.join("\n")},b=new WeakSet,ZA=function(){const[y,R]=this.parent.viewportBaseDimensions,M=this.div.getBoundingClientRect();this.width=M.width/y,this.height=M.height/R},Ln(ce,"_freeTextDefaultContent",""),Ln(ce,"_l10nPromise"),Ln(ce,"_internalPadding",0),Ln(ce,"_defaultColor",null),Ln(ce,"_defaultFontSize",10),Ln(ce,"_keyboardManager",new N.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],f.prototype.commitOrRemove]])),Ln(ce,"_type","freetext"),L.FreeTextEditor=ce},(it,L,W)=>{var m,B,D,x,j,C,u,d,g,I,O,b,h,f,E,$U,R,zU,z,GU,Ce,WU,ze,QA,J,qU,pe,XU,Je,KU,S,hs,te,eT,le,xm,Ie,Mm,w,gc,q,tT,ae,Pm,Ke,nT,Fe,YU,me,JU,Qe,ZU,H,rT,Ne,Im,T,mc,Ae,iT;Object.defineProperty(L,"__esModule",{value:!0}),L.InkEditor=void 0,Object.defineProperty(L,"fitCurve",{enumerable:!0,get:function(){return Se.fitCurve}});var _=W(1),N=W(6),Se=W(25),ce=W(7);const xe=class extends N.AnnotationEditor{constructor(ue){super(pc(fc({},ue),{name:"inkEditor"})),He(this,E),He(this,R),He(this,z),He(this,Ce),He(this,ze),He(this,J),He(this,pe),He(this,Je),He(this,S),He(this,te),He(this,le),He(this,Ie),He(this,w),He(this,q),He(this,ae),He(this,Fe),He(this,me),He(this,Qe),He(this,H),He(this,Ne),He(this,T),He(this,Ae),He(this,m,0),He(this,B,0),He(this,D,0),He(this,x,this.canvasPointermove.bind(this)),He(this,j,this.canvasPointerleave.bind(this)),He(this,C,this.canvasPointerup.bind(this)),He(this,u,this.canvasPointerdown.bind(this)),He(this,d,!1),He(this,g,!1),He(this,I,null),He(this,O,null),He(this,b,0),He(this,h,0),He(this,f,null),this.color=ue.color||null,this.thickness=ue.thickness||null,this.opacity=ue.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ue){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(be=>[be,ue.get(be)]))}static updateDefaultParams(ue,be){switch(ue){case _.AnnotationEditorParamsType.INK_THICKNESS:xe._defaultThickness=be;break;case _.AnnotationEditorParamsType.INK_COLOR:xe._defaultColor=be;break;case _.AnnotationEditorParamsType.INK_OPACITY:xe._defaultOpacity=be/100}}updateParams(ue,be){switch(ue){case _.AnnotationEditorParamsType.INK_THICKNESS:We(this,E,$U).call(this,be);break;case _.AnnotationEditorParamsType.INK_COLOR:We(this,R,zU).call(this,be);break;case _.AnnotationEditorParamsType.INK_OPACITY:We(this,z,GU).call(this,be)}}static get defaultPropertiesToUpdate(){return[[_.AnnotationEditorParamsType.INK_THICKNESS,xe._defaultThickness],[_.AnnotationEditorParamsType.INK_COLOR,xe._defaultColor||N.AnnotationEditor._defaultLineColor],[_.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*xe._defaultOpacity)]]}get propertiesToUpdate(){var ue;return[[_.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||xe._defaultThickness],[_.AnnotationEditorParamsType.INK_COLOR,this.color||xe._defaultColor||N.AnnotationEditor._defaultLineColor],[_.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!=(ue=this.opacity)?ue:xe._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(We(this,le,xm).call(this),We(this,Ie,Mm).call(this)),this.isAttachedToDOM||(this.parent.add(this),We(this,w,gc).call(this)),We(this,T,mc).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,G(this,O).disconnect(),lt(this,O,null),super.remove())}enableEditMode(){G(this,d)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",G(this,u)),this.canvas.addEventListener("pointerup",G(this,C)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",G(this,u)),this.canvas.removeEventListener("pointerup",G(this,C)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){G(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),lt(this,d,!0),this.div.classList.add("disabled"),We(this,T,mc).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ue){super.focusin(ue),this.enableEditMode()}canvasPointerdown(ue){0!==ue.button||!this.isInEditMode()||G(this,d)||(this.setInForeground(),"mouse"!==ue.type&&this.div.focus(),ue.stopPropagation(),this.canvas.addEventListener("pointerleave",G(this,j)),this.canvas.addEventListener("pointermove",G(this,x)),We(this,J,qU).call(this,ue.offsetX,ue.offsetY))}canvasPointermove(ue){ue.stopPropagation(),We(this,pe,XU).call(this,ue.offsetX,ue.offsetY)}canvasPointerup(ue){0===ue.button&&this.isInEditMode()&&0!==this.currentPath.length&&(ue.stopPropagation(),We(this,te,eT).call(this,ue),this.setInBackground())}canvasPointerleave(ue){We(this,te,eT).call(this,ue),this.setInBackground()}render(){if(this.div)return this.div;let ue,be;this.width&&(ue=this.x,be=this.y),super.render(),xe._l10nPromise.get("editor_ink_aria_label").then(Me=>{var qe;return null==(qe=this.div)?void 0:qe.setAttribute("aria-label",Me)});const[Be,X,V,K]=We(this,Ce,WU).call(this);if(this.setAt(Be,X,0,0),this.setDims(V,K),We(this,le,xm).call(this),this.width){const[Me,qe]=this.parent.viewportBaseDimensions;this.setAt(ue*Me,be*qe,this.width*Me,this.height*qe),lt(this,g,!0),We(this,w,gc).call(this),this.setDims(this.width*Me,this.height*qe),We(this,S,hs).call(this),We(this,Ae,iT).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return We(this,Ie,Mm).call(this),this.div}setDimensions(ue,be){const Be=Math.round(ue),X=Math.round(be);if(G(this,b)===Be&&G(this,h)===X)return;lt(this,b,Be),lt(this,h,X),this.canvas.style.visibility="hidden",G(this,m)&&Math.abs(G(this,m)-ue/be)>.01&&(be=Math.ceil(ue/G(this,m)),this.setDims(ue,be));const[V,K]=this.parent.viewportBaseDimensions;this.width=ue/V,this.height=be/K,G(this,d)&&We(this,q,tT).call(this,ue,be),We(this,w,gc).call(this),We(this,S,hs).call(this),this.canvas.style.visibility="visible"}static deserialize(ue,be){var xt,Ct;const Be=super.deserialize(ue,be);Be.thickness=ue.thickness,Be.color=_.Util.makeHexColor(...ue.color),Be.opacity=ue.opacity;const[X,V]=be.pageDimensions,K=Be.width*X,Me=Be.height*V,qe=be.scaleFactor,ct=ue.thickness/2;lt(Be,m,K/Me),lt(Be,d,!0),lt(Be,b,Math.round(K)),lt(Be,h,Math.round(Me));for(const{bezier:Dt}of ue.paths){const Mt=[];Be.paths.push(Mt);let on=qe*(Dt[0]-ct),an=qe*(Me-Dt[1]-ct);for(let kt=2,er=Dt.length;kt<er;kt+=6){const $t=qe*(Dt[kt+4]-ct),_n=qe*(Me-Dt[kt+5]-ct);Mt.push([[on,an],[qe*(Dt[kt]-ct),qe*(Me-Dt[kt+1]-ct)],[qe*(Dt[kt+2]-ct),qe*(Me-Dt[kt+3]-ct)],[$t,_n]]),on=$t,an=_n}const nn=We(this,Ke,nT).call(this,Mt);Be.bezierPath2D.push(nn)}const ht=We(xt=Be,H,rT).call(xt);return lt(Be,D,Math.max(16,ht[2]-ht[0])),lt(Be,B,Math.max(16,ht[3]-ht[1])),We(Ct=Be,q,tT).call(Ct,K,Me),Be}serialize(){if(this.isEmpty())return null;const ue=this.getRect(0,0),be=this.rotation%180==0?ue[3]-ue[1]:ue[2]-ue[0],Be=N.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_.AnnotationEditorType.INK,color:Be,thickness:this.thickness,opacity:this.opacity,paths:We(this,Fe,YU).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,be),pageIndex:this.parent.pageIndex,rect:ue,rotation:this.rotation}}};let re=xe;m=new WeakMap,B=new WeakMap,D=new WeakMap,x=new WeakMap,j=new WeakMap,C=new WeakMap,u=new WeakMap,d=new WeakMap,g=new WeakMap,I=new WeakMap,O=new WeakMap,b=new WeakMap,h=new WeakMap,f=new WeakMap,E=new WeakSet,$U=function(ue){const be=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ue,We(this,T,mc).call(this)},undo:()=>{this.thickness=be,We(this,T,mc).call(this)},mustExec:!0,type:_.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,zU=function(ue){const be=this.color;this.parent.addCommands({cmd:()=>{this.color=ue,We(this,S,hs).call(this)},undo:()=>{this.color=be,We(this,S,hs).call(this)},mustExec:!0,type:_.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},z=new WeakSet,GU=function(ue){ue/=100;const be=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ue,We(this,S,hs).call(this)},undo:()=>{this.opacity=be,We(this,S,hs).call(this)},mustExec:!0,type:_.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Ce=new WeakSet,WU=function(){const{width:ue,height:be,rotation:Be}=this.parent.viewport;switch(Be){case 90:return[0,ue,ue,be];case 180:return[ue,be,ue,be];case 270:return[be,0,ue,be];default:return[0,0,ue,be]}},ze=new WeakSet,QA=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,ce.opacityToHex)(this.opacity)}`},J=new WeakSet,qU=function(ue,be){this.isEditing=!0,G(this,g)||(lt(this,g,!0),We(this,w,gc).call(this),this.thickness||(this.thickness=xe._defaultThickness),this.color||(this.color=xe._defaultColor||N.AnnotationEditor._defaultLineColor),null!=this.opacity||(this.opacity=xe._defaultOpacity)),this.currentPath.push([ue,be]),lt(this,I,null),We(this,ze,QA).call(this),this.ctx.beginPath(),this.ctx.moveTo(ue,be),lt(this,f,()=>{!G(this,f)||(G(this,I)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):We(this,S,hs).call(this),this.ctx.lineTo(...G(this,I)),lt(this,I,null),this.ctx.stroke()),window.requestAnimationFrame(G(this,f)))}),window.requestAnimationFrame(G(this,f))},pe=new WeakSet,XU=function(ue,be){const[Be,X]=this.currentPath.at(-1);ue===Be&&be===X||(this.currentPath.push([ue,be]),lt(this,I,[ue,be]))},Je=new WeakSet,KU=function(ue,be){var ct;this.ctx.closePath(),lt(this,f,null),ue=Math.min(Math.max(ue,0),this.canvas.width),be=Math.min(Math.max(be,0),this.canvas.height);const[Be,X]=this.currentPath.at(-1);let V;if((ue!==Be||be!==X)&&this.currentPath.push([ue,be]),1!==this.currentPath.length)V=(0,Se.fitCurve)(this.currentPath,30,null);else{const ht=[ue,be];V=[[ht,ht.slice(),ht.slice(),ht]]}const K=We(ct=xe,Ke,nT).call(ct,V);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(V),this.bezierPath2D.push(K),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(We(this,le,xm).call(this),We(this,Ie,Mm).call(this)),We(this,T,mc).call(this))},mustExec:!0})},S=new WeakSet,hs=function(){if(this.isEmpty())return void We(this,ae,Pm).call(this);We(this,ze,QA).call(this);const{canvas:ue,ctx:be}=this;be.setTransform(1,0,0,1,0,0),be.clearRect(0,0,ue.width,ue.height),We(this,ae,Pm).call(this);for(const Be of this.bezierPath2D)be.stroke(Be)},te=new WeakSet,eT=function(ue){We(this,Je,KU).call(this,ue.offsetX,ue.offsetY),this.canvas.removeEventListener("pointerleave",G(this,j)),this.canvas.removeEventListener("pointermove",G(this,x)),this.parent.addToAnnotationStorage(this)},le=new WeakSet,xm=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",xe._l10nPromise.get("editor_ink_canvas_aria_label").then(ue=>{var be;return null==(be=this.canvas)?void 0:be.setAttribute("aria-label",ue)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ie=new WeakSet,Mm=function(){lt(this,O,new ResizeObserver(ue=>{const be=ue[0].contentRect;be.width&&be.height&&this.setDimensions(be.width,be.height)})),G(this,O).observe(this.div)},w=new WeakSet,gc=function(){if(!G(this,g))return;const[ue,be]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ue),this.canvas.height=Math.ceil(this.height*be),We(this,ae,Pm).call(this)},q=new WeakSet,tT=function(ue,be){const Be=We(this,Ne,Im).call(this),X=(ue-Be)/G(this,D),V=(be-Be)/G(this,B);this.scaleFactor=Math.min(X,V)},ae=new WeakSet,Pm=function(){const ue=We(this,Ne,Im).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ue,this.translationY*this.scaleFactor+ue)},Ke=new WeakSet,nT=function(ue){const be=new Path2D;for(let Be=0,X=ue.length;Be<X;Be++){const[V,K,Me,qe]=ue[Be];0===Be&&be.moveTo(...V),be.bezierCurveTo(K[0],K[1],Me[0],Me[1],qe[0],qe[1])}return be},Fe=new WeakSet,YU=function(ue,be,Be,X){const K=[],Me=this.thickness/2;let qe,ct;for(const ht of this.paths){qe=[],ct=[];for(let xt=0,Ct=ht.length;xt<Ct;xt++){const[Dt,Mt,on,an]=ht[xt],nn=ue*(Dt[0]+be)+Me,kt=X-ue*(Dt[1]+Be)-Me,er=ue*(Mt[0]+be)+Me,kr=X-ue*(Mt[1]+Be)-Me,Xr=ue*(on[0]+be)+Me,cn=X-ue*(on[1]+Be)-Me,mr=ue*(an[0]+be)+Me,$t=X-ue*(an[1]+Be)-Me;0===xt&&(qe.push(nn,kt),ct.push(nn,kt)),qe.push(er,kr,Xr,cn,mr,$t),We(this,me,JU).call(this,nn,kt,er,kr,Xr,cn,mr,$t,4,ct)}K.push({bezier:qe,points:ct})}return K},me=new WeakSet,JU=function(ue,be,Be,X,V,K,Me,qe,ct,ht){if(We(this,Qe,ZU).call(this,ue,be,Be,X,V,K,Me,qe))ht.push(Me,qe);else{for(let xt=1;xt<ct-1;xt++){const Ct=xt/ct,Dt=1-Ct;let Mt=Ct*ue+Dt*Be,on=Ct*be+Dt*X,an=Ct*Be+Dt*V,nn=Ct*X+Dt*K;Mt=Ct*Mt+Dt*an,on=Ct*on+Dt*nn,an=Ct*an+Dt*(Ct*V+Dt*Me),nn=Ct*nn+Dt*(Ct*K+Dt*qe),Mt=Ct*Mt+Dt*an,on=Ct*on+Dt*nn,ht.push(Mt,on)}ht.push(Me,qe)}},Qe=new WeakSet,ZU=function(ue,be,Be,X,V,K,Me,qe){const xt=(3*X-2*be-qe)**2,Dt=(3*K-be-2*qe)**2;return Math.max((3*Be-2*ue-Me)**2,(3*V-ue-2*Me)**2)+Math.max(xt,Dt)<=10},H=new WeakSet,rT=function(){let ue=1/0,be=-1/0,Be=1/0,X=-1/0;for(const V of this.paths)for(const[K,Me,qe,ct]of V){const ht=_.Util.bezierBoundingBox(...K,...Me,...qe,...ct);ue=Math.min(ue,ht[0]),Be=Math.min(Be,ht[1]),be=Math.max(be,ht[2]),X=Math.max(X,ht[3])}return[ue,Be,be,X]},Ne=new WeakSet,Im=function(){return G(this,d)?Math.ceil(this.thickness*this.parent.scaleFactor):0},T=new WeakSet,mc=function(ue=!1){if(this.isEmpty())return;if(!G(this,d))return void We(this,S,hs).call(this);const be=We(this,H,rT).call(this),Be=We(this,Ne,Im).call(this);lt(this,D,Math.max(16,be[2]-be[0])),lt(this,B,Math.max(16,be[3]-be[1]));const X=Math.ceil(Be+G(this,D)*this.scaleFactor),V=Math.ceil(Be+G(this,B)*this.scaleFactor),[K,Me]=this.parent.viewportBaseDimensions;this.width=X/K,this.height=V/Me,lt(this,m,X/V),We(this,Ae,iT).call(this);const qe=this.translationX,ct=this.translationY;this.translationX=-be[0],this.translationY=-be[1],We(this,w,gc).call(this),We(this,S,hs).call(this),lt(this,b,X),lt(this,h,V),this.setDims(X,V);const ht=ue?Be/this.scaleFactor/2:0;this.translate(qe-this.translationX-ht,ct-this.translationY-ht)},Ae=new WeakSet,iT=function(){const{style:ue}=this.div;G(this,m)>=1?(ue.minHeight="16px",ue.minWidth=`${Math.round(16*G(this,m))}px`):(ue.minWidth="16px",ue.minHeight=`${Math.round(16/G(this,m))}px`)},He(re,Ke),Ln(re,"_defaultColor",null),Ln(re,"_defaultOpacity",1),Ln(re,"_defaultThickness",1),Ln(re,"_l10nPromise"),Ln(re,"_type","ink"),L.InkEditor=re},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.fitCurve=void 0;const _=W(26);L.fitCurve=_},it=>{function W(C,u,d,g,I){var b,h,f,E,y,R,M,z,ye,Ce,De,ze,Oe;if(2===C.length)return ze=x.vectorLen(x.subtract(C[0],C[1]))/3,[b=[C[0],x.addArrays(C[0],x.mulItems(u,ze)),x.addArrays(C[1],x.mulItems(d,ze)),C[1]]];if(h=function Re(C){var d,g,I,u=[];return C.forEach((O,b)=>{d=b?g+x.vectorLen(x.subtract(O,I)):0,u.push(d),g=d,I=O}),u=u.map(O=>O/g)}(C),[b,E,R]=_(C,h,h,u,d,I),0===E||E<g)return[b];if(E<g*g)for(f=h,y=E,M=R,Oe=0;Oe<20;Oe++){if(f=Se(b,C,f),[b,E,R]=_(C,h,f,u,d,I),E<g)return[b];if(R===M){let J=E/y;if(J>.9999&&J<1.0001)break}y=E,M=R}return De=[],(z=x.subtract(C[R-1],C[R+1])).every(J=>0===J)&&(z=x.subtract(C[R-1],C[R]),[z[0],z[1]]=[-z[1],z[0]]),ye=x.normalize(z),Ce=x.mulItems(ye,-1),(De=De.concat(W(C.slice(0,R+1),u,ye,g,I))).concat(W(C.slice(R),Ce,d,g,I))}function _(C,u,d,g,I,O){var b,h,f;return b=function N(C,u,d,g){var I,O,b,h,f,E,M,z,ye,Ce,De,ze,Oe,J,Q,pe=C[0],we=C[C.length-1];for(I=[pe,null,null,we],O=x.zeros_Xx2x2(u.length),De=0,ze=u.length;De<ze;De++)(b=O[De])[0]=x.mulItems(d,3*(J=u[De])*((Q=1-J)*Q)),b[1]=x.mulItems(g,3*Q*(J*J));for(h=[[0,0],[0,0]],f=[0,0],De=0,ze=C.length;De<ze;De++)J=u[De],h[0][0]+=x.dot((b=O[De])[0],b[0]),h[0][1]+=x.dot(b[0],b[1]),h[1][0]+=x.dot(b[0],b[1]),h[1][1]+=x.dot(b[1],b[1]),Oe=x.subtract(C[De],j.q([pe,pe,we,we],J)),f[0]+=x.dot(b[0],Oe),f[1]+=x.dot(b[1],Oe);return M=0==(E=h[0][0]*h[1][1]-h[1][0]*h[0][1])?0:(f[0]*h[1][1]-f[1]*h[0][1])/E,z=0===E?0:(h[0][0]*f[1]-h[1][0]*f[0])/E,M<(ye=1e-6*(Ce=x.vectorLen(x.subtract(pe,we))))||z<ye?(I[1]=x.addArrays(pe,x.mulItems(d,Ce/3)),I[2]=x.addArrays(we,x.mulItems(g,Ce/3))):(I[1]=x.addArrays(pe,x.mulItems(d,M)),I[2]=x.addArrays(we,x.mulItems(g,z))),I}(C,d,g,I),[h,f]=function re(C,u,d){var g,I,O,b,h,f,E,y;I=0,O=Math.floor(C.length/2);const R=m(u,10);for(h=0,f=C.length;h<f;h++)E=C[h],y=B(0,d[h],R,10),(g=(b=x.subtract(j.q(u,y),E))[0]*b[0]+b[1]*b[1])>I&&(I=g,O=h);return[I,O]}(C,b,u),O&&O({bez:b,points:C,params:u,maxErr:h,maxPoint:f}),[b,h,f]}function Se(C,u,d){return d.map((g,I)=>function ce(C,u,d){var g=x.subtract(j.q(C,d),u),I=j.qprime(C,d),O=x.mulMatrix(g,I),b=x.sum(x.squareItems(I))+2*x.mulMatrix(g,j.qprimeprime(C,d));return 0===b?d:d-O/b}(C,u[I],g))}var m=function(C,u){for(var d,g=[0],I=C[0],O=0,b=1;b<=u;b++)d=j.q(C,b/u),O+=x.vectorLen(x.subtract(d,I)),g.push(O),I=d;return g.map(h=>h/O)};function B(C,u,d,g){if(u<0)return 0;if(u>1)return 1;for(var O,h,f,E=1;E<=g;E++)if(u<=d[E]){f=(u-(O=d[E-1]))/(d[E]-O)*(E/g-(h=(E-1)/g))+h;break}return f}function D(C,u){return x.normalize(x.subtract(C,u))}class x{static zeros_Xx2x2(u){for(var d=[];u--;)d.push([0,0]);return d}static mulItems(u,d){return u.map(g=>g*d)}static mulMatrix(u,d){return u.reduce((g,I,O)=>g+I*d[O],0)}static subtract(u,d){return u.map((g,I)=>g-d[I])}static addArrays(u,d){return u.map((g,I)=>g+d[I])}static addItems(u,d){return u.map(g=>g+d)}static sum(u){return u.reduce((d,g)=>d+g)}static dot(u,d){return x.mulMatrix(u,d)}static vectorLen(u){return Math.hypot(...u)}static divItems(u,d){return u.map(g=>g/d)}static squareItems(u){return u.map(d=>d*d)}static normalize(u){return this.divItems(u,this.vectorLen(u))}}class j{static q(u,d){var g=1-d,I=x.mulItems(u[0],g*g*g),O=x.mulItems(u[1],3*g*g*d),b=x.mulItems(u[2],3*g*d*d),h=x.mulItems(u[3],d*d*d);return x.addArrays(x.addArrays(I,O),x.addArrays(b,h))}static qprime(u,d){var g=1-d,I=x.mulItems(x.subtract(u[1],u[0]),3*g*g),O=x.mulItems(x.subtract(u[2],u[1]),6*g*d),b=x.mulItems(x.subtract(u[3],u[2]),3*d*d);return x.addArrays(x.addArrays(I,O),b)}static qprimeprime(u,d){return x.addArrays(x.mulItems(x.addArrays(x.subtract(u[2],x.mulItems(u[1],2)),u[0]),6*(1-d)),x.mulItems(x.addArrays(x.subtract(u[3],x.mulItems(u[2],2)),u[1]),6*d))}}it.exports=function L(C,u,d){if(!Array.isArray(C))throw new TypeError("First argument should be an array");if(C.forEach(b=>{if(!Array.isArray(b)||b.some(h=>"number"!=typeof h)||b.length!==C[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(C=C.filter((b,h)=>0===h||!b.every((f,E)=>f===C[h-1][E]))).length<2)return[];const g=C.length,I=D(C[1],C[0]),O=D(C[g-2],C[g-1]);return W(C,I,O,u,d)},it.exports.fitCubic=W,it.exports.createTangent=D},(it,L,W)=>{var S,sT,te,oT,le,aT;Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationLayer=void 0;var _=W(1),N=W(8),Se=W(5),ce=W(28),Re=W(29);const B=new WeakSet;function D(Te){return{width:Te[2]-Te[0],height:Te[3]-Te[1]}}class x{static create(w){switch(w.data.annotationType){case _.AnnotationType.LINK:return new C(w);case _.AnnotationType.TEXT:return new u(w);case _.AnnotationType.WIDGET:switch(w.data.fieldType){case"Tx":return new g(w);case"Btn":return w.data.radioButton?new O(w):w.data.checkBox?new I(w):new b(w);case"Ch":return new h(w)}return new d(w);case _.AnnotationType.POPUP:return new f(w);case _.AnnotationType.FREETEXT:return new y(w);case _.AnnotationType.LINE:return new R(w);case _.AnnotationType.SQUARE:return new M(w);case _.AnnotationType.CIRCLE:return new z(w);case _.AnnotationType.POLYLINE:return new ye(w);case _.AnnotationType.CARET:return new De(w);case _.AnnotationType.INK:return new ze(w);case _.AnnotationType.POLYGON:return new Ce(w);case _.AnnotationType.HIGHLIGHT:return new Oe(w);case _.AnnotationType.UNDERLINE:return new J(w);case _.AnnotationType.SQUIGGLY:return new Q(w);case _.AnnotationType.STRIKEOUT:return new pe(w);case _.AnnotationType.STAMP:return new we(w);case _.AnnotationType.FILEATTACHMENT:return new Je(w);default:return new j(w)}}}class j{constructor(w,{isRenderable:U=!1,ignoreBorder:q=!1,createQuadrilaterals:ie=!1}={}){this.isRenderable=U,this.data=w.data,this.layer=w.layer,this.page=w.page,this.viewport=w.viewport,this.linkService=w.linkService,this.downloadManager=w.downloadManager,this.imageResourcesPath=w.imageResourcesPath,this.renderForms=w.renderForms,this.svgFactory=w.svgFactory,this.annotationStorage=w.annotationStorage,this.enableScripting=w.enableScripting,this.hasJSActions=w.hasJSActions,this._fieldObjects=w.fieldObjects,this._mouseState=w.mouseState,U&&(this.container=this._createContainer(q)),ie&&(this.quadrilaterals=this._createQuadrilaterals(q))}_createContainer(w=!1){const U=this.data,q=this.page,ie=this.viewport,ae=document.createElement("section"),{width:Pe,height:Ke}=D(U.rect),[ot,Fe,nt,me]=ie.viewBox,ke=nt-ot,Qe=me-Fe;ae.setAttribute("data-annotation-id",U.id);const ee=_.Util.normalizeRect([U.rect[0],q.view[3]-U.rect[1]+q.view[1],U.rect[2],q.view[3]-U.rect[3]+q.view[1]]);if(!w&&U.borderStyle.width>0){ae.style.borderWidth=`${U.borderStyle.width}px`;const ge=U.borderStyle.horizontalCornerRadius,Ne=U.borderStyle.verticalCornerRadius;switch(ge>0||Ne>0?ae.style.borderRadius=`calc(${ge}px * var(--scale-factor)) / calc(${Ne}px * var(--scale-factor))`:this instanceof O&&(ae.style.borderRadius=`calc(${Pe}px * var(--scale-factor)) / calc(${Ke}px * var(--scale-factor))`),U.borderStyle.style){case _.AnnotationBorderStyleType.SOLID:ae.style.borderStyle="solid";break;case _.AnnotationBorderStyleType.DASHED:ae.style.borderStyle="dashed";break;case _.AnnotationBorderStyleType.BEVELED:(0,_.warn)("Unimplemented border style: beveled");break;case _.AnnotationBorderStyleType.INSET:(0,_.warn)("Unimplemented border style: inset");break;case _.AnnotationBorderStyleType.UNDERLINE:ae.style.borderBottomStyle="solid"}const tt=U.borderColor||null;tt?ae.style.borderColor=_.Util.makeHexColor(0|tt[0],0|tt[1],0|tt[2]):ae.style.borderWidth=0}ae.style.left=100*(ee[0]-ot)/ke+"%",ae.style.top=100*(ee[1]-Fe)/Qe+"%";const{rotation:H}=U;return U.hasOwnCanvas||0===H?(ae.style.width=100*Pe/ke+"%",ae.style.height=100*Ke/Qe+"%"):this.setRotation(H,ae),ae}setRotation(w,U=this.container){const[q,ie,ae,Pe]=this.viewport.viewBox,Ke=ae-q,ot=Pe-ie,{width:Fe,height:nt}=D(this.data.rect);let me,ke;w%180==0?(me=100*Fe/Ke,ke=100*nt/ot):(me=100*nt/Ke,ke=100*Fe/ot),U.style.width=`${me}%`,U.style.height=`${ke}%`,U.setAttribute("data-main-rotation",(360-w)%360)}get _commonActions(){const w=(U,q,ie)=>{const ae=ie.detail[U];ie.target.style[q]=ce.ColorConverters[`${ae[0]}_HTML`](ae.slice(1))};return(0,_.shadow)(this,"_commonActions",{display:U=>{const q=U.detail.display%2==1;this.container.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:q,print:0===U.detail.display||3===U.detail.display})},print:U=>{this.annotationStorage.setValue(this.data.id,{print:U.detail.print})},hidden:U=>{this.container.style.visibility=U.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:U.detail.hidden})},focus:U=>{setTimeout(()=>U.target.focus({preventScroll:!1}),0)},userName:U=>{U.target.title=U.detail.userName},readonly:U=>{U.detail.readonly?U.target.setAttribute("readonly",""):U.target.removeAttribute("readonly")},required:U=>{this._setRequired(U.target,U.detail.required)},bgColor:U=>{w("bgColor","backgroundColor",U)},fillColor:U=>{w("fillColor","backgroundColor",U)},fgColor:U=>{w("fgColor","color",U)},textColor:U=>{w("textColor","color",U)},borderColor:U=>{w("borderColor","borderColor",U)},strokeColor:U=>{w("strokeColor","borderColor",U)},rotation:U=>{const q=U.detail.rotation;this.setRotation(q),this.annotationStorage.setValue(this.data.id,{rotation:q})}})}_dispatchEventFromSandbox(w,U){const q=this._commonActions;for(const ie of Object.keys(U.detail)){const ae=w[ie]||q[ie];ae&&ae(U)}}_setDefaultPropertiesFromJS(w){if(!this.enableScripting)return;const U=this.annotationStorage.getRawValue(this.data.id);if(!U)return;const q=this._commonActions;for(const[ie,ae]of Object.entries(U)){const Pe=q[ie];Pe&&(Pe({detail:{[ie]:ae},target:w}),delete U[ie])}}_createQuadrilaterals(w=!1){if(!this.data.quadPoints)return null;const U=[],q=this.data.rect;for(const ie of this.data.quadPoints)this.data.rect=[ie[2].x,ie[2].y,ie[1].x,ie[1].y],U.push(this._createContainer(w));return this.data.rect=q,U}_createPopup(w,U){let q=this.container;this.quadrilaterals&&(w=w||this.quadrilaterals,q=this.quadrilaterals[0]),w||((w=document.createElement("div")).className="popupTriggerArea",q.append(w));const ae=new E({container:q,trigger:w,color:U.color,titleObj:U.titleObj,modificationDate:U.modificationDate,contentsObj:U.contentsObj,richText:U.richText,hideWrapper:!0}).render();ae.style.left="100%",q.append(ae)}_renderQuadrilaterals(w){for(const U of this.quadrilaterals)U.className=w;return this.quadrilaterals}render(){(0,_.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(w,U=null){const q=[];if(this._fieldObjects){const ie=this._fieldObjects[w];if(ie)for(const{page:ae,id:Pe,exportValues:Ke}of ie){if(-1===ae||Pe===U)continue;const ot="string"==typeof Ke?Ke:null,Fe=document.querySelector(`[data-element-id="${Pe}"]`);!Fe||B.has(Fe)?q.push({id:Pe,exportValue:ot,domElement:Fe}):(0,_.warn)(`_getElementsByName - element not allowed: ${Pe}`)}return q}for(const ie of document.getElementsByName(w)){const{id:ae,exportValue:Pe}=ie;ae!==U&&(!B.has(ie)||q.push({id:ae,exportValue:Pe,domElement:ie}))}return q}static get platform(){const w="undefined"!=typeof navigator?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:w.includes("Win"),isMac:w.includes("Mac")})}}class C extends j{constructor(w,U=null){super(w,{isRenderable:!0,ignoreBorder:!!(null==U?void 0:U.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=w.data.isTooltipOnly}render(){const{data:w,linkService:U}=this,q=document.createElement("a");q.setAttribute("data-element-id",w.id);let ie=!1;return w.url?(U.addLinkAttributes(q,w.url,w.newWindow),ie=!0):w.action?(this._bindNamedAction(q,w.action),ie=!0):w.dest?(this._bindLink(q,w.dest),ie=!0):(w.actions&&(w.actions.Action||w.actions["Mouse Up"]||w.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(q,w),ie=!0),w.resetForm?(this._bindResetFormAction(q,w.resetForm),ie=!0):this.isTooltipOnly&&!ie&&(this._bindLink(q,""),ie=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((ae,Pe)=>{const Ke=0===Pe?q:q.cloneNode();return ae.append(Ke),ae}):(this.container.className="linkAnnotation",ie&&this.container.append(q),this.container)}_bindLink(w,U){w.href=this.linkService.getDestinationHash(U),w.onclick=()=>(U&&this.linkService.goToDestination(U),!1),(U||""===U)&&(w.className="internalLink")}_bindNamedAction(w,U){w.href=this.linkService.getAnchorUrl(""),w.onclick=()=>(this.linkService.executeNamedAction(U),!1),w.className="internalLink"}_bindJSAction(w,U){w.href=this.linkService.getAnchorUrl("");const q=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ie of Object.keys(U.actions)){const ae=q.get(ie);!ae||(w[ae]=()=>{var Pe;return null==(Pe=this.linkService.eventBus)||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U.id,name:ie}}),!1})}w.onclick||(w.onclick=()=>!1),w.className="internalLink"}_bindResetFormAction(w,U){const q=w.onclick;if(q||(w.href=this.linkService.getAnchorUrl("")),w.className="internalLink",!this._fieldObjects)return(0,_.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(q||(w.onclick=()=>!1));w.onclick=()=>{var nt;q&&q();const{fields:ie,refs:ae,include:Pe}=U,Ke=[];if(0!==ie.length||0!==ae.length){const me=new Set(ae);for(const ke of ie){const Qe=this._fieldObjects[ke]||[];for(const{id:ee}of Qe)me.add(ee)}for(const ke of Object.values(this._fieldObjects))for(const Qe of ke)me.has(Qe.id)===Pe&&Ke.push(Qe)}else for(const me of Object.values(this._fieldObjects))Ke.push(...me);const ot=this.annotationStorage,Fe=[];for(const me of Ke){const{id:ke}=me;switch(Fe.push(ke),me.type){case"text":case"combobox":case"listbox":ot.setValue(ke,{value:me.defaultValue||""});break;case"checkbox":case"radiobutton":ot.setValue(ke,{value:me.defaultValue===me.exportValues});break;default:continue}const Qe=document.querySelector(`[data-element-id="${ke}"]`);Qe&&(B.has(Qe)?Qe.dispatchEvent(new Event("resetform")):(0,_.warn)(`_bindResetFormAction - element not allowed: ${ke}`))}return this.enableScripting&&(null==(nt=this.linkService.eventBus)||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Fe,name:"ResetForm"}})),!1}}}class u extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str))})}render(){this.container.className="textAnnotation";const w=document.createElement("img");return w.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",w.alt="[{{type}} Annotation]",w.dataset.l10nId="text_annotation_type",w.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(w,this.data),this.container.append(w),this.container}}class d extends j{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(w){const{isWin:U,isMac:q}=j.platform;return U&&w.ctrlKey||q&&w.metaKey}_setEventListener(w,U,q,ie){U.includes("mouse")?w.addEventListener(U,ae=>{var Pe;null==(Pe=this.linkService.eventBus)||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:ie(ae),shift:ae.shiftKey,modifier:this._getKeyModifier(ae)}})}):w.addEventListener(U,ae=>{var Pe;null==(Pe=this.linkService.eventBus)||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:ie(ae)}})})}_setEventListeners(w,U,q){var ie;for(const[ae,Pe]of U)("Action"===Pe||(null==(ie=this.data.actions)?void 0:ie[Pe]))&&this._setEventListener(w,ae,Pe,q)}_setBackgroundColor(w){const U=this.data.backgroundColor||null;w.style.backgroundColor=null===U?"transparent":_.Util.makeHexColor(U[0],U[1],U[2])}_setTextStyle(w){const{fontColor:q}=this.data.defaultAppearanceData,ie=this.data.defaultAppearanceData.fontSize||9,ae=w.style;let Pe;if(this.data.multiLine){const Ke=Math.abs(this.data.rect[3]-this.data.rect[1]),ot=Math.round(Ke/(_.LINE_FACTOR*ie))||1;Pe=Math.min(ie,Math.round(Ke/ot/_.LINE_FACTOR))}else{const Ke=Math.abs(this.data.rect[3]-this.data.rect[1]);Pe=Math.min(ie,Math.round(Ke/_.LINE_FACTOR))}ae.fontSize=`calc(${Pe}px * var(--scale-factor))`,ae.color=_.Util.makeHexColor(q[0],q[1],q[2]),null!==this.data.textAlignment&&(ae.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(w,U){U?w.setAttribute("required",!0):w.removeAttribute("required"),w.setAttribute("aria-required",U)}}class g extends d{constructor(w){super(w,{isRenderable:w.renderForms||!w.data.hasAppearance&&!!w.data.fieldValue})}setPropertyOnSiblings(w,U,q,ie){const ae=this.annotationStorage;for(const Pe of this._getElementsByName(w.name,w.id))Pe.domElement&&(Pe.domElement[U]=q),ae.setValue(Pe.id,{[ie]:q})}render(){var ie;const w=this.annotationStorage,U=this.data.id;this.container.className="textWidgetAnnotation";let q=null;if(this.renderForms){const ae=w.getValue(U,{value:this.data.fieldValue});let Pe=ae.formattedValue||ae.value||"";const Ke=w.getValue(U,{charLimit:this.data.maxLen}).charLimit;Ke&&Pe.length>Ke&&(Pe=Pe.slice(0,Ke));const ot={userValue:Pe,formattedValue:null,valueOnFocus:""};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=Pe,this.data.doNotScroll&&(q.style.overflowY="hidden")):(q=document.createElement("input"),q.type="text",q.setAttribute("value",Pe),this.data.doNotScroll&&(q.style.overflowX="hidden")),B.add(q),q.setAttribute("data-element-id",U),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=1e3,this._setRequired(q,this.data.required),Ke&&(q.maxLength=Ke),q.addEventListener("input",nt=>{w.setValue(U,{value:nt.target.value}),this.setPropertyOnSiblings(q,"value",nt.target.value,"value")}),q.addEventListener("resetform",nt=>{var ke;const me=null!=(ke=this.data.defaultFieldValue)?ke:"";q.value=ot.userValue=me,ot.formattedValue=null});let Fe=nt=>{const{formattedValue:me}=ot;null!=me&&(nt.target.value=me),nt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",me=>{ot.userValue&&(me.target.value=ot.userValue),ot.valueOnFocus=me.target.value}),q.addEventListener("updatefromsandbox",me=>{this._dispatchEventFromSandbox({value(Qe){var ee;ot.userValue=null!=(ee=Qe.detail.value)?ee:"",w.setValue(U,{value:ot.userValue.toString()}),Qe.target.value=ot.userValue},formattedValue(Qe){const{formattedValue:ee}=Qe.detail;ot.formattedValue=ee,null!=ee&&Qe.target!==document.activeElement&&(Qe.target.value=ee),w.setValue(U,{formattedValue:ee})},selRange(Qe){Qe.target.setSelectionRange(...Qe.detail.selRange)},charLimit:Qe=>{var Ne;const{charLimit:ee}=Qe.detail,{target:H}=Qe;if(0===ee)return void H.removeAttribute("maxLength");H.setAttribute("maxLength",ee);let ge=ot.userValue;!ge||ge.length<=ee||(ge=ge.slice(0,ee),H.value=ot.userValue=ge,w.setValue(U,{value:ge}),null==(Ne=this.linkService.eventBus)||Ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:ge,willCommit:!0,commitKey:1,selStart:H.selectionStart,selEnd:H.selectionEnd}}))}},me)}),q.addEventListener("keydown",me=>{var ee;let ke=-1;if("Escape"===me.key?ke=0:"Enter"===me.key?ke=2:"Tab"===me.key&&(ke=3),-1===ke)return;const{value:Qe}=me.target;ot.valueOnFocus!==Qe&&(ot.userValue=Qe,null==(ee=this.linkService.eventBus)||ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:Qe,willCommit:!0,commitKey:ke,selStart:me.target.selectionStart,selEnd:me.target.selectionEnd}}))});const nt=Fe;Fe=null,q.addEventListener("blur",me=>{var Qe;const{value:ke}=me.target;ot.userValue=ke,this._mouseState.isDown&&ot.valueOnFocus!==ke&&(null==(Qe=this.linkService.eventBus)||Qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:ke,willCommit:!0,commitKey:1,selStart:me.target.selectionStart,selEnd:me.target.selectionEnd}})),nt(me)}),(null==(ie=this.data.actions)?void 0:ie.Keystroke)&&q.addEventListener("beforeinput",me=>{var T;const{data:ke,target:Qe}=me,{value:ee,selectionStart:H,selectionEnd:ge}=Qe;let Ne=H,tt=ge;switch(me.inputType){case"deleteWordBackward":{const de=ee.substring(0,H).match(/\w*[^\w]*$/);de&&(Ne-=de[0].length);break}case"deleteWordForward":{const de=ee.substring(H).match(/^[^\w]*\w*/);de&&(tt+=de[0].length);break}case"deleteContentBackward":H===ge&&(Ne-=1);break;case"deleteContentForward":H===ge&&(tt+=1)}me.preventDefault(),null==(T=this.linkService.eventBus)||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:ee,change:ke||"",willCommit:!1,selStart:Ne,selEnd:tt}})}),this._setEventListeners(q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],me=>me.target.value)}if(Fe&&q.addEventListener("blur",Fe),this.data.comb){const me=(this.data.rect[2]-this.data.rect[0])/Ke;q.classList.add("comb"),q.style.letterSpacing=`calc(${me}px * var(--scale-factor) - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class I extends d{constructor(w){super(w,{isRenderable:w.renderForms})}render(){const w=this.annotationStorage,U=this.data,q=U.id;let ie=w.getValue(q,{value:U.exportValue===U.fieldValue}).value;"string"==typeof ie&&(ie="Off"!==ie,w.setValue(q,{value:ie})),this.container.className="buttonWidgetAnnotation checkBox";const ae=document.createElement("input");return B.add(ae),ae.setAttribute("data-element-id",q),ae.disabled=U.readOnly,this._setRequired(ae,this.data.required),ae.type="checkbox",ae.name=U.fieldName,ie&&ae.setAttribute("checked",!0),ae.setAttribute("exportValue",U.exportValue),ae.tabIndex=1e3,ae.addEventListener("change",Pe=>{const{name:Ke,checked:ot}=Pe.target;for(const Fe of this._getElementsByName(Ke,q)){const nt=ot&&Fe.exportValue===U.exportValue;Fe.domElement&&(Fe.domElement.checked=nt),w.setValue(Fe.id,{value:nt})}w.setValue(q,{value:ot})}),ae.addEventListener("resetform",Pe=>{Pe.target.checked=(U.defaultFieldValue||"Off")===U.exportValue}),this.enableScripting&&this.hasJSActions&&(ae.addEventListener("updatefromsandbox",Pe=>{this._dispatchEventFromSandbox({value(ot){ot.target.checked="Off"!==ot.detail.value,w.setValue(q,{value:ot.target.checked})}},Pe)}),this._setEventListeners(ae,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pe=>Pe.target.checked)),this._setBackgroundColor(ae),this._setDefaultPropertiesFromJS(ae),this.container.append(ae),this.container}}class O extends d{constructor(w){super(w,{isRenderable:w.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const w=this.annotationStorage,U=this.data,q=U.id;let ie=w.getValue(q,{value:U.fieldValue===U.buttonValue}).value;"string"==typeof ie&&(ie=ie!==U.buttonValue,w.setValue(q,{value:ie}));const ae=document.createElement("input");if(B.add(ae),ae.setAttribute("data-element-id",q),ae.disabled=U.readOnly,this._setRequired(ae,this.data.required),ae.type="radio",ae.name=U.fieldName,ie&&ae.setAttribute("checked",!0),ae.tabIndex=1e3,ae.addEventListener("change",Pe=>{const{name:Ke,checked:ot}=Pe.target;for(const Fe of this._getElementsByName(Ke,q))w.setValue(Fe.id,{value:!1});w.setValue(q,{value:ot})}),ae.addEventListener("resetform",Pe=>{const Ke=U.defaultFieldValue;Pe.target.checked=null!=Ke&&Ke===U.buttonValue}),this.enableScripting&&this.hasJSActions){const Pe=U.buttonValue;ae.addEventListener("updatefromsandbox",Ke=>{this._dispatchEventFromSandbox({value:Fe=>{const nt=Pe===Fe.detail.value;for(const me of this._getElementsByName(Fe.target.name)){const ke=nt&&me.id===q;me.domElement&&(me.domElement.checked=ke),w.setValue(me.id,{value:ke})}}},Ke)}),this._setEventListeners(ae,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ke=>Ke.target.checked)}return this._setBackgroundColor(ae),this._setDefaultPropertiesFromJS(ae),this.container.append(ae),this.container}}class b extends C{constructor(w){super(w,{ignoreBorder:w.data.hasAppearance})}render(){const w=super.render();w.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(w.title=this.data.alternativeText);const U=w.lastChild;return this.enableScripting&&this.hasJSActions&&U&&(this._setDefaultPropertiesFromJS(U),U.addEventListener("updatefromsandbox",q=>{this._dispatchEventFromSandbox({},q)})),w}}class h extends d{constructor(w){super(w,{isRenderable:w.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const w=this.annotationStorage,U=this.data.id,q=w.getValue(U,{value:this.data.fieldValue}),ie=document.createElement("select");B.add(ie),ie.setAttribute("data-element-id",U),ie.disabled=this.data.readOnly,this._setRequired(ie,this.data.required),ie.name=this.data.fieldName,ie.tabIndex=1e3;let ae=this.data.combo&&this.data.options.length>0;this.data.combo||(ie.size=this.data.options.length,this.data.multiSelect&&(ie.multiple=!0)),ie.addEventListener("resetform",Fe=>{const nt=this.data.defaultFieldValue;for(const me of ie.options)me.selected=me.value===nt});for(const Fe of this.data.options){const nt=document.createElement("option");nt.textContent=Fe.displayValue,nt.value=Fe.exportValue,q.value.includes(Fe.exportValue)&&(nt.setAttribute("selected",!0),ae=!1),ie.append(nt)}let Pe=null;if(ae){const Fe=document.createElement("option");Fe.value=" ",Fe.setAttribute("hidden",!0),Fe.setAttribute("selected",!0),ie.prepend(Fe),Pe=()=>{Fe.remove(),ie.removeEventListener("input",Pe),Pe=null},ie.addEventListener("input",Pe)}const Ke=(Fe,nt)=>{const me=nt?"value":"textContent",ke=Fe.target.options;return Fe.target.multiple?Array.prototype.filter.call(ke,Qe=>Qe.selected).map(Qe=>Qe[me]):-1===ke.selectedIndex?null:ke[ke.selectedIndex][me]},ot=Fe=>Array.prototype.map.call(Fe.target.options,me=>({displayValue:me.textContent,exportValue:me.value}));return this.enableScripting&&this.hasJSActions?(ie.addEventListener("updatefromsandbox",Fe=>{this._dispatchEventFromSandbox({value(me){null==Pe||Pe();const ke=me.detail.value,Qe=new Set(Array.isArray(ke)?ke:[ke]);for(const ee of ie.options)ee.selected=Qe.has(ee.value);w.setValue(U,{value:Ke(me,!0)})},multipleSelection(me){ie.multiple=!0},remove(me){const ke=ie.options,Qe=me.detail.remove;ke[Qe].selected=!1,ie.remove(Qe),ke.length>0&&-1===Array.prototype.findIndex.call(ke,H=>H.selected)&&(ke[0].selected=!0),w.setValue(U,{value:Ke(me,!0),items:ot(me)})},clear(me){for(;0!==ie.length;)ie.remove(0);w.setValue(U,{value:null,items:[]})},insert(me){const{index:ke,displayValue:Qe,exportValue:ee}=me.detail.insert,H=ie.children[ke],ge=document.createElement("option");ge.textContent=Qe,ge.value=ee,H?H.before(ge):ie.append(ge),w.setValue(U,{value:Ke(me,!0),items:ot(me)})},items(me){const{items:ke}=me.detail;for(;0!==ie.length;)ie.remove(0);for(const Qe of ke){const{displayValue:ee,exportValue:H}=Qe,ge=document.createElement("option");ge.textContent=ee,ge.value=H,ie.append(ge)}ie.options.length>0&&(ie.options[0].selected=!0),w.setValue(U,{value:Ke(me,!0),items:ot(me)})},indices(me){const ke=new Set(me.detail.indices);for(const Qe of me.target.options)Qe.selected=ke.has(Qe.index);w.setValue(U,{value:Ke(me,!0)})},editable(me){me.target.disabled=!me.detail.editable}},Fe)}),ie.addEventListener("input",Fe=>{var ke;const nt=Ke(Fe,!0),me=Ke(Fe,!1);w.setValue(U,{value:nt}),null==(ke=this.linkService.eventBus)||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:me,changeEx:nt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ie,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Fe=>Fe.target.checked)):ie.addEventListener("input",function(Fe){w.setValue(U,{value:Ke(Fe,!0)})}),this.data.combo&&this._setTextStyle(ie),this._setBackgroundColor(ie),this._setDefaultPropertiesFromJS(ie),this.container.append(ie),this.container}}class f extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!((null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str))})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const q=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===q.length)return this.container;const ie=new E({container:this.container,trigger:Array.from(q),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),ae=this.page,Pe=_.Util.normalizeRect([this.data.parentRect[0],ae.view[3]-this.data.parentRect[1]+ae.view[1],this.data.parentRect[2],ae.view[3]-this.data.parentRect[3]+ae.view[1]]),Ke=Pe[0]+this.data.parentRect[2]-this.data.parentRect[0],ot=Pe[1],[Fe,nt,me,ke]=this.viewport.viewBox,ee=ke-nt;return this.container.style.left=100*(Ke-Fe)/(me-Fe)+"%",this.container.style.top=100*(ot-nt)/ee+"%",this.container.append(ie.render()),this.container}}class E{constructor(w){this.container=w.container,this.trigger=w.trigger,this.color=w.color,this.titleObj=w.titleObj,this.modificationDate=w.modificationDate,this.contentsObj=w.contentsObj,this.richText=w.richText,this.hideWrapper=w.hideWrapper||!1,this.pinned=!1}render(){var Ke,ot;const U=document.createElement("div");U.className="popupWrapper",this.hideElement=this.hideWrapper?U:this.container,this.hideElement.hidden=!0;const q=document.createElement("div");q.className="popup";const ie=this.color;ie&&(q.style.backgroundColor=_.Util.makeHexColor(0|.7*(255-ie[0])+ie[0],0|.7*(255-ie[1])+ie[1],0|.7*(255-ie[2])+ie[2]));const ae=document.createElement("h1");ae.dir=this.titleObj.dir,ae.textContent=this.titleObj.str,q.append(ae);const Pe=N.PDFDateString.toDateObject(this.modificationDate);if(Pe){const Fe=document.createElement("span");Fe.className="popupDate",Fe.textContent="{{date}}, {{time}}",Fe.dataset.l10nId="annotation_date_string",Fe.dataset.l10nArgs=JSON.stringify({date:Pe.toLocaleDateString(),time:Pe.toLocaleTimeString()}),q.append(Fe)}if(!(null==(Ke=this.richText)?void 0:Ke.str)||(null==(ot=this.contentsObj)?void 0:ot.str)&&this.contentsObj.str!==this.richText.str){const Fe=this._formatContents(this.contentsObj);q.append(Fe)}else Re.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:q}),q.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Fe of this.trigger)Fe.addEventListener("click",this._toggle.bind(this)),Fe.addEventListener("mouseover",this._show.bind(this,!1)),Fe.addEventListener("mouseout",this._hide.bind(this,!1));return q.addEventListener("click",this._hide.bind(this,!0)),U.append(q),U}_formatContents({str:w,dir:U}){const q=document.createElement("p");q.className="popupContent",q.dir=U;const ie=w.split(/(?:\r\n?|\n)/);for(let ae=0,Pe=ie.length;ae<Pe;++ae)q.append(document.createTextNode(ie[ae])),ae<Pe-1&&q.append(document.createElement("br"));return q}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(w=!1){w&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(w=!0){w&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class y extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0}),this.textContent=w.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const w=document.createElement("div");w.className="annotationTextContent",w.setAttribute("role","comment");for(const U of this.textContent){const q=document.createElement("span");q.textContent=U,w.append(q)}this.container.append(w)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class R extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const w=this.data,{width:U,height:q}=D(w.rect),ie=this.svgFactory.create(U,q,!0),ae=this.svgFactory.createElement("svg:line");return ae.setAttribute("x1",w.rect[2]-w.lineCoordinates[0]),ae.setAttribute("y1",w.rect[3]-w.lineCoordinates[1]),ae.setAttribute("x2",w.rect[2]-w.lineCoordinates[2]),ae.setAttribute("y2",w.rect[3]-w.lineCoordinates[3]),ae.setAttribute("stroke-width",w.borderStyle.width||1),ae.setAttribute("stroke","transparent"),ae.setAttribute("fill","transparent"),ie.append(ae),this.container.append(ie),this._createPopup(ae,w),this.container}}class M extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const w=this.data,{width:U,height:q}=D(w.rect),ie=this.svgFactory.create(U,q,!0),ae=w.borderStyle.width,Pe=this.svgFactory.createElement("svg:rect");return Pe.setAttribute("x",ae/2),Pe.setAttribute("y",ae/2),Pe.setAttribute("width",U-ae),Pe.setAttribute("height",q-ae),Pe.setAttribute("stroke-width",ae||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),ie.append(Pe),this.container.append(ie),this._createPopup(Pe,w),this.container}}class z extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const w=this.data,{width:U,height:q}=D(w.rect),ie=this.svgFactory.create(U,q,!0),ae=w.borderStyle.width,Pe=this.svgFactory.createElement("svg:ellipse");return Pe.setAttribute("cx",U/2),Pe.setAttribute("cy",q/2),Pe.setAttribute("rx",U/2-ae/2),Pe.setAttribute("ry",q/2-ae/2),Pe.setAttribute("stroke-width",ae||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),ie.append(Pe),this.container.append(ie),this._createPopup(Pe,w),this.container}}class ye extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const w=this.data,{width:U,height:q}=D(w.rect),ie=this.svgFactory.create(U,q,!0);let ae=[];for(const Ke of w.vertices)ae.push(Ke.x-w.rect[0]+","+(w.rect[3]-Ke.y));ae=ae.join(" ");const Pe=this.svgFactory.createElement(this.svgElementName);return Pe.setAttribute("points",ae),Pe.setAttribute("stroke-width",w.borderStyle.width||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),ie.append(Pe),this.container.append(ie),this._createPopup(Pe,w),this.container}}class Ce extends ye{constructor(w){super(w),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class De extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ze extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const w=this.data,{width:U,height:q}=D(w.rect),ie=this.svgFactory.create(U,q,!0);for(const ae of w.inkLists){let Pe=[];for(const ot of ae)Pe.push(`${ot.x-w.rect[0]},${w.rect[3]-ot.y}`);Pe=Pe.join(" ");const Ke=this.svgFactory.createElement(this.svgElementName);Ke.setAttribute("points",Pe),Ke.setAttribute("stroke-width",w.borderStyle.width||1),Ke.setAttribute("stroke","transparent"),Ke.setAttribute("fill","transparent"),this._createPopup(Ke,w),ie.append(Ke)}return this.container.append(ie),this.container}}class Oe extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class J extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Q extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class pe extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class we extends j{constructor(w){var q,ie,ae;super(w,{isRenderable:!!(w.data.hasPopup||(null==(q=w.data.titleObj)?void 0:q.str)||(null==(ie=w.data.contentsObj)?void 0:ie.str)||(null==(ae=w.data.richText)?void 0:ae.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Je extends j{constructor(w){var ie;super(w,{isRenderable:!0});const{filename:U,content:q}=this.data.file;this.filename=(0,N.getFilenameFromUrl)(U),this.content=q,null==(ie=this.linkService.eventBus)||ie.dispatch("fileattachmentannotation",{source:this,filename:U,content:q})}render(){var U,q;this.container.className="fileAttachmentAnnotation";const w=document.createElement("div");return w.className="popupTriggerArea",w.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(U=this.data.titleObj)?void 0:U.str)||(null==(q=this.data.contentsObj)?void 0:q.str)||this.data.richText)&&this._createPopup(w,this.data),this.container.append(w),this.container}_download(){var w;null==(w=this.downloadManager)||w.openOrDownloadData(this.container,this.content,this.filename)}}const Ie=class{static render(w){var Ke,ot;const{annotations:U,div:q,viewport:ie,accessibilityManager:ae}=w;We(this,te,oT).call(this,q,ie);let Pe=0;for(const Fe of U){if(Fe.annotationType!==_.AnnotationType.POPUP){const{width:me,height:ke}=D(Fe.rect);if(me<=0||ke<=0)continue}const nt=x.create({data:Fe,layer:q,page:w.page,viewport:ie,linkService:w.linkService,downloadManager:w.downloadManager,imageResourcesPath:w.imageResourcesPath||"",renderForms:!1!==w.renderForms,svgFactory:new N.DOMSVGFactory,annotationStorage:w.annotationStorage||new Se.AnnotationStorage,enableScripting:w.enableScripting,hasJSActions:w.hasJSActions,fieldObjects:w.fieldObjects,mouseState:w.mouseState||{isDown:!1}});if(nt.isRenderable){const me=nt.render();if(Fe.hidden&&(me.style.visibility="hidden"),Array.isArray(me))for(const ke of me)ke.style.zIndex=Pe++,We(Ke=Ie,S,sT).call(Ke,ke,Fe.id,q,ae);else me.style.zIndex=Pe++,nt instanceof f?q.prepend(me):We(ot=Ie,S,sT).call(ot,me,Fe.id,q,ae)}}We(this,le,aT).call(this,q,w.annotationCanvasMap)}static update(w){const{annotationCanvasMap:U,div:q,viewport:ie}=w;We(this,te,oT).call(this,q,ie),We(this,le,aT).call(this,q,U),q.hidden=!1}};let fe=Ie;S=new WeakSet,sT=function(w,U,q,ie){const ae=w.firstChild||w;ae.id=`${N.AnnotationPrefix}${U}`,q.append(w),null==ie||ie.moveElementInDOM(q,w,ae,!1)},te=new WeakSet,oT=function(w,{width:U,height:q,rotation:ie}){const{style:ae}=w,Pe=ie%180!=0,Ke=Math.floor(U)+"px",ot=Math.floor(q)+"px";ae.width=Pe?ot:Ke,ae.height=Pe?Ke:ot,w.setAttribute("data-main-rotation",ie)},le=new WeakSet,aT=function(w,U){if(U){for(const[q,ie]of U){const ae=w.querySelector(`[data-annotation-id="${q}"]`);if(!ae)continue;const{firstChild:Pe}=ae;Pe?"CANVAS"===Pe.nodeName?Pe.replaceWith(ie):Pe.before(ie):ae.append(ie)}U.clear()}},He(fe,S),He(fe,te),He(fe,le),L.AnnotationLayer=fe},(it,L)=>{function W(N){return Math.floor(255*Math.max(0,Math.min(1,N))).toString(16).padStart(2,"0")}Object.defineProperty(L,"__esModule",{value:!0}),L.ColorConverters=void 0,L.ColorConverters=class _{static CMYK_G([Se,ce,Re,re]){return["G",1-Math.min(1,.3*Se+.59*Re+.11*ce+re)]}static G_CMYK([Se]){return["CMYK",0,0,0,1-Se]}static G_RGB([Se]){return["RGB",Se,Se,Se]}static G_HTML([Se]){const ce=W(Se);return`#${ce}${ce}${ce}`}static RGB_G([Se,ce,Re]){return["G",.3*Se+.59*ce+.11*Re]}static RGB_HTML([Se,ce,Re]){return`#${W(Se)}${W(ce)}${W(Re)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([Se,ce,Re,re]){return["RGB",1-Math.min(1,Se+re),1-Math.min(1,Re+re),1-Math.min(1,ce+re)]}static CMYK_HTML(Se){const ce=this.CMYK_RGB(Se).slice(1);return this.RGB_HTML(ce)}static RGB_CMYK([Se,ce,Re]){const re=1-Se,m=1-ce,B=1-Re;return["CMYK",re,m,B,Math.min(re,m,B)]}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.XfaLayer=void 0;var _=W(20);L.XfaLayer=class N{static setupStorage(ce,Re,re,m,B){const D=m.getValue(Re,{value:null});switch(re.name){case"textarea":if(null!==D.value&&(ce.textContent=D.value),"print"===B)break;ce.addEventListener("input",x=>{m.setValue(Re,{value:x.target.value})});break;case"input":if("radio"===re.attributes.type||"checkbox"===re.attributes.type){if(D.value===re.attributes.xfaOn?ce.setAttribute("checked",!0):D.value===re.attributes.xfaOff&&ce.removeAttribute("checked"),"print"===B)break;ce.addEventListener("change",x=>{m.setValue(Re,{value:x.target.getAttribute(x.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==D.value&&ce.setAttribute("value",D.value),"print"===B)break;ce.addEventListener("input",x=>{m.setValue(Re,{value:x.target.value})})}break;case"select":if(null!==D.value)for(const x of re.children)x.attributes.value===D.value&&(x.attributes.selected=!0);ce.addEventListener("input",x=>{const j=x.target.options;m.setValue(Re,{value:-1===j.selectedIndex?"":j[j.selectedIndex].value})})}}static setAttributes({html:ce,element:Re,storage:re=null,intent:m,linkService:B}){const{attributes:D}=Re,x=ce instanceof HTMLAnchorElement;"radio"===D.type&&(D.name=`${D.name}-${m}`);for(const[j,C]of Object.entries(D))if(null!=C)switch(j){case"class":C.length&&ce.setAttribute(j,C.join(" "));break;case"dataId":break;case"id":ce.setAttribute("data-element-id",C);break;case"style":Object.assign(ce.style,C);break;case"textContent":ce.textContent=C;break;default:(!x||"href"!==j&&"newWindow"!==j)&&ce.setAttribute(j,C)}x&&B.addLinkAttributes(ce,D.href,D.newWindow),re&&D.dataId&&this.setupStorage(ce,D.dataId,Re,re)}static render(ce){var u;const Re=ce.annotationStorage,re=ce.linkService,m=ce.xfaHtml,B=ce.intent||"display",D=document.createElement(m.name);m.attributes&&this.setAttributes({html:D,element:m,intent:B,linkService:re});const x=[[m,-1,D]],j=ce.div;if(j.append(D),ce.viewport){const d=`matrix(${ce.viewport.transform.join(",")})`;j.style.transform=d}"richText"!==B&&j.setAttribute("class","xfaLayer xfaFont");const C=[];for(;x.length>0;){const[d,g,I]=x.at(-1);if(g+1===d.children.length){x.pop();continue}const O=d.children[++x.at(-1)[1]];if(null===O)continue;const{name:b}=O;if("#text"===b){const f=document.createTextNode(O.value);C.push(f),I.append(f);continue}let h;if(h=(null==(u=null==O?void 0:O.attributes)?void 0:u.xmlns)?document.createElementNS(O.attributes.xmlns,b):document.createElement(b),I.append(h),O.attributes&&this.setAttributes({html:h,element:O,storage:Re,intent:B,linkService:re}),O.children&&O.children.length>0)x.push([O,-1,h]);else if(O.value){const f=document.createTextNode(O.value);_.XfaText.shouldBuildText(b)&&C.push(f),h.append(f)}}for(const d of j.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:C}}static update(ce){const Re=`matrix(${ce.viewport.transform.join(",")})`;ce.div.style.transform=Re,ce.div.hidden=!1}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.TextLayerRenderTask=void 0,L.renderTextLayer=function I(O){const b=new g({textContent:O.textContent,textContentStream:O.textContentStream,container:O.container,viewport:O.viewport,textDivs:O.textDivs,textContentItemsStr:O.textContentItemsStr,enhanceTextSelection:O.enhanceTextSelection});return b._render(O.timeout),b};var _=W(1),N=W(8);const re=new Map,m=/^\s+$/g;function D(O,b,h,f){const E=document.createElement("span"),y=O._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==b.str,hasEOL:b.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==b.str,hasEOL:b.hasEOL,fontSize:0};O._textDivs.push(E);const R=_.Util.transform(O._viewport.transform,b.transform);let M=Math.atan2(R[1],R[0]);const z=h[b.fontName];z.vertical&&(M+=Math.PI/2);const ye=Math.hypot(R[2],R[3]),Ce=ye*function B(O,b){const h=re.get(O);if(h)return h;b.save(),b.font=`30px ${O}`;const f=b.measureText("");let E=f.fontBoundingBoxAscent,y=Math.abs(f.fontBoundingBoxDescent);if(E){b.restore();const M=E/(E+y);return re.set(O,M),M}b.strokeStyle="red",b.clearRect(0,0,30,30),b.strokeText("g",0,0);let R=b.getImageData(0,0,30,30).data;y=0;for(let M=R.length-1-3;M>=0;M-=4)if(R[M]>0){y=Math.ceil(M/4/30);break}b.clearRect(0,0,30,30),b.strokeText("A",0,30),R=b.getImageData(0,0,30,30).data,E=0;for(let M=0,z=R.length;M<z;M+=4)if(R[M]>0){E=30-Math.floor(M/4/30);break}if(b.restore(),E){const M=E/(E+y);return re.set(O,M),M}return re.set(O,.8),.8}(z.fontFamily,f);let De,ze;0===M?(De=R[4],ze=R[5]-Ce):(De=R[4]+Ce*Math.sin(M),ze=R[5]-Ce*Math.cos(M)),E.style.left=`${De}px`,E.style.top=`${ze}px`,E.style.fontSize=`${ye}px`,E.style.fontFamily=z.fontFamily,y.fontSize=ye,E.setAttribute("role","presentation"),E.textContent=b.str,E.dir=b.dir,O._fontInspectorEnabled&&(E.dataset.fontName=b.fontName),0!==M&&(y.angle=M*(180/Math.PI));let Oe=!1;if(b.str.length>1||O._enhanceTextSelection&&m.test(b.str))Oe=!0;else if(" "!==b.str&&b.transform[0]!==b.transform[3]){const J=Math.abs(b.transform[0]),Q=Math.abs(b.transform[3]);J!==Q&&Math.max(J,Q)/Math.min(J,Q)>1.5&&(Oe=!0)}if(Oe&&(y.canvasWidth=z.vertical?b.height*O._viewport.scale:b.width*O._viewport.scale),O._textDivProperties.set(E,y),O._textContentStream&&O._layoutText(E),O._enhanceTextSelection&&y.hasText){let J=1,Q=0;0!==M&&(J=Math.cos(M),Q=Math.sin(M));const pe=(z.vertical?b.height:b.width)*O._viewport.scale,we=ye;let Je,fe;0!==M?(Je=[J,Q,-Q,J,De,ze],fe=_.Util.getAxialAlignedBoundingBox([0,0,pe,we],Je)):fe=[De,ze,De+pe,ze+we],O._bounds.push({left:fe[0],top:fe[1],right:fe[2],bottom:fe[3],div:E,size:[pe,we],m:Je})}}function x(O){if(O._canceled)return;const b=O._textDivs,h=O._capability,f=b.length;if(f>1e5)return O._renderingDone=!0,void h.resolve();if(!O._textContentStream)for(let E=0;E<f;E++)O._layoutText(b[E]);O._renderingDone=!0,h.resolve()}function j(O,b,h){let f=0;for(let E=0;E<h;E++){const y=O[b++];y>0&&(f=f?Math.min(y,f):y)}return f}function d(O,b){b.sort(function(E,y){return E.x1-y.x1||E.index-y.index});const f=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const E of b){let y=0;for(;y<f.length&&f[y].end<=E.y1;)y++;let R=f.length-1;for(;R>=0&&f[R].start>=E.y2;)R--;let M,z,ye,Ce,De=-1/0;for(ye=y;ye<=R;ye++){let J;M=f[ye],z=M.boundary,J=z.x2>E.x1?z.index>E.index?z.x1New:E.x1:void 0===z.x2New?(z.x2+E.x1)/2:z.x2New,J>De&&(De=J)}for(E.x1New=De,ye=y;ye<=R;ye++)M=f[ye],z=M.boundary,void 0===z.x2New?z.x2>E.x1?z.index>E.index&&(z.x2New=z.x2):z.x2New=De:z.x2New>De&&(z.x2New=Math.max(De,z.x2));const ze=[];let Oe=null;for(ye=y;ye<=R;ye++){M=f[ye],z=M.boundary;const J=z.x2>E.x2?z:E;Oe===J?ze.at(-1).end=M.end:(ze.push({start:M.start,end:M.end,boundary:J}),Oe=J)}for(f[y].start<E.y1&&(ze[0].start=E.y1,ze.unshift({start:f[y].start,end:E.y1,boundary:f[y].boundary})),E.y2<f[R].end&&(ze.at(-1).end=E.y2,ze.push({start:E.y2,end:f[R].end,boundary:f[R].boundary})),ye=y;ye<=R;ye++){if(M=f[ye],z=M.boundary,void 0!==z.x2New)continue;let J=!1;for(Ce=y-1;!J&&Ce>=0&&f[Ce].start>=z.y1;Ce--)J=f[Ce].boundary===z;for(Ce=R+1;!J&&Ce<f.length&&f[Ce].end<=z.y2;Ce++)J=f[Ce].boundary===z;for(Ce=0;!J&&Ce<ze.length;Ce++)J=ze[Ce].boundary===z;J||(z.x2New=De)}Array.prototype.splice.apply(f,[y,R-y+1,...ze])}for(const E of f){const y=E.boundary;void 0===y.x2New&&(y.x2New=Math.max(O,y.x2))}}class g{constructor({textContent:b,textContentStream:h,container:f,viewport:E,textDivs:y,textContentItemsStr:R,enhanceTextSelection:M}){var z;M&&(0,N.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=b,this._textContentStream=h,this._container=f,this._document=f.ownerDocument,this._viewport=E,this._textDivs=y||[],this._textContentItemsStr=R||[],this._enhanceTextSelection=!!M,this._fontInspectorEnabled=!!(null==(z=globalThis.FontInspector)?void 0:z.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(b,h){for(let f=0,E=b.length;f<E;f++)if(void 0!==b[f].str)this._textContentItemsStr.push(b[f].str),D(this,b[f],h,this._layoutTextCtx);else if("beginMarkedContentProps"===b[f].type||"beginMarkedContent"===b[f].type){const y=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==b[f].id&&this._container.setAttribute("id",`${b[f].id}`),y.append(this._container)}else"endMarkedContent"===b[f].type&&(this._container=this._container.parentNode)}_layoutText(b){const h=this._textDivProperties.get(b);let f="";if(0!==h.canvasWidth&&h.hasText){const{fontFamily:E}=b.style,{fontSize:y}=h;(y!==this._layoutTextLastFontSize||E!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${y*this._devicePixelRatio}px ${E}`,this._layoutTextLastFontSize=y,this._layoutTextLastFontFamily=E);const{width:R}=this._layoutTextCtx.measureText(b.textContent);if(R>0){const M=this._devicePixelRatio*h.canvasWidth/R;this._enhanceTextSelection&&(h.scale=M),f=`scaleX(${M})`}}if(0!==h.angle&&(f=`rotate(${h.angle}deg) ${f}`),f.length>0&&(this._enhanceTextSelection&&(h.originalTransform=f),b.style.transform=f),h.hasText&&this._container.append(b),h.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(b=0){const h=(0,_.createPromiseCapability)();let f=Object.create(null);const E=this._document.createElement("canvas");if(E.height=E.width=30,this._layoutTextCtx=E.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),h.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const y=()=>{this._reader.read().then(({value:R,done:M})=>{M?h.resolve():(Object.assign(f,R.styles),this._processItems(R.items,f),y())},h.reject)};this._reader=this._textContentStream.getReader(),y()}}h.promise.then(()=>{f=null,b?this._renderTimer=setTimeout(()=>{x(this),this._renderTimer=null},b):x(this)},this._capability.reject)}expandTextDivs(b=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function C(O){const b=O._bounds,h=O._viewport,f=function u(O,b,h){const f=h.map(function(y,R){return{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom,index:R,x1New:void 0,x2New:void 0}});d(O,f);const E=new Array(h.length);for(const y of f)E[y.index]={left:y.x1New,top:0,right:y.x2New,bottom:0};h.map(function(y,R){const M=E[R],z=f[R];z.x1=y.top,z.y1=O-M.right,z.x2=y.bottom,z.y2=O-M.left,z.index=R,z.x1New=void 0,z.x2New=void 0}),d(b,f);for(const y of f){const R=y.index;E[R].top=y.x1New,E[R].bottom=y.x2New}return E}(h.width,h.height,b);for(let E=0;E<f.length;E++){const y=b[E].div,R=O._textDivProperties.get(y);if(0===R.angle){R.paddingLeft=b[E].left-f[E].left,R.paddingTop=b[E].top-f[E].top,R.paddingRight=f[E].right-b[E].right,R.paddingBottom=f[E].bottom-b[E].bottom,O._textDivProperties.set(y,R);continue}const M=f[E],z=b[E],ye=z.m,Ce=ye[0],De=ye[1],ze=[[0,0],[0,z.size[1]],[z.size[0],0],z.size],Oe=new Float64Array(64);for(let Q=0,pe=ze.length;Q<pe;Q++){const we=_.Util.applyTransform(ze[Q],ye);Oe[Q+0]=Ce&&(M.left-we[0])/Ce,Oe[Q+4]=De&&(M.top-we[1])/De,Oe[Q+8]=Ce&&(M.right-we[0])/Ce,Oe[Q+12]=De&&(M.bottom-we[1])/De,Oe[Q+16]=De&&(M.left-we[0])/-De,Oe[Q+20]=Ce&&(M.top-we[1])/Ce,Oe[Q+24]=De&&(M.right-we[0])/-De,Oe[Q+28]=Ce&&(M.bottom-we[1])/Ce,Oe[Q+32]=Ce&&(M.left-we[0])/-Ce,Oe[Q+36]=De&&(M.top-we[1])/-De,Oe[Q+40]=Ce&&(M.right-we[0])/-Ce,Oe[Q+44]=De&&(M.bottom-we[1])/-De,Oe[Q+48]=De&&(M.left-we[0])/De,Oe[Q+52]=Ce&&(M.top-we[1])/-Ce,Oe[Q+56]=De&&(M.right-we[0])/De,Oe[Q+60]=Ce&&(M.bottom-we[1])/-Ce}const J=1+Math.min(Math.abs(Ce),Math.abs(De));R.paddingLeft=j(Oe,32,16)/J,R.paddingTop=j(Oe,48,16)/J,R.paddingRight=j(Oe,0,16)/J,R.paddingBottom=j(Oe,16,16)/J,O._textDivProperties.set(y,R)}}(this),this._bounds=null);const h=[],f=[];for(let E=0,y=this._textDivs.length;E<y;E++){const R=this._textDivs[E],M=this._textDivProperties.get(R);!M.hasText||(b?(h.length=0,f.length=0,M.originalTransform&&h.push(M.originalTransform),M.paddingTop>0?(f.push(`${M.paddingTop}px`),h.push(`translateY(${-M.paddingTop}px)`)):f.push(0),f.push(M.paddingRight>0?M.paddingRight/M.scale+"px":0),f.push(M.paddingBottom>0?`${M.paddingBottom}px`:0),M.paddingLeft>0?(f.push(M.paddingLeft/M.scale+"px"),h.push(`translateX(${-M.paddingLeft/M.scale}px)`)):f.push(0),R.style.padding=f.join(" "),h.length&&(R.style.transform=h.join(" "))):(R.style.padding=null,R.style.transform=M.originalTransform))}}}L.TextLayerRenderTask=g},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.SVGGraphics=void 0;var _=W(8),N=W(1),Se=W(3);let ce=class{constructor(){(0,N.unreachable)("Not implemented: SVGGraphics")}};L.SVGGraphics=ce;{let u=function(h){let f=[];const E=[];for(const y of h)"save"!==y.fn?"restore"===y.fn?f=E.pop():f.push(y):(f.push({fnId:92,fn:"group",items:[]}),E.push(f),f=f.at(-1).items);return f},d=function(h){if(Number.isInteger(h))return h.toString();const f=h.toFixed(10);let E=f.length-1;if("0"!==f[E])return f;do{E--}while("0"===f[E]);return f.substring(0,"."===f[E]?E:E+1)},g=function(h){if(0===h[4]&&0===h[5]){if(0===h[1]&&0===h[2])return 1===h[0]&&1===h[3]?"":`scale(${d(h[0])} ${d(h[3])})`;if(h[0]===h[3]&&h[1]===-h[2]){const f=180*Math.acos(h[0])/Math.PI;return`rotate(${d(f)})`}}else if(1===h[0]&&0===h[1]&&0===h[2]&&1===h[3])return`translate(${d(h[4])} ${d(h[5])})`;return`matrix(${d(h[0])} ${d(h[1])} ${d(h[2])} ${d(h[3])} ${d(h[4])} ${d(h[5])})`};const Re={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},re="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/1999/xlink",B=["butt","round","square"],D=["miter","round","bevel"],x=function(h,f="",E=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!E)return URL.createObjectURL(new Blob([h],{type:f}));const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let R=`data:${f};base64,`;for(let M=0,z=h.length;M<z;M+=3){const ye=255&h[M],Ce=255&h[M+1],De=255&h[M+2];R+=y[ye>>2]+y[(3&ye)<<4|Ce>>4]+y[M+1<z?(15&Ce)<<2|De>>6:64]+y[M+2<z?63&De:64]}return R},j=function(){const h=new Uint8Array([137,80,78,71,13,10,26,10]),E=new Int32Array(256);for(let De=0;De<256;De++){let ze=De;for(let Oe=0;Oe<8;Oe++)ze=1&ze?3988292384^ze>>1&2147483647:ze>>1&2147483647;E[De]=ze}function R(De,ze,Oe,J){let Q=J;const pe=ze.length;Oe[Q]=pe>>24&255,Oe[Q+1]=pe>>16&255,Oe[Q+2]=pe>>8&255,Oe[Q+3]=255&pe,Q+=4,Oe[Q]=255&De.charCodeAt(0),Oe[Q+1]=255&De.charCodeAt(1),Oe[Q+2]=255&De.charCodeAt(2),Oe[Q+3]=255&De.charCodeAt(3),Q+=4,Oe.set(ze,Q),Q+=ze.length;const we=function y(De,ze,Oe){let J=-1;for(let Q=ze;Q<Oe;Q++)J=J>>>8^E[255&(J^De[Q])];return-1^J}(Oe,J+4,Q);Oe[Q]=we>>24&255,Oe[Q+1]=we>>16&255,Oe[Q+2]=we>>8&255,Oe[Q+3]=255&we}function ye(De){let ze=De.length;const Oe=65535,J=Math.ceil(ze/Oe),Q=new Uint8Array(2+ze+5*J+4);let pe=0;Q[pe++]=120,Q[pe++]=156;let we=0;for(;ze>Oe;)Q[pe++]=0,Q[pe++]=255,Q[pe++]=255,Q[pe++]=0,Q[pe++]=0,Q.set(De.subarray(we,we+Oe),pe),pe+=Oe,we+=Oe,ze-=Oe;Q[pe++]=1,Q[pe++]=255&ze,Q[pe++]=ze>>8&255,Q[pe++]=255&~ze,Q[pe++]=(65535&~ze)>>8&255,Q.set(De.subarray(we),pe),pe+=De.length-we;const Je=function M(De,ze,Oe){let J=1,Q=0;for(let pe=ze;pe<Oe;++pe)J=(J+(255&De[pe]))%65521,Q=(Q+J)%65521;return Q<<16|J}(De,0,De.length);return Q[pe++]=Je>>24&255,Q[pe++]=Je>>16&255,Q[pe++]=Je>>8&255,Q[pe++]=255&Je,Q}return function(ze,Oe,J){return function Ce(De,ze,Oe,J){const Q=De.width,pe=De.height;let we,Je,fe;const S=De.data;switch(ze){case N.ImageKind.GRAYSCALE_1BPP:Je=0,we=1,fe=Q+7>>3;break;case N.ImageKind.RGB_24BPP:Je=2,we=8,fe=3*Q;break;case N.ImageKind.RGBA_32BPP:Je=6,we=8,fe=4*Q;break;default:throw new Error("invalid format")}const F=new Uint8Array((1+fe)*pe);let te=0,ve=0;for(let U=0;U<pe;++U)F[te++]=0,F.set(S.subarray(ve,ve+fe),te),ve+=fe,te+=fe;if(ze===N.ImageKind.GRAYSCALE_1BPP&&J){te=0;for(let U=0;U<pe;U++){te++;for(let q=0;q<fe;q++)F[te++]^=255}}const le=new Uint8Array([Q>>24&255,Q>>16&255,Q>>8&255,255&Q,pe>>24&255,pe>>16&255,pe>>8&255,255&pe,we,Je,0,0,0]),_e=function z(De){if(!Se.isNodeJS)return ye(De);try{let ze;ze=parseInt(process.versions.node)>=8?De:Buffer.from(De);const Oe=__webpack_require__(258).deflateSync(ze,{level:9});return Oe instanceof Uint8Array?Oe:new Uint8Array(Oe)}catch(ze){(0,N.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ze)}return ye(De)}(F),Te=new Uint8Array(h.length+36+le.length+_e.length);let w=0;return Te.set(h,w),w+=h.length,R("IHDR",le,Te,w),w+=12+le.length,R("IDATA",_e,Te,w),w+=12+_e.length,R("IEND",new Uint8Array(0),Te,w),x(Te,"image/png",Oe)}(ze,void 0===ze.kind?N.ImageKind.GRAYSCALE_1BPP:ze.kind,Oe,J)}}();class C{constructor(){this.fontSizeScale=1,this.fontWeight=Re.fontWeight,this.fontSize=0,this.textMatrix=N.IDENTITY_MATRIX,this.fontMatrix=N.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=N.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Re.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(f,E){this.x=f,this.y=E}}let I=0,O=0,b=0;L.SVGGraphics=ce=class{constructor(h,f,E=!1){(0,_.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new _.DOMSVGFactory,this.current=new C,this.transformMatrix=N.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=h,this.objs=f,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!E,this._operatorIdMapping=[];for(const y in N.OPS)this._operatorIdMapping[N.OPS[y]]=y}save(){this.transformStack.push(this.transformMatrix);const h=this.current;this.extraStack.push(h),this.current=h.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(h){this.save(),this.executeOpTree(h),this.restore()}loadDependencies(h){const f=h.fnArray,E=h.argsArray;for(let y=0,R=f.length;y<R;y++)if(f[y]===N.OPS.dependency)for(const M of E[y]){const z=M.startsWith("g_")?this.commonObjs:this.objs,ye=new Promise(Ce=>{z.get(M,Ce)});this.current.dependencies.push(ye)}return Promise.all(this.current.dependencies)}transform(h,f,E,y,R,M){this.transformMatrix=N.Util.transform(this.transformMatrix,[h,f,E,y,R,M]),this.tgrp=null}getSVG(h,f){this.viewport=f;const E=this._initialize(f);return this.loadDependencies(h).then(()=>(this.transformMatrix=N.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(h)),E))}convertOpList(h){const f=this._operatorIdMapping,E=h.argsArray,y=h.fnArray,R=[];for(let M=0,z=y.length;M<z;M++){const ye=y[M];R.push({fnId:ye,fn:f[ye],args:E[M]})}return u(R)}executeOpTree(h){for(const f of h){const E=f.fn,R=f.args;switch(0|f.fnId){case N.OPS.beginText:this.beginText();break;case N.OPS.dependency:break;case N.OPS.setLeading:this.setLeading(R);break;case N.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case N.OPS.setFont:this.setFont(R);break;case N.OPS.showText:case N.OPS.showSpacedText:this.showText(R[0]);break;case N.OPS.endText:this.endText();break;case N.OPS.moveText:this.moveText(R[0],R[1]);break;case N.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case N.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case N.OPS.setHScale:this.setHScale(R[0]);break;case N.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case N.OPS.setTextRise:this.setTextRise(R[0]);break;case N.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case N.OPS.setLineWidth:this.setLineWidth(R[0]);break;case N.OPS.setLineJoin:this.setLineJoin(R[0]);break;case N.OPS.setLineCap:this.setLineCap(R[0]);break;case N.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case N.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case N.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case N.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case N.OPS.setFillColorN:this.setFillColorN(R);break;case N.OPS.shadingFill:this.shadingFill(R[0]);break;case N.OPS.setDash:this.setDash(R[0],R[1]);break;case N.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case N.OPS.setFlatness:this.setFlatness(R[0]);break;case N.OPS.setGState:this.setGState(R[0]);break;case N.OPS.fill:this.fill();break;case N.OPS.eoFill:this.eoFill();break;case N.OPS.stroke:this.stroke();break;case N.OPS.fillStroke:this.fillStroke();break;case N.OPS.eoFillStroke:this.eoFillStroke();break;case N.OPS.clip:this.clip("nonzero");break;case N.OPS.eoClip:this.clip("evenodd");break;case N.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case N.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case N.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case N.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case N.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case N.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case N.OPS.closePath:this.closePath();break;case N.OPS.closeStroke:this.closeStroke();break;case N.OPS.closeFillStroke:this.closeFillStroke();break;case N.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case N.OPS.nextLine:this.nextLine();break;case N.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case N.OPS.constructPath:this.constructPath(R[0],R[1]);break;case N.OPS.endPath:this.endPath();break;case 92:this.group(f.items);break;default:(0,N.warn)(`Unimplemented operator ${E}`)}}}setWordSpacing(h){this.current.wordSpacing=h}setCharSpacing(h){this.current.charSpacing=h}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(h,f,E,y,R,M){const z=this.current;z.textMatrix=z.lineMatrix=[h,f,E,y,R,M],z.textMatrixScale=Math.hypot(h,f),z.x=z.lineX=0,z.y=z.lineY=0,z.xcoords=[],z.ycoords=[],z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${d(z.fontSize)}px`),z.tspan.setAttributeNS(null,"y",d(-z.y)),z.txtElement=this.svgFactory.createElement("svg:text"),z.txtElement.append(z.tspan)}beginText(){const h=this.current;h.x=h.lineX=0,h.y=h.lineY=0,h.textMatrix=N.IDENTITY_MATRIX,h.lineMatrix=N.IDENTITY_MATRIX,h.textMatrixScale=1,h.tspan=this.svgFactory.createElement("svg:tspan"),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtgrp=this.svgFactory.createElement("svg:g"),h.xcoords=[],h.ycoords=[]}moveText(h,f){const E=this.current;E.x=E.lineX+=h,E.y=E.lineY+=f,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${d(E.fontSize)}px`),E.tspan.setAttributeNS(null,"y",d(-E.y))}showText(h){const f=this.current,E=f.font,y=f.fontSize;if(0===y)return;const R=f.fontSizeScale,M=f.charSpacing,z=f.wordSpacing,ye=f.fontDirection,Ce=f.textHScale*ye,De=E.vertical,ze=De?1:-1,Oe=E.defaultVMetrics,J=y*f.fontMatrix[0];let Q=0;for(const Je of h){if(null===Je){Q+=ye*z;continue}if("number"==typeof Je){Q+=ze*Je*y/1e3;continue}const fe=(Je.isSpace?z:0)+M,S=Je.fontChar;let F,te,le,ve=Je.width;if(De){let _e;const Ie=Je.vmetric||Oe;_e=Je.vmetric?Ie[1]:.5*ve,_e=-_e*J,ve=Ie?-Ie[0]:ve,F=_e/R,te=(Q+Ie[2]*J)/R}else F=Q/R,te=0;(Je.isInFont||E.missingFile)&&(f.xcoords.push(f.x+F),De&&f.ycoords.push(-f.y+te),f.tspan.textContent+=S),le=De?ve*J-fe*ye:ve*J+fe*ye,Q+=le}f.tspan.setAttributeNS(null,"x",f.xcoords.map(d).join(" ")),f.tspan.setAttributeNS(null,"y",De?f.ycoords.map(d).join(" "):d(-f.y)),De?f.y-=Q:f.x+=Q*Ce,f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${d(f.fontSize)}px`),f.fontStyle!==Re.fontStyle&&f.tspan.setAttributeNS(null,"font-style",f.fontStyle),f.fontWeight!==Re.fontWeight&&f.tspan.setAttributeNS(null,"font-weight",f.fontWeight);const pe=f.textRenderingMode&N.TextRenderingMode.FILL_STROKE_MASK;pe===N.TextRenderingMode.FILL||pe===N.TextRenderingMode.FILL_STROKE?(f.fillColor!==Re.fillColor&&f.tspan.setAttributeNS(null,"fill",f.fillColor),f.fillAlpha<1&&f.tspan.setAttributeNS(null,"fill-opacity",f.fillAlpha)):f.tspan.setAttributeNS(null,"fill",f.textRenderingMode===N.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(pe===N.TextRenderingMode.STROKE||pe===N.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(f.tspan,1/(f.textMatrixScale||1));let we=f.textMatrix;0!==f.textRise&&(we=we.slice(),we[5]+=f.textRise),f.txtElement.setAttributeNS(null,"transform",`${g(we)} scale(${d(Ce)}, -1)`),f.txtElement.setAttributeNS(re,"xml:space","preserve"),f.txtElement.append(f.tspan),f.txtgrp.append(f.txtElement),this._ensureTransformGroup().append(f.txtElement)}setLeadingMoveText(h,f){this.setLeading(-f),this.moveText(h,f)}addFontStyle(h){if(!h.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const f=x(h.data,h.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${h.loadedName}"; src: url(${f}); }\n`}setFont(h){const f=this.current,E=this.commonObjs.get(h[0]);let y=h[1];f.font=E,this.embedFonts&&!E.missingFile&&!this.embeddedFonts[E.loadedName]&&(this.addFontStyle(E),this.embeddedFonts[E.loadedName]=E),f.fontMatrix=E.fontMatrix||N.FONT_IDENTITY_MATRIX;let R="normal";E.black?R="900":E.bold&&(R="bold");const M=E.italic?"italic":"normal";y<0?(y=-y,f.fontDirection=-1):f.fontDirection=1,f.fontSize=y,f.fontFamily=E.loadedName,f.fontWeight=R,f.fontStyle=M,f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"y",d(-f.y)),f.xcoords=[],f.ycoords=[]}endText(){var f;const h=this.current;h.textRenderingMode&N.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(f=h.txtElement)?void 0:f.hasChildNodes())&&(h.element=h.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(h){h>0&&(this.current.lineWidth=h)}setLineCap(h){this.current.lineCap=B[h]}setLineJoin(h){this.current.lineJoin=D[h]}setMiterLimit(h){this.current.miterLimit=h}setStrokeAlpha(h){this.current.strokeAlpha=h}setStrokeRGBColor(h,f,E){this.current.strokeColor=N.Util.makeHexColor(h,f,E)}setFillAlpha(h){this.current.fillAlpha=h}setFillRGBColor(h,f,E){this.current.fillColor=N.Util.makeHexColor(h,f,E),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(h){this.current.strokeColor=this._makeColorN_Pattern(h)}setFillColorN(h){this.current.fillColor=this._makeColorN_Pattern(h)}shadingFill(h){const f=this.viewport.width,E=this.viewport.height,y=N.Util.inverseTransform(this.transformMatrix),R=N.Util.applyTransform([0,0],y),M=N.Util.applyTransform([0,E],y),z=N.Util.applyTransform([f,0],y),ye=N.Util.applyTransform([f,E],y),Ce=Math.min(R[0],M[0],z[0],ye[0]),De=Math.min(R[1],M[1],z[1],ye[1]),ze=Math.max(R[0],M[0],z[0],ye[0]),Oe=Math.max(R[1],M[1],z[1],ye[1]),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",Ce),J.setAttributeNS(null,"y",De),J.setAttributeNS(null,"width",ze-Ce),J.setAttributeNS(null,"height",Oe-De),J.setAttributeNS(null,"fill",this._makeShadingPattern(h)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(J)}_makeColorN_Pattern(h){return"TilingPattern"===h[0]?this._makeTilingPattern(h):this._makeShadingPattern(h)}_makeTilingPattern(h){const f=h[1],E=h[2],y=h[3]||N.IDENTITY_MATRIX,[R,M,z,ye]=h[4],Ce=h[5],De=h[6],ze=h[7],Oe="shading"+b++,[J,Q,pe,we]=N.Util.normalizeRect([...N.Util.applyTransform([R,M],y),...N.Util.applyTransform([z,ye],y)]),[Je,fe]=N.Util.singularValueDecompose2dScale(y),S=Ce*Je,F=De*fe,te=this.svgFactory.createElement("svg:pattern");te.setAttributeNS(null,"id",Oe),te.setAttributeNS(null,"patternUnits","userSpaceOnUse"),te.setAttributeNS(null,"width",S),te.setAttributeNS(null,"height",F),te.setAttributeNS(null,"x",`${J}`),te.setAttributeNS(null,"y",`${Q}`);const ve=this.svg,le=this.transformMatrix,_e=this.current.fillColor,Ie=this.current.strokeColor,Te=this.svgFactory.create(pe-J,we-Q);if(this.svg=Te,this.transformMatrix=y,2===ze){const w=N.Util.makeHexColor(...f);this.current.fillColor=w,this.current.strokeColor=w}return this.executeOpTree(this.convertOpList(E)),this.svg=ve,this.transformMatrix=le,this.current.fillColor=_e,this.current.strokeColor=Ie,te.append(Te.childNodes[0]),this.defs.append(te),`url(#${Oe})`}_makeShadingPattern(h){switch("string"==typeof h&&(h=this.objs.get(h)),h[0]){case"RadialAxial":const f="shading"+b++,E=h[3];let y;switch(h[1]){case"axial":const R=h[4],M=h[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",f),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",R[0]),y.setAttributeNS(null,"y1",R[1]),y.setAttributeNS(null,"x2",M[0]),y.setAttributeNS(null,"y2",M[1]);break;case"radial":const z=h[4],ye=h[5],Ce=h[6],De=h[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",f),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",ye[0]),y.setAttributeNS(null,"cy",ye[1]),y.setAttributeNS(null,"r",De),y.setAttributeNS(null,"fx",z[0]),y.setAttributeNS(null,"fy",z[1]),y.setAttributeNS(null,"fr",Ce);break;default:throw new Error(`Unknown RadialAxial type: ${h[1]}`)}for(const R of E){const M=this.svgFactory.createElement("svg:stop");M.setAttributeNS(null,"offset",R[0]),M.setAttributeNS(null,"stop-color",R[1]),y.append(M)}return this.defs.append(y),`url(#${f})`;case"Mesh":return(0,N.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${h[0]}`)}}setDash(h,f){this.current.dashArray=h,this.current.dashPhase=f}constructPath(h,f){const E=this.current;let y=E.x,R=E.y,M=[],z=0;for(const ye of h)switch(0|ye){case N.OPS.rectangle:y=f[z++],R=f[z++];const ze=y+f[z++],Oe=R+f[z++];M.push("M",d(y),d(R),"L",d(ze),d(R),"L",d(ze),d(Oe),"L",d(y),d(Oe),"Z");break;case N.OPS.moveTo:y=f[z++],R=f[z++],M.push("M",d(y),d(R));break;case N.OPS.lineTo:y=f[z++],R=f[z++],M.push("L",d(y),d(R));break;case N.OPS.curveTo:y=f[z+4],R=f[z+5],M.push("C",d(f[z]),d(f[z+1]),d(f[z+2]),d(f[z+3]),d(y),d(R)),z+=6;break;case N.OPS.curveTo2:M.push("C",d(y),d(R),d(f[z]),d(f[z+1]),d(f[z+2]),d(f[z+3])),y=f[z+2],R=f[z+3],z+=4;break;case N.OPS.curveTo3:y=f[z+2],R=f[z+3],M.push("C",d(f[z]),d(f[z+1]),d(y),d(R),d(y),d(R)),z+=4;break;case N.OPS.closePath:M.push("Z")}M=M.join(" "),E.path&&h.length>0&&h[0]!==N.OPS.rectangle&&h[0]!==N.OPS.moveTo?M=E.path.getAttributeNS(null,"d")+M:(E.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(E.path)),E.path.setAttributeNS(null,"d",M),E.path.setAttributeNS(null,"fill","none"),E.element=E.path,E.setCurrentPoint(y,R)}endPath(){const h=this.current;if(h.path=null,!this.pendingClip)return;if(!h.element)return void(this.pendingClip=null);const f="clippath"+I++,E=this.svgFactory.createElement("svg:clipPath");E.setAttributeNS(null,"id",f),E.setAttributeNS(null,"transform",g(this.transformMatrix));const y=h.element.cloneNode(!0);if(y.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,E.append(y),this.defs.append(E),h.activeClipUrl){h.clipGroup=null;for(const R of this.extraStack)R.clipGroup=null;E.setAttributeNS(null,"clip-path",h.activeClipUrl)}h.activeClipUrl=`url(#${f})`,this.tgrp=null}clip(h){this.pendingClip=h}closePath(){const h=this.current;if(h.path){const f=`${h.path.getAttributeNS(null,"d")}Z`;h.path.setAttributeNS(null,"d",f)}}setLeading(h){this.current.leading=-h}setTextRise(h){this.current.textRise=h}setTextRenderingMode(h){this.current.textRenderingMode=h}setHScale(h){this.current.textHScale=h/100}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[f,E]of h)switch(f){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E);break;case"CA":this.setStrokeAlpha(E);break;case"ca":this.setFillAlpha(E);break;default:(0,N.warn)(`Unimplemented graphic state operator ${f}`)}}fill(){const h=this.current;h.element&&(h.element.setAttributeNS(null,"fill",h.fillColor),h.element.setAttributeNS(null,"fill-opacity",h.fillAlpha),this.endPath())}stroke(){const h=this.current;h.element&&(this._setStrokeAttributes(h.element),h.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(h,f=1){const E=this.current;let y=E.dashArray;1!==f&&y.length>0&&(y=y.map(function(R){return f*R})),h.setAttributeNS(null,"stroke",E.strokeColor),h.setAttributeNS(null,"stroke-opacity",E.strokeAlpha),h.setAttributeNS(null,"stroke-miterlimit",d(E.miterLimit)),h.setAttributeNS(null,"stroke-linecap",E.lineCap),h.setAttributeNS(null,"stroke-linejoin",E.lineJoin),h.setAttributeNS(null,"stroke-width",d(f*E.lineWidth)+"px"),h.setAttributeNS(null,"stroke-dasharray",y.map(d).join(" ")),h.setAttributeNS(null,"stroke-dashoffset",d(f*E.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width","1px"),h.setAttributeNS(null,"height","1px"),h.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(h)}paintImageXObject(h){const f=h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h);f?this.paintInlineImageXObject(f):(0,N.warn)(`Dependent image with object ID ${h} is not ready yet`)}paintInlineImageXObject(h,f){const E=h.width,y=h.height,R=j(h,this.forceDataSchema,!!f),M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",d(E)),M.setAttributeNS(null,"height",d(y)),this.current.element=M,this.clip("nonzero");const z=this.svgFactory.createElement("svg:image");z.setAttributeNS(m,"xlink:href",R),z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y",d(-y)),z.setAttributeNS(null,"width",d(E)+"px"),z.setAttributeNS(null,"height",d(y)+"px"),z.setAttributeNS(null,"transform",`scale(${d(1/E)} ${d(-1/y)})`),f?f.append(z):this._ensureTransformGroup().append(z)}paintImageMaskXObject(h){const f=this.current,E=h.width,y=h.height,R=f.fillColor;f.maskId="mask"+O++;const M=this.svgFactory.createElement("svg:mask");M.setAttributeNS(null,"id",f.maskId);const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",d(E)),z.setAttributeNS(null,"height",d(y)),z.setAttributeNS(null,"fill",R),z.setAttributeNS(null,"mask",`url(#${f.maskId})`),this.defs.append(M),this._ensureTransformGroup().append(z),this.paintInlineImageXObject(h,M)}paintFormXObjectBegin(h,f){if(Array.isArray(h)&&6===h.length&&this.transform(h[0],h[1],h[2],h[3],h[4],h[5]),f){const E=f[2]-f[0],y=f[3]-f[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",f[0]),R.setAttributeNS(null,"y",f[1]),R.setAttributeNS(null,"width",d(E)),R.setAttributeNS(null,"height",d(y)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(h){const f=this.svgFactory.create(h.width,h.height),E=this.svgFactory.createElement("svg:defs");f.append(E),this.defs=E;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",g(h.transform)),f.append(y),this.svg=y,f}_ensureClipGroup(){if(!this.current.clipGroup){const h=this.svgFactory.createElement("svg:g");h.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(h),this.current.clipGroup=h}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFNodeStream=void 0;var _=W(1),N=W(33);const Se=__webpack_require__(172),ce=__webpack_require__(1),Re=__webpack_require__(779),re=__webpack_require__(558),m=/^file:\/\/\/[a-zA-Z]:\//;L.PDFNodeStream=class D{constructor(b){this.source=b,this.url=function B(O){const b=re.parse(O);return"file:"===b.protocol||b.host?b:/^[a-z]:[/\\]/i.test(O)?re.parse(`file:///${O}`):(b.host||(b.protocol="file:"),b)}(b.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b,h;return null!=(h=null==(b=this._fullRequestReader)?void 0:b._loaded)?h:0}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new u(this),this._fullRequestReader}getRangeReader(b,h){if(h<=this._progressiveDataLength)return null;const f=this.isFsUrl?new I(this,b,h):new d(this,b,h);return this._rangeRequestReaders.push(f),f}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b);for(const h of this._rangeRequestReaders.slice(0))h.cancel(b)}};class x{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const h=b.source;this._contentLength=h.length,this._loaded=0,this._filename=null,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._readableStream=null,this._readCapability=(0,_.createPromiseCapability)(),this._headersCapability=(0,_.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var b=this;return _asyncToGenerator(function*(){if(yield b._readCapability.promise,b._done)return{value:void 0,done:!0};if(b._storedError)throw b._storedError;const h=b._readableStream.read();return null===h?(b._readCapability=(0,_.createPromiseCapability)(),b.read()):(b._loaded+=h.length,b.onProgress&&b.onProgress({loaded:b._loaded,total:b._contentLength}),{value:new Uint8Array(h).buffer,done:!1})})()}cancel(b){this._readableStream?this._readableStream.destroy(b):this._error(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",h=>{this._error(h)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class j{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_.createPromiseCapability)(),this._isStreamingSupported=!b.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var b=this;return _asyncToGenerator(function*(){if(yield b._readCapability.promise,b._done)return{value:void 0,done:!0};if(b._storedError)throw b._storedError;const h=b._readableStream.read();return null===h?(b._readCapability=(0,_.createPromiseCapability)(),b.read()):(b._loaded+=h.length,b.onProgress&&b.onProgress({loaded:b._loaded}),{value:new Uint8Array(h).buffer,done:!1})})()}cancel(b){this._readableStream?this._readableStream.destroy(b):this._error(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",h=>{this._error(h)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function C(O,b){return{protocol:O.protocol,auth:O.auth,host:O.hostname,port:O.port,path:O.path,method:"GET",headers:b}}class u extends x{constructor(b){super(b);const h=f=>{if(404===f.statusCode){const M=new _.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=M,void this._headersCapability.reject(M)}this._headersCapability.resolve(),this._setReadableStream(f);const E=M=>this._readableStream.headers[M.toLowerCase()],{allowRangeRequests:y,suggestedLength:R}=(0,N.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=R||this._contentLength,this._filename=(0,N.extractFilenameFromHeader)(E)};this._request=null,this._request="http:"===this._url.protocol?ce.request(C(this._url,b.httpHeaders),h):Re.request(C(this._url,b.httpHeaders),h),this._request.on("error",f=>{this._storedError=f,this._headersCapability.reject(f)}),this._request.end()}}class d extends j{constructor(b,h,f){super(b),this._httpHeaders={};for(const y in b.httpHeaders){const R=b.httpHeaders[y];void 0!==R&&(this._httpHeaders[y]=R)}this._httpHeaders.Range=`bytes=${h}-${f-1}`;const E=y=>{if(404!==y.statusCode)this._setReadableStream(y);else{const R=new _.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=R}};this._request=null,this._request="http:"===this._url.protocol?ce.request(C(this._url,this._httpHeaders),E):Re.request(C(this._url,this._httpHeaders),E),this._request.on("error",y=>{this._storedError=y}),this._request.end()}}class g extends x{constructor(b){super(b);let h=decodeURIComponent(this._url.path);m.test(this._url.href)&&(h=h.replace(/^\//,"")),Se.lstat(h,(f,E)=>{if(f)return"ENOENT"===f.code&&(f=new _.MissingPDFException(`Missing PDF "${h}".`)),this._storedError=f,void this._headersCapability.reject(f);this._contentLength=E.size,this._setReadableStream(Se.createReadStream(h)),this._headersCapability.resolve()})}}class I extends j{constructor(b,h,f){super(b);let E=decodeURIComponent(this._url.path);m.test(this._url.href)&&(E=E.replace(/^\//,"")),this._setReadableStream(Se.createReadStream(E,{start:h,end:f-1}))}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.createResponseStatusError=function re(B,D){return 404===B||0===B&&D.startsWith("file:")?new _.MissingPDFException('Missing PDF "'+D+'".'):new _.UnexpectedResponseException(`Unexpected server response (${B}) while retrieving PDF "${D}".`,B)},L.extractFilenameFromHeader=function Re(B){const D=B("Content-Disposition");if(D){let x=(0,N.getFilenameFromContentDispositionHeader)(D);if(x.includes("%"))try{x=decodeURIComponent(x)}catch(j){}if((0,Se.isPdfFile)(x))return x}return null},L.validateRangeRequestCapabilities=function ce({getResponseHeader:B,isHttp:D,rangeChunkSize:x,disableRange:j}){const C={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(B("Content-Length"),10);return!Number.isInteger(u)||(C.suggestedLength=u,u<=2*x)||j||!D||"bytes"!==B("Accept-Ranges")||"identity"!==(B("Content-Encoding")||"identity")||(C.allowRangeRequests=!0),C},L.validateResponseStatus=function m(B){return 200===B||206===B};var _=W(1),N=W(34),Se=W(8)},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.getFilenameFromContentDispositionHeader=function N(Se){let ce=!0,Re=re("filename\\*","i").exec(Se);if(Re){Re=Re[1];let u=x(Re);return u=unescape(u),u=j(u),u=C(u),B(u)}if(Re=function D(u){const d=[];let g;const I=re("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(g=I.exec(u));){let[,b,h,f]=g;if(b=parseInt(b,10),b in d){if(0===b)break}else d[b]=[h,f]}const O=[];for(let b=0;b<d.length&&b in d;++b){let[h,f]=d[b];f=x(f),h&&(f=unescape(f),0===b&&(f=j(f))),O.push(f)}return O.join("")}(Se),Re)return B(C(Re));if(Re=re("filename","i").exec(Se),Re){Re=Re[1];let u=x(Re);return u=C(u),B(u)}function re(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function m(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const g=new TextDecoder(u,{fatal:!0}),I=(0,_.stringToBytes)(d);d=g.decode(I),ce=!1}catch(g){}}return d}function B(u){return ce&&/[\x80-\xff]/.test(u)&&(u=m("utf-8",u),ce&&(u=m("iso-8859-1",u))),u}function x(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let g=0;g<d.length;++g){const I=d[g].indexOf('"');-1!==I&&(d[g]=d[g].slice(0,I),d.length=g+1),d[g]=d[g].replace(/\\(.)/g,"$1")}u=d.join('"')}return u}function j(u){const d=u.indexOf("'");return-1===d?u:m(u.slice(0,d),u.slice(d+1).replace(/^[^']*'/,""))}function C(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,g,I,O){if("q"===I||"Q"===I)return m(g,O=(O=O.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(b,h){return String.fromCharCode(parseInt(h,16))}));try{O=atob(O)}catch(b){}return m(g,O)})}return""};var _=W(1)},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFNetworkStream=void 0;var _=W(1),N=W(33);class re{constructor(j,C={}){this.url=j,this.isHttp=/^https?:/i.test(j),this.httpHeaders=this.isHttp&&C.httpHeaders||Object.create(null),this.withCredentials=C.withCredentials||!1,this.getXhr=C.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(j,C,u){const d={begin:j,end:C};for(const g in u)d[g]=u[g];return this.request(d)}requestFull(j){return this.request(j)}request(j){const C=this.getXhr(),u=this.currXhrId++,d=this.pendingRequests[u]={xhr:C};C.open("GET",this.url),C.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const I=this.httpHeaders[g];void 0!==I&&C.setRequestHeader(g,I)}return this.isHttp&&"begin"in j&&"end"in j?(C.setRequestHeader("Range",`bytes=${j.begin}-${j.end-1}`),d.expectedStatus=206):d.expectedStatus=200,C.responseType="arraybuffer",j.onError&&(C.onerror=function(g){j.onError(C.status)}),C.onreadystatechange=this.onStateChange.bind(this,u),C.onprogress=this.onProgress.bind(this,u),d.onHeadersReceived=j.onHeadersReceived,d.onDone=j.onDone,d.onError=j.onError,d.onProgress=j.onProgress,C.send(null),u}onProgress(j,C){var d;const u=this.pendingRequests[j];!u||null==(d=u.onProgress)||d.call(u,C)}onStateChange(j,C){var b,h,f;const u=this.pendingRequests[j];if(!u)return;const d=u.xhr;if(d.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),4!==d.readyState||!(j in this.pendingRequests))return;if(delete this.pendingRequests[j],0===d.status&&this.isHttp)return void(null==(b=u.onError)||b.call(u,d.status));const g=d.status||200;if((200!==g||206!==u.expectedStatus)&&g!==u.expectedStatus)return void(null==(h=u.onError)||h.call(u,d.status));const O=function Re(x){const j=x.response;return"string"!=typeof j?j:(0,_.stringToBytes)(j).buffer}(d);if(206===g){const E=d.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(E);u.onDone({begin:parseInt(y[1],10),chunk:O})}else O?u.onDone({begin:0,chunk:O}):null==(f=u.onError)||f.call(u,d.status)}getRequestXhr(j){return this.pendingRequests[j].xhr}isPendingRequest(j){return j in this.pendingRequests}abortRequest(j){const C=this.pendingRequests[j].xhr;delete this.pendingRequests[j],C.abort()}}L.PDFNetworkStream=class m{constructor(j){this._source=j,this._manager=new re(j.url,{httpHeaders:j.httpHeaders,withCredentials:j.withCredentials}),this._rangeChunkSize=j.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(j){const C=this._rangeRequestReaders.indexOf(j);C>=0&&this._rangeRequestReaders.splice(C,1)}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new B(this._manager,this._source),this._fullRequestReader}getRangeReader(j,C){const u=new D(this._manager,j,C);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(j){var C;null==(C=this._fullRequestReader)||C.cancel(j);for(const u of this._rangeRequestReaders.slice(0))u.cancel(j)}};class B{constructor(j,C){this._manager=j;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._fullRequestId=j.requestFull(u),this._headersReceivedCapability=(0,_.createPromiseCapability)(),this._disableRange=C.disableRange||!1,this._contentLength=C.length,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const j=this._fullRequestId,C=this._manager.getRequestXhr(j),u=I=>C.getResponseHeader(I),{allowRangeRequests:d,suggestedLength:g}=(0,N.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,N.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(j),this._headersReceivedCapability.resolve()}_onDone(j){if(j&&(this._requests.length>0?this._requests.shift().resolve({value:j.chunk,done:!1}):this._cachedChunks.push(j.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(j){this._storedError=(0,N.createResponseStatusError)(j,this._url),this._headersReceivedCapability.reject(this._storedError);for(const C of this._requests)C.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(j){var C;null==(C=this.onProgress)||C.call(this,{loaded:j.loaded,total:j.lengthComputable?j.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var j=this;return _asyncToGenerator(function*(){if(j._storedError)throw j._storedError;if(j._cachedChunks.length>0)return{value:j._cachedChunks.shift(),done:!1};if(j._done)return{value:void 0,done:!0};const C=(0,_.createPromiseCapability)();return j._requests.push(C),C.promise})()}cancel(j){this._done=!0,this._headersReceivedCapability.reject(j);for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class D{constructor(j,C,u){this._manager=j;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=j.url,this._requestId=j.requestRange(C,u,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var j;null==(j=this.onClosed)||j.call(this,this)}_onDone(j){const C=j.chunk;this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunk=C,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(j){this._storedError=(0,N.createResponseStatusError)(j,this._url);for(const C of this._requests)C.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(j){var C;this.isStreamingSupported||null==(C=this.onProgress)||C.call(this,{loaded:j.loaded})}get isStreamingSupported(){return!1}read(){var j=this;return _asyncToGenerator(function*(){if(j._storedError)throw j._storedError;if(null!==j._queuedChunk){const u=j._queuedChunk;return j._queuedChunk=null,{value:u,done:!1}}if(j._done)return{value:void 0,done:!0};const C=(0,_.createPromiseCapability)();return j._requests.push(C),C.promise})()}cancel(j){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(it,L,W)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFFetchStream=void 0;var _=W(1),N=W(33);function Se(B,D,x){return{method:"GET",headers:B,signal:x.signal,mode:"cors",credentials:D?"include":"same-origin",redirect:"follow"}}function ce(B){const D=new Headers;for(const x in B){const j=B[x];void 0!==j&&D.append(x,j)}return D}L.PDFFetchStream=class Re{constructor(D){this.source=D,this.isHttp=/^https?:/i.test(D.url),this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var D,x;return null!=(x=null==(D=this._fullRequestReader)?void 0:D._loaded)?x:0}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new re(this),this._fullRequestReader}getRangeReader(D,x){if(x<=this._progressiveDataLength)return null;const j=new m(this,D,x);return this._rangeRequestReaders.push(j),j}cancelAllRequests(D){this._fullRequestReader&&this._fullRequestReader.cancel(D);for(const x of this._rangeRequestReaders.slice(0))x.cancel(D)}};class re{constructor(D){this._stream=D,this._reader=null,this._loaded=0,this._filename=null;const x=D.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=(0,_.createPromiseCapability)(),this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=ce(this._stream.httpHeaders);const j=x.url;fetch(j,Se(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,N.validateResponseStatus)(C.status))throw(0,N.createResponseStatusError)(C.status,j);this._reader=C.body.getReader(),this._headersCapability.resolve();const u=I=>C.headers.get(I),{allowRangeRequests:d,suggestedLength:g}=(0,N.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=g||this._contentLength,this._filename=(0,N.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var D=this;return _asyncToGenerator(function*(){yield D._headersCapability.promise;const{value:x,done:j}=yield D._reader.read();return j?{value:x,done:j}:(D._loaded+=x.byteLength,D.onProgress&&D.onProgress({loaded:D._loaded,total:D._contentLength}),{value:new Uint8Array(x).buffer,done:!1})})()}cancel(D){this._reader&&this._reader.cancel(D),this._abortController.abort()}}class m{constructor(D,x,j){this._stream=D,this._reader=null,this._loaded=0;const C=D.source;this._withCredentials=C.withCredentials||!1,this._readCapability=(0,_.createPromiseCapability)(),this._isStreamingSupported=!C.disableStream,this._abortController=new AbortController,this._headers=ce(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${j-1}`);const u=C.url;fetch(u,Se(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,N.validateResponseStatus)(d.status))throw(0,N.createResponseStatusError)(d.status,u);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var D=this;return _asyncToGenerator(function*(){yield D._readCapability.promise;const{value:x,done:j}=yield D._reader.read();return j?{value:x,done:j}:(D._loaded+=x.byteLength,D.onProgress&&D.onProgress({loaded:D._loaded}),{value:new Uint8Array(x).buffer,done:!1})})()}cancel(D){this._reader&&this._reader.cancel(D),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(it){var L=__webpack_module_cache__[it];if(void 0!==L)return L.exports;var W=__webpack_module_cache__[it]={exports:{}};return __webpack_modules__[it](W,W.exports,__w_pdfjs_require__),W.exports}var __webpack_exports__={};return(()=>{var it=__webpack_exports__;Object.defineProperty(it,"__esModule",{value:!0}),Object.defineProperty(it,"AnnotationEditorLayer",{enumerable:!0,get:function(){return N.AnnotationEditorLayer}}),Object.defineProperty(it,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return L.AnnotationEditorParamsType}}),Object.defineProperty(it,"AnnotationEditorType",{enumerable:!0,get:function(){return L.AnnotationEditorType}}),Object.defineProperty(it,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Se.AnnotationEditorUIManager}}),Object.defineProperty(it,"AnnotationLayer",{enumerable:!0,get:function(){return ce.AnnotationLayer}}),Object.defineProperty(it,"AnnotationMode",{enumerable:!0,get:function(){return L.AnnotationMode}}),Object.defineProperty(it,"CMapCompressionType",{enumerable:!0,get:function(){return L.CMapCompressionType}}),Object.defineProperty(it,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Re.GlobalWorkerOptions}}),Object.defineProperty(it,"InvalidPDFException",{enumerable:!0,get:function(){return L.InvalidPDFException}}),Object.defineProperty(it,"LoopbackPort",{enumerable:!0,get:function(){return W.LoopbackPort}}),Object.defineProperty(it,"MissingPDFException",{enumerable:!0,get:function(){return L.MissingPDFException}}),Object.defineProperty(it,"OPS",{enumerable:!0,get:function(){return L.OPS}}),Object.defineProperty(it,"PDFDataRangeTransport",{enumerable:!0,get:function(){return W.PDFDataRangeTransport}}),Object.defineProperty(it,"PDFDateString",{enumerable:!0,get:function(){return _.PDFDateString}}),Object.defineProperty(it,"PDFWorker",{enumerable:!0,get:function(){return W.PDFWorker}}),Object.defineProperty(it,"PasswordResponses",{enumerable:!0,get:function(){return L.PasswordResponses}}),Object.defineProperty(it,"PermissionFlag",{enumerable:!0,get:function(){return L.PermissionFlag}}),Object.defineProperty(it,"PixelsPerInch",{enumerable:!0,get:function(){return _.PixelsPerInch}}),Object.defineProperty(it,"RenderingCancelledException",{enumerable:!0,get:function(){return _.RenderingCancelledException}}),Object.defineProperty(it,"SVGGraphics",{enumerable:!0,get:function(){return B.SVGGraphics}}),Object.defineProperty(it,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return L.UNSUPPORTED_FEATURES}}),Object.defineProperty(it,"UnexpectedResponseException",{enumerable:!0,get:function(){return L.UnexpectedResponseException}}),Object.defineProperty(it,"Util",{enumerable:!0,get:function(){return L.Util}}),Object.defineProperty(it,"VerbosityLevel",{enumerable:!0,get:function(){return L.VerbosityLevel}}),Object.defineProperty(it,"XfaLayer",{enumerable:!0,get:function(){return D.XfaLayer}}),Object.defineProperty(it,"build",{enumerable:!0,get:function(){return W.build}}),Object.defineProperty(it,"createPromiseCapability",{enumerable:!0,get:function(){return L.createPromiseCapability}}),Object.defineProperty(it,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return L.createValidAbsoluteUrl}}),Object.defineProperty(it,"getDocument",{enumerable:!0,get:function(){return W.getDocument}}),Object.defineProperty(it,"getFilenameFromUrl",{enumerable:!0,get:function(){return _.getFilenameFromUrl}}),Object.defineProperty(it,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _.getPdfFilenameFromUrl}}),Object.defineProperty(it,"getXfaPageViewport",{enumerable:!0,get:function(){return _.getXfaPageViewport}}),Object.defineProperty(it,"isPdfFile",{enumerable:!0,get:function(){return _.isPdfFile}}),Object.defineProperty(it,"loadScript",{enumerable:!0,get:function(){return _.loadScript}}),Object.defineProperty(it,"renderTextLayer",{enumerable:!0,get:function(){return m.renderTextLayer}}),Object.defineProperty(it,"shadow",{enumerable:!0,get:function(){return L.shadow}}),Object.defineProperty(it,"version",{enumerable:!0,get:function(){return W.version}});var L=__w_pdfjs_require__(1),W=__w_pdfjs_require__(4),_=__w_pdfjs_require__(8),N=__w_pdfjs_require__(22),Se=__w_pdfjs_require__(7),ce=__w_pdfjs_require__(27),Re=__w_pdfjs_require__(15),re=__w_pdfjs_require__(3),m=__w_pdfjs_require__(30),B=__w_pdfjs_require__(31),D=__w_pdfjs_require__(29);if(re.isNodeJS){const{PDFNodeStream:C}=__w_pdfjs_require__(32);(0,W.setPDFNetworkStreamFactory)(u=>new C(u))}else{const{PDFNetworkStream:C}=__w_pdfjs_require__(35),{PDFFetchStream:u}=__w_pdfjs_require__(36);(0,W.setPDFNetworkStreamFactory)(d=>(0,_.isValidFetchUrl)(d.url)?new u(d):new C(d))}})(),__webpack_exports__})(),module.exports=W()},813:(it,L,W)=>{var _=W(926).default;globalThis,it.exports=(()=>(()=>{"use strict";var N=[,(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.DefaultXfaLayerFactory=m.DefaultTextLayerFactory=m.DefaultStructTreeLayerFactory=m.DefaultAnnotationLayerFactory=m.DefaultAnnotationEditorLayerFactory=void 0;var D=B(2),x=B(5),j=B(4),C=B(6),u=B(8),d=B(9),g=B(10);m.DefaultAnnotationLayerFactory=class I{createAnnotationLayerBuilder({pageDiv:y,pdfPage:R,annotationStorage:M=null,imageResourcesPath:z="",renderForms:ye=!0,l10n:Ce=j.NullL10n,enableScripting:De=!1,hasJSActionsPromise:ze=null,mouseState:Oe=null,fieldObjectsPromise:J=null,annotationCanvasMap:Q=null,accessibilityManager:pe=null}){return new x.AnnotationLayerBuilder({pageDiv:y,pdfPage:R,imageResourcesPath:z,renderForms:ye,linkService:new C.SimpleLinkService,l10n:Ce,annotationStorage:M,enableScripting:De,hasJSActionsPromise:ze,fieldObjectsPromise:J,mouseState:Oe,annotationCanvasMap:Q,accessibilityManager:pe})}},m.DefaultAnnotationEditorLayerFactory=class O{createAnnotationEditorLayerBuilder({uiManager:y=null,pageDiv:R,pdfPage:M,accessibilityManager:z=null,l10n:ye,annotationStorage:Ce=null}){return new D.AnnotationEditorLayerBuilder({uiManager:y,pageDiv:R,pdfPage:M,accessibilityManager:z,l10n:ye,annotationStorage:Ce})}},m.DefaultStructTreeLayerFactory=class b{createStructTreeLayerBuilder({pdfPage:y}){return new u.StructTreeLayerBuilder({pdfPage:y})}},m.DefaultTextLayerFactory=class h{createTextLayerBuilder({textLayerDiv:y,pageIndex:R,viewport:M,enhanceTextSelection:z=!1,eventBus:ye,highlighter:Ce,accessibilityManager:De=null}){return new d.TextLayerBuilder({textLayerDiv:y,pageIndex:R,viewport:M,enhanceTextSelection:z,eventBus:ye,highlighter:Ce,accessibilityManager:De})}},m.DefaultXfaLayerFactory=class f{createXfaLayerBuilder({pageDiv:y,pdfPage:R,annotationStorage:M=null}){return new g.XfaLayerBuilder({pageDiv:y,pdfPage:R,annotationStorage:M,linkService:new C.SimpleLinkService})}}},(re,m,B)=>{var C;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditorLayerBuilder=void 0;var D=B(3),x=B(4);C=new WeakMap,m.AnnotationEditorLayerBuilder=class j{constructor(d){He(this,C,void 0),this.pageDiv=d.pageDiv,this.pdfPage=d.pdfPage,this.annotationStorage=d.annotationStorage||null,this.accessibilityManager=d.accessibilityManager,this.l10n=d.l10n||x.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,lt(this,C,d.uiManager)}render(d,g="display"){var I=this;return _(function*(){if("display"!==g||I._cancelled)return;const O=d.clone({dontFlip:!0});if(I.div)return I.annotationEditorLayer.update({viewport:O}),void I.show();I.div=document.createElement("div"),I.div.className="annotationEditorLayer",I.div.tabIndex=0,I.pageDiv.append(I.div),I.annotationEditorLayer=new D.AnnotationEditorLayer({uiManager:G(I,C),div:I.div,annotationStorage:I.annotationStorage,accessibilityManager:I.accessibilityManager,pageIndex:I.pdfPage._pageIndex,l10n:I.l10n,viewport:O}),I.annotationEditorLayer.render({viewport:O,div:I.div,annotations:null,intent:g})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){!this.div||(this.div.hidden=!0)}show(){!this.div||(this.div.hidden=!1)}destroy(){!this.div||(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},re=>{let m;m="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:W(36),re.exports=m},(re,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NullL10n=void 0,m.fixupLangCode=function j(d){return x[null==d?void 0:d.toLowerCase()]||d},m.getL10nFallback=D;const B={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function D(d,g){switch(d){case"find_match_count":d=`find_match_count[${1===g.total?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${1===g.limit?"one":"other"}]`}return B[d]||""}const x={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};m.NullL10n={getLanguage:()=>_(function*(){return"en-us"})(),getDirection:()=>_(function*(){return"ltr"})(),get:(d,g=null,I=D(d,g))=>_(function*(){return function C(d,g){return g?d.replace(/\{\{\s*(\w+)\s*\}\}/g,(I,O)=>O in g?g[O]:"{{"+O+"}}"):d}(I,g)})(),translate:d=>_(function*(){})()}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationLayerBuilder=void 0;var D=B(3),x=B(4);m.AnnotationLayerBuilder=class j{constructor({pageDiv:u,pdfPage:d,linkService:g,downloadManager:I,annotationStorage:O=null,imageResourcesPath:b="",renderForms:h=!0,l10n:f=x.NullL10n,enableScripting:E=!1,hasJSActionsPromise:y=null,fieldObjectsPromise:R=null,mouseState:M=null,annotationCanvasMap:z=null,accessibilityManager:ye=null}){this.pageDiv=u,this.pdfPage=d,this.linkService=g,this.downloadManager=I,this.imageResourcesPath=b,this.renderForms=h,this.l10n=f,this.annotationStorage=O,this.enableScripting=E,this._hasJSActionsPromise=y,this._fieldObjectsPromise=R,this._mouseState=M,this._annotationCanvasMap=z,this._accessibilityManager=ye,this.div=null,this._cancelled=!1}render(u,d="display"){var g=this;return _(function*(){const[I,O=!1,b=null]=yield Promise.all([g.pdfPage.getAnnotations({intent:d}),g._hasJSActionsPromise,g._fieldObjectsPromise]);if(g._cancelled||0===I.length)return;const h={viewport:u.clone({dontFlip:!0}),div:g.div,annotations:I,page:g.pdfPage,imageResourcesPath:g.imageResourcesPath,renderForms:g.renderForms,linkService:g.linkService,downloadManager:g.downloadManager,annotationStorage:g.annotationStorage,enableScripting:g.enableScripting,hasJSActions:O,fieldObjects:b,mouseState:g._mouseState,annotationCanvasMap:g._annotationCanvasMap,accessibilityManager:g._accessibilityManager};g.div?D.AnnotationLayer.update(h):(g.div=document.createElement("div"),g.div.className="annotationLayer",g.pageDiv.append(g.div),h.div=g.div,D.AnnotationLayer.render(h),g.l10n.translate(g.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(re,m,B)=>{var g,I,lT,b,QU;Object.defineProperty(m,"__esModule",{value:!0}),m.SimpleLinkService=m.PDFLinkService=m.LinkTarget=void 0;var D=B(7);const j={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function C(E,{url:y,target:R,rel:M,enabled:z=!0}={}){if(!y||"string"!=typeof y)throw new Error('A valid "url" parameter must provided.');const ye=(0,D.removeNullCharacters)(y);z?E.href=E.title=ye:(E.href="",E.title=`Disabled: ${ye}`,E.onclick=()=>!1);let Ce="";switch(R){case j.NONE:break;case j.SELF:Ce="_self";break;case j.BLANK:Ce="_blank";break;case j.PARENT:Ce="_parent";break;case j.TOP:Ce="_top"}E.target=Ce,E.rel="string"==typeof M?M:"noopener noreferrer nofollow"}m.LinkTarget=j;const f=class{constructor({eventBus:y,externalLinkTarget:R=null,externalLinkRel:M=null,ignoreDestinationZoom:z=!1}={}){He(this,I),He(this,g,new Map),this.eventBus=y,this.externalLinkTarget=R,this.externalLinkRel=M,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=z,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(y,R=null){this.baseUrl=R,this.pdfDocument=y,G(this,g).clear()}setViewer(y){this.pdfViewer=y}setHistory(y){this.pdfHistory=y}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(y){this.pdfViewer.currentPageNumber=y}get rotation(){return this.pdfViewer.pagesRotation}set rotation(y){this.pdfViewer.pagesRotation=y}goToDestination(y){var R=this;return _(function*(){var ye;if(!R.pdfDocument)return;let M,z;"string"==typeof y?(M=y,z=yield R.pdfDocument.getDestination(y)):(M=null,z=yield y),Array.isArray(z)?We(ye=R,I,lT).call(ye,y,M,z):console.error(`PDFLinkService.goToDestination: "${z}" is not a valid destination array, for dest="${y}".`)})()}goToPage(y){if(!this.pdfDocument)return;const R="string"==typeof y&&this.pdfViewer.pageLabelToPageNumber(y)||0|y;Number.isInteger(R)&&R>0&&R<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(R)),this.pdfViewer.scrollPageIntoView({pageNumber:R})):console.error(`PDFLinkService.goToPage: "${y}" is not a valid page.`)}addLinkAttributes(y,R,M=!1){C(y,{url:R,target:M?j.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(y){if("string"==typeof y){if(y.length>0)return this.getAnchorUrl("#"+escape(y))}else if(Array.isArray(y)){const R=JSON.stringify(y);if(R.length>0)return this.getAnchorUrl("#"+escape(R))}return this.getAnchorUrl("")}getAnchorUrl(y){return(this.baseUrl||"")+y}setHash(y){var z;if(!this.pdfDocument)return;let R,M;if(y.includes("=")){const ye=(0,D.parseQueryString)(y);if(ye.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:ye.get("search").replace(/"/g,""),phraseSearch:"true"===ye.get("phrase")}),ye.has("page")&&(R=0|ye.get("page")||1),ye.has("zoom")){const Ce=ye.get("zoom").split(","),De=Ce[0],ze=parseFloat(De);De.includes("Fit")?"Fit"===De||"FitB"===De?M=[null,{name:De}]:"FitH"===De||"FitBH"===De||"FitV"===De||"FitBV"===De?M=[null,{name:De},Ce.length>1?0|Ce[1]:null]:"FitR"===De?5!==Ce.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):M=[null,{name:De},0|Ce[1],0|Ce[2],0|Ce[3],0|Ce[4]]:console.error(`PDFLinkService.setHash: "${De}" is not a valid zoom value.`):M=[null,{name:"XYZ"},Ce.length>1?0|Ce[1]:null,Ce.length>2?0|Ce[2]:null,ze?ze/100:De]}M?this.pdfViewer.scrollPageIntoView({pageNumber:R||this.page,destArray:M,allowNegativeOffset:!0}):R&&(this.page=R),ye.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:ye.get("pagemode")}),ye.has("nameddest")&&this.goToDestination(ye.get("nameddest"))}else{M=unescape(y);try{M=JSON.parse(M),Array.isArray(M)||(M=M.toString())}catch(ye){}if("string"==typeof M||We(z=f,b,QU).call(z,M))return void this.goToDestination(M);console.error(`PDFLinkService.setHash: "${unescape(y)}" is not a valid destination.`)}}executeNamedAction(y){var R,M;switch(y){case"GoBack":null==(R=this.pdfHistory)||R.back();break;case"GoForward":null==(M=this.pdfHistory)||M.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:y})}cachePageRef(y,R){if(!R)return;const M=0===R.gen?`${R.num}R`:`${R.num}R${R.gen}`;G(this,g).set(M,y)}_cachedPageNumber(y){if(!y)return null;const R=0===y.gen?`${y.num}R`:`${y.num}R${y.gen}`;return G(this,g).get(R)||null}isPageVisible(y){return this.pdfViewer.isPageVisible(y)}isPageCached(y){return this.pdfViewer.isPageCached(y)}};let u=f;g=new WeakMap,I=new WeakSet,lT=function(y,R=null,M){const z=M[0];let ye;if("object"==typeof z&&null!==z){if(ye=this._cachedPageNumber(z),!ye)return void this.pdfDocument.getPageIndex(z).then(Ce=>{this.cachePageRef(Ce+1,z),We(this,I,lT).call(this,y,R,M)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${z}" is not a valid page reference, for dest="${y}".`)})}else{if(!Number.isInteger(z))return void console.error(`PDFLinkService.#goToDestinationHelper: "${z}" is not a valid destination reference, for dest="${y}".`);ye=z+1}!ye||ye<1||ye>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${ye}" is not a valid page number, for dest="${y}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:R,explicitDest:M,pageNumber:ye})),this.pdfViewer.scrollPageIntoView({pageNumber:ye,destArray:M,ignoreDestinationZoom:this._ignoreDestinationZoom}))},b=new WeakSet,QU=function(y){if(!Array.isArray(y))return!1;const R=y.length;if(R<2)return!1;const M=y[0];if(!("object"==typeof M&&Number.isInteger(M.num)&&Number.isInteger(M.gen)||Number.isInteger(M)&&M>=0))return!1;const z=y[1];if("object"!=typeof z||"string"!=typeof z.name)return!1;let ye=!0;switch(z.name){case"XYZ":if(5!==R)return!1;break;case"Fit":case"FitB":return 2===R;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==R)return!1;break;case"FitR":if(6!==R)return!1;ye=!1;break;default:return!1}for(let Ce=2;Ce<R;Ce++){const De=y[Ce];if(!("number"==typeof De||ye&&null===De))return!1}return!0},He(u,b),m.PDFLinkService=u,m.SimpleLinkService=class d{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(y){}get rotation(){return 0}set rotation(y){}goToDestination(y){return _(function*(){})()}goToPage(y){}addLinkAttributes(y,R,M=!1){C(y,{url:R,enabled:this.externalLinkEnabled})}getDestinationHash(y){return"#"}getAnchorUrl(y){return"#"}setHash(y){}executeNamedAction(y){}cachePageRef(y,R){}isPageVisible(y){return!0}isPageCached(y){return!0}}},(re,m)=>{var ot,Fe,nt;Object.defineProperty(m,"__esModule",{value:!0}),m.animationStarted=m.VERTICAL_PADDING=m.UNKNOWN_SCALE=m.TextLayerMode=m.SpreadMode=m.SidebarView=m.ScrollMode=m.SCROLLBAR_PADDING=m.RenderingStates=m.RendererType=m.ProgressBar=m.PresentationModeState=m.OutputScale=m.MIN_SCALE=m.MAX_SCALE=m.MAX_AUTO_SCALE=m.DEFAULT_SCALE_VALUE=m.DEFAULT_SCALE_DELTA=m.DEFAULT_SCALE=m.AutoPrintRegExp=void 0,m.apiPageLayoutToViewerModes=function Pe(me){let ke=y.VERTICAL,Qe=R.NONE;switch(me){case"SinglePage":ke=y.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ke=y.PAGE;case"TwoColumnLeft":Qe=R.ODD;break;case"TwoPageRight":ke=y.PAGE;case"TwoColumnRight":Qe=R.EVEN}return{scrollMode:ke,spreadMode:Qe}},m.apiPageModeToSidebarView=function Ke(me){switch(me){case"UseNone":return h.NONE;case"UseThumbs":return h.THUMBS;case"UseOutlines":return h.OUTLINE;case"UseAttachments":return h.ATTACHMENTS;case"UseOC":return h.LAYERS}return h.NONE},m.approximateFraction=function pe(me){if(Math.floor(me)===me)return[me,1];const ke=1/me;if(ke>8)return[1,8];if(Math.floor(ke)===ke)return[1,ke];const ee=me>1?ke:me;let T,H=0,ge=1,Ne=1,tt=1;for(;;){const de=H+Ne,Ae=ge+tt;if(Ae>8)break;ee<=de/Ae?(Ne=de,tt=Ae):(H=de,ge=Ae)}return T=ee-H/ge<Ne/tt-ee?ee===me?[H,ge]:[ge,H]:ee===me?[Ne,tt]:[tt,Ne],T},m.backtrackBeforeAllVisibleElements=fe,m.binarySearchFirstItem=Q,m.docStyle=void 0,m.getActiveOrFocusedElement=function ae(){let me=document,ke=me.activeElement||me.querySelector(":focus");for(;null==ke?void 0:ke.shadowRoot;)me=ke.shadowRoot,ke=me.activeElement||me.querySelector(":focus");return ke},m.getPageSizeInches=function Je({view:me,userUnit:ke,rotate:Qe}){const[ee,H,ge,Ne]=me,tt=Qe%180!=0,T=(ge-ee)/72*ke,de=(Ne-H)/72*ke;return{width:tt?de:T,height:tt?T:de}},m.getVisibleElements=function S({scrollEl:me,views:ke,sortByVisibility:Qe=!1,horizontal:ee=!1,rtl:H=!1}){const ge=me.scrollTop,Ne=ge+me.clientHeight,tt=me.scrollLeft,T=tt+me.clientWidth,oe=[],xe=new Set,Xe=ke.length;let ue=Q(ke,ee?function Ae(V){const K=V.div,Me=K.offsetLeft+K.clientLeft;return H?Me<T:Me+K.clientWidth>tt}:function de(V){const K=V.div;return K.offsetTop+K.clientTop+K.clientHeight>ge});ue>0&&ue<Xe&&!ee&&(ue=fe(ue,ke,ge));let be=ee?T:-1;for(let V=ue;V<Xe;V++){const K=ke[V],Me=K.div,qe=Me.offsetLeft+Me.clientLeft,ct=Me.offsetTop+Me.clientTop,ht=Me.clientWidth,xt=Me.clientHeight,Ct=qe+ht,Dt=ct+xt;if(-1===be)Dt>=Ne&&(be=Dt);else if((ee?qe:ct)>be)break;if(Dt<=ge||ct>=Ne||Ct<=tt||qe>=T)continue;const Mt=Math.max(0,ge-ct)+Math.max(0,Dt-Ne),nn=(ht-(Math.max(0,tt-qe)+Math.max(0,Ct-T)))/ht;oe.push({id:K.id,x:qe,y:ct,view:K,percent:(xt-Mt)/xt*nn*100|0,widthPercent:100*nn|0}),xe.add(K.id)}const Be=oe[0],X=oe.at(-1);return Qe&&oe.sort(function(V,K){const Me=V.percent-K.percent;return Math.abs(Me)>.001?-Me:V.id-K.id}),{first:Be,last:X,views:oe,ids:xe}},m.isPortraitOrientation=function Te(me){return me.width<=me.height},m.isValidRotation=function le(me){return Number.isInteger(me)&&me%90==0},m.isValidScrollMode=function _e(me){return Number.isInteger(me)&&Object.values(y).includes(me)&&me!==y.UNKNOWN},m.isValidSpreadMode=function Ie(me){return Number.isInteger(me)&&Object.values(R).includes(me)&&me!==R.UNKNOWN},m.noContextMenuHandler=function F(me){me.preventDefault()},m.normalizeWheelEventDelta=function ve(me){let ke=te(me);return 0===me.deltaMode?ke/=900:1===me.deltaMode&&(ke/=30),ke},m.normalizeWheelEventDirection=te,m.parseQueryString=function De(me){const ke=new Map;for(const[Qe,ee]of new URLSearchParams(me))ke.set(Qe.toLowerCase(),ee);return ke},m.removeNullCharacters=function J(me,ke=!1){return"string"!=typeof me?(console.error("The argument must be a string."),me):(ke&&(me=me.replace(Oe," ")),me.replace(ze,""))},m.roundToDivide=function we(me,ke){const Qe=me%ke;return 0===Qe?me:Math.round(me-Qe+ke)},m.scrollIntoView=function ye(me,ke,Qe=!1){let ee=me.offsetParent;if(!ee)return void console.error("offsetParent is not set -- cannot scroll");let H=me.offsetTop+me.clientTop,ge=me.offsetLeft+me.clientLeft;for(;ee.clientHeight===ee.scrollHeight&&ee.clientWidth===ee.scrollWidth||Qe&&(ee.classList.contains("markedContent")||"hidden"===getComputedStyle(ee).overflow);)if(H+=ee.offsetTop,ge+=ee.offsetLeft,ee=ee.offsetParent,!ee)return;ke&&(void 0!==ke.top&&(H+=ke.top),void 0!==ke.left&&(ge+=ke.left,ee.scrollLeft=ge)),ee.scrollTop=H},m.watchScroll=function Ce(me,ke){const Qe=function(ge){H||(H=window.requestAnimationFrame(function(){H=null;const tt=me.scrollLeft,T=ee.lastX;tt!==T&&(ee.right=tt>T),ee.lastX=tt;const de=me.scrollTop,Ae=ee.lastY;de!==Ae&&(ee.down=de>Ae),ee.lastY=de,ke(ee)}))},ee={right:!0,down:!0,lastX:me.scrollLeft,lastY:me.scrollTop,_eventHandler:Qe};let H=null;return me.addEventListener("scroll",Qe,!0),ee},m.DEFAULT_SCALE_VALUE="auto",m.DEFAULT_SCALE=1,m.DEFAULT_SCALE_DELTA=1.1,m.MIN_SCALE=.1,m.MAX_SCALE=10,m.UNKNOWN_SCALE=0,m.MAX_AUTO_SCALE=1.25,m.SCROLLBAR_PADDING=40,m.VERTICAL_PADDING=5,m.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},m.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const h={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};m.SidebarView=h,m.RendererType={CANVAS:"canvas",SVG:"svg"},m.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const y={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};m.ScrollMode=y;const R={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};m.SpreadMode=R,m.AutoPrintRegExp=/\bprint\s*\(/,m.OutputScale=class z{constructor(){const ke=window.devicePixelRatio||1;this.sx=ke,this.sy=ke}get scaled(){return 1!==this.sx||1!==this.sy}};const ze=/\x00/g,Oe=/[\x01-\x1F]/g;function Q(me,ke,Qe=0){let ee=Qe,H=me.length-1;if(H<0||!ke(me[H]))return me.length;if(ke(me[ee]))return ee;for(;ee<H;){const ge=ee+H>>1;ke(me[ge])?H=ge:ee=ge+1}return ee}function fe(me,ke,Qe){if(me<2)return me;let ee=ke[me].div,H=ee.offsetTop+ee.clientTop;H>=Qe&&(ee=ke[me-1].div,H=ee.offsetTop+ee.clientTop);for(let ge=me-2;ge>=0&&(ee=ke[ge].div,!(ee.offsetTop+ee.clientTop+ee.clientHeight<=H));--ge)me=ge;return me}function te(me){let ke=Math.hypot(me.deltaX,me.deltaY);const Qe=Math.atan2(me.deltaY,me.deltaX);return-.25*Math.PI<Qe&&Qe<.75*Math.PI&&(ke=-ke),ke}const w=new Promise(function(me){window.requestAnimationFrame(me)});m.animationStarted=w;const U=document.documentElement.style;m.docStyle=U,ot=new WeakMap,Fe=new WeakMap,nt=new WeakMap,m.ProgressBar=class ie{constructor(ke){if(He(this,ot,null),He(this,Fe,0),He(this,nt,!0),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const Qe=document.getElementById(ke);lt(this,ot,Qe.classList)}get percent(){return G(this,Fe)}set percent(ke){lt(this,Fe,function q(me,ke,Qe){return Math.min(Math.max(me,ke),Qe)}(ke,0,100)),isNaN(ke)?G(this,ot).add("indeterminate"):(G(this,ot).remove("indeterminate"),U.setProperty("--progressBar-percent",`${G(this,Fe)}%`))}setWidth(ke){if(!ke)return;const ee=ke.parentNode.offsetWidth-ke.offsetWidth;ee>0&&U.setProperty("--progressBar-end-offset",`${ee}px`)}hide(){!G(this,nt)||(lt(this,nt,!1),G(this,ot).add("hidden"))}show(){G(this,nt)||(lt(this,nt,!0),G(this,ot).remove("hidden"))}}},(re,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.StructTreeLayerBuilder=void 0;const B={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},D=/^H(\d+)$/;m.StructTreeLayerBuilder=class x{constructor({pdfPage:C}){this.pdfPage=C}render(C){return this._walk(C)}_setAttributes(C,u){void 0!==C.alt&&u.setAttribute("aria-label",C.alt),void 0!==C.id&&u.setAttribute("aria-owns",C.id),void 0!==C.lang&&u.setAttribute("lang",C.lang)}_walk(C){if(!C)return null;const u=document.createElement("span");if("role"in C){const{role:d}=C,g=d.match(D);g?(u.setAttribute("role","heading"),u.setAttribute("aria-level",g[1])):B[d]&&u.setAttribute("role",B[d])}if(this._setAttributes(C,u),C.children)if(1===C.children.length&&"id"in C.children[0])this._setAttributes(C.children[0],u);else for(const d of C.children)u.append(this._walk(d));return u}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TextLayerBuilder=void 0;var D=B(3);m.TextLayerBuilder=class j{constructor({textLayerDiv:u,eventBus:d,pageIndex:g,viewport:I,highlighter:O=null,enhanceTextSelection:b=!1,accessibilityManager:h=null}){this.textLayerDiv=u,this.eventBus=d,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=g+1,this.viewport=I,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=O,this.enhanceTextSelection=b,this.accessibilityManager=h,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const u=document.createElement("div");u.className="endOfContent",this.textLayerDiv.append(u)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(u=0){var g,I;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null==(g=this.highlighter)||g.setTextMapping(this.textDivs,this.textContentItemsStr),null==(I=this.accessibilityManager)||I.setTextMapping(this.textDivs);const d=document.createDocumentFragment();this.textLayerRenderTask=(0,D.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:d,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:u,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var O,b;this.textLayerDiv.append(d),this._finishRendering(),null==(O=this.highlighter)||O.enable(),null==(b=this.accessibilityManager)||b.enable()},function(O){})}cancel(){var u,d;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(u=this.highlighter)||u.disable(),null==(d=this.accessibilityManager)||d.disable()}setTextContentStream(u){this.cancel(),this.textContentStream=u}setTextContent(u){this.cancel(),this.textContent=u}_bindMouse(){const u=this.textLayerDiv;let d=null;u.addEventListener("mousedown",g=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(d&&(clearTimeout(d),d=null));const I=u.querySelector(".endOfContent");if(!I)return;let O=g.target!==u;if(O=O&&"none"!==window.getComputedStyle(I).getPropertyValue("-moz-user-select"),O){const b=u.getBoundingClientRect(),h=Math.max(0,(g.pageY-b.top)/b.height);I.style.top=(100*h).toFixed(2)+"%"}I.classList.add("active")}),u.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(d=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),d=null},300));const g=u.querySelector(".endOfContent");!g||(g.style.top="",g.classList.remove("active"))})}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaLayerBuilder=void 0;var D=B(3);m.XfaLayerBuilder=class x{constructor({pageDiv:C,pdfPage:u,annotationStorage:d=null,linkService:g,xfaHtml:I=null}){this.pageDiv=C,this.pdfPage=u,this.annotationStorage=d,this.linkService=g,this.xfaHtml=I,this.div=null,this._cancelled=!1}render(C,u="display"){if("print"===u){const d={viewport:C.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:u},g=document.createElement("div");this.pageDiv.append(g),d.div=g;const I=D.XfaLayer.render(d);return Promise.resolve(I)}return this.pdfPage.getXfa().then(d=>{if(this._cancelled||!d)return{textDivs:[]};const g={viewport:C.clone({dontFlip:!0}),div:this.div,xfaHtml:d,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:u};return this.div?D.XfaLayer.update(g):(this.div=document.createElement("div"),this.pageDiv.append(this.div),g.div=this.div,D.XfaLayer.render(g))}).catch(d=>{console.error(d)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFViewer=m.PDFSinglePageViewer=void 0;var D=B(7),x=B(12);m.PDFViewer=class j extends x.BaseViewer{},m.PDFSinglePageViewer=class C extends x.BaseViewer{_resetView(){super._resetView(),this._scrollMode=D.ScrollMode.PAGE,this._spreadMode=D.SpreadMode.NONE}set scrollMode(d){}_updateScrollMode(){}set spreadMode(d){}_updateSpreadMode(){}}},(re,m,B)=>{var Ce,De,ze,cT,J,Q,pe,we,Je,fe,S,F,te,e3,le,t3,Ie,Ud,w,Rm,q,n3,ae,uT,Ke,r3,Fe,s3,me,o3;Object.defineProperty(m,"__esModule",{value:!0}),m.PagesCountLimit=m.PDFPageViewBuffer=m.BaseViewer=void 0;var D=B(3),x=B(7),j=B(2),C=B(5),u=B(4),d=B(13),g=B(16),I=B(6),O=B(8),b=B(17),h=B(9),f=B(10);const y="enablePermissions",R={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function M(ee){return Object.values(D.AnnotationEditorType).includes(ee)&&ee!==D.AnnotationEditorType.DISABLE}m.PagesCountLimit=R;class z{constructor(H){He(this,ze),He(this,Ce,new Set),He(this,De,0),lt(this,De,H)}push(H){const ge=G(this,Ce);ge.has(H)&&ge.delete(H),ge.add(H),ge.size>G(this,De)&&We(this,ze,cT).call(this)}resize(H,ge=null){lt(this,De,H);const Ne=G(this,Ce);if(ge){const tt=Ne.size;let T=1;for(const de of Ne)if(ge.has(de.id)&&(Ne.delete(de),Ne.add(de)),++T>tt)break}for(;Ne.size>G(this,De);)We(this,ze,cT).call(this)}has(H){return G(this,Ce).has(H)}[Symbol.iterator](){return G(this,Ce).keys()}}Ce=new WeakMap,De=new WeakMap,ze=new WeakSet,cT=function(){const H=G(this,Ce).keys().next().value;null==H||H.destroy(),G(this,Ce).delete(H)},m.PDFPageViewBuffer=z;const Qe=class{constructor(H){var Ne,tt,T,de,Ae;if(He(this,te),He(this,le),He(this,Ie),He(this,w),He(this,q),He(this,ae),He(this,Ke),He(this,Fe),He(this,me),He(this,J,null),He(this,Q,D.AnnotationEditorType.DISABLE),He(this,pe,null),He(this,we,D.AnnotationMode.ENABLE_FORMS),He(this,Je,!1),He(this,fe,0),He(this,S,null),He(this,F,null),this.constructor===Qe)throw new Error("Cannot initialize BaseViewer.");const ge="2.16.105";if(D.version!==ge)throw new Error(`The API version "${D.version}" does not match the Viewer version "${ge}".`);if(this.container=H.container,this.viewer=H.viewer||H.container.firstElementChild,"DIV"!==(null==(Ne=this.container)?void 0:Ne.tagName.toUpperCase())||"DIV"!==(null==(tt=this.viewer)?void 0:tt.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=H.eventBus,this.linkService=H.linkService||new I.SimpleLinkService,this.downloadManager=H.downloadManager||null,this.findController=H.findController||null,this._scriptingManager=H.scriptingManager||null,this.removePageBorders=H.removePageBorders||!1,this.textLayerMode=null!=(T=H.textLayerMode)?T:x.TextLayerMode.ENABLE,lt(this,we,null!=(de=H.annotationMode)?de:D.AnnotationMode.ENABLE_FORMS),lt(this,Q,null!=(Ae=H.annotationEditorMode)?Ae:D.AnnotationEditorType.DISABLE),this.imageResourcesPath=H.imageResourcesPath||"",this.enablePrintAutoRotate=H.enablePrintAutoRotate||!1,this.renderer=H.renderer||x.RendererType.CANVAS,this.useOnlyCssZoom=H.useOnlyCssZoom||!1,this.maxCanvasPixels=H.maxCanvasPixels,this.l10n=H.l10n||u.NullL10n,lt(this,Je,H.enablePermissions||!1),this.pageColors=H.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!H.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new g.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=H.renderingQueue,this.scroll=(0,x.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=x.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(H){return this._pages[H]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(H){return null==H?void 0:H.pdfPage})}get renderForms(){return G(this,we)===D.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(H){if(!Number.isInteger(H))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(H,!0)||console.error(`currentPageNumber: "${H}" is not a valid page.`)}_setCurrentPageNumber(H,ge=!1){var tt,T;if(this._currentPageNumber===H)return ge&&We(this,ae,uT).call(this),!0;if(!(0<H&&H<=this.pagesCount))return!1;const Ne=this._currentPageNumber;return this._currentPageNumber=H,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:H,pageLabel:null!=(T=null==(tt=this._pageLabels)?void 0:tt[H-1])?T:null,previous:Ne}),ge&&We(this,ae,uT).call(this),!0}get currentPageLabel(){var H,ge;return null!=(ge=null==(H=this._pageLabels)?void 0:H[this._currentPageNumber-1])?ge:null}set currentPageLabel(H){if(!this.pdfDocument)return;let ge=0|H;if(this._pageLabels){const Ne=this._pageLabels.indexOf(H);Ne>=0&&(ge=Ne+1)}this._setCurrentPageNumber(ge,!0)||console.error(`currentPageLabel: "${H}" is not a valid page.`)}get currentScale(){return this._currentScale!==x.UNKNOWN_SCALE?this._currentScale:x.DEFAULT_SCALE}set currentScale(H){if(isNaN(H))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(H,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(H){!this.pdfDocument||this._setScale(H,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(H){if(!(0,x.isValidRotation)(H))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((H%=360)<0&&(H+=360),this._pagesRotation===H))return;this._pagesRotation=H;const ge=this._currentPageNumber,Ne={rotation:H};for(const tt of this._pages)tt.update(Ne);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:H,pageNumber:ge}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(H){var ge=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),G(this,pe)&&(G(this,pe).destroy(),lt(this,pe,null))),this.pdfDocument=H,!H)return;const Ne=H.isPureXfa,tt=H.numPages,T=H.getPage(1),de=H.getOptionalContentConfig(),Ae=G(this,Je)?H.getPermissions():Promise.resolve();if(tt>R.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const oe=this._scrollMode=x.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:oe})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:tt})},()=>{}),this._onBeforeDraw=oe=>{const xe=this._pages[oe.pageNumber-1];!xe||G(this,J).push(xe)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=oe=>{oe.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:oe.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,G(this,F)&&(document.removeEventListener("visibilitychange",G(this,F)),lt(this,F,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([T,Ae]).then(([oe,xe])=>{if(H!==this.pdfDocument)return;this._firstPageCapability.resolve(oe),this._optionalContentConfigPromise=de;const{annotationEditorMode:Xe,annotationMode:ue,textLayerMode:be}=We(this,te,e3).call(this,xe);if(Xe!==D.AnnotationEditorType.DISABLE){const xt=Xe;Ne?console.warn("Warning: XFA-editing is not implemented."):M(xt)?(lt(this,pe,new D.AnnotationEditorUIManager(this.container,this.eventBus)),xt!==D.AnnotationEditorType.NONE&&G(this,pe).updateMode(xt)):console.error(`Invalid AnnotationEditor mode: ${xt}`)}const Be=this._scrollMode===x.ScrollMode.PAGE?null:this.viewer,X=this.currentScale,V=oe.getViewport({scale:X*D.PixelsPerInch.PDF_TO_CSS_UNITS}),K=be===x.TextLayerMode.DISABLE||Ne?null:this,Me=ue!==D.AnnotationMode.DISABLE?this:null,qe=Ne?this:null,ct=G(this,pe)?this:null;for(let xt=1;xt<=tt;++xt){const Ct=new d.PDFPageView({container:Be,eventBus:this.eventBus,id:xt,scale:X,defaultViewport:V.clone(),optionalContentConfigPromise:de,renderingQueue:this.renderingQueue,textLayerFactory:K,textLayerMode:be,annotationLayerFactory:Me,annotationMode:ue,xfaLayerFactory:qe,annotationEditorLayerFactory:ct,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Ct)}const ht=this._pages[0];ht&&(ht.setPdfPage(oe),this.linkService.cachePageRef(1,oe.ref)),this._scrollMode===x.ScrollMode.PAGE?We(this,Ie,Ud).call(this):this._spreadMode!==x.SpreadMode.NONE&&this._updateSpreadMode(),We(this,le,t3).call(this).then(_(function*(){if(ge.findController&&ge.findController.setDocument(H),ge._scriptingManager&&ge._scriptingManager.setDocument(H),G(ge,pe)&&ge.eventBus.dispatch("annotationeditormodechanged",{source:ge,mode:G(ge,Q)}),H.loadingParams.disableAutoFetch||tt>R.FORCE_LAZY_PAGE_INIT)return void ge._pagesCapability.resolve();let xt=tt-1;if(xt<=0)ge._pagesCapability.resolve();else for(let Ct=2;Ct<=tt;++Ct){const Dt=H.getPage(Ct).then(Mt=>{const on=ge._pages[Ct-1];on.pdfPage||on.setPdfPage(Mt),ge.linkService.cachePageRef(Ct,Mt.ref),0==--xt&&ge._pagesCapability.resolve()},Mt=>{console.error(`Unable to get page ${Ct} to initialize viewer`,Mt),0==--xt&&ge._pagesCapability.resolve()});Ct%R.PAUSE_EAGER_PAGE_INIT==0&&(yield Dt)}})),this.eventBus.dispatch("pagesinit",{source:this}),H.getMetadata().then(({info:xt})=>{H===this.pdfDocument&&xt.Language&&(this.viewer.lang=xt.Language)}),this.defaultRenderingQueue&&this.update()}).catch(oe=>{console.error("Unable to initialize viewer",oe),this._pagesCapability.reject(oe)})}setPageLabels(H){var ge,Ne;if(this.pdfDocument){H?Array.isArray(H)&&this.pdfDocument.numPages===H.length?this._pageLabels=H:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let tt=0,T=this._pages.length;tt<T;tt++)this._pages[tt].setPageLabel(null!=(Ne=null==(ge=this._pageLabels)?void 0:ge[tt])?Ne:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=x.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,lt(this,J,new z(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,D.createPromiseCapability)(),this._onePageRenderedCapability=(0,D.createPromiseCapability)(),this._pagesCapability=(0,D.createPromiseCapability)(),this._scrollMode=x.ScrollMode.VERTICAL,this._previousScrollMode=x.ScrollMode.UNKNOWN,this._spreadMode=x.SpreadMode.NONE,lt(this,S,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),G(this,F)&&(document.removeEventListener("visibilitychange",G(this,F)),lt(this,F,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(y)}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(H,ge,Ne=!1,tt=!1){if(this._currentScaleValue=ge.toString(),We(this,q,n3).call(this,H))return void(tt&&this.eventBus.dispatch("scalechanging",{source:this,scale:H,presetValue:ge}));x.docStyle.setProperty("--scale-factor",H*D.PixelsPerInch.PDF_TO_CSS_UNITS);const T={scale:H};for(const de of this._pages)de.update(T);if(this._currentScale=H,!Ne){let Ae,de=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(de=this._location.pageNumber,Ae=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:de,destArray:Ae,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:H,presetValue:tt?ge:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==x.SpreadMode.NONE&&this._scrollMode!==x.ScrollMode.HORIZONTAL?2:1}_setScale(H,ge=!1){let Ne=parseFloat(H);if(Ne>0)this._setScaleUpdatePages(Ne,H,ge,!1);else{const tt=this._pages[this._currentPageNumber-1];if(!tt)return;let T=x.SCROLLBAR_PADDING,de=x.VERTICAL_PADDING;this.isInPresentationMode?T=de=4:this.removePageBorders?T=de=0:this._scrollMode===x.ScrollMode.HORIZONTAL&&([T,de]=[de,T]);const Ae=(this.container.clientWidth-T)/tt.width*tt.scale/this._pageWidthScaleFactor,oe=(this.container.clientHeight-de)/tt.height*tt.scale;switch(H){case"page-actual":Ne=1;break;case"page-width":Ne=Ae;break;case"page-height":Ne=oe;break;case"page-fit":Ne=Math.min(Ae,oe);break;case"auto":const xe=(0,x.isPortraitOrientation)(tt)?Ae:Math.min(oe,Ae);Ne=Math.min(x.MAX_AUTO_SCALE,xe);break;default:return void console.error(`_setScale: "${H}" is an unknown zoom value.`)}this._setScaleUpdatePages(Ne,H,ge,!0)}}pageLabelToPageNumber(H){if(!this._pageLabels)return null;const ge=this._pageLabels.indexOf(H);return ge<0?null:ge+1}scrollPageIntoView({pageNumber:H,destArray:ge=null,allowNegativeOffset:Ne=!1,ignoreDestinationZoom:tt=!1}){if(!this.pdfDocument)return;const T=Number.isInteger(H)&&this._pages[H-1];if(!T)return void console.error(`scrollPageIntoView: "${H}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!ge)return void this._setCurrentPageNumber(H,!0);let Xe,ue,de=0,Ae=0,oe=0,xe=0;const be=T.rotation%180!=0,Be=(be?T.height:T.width)/T.scale/D.PixelsPerInch.PDF_TO_CSS_UNITS,X=(be?T.width:T.height)/T.scale/D.PixelsPerInch.PDF_TO_CSS_UNITS;let V=0;switch(ge[1].name){case"XYZ":de=ge[2],Ae=ge[3],V=ge[4],de=null!==de?de:0,Ae=null!==Ae?Ae:X;break;case"Fit":case"FitB":V="page-fit";break;case"FitH":case"FitBH":Ae=ge[2],V="page-width",null===Ae&&this._location?(de=this._location.left,Ae=this._location.top):("number"!=typeof Ae||Ae<0)&&(Ae=X);break;case"FitV":case"FitBV":de=ge[2],oe=Be,xe=X,V="page-height";break;case"FitR":de=ge[2],Ae=ge[3],oe=ge[4]-de,xe=ge[5]-Ae,Xe=(this.container.clientWidth-(this.removePageBorders?0:x.SCROLLBAR_PADDING))/oe/D.PixelsPerInch.PDF_TO_CSS_UNITS,ue=(this.container.clientHeight-(this.removePageBorders?0:x.VERTICAL_PADDING))/xe/D.PixelsPerInch.PDF_TO_CSS_UNITS,V=Math.min(Math.abs(Xe),Math.abs(ue));break;default:return void console.error(`scrollPageIntoView: "${ge[1].name}" is not a valid destination type.`)}if(tt||(V&&V!==this._currentScale?this.currentScaleValue=V:this._currentScale===x.UNKNOWN_SCALE&&(this.currentScaleValue=x.DEFAULT_SCALE_VALUE)),"page-fit"===V&&!ge[4])return void We(this,w,Rm).call(this,T);const K=[T.viewport.convertToViewportPoint(de,Ae),T.viewport.convertToViewportPoint(de+oe,Ae+xe)];let Me=Math.min(K[0][0],K[1][0]),qe=Math.min(K[0][1],K[1][1]);Ne||(Me=Math.max(Me,0),qe=Math.max(qe,0)),We(this,w,Rm).call(this,T,{left:Me,top:qe})}_updateLocation(H){const ge=this._currentScale,Ne=this._currentScaleValue,tt=parseFloat(Ne)===ge?Math.round(1e4*ge)/100:Ne,T=H.id,Ae=this.container,oe=this._pages[T-1].getPagePoint(Ae.scrollLeft-H.x,Ae.scrollTop-H.y),xe=Math.round(oe[0]),Xe=Math.round(oe[1]);let ue=`#page=${T}`;this.isInPresentationMode||(ue+=`&zoom=${tt},${xe},${Xe}`),this._location={pageNumber:T,scale:tt,top:Xe,left:xe,rotation:this._pagesRotation,pdfOpenParams:ue}}update(){const H=this._getVisiblePages(),ge=H.views,Ne=ge.length;if(0===Ne)return;const tt=Math.max(10,2*Ne+1);G(this,J).resize(tt,H.ids),this.renderingQueue.renderHighestPriority(H);const T=this._spreadMode===x.SpreadMode.NONE&&(this._scrollMode===x.ScrollMode.PAGE||this._scrollMode===x.ScrollMode.VERTICAL),de=this._currentPageNumber;let Ae=!1;for(const oe of ge){if(oe.percent<100)break;if(oe.id===de&&T){Ae=!0;break}}this._setCurrentPageNumber(Ae?de:ge[0].id),this._updateLocation(H.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(H){return this.container.contains(H)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===x.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===x.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const H=this._scrollMode===x.ScrollMode.PAGE?G(this,S).pages:this._pages,ge=this._scrollMode===x.ScrollMode.HORIZONTAL;return(0,x.getVisibleElements)({scrollEl:this.container,views:H,sortByVisibility:!0,horizontal:ge,rtl:ge&&this._isContainerRtl})}isPageVisible(H){return!!this.pdfDocument&&(Number.isInteger(H)&&H>0&&H<=this.pagesCount?this._getVisiblePages().ids.has(H):(console.error(`isPageVisible: "${H}" is not a valid page.`),!1))}isPageCached(H){if(!this.pdfDocument)return!1;if(!(Number.isInteger(H)&&H>0&&H<=this.pagesCount))return console.error(`isPageCached: "${H}" is not a valid page.`),!1;const ge=this._pages[H-1];return G(this,J).has(ge)}cleanup(){for(const H of this._pages)H.renderingState!==x.RenderingStates.FINISHED&&H.reset()}_cancelRendering(){for(const H of this._pages)H.cancelRendering()}forceRendering(H){const ge=H||this._getVisiblePages(),Ne=We(this,Fe,s3).call(this,ge),T=this.renderingQueue.getHighestPriority(ge,this._pages,Ne,this._spreadMode!==x.SpreadMode.NONE&&this._scrollMode!==x.ScrollMode.HORIZONTAL);return We(this,me,o3).call(this,ge.ids),!!T&&(We(this,Ke,r3).call(this,T).then(()=>{this.renderingQueue.renderView(T)}),!0)}createTextLayerBuilder({textLayerDiv:H,pageIndex:ge,viewport:Ne,enhanceTextSelection:tt=!1,eventBus:T,highlighter:de,accessibilityManager:Ae=null}){return new h.TextLayerBuilder({textLayerDiv:H,eventBus:T,pageIndex:ge,viewport:Ne,enhanceTextSelection:!this.isInPresentationMode&&tt,highlighter:de,accessibilityManager:Ae})}createTextHighlighter({pageIndex:H,eventBus:ge}){return new b.TextHighlighter({eventBus:ge,pageIndex:H,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:H,pdfPage:ge,annotationStorage:Ne=(Be=>null==(Be=this.pdfDocument)?void 0:Be.annotationStorage)(),imageResourcesPath:tt="",renderForms:T=!0,l10n:de=u.NullL10n,enableScripting:Ae=this.enableScripting,hasJSActionsPromise:oe=(X=>null==(X=this.pdfDocument)?void 0:X.hasJSActions())(),mouseState:xe=(V=>null==(V=this._scriptingManager)?void 0:V.mouseState)(),fieldObjectsPromise:Xe=(K=>null==(K=this.pdfDocument)?void 0:K.getFieldObjects())(),annotationCanvasMap:ue=null,accessibilityManager:be=null}){return new C.AnnotationLayerBuilder({pageDiv:H,pdfPage:ge,annotationStorage:Ne,imageResourcesPath:tt,renderForms:T,linkService:this.linkService,downloadManager:this.downloadManager,l10n:de,enableScripting:Ae,hasJSActionsPromise:oe,mouseState:xe,fieldObjectsPromise:Xe,annotationCanvasMap:ue,accessibilityManager:be})}createAnnotationEditorLayerBuilder({uiManager:H=G(this,pe),pageDiv:ge,pdfPage:Ne,accessibilityManager:tt=null,l10n:T,annotationStorage:de=(Ae=>null==(Ae=this.pdfDocument)?void 0:Ae.annotationStorage)()}){return new j.AnnotationEditorLayerBuilder({uiManager:H,pageDiv:ge,pdfPage:Ne,annotationStorage:de,accessibilityManager:tt,l10n:T})}createXfaLayerBuilder({pageDiv:H,pdfPage:ge,annotationStorage:Ne=(tt=>null==(tt=this.pdfDocument)?void 0:tt.annotationStorage)()}){return new f.XfaLayerBuilder({pageDiv:H,pdfPage:ge,annotationStorage:Ne,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:H}){return new O.StructTreeLayerBuilder({pdfPage:H})}get hasEqualPageSizes(){const H=this._pages[0];for(let ge=1,Ne=this._pages.length;ge<Ne;++ge){const tt=this._pages[ge];if(tt.width!==H.width||tt.height!==H.height)return!1}return!0}getPagesOverview(){return this._pages.map(H=>{const ge=H.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,x.isPortraitOrientation)(ge)?{width:ge.width,height:ge.height,rotation:ge.rotation}:{width:ge.height,height:ge.width,rotation:(ge.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(H){if(!(H instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${H}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=H;const ge={optionalContentConfigPromise:H};for(const Ne of this._pages)Ne.update(ge);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:H})}get scrollMode(){return this._scrollMode}set scrollMode(H){if(this._scrollMode!==H){if(!(0,x.isValidScrollMode)(H))throw new Error(`Invalid scroll mode: ${H}`);this.pagesCount>R.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=H,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:H}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(H=null){const ge=this._scrollMode,Ne=this.viewer;Ne.classList.toggle("scrollHorizontal",ge===x.ScrollMode.HORIZONTAL),Ne.classList.toggle("scrollWrapped",ge===x.ScrollMode.WRAPPED),this.pdfDocument&&H&&(ge===x.ScrollMode.PAGE?We(this,Ie,Ud).call(this):this._previousScrollMode===x.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(H,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(H){if(this._spreadMode!==H){if(!(0,x.isValidSpreadMode)(H))throw new Error(`Invalid spread mode: ${H}`);this._spreadMode=H,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:H}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(H=null){if(!this.pdfDocument)return;const ge=this.viewer,Ne=this._pages;if(this._scrollMode===x.ScrollMode.PAGE)We(this,Ie,Ud).call(this);else if(ge.textContent="",this._spreadMode===x.SpreadMode.NONE)for(const tt of this._pages)ge.append(tt.div);else{const tt=this._spreadMode-1;let T=null;for(let de=0,Ae=Ne.length;de<Ae;++de)null===T?(T=document.createElement("div"),T.className="spread",ge.append(T)):de%2===tt&&(T=T.cloneNode(!1),ge.append(T)),T.append(Ne[de].div)}!H||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(H,!0),this.update())}_getPageAdvance(H,ge=!1){switch(this._scrollMode){case x.ScrollMode.WRAPPED:{const{views:Ne}=this._getVisiblePages(),tt=new Map;for(const{id:T,y:de,percent:Ae,widthPercent:oe}of Ne){if(0===Ae||oe<100)continue;let xe=tt.get(de);xe||tt.set(de,xe||(xe=[])),xe.push(T)}for(const T of tt.values()){const de=T.indexOf(H);if(-1===de)continue;const Ae=T.length;if(1===Ae)break;if(ge)for(let oe=de-1,xe=0;oe>=xe;oe--){const ue=T[oe+1]-1;if(T[oe]<ue)return H-ue}else for(let oe=de+1,xe=Ae;oe<xe;oe++){const ue=T[oe-1]+1;if(T[oe]>ue)return ue-H}if(ge){const oe=T[0];if(oe<H)return H-oe+1}else{const oe=T[Ae-1];if(oe>H)return oe-H+1}break}break}case x.ScrollMode.HORIZONTAL:break;case x.ScrollMode.PAGE:case x.ScrollMode.VERTICAL:{if(this._spreadMode===x.SpreadMode.NONE)break;const Ne=this._spreadMode-1;if(ge&&H%2!==Ne)break;if(!ge&&H%2===Ne)break;const{views:tt}=this._getVisiblePages(),T=ge?H-1:H+1;for(const{id:de,percent:Ae,widthPercent:oe}of tt)if(de===T){if(Ae>0&&100===oe)return 2;break}break}}return 1}nextPage(){const H=this._currentPageNumber,ge=this.pagesCount;if(H>=ge)return!1;const Ne=this._getPageAdvance(H,!1)||1;return this.currentPageNumber=Math.min(H+Ne,ge),!0}previousPage(){const H=this._currentPageNumber;if(H<=1)return!1;const ge=this._getPageAdvance(H,!0)||1;return this.currentPageNumber=Math.max(H-ge,1),!0}increaseScale(H=1){let ge=this._currentScale;do{ge=(ge*x.DEFAULT_SCALE_DELTA).toFixed(2),ge=Math.ceil(10*ge)/10,ge=Math.min(x.MAX_SCALE,ge)}while(--H>0&&ge<x.MAX_SCALE);this.currentScaleValue=ge}decreaseScale(H=1){let ge=this._currentScale;do{ge=(ge/x.DEFAULT_SCALE_DELTA).toFixed(2),ge=Math.floor(10*ge)/10,ge=Math.max(x.MIN_SCALE,ge)}while(--H>0&&ge>x.MIN_SCALE);this.currentScaleValue=ge}updateContainerHeightCss(){const H=this.container.clientHeight;H!==G(this,fe)&&(lt(this,fe,H),x.docStyle.setProperty("--viewer-container-height",`${H}px`))}get annotationEditorMode(){return G(this,pe)?G(this,Q):D.AnnotationEditorType.DISABLE}set annotationEditorMode(H){if(!G(this,pe))throw new Error("The AnnotationEditor is not enabled.");if(G(this,Q)!==H){if(!M(H))throw new Error(`Invalid AnnotationEditor mode: ${H}`);!this.pdfDocument||(lt(this,Q,H),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:H}),G(this,pe).updateMode(H))}}set annotationEditorParams({type:H,value:ge}){if(!G(this,pe))throw new Error("The AnnotationEditor is not enabled.");G(this,pe).updateParams(H,ge)}refresh(){if(!this.pdfDocument)return;const H={};for(const ge of this._pages)ge.update(H);this.update()}};let ye=Qe;J=new WeakMap,Q=new WeakMap,pe=new WeakMap,we=new WeakMap,Je=new WeakMap,fe=new WeakMap,S=new WeakMap,F=new WeakMap,te=new WeakSet,e3=function(H){const ge={annotationEditorMode:G(this,Q),annotationMode:G(this,we),textLayerMode:this.textLayerMode};return H&&(H.includes(D.PermissionFlag.COPY)||this.viewer.classList.add(y),H.includes(D.PermissionFlag.MODIFY_CONTENTS)||(ge.annotationEditorMode=D.AnnotationEditorType.DISABLE),!H.includes(D.PermissionFlag.MODIFY_ANNOTATIONS)&&!H.includes(D.PermissionFlag.FILL_INTERACTIVE_FORMS)&&G(this,we)===D.AnnotationMode.ENABLE_FORMS&&(ge.annotationMode=D.AnnotationMode.ENABLE)),ge},le=new WeakSet,t3=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const H=new Promise(ge=>{lt(this,F,()=>{"hidden"===document.visibilityState&&(ge(),document.removeEventListener("visibilitychange",G(this,F)),lt(this,F,null))}),document.addEventListener("visibilitychange",G(this,F))});return Promise.race([this._onePageRenderedCapability.promise,H])},Ie=new WeakSet,Ud=function(){if(this._scrollMode!==x.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const H=this._currentPageNumber,ge=G(this,S),Ne=this.viewer;if(Ne.textContent="",ge.pages.length=0,this._spreadMode!==x.SpreadMode.NONE||this.isInPresentationMode){const tt=new Set,T=this._spreadMode-1;-1===T?tt.add(H-1):H%2!==T?(tt.add(H-1),tt.add(H)):(tt.add(H-2),tt.add(H-1));const de=document.createElement("div");if(de.className="spread",this.isInPresentationMode){const Ae=document.createElement("div");Ae.className="dummyPage",de.append(Ae)}for(const Ae of tt){const oe=this._pages[Ae];!oe||(de.append(oe.div),ge.pages.push(oe))}Ne.append(de)}else{const tt=this._pages[H-1];Ne.append(tt.div),ge.pages.push(tt)}ge.scrollDown=H>=ge.previousPageNumber,ge.previousPageNumber=H},w=new WeakSet,Rm=function(H,ge=null){const{div:Ne,id:tt}=H;if(this._scrollMode===x.ScrollMode.PAGE&&(this._setCurrentPageNumber(tt),We(this,Ie,Ud).call(this),this.update()),!ge&&!this.isInPresentationMode){const T=Ne.offsetLeft+Ne.clientLeft,de=T+Ne.clientWidth,{scrollLeft:Ae,clientWidth:oe}=this.container;(this._scrollMode===x.ScrollMode.HORIZONTAL||T<Ae||de>Ae+oe)&&(ge={left:0,top:0})}(0,x.scrollIntoView)(Ne,ge)},q=new WeakSet,n3=function(H){return H===this._currentScale||Math.abs(H-this._currentScale)<1e-15},ae=new WeakSet,uT=function(){const H=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),We(this,w,Rm).call(this,H)},Ke=new WeakSet,r3=function(H){var ge=this;return _(function*(){var Ne,tt;if(H.pdfPage)return H.pdfPage;try{const T=yield ge.pdfDocument.getPage(H.id);return H.pdfPage||H.setPdfPage(T),(null==(tt=(Ne=ge.linkService)._cachedPageNumber)?void 0:tt.call(Ne,T.ref))||ge.linkService.cachePageRef(H.id,T.ref),T}catch(T){return console.error("Unable to get page for page view",T),null}})()},Fe=new WeakSet,s3=function(H){var ge,Ne;if(1===(null==(ge=H.first)?void 0:ge.id))return!0;if((null==(Ne=H.last)?void 0:Ne.id)===this.pagesCount)return!1;switch(this._scrollMode){case x.ScrollMode.PAGE:return G(this,S).scrollDown;case x.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},me=new WeakSet,o3=function(H){for(const ge of H){const Ne=this._pages[ge-1];null==Ne||Ne.toggleLoadingIconSpinner(!0)}for(const ge of G(this,J))H.has(ge.id)||ge.toggleLoadingIconSpinner(!1)},m.BaseViewer=ye},(re,m,B)=>{var I,O;Object.defineProperty(m,"__esModule",{value:!0}),m.PDFPageView=void 0;var D=B(3),x=B(7),j=B(14),C=B(4),u=B(15);const d=j.compatibilityParams.maxCanvasPixels||16777216;I=new WeakMap,O=new WeakMap,m.PDFPageView=class g{constructor(h){var R,M,z,ye;He(this,I,D.AnnotationMode.ENABLE_FORMS),He(this,O,{initialOptionalContent:!0,regularAnnotations:!0});const f=h.container,E=h.defaultViewport;this.id=h.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=h.scale||x.DEFAULT_SCALE,this.viewport=E,this.pdfPageRotate=E.rotation,this._optionalContentConfigPromise=h.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!=(R=h.textLayerMode)?R:x.TextLayerMode.ENABLE,lt(this,I,null!=(M=h.annotationMode)?M:D.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=h.imageResourcesPath||"",this.useOnlyCssZoom=h.useOnlyCssZoom||!1,this.maxCanvasPixels=h.maxCanvasPixels||d,this.pageColors=h.pageColors||null,this.eventBus=h.eventBus,this.renderingQueue=h.renderingQueue,this.textLayerFactory=h.textLayerFactory,this.annotationLayerFactory=h.annotationLayerFactory,this.annotationEditorLayerFactory=h.annotationEditorLayerFactory,this.xfaLayerFactory=h.xfaLayerFactory,this.textHighlighter=null==(z=h.textHighlighterFactory)?void 0:z.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=h.structTreeLayerFactory,this.renderer=h.renderer||x.RendererType.CANVAS,this.l10n=h.l10n||C.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=x.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null==(ye=this.renderingQueue)?void 0:ye.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const y=document.createElement("div");if(y.className="page",y.style.width=Math.floor(this.viewport.width)+"px",y.style.height=Math.floor(this.viewport.height)+"px",y.setAttribute("data-page-number",this.id),y.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Ce=>{y.setAttribute("aria-label",Ce)}),this.div=y,null==f||f.append(y),this._isStandalone){const{optionalContentConfigPromise:Ce}=h;Ce&&Ce.then(De=>{Ce===this._optionalContentConfigPromise&&(G(this,O).initialOptionalContent=De.hasInitialVisibility)})}}setPdfPage(h){this.pdfPage=h,this.pdfPageRotate=h.rotate,this.viewport=h.getViewport({scale:this.scale*D.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var h=this;return _(function*(){let f=null;try{yield h.annotationLayer.render(h.viewport,"display")}catch(E){console.error(`_renderAnnotationLayer: "${E}".`),f=E}finally{h.eventBus.dispatch("annotationlayerrendered",{source:h,pageNumber:h.id,error:f})}})()}_renderAnnotationEditorLayer(){var h=this;return _(function*(){let f=null;try{yield h.annotationEditorLayer.render(h.viewport,"display")}catch(E){console.error(`_renderAnnotationEditorLayer: "${E}".`),f=E}finally{h.eventBus.dispatch("annotationeditorlayerrendered",{source:h,pageNumber:h.id,error:f})}})()}_renderXfaLayer(){var h=this;return _(function*(){let f=null;try{const E=yield h.xfaLayer.render(h.viewport,"display");h.textHighlighter&&h._buildXfaTextContentItems(E.textDivs)}catch(E){console.error(`_renderXfaLayer: "${E}".`),f=E}finally{h.eventBus.dispatch("xfalayerrendered",{source:h,pageNumber:h.id,error:f})}})()}_buildXfaTextContentItems(h){var f=this;return _(function*(){const E=yield f.pdfPage.getTextContent(),y=[];for(const R of E.items)y.push(R.str);f.textHighlighter.setTextMapping(h,y),f.textHighlighter.enable()})()}_resetZoomLayer(h=!1){if(!this.zoomLayer)return;const f=this.zoomLayer.firstChild;this.paintedViewportMap.delete(f),f.width=0,f.height=0,h&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:h=!1,keepAnnotationLayer:f=!1,keepAnnotationEditorLayer:E=!1,keepXfaLayer:y=!1}={}){var ze,Oe,J,Q;this.cancelRendering({keepAnnotationLayer:f,keepAnnotationEditorLayer:E,keepXfaLayer:y}),this.renderingState=x.RenderingStates.INITIAL;const R=this.div;R.style.width=Math.floor(this.viewport.width)+"px",R.style.height=Math.floor(this.viewport.height)+"px";const M=R.childNodes,z=h&&this.zoomLayer||null,ye=f&&(null==(ze=this.annotationLayer)?void 0:ze.div)||null,Ce=E&&(null==(Oe=this.annotationEditorLayer)?void 0:Oe.div)||null,De=y&&(null==(J=this.xfaLayer)?void 0:J.div)||null;for(let pe=M.length-1;pe>=0;pe--){const we=M[pe];switch(we){case z:case ye:case Ce:case De:continue}we.remove()}R.removeAttribute("data-loaded"),ye&&this.annotationLayer.hide(),Ce?this.annotationEditorLayer.hide():null==(Q=this.annotationEditorLayer)||Q.destroy(),De&&this.xfaLayer.hide(),z||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(pe=>{var we;null==(we=this.loadingIconDiv)||we.setAttribute("aria-label",pe)}),R.append(this.loadingIconDiv)}update({scale:h=0,rotation:f=null,optionalContentConfigPromise:E=null}){if(this.scale=h||this.scale,"number"==typeof f&&(this.rotation=f),E instanceof Promise&&(this._optionalContentConfigPromise=E,E.then(M=>{E===this._optionalContentConfigPromise&&(G(this,O).initialOptionalContent=M.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*D.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&x.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let R=!1;if(this.canvas&&this.maxCanvasPixels>0){const M=this.outputScale;(Math.floor(this.viewport.width)*M.sx|0)*(Math.floor(this.viewport.height)*M.sy|0)>this.maxCanvasPixels&&(R=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&R)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:h=!1,keepAnnotationEditorLayer:f=!1,keepXfaLayer:E=!1}={}){var y;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!h||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!f||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!E||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,null==(y=this.textHighlighter)||y.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:h,redrawAnnotationLayer:f=!1,redrawAnnotationEditorLayer:E=!1,redrawXfaLayer:y=!1}){const R=this.viewport.width,M=this.viewport.height,z=this.div;h.style.width=h.parentNode.style.width=z.style.width=Math.floor(R)+"px",h.style.height=h.parentNode.style.height=z.style.height=Math.floor(M)+"px";const ye=this.viewport.rotation-this.paintedViewportMap.get(h).rotation,Ce=Math.abs(ye);let De=1,ze=1;if((90===Ce||270===Ce)&&(De=M/R,ze=R/M),h.style.transform=`rotate(${ye}deg) scale(${De}, ${ze})`,this.textLayer){const Oe=this.textLayer.viewport,Q=Math.abs(this.viewport.rotation-Oe.rotation);let pe=R/Oe.width;(90===Q||270===Q)&&(pe=R/Oe.height);const we=this.textLayer.textLayerDiv;let Je,fe;switch(Q){case 0:Je=fe=0;break;case 90:Je=0,fe="-"+we.style.height;break;case 180:Je="-"+we.style.width,fe="-"+we.style.height;break;case 270:Je="-"+we.style.width,fe=0;break;default:console.error("Bad rotation value.")}we.style.transform=`rotate(${Q}deg) scale(${pe}) translate(${Je}, ${fe})`,we.style.transformOrigin="0% 0%"}f&&this.annotationLayer&&this._renderAnnotationLayer(),E&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),y&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(h,f){return this.viewport.convertToPdfPoint(h,f)}toggleLoadingIconSpinner(h=!1){var f;null==(f=this.loadingIconDiv)||f.classList.toggle("notVisible",!h)}draw(){var ze,Oe,J,h=this;this.renderingState!==x.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:f,pdfPage:E}=this;if(!E)return this.renderingState=x.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=x.RenderingStates.RUNNING;const y=document.createElement("div");y.style.width=f.style.width,y.style.height=f.style.height,y.classList.add("canvasWrapper");const R=(null==(ze=this.annotationLayer)?void 0:ze.div)||(null==(Oe=this.annotationEditorLayer)?void 0:Oe.div);R?R.before(y):f.append(y);let M=null;if(this.textLayerMode!==x.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||(this._accessibilityManager=new u.TextAccessibilityManager);const Q=document.createElement("div");Q.className="textLayer",Q.style.width=y.style.width,Q.style.height=y.style.height,R?R.before(Q):f.append(Q),M=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:Q,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===x.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=M,G(this,I)!==D.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:f,pdfPage:E,imageResourcesPath:this.imageResourcesPath,renderForms:G(this,I)===D.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}))),(null==(J=this.xfaLayer)?void 0:J.div)&&f.append(this.xfaLayer.div);let z=null;this.renderingQueue&&(z=Q=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=x.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=x.RenderingStates.RUNNING,Q()});Q()});const ye=function(){var Q=_(function*(pe=null){if(Ce===h.paintTask&&(h.paintTask=null),pe instanceof D.RenderingCancelledException)h._renderError=null;else if(h._renderError=pe,h.renderingState=x.RenderingStates.FINISHED,h.loadingIconDiv&&(h.loadingIconDiv.remove(),delete h.loadingIconDiv),h._resetZoomLayer(!0),G(h,O).regularAnnotations=!Ce.separateAnnots,h.eventBus.dispatch("pagerendered",{source:h,pageNumber:h.id,cssTransform:!1,timestamp:performance.now(),error:h._renderError}),pe)throw pe});return function(){return Q.apply(this,arguments)}}(),Ce=this.renderer===x.RendererType.SVG?this.paintOnSvg(y):this.paintOnCanvas(y);Ce.onRenderContinue=z,this.paintTask=Ce;const De=Ce.promise.then(()=>ye(null).then(()=>{if(M){const Q=E.streamTextContent({includeMarkedContent:!0});M.setTextContentStream(Q),M.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||(this.annotationEditorLayer=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:f,pdfPage:E,l10n:this.l10n,accessibilityManager:this._accessibilityManager})),this._renderAnnotationEditorLayer())})}),function(Q){return ye(Q)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:f,pdfPage:E})),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=Q=>{Q.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(pe=>{if(!pe||!this.canvas)return;const we=this.structTreeLayer.render(pe);we.classList.add("structTree"),this.canvas.append(we)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:E})),f.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),De}paintOnCanvas(h){const f=(0,D.createPromiseCapability)(),E={promise:f.promise,onRenderContinue(pe){pe()},cancel(){Q.cancel()},get separateAnnots(){return Q.separateAnnots}},y=this.viewport,R=document.createElement("canvas");R.setAttribute("role","presentation"),R.hidden=!0;let M=!0;const z=function(){M&&(R.hidden=!1,M=!1)};h.append(R),this.canvas=R;const ye=R.getContext("2d",{alpha:!1}),Ce=this.outputScale=new x.OutputScale;if(this.useOnlyCssZoom){const pe=y.clone({scale:D.PixelsPerInch.PDF_TO_CSS_UNITS});Ce.sx*=pe.width/y.width,Ce.sy*=pe.height/y.height}if(this.maxCanvasPixels>0){const we=Math.sqrt(this.maxCanvasPixels/(y.width*y.height));Ce.sx>we||Ce.sy>we?(Ce.sx=we,Ce.sy=we,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const De=(0,x.approximateFraction)(Ce.sx),ze=(0,x.approximateFraction)(Ce.sy);R.width=(0,x.roundToDivide)(y.width*Ce.sx,De[0]),R.height=(0,x.roundToDivide)(y.height*Ce.sy,ze[0]),R.style.width=(0,x.roundToDivide)(y.width,De[1])+"px",R.style.height=(0,x.roundToDivide)(y.height,ze[1])+"px",this.paintedViewportMap.set(R,y);const J={canvasContext:ye,transform:Ce.scaled?[Ce.sx,0,0,Ce.sy,0,0]:null,viewport:this.viewport,annotationMode:G(this,I),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},Q=this.pdfPage.render(J);return Q.onContinue=function(pe){z(),E.onRenderContinue?E.onRenderContinue(pe):pe()},Q.promise.then(function(){z(),f.resolve()},function(pe){z(),f.reject(pe)}),E}paintOnSvg(h){let f=!1;const E=()=>{if(f)throw new D.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},y=this.pdfPage,R=this.viewport.clone({scale:D.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:y.getOperatorList({annotationMode:G(this,I)}).then(z=>(E(),new D.SVGGraphics(y.commonObjs,y.objs).getSVG(z,R).then(Ce=>{E(),this.svg=Ce,this.paintedViewportMap.set(Ce,R),Ce.style.width=h.style.width,Ce.style.height=h.style.height,this.renderingState=x.RenderingStates.FINISHED,h.append(Ce)}))),onRenderContinue(z){z()},cancel(){f=!0},get separateAnnots(){return!1}}}setPageLabel(h){this.pageLabel="string"==typeof h?h:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:h,regularAnnotations:f}=G(this,O);return h&&f?this.canvas:null}}},(re,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.compatibilityParams=m.OptionKind=m.AppOptions=void 0;const B=Object.create(null);m.compatibilityParams=B;{const u=navigator.userAgent||"",d=navigator.platform||"",g=navigator.maxTouchPoints||1,I=/Android/.test(u);(/\b(iPad|iPhone|iPod)(?=;)/.test(u)||"MacIntel"===d&&g>1||I)&&(B.maxCanvasPixels=5242880)}const D={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};m.OptionKind=D;const x={annotationEditorMode:{value:-1,kind:D.VIEWER+D.PREFERENCE},annotationMode:{value:2,kind:D.VIEWER+D.PREFERENCE},cursorToolOnLoad:{value:0,kind:D.VIEWER+D.PREFERENCE},defaultZoomValue:{value:"",kind:D.VIEWER+D.PREFERENCE},disableHistory:{value:!1,kind:D.VIEWER},disablePageLabels:{value:!1,kind:D.VIEWER+D.PREFERENCE},enablePermissions:{value:!1,kind:D.VIEWER+D.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:D.VIEWER+D.PREFERENCE},enableScripting:{value:!0,kind:D.VIEWER+D.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:D.VIEWER},externalLinkTarget:{value:0,kind:D.VIEWER+D.PREFERENCE},historyUpdateUrl:{value:!1,kind:D.VIEWER+D.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:D.VIEWER+D.PREFERENCE},imageResourcesPath:{value:"./images/",kind:D.VIEWER},maxCanvasPixels:{value:16777216,kind:D.VIEWER},forcePageColors:{value:!1,kind:D.VIEWER+D.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:D.VIEWER+D.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:D.VIEWER+D.PREFERENCE},pdfBugEnabled:{value:!1,kind:D.VIEWER+D.PREFERENCE},printResolution:{value:150,kind:D.VIEWER},sidebarViewOnLoad:{value:-1,kind:D.VIEWER+D.PREFERENCE},scrollModeOnLoad:{value:-1,kind:D.VIEWER+D.PREFERENCE},spreadModeOnLoad:{value:-1,kind:D.VIEWER+D.PREFERENCE},textLayerMode:{value:1,kind:D.VIEWER+D.PREFERENCE},useOnlyCssZoom:{value:!1,kind:D.VIEWER+D.PREFERENCE},viewerCssTheme:{value:0,kind:D.VIEWER+D.PREFERENCE},viewOnLoad:{value:0,kind:D.VIEWER+D.PREFERENCE},cMapPacked:{value:!0,kind:D.API},cMapUrl:{value:"../web/cmaps/",kind:D.API},disableAutoFetch:{value:!1,kind:D.API+D.PREFERENCE},disableFontFace:{value:!1,kind:D.API+D.PREFERENCE},disableRange:{value:!1,kind:D.API+D.PREFERENCE},disableStream:{value:!1,kind:D.API+D.PREFERENCE},docBaseUrl:{value:"",kind:D.API},enableXfa:{value:!0,kind:D.API+D.PREFERENCE},fontExtraProperties:{value:!1,kind:D.API},isEvalSupported:{value:!0,kind:D.API},maxImageSize:{value:-1,kind:D.API},pdfBug:{value:!1,kind:D.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:D.API},verbosity:{value:1,kind:D.API},workerPort:{value:null,kind:D.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:D.WORKER}};x.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:D.VIEWER},x.disablePreferences={value:!1,kind:D.VIEWER},x.locale={value:navigator.language||"en-US",kind:D.VIEWER},x.renderer={value:"canvas",kind:D.VIEWER+D.PREFERENCE},x.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:D.VIEWER};const j=Object.create(null);m.AppOptions=class C{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(d){var O;const g=j[d];if(void 0!==g)return g;const I=x[d];return void 0!==I?null!=(O=B[d])?O:I.value:void 0}static getAll(d=null){var I;const g=Object.create(null);for(const O in x){const b=x[O];if(d){if(0==(d&b.kind))continue;if(d===D.PREFERENCE){const f=b.value,E=typeof f;if("boolean"===E||"string"===E||"number"===E&&Number.isInteger(f)){g[O]=f;continue}throw new Error(`Invalid type for preference: ${O}`)}}const h=j[O];g[O]=void 0!==h?h:null!=(I=B[O])?I:b.value}return g}static set(d,g){j[d]=g}static setAll(d){for(const g in d)j[g]=d[g]}static remove(d){delete j[d]}static _hasUserOptions(){return Object.keys(j).length>0}}},(re,m,B)=>{var j,C,u,d,g,Om,O,dT;Object.defineProperty(m,"__esModule",{value:!0}),m.TextAccessibilityManager=void 0;var D=B(7);const h=class{constructor(){He(this,O),He(this,j,!1),He(this,C,null),He(this,u,new Map),He(this,d,new Map)}setTextMapping(E){lt(this,C,E)}enable(){if(G(this,j))throw new Error("TextAccessibilityManager is already enabled.");if(!G(this,C))throw new Error("Text divs and strings have not been set.");if(lt(this,j,!0),lt(this,C,G(this,C).slice()),G(this,C).sort(We(h,g,Om)),G(this,u).size>0){const E=G(this,C);for(const[y,R]of G(this,u))document.getElementById(y)?We(this,O,dT).call(this,y,E[R]):G(this,u).delete(y)}for(const[E,y]of G(this,d))this.addPointerInTextLayer(E,y);G(this,d).clear()}disable(){!G(this,j)||(G(this,d).clear(),lt(this,C,null),lt(this,j,!1))}removePointerInTextLayer(E){if(!G(this,j))return void G(this,d).delete(E);const y=G(this,C);if(!y||0===y.length)return;const{id:R}=E,M=G(this,u).get(R);if(void 0===M)return;const z=y[M];G(this,u).delete(R);let ye=z.getAttribute("aria-owns");(null==ye?void 0:ye.includes(R))&&(ye=ye.split(" ").filter(Ce=>Ce!==R).join(" "),ye?z.setAttribute("aria-owns",ye):(z.removeAttribute("aria-owns"),z.setAttribute("role","presentation")))}addPointerInTextLayer(E,y){const{id:R}=E;if(!R)return;if(!G(this,j))return void G(this,d).set(E,y);y&&this.removePointerInTextLayer(E);const M=G(this,C);if(!M||0===M.length)return;const z=(0,D.binarySearchFirstItem)(M,Ce=>{var De;return We(De=h,g,Om).call(De,E,Ce)<0}),ye=Math.max(0,z-1);We(this,O,dT).call(this,R,M[ye]),G(this,u).set(R,ye)}moveElementInDOM(E,y,R,M){if(this.addPointerInTextLayer(R,M),!E.hasChildNodes())return void E.append(y);const z=Array.from(E.childNodes).filter(De=>De!==y);if(0===z.length)return;const ye=R||y,Ce=(0,D.binarySearchFirstItem)(z,De=>{var ze;return We(ze=h,g,Om).call(ze,ye,De)<0});0===Ce?z[0].before(y):z[Ce-1].after(y)}};let x=h;j=new WeakMap,C=new WeakMap,u=new WeakMap,d=new WeakMap,g=new WeakSet,Om=function(E,y){const R=E.getBoundingClientRect(),M=y.getBoundingClientRect();if(0===R.width&&0===R.height)return 1;if(0===M.width&&0===M.height)return-1;const Ce=R.y+R.height/2,Oe=M.y+M.height/2;return Ce<=M.y&&Oe>=R.y+R.height?-1:Oe<=R.y&&Ce>=M.y+M.height?1:R.x+R.width/2-(M.x+M.width/2)},O=new WeakSet,dT=function(E,y){const R=y.getAttribute("aria-owns");(null==R?void 0:R.includes(E))||y.setAttribute("aria-owns",R?`${R} ${E}`:E),y.removeAttribute("role")},He(x,g),m.TextAccessibilityManager=x},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFRenderingQueue=void 0;var D=B(3),x=B(7);m.PDFRenderingQueue=class C{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(d){this.pdfViewer=d}setThumbnailViewer(d){this.pdfThumbnailViewer=d}isHighestPriority(d){return this.highestPriorityPage===d.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(d){var g;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(d)&&(this.isThumbnailViewEnabled&&(null==(g=this.pdfThumbnailViewer)?void 0:g.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(d,g,I,O=!1){const b=d.views,h=b.length;if(0===h)return null;for(let M=0;M<h;M++){const z=b[M].view;if(!this.isViewFinished(z))return z}const f=d.first.id,E=d.last.id;if(E-f+1>h){const M=d.ids;for(let z=1,ye=E-f;z<ye;z++){const Ce=I?f+z:E-z;if(M.has(Ce))continue;const De=g[Ce-1];if(!this.isViewFinished(De))return De}}let y=I?E:f-2,R=g[y];return R&&!this.isViewFinished(R)||O&&(y+=I?1:-1,R=g[y],R&&!this.isViewFinished(R))?R:null}isViewFinished(d){return d.renderingState===x.RenderingStates.FINISHED}renderView(d){switch(d.renderingState){case x.RenderingStates.FINISHED:return!1;case x.RenderingStates.PAUSED:this.highestPriorityPage=d.renderingId,d.resume();break;case x.RenderingStates.RUNNING:this.highestPriorityPage=d.renderingId;break;case x.RenderingStates.INITIAL:this.highestPriorityPage=d.renderingId,d.draw().finally(()=>{this.renderHighestPriority()}).catch(g=>{g instanceof D.RenderingCancelledException||console.error(`renderView: "${g}"`)})}return!0}}},(re,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TextHighlighter=void 0,m.TextHighlighter=class B{constructor({findController:x,eventBus:j,pageIndex:C}){this.findController=x,this.matches=[],this.eventBus=j,this.pageIdx=C,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(x,j){this.textDivs=x,this.textContentItemsStr=j}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=x=>{(x.pageIndex===this.pageIdx||-1===x.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(x,j){if(!x)return[];const{textContentItemsStr:C}=this;let u=0,d=0;const g=C.length-1,I=[];for(let O=0,b=x.length;O<b;O++){let h=x[O];for(;u!==g&&h>=d+C[u].length;)d+=C[u].length,u++;u===C.length&&console.error("Could not find a matching mapping");const f={begin:{divIdx:u,offset:h-d}};for(h+=j[O];u!==g&&h>d+C[u].length;)d+=C[u].length,u++;f.end={divIdx:u,offset:h-d},I.push(f)}return I}_renderMatches(x){if(0===x.length)return;const{findController:j,pageIdx:C}=this,{textContentItemsStr:u,textDivs:d}=this,g=C===j.selected.pageIdx,I=j.selected.matchIdx;let b=null;function f(M,z){const ye=M.divIdx;return d[ye].textContent="",E(ye,0,M.offset,z)}function E(M,z,ye,Ce){let De=d[M];if(De.nodeType===Node.TEXT_NODE){const J=document.createElement("span");De.before(J),J.append(De),d[M]=J,De=J}const ze=u[M].substring(z,ye),Oe=document.createTextNode(ze);if(Ce){const J=document.createElement("span");return J.className=`${Ce} appended`,J.append(Oe),De.append(J),Ce.includes("selected")?J.offsetLeft:0}return De.append(Oe),0}let y=I,R=y+1;if(j.state.highlightAll)y=0,R=x.length;else if(!g)return;for(let M=y;M<R;M++){const z=x[M],ye=z.begin,Ce=z.end,De=g&&M===I,ze=De?" selected":"";let Oe=0;if(b&&ye.divIdx===b.divIdx?E(b.divIdx,b.offset,ye.offset):(null!==b&&E(b.divIdx,b.offset,undefined),f(ye)),ye.divIdx===Ce.divIdx)Oe=E(ye.divIdx,ye.offset,Ce.offset,"highlight"+ze);else{Oe=E(ye.divIdx,ye.offset,undefined,"highlight begin"+ze);for(let J=ye.divIdx+1,Q=Ce.divIdx;J<Q;J++)d[J].className="highlight middle"+ze;f(Ce,"highlight end"+ze)}b=Ce,De&&j.scrollMatchIntoView({element:d[ye.divIdx],selectedLeft:Oe,pageIndex:C,matchIndex:I})}b&&E(b.divIdx,b.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:x,matches:j,pageIdx:C}=this,{textContentItemsStr:u,textDivs:d}=this;let g=-1;for(let b=0,h=j.length;b<h;b++){const f=j[b];for(let y=Math.max(g,f.begin.divIdx),R=f.end.divIdx;y<=R;y++){const M=d[y];M.textContent=u[y],M.className=""}g=f.end.divIdx+1}(null==x?void 0:x.highlightMatches)&&(this.matches=this._convertMatches(x.pageMatches[C]||null,x.pageMatchesLength[C]||null),this._renderMatches(this.matches))}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.DownloadManager=void 0;var D=B(3);function x(C,u){const d=document.createElement("a");if(!d.click)throw new Error('DownloadManager: "a.click()" is not supported.');d.href=C,d.target="_parent","download"in d&&(d.download=u),(document.body||document.documentElement).append(d),d.click(),d.remove()}m.DownloadManager=class j{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(u,d){(0,D.createValidAbsoluteUrl)(u,"http://example.com")?x(u+"#pdfjs.action=download",d):console.error(`downloadUrl - not a valid URL: ${u}`)}downloadData(u,d,g){x(URL.createObjectURL(new Blob([u],{type:g})),d)}openOrDownloadData(u,d,g){const I=(0,D.isPdfFile)(g),O=I?"application/pdf":"";if(I){let h,b=this._openBlobUrls.get(u);b||(b=URL.createObjectURL(new Blob([d],{type:O})),this._openBlobUrls.set(u,b)),h="?file="+encodeURIComponent(b+"#"+g);try{return window.open(h),!0}catch(f){console.error(`openOrDownloadData: ${f}`),URL.revokeObjectURL(b),this._openBlobUrls.delete(u)}}return this.downloadData(d,g,O),!1}download(u,d,g){x(URL.createObjectURL(u),g)}}},(re,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.WaitOnType=m.EventBus=m.AutomationEventBus=void 0,m.waitOnEventOrTimeout=function D({target:C,name:u,delay:d=0}){return new Promise(function(g,I){if("object"!=typeof C||!u||"string"!=typeof u||!(Number.isInteger(d)&&d>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function O(E){C instanceof x?C._off(u,b):C.removeEventListener(u,b),f&&clearTimeout(f),g(E)}const b=O.bind(null,B.EVENT);C instanceof x?C._on(u,b):C.addEventListener(u,b);const h=O.bind(null,B.TIMEOUT),f=setTimeout(h,d)})};const B={EVENT:"event",TIMEOUT:"timeout"};m.WaitOnType=B;class x{constructor(){this._listeners=Object.create(null)}on(u,d,g=null){this._on(u,d,{external:!0,once:null==g?void 0:g.once})}off(u,d,g=null){this._off(u,d,{external:!0,once:null==g?void 0:g.once})}dispatch(u,d){const g=this._listeners[u];if(!g||0===g.length)return;let I;for(const{listener:O,external:b,once:h}of g.slice(0))h&&this._off(u,O),b?(I||(I=[])).push(O):O(d);if(I){for(const O of I)O(d);I=null}}_on(u,d,g=null){var O;((O=this._listeners)[u]||(O[u]=[])).push({listener:d,external:!0===(null==g?void 0:g.external),once:!0===(null==g?void 0:g.once)})}_off(u,d,g=null){const I=this._listeners[u];if(I)for(let O=0,b=I.length;O<b;O++)if(I[O].listener===d)return void I.splice(O,1)}}m.EventBus=x,m.AutomationEventBus=class j extends x{dispatch(u,d){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GenericL10n=void 0,B(21);var D=B(4);const x=document.webL10n;m.GenericL10n=class j{constructor(u){this._lang=u,this._ready=new Promise((d,g)=>{x.setLanguage((0,D.fixupLangCode)(u),()=>{d(x)})})}getLanguage(){var u=this;return _(function*(){return(yield u._ready).getLanguage()})()}getDirection(){var u=this;return _(function*(){return(yield u._ready).getDirection()})()}get(u,d=null,g=(0,D.getL10nFallback)(u,d)){var I=this;return _(function*(){return(yield I._ready).get(u,d,g)})()}translate(u){var d=this;return _(function*(){return(yield d._ready).translate(u)})()}}},()=>{document.webL10n=function(re,m,B){var D={},x="",j="textContent",C="",u={},d="loading";function f(J,Q,pe){Q=Q||function(fe){},pe=pe||function(){};var we=new XMLHttpRequest;we.open("GET",J,!0),we.overrideMimeType&&we.overrideMimeType("text/plain; charset=utf-8"),we.onreadystatechange=function(){4==we.readyState&&(200==we.status||0===we.status?Q(we.responseText):pe())},we.onerror=pe,we.ontimeout=pe;try{we.send(null)}catch(Je){pe()}}function y(J,Q){J&&(J=J.toLowerCase()),Q=Q||function(){},function R(){D={},x="",C=""}(),C=J;var pe=function I(){return m.querySelectorAll('link[type="application/l10n"]')}(),we=pe.length;if(0!==we){var F,te=0;F=function(){++te>=we&&(Q(),d="complete")};for(var le=0;le<we;le++)new ve(pe[le]).load(J,F)}else{var Je=function O(){var J=m.querySelector('script[type="application/l10n"]');return J?JSON.parse(J.innerHTML):null}();if(Je&&Je.locales&&Je.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(D=Je.locales[J])){var fe=Je.default_locale.toLowerCase();for(var S in Je.locales){if((S=S.toLowerCase())===J){D=Je.locales[J];break}S===fe&&(D=Je.locales[fe])}}Q()}else console.log("no resource to load, early way out");d="complete"}function ve(Ie){var Te=Ie.href;this.load=function(w,U){!function E(J,Q,pe,we){var Je=J.replace(/[^\/]*$/,"")||"./";function fe(F){return F.lastIndexOf("\\")<0?F:F.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}f(J,function(F){x+=F,function S(F,te){var ve={},le=/^\s*|\s*$/,_e=/^\s*#|^\s*$/,Ie=/^\s*\[(.*)\]\s*$/,Te=/^\s*@import\s+url\((.*)\)\s*$/i,w=/^([^=\s]*)\s*=\s*(.+)$/;function U(ie,ae,Pe){var Ke=ie.replace(le,"").split(/[\r\n]+/),ot="*",Fe=Q.split("-",1)[0],nt=!1,me="";!function ke(){for(;;){if(!Ke.length)return void Pe();var Qe=Ke.shift();if(!_e.test(Qe)){if(ae){if(me=Ie.exec(Qe)){ot=me[1].toLowerCase(),nt="*"!==ot&&ot!==Q&&ot!==Fe;continue}if(nt)continue;if(me=Te.exec(Qe))return void q(Je+me[1],ke)}var ee=Qe.match(w);ee&&3==ee.length&&(ve[ee[1]]=fe(ee[2]))}}}()}function q(ie,ae){f(ie,function(Pe){U(Pe,!1,ae)},function(){console.warn(ie+" not found."),ae()})}U(F,!0,function(){te(ve)})}(F,function(te){for(var ve in te){var le,_e,Ie=ve.lastIndexOf(".");Ie>0?(le=ve.substring(0,Ie),_e=ve.substring(Ie+1)):(le=ve,_e=j),D[le]||(D[le]={}),D[le][_e]=te[ve]}pe&&pe()})},we)}(Te,w,U,function(){console.warn(Te+" not found."),console.warn('"'+w+'" resource not found'),C="",U()})}}}function z(J,Q,pe){var we=D[J];if(!we){if(console.warn("#"+J+" is undefined."),!pe)return null;we=pe}var Je={};for(var fe in we){var S=we[fe];S=Ce(S=ye(S,Q,J,fe),Q,J),Je[fe]=S}return Je}function ye(J,Q,pe,we){var fe=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(J);if(!fe||!fe.length)return J;var te,S=fe[1],F=fe[2];return Q&&F in Q?te=Q[F]:F in D&&(te=D[F]),S in u&&(J=(0,u[S])(J,te,pe,we)),J}function Ce(J,Q,pe){return J.replace(/\{\{\s*(.+?)\s*\}\}/g,function(Je,fe){return Q&&fe in Q?Q[fe]:fe in D?D[fe]:(console.log("argument {{"+fe+"}} for #"+pe+" is undefined."),Je)})}function De(J){var Q=function h(J){if(!J)return{};var Q=J.getAttribute("data-l10n-id"),pe=J.getAttribute("data-l10n-args"),we={};if(pe)try{we=JSON.parse(pe)}catch(Je){console.warn("could not parse arguments for #"+Q)}return{id:Q,args:we}}(J);if(Q.id){var pe=z(Q.id,Q.args);if(!pe)return void console.warn("#"+Q.id+" is undefined.");if(pe[j]){if(0===function ze(J){if(J.children)return J.children.length;if(void 0!==J.childElementCount)return J.childElementCount;for(var Q=0,pe=0;pe<J.childNodes.length;pe++)Q+=1===J.nodeType?1:0;return Q}(J))J[j]=pe[j];else{for(var we=J.childNodes,Je=!1,fe=0,S=we.length;fe<S;fe++)3===we[fe].nodeType&&/\S/.test(we[fe].nodeValue)&&(Je?we[fe].nodeValue="":(we[fe].nodeValue=pe[j],Je=!0));if(!Je){var F=m.createTextNode(pe[j]);J.prepend(F)}}delete pe[j]}for(var te in pe)J[te]=pe[te]}}return u.plural=function(J,Q,pe,we){var Je=parseFloat(Q);if(isNaN(Je)||we!=j)return J;u._pluralRules||(u._pluralRules=function M(J){function pe(S,F){return-1!==F.indexOf(S)}function we(S,F,te){return F<=S&&S<=te}var Je={0:function(S){return"other"},1:function(S){return we(S%100,3,10)?"few":0===S?"zero":we(S%100,11,99)?"many":2==S?"two":1==S?"one":"other"},2:function(S){return 0!==S&&S%10==0?"many":2==S?"two":1==S?"one":"other"},3:function(S){return 1==S?"one":"other"},4:function(S){return we(S,0,1)?"one":"other"},5:function(S){return we(S,0,2)&&2!=S?"one":"other"},6:function(S){return 0===S?"zero":S%10==1&&S%100!=11?"one":"other"},7:function(S){return 2==S?"two":1==S?"one":"other"},8:function(S){return we(S,3,6)?"few":we(S,7,10)?"many":2==S?"two":1==S?"one":"other"},9:function(S){return 0===S||1!=S&&we(S%100,1,19)?"few":1==S?"one":"other"},10:function(S){return we(S%10,2,9)&&!we(S%100,11,19)?"few":S%10!=1||we(S%100,11,19)?"other":"one"},11:function(S){return we(S%10,2,4)&&!we(S%100,12,14)?"few":S%10==0||we(S%10,5,9)||we(S%100,11,14)?"many":S%10==1&&S%100!=11?"one":"other"},12:function(S){return we(S,2,4)?"few":1==S?"one":"other"},13:function(S){return we(S%10,2,4)&&!we(S%100,12,14)?"few":1!=S&&we(S%10,0,1)||we(S%10,5,9)||we(S%100,12,14)?"many":1==S?"one":"other"},14:function(S){return we(S%100,3,4)?"few":S%100==2?"two":S%100==1?"one":"other"},15:function(S){return 0===S||we(S%100,2,10)?"few":we(S%100,11,19)?"many":1==S?"one":"other"},16:function(S){return S%10==1&&11!=S?"one":"other"},17:function(S){return 3==S?"few":0===S?"zero":6==S?"many":2==S?"two":1==S?"one":"other"},18:function(S){return 0===S?"zero":we(S,0,2)&&0!==S&&2!=S?"one":"other"},19:function(S){return we(S,2,10)?"few":we(S,0,1)?"one":"other"},20:function(S){return!we(S%10,3,4)&&S%10!=9||we(S%100,10,19)||we(S%100,70,79)||we(S%100,90,99)?S%1e6==0&&0!==S?"many":S%10!=2||pe(S%100,[12,72,92])?S%10!=1||pe(S%100,[11,71,91])?"other":"one":"two":"few"},21:function(S){return 0===S?"zero":1==S?"one":"other"},22:function(S){return we(S,0,1)||we(S,11,99)?"one":"other"},23:function(S){return we(S%10,1,2)||S%20==0?"one":"other"},24:function(S){return we(S,3,10)||we(S,13,19)?"few":pe(S,[2,12])?"two":pe(S,[1,11])?"one":"other"}},fe={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[J.replace(/-.*$/,"")];return fe in Je?Je[fe]:(console.warn("plural form unknown for ["+J+"]"),function(){return"other"})}(C));var fe="["+u._pluralRules(Je)+"]";return 0===Je&&pe+"[zero]"in D?J=D[pe+"[zero]"][we]:1==Je&&pe+"[one]"in D?J=D[pe+"[one]"][we]:2==Je&&pe+"[two]"in D?J=D[pe+"[two]"][we]:pe+fe in D?J=D[pe+fe][we]:pe+"[other]"in D&&(J=D[pe+"[other]"][we]),J},{get:function(J,Q,pe){var fe,we=J.lastIndexOf("."),Je=j;we>0&&(Je=J.substring(we+1),J=J.substring(0,we)),pe&&((fe={})[Je]=pe);var S=z(J,Q,fe);return S&&Je in S?S[Je]:"{{"+J+"}}"},getData:function(){return D},getText:function(){return x},getLanguage:function(){return C},setLanguage:function(J,Q){y(J,function(){Q&&Q()})},getDirection:function(){var Q=C.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(Q)>=0?"rtl":"ltr"},translate:function Oe(J){for(var Q=function b(J){return J?J.querySelectorAll("*[data-l10n-id]"):[]}(J=J||m.documentElement),pe=Q.length,we=0;we<pe;we++)De(Q[we]);De(J)},getReadyState:function(){return d},ready:function(J){J&&("complete"==d||"interactive"==d?re.setTimeout(function(){J()}):m.addEventListener&&m.addEventListener("localized",function Q(){m.removeEventListener("localized",Q),J()}))}}}(window,document)},(re,m,B)=>{var J,a3,pe,hT,Je,fT,S,l3,te,c3,le,u3,Ie,pT,w,d3,q,h3,ae,km,Ke,$d,Fe,vc,me,f3,Qe,gT,H,mT,Ne,Fm,T,p3,Ae,vT,xe,g3,ue,zd;Object.defineProperty(m,"__esModule",{value:!0}),m.PDFFindController=m.FindState=void 0;var D=B(7),x=B(3),j=B(23);const C={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};m.FindState=C;const I={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},O=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),b=[...O.values()].map(Be=>String.fromCharCode(Be)).join(""),h=/\p{M}+/gu,f=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,E=/([^\p{M}])\p{M}*$/u,y=/^\p{M}*([^\p{M}])/u,R=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,M=new Map;let ye=null,Ce=null;function De(Be){const X=[];let V,K;for(;null!==(V=R.exec(Be));){let{index:an}=V;for(const nn of V[0]){let kt=M.get(nn);kt||(kt=nn.normalize("NFD").length,M.set(nn,kt)),X.push([kt,an++])}}if(0===X.length&&ye)K=ye;else if(X.length>0&&Ce)K=Ce;else{const nn=`([${Object.keys(I).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;K=0===X.length?ye=new RegExp(nn+"|(\\u0000)","gum"):Ce=new RegExp(nn+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const Me=[];for(;null!==(V=h.exec(Be));)Me.push([V[0].length,V.index]);let qe=Be.normalize("NFD");const ct=[[0,0]];let ht=0,xt=0,Ct=0,Dt=0,Mt=0,on=!1;return qe=qe.replace(K,(an,nn,kt,er,kr,Xr,cn)=>{var mr,$t;if(cn-=Dt,nn){const _n=I[an],yn=_n.length;for(let wi=1;wi<yn;wi++)ct.push([cn-Ct+wi,Ct-wi]);return Ct-=yn-1,_n}if(kt){const _n=kt.endsWith("\n"),yn=_n?kt.length-2:kt.length;on=!0;let wi=yn;cn+Mt===(null==(mr=Me[ht])?void 0:mr[1])&&(wi-=Me[ht][0],++ht);for(let _o=1;_o<=wi;_o++)ct.push([cn-1-Ct+_o,Ct-_o]);return Ct-=wi,Dt+=wi,_n?(ct.push([(cn+=yn-1)-Ct+1,1+Ct]),Ct+=1,Dt+=1,Mt+=1,kt.slice(0,yn)):kt}if(er)return ct.push([cn-Ct+1,1+Ct]),Ct+=1,Dt+=1,Mt+=1,er.charAt(0);if(kr)return ct.push([cn-Ct+1,Ct-1]),Ct-=1,Dt+=1,Mt+=1," ";if(cn+Mt===(null==($t=X[xt])?void 0:$t[1])){const _n=X[xt][0]-1;++xt;for(let yn=1;yn<=_n;yn++)ct.push([cn-(Ct-yn),Ct-yn]);Ct-=_n,Dt+=_n}return Xr}),ct.push([qe.length,Ct]),[qe,ct,on]}function ze(Be,X,V){if(!Be)return[X,V];const K=X,Me=X+V;let qe=(0,D.binarySearchFirstItem)(Be,ht=>ht[0]>=K);Be[qe][0]>K&&--qe;let ct=(0,D.binarySearchFirstItem)(Be,ht=>ht[0]>=Me,qe);return Be[ct][0]>Me&&--ct,[K+Be[qe][1],V+Be[ct][1]-Be[qe][1]]}J=new WeakSet,a3=function(X){if(!X)return;const V=this._pdfDocument,{type:K}=X;(null===this._state||We(this,S,l3).call(this,X))&&(this._dirtyMatch=!0),this._state=X,"highlightallchange"!==K&&We(this,ue,zd).call(this,C.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||V&&this._pdfDocument!==V)return;We(this,q,h3).call(this);const Me=!this._highlightMatches,qe=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),K?this._dirtyMatch?We(this,Fe,vc).call(this):"again"===K?(We(this,Fe,vc).call(this),Me&&this._state.highlightAll&&We(this,Ke,$d).call(this)):"highlightallchange"===K?(qe?We(this,Fe,vc).call(this):this._highlightMatches=!0,We(this,Ke,$d).call(this)):We(this,Fe,vc).call(this):this._findTimeout=setTimeout(()=>{We(this,Fe,vc).call(this),this._findTimeout=null},250)})},pe=new WeakSet,hT=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,x.createPromiseCapability)()},Je=new WeakSet,fT=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=De(this._state.query)),this._normalizedQuery},S=new WeakSet,l3=function(X){if(X.query!==this._state.query)return!0;switch(X.type){case"again":const V=this._selected.pageIdx+1,K=this._linkService;return V>=1&&V<=K.pagesCount&&V!==K.page&&!K.isPageVisible(V);case"highlightallchange":return!1}return!0},te=new WeakSet,c3=function(X,V,K){let Me=X.slice(0,V).match(E);if(Me){const qe=X.charCodeAt(V),ct=Me[1].charCodeAt(0);if((0,j.getCharacterType)(qe)===(0,j.getCharacterType)(ct))return!1}if(Me=X.slice(V+K).match(y),Me){const qe=X.charCodeAt(V+K-1),ct=Me[1].charCodeAt(0);if((0,j.getCharacterType)(qe)===(0,j.getCharacterType)(ct))return!1}return!0},le=new WeakSet,u3=function(X,V,K,Me){const qe=[],ct=[],ht=this._pageDiffs[K];let xt;for(;null!==(xt=X.exec(Me));){if(V&&!We(this,te,c3).call(this,Me,xt.index,xt[0].length))continue;const[Ct,Dt]=ze(ht,xt.index,xt[0].length);Dt&&(qe.push(Ct),ct.push(Dt))}this._pageMatches[K]=qe,this._pageMatchesLength[K]=ct},Ie=new WeakSet,pT=function(X,V){const{matchDiacritics:K}=this._state;let Me=!1;return(X=X.replace(f,(ct,ht,xt,Ct,Dt,Mt)=>ht?`[ ]*\\${ht}[ ]*`:xt?`[ ]*${xt}[ ]*`:Ct?"[ ]+":K?Dt||Mt:Dt?O.has(Dt.charCodeAt(0))?Dt:"":V?(Me=!0,`${Mt}\\p{M}*`):Mt)).endsWith("[ ]*")&&(X=X.slice(0,X.length-"[ ]*".length)),K&&V&&(Me=!0,X=`${X}(?=[${b}]|[^\\p{M}]|$)`),[Me,X]},w=new WeakSet,d3=function(X){let V=G(this,Je,fT);if(0===V.length)return;const{caseSensitive:K,entireWord:Me,phraseSearch:qe}=this._state,ct=this._pageContents[X],ht=this._hasDiacritics[X];let xt=!1;if(qe)[xt,V]=We(this,Ie,pT).call(this,V,ht);else{const Mt=V.match(/\S+/g);Mt&&(V=Mt.sort().reverse().map(on=>{const[an,nn]=We(this,Ie,pT).call(this,on,ht);return xt||(xt=an),`(${nn})`}).join("|"))}V=new RegExp(V,`g${xt?"u":""}${K?"":"i"}`),We(this,le,u3).call(this,V,Me,X,ct),this._state.highlightAll&&We(this,ae,km).call(this,X),this._resumePageIdx===X&&(this._resumePageIdx=null,We(this,Qe,gT).call(this));const Dt=this._pageMatches[X].length;Dt>0&&(this._matchesCountTotal+=Dt,We(this,xe,g3).call(this))},q=new WeakSet,h3=function(){if(this._extractTextPromises.length>0)return;let X=Promise.resolve();for(let V=0,K=this._linkService.pagesCount;V<K;V++){const Me=(0,x.createPromiseCapability)();this._extractTextPromises[V]=Me.promise,X=X.then(()=>this._pdfDocument.getPage(V+1).then(qe=>qe.getTextContent()).then(qe=>{const ct=[];for(const ht of qe.items)ct.push(ht.str),ht.hasEOL&&ct.push("\n");[this._pageContents[V],this._pageDiffs[V],this._hasDiacritics[V]]=De(ct.join("")),Me.resolve()},qe=>{console.error(`Unable to get text content for page ${V+1}`,qe),this._pageContents[V]="",this._pageDiffs[V]=null,this._hasDiacritics[V]=!1,Me.resolve()}))}},ae=new WeakSet,km=function(X){this._scrollMatches&&this._selected.pageIdx===X&&(this._linkService.page=X+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:X})},Ke=new WeakSet,$d=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Fe=new WeakSet,vc=function(){const X=this._state.findPrevious,V=this._linkService.page-1,K=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=V,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,We(this,Ke,$d).call(this);for(let qe=0;qe<K;qe++)this._pendingFindMatches.has(qe)||(this._pendingFindMatches.add(qe),this._extractTextPromises[qe].then(()=>{this._pendingFindMatches.delete(qe),We(this,w,d3).call(this,qe)}))}if(""===G(this,Je,fT))return void We(this,ue,zd).call(this,C.FOUND);if(this._resumePageIdx)return;const Me=this._offset;if(this._pagesToSearch=K,null!==Me.matchIdx){const qe=this._pageMatches[Me.pageIdx].length;if(!X&&Me.matchIdx+1<qe||X&&Me.matchIdx>0)return Me.matchIdx=X?Me.matchIdx-1:Me.matchIdx+1,void We(this,Ne,Fm).call(this,!0);We(this,H,mT).call(this,X)}We(this,Qe,gT).call(this)},me=new WeakSet,f3=function(X){const V=this._offset,K=X.length,Me=this._state.findPrevious;return K?(V.matchIdx=Me?K-1:0,We(this,Ne,Fm).call(this,!0),!0):(We(this,H,mT).call(this,Me),!!(V.wrapped&&(V.matchIdx=null,this._pagesToSearch<0))&&(We(this,Ne,Fm).call(this,!1),!0))},Qe=new WeakSet,gT=function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let X=null;do{const V=this._offset.pageIdx;if(X=this._pageMatches[V],!X){this._resumePageIdx=V;break}}while(!We(this,me,f3).call(this,X))},H=new WeakSet,mT=function(X){const V=this._offset,K=this._linkService.pagesCount;V.pageIdx=X?V.pageIdx-1:V.pageIdx+1,V.matchIdx=null,this._pagesToSearch--,(V.pageIdx>=K||V.pageIdx<0)&&(V.pageIdx=X?K-1:0,V.wrapped=!0)},Ne=new WeakSet,Fm=function(X=!1){let V=C.NOT_FOUND;const K=this._offset.wrapped;if(this._offset.wrapped=!1,X){const Me=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,V=K?C.WRAPPED:C.FOUND,-1!==Me&&Me!==this._selected.pageIdx&&We(this,ae,km).call(this,Me)}We(this,ue,zd).call(this,V,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,We(this,ae,km).call(this,this._selected.pageIdx))},T=new WeakSet,p3=function(X){const V=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||V&&this._pdfDocument!==V||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),We(this,ue,zd).call(this,C.FOUND),this._highlightMatches=!1,We(this,Ke,$d).call(this))})},Ae=new WeakSet,vT=function(){var qe;const{pageIdx:X,matchIdx:V}=this._selected;let K=0,Me=this._matchesCountTotal;if(-1!==V){for(let ct=0;ct<X;ct++)K+=(null==(qe=this._pageMatches[ct])?void 0:qe.length)||0;K+=V+1}return(K<1||K>Me)&&(K=Me=0),{current:K,total:Me}},xe=new WeakSet,g3=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:We(this,Ae,vT).call(this)})},ue=new WeakSet,zd=function(X,V=!1){var K,Me;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:X,previous:V,matchesCount:We(this,Ae,vT).call(this),rawQuery:null!=(Me=null==(K=this._state)?void 0:K.query)?Me:null})},m.PDFFindController=class Oe{constructor({linkService:X,eventBus:V}){He(this,J),He(this,pe),He(this,Je),He(this,S),He(this,te),He(this,le),He(this,Ie),He(this,w),He(this,q),He(this,ae),He(this,Ke),He(this,Fe),He(this,me),He(this,Qe),He(this,H),He(this,Ne),He(this,T),He(this,Ae),He(this,xe),He(this,ue),this._linkService=X,this._eventBus=V,We(this,pe,hT).call(this),V._on("find",We(this,J,a3).bind(this)),V._on("findbarclose",We(this,T,p3).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(X){this._pdfDocument&&We(this,pe,hT).call(this),X&&(this._pdfDocument=X,this._firstPageCapability.resolve())}scrollMatchIntoView({element:X=null,selectedLeft:V=0,pageIndex:K=-1,matchIndex:Me=-1}){this._scrollMatches&&X&&-1!==Me&&Me===this._selected.matchIdx&&-1!==K&&K===this._selected.pageIdx&&(this._scrollMatches=!1,(0,D.scrollIntoView)(X,{top:-50,left:V+-400},!0))}}},(re,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.CharacterType=void 0,m.getCharacterType=function h(f){return function D(f){return f<11904}(f)?function x(f){return 0==(65408&f)}(f)?function u(f){return 32===f||9===f||13===f||10===f}(f)?B.SPACE:function j(f){return f>=97&&f<=122||f>=65&&f<=90}(f)||function C(f){return f>=48&&f<=57}(f)||95===f?B.ALPHA_LETTER:B.PUNCT:function b(f){return 3584==(65408&f)}(f)?B.THAI_LETTER:160===f?B.SPACE:B.ALPHA_LETTER:function d(f){return f>=13312&&f<=40959||f>=63744&&f<=64255}(f)?B.HAN_LETTER:function g(f){return f>=12448&&f<=12543}(f)?B.KATAKANA_LETTER:function I(f){return f>=12352&&f<=12447}(f)?B.HIRAGANA_LETTER:function O(f){return f>=65376&&f<=65439}(f)?B.HALFWIDTH_KATAKANA_LETTER:B.ALPHA_LETTER};const B={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};m.CharacterType=B},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFHistory=void 0,m.isDestArraysEqual=O,m.isDestHashesEqual=I;var D=B(7),x=B(19);function d(){return document.location.hash}function I(b,h){return"string"==typeof b&&"string"==typeof h&&(b===h||(0,D.parseQueryString)(b).get("nameddest")===h)}function O(b,h){function f(E,y){if(typeof E!=typeof y||Array.isArray(E)||Array.isArray(y))return!1;if(null!==E&&"object"==typeof E&&null!==y){if(Object.keys(E).length!==Object.keys(y).length)return!1;for(const R in E)if(!f(E[R],y[R]))return!1;return!0}return E===y||Number.isNaN(E)&&Number.isNaN(y)}if(!Array.isArray(b)||!Array.isArray(h)||b.length!==h.length)return!1;for(let E=0,y=b.length;E<y;E++)if(!f(b[E],h[E]))return!1;return!0}m.PDFHistory=class g{constructor({linkService:h,eventBus:f}){this.linkService=h,this.eventBus=f,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",E=>{this._isPagesLoaded=!!E.pagesCount},{once:!0})})}initialize({fingerprint:h,resetHistory:f=!1,updateUrl:E=!1}){if(!h||"string"!=typeof h)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const y=""!==this._fingerprint&&this._fingerprint!==h;this._fingerprint=h,this._updateUrl=!0===E,this._initialized=!0,this._bindEvents();const R=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=d(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(R,!0)||f){const{hash:z,page:ye,rotation:Ce}=this._parseCurrentHash(!0);return!z||y||f?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:z,page:ye,rotation:Ce},!0)}const M=R.destination;this._updateInternalState(M,R.uid,!0),void 0!==M.rotation&&(this._initialRotation=M.rotation),M.dest?(this._initialBookmark=JSON.stringify(M.dest),this._destination.page=null):M.hash?this._initialBookmark=M.hash:M.page&&(this._initialBookmark=`page=${M.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:h=null,explicitDest:f,pageNumber:E}){if(!this._initialized)return;if(h&&"string"!=typeof h)return void console.error(`PDFHistory.push: "${h}" is not a valid namedDest parameter.`);if(!Array.isArray(f))return void console.error(`PDFHistory.push: "${f}" is not a valid explicitDest parameter.`);if(!this._isValidPage(E)&&(null!==E||this._destination))return void console.error(`PDFHistory.push: "${E}" is not a valid pageNumber parameter.`);const y=h||JSON.stringify(f);if(!y)return;let R=!1;if(this._destination&&(I(this._destination.hash,y)||O(this._destination.dest,f))){if(this._destination.page)return;R=!0}this._popStateInProgress&&!R||(this._pushOrReplaceState({dest:f,hash:y,page:E,rotation:this.linkService.rotation},R),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(h){var f;if(this._initialized){if(!this._isValidPage(h))return void console.error(`PDFHistory.pushPage: "${h}" is not a valid page number.`);(null==(f=this._destination)?void 0:f.page)!==h&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${h}`,page:h,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const h=window.history.state;this._isValidState(h)&&h.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const h=window.history.state;this._isValidState(h)&&h.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(h,f=!1){const E=f||!this._destination,y={fingerprint:this._fingerprint,uid:E?this._uid:this._uid+1,destination:h};let R;if(this._updateInternalState(h,y.uid),this._updateUrl&&(null==h?void 0:h.hash)){const M=document.location.href.split("#")[0];M.startsWith("file://")||(R=`${M}#${h.hash}`)}E?window.history.replaceState(y,"",R):window.history.pushState(y,"",R)}_tryPushCurrentPosition(h=!1){if(!this._position)return;let f=this._position;if(h&&(f=Object.assign(Object.create(null),this._position),f.temporary=!0),!this._destination)return void this._pushOrReplaceState(f);if(this._destination.temporary)return void this._pushOrReplaceState(f,!0);if(this._destination.hash===f.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let E=!1;if(this._destination.page>=f.first&&this._destination.page<=f.page){if(void 0!==this._destination.dest||!this._destination.first)return;E=!0}this._pushOrReplaceState(f,E)}_isValidPage(h){return Number.isInteger(h)&&h>0&&h<=this.linkService.pagesCount}_isValidState(h,f=!1){if(!h)return!1;if(h.fingerprint!==this._fingerprint){if(!f)return!1;{if("string"!=typeof h.fingerprint||h.fingerprint.length!==this._fingerprint.length)return!1;const[E]=performance.getEntriesByType("navigation");if("reload"!==(null==E?void 0:E.type))return!1}}return!(!Number.isInteger(h.uid)||h.uid<0||null===h.destination||"object"!=typeof h.destination)}_updateInternalState(h,f,E=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),E&&(null==h?void 0:h.temporary)&&delete h.temporary,this._destination=h,this._uid=f,this._maxUid=Math.max(this._maxUid,f),this._numPositionUpdates=0}_parseCurrentHash(h=!1){const f=unescape(d()).substring(1),E=(0,D.parseQueryString)(f),y=E.get("nameddest")||"";let R=0|E.get("page");return(!this._isValidPage(R)||h&&y.length>0)&&(R=null),{hash:f,page:R,rotation:this.linkService.rotation}}_updateViewarea({location:h}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:h.pdfOpenParams.substring(1),page:this.linkService.page,first:h.pageNumber,rotation:h.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:h}){const f=d(),E=this._currentHash!==f;if(this._currentHash=f,!h){this._uid++;const{hash:R,page:M,rotation:z}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:R,page:M,rotation:z},!0)}if(!this._isValidState(h))return;this._popStateInProgress=!0,E&&(this._blockHashChange++,(0,x.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const y=h.destination;this._updateInternalState(y,h.uid,!0),(0,D.isValidRotation)(y.rotation)&&(this.linkService.rotation=y.rotation),y.dest?this.linkService.goToDestination(y.dest):y.hash?this.linkService.setHash(y.hash):y.page&&(this.linkService.page=y.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFScriptingManager=void 0;var D=B(7),x=B(3);m.PDFScriptingManager=class j{constructor({eventBus:u,sandboxBundleSrc:d=null,scriptingFactory:g=null,docPropertiesLookup:I=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=u,this._sandboxBundleSrc=d,this._scriptingFactory=g,this._docPropertiesLookup=I,this._scriptingFactory||window.addEventListener("updatefromsandbox",O=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:O.detail})})}setViewer(u){this._pdfViewer=u}setDocument(u){var d=this;return _(function*(){var b;if(d._pdfDocument&&(yield d._destroyScripting()),d._pdfDocument=u,!u)return;const[g,I,O]=yield Promise.all([u.getFieldObjects(),u.getCalculationOrderIds(),u.getJSActions()]);if(g||O){if(u===d._pdfDocument){try{d._scripting=d._createScripting()}catch(h){return console.error(`PDFScriptingManager.setDocument: "${null==h?void 0:h.message}".`),void(yield d._destroyScripting())}d._internalEvents.set("updatefromsandbox",h=>{(null==h?void 0:h.source)===window&&d._updateFromSandbox(h.detail)}),d._internalEvents.set("dispatcheventinsandbox",h=>{var f;null==(f=d._scripting)||f.dispatchEventInSandbox(h.detail)}),d._internalEvents.set("pagechanging",({pageNumber:h,previous:f})=>{h!==f&&(d._dispatchPageClose(f),d._dispatchPageOpen(h))}),d._internalEvents.set("pagerendered",({pageNumber:h})=>{!d._pageOpenPending.has(h)||h===d._pdfViewer.currentPageNumber&&d._dispatchPageOpen(h)}),d._internalEvents.set("pagesdestroy",function(){var h=_(function*(f){var E,y;yield d._dispatchPageClose(d._pdfViewer.currentPageNumber),yield null==(E=d._scripting)?void 0:E.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null==(y=d._closeCapability)||y.resolve()});return function(f){return h.apply(this,arguments)}}()),d._domEvents.set("mousedown",h=>{d._mouseState.isDown=!0}),d._domEvents.set("mouseup",h=>{d._mouseState.isDown=!1});for(const[h,f]of d._internalEvents)d._eventBus._on(h,f);for(const[h,f]of d._domEvents)window.addEventListener(h,f,!0);try{const h=yield d._getDocProperties();if(u!==d._pdfDocument)return;yield d._scripting.createSandbox({objects:g,calculationOrder:I,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:pc(fc({},h),{actions:O})}),d._eventBus.dispatch("sandboxcreated",{source:d})}catch(h){return console.error(`PDFScriptingManager.setDocument: "${null==h?void 0:h.message}".`),void(yield d._destroyScripting())}yield null==(b=d._scripting)?void 0:b.dispatchEventInSandbox({id:"doc",name:"Open"}),yield d._dispatchPageOpen(d._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{u===d._pdfDocument&&(d._ready=!0)})}}else yield d._destroyScripting()})()}dispatchWillSave(u){var d=this;return _(function*(){var g;return null==(g=d._scripting)?void 0:g.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(u){var d=this;return _(function*(){var g;return null==(g=d._scripting)?void 0:g.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(u){var d=this;return _(function*(){var g;return null==(g=d._scripting)?void 0:g.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(u){var d=this;return _(function*(){var g;return null==(g=d._scripting)?void 0:g.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var u;return(null==(u=this._destroyCapability)?void 0:u.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,x.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,x.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,x.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,x.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(u){var d=this;return _(function*(){var E;const g=d._pdfViewer.isInPresentationMode||d._pdfViewer.isChangingPresentationMode,{id:I,siblings:O,command:b,value:h}=u;if(!I){switch(b){case"clear":console.clear();break;case"error":console.error(h);break;case"layout":if(g)return;const y=(0,D.apiPageLayoutToViewerModes)(h);d._pdfViewer.spreadMode=y.spreadMode;break;case"page-num":d._pdfViewer.currentPageNumber=h+1;break;case"print":yield d._pdfViewer.pagesPromise,d._eventBus.dispatch("print",{source:d});break;case"println":console.log(h);break;case"zoom":if(g)return;d._pdfViewer.currentScaleValue=h;break;case"SaveAs":d._eventBus.dispatch("download",{source:d});break;case"FirstPage":d._pdfViewer.currentPageNumber=1;break;case"LastPage":d._pdfViewer.currentPageNumber=d._pdfViewer.pagesCount;break;case"NextPage":d._pdfViewer.nextPage();break;case"PrevPage":d._pdfViewer.previousPage();break;case"ZoomViewIn":if(g)return;d._pdfViewer.increaseScale();break;case"ZoomViewOut":if(g)return;d._pdfViewer.decreaseScale()}return}if(g&&u.focus)return;delete u.id,delete u.siblings;const f=O?[I,...O]:[I];for(const y of f){const R=document.querySelector(`[data-element-id="${y}"]`);R?R.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:u})):null==(E=d._pdfDocument)||E.annotationStorage.setValue(y,u)}})()}_dispatchPageOpen(u,d=!1){var g=this;return _(function*(){const I=g._pdfDocument,O=g._visitedPages;if(d&&(g._closeCapability=(0,x.createPromiseCapability)()),!g._closeCapability)return;const b=g._pdfViewer.getPageView(u-1);if((null==b?void 0:b.renderingState)!==D.RenderingStates.FINISHED)return void g._pageOpenPending.add(u);g._pageOpenPending.delete(u);const h=_(function*(){var E,y;const f=yield O.has(u)?null:null==(E=b.pdfPage)?void 0:E.getJSActions();I===g._pdfDocument&&(yield null==(y=g._scripting)?void 0:y.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:u,actions:f}))})();O.set(u,h)})()}_dispatchPageClose(u){var d=this;return _(function*(){var b;const g=d._pdfDocument,I=d._visitedPages;if(!d._closeCapability||d._pageOpenPending.has(u))return;const O=I.get(u);!O||(I.set(u,null),yield O,g===d._pdfDocument&&(yield null==(b=d._scripting)?void 0:b.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:u})))})()}_getDocProperties(){var u=this;return _(function*(){if(u._docPropertiesLookup)return u._docPropertiesLookup(u._pdfDocument);const{docPropertiesLookup:d}=B(26);return d(u._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,x.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:u}=B(26);return new u(this._sandboxBundleSrc)}_destroyScripting(){var u=this;return _(function*(){var d,g;if(!u._scripting)return u._pdfDocument=null,void(null==(d=u._destroyCapability)||d.resolve());u._closeCapability&&(yield Promise.race([u._closeCapability.promise,new Promise(I=>{setTimeout(I,1e3)})]).catch(I=>{}),u._closeCapability=null),u._pdfDocument=null;try{yield u._scripting.destroySandbox()}catch(I){}for(const[I,O]of u._internalEvents)u._eventBus._off(I,O);u._internalEvents.clear();for(const[I,O]of u._domEvents)window.removeEventListener(I,O,!0);u._domEvents.clear(),u._pageOpenPending.clear(),u._visitedPages.clear(),u._scripting=null,delete u._mouseState.isDown,u._ready=!1,null==(g=u._destroyCapability)||g.resolve()})()}}},(re,m,B)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GenericScripting=void 0,m.docPropertiesLookup=function x(u){return j.apply(this,arguments)};var D=B(3);function j(){return(j=_(function*(u){const g="".split("#")[0];let{info:I,metadata:O,contentDispositionFilename:b,contentLength:h}=yield u.getMetadata();if(!h){const{length:f}=yield u.getDownloadInfo();h=f}return pc(fc({},I),{baseURL:g,filesize:h,filename:b||(0,D.getPdfFilenameFromUrl)(""),metadata:null==O?void 0:O.getRaw(),authors:null==O?void 0:O.get("dc:creator"),numPages:u.numPages,URL:""})})).apply(this,arguments)}m.GenericScripting=class C{constructor(d){this._ready=(0,D.loadScript)(d,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(d){var g=this;return _(function*(){(yield g._ready).create(d)})()}dispatchEventInSandbox(d){var g=this;return _(function*(){const I=yield g._ready;setTimeout(()=>I.dispatchEvent(d),0)})()}destroySandbox(){var d=this;return _(function*(){(yield d._ready).nukeSandbox()})()}}}],Se={};function ce(re){var m=Se[re];if(void 0!==m)return m.exports;var B=Se[re]={exports:{}};return N[re](B,B.exports,ce),B.exports}var Re={};return(()=>{var re=Re;Object.defineProperty(re,"__esModule",{value:!0}),Object.defineProperty(re,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return j.AnnotationLayerBuilder}}),Object.defineProperty(re,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return m.DefaultAnnotationLayerFactory}}),Object.defineProperty(re,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return m.DefaultStructTreeLayerFactory}}),Object.defineProperty(re,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return m.DefaultTextLayerFactory}}),Object.defineProperty(re,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return m.DefaultXfaLayerFactory}}),Object.defineProperty(re,"DownloadManager",{enumerable:!0,get:function(){return C.DownloadManager}}),Object.defineProperty(re,"EventBus",{enumerable:!0,get:function(){return u.EventBus}}),Object.defineProperty(re,"GenericL10n",{enumerable:!0,get:function(){return d.GenericL10n}}),Object.defineProperty(re,"LinkTarget",{enumerable:!0,get:function(){return B.LinkTarget}}),Object.defineProperty(re,"NullL10n",{enumerable:!0,get:function(){return g.NullL10n}}),Object.defineProperty(re,"PDFFindController",{enumerable:!0,get:function(){return I.PDFFindController}}),Object.defineProperty(re,"PDFHistory",{enumerable:!0,get:function(){return O.PDFHistory}}),Object.defineProperty(re,"PDFLinkService",{enumerable:!0,get:function(){return B.PDFLinkService}}),Object.defineProperty(re,"PDFPageView",{enumerable:!0,get:function(){return b.PDFPageView}}),Object.defineProperty(re,"PDFScriptingManager",{enumerable:!0,get:function(){return h.PDFScriptingManager}}),Object.defineProperty(re,"PDFSinglePageViewer",{enumerable:!0,get:function(){return x.PDFSinglePageViewer}}),Object.defineProperty(re,"PDFViewer",{enumerable:!0,get:function(){return x.PDFViewer}}),Object.defineProperty(re,"ProgressBar",{enumerable:!0,get:function(){return D.ProgressBar}}),Object.defineProperty(re,"RenderingStates",{enumerable:!0,get:function(){return D.RenderingStates}}),Object.defineProperty(re,"ScrollMode",{enumerable:!0,get:function(){return D.ScrollMode}}),Object.defineProperty(re,"SimpleLinkService",{enumerable:!0,get:function(){return B.SimpleLinkService}}),Object.defineProperty(re,"SpreadMode",{enumerable:!0,get:function(){return D.SpreadMode}}),Object.defineProperty(re,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return f.StructTreeLayerBuilder}}),Object.defineProperty(re,"TextLayerBuilder",{enumerable:!0,get:function(){return E.TextLayerBuilder}}),Object.defineProperty(re,"XfaLayerBuilder",{enumerable:!0,get:function(){return y.XfaLayerBuilder}}),Object.defineProperty(re,"parseQueryString",{enumerable:!0,get:function(){return D.parseQueryString}});var m=ce(1),B=ce(6),D=ce(7),x=ce(11),j=ce(5),C=ce(18),u=ce(19),d=ce(20),g=ce(4),I=ce(22),O=ce(24),b=ce(13),h=ce(25),f=ce(8),E=ce(9),y=ce(10)})(),Re})())()},463:it=>{"use strict";const L={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};L.localCName=L.generateIdentifier(),L.splitLines=function(W){return W.trim().split("\n").map(_=>_.trim())},L.splitSections=function(W){return W.split("\nm=").map((N,Se)=>(Se>0?"m="+N:N).trim()+"\r\n")},L.getDescription=function(W){const _=L.splitSections(W);return _&&_[0]},L.getMediaSections=function(W){const _=L.splitSections(W);return _.shift(),_},L.matchPrefix=function(W,_){return L.splitLines(W).filter(N=>0===N.indexOf(_))},L.parseCandidate=function(W){let _;_=0===W.indexOf("a=candidate:")?W.substring(12).split(" "):W.substring(10).split(" ");const N={foundation:_[0],component:{1:"rtp",2:"rtcp"}[_[1]]||_[1],protocol:_[2].toLowerCase(),priority:parseInt(_[3],10),ip:_[4],address:_[4],port:parseInt(_[5],10),type:_[7]};for(let Se=8;Se<_.length;Se+=2)switch(_[Se]){case"raddr":N.relatedAddress=_[Se+1];break;case"rport":N.relatedPort=parseInt(_[Se+1],10);break;case"tcptype":N.tcpType=_[Se+1];break;case"ufrag":N.ufrag=_[Se+1],N.usernameFragment=_[Se+1];break;default:void 0===N[_[Se]]&&(N[_[Se]]=_[Se+1])}return N},L.writeCandidate=function(W){const _=[];_.push(W.foundation);const N=W.component;_.push("rtp"===N?1:"rtcp"===N?2:N),_.push(W.protocol.toUpperCase()),_.push(W.priority),_.push(W.address||W.ip),_.push(W.port);const Se=W.type;return _.push("typ"),_.push(Se),"host"!==Se&&W.relatedAddress&&W.relatedPort&&(_.push("raddr"),_.push(W.relatedAddress),_.push("rport"),_.push(W.relatedPort)),W.tcpType&&"tcp"===W.protocol.toLowerCase()&&(_.push("tcptype"),_.push(W.tcpType)),(W.usernameFragment||W.ufrag)&&(_.push("ufrag"),_.push(W.usernameFragment||W.ufrag)),"candidate:"+_.join(" ")},L.parseIceOptions=function(W){return W.substr(14).split(" ")},L.parseRtpMap=function(W){let _=W.substr(9).split(" ");const N={payloadType:parseInt(_.shift(),10)};return _=_[0].split("/"),N.name=_[0],N.clockRate=parseInt(_[1],10),N.channels=3===_.length?parseInt(_[2],10):1,N.numChannels=N.channels,N},L.writeRtpMap=function(W){let _=W.payloadType;void 0!==W.preferredPayloadType&&(_=W.preferredPayloadType);const N=W.channels||W.numChannels||1;return"a=rtpmap:"+_+" "+W.name+"/"+W.clockRate+(1!==N?"/"+N:"")+"\r\n"},L.parseExtmap=function(W){const _=W.substr(9).split(" ");return{id:parseInt(_[0],10),direction:_[0].indexOf("/")>0?_[0].split("/")[1]:"sendrecv",uri:_[1]}},L.writeExtmap=function(W){return"a=extmap:"+(W.id||W.preferredId)+(W.direction&&"sendrecv"!==W.direction?"/"+W.direction:"")+" "+W.uri+"\r\n"},L.parseFmtp=function(W){const _={};let N;const Se=W.substr(W.indexOf(" ")+1).split(";");for(let ce=0;ce<Se.length;ce++)N=Se[ce].trim().split("="),_[N[0].trim()]=N[1];return _},L.writeFmtp=function(W){let _="",N=W.payloadType;if(void 0!==W.preferredPayloadType&&(N=W.preferredPayloadType),W.parameters&&Object.keys(W.parameters).length){const Se=[];Object.keys(W.parameters).forEach(ce=>{Se.push(void 0!==W.parameters[ce]?ce+"="+W.parameters[ce]:ce)}),_+="a=fmtp:"+N+" "+Se.join(";")+"\r\n"}return _},L.parseRtcpFb=function(W){const _=W.substr(W.indexOf(" ")+1).split(" ");return{type:_.shift(),parameter:_.join(" ")}},L.writeRtcpFb=function(W){let _="",N=W.payloadType;return void 0!==W.preferredPayloadType&&(N=W.preferredPayloadType),W.rtcpFeedback&&W.rtcpFeedback.length&&W.rtcpFeedback.forEach(Se=>{_+="a=rtcp-fb:"+N+" "+Se.type+(Se.parameter&&Se.parameter.length?" "+Se.parameter:"")+"\r\n"}),_},L.parseSsrcMedia=function(W){const _=W.indexOf(" "),N={ssrc:parseInt(W.substr(7,_-7),10)},Se=W.indexOf(":",_);return Se>-1?(N.attribute=W.substr(_+1,Se-_-1),N.value=W.substr(Se+1)):N.attribute=W.substr(_+1),N},L.parseSsrcGroup=function(W){const _=W.substr(13).split(" ");return{semantics:_.shift(),ssrcs:_.map(N=>parseInt(N,10))}},L.getMid=function(W){const _=L.matchPrefix(W,"a=mid:")[0];if(_)return _.substr(6)},L.parseFingerprint=function(W){const _=W.substr(14).split(" ");return{algorithm:_[0].toLowerCase(),value:_[1].toUpperCase()}},L.getDtlsParameters=function(W,_){return{role:"auto",fingerprints:L.matchPrefix(W+_,"a=fingerprint:").map(L.parseFingerprint)}},L.writeDtlsParameters=function(W,_){let N="a=setup:"+_+"\r\n";return W.fingerprints.forEach(Se=>{N+="a=fingerprint:"+Se.algorithm+" "+Se.value+"\r\n"}),N},L.parseCryptoLine=function(W){const _=W.substr(9).split(" ");return{tag:parseInt(_[0],10),cryptoSuite:_[1],keyParams:_[2],sessionParams:_.slice(3)}},L.writeCryptoLine=function(W){return"a=crypto:"+W.tag+" "+W.cryptoSuite+" "+("object"==typeof W.keyParams?L.writeCryptoKeyParams(W.keyParams):W.keyParams)+(W.sessionParams?" "+W.sessionParams.join(" "):"")+"\r\n"},L.parseCryptoKeyParams=function(W){if(0!==W.indexOf("inline:"))return null;const _=W.substr(7).split("|");return{keyMethod:"inline",keySalt:_[0],lifeTime:_[1],mkiValue:_[2]?_[2].split(":")[0]:void 0,mkiLength:_[2]?_[2].split(":")[1]:void 0}},L.writeCryptoKeyParams=function(W){return W.keyMethod+":"+W.keySalt+(W.lifeTime?"|"+W.lifeTime:"")+(W.mkiValue&&W.mkiLength?"|"+W.mkiValue+":"+W.mkiLength:"")},L.getCryptoParameters=function(W,_){return L.matchPrefix(W+_,"a=crypto:").map(L.parseCryptoLine)},L.getIceParameters=function(W,_){const N=L.matchPrefix(W+_,"a=ice-ufrag:")[0],Se=L.matchPrefix(W+_,"a=ice-pwd:")[0];return N&&Se?{usernameFragment:N.substr(12),password:Se.substr(10)}:null},L.writeIceParameters=function(W){let _="a=ice-ufrag:"+W.usernameFragment+"\r\na=ice-pwd:"+W.password+"\r\n";return W.iceLite&&(_+="a=ice-lite\r\n"),_},L.parseRtpParameters=function(W){const _={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},Se=L.splitLines(W)[0].split(" ");for(let ce=3;ce<Se.length;ce++){const Re=Se[ce],re=L.matchPrefix(W,"a=rtpmap:"+Re+" ")[0];if(re){const m=L.parseRtpMap(re),B=L.matchPrefix(W,"a=fmtp:"+Re+" ");switch(m.parameters=B.length?L.parseFmtp(B[0]):{},m.rtcpFeedback=L.matchPrefix(W,"a=rtcp-fb:"+Re+" ").map(L.parseRtcpFb),_.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":_.fecMechanisms.push(m.name.toUpperCase())}}}return L.matchPrefix(W,"a=extmap:").forEach(ce=>{_.headerExtensions.push(L.parseExtmap(ce))}),_},L.writeRtpDescription=function(W,_){let N="";N+="m="+W+" ",N+=_.codecs.length>0?"9":"0",N+=" UDP/TLS/RTP/SAVPF ",N+=_.codecs.map(ce=>void 0!==ce.preferredPayloadType?ce.preferredPayloadType:ce.payloadType).join(" ")+"\r\n",N+="c=IN IP4 0.0.0.0\r\n",N+="a=rtcp:9 IN IP4 0.0.0.0\r\n",_.codecs.forEach(ce=>{N+=L.writeRtpMap(ce),N+=L.writeFmtp(ce),N+=L.writeRtcpFb(ce)});let Se=0;return _.codecs.forEach(ce=>{ce.maxptime>Se&&(Se=ce.maxptime)}),Se>0&&(N+="a=maxptime:"+Se+"\r\n"),_.headerExtensions&&_.headerExtensions.forEach(ce=>{N+=L.writeExtmap(ce)}),N},L.parseRtpEncodingParameters=function(W){const _=[],N=L.parseRtpParameters(W),Se=-1!==N.fecMechanisms.indexOf("RED"),ce=-1!==N.fecMechanisms.indexOf("ULPFEC"),Re=L.matchPrefix(W,"a=ssrc:").map(x=>L.parseSsrcMedia(x)).filter(x=>"cname"===x.attribute),re=Re.length>0&&Re[0].ssrc;let m;const B=L.matchPrefix(W,"a=ssrc-group:FID").map(x=>x.substr(17).split(" ").map(C=>parseInt(C,10)));B.length>0&&B[0].length>1&&B[0][0]===re&&(m=B[0][1]),N.codecs.forEach(x=>{if("RTX"===x.name.toUpperCase()&&x.parameters.apt){let j={ssrc:re,codecPayloadType:parseInt(x.parameters.apt,10)};re&&m&&(j.rtx={ssrc:m}),_.push(j),Se&&(j=JSON.parse(JSON.stringify(j)),j.fec={ssrc:re,mechanism:ce?"red+ulpfec":"red"},_.push(j))}}),0===_.length&&re&&_.push({ssrc:re});let D=L.matchPrefix(W,"b=");return D.length&&(D=0===D[0].indexOf("b=TIAS:")?parseInt(D[0].substr(7),10):0===D[0].indexOf("b=AS:")?1e3*parseInt(D[0].substr(5),10)*.95-16e3:void 0,_.forEach(x=>{x.maxBitrate=D})),_},L.parseRtcpParameters=function(W){const _={},N=L.matchPrefix(W,"a=ssrc:").map(Re=>L.parseSsrcMedia(Re)).filter(Re=>"cname"===Re.attribute)[0];N&&(_.cname=N.value,_.ssrc=N.ssrc);const Se=L.matchPrefix(W,"a=rtcp-rsize");_.reducedSize=Se.length>0,_.compound=0===Se.length;const ce=L.matchPrefix(W,"a=rtcp-mux");return _.mux=ce.length>0,_},L.writeRtcpParameters=function(W){let _="";return W.reducedSize&&(_+="a=rtcp-rsize\r\n"),W.mux&&(_+="a=rtcp-mux\r\n"),void 0!==W.ssrc&&W.cname&&(_+="a=ssrc:"+W.ssrc+" cname:"+W.cname+"\r\n"),_},L.parseMsid=function(W){let _;const N=L.matchPrefix(W,"a=msid:");if(1===N.length)return _=N[0].substr(7).split(" "),{stream:_[0],track:_[1]};const Se=L.matchPrefix(W,"a=ssrc:").map(ce=>L.parseSsrcMedia(ce)).filter(ce=>"msid"===ce.attribute);return Se.length>0?(_=Se[0].value.split(" "),{stream:_[0],track:_[1]}):void 0},L.parseSctpDescription=function(W){const _=L.parseMLine(W),N=L.matchPrefix(W,"a=max-message-size:");let Se;N.length>0&&(Se=parseInt(N[0].substr(19),10)),isNaN(Se)&&(Se=65536);const ce=L.matchPrefix(W,"a=sctp-port:");if(ce.length>0)return{port:parseInt(ce[0].substr(12),10),protocol:_.fmt,maxMessageSize:Se};const Re=L.matchPrefix(W,"a=sctpmap:");if(Re.length>0){const re=Re[0].substr(10).split(" ");return{port:parseInt(re[0],10),protocol:re[1],maxMessageSize:Se}}},L.writeSctpDescription=function(W,_){let N=[];return N="DTLS/SCTP"!==W.protocol?["m="+W.kind+" 9 "+W.protocol+" "+_.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+_.port+"\r\n"]:["m="+W.kind+" 9 "+W.protocol+" "+_.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+_.port+" "+_.protocol+" 65535\r\n"],void 0!==_.maxMessageSize&&N.push("a=max-message-size:"+_.maxMessageSize+"\r\n"),N.join("")},L.generateSessionId=function(){return Math.random().toString().substr(2,21)},L.writeSessionBoilerplate=function(W,_,N){let Se;const ce=void 0!==_?_:2;return Se=W||L.generateSessionId(),"v=0\r\no="+(N||"thisisadapterortc")+" "+Se+" "+ce+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},L.getDirection=function(W,_){const N=L.splitLines(W);for(let Se=0;Se<N.length;Se++)switch(N[Se]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return N[Se].substr(2)}return _?L.getDirection(_):"sendrecv"},L.getKind=function(W){return L.splitLines(W)[0].split(" ")[0].substr(2)},L.isRejected=function(W){return"0"===W.split(" ",2)[1]},L.parseMLine=function(W){const N=L.splitLines(W)[0].substr(2).split(" ");return{kind:N[0],port:parseInt(N[1],10),protocol:N[2],fmt:N.slice(3).join(" ")}},L.parseOLine=function(W){const N=L.matchPrefix(W,"o=")[0].substr(2).split(" ");return{username:N[0],sessionId:N[1],sessionVersion:parseInt(N[2],10),netType:N[3],addressType:N[4],address:N[5]}},L.isValidSDP=function(W){if("string"!=typeof W||0===W.length)return!1;const _=L.splitLines(W);for(let N=0;N<_.length;N++)if(_[N].length<2||"="!==_[N].charAt(1))return!1;return!0},it.exports=L},97:(it,L,W)=>{"use strict";W.d(L,{Z:()=>tt});var _={};W.r(_),W.d(_,{fixNegotiationNeeded:()=>ze,shimAddTrackRemoveTrack:()=>Ce,shimAddTrackRemoveTrackWithNative:()=>ye,shimGetDisplayMedia:()=>f,shimGetSendersWithDtmf:()=>R,shimGetStats:()=>M,shimGetUserMedia:()=>h,shimMediaStream:()=>E,shimOnTrack:()=>y,shimPeerConnection:()=>De,shimSenderReceiverGetStats:()=>z});var N={};W.r(N),W.d(N,{shimAddTransceiver:()=>F,shimCreateAnswer:()=>le,shimCreateOffer:()=>ve,shimGetDisplayMedia:()=>J,shimGetParameters:()=>te,shimGetUserMedia:()=>Oe,shimOnTrack:()=>Q,shimPeerConnection:()=>pe,shimRTCDataChannel:()=>S,shimReceiverGetStats:()=>Je,shimRemoveStream:()=>fe,shimSenderGetStats:()=>we});var Se={};W.r(Se),W.d(Se,{shimAudioContext:()=>Pe,shimCallbacksAPI:()=>Te,shimConstraints:()=>U,shimCreateOfferLegacy:()=>ae,shimGetUserMedia:()=>w,shimLocalStreamsAPI:()=>_e,shimRTCIceServerUrls:()=>q,shimRemoteStreamsAPI:()=>Ie,shimTrackEventTransceiver:()=>ie});var ce={};W.r(ce),W.d(ce,{removeExtmapAllowMixed:()=>Qe,shimAddIceCandidateNullOrEmpty:()=>ee,shimConnectionState:()=>ke,shimMaxMessageSize:()=>nt,shimParameterlessSetLocalDescription:()=>H,shimRTCIceCandidate:()=>Fe,shimSendThrowTypeError:()=>me});let Re=!0,re=!0;function m(T,de,Ae){const oe=T.match(de);return oe&&oe.length>=Ae&&parseInt(oe[Ae],10)}function B(T,de,Ae){if(!T.RTCPeerConnection)return;const oe=T.RTCPeerConnection.prototype,xe=oe.addEventListener;oe.addEventListener=function(ue,be){if(ue!==de)return xe.apply(this,arguments);const Be=X=>{const V=Ae(X);V&&(be.handleEvent?be.handleEvent(V):be(V))};return this._eventMap=this._eventMap||{},this._eventMap[de]||(this._eventMap[de]=new Map),this._eventMap[de].set(be,Be),xe.apply(this,[ue,Be])};const Xe=oe.removeEventListener;oe.removeEventListener=function(ue,be){if(ue!==de||!this._eventMap||!this._eventMap[de])return Xe.apply(this,arguments);if(!this._eventMap[de].has(be))return Xe.apply(this,arguments);const Be=this._eventMap[de].get(be);return this._eventMap[de].delete(be),0===this._eventMap[de].size&&delete this._eventMap[de],0===Object.keys(this._eventMap).length&&delete this._eventMap,Xe.apply(this,[ue,Be])},Object.defineProperty(oe,"on"+de,{get(){return this["_on"+de]},set(ue){this["_on"+de]&&(this.removeEventListener(de,this["_on"+de]),delete this["_on"+de]),ue&&this.addEventListener(de,this["_on"+de]=ue)},enumerable:!0,configurable:!0})}function D(T){return"boolean"!=typeof T?new Error("Argument type: "+typeof T+". Please use a boolean."):(Re=T,T?"adapter.js logging disabled":"adapter.js logging enabled")}function x(T){return"boolean"!=typeof T?new Error("Argument type: "+typeof T+". Please use a boolean."):(re=!T,"adapter.js deprecation warnings "+(T?"disabled":"enabled"))}function j(){if("object"==typeof window){if(Re)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function C(T,de){!re||console.warn(T+" is deprecated, please use "+de+" instead.")}function d(T){return"[object Object]"===Object.prototype.toString.call(T)}function g(T){return d(T)?Object.keys(T).reduce(function(de,Ae){const oe=d(T[Ae]),xe=oe?g(T[Ae]):T[Ae],Xe=oe&&!Object.keys(xe).length;return void 0===xe||Xe?de:Object.assign(de,{[Ae]:xe})},{}):T}function I(T,de,Ae){!de||Ae.has(de.id)||(Ae.set(de.id,de),Object.keys(de).forEach(oe=>{oe.endsWith("Id")?I(T,T.get(de[oe]),Ae):oe.endsWith("Ids")&&de[oe].forEach(xe=>{I(T,T.get(xe),Ae)})}))}function O(T,de,Ae){const oe=Ae?"outbound-rtp":"inbound-rtp",xe=new Map;if(null===de)return xe;const Xe=[];return T.forEach(ue=>{"track"===ue.type&&ue.trackIdentifier===de.id&&Xe.push(ue)}),Xe.forEach(ue=>{T.forEach(be=>{be.type===oe&&be.trackId===ue.id&&I(T,be,xe)})}),xe}const b=j;function h(T,de){const Ae=T&&T.navigator;if(!Ae.mediaDevices)return;const oe=function(be){if("object"!=typeof be||be.mandatory||be.optional)return be;const Be={};return Object.keys(be).forEach(X=>{if("require"===X||"advanced"===X||"mediaSource"===X)return;const V="object"==typeof be[X]?be[X]:{ideal:be[X]};void 0!==V.exact&&"number"==typeof V.exact&&(V.min=V.max=V.exact);const K=function(Me,qe){return Me?Me+qe.charAt(0).toUpperCase()+qe.slice(1):"deviceId"===qe?"sourceId":qe};if(void 0!==V.ideal){Be.optional=Be.optional||[];let Me={};"number"==typeof V.ideal?(Me[K("min",X)]=V.ideal,Be.optional.push(Me),Me={},Me[K("max",X)]=V.ideal,Be.optional.push(Me)):(Me[K("",X)]=V.ideal,Be.optional.push(Me))}void 0!==V.exact&&"number"!=typeof V.exact?(Be.mandatory=Be.mandatory||{},Be.mandatory[K("",X)]=V.exact):["min","max"].forEach(Me=>{void 0!==V[Me]&&(Be.mandatory=Be.mandatory||{},Be.mandatory[K(Me,X)]=V[Me])})}),be.advanced&&(Be.optional=(Be.optional||[]).concat(be.advanced)),Be},xe=function(be,Be){if(de.version>=61)return Be(be);if((be=JSON.parse(JSON.stringify(be)))&&"object"==typeof be.audio){const X=function(V,K,Me){K in V&&!(Me in V)&&(V[Me]=V[K],delete V[K])};X((be=JSON.parse(JSON.stringify(be))).audio,"autoGainControl","googAutoGainControl"),X(be.audio,"noiseSuppression","googNoiseSuppression"),be.audio=oe(be.audio)}if(be&&"object"==typeof be.video){let X=be.video.facingMode;X=X&&("object"==typeof X?X:{ideal:X});const V=de.version<66;if(X&&("user"===X.exact||"environment"===X.exact||"user"===X.ideal||"environment"===X.ideal)&&(!Ae.mediaDevices.getSupportedConstraints||!Ae.mediaDevices.getSupportedConstraints().facingMode||V)){let K;if(delete be.video.facingMode,"environment"===X.exact||"environment"===X.ideal?K=["back","rear"]:("user"===X.exact||"user"===X.ideal)&&(K=["front"]),K)return Ae.mediaDevices.enumerateDevices().then(Me=>{let qe=(Me=Me.filter(ct=>"videoinput"===ct.kind)).find(ct=>K.some(ht=>ct.label.toLowerCase().includes(ht)));return!qe&&Me.length&&K.includes("back")&&(qe=Me[Me.length-1]),qe&&(be.video.deviceId=X.exact?{exact:qe.deviceId}:{ideal:qe.deviceId}),be.video=oe(be.video),b("chrome: "+JSON.stringify(be)),Be(be)})}be.video=oe(be.video)}return b("chrome: "+JSON.stringify(be)),Be(be)},Xe=function(be){return de.version>=64?be:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[be.name]||be.name,message:be.message,constraint:be.constraint||be.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(Ae.getUserMedia=function(be,Be,X){xe(be,V=>{Ae.webkitGetUserMedia(V,Be,K=>{X&&X(Xe(K))})})}.bind(Ae),Ae.mediaDevices.getUserMedia){const be=Ae.mediaDevices.getUserMedia.bind(Ae.mediaDevices);Ae.mediaDevices.getUserMedia=function(Be){return xe(Be,X=>be(X).then(V=>{if(X.audio&&!V.getAudioTracks().length||X.video&&!V.getVideoTracks().length)throw V.getTracks().forEach(K=>{K.stop()}),new DOMException("","NotFoundError");return V},V=>Promise.reject(Xe(V))))}}}function f(T,de){if((!T.navigator.mediaDevices||!("getDisplayMedia"in T.navigator.mediaDevices))&&T.navigator.mediaDevices){if("function"!=typeof de)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");T.navigator.mediaDevices.getDisplayMedia=function(oe){return de(oe).then(xe=>{const Xe=oe.video&&oe.video.width,ue=oe.video&&oe.video.height;return oe.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:xe,maxFrameRate:oe.video&&oe.video.frameRate||3}},Xe&&(oe.video.mandatory.maxWidth=Xe),ue&&(oe.video.mandatory.maxHeight=ue),T.navigator.mediaDevices.getUserMedia(oe)})}}}function E(T){T.MediaStream=T.MediaStream||T.webkitMediaStream}function y(T){if("object"==typeof T&&T.RTCPeerConnection&&!("ontrack"in T.RTCPeerConnection.prototype)){Object.defineProperty(T.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(Ae){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=Ae)},enumerable:!0,configurable:!0});const de=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=oe=>{oe.stream.addEventListener("addtrack",xe=>{let Xe;Xe=T.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(be=>be.track&&be.track.id===xe.track.id):{track:xe.track};const ue=new Event("track");ue.track=xe.track,ue.receiver=Xe,ue.transceiver={receiver:Xe},ue.streams=[oe.stream],this.dispatchEvent(ue)}),oe.stream.getTracks().forEach(xe=>{let Xe;Xe=T.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(be=>be.track&&be.track.id===xe.id):{track:xe};const ue=new Event("track");ue.track=xe,ue.receiver=Xe,ue.transceiver={receiver:Xe},ue.streams=[oe.stream],this.dispatchEvent(ue)})},this.addEventListener("addstream",this._ontrackpoly)),de.apply(this,arguments)}}else B(T,"track",de=>(de.transceiver||Object.defineProperty(de,"transceiver",{value:{receiver:de.receiver}}),de))}function R(T){if("object"==typeof T&&T.RTCPeerConnection&&!("getSenders"in T.RTCPeerConnection.prototype)&&"createDTMFSender"in T.RTCPeerConnection.prototype){const de=function(xe,Xe){return{track:Xe,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===Xe.kind?xe.createDTMFSender(Xe):null),this._dtmf},_pc:xe}};if(!T.RTCPeerConnection.prototype.getSenders){T.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const xe=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addTrack=function(be,Be){let X=xe.apply(this,arguments);return X||(X=de(this,be),this._senders.push(X)),X};const Xe=T.RTCPeerConnection.prototype.removeTrack;T.RTCPeerConnection.prototype.removeTrack=function(be){Xe.apply(this,arguments);const Be=this._senders.indexOf(be);-1!==Be&&this._senders.splice(Be,1)}}const Ae=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(Xe){this._senders=this._senders||[],Ae.apply(this,[Xe]),Xe.getTracks().forEach(ue=>{this._senders.push(de(this,ue))})};const oe=T.RTCPeerConnection.prototype.removeStream;T.RTCPeerConnection.prototype.removeStream=function(Xe){this._senders=this._senders||[],oe.apply(this,[Xe]),Xe.getTracks().forEach(ue=>{const be=this._senders.find(Be=>Be.track===ue);be&&this._senders.splice(this._senders.indexOf(be),1)})}}else if("object"==typeof T&&T.RTCPeerConnection&&"getSenders"in T.RTCPeerConnection.prototype&&"createDTMFSender"in T.RTCPeerConnection.prototype&&T.RTCRtpSender&&!("dtmf"in T.RTCRtpSender.prototype)){const de=T.RTCPeerConnection.prototype.getSenders;T.RTCPeerConnection.prototype.getSenders=function(){const oe=de.apply(this,[]);return oe.forEach(xe=>xe._pc=this),oe},Object.defineProperty(T.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function M(T){if(!T.RTCPeerConnection)return;const de=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){const[oe,xe,Xe]=arguments;if(arguments.length>0&&"function"==typeof oe)return de.apply(this,arguments);if(0===de.length&&(0===arguments.length||"function"!=typeof oe))return de.apply(this,[]);const ue=function(Be){const X={};return Be.result().forEach(K=>{const Me={id:K.id,timestamp:K.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[K.type]||K.type};K.names().forEach(qe=>{Me[qe]=K.stat(qe)}),X[Me.id]=Me}),X},be=function(Be){return new Map(Object.keys(Be).map(X=>[X,Be[X]]))};return arguments.length>=2?de.apply(this,[function(X){xe(be(ue(X)))},oe]):new Promise((Be,X)=>{de.apply(this,[function(V){Be(be(ue(V)))},X])}).then(xe,Xe)}}function z(T){if(!("object"==typeof T&&T.RTCPeerConnection&&T.RTCRtpSender&&T.RTCRtpReceiver))return;if(!("getStats"in T.RTCRtpSender.prototype)){const Ae=T.RTCPeerConnection.prototype.getSenders;Ae&&(T.RTCPeerConnection.prototype.getSenders=function(){const Xe=Ae.apply(this,[]);return Xe.forEach(ue=>ue._pc=this),Xe});const oe=T.RTCPeerConnection.prototype.addTrack;oe&&(T.RTCPeerConnection.prototype.addTrack=function(){const Xe=oe.apply(this,arguments);return Xe._pc=this,Xe}),T.RTCRtpSender.prototype.getStats=function(){const Xe=this;return this._pc.getStats().then(ue=>O(ue,Xe.track,!0))}}if(!("getStats"in T.RTCRtpReceiver.prototype)){const Ae=T.RTCPeerConnection.prototype.getReceivers;Ae&&(T.RTCPeerConnection.prototype.getReceivers=function(){const xe=Ae.apply(this,[]);return xe.forEach(Xe=>Xe._pc=this),xe}),B(T,"track",oe=>(oe.receiver._pc=oe.srcElement,oe)),T.RTCRtpReceiver.prototype.getStats=function(){const xe=this;return this._pc.getStats().then(Xe=>O(Xe,xe.track,!1))}}if(!("getStats"in T.RTCRtpSender.prototype)||!("getStats"in T.RTCRtpReceiver.prototype))return;const de=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof T.MediaStreamTrack){const oe=arguments[0];let xe,Xe,ue;return this.getSenders().forEach(be=>{be.track===oe&&(xe?ue=!0:xe=be)}),this.getReceivers().forEach(be=>(be.track===oe&&(Xe?ue=!0:Xe=be),be.track===oe)),ue||xe&&Xe?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):xe?xe.getStats():Xe?Xe.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return de.apply(this,arguments)}}function ye(T){T.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(ue=>this._shimmedLocalStreams[ue][0])};const de=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addTrack=function(ue,be){if(!be)return de.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const Be=de.apply(this,arguments);return this._shimmedLocalStreams[be.id]?-1===this._shimmedLocalStreams[be.id].indexOf(Be)&&this._shimmedLocalStreams[be.id].push(Be):this._shimmedLocalStreams[be.id]=[be,Be],Be};const Ae=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(ue){this._shimmedLocalStreams=this._shimmedLocalStreams||{},ue.getTracks().forEach(X=>{if(this.getSenders().find(K=>K.track===X))throw new DOMException("Track already exists.","InvalidAccessError")});const be=this.getSenders();Ae.apply(this,arguments);const Be=this.getSenders().filter(X=>-1===be.indexOf(X));this._shimmedLocalStreams[ue.id]=[ue].concat(Be)};const oe=T.RTCPeerConnection.prototype.removeStream;T.RTCPeerConnection.prototype.removeStream=function(ue){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[ue.id],oe.apply(this,arguments)};const xe=T.RTCPeerConnection.prototype.removeTrack;T.RTCPeerConnection.prototype.removeTrack=function(ue){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},ue&&Object.keys(this._shimmedLocalStreams).forEach(be=>{const Be=this._shimmedLocalStreams[be].indexOf(ue);-1!==Be&&this._shimmedLocalStreams[be].splice(Be,1),1===this._shimmedLocalStreams[be].length&&delete this._shimmedLocalStreams[be]}),xe.apply(this,arguments)}}function Ce(T,de){if(!T.RTCPeerConnection)return;if(T.RTCPeerConnection.prototype.addTrack&&de.version>=65)return ye(T);const Ae=T.RTCPeerConnection.prototype.getLocalStreams;T.RTCPeerConnection.prototype.getLocalStreams=function(){const V=Ae.apply(this);return this._reverseStreams=this._reverseStreams||{},V.map(K=>this._reverseStreams[K.id])};const oe=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(V){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},V.getTracks().forEach(K=>{if(this.getSenders().find(qe=>qe.track===K))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[V.id]){const K=new T.MediaStream(V.getTracks());this._streams[V.id]=K,this._reverseStreams[K.id]=V,V=K}oe.apply(this,[V])};const xe=T.RTCPeerConnection.prototype.removeStream;function Xe(X,V){let K=V.sdp;return Object.keys(X._reverseStreams||[]).forEach(Me=>{const qe=X._reverseStreams[Me];K=K.replace(new RegExp(X._streams[qe.id].id,"g"),qe.id)}),new RTCSessionDescription({type:V.type,sdp:K})}function ue(X,V){let K=V.sdp;return Object.keys(X._reverseStreams||[]).forEach(Me=>{const qe=X._reverseStreams[Me],ct=X._streams[qe.id];K=K.replace(new RegExp(qe.id,"g"),ct.id)}),new RTCSessionDescription({type:V.type,sdp:K})}T.RTCPeerConnection.prototype.removeStream=function(V){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},xe.apply(this,[this._streams[V.id]||V]),delete this._reverseStreams[this._streams[V.id]?this._streams[V.id].id:V.id],delete this._streams[V.id]},T.RTCPeerConnection.prototype.addTrack=function(V,K){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const Me=[].slice.call(arguments,1);if(1!==Me.length||!Me[0].getTracks().find(ht=>ht===V))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(ht=>ht.track===V))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const ct=this._streams[K.id];if(ct)ct.addTrack(V),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const ht=new T.MediaStream([V]);this._streams[K.id]=ht,this._reverseStreams[ht.id]=K,this.addStream(ht)}return this.getSenders().find(ht=>ht.track===V)},["createOffer","createAnswer"].forEach(function(X){const V=T.RTCPeerConnection.prototype[X],K={[X](){const Me=arguments;return arguments.length&&"function"==typeof arguments[0]?V.apply(this,[ct=>{const ht=Xe(this,ct);Me[0].apply(null,[ht])},ct=>{Me[1]&&Me[1].apply(null,ct)},arguments[2]]):V.apply(this,arguments).then(ct=>Xe(this,ct))}};T.RTCPeerConnection.prototype[X]=K[X]});const be=T.RTCPeerConnection.prototype.setLocalDescription;T.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=ue(this,arguments[0]),be.apply(this,arguments)):be.apply(this,arguments)};const Be=Object.getOwnPropertyDescriptor(T.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(T.RTCPeerConnection.prototype,"localDescription",{get(){const X=Be.get.apply(this);return""===X.type?X:Xe(this,X)}}),T.RTCPeerConnection.prototype.removeTrack=function(V){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!V._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(V._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let Me;this._streams=this._streams||{},Object.keys(this._streams).forEach(qe=>{this._streams[qe].getTracks().find(ht=>V.track===ht)&&(Me=this._streams[qe])}),Me&&(1===Me.getTracks().length?this.removeStream(this._reverseStreams[Me.id]):Me.removeTrack(V.track),this.dispatchEvent(new Event("negotiationneeded")))}}function De(T,de){!T.RTCPeerConnection&&T.webkitRTCPeerConnection&&(T.RTCPeerConnection=T.webkitRTCPeerConnection),T.RTCPeerConnection&&de.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Ae){const oe=T.RTCPeerConnection.prototype[Ae],xe={[Ae](){return arguments[0]=new("addIceCandidate"===Ae?T.RTCIceCandidate:T.RTCSessionDescription)(arguments[0]),oe.apply(this,arguments)}};T.RTCPeerConnection.prototype[Ae]=xe[Ae]})}function ze(T,de){B(T,"negotiationneeded",Ae=>{const oe=Ae.target;if(!(de.version<72||oe.getConfiguration&&"plan-b"===oe.getConfiguration().sdpSemantics)||"stable"===oe.signalingState)return Ae})}function Oe(T,de){const Ae=T&&T.navigator,oe=T&&T.MediaStreamTrack;if(Ae.getUserMedia=function(xe,Xe,ue){C("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),Ae.mediaDevices.getUserMedia(xe).then(Xe,ue)},!(de.version>55&&"autoGainControl"in Ae.mediaDevices.getSupportedConstraints())){const xe=function(ue,be,Be){be in ue&&!(Be in ue)&&(ue[Be]=ue[be],delete ue[be])},Xe=Ae.mediaDevices.getUserMedia.bind(Ae.mediaDevices);if(Ae.mediaDevices.getUserMedia=function(ue){return"object"==typeof ue&&"object"==typeof ue.audio&&(ue=JSON.parse(JSON.stringify(ue)),xe(ue.audio,"autoGainControl","mozAutoGainControl"),xe(ue.audio,"noiseSuppression","mozNoiseSuppression")),Xe(ue)},oe&&oe.prototype.getSettings){const ue=oe.prototype.getSettings;oe.prototype.getSettings=function(){const be=ue.apply(this,arguments);return xe(be,"mozAutoGainControl","autoGainControl"),xe(be,"mozNoiseSuppression","noiseSuppression"),be}}if(oe&&oe.prototype.applyConstraints){const ue=oe.prototype.applyConstraints;oe.prototype.applyConstraints=function(be){return"audio"===this.kind&&"object"==typeof be&&(be=JSON.parse(JSON.stringify(be)),xe(be,"autoGainControl","mozAutoGainControl"),xe(be,"noiseSuppression","mozNoiseSuppression")),ue.apply(this,[be])}}}}function J(T,de){T.navigator.mediaDevices&&"getDisplayMedia"in T.navigator.mediaDevices||!T.navigator.mediaDevices||(T.navigator.mediaDevices.getDisplayMedia=function(oe){if(!oe||!oe.video){const xe=new DOMException("getDisplayMedia without video constraints is undefined");return xe.name="NotFoundError",xe.code=8,Promise.reject(xe)}return!0===oe.video?oe.video={mediaSource:de}:oe.video.mediaSource=de,T.navigator.mediaDevices.getUserMedia(oe)})}function Q(T){"object"==typeof T&&T.RTCTrackEvent&&"receiver"in T.RTCTrackEvent.prototype&&!("transceiver"in T.RTCTrackEvent.prototype)&&Object.defineProperty(T.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function pe(T,de){if("object"!=typeof T||!T.RTCPeerConnection&&!T.mozRTCPeerConnection)return;!T.RTCPeerConnection&&T.mozRTCPeerConnection&&(T.RTCPeerConnection=T.mozRTCPeerConnection),de.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(xe){const Xe=T.RTCPeerConnection.prototype[xe],ue={[xe](){return arguments[0]=new("addIceCandidate"===xe?T.RTCIceCandidate:T.RTCSessionDescription)(arguments[0]),Xe.apply(this,arguments)}};T.RTCPeerConnection.prototype[xe]=ue[xe]});const Ae={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},oe=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){const[Xe,ue,be]=arguments;return oe.apply(this,[Xe||null]).then(Be=>{if(de.version<53&&!ue)try{Be.forEach(X=>{X.type=Ae[X.type]||X.type})}catch(X){if("TypeError"!==X.name)throw X;Be.forEach((V,K)=>{Be.set(K,Object.assign({},V,{type:Ae[V.type]||V.type}))})}return Be}).then(ue,be)}}function we(T){if("object"!=typeof T||!T.RTCPeerConnection||!T.RTCRtpSender||T.RTCRtpSender&&"getStats"in T.RTCRtpSender.prototype)return;const de=T.RTCPeerConnection.prototype.getSenders;de&&(T.RTCPeerConnection.prototype.getSenders=function(){const xe=de.apply(this,[]);return xe.forEach(Xe=>Xe._pc=this),xe});const Ae=T.RTCPeerConnection.prototype.addTrack;Ae&&(T.RTCPeerConnection.prototype.addTrack=function(){const xe=Ae.apply(this,arguments);return xe._pc=this,xe}),T.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Je(T){if("object"!=typeof T||!T.RTCPeerConnection||!T.RTCRtpSender||T.RTCRtpSender&&"getStats"in T.RTCRtpReceiver.prototype)return;const de=T.RTCPeerConnection.prototype.getReceivers;de&&(T.RTCPeerConnection.prototype.getReceivers=function(){const oe=de.apply(this,[]);return oe.forEach(xe=>xe._pc=this),oe}),B(T,"track",Ae=>(Ae.receiver._pc=Ae.srcElement,Ae)),T.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function fe(T){!T.RTCPeerConnection||"removeStream"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.removeStream=function(Ae){C("removeStream","removeTrack"),this.getSenders().forEach(oe=>{oe.track&&Ae.getTracks().includes(oe.track)&&this.removeTrack(oe)})})}function S(T){T.DataChannel&&!T.RTCDataChannel&&(T.RTCDataChannel=T.DataChannel)}function F(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const de=T.RTCPeerConnection.prototype.addTransceiver;de&&(T.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const oe=arguments[1],xe=oe&&"sendEncodings"in oe;xe&&oe.sendEncodings.forEach(ue=>{if("rid"in ue&&!/^[a-z0-9]{0,16}$/i.test(ue.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in ue&&!(parseFloat(ue.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in ue&&!(parseFloat(ue.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const Xe=de.apply(this,arguments);if(xe){const{sender:ue}=Xe,be=ue.getParameters();(!("encodings"in be)||1===be.encodings.length&&0===Object.keys(be.encodings[0]).length)&&(be.encodings=oe.sendEncodings,ue.sendEncodings=oe.sendEncodings,this.setParametersPromises.push(ue.setParameters(be).then(()=>{delete ue.sendEncodings}).catch(()=>{delete ue.sendEncodings})))}return Xe})}function te(T){if("object"!=typeof T||!T.RTCRtpSender)return;const de=T.RTCRtpSender.prototype.getParameters;de&&(T.RTCRtpSender.prototype.getParameters=function(){const oe=de.apply(this,arguments);return"encodings"in oe||(oe.encodings=[].concat(this.sendEncodings||[{}])),oe})}function ve(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const de=T.RTCPeerConnection.prototype.createOffer;T.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>de.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):de.apply(this,arguments)}}function le(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const de=T.RTCPeerConnection.prototype.createAnswer;T.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>de.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):de.apply(this,arguments)}}function _e(T){if("object"==typeof T&&T.RTCPeerConnection){if("getLocalStreams"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in T.RTCPeerConnection.prototype)){const de=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addStream=function(oe){this._localStreams||(this._localStreams=[]),this._localStreams.includes(oe)||this._localStreams.push(oe),oe.getAudioTracks().forEach(xe=>de.call(this,xe,oe)),oe.getVideoTracks().forEach(xe=>de.call(this,xe,oe))},T.RTCPeerConnection.prototype.addTrack=function(oe,...xe){return xe&&xe.forEach(Xe=>{this._localStreams?this._localStreams.includes(Xe)||this._localStreams.push(Xe):this._localStreams=[Xe]}),de.apply(this,arguments)}}"removeStream"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.removeStream=function(Ae){this._localStreams||(this._localStreams=[]);const oe=this._localStreams.indexOf(Ae);if(-1===oe)return;this._localStreams.splice(oe,1);const xe=Ae.getTracks();this.getSenders().forEach(Xe=>{xe.includes(Xe.track)&&this.removeTrack(Xe)})})}}function Ie(T){if("object"==typeof T&&T.RTCPeerConnection&&("getRemoteStreams"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in T.RTCPeerConnection.prototype))){Object.defineProperty(T.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(Ae){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=Ae),this.addEventListener("track",this._onaddstreampoly=oe=>{oe.streams.forEach(xe=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(xe))return;this._remoteStreams.push(xe);const Xe=new Event("addstream");Xe.stream=xe,this.dispatchEvent(Xe)})})}});const de=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){const oe=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(xe){xe.streams.forEach(Xe=>{if(oe._remoteStreams||(oe._remoteStreams=[]),oe._remoteStreams.indexOf(Xe)>=0)return;oe._remoteStreams.push(Xe);const ue=new Event("addstream");ue.stream=Xe,oe.dispatchEvent(ue)})}),de.apply(oe,arguments)}}}function Te(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const de=T.RTCPeerConnection.prototype,Ae=de.createOffer,oe=de.createAnswer,xe=de.setLocalDescription,Xe=de.setRemoteDescription,ue=de.addIceCandidate;de.createOffer=function(X,V){const K=arguments.length>=2?arguments[2]:arguments[0],Me=Ae.apply(this,[K]);return V?(Me.then(X,V),Promise.resolve()):Me},de.createAnswer=function(X,V){const K=arguments.length>=2?arguments[2]:arguments[0],Me=oe.apply(this,[K]);return V?(Me.then(X,V),Promise.resolve()):Me};let be=function(Be,X,V){const K=xe.apply(this,[Be]);return V?(K.then(X,V),Promise.resolve()):K};de.setLocalDescription=be,be=function(Be,X,V){const K=Xe.apply(this,[Be]);return V?(K.then(X,V),Promise.resolve()):K},de.setRemoteDescription=be,be=function(Be,X,V){const K=ue.apply(this,[Be]);return V?(K.then(X,V),Promise.resolve()):K},de.addIceCandidate=be}function w(T){const de=T&&T.navigator;if(de.mediaDevices&&de.mediaDevices.getUserMedia){const Ae=de.mediaDevices,oe=Ae.getUserMedia.bind(Ae);de.mediaDevices.getUserMedia=xe=>oe(U(xe))}!de.getUserMedia&&de.mediaDevices&&de.mediaDevices.getUserMedia&&(de.getUserMedia=function(oe,xe,Xe){de.mediaDevices.getUserMedia(oe).then(xe,Xe)}.bind(de))}function U(T){return T&&void 0!==T.video?Object.assign({},T,{video:g(T.video)}):T}function q(T){if(!T.RTCPeerConnection)return;const de=T.RTCPeerConnection;T.RTCPeerConnection=function(oe,xe){if(oe&&oe.iceServers){const Xe=[];for(let ue=0;ue<oe.iceServers.length;ue++){let be=oe.iceServers[ue];!be.hasOwnProperty("urls")&&be.hasOwnProperty("url")?(C("RTCIceServer.url","RTCIceServer.urls"),be=JSON.parse(JSON.stringify(be)),be.urls=be.url,delete be.url,Xe.push(be)):Xe.push(oe.iceServers[ue])}oe.iceServers=Xe}return new de(oe,xe)},T.RTCPeerConnection.prototype=de.prototype,"generateCertificate"in de&&Object.defineProperty(T.RTCPeerConnection,"generateCertificate",{get:()=>de.generateCertificate})}function ie(T){"object"==typeof T&&T.RTCTrackEvent&&"receiver"in T.RTCTrackEvent.prototype&&!("transceiver"in T.RTCTrackEvent.prototype)&&Object.defineProperty(T.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ae(T){const de=T.RTCPeerConnection.prototype.createOffer;T.RTCPeerConnection.prototype.createOffer=function(oe){if(oe){void 0!==oe.offerToReceiveAudio&&(oe.offerToReceiveAudio=!!oe.offerToReceiveAudio);const xe=this.getTransceivers().find(ue=>"audio"===ue.receiver.track.kind);!1===oe.offerToReceiveAudio&&xe?"sendrecv"===xe.direction?xe.setDirection?xe.setDirection("sendonly"):xe.direction="sendonly":"recvonly"===xe.direction&&(xe.setDirection?xe.setDirection("inactive"):xe.direction="inactive"):!0===oe.offerToReceiveAudio&&!xe&&this.addTransceiver("audio",{direction:"recvonly"}),void 0!==oe.offerToReceiveVideo&&(oe.offerToReceiveVideo=!!oe.offerToReceiveVideo);const Xe=this.getTransceivers().find(ue=>"video"===ue.receiver.track.kind);!1===oe.offerToReceiveVideo&&Xe?"sendrecv"===Xe.direction?Xe.setDirection?Xe.setDirection("sendonly"):Xe.direction="sendonly":"recvonly"===Xe.direction&&(Xe.setDirection?Xe.setDirection("inactive"):Xe.direction="inactive"):!0===oe.offerToReceiveVideo&&!Xe&&this.addTransceiver("video",{direction:"recvonly"})}return de.apply(this,arguments)}}function Pe(T){"object"!=typeof T||T.AudioContext||(T.AudioContext=T.webkitAudioContext)}var Ke=W(463),ot=W.n(Ke);function Fe(T){if(!T.RTCIceCandidate||T.RTCIceCandidate&&"foundation"in T.RTCIceCandidate.prototype)return;const de=T.RTCIceCandidate;T.RTCIceCandidate=function(oe){if("object"==typeof oe&&oe.candidate&&0===oe.candidate.indexOf("a=")&&((oe=JSON.parse(JSON.stringify(oe))).candidate=oe.candidate.substr(2)),oe.candidate&&oe.candidate.length){const xe=new de(oe),Xe=ot().parseCandidate(oe.candidate),ue=Object.assign(xe,Xe);return ue.toJSON=function(){return{candidate:ue.candidate,sdpMid:ue.sdpMid,sdpMLineIndex:ue.sdpMLineIndex,usernameFragment:ue.usernameFragment}},ue}return new de(oe)},T.RTCIceCandidate.prototype=de.prototype,B(T,"icecandidate",Ae=>(Ae.candidate&&Object.defineProperty(Ae,"candidate",{value:new T.RTCIceCandidate(Ae.candidate),writable:"false"}),Ae))}function nt(T,de){if(!T.RTCPeerConnection)return;"sctp"in T.RTCPeerConnection.prototype||Object.defineProperty(T.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const Ae=function(be){if(!be||!be.sdp)return!1;const Be=ot().splitSections(be.sdp);return Be.shift(),Be.some(X=>{const V=ot().parseMLine(X);return V&&"application"===V.kind&&-1!==V.protocol.indexOf("SCTP")})},oe=function(be){const Be=be.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===Be||Be.length<2)return-1;const X=parseInt(Be[1],10);return X!=X?-1:X},xe=function(be){let Be=65536;return"firefox"===de.browser&&(Be=de.version<57?-1===be?16384:2147483637:de.version<60?57===de.version?65535:65536:2147483637),Be},Xe=function(be,Be){let X=65536;"firefox"===de.browser&&57===de.version&&(X=65535);const V=ot().matchPrefix(be.sdp,"a=max-message-size:");return V.length>0?X=parseInt(V[0].substr(19),10):"firefox"===de.browser&&-1!==Be&&(X=2147483637),X},ue=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===de.browser&&de.version>=76){const{sdpSemantics:Be}=this.getConfiguration();"plan-b"===Be&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(Ae(arguments[0])){const Be=oe(arguments[0]),X=xe(Be),V=Xe(arguments[0],Be);let K;K=0===X&&0===V?Number.POSITIVE_INFINITY:0===X||0===V?Math.max(X,V):Math.min(X,V);const Me={};Object.defineProperty(Me,"maxMessageSize",{get:()=>K}),this._sctp=Me}return ue.apply(this,arguments)}}function me(T){if(!T.RTCPeerConnection||!("createDataChannel"in T.RTCPeerConnection.prototype))return;function de(oe,xe){const Xe=oe.send;oe.send=function(){const be=arguments[0],Be=be.length||be.size||be.byteLength;if("open"===oe.readyState&&xe.sctp&&Be>xe.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+xe.sctp.maxMessageSize+" bytes)");return Xe.apply(oe,arguments)}}const Ae=T.RTCPeerConnection.prototype.createDataChannel;T.RTCPeerConnection.prototype.createDataChannel=function(){const xe=Ae.apply(this,arguments);return de(xe,this),xe},B(T,"datachannel",oe=>(de(oe.channel,oe.target),oe))}function ke(T){if(!T.RTCPeerConnection||"connectionState"in T.RTCPeerConnection.prototype)return;const de=T.RTCPeerConnection.prototype;Object.defineProperty(de,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(de,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(Ae){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),Ae&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=Ae)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(Ae=>{const oe=de[Ae];de[Ae]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=xe=>{const Xe=xe.target;if(Xe._lastConnectionState!==Xe.connectionState){Xe._lastConnectionState=Xe.connectionState;const ue=new Event("connectionstatechange",xe);Xe.dispatchEvent(ue)}return xe},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),oe.apply(this,arguments)}})}function Qe(T,de){if(!T.RTCPeerConnection||"chrome"===de.browser&&de.version>=71||"safari"===de.browser&&de.version>=605)return;const Ae=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(xe){if(xe&&xe.sdp&&-1!==xe.sdp.indexOf("\na=extmap-allow-mixed")){const Xe=xe.sdp.split("\n").filter(ue=>"a=extmap-allow-mixed"!==ue.trim()).join("\n");T.RTCSessionDescription&&xe instanceof T.RTCSessionDescription?arguments[0]=new T.RTCSessionDescription({type:xe.type,sdp:Xe}):xe.sdp=Xe}return Ae.apply(this,arguments)}}function ee(T,de){if(!T.RTCPeerConnection||!T.RTCPeerConnection.prototype)return;const Ae=T.RTCPeerConnection.prototype.addIceCandidate;!Ae||0===Ae.length||(T.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===de.browser&&de.version<78||"firefox"===de.browser&&de.version<68||"safari"===de.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():Ae.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function H(T,de){if(!T.RTCPeerConnection||!T.RTCPeerConnection.prototype)return;const Ae=T.RTCPeerConnection.prototype.setLocalDescription;!Ae||0===Ae.length||(T.RTCPeerConnection.prototype.setLocalDescription=function(){let xe=arguments[0]||{};if("object"!=typeof xe||xe.type&&xe.sdp)return Ae.apply(this,arguments);if(xe={type:xe.type,sdp:xe.sdp},!xe.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":xe.type="offer";break;default:xe.type="answer"}return xe.sdp||"offer"!==xe.type&&"answer"!==xe.type?Ae.apply(this,[xe]):("offer"===xe.type?this.createOffer:this.createAnswer).apply(this).then(ue=>Ae.apply(this,[ue]))})}const tt=function ge({window:T}={},de={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const Ae=j,oe=function u(T){const de={browser:null,version:null};if(void 0===T||!T.navigator)return de.browser="Not a browser.",de;const{navigator:Ae}=T;if(Ae.mozGetUserMedia)de.browser="firefox",de.version=m(Ae.userAgent,/Firefox\/(\d+)\./,1);else if(Ae.webkitGetUserMedia||!1===T.isSecureContext&&T.webkitRTCPeerConnection&&!T.RTCIceGatherer)de.browser="chrome",de.version=m(Ae.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!T.RTCPeerConnection||!Ae.userAgent.match(/AppleWebKit\/(\d+)\./))return de.browser="Not a supported browser.",de;de.browser="safari",de.version=m(Ae.userAgent,/AppleWebKit\/(\d+)\./,1),de.supportsUnifiedPlan=T.RTCRtpTransceiver&&"currentDirection"in T.RTCRtpTransceiver.prototype}return de}(T),xe={browserDetails:oe,commonShim:ce,extractVersion:m,disableLog:D,disableWarnings:x,sdp:Ke};switch(oe.browser){case"chrome":if(!_||!De||!de.shimChrome)return Ae("Chrome shim is not included in this adapter release."),xe;if(null===oe.version)return Ae("Chrome shim can not determine version, not shimming."),xe;Ae("adapter.js shimming chrome."),xe.browserShim=_,ee(T,oe),H(T),h(T,oe),E(T),De(T,oe),y(T),Ce(T,oe),R(T),M(T),z(T),ze(T,oe),Fe(T),ke(T),nt(T,oe),me(T),Qe(T,oe);break;case"firefox":if(!N||!pe||!de.shimFirefox)return Ae("Firefox shim is not included in this adapter release."),xe;Ae("adapter.js shimming firefox."),xe.browserShim=N,ee(T,oe),H(T),Oe(T,oe),pe(T,oe),Q(T),fe(T),we(T),Je(T),S(T),F(T),te(T),ve(T),le(T),Fe(T),ke(T),nt(T,oe),me(T);break;case"safari":if(!Se||!de.shimSafari)return Ae("Safari shim is not included in this adapter release."),xe;Ae("adapter.js shimming safari."),xe.browserShim=Se,ee(T,oe),H(T),q(T),ae(T),Te(T),_e(T),Ie(T),ie(T),w(T),Pe(T),Fe(T),nt(T,oe),me(T),Qe(T,oe);break;default:Ae("Unsupported browser!")}return xe}({window:"undefined"==typeof window?void 0:window})},69:it=>{function L(){}it.exports=L,L.mixin=function(W){var _=W.prototype||W;_.isWildEmitter=!0,_.on=function(N,Se,ce){this.callbacks=this.callbacks||{};var Re=3===arguments.length,re=Re?arguments[1]:void 0,m=Re?arguments[2]:arguments[1];return m._groupName=re,(this.callbacks[N]=this.callbacks[N]||[]).push(m),this},_.once=function(N,Se,ce){var Re=this,re=3===arguments.length,m=re?arguments[1]:void 0,B=re?arguments[2]:arguments[1];function D(){Re.off(N,D),B.apply(this,arguments)}return this.on(N,m,D),this},_.releaseGroup=function(N){var Se,ce,Re,re;for(Se in this.callbacks=this.callbacks||{},this.callbacks)for(ce=0,Re=(re=this.callbacks[Se]).length;ce<Re;ce++)re[ce]._groupName===N&&(re.splice(ce,1),ce--,Re--);return this},_.off=function(N,Se){this.callbacks=this.callbacks||{};var Re,ce=this.callbacks[N];return ce?1===arguments.length?(delete this.callbacks[N],this):(-1!==(Re=ce.indexOf(Se))&&(ce.splice(Re,1),0===ce.length&&delete this.callbacks[N]),this):this},_.emit=function(N){this.callbacks=this.callbacks||{};var re,m,D,Se=[].slice.call(arguments,1),ce=this.callbacks[N],Re=this.getWildcardCallbacks(N);if(ce)for(re=0,m=(D=ce.slice()).length;re<m&&D[re];++re)D[re].apply(this,Se);if(Re)for(m=Re.length,re=0,m=(D=Re.slice()).length;re<m&&D[re];++re)D[re].apply(this,[N].concat(Se));return this},_.getWildcardCallbacks=function(N){this.callbacks=this.callbacks||{};var Se,ce,Re=[];for(Se in this.callbacks)ce=Se.split("*"),("*"===Se||2===ce.length&&N.slice(0,ce[0].length)===ce[0])&&(Re=Re.concat(this.callbacks[Se]));return Re}},L.mixin(L)},926:it=>{function L(_,N,Se,ce,Re,re,m){try{var B=_[re](m),D=B.value}catch(x){return void Se(x)}B.done?N(D):Promise.resolve(D).then(ce,Re)}it.exports=function W(_){return function(){var N=this,Se=arguments;return new Promise(function(ce,Re){var re=_.apply(N,Se);function m(D){L(re,ce,Re,m,B,"next",D)}function B(D){L(re,ce,Re,m,B,"throw",D)}m(void 0)})}},it.exports.__esModule=!0,it.exports.default=it.exports},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},it=>{it(it.s=901)}]);
var w2=Object.defineProperty,D2=Object.defineProperties,T2=Object.getOwnPropertyDescriptors,yS=Object.getOwnPropertySymbols,M2=Object.prototype.hasOwnProperty,P2=Object.prototype.propertyIsEnumerable,Dp=(We,k,X)=>k in We?w2(We,k,{enumerable:!0,configurable:!0,writable:!0,value:X}):We[k]=X,Tp=(We,k)=>{for(var X in k||(k={}))M2.call(k,X)&&Dp(We,X,k[X]);if(yS)for(var X of yS(k))P2.call(k,X)&&Dp(We,X,k[X]);return We},Mp=(We,k)=>D2(We,T2(k)),Cu=(We,k,X)=>(Dp(We,"symbol"!=typeof k?k+"":k,X),X),Pp=(We,k,X)=>{if(!k.has(We))throw TypeError("Cannot "+X)},ft=(We,k,X)=>(Pp(We,k,"read from private field"),X?X.call(We):k.get(We)),vt=(We,k,X)=>{if(k.has(We))throw TypeError("Cannot add the same private member more than once");k instanceof WeakSet?k.add(We):k.set(We,X)},dn=(We,k,X,p)=>(Pp(We,k,"write to private field"),p?p.call(We,X):k.set(We,X),X),vS=(We,k,X,p)=>({set _(ce){dn(We,k,ce,X)},get _(){return ft(We,k,p)}}),mt=(We,k,X)=>(Pp(We,k,"access private method"),X);(self.webpackChunkangularPlayer=self.webpackChunkangularPlayer||[]).push([[179],{135:(We,k,X)=>{"use strict";function p(n){return"function"==typeof n}function ce(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ae=ce(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function le(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class pe{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(p(r))try{r()}catch(s){e=s instanceof ae?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{$(s)}catch(o){e=null!=e?e:[],o instanceof ae?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ae(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$(e);else{if(e instanceof pe){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&le(t,e)}remove(e){const{_finalizers:t}=this;t&&le(t,e),e instanceof pe&&e._removeParent(this)}}pe.EMPTY=(()=>{const n=new pe;return n.closed=!0,n})();const Q=pe.EMPTY;function y(n){return n instanceof pe||n&&"closed"in n&&p(n.remove)&&p(n.add)&&p(n.unsubscribe)}function $(n){p(n)?n():n.unsubscribe()}const P={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(n,e,...t){const{delegate:r}=N;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=N;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function O(n){N.setTimeout(()=>{const{onUnhandledError:e}=P;if(!e)throw n;e(n)})}function b(){}const _=H("C",void 0,void 0);function H(n,e,t){return{kind:n,value:e,error:t}}let M=null;function x(n){if(P.useDeprecatedSynchronousErrorHandling){const e=!M;if(e&&(M={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=M;if(M=null,t)throw r}}else n()}class g extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,y(e)&&e.add(this)):this.destination=ve}static create(e,t,r){return new Y(e,t,r)}next(e){this.isStopped?ue(function S(n){return H("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ue(function h(n){return H("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ue(_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const R=Function.prototype.bind;function I(n,e){return R.call(n,e)}class V{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ne(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ne(r)}else ne(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ne(t)}}}class Y extends g{constructor(e,t,r){let i;if(super(),p(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let s;this&&P.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&I(e.next,s),error:e.error&&I(e.error,s),complete:e.complete&&I(e.complete,s)}):i=e}this.destination=new V(i)}}function ne(n){P.useDeprecatedSynchronousErrorHandling?function u(n){P.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=n)}(n):O(n)}function ue(n,e){const{onStoppedNotification:t}=P;t&&N.setTimeout(()=>t(n,e))}const ve={closed:!0,next:b,error:function re(n){throw n},complete:b},we="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ie(n){return n}let Pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function J(n){return n&&n instanceof g||function $e(n){return n&&p(n.next)&&p(n.error)&&p(n.complete)}(n)&&y(n)}(t)?t:new Y(t,r,i);return x(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Fe(r))((i,s)=>{const o=new Y({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[we](){return this}pipe(...t){return function Me(n){return 0===n.length?Ie:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=Fe(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Fe(n){var e;return null!==(e=null!=n?n:P.Promise)&&void 0!==e?e:Promise}const v=ce(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new d(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new v}next(t){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Q:(this.currentObservers=null,s.push(t),new pe(()=>{this.currentObservers=null,le(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Pe;return t.source=this,t}}return n.create=(e,t)=>new d(e,t),n})();class d extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Q}}function C(n){return p(null==n?void 0:n.lift)}function D(n){return e=>{if(C(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function F(n,e,t,r,i){return new j(n,e,t,r,i)}class j extends g{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function W(n,e){return D((t,r)=>{let i=0;t.subscribe(F(r,s=>{r.next(n.call(e,s,i++))}))})}function Xe(n){return this instanceof Xe?(this.v=n,this):new Xe(n)}function it(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(G){r[G]&&(i[G]=function(ee){return new Promise(function(Ee,Le){s.push([G,ee,Ee,Le])>1||a(G,ee)})})}function a(G,ee){try{!function l(G){G.value instanceof Xe?Promise.resolve(G.value.v).then(c,f):w(s[0][2],G)}(r[G](ee))}catch(Ee){w(s[0][3],Ee)}}function c(G){a("next",G)}function f(G){a("throw",G)}function w(G,ee){G(ee),s.shift(),s.length&&a(s[0][0],s[0][1])}}function he(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function U(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const me=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Se(n){return p(null==n?void 0:n.then)}function Ye(n){return p(n[we])}function et(n){return Symbol.asyncIterator&&p(null==n?void 0:n[Symbol.asyncIterator])}function bt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vt=function Ct(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cn(n){return p(null==n?void 0:n[Vt])}function cr(n){return it(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Xe(t.read());if(i)return yield Xe(void 0);yield yield Xe(r)}}finally{t.releaseLock()}})}function rn(n){return p(null==n?void 0:n.getReader)}function sn(n){if(n instanceof Pe)return n;if(null!=n){if(Ye(n))return function Rr(n){return new Pe(e=>{const t=n[we]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(me(n))return function yr(n){return new Pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Se(n))return function kr(n){return new Pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,O)})}(n);if(et(n))return vn(n);if(cn(n))return function Vn(n){return new Pe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(rn(n))return function _s(n){return vn(cr(n))}(n)}throw bt(n)}function vn(n){return new Pe(e=>{(function Xo(n,e){var t,r,i,s;return function tt(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(f){try{c(r.next(f))}catch(w){o(w)}}function l(f){try{c(r.throw(f))}catch(w){o(w)}}function c(f){f.done?s(f.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=he(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function xi(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ln(n,e,t=1/0){return p(e)?Ln((r,i)=>W((s,o)=>e(r,s,i,o))(sn(n(r,i))),t):("number"==typeof e&&(t=e),D((r,i)=>function IS(n,e,t,r,i,s,o,a){const l=[];let c=0,f=0,w=!1;const G=()=>{w&&!l.length&&!c&&e.complete()},ee=Le=>c<r?Ee(Le):l.push(Le),Ee=Le=>{s&&e.next(Le),c++;let Je=!1;sn(t(Le,f++)).subscribe(F(e,Ze=>{null==i||i(Ze),s?ee(Ze):e.next(Ze)},()=>{Je=!0},void 0,()=>{if(Je)try{for(c--;l.length&&c<r;){const Ze=l.shift();o?xi(e,o,()=>Ee(Ze)):Ee(Ze)}G()}catch(Ze){e.error(Ze)}}))};return n.subscribe(F(e,ee,()=>{w=!0,G()})),()=>{null==a||a()}}(r,i,n,t)))}function Ko(n=1/0){return Ln(Ie,n)}const Ii=new Pe(n=>n.complete());function wu(n){return n[n.length-1]}function kp(n){return p(wu(n))?n.pop():void 0}function Yo(n){return function kS(n){return n&&p(n.schedule)}(wu(n))?n.pop():void 0}function Op(n,e=0){return D((t,r)=>{t.subscribe(F(r,i=>xi(r,n,()=>r.next(i),e),()=>xi(r,n,()=>r.complete(),e),i=>xi(r,n,()=>r.error(i),e)))})}function Fp(n,e=0){return D((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Lp(n,e){if(!n)throw new Error("Iterable cannot be null");return new Pe(t=>{xi(t,e,()=>{const r=n[Symbol.asyncIterator]();xi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Hn(n,e){return e?function VS(n,e){if(null!=n){if(Ye(n))return function FS(n,e){return sn(n).pipe(Fp(e),Op(e))}(n,e);if(me(n))return function NS(n,e){return new Pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Se(n))return function LS(n,e){return sn(n).pipe(Fp(e),Op(e))}(n,e);if(et(n))return Lp(n,e);if(cn(n))return function BS(n,e){return new Pe(t=>{let r;return xi(t,e,()=>{r=n[Vt](),xi(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>p(null==r?void 0:r.return)&&r.return()})}(n,e);if(rn(n))return function jS(n,e){return Lp(cr(n),e)}(n,e)}throw bt(n)}(n,e):sn(n)}function Jo(n){return n<=0?()=>Ii:D((e,t)=>{let r=0;e.subscribe(F(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Np(n={}){const{connector:e=(()=>new E),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o=null,a=null,l=null,c=0,f=!1,w=!1;const G=()=>{null==a||a.unsubscribe(),a=null},ee=()=>{G(),o=l=null,f=w=!1},Ee=()=>{const Le=o;ee(),null==Le||Le.unsubscribe()};return D((Le,Je)=>{c++,!w&&!f&&G();const Ze=l=null!=l?l:e();Je.add(()=>{c--,0===c&&!w&&!f&&(a=Du(Ee,i))}),Ze.subscribe(Je),o||(o=new Y({next:He=>Ze.next(He),error:He=>{w=!0,G(),a=Du(ee,t,He),Ze.error(He)},complete:()=>{f=!0,G(),a=Du(ee,r),Ze.complete()}}),Hn(Le).subscribe(o))})(s)}}function Du(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Jo(1)).subscribe(()=>n())}function Zt(n){for(let e in n)if(n[e]===Zt)return e;throw Error("Could not find renamed property on target object.")}function Tu(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Yt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Yt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Mu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const US=Zt({__forward_ref__:Zt});function Pu(n){return n.__forward_ref__=Pu,n.toString=function(){return Yt(this())},n}function kt(n){return function Bp(n){return"function"==typeof n&&n.hasOwnProperty(US)&&n.__forward_ref__===Pu}(n)?n():n}class qt extends Error{constructor(e,t){super(function xu(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Pt(n){return"string"==typeof n?n:null==n?"":String(n)}function Un(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pt(n)}function ml(n,e){const t=e?` in ${e}`:"";throw new qt(-201,`No provider for ${Un(n)} found${t}`)}function br(n,e){null==n&&function en(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Rt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Iu(n){return jp(n,_l)||jp(n,Hp)}function jp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Vp(n){return n&&(n.hasOwnProperty(Ru)||n.hasOwnProperty(KS))?n[Ru]:null}const _l=Zt({\u0275prov:Zt}),Ru=Zt({\u0275inj:Zt}),Hp=Zt({ngInjectableDef:Zt}),KS=Zt({ngInjectorDef:Zt});var Mt=(()=>((Mt=Mt||{})[Mt.Default=0]="Default",Mt[Mt.Host=1]="Host",Mt[Mt.Self=2]="Self",Mt[Mt.SkipSelf=4]="SkipSelf",Mt[Mt.Optional=8]="Optional",Mt))();let ku;function Yi(n){const e=ku;return ku=n,e}function Up(n,e,t){const r=Iu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Mt.Optional?null:void 0!==e?e:void ml(Yt(n),"Injector")}function Ji(n){return{toString:n}.toString()}var qr=(()=>((qr=qr||{})[qr.OnPush=0]="OnPush",qr[qr.Default=1]="Default",qr))(),ui=(()=>{return(n=ui||(ui={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ui;var n})();const JS="undefined"!=typeof globalThis&&globalThis,QS="undefined"!=typeof window&&window,ZS="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jt=JS||"undefined"!=typeof global&&global||QS||ZS,zs={},tn=[],yl=Zt({\u0275cmp:Zt}),Ou=Zt({\u0275dir:Zt}),Fu=Zt({\u0275pipe:Zt}),$p=Zt({\u0275mod:Zt}),ki=Zt({\u0275fac:Zt}),Qo=Zt({__NG_ELEMENT_ID__:Zt});let eE=0;function ur(n){return Ji(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===qr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||tn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ui.Emulated,id:"c",styles:n.styles||tn,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=eE++,r.inputs=qp(n.inputs,t),r.outputs=qp(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Gp):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(zp):null,r})}function Gp(n){return qn(n)||function Qi(n){return n[Ou]||null}(n)}function zp(n){return function ys(n){return n[Fu]||null}(n)}const Wp={};function di(n){return Ji(()=>{const e={type:n.type,bootstrap:n.bootstrap||tn,declarations:n.declarations||tn,imports:n.imports||tn,exports:n.exports||tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Wp[n.id]=n.type),e})}function qp(n,e){if(null==n)return zs;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Wn=ur;function qn(n){return n[yl]||null}function Or(n,e){const t=n[$p]||null;if(!t&&!0===e)throw new Error(`Type ${Yt(n)} does not have '\u0275mod' property.`);return t}function hi(n){return Array.isArray(n)&&"object"==typeof n[1]}function Kr(n){return Array.isArray(n)&&!0===n[1]}function Bu(n){return 0!=(8&n.flags)}function Sl(n){return 2==(2&n.flags)}function El(n){return 1==(1&n.flags)}function Yr(n){return null!==n.template}function oE(n){return 0!=(512&n[2])}function Ss(n,e){return n.hasOwnProperty(ki)?n[ki]:null}class cE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Kp(n){return n.type.prototype.ngOnChanges&&(n.setInput=dE),uE}function uE(){const n=Jp(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===zs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function dE(n,e,t,r){const i=Jp(n)||function hE(n,e){return n[Yp]=e}(n,{previous:zs,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new cE(l&&l.currentValue,e,o===zs),n[r]=e}const Yp="__ngSimpleChanges__";function Jp(n){return n[Yp]||null}let $u;function gn(n){return!!n.listen}const Qp={createRenderer:(n,e)=>function Gu(){return void 0!==$u?$u:"undefined"!=typeof document?document:void 0}()};function Dn(n){for(;Array.isArray(n);)n=n[0];return n}function Al(n,e){return Dn(e[n])}function Nr(n,e){return Dn(e[n.index])}function zu(n,e){return n.data[e]}function Sr(n,e){const t=e[n];return hi(t)?t:t[0]}function Zp(n){return 4==(4&n[2])}function Wu(n){return 128==(128&n[2])}function Zi(n,e){return null==e?null:n[e]}function eg(n){n[18]=0}function qu(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const xt={lFrame:cg(null),bindingsEnabled:!0};function ng(){return xt.bindingsEnabled}function Qe(){return xt.lFrame.lView}function Gt(){return xt.lFrame.tView}function Er(n){return xt.lFrame.contextLView=n,n[8]}function Rn(){let n=rg();for(;null!==n&&64===n.type;)n=n.parent;return n}function rg(){return xt.lFrame.currentTNode}function fi(n,e){const t=xt.lFrame;t.currentTNode=n,t.isParent=e}function Xu(){return xt.lFrame.isParent}function Ku(){xt.lFrame.isParent=!1}function Js(){return xt.lFrame.bindingIndex++}function PE(n,e){const t=xt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yu(e)}function Yu(n){xt.lFrame.currentDirectiveIndex=n}function og(){return xt.lFrame.currentQueryIndex}function Qu(n){xt.lFrame.currentQueryIndex=n}function IE(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function ag(n,e,t){if(t&Mt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Mt.Host||(i=IE(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=xt.lFrame=lg();return r.currentTNode=e,r.lView=n,!0}function Dl(n){const e=lg(),t=n[1];xt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lg(){const n=xt.lFrame,e=null===n?null:n.child;return null===e?cg(n):e}function cg(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ug(){const n=xt.lFrame;return xt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const dg=ug;function Tl(){const n=ug();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tr(){return xt.lFrame.selectedIndex}function es(n){xt.lFrame.selectedIndex=n}function mn(){const n=xt.lFrame;return zu(n.tView,n.selectedIndex)}function Ml(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function Pl(n,e,t){hg(n,e,3,t)}function xl(n,e,t,r){(3&n[2])===t&&hg(n,e,t,r)}function Zu(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function hg(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(VE(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function VE(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ra{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Il(n,e,t){const r=gn(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];td(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function fg(n){return 3===n||4===n||6===n}function td(n){return 64===n.charCodeAt(0)}function Rl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||pg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function pg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function gg(n){return-1!==n}function Qs(n){return 32767&n}function Zs(n,e){let t=function zE(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let nd=!0;function kl(n){const e=nd;return nd=n,e}let WE=0;function sa(n,e){const t=id(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,rd(r.data,n),rd(e,null),rd(r.blueprint,null));const i=Ol(n,e),s=n.injectorIndex;if(gg(i)){const o=Qs(i),a=Zs(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function rd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function id(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ol(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Fl(n,e,t){!function qE(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qo)&&(r=t[Qo]),null==r&&(r=t[Qo]=WE++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function yg(n,e,t){if(t&Mt.Optional)return n;ml(e,"NodeInjector")}function vg(n,e,t,r){if(t&Mt.Optional&&void 0===r&&(r=null),0==(t&(Mt.Self|Mt.Host))){const i=n[9],s=Yi(void 0);try{return i?i.get(e,r,t&Mt.Optional):Up(e,r,t&Mt.Optional)}finally{Yi(s)}}return yg(r,e,t)}function bg(n,e,t,r=Mt.Default,i){if(null!==n){const s=function JE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Qo)?n[Qo]:void 0;return"number"==typeof e?e>=0?255&e:KE:e}(t);if("function"==typeof s){if(!ag(e,n,r))return r&Mt.Host?yg(i,t,r):vg(e,t,r,i);try{const o=s(r);if(null!=o||r&Mt.Optional)return o;ml(t)}finally{dg()}}else if("number"==typeof s){let o=null,a=id(n,e),l=-1,c=r&Mt.Host?e[16][6]:null;for((-1===a||r&Mt.SkipSelf)&&(l=-1===a?Ol(n,e):e[a+8],-1!==l&&Eg(r,!1)?(o=e[1],a=Qs(l),e=Zs(l,e)):a=-1);-1!==a;){const f=e[1];if(Sg(s,a,f.data)){const w=YE(a,e,t,o,r,c);if(w!==Cg)return w}l=e[a+8],-1!==l&&Eg(r,e[1].data[a+8]===c)&&Sg(s,a,e)?(o=f,a=Qs(l),e=Zs(l,e)):a=-1}}}return vg(e,t,r,i)}const Cg={};function KE(){return new eo(Rn(),Qe())}function YE(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],f=Ll(a,o,t,null==r?Sl(a)&&nd:r!=o&&0!=(3&a.type),i&Mt.Host&&s===a);return null!==f?oa(e,o,f,a):Cg}function Ll(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,f=s>>20,G=i?a+f:n.directiveEnd;for(let ee=r?a:a+f;ee<G;ee++){const Ee=o[ee];if(ee<l&&t===Ee||ee>=l&&Ee.type===t)return ee}if(i){const ee=o[l];if(ee&&Yr(ee)&&ee.type===t)return l}return null}function oa(n,e,t,r){let i=n[t];const s=e.data;if(function HE(n){return n instanceof ra}(i)){const o=i;o.resolving&&function $S(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new qt(-200,`Circular dependency in DI detected for ${n}${t}`)}(Un(s[t]));const a=kl(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Yi(o.injectImpl):null;ag(n,r,Mt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function jE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Kp(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Yi(l),kl(a),o.resolving=!1,dg()}}return i}function Sg(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Eg(n,e){return!(n&Mt.Self||n&Mt.Host&&e)}class eo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return bg(this._tNode,this._lView,e,r,t)}}function to(n){return function XE(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(fg(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Rn(),n)}const ro="__parameters__";function so(n,e,t){return Ji(()=>{const r=function od(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,f){const w=l.hasOwnProperty(ro)?l[ro]:Object.defineProperty(l,ro,{value:[]})[ro];for(;w.length<=f;)w.push(null);return(w[f]=w[f]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class At{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Rt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const eA=new At("AnalyzeForEntryComponents");function Br(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Br(r,e)):e!==n&&e.push(r)}return e}function pi(n,e){n.forEach(t=>Array.isArray(t)?pi(t,e):e(t))}function wg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ca(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ar(n,e,t){let r=oo(n,e);return r>=0?n[1|r]=t:(r=~r,function rA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ld(n,e){const t=oo(n,e);if(t>=0)return n[1|t]}function oo(n,e){return function Mg(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ua={},ud="__NG_DI_FLAG__",jl="ngTempTokenPath",uA=/\n/gm,xg="__source",hA=Zt({provide:String,useValue:Zt});let da;function Ig(n){const e=da;return da=n,e}function fA(n,e=Mt.Default){if(void 0===da)throw new qt(203,"");return null===da?Up(n,void 0,e):da.get(n,e&Mt.Optional?null:void 0,e)}function _t(n,e=Mt.Default){return(function YS(){return ku}()||fA)(kt(n),e)}const Vl=_t;function dd(n){const e=[];for(let t=0;t<n.length;t++){const r=kt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new qt(900,"");let i,s=Mt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=pA(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(_t(i,s))}else e.push(_t(r))}return e}function ha(n,e){return n[ud]=e,n.prototype[ud]=e,n}function pA(n){return n[ud]}const Hl=ha(so("Inject",n=>({token:n})),-1),Jr=ha(so("Optional"),8),ao=ha(so("SkipSelf"),4);let $l;function co(n){var e;return(null===(e=function fd(){if(void 0===$l&&($l=null,Jt.trustedTypes))try{$l=Jt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return $l}())||void 0===e?void 0:e.createHTML(n))||n}class As{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class TA extends As{getTypeName(){return"HTML"}}class MA extends As{getTypeName(){return"Style"}}class PA extends As{getTypeName(){return"Script"}}class xA extends As{getTypeName(){return"URL"}}class IA extends As{getTypeName(){return"ResourceURL"}}function wr(n){return n instanceof As?n.changingThisBreaksApplicationSecurity:n}function gi(n,e){const t=Vg(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function Vg(n){return n instanceof As&&n.getTypeName()||null}class NA{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(co(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class BA{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=co(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=co(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const VA=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,HA=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function pa(n){return(n=String(n)).match(VA)||n.match(HA)?n:"unsafe:"+n}function mi(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function ga(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const $g=mi("area,br,col,hr,img,wbr"),Gg=mi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zg=mi("rp,rt"),gd=ga($g,ga(Gg,mi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ga(zg,mi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ga(zg,Gg)),md=mi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_d=mi("srcset"),Wg=ga(md,_d,mi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),UA=mi("script,style,template");class $A{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!gd.hasOwnProperty(t))return this.sanitizedSomething=!0,!UA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!Wg.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;md[a]&&(l=pa(l)),_d[a]&&(n=l,l=(n=String(n)).split(",").map(e=>pa(e.trim())).join(", ")),this.buf.push(" ",o,'="',qg(l),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();gd.hasOwnProperty(t)&&!$g.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(qg(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const GA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zA=/([^\#-~ |!])/g;function qg(n){return n.replace(/&/g,"&amp;").replace(GA,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(zA,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zl;function Xg(n,e){let t=null;try{zl=zl||function Hg(n){const e=new BA(n);return function jA(){try{return!!(new window.DOMParser).parseFromString(co(""),"text/html")}catch(n){return!1}}()?new NA(e):e}(n);let r=e?String(e):"";t=zl.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=zl.getInertBodyElement(r)}while(r!==s);return co((new $A).sanitizeChildren(yd(t)||t))}finally{if(t){const r=yd(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function yd(n){return"content"in n&&function WA(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Xt=(()=>((Xt=Xt||{})[Xt.NONE=0]="NONE",Xt[Xt.HTML=1]="HTML",Xt[Xt.STYLE=2]="STYLE",Xt[Xt.SCRIPT=3]="SCRIPT",Xt[Xt.URL=4]="URL",Xt[Xt.RESOURCE_URL=5]="RESOURCE_URL",Xt))();const Jg="__ngContext__";function Kn(n,e){n[Jg]=e}function Cd(n){const e=function _a(n){return n[Jg]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Ed(n){return n.ngOriginalError}function cw(n,...e){n.error(...e)}class ns{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function lw(n){return n&&n.ngErrorLogger||cw}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ed(e);for(;t&&Ed(t);)t=Ed(t);return t||null}}const vw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jt))();function nm(n){return n.ownerDocument.defaultView}function _i(n){return n instanceof Function?n():n}var Dr=(()=>((Dr=Dr||{})[Dr.Important=1]="Important",Dr[Dr.DashCase=2]="DashCase",Dr))();function wd(n,e){return undefined(n,e)}function ya(n){const e=n[3];return Kr(e)?e[3]:e}function Dd(n){return am(n[13])}function Td(n){return am(n[4])}function am(n){for(;null!==n&&!Kr(n);)n=n[4];return n}function ho(n,e,t,r,i){if(null!=r){let s,o=!1;Kr(r)?s=r:hi(r)&&(o=!0,r=r[0]);const a=Dn(r);0===n&&null!==t?null==i?fm(e,t,a):ws(e,t,a,i||null,!0):1===n&&null!==t?ws(e,t,a,i||null,!0):2===n?function bm(n,e,t){const r=Wl(n,e);r&&function Rw(n,e,t,r){gn(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Fw(n,e,t,r,i){const s=t[7];s!==Dn(t)&&ho(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];va(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function Pd(n,e,t){if(gn(n))return n.createElement(e,t);{const r=null!==t?function mE(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function cm(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qu(i,-1)),t.splice(r,1)}function xd(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&cm(i,r),e>0&&(n[t-1][4]=r[4]);const s=Nl(n,10+e);!function Aw(n,e){va(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function um(n,e){if(!(256&e[2])){const t=e[11];gn(t)&&t.destroyNode&&va(n,e,t,3,null,null),function Tw(n){let e=n[13];if(!e)return Id(n[1],n);for(;e;){let t=null;if(hi(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)hi(e)&&Id(e[1],e),e=e[3];null===e&&(e=n),hi(e)&&Id(e[1],e),t=e&&e[4]}e=t}}(e)}}function Id(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function Iw(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ra)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function xw(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Dn(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&gn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Kr(e[3])){t!==e[3]&&cm(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function dm(n,e,t){return function hm(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===ui.None||i===ui.Emulated)return null}return Nr(r,t)}(n,e.parent,t)}function ws(n,e,t,r,i){gn(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function fm(n,e,t){gn(n)?n.appendChild(e,t):e.appendChild(t)}function pm(n,e,t,r,i){null!==r?ws(n,e,t,r,i):fm(n,e,t)}function Wl(n,e){return gn(n)?n.parentNode(e):e.parentNode}function gm(n,e,t){return _m(n,e,t)}let _m=function mm(n,e,t){return 40&n.type?Nr(n,t):null};function ql(n,e,t,r){const i=dm(n,r,e),s=e[11],a=gm(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)pm(s,i,t[l],a,!1);else pm(s,i,t,a,!1)}function Xl(n,e){if(null!==e){const t=e.type;if(3&t)return Nr(e,n);if(4&t)return kd(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Xl(n,r);{const i=n[e.index];return Kr(i)?kd(-1,i):Dn(i)}}if(32&t)return wd(e,n)()||Dn(n[e.index]);{const r=vm(n,e);return null!==r?Array.isArray(r)?r[0]:Xl(ya(n[16]),r):Xl(n,e.next)}}return null}function vm(n,e){return null!==e?n[16][6].projection[e.projection]:null}function kd(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Xl(r,i)}return e[7]}function Od(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Kn(Dn(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Od(n,e,t.child,r,i,s,!1),ho(e,n,i,a,s);else if(32&l){const c=wd(t,r);let f;for(;f=c();)ho(e,n,i,f,s);ho(e,n,i,a,s)}else 16&l?Cm(n,e,r,t,i,s):ho(e,n,i,a,s);t=o?t.projectionNext:t.next}}function va(n,e,t,r,i,s){Od(t,r,n.firstChild,e,i,s,!1)}function Cm(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ho(e,n,i,l[c],s);else Od(n,e,l,o[3],i,s,!0)}function Sm(n,e,t){gn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Fd(n,e,t){gn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Em(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Am="ng-template";function Nw(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Em(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function wm(n){return 4===n.type&&n.value!==Am}function Bw(n,e,t){return e===(4!==n.type||t?n.value:Am)}function jw(n,e,t){let r=4;const i=n.attrs||[],s=function Uw(n){for(let e=0;e<n.length;e++)if(fg(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Bw(n,l,t)||""===l&&1===e.length){if(Qr(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!Nw(n.attrs,c,t)){if(Qr(r))return!1;o=!0}continue}const w=Vw(8&r?"class":l,i,wm(n),t);if(-1===w){if(Qr(r))return!1;o=!0;continue}if(""!==c){let G;G=w>s?"":i[w+1].toLowerCase();const ee=8&r?G:null;if(ee&&-1!==Em(ee,c,0)||2&r&&c!==G){if(Qr(r))return!1;o=!0}}}}else{if(!o&&!Qr(r)&&!Qr(l))return!1;if(o&&Qr(l))continue;o=!1,r=l|1&r}}return Qr(r)||o}function Qr(n){return 0==(1&n)}function Vw(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function $w(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Dm(n,e,t=!1){for(let r=0;r<e.length;r++)if(jw(n,e[r],t))return!0;return!1}function Gw(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Tm(n,e){return n?":not("+e.trim()+")":e}function zw(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Qr(o)&&(e+=Tm(s,i),i=""),r=o,s=s||!Qr(r);t++}return""!==i&&(e+=Tm(s,i)),e}const It={};function Ut(n){Mm(Gt(),Qe(),tr()+n,!1)}function Mm(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Pl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&xl(e,s,0,t)}es(t)}function Kl(n,e){return n<<17|e<<2}function Zr(n){return n>>17&32767}function Ld(n){return 2|n}function Li(n){return(131068&n)>>2}function Nd(n,e){return-131069&n|e<<2}function Bd(n){return 1|n}function jm(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];Qu(i),o.contentQueries(2,e[s],s)}}}function ba(n,e,t,r,i,s,o,a,l,c){const f=e.blueprint.slice();return f[0]=i,f[2]=140|r,eg(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=l||n&&n[12]||null,f[9]=c||n&&n[9]||null,f[6]=s,f[16]=2==e.type?n[16]:f,f}function fo(n,e,t,r,i){let s=n.data[e];if(null===s)s=function qd(n,e,t,r,i){const s=rg(),o=Xu(),l=n.data[e]=function cD(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function ME(){return xt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function na(){const n=xt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return fi(s,!0),s}function po(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ca(n,e,t){Dl(e);try{const r=n.viewQuery;null!==r&&nh(1,r,t);const i=n.template;null!==i&&Vm(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&jm(n,e),n.staticViewQueries&&nh(2,n.viewQuery,t);const s=n.components;null!==s&&function oD(n,e){for(let t=0;t<e.length;t++)TD(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Tl()}}function go(n,e,t,r){const i=e[2];if(256!=(256&i)){Dl(e);try{eg(e),function ig(n){return xt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Vm(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Pl(e,c,null)}else{const c=n.preOrderHooks;null!==c&&xl(e,c,0,null),Zu(e,0)}if(function wD(n){for(let e=Dd(n);null!==e;e=Td(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&qu(s,1),i[2]|=1024}}}(e),function AD(n){for(let e=Dd(n);null!==e;e=Td(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Wu(r)&&go(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&jm(n,e),o){const c=n.contentCheckHooks;null!==c&&Pl(e,c)}else{const c=n.contentHooks;null!==c&&xl(e,c,1),Zu(e,1)}!function iD(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)es(~i);else{const s=i,o=t[++r],a=t[++r];PE(o,s),a(2,e[s])}}}finally{es(-1)}}(n,e);const a=n.components;null!==a&&function sD(n,e){for(let t=0;t<e.length;t++)DD(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&nh(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Pl(e,c)}else{const c=n.viewHooks;null!==c&&xl(e,c,2),Zu(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,qu(e[3],-1))}finally{Tl()}}}function aD(n,e,t,r){const i=e[10],o=Zp(e);try{!o&&i.begin&&i.begin(),o&&Ca(n,e,r),go(n,e,t,r)}finally{!o&&i.end&&i.end()}}function Vm(n,e,t,r,i){const s=tr(),o=2&r;try{es(-1),o&&e.length>20&&Mm(n,e,20,!1),t(r,i)}finally{es(s)}}function Hm(n,e,t){if(Bu(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Xd(n,e,t){!ng()||(function mD(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||sa(t,e),Kn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Yr(l);c&&CD(e,t,l);const f=oa(e,n,a,t);Kn(f,e),null!==o&&SD(0,a-i,f,l,0,o),c&&(Sr(t.index,e)[8]=f)}}(n,e,t,Nr(t,e)),128==(128&t.flags)&&function _D(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function xE(){return xt.lFrame.currentDirectiveIndex}();try{es(o);for(let l=r;l<i;l++){const c=n.data[l],f=e[l];Yu(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Km(c,f)}}finally{es(-1),Yu(a)}}(n,e,t))}function Kd(n,e,t=Nr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Um(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ql(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ql(n,e,t,r,i,s,o,a,l,c){const f=20+r,w=f+i,G=function lD(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:It);return t}(f,w),ee="function"==typeof c?c():c;return G[1]={type:n,blueprint:G,template:t,queries:null,viewQuery:a,declTNode:e,data:G.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:ee,incompleteFirstPass:!1}}function zm(n,e,t,r){const i=t_(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&n_(n).push(r,i.length-1))}function Wm(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Yd(n,e,t,r){let i=!1;if(ng()){const s=function yD(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Dm(t,o.selectors,!1)&&(i||(i=[]),Fl(sa(t,e),n,o.type),Yr(o)?(Ym(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,Jm(t,n.data.length,s.length);for(let f=0;f<s.length;f++){const w=s[f];w.providersResolver&&w.providersResolver(w)}let a=!1,l=!1,c=po(n,e,s.length,null);for(let f=0;f<s.length;f++){const w=s[f];t.mergedAttrs=Rl(t.mergedAttrs,w.hostAttrs),Qm(n,t,e,c,w),bD(c,w,o),null!==w.contentQueries&&(t.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(t.flags|=128);const G=w.type.prototype;!a&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(G.ngOnChanges||G.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function uD(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const f=i[c],w=f.inputs,G=null===s||wm(e)?null:ED(w,s);o.push(G),a=Wm(w,c,a),l=Wm(f.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function vD(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new qt(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=Rl(t.mergedAttrs,t.attrs),i}function Xm(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function gD(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function Km(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ym(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function bD(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yr(e)&&(t[""]=n)}}function Jm(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Qm(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ss(i.type)),o=new ra(s,Yr(i),null);n.blueprint[r]=o,t[r]=o,Xm(n,e,0,r,po(n,t,i.hostVars,It),i)}function CD(n,e,t){const r=Nr(e,n),i=Um(t),s=n[10],o=Zl(n,ba(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function yi(n,e,t,r,i,s){const o=Nr(n,e);!function Jd(n,e,t,r,i,s,o){if(null==s)gn(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?Pt(s):o(s,r||"",i);gn(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function SD(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],f=o[l++],w=o[l++];null!==a?r.setInput(t,w,c,f):t[f]=w}}}function ED(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Zm(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function DD(n,e){const t=Sr(e,n);if(Wu(t)){const r=t[1];80&t[2]?go(r,t,r.template,t[8]):t[5]>0&&Qd(t)}}function Qd(n){for(let r=Dd(n);null!==r;r=Td(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];go(o,s,o.template,s[8])}else s[5]>0&&Qd(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Sr(t[r],n);Wu(i)&&i[5]>0&&Qd(i)}}function TD(n,e){const t=Sr(e,n),r=t[1];(function MD(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Ca(r,t,t[8])}function Zl(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Zd(n){for(;n;){n[2]|=64;const e=ya(n);if(oE(n)&&!e)return n;n=e}return null}function e_(n){!function eh(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Cd(t),i=r[1];aD(i,r,i.template,t)}}(n[8])}function nh(n,e,t){Qu(0),e(n,t)}const xD=(()=>Promise.resolve(null))();function t_(n){return n[7]||(n[7]=[])}function n_(n){return n.cleanup||(n.cleanup=[])}function i_(n,e){const t=n[9],r=t?t.get(ns,null):null;r&&r.handleError(e)}function s_(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Ni(n,e,t){const r=Al(e,n);!function lm(n,e,t){gn(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function ec(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Mu(i,a):2==s&&(r=Mu(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const rh=new At("INJECTOR",-1);class o_{get(e,t=ua){if(t===ua){const r=new Error(`NullInjectorError: No provider for ${Yt(e)}!`);throw r.name="NullInjectorError",r}return t}}const ih=new At("Set Injector scope."),Sa={},kD={};let sh;function a_(){return void 0===sh&&(sh=new o_),sh}function l_(n,e=null,t=null,r){const i=c_(n,e,t,r);return i._resolveInjectorDefTypes(),i}function c_(n,e=null,t=null,r){return new OD(n,t,e||a_(),r)}class OD{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&pi(t,a=>this.processProvider(a,e,t)),pi([e],a=>this.processInjectorType(a,[],s)),this.records.set(rh,mo(void 0,this));const o=this.records.get(ih);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:Yt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=ua,r=Mt.Default){this.assertNotDestroyed();const i=Ig(this),s=Yi(void 0);try{if(!(r&Mt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function UD(n){return"function"==typeof n||"object"==typeof n&&n instanceof At}(e)&&Iu(e);a=l&&this.injectableDefInScope(l)?mo(oh(e),Sa):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Mt.Self?a_():this.parent).get(e,t=r&Mt.Optional&&t===ua?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[jl]=o[jl]||[]).unshift(Yt(e)),i)throw o;return function gA(n,e,t,r){const i=n[jl];throw e[xg]&&i.unshift(e[xg]),n.message=function mA(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=Yt(e);if(Array.isArray(e))i=e.map(Yt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Yt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(uA,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[jl]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Yi(s),Ig(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(Yt(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qt(205,!1)}processInjectorType(e,t,r){if(!(e=kt(e)))return!1;let i=Vp(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=Vp(s)),null==i)return!1;if(null!=i.imports&&!a){let f;r.push(o);try{pi(i.imports,w=>{this.processInjectorType(w,t,r)&&(void 0===f&&(f=[]),f.push(w))})}finally{}if(void 0!==f)for(let w=0;w<f.length;w++){const{ngModule:G,providers:ee}=f[w];pi(ee,Ee=>this.processProvider(Ee,G,ee||tn))}}this.injectorDefTypes.add(o);const l=Ss(o)||(()=>new o);this.records.set(o,mo(l,Sa));const c=i.providers;if(null!=c&&!a){const f=e;pi(c,w=>this.processProvider(w,f,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=_o(e=kt(e))?e:kt(e&&e.provide);const s=function LD(n,e,t){return d_(n)?mo(void 0,n.useValue):mo(function u_(n,e,t){let r;if(_o(n)){const i=kt(n);return Ss(i)||oh(i)}if(d_(n))r=()=>kt(n.useValue);else if(function BD(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...dd(n.deps||[]));else if(function ND(n){return!(!n||!n.useExisting)}(n))r=()=>_t(kt(n.useExisting));else{const i=kt(n&&(n.useClass||n.provide));if(!function VD(n){return!!n.deps}(n))return Ss(i)||oh(i);r=()=>new i(...dd(n.deps))}return r}(n),Sa)}(e);if(_o(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=mo(void 0,Sa,!0),o.factory=()=>dd(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===Sa&&(t.value=kD,t.value=t.factory()),"object"==typeof t.value&&t.value&&function HD(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=kt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function oh(n){const e=Iu(n),t=null!==e?e.factory:Ss(n);if(null!==t)return t;if(n instanceof At)throw new qt(204,!1);if(n instanceof Function)return function FD(n){const e=n.length;if(e>0)throw ca(e,"?"),new qt(204,!1);const t=function qS(n){const e=n&&(n[_l]||n[Hp]);if(e){const t=function XS(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new qt(204,!1)}function mo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function d_(n){return null!==n&&"object"==typeof n&&hA in n}function _o(n){return"function"==typeof n}let fr=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return l_({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return l_({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=ua,n.NULL=new o_,n.\u0275prov=Rt({token:n,providedIn:"any",factory:()=>_t(rh)}),n.__NG_ELEMENT_ID__=-1,n})();function YD(n,e){Ml(Cd(n)[1],Rn())}function ch(n){let e=function E_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Yr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new qt(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=uh(n.inputs),o.declaredInputs=uh(n.declaredInputs),o.outputs=uh(n.outputs);const a=i.hostBindings;a&&eT(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&QD(n,l),c&&ZD(n,c),Tu(n.inputs,i.inputs),Tu(n.declaredInputs,i.declaredInputs),Tu(n.outputs,i.outputs),Yr(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ch&&(t=!1)}}e=Object.getPrototypeOf(e)}!function JD(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rl(i.hostAttrs,t=Rl(t,i.hostAttrs))}}(r)}function uh(n){return n===zs?{}:n===tn?[]:n}function QD(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function ZD(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function eT(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let tc=null;function yo(){if(!tc){const n=Jt.Symbol;if(n&&n.iterator)tc=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(tc=r)}}}return tc}function Ea(n){return!!function dh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&yo()in n)}function Yn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function rc(n,e,t,r){const i=Qe();return Yn(i,Js(),e)&&(Gt(),yi(mn(),i,n,e,t,r)),rc}function $n(n,e,t,r,i,s,o,a){const l=Qe(),c=Gt(),f=n+20,w=c.firstCreatePass?function aT(n,e,t,r,i,s,o,a,l){const c=e.consts,f=fo(e,n,4,o||null,Zi(c,a));Yd(e,t,f,Zi(c,l)),Ml(e,f);const w=f.tViews=Ql(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,f),w.queries=e.queries.embeddedTView(f)),f}(f,c,l,e,t,r,i,s,o):c.data[f];fi(w,!1);const G=l[11].createComment("");ql(c,l,G,w),Kn(G,l),Zl(l,l[f]=Zm(G,l,G,w)),El(w)&&Xd(c,l,w),null!=o&&Kd(l,w,a)}function ht(n,e=Mt.Default){const t=Qe();return null===t?_t(n,e):bg(Rn(),t,kt(n),e)}function mh(){throw new Error("invalid")}function Kt(n,e,t){const r=Qe();return Yn(r,Js(),e)&&function Tr(n,e,t,r,i,s,o,a){const l=Nr(e,t);let f,c=e.inputs;!a&&null!=c&&(f=c[r])?(s_(n,t,f,r,i),Sl(e)&&function hD(n,e){const t=Sr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function dD(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,gn(s)?s.setProperty(l,r,i):td(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Gt(),mn(),r,n,e,r[11],t,!1),Kt}function _h(n,e,t,r,i){const o=i?"class":"style";s_(n,t,e.inputs[o],o,r)}function Dt(n,e,t,r){const i=Qe(),s=Gt(),o=20+n,a=i[11],l=i[o]=Pd(a,e,function BE(){return xt.lFrame.currentNamespace}()),c=s.firstCreatePass?function PT(n,e,t,r,i,s,o){const a=e.consts,c=fo(e,n,2,i,Zi(a,s));return Yd(e,t,c,Zi(a,o)),null!==c.attrs&&ec(c,c.attrs,!1),null!==c.mergedAttrs&&ec(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];fi(c,!0);const f=c.mergedAttrs;null!==f&&Il(a,l,f);const w=c.classes;null!==w&&Fd(a,l,w);const G=c.styles;return null!==G&&Sm(a,l,G),64!=(64&c.flags)&&ql(s,i,l,c),0===function SE(){return xt.lFrame.elementDepthCount}()&&Kn(l,i),function EE(){xt.lFrame.elementDepthCount++}(),El(c)&&(Xd(s,i,c),Hm(s,c,i)),null!==r&&Kd(i,c),Dt}function zt(){let n=Rn();Xu()?Ku():(n=n.parent,fi(n,!1));const e=n;!function AE(){xt.lFrame.elementDepthCount--}();const t=Gt();return t.firstCreatePass&&(Ml(t,n),Bu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function $E(n){return 0!=(16&n.flags)}(e)&&_h(t,e,Qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function GE(n){return 0!=(32&n.flags)}(e)&&_h(t,e,Qe(),e.stylesWithoutHost,!1),zt}function Bn(n,e,t,r){return Dt(n,e,t,r),zt(),Bn}function sc(n,e,t){const r=Qe(),i=Gt(),s=n+20,o=i.firstCreatePass?function xT(n,e,t,r,i){const s=e.consts,o=Zi(s,r),a=fo(e,n,8,"ng-container",o);return null!==o&&ec(a,o,!0),Yd(e,t,a,Zi(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];fi(o,!0);const a=r[s]=r[11].createComment("");return ql(i,r,a,o),Kn(a,r),El(o)&&(Xd(i,r,o),Hm(i,o,r)),null!=t&&Kd(r,o),sc}function oc(){let n=Rn();const e=Gt();return Xu()?Ku():(n=n.parent,fi(n,!1)),e.firstCreatePass&&(Ml(e,n),Bu(n)&&e.queries.elementEnd(n)),oc}function Bi(){return Qe()}function ac(n){return!!n&&"function"==typeof n.then}const z_=function G_(n){return!!n&&"function"==typeof n.subscribe};function fn(n,e,t,r){const i=Qe(),s=Gt(),o=Rn();return function q_(n,e,t,r,i,s,o,a){const l=El(r),f=n.firstCreatePass&&n_(n),w=e[8],G=t_(e);let ee=!0;if(3&r.type||a){const Je=Nr(r,e),Ze=a?a(Je):Je,He=G.length,nt=a?rt=>a(Dn(rt[r.index])):r.index;if(gn(t)){let rt=null;if(!a&&l&&(rt=function IT(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==rt)(rt.__ngLastListenerFn__||rt).__ngNextListenerFn__=s,rt.__ngLastListenerFn__=s,ee=!1;else{s=yh(r,e,w,s,!1);const dt=t.listen(Ze,i,s);G.push(s,dt),f&&f.push(i,nt,He,He+1)}}else s=yh(r,e,w,s,!0),Ze.addEventListener(i,s,o),G.push(s),f&&f.push(i,nt,He,o)}else s=yh(r,e,w,s,!1);const Ee=r.outputs;let Le;if(ee&&null!==Ee&&(Le=Ee[i])){const Je=Le.length;if(Je)for(let Ze=0;Ze<Je;Ze+=2){const Sn=e[Le[Ze]][Le[Ze+1]].subscribe(s),mr=G.length;G.push(s,Sn),f&&f.push(i,r.index,mr,-(mr+1))}}}(s,i,i[11],o,n,e,!!t,r),fn}function X_(n,e,t,r){try{return!1!==t(r)}catch(i){return i_(n,i),!1}}function yh(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?Sr(n.index,e):e;0==(32&e[2])&&Zd(a);let l=X_(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=X_(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function un(n=1){return function RE(n){return(xt.lFrame.contextLView=function kE(n,e){for(;n>0;)e=e[15],n--;return e}(n,xt.lFrame.contextLView))[8]}(n)}function RT(n,e){let t=null;const r=function Hw(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Dm(n,s,!0):Gw(r,s))return i}else t=i}return t}function lc(n){const e=Qe()[16][6];if(!e.projection){const r=e.projection=ca(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?RT(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function cc(n,e=0,t){const r=Qe(),i=Gt(),s=fo(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Ku(),64!=(64&s.flags)&&function Ow(n,e,t){Cm(e[11],0,e,t,dm(n,t,e),gm(t.parent||e[6],t,e))}(i,r,s)}function iy(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Zr(s):Li(s),l=!1;for(;0!==a&&(!1===l||o);){const f=n[a+1];FT(n[a],e)&&(l=!0,n[a+1]=r?Bd(f):Ld(f)),a=r?Zr(f):Li(f)}l&&(n[t+1]=r?Ld(s):Bd(s))}function FT(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&oo(n,e)>=0}function uc(n,e,t){return ti(n,e,t,!1),uc}function bi(n,e){return ti(n,e,null,!0),bi}function ti(n,e,t,r){const i=Qe(),s=Gt(),o=function Fi(n){const e=xt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function hy(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[tr()],o=function dy(n,e){return e>=n.expandoStartIndex}(n,t);(function my(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function GT(n,e,t,r){const i=function Ju(n){const e=xt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=wa(t=bh(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=bh(i,n,e,t,r),null===s){let l=function zT(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Li(r))return n[Zr(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=bh(null,n,e,l[1],r),l=wa(l,e.attrs,r),function WT(n,e,t,r){n[Zr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function qT(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=wa(r,n[s].hostAttrs,t);return wa(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function kT(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Zr(o),l=Li(o);n[r]=t;let f,c=!1;if(Array.isArray(t)){const w=t;f=w[1],(null===f||oo(w,f)>0)&&(c=!0)}else f=t;if(i)if(0!==l){const G=Zr(n[a+1]);n[r+1]=Kl(G,a),0!==G&&(n[G+1]=Nd(n[G+1],r)),n[a+1]=function Xw(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Kl(a,0),0!==a&&(n[a+1]=Nd(n[a+1],r)),a=r;else n[r+1]=Kl(l,0),0===a?a=r:n[l+1]=Nd(n[l+1],r),l=r;c&&(n[r+1]=Ld(n[r+1])),iy(n,f,r,!0),iy(n,f,r,!1),function OT(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&oo(s,e)>=0&&(t[r+1]=Bd(t[r+1]))}(e,f,n,r,s),o=Kl(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==It&&Yn(i,o,e)&&function py(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];dc(function Im(n){return 1==(1&n)}(c)?gy(l,e,t,i,Li(c),o):void 0)||(dc(s)||function xm(n){return 2==(2&n)}(c)&&(s=gy(l,null,t,i,a,o)),function Lw(n,e,t,r,i){const s=gn(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Dr.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=Dr.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Al(tr(),t),i,s))}(s,s.data[tr()],i,i[11],n,i[o+1]=function YT(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Yt(wr(n)))),n}(e,t),r,o)}function bh(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=wa(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function wa(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ar(n,o,!!t||e[++s]))}return void 0===n?null:n}function gy(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),f=c?l[1]:l,w=null===f;let G=t[i+1];G===It&&(G=w?tn:void 0);let ee=w?ld(G,r):f===r?G:void 0;if(c&&!dc(ee)&&(ee=ld(l,r)),dc(ee)&&(a=ee,o))return a;const Ee=n[i+1];i=o?Zr(Ee):Li(Ee)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=ld(l,r))}return a}function dc(n){return void 0!==n}function pr(n,e=""){const t=Qe(),r=Gt(),i=n+20,s=r.firstCreatePass?fo(r,i,1,e,null):r.data[i],o=t[i]=function Md(n,e){return gn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);ql(r,t,o,s),fi(s,!1)}function xo(n){return Da("",n,""),xo}function Da(n,e,t){const r=Qe(),i=function bo(n,e,t,r){return Yn(n,Js(),t)?e+Pt(t)+r:It}(r,n,e,t);return i!==It&&Ni(r,tr(),i),Da}const hc="en-US";let By=hc;class cv{}class vP{resolveComponentFactory(e){throw function yP(n){const e=Error(`No component factory found for ${Yt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ia=(()=>{class n{}return n.NULL=new vP,n})();function bP(){return ko(Rn(),Qe())}function ko(n,e){return new Ei(Nr(n,e))}let Ei=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=bP,n})();function CP(n){return n instanceof Ei?n.nativeElement:n}class dv{}let AP=(()=>{class n{}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:()=>null}),n})();class Oo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const wP=new Oo("13.3.7"),Th={};function yc(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Dn(s)),Kr(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&yc(l[1],l,c,r)}const o=t.type;if(8&o)yc(n,e,t.child,r);else if(32&o){const a=wd(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=vm(e,t);if(Array.isArray(a))r.push(...a);else{const l=ya(e[16]);yc(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Ra{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return yc(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Kr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(xd(e,r),Nl(t,r))}this._attachedToViewContainer=!1}um(this._lView[1],this._lView)}onDestroy(e){zm(this._lView[1],this._lView,null,e)}markForCheck(){Zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function th(n,e,t){const r=e[10];r.begin&&r.begin();try{go(n,e,n.template,t)}catch(i){throw i_(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new qt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dw(n,e){va(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new qt(902,"");this._appRef=e}}class DP extends Ra{constructor(e){super(e),this._view=e}detectChanges(){e_(this._view)}checkNoChanges(){}get context(){return null}}class hv extends Ia{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=qn(e);return new Mh(t,this.ngModule)}}function fv(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Mh extends cv{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Ww(n){return n.map(zw).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return fv(this.componentDef.inputs)}get outputs(){return fv(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function MP(n,e){return{get:(t,r,i)=>{const s=n.get(t,Th,i);return s!==Th||r===Th?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(dv,Qp),a=s.get(AP,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",f=r?function Gm(n,e,t){if(gn(n))return n.selectRootElement(e,t===ui.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Pd(o.createRenderer(null,this.componentDef),c,function TP(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),w=this.componentDef.onPush?576:528,G=function S_(n,e){return{components:[],scheduler:n||vw,clean:xD,playerHandler:e||null,flags:0}}(),ee=Ql(0,null,null,1,0,null,null,null,null,null),Ee=ba(null,ee,G,w,null,null,o,l,a,s);let Le,Je;Dl(Ee);try{const Ze=function b_(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=fo(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(ec(l,c,!0),null!==n&&(Il(i,n,c),null!==l.classes&&Fd(i,n,l.classes),null!==l.styles&&Sm(i,n,l.styles)));const f=r.createRenderer(n,e),w=ba(t,Um(e),null,e.onPush?64:16,t[20],l,r,f,s||null,null);return o.firstCreatePass&&(Fl(sa(l,t),o,e.type),Ym(o,l),Jm(l,t.length,1)),Zl(t,w),t[20]=w}(f,this.componentDef,Ee,o,l);if(f)if(r)Il(l,f,["ng-version",wP.full]);else{const{attrs:He,classes:nt}=function qw(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Qr(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);He&&Il(l,f,He),nt&&nt.length>0&&Fd(l,f,nt.join(" "))}if(Je=zu(ee,20),void 0!==t){const He=Je.projection=[];for(let nt=0;nt<this.ngContentSelectors.length;nt++){const rt=t[nt];He.push(null!=rt?Array.from(rt):null)}}Le=function C_(n,e,t,r,i){const s=t[1],o=function pD(n,e,t){const r=Rn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Qm(n,r,e,po(n,e,1,null),t));const i=oa(e,n,r.directiveStart,r);Kn(i,e);const s=Nr(r,e);return s&&Kn(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Rn();e.contentQueries(1,o,l.directiveStart)}const a=Rn();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(es(a.index),Xm(t[1],a,0,a.directiveStart,a.directiveEnd,e),Km(e,o)),o}(Ze,this.componentDef,Ee,G,[YD]),Ca(ee,Ee,null)}finally{Tl()}return new xP(this.componentType,Le,ko(Je,Ee),Ee,Je)}}class xP extends class _P{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new DP(i),this.componentType=e}get injector(){return new eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ji{}class pv{}const Fo=new Map;class _v extends ji{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hv(this);const r=Or(e);this._bootstrapComponents=_i(r.bootstrap),this._r3Injector=c_(e,t,[{provide:ji,useValue:this},{provide:Ia,useValue:this.componentFactoryResolver}],Yt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=fr.THROW_IF_NOT_FOUND,r=Mt.Default){return e===fr||e===ji||e===rh?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ph extends pv{constructor(e){super(),this.moduleType=e,null!==Or(e)&&function RP(n){const e=new Set;!function t(r){const i=Or(r,!0),s=i.id;null!==s&&(function gv(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Yt(e)} vs ${Yt(e.name)}`)}(s,Fo.get(s),r),Fo.set(s,r));const o=_i(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new _v(this.moduleType,e)}}function yv(n,e,t,r){return function vv(n,e,t,r,i,s){const o=e+t;return Yn(n,o,i)?function vi(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function ka(n,e){const t=n[e];return t===It?void 0:t}(n,o+1)}(Qe(),function er(){const n=xt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function xh(n){return e=>{setTimeout(n,void 0,e)}}const Jn=class KP extends E{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),c=r;if(e&&"object"==typeof e){const w=e;a=null===(i=w.next)||void 0===i?void 0:i.bind(w),l=null===(s=w.error)||void 0===s?void 0:s.bind(w),c=null===(o=w.complete)||void 0===o?void 0:o.bind(w)}this.__isAsync&&(l=xh(l),a&&(a=xh(a)),c&&(c=xh(c)));const f=super.subscribe({next:a,error:l,complete:c});return e instanceof pe&&e.add(f),f}};function YP(){return this._results[yo()]()}class Ih{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=yo(),r=Ih.prototype;r[t]||(r[t]=YP)}get changes(){return this._changes||(this._changes=new Jn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Br(e);(this._changesDetected=!function tA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Vi=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZP,n})();const JP=Vi,QP=class extends JP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=ba(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),Ca(t,r,e),new Ra(r)}};function ZP(){return vc(Rn(),Qe())}function vc(n,e){return 4&n.type?new QP(e,n,ko(n,e)):null}let ri=(()=>{class n{}return n.__NG_ELEMENT_ID__=ex,n})();function ex(){return Dv(Rn(),Qe())}const tx=ri,Av=class extends tx{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ko(this._hostTNode,this._hostLView)}get injector(){return new eo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ol(this._hostTNode,this._hostLView);if(gg(e)){const t=Zs(e,this._hostLView),r=Qs(e);return new eo(t[1].data[r+8],t)}return new eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=wv(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function la(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.ngModuleRef}const l=o?e:new Mh(qn(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const G=(o?c:this.parentInjector).get(ji,null);G&&(s=G)}const f=l.create(c,i,void 0,s);return this.insert(f.hostView,a),f}insert(e,t){const r=e._lView,i=r[1];if(function CE(n){return Kr(n[3])}(r)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const w=r[3],G=new Av(w,w[6],w[3]);G.detach(G.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Mw(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],wg(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Pw(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=kd(s,o),l=r[11],c=Wl(l,o[7]);return null!==c&&function ww(n,e,t,r,i,s){r[0]=i,r[6]=e,va(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),wg(Rh(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=wv(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=xd(this._lContainer,t);r&&(Nl(Rh(this._lContainer),t),um(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=xd(this._lContainer,t);return r&&null!=Nl(Rh(this._lContainer),t)?new Ra(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function wv(n){return n[8]}function Rh(n){return n[8]||(n[8]=[])}function Dv(n,e){let t;const r=e[n.index];if(Kr(r))t=r;else{let i;if(8&n.type)i=Dn(r);else{const s=e[11];i=s.createComment("");const o=Nr(n,e);ws(s,Wl(s,o),i,function kw(n,e){return gn(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=Zm(r,e,i,n),Zl(e,t)}return new Av(t,n,e)}class kh{constructor(e){this.queryList=e,this.matches=null}clone(){return new kh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Oh(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Iv(e,t).matches&&this.queries[t].setDirty()}}class Tv{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Fh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Fh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Lh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Lh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,ix(t,s)),this.matchTNodeWithReadOption(e,t,Ll(t,e,s,!1,!1))}else r===Vi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ll(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ei||i===ri||i===Vi&&4&t.type)this.addMatch(t.index,-2);else{const s=Ll(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ix(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function ox(n,e,t,r){return-1===t?function sx(n,e){return 11&n.type?ko(n,e):4&n.type?vc(n,e):null}(e,n):-2===t?function ax(n,e,t){return t===Ei?ko(e,n):t===Vi?vc(e,n):t===ri?Dv(e,n):void 0}(n,e,r):oa(n,n[1],t,e)}function Mv(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:ox(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function Nh(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=Mv(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],f=e[-l];for(let w=10;w<f.length;w++){const G=f[w];G[17]===G[3]&&Nh(G[1],G,c,r)}if(null!==f[9]){const w=f[9];for(let G=0;G<w.length;G++){const ee=w[G];Nh(ee[1],ee,c,r)}}}}}return r}function Mr(n){const e=Qe(),t=Gt(),r=og();Qu(r+1);const i=Iv(t,r);if(n.dirty&&Zp(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Nh(t,e,r,[]):Mv(t,e,i,r);n.reset(s,CP),n.notifyOnChanges()}return!0}return!1}function ii(n,e,t){const r=Gt();r.firstCreatePass&&(function xv(n,e,t){null===n.queries&&(n.queries=new Fh),n.queries.track(new Lh(e,t))}(r,new Tv(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function Pv(n,e,t){const r=new Ih(4==(4&t));zm(n,e,r,r.destroy),null===e[19]&&(e[19]=new Oh),e[19].queries.push(new kh(r))}(r,Qe(),e)}function Pr(){return function lx(n,e){return n[19].queries[e].queryList}(Qe(),og())}function Iv(n,e){return n.queries.getByIndex(e)}function Sc(...n){}const Gh=new At("Application Initializer");let zh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Sc,this.reject=Sc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(ac(s))t.push(s);else if(z_(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(_t(Gh,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const La=new At("AppId",{providedIn:"root",factory:function Xv(){return`${Wh()}${Wh()}${Wh()}`}});function Wh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Kv=new At("Platform Initializer"),qh=new At("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yv=new At("appBootstrapListener");let Tx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Hi=new At("LocaleId",{providedIn:"root",factory:()=>Vl(Hi,Mt.Optional|Mt.SkipSelf)||function Mx(){return"undefined"!=typeof $localize&&$localize.locale||hc}()});class xx{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Jv=(()=>{class n{compileModuleSync(t){return new Ph(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=_i(Or(t).declarations).reduce((o,a)=>{const l=qn(a);return l&&o.push(new Mh(l)),o},[]);return new xx(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rx=(()=>Promise.resolve(0))();function Xh(n){"undefined"==typeof Zone?Rx.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class jn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jn(!1),this.onMicrotaskEmpty=new Jn(!1),this.onStable=new Jn(!1),this.onError=new Jn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function kx(){let n=Jt.requestAnimationFrame,e=Jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Lx(n){const e=()=>{!function Fx(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Yh(n),n.isCheckStableRunning=!0,Kh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Yh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return Qv(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Zv(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return Qv(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Zv(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Yh(n),Kh(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(jn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ox,Sc,Sc);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Ox={};function Kh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Qv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Zv(n){n._nesting--,Kh(n)}class Nx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jn,this.onMicrotaskEmpty=new Jn,this.onStable=new Jn,this.onError=new Jn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let Jh=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jn.assertNotInAngularZone(),Xh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xh(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(_t(jn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),Bx=(()=>{class n{constructor(){this._applications=new Map,Qh.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Qh.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class jx{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let Qh=new jx,Ms=null;const eb=new At("AllowMultipleToken"),tb=new At("PlatformOnDestroy");class nb{constructor(e,t){this.name=e,this.token=t}}function rb(n,e,t=[]){const r=`Platform: ${e}`,i=new At(r);return(s=[])=>{let o=Zh();if(!o||o.injector.get(eb,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function $x(n){if(Ms&&!Ms.get(eb,!1))throw new qt(400,"");Ms=n;const e=n.get(ib),t=n.get(Kv,null);t&&t.forEach(r=>r())}(function zx(n=[],e){return fr.create({name:e,providers:[{provide:ih,useValue:"platform"},{provide:tb,useValue:()=>Ms=null},...n]})}(a,r))}return function Gx(n){const e=Zh();if(!e)throw new qt(401,"");return e}()}}function Zh(){var n;return null!==(n=null==Ms?void 0:Ms.get(ib))&&void 0!==n?n:null}let ib=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function Wx(n,e){let t;return t="noop"===n?new Nx:("zone.js"===n?void 0:n)||new jn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:jn,useValue:a}];return a.run(()=>{const c=fr.create({providers:l,parent:this.injector,name:t.moduleType.name}),f=t.create(c),w=f.injector.get(ns,null);if(!w)throw new qt(402,"");return a.runOutsideAngular(()=>{const G=a.onError.subscribe({next:ee=>{w.handleError(ee)}});f.onDestroy(()=>{tf(this._modules,f),G.unsubscribe()})}),function qx(n,e,t){try{const r=t();return ac(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(w,a,()=>{const G=f.injector.get(zh);return G.runInitializers(),G.donePromise.then(()=>(function CM(n){br(n,"Expected localeId to be defined"),"string"==typeof n&&(By=n.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Hi,hc)||hc),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,r=[]){const i=sb({},r);return function Hx(n,e,t){const r=new Ph(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(ef);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new qt(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qt(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(tb,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(_t(fr))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function sb(n,e){return Array.isArray(e)?e.reduce(sb,n):Object.assign(Object.assign({},n),e)}let ef=(()=>{class n{constructor(t,r,i,s){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Pe(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new Pe(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{jn.assertNotInAngularZone(),Xh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{jn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),f.unsubscribe()}});this.isStable=function HS(...n){const e=Yo(n),t=function OS(n,e){return"number"==typeof wu(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?sn(r[0]):Ko(t)(Hn(r,e)):Ii}(o,a.pipe(Np()))}bootstrap(t,r){if(!this._initStatus.done)throw new qt(405,"");let i;i=t instanceof cv?t:this._injector.get(Ia).resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function Ux(n){return n.isBoundToModule}(i)?void 0:this._injector.get(ji),a=i.create(fr.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(Jh,null),f=c&&a.injector.get(Bx);return c&&f&&f.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),tf(this.components,a),f&&f.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new qt(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;tf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yv,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(_t(jn),_t(fr),_t(ns),_t(zh))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let ab=!0,nf=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yx,n})();function Yx(n){return function Jx(n,e,t){if(Sl(n)&&!t){const r=Sr(n.index,e);return new Ra(r,r)}return 47&n.type?new Ra(e[16],e):null}(Rn(),Qe(),16==(16&n))}class hb{constructor(){}supports(e){return Ea(e)}create(e){return new rI(e)}}const nI=(n,e)=>e;class rI{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nI}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<pb(r,i,s)?t:r,a=pb(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,f=l-i;if(c!=f){for(let G=0;G<c;G++){const ee=G<s.length?s[G]:s[G]=0,Ee=ee+G;f<=Ee&&Ee<c&&(s[G]=ee+1)}s[o.previousIndex]=f-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ea(e))throw new qt(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function oT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[yo()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new iI(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new fb),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fb),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class iI{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sI{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class fb{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new sI,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pb(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function mb(){return new wc([new hb])}let wc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mb()),deps:[[n,new ao,new Jr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new qt(901,"")}}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:mb}),n})();const uI=rb(null,"core",[]);let dI=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(_t(ef))},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({}),n})(),Dc=null;function ss(){return Dc}const Tn=new At("DocumentToken");let xs=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(){return function gI(){return _t(yb)}()},providedIn:"platform"}),n})();const mI=new At("Location Initialized");let yb=(()=>{class n extends xs{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ss().getBaseHref(this._doc)}onPopState(t){const r=ss().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ss().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){vb()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){vb()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_t(Tn))},n.\u0275prov=Rt({token:n,factory:function(){return function _I(){return new yb(_t(Tn))}()},providedIn:"platform"}),n})();function vb(){return!!window.history.pushState}function cf(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function bb(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ui(n){return n&&"?"!==n[0]?"?"+n:n}let No=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(){return function yI(n){const e=_t(Tn).location;return new Cb(_t(xs),e&&e.origin||"")}()},providedIn:"root"}),n})();const uf=new At("appBaseHref");let Cb=(()=>{class n extends No{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cf(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ui(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ui(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ui(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_t(xs),_t(uf,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),vI=(()=>{class n extends No{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=cf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ui(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ui(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_t(xs),_t(uf,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),df=(()=>{class n{constructor(t,r){this._subject=new Jn,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=bb(Sb(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ui(r))}normalize(t){return n.stripTrailingSlash(function CI(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Sb(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ui(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ui(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ui,n.joinWithSlash=cf,n.stripTrailingSlash=bb,n.\u0275fac=function(t){return new(t||n)(_t(No),_t(xs))},n.\u0275prov=Rt({token:n,factory:function(){return function bI(){return new df(_t(No),_t(xs))}()},providedIn:"root"}),n})();function Sb(n){return n.replace(/\/index.html$/,"")}class aR{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lc=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new aR(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Ib(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ib(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(ht(ri),ht(Vi),ht(wc))},n.\u0275dir=Wn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ib(n,e){n.context.$implicit=e.item}let Is=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lR,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Rb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Rb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(ht(ri),ht(Vi))},n.\u0275dir=Wn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class lR{constructor(){this.$implicit=null,this.ngIf=null}}function Rb(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Yt(e)}'.`)}let FR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({}),n})();const Fb="browser";let VR=(()=>{class n{}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:()=>new HR(_t(Tn),window)}),n})();class HR{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function UR(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Lb(this.window.history)||Lb(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Lb(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wf extends class GR extends class pI{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fI(n){Dc||(Dc=n)}(new wf)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zR(){return Va=Va||document.querySelector("base"),Va?Va.getAttribute("href"):null}();return null==t?null:function WR(n){Nc=Nc||document.createElement("a"),Nc.setAttribute("href",n);const e=Nc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function iR(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Nc,Va=null;const Nb=new At("TRANSITION_ID"),XR=[{provide:Gh,useFactory:function qR(n,e,t){return()=>{t.get(zh).donePromise.then(()=>{const r=ss(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Nb,Tn,fr],multi:!0}];class Df{static init(){!function Vx(n){Qh=n}(new Df)}addToWindow(e){Jt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Jt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Jt.getAllAngularRootElements=()=>e.getAllRootElements(),Jt.frameworkStabilizers||(Jt.frameworkStabilizers=[]),Jt.frameworkStabilizers.push(r=>{const i=Jt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?ss().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let KR=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const Bc=new At("EventManagerPlugins");let jc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_t(Bc),_t(jn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class Bb{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=ss().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let jb=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),Ha=(()=>{class n extends jb{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vb),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vb))}}return n.\u0275fac=function(t){return new(t||n)(_t(Tn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();function Vb(n){ss().remove(n)}const Tf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mf=/%COMP%/g;function Vc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Vc(n,i,t):(i=i.replace(Mf,n),t.push(i))}return t}function $b(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Pf=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new xf(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case ui.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new t1(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case ui.ShadowDom:return new n1(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Vc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_t(jc),_t(Ha),_t(La))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class xf{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Tf[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Tf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Tf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Dr.DashCase|Dr.Important)?e.style.setProperty(t,r,i&Dr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Dr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$b(r)):this.eventManager.addEventListener(e,t,$b(r))}}class t1 extends xf{constructor(e,t,r,i){super(e),this.component=r;const s=Vc(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function QR(n){return"_ngcontent-%COMP%".replace(Mf,n)}(i+"-"+r.id),this.hostAttr=function ZR(n){return"_nghost-%COMP%".replace(Mf,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class n1 extends xf{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Vc(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let r1=(()=>{class n extends Bb{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_t(Tn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const zb=["alt","control","meta","shift"],o1={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},a1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let l1=(()=>{class n extends Bb{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ss().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(zb.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function c1(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Wb.hasOwnProperty(e)&&(e=Wb[e]))}return o1[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zb.forEach(s=>{s!=i&&a1[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_t(Tn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const f1=rb(uI,"browser",[{provide:qh,useValue:Fb},{provide:Kv,useValue:function u1(){wf.makeCurrent(),Df.init()},multi:!0},{provide:Tn,useFactory:function h1(){return function _E(n){$u=n}(document),document},deps:[]}]),p1=[{provide:ih,useValue:"root"},{provide:ns,useFactory:function d1(){return new ns},deps:[]},{provide:Bc,useClass:r1,multi:!0,deps:[Tn,jn,qh]},{provide:Bc,useClass:l1,multi:!0,deps:[Tn]},{provide:Pf,useClass:Pf,deps:[jc,Ha,La]},{provide:dv,useExisting:Pf},{provide:jb,useExisting:Ha},{provide:Ha,useClass:Ha,deps:[Tn]},{provide:Jh,useClass:Jh,deps:[jn]},{provide:jc,useClass:jc,deps:[Bc,jn]},{provide:class $R{},useClass:KR,deps:[]}];let g1=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:La,useValue:t.appId},{provide:Nb,useExisting:La},XR]}}}return n.\u0275fac=function(t){return new(t||n)(_t(n,12))},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({providers:p1,imports:[FR,dI]}),n})();"undefined"!=typeof window&&window;let Rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(t){let r=null;return r=t?new(t||n):_t(Kb),r},providedIn:"root"}),n})(),Kb=(()=>{class n extends Rf{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Xt.NONE:return r;case Xt.HTML:return gi(r,"HTML")?wr(r):Xg(this._doc,String(r)).toString();case Xt.STYLE:return gi(r,"Style")?wr(r):r;case Xt.SCRIPT:if(gi(r,"Script"))return wr(r);throw new Error("unsafe value used in a script context");case Xt.URL:return Vg(r),gi(r,"URL")?wr(r):pa(String(r));case Xt.RESOURCE_URL:if(gi(r,"ResourceURL"))return wr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function RA(n){return new TA(n)}(t)}bypassSecurityTrustStyle(t){return function kA(n){return new MA(n)}(t)}bypassSecurityTrustScript(t){return function OA(n){return new PA(n)}(t)}bypassSecurityTrustUrl(t){return function FA(n){return new xA(n)}(t)}bypassSecurityTrustResourceUrl(t){return function LA(n){return new IA(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(_t(Tn))},n.\u0275prov=Rt({token:n,factory:function(t){let r=null;return r=t?new t:function w1(n){return new Kb(n.get(Tn))}(_t(fr)),r},providedIn:"root"}),n})();function Tt(...n){return Hn(n,Yo(n))}class ai extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:D1}=Array,{getPrototypeOf:T1,prototype:M1,keys:P1}=Object;function Yb(n){if(1===n.length){const e=n[0];if(D1(e))return{args:e,keys:null};if(function x1(n){return n&&"object"==typeof n&&T1(n)===M1}(e)){const t=P1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:I1}=Array;function Jb(n){return W(e=>function R1(n,e){return I1(e)?n(...e):n(e)}(n,e))}function Qb(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zb(n,e,t){n?xi(t,n,e):e()}function Ua(n,e){const t=p(n)?n:()=>n,r=i=>i.error(t());return new Pe(e?i=>e.schedule(r,0,i):r)}const Hc=ce(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function kf(...n){return function F1(){return Ko(1)}()(Hn(n,Yo(n)))}function e0(n){return new Pe(e=>{sn(n()).subscribe(e)})}function t0(){return D((n,e)=>{let t=null;n._refCount++;const r=F(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class L1 extends Pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,C(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;const t=this.getSubject();e.add(this.source.subscribe(F(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return t0()(this)}}function Rs(n,e){return D((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(F(r,l=>{null==i||i.unsubscribe();let c=0;const f=s++;sn(n(l,f)).subscribe(i=F(r,w=>r.next(e?e(l,w,f,c++):w),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function B1(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(F(o,f=>{const w=c++;l=a?n(l,f,w):(a=!0,f),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function n0(n,e){return D(B1(n,e,arguments.length>=2,!0))}function ks(n,e){return D((t,r)=>{let i=0;t.subscribe(F(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Gi(n){return D((e,t)=>{let s,r=null,i=!1;r=e.subscribe(F(t,void 0,void 0,o=>{s=sn(n(o,Gi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Bo(n,e){return p(e)?Ln(n,e,1):Ln(n,1)}function Of(n){return n<=0?()=>Ii:D((e,t)=>{let r=[];e.subscribe(F(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function r0(n=j1){return D((e,t)=>{let r=!1;e.subscribe(F(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function j1(){return new Hc}function s0(n){return D((e,t)=>{let r=!1;e.subscribe(F(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function jo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ks((i,s)=>n(i,s,r)):Ie,Jo(1),t?s0(e):r0(()=>new Hc))}function Qn(n,e,t){const r=p(n)||e||t?{next:n,error:e,complete:t}:n;return r?D((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(F(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ie}function o0(n){return D((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class zi{constructor(e,t){this.id=e,this.url=t}}class Ff extends zi{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends zi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class a0 extends zi{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class H1 extends zi{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class U1 extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $1 extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G1 extends zi{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class z1 extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W1 extends zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l0{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class c0{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q1{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X1{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K1{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y1{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u0{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class J1{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vo(n){return new J1(n)}const d0="ngNavigationCancelingError";function Lf(n){const e=Error("NavigationCancelingError: "+n);return e[d0]=!0,e}function Z1(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ai(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!h0(n[i],e[i]))return!1;return!0}function h0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function f0(n){return Array.prototype.concat.apply([],n)}function p0(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function wi(n){return z_(n)?n:ac(n)?Hn(Promise.resolve(n)):Tt(n)}const nk={exact:function _0(n,e,t){if(!Fs(n.segments,e.segments)||!Uc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_0(n.children[r],e.children[r],t))return!1;return!0},subset:y0},g0={exact:function rk(n,e){return Ai(n,e)},subset:function ik(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>h0(n[t],e[t]))},ignored:()=>!0};function m0(n,e,t){return nk[t.paths](n.root,e.root,t.matrixParams)&&g0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function y0(n,e,t){return v0(n,e,e.segments,t)}function v0(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Fs(i,t)||e.hasChildren()||!Uc(i,t,r))}if(n.segments.length===t.length){if(!Fs(n.segments,t)||!Uc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!y0(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Fs(n.segments,i)&&Uc(n.segments,i,r)&&n.children[jt])&&v0(n.children[jt],e,s,r)}}function Uc(n,e,t){return e.every((r,i)=>g0[t](n[i].parameters,r.parameters))}class Os{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vo(this.queryParams)),this._queryParamMap}toString(){return ak.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $c(this)}}class Ga{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vo(this.parameters)),this._parameterMap}toString(){return A0(this)}}function Fs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class b0{}class C0{parse(e){const t=new mk(e);return new Os(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${za(e.root,!0)}`,r=function uk(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Gc(t)}=${Gc(i)}`).join("&"):`${Gc(t)}=${Gc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function lk(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ak=new C0;function $c(n){return n.segments.map(e=>A0(e)).join("/")}function za(n,e){if(!n.hasChildren())return $c(n);if(e){const t=n.children[jt]?za(n.children[jt],!1):"",r=[];return Gn(n.children,(i,s)=>{s!==jt&&r.push(`${s}:${za(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ok(n,e){let t=[];return Gn(n.children,(r,i)=>{i===jt&&(t=t.concat(e(r,i)))}),Gn(n.children,(r,i)=>{i!==jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===jt?[za(n.children[jt],!1)]:[`${i}:${za(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${$c(n)}/${t[0]}`:`${$c(n)}/(${t.join("//")})`}}function S0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gc(n){return S0(n).replace(/%3B/gi,";")}function Nf(n){return S0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zc(n){return decodeURIComponent(n)}function E0(n){return zc(n.replace(/\+/g,"%20"))}function A0(n){return`${Nf(n.path)}${function ck(n){return Object.keys(n).map(e=>`;${Nf(e)}=${Nf(n[e])}`).join("")}(n.parameters)}`}const dk=/^[^\/()?;=#]+/;function Wc(n){const e=n.match(dk);return e?e[0]:""}const hk=/^[^=?&#]+/,pk=/^[^&#]+/;class mk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new $t(e,t)),r}parseSegment(){const e=Wc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ga(zc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Wc(this.remaining);i&&(r=i,this.capture(r))}e[zc(t)]=zc(r)}parseQueryParam(e){const t=function fk(n){const e=n.match(hk);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function gk(n){const e=n.match(pk);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=E0(t),s=E0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Wc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=jt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[jt]:new $t([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class w0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Bf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jf(e,this._root).map(t=>t.value)}}function Bf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Bf(n,t);if(r)return r}return null}function jf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jf(n,t);if(r.length)return r.unshift(e),r}return[]}class Wi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ho(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class D0 extends w0{constructor(e,t){super(e),this.snapshot=t,Vf(this,e)}toString(){return this.snapshot.toString()}}function T0(n,e){const t=function _k(n,e){const o=new qc([],{},{},"",{},jt,e,null,n.root,-1,{});return new P0("",new Wi(o,[]))}(n,e),r=new ai([new Ga("",{})]),i=new ai({}),s=new ai({}),o=new ai({}),a=new ai(""),l=new Ls(r,i,o,a,s,jt,e,t.root);return l.snapshot=t.root,new D0(new Wi(l,[]),t)}class Ls{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(W(e=>Vo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(W(e=>Vo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function M0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function yk(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qc{constructor(e,t,r,i,s,o,a,l,c,f,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=f,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class P0 extends w0{constructor(e,t){super(t),this.url=e,Vf(this,t)}toString(){return x0(this._root)}}function Vf(n,e){e.value._routerState=n,e.children.forEach(t=>Vf(n,t))}function x0(n){const e=n.children.length>0?` { ${n.children.map(x0).join(", ")} } `:"";return`${n.value}${e}`}function Hf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ai(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ai(e.params,t.params)||n.params.next(t.params),function ek(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ai(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ai(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Uf(n,e){const t=Ai(n.params,e.params)&&function sk(n,e){return Fs(n,e)&&n.every((t,r)=>Ai(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Uf(n.parent,e.parent))}function Wa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function bk(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wa(n,r,i);return Wa(n,r)})}(n,e,t);return new Wi(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Wa(n,a)),o}}const r=function Ck(n){return new Ls(new ai(n.url),new ai(n.params),new ai(n.queryParams),new ai(n.fragment),new ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Wa(n,s));return new Wi(r,i)}}function Xc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qa(n){return"object"==typeof n&&null!=n&&n.outlets}function $f(n,e,t,r,i){let s={};if(r&&Gn(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new Os(t,s,i);const o=I0(n,e,t);return new Os(o,s,i)}function I0(n,e,t){const r={};return Gn(n.children,(i,s)=>{r[s]=i===e?t:I0(i,e,t)}),new $t(n.segments,r)}class R0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(qa);if(i&&i!==p0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function k0(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return Kc(n,e,t);const r=function Tk(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(qa(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!F0(l,c,o))return s;r+=2}else{if(!F0(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new $t(n.segments.slice(0,r.pathIndex),{});return s.children[jt]=new $t(n.segments.slice(r.pathIndex),n.children),Kc(s,0,i)}return r.match&&0===i.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?zf(n,e,t):r.match?Kc(n,0,i):zf(n,e,t)}function Kc(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function Dk(n){return qa(n[0])?n[0].outlets:{[jt]:n}}(t),i={};return Gn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=k0(n.children[o],e,s))}),Gn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new $t(n.segments,i)}}function zf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(qa(s)){const l=Mk(s.outlets);return new $t(r,l)}if(0===i&&Xc(t[0])){r.push(new Ga(n.segments[e].path,O0(t[0]))),i++;continue}const o=qa(s)?s.outlets[jt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Xc(a)?(r.push(new Ga(o,O0(a))),i+=2):(r.push(new Ga(o,{})),i++)}return new $t(r,{})}function Mk(n){const e={};return Gn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=zf(new $t([],{}),0,t))}),e}function O0(n){const e={};return Gn(n,(t,r)=>e[r]=`${t}`),e}function F0(n,e,t){return n==t.path&&Ai(e,t.parameters)}class xk{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ho(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Gn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ho(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ho(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ho(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Y1(s.value.snapshot))}),e.children.length&&this.forwardEvent(new X1(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Hf(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Hf(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function Ik(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Wf{constructor(e,t){this.routes=e,this.module=t}}function as(n){return"function"==typeof n}function Ns(n){return n instanceof Os}const Xa=Symbol("INITIAL_VALUE");function Ka(){return Rs(n=>function k1(...n){const e=Yo(n),t=kp(n),{args:r,keys:i}=Yb(n);if(0===r.length)return Hn([],e);const s=new Pe(function O1(n,e,t=Ie){return r=>{Zb(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)Zb(e,()=>{const c=Hn(n[l],e);let f=!1;c.subscribe(F(r,w=>{s[l]=w,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Qb(i,o):Ie));return t?s.pipe(Jb(t)):s}(n.map(e=>e.pipe(Jo(1),function N1(...n){const e=Yo(n);return D((t,r)=>{(e?kf(n,t,e):kf(n,t)).subscribe(r)})}(Xa)))).pipe(n0((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==Xa?i:(s===Xa&&(r=!0),r||!1!==s&&o!==t.length-1&&!Ns(s)?i:s),e)},Xa),ks(e=>e!==Xa),W(e=>Ns(e)?e:!0===e),Jo(1)))}class Nk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ya,this.attachRef=null}}class Ya{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Nk,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let qf=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Jn,this.deactivateEvents=new Jn,this.attachEvents=new Jn,this.detachEvents=new Jn,this.name=s||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Bk(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(ht(Ya),ht(ri),ht(Ia),to("name"),ht(nf))},n.\u0275dir=Wn({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Bk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ls?this.route:e===Ya?this.childContexts:this.parent.get(e,t)}}let L0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ur({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Bn(0,"router-outlet")},directives:[qf],encapsulation:2}),n})();function N0(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];jk(r,Vk(e,r))}}function jk(n,e){n.children&&N0(n.children,e)}function Vk(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Xf(n){const e=n.children&&n.children.map(Xf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=L0),t}function Ur(n){return n.outlet||jt}function B0(n,e){const t=n.filter(r=>Ur(r)===e);return t.push(...n.filter(r=>Ur(r)!==e)),t}const j0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},j0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Z1)(t,n,e);if(!s)return Object.assign({},j0);const o={};Gn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Jc(n,e,t,r,i="corrected"){if(t.length>0&&function $k(n,e,t){return t.some(r=>Qc(n,e,r)&&Ur(r)!==jt)}(n,t,r)){const o=new $t(e,function Uk(n,e,t,r){const i={};i[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ur(s)!==jt){const o=new $t([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Ur(s)]=o}return i}(n,e,r,new $t(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Gk(n,e,t){return t.some(r=>Qc(n,e,r))}(n,t,r)){const o=new $t(n.segments,function Hk(n,e,t,r,i,s){const o={};for(const a of r)if(Qc(n,t,a)&&!i[Ur(a)]){const l=new $t([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Ur(a)]=l}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new $t(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Qc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function V0(n,e,t,r){return!!(Ur(n)===r||r!==jt&&Qc(e,t,n))&&("**"===n.path||Yc(e,n,t).matched)}function H0(n,e,t){return 0===e.length&&!n.children[t]}class Zc{constructor(e){this.segmentGroup=e||null}}class U0{constructor(e){this.urlTree=e}}function Ja(n){return Ua(new Zc(n))}function $0(n){return Ua(new U0(n))}class Xk{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(ji)}apply(){const e=Jc(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,jt).pipe(W(s=>this.createUrlTree(Kf(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gi(s=>{if(s instanceof U0)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Zc?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,jt).pipe(W(i=>this.createUrlTree(Kf(i),e.queryParams,e.fragment))).pipe(Gi(i=>{throw i instanceof Zc?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new $t([],{[jt]:e}):e;return new Os(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(W(s=>new $t([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Hn(i).pipe(Bo(s=>{const o=r.children[s],a=B0(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(W(l=>({segment:l,outlet:s})))}),n0((s,o)=>(s[o.outlet]=o.segment,s),{}),function V1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ks((i,s)=>n(i,s,r)):Ie,Of(1),t?s0(e):r0(()=>new Hc))}())}expandSegment(e,t,r,i,s,o){return Hn(r).pipe(Bo(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(Gi(c=>{if(c instanceof Zc)return Tt(null);throw c}))),jo(a=>!!a),Gi((a,l)=>{if(a instanceof Hc||"EmptyError"===a.name)return H0(t,i,s)?Tt(new $t([],{})):Ja(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return V0(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Ja(t):Ja(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$0(s):this.lineralizeSegments(r,s).pipe(Ln(o=>{const a=new $t(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:f}=Yc(t,i,s);if(!a)return Ja(t);const w=this.applyRedirectCommands(l,i.redirectTo,f);return i.redirectTo.startsWith("/")?$0(w):this.lineralizeSegments(i,w).pipe(Ln(G=>this.expandSegment(e,t,r,G.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(W(w=>(r._loadedConfig=w,new $t(i,{})))):Tt(new $t(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Yc(t,r,i);return o?this.getChildConfig(e,r,i).pipe(Ln(f=>{const w=f.module,G=f.routes,{segmentGroup:ee,slicedSegments:Ee}=Jc(t,a,l,G),Le=new $t(ee.segments,ee.children);if(0===Ee.length&&Le.hasChildren())return this.expandChildren(w,G,Le).pipe(W(nt=>new $t(a,nt)));if(0===G.length&&0===Ee.length)return Tt(new $t(a,{}));const Je=Ur(r)===s;return this.expandSegment(w,Le,G,Ee,Je?jt:s,!0).pipe(W(He=>new $t(a.concat(He.segments),He.children)))})):Ja(t)}getChildConfig(e,t,r){return t.children?Tt(new Wf(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Ln(i=>i?this.configLoader.load(e.injector,t).pipe(W(s=>(t._loadedConfig=s,s))):function Wk(n){return Ua(Lf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Tt(new Wf([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Tt(i.map(o=>{const a=e.get(o);let l;if(function kk(n){return n&&as(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!as(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return wi(l)})).pipe(Ka(),Qn(o=>{if(!Ns(o))return;const a=Lf(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),W(o=>!0===o)):Tt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Tt(r);if(i.numberOfChildren>1||!i.children[jt])return Ua(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Os(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Gn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new $t(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Kf(n){const e={};for(const r of Object.keys(n.children)){const s=Kf(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Kk(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}class G0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eu{constructor(e,t){this.component=e,this.route=t}}function Jk(n,e,t){const r=n._root;return Qa(r,e?e._root:null,t,[r.value])}function tu(n,e,t){const r=function Zk(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Qa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ho(e);return n.children.forEach(o=>{(function eO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function tO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Fs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fs(n.url,e.url)||!Ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uf(n,e)||!Ai(n.queryParams,e.queryParams);default:return!Uf(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new G0(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Qa(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new eu(a.outlet.component,o))}else o&&Za(e,a,i),i.canActivateChecks.push(new G0(r)),Qa(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Gn(s,(o,a)=>Za(o,t.getContext(a),i)),i}function Za(n,e,t){const r=Ho(n),i=n.value;Gn(r,(s,o)=>{Za(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new eu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class uO{}function z0(n){return new Pe(e=>e.error(n))}class hO{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Jc(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,jt);if(null===t)return null;const r=new qc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Wi(r,t),s=new P0(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=M0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=B0(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=W0(r);return function fO(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return H0(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!V0(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const ee=r.length>0?p0(r).parameters:{};s=new qc(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,K0(e),Ur(e),e.component,e,q0(t),X0(t)+r.length,Y0(e))}else{const ee=Yc(t,e,r);if(!ee.matched)return null;o=ee.consumedSegments,a=ee.remainingSegments,s=new qc(o,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,K0(e),Ur(e),e.component,e,q0(t),X0(t)+o.length,Y0(e))}const l=function pO(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:f}=Jc(t,o,a,l.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===f.length&&c.hasChildren()){const ee=this.processChildren(l,c);return null===ee?null:[new Wi(s,ee)]}if(0===l.length&&0===f.length)return[new Wi(s,[])];const w=Ur(e)===i,G=this.processSegment(l,c,f,w?jt:i);return null===G?null:[new Wi(s,G)]}}function gO(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function W0(n){const e=[],t=new Set;for(const r of n){if(!gO(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=W0(r.children);e.push(new Wi(r.value,i))}return e.filter(r=>!t.has(r))}function q0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function X0(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function K0(n){return n.data||{}}function Y0(n){return n.resolve||{}}function J0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Yf(n){return Rs(e=>{const t=n(e);return t?Hn(t).pipe(W(()=>e)):Tt(e)})}class EO extends class SO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Jf=new At("ROUTES");class Q0{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(W(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new Wf(f0(o.injector.get(Jf,void 0,Mt.Self|Mt.Optional)).map(Xf),o)}),Gi(s=>{throw t._loader$=void 0,s}));return t._loader$=new L1(i,()=>new E).pipe(t0()),t._loader$}loadModuleFactory(e){return wi(e()).pipe(Ln(t=>t instanceof pv?Tt(t):Hn(this.compiler.compileModuleAsync(t))))}}class wO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function DO(n){throw n}function TO(n,e,t){return e.parse("/")}function Z0(n,e){return Tt(null)}const MO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zn=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=DO,this.malformedUriErrorHandler=TO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Z0,afterPreactivation:Z0},this.urlHandlingStrategy=new wO,this.routeReuseStrategy=new EO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(ji),this.console=o.get(Tx);const w=o.get(jn);this.isNgZoneEnabled=w instanceof jn&&jn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function tk(){return new Os(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Q0(o,a,G=>this.triggerEvent(new l0(G)),G=>this.triggerEvent(new c0(G))),this.routerState=T0(this.currentUrlTree,this.rootComponentType),this.transitions=new ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ks(i=>0!==i.id),W(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Rs(i=>{let s=!1,o=!1;return Tt(i).pipe(Qn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rs(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return eC(a.source)&&(this.browserUrlTree=a.extractedUrl),Tt(a).pipe(Rs(w=>{const G=this.transitions.getValue();return r.next(new Ff(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),G!==this.transitions.getValue()?Ii:Promise.resolve(w)}),function Yk(n,e,t,r){return Rs(i=>function qk(n,e,t,r,i){return new Xk(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(W(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qn(w=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:w.urlAfterRedirects})}),function mO(n,e,t,r,i){return Ln(s=>function dO(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new hO(n,e,t,r,i,s).recognize();return null===o?z0(new uO):Tt(o)}catch(o){return z0(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(W(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,w=>this.serializeUrl(w),this.paramsInheritanceStrategy,this.relativeLinkResolution),Qn(w=>{if("eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(ee,w)}this.browserUrlTree=w.urlAfterRedirects}const G=new U1(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);r.next(G)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:ee,source:Ee,restoredState:Le,extras:Je}=a,Ze=new Ff(G,this.serializeUrl(ee),Ee,Le);r.next(Ze);const He=T0(ee,this.rootComponentType).snapshot;return Tt(Object.assign(Object.assign({},a),{targetSnapshot:He,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},Je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Ii}),Yf(a=>{const{targetSnapshot:l,id:c,extractedUrl:f,rawUrl:w,extras:{skipLocationChange:G,replaceUrl:ee}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:f,rawUrlTree:w,skipLocationChange:!!G,replaceUrl:!!ee})}),Qn(a=>{const l=new $1(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),W(a=>Object.assign(Object.assign({},a),{guards:Jk(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function nO(n,e){return Ln(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function rO(n,e,t,r){return Hn(n).pipe(Ln(i=>function cO(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Tt(s.map(a=>{const l=tu(a,e,i);let c;if(function Lk(n){return n&&as(n.canDeactivate)}(l))c=wi(l.canDeactivate(n,e,t,r));else{if(!as(l))throw new Error("Invalid CanDeactivate guard");c=wi(l(n,e,t,r))}return c.pipe(jo())})).pipe(Ka()):Tt(!0)}(i.component,i.route,t,e,r)),jo(i=>!0!==i,!0))}(o,r,i,n).pipe(Ln(a=>a&&function Rk(n){return"boolean"==typeof n}(a)?function iO(n,e,t,r){return Hn(e).pipe(Bo(i=>kf(function oO(n,e){return null!==n&&e&&e(new q1(n)),Tt(!0)}(i.route.parent,r),function sO(n,e){return null!==n&&e&&e(new K1(n)),Tt(!0)}(i.route,r),function lO(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Qk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>e0(()=>Tt(o.guards.map(l=>{const c=tu(l,o.node,t);let f;if(function Fk(n){return n&&as(n.canActivateChild)}(c))f=wi(c.canActivateChild(r,n));else{if(!as(c))throw new Error("Invalid CanActivateChild guard");f=wi(c(r,n))}return f.pipe(jo())})).pipe(Ka())));return Tt(s).pipe(Ka())}(n,i.path,t),function aO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Tt(!0);const i=r.map(s=>e0(()=>{const o=tu(s,e,t);let a;if(function Ok(n){return n&&as(n.canActivate)}(o))a=wi(o.canActivate(e,n));else{if(!as(o))throw new Error("Invalid CanActivate guard");a=wi(o(e,n))}return a.pipe(jo())}));return Tt(i).pipe(Ka())}(n,i.route,t))),jo(i=>!0!==i,!0))}(r,s,n,e):Tt(a)),W(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Qn(a=>{if(Ns(a.guardsResult)){const c=Lf(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new G1(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ks(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),Yf(a=>{if(a.guards.canActivateChecks.length)return Tt(a).pipe(Qn(l=>{const c=new z1(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Rs(l=>{let c=!1;return Tt(l).pipe(function _O(n,e){return Ln(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Tt(t);let s=0;return Hn(i).pipe(Bo(o=>function yO(n,e,t,r){return function vO(n,e,t,r){const i=J0(n);if(0===i.length)return Tt({});const s={};return Hn(i).pipe(Ln(o=>function bO(n,e,t,r){const i=tu(n,e,r);return wi(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(Qn(a=>{s[o]=a}))),Of(1),Ln(()=>J0(s).length===i.length?Tt(s):Ii))}(n._resolve,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),M0(n,t).resolve),null)))}(o.route,r,n,e)),Qn(()=>s++),Of(1),Ln(o=>s===i.length?Tt(t):Ii))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Qn(l=>{const c=new W1(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Yf(a=>{const{targetSnapshot:l,id:c,extractedUrl:f,rawUrl:w,extras:{skipLocationChange:G,replaceUrl:ee}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:f,rawUrlTree:w,skipLocationChange:!!G,replaceUrl:!!ee})}),W(a=>{const l=function vk(n,e,t){const r=Wa(n,e._root,t?t._root:void 0);return new D0(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Qn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>W(r=>(new xk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Qn({next(){s=!0},complete(){s=!0}}),o0(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),Gi(a=>{if(o=!0,function Q1(n){return n&&n[d0]}(a)){const l=Ns(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new a0(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const f=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),w={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eC(i.source)};this.scheduleNavigation(f,"imperative",null,w,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new H1(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return Ii}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){N0(t),this.config=t.map(Xf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,f=l?this.currentUrlTree.fragment:o;let w=null;switch(a){case"merge":w=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),function Sk(n,e,t,r,i){if(0===t.length)return $f(e.root,e.root,e.root,r,i);const s=function Ek(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new R0(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Gn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new R0(t,e,r)}(t);if(s.toRoot())return $f(e.root,e.root,new $t([],{}),r,i);const o=function Ak(n,e,t){if(n.isAbsolute)return new Gf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Gf(s,s===e.root,0)}const r=Xc(n.commands[0])?0:1;return function wk(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Gf(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Kc(o.segmentGroup,o.index,s.commands):k0(o.segmentGroup,o.index,s.commands);return $f(e.root,o.segmentGroup,a,r,i)}(c,this.currentUrlTree,t,w,null!=f?f:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ns(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function xO(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},MO):!1===r?Object.assign({},PO):r,Ns(t))return m0(this.currentUrlTree,t,i);const s=this.parseUrl(t);return m0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $a(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,f,w;o?(c=o.resolve,f=o.reject,w=o.promise):w=new Promise((Ee,Le)=>{c=Ee,f=Le});const G=++this.navigationId;let ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ee=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):ee=0,this.setTransition({id:G,targetPageId:ee,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:f,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(Ee=>Promise.reject(Ee))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new a0(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){mh()},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();function eC(n){return"imperative"!==n}class tC{}class nC{preload(e,t){return Tt(null)}}let rC=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new Q0(i,r,l=>t.triggerEvent(new l0(l)),l=>t.triggerEvent(new c0(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(ks(t=>t instanceof $a),Bo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ji);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return Hn(i).pipe(Ko(),W(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Ln(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_t(Zn),_t(Jv),_t(fr),_t(tC))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),ep=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ff?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $a&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof u0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new u0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){mh()},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const Bs=new At("ROUTER_CONFIGURATION"),iC=new At("ROUTER_FORROOT_GUARD"),OO=[df,{provide:b0,useClass:C0},{provide:Zn,useFactory:function jO(n,e,t,r,i,s,o={},a,l){const c=new Zn(null,n,e,t,r,i,f0(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function VO(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(f=>{var w,G;null===(w=console.group)||void 0===w||w.call(console,`Router Event: ${f.constructor.name}`),console.log(f.toString()),console.log(f),null===(G=console.groupEnd)||void 0===G||G.call(console)}),c},deps:[b0,Ya,df,fr,Jv,Jf,Bs,[class AO{},new Jr],[class CO{},new Jr]]},Ya,{provide:Ls,useFactory:function HO(n){return n.routerState.root},deps:[Zn]},rC,nC,class kO{preload(e,t){return t().pipe(Gi(()=>Tt(null)))}},{provide:Bs,useValue:{enableTracing:!1}}];function FO(){return new nb("Router",Zn)}let sC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[OO,oC(t),{provide:iC,useFactory:BO,deps:[[Zn,new Jr,new ao]]},{provide:Bs,useValue:r||{}},{provide:No,useFactory:NO,deps:[xs,[new Hl(uf),new Jr],Bs]},{provide:ep,useFactory:LO,deps:[Zn,VR,Bs]},{provide:tC,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nC},{provide:nb,multi:!0,useFactory:FO},[tp,{provide:Gh,multi:!0,useFactory:UO,deps:[tp]},{provide:aC,useFactory:$O,deps:[tp]},{provide:Yv,multi:!0,useExisting:aC}]]}}static forChild(t){return{ngModule:n,providers:[oC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_t(iC,8),_t(Zn,8))},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({}),n})();function LO(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ep(n,e,t)}function NO(n,e,t={}){return t.useHash?new vI(n,e):new Cb(n,e)}function BO(n){return"guarded"}function oC(n){return[{provide:eA,multi:!0,useValue:n},{provide:Jf,multi:!0,useValue:n}]}let tp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get(mI,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(Zn),o=this.injector.get(Bs);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Bs),i=this.injector.get(rC),s=this.injector.get(ep),o=this.injector.get(Zn),a=this.injector.get(ef);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_t(fr))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();function UO(n){return n.appInitializer.bind(n)}function $O(n){return n.bootstrapListener.bind(n)}const aC=new At("Router Initializer");class el{createDataView(e){let t=new ArrayBuffer(5+e),r=new DataView(t);return r.setInt32(0,e),r.setInt8(4,this.getType()),r}}var nn=(()=>{return(n=nn||(nn={}))[n.STREAM_INIT=0]="STREAM_INIT",n[n.STREAM_START=1]="STREAM_START",n[n.STREAM_PAGE_ACTION=2]="STREAM_PAGE_ACTION",n[n.STREAM_PAGE_ACTIONS=3]="STREAM_PAGE_ACTIONS",n[n.STREAM_PAGE_CREATED=4]="STREAM_PAGE_CREATED",n[n.STREAM_PAGE_DELETED=5]="STREAM_PAGE_DELETED",n[n.STREAM_PAGE_SELECTED=6]="STREAM_PAGE_SELECTED",n[n.STREAM_DOCUMENT_CREATED=7]="STREAM_DOCUMENT_CREATED",n[n.STREAM_DOCUMENT_CLOSED=8]="STREAM_DOCUMENT_CLOSED",n[n.STREAM_DOCUMENT_SELECTED=9]="STREAM_DOCUMENT_SELECTED",n[n.STREAM_SPEECH_PUBLISHED=10]="STREAM_SPEECH_PUBLISHED",nn;var n})();class nu extends el{constructor(e,t){super(),this.documentId=e,this.pageNumber=t}getType(){return nn.STREAM_PAGE_ACTIONS}toByteBuffer(){let e=this.createDataView(12);return e.setBigInt64(5,this.documentId),e.setInt32(13,this.pageNumber),e.buffer}}class ru extends nu{constructor(e,t){super(e,t)}getType(){return nn.STREAM_PAGE_SELECTED}}class yn{}class np extends yn{constructor(e){super(),this.pageNumber=e}execute(e){e.setPageNumber(this.pageNumber)}}class rp extends el{constructor(e,t,r,i){super(),this.documentId=e,this.documentType=t,this.documentTitle=r,this.documentFile=i}getType(){return nn.STREAM_PAGE_ACTIONS}toByteBuffer(){let e=[],t=[],r=0,i=0,o=8;if(null!=this.documentTitle){for(let f=0;f<this.documentTitle.length;++f){let w=this.documentTitle.charCodeAt(f);e=e.concat([w])}r=e.length,o+=e.length}if(null!=this.documentFile){for(let f=0;f<this.documentFile.length;++f){let w=this.documentFile.charCodeAt(f);t=t.concat([w])}i=t.length,o+=t.length}let a=new ArrayBuffer(22+o),l=new DataView(a);l.setInt32(0,14+o),l.setInt8(4,this.getType()),l.setBigInt64(5,this.documentId),l.setInt8(13,this.documentType),l.setInt32(14,r),l.setInt32(18,i),l.setInt32(22,0);let c=26;for(const f in e)l.setUint8(c,e[f]),c++;for(const f in t)l.setUint8(c,t[f]),c++;return console.log(c),l.buffer}}class ip extends rp{constructor(e,t,r,i){super(e,t,r,i)}getType(){return nn.STREAM_DOCUMENT_SELECTED}}class sp extends nu{constructor(e,t,r){super(e,t),this.action=r}getType(){return nn.STREAM_PAGE_ACTION}}class lC extends rp{constructor(e,t,r,i){super(e,t,r,i)}getType(){return nn.STREAM_DOCUMENT_CLOSED}}function cC(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function Di(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){cC(s,r,i,o,a,"next",l)}function a(l){cC(s,r,i,o,a,"throw",l)}o(void 0)})}}class tl{constructor(e,t,r,i){this._page=e,this._changeType=t,r&&(this._shape=r),i&&(this._dirtyRegion=i)}get changeType(){return this._changeType}get page(){return this._page}get shape(){return this._shape}get dirtyRegion(){return this._dirtyRegion}}var xr=(()=>{return(n=xr||(xr={})).Clear="Clear",n.ShapeAdded="ShapeAdded",n.ShapeRemoved="ShapeRemoved",n.ShapeModified="ShapeModified",n.PageTransform="PageTransform",xr;var n})();class iu{constructor(){this.listeners=[],this.listenersOncer=[]}subscribe(e){return this.listeners.push(e),{dispose:()=>this.unsubscribe(e)}}subscribeOnce(e){this.listenersOncer.push(e)}unsubscribe(e){const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}publish(e){this.listeners.forEach(t=>t(e)),this.listenersOncer.forEach(t=>t(e)),this.listenersOncer=[]}pipe(e){return this.subscribe(t=>e.publish(t))}}class zO{constructor(e){this.undoActions=[],this.redoActions=[],this.model=e}executeAction(e){this.undoActions.push(e),this.redoActions.length=0,e.execute(this.model)}undo(){if(this.undoActions.length<1)return;const e=this.undoActions.pop();e&&(this.redoActions.push(e),e.undo(this.model))}redo(){if(this.redoActions.length<1)return;const e=this.redoActions.pop();e&&(this.undoActions.push(e),e.redo(this.model))}clear(){this.undoActions.length=0,this.redoActions.length=0}}class sr{constructor(e,t){this._shape=e,this._dirtyRegion=t}get shape(){return this._shape}get dirtyRegion(){return this._dirtyRegion}}class $r{constructor(e,t,r,i){this.set(e,t,r,i)}set(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i}isEmpty(){return this.width<=0||this.height<=0}containsPoint(e){const t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t<this.x+this.width&&r<this.y+this.height}containsRect(e){if(this.isEmpty()||e.isEmpty())return!1;const t=e.x,r=e.y,o=this.x,a=this.y;return t>=o&&r>=a&&t+e.width<=o+this.width&&r+e.height<=a+this.height}intersectsLine(e,t,r,i){const s=this.x,o=this.x+this.width,a=this.y,l=this.y+this.height;let c=this.computeCode(e,t,s,o,a,l),f=this.computeCode(r,i,s,o,a,l);for(;;){if(!(c|f))return!0;if(c&f)return!1;{let G,ee,w=c||f;8&w?(G=e+(r-e)*(l-t)/(i-t),ee=l):4&w?(G=e+(r-e)*(a-t)/(i-t),ee=a):2&w?(ee=t+(i-t)*(o-e)/(r-e),G=o):1&w&&(ee=t+(i-t)*(s-e)/(r-e),G=s),void 0!==G&&void 0!==ee&&w==c?c=this.computeCode(e=G,t=ee,s,o,a,l):void 0!==G&&void 0!==ee&&(f=this.computeCode(r=G,i=ee,s,o,a,l))}}}intersection(e){const t=Math.max(this.x,e.x),r=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width)-t,s=Math.min(this.y+this.height,e.y+e.height)-r;return i<=0||s<=0?null:new $r(t,r,i,s)}union(e){const t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);this.set(t,r,i-t,s-r)}equals(e){return!!e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}toString(){return`[${this.x}, ${this.y}, ${this.height}, ${this.width}]`}static empty(){return new $r(0,0,0,0)}computeCode(e,t,r,i,s,o){let a=0;return e<r?a|=1:e>i&&(a|=2),t<s?a|=4:t>o&&(a|=8),a}}class su{constructor(e){this._points=[],this._bounds=$r.empty(),this.changeEvent=new iu,this._handle=e}get handle(){return this._handle}addPoint(e){const t=this._points.length;let r=null;return t>0&&(r=this._points[t-1]),!(r&&e.equals(r)||(this._points.push(e),0))}get points(){return this._points}contains(e){return this._bounds.containsPoint(e)}intersects(e){return null!=this._bounds.intersection(e)}get bounds(){return this._bounds}getKeyEvent(){return this.keyEvent}setKeyEvent(e){this.keyEvent=e}isSelected(){return this.selected}setSelected(e){this.selected!=e&&(this.selected=e,this.fireShapeEvent(new sr(this,this.bounds)))}moveByDelta(e){for(let t of this._points)t.subtract(e);this.updateBoundsByDelta(e),this.fireShapeEvent(new sr(this,this.bounds))}clone(){return Object.create(this)}addChangeListener(e){return this.changeEvent.subscribe(e)}removeChangeListener(e){this.changeEvent.unsubscribe(e)}updateBoundsByDelta(e){this.bounds.x-=e.x,this.bounds.y-=e.y}fireShapeEvent(e){this.changeEvent.publish(e)}}class pC extends su{constructor(e){super(0),this.page=e,this.updateBounds()}getPage(){return this.page}setPageRect(e){this.bounds.equals(e)||(this.bounds.set(e.x,e.y,e.width,e.height),this.fireShapeEvent(new sr(this,this.bounds)))}updateBounds(){this.bounds.set(0,0,1,1)}}class gC{constructor(e,t){this.actionHandler=new zO(this),this.changeEvent=new iu,this.shapes=[],this.document=e,this.pageNumber=t,this.slideShape=new pC(this),this.slideShape.addChangeListener(this.onSlideTransform.bind(this)),this.shapeChangeListener=this.onShapeModified.bind(this)}render(e,t,r){return this.document.renderPage(this.pageNumber,e,t,r)}renderText(e,t){this.document.renderPageText(this.pageNumber,e,t,this.getSlideShape().bounds)}addChangeListener(e){return this.changeEvent.subscribe(e)}removeChangeListener(e){this.changeEvent.unsubscribe(e)}addShape(e){const t=this.shapes.length;this.shapes.push(e)>t&&(e.addChangeListener(this.shapeChangeListener),this.firePageEvent(new tl(this,xr.ShapeAdded,e)))}removeShape(e){const t=this.shapes.indexOf(e);t>-1&&this.shapes.splice(t,1).length>0&&(e.removeChangeListener(this.shapeChangeListener),this.firePageEvent(new tl(this,xr.ShapeRemoved,e)))}getSlideShape(){return this.slideShape}getShapes(){return this.shapes}hasShapes(){return this.shapes.length>0}addAction(e){this.actionHandler.executeAction(e)}undo(){this.actionHandler.undo()}redo(){this.actionHandler.redo()}clear(){this.actionHandler.clear(),this.shapes.length=0,this.firePageEvent(new tl(this,xr.Clear,void 0))}getPageNumber(){return this.pageNumber}onSlideTransform(e){this.firePageEvent(new tl(this,xr.PageTransform,e.shape,e.dirtyRegion))}onShapeModified(e){this.firePageEvent(new tl(this,xr.ShapeModified,e.shape,e.dirtyRegion))}firePageEvent(e){this.changeEvent.publish(e)}}class mC{constructor(){}getDocumentId(){return this.documentId}setDocumentId(e){this.documentId=e}getPageCount(){return this.pages.length}getPage(e){if(e<0||e>this.pages.length-1)throw new Error(`Page number ${e} out of bounds.`);return this.pages[e]}}class qO{render(e,t,r){return Di(function*(){return new Promise(i=>{e.canvas.width=r.width,e.canvas.height=r.height,e.fillStyle="white",e.fillRect(r.x,r.y,r.width,r.height),i(e.canvas)})})()}}class _C extends mC{constructor(){super(),this.renderer=new qO,this.loadPages()}getPageText(e){return Di(function*(){return Promise.resolve("")})()}renderPage(e,t,r,i){return this.renderer.render(t,r,i)}renderPageText(e,t,r,i){}loadPages(){this.pages=[];for(let e=0;e<300;e++)this.pages.push(new gC(this,e))}}class yC extends rp{constructor(e,t,r,i){super(e,t,r,i)}getType(){return nn.STREAM_DOCUMENT_CREATED}}class XO extends nu{constructor(e,t){super(e,t)}getType(){return nn.STREAM_PAGE_CREATED}}class KO extends nu{constructor(e,t){super(e,t)}getType(){return nn.STREAM_PAGE_DELETED}}class YO extends el{constructor(e,t){super(),this.documentId=e,this.recordedPage=t}getType(){return nn.STREAM_PAGE_ACTIONS}toByteBuffer(){let t=this.createDataView([].length+8);return t.setBigInt64(5,this.documentId),t.buffer}}class JO extends el{constructor(e){super(),this.courseId=e}getType(){return nn.STREAM_START}toByteBuffer(){return new ArrayBuffer(12)}}class QO extends el{constructor(e){super(),this.publisherId=e}getType(){return nn.STREAM_SPEECH_PUBLISHED}toByteBuffer(){return new ArrayBuffer(12)}}class ZO extends QO{constructor(e){super(e)}getType(){return nn.STREAM_SPEECH_PUBLISHED}}var Wt=(()=>{return(n=Wt||(Wt={}))[n.TOOL_BEGIN=0]="TOOL_BEGIN",n[n.TOOL_EXECUTE=1]="TOOL_EXECUTE",n[n.TOOL_END=2]="TOOL_END",n[n.PEN=3]="PEN",n[n.HIGHLIGHTER=4]="HIGHLIGHTER",n[n.POINTER=5]="POINTER",n[n.ARROW=6]="ARROW",n[n.LINE=7]="LINE",n[n.RECTANGLE=8]="RECTANGLE",n[n.ELLIPSE=9]="ELLIPSE",n[n.TEXT=10]="TEXT",n[n.TEXT_CHANGE=11]="TEXT_CHANGE",n[n.TEXT_FONT_CHANGE=12]="TEXT_FONT_CHANGE",n[n.TEXT_LOCATION_CHANGE=13]="TEXT_LOCATION_CHANGE",n[n.TEXT_REMOVE=14]="TEXT_REMOVE",n[n.TEXT_SELECTION=15]="TEXT_SELECTION",n[n.LATEX=16]="LATEX",n[n.LATEX_FONT_CHANGE=17]="LATEX_FONT_CHANGE",n[n.UNDO=18]="UNDO",n[n.REDO=19]="REDO",n[n.CLONE=20]="CLONE",n[n.SELECT=21]="SELECT",n[n.SELECT_GROUP=22]="SELECT_GROUP",n[n.RUBBER=23]="RUBBER",n[n.CLEAR_SHAPES=24]="CLEAR_SHAPES",n[n.PANNING=25]="PANNING",n[n.EXTEND_VIEW=26]="EXTEND_VIEW",n[n.ZOOM=27]="ZOOM",n[n.ZOOM_OUT=28]="ZOOM_OUT",n[n.NEXT_PAGE=29]="NEXT_PAGE",n[n.KEY=30]="KEY",n[n.STATIC=31]="STATIC",n[n.PAGE=32]="PAGE",n[n.RUBBER_EXT=33]="RUBBER_EXT",n[n.TEXT_SELECTION_EXT=34]="TEXT_SELECTION_EXT",Wt;var n})();class or{constructor(e,t){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}distance(e){const t=e.x-this.x,r=e.y-this.y;return Math.sqrt(t*t+r*r)}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return this.x*=e,this.y*=e,this}normalize(){const e=Math.sqrt(this.x*this.x+this.y*this.y);return this.x/=e,this.y/=e,this}equals(e){return!!e&&this.x===e.x&&this.y===e.y}}class Ti extends or{constructor(e,t,r){super(e,t),this.p=r}clone(){return new Ti(this.x,this.y,this.p)}equals(e){return!!e&&this.x===e.x&&this.y===e.y&&this.p===e.p}static createZero(){return new Ti(0,0,0)}}class ls extends yn{constructor(e,t){super(),this.shapeHandle=e,t&&(this.brush=t)}}class js{begin(e,t){}execute(e){}end(e){}}class vC{constructor(e){this.shapes=e}}class qi extends vC{constructor(e){super(e)}execute(e){for(let t of this.shapes)e.addShape(t)}undo(e){for(let t of this.shapes)e.removeShape(t)}redo(e){this.execute(e)}}class Mi{constructor(e,t,r,i){this.set(e,t,r,i)}set(e,t,r,i){this.x1=e,this.y1=t,this.x2=r,this.y2=i}getStartPoint(){return new or(this.x1,this.y1)}getEndPoint(){return new or(this.x2,this.y2)}distance(e,t){const r=this.x2-this.x1,i=this.y2-this.y1,s=Math.sqrt(r*r+i*i);return Math.abs(((this.y1-this.y2)*e+r*t+(this.x1*this.y2-this.x2*this.y1))/s)}intersects(e){return Mi.intersects(this.x1,this.y1,this.x2,this.y2,e.x1,e.y1,e.x2,e.y2)}getIntersectionPoint(e,t,r,i){const s=(i-t)*(this.x2-this.x1)-(r-e)*(this.y2-this.y1);if(Math.abs(s)<.01)return null;const l=((r-e)*(this.y1-t)-(i-t)*(this.x1-e))/s,c=((this.x2-this.x1)*(this.y1-t)-(this.y2-this.y1)*(this.x1-e))/s;if(l>=0&&l<=1&&c>=0&&c<=1){const f=this.y2-this.y1,w=this.x1-this.x2,G=f*this.x1+w*this.y1,ee=i-t,Ee=e-r,Le=ee*e+Ee*t;return new or((Ee*G-w*Le)/s,(f*Le-ee*G)/s)}return null}static intersects(e,t,r,i,s,o,a,l){const c=(l-o)*(r-e)-(a-s)*(i-t);if(0==c)return!1;const G=((a-s)*(t-o)-(l-o)*(e-s))/c,ee=((r-e)*(t-o)-(i-t)*(e-s))/c;return G>=0&&G<=1&&ee>=0&&ee<=1}}class Vs extends su{constructor(e,t){super(e),this.minPoint=new or(0,0),this.maxPoint=new or(0,0),t&&(this._brush=t)}get brush(){return this._brush}addPoint(e){const t=super.addPoint(e);return t&&(this.minPoint.x=Math.min(this.minPoint.x,e.x),this.minPoint.y=Math.min(this.minPoint.y,e.y),this.maxPoint.x=Math.max(this.maxPoint.x,e.x),this.maxPoint.y=Math.max(this.maxPoint.y,e.y),this.updateBounds(),this.fireShapeEvent(new sr(this,this.bounds))),t}contains(e){const t=this.brush.width/2;if(0===this.points.length)return!1;if(1===this.points.length)return this.points[0].distance(e)<=t;const r=new Mi(e.x+t,e.y+t,e.x-t,e.y-t),i=new Mi(e.x-t,e.y+t,e.x+t,e.y-t);let s=0,o=this.points[s++],a=null,l=null;for(;s<this.points.length;){if(a=this.points[s++],l=new Mi(o.x,o.y,a.x,a.y),l.intersects(r)||l.intersects(i))return!0;o=a}return!1}intersects(e){if(0===this.points.length)return!1;if(1===this.points.length)return e.containsPoint(this.points[0]);let t=0,r=this.points[t++],i=null;for(;t<this.points.length;){if(i=this.points[t++],e.intersectsLine(r.x,r.y,i.x,i.y))return!0;r=i}return!1}updateBounds(){this.bounds.set(this.minPoint.x,this.minPoint.y,this.maxPoint.x-this.minPoint.x,this.maxPoint.y-this.minPoint.y)}clone(){const e=new Vs(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class op{constructor(e){this.vector=new or(0,0),this.normal=new or(0,0),this.miter=new or(0,0),this.offsetA=new or(0,0),this.offsetB=new or(0,0),this.lastLineTop=new Mi(0,0,0,0),this.lastLineBottom=new Mi(0,0,0,0),this.A=new Array,this.B=new Array,this.points=new Array,this.strokeWidth=e}getStrokeList(){if(0===this.points.length)return null;const e=new Array;return 1==this.points.length?(this.capOnePoint(e,this.points[0],this.strokeWidth),e):(e.push(...this.A),this.capEndpoint(e,this.points[1],this.points[0],!1),e.push(...this.B),e)}addPoint(e){this.points.push(e.clone());const t=this.points.length;if(t>1){t>2&&this.points.shift();const r=this.points[0];0===this.A.length||0===this.B.length?(this.capEndpoint(this.A,r,e,!1),this.beginPath(r,e)):this.advance(r,e)}}intersects(e){return 0!==this.points.length&&(1===this.points.length?e.containsPoint(this.points[0]):!(!this.intersectsRect(this.A,e)&&!this.intersectsRect(this.B,e)))}moveByDelta(e){for(let t of this.A)t.subtract(e);for(let t of this.B)t.subtract(e);for(let t of this.points)t.subtract(e)}clone(){const e=new op(this.strokeWidth);for(let t of this.A)e.A.push(t.clone());for(let t of this.B)e.B.push(t.clone());for(let t of this.points)e.points.push(t.clone());return e}advance(e,t){this.advancePath(this.A,e,t,!1),this.advancePath(this.B,e,t,!0)}advancePath(e,t,r,i){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y),this.offset(this.offsetA,this.miter,i),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetB.set(r.x,r.y),this.offset(this.offsetB,this.miter,i);const s=new Mi(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),o=i?this.lastLineTop:this.lastLineBottom,a=o.getIntersectionPoint(s.x1,s.y1,s.x2,s.y2);if(null!=a)this.intersect(e,a,i);else{const l=o.getEndPoint(),c=s.getStartPoint();let f=this.toDegrees(l,t),w=this.toDegrees(c,t);Math.abs(f-w)>180&&(f%=360,w%=360),this.cap(e,t,f,w,this.strokeWidth*this.toPressure(t)/2,2,i)}o.set(s.x1,s.y1,s.x2,s.y2)}beginPath(e,t){this.vector.set(t.x,t.y).subtract(e).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(e)/2),this.offsetA.set(e.x,e.y).add(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetB.set(t.x,t.y).add(this.miter),this.addPathPoint(this.A,this.offsetB.x,this.offsetB.y,!1),this.lastLineBottom.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(e)/2),this.offsetA.set(e.x,e.y).subtract(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetB.set(t.x,t.y).subtract(this.miter),this.addPathPoint(this.B,this.offsetA.x,this.offsetA.y,!0),this.addPathPoint(this.B,this.offsetB.x,this.offsetB.y,!0),this.lastLineTop.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y)}cap(e,t,r,i,s,o,a){if(r>i)for(let l=r;l>=i;l-=o){const c=Math.PI*l/180,f=t.x+s*Math.cos(c),w=t.y+s*Math.sin(c);this.addPathPoint(e,f,w,a)}else for(let l=r;l<=i;l+=o){const c=Math.PI*l/180,f=t.x+s*Math.cos(c),w=t.y+s*Math.sin(c);this.addPathPoint(e,f,w,a)}}capOnePoint(e,t,r){this.addPathPoint(e,t.x+r*this.toPressure(t)/2,t.y,!1),this.cap(e,t,0,360,r*this.toPressure(t)/2,2,!1)}capEndpoint(e,t,r,i){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y).add(this.miter),this.offsetB.set(t.x,t.y).subtract(this.miter),this.addPathPoint(e,this.offsetB.x,this.offsetB.y,i);const s=this.toDegrees(this.offsetB,this.offsetA);this.cap(e,t,s,s-180,this.strokeWidth*this.toPressure(t)/2,2,i)}addPathPoint(e,t,r,i){i?e.unshift(new Ti(t,r,1)):e.push(new Ti(t,r,1))}intersect(e,t,r){r?e[0].set(t.x,t.y):e[e.length-1].set(t.x,t.y)}offset(e,t,r){r?e.subtract(t):e.add(t)}toPressure(e){return Math.min(1,Math.sqrt(e.p+.1))}toDegrees(e,t){const r=Math.atan2(e.y-t.y,e.x-t.x);return 180*(2*Math.PI+r)/Math.PI}intersectsRect(e,t){let r=0,i=e[r++],s=null;for(;r<e.length;){if(s=e[r++],t.intersectsLine(i.x,i.y,s.x,s.y))return!0;i=s}return!1}}class ou extends Vs{constructor(e,t){super(e,t),this.stroke=new op(t.width)}addPoint(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return this.stroke.addPoint(e),this.updateBounds(),this.fireShapeEvent(new sr(this,this.bounds)),!0}contains(e){return this.stroke.intersects(new $r(e.x,e.y,e.x,e.y))}intersects(e){return this.stroke.intersects(e)}getPenStroke(){return this.stroke}moveByDelta(e){this.stroke.moveByDelta(e),this.updateBoundsByDelta(e),this.fireShapeEvent(new sr(this,this.bounds))}clone(){const e=new ou(this.handle,this.brush.clone());return e.stroke=this.stroke.clone(),e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected()),e}}class eF extends js{begin(e,t){this.shape=new ou(this.shapeHandle,this.brush),this.shape.addPoint(e),t.page.addAction(new qi([this.shape]))}execute(e){this.shape.addPoint(e)}end(e){}}class tF extends ls{execute(e){const t=new eF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setTool(t)}}class ap extends class nF{constructor(e){this.color=e}}{constructor(e,t){super(e),this.width=t}clone(){return new ap(this.color,this.width)}}const rF=/\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d*.\d*))?\)/;class cs{constructor(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i||1}toHex(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)}toRgb(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toRgba(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}toAlpha(e){return`rgba(${this.r}, ${this.g}, ${this.b}, ${e})`}equals(e){return this.a===e.a&&this.r===e.r&&this.g===e.g&&this.b===e.b}static fromHex(e){let t=e.trim();if(0!==t.indexOf("#"))throw new Error("Not a hex color representation");t=t.substr(t.indexOf("#")+1);const r=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),s=parseInt(t.substr(4,2),16);return new cs(r,i,s)}static fromRGBString(e){let t=e.trim();if(0!==t.indexOf("rgb"))throw new Error("Not a rgb color representation");const r=rF.exec(t);if(r){const i=parseInt(r[1],10),s=parseInt(r[2],10),o=parseInt(r[3],10),a=r[5]?parseFloat(r[5]):1;return new cs(i,s,o,a)}return null}static fromRGBNumber(e){return new cs(e>>16&255,e>>8&255,255&e,(e>>24&255)/255)}}class iF extends js{begin(e,t){this.shape=new Vs(this.shapeHandle,this.brush),this.shape.addPoint(e),t.page.addAction(new qi([this.shape]))}execute(e){this.shape.addPoint(e)}}class sF extends ls{execute(e){const t=new iF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setTool(t)}}class bC extends Vs{addPoint(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return this.updateBounds(),this.fireShapeEvent(new sr(this,this.bounds)),!0}updateBounds(){const e=this.points[0],t=this.brush.width;this.bounds.set(e.x-t,e.y-t,e.x+2*t,e.y+2*t)}}class oF extends js{begin(e,t){this.page=t.page,this.shape=new bC(this.shapeHandle,this.brush),this.shape.addPoint(e),this.page.addShape(this.shape)}execute(e){this.shape.addPoint(e)}end(e){this.page.removeShape(this.shape)}}class aF extends ls{execute(e){const t=new oF;t.brush=this.brush,e.setTool(t)}}class $o extends Vs{setP0(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return!0}setP1(e){if(this.points.length>1){if(e.equals(this.points[1]))return!1;this.points[1]=e}else this.points.push(e);return this.updateBounds(),this.fireShapeEvent(new sr(this,this.bounds)),!0}updateBounds(){if(this.points.length<2)return;const e=this.points[0],t=this.points[1];t.x<e.x?(this.bounds.x=t.x,this.bounds.width=e.x-t.x):(this.bounds.x=e.x,this.bounds.width=t.x-e.x),t.y<e.y?(this.bounds.y=t.y,this.bounds.height=e.y-t.y):(this.bounds.y=e.y,this.bounds.height=t.y-e.y)}fill(){const e=this.getKeyEvent();return null!=e&&e.altKey}}class au extends $o{clone(){const e=new au(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class lF extends js{begin(e,t){this.context=t,this.shape=new au(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new qi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class cF extends ls{execute(e){const t=new lF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class lu extends $o{clone(){const e=new lu(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class uF extends js{begin(e,t){this.context=t,this.shape=new lu(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new qi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class dF extends ls{execute(e){const t=new uF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class cu extends $o{contains(e){if(this.points.length<2)return!1;if(this.fill())return this.bounds.containsPoint(e);const t=this.brush.width;let r=this.bounds.x,i=this.bounds.y,s=this.bounds.x+this.bounds.width,o=this.bounds.y;return!!(this.intersectsSegment(t,r,i,s,o,e)||(r=this.bounds.x+this.bounds.width,i=this.bounds.y,s=this.bounds.x+this.bounds.width,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e))||(r=this.bounds.x+this.bounds.width,i=this.bounds.y+this.bounds.height,s=this.bounds.x,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e))||(r=this.bounds.x,i=this.bounds.y,s=this.bounds.x,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e)))}intersects(e){return null!=this.bounds.intersection(e)}clone(){const e=new cu(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}intersectsSegment(e,t,r,i,s,o){let a=o.x+e,l=o.y+e,c=o.x-e,f=o.y-e;return!(!Mi.intersects(t,r,i,s,a,l,c,f)&&(a=o.x-e,l=o.y+e,c=o.x+e,f=o.y-e,!Mi.intersects(t,r,i,s,a,l,c,f)))}}class hF extends js{begin(e,t){this.context=t,this.shape=new cu(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new qi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class fF extends ls{execute(e){const t=new hF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class CC{constructor(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i,this.radiusX=.5*r,this.radiusY=.5*i,this.centerX=e+this.radiusX,this.centerY=t+this.radiusY}containsPoint(e,t){const r=this.width;if(r<=0)return!1;const i=this.height;if(i<=0)return!1;const s=(e-this.x)/r-.5,o=(t-this.y)/i-.5;return s*s+o*o<.25}containsRect(e,t,r,i){return this.containsPoint(e,t)&&this.containsPoint(e+r,t)&&this.containsPoint(e,t+i)&&this.containsPoint(e+r,t+i)}intersectsRect(e,t,r,i){return!(r<=0||i<=0||this.width<=0||this.height<=0)&&(this.centerX>=e&&this.centerY>=t&&this.centerX<=e+r&&this.centerY<=t+i||this.intersectsLine(e,t,e+r,t)||this.intersectsLine(e,t+i,e+r,t+i)||this.intersectsLine(e,t,e,t+i)||this.intersectsLine(e+r,t,e+r,t+i))}intersectsLine(e,t,r,i){if(this.width<=0||this.height<=0)return!1;e-=this.centerX,r-=this.centerX,t-=this.centerY,i-=this.centerY;const s=this.radiusX*this.radiusX,o=this.radiusY*this.radiusY,a=Math.pow(r-e,2)/s+Math.pow(i-t,2)/o,l=2*e*(r-e)/s+2*t*(i-t)/o,f=l*l-4*a*(e*e/s+t*t/o-1);if(0===f){const w=-l/2/a;return w>=0&&w<=1}if(f>0){const w=Math.sqrt(f),G=(-l+w)/2/a,ee=(-l-w)/2/a;return G>=0&&G<=1||ee>=0&&ee<=1}return!1}}class uu extends $o{contains(e){if(this.points.length<2)return!1;const t=new CC(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return this.fill()?t.containsPoint(e.x,e.y):t.intersectsLine(e.x,e.y,e.x+this.brush.width,e.y+this.brush.width)}intersects(e){return!(this.points.length<2)&&new CC(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height).intersectsRect(e.x,e.y,e.width,e.height)}clone(){const e=new uu(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class pF extends js{begin(e,t){this.context=t,this.shape=new uu(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new qi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class gF extends ls{execute(e){const t=new pF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class lp extends yn{constructor(e){super(),e&&(this.point=e)}}class mF extends lp{execute(e){e.beginTool(this.point)}}class _F extends lp{execute(e){e.executeTool(this.point)}}class yF extends lp{execute(e){e.endTool(this.point)}}class Gr{execute(e){}end(e){}}class vF extends Gr{begin(e,t){t.page.undo()}}class bF extends yn{execute(e){e.selectAndExecuteTool(new vF)}}class CF extends Gr{begin(e,t){t.page.redo()}}class SF extends yn{execute(e){e.selectAndExecuteTool(new CF)}}class SC extends vC{constructor(e){super(e)}execute(e){for(let t of this.shapes)e.removeShape(t)}undo(e){for(let t of this.shapes)e.addShape(t)}redo(e){this.execute(e)}}class EF extends Gr{begin(e,t){const r=Object.assign([],t.page.getShapes());t.page.addAction(new SC(r))}}class AF extends yn{execute(e){e.selectAndExecuteTool(new EF)}}class wF extends yn{execute(e){e.setKeyEvent(this.keyEvent)}}class DF{begin(e,t){if(this.sourcePoint=e.clone(),this.context=t,this.getSelectedShapes(),this.hasSelectedShapes())if(this.hitSelected(e)){const r=new Array;for(let i of this.selectedShapes){const s=i.clone();r.push(s)}t.page.addAction(new qi(r))}else this.removeSelection();else{const r=this.getTopLevelShape(e);if(null!=r){const i=r.clone();t.page.addAction(new qi([i])),this.addSelection(i)}}}execute(e){this.sourcePoint.subtract(e),this.moveShapes(e,this.sourcePoint),this.sourcePoint=e.clone()}end(e){}getTopLevelShape(e){let t=null;for(let r of this.context.page.getShapes())r.contains(e)&&(t=r);return t}getSelectedShapes(){this.selectedShapes=new Array;for(let e of this.context.page.getShapes())e.isSelected()&&this.selectedShapes.push(e)}moveShapes(e,t){if(this.hasSelectedShapes()){this.context.beginBulkRender();for(let r of this.selectedShapes)r.moveByDelta(t);this.context.endBulkRender()}}hasSelectedShapes(){return 0!=this.selectedShapes.length}addSelection(e){e.setSelected(!0),this.selectedShapes.push(e)}removeSelection(){this.context.beginBulkRender();for(let e of this.selectedShapes)e.setSelected(!1);this.selectedShapes.length=0,this.context.endBulkRender()}hitSelected(e){for(let t of this.selectedShapes)if(t.contains(e))return!0;return!1}}class TF extends yn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new DF)}}class MF{begin(e,t){this.sourcePoint=e.clone(),this.context=t,this.selectedShape=this.getTopLevelShape(e),this.removeSelection(),null!=this.selectedShape&&this.selectedShape.setSelected(!0)}execute(e){null!=this.selectedShape&&(this.sourcePoint.subtract(e),this.context.beginBulkRender(),this.selectedShape.moveByDelta(this.sourcePoint),this.context.endBulkRender(),this.sourcePoint=e.clone())}end(e){null!=this.selectedShape&&(this.context.beginBulkRender(),this.selectedShape.setSelected(!1),this.context.endBulkRender())}getTopLevelShape(e){let t=null;for(let r of this.context.page.getShapes())r.contains(e)&&(t=r);return t}removeSelection(){this.context.beginBulkRender();for(let e of this.context.page.getShapes())e.isSelected()&&e.setSelected(!1);this.context.endBulkRender()}}class PF extends yn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new MF)}}class EC extends $o{constructor(){super(0,null)}}var us=(()=>{return(n=us||(us={}))[n.Select=0]="Select",n[n.Move=1]="Move",us;var n})();class xF{begin(e,t){this.sourcePoint=e.clone(),this.context=t,this.initialized=!1,this.shape=new EC,this.context.page.addShape(this.shape),this.getSelectedShapes(),this.hasSelectedShapes()?this.hitSelected(e)?this.mode=us.Move:(this.context.beginBulkRender(),this.removeSelection(),this.context.endBulkRender(),this.mode=us.Select):this.mode=us.Select}execute(e){this.mode==us.Select?(this.initialized||(this.shape.setP0(e),this.initialized=!0),this.shape.addPoint(e.clone()),this.shape.setP1(e),this.selectGroup(this.shape.bounds)):this.mode==us.Move&&(this.sourcePoint.subtract(e),this.moveShapes(this.sourcePoint),this.sourcePoint=e.clone())}end(e){this.context.page.removeShape(this.shape),this.initialized=!1}selectGroup(e){this.context.beginBulkRender(),this.removeSelection();for(let t of this.context.page.getShapes())t!==this.shape&&t.intersects(e)&&this.addSelection(t);this.context.endBulkRender()}addSelection(e){e.setSelected(!0),this.selectedShapes.push(e)}getSelectedShapes(){this.selectedShapes=new Array;for(let e of this.context.page.getShapes())e.isSelected()&&this.selectedShapes.push(e)}hasSelectedShapes(){return 0!=this.selectedShapes.length}hitSelected(e){for(let t of this.selectedShapes)if(t.contains(e))return!0;return!1}removeSelection(){for(let e of this.selectedShapes)e.setSelected(!1);this.selectedShapes.length=0}moveShapes(e){if(this.hasSelectedShapes()){this.context.beginBulkRender();for(let t of this.selectedShapes)t.moveByDelta(e);this.context.endBulkRender()}}}class IF extends yn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new xF)}}class RF{begin(e,t){this.context=t,this.lastPoint=e}execute(e){const t=this.context.page.getSlideShape(),r=t.bounds;t.setPageRect(new $r(r.x+(this.lastPoint.x-e.x),r.y+(this.lastPoint.y-e.y),r.width,r.height)),this.lastPoint=e}end(e){}}class kF extends yn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new RF)}}class OF extends Gr{constructor(e){super(),this.rect=e}begin(e,t){t.page.getSlideShape().setPageRect(this.rect)}}class FF extends yn{constructor(e){super(),this.rect=e}execute(e){e.setKeyEvent(this.keyEvent),e.selectAndExecuteTool(new OF(this.rect))}}class AC extends $o{constructor(){super(0,null)}updateBounds(){super.updateBounds();const t=Math.abs(3*this.bounds.width/4)*Math.sign(this.bounds.height);this.bounds.height=t}}class LF{begin(e,t){this.context=t,this.shape=new AC,this.context.page.addShape(this.shape)}execute(e){this.initialized||(this.shape.setP0(e),this.initialized=!0),this.shape.setP1(e)}end(e){this.initialized=!1,this.context.page.removeShape(this.shape),this.context.page.getSlideShape().setPageRect(this.shape.bounds)}}class wC extends ls{constructor(e,t){super(0,t)}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new LF)}}class NF extends Gr{begin(e,t){t.page.getSlideShape().setPageRect(new $r(0,0,1,1))}}class BF extends yn{execute(e){e.setKeyEvent(this.keyEvent),e.selectAndExecuteTool(new NF)}}class jF{constructor(e){this.shapeHandle=e}begin(e,t){for(const r of t.page.getShapes())if(r.handle===this.shapeHandle){t.page.addAction(new SC(new Array(r)));break}}execute(e){}end(e){}}class VF extends yn{constructor(e){super(),this.shapeHandle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new jF(this.shapeHandle)),e.beginTool(new Ti(0,0,0))}}class nl extends su{setText(e){this.text!==e&&(this.text=e,this.fireShapeEvent(new sr(this,this.bounds)))}getText(){return this.text}setTextColor(e){this.textColor&&this.textColor.equals(e)||(this.textColor=e,this.fireShapeEvent(new sr(this,this.bounds)))}getTextColor(){return this.textColor}setTextAttributes(e){this.textAttributes=new Map(e),this.fireShapeEvent(new sr(this,this.bounds))}getTextAttributes(){return this.textAttributes}isUnderline(){var e;return null!==(e=this.textAttributes.get("underline"))&&void 0!==e&&e}isStrikethrough(){var e;return null!==(e=this.textAttributes.get("strikethrough"))&&void 0!==e&&e}setLocation(e){return(this.bounds.x!==e.x||this.bounds.y!==e.y)&&(this.bounds.x=e.x,this.bounds.y=e.y,this.fireShapeEvent(new sr(this,this.bounds)),!0)}updateBounds(){}}class rl extends nl{setFont(e){this.font&&this.font.equals(e)||(this.font=e,this.fireShapeEvent(new sr(this,this.bounds)))}getFont(){return this.font}clone(){const e=new rl(this.handle);return e.setLocation(new or(this.bounds.x,this.bounds.y)),e.setFont(this.font),e.setTextColor(this.getTextColor()),e.setTextAttributes(new Map(this.getTextAttributes())),e}}class HF{constructor(e){this.handle=e}begin(e,t){this.context=t,this.shape=new rl(this.handle)}execute(e){}end(e){this.shape.setLocation(e),this.context.page.addShape(this.shape)}}class UF extends yn{constructor(e){super(),this.handle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new HF(this.handle))}}class $F extends Gr{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof rl&&i.handle===this.handle){i.setFont(this.font),i.setTextColor(this.textColor),i.setTextAttributes(this.textAttributes);break}}}class GF extends yn{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}execute(e){e.selectAndExecuteTool(new $F(this.handle,this.font,this.textColor,this.textAttributes))}}class zF extends Gr{constructor(e,t){super(),this.handle=e,this.text=t}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof nl&&i.handle===this.handle){i.setText(this.text);break}}}class WF extends yn{constructor(e,t){super(),this.handle=e,this.text=t}execute(e){e.selectAndExecuteTool(new zF(this.handle,this.text))}}class qF extends Gr{constructor(e,t){super(),this.handle=e,this.point=t}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof nl&&i.handle===this.handle){t.beginBulkRender(),i.setLocation(this.point),t.endBulkRender();break}}}class XF extends yn{constructor(e,t){super(),this.handle=e,this.point=t}execute(e){e.selectAndExecuteTool(new qF(this.handle,this.point))}}class KF extends Gr{constructor(e){super(),this.handle=e}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof nl&&i.handle===this.handle){t.page.removeShape(i);break}}}class YF extends yn{constructor(e){super(),this.handle=e}execute(e){e.selectAndExecuteTool(new KF(this.handle))}}class du{constructor(e,t,r,i){this.family=e,this.size=t,r&&(this.style=r),i&&(this.weight=i)}equals(e){return!!e&&(this===e||this.family===e.family&&this.size===e.size&&this.style===e.style&&this.weight===e.weight)}toString(){let e=this.size+"px "+this.family;return this.weight&&(e=this.weight+" "+e),this.style&&(e=this.style+" "+e),e}}class hu extends su{constructor(e,t){super(e),this.color=t}addTextBounds(e){this.bounds.isEmpty()?this.bounds.set(e.x,e.y,e.width,e.height):this.bounds.union(e),this.fireShapeEvent(new sr(this,this.bounds))}getColor(){return this.color}contains(e){return this.bounds.containsPoint(e)}intersects(e){return null!=this.bounds.intersection(e)}clone(){const e=new hu(this.handle,this.color);return e.setKeyEvent(this.getKeyEvent()),e}updateBounds(){}}class JF{constructor(e,t,r){this.shapeHandle=e,this.color=t,this.textBounds=r}begin(e,t){if(this.textBounds.length<1)return;let r=null;for(const i of t.page.getShapes())if(i.handle===this.shapeHandle){r=i;break}r||(r=new hu(this.shapeHandle,this.color),t.page.addAction(new qi([r])));for(const i of this.textBounds)r.addTextBounds(i)}execute(e){}end(e){}}class QF extends yn{constructor(e,t,r){super(),this.shapeHandle=e,this.color=t,this.textBounds=r}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new JF(this.shapeHandle,this.color,this.textBounds)),e.beginTool(new Ti(0,0,0))}}class il extends nl{setFont(e){this.font&&this.font.equals(e)||(this.font=e,this.fireShapeEvent(new sr(this,this.bounds)))}getFont(){return this.font}clone(){const e=new il(this.handle);return e.setLocation(new or(this.bounds.x,this.bounds.y)),e.setFont(this.font),e.setTextColor(this.getTextColor()),e.setTextAttributes(new Map(this.getTextAttributes())),e}}class ZF{constructor(e){this.handle=e}begin(e,t){this.context=t,this.shape=new il(this.handle)}execute(e){}end(e){this.shape.setLocation(e),this.context.page.addShape(this.shape)}}class eL extends yn{constructor(e){super(),this.handle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new ZF(this.handle))}}class tL extends Gr{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof il&&i.handle===this.handle){i.setFont(this.font),i.setTextColor(this.textColor),i.setTextAttributes(this.textAttributes);break}}}class nL extends yn{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}execute(e){e.selectAndExecuteTool(new tL(this.handle,this.font,this.textColor,this.textAttributes))}}let cp=(()=>{class n{static parse(t,r,i){let s=null;const o=this.parseActionHeader(t);switch(i-=13,r){case Wt.CLEAR_SHAPES:s=this.atomicAction(t,AF);break;case Wt.UNDO:s=this.atomicAction(t,bF);break;case Wt.REDO:s=this.atomicAction(t,SF);break;case Wt.KEY:s=this.atomicAction(t,wF);break;case Wt.PEN:s=this.toolBrushAction(t,tF);break;case Wt.HIGHLIGHTER:s=this.toolBrushAction(t,sF);break;case Wt.POINTER:s=this.toolBrushAction(t,aF);break;case Wt.ARROW:s=this.toolBrushAction(t,cF);break;case Wt.LINE:s=this.toolBrushAction(t,dF);break;case Wt.RECTANGLE:s=this.toolBrushAction(t,fF);break;case Wt.ELLIPSE:s=this.toolBrushAction(t,gF);break;case Wt.CLONE:s=this.atomicAction(t,TF);break;case Wt.SELECT:s=this.atomicAction(t,PF);break;case Wt.SELECT_GROUP:s=this.atomicAction(t,IF);break;case Wt.LATEX:s=this.textAction(t,eL);break;case Wt.LATEX_FONT_CHANGE:s=this.latexFontAction(t);break;case Wt.TEXT:s=this.textAction(t,UF);break;case Wt.TEXT_CHANGE:s=this.textChangeAction(t);break;case Wt.TEXT_FONT_CHANGE:s=this.textFontAction(t);break;case Wt.TEXT_LOCATION_CHANGE:s=this.textMoveAction(t);break;case Wt.TEXT_REMOVE:s=this.textRemoveAction(t);break;case Wt.TEXT_SELECTION_EXT:s=this.textHighlightAction(t);break;case Wt.TOOL_BEGIN:s=this.toolDragAction(t,mF);break;case Wt.TOOL_EXECUTE:s=this.toolDragAction(t,_F);break;case Wt.TOOL_END:s=this.toolDragAction(t,yF);break;case Wt.PANNING:s=this.atomicAction(t,kF);break;case Wt.EXTEND_VIEW:s=this.extendViewAction(t);break;case Wt.ZOOM:s=i<1?this.atomicAction(t,wC):this.toolBrushAction(t,wC);break;case Wt.ZOOM_OUT:s=this.atomicAction(t,BF);break;case Wt.RUBBER_EXT:s=this.rubberAction(t)}return s&&o&&(s.keyEvent=o),s}static parseActionHeader(t){let i=null;return(t.getInt32()&this.KEY_EVENT_MASK)==this.KEY_EVENT_MASK&&(i=this.parseKeyEvent(t)),i}static parseKeyEvent(t){t.getInt32();const i=t.getInt32();let o;switch(t.getInt8()){case 0:o="keydown";break;case 1:o="keyup";break;case 2:o="keypress";break;default:throw new Error("Unknown key event type")}return new KeyboardEvent(o,{shiftKey:0!=(2&i),ctrlKey:0!=(4&i),altKey:0!=(8&i)})}static atomicAction(t,r){return new r}static toolBrushAction(t,r){const i=t.getInt32(),s=t.getInt32(),a=(t.getInt8(),t.getFloat64()),l=cs.fromRGBNumber(s);return new r(i,new ap(l,a))}static rubberAction(t){const r=t.getInt32();return new VF(r)}static toolDragAction(t,r){return new r(new Ti(t.getFloat32(),t.getFloat32(),t.getFloat32()))}static extendViewAction(t){const r=t.getFloat64(),i=t.getFloat64(),s=t.getFloat64(),o=t.getFloat64();return new FF(new $r(r,i,s,o))}static textAction(t,r){return new r(t.getInt32())}static textChangeAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getString(i);return new WF(r,s)}static textMoveAction(t){const r=t.getInt32(),i=new or(t.getFloat64(),t.getFloat64());return new XF(r,i)}static textRemoveAction(t){const r=t.getInt32();return new YF(r)}static textHighlightAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getInt32(),o=cs.fromRGBNumber(i),a=new Array;for(let l=0;l<s;l++){const c=t.getFloat64(),f=t.getFloat64(),w=t.getFloat64(),G=t.getFloat64();a.push(new $r(c,f,w,G))}return new QF(r,o,a)}static textFontAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getInt32(),o=t.getString(s),a=t.getFloat64(),l=t.getInt8(),c=t.getInt8(),f=t.getInt8()>0,w=t.getInt8()>0;let ee,G=100*(c+1);switch(l){case 0:ee="normal";break;case 1:ee="italic";break;default:console.error("Unsupported font style")}const Ee=cs.fromRGBNumber(i),Le=new du(o,a,ee,G.toString()),Je=new Map;return Je.set("strikethrough",f),Je.set("underline",w),new GF(r,Le,Ee,Je)}static latexFontAction(t){const r=t.getInt32(),s=(t.getInt32(),t.getFloat32()),o=t.getInt32(),a=cs.fromRGBNumber(o),l=new du("Arial",s);return new nL(r,l,a,new Map)}}return n.KEY_EVENT_MASK=1,n})();class rL{constructor(){this.staticActions=[],this.playbackActions=[]}}class DC{parse(e){const t=new rL,r=e.getInt32(),i=e.getInt32();t.pageNumber=r,t.timestamp=i;const s=e.getInt32();if(s>0){const a=e.byteOffset+s;for(;e.byteOffset<a;){const l=e.getInt32(),c=e.getInt8(),f=e.getInt32(),w=cp.parse(e,c,l);w&&(w.timestamp=f,t.staticActions.push(w))}}const o=e.getInt32();if(o>0){const a=e.byteOffset+o;for(;e.byteOffset<a;){const l=e.getInt32(),c=e.getInt8(),f=e.getInt32(),w=cp.parse(e,c,l);w&&(w.timestamp=f,t.playbackActions.push(w))}}return t}}class TC{static parse(e,t,r){let i=null;switch(t){case nn.STREAM_INIT:break;case nn.STREAM_START:i=this.startAction(e);break;case nn.STREAM_PAGE_ACTION:i=this.playbackAction(e);break;case nn.STREAM_PAGE_ACTIONS:i=this.playbackActions(e);break;case nn.STREAM_PAGE_CREATED:i=this.pageAction(e,XO);break;case nn.STREAM_PAGE_DELETED:i=this.pageAction(e,KO);break;case nn.STREAM_PAGE_SELECTED:i=this.pageAction(e,ru);break;case nn.STREAM_DOCUMENT_CREATED:i=this.documentAction(e,yC);break;case nn.STREAM_DOCUMENT_CLOSED:i=this.documentAction(e,lC);break;case nn.STREAM_DOCUMENT_SELECTED:i=this.documentAction(e,ip);break;case nn.STREAM_SPEECH_PUBLISHED:i=this.speechAction(e,ZO)}return i}static startAction(e){const t=e.getUint32();return new JO(t)}static playbackAction(e){const t=e.getInt64(),r=e.getInt32(),i=e.getInt32(),s=e.getInt8(),o=e.getInt32(),a=cp.parse(e,s,i);return a?(a.timestamp=o,new sp(t,r,a)):null}static playbackActions(e){const t=e.getInt64(),s=(e.getInt32(),(new DC).parse(e));return new YO(t,s)}static pageAction(e,t){return new t(e.getInt64(),e.getInt32())}static documentAction(e,t){const r=e.getInt64(),i=e.getInt8(),s=e.getInt32(),o=e.getInt32(),a=e.getInt32(),l=e.getString(s),c=e.getString(o);return e.getString(a),new t(r,i,l,c)}static speechAction(e,t){const r=e.getInt32(),i=e.getString(r);return new t(BigInt(i))}static parseActionToBinary(e){return e.toByteBuffer()}}class MC{constructor(e,t,r){this.dataView=new DataView(e,t,r),this.offset=t||0}get byteOffset(){return this.offset}skip(e){if(this.offset+e>=this.dataView.byteLength)throw new Error(`Out of bounds ${this.offset+e} exceeds length ${this.dataView.byteLength}`);this.offset+=e}getString(e){let t="",r=-1;for(let i=0;i<e&&(r=this.getUint8(),0!=r);i++)t+=String.fromCharCode(r);return t}getFloat32(e){const t=this.dataView.getFloat32(this.offset,e);return this.offset+=4,t}getFloat64(e){const t=this.dataView.getFloat64(this.offset,e);return this.offset+=8,t}getInt8(){const e=this.dataView.getInt8(this.offset);return this.offset+=1,e}getInt16(e){const t=this.dataView.getInt16(this.offset,e);return this.offset+=2,t}getInt32(e){const t=this.dataView.getInt32(this.offset,e);return this.offset+=4,t}getInt64(e){const t=this.dataView.getBigInt64(this.offset,e);return this.offset+=8,t}getUint8(){const e=this.dataView.getUint8(this.offset);return this.offset+=1,e}getUint16(e){const t=this.dataView.getUint16(this.offset,e);return this.offset+=2,t}getUint32(e){const t=this.dataView.getUint32(this.offset,e);return this.offset+=4,t}}class PC{constructor(e){e&&(this.renderController=e)}beginBulkRender(){this.renderController.beginBulkRender()}endBulkRender(){this.renderController.endBulkRender()}}class iL{constructor(e){this.document=e,this.toolContext=new PC(null)}setOnSelectPageIndex(e){}setSeek(e){}setKeyEvent(e){this.toolContext.keyEvent=e}setDocument(e){}setPageNumber(e){if(this.pageNumber===e)return;const t=this.document.getPage(e);this.pageNumber=e,this.toolContext.page=t}setTool(e){if(!e)throw new Error("Tool must not be null");!this.tool&&this.tool===e||(this.setPreviousTool(this.tool),this.tool=e)}selectAndExecuteTool(e){const t=Ti.createZero();this.setTool(e),this.beginTool(t),this.executeTool(t),this.endTool(t),this.setPreviousTool(this.previousTool)}beginTool(e){this.tool.begin(e.clone(),this.toolContext)}executeTool(e){this.tool.execute(e.clone())}endTool(e){this.tool.end(e.clone())}setPreviousTool(e){!e||e instanceof Gr||(this.previousTool=e)}}class up{constructor(e){this.requestOptions=e||{returnType:"body",responseType:"json",withCredentials:!1,timeout:0}}setHttpParams(e){return this.requestOptions.params=e,this}setHttpHeaders(e){return this.requestOptions.headers=e,this}setReturnType(e){return this.requestOptions.returnType=e,this}setResponseType(e){return this.requestOptions.responseType=e,this}setWithCredentials(e){return this.requestOptions.withCredentials=e,this}setTimeout(e){return this.requestOptions.timeout=e,this}setOptions(e){return this.requestOptions=e,this}setOnProgress(e){return this.onProgress=e,this}delete(e){return this.request("DELETE",e)}get(e){return this.request("GET",e)}head(e){return this.request("HEAD",e)}options(e){return this.request("OPTIONS",e)}patch(e,t){return this.request("PATCH",e,t)}post(e,t){return this.request("POST",e,t)}put(e,t){return this.request("PUT",e,t)}request(e,t,r){const i=new XMLHttpRequest;return i.open(e,this.composeUrl(t),!0),this.requestOptions.responseType&&(i.responseType=this.requestOptions.responseType),this.requestOptions.timeout&&(i.timeout=this.requestOptions.timeout),this.requestOptions.withCredentials&&(i.withCredentials=this.requestOptions.withCredentials),this.setHeaders(r,i),new Promise((s,o)=>{const a=()=>{o(this.getResponse(i))};i.onload=()=>{if(i.status>=200&&i.status<400){let l=null;l="response"===this.requestOptions.returnType?this.getResponse(i):this.decodeBody(i),s(l)}else a()},i.ontimeout=a,i.onerror=a,this.onProgress&&(r&&i.upload?i.upload.onprogress=this.onProgress:i.onprogress=this.onProgress),i.send(this.encodeBody(r))})}getResponse(e){return{body:this.decodeBody(e),headers:this.getHeaders(e),status:e.status,statusText:e.statusText}}composeUrl(e){const t=this.requestOptions.params;if(!t)return e;const r=t?t.toString():"";if(r){const i=e.indexOf("?");e=e+(-1===i?"?":i<e.length-1?"&":"")+r}return e}getContentType(e){return null==e?"":e instanceof Blob?e.type:e instanceof FormData?"":"string"==typeof e?"text/plain":e instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=UTF-8":"object"==typeof e||"number"==typeof e||Array.isArray(e)?"application/json":""}encodeBody(e){return null==e?null:e instanceof ArrayBuffer||e instanceof Blob||e instanceof FormData||"string"==typeof e?e:"object"==typeof e||"boolean"==typeof e||Array.isArray(e)?JSON.stringify(e):e.toString()}decodeBody(e){var t;let r=e.response||null,i=e.responseType;if(!i){i=null!==(t=e.getResponseHeader("Content-Type"))&&void 0!==t?t:"";const s=new RegExp("^\\w+/(\\w+);?").exec(i);s&&(i=s[1])}return"json"===i&&"string"==typeof r&&(r=""!==r?JSON.parse(r):null),r}setHeaders(e,t){const r=this.requestOptions.headers;if(r)for(const[i,s]of r)if(Array.isArray(s))for(const o of s)t.setRequestHeader(i,o);else t.setRequestHeader(i,s);if(!r||!r.has("Content-Type")){const i=this.getContentType(e);i&&t.setRequestHeader("Content-Type",i)}(!r||!r.has("Accept"))&&t.setRequestHeader("Accept","application/json, text/plain, */*")}getHeaders(e){const t=new Map,r=e.getAllResponseHeaders();if(r){const i=r.trim().split(/[\r\n]+/);for(const s of i){const o=s.indexOf(":");if(o>0){const a=s.slice(0,o),l=s.slice(o+1).trim(),c=a.toLowerCase(),f=t.get(c);f?("string"==typeof f?[f]:f).push(l):t.set(c,l)}}}return t}}var dp=X(36);class sL{constructor(){this.backCanvas=document.createElement("canvas")}render(e,t,r,i){var s=this;return Di(function*(){if(s.renderTask)return null;const o=1/r.width,a=i.width*o,l=r.x*a,c=r.y*a,G=e.getViewport({scale:o*(i.width/(e.view[2]-e.view[0])),dontFlip:!1});return G.transform[4]-=l,G.transform[5]-=c,s.backCanvas.width=i.width,s.backCanvas.height=i.height,s.renderTask=e.render({canvasContext:s.backCanvas.getContext("2d"),viewport:G}),s.renderTask.promise.then(()=>(t.canvas.width=s.backCanvas.width,t.canvas.height=s.backCanvas.height,t.drawImage(s.backCanvas,0,0),s.renderTask=null,s.backCanvas),ee=>{})})()}}var xC=X(813);class oL{render(e,t,r,i){return Di(function*(){const s=yield e.getTextContent(),o=1/i.width,a=r.width*o,l=i.x*a,c=i.y*a,G=e.getViewport({scale:o*(r.width/(e.view[2]-e.view[0])),dontFlip:!1});G.transform[4]-=l,G.transform[5]-=c,(0,dp.renderTextLayer)({textContent:s,container:t,viewport:G,enhanceTextSelection:!0,textDivs:[]}).promise.catch(Le=>{console.error(Le)});const ee=new xC.SimpleLinkService;ee.externalLinkTarget=2,new xC.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,linkService:ee}).render(G)})()}}class aL extends mC{constructor(e){super(),this.document=e,this.renderer=new sL,this.textRenderer=new oL,this.loadPages(e)}getPageText(e){var t=this;return Di(function*(){return(yield(yield t.document.getPage(e+1)).getTextContent()).items.map(function(s){return s.str}).join(" ")})()}renderPage(e,t,r,i){var s=this;return Di(function*(){const o=yield s.getPdfPage(e);return s.renderer.render(o,t,r,i)})()}renderPageText(e,t,r,i){var s=this;return Di(function*(){const o=yield s.getPdfPage(e);s.textRenderer.render(o,t,r,i)})()}getPdfPage(e){return this.document.getPage(e+1)}loadPages(e){this.pages=[];for(let t=0;t<e.numPages;t++)this.pages.push(new gC(this,t))}}class lL{loadDocument(e){return new Promise((t,r)=>{(0,dp.getDocument)(e).promise.then(i=>{t(new aL(i))},i=>{r(i)})})}}class cL{constructor(e){this.apiPath="/course/state",this.host=e}getCourseState(e){return(new up).get(this.getFullPath("/"+e))}getStateDocument(e,t){return new Promise(t.documentFile?(r,i)=>{(new up).setResponseType("arraybuffer").get(t.documentFile).then(s=>{if(!s)throw new Error("Received empty course document");const o=new Uint8Array(s);return(new lL).loadDocument(o)}).then(s=>{s.setDocumentId(t.documentId),r(s)}).catch(s=>{i(s)})}:(r,i)=>{(new _C).setDocumentId(t.documentId)})}getStateDocumentActions(e,t){return new Promise((r,i)=>(new up).setResponseType("arraybuffer").get(this.getFullPath("/"+e+"/pages/"+t.documentId)).then(s=>{if(!s)return void i("Received empty course document");const o=new MC(s),a=s.byteLength,l=[];for(;o.byteOffset<a;){o.getInt32();const w=(new DC).parse(o);w&&l.push(w)}r(l)}).catch(s=>{i(s)}))}preloadSlideDocument(e,t,r){return this.getStateDocumentActions(e,t).then(i=>{const s=new iL(r);for(const o of i)this.loadActions(s,o)})}loadActions(e,t){const r=t.playbackActions;if(!(r.length<1)){e.setPageNumber(t.pageNumber);for(let s of r)try{s.execute(e)}catch(o){console.error(o)}}}getFullPath(e){return this.host+this.apiPath+e}}class uL{constructor(e){this.renderController=e,this.toolContext=new PC(e)}setOnSelectPageIndex(e){this.pageIndexObserver=e}setKeyEvent(e){this.toolContext.keyEvent=e}setSeek(e){this.renderController.setSeek(e)}setDocument(e){this.document=e}setPageNumber(e){const t=this.document.getPage(e);this.pageNumber=e,this.toolContext.page=t,this.renderController.setPage(t),this.pageIndexObserver&&this.pageIndexObserver(e)}setTool(e){if(!e)throw new Error("Tool must not be null");!this.tool&&this.tool===e||(this.setPreviousTool(this.tool),this.tool=e)}selectAndExecuteTool(e){this.executeAtomicTool(e)}beginTool(e){this.tool.begin(e.clone(),this.toolContext)}executeTool(e){this.tool.execute(e.clone())}endTool(e){this.tool.end(e.clone())}executeAtomicTool(e){const t=Ti.createZero();this.setTool(e),this.beginTool(t),this.executeTool(t),this.endTool(t),this.setPreviousTool(this.previousTool)}setPreviousTool(e){!e||e instanceof Gr||(this.previousTool=e)}}var gt=(()=>{return(n=gt||(gt={})).Created="Created",n.Initializing="Initializing",n.Initialized="Initialized",n.Starting="Starting",n.Started="Started",n.Stopping="Stopping",n.Stopped="Stopped",n.Suspending="Suspending",n.Suspended="Suspended",n.Destroying="Destroying",n.Destroyed="Destroyed",n.Error="Error",gt;var n})();class pL extends class fL extends class hL extends class dL{constructor(){this.stateEvent=new iu,this._state=gt.Created,this._prevState=gt.Created}get state(){return this._state}get previousState(){return this._prevState}initialized(){return this._state===gt.Initialized}created(){return this._state===gt.Created}started(){return this._state===gt.Started}stopped(){return this._state===gt.Stopped}suspended(){return this._state===gt.Suspended}destroyed(){return this._state===gt.Destroyed}error(){return this._state===gt.Error}addStateListener(e){return this.stateEvent.subscribe(e)}removeStateListener(e){this.stateEvent.unsubscribe(e)}fireStateChanged(){this.stateEvent.publish(this._state)}setState(e){if(!this.validateNextState(e))throw new Error(`Invalid state transition for ${this.constructor.name}: [${this.state}] -> [${e}].`);this._prevState=this._state,this._state=e,this.fireStateChanged()}validateNextState(e){switch(this._state){case gt.Created:return this.isAllowed(e,gt.Initializing,gt.Destroying);case gt.Initializing:return this.isAllowed(e,gt.Initialized,gt.Error);case gt.Initialized:return this.isAllowed(e,gt.Starting,gt.Destroying);case gt.Starting:return this.isAllowed(e,gt.Started,gt.Error);case gt.Started:return this.isAllowed(e,gt.Suspending,gt.Stopping,gt.Destroying,gt.Error);case gt.Stopping:return this.isAllowed(e,gt.Stopped,gt.Error);case gt.Stopped:return this.isAllowed(e,gt.Starting,gt.Destroying);case gt.Suspending:return this.isAllowed(e,gt.Suspended,gt.Error);case gt.Suspended:return this.isAllowed(e,gt.Starting,gt.Stopping,gt.Destroying);case gt.Destroying:return this.isAllowed(e,gt.Destroyed,gt.Error);case gt.Destroyed:return this.isAllowed(e,gt.Initializing);case gt.Error:return this.isAllowed(e,gt.Starting,gt.Stopping,gt.Destroying);default:return!1}}isAllowed(e,...t){if(!t)throw new Error("No allowed states provided.");for(let r of t)if(e==r)return!0;return!1}}{init(){this.setState(gt.Initializing);try{this.initInternal()}catch(e){throw this.setState(gt.Error),new Error(`Failed to init ${this.constructor.name}: ${e}`)}this.setState(gt.Initialized)}start(){(this.created()||this.destroyed())&&this.init(),this.setState(gt.Starting);try{this.startInternal()}catch(e){throw this.setState(gt.Error),new Error(`Failed to start ${this.constructor.name}: ${e}`)}this.setState(gt.Started)}stop(){this.setState(gt.Stopping);try{this.stopInternal()}catch(e){throw this.setState(gt.Error),new Error(`Failed to stop ${this.constructor.name}: ${e}`)}this.setState(gt.Stopped)}suspend(){this.setState(gt.Suspending);try{this.suspendInternal()}catch(e){throw this.setState(gt.Error),new Error(`Failed to suspend ${this.constructor.name}: ${e}`)}this.setState(gt.Suspended)}suspendInternal(){}destroy(){(this.started()||this.suspended())&&stop(),this.setState(gt.Destroying);try{this.destroyInternal()}catch(e){throw this.setState(gt.Error),new Error(`Failed to destroy ${this.constructor.name}: ${e}`)}this.setState(gt.Destroyed)}}{constructor(e){super(),this.executor=e}}{constructor(e,t){super(e),this.syncState=t}addAction(e){this.actions.push(e)}setDocument(e){this.executor.setDocument(e)}seekByTime(e){throw new Error("Method not implemented.")}seekByPage(e){throw new Error("Method not implemented.")}executeActions(){let e=this.actions.length;for(;e>0;){const t=this.actions[0];try{t.execute(this.executor)}catch(i){}this.actions.shift(),e=this.actions.length}}initInternal(){this.actions=[]}startInternal(){try{this.run()}catch(e){throw console.error(e),new Error("Execute action failed.")}}stopInternal(){cancelAnimationFrame(this.requestID)}suspendInternal(){cancelAnimationFrame(this.requestID)}destroyInternal(){this.actions.length=0}run(){this.executeActions(),this.requestID=requestAnimationFrame(this.run.bind(this))}}class gL{render(e,t,r){const i=t.points,s=i.length;if(s<1)return;const o=t.brush,a=t.isSelected()?"rgba(255, 0, 100, 0.5)":o.color.toRgba();let l=0,c=i[l++];if(l!==s){for(e.beginPath(),e.strokeStyle=a,e.lineWidth=o.width,e.lineCap="round",e.lineJoin="round",e.globalAlpha=1,e.globalCompositeOperation="multiply",e.moveTo(c.x,c.y);l<s;)c=i[l++],e.lineTo(c.x,c.y);e.stroke()}else this.drawCircle(e,o,c.x,c.y,c.p)}drawCircle(e,t,r,i,s){const a=s*t.width/2;e.beginPath(),e.fillStyle=t.color.toRgba(),e.arc(r,i,a,0,2*Math.PI),e.fill()}}class mL{render(e,t,r){return Di(function*(){return t.getPage().render(e,t.bounds,r)})()}}class _L{render(e,t,r){const i=t.points[0];if(!i)return;const s=t.brush,o=s.width,a=o/2;e.beginPath(),e.fillStyle=s.color.toAlpha(.4),e.arc(i.x,i.y,o,0,2*Math.PI),e.fill(),e.beginPath(),e.strokeStyle=s.color.toRgb(),e.lineWidth=o/4,e.arc(i.x,i.y,a,0,2*Math.PI),e.stroke()}}class yL{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush;if(e.save(),this.createArrowPath(e,o,i,s,a.width),e.fillStyle=a.color.toRgba(),e.fill(),e.restore(),t.isSelected()){const l=e.getTransformExt().getScaleX();this.createArrowPath(e,o,i,s,a.width),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=2/l,e.setLineDash([5/l]),e.stroke()}}createArrowPath(e,t,r,i,s){const a=null!=t&&t.shiftKey,l=r.x,c=r.y,G=null!=t&&t.altKey?2*s:s,ee=G/2,Ee=i.x-l,Le=i.y-c,Je=Math.atan2(Le,Ee),Ze=Math.sqrt(Ee*Ee+Le*Le),nt=5*G,dt=Ze-.5*G/.5,Sn=Ze-.5*nt,mr=.5*nt*.5*.35,En=.5*nt,Ir=a?.5*G/.5+.75*nt:0;if(e.translate(l,c),e.rotate(Je),e.beginPath(),e.moveTo(Ir,-ee),e.lineTo(dt-.75*nt,-ee),e.lineTo(dt-nt,-En),e.quadraticCurveTo(Sn,-mr,Ze,0),e.quadraticCurveTo(Sn,mr,dt-nt,En),e.lineTo(dt-.75*nt,ee),e.lineTo(Ir,ee),a){const Pi=Ir-.5*nt,Xi=.5*nt*.5*.35;e.lineTo(Ir+.25*nt,En),e.quadraticCurveTo(Pi,Xi,0,0),e.quadraticCurveTo(Pi,-Xi,Ir+.25*nt,-En)}e.closePath()}}class vL{render(e,t,r){const i=t.bounds;if(i.isEmpty())return;const s=t.getKeyEvent(),o=t.brush,a=o.color.toRgba(),l=s&&s.altKey;let c=i.x,f=i.y,w=i.width,G=i.height;e.beginPath(),l?(e.fillStyle=a,e.rect(c,f,w,G),e.fill()):(e.strokeStyle=a,e.lineWidth=o.width,e.rect(c,f,w,G),e.stroke()),t.isSelected()&&(l&&(c+=o.width/2,f+=o.width/2,w-=o.width,G-=o.width),e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=o.width,e.setLineDash([5/e.getTransformExt().getScaleX()]),e.rect(c,f,w,G),e.stroke())}}class bL{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush,l=null!=o&&o.altKey,c=l?2*a.width:a.width;if(e.beginPath(),e.strokeStyle=a.color.toRgba(),e.lineWidth=c,e.lineCap="round",e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke(),t.isSelected()){const f=e.getTransformExt().getScaleX(),w=l?7/f:5/f,G=l?15/f:12/f;e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=c,e.setLineDash([w,G]),e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke()}}}class CL{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush,l=a.color.toRgba(),c=o&&o.altKey,f=Math.min(i.x,s.x),w=Math.min(i.y,s.y),G=Math.max(i.x,s.x),ee=Math.max(i.y,s.y),Ee=.5*Math.abs(G-f),Le=.5*Math.abs(ee-w),Je=f+Ee,Ze=w+Le;if(e.beginPath(),c?(e.fillStyle=l,e.ellipse(Je,Ze,Ee,Le,0,0,2*Math.PI),e.fill()):(e.strokeStyle=l,e.lineWidth=a.width,e.ellipse(Je,Ze,Ee,Le,0,0,2*Math.PI),e.stroke()),t.isSelected()){let He=0;c&&(He=a.width/2),e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=a.width,e.setLineDash([5/e.getTransformExt().getScaleX()]),e.ellipse(Je,Ze,Ee-He,Le-He,0,0,2*Math.PI),e.stroke()}}}class SL{constructor(){this.FRAME_COLOR="#FF0064"}render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=2/e.getTransformExt().getScaleX(),a=4/e.getTransformExt().getScaleY();e.beginPath(),e.strokeStyle=this.FRAME_COLOR,e.lineWidth=o,e.lineDashOffset=0,e.setLineDash([a]),e.lineCap="butt",e.lineJoin="bevel",e.rect(i.x,i.y,s.x-i.x,s.y-i.y),e.stroke()}}class EL{constructor(){this.FILL_COLOR="rgba(0, 163, 232, 0.4)",this.FRAME_COLOR="rgb(255, 0, 100)"}render(e,t,r){const i=t.bounds;e.fillStyle=this.FILL_COLOR,e.fillRect(i.x,i.y,i.width,i.height),e.beginPath(),e.strokeStyle=this.FRAME_COLOR,e.lineWidth=2/e.getTransformExt().getScaleX(),e.rect(i.x,i.y,i.width,i.height),e.stroke()}}class AL{render(e,t,r){const i=t.getText();if(!i||0===i.length)return;const s=t.bounds,o=t.getFont(),a=e.getTransformExt(),l=a.getScaleX(),c=o.size*l,f=a.getTranslateX()+s.x*l,w=a.getTranslateY()+s.y*l,G=new du(o.family,c,o.style,o.weight);e.setTransform(1,0,0,1,0,0),e.font=G.toString(),e.fillStyle=t.getTextColor().toRgba(),e.fillText(i,f,w+c)}}class ar{constructor(e){this.m=e?e.slice(0,6):[1,0,0,1,0,0]}getScaleX(){return this.m[0]}getScaleY(){return this.m[3]}getShearX(){return this.m[1]}getShearY(){return this.m[2]}getTranslateX(){return this.m[4]}getTranslateY(){return this.m[5]}clone(){return new ar(this.m)}reset(){this.setValues(1,0,0,1,0,0)}setTransform(e){this.m[0]=e.getScaleX(),this.m[1]=e.getShearX(),this.m[2]=e.getShearY(),this.m[3]=e.getScaleY(),this.m[4]=e.getTranslateX(),this.m[5]=e.getTranslateY()}setValues(e,t,r,i,s,o){this.m[0]=e,this.m[1]=t,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]);this.m[0]=this.m[3]*e,this.m[1]=-this.m[1]*e,this.m[2]=-this.m[2]*e,this.m[3]=this.m[0]*e,this.m[4]=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),this.m[5]=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5])}multiply(e){this.m[0]=this.m[0]*e.m[0]+this.m[2]*e.m[1],this.m[1]=this.m[1]*e.m[0]+this.m[3]*e.m[1],this.m[2]=this.m[0]*e.m[2]+this.m[2]*e.m[3],this.m[3]=this.m[1]*e.m[2]+this.m[3]*e.m[3],this.m[4]=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],this.m[5]=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5]}rotate(e){const t=Math.cos(e),r=Math.sin(e);this.m[0]=this.m[0]*t+this.m[1]*r,this.m[1]=this.m[0]*-r+this.m[1]*t,this.m[2]=this.m[2]*t+this.m[3]*r,this.m[3]=this.m[2]*-r+this.m[3]*t}scale(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}translate(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}transformPoint(e,t){const r=e;return new or(e=r*this.m[0]+t*this.m[2]+this.m[4],t=r*this.m[1]+t*this.m[3]+this.m[5])}equals(e){return!!e&&this.m.length===e.m.length&&this.m.every(function(t,r){return t===e.m[r]})}toString(){return"["+this.m.join(", ")+"]"}}class wL{render(e,t,r){const i=t.bounds;i.isEmpty()||(e.beginPath(),e.globalAlpha=1,e.globalCompositeOperation="multiply",e.fillStyle=t.getColor().toRgba(),e.rect(i.x,i.y,i.width,i.height),e.fill())}}class DL{render(e,t,r){const i=t.getText();if(!i||0===i.length)return;const s=t.bounds,o=t.getFont(),a=e.getTransformExt(),l=a.getScaleX(),c=o.size*l,f=a.getTranslateX()+s.x*l,w=a.getTranslateY()+s.y*l,G=new du(o.family,c,o.style,o.weight);e.setTransform(1,0,0,1,0,0),e.font=G.toString(),e.fillStyle=t.getTextColor().toRgba(),e.fillText(i,f,w+c)}}class TL{render(e,t,r){const i=t.brush,s=t.isSelected()?"rgb(255, 0, 100)":i.color.toRgb(),a=t.getPenStroke().getStrokeList();if(a){const l=a.length;let c=0,f=a[c++];for(e.beginPath(),e.fillStyle=s,e.beginPath(),e.moveTo(f.x,f.y);c<l;)f=a[c++],c<l&&e.lineTo(f.x,f.y)}e.fill()}}class ML{constructor(){this.seek=!1,this.pageChangeListener=this.pageChanged.bind(this),this.lastTransform=new ar}setPage(e){this.page&&this.disableRendering(),this.page=e,this.seek||this.enableRendering(),this.renderAllLayers()}setSeek(e){this.seek=e,e?this.disableRendering():(this.enableRendering(),this.lastTransform.equals(this.getPageTransform())?this.refreshAnnotationLayers():this.renderAllLayers())}setSlideRenderSurface(e){this.slideRenderSurface=e,this.slideRenderSurface.registerRenderer(pC.name,new mL),this.slideRenderSurface.addSizeListener(this.slideRenderSurfaceSizeChanged.bind(this))}setActionRenderSurface(e){this.actionRenderSurface=e,this.actionRenderSurface.addSizeListener(this.actionRenderSurfaceSizeChanged.bind(this)),this.registerShapeRenderers(e)}setVolatileRenderSurface(e){this.volatileRenderSurface=e,this.registerShapeRenderers(e)}setTextLayerSurface(e){this.textLayerSurface=e}beginBulkRender(){this.seek||this.disableRendering()}endBulkRender(){this.seek||(this.refreshAnnotationLayers(),this.enableRendering())}getPage(){return this.page}enableRendering(){this.page.addChangeListener(this.pageChangeListener)}disableRendering(){this.page.removeChangeListener(this.pageChangeListener)}slideRenderSurfaceSizeChanged(e){this.renderAllLayers()}actionRenderSurfaceSizeChanged(e){this.refreshAnnotationLayers()}pageChanged(e){switch(e.changeType){case xr.PageTransform:this.renderAllLayers();break;case xr.Clear:this.clearAnnotationLayers();break;case xr.ShapeAdded:if(this.lastShape&&this.lastShape!=e.shape){const t=this.actionRenderSurface.getSize(),r=new $r(0,0,t.width,t.height);this.renderPermanentLayer(this.lastShape,r)}this.renderVolatileLayer(e.shape,e.dirtyRegion);break;case xr.ShapeRemoved:this.refreshAnnotationLayers();break;case xr.ShapeModified:this.renderVolatileLayer(e.shape,e.dirtyRegion)}}clearAnnotationLayers(){this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}refreshAnnotationLayers(){const e=this.page.getShapes(),t=e.length-1;if(t>=0){this.actionRenderSurface.renderSurface(this.slideRenderSurface),t>0&&this.actionRenderSurface.renderShapes(e.slice(0,t));const r=e[t];this.renderVolatileLayer(r,r.bounds)}else this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}renderAllLayers(){this.renderSlideLayer(this.page).then(t=>{if(t){const r=this.getPageTransform();this.lastTransform.setTransform(r),this.actionRenderSurface.setTransform(r),this.volatileRenderSurface.setTransform(r),this.actionRenderSurface.renderImageSource(t),this.actionRenderSurface.renderShapes(this.page.getShapes()),this.volatileRenderSurface.clear(),this.textLayerSurface.render(this.page),this.lastShape=null,console.log("RendererController Rendered image source: ",t)}}).catch(t=>{console.log("RendererController error: ",t)})}renderPermanentLayer(e,t){this.actionRenderSurface.renderShape(e,t)}renderVolatileLayer(e,t){this.volatileRenderSurface.renderSurface(this.actionRenderSurface),this.volatileRenderSurface.renderShape(e,t),this.lastShape=e}renderSlideLayer(e){const t=this.slideRenderSurface.getSize();if(!t)return this.slideRenderSurface.renderSlideShape(e.getSlideShape(),new $r(0,0,0,0));const r=new $r(0,0,t.width,t.height);return this.slideRenderSurface.renderSlideShape(e.getSlideShape(),r)}getPageTransform(){const e=this.page.getSlideShape().bounds,t=new ar;return t.translate(e.x,e.y),t.scale(1/e.width,1/e.height),t}registerShapeRenderers(e){e.registerRenderer(ou.name,new TL),e.registerRenderer(Vs.name,new gL),e.registerRenderer(bC.name,new _L),e.registerRenderer(au.name,new yL),e.registerRenderer(cu.name,new vL),e.registerRenderer(lu.name,new bL),e.registerRenderer(uu.name,new CL),e.registerRenderer(EC.name,new SL),e.registerRenderer(rl.name,new AL),e.registerRenderer(hu.name,new wL),e.registerRenderer(il.name,new DL),e.registerRenderer(AC.name,new EL)}}class PL{constructor(e){e&&(this.mediaPlayer=e)}get audioTime(){return this.mediaPlayer?1e3*this.mediaPlayer.time:0}}class Hs{constructor(e){this.playbackModel=e,this.documents=new Map,Hs._instance=this}static getInstance(){return this._instance}initialize(e,t,r,i){r.forEach(c=>{this.addDocument(c)}),Number(i);const o=t.avtiveDocument;let a=null;for(const c of r)if(c.getDocumentId()==o.documentId){a=c;break}this.renderController=new ML,this.renderController.setActionRenderSurface(e.getActionRenderSurface()),this.renderController.setSlideRenderSurface(e.getSlideRenderSurface()),this.renderController.setVolatileRenderSurface(e.getVolatileRenderSurface()),this.renderController.setTextLayerSurface(e.getTextLayerSurface());const l=new uL(this.renderController);a&&l.setDocument(a),o.activePage&&l.setPageNumber(o.activePage.pageNumber),this.actionPlayer=new pL(l,new PL),this.actionPlayer.start()}addAction(e){this.actionPlayer.addAction(e)}addDocument(e){this.documents.set(BigInt(e.getDocumentId()),e)}removeDocument(e){this.documents.delete(BigInt(e))}selectDocument(e){const t=this.documents.get(BigInt(e));t&&this.actionPlayer.setDocument(t)}}class lr extends class xL{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}notify(e){this.observers.forEach(t=>t(e))}}{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.notify(this._value))}notifyObservers(){super.notify(this._value)}}class IL{constructor(){this._elementA=new lr,this._raisedHand=new lr,this._showQuiz=new lr,this._showChat=new lr,this._showQuizActive=new lr,this._webrtcConnected=new lr,this._webrtcPublisherConnected=new lr,this._videoAvailable=new lr,this._mainVideoAvailable=new lr,this._localVideoAvailable=new lr,this._selectedPageIndex=new lr,this._duration=new lr,this._time=new lr,this._volume=new lr,this._muted=new lr}get elementAProperty(){return this._elementA}get selectedPageIndexProperty(){return this._selectedPageIndex}get selectedPageIndex(){return this._selectedPageIndex.value}set selectedPageIndex(e){this._selectedPageIndex.value=e}get raisedHandProperty(){return this._raisedHand}set raisedHand(e){this._raisedHand.value=e}get showChatProperty(){return this._showChat}get showChat(){return this._showChat.value}set showChat(e){this._showChat.value=e}get showQuizProperty(){return this._showQuiz}set showQuiz(e){this._showQuiz.value=e}get showQuizActiveProperty(){return this._showQuizActive}set showQuizActive(e){this._showQuizActive.value=e}get webrtcConnectedProperty(){return this._webrtcConnected}set webrtcConnected(e){this._webrtcConnected.value=e}get webrtcPublisherConnectedProperty(){return this._webrtcPublisherConnected}set webrtcPublisherConnected(e){this._webrtcPublisherConnected.value=e}get videoAvailableProperty(){return this._videoAvailable}get videoAvailable(){return this._videoAvailable.value}set videoAvailable(e){this._videoAvailable.value=e}get mainVideoAvailableProperty(){return this._mainVideoAvailable}get mainVideoAvailable(){return this._mainVideoAvailable.value}set mainVideoAvailable(e){this._mainVideoAvailable.value=e}get localVideoAvailableProperty(){return this._localVideoAvailable}get localVideoAvailable(){return this._localVideoAvailable.value}set localVideoAvailable(e){this._localVideoAvailable.value=e}get durationProperty(){return this._duration}getDuration(){return this._duration.value}setDuration(e){this._duration.value=e}get timeProperty(){return this._time}getTime(){return this._time.value}setTime(e){this._time.value=e}get volumeProperty(){return this._volume}getVolume(){return this._volume.value}setVolume(e){this._volume.value=e}get mutedProperty(){return this._muted}getMuted(){return this._muted.value}setMuted(e){this._muted.value=e}}class IC{constructor(e,t){this.width=e,this.height=t}equals(e){return!!e&&this.width===e.height&&this.height===e.height}toString(){return`[${this.height}, ${this.width}]`}}class RL{constructor(e){this._size=e}get size(){return this._size}}class hp{constructor(e){this.sizeEvent=new iu,this.canvas=e,this.canvasContext=e.getContext("2d"),this.renderers=new Map,this.transform=new ar}clear(){this.canvasContext&&this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}registerRenderer(e,t){this.renderers.set(e,t)}renderImageSource(e){this.canvasContext&&this.canvasContext.drawImage(e,0,0)}renderSurface(e){0===e.canvas.width||0===e.canvas.height||this.canvasContext&&this.canvasContext.drawImage(e.canvas,0,0)}renderShapes(e){for(let t of e)this.renderShape(t,null)}renderShape(e,t){const r=this.renderers.get(e.constructor.name);if(r){const i=this.canvas.width*this.transform.getScaleX(),s=this.transform.getTranslateX(),o=this.transform.getTranslateY();this.canvasContext&&(this.canvasContext.save(),this.canvasContext.scale(i,i),this.canvasContext.translate(-s,-o),t&&r.render(this.canvasContext,e,t),this.canvasContext.restore())}}getSize(){return this.size}setSize(e,t){if(e<1||t<1)return;const r=window.devicePixelRatio||1;this.size=new IC(e*r,t*r),this.resizeCanvas(e,t,r),this.fireSizeEvent(new RL(this.size))}setTransform(e){this.transform.setTransform(e)}addSizeListener(e){return this.sizeEvent.subscribe(e)}removeSizeListener(e){this.sizeEvent.unsubscribe(e)}fireSizeEvent(e){this.sizeEvent.publish(e)}resizeCanvas(e,t,r){const i=this.canvas.getAttribute("scale");i&&"full"===i&&(this.canvas.width=e*r,this.canvas.height=t*r),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"}}class kL extends hp{renderSlideShape(e,t){const r=this.renderers.get(e.constructor.name);let i;if(r){const o=this.canvas.width/e.bounds.width;this.canvasContext&&(this.canvasContext.save(),this.canvasContext.scale(o,o),i=r.render(this.canvasContext,e,t),this.canvasContext.restore())}return i}}class OL{constructor(e){this.root=e}clear(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild)}render(e){var t=this;return Di(function*(){t.clear(),e.renderText(t.root,t.size)})()}getSize(){return this.size}setSize(e,t){this.size=new IC(e,t),this.root.style.width=e+"px",this.root.style.height=t+"px"}}var RC=X(97).default;m.sessions={},m.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var n=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),e=33;return window.navigator.userAgent.match("Linux")&&(e=35),n>=26&&n<=e||m.extension.isInstalled()}return!0};var kC={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(n){var e=window.setTimeout(function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',n(t)},1e3);this.cache[e]=n,window.postMessage({type:"janusGetScreen",id:e},"*")},init:function(){var n={};this.cache=n,window.addEventListener("message",function(e){if(e.origin==window.location.origin)if("janusGotScreen"==e.data.type&&n[e.data.id]){var t=n[e.data.id];if(delete n[e.data.id],""===e.data.sourceId){var r=new Error("NavigatorUserMediaError");r.name="You cancelled the request for permission, giving up...",t(r)}else t(null,e.data.sourceId)}else"janusGetScreenPending"==e.data.type&&(console.log("clearing ",e.data.id),window.clearTimeout(e.data.id))})}};function m(n){if((n=n||{}).success="function"==typeof n.success?n.success:m.noop,n.error="function"==typeof n.error?n.error:m.noop,n.destroyed="function"==typeof n.destroyed?n.destroyed:m.noop,!m.initDone)return n.error("Library not initialized"),{};if(!m.isWebrtcSupported())return n.error("WebRTC not supported by this browser"),{};if(m.log("Library initialized: "+m.initDone),!n.server)return n.error("Invalid server url"),{};var e=!1,t=null,r={},i=null,s=null,o=0,a=n.server;m.isArray(a)?(m.log("Multiple servers provided ("+a.length+"), will use the first that works"),a=null,m.debug(s=n.server)):0===a.indexOf("ws")?(e=!0,m.log("Using WebSockets to contact Janus: "+a)):(e=!1,m.log("Using REST API to contact Janus: "+a));var l=n.iceServers||[{urls:"stun:stun.l.google.com:19302"}],c=n.iceTransportPolicy,f=n.bundlePolicy,w=!0===n.ipv6,G=!1;null!=n.withCredentials&&(G=!0===n.withCredentials);var ee=10;null!=n.max_poll_events&&(ee=n.max_poll_events),ee<1&&(ee=1);var Ee=null;null!=n.token&&(Ee=n.token);var Le=null;null!=n.apisecret&&(Le=n.apisecret),this.destroyOnUnload=!0,null!=n.destroyOnUnload&&(this.destroyOnUnload=!0===n.destroyOnUnload);var Je=25e3;null!=n.keepAlivePeriod&&(Je=n.keepAlivePeriod),isNaN(Je)&&(Je=25e3);var Ze=6e4;function He(z){var oe={high:9e5,medium:3e5,low:1e5};return null!=z&&(z.high&&(oe.high=z.high),z.medium&&(oe.medium=z.medium),z.low&&(oe.low=z.low)),oe}null!=n.longPollTimeout&&(Ze=n.longPollTimeout),isNaN(Ze)&&(Ze=6e4);var nt=!1,rt=null,dt={},Sn=this,mr=0,En={};function Ir(){if(null!=rt){if(m.debug("Long poll..."),!nt)return void m.warn("Is the server down? (connected=false)");var z=a+"/"+rt+"?rid="+(new Date).getTime();ee&&(z=z+"&maxev="+ee),Ee&&(z=z+"&token="+encodeURIComponent(Ee)),Le&&(z=z+"&apisecret="+encodeURIComponent(Le)),m.httpAPICall(z,{verb:"GET",withCredentials:G,success:Pi,timeout:Ze,error:function(oe,De){if(m.error(oe+":",De),++mr>3)return nt=!1,void n.error("Lost connection to the server (is it down?)");Ir()}})}}function Pi(z,oe){if(mr=0,!e&&null!=rt&&!0!==oe&&Ir(),e||!m.isArray(z))if("keepalive"!==z.janus)if("server_info"!==z.janus)if("ack"!==z.janus)if("success"!==z.janus)if("trickle"===z.janus){const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const at=dt[ot];if(!at)return void m.debug("This handle is not attached to this session");var ge=z.candidate;m.debug("Got a trickled candidate on session "+rt),m.debug(ge);var q=at.webrtcStuff;q.pc&&q.remoteSdp?(m.debug("Adding remote candidate:",ge),q.pc.addIceCandidate(ge&&!0!==ge.completed?ge:m.endOfCandidates)):(m.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),q.candidates||(q.candidates=[]),q.candidates.push(ge),m.debug(q.candidates))}else{if("webrtcup"===z.janus){m.debug("Got a webrtcup event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const at=dt[ot];return at?void at.webrtcState(!0):void m.debug("This handle is not attached to this session")}if("hangup"===z.janus){m.debug("Got a hangup event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const at=dt[ot];if(!at)return void m.debug("This handle is not attached to this session");at.webrtcState(!1,z.reason),at.hangup()}else if("detached"===z.janus){m.debug("Got a detached event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const at=dt[ot];if(!at)return;at.ondetached(),at.detach()}else if("media"===z.janus){m.debug("Got a media event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const at=dt[ot];if(!at)return void m.debug("This handle is not attached to this session");at.mediaState(z.type,z.receiving,z.mid)}else if("slowlink"===z.janus){m.debug("Got a slowlink event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const at=dt[ot];if(!at)return void m.debug("This handle is not attached to this session");at.slowLink(z.uplink,z.lost,z.mid)}else{if("error"===z.janus){m.error("Ooops: "+z.error.code+" "+z.error.reason),m.debug(z);var Ne=z.transaction;if(Ne){var ye=En[Ne];ye&&ye(z),delete En[Ne]}return}if("event"===z.janus){m.debug("Got a plugin event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");var Ge=z.plugindata;if(!Ge)return void m.warn("Missing plugindata...");m.debug("  -- Event is coming from "+ot+" ("+Ge.plugin+")");var Be=Ge.data;m.debug(Be);const at=dt[ot];if(!at)return void m.warn("This handle is not attached to this session");var st=z.jsep;st&&(m.debug("Handling SDP as well..."),m.debug(st));var Ue=at.onmessage;Ue?(m.debug("Notifying application..."),Ue(Be,st)):m.debug("No provided notification callback")}else{if("timeout"===z.janus)return m.error("Timeout on session "+rt),m.debug(z),void(e&&t.close(3504,"Gateway timeout"));m.warn("Unknown message/event  '"+z.janus+"' on session "+rt),m.debug(z)}}}else{m.debug("Got a success on session "+rt),m.debug(z);const ot=z.transaction;if(ot){const at=En[ot];at&&at(z),delete En[ot]}}else{m.debug("Got an ack on session "+rt),m.debug(z);const ot=z.transaction;if(ot){const at=En[ot];at&&at(z),delete En[ot]}}else{m.debug("Got info on the Janus instance"),m.debug(z);const ot=z.transaction;if(ot){const at=En[ot];at&&at(z),delete En[ot]}}else m.vdebug("Got a keepalive on session "+rt);else for(var De=0;De<z.length;De++)Pi(z[De],!0)}function Xi(){if(a&&e&&nt){i=setTimeout(Xi,Je);var z={janus:"keepalive",session_id:rt,transaction:m.randomString(12)};Ee&&(z.token=Ee),Le&&(z.apisecret=Le),t.send(JSON.stringify(z))}}function fs(z){var oe=m.randomString(12),De={janus:"create",transaction:oe};if(z.reconnect&&(nt=!1,De.janus="claim",De.session_id=rt,t&&(t.onopen=null,t.onerror=null,t.onclose=null,i&&(clearTimeout(i),i=null))),Ee&&(De.token=Ee),Le&&(De.apisecret=Le),!a&&m.isArray(s)&&(0===(a=s[o]).indexOf("ws")?(e=!0,m.log("Server #"+(o+1)+": trying WebSockets to contact Janus ("+a+")")):(e=!1,m.log("Server #"+(o+1)+": trying REST API to contact Janus ("+a+")"))),e)for(var ge in t=m.newWebSocket(a,"janus-protocol"),r={error:function(){if(m.error("Error connecting to the Janus WebSockets server... "+a),m.isArray(s)&&!z.reconnect)return++o===s.length?void z.error("Error connecting to any of the provided Janus servers: Is the server down?"):(a=null,void setTimeout(function(){fs(z)},200));z.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){En[oe]=function(q){if(m.debug(q),"success"!==q.janus)return m.error("Ooops: "+q.error.code+" "+q.error.reason),void z.error(q.error.reason);i=setTimeout(Xi,Je),nt=!0,rt=q.session_id?q.session_id:q.data.id,m.log(z.reconnect?"Claimed session: "+rt:"Created session: "+rt),m.sessions[rt]=Sn,z.success()},t.send(JSON.stringify(De))},message:function(q){Pi(JSON.parse(q.data))},close:function(){!a||!nt||(nt=!1,n.error("Lost connection to the server (is it down?)"))}})t.addEventListener(ge,r[ge]);else m.httpAPICall(a,{verb:"POST",withCredentials:G,body:De,success:function(q){if(m.debug(q),"success"!==q.janus)return m.error("Ooops: "+q.error.code+" "+q.error.reason),void z.error(q.error.reason);nt=!0,rt=q.session_id?q.session_id:q.data.id,m.log(z.reconnect?"Claimed session: "+rt:"Created session: "+rt),m.sessions[rt]=Sn,Ir(),z.success()},error:function(q,Ne){if(m.error(q+":",Ne),m.isArray(s)&&!z.reconnect)return++o===s.length?void z.error("Error connecting to any of the provided Janus servers: Is the server down?"):(a=null,void setTimeout(function(){fs(z)},200));z.error(""===Ne?q+": Is the server down?":Ne&&Ne.error?q+": "+Ne.error.message:q+": "+Ne)}})}function zo(z,oe){if((oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop,!nt)return m.warn("Is the server down? (connected=false)"),void oe.error("Is the server down? (connected=false)");var De=dt[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var ge=oe.message,q=oe.jsep,Ne=m.randomString(12),ye={janus:"message",body:ge,transaction:Ne};if(De.token&&(ye.token=De.token),Le&&(ye.apisecret=Le),q&&(ye.jsep={type:q.type,sdp:q.sdp},q.e2ee&&(ye.jsep.e2ee=!0),("hml"===q.rid_order||"lmh"===q.rid_order)&&(ye.jsep.rid_order=q.rid_order),q.force_relay&&(ye.jsep.force_relay=!0)),m.debug("Sending message to plugin (handle="+z+"):"),m.debug(ye),e)return ye.session_id=rt,ye.handle_id=z,En[Ne]=function(Ge){if(m.debug("Message sent!"),m.debug(Ge),"success"===Ge.janus){var Be=Ge.plugindata;if(!Be)return m.warn("Request succeeded, but missing plugindata..."),void oe.success();m.log("Synchronous transaction successful ("+Be.plugin+")");var st=Be.data;return m.debug(st),void oe.success(st)}"ack"===Ge.janus?oe.success():Ge.error?(m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),oe.error(Ge.error.code+" "+Ge.error.reason)):(m.error("Unknown error"),oe.error("Unknown error"))},void t.send(JSON.stringify(ye));m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:G,body:ye,success:function(Ge){if(m.debug("Message sent!"),m.debug(Ge),"success"===Ge.janus){var Be=Ge.plugindata;if(!Be)return m.warn("Request succeeded, but missing plugindata..."),void oe.success();m.log("Synchronous transaction successful ("+Be.plugin+")");var st=Be.data;return m.debug(st),void oe.success(st)}"ack"===Ge.janus?oe.success():Ge.error?(m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),oe.error(Ge.error.code+" "+Ge.error.reason)):(m.error("Unknown error"),oe.error("Unknown error"))},error:function(Ge,Be){m.error(Ge+":",Be),oe.error(Ge+": "+Be)}})}function uS(z,oe){if(nt){var De=dt[z];if(De&&De.webrtcStuff){var ge={janus:"trickle",candidate:oe,transaction:m.randomString(12)};if(De.token&&(ge.token=De.token),Le&&(ge.apisecret=Le),m.vdebug("Sending trickle candidate (handle="+z+"):"),m.vdebug(ge),e)return ge.session_id=rt,ge.handle_id=z,void t.send(JSON.stringify(ge));m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:G,body:ge,success:function(q){m.vdebug("Candidate sent!"),m.vdebug(q),"ack"===q.janus||m.error("Ooops: "+q.error.code+" "+q.error.reason)},error:function(q,Ne){m.error(q+":",Ne)}})}else m.warn("Invalid handle")}else m.warn("Is the server down? (connected=false)")}function Ep(z,oe,De,ge,q){var Ne=dt[z];if(Ne&&Ne.webrtcStuff){var ye=Ne.webrtcStuff;if(ye.pc){var Be=function(ot){m.log("Received state change on data channel:",ot);var at=ot.target.label,An=ot.target.protocol,Lt=ye.dataChannel[at]?ye.dataChannel[at].readyState:"null";if(m.log("State change on <"+at+"> data channel: "+Lt),"open"===Lt){if(ye.dataChannel[at].pending&&ye.dataChannel[at].pending.length>0){for(var yt of(m.log("Sending pending messages on <"+at+">:",ye.dataChannel[at].pending.length),ye.dataChannel[at].pending))m.log("Sending data on data channel <"+at+">"),m.debug(yt),ye.dataChannel[at].send(yt);ye.dataChannel[at].pending=[]}Ne.ondataopen(at,An)}};if(ge)ye.dataChannel[oe]=ge;else{var Ue=ye.dataChannelOptions;De&&(Ue.protocol=De),ye.dataChannel[oe]=ye.pc.createDataChannel(oe,Ue)}ye.dataChannel[oe].onmessage=function(ot){m.log("Received message on data channel:",ot),Ne.ondata(ot.data,ot.target.label)},ye.dataChannel[oe].onopen=Be,ye.dataChannel[oe].onclose=Be,ye.dataChannel[oe].onerror=function(ot){m.error("Got error on data channel:",ot)},ye.dataChannel[oe].pending=[],q&&ye.dataChannel[oe].pending.push(q)}else m.warn("Invalid PeerConnection")}else m.warn("Invalid handle")}function dS(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=dt[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var ge=De.webrtcStuff,q=oe.text||oe.data;if(!q)return m.warn("Invalid data"),void oe.error("Invalid data");var Ne=oe.label?oe.label:m.dataChanDefaultLabel;return ge.dataChannel[Ne]?"open"!==ge.dataChannel[Ne].readyState?(ge.dataChannel[Ne].pending.push(q),void oe.success()):(m.log("Sending data on data channel <"+Ne+">"),m.debug(q),ge.dataChannel[Ne].send(q),void oe.success()):(Ep(z,Ne,oe.protocol,!1,q),void oe.success())}function hS(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=dt[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var ge=De.webrtcStuff;if(!ge.dtmfSender){if(ge.pc){var Ne=ge.pc.getSenders().find(function(Ue){return Ue.track&&"audio"===Ue.track.kind});if(!Ne)return m.warn("Invalid DTMF configuration (no audio track)"),void oe.error("Invalid DTMF configuration (no audio track)");ge.dtmfSender=Ne.dtmf,ge.dtmfSender&&(m.log("Created DTMF Sender"),ge.dtmfSender.ontonechange=function(Ue){m.debug("Sent DTMF tone: "+Ue.tone)})}if(!ge.dtmfSender)return m.warn("Invalid DTMF configuration"),void oe.error("Invalid DTMF configuration")}var ye=oe.dtmf;if(!ye)return m.warn("Invalid DTMF parameters"),void oe.error("Invalid DTMF parameters");var Ge=ye.tones;if(!Ge)return m.warn("Invalid DTMF string"),void oe.error("Invalid DTMF string");var Be="number"==typeof ye.duration?ye.duration:500,st="number"==typeof ye.gap?ye.gap:50;m.debug("Sending DTMF string "+Ge+" (duration "+Be+"ms, gap "+st+"ms)"),ge.dtmfSender.insertDTMF(Ge,Be,st),oe.success()}function Ap(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=!0===oe.noRequest;m.log("Destroying handle "+z+" (only-locally="+De+")"),wp(z);var ge=dt[z];if(!ge||ge.detached)return delete dt[z],void oe.success();if(ge.detached=!0,De)return delete dt[z],void oe.success();if(!nt)return m.warn("Is the server down? (connected=false)"),void oe.error("Is the server down? (connected=false)");var q={janus:"detach",transaction:m.randomString(12)};if(ge.token&&(q.token=ge.token),Le&&(q.apisecret=Le),e)return q.session_id=rt,q.handle_id=z,t.send(JSON.stringify(q)),delete dt[z],void oe.success();m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:G,body:q,success:function(Ne){m.log("Destroyed handle:"),m.debug(Ne),"success"!==Ne.janus&&m.error("Ooops: "+Ne.error.code+" "+Ne.error.reason),delete dt[z],oe.success()},error:function(Ne,ye){m.error(Ne+":",ye),delete dt[z],oe.success()}})}function ps(z,oe,De,ge,q){var Ne=dt[z];if(!Ne||!Ne.webrtcStuff)return m.warn("Invalid handle"),ge.stream||m.stopAllTracks(q),void ge.error("Invalid handle");var ye=Ne.webrtcStuff;m.debug("streamsDone:",q),q&&(m.debug("  -- Audio tracks:",q.getAudioTracks()),m.debug("  -- Video tracks:",q.getVideoTracks()));var Ge=!1;if(ye.myStream&&De.update&&(!ye.streamExternal||De.replaceAudio||De.replaceVideo)){if((!De.update&&_r(De)||De.update&&(De.addAudio||De.replaceAudio))&&q.getAudioTracks()&&q.getAudioTracks().length)if(ye.myStream.addTrack(q.getAudioTracks()[0]),m.unifiedPlan){m.log((De.replaceAudio?"Replacing":"Adding")+" audio track:",q.getAudioTracks()[0]);var Be=null;const lt=ye.pc.getTransceivers();if(lt&&lt.length>0)for(const St of lt)if(St.sender&&St.sender.track&&"audio"===St.sender.track.kind||St.receiver&&St.receiver.track&&"audio"===St.receiver.track.kind){Be=St;break}Be&&Be.sender?Be.sender.replaceTrack(q.getAudioTracks()[0]):ye.pc.addTrack(q.getAudioTracks()[0],q)}else m.log((De.replaceAudio?"Replacing":"Adding")+" audio track:",q.getAudioTracks()[0]),ye.pc.addTrack(q.getAudioTracks()[0],q);if((!De.update&&zr(De)||De.update&&(De.addVideo||De.replaceVideo))&&q.getVideoTracks()&&q.getVideoTracks().length)if(ye.myStream.addTrack(q.getVideoTracks()[0]),m.unifiedPlan){m.log((De.replaceVideo?"Replacing":"Adding")+" video track:",q.getVideoTracks()[0]);var st=null;const lt=ye.pc.getTransceivers();if(lt&&lt.length>0)for(const St of lt)if(St.sender&&St.sender.track&&"video"===St.sender.track.kind||St.receiver&&St.receiver.track&&"video"===St.receiver.track.kind){st=St;break}st&&st.sender?st.sender.replaceTrack(q.getVideoTracks()[0]):ye.pc.addTrack(q.getVideoTracks()[0],q)}else m.log((De.replaceVideo?"Replacing":"Adding")+" video track:",q.getVideoTracks()[0]),ye.pc.addTrack(q.getVideoTracks()[0],q)}else ye.myStream=q,Ge=!0;if(!ye.pc){var Ue={iceServers:l,iceTransportPolicy:c,bundlePolicy:f};"chrome"===m.webRTCAdapter.browserDetails.browser&&(Ue.sdpSemantics=m.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var ot={optional:[{DtlsSrtpKeyAgreement:!0}]};if(w&&ot.optional.push({googIPv6:!0}),ge.rtcConstraints&&"object"==typeof ge.rtcConstraints)for(var at in m.debug("Adding custom PeerConnection constraints:",ge.rtcConstraints),ge.rtcConstraints)ot.optional.push(ge.rtcConstraints[at]);"edge"===m.webRTCAdapter.browserDetails.browser&&(Ue.bundlePolicy="max-bundle"),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&(ge.senderTransforms||ge.receiverTransforms)&&(ye.senderTransforms=ge.senderTransforms,ye.receiverTransforms=ge.receiverTransforms,Ue.forceEncodedAudioInsertableStreams=!0,Ue.forceEncodedVideoInsertableStreams=!0,Ue.encodedInsertableStreams=!0),m.log("Creating PeerConnection"),m.debug(ot),ye.pc=new RTCPeerConnection(Ue,ot),m.debug(ye.pc),ye.pc.getStats&&(ye.volume={},ye.bitrate.value="0 kbits/sec"),m.log("Preparing local SDP and gathering candidates (trickle="+ye.trickle+")"),ye.pc.oniceconnectionstatechange=function(){ye.pc&&Ne.iceState(ye.pc.iceConnectionState)},ye.pc.onicecandidate=function(lt){!lt.candidate||"edge"===m.webRTCAdapter.browserDetails.browser&&lt.candidate.candidate.indexOf("endOfCandidates")>0?(m.log("End of candidates."),ye.iceDone=!0,!0===ye.trickle?uS(z,{completed:!0}):function y2(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=dt[z];if(De&&De.webrtcStuff){var ge=De.webrtcStuff;m.log("Sending offer/answer SDP..."),ge.mySdp?(ge.mySdp={type:ge.pc.localDescription.type,sdp:ge.pc.localDescription.sdp},!1===ge.trickle&&(ge.mySdp.trickle=!1),m.debug(oe),ge.sdpSent=!0,oe.success(ge.mySdp)):m.warn("Local SDP instance is invalid, not sending anything...")}else m.warn("Invalid handle, not sending anything")}(z,ge)):!0===ye.trickle&&uS(z,{candidate:lt.candidate.candidate,sdpMid:lt.candidate.sdpMid,sdpMLineIndex:lt.candidate.sdpMLineIndex})},ye.pc.ontrack=function(lt){if(m.log("Handling Remote Track"),m.debug(lt),lt.streams&&(ye.remoteStream=lt.streams[0],lt.track)){var St=lt.transceiver?lt.transceiver.mid:lt.track.id;try{Ne.onremotetrack(lt.track,St,!0)}catch(Qt){m.error(Qt)}if(!lt.track.onended){if(ye.receiverTransforms){var pt=null;RTCRtpSender.prototype.createEncodedStreams?pt=lt.receiver.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===lt.track.kind&&ye.receiverTransforms.audio?pt=lt.receiver.createEncodedAudioStreams():"video"===lt.track.kind&&ye.receiverTransforms.video&&(pt=lt.receiver.createEncodedVideoStreams())),pt&&(console.log(pt),pt.readableStream&&pt.writableStream?pt.readableStream.pipeThrough(ye.receiverTransforms[lt.track.kind]).pipeTo(pt.writableStream):pt.readable&&pt.writable&&pt.readable.pipeThrough(ye.receiverTransforms[lt.track.kind]).pipeTo(pt.writable))}var Nt=null;m.log("Adding onended callback to track:",lt.track),lt.track.onended=function(Qt){if(m.log("Remote track removed:",Qt),ye.remoteStream){clearTimeout(Nt),ye.remoteStream.removeTrack(Qt.target);var li=Qt.target.id;m.unifiedPlan&&(li=ye.pc.getTransceivers().find(ln=>ln.receiver.track===Qt.target).mid);try{Ne.onremotetrack(Qt.target,li,!1)}catch(ln){m.error(ln)}}},lt.track.onmute=function(Qt){m.log("Remote track muted:",Qt),ye.remoteStream&&null==Nt&&(Nt=setTimeout(function(){if(m.log("Removing remote track"),ye.remoteStream){ye.remoteStream.removeTrack(Qt.target);var li=Qt.target.id;m.unifiedPlan&&(li=ye.pc.getTransceivers().find(ln=>ln.receiver.track===Qt.target).mid);try{Ne.onremotetrack(Qt.target,li,!1)}catch(ln){m.error(ln)}}Nt=null},2520))},lt.track.onunmute=function(Qt){if(m.log("Remote track flowing again:",Qt),null!=Nt)clearTimeout(Nt),Nt=null;else try{ye.remoteStream.addTrack(Qt.target);var li=Qt.target.id;m.unifiedPlan&&(li=ye.pc.getTransceivers().find(ln=>ln.receiver.track===Qt.target).mid),Ne.onremotetrack(Qt.target,li,!0)}catch(ln){m.error(ln)}}}}}}if(Ge&&q){m.log("Adding local stream");var An=(!0===ge.simulcast||!0===ge.simulcast2)&&m.unifiedPlan,Lt=ge.svc;q.getTracks().forEach(function(lt){m.log("Adding local track:",lt);var St=null;if(!An&&!Lt||"audio"===lt.kind)St=ye.pc.addTrack(lt,q);else if(An){m.log("Enabling rid-based simulcasting:",lt);let Nt=He(ge.simulcastMaxBitrates),Qt=ye.pc.addTransceiver(lt,{direction:"sendrecv",streams:[q],sendEncodings:ge.sendEncodings||[{rid:"h",active:!0,maxBitrate:Nt.high},{rid:"m",active:!0,maxBitrate:Nt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:Nt.low,scaleResolutionDownBy:4}]});Qt&&(St=Qt.sender)}else{m.log("Enabling SVC ("+Lt+"):",lt);let Nt=ye.pc.addTransceiver(lt,{direction:"sendrecv",streams:[q],sendEncodings:[{scalabilityMode:Lt}]});Nt&&(St=Nt.sender)}if(St&&ye.senderTransforms){var pt=null;RTCRtpSender.prototype.createEncodedStreams?pt=St.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===St.track.kind&&ye.senderTransforms.audio?pt=St.createEncodedAudioStreams():"video"===St.track.kind&&ye.senderTransforms.video&&(pt=St.createEncodedVideoStreams())),pt&&(console.log(pt),pt.readableStream&&pt.writableStream?pt.readableStream.pipeThrough(ye.senderTransforms[St.track.kind]).pipeTo(pt.writableStream):pt.readable&&pt.writable&&pt.readable.pipeThrough(ye.senderTransforms[St.track.kind]).pipeTo(pt.writable))}})}if(function E2(z){return m.debug("isDataEnabled:",z),"edge"===m.webRTCAdapter.browserDetails.browser?(m.warn("Edge doesn't support data channels yet"),!1):null!=z&&!0===z.data}(De)&&!ye.dataChannel[m.dataChanDefaultLabel]&&(m.log("Creating default data channel"),Ep(z,m.dataChanDefaultLabel,null,!1),ye.pc.ondatachannel=function(lt){m.log("Data channel created by Janus:",lt),Ep(z,lt.channel.label,lt.channel.protocol,lt.channel)}),ye.myStream){var yt=ye.myStream.getTracks();for(let lt in yt){var wn=yt[lt];wn.onended=function(St){m.log("Local track removed:",St);try{Ne.onlocaltrack(St.target,!1)}catch(pt){m.error(pt)}};try{Ne.onlocaltrack(wn,!0)}catch(St){m.error(St)}}}oe?ye.pc.setRemoteDescription(oe).then(function(){if(m.log("Remote description accepted!"),ye.remoteSdp=oe.sdp,ye.candidates&&ye.candidates.length>0){for(var lt=0;lt<ye.candidates.length;lt++){var St=ye.candidates[lt];m.debug("Adding remote candidate:",St),ye.pc.addIceCandidate(St&&!0!==St.completed?St:m.endOfCandidates)}ye.candidates=[]}!function _2(z,oe,De){(De=De||{}).success="function"==typeof De.success?De.success:m.noop,De.error="function"==typeof De.error?De.error:m.noop,De.customizeSdp="function"==typeof De.customizeSdp?De.customizeSdp:m.noop;var ge=dt[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),void De.error("Invalid handle");var q=ge.webrtcStuff,Ne=!0===De.simulcast||!0===De.simulcast2;m.log(Ne?"Creating answer (iceDone="+q.iceDone+", simulcast="+Ne+")":"Creating answer (iceDone="+q.iceDone+")");var ye=null;if(m.unifiedPlan){ye={};var Ge=null,Be=null,st=q.pc.getTransceivers();if(st&&st.length>0)for(var Ue of st)Ue.sender&&Ue.sender.track&&"audio"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"audio"===Ue.receiver.track.kind?Ge||(Ge=Ue):(Ue.sender&&Ue.sender.track&&"video"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"video"===Ue.receiver.track.kind)&&(Be||(Be=Ue));var ot=_r(oe),at=fl(oe);if(ot||at){if(ot&&at){if(Ge)try{Ge.setDirection?Ge.setDirection("sendrecv"):Ge.direction="sendrecv",m.log("Setting audio transceiver to sendrecv:",Ge)}catch(pt){m.error(pt)}}else if(ot&&!at)try{Ge&&(Ge.setDirection?Ge.setDirection("sendonly"):Ge.direction="sendonly",m.log("Setting audio transceiver to sendonly:",Ge))}catch(pt){m.error(pt)}else if(!ot&&at)if(Ge)try{Ge.setDirection?Ge.setDirection("recvonly"):Ge.direction="recvonly",m.log("Setting audio transceiver to recvonly:",Ge)}catch(pt){m.error(pt)}else Ge=q.pc.addTransceiver("audio",{direction:"recvonly"}),m.log("Adding recvonly audio transceiver:",Ge)}else if(oe.removeAudio&&Ge)try{Ge.setDirection?Ge.setDirection("inactive"):Ge.direction="inactive",m.log("Setting audio transceiver to inactive:",Ge)}catch(pt){m.error(pt)}var An=zr(oe),Lt=pl(oe);if(An||Lt){if(An&&Lt){if(Be)try{Be.setDirection?Be.setDirection("sendrecv"):Be.direction="sendrecv",m.log("Setting video transceiver to sendrecv:",Be)}catch(pt){m.error(pt)}}else if(An&&!Lt){if(Be)try{Be.setDirection?Be.setDirection("sendonly"):Be.direction="sendonly",m.log("Setting video transceiver to sendonly:",Be)}catch(pt){m.error(pt)}}else if(!An&&Lt)if(Be)try{Be.setDirection?Be.setDirection("recvonly"):Be.direction="recvonly",m.log("Setting video transceiver to recvonly:",Be)}catch(pt){m.error(pt)}else Be=q.pc.addTransceiver("video",{direction:"recvonly"}),m.log("Adding recvonly video transceiver:",Be)}else if(oe.removeVideo&&Be)try{Be.setDirection?Be.setDirection("inactive"):Be.direction="inactive",m.log("Setting video transceiver to inactive:",Be)}catch(pt){m.error(pt)}}else ye="firefox"===m.webRTCAdapter.browserDetails.browser||"edge"===m.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:fl(oe),offerToReceiveVideo:pl(oe)}:{mandatory:{OfferToReceiveAudio:fl(oe),OfferToReceiveVideo:pl(oe)}};m.debug(ye);var yt=zr(oe);if(yt&&Ne&&"firefox"===m.webRTCAdapter.browserDetails.browser){m.log("Enabling Simulcasting for Firefox (RID)");var wn=q.pc.getSenders()[1];m.log(wn);var lt=wn.getParameters();m.log(lt);var St=He(De.simulcastMaxBitrates);wn.setParameters({encodings:De.sendEncodings||[{rid:"h",active:!0,maxBitrate:St.high},{rid:"m",active:!0,maxBitrate:St.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:St.low,scaleResolutionDownBy:4}]})}q.pc.createAnswer(ye).then(function(pt){m.debug(pt);var Nt={type:pt.type,sdp:pt.sdp};De.customizeSdp(Nt),pt.sdp=Nt.sdp,m.log("Setting local description"),yt&&Ne&&!m.unifiedPlan&&"chrome"===m.webRTCAdapter.browserDetails.browser&&m.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"),q.mySdp={type:"answer",sdp:pt.sdp},q.pc.setLocalDescription(pt).catch(De.error),q.mediaConstraints=ye,q.iceDone||q.trickle?((q.senderTransforms||q.receiverTransforms)&&(pt.e2ee=!0),De.success(pt)):m.log("Waiting for all candidates...")},De.error)}(z,De,ge)},ge.error):function m2(z,oe,De){(De=De||{}).success="function"==typeof De.success?De.success:m.noop,De.error="function"==typeof De.error?De.error:m.noop,De.customizeSdp="function"==typeof De.customizeSdp?De.customizeSdp:m.noop;var ge=dt[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),void De.error("Invalid handle");var q=ge.webrtcStuff,Ne=!0===De.simulcast||!0===De.simulcast2;m.log(Ne?"Creating offer (iceDone="+q.iceDone+", simulcast="+Ne+")":"Creating offer (iceDone="+q.iceDone+")");var ye={};if(m.unifiedPlan){var Ge=null,Be=null,st=q.pc.getTransceivers();if(st&&st.length>0)for(var Ue of st)Ue.sender&&Ue.sender.track&&"audio"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"audio"===Ue.receiver.track.kind?Ge||(Ge=Ue):(Ue.sender&&Ue.sender.track&&"video"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"video"===Ue.receiver.track.kind)&&(Be||(Be=Ue));var ot=_r(oe),at=fl(oe);ot||at?ot&&at?Ge&&(Ge.setDirection?Ge.setDirection("sendrecv"):Ge.direction="sendrecv",m.log("Setting audio transceiver to sendrecv:",Ge)):ot&&!at?Ge&&(Ge.setDirection?Ge.setDirection("sendonly"):Ge.direction="sendonly",m.log("Setting audio transceiver to sendonly:",Ge)):!ot&&at&&(Ge?(Ge.setDirection?Ge.setDirection("recvonly"):Ge.direction="recvonly",m.log("Setting audio transceiver to recvonly:",Ge)):(Ge=q.pc.addTransceiver("audio",{direction:"recvonly"}),m.log("Adding recvonly audio transceiver:",Ge))):oe.removeAudio&&Ge&&(Ge.setDirection?Ge.setDirection("inactive"):Ge.direction="inactive",m.log("Setting audio transceiver to inactive:",Ge));var An=zr(oe),Lt=pl(oe);An||Lt?An&&Lt?Be&&(Be.setDirection?Be.setDirection("sendrecv"):Be.direction="sendrecv",m.log("Setting video transceiver to sendrecv:",Be)):An&&!Lt?Be&&(Be.setDirection?Be.setDirection("sendonly"):Be.direction="sendonly",m.log("Setting video transceiver to sendonly:",Be)):!An&&Lt&&(Be?(Be.setDirection?Be.setDirection("recvonly"):Be.direction="recvonly",m.log("Setting video transceiver to recvonly:",Be)):(Be=q.pc.addTransceiver("video",{direction:"recvonly"}),m.log("Adding recvonly video transceiver:",Be))):oe.removeVideo&&Be&&(Be.setDirection?Be.setDirection("inactive"):Be.direction="inactive",m.log("Setting video transceiver to inactive:",Be))}else ye.offerToReceiveAudio=fl(oe),ye.offerToReceiveVideo=pl(oe);!0===De.iceRestart&&(ye.iceRestart=!0),m.debug(ye);var wn=zr(oe);if(wn&&Ne&&"firefox"===m.webRTCAdapter.browserDetails.browser){m.log("Enabling Simulcasting for Firefox (RID)");var lt=q.pc.getSenders().find(function(Nt){return Nt.track&&"video"===Nt.track.kind});if(lt){var St=lt.getParameters();St||(St={});var pt=He(De.simulcastMaxBitrates);St.encodings=De.sendEncodings||[{rid:"h",active:!0,maxBitrate:pt.high},{rid:"m",active:!0,maxBitrate:pt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:pt.low,scaleResolutionDownBy:4}],lt.setParameters(St)}}q.pc.createOffer(ye).then(function(Nt){m.debug(Nt);var Qt={type:Nt.type,sdp:Nt.sdp};De.customizeSdp(Qt),Nt.sdp=Qt.sdp,m.log("Setting local description"),wn&&Ne&&!m.unifiedPlan&&("chrome"===m.webRTCAdapter.browserDetails.browser||"safari"===m.webRTCAdapter.browserDetails.browser)&&(m.log("Enabling Simulcasting for Chrome (SDP munging)"),Nt.sdp=function v2(z){var oe=z.split("\r\n"),De=!1,ge=[-1],q=[-1],Ne=null,ye=null,Ge=null,Be=null,st=-1;for(let yt=0;yt<oe.length;yt++){const wn=oe[yt].match(/m=(\w+) */);if(wn){if("video"===wn[1]){if(!(ge[0]<0)){st=yt;break}De=!0}else if(ge[0]>-1){st=yt;break}}else if(De){var Ue=oe[yt].match(/a=ssrc-group:SIM (\d+) (\d+) (\d+)/);if(Ue)return m.warn("The SDP already contains a SIM attribute, munging will be skipped"),z;var ot=oe[yt].match(/a=ssrc-group:FID (\d+) (\d+)/);if(ot){ge[0]=ot[1],q[0]=ot[2],oe.splice(yt,1),yt--;continue}if(ge[0]){var at=oe[yt].match("a=ssrc:"+ge[0]+" cname:(.+)");if(at&&(Ne=at[1]),at=oe[yt].match("a=ssrc:"+ge[0]+" msid:(.+)"),at&&(ye=at[1]),at=oe[yt].match("a=ssrc:"+ge[0]+" mslabel:(.+)"),at&&(Ge=at[1]),at=oe[yt].match("a=ssrc:"+ge[0]+" label:(.+)"),at&&(Be=at[1]),0===oe[yt].indexOf("a=ssrc:"+q[0])){oe.splice(yt,1),yt--;continue}if(0===oe[yt].indexOf("a=ssrc:"+ge[0])){oe.splice(yt,1),yt--;continue}}if(0==oe[yt].length){oe.splice(yt,1),yt--;continue}}}if(ge[0]<0){st=-1,De=!1;for(let yt=0;yt<oe.length;yt++){const wn=oe[yt].match(/m=(\w+) */);if(wn){if("video"===wn[1]){if(!(ge[0]<0)){st=yt;break}De=!0}else if(ge[0]>-1){st=yt;break}}else if(De){if(ge[0]<0){var An=oe[yt].match(/a=ssrc:(\d+)/);if(An){ge[0]=An[1],oe.splice(yt,1),yt--;continue}}else{let lt=oe[yt].match("a=ssrc:"+ge[0]+" cname:(.+)");if(lt&&(Ne=lt[1]),lt=oe[yt].match("a=ssrc:"+ge[0]+" msid:(.+)"),lt&&(ye=lt[1]),lt=oe[yt].match("a=ssrc:"+ge[0]+" mslabel:(.+)"),lt&&(Ge=lt[1]),lt=oe[yt].match("a=ssrc:"+ge[0]+" label:(.+)"),lt&&(Be=lt[1]),0===oe[yt].indexOf("a=ssrc:"+q[0])){oe.splice(yt,1),yt--;continue}if(0===oe[yt].indexOf("a=ssrc:"+ge[0])){oe.splice(yt,1),yt--;continue}}if(0===oe[yt].length){oe.splice(yt,1),yt--;continue}}}}if(ge[0]<0)return m.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),z;st<0&&(st=oe.length),ge[1]=Math.floor(4294967295*Math.random()),ge[2]=Math.floor(4294967295*Math.random()),q[1]=Math.floor(4294967295*Math.random()),q[2]=Math.floor(4294967295*Math.random());for(var Lt=0;Lt<ge.length;Lt++)Ne&&(oe.splice(st,0,"a=ssrc:"+ge[Lt]+" cname:"+Ne),st++),ye&&(oe.splice(st,0,"a=ssrc:"+ge[Lt]+" msid:"+ye),st++),Ge&&(oe.splice(st,0,"a=ssrc:"+ge[Lt]+" mslabel:"+Ge),st++),Be&&(oe.splice(st,0,"a=ssrc:"+ge[Lt]+" label:"+Be),st++),Ne&&(oe.splice(st,0,"a=ssrc:"+q[Lt]+" cname:"+Ne),st++),ye&&(oe.splice(st,0,"a=ssrc:"+q[Lt]+" msid:"+ye),st++),Ge&&(oe.splice(st,0,"a=ssrc:"+q[Lt]+" mslabel:"+Ge),st++),Be&&(oe.splice(st,0,"a=ssrc:"+q[Lt]+" label:"+Be),st++);return oe.splice(st,0,"a=ssrc-group:FID "+ge[2]+" "+q[2]),oe.splice(st,0,"a=ssrc-group:FID "+ge[1]+" "+q[1]),oe.splice(st,0,"a=ssrc-group:FID "+ge[0]+" "+q[0]),oe.splice(st,0,"a=ssrc-group:SIM "+ge[0]+" "+ge[1]+" "+ge[2]),(z=oe.join("\r\n")).endsWith("\r\n")||(z+="\r\n"),z}(Nt.sdp)),q.mySdp={type:"offer",sdp:Nt.sdp},q.pc.setLocalDescription(Nt).catch(De.error),q.mediaConstraints=ye,q.iceDone||q.trickle?((q.senderTransforms||q.receiverTransforms)&&(Nt.e2ee=!0),De.success(Nt)):m.log("Waiting for all candidates...")},De.error)}(z,De,ge)}function _u(z,oe,De){(De=De||{}).success="function"==typeof De.success?De.success:m.noop,De.error="function"==typeof De.error?De.error:gS;var ge=De.jsep;if(oe&&ge)return m.error("Provided a JSEP to a createOffer"),void De.error("Provided a JSEP to a createOffer");if(!(oe||ge&&ge.type&&ge.sdp))return m.error("A valid JSEP is required for createAnswer"),void De.error("A valid JSEP is required for createAnswer");De.media="object"==typeof De.media&&De.media?De.media:{audio:!0,video:!0};var q=De.media,Ne=dt[z];if(!Ne||!Ne.webrtcStuff)return m.warn("Invalid handle"),void De.error("Invalid handle");var ye=Ne.webrtcStuff;if(ye.trickle=function A2(z){return m.debug("isTrickleEnabled:",z),!1!==z}(De.trickle),ye.pc){if(m.log("Updating existing media session"),q.update=!0,De.stream)De.stream!==ye.myStream&&m.log("Renegotiation involves a new external stream");else{if(q.addAudio){if(q.keepAudio=!1,q.replaceAudio=!1,q.removeAudio=!1,q.audioSend=!0,ye.myStream&&ye.myStream.getAudioTracks()&&ye.myStream.getAudioTracks().length)return m.error("Can't add audio stream, there already is one"),void De.error("Can't add audio stream, there already is one")}else q.removeAudio?(q.keepAudio=!1,q.replaceAudio=!1,q.addAudio=!1,q.audioSend=!1):q.replaceAudio&&(q.keepAudio=!1,q.addAudio=!1,q.removeAudio=!1,q.audioSend=!0);if(ye.myStream&&ye.myStream.getAudioTracks()&&0!==ye.myStream.getAudioTracks().length?_r(q)&&!q.removeAudio&&!q.replaceAudio&&(q.keepAudio=!0):(q.replaceAudio&&(q.keepAudio=!1,q.replaceAudio=!1,q.addAudio=!0,q.audioSend=!0),_r(q)&&(q.keepAudio=!1,q.addAudio=!0)),q.addVideo){if(q.keepVideo=!1,q.replaceVideo=!1,q.removeVideo=!1,q.videoSend=!0,ye.myStream&&ye.myStream.getVideoTracks()&&ye.myStream.getVideoTracks().length)return m.error("Can't add video stream, there already is one"),void De.error("Can't add video stream, there already is one")}else q.removeVideo?(q.keepVideo=!1,q.replaceVideo=!1,q.addVideo=!1,q.videoSend=!1):q.replaceVideo&&(q.keepVideo=!1,q.addVideo=!1,q.removeVideo=!1,q.videoSend=!0);ye.myStream&&ye.myStream.getVideoTracks()&&0!==ye.myStream.getVideoTracks().length?zr(q)&&!q.removeVideo&&!q.replaceVideo&&(q.keepVideo=!0):(q.replaceVideo&&(q.keepVideo=!1,q.replaceVideo=!1,q.addVideo=!0,q.videoSend=!0),zr(q)&&(q.keepVideo=!1,q.addVideo=!0)),q.addData&&(q.data=!0)}if(_r(q)&&q.keepAudio&&zr(q)&&q.keepVideo)return Ne.consentDialog(!1),void ps(z,ge,q,De,ye.myStream)}else q.update=!1,q.keepAudio=!1,q.keepVideo=!1;if(q.update&&(!ye.streamExternal||ye.streamExternal&&(q.replaceAudio||q.replaceVideo))){if(q.removeAudio||q.replaceAudio){if(ye.myStream&&ye.myStream.getAudioTracks()&&ye.myStream.getAudioTracks().length){var Ge=ye.myStream.getAudioTracks()[0];m.log("Removing audio track:",Ge),ye.myStream.removeTrack(Ge);try{Ne.onlocaltrack(Ge,!1)}catch(ln){m.error(ln)}try{Ge.stop()}catch(ln){}}if(ye.pc.getSenders()&&ye.pc.getSenders().length){var Be=!0;if(q.replaceAudio&&m.unifiedPlan&&(Be=!1),Be)for(var st of ye.pc.getSenders())st&&st.track&&"audio"===st.track.kind&&(m.log("Removing audio sender:",st),ye.pc.removeTrack(st))}}if(q.removeVideo||q.replaceVideo){if(ye.myStream&&ye.myStream.getVideoTracks()&&ye.myStream.getVideoTracks().length){var Ue=ye.myStream.getVideoTracks()[0];m.log("Removing video track:",Ue),ye.myStream.removeTrack(Ue);try{Ne.onlocaltrack(Ue,!1)}catch(ln){m.error(ln)}try{Ue.stop()}catch(ln){}}if(ye.pc.getSenders()&&ye.pc.getSenders().length){var ot=!0;if(q.replaceVideo&&m.unifiedPlan&&(ot=!1),ot)for(var at of ye.pc.getSenders())at&&at.track&&"video"===at.track.kind&&(m.log("Removing video sender:",at),ye.pc.removeTrack(at))}}}if(De.stream){var An=De.stream;return m.log("MediaStream provided by the application"),m.debug(An),q.update&&ye.myStream&&ye.myStream!==De.stream&&!ye.streamExternal&&!q.replaceAudio&&!q.replaceVideo&&(m.stopAllTracks(ye.myStream),ye.myStream=null),ye.streamExternal=!0,Ne.consentDialog(!1),void ps(z,ge,q,De,An)}if(_r(q)||zr(q)){if(!m.isGetUserMediaAvailable())return void De.error("getUserMedia not available");var Lt={mandatory:{},optional:[]};Ne.consentDialog(!0);var yt=_r(q);yt&&q&&"object"==typeof q.audio&&(yt=q.audio);var wn=zr(q);if(wn&&q)if((!0===De.simulcast||!0===De.simulcast2||De.svc)&&!ge&&!q.video&&(q.video="hires"),q.video&&"screen"!=q.video&&"window"!=q.video)if("object"==typeof q.video)wn=q.video;else{var pt=0,Nt=0;"lowres"===q.video?(Nt=240,pt=320):"lowres-16:9"===q.video?(Nt=180,pt=320):"hires"===q.video||"hires-16:9"===q.video||"hdres"===q.video?(Nt=720,pt=1280):"fhdres"===q.video?(Nt=1080,pt=1920):"4kres"===q.video?(Nt=2160,pt=3840):"stdres"===q.video?(Nt=480,pt=640):"stdres-16:9"===q.video?(Nt=360,pt=640):(m.log("Default video setting is stdres 4:3"),Nt=480,pt=640),m.log("Adding media constraint:",q.video),m.log("Adding video constraint:",wn={height:{ideal:Nt},width:{ideal:pt}})}else if("screen"===q.video||"window"===q.video){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return Lt.video={},q.screenshareFrameRate&&(Lt.video.frameRate=q.screenshareFrameRate),q.screenshareHeight&&(Lt.video.height=q.screenshareHeight),q.screenshareWidth&&(Lt.video.width=q.screenshareWidth),Lt.audio=q.captureDesktopAudio,void navigator.mediaDevices.getDisplayMedia(Lt).then(function(xn){Ne.consentDialog(!1),_r(q)&&!q.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(In){xn.addTrack(In.getAudioTracks()[0]),ps(z,ge,q,De,xn)}):ps(z,ge,q,De,xn)},function(xn){Ne.consentDialog(!1),De.error(xn)});const ln=function(xn,In){Ne.consentDialog(!1),xn?De.error(xn):ps(z,ge,q,De,In)},qo=function(xn,In,Gs){m.log("Adding media constraint (screen capture)"),m.debug(xn),navigator.mediaDevices.getUserMedia(xn).then(function(ci){Gs?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(vu){ci.addTrack(vu.getAudioTracks()[0]),In(null,ci)}):In(null,ci)}).catch(function(ci){Ne.consentDialog(!1),In(ci)})};if("chrome"===m.webRTCAdapter.browserDetails.browser){var Qt=m.webRTCAdapter.browserDetails.version,li=33;window.navigator.userAgent.match("Linux")&&(li=35),Qt>=26&&Qt<=li?(Lt={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:q.screenshareFrameRate,maxFrameRate:q.screenshareFrameRate,chromeMediaSource:"screen"}},audio:_r(q)&&!q.keepAudio},qo(Lt,ln)):m.extension.getScreen(function(xn,In){if(xn)return Ne.consentDialog(!1),De.error(xn);(Lt={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:q.screenshareFrameRate,maxFrameRate:q.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=In,qo(Lt,ln,_r(q)&&!q.keepAudio)})}else if("firefox"===m.webRTCAdapter.browserDetails.browser){if(!(m.webRTCAdapter.browserDetails.version>=33)){var ms=new Error("NavigatorUserMediaError");return ms.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",Ne.consentDialog(!1),void De.error(ms)}Lt={video:{mozMediaSource:q.video,mediaSource:q.video},audio:_r(q)&&!q.keepAudio},qo(Lt,function(xn,In){if(ln(xn,In),!xn)var Gs=In.currentTime,ci=window.setInterval(function(){In||window.clearInterval(ci),In.currentTime==Gs&&(window.clearInterval(ci),In.onended&&In.onended()),Gs=In.currentTime},500)})}return}(!q||"screen"!==q.video)&&navigator.mediaDevices.enumerateDevices().then(function(ln){var qo=ln.some(function(Ki){return"audioinput"===Ki.kind}),xn=function S2(z){if(m.debug("isScreenSendEnabled:",z),!z||"object"!=typeof z.video||"object"!=typeof z.video.mandatory)return!1;var oe=z.video.mandatory;return oe.chromeMediaSource?"desktop"===oe.chromeMediaSource||"screen"===oe.chromeMediaSource:oe.mozMediaSource?"window"===oe.mozMediaSource||"screen"===oe.mozMediaSource:!!oe.mediaSource&&("window"===oe.mediaSource||"screen"===oe.mediaSource)}(q)||ln.some(function(Ki){return"videoinput"===Ki.kind}),In=_r(q),Gs=zr(q),ci=function b2(z){return m.debug("isAudioSendRequired:",z),!(!z||!1===z.audio||!1===z.audioSend||null==z.failIfNoAudio)&&!0===z.failIfNoAudio}(q),vu=function C2(z){return m.debug("isVideoSendRequired:",z),!(!z||!1===z.video||!1===z.videoSend||null==z.failIfNoVideo)&&!0===z.failIfNoVideo}(q);if(In||Gs||ci||vu){var mS=!!In&&qo,_S=!!Gs&&xn;if(!mS&&!_S)return Ne.consentDialog(!1),De.error("No capture device found"),!1;if(!mS&&ci)return Ne.consentDialog(!1),De.error("Audio capture is required, but no capture device found"),!1;if(!_S&&vu)return Ne.consentDialog(!1),De.error("Video capture is required, but no capture device found"),!1}var bu={audio:!(!qo||q.keepAudio)&&yt,video:!(!xn||q.keepVideo)&&wn};m.debug("getUserMedia constraints",bu),bu.audio||bu.video?navigator.mediaDevices.getUserMedia(bu).then(function(Ki){Ne.consentDialog(!1),ps(z,ge,q,De,Ki)}).catch(function(Ki){Ne.consentDialog(!1),De.error({code:Ki.code,name:Ki.name,message:Ki.message})}):(Ne.consentDialog(!1),ps(z,ge,q,De,An))}).catch(function(ln){Ne.consentDialog(!1),De.error(ln)})}else ps(z,ge,q,De)}function fS(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:gS,oe.customizeSdp="function"==typeof oe.customizeSdp?oe.customizeSdp:m.noop;var De=oe.jsep,ge=dt[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var q=ge.webrtcStuff;if(De){if(!q.pc)return m.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void oe.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");oe.customizeSdp(De),q.pc.setRemoteDescription(De).then(function(){if(m.log("Remote description accepted!"),q.remoteSdp=De.sdp,q.candidates&&q.candidates.length>0){for(var Ne=0;Ne<q.candidates.length;Ne++){var ye=q.candidates[Ne];m.debug("Adding remote candidate:",ye),q.pc.addIceCandidate(ye&&!0!==ye.completed?ye:m.endOfCandidates)}q.candidates=[]}oe.success()},oe.error)}else oe.error("Invalid JSEP")}function Wo(z,oe,De,ge){ge="function"==typeof ge?ge:m.noop;var q=dt[z];if(!q||!q.webrtcStuff)return m.warn("Invalid handle"),void ge(0);var Ne=De?"remote":"local",ye=q.webrtcStuff;if(ye.volume[Ne]||(ye.volume[Ne]={value:0}),!ye.pc.getStats||"chrome"!==m.webRTCAdapter.browserDetails.browser&&"safari"!==m.webRTCAdapter.browserDetails.browser)return m.warn("Getting the "+Ne+" volume unsupported by browser"),void ge(0);if(De&&!ye.remoteStream)return m.warn("Remote stream unavailable"),void ge(0);if(!De&&!ye.myStream)return m.warn("Local stream unavailable"),void ge(0);var Ge=ye.pc;if(oe&&m.unifiedPlan){var Be=ye.pc.getTransceivers().find(st=>st.mid===oe&&"audio"===st.receiver.track.kind);if(!Be)return m.warn("No audio transceiver with mid "+oe),void ge(0);if(De&&!Be.receiver)return m.warn("Remote transceiver track unavailable"),void ge(0);if(!De&&!Be.sender)return m.warn("Local transceiver track unavailable"),void ge(0);Ge=De?Be.receiver:Be.sender}return Ge.getStats().then(function(st){st.forEach(function(Ue){!Ue||"audio"!==Ue.kind||De&&!Ue.remoteSource||!De&&"media-source"!==Ue.type||ge(Ue.audioLevel?Ue.audioLevel:0)})}),ye.volume[Ne].value}function yu(z,oe,De){var ge=dt[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),!0;var q=ge.webrtcStuff;if(!q.pc)return m.warn("Invalid PeerConnection"),!0;if(!q.myStream)return m.warn("Invalid local MediaStream"),!0;if(De){if(!q.myStream.getVideoTracks()||0===q.myStream.getVideoTracks().length)return m.warn("No video track"),!0;if(oe&&m.unifiedPlan){let Ne=q.pc.getTransceivers().find(ye=>ye.mid===oe&&"video"===ye.receiver.track.kind);return Ne?Ne.sender&&Ne.sender.track?!Ne.sender.track.enabled:(m.warn("No video sender with mid "+oe),!0):(m.warn("No video transceiver with mid "+oe),!0)}return!q.myStream.getVideoTracks()[0].enabled}if(!q.myStream.getAudioTracks()||0===q.myStream.getAudioTracks().length)return m.warn("No audio track"),!0;if(oe&&m.unifiedPlan){let Ne=q.pc.getTransceivers().find(ye=>ye.mid===oe&&"audio"===ye.receiver.track.kind);return Ne?Ne.sender&&Ne.sender.track?!Ne.sender.track.enabled:(m.warn("No audio sender with mid "+oe),!0):(m.warn("No audio transceiver with mid "+oe),!0)}return!q.myStream.getAudioTracks()[0].enabled}function gs(z,oe,De,ge){var q=dt[z];if(!q||!q.webrtcStuff)return m.warn("Invalid handle"),!1;var Ne=q.webrtcStuff;if(!Ne.pc)return m.warn("Invalid PeerConnection"),!1;if(!Ne.myStream)return m.warn("Invalid local MediaStream"),!1;if(De){if(!Ne.myStream.getVideoTracks()||0===Ne.myStream.getVideoTracks().length)return m.warn("No video track"),!1;if(oe&&m.unifiedPlan){let ye=Ne.pc.getTransceivers().find(Ge=>Ge.mid===oe&&"video"===Ge.receiver.track.kind);if(!ye)return m.warn("No video transceiver with mid "+oe),!1;if(!ye.sender||!ye.sender.track)return m.warn("No video sender with mid "+oe),!1;ye.sender.track.enabled=!ge}else Ne.myStream.getVideoTracks()[0].enabled=!ge}else{if(!Ne.myStream.getAudioTracks()||0===Ne.myStream.getAudioTracks().length)return m.warn("No audio track"),!1;if(oe&&m.unifiedPlan){let ye=Ne.pc.getTransceivers().find(Ge=>Ge.mid===oe&&"audio"===Ge.receiver.track.kind);if(!ye)return m.warn("No audio transceiver with mid "+oe),!1;if(!ye.sender||!ye.sender.track)return m.warn("No audio sender with mid "+oe),!1;ye.sender.track.enabled=!ge}else Ne.myStream.getAudioTracks()[0].enabled=!ge}return!0}function pS(z,oe){var De=dt[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),"Invalid handle";var ge=De.webrtcStuff;if(!ge.pc)return"Invalid PeerConnection";if(ge.pc.getStats){var q=ge.pc,Ne=oe||"default";if(oe&&m.unifiedPlan){var ye=ge.pc.getTransceivers().find(Ge=>Ge.mid===oe&&"video"===Ge.receiver.track.kind);if(!ye)return m.warn("No video transceiver with mid "+oe),"No video transceiver with mid "+oe;if(!ye.receiver)return m.warn("No video receiver with mid "+oe),"No video receiver with mid "+oe;q=ye.receiver}return ge.bitrate[Ne]||(ge.bitrate[Ne]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),ge.bitrate[Ne].timer?ge.bitrate[Ne].value:(m.log("Starting bitrate timer"+(oe?" for mid "+oe:"")+" (via getStats)"),ge.bitrate[Ne].timer=setInterval(function(){q.getStats().then(function(Ge){Ge.forEach(function(Be){if(Be){var st=!1;if((("video"===Be.mediaType||Be.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===Be.type&&Be.id.indexOf("rtcp")<0||"ssrc"==Be.type&&Be.bytesReceived&&("VP8"===Be.googCodecName||""===Be.googCodecName))&&(st=!0),st)if(ge.bitrate[Ne].bsnow=Be.bytesReceived,ge.bitrate[Ne].tsnow=Be.timestamp,null===ge.bitrate[Ne].bsbefore||null===ge.bitrate[Ne].tsbefore)ge.bitrate[Ne].bsbefore=ge.bitrate[Ne].bsnow,ge.bitrate[Ne].tsbefore=ge.bitrate[Ne].tsnow;else{var Ue=ge.bitrate[Ne].tsnow-ge.bitrate[Ne].tsbefore;"safari"===m.webRTCAdapter.browserDetails.browser&&(Ue/=1e3);var ot=Math.round(8*(ge.bitrate[Ne].bsnow-ge.bitrate[Ne].bsbefore)/Ue);"safari"===m.webRTCAdapter.browserDetails.browser&&(ot=parseInt(ot/1e3)),ge.bitrate[Ne].value=ot+" kbits/sec",ge.bitrate[Ne].bsbefore=ge.bitrate[Ne].bsnow,ge.bitrate[Ne].tsbefore=ge.bitrate[Ne].tsnow}}})})},1e3),"0 kbits/sec")}return m.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function gS(z){m.error("WebRTC error:",z)}function wp(z,oe){m.log("Cleaning WebRTC stuff");var De=dt[z];if(De){var ge=De.webrtcStuff;if(ge){if(!0===oe){var q={janus:"hangup",transaction:m.randomString(12)};De.token&&(q.token=De.token),Le&&(q.apisecret=Le),m.debug("Sending hangup request (handle="+z+"):"),m.debug(q),e?(q.session_id=rt,q.handle_id=z,t.send(JSON.stringify(q))):m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:G,body:q})}for(var Ne in ge.remoteStream=null,ge.volume&&(ge.volume.local&&ge.volume.local.timer&&clearInterval(ge.volume.local.timer),ge.volume.remote&&ge.volume.remote.timer&&clearInterval(ge.volume.remote.timer)),ge.bitrate)ge.bitrate[Ne].timer&&clearInterval(ge.bitrate[Ne].timer);ge.bitrate={},!ge.streamExternal&&ge.myStream&&(m.log("Stopping local stream tracks"),m.stopAllTracks(ge.myStream)),ge.streamExternal=!1,ge.myStream=null;try{ge.pc.close()}catch(ye){}ge.pc=null,ge.candidates=null,ge.mySdp=null,ge.remoteSdp=null,ge.iceDone=!1,ge.dataChannel={},ge.dtmfSender=null,ge.senderTransforms=null,ge.receiverTransforms=null}De.oncleanup()}}function _r(z){return m.debug("isAudioSendEnabled:",z),!z||!1!==z.audio&&(null==z.audioSend||!0===z.audioSend)}function fl(z){return m.debug("isAudioRecvEnabled:",z),!z||!1!==z.audio&&(null==z.audioRecv||!0===z.audioRecv)}function zr(z){return m.debug("isVideoSendEnabled:",z),!z||!1!==z.video&&(null==z.videoSend||!0===z.videoSend)}function pl(z){return m.debug("isVideoRecvEnabled:",z),!z||!1!==z.video&&(null==z.videoRecv||!0===z.videoRecv)}fs(n),this.getServer=function(){return a},this.isConnected=function(){return nt},this.reconnect=function(z){(z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop,z.reconnect=!0,fs(z)},this.getSessionId=function(){return rt},this.getInfo=function(z){!function ul(z){if((z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop,m.log("Getting info on Janus instance"),!nt)return m.warn("Is the server down? (connected=false)"),void z.error("Is the server down? (connected=false)");var oe=m.randomString(12),De={janus:"info",transaction:oe};if(Ee&&(De.token=Ee),Le&&(De.apisecret=Le),e)return En[oe]=function(ge){m.log("Server info:"),m.debug(ge),"server_info"!==ge.janus&&m.error("Ooops: "+ge.error.code+" "+ge.error.reason),z.success(ge)},void t.send(JSON.stringify(De));m.httpAPICall(a,{verb:"POST",withCredentials:G,body:De,success:function(ge){m.log("Server info:"),m.debug(ge),"server_info"!==ge.janus&&m.error("Ooops: "+ge.error.code+" "+ge.error.reason),z.success(ge)},error:function(ge,q){m.error(ge+":",q),z.error(""===q?ge+": Is the server down?":ge+": "+q)}})}(z)},this.destroy=function(z){!function dl(z){(z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop;var oe=!0===z.unload,De=!0;null!=z.notifyDestroyed&&(De=!0===z.notifyDestroyed);var ge=!0===z.cleanupHandles;if(m.log("Destroying session "+rt+" (unload="+oe+")"),!rt)return m.warn("No session to destroy"),z.success(),void(De&&n.destroyed());if(ge)for(var q in dt)Ap(q,{noRequest:!0});if(!nt)return m.warn("Is the server down? (connected=false)"),rt=null,void z.success();var Ne={janus:"destroy",transaction:m.randomString(12)};if(Ee&&(Ne.token=Ee),Le&&(Ne.apisecret=Le),oe)return e?(t.onclose=null,t.close(),t=null):navigator.sendBeacon(a+"/"+rt,JSON.stringify(Ne)),m.log("Destroyed session:"),rt=null,nt=!1,z.success(),void(De&&n.destroyed());if(e){Ne.session_id=rt;var ye=function(){for(var st in r)t.removeEventListener(st,r[st]);t.removeEventListener("message",Ge),t.removeEventListener("error",Be),i&&clearTimeout(i),t.close()},Ge=function(st){var Ue=JSON.parse(st.data);Ue.session_id==Ne.session_id&&Ue.transaction==Ne.transaction&&(ye(),z.success(),De&&n.destroyed())},Be=function(){ye(),z.error("Failed to destroy the server: Is the server down?"),De&&n.destroyed()};return t.addEventListener("message",Ge),t.addEventListener("error",Be),void(1===t.readyState?t.send(JSON.stringify(Ne)):Be())}m.httpAPICall(a+"/"+rt,{verb:"POST",withCredentials:G,body:Ne,success:function(st){m.log("Destroyed session:"),m.debug(st),rt=null,nt=!1,"success"!==st.janus&&m.error("Ooops: "+st.error.code+" "+st.error.reason),z.success(),De&&n.destroyed()},error:function(st,Ue){m.error(st+":",Ue),rt=null,nt=!1,z.success(),De&&n.destroyed()}})}(z)},this.attach=function(z){!function hl(z){if((z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop,z.dataChannelOptions=z.dataChannelOptions||{ordered:!0},z.consentDialog="function"==typeof z.consentDialog?z.consentDialog:m.noop,z.iceState="function"==typeof z.iceState?z.iceState:m.noop,z.mediaState="function"==typeof z.mediaState?z.mediaState:m.noop,z.webrtcState="function"==typeof z.webrtcState?z.webrtcState:m.noop,z.slowLink="function"==typeof z.slowLink?z.slowLink:m.noop,z.onmessage="function"==typeof z.onmessage?z.onmessage:m.noop,z.onlocaltrack="function"==typeof z.onlocaltrack?z.onlocaltrack:m.noop,z.onremotetrack="function"==typeof z.onremotetrack?z.onremotetrack:m.noop,z.ondata="function"==typeof z.ondata?z.ondata:m.noop,z.ondataopen="function"==typeof z.ondataopen?z.ondataopen:m.noop,z.oncleanup="function"==typeof z.oncleanup?z.oncleanup:m.noop,z.ondetached="function"==typeof z.ondetached?z.ondetached:m.noop,!nt)return m.warn("Is the server down? (connected=false)"),void z.error("Is the server down? (connected=false)");var oe=z.plugin;if(!oe)return m.error("Invalid plugin"),void z.error("Invalid plugin");var De=z.opaqueId,ge=z.loopIndex,q=z.token?z.token:Ee,Ne=m.randomString(12),ye={janus:"attach",plugin:oe,opaque_id:De,loop_index:ge,transaction:Ne};if(q&&(ye.token=q),Le&&(ye.apisecret=Le),e)return En[Ne]=function(Ge){if(m.debug(Ge),"success"!==Ge.janus)return m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),void z.error("Ooops: "+Ge.error.code+" "+Ge.error.reason);var Be=Ge.data.id;m.log("Created handle: "+Be);var st={session:Sn,plugin:oe,id:Be,token:q,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:z.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return Be},getPlugin:function(){return oe},getVolume:function(Ue,ot){return Wo(Be,Ue,!0,ot)},getRemoteVolume:function(Ue,ot){return Wo(Be,Ue,!0,ot)},getLocalVolume:function(Ue,ot){return Wo(Be,Ue,!1,ot)},isAudioMuted:function(Ue){return yu(Be,Ue,!1)},muteAudio:function(Ue){return gs(Be,Ue,!1,!0)},unmuteAudio:function(Ue){return gs(Be,Ue,!1,!1)},isVideoMuted:function(Ue){return yu(Be,Ue,!0)},muteVideo:function(Ue){return gs(Be,Ue,!0,!0)},unmuteVideo:function(Ue){return gs(Be,Ue,!0,!1)},getBitrate:function(Ue){return pS(Be,Ue)},send:function(Ue){zo(Be,Ue)},data:function(Ue){dS(Be,Ue)},dtmf:function(Ue){hS(Be,Ue)},consentDialog:z.consentDialog,iceState:z.iceState,mediaState:z.mediaState,webrtcState:z.webrtcState,slowLink:z.slowLink,onmessage:z.onmessage,createOffer:function(Ue){_u(Be,!0,Ue)},createAnswer:function(Ue){_u(Be,!1,Ue)},handleRemoteJsep:function(Ue){fS(Be,Ue)},onlocaltrack:z.onlocaltrack,onremotetrack:z.onremotetrack,ondata:z.ondata,ondataopen:z.ondataopen,oncleanup:z.oncleanup,ondetached:z.ondetached,hangup:function(Ue){wp(Be,!0===Ue)},detach:function(Ue){Ap(Be,Ue)}};dt[Be]=st,z.success(st)},ye.session_id=rt,void t.send(JSON.stringify(ye));m.httpAPICall(a+"/"+rt,{verb:"POST",withCredentials:G,body:ye,success:function(Ge){if(m.debug(Ge),"success"!==Ge.janus)return m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),void z.error("Ooops: "+Ge.error.code+" "+Ge.error.reason);var Be=Ge.data.id;m.log("Created handle: "+Be);var st={session:Sn,plugin:oe,id:Be,token:q,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:z.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return Be},getPlugin:function(){return oe},getVolume:function(Ue,ot){return Wo(Be,Ue,!0,ot)},getRemoteVolume:function(Ue,ot){return Wo(Be,Ue,!0,ot)},getLocalVolume:function(Ue,ot){return Wo(Be,Ue,!1,ot)},isAudioMuted:function(Ue){return yu(Be,Ue,!1)},muteAudio:function(Ue){return gs(Be,Ue,!1,!0)},unmuteAudio:function(Ue){return gs(Be,Ue,!1,!1)},isVideoMuted:function(Ue){return yu(Be,Ue,!0)},muteVideo:function(Ue){return gs(Be,Ue,!0,!0)},unmuteVideo:function(Ue){return gs(Be,Ue,!0,!1)},getBitrate:function(Ue){return pS(Be,Ue)},send:function(Ue){zo(Be,Ue)},data:function(Ue){dS(Be,Ue)},dtmf:function(Ue){hS(Be,Ue)},consentDialog:z.consentDialog,iceState:z.iceState,mediaState:z.mediaState,webrtcState:z.webrtcState,slowLink:z.slowLink,onmessage:z.onmessage,createOffer:function(Ue){_u(Be,!0,Ue)},createAnswer:function(Ue){_u(Be,!1,Ue)},handleRemoteJsep:function(Ue){fS(Be,Ue)},onlocaltrack:z.onlocaltrack,onremotetrack:z.onremotetrack,ondata:z.ondata,ondataopen:z.ondataopen,oncleanup:z.oncleanup,ondetached:z.ondetached,hangup:function(Ue){wp(Be,!0===Ue)},detach:function(Ue){Ap(Be,Ue)}};dt[Be]=st,z.success(st)},error:function(Ge,Be){m.error(Ge+":",Be),z.error(""===Be?Ge+": Is the server down?":Ge+": "+Be)}})}(z)}}m.useDefaultDependencies=function(n){var e=n&&n.fetch||fetch,t=n&&n.Promise||Promise,r=n&&n.WebSocket||WebSocket;return{newWebSocket:function(i,s){return new r(i,s)},extension:n&&n.extension||kC,isArray:function(i){return Array.isArray(i)},webRTCAdapter:n&&n.adapter||RC,httpAPICall:function(i,s){var o={method:s.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===s.verb&&(o.headers["Content-Type"]="application/json"),void 0!==s.withCredentials&&(o.credentials=!0===s.withCredentials?"include":s.withCredentials?s.withCredentials:"omit"),s.body&&(o.body=JSON.stringify(s.body));var a=e(i,o).catch(function(c){return t.reject({message:"Probably a network error, is the server down?",error:c})});if(s.timeout){var l=new t(function(c,f){var w=setTimeout(function(){return clearTimeout(w),f({message:"Request timed out",timeout:s.timeout})},s.timeout)});a=t.race([a,l])}return a.then(function(c){return c.ok?typeof s.success==typeof m.noop?c.json().then(function(f){try{s.success(f)}catch(w){m.error("Unhandled httpAPICall success callback error",w)}},function(f){return t.reject({message:"Failed to parse response body",error:f,response:c})}):void 0:t.reject({message:"API call failed",response:c})}).catch(function(c){typeof s.error==typeof m.noop&&s.error(c.message||"<< internal error >>",c)}),a}}},m.useOldDependencies=function(n){var e=n&&n.jQuery||jQuery,t=n&&n.WebSocket||WebSocket;return{newWebSocket:function(r,i){return new t(r,i)},isArray:function(r){return e.isArray(r)},extension:n&&n.extension||kC,webRTCAdapter:n&&n.adapter||RC,httpAPICall:function(r,i){var s=void 0!==i.body?{contentType:"application/json",data:JSON.stringify(i.body)}:{};return e.ajax(e.extend(s,void 0!==i.withCredentials?{xhrFields:{withCredentials:i.withCredentials}}:{},{url:r,type:i.verb,cache:!1,dataType:"json",async:i.async,timeout:i.timeout,success:function(a){typeof i.success==typeof m.noop&&i.success(a)},error:function(a,l,c){typeof i.error==typeof m.noop&&i.error(l,c)}}))}}},m.noop=function(){},m.dataChanDefaultLabel="JanusDataChannel",m.endOfCandidates=null,m.stopAllTracks=function(n){try{var e=n.getTracks();for(var t of e)m.log(t),t&&t.stop()}catch(r){}},m.init=function(n){if((n=n||{}).callback="function"==typeof n.callback?n.callback:m.noop,m.initDone)n.callback();else{if(void 0===console.log&&(console.log=function(){}),m.trace=m.noop,m.debug=m.noop,m.vdebug=m.noop,m.log=m.noop,m.warn=m.noop,m.error=m.noop,!0===n.debug||"all"===n.debug)m.trace=console.trace.bind(console),m.debug=console.debug.bind(console),m.vdebug=console.debug.bind(console),m.log=console.log.bind(console),m.warn=console.warn.bind(console),m.error=console.error.bind(console);else if(Array.isArray(n.debug))for(var e of n.debug)switch(e){case"trace":m.trace=console.trace.bind(console);break;case"debug":m.debug=console.debug.bind(console);break;case"vdebug":m.vdebug=console.debug.bind(console);break;case"log":m.log=console.log.bind(console);break;case"warn":m.warn=console.warn.bind(console);break;case"error":m.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+e+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}m.log("Initializing library");var t=n.dependencies||m.useDefaultDependencies();m.isArray=t.isArray,m.webRTCAdapter=t.webRTCAdapter,m.httpAPICall=t.httpAPICall,m.newWebSocket=t.newWebSocket,(m.extension=t.extension).init(),m.listDevices=function(c,f){c="function"==typeof c?c:m.noop,null==f&&(f={audio:!0,video:!0}),m.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(f).then(function(w){navigator.mediaDevices.enumerateDevices().then(function(G){m.debug(G),c(G),m.stopAllTracks(w)})}).catch(function(w){m.error(w),c([])}):(m.warn("navigator.mediaDevices unavailable"),c([]))},m.attachMediaStream=function(c,f){try{c.srcObject=f}catch(w){try{c.src=URL.createObjectURL(f)}catch(G){m.error("Error attaching stream to element")}}},m.reattachMediaStream=function(c,f){try{c.srcObject=f.srcObject}catch(w){try{c.src=f.src}catch(G){m.error("Error reattaching stream to element")}}};var i=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",s=window["on"+i];if(window.addEventListener(i,function(){for(var c in m.log("Closing window"),m.sessions)m.sessions[c]&&m.sessions[c].destroyOnUnload&&(m.log("Destroying session "+c),m.sessions[c].destroy({unload:!0,notifyDestroyed:!1}));s&&"function"==typeof s&&s()}),m.safariVp8=!1,"safari"===m.webRTCAdapter.browserDetails.browser&&m.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var o of RTCRtpSender.getCapabilities("video").codecs)if(o&&o.mimeType&&"video/vp8"===o.mimeType.toLowerCase()){m.safariVp8=!0;break}m.safariVp8?m.log("This version of Safari supports VP8"):m.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var a=new RTCPeerConnection({});a.createOffer({offerToReceiveVideo:!0}).then(function(c){(m.safariVp8=-1!==c.sdp.indexOf("VP8"))?m.log("This version of Safari supports VP8"):m.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),a.close(),a=null})}if(m.unifiedPlan=!1,"firefox"===m.webRTCAdapter.browserDetails.browser&&m.webRTCAdapter.browserDetails.version>=59)m.unifiedPlan=!0;else if("chrome"===m.webRTCAdapter.browserDetails.browser&&m.webRTCAdapter.browserDetails.version>=72)m.unifiedPlan=!0;else if(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype){var l=new RTCPeerConnection;try{l.addTransceiver("audio"),m.unifiedPlan=!0}catch(c){}l.close()}else m.unifiedPlan=!1;m.initDone=!0,n.callback()}},m.isWebrtcSupported=function(){return!!window.RTCPeerConnection},m.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},m.randomString=function(n){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",r=0;r<n;r++){var i=Math.floor(Math.random()*e.length);t+=e.substring(i,i+1)}return t};var FL=X(164);let fp,sl=(()=>{class n{constructor(t){this.ngZone=t,this.serverUrl=("localhost"===window.location.hostname?"http://":"https://")+window.location.hostname+("localhost"===window.location.hostname?":8088":":8099")+"/janus",this.subscriberJanusHandle=null,this.screensharingIsActive=!1,this.myScreenshareIsActive=!1,this.feedStreams={},this.localTracks={},this.isMuted=!1,this.isVideoMuted=!1,this.isCurrentlyCreatingASubscription=!1,this.subscriptions={},this.feeds={},this.remoteTracks={},this.simulcastStarted={},this.mids={},this.slots={},this.subStreams={},this.audioDevices={},this.videoDevices={},this.currentlyChosenOverrideAudioDeviceId="",this.currentlyChosenOverrideVideoDeviceId="",this.talkingFeeds={},this.talkingFeedsSubject=new E,this.screenshareStateSubject=new E,this.doSimulcast=!1,this.subscriberMode=!1,this.locallyMutedRemoteAudioFeeds={},this.initDeviceList=r=>{this.audioDevices={},this.videoDevices={};for(const i of r){let s=i.label;(!s||""===s)&&(s=i.deviceId),console.log("Device found: ",s,i),"audioinput"===i.kind?(this.audioDevices[i.deviceId]=s,console.log("audio devices",this.audioDevices)):"videoinput"===i.kind&&(this.videoDevices[i.deviceId]=s)}},this.opaqueId="course-"+m.randomString(12),this.myUsername=m.randomString(12),window.janusService=this}setUsername(t){t&&""!==t&&(this.myUsername=t,console.log("(JanusService) Set username to ",this.myUsername))}start(){this.isCurrentlyCreatingASubscription=!1,this.subscriptions={},this.feeds={},this.remoteTracks={},this.simulcastStarted={},this.mids={},this.slots={},this.subStreams={},this.subscriberJanusHandle=null,this.publisherJanusHandle=null,this.screenshareJanusHandle=null,this.janus=null,m.init({debug:"all",callback:()=>{console.log("Does browser support webrtc?"),m.isWebrtcSupported()?(console.log("WebRTC is supported."),this.createSession()):console.error("No WebRTC support...")}})}end(){this.unpublishOwnFeed();for(const[t,r]of Object.entries(this.feedStreams))this.unsubscribeFrom(t);this.publisherJanusHandle.hangup(),this.screenshareJanusHandle&&this.screenshareJanusHandle.hangup(),this.subscriberJanusHandle&&this.subscriberJanusHandle.hangup(),this.janus.destroy()}createSession(){this.janus=new m({server:this.serverUrl,success:()=>{console.log("Janus handle created!"),this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:t=>{this.publisherJanusHandle=t,m.log("Plugin attached!"+this.publisherJanusHandle.getPlugin()+", id="+this.publisherJanusHandle.getId()+")"),this.registerUsernameToJoinAsPublisher(),m.listDevices(this.initDeviceList)},iceState:t=>{console.log("ICE state changed to "+t)},webrtcState:t=>{m.log("Janus says our WebRTC PeerConnection is "+(t?"up":"down")+" now")},onmessage:(t,r)=>{m.debug("::: Got a message (publisher) :::");const i=t.videoroom;if(i&&("joined"===i?this.messageHandle_OnJoinedEvent(t):"destroyed"===i?this.messageHandle_OnDestroyedEvent(t):"event"===i&&this.messageHandle_OnGeneralEvent(t)),r){m.debug("Handling SDP as well...",r),this.publisherJanusHandle.handleRemoteJsep({jsep:r});const s=t.audio_codec;this.myStream&&this.myStream.getAudioStracks()&&this.myStream.getAudioTracks().length>0&&!s&&m.warn("Our audio stream has been rejected, viewers won't hear us.");const o=t.video_codec;this.myStream&&this.myStream.getVideoTracks()&&this.myStream.getVideoTracks().length>0&&!o&&m.warn("Our video stream has been rejected, viewers won't see us.")}},error:t=>{m.error(t)},destroyed:()=>{m.log("Janus destroyed")},onlocaltrack:(t,r)=>{m.debug("Got a local track event"),m.debug("Local track "+(r?"added":"removed")+":",t);var i=t.id.replace(/[{}]/g,"");if(r){var l=this.localTracks[i];if(!l)if("audio"===t.kind){for(const[c,f]of Object.entries(this.audioDevices))if(f==t.label)return void(this.currentlyChosenOverrideAudioDeviceId=c)}else{const c=new MediaStream;c.addTrack(t.clone()),this.localTracks[i]={stream:c,feedId:i,userName:this.myUsername+" (You)",isMyStream:!0},m.log("Created local stream:",l),m.log(c.getTracks()),m.log(c.getVideoTracks());for(const[f,w]of Object.entries(this.videoDevices))if(w==t.label)return void(this.currentlyChosenOverrideVideoDeviceId=f)}}else{const c=this.localTracks[i];if(c)try{var s=c.stream.getTracks();for(var o in s){var a=s[o];a&&a.stop()}}catch(f){}delete this.localTracks[i]}},onremotetrack:(t,r,i)=>{},oncleanup:()=>{m.log(" ::: Got a cleanup notification: we are unpublished now :::"),this.myStream=null,this.myId&&delete this.feedStreams[this.myId]}})},error:t=>{m.error(t)},destroyed:()=>{console.log("Janus instance destroyed.")}})}registerUsernameToJoinAsPublisher(){this.publisherJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"publisher",display:this.myUsername}})}publishOwnFeed(t,r,i){const s={};r&&(s.audio||(s.audio={}),s.audio={deviceId:{exact:r}},s.replaceAudio=!0),i&&(s.video||(s.video={}),s.video={deviceId:{exact:i}},s.replaceVideo=!0),this.publisherJanusHandle.createOffer({media:Object.assign(Object.assign({},s),{audioRecv:!1,videoRecv:!1,audioSend:t,videoSend:!0,data:!0}),simulcast:this.doSimulcast,success:o=>{m.debug("Got a publisher SDP!",o),this.publisherJanusHandle.send({message:{request:"configure",audio:t,video:!0},jsep:o})},error:o=>{m.error("WebRTC error: ",o),t&&this.publishOwnFeed(!1)}})}toggleMute(){this.isMuted=this.publisherJanusHandle.isAudioMuted(),m.log((this.isMuted?"Unmuting":"Muting")+" local stream..."),this.isMuted?this.publisherJanusHandle.unmuteAudio():this.publisherJanusHandle.muteAudio(),this.isMuted=this.publisherJanusHandle.isAudioMuted()}toggleCamera(){this.isVideoMuted=this.publisherJanusHandle.isVideoMuted(),m.log((this.isMuted?"Unmuting":"Muting")+" local video stream..."),this.isVideoMuted?this.publisherJanusHandle.unmuteVideo():this.publisherJanusHandle.muteVideo(),this.isVideoMuted=this.publisherJanusHandle.isVideoMuted()}selectAudioDevice(t){this.currentlyChosenOverrideAudioDeviceId=t,this.publishOwnFeed(!0,t)}selectVideoDevice(t){this.currentlyChosenOverrideVideoDeviceId=t,this.publishOwnFeed(!0,void 0,t)}unpublishOwnFeed(){this.publisherJanusHandle.send({message:{request:"unpublish"}})}messageHandle_OnJoinedEvent(t){this.myId=t.id,this.myPrivateId=t.private_id,m.log("Successfully joined room "+t.room+" with ID "+this.myId+" and private ID "+this.myPrivateId),this.subscriberMode||this.publishOwnFeed(!0),t.publishers&&this.handlePublisherEvent(t)}messageHandle_OnDestroyedEvent(t){m.warn("The room has been destroyed.")}messageHandle_OnGeneralEvent(t){if(t.streams){const r=t.streams;for(const i in r){const s=r[i];s.id=this.myId,s.display=this.myUsername}if(!this.myId)return;this.feedStreams[this.myId]={id:this.myId,display:this.myUsername,streams:r}}else if(t.publishers)m.debug("Got a list of available pubs: ",t.publishers),this.handlePublisherEvent(t);else if(t.leaving){const r=t.leaving;m.log("A publisher left: "+r,t),this.unsubscribeFrom(r)}else if(t.unpublished){const r=t.unpublished;m.log("Publisher left: "+r,t),this.unsubscribeFrom(r)}else t.error&&m.log("Some kind of error occurred.",t.error)}handlePublisherEvent(t){const r=t.publishers;let i;m.debug("Got a list of available publishers: ",r);for(const s in r){if(r[s].dummy)continue;const o=r[s].id,a=r[s].display,l=r[s].streams;for(const c in l){const f=l[c];f.id=o,f.display=a}this.feedStreams[o]={id:o,display:a,streams:l},m.debug("Stream "+o+" display: "+a+" streams: ",l),i||(i=[]),o!==this.screenshareId&&o!==this.myId&&i.push(l)}i&&this.subscribeTo(i)}subscribeTo(t){if(this.isCurrentlyCreatingASubscription)setTimeout(()=>{this.subscribeTo(t)},500);else if(this.subscriberJanusHandle){const r=this.subscriber_HandleSubscription(t);r.length>0&&this.subscriberJanusHandle.send({message:{request:"subscribe",streams:r}})}else this.isCurrentlyCreatingASubscription=!0,this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:r=>{this.subscriberJanusHandle=r,this.remoteTracks={},m.log("Plugin attached! ("+this.subscriberJanusHandle.getPlugin()+", id="+this.subscriberJanusHandle.getId()+")"),m.log("  -- This is a multistream subscriber");const i=this.subscriber_HandleSubscription(t);this.subscriberJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"subscriber",streams:i,private_id:this.myPrivateId}})},error:r=>{m.error("Error attaching plugin...",r)},iceState:r=>{m.log("ICE state (remote feed) changed to "+r)},webrtcState:r=>{m.log("Janus says this WebRTC PeerConnection (remote feed) is "+(r?"up":"down")+" now")},slowLink:(r,i,s)=>{m.warn("Janus reports problems "+(r?"sending":"receiving")+" packets on mid "+s+" ("+i+" lost packets)")},onmessage:(r,i)=>{m.debug("Got a message (subscriber)",r);const s=r.videoroom;if(m.debug("Event: ",s),r.error?m.warn("Subscriber error: ",r.error):s&&("attached"===s?(this.isCurrentlyCreatingASubscription=!1,m.log("Successfully attached to feed in room "+r.room)):"event"===s&&this.subscriber_HandleGeneralEvent(r)),r.streams&&this.subscriber_HandleStreamsEvent(r),i){m.debug("Handling SDP as well...",i);const o=this.myRoomId,a=this.subscriberJanusHandle;this.subscriberJanusHandle.createAnswer({jsep:i,media:{audioSend:!1,videoSend:!1,data:!0},success:function(l){m.debug("Got SDP!"),m.debug(l),a.send({message:{request:"start",room:o},jsep:l})},error:function(l){m.error("WebRTC error:",l)}})}},onlocaltrack:(r,i)=>{},onremotetrack:(r,i,s)=>{const o=this.subStreams[i],a=this.feedStreams[o.feed_id];m.debug("This track is coming from feed "+o.feed_id+":",a);let l=this.slots[i];if(a&&!l&&(l=a.slot,this.slots[i]=a.slot,this.mids[a.slot]=i),m.debug("mid "+i+" is in slot "+l),!s){const c=this.remoteTracks[i];if(c)try{const f=c.stream.getTracks();for(const w in f){const G=f[w];G&&G.stop()}}catch(f){}return"video"===r.kind&&a&&a.remoteVideos--,this.ngZone.run(()=>{delete this.remoteTracks[i]}),void delete this.mids[this.slots]}if(a.spinner&&(a.spinner.stop(),a.spinner=null),"audio"===r.kind){const c=new MediaStream;c.addTrack(r.clone()),this.ngZone.run(()=>{this.remoteTracks[i]={stream:c,feedId:a.id,userName:a.display}});const f=FL(c,{}),w=this;f.on("speaking",function(){w.ngZone.run(()=>{w.talkingFeeds[a.id]=!0,w.talkingFeedsSubject.next(w.talkingFeeds)}),console.log("speaking: ",a.id,w.talkingFeeds)}),f.on("stopped_speaking",function(){w.ngZone.run(()=>{w.talkingFeeds[a.id]=!1,w.talkingFeedsSubject.next(w.talkingFeeds)}),console.log("stopped_speaking: ",a.id)}),m.log("Created remote audio stream: ",c)}else{a.remoteVideos++;const c=new MediaStream;c.addTrack(r.clone());let f=!1;a.display.includes("_screen")&&(f=!0,this.screensharingIsActive=!0,this.screenshareStateSubject.next("start"),this.talkingFeedsSubject.next(this.talkingFeeds)),this.ngZone.run(()=>{this.remoteTracks[i]={stream:c,feedId:a.id,isScreenshare:f,userName:a.display.replace("_screen","'s Screen")}}),m.log("Created remote video stream: ",c,"for feed: ",a)}},ondataopen:(r,i)=>{m.log("The DataChannel is available! - "+r+" - "+i)},oncleanup:()=>{m.log("Got a cleanup notification (remote feed)")},ondata:r=>{this.dataCallback(r)}})}unsubscribeFrom(t){const r=this.feedStreams[t];r&&(m.debug("Feed "+t+" ("+r.display+") has left the room, detaching"),delete this.simulcastStarted[r.slot],delete this.feeds[r.slot],delete this.feedStreams[t],null!==this.subscriberJanusHandle&&this.subscriberJanusHandle.send({message:{request:"unsubscribe",streams:[{feed:t}]}}),delete this.subscriptions[t],r.display.includes("_screen")&&(this.screensharingIsActive=!1,this.screenshareStateSubject.next("stop"),this.talkingFeedsSubject.next(this.talkingFeeds)))}subscriber_HandleSubscription(t){var r;const i=[];for(const s in t){const o=t[s];for(const a in o){const l=o[a];if("video"!==l.type||"safari"!==m.webRTCAdapter.browserDetails.browser||"vp9"!==l.codec&&("vp8"!==l.codec||m.safariVp8))if(l.disabled)m.log("Disabled stream:",l);else if(this.subscriptions[l.id]&&this.subscriptions[l.id][l.mid])m.log("Already subscribed to stream, skipping:",l);else{if(!(null===(r=this.feedStreams[l.id])||void 0===r?void 0:r.slot)){let c;for(let f=1;f<6;f++)this.feeds[f]||(c=f,this.feeds[c]=l.id,this.feedStreams[l.id].slot=c,this.feedStreams[l.id].remoteVideos=0)}i.push({feed:l.id,mid:l.mid}),this.subscriptions[l.id]||(this.subscriptions[l.id]={}),this.subscriptions[l.id][l.mid]=!0}else m.warn("Publisher is using "+l.codec.toUpperCase+", but Safari doesn't support it: disabling video stream #"+l.mindex)}}return i}subscriber_HandleGeneralEvent(t){if(null!=t.substream||null!=t.temporal){const l=this.slots[t.mid];this.simulcastStarted[l]||(this.simulcastStarted[l]=!0)}}subscriber_HandleStreamsEvent(t){for(const r in t.streams){const i=t.streams[r].mid;this.subStreams[i]=t.streams[r];const s=this.feedStreams[t.streams[r].feed_id];s&&s.slot&&(this.slots[i]=s.slot,this.mids[s.slot]=i)}}startScreenshare(){var t=this;return Di(function*(){if(t.screenshareJanusHandle){const r=yield navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.screenshareJanusHandle.createOffer({media:{audioRecv:!1,videoRecv:!1,audioSend:!1,videoSend:!0,video:"screen",screenshareFrameRate:25},stream:r,simulcast:t.doSimulcast,success:i=>{m.debug("Got a publisher SDP!",i),t.screenshareJanusHandle.send({message:{request:"configure",audio:!0,video:!0},jsep:i}),t.myScreenshareIsActive=!0},error:i=>{m.error("WebRTC error: ",i)}})}else t.attachScreenshareHandle()})()}stopScreenshare(){this.myScreenshareIsActive&&(this.screenshareJanusHandle.send({message:{request:"unpublish"}}),this.screenshareJanusHandle.hangup(),this.myScreenshareIsActive=!1)}attachScreenshareHandle(){this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:t=>{this.screenshareJanusHandle=t,m.log("Plugin attached!"+this.screenshareJanusHandle.getPlugin()+", id="+this.screenshareJanusHandle.getId()+")"),this.screenshareJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"publisher",display:this.myUsername+"_screen"}})},iceState:t=>{console.log("ICE state changed to "+t)},webrtcState:t=>{m.log("Janus says our WebRTC PeerConnection is "+(t?"up":"down")+" now")},onmessage:(t,r)=>{m.debug("::: Got a message (publisher) :::");const i=t.videoroom;if(i&&("joined"===i?(this.screenshareId=t.id,this.privateScreenshareId=t.private_id,m.log("Successfully joined room "+t.room+" with ID "+this.screenshareId+" and private ID "+this.privateScreenshareId),this.startScreenshare()):"destroyed"===i?this.messageHandle_OnDestroyedEvent(t):"event"===i&&this.messageHandle_OnGeneralEvent(t)),r){m.debug("Handling SDP as well...",r),this.screenshareJanusHandle.handleRemoteJsep({jsep:r});const s=t.audio_codec;this.myScreenshareStream&&this.myScreenshareStream.getAudioStracks()&&this.myScreenshareStream.getAudioTracks().length>0&&!s&&m.warn("Our audio stream has been rejected, viewers won't hear us.");const o=t.video_codec;this.myScreenshareStream&&this.myScreenshareStream.getVideoTracks()&&this.myScreenshareStream.getVideoTracks().length>0&&!o&&m.warn("Our video stream has been rejected, viewers won't see us.")}},error:t=>{m.error(t)},destroyed:()=>{m.log("Janus destroyed")},onlocaltrack:(t,r)=>{m.debug("Got a local track event"),m.debug("Local track "+(r?"added":"removed")+":",t),t.addEventListener("ended",()=>{this.stopScreenshare()});var i=t.id.replace(/[{}]/g,"");if(r){var l=this.localTracks[i];if(!l&&"audio"!==t.kind){const c=new MediaStream;c.addTrack(t.clone()),this.localTracks[i]={stream:c,feedId:i,isScreenshare:!0,userName:"My Screenshare",isMyStream:!0},m.log("Created local stream:",l),m.log(c.getTracks()),m.log(c.getVideoTracks())}}else{const c=this.localTracks[i];if(c)try{var s=c.stream.getTracks();for(var o in s){var a=s[o];a&&a.stop()}}catch(f){}delete this.localTracks[i]}},onremotetrack:(t,r,i)=>{},oncleanup:()=>{m.log(" ::: Got a cleanup notification: we are unpublished now :::"),this.myScreenshareStream=null,this.screenshareId&&delete this.feedStreams[this.screenshareId]}})}toggleScreenshare(){if(this.myScreenshareIsActive)if(this.myScreenshareIsActive){for(const[r,i]of Object.entries(this.localTracks))if(i.isScreenshare){for(var t of i.stream.getTracks())t&&t.stop();delete this.localTracks[r]}this.stopScreenshare()}else console.error("Something went horribly wrong with screenshare!");else this.startScreenshare()}muteRemoteAudioLocallyForFeedId(t){let r=!0;this.locallyMutedRemoteAudioFeeds[t]&&(r=!1),this.locallyMutedRemoteAudioFeeds[t]=r}setOnData(t){this.dataCallback=t}sendData(t){this.publisherJanusHandle.data({data:t})}}return n.\u0275fac=function(t){return new(t||n)(_t(jn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({}),n})();try{fp="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){fp=!1}let BL=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function jR(n){return n===Fb}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fp)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(_t(qh))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VC="cdk-high-contrast-black-on-white",HC="cdk-high-contrast-white-on-black",mp="cdk-high-contrast-active";let tN=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(mp),t.remove(VC),t.remove(HC),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(mp),t.add(VC)):2===r&&(t.add(mp),t.add(HC))}}}return n.\u0275fac=function(t){return new(t||n)(_t(BL),_t(Tn))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rN=new At("mat-sanity-checks",{providedIn:"root",factory:function nN(){return!0}});let $C=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function HL(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(_t(tN),_t(rN,8),_t(Tn))},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({imports:[[OC],OC]}),n})();function iN(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}class fN{}class ds{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ds?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ds;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ds?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class pN{encodeKey(e){return qC(e)}encodeValue(e){return qC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const mN=/%(\d[a-f0-9])/gi,_N={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function qC(n){return encodeURIComponent(n).replace(mN,(e,t)=>{var r;return null!==(r=_N[t])&&void 0!==r?r:e})}function XC(n){return`${n}`}class hs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pN,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function gN(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new hs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(XC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(XC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class yN{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function KC(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function YC(n){return"undefined"!=typeof Blob&&n instanceof Blob}function JC(n){return"undefined"!=typeof FormData&&n instanceof FormData}class ll{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ds),this.context||(this.context=new yN),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new hs,this.urlWithParams=t}serializeBody(){return null===this.body?null:KC(this.body)||YC(this.body)||JC(this.body)||function bN(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof hs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||JC(this.body)?null:YC(this.body)?this.body.type||null:KC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof hs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,f=e.params||this.params;const w=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((G,ee)=>G.set(ee,e.setHeaders[ee]),c)),e.setParams&&(f=Object.keys(e.setParams).reduce((G,ee)=>G.set(ee,e.setParams[ee]),f)),new ll(r,i,o,{params:f,headers:c,context:w,reportProgress:l,responseType:s,withCredentials:a})}}var zn=(()=>((zn=zn||{})[zn.Sent=0]="Sent",zn[zn.UploadProgress=1]="UploadProgress",zn[zn.ResponseHeader=2]="ResponseHeader",zn[zn.DownloadProgress=3]="DownloadProgress",zn[zn.Response=4]="Response",zn[zn.User=5]="User",zn))();class yp extends class CN{constructor(e,t=200,r="OK"){this.headers=e.headers||new ds,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=zn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new yp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function vp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ZC=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ll)s=t;else{let l,c;l=i.headers instanceof ds?i.headers:new ds(i.headers),i.params&&(c=i.params instanceof hs?i.params:new hs({fromObject:i.params})),s=new ll(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Tt(s).pipe(Bo(l=>this.handler.handle(l)));if(t instanceof ll||"events"===i.observe)return o;const a=o.pipe(ks(l=>l instanceof yp));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(W(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(W(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(W(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(W(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new hs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,vp(i,r))}post(t,r,i={}){return this.request("POST",t,vp(i,r))}put(t,r,i={}){return this.request("PUT",t,vp(i,r))}}return n.\u0275fac=function(t){return new(t||n)(_t(fN))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const EN=["*"];let pu;function cl(n){var e;return(null===(e=function AN(){if(void 0===pu&&(pu=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(pu=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return pu}())||void 0===e?void 0:e.createHTML(n))||n}function eS(n){return Error(`Unable to find icon with the name "${n}"`)}function tS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function nS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class $s{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let gu=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new $s(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(Xt.HTML,i);if(!o)throw nS(i);const a=cl(o);return this._addSvgIconConfig(t,r,new $s("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new $s(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(Xt.HTML,r);if(!s)throw nS(r);const o=cl(s);return this._addSvgIconSetConfig(t,new $s("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Xt.RESOURCE_URL,t);if(!r)throw tS(t);const i=this._cachedIconsByUrl.get(r);return i?Tt(mu(i)):this._loadSvgIconFromConfig(new $s(t,null)).pipe(Qn(s=>this._cachedIconsByUrl.set(r,s)),W(s=>mu(s)))}getNamedSvgIcon(t,r=""){const i=rS(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Ua(eS(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Tt(mu(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(W(r=>mu(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Tt(i):function hN(...n){const e=kp(n),{args:t,keys:r}=Yb(n),i=new Pe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let f=0;f<o;f++){let w=!1;sn(t[f]).subscribe(F(s,G=>{w||(w=!0,c--),a[f]=G},()=>l--,void 0,()=>{(!l||!w)&&(c||s.next(r?Qb(r,a):a),s.complete())}))}});return e?i.pipe(Jb(e)):i}(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Gi(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Xt.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Tt(null)})))).pipe(W(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw eS(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Qn(r=>t.svgText=r),W(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Tt(null):this._fetchIcon(t).pipe(Qn(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(cl("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(cl("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,o=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function wN(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(Xt.RESOURCE_URL,i);if(!a)throw tS(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(W(f=>cl(f)),o0(()=>this._inProgressUrlFetches.delete(a)),Np());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(rS(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return TN(s)?new $s(s.url,null,s.options):new $s(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(_t(ZC,8),_t(Rf),_t(Tn,8),_t(ns))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mu(n){return n.cloneNode(!0)}function rS(n,e){return n+":"+e}function TN(n){return!(!n.url||!n.options)}const MN=iN(class{constructor(n){this._elementRef=n}}),PN=new At("mat-icon-location",{providedIn:"root",factory:function xN(){const n=Vl(Tn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),iS=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],IN=iS.map(n=>`[${n}]`).join(", "),RN=/^url\(['"]?#(.*?)['"]?\)$/;let bp=(()=>{class n extends MN{constructor(t,r,i,s,o){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=pe.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=function uN(n){return null!=n&&"false"!=`${n}`}(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(IN),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)iS.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(RN):null;if(c){let f=i.get(a);f||(f=[],i.set(a,f)),f.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Jo(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(ht(Ei),ht(gu),to("aria-hidden"),ht(PN),ht(ns))},n.\u0275cmp=ur({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(rc("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),bi("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ch],ngContentSelectors:EN,decls:1,vars:0,template:function(t,r){1&t&&(lc(),cc(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({imports:[[$C],$C]}),n})();const kN=["renderSpace"],ON=["conferenceView"],FN=["dish"];function LN(n,e){if(1&n){const t=Bi();Dt(0,"div",8)(1,"div",9),fn("click",function(){return Er(t),un().changePage(-1)}),Dt(2,"mat-icon"),pr(3,"arrow_left"),zt()()()}}function NN(n,e){if(1&n){const t=Bi();Dt(0,"video",15),fn("loadedmetadata",function(){return Er(t),un().$implicit.loadingFinished=!0}),zt()}if(2&n){const t=un().$implicit;bi("animatedVideo",!t.firstRenderFinished)("loading",!t.loadingFinished)("screenshareNoCrop",t.isScreenshare),Kt("srcObject",t.stream)}}function BN(n,e){1&n&&(Dt(0,"div",16)(1,"mat-icon"),pr(2,"videocam_off"),zt()())}function jN(n,e){if(1&n){const t=Bi();Dt(0,"div",17)(1,"div",9),fn("click",function(){Er(t);const i=un().$implicit;return i.isVideoMuted=!i.isVideoMuted}),Dt(2,"mat-icon"),pr(3),zt()(),Dt(4,"div",9),fn("click",function(){Er(t);const i=un().$implicit;return un().muteAudioForFeedId(i.feedId)}),Dt(5,"mat-icon"),pr(6),zt()()()}if(2&n){const t=un().$implicit,r=un();Ut(2),bi("tinyView",r.isTinyView)("red",t.isVideoMuted),Ut(1),xo(t.isVideoMuted?"videocam_off":"videocam"),Ut(2),bi("tinyView",r.isTinyView)("red",!0===r.janusService.locallyMutedRemoteAudioFeeds[t.feedId]),Ut(1),xo(!0===r.janusService.locallyMutedRemoteAudioFeeds[t.feedId]?"mic_off":"mic")}}function VN(n,e){if(1&n){const t=Bi();Dt(0,"div",10),fn("mouseover",function(){const s=Er(t).$implicit;return un().mouseHoverFeedId=s.feedId})("mouseleave",function(){return Er(t),un().mouseHoverFeedId=""}),$n(1,NN,1,7,"video",11),$n(2,BN,3,0,"div",12),Dt(3,"div",13),pr(4),zt(),$n(5,jN,7,10,"div",14),zt()}if(2&n){const t=e.$implicit,r=un();bi("isTalking",r.janusService.talkingFeeds[t.feedId])("screenshareNoCrop",t.isScreenshare)("animatedDiv",!t.firstRenderFinished),Ut(1),Kt("ngIf",!t.isVideoMuted),Ut(1),Kt("ngIf",t.isVideoMuted),Ut(1),bi("tinyViewUsernameContainer",r.isTinyView),Ut(1),Da(" ",t.userName," "),Ut(1),Kt("ngIf",!t.isMyStream&&r.mouseHoverFeedId===t.feedId)}}function HN(n,e){if(1&n){const t=Bi();Dt(0,"div",8)(1,"div",9),fn("click",function(){return Er(t),un().changePage(1)}),Dt(2,"mat-icon"),pr(3,"arrow_right"),zt()()()}}let Cp=(()=>{class n{constructor(t){this.janusService=t,this.pageinatedStreams=[],this._cameraStreams=[],this.skipAnimations=!1,this.allowNavigation=!0,this.isTinyView=!1,this.width=0,this.height=0,this.ratios=["4:3","16:9","1:1","1:2"],this.aspect=1,this.margin=5,this.cameras=15,this.ratio=this.calculateRatio(),this.maximumAmountOfCamsPerPage=6,this.currentPage=0,this.mouseHoverFeedId=""}set cameraStreams(t){let r=!1;t&&t.length!==this._cameraStreams.length&&(r=!0),this.skipAnimations&&(t=t.map(i=>Object.assign(Object.assign({},i),{firstRenderFinished:!0,loadingFinished:!0}))),this._cameraStreams=t,this.pageinatedStreams=this._cameraStreams.sort().slice(this.currentPage*this.maximumAmountOfCamsPerPage,this.currentPage*this.maximumAmountOfCamsPerPage+this.maximumAmountOfCamsPerPage),this.dish&&r&&(this.render(),this.resize())}ngOnInit(){}ngAfterViewInit(){this.render(),this.resize()}ngAfterContentChecked(){this.dish&&(this.render(),this.resize())}onResize(t){this.render(),this.resize()}changePage(t){this.pageinatedStreams.forEach(i=>i.firstRenderFinished=!0);const r=this.currentPage+t;r>=0&&r<=this._cameraStreams.length/this.maximumAmountOfCamsPerPage&&(this.currentPage=r,this.pageinatedStreams=this._cameraStreams.sort().slice(this.currentPage*this.maximumAmountOfCamsPerPage,this.currentPage*this.maximumAmountOfCamsPerPage+this.maximumAmountOfCamsPerPage))}calculateDimensions(){this.width=this.dish.nativeElement.offsetWidth-2*this.margin,this.height=this.dish.nativeElement.offsetHeight-2*this.margin}render(){}resize(){this.calculateDimensions();let t=0,r=0;for(;r<5e3;){if(!1===this.area(r)){t=r-1;break}r++}t-=2*this.margin,this.resizer(t)}resizer(t){for(var r=0;r<this.dish.nativeElement.children.length;r++){let i=this.dish.nativeElement.children[r];i.style.margin=this.margin+"px",i.style.width=t+"px",i.style.height=t*this.ratio+"px"}}calculateRatio(){const t=this.ratios[this.aspect].split(":");return Number.parseInt(t[1])/Number.parseInt(t[0])}area(t){let r=0,i=0,s=t*this.ratio+2*this.margin;for(;r<this.dish.nativeElement.children.length;)i+t>this.width&&(i=0,s=s+t*this.ratio+2*this.margin),i=i+t+2*this.margin,r++;return!(s>this.height||t>this.width)&&t}add(){this.cameras++,this.render(),this.resize()}delete(){this.cameras--,this.render(),this.resize()}getRatios(){return this.ratios}getCameras(){return this.cameras}setAspect(t){this.aspect=t,this.ratio=this.calculateRatio(),this.resize()}expand(){let t=this.conferenceView.nativeElement.querySelector(".Screen");if(t)this.conferenceView.nativeElement.removeChild(t);else{let r=document.createElement("div");r.classList.add("Screen"),this.conferenceView.nativeElement.prepend(r)}this.resize()}muteAudioForFeedId(t){this.janusService.muteRemoteAudioLocallyForFeedId(t)}}return n.\u0275fac=function(t){return new(t||n)(ht(sl))},n.\u0275cmp=ur({type:n,selectors:[["app-gallery-view"]],viewQuery:function(t,r){if(1&t&&(ii(kN,5),ii(ON,5),ii(FN,5)),2&t){let i;Mr(i=Pr())&&(r.renderSpace=i.first),Mr(i=Pr())&&(r.conferenceView=i.first),Mr(i=Pr())&&(r.dish=i.first)}},hostBindings:function(t,r){1&t&&fn("resize",function(s){return r.onResize(s)},!1,nm)},inputs:{cameraStreams:"cameraStreams",skipAnimations:"skipAnimations",allowNavigation:"allowNavigation",isTinyView:"isTinyView"},decls:9,vars:3,consts:[[1,"renderSpace"],["renderSpace",""],[1,"conferenceView"],["conferenceView",""],["class","buttonContainer",4,"ngIf"],[1,"dish"],["dish",""],[3,"isTalking","screenshareNoCrop","animatedDiv","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"buttonContainer"],[1,"button",3,"click"],[3,"mouseover","mouseleave"],["autoplay","","playsinline","",3,"animatedVideo","loading","srcObject","screenshareNoCrop","loadedmetadata",4,"ngIf"],["class","videoUnavailable",4,"ngIf"],[1,"usernameContainer"],["class","controlButtons",4,"ngIf"],["autoplay","","playsinline","",3,"srcObject","loadedmetadata"],[1,"videoUnavailable"],[1,"controlButtons"]],template:function(t,r){1&t&&(Dt(0,"div",0,1)(2,"div",2,3),$n(4,LN,4,0,"div",4),Dt(5,"div",5,6),$n(7,VN,6,12,"div",7),zt(),$n(8,HN,4,0,"div",4),zt()()),2&t&&(Ut(4),Kt("ngIf",r.allowNavigation&&r._cameraStreams.length>r.maximumAmountOfCamsPerPage),Ut(3),Kt("ngForOf",r.pageinatedStreams),Ut(1),Kt("ngIf",r.allowNavigation&&r._cameraStreams.length>r.maximumAmountOfCamsPerPage))},directives:[Is,bp,Lc],styles:['[_nghost-%COMP%]{display:flex;flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}mat-icon[_ngcontent-%COMP%]{font-size:5vw;width:5vw;height:5vw;margin:0;color:#fff}.tinyView[_ngcontent-%COMP%]{font-size:1.5vw!important;width:1.5vw!important;height:1.5vw!important}.button[_ngcontent-%COMP%]:hover{background-color:#555}.renderSpace[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.conferenceView[_ngcontent-%COMP%]{display:flex;flex:1;max-height:100%;max-width:100%}.dish[_ngcontent-%COMP%]{overflow:hidden;display:flex;align-content:center;flex-wrap:wrap;align-items:center;justify-content:center;vertical-align:middle;flex:1}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;vertical-align:middle;align-self:center;border-radius:10px;overflow:hidden;display:inline-block;box-shadow:var(--shadow-dark);border:2px solid transparent}.animatedDiv[_ngcontent-%COMP%]{animation:show .4s ease}.animatedVideo[_ngcontent-%COMP%]{transition:margin-top .4s ease-in-out}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .videoUnavailable[_ngcontent-%COMP%]{position:absolute;right:0;object-fit:cover;bottom:0;width:100%;height:100%;background:transparent;border-radius:10px;left:0;top:0;background-size:cover;overflow:hidden}.videoUnavailable[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#666}.isTalking[_ngcontent-%COMP%]{border-color:#7cfc00!important}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   video.loading[_ngcontent-%COMP%]{margin-top:100%}.usernameContainer[_ngcontent-%COMP%]{color:#aaa;font-size:1em;font-family:Arial,Helvetica,sans-serif;position:absolute;left:1%;bottom:1%;font-weight:100;display:block}.tinyViewUsernameContainer[_ngcontent-%COMP%]{font-size:.75vw!important}.controlButtons[_ngcontent-%COMP%]{position:absolute;top:.5em;display:flex;flex-direction:row;left:50%;transform:translate(-50%)}.dish[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{position:absolute;height:100%;background-size:100% 100%;width:100%;opacity:.3;font-weight:100;content:"";display:block}.screen[_ngcontent-%COMP%]{flex:2;background:#000;opacity:.8;border-radius:10px}@keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}.button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:5vw;width:100%;margin-left:.5em;margin-right:.5em}.red[_ngcontent-%COMP%]{color:red}.screenshareNoCrop[_ngcontent-%COMP%]{object-fit:contain!important;background:#252525}']}),n})();const UN=["*"];let oS=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ur({type:n,selectors:[["app-menubar"]],ngContentSelectors:UN,decls:1,vars:0,template:function(t,r){1&t&&(lc(),cc(0))},styles:["[_nghost-%COMP%]{background:#151515;display:grid;grid-auto-flow:column;grid-auto-columns:minmax(0,1fr);grid-column-gap:10%}[_nghost-%COMP%]     app-menubar-buttongroup:last-of-type{justify-content:flex-end!important}[_nghost-%COMP%]     app-menubar-buttongroup:first-of-type{justify-content:flex-start!important}"]}),n})();function $N(n,e){if(1&n){const t=Bi();Dt(0,"div",2),fn("click",function(i){return Er(t),un().subButtonClickAction(i)}),Dt(1,"mat-icon"),pr(2,"keyboard_arrow_up"),zt()()}}let aS=(()=>{class n{constructor(){this.highlightToggleStateActive=!1,this.clicked=new Jn}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ur({type:n,selectors:[["app-menubar-button"]],inputs:{clickAction:"clickAction",subButtonClickAction:"subButtonClickAction",highlightToggleStateActive:"highlightToggleStateActive",matIconName:"matIconName",matIconNameHighlightedToggleState:"matIconNameHighlightedToggleState",caption:"caption",captionHighlightedToggleState:"captionHighlightedToggleState"},outputs:{clicked:"clicked"},decls:6,vars:5,consts:[[1,"button",3,"click"],["class","subbutton",3,"click",4,"ngIf"],[1,"subbutton",3,"click"]],template:function(t,r){1&t&&(Dt(0,"div",0),fn("click",function(s){return r.clicked.emit(),r.clickAction&&r.clickAction(s)}),$n(1,$N,3,0,"div",1),Dt(2,"mat-icon"),pr(3),zt(),Dt(4,"p"),pr(5),zt()()),2&t&&(Ut(1),Kt("ngIf",r.subButtonClickAction),Ut(1),bi("red",r.highlightToggleStateActive),Ut(1),xo(r.highlightToggleStateActive?r.matIconNameHighlightedToggleState:r.matIconName),Ut(2),xo(r.highlightToggleStateActive?r.captionHighlightedToggleState:r.caption))},directives:[Is,bp],styles:["[_nghost-%COMP%]{display:contents}.button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:6.5vw;width:100%;padding-top:.3em;padding-bottom:.3em}.red[_ngcontent-%COMP%]{color:red}.button[_ngcontent-%COMP%]:hover{background-color:#555}mat-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:min(2.25vw,2.5em);width:min(2.25vw,2.5em);height:min(2.25vw,2.5em);margin:0;color:#fff;text-align:center;pointer-events:none}.button[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-weight:700;font-size:min(.75vw,1em);margin:.25em;color:#fff;pointer-events:none}.subbutton[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:flex;align-items:center;justify-content:center;cursor:context-menu;border-radius:.5em}.subbutton[_ngcontent-%COMP%]:hover{background-color:#393939}.subbutton[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:min(2vw,3em);margin:0}"]}),n})();const GN=["actionCanvas"],zN=["slideCanvas"],WN=["volatileCanvas"],qN=["textLayer"],XN=["parent"],KN=["pdfActionBar"];function YN(n,e){if(1&n&&(Dt(0,"div",15),Bn(1,"div",16),Dt(2,"div",17),Bn(3,"app-gallery-view",18),zt()()),2&n){const t=un();Ut(3),Kt("isTinyView",!0)("skipAnimations",!0)("allowNavigation",!0)("cameraStreams",t._cameraStreams)}}function JN(n,e){if(1&n){const t=Bi();Dt(0,"app-menubar",19,20),fn("mouseover",function(){return Er(t),un().showHoverMenu=!0}),Dt(2,"app-menubar-button",21),fn("clicked",function(){return Er(t),un().pageBack()}),zt(),Dt(3,"app-menubar-button",22),fn("clicked",function(){return Er(t),un().pageForward()}),zt()()}}let lS=(()=>{class n{constructor(t){this.janusService=t,this.showHoverMenu=!1}set cameraStreams(t){var r;((null===(r=this._cameraStreams)||void 0===r?void 0:r.length)||-1)!==t.length&&(this._cameraStreams=t)}ngOnInit(){}ngAfterViewInit(){this.slideRenderSurface=new kL(this.slideCanvas.nativeElement),this.actionRenderSurface=new hp(this.actionCanvas.nativeElement),this.volatileRenderSurface=new hp(this.volatileCanvas.nativeElement),this.textLayerSurface=new OL(this.textLayer.nativeElement),this.repaint(),new ResizeObserver(this.resize.bind(this)).observe(this.parent.nativeElement)}getActionRenderSurface(){return this.actionRenderSurface}getSlideRenderSurface(){return this.slideRenderSurface}getTextLayerSurface(){return this.textLayerSurface}getVolatileRenderSurface(){return this.volatileRenderSurface}repaint(){this.resize()}resize(){var t;const r=1.3333333333333333;let i=this.parent.nativeElement.clientWidth,s=this.parent.nativeElement.clientHeight;i/s>r?i=s*r:s=i/r,0!==i&&0!==s&&(this.slideRenderSurface.setSize(i,s),this.actionRenderSurface.setSize(i,s),this.volatileRenderSurface.setSize(i,s),this.textLayerSurface.setSize(i,s),(null===(t=this.pdfActionBar)||void 0===t?void 0:t.nativeElement)&&(this.pdfActionBar.nativeElement.style.width=i+"px"))}pageBack(){const t=Hs.getInstance().renderController.getPage().getPageNumber();this.modifyPage(t-1)}pageForward(){const t=Hs.getInstance().renderController.getPage().getPageNumber();this.modifyPage(t+1)}modifyPage(t){const r=new ru(BigInt(0),t),i=TC.parseActionToBinary(r);this.janusService.sendData(i);const s=new np(r.pageNumber);s.timestamp=0,Hs.getInstance().addAction(s)}}return n.\u0275fac=function(t){return new(t||n)(ht(sl))},n.\u0275cmp=ur({type:n,selectors:[["app-document-view"]],viewQuery:function(t,r){if(1&t&&(ii(GN,5),ii(zN,5),ii(WN,5),ii(qN,5),ii(XN,5),ii(KN,5)),2&t){let i;Mr(i=Pr())&&(r.actionCanvas=i.first),Mr(i=Pr())&&(r.slideCanvas=i.first),Mr(i=Pr())&&(r.volatileCanvas=i.first),Mr(i=Pr())&&(r.textLayer=i.first),Mr(i=Pr())&&(r.parent=i.first),Mr(i=Pr())&&(r.pdfActionBar=i.first)}},inputs:{cameraStreams:"cameraStreams"},decls:15,vars:2,consts:[[1,"conferenceContainer"],["class","topBar",4,"ngIf"],[1,"documentContainer"],[1,"slide-view"],["parent",""],[1,"slide-canvas"],["slideCanvas",""],["scale","full",1,"action-canvas"],["actionCanvas",""],["scale","full",1,"volatile-canvas"],["volatileCanvas",""],[1,"text-layer",3,"mouseover","mouseleave"],["textLayer",""],[1,"menubarContainer"],[3,"mouseover",4,"ngIf"],[1,"topBar"],[1,"me"],[1,"attendants"],[3,"isTinyView","skipAnimations","allowNavigation","cameraStreams"],[3,"mouseover"],["pdfActionBar",""],["matIconName","arrow_back",3,"clicked"],["matIconName","arrow_forward",3,"clicked"]],template:function(t,r){1&t&&(Dt(0,"div",0),$n(1,YN,4,4,"div",1),Dt(2,"div",2)(3,"div",3,4),Bn(5,"canvas",5,6)(7,"canvas",7,8)(9,"canvas",9,10),Dt(11,"div",11,12),fn("mouseover",function(){return r.showHoverMenu=!0})("mouseleave",function(){return r.showHoverMenu=!0}),zt()()(),Dt(13,"div",13),$n(14,JN,4,0,"app-menubar",14),zt()()),2&t&&(Ut(1),Kt("ngIf",r._cameraStreams.length>1),Ut(13),Kt("ngIf",r.showHoverMenu))},directives:[Is,Cp,oS,aS],styles:["[_nghost-%COMP%]{flex:1;display:flex}.slide-view[_ngcontent-%COMP%]{flex:1;min-height:1px;padding:0;margin:0;overflow:hidden;position:relative;text-align:center;box-sizing:border-box;display:flex!important;align-items:center!important;justify-content:center!important;border:none}.slide-view[_ngcontent-%COMP%] > canvas[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);left:50%;border-radius:.2em;border:none}.slide-view[_ngcontent-%COMP%]   .slide-canvas[_ngcontent-%COMP%]{visibility:hidden;z-index:0}.slide-view[_ngcontent-%COMP%]   .action-canvas[_ngcontent-%COMP%]{z-index:1}.slide-view[_ngcontent-%COMP%]   .volatile-canvas[_ngcontent-%COMP%]{z-index:2}.text-layer[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;margin:0 auto;z-index:3}.text-layer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}.text-layer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}.text-layer[_ngcontent-%COMP%]   .highlight.begin[_ngcontent-%COMP%]{border-radius:4px 0 0 4px}.text-layer[_ngcontent-%COMP%]   .highlight.end[_ngcontent-%COMP%]{border-radius:0 4px 4px 0}.text-layer[_ngcontent-%COMP%]   .highlight.middle[_ngcontent-%COMP%]{border-radius:0}.text-layer[_ngcontent-%COMP%]   .highlight.selected[_ngcontent-%COMP%]{background-color:#006400}.text-layer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection{background:blue}.text-layer[_ngcontent-%COMP%]   .endOfContent[_ngcontent-%COMP%]{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}.text-layer[_ngcontent-%COMP%]   .endOfContent.active[_ngcontent-%COMP%]{top:0}.annotationLayer[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{position:absolute;z-index:4}.annotationLayer[_ngcontent-%COMP%]   .linkAnnotation[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%;cursor:pointer}.annotationLayer[_ngcontent-%COMP%]   .linkAnnotation[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background:#ff0}[_nghost-%COMP%]{display:flex;flex:1}.conferenceContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{display:flex;max-height:10vh;margin-bottom:.75em}.attendants[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;min-height:12vh}.attendantStreams[_ngcontent-%COMP%]{flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}mat-icon[_ngcontent-%COMP%]{color:#fff}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}.button[_ngcontent-%COMP%]:hover{background-color:#555}.attendantStreams[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;max-height:100%;max-width:95%}.documentContainer[_ngcontent-%COMP%]{flex:1;display:flex;position:relative;justify-content:center}.attendantStreamContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:100%;aspect-ratio:4/3;padding-right:1em}.attendantStreamContainer[_ngcontent-%COMP%]:first-of-type   [_ngcontent-%COMP%]:last-of-type{padding:0}video[_ngcontent-%COMP%]{background:transparent;border-radius:10px;overflow:hidden}.menubarContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.menubarContainer[_ngcontent-%COMP%] > app-menubar[_ngcontent-%COMP%]{z-index:10;margin-bottom:.33em;margin-top:.33em;border-radius:1em;min-width:10vw}"]}),n})(),cS=(()=>{class n{constructor(){this.isOverlayVisible=!1,this.options=[]}trigger(t,r,i,s){t.stopPropagation();const o=t.target.getBoundingClientRect(),a=o.left;this.topPx=o.top+"px",this.leftPx=a+"px",this.isOverlayVisible=!0,this.options=r,this.callback=i,this.activeKey=s}hideAll(){this.options=[],this.callback=void 0,this.activeKey="",this.isOverlayVisible=!1}optionSelected(t){this.callback&&(this.callback(t),this.callback=void 0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QN(n,e){if(1&n&&(Dt(0,"div",4),Bn(1,"div",5),Dt(2,"div",6),Bn(3,"app-gallery-view",7),zt()()),2&n){const t=un();Ut(3),Kt("isTinyView",!0)("skipAnimations",!0)("allowNavigation",!0)("cameraStreams",t.nonTalkingFeedStreams)}}const ZN=function(n){return[n]};let e2=(()=>{class n{constructor(t){this.janusService=t,this.talkingFeedId=""}set cameraStreams(t){var r;const i=(null===(r=this._cameraStreams)||void 0===r?void 0:r.length)||-1;this._cameraStreams=t,i!==t.length&&this.refreshViews(this.janusService.talkingFeeds)}ngOnInit(){}ngAfterContentInit(){!this.talkingFeedId&&!this.talkingFeedStream&&this._cameraStreams.length>0&&(this.talkingFeedId=this._cameraStreams[0].feedId,this.talkingFeedStream=this._cameraStreams[0],this.nonTalkingFeedStreams=this.nonTalkingFeeds),this.janusService.talkingFeedsSubject.subscribe(t=>{this.refreshViews(t)})}refreshViews(t){const r=Object.keys(t).filter(s=>t[s])[0],i=this._cameraStreams.find(s=>!0===s.isScreenshare);if(console.log(t),this.janusService.screensharingIsActive&&i)this.talkingFeedId=i.feedId,this.talkingFeedStream=i,this.nonTalkingFeedStreams=this.nonTalkingFeeds;else if(1===this._cameraStreams.length&&(this.talkingFeedId=this._cameraStreams[0].feedId),r&&""!=r&&this.talkingFeedId!==r){this.talkingFeedId=r,console.log("(Speaker View) Active speaker changed: ",this.talkingFeedId);const s=this.talkingFeed;s&&(this.talkingFeedStream=s),this.nonTalkingFeedStreams=this.nonTalkingFeeds,console.log("Non talking feed streams: ",this.nonTalkingFeedStreams)}else{const s=this._cameraStreams.find(o=>!o.isScreenshare);s&&(this.talkingFeedId=s.feedId,this.talkingFeedStream=s,this.nonTalkingFeedStreams=this.nonTalkingFeeds)}}get talkingFeed(){return this._cameraStreams.find(t=>t.feedId==this.talkingFeedId)}get nonTalkingFeeds(){return this._cameraStreams.filter(t=>t.feedId!=this.talkingFeedId)}}return n.\u0275fac=function(t){return new(t||n)(ht(sl))},n.\u0275cmp=ur({type:n,selectors:[["app-speaker-view"]],inputs:{cameraStreams:"cameraStreams"},decls:4,vars:6,consts:[[1,"conferenceContainer"],["class","topBar",4,"ngIf"],[1,"speakerContainer"],[3,"skipAnimations","allowNavigation","cameraStreams"],[1,"topBar"],[1,"me"],[1,"attendants"],[3,"isTinyView","skipAnimations","allowNavigation","cameraStreams"]],template:function(t,r){1&t&&(Dt(0,"div",0),$n(1,QN,4,4,"div",1),Dt(2,"div",2),Bn(3,"app-gallery-view",3),zt()()),2&t&&(Ut(1),Kt("ngIf",r._cameraStreams.length>1),Ut(2),Kt("skipAnimations",!0)("allowNavigation",!1)("cameraStreams",yv(4,ZN,r.talkingFeedStream)))},directives:[Is,Cp],styles:["[_nghost-%COMP%]{display:flex;flex:1}.conferenceContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{display:flex;max-height:10vh;margin-bottom:.75em}.attendants[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;min-height:12vh}.attendantStreams[_ngcontent-%COMP%]{flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}mat-icon[_ngcontent-%COMP%]{color:#fff}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}.button[_ngcontent-%COMP%]:hover{background-color:#555}.attendantStreams[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;max-height:100%;max-width:95%}.speakerContainer[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.attendantStreamContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:100%;aspect-ratio:4/3;padding-right:1em}.attendantStreamContainer[_ngcontent-%COMP%]:first-of-type   [_ngcontent-%COMP%]:last-of-type{padding:0}video[_ngcontent-%COMP%]{background:transparent;border-radius:10px;overflow:hidden}"]}),n})();const t2=["*"];let n2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ur({type:n,selectors:[["app-menubar-buttongroup"]],ngContentSelectors:t2,decls:1,vars:0,template:function(t,r){1&t&&(lc(),cc(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;justify-content:center}"]}),n})();function r2(n,e){1&n&&(Dt(0,"mat-icon"),pr(1,"check"),zt())}function i2(n,e){if(1&n){const t=Bi();Dt(0,"div",2),fn("click",function(){const s=Er(t).$implicit;return un().selectOverlayService.optionSelected(s)}),$n(1,r2,2,0,"mat-icon",3),pr(2),zt()}if(2&n){const t=e.$implicit,r=un();bi("active",r.selectOverlayService.activeKey===t.key),Ut(1),Kt("ngIf",r.selectOverlayService.activeKey===t.key),Ut(1),Da(" ",t.value," ")}}let s2=(()=>{class n{constructor(t){this.selectOverlayService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(ht(cS))},n.\u0275cmp=ur({type:n,selectors:[["app-select-overlay"]],decls:2,vars:7,consts:[[1,"selectList"],["class","selectListItem",3,"active","click",4,"ngFor","ngForOf"],[1,"selectListItem",3,"click"],[4,"ngIf"]],template:function(t,r){1&t&&(Dt(0,"div",0),$n(1,i2,3,4,"div",1),zt()),2&t&&(uc("top",r.selectOverlayService.topPx)("left",r.selectOverlayService.leftPx)("display",r.selectOverlayService.isOverlayVisible?"":"none"),Ut(1),Kt("ngForOf",r.selectOverlayService.options))},directives:[Lc,Is,bp],styles:[".selectList[_ngcontent-%COMP%]{background:#151515;border:1px solid black;border-radius:1em;display:flex;flex-direction:column;position:absolute;transform:translateY(-100%);min-width:15vw;z-index:99}.selectListItem[_ngcontent-%COMP%]{color:#fff;height:4em;display:flex;flex-direction:row;cursor:pointer;justify-content:center;align-items:center;padding:.5em 1em;border-radius:1em}.selectListItem[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:25px;height:25px;width:25px;margin-bottom:4px;margin-right:4px}.active[_ngcontent-%COMP%]{background-color:#444}.selectListItem[_ngcontent-%COMP%]:hover{background-color:#555}"]}),n})();const o2=["slideView"];function a2(n,e){1&n&&Bn(0,"app-gallery-view",2),2&n&&Kt("cameraStreams",un().videoStreams)}function l2(n,e){1&n&&Bn(0,"app-speaker-view",2),2&n&&Kt("cameraStreams",un().videoStreams)}function c2(n,e){1&n&&Bn(0,"audio",14),2&n&&Kt("srcObject",un().$implicit.stream)}function u2(n,e){if(1&n&&(sc(0),$n(1,c2,1,1,"audio",13),oc()),2&n){const t=e.$implicit,r=un();Ut(1),Kt("ngIf",!r.janusService.locallyMutedRemoteAudioFeeds[t.feedId])}}const d2=[{path:"",component:(()=>{class n{constructor(t){this.router=t}ngOnInit(){}buttonPressed(){this.router.navigate(["/course/1"])}}return n.\u0275fac=function(t){return new(t||n)(ht(Zn))},n.\u0275cmp=ur({type:n,selectors:[["app-home"]],decls:11,vars:0,consts:[["placeholder","Room ID"],["placeholder","Room Password"],["placeholder","Your name"],[3,"click"]],template:function(t,r){1&t&&(pr(0,"Please enter your room details."),Bn(1,"br")(2,"br")(3,"input",0)(4,"br")(5,"input",1)(6,"br")(7,"input",2)(8,"br"),Dt(9,"button",3),fn("click",function(){return r.buttonPressed()}),pr(10,"Join Room"),zt())},styles:[""]}),n})()},{path:"course/:courseId",component:(()=>{class n{constructor(t,r,i,s){var o;this.janusService=t,this.router=r,this.selectOverlayService=i,this.activatedRoute=s,this.chosenViewMode="gallery",this.prevViewMode="gallery",this.screenShareActive=!1,this.availableViewModes={gallery:"Gallery view",speaker:"Speaker view",document:"Document view"},this.showAvailableMicrophones=a=>{this.selectOverlayService.trigger(a,Object.keys(this.janusService.audioDevices).map(l=>({key:l,value:this.janusService.audioDevices[l]})),l=>{this.janusService.selectAudioDevice(l.key)},this.janusService.currentlyChosenOverrideAudioDeviceId)},this.showAvailableCameras=a=>{this.selectOverlayService.trigger(a,Object.keys(this.janusService.videoDevices).map(l=>({key:l,value:this.janusService.videoDevices[l]})),l=>{this.janusService.selectVideoDevice(l.key)},this.janusService.currentlyChosenOverrideVideoDeviceId)},this.showAvailableViewModes=a=>{const l=[{key:"gallery",value:this.availableViewModes.gallery},{key:"speaker",value:this.availableViewModes.speaker}];Hs.getInstance().renderController&&l.push({key:"document",value:this.availableViewModes.document}),this.selectOverlayService.trigger(a,l,c=>{this.chosenViewMode=c.key},this.chosenViewMode)},this.janusService.myRoomId=null!==(o=Number(this.activatedRoute.snapshot.params.courseId))&&void 0!==o?o:1,console.log("Read room id: ",this.janusService.myRoomId),this.courseStateService=new cL("fastrootserver.de"),this.playbackModel=new IL,this.playbackService=new Hs(this.playbackModel)}ngOnInit(){this.janusService.start(),this.janusService.setOnData(t=>{t instanceof Blob?t.arrayBuffer().then(r=>{this.processData(r)}):this.processData(t)}),document.addEventListener("click",()=>{this.selectOverlayService.hideAll()}),this.janusService.screenshareStateSubject.subscribe(t=>{"start"===t?this.screenShareActive||(this.prevViewMode=this.chosenViewMode,this.chosenViewMode="speaker",this.screenShareActive=!0):this.screenShareActive&&(this.chosenViewMode=this.prevViewMode,this.screenShareActive=!1)})}ngOnDestroy(){this.janusService.end()}get audioStreams(){return Object.values(this.janusService.remoteTracks).filter(t=>t.stream.getAudioTracks().length>0)}get videoStreams(){return Object.values(Object.assign(Object.assign({},this.janusService.remoteTracks),this.janusService.localTracks)).filter(t=>t.stream.getVideoTracks().length>0)}leave(){try{this.janusService.end()}catch(t){console.log("Could not end janus session: ",t)}document.location.href=""}openDocumentView(){this.chosenViewMode="document";const t={documentName:"CourseStateDoc",documentId:BigInt(0),documentFile:"/angular/assets/sample.pdf",type:"type",activePage:{pageNumber:0},pages:new Map([[0,{pageNumber:0}]])};this.courseStateService.getStateDocument(this.janusService.myRoomId,{documentFile:"/angular/assets/sample.pdf",documentName:"Dokument"}).then(r=>{r.setDocumentId(BigInt(0)),this.playbackService.addDocument(r),this.playbackService.initialize(this.slideView,{documentMap:new Map([[BigInt(0),t]]),avtiveDocument:t},[r],BigInt(0)),this.flushActionBuffer(r.getDocumentId())}).catch(r=>{console.error("(SlideDocumentError)",r)}),console.log("(SlideDocument) Told it to load"),this.slideView.repaint()}processData(t){if(!this.janusService.myRoomId)return;const r=new MC(t),i=r.getInt32(),s=r.getInt8(),o=TC.parse(r,s,i);if(o instanceof ip)this.bufferAction(o,o.documentId)||this.playbackService.selectDocument(o.documentId);else if(o instanceof yC)if(1===o.documentType){const a=new _C;a.setDocumentId(o.documentId),this.playbackService.addDocument(a)}else this.streamActionBuffer={bufferedActions:[],docId:BigInt(o.documentId)},this.courseStateService.getStateDocument(this.janusService.myRoomId,{activePage:null,documentFile:o.documentFile,documentId:o.documentId,documentName:o.documentTitle,pages:null,type:"pdf"}).then(l=>{this.playbackService.addDocument(l),this.flushActionBuffer(l.getDocumentId())}).catch(l=>{console.error(l)});else if(o instanceof lC)this.playbackService.removeDocument(o.documentId);else if(o instanceof ru){if(!this.bufferAction(o,o.documentId)){const a=new np(o.pageNumber);a.timestamp=0,this.playbackService.addAction(a)}}else o instanceof sp&&(this.bufferAction(o,o.documentId)||this.playbackService.addAction(o.action))}bufferAction(t,r){return!(!this.streamActionBuffer||this.streamActionBuffer.docId!==BigInt(r)||(this.streamActionBuffer.bufferedActions.push(t),0))}flushActionBuffer(t){this.streamActionBuffer&&this.streamActionBuffer.docId===BigInt(t)&&this.streamActionBuffer.bufferedActions.forEach(r=>{if(r instanceof ip)this.playbackService.selectDocument(r.documentId);else if(r instanceof ru){const i=new np(r.pageNumber);i.timestamp=0,this.playbackService.addAction(i)}else r instanceof sp&&this.playbackService.addAction(r.action)}),this.streamActionBuffer=null}}return n.\u0275fac=function(t){return new(t||n)(ht(sl),ht(Zn),ht(cS),ht(Ls))},n.\u0275cmp=ur({type:n,selectors:[["app-player"]],viewQuery:function(t,r){if(1&t&&ii(o2,5,lS),2&t){let i;Mr(i=Pr())&&(r.slideView=i.first)}},decls:19,vars:13,consts:[["xmlns","http://www.w3.org/1999/html",1,"conferenceContainer"],[3,"cameraStreams",4,"ngIf"],[3,"cameraStreams"],["slideView",""],["caption","Microphone off","captionHighlightedToggleState","Micrphone on","matIconName","mic","matIconNameHighlightedToggleState","mic_off",3,"highlightToggleStateActive","subButtonClickAction","clicked"],["caption","Camera off","captionHighlightedToggleState","Camera on","matIconName","videocam","matIconNameHighlightedToggleState","videocam_off",3,"highlightToggleStateActive","subButtonClickAction","clicked"],["caption","Screenshare","captionHighlightedToggleState","Screenshare","matIconName","screen_share","matIconNameHighlightedToggleState","stop_screen_share",3,"highlightToggleStateActive","clicked"],["caption","Documents","matIconName","edit",3,"clicked"],["caption","View mode","matIconName","image",3,"clickAction"],["caption","Settings","matIconName","settings"],["captionHighlightedToggleState","Leave","matIconNameHighlightedToggleState","exit_to_app",3,"highlightToggleStateActive","clicked"],[1,"not-rendered"],[4,"ngFor","ngForOf"],["autoplay","",3,"srcObject",4,"ngIf"],["autoplay","",3,"srcObject"]],template:function(t,r){1&t&&(Dt(0,"div",0),$n(1,a2,1,1,"app-gallery-view",1),$n(2,l2,1,1,"app-speaker-view",1),Bn(3,"app-document-view",2,3),Dt(5,"app-menubar")(6,"app-menubar-buttongroup")(7,"app-menubar-button",4),fn("clicked",function(){return r.janusService.toggleMute()}),zt(),Dt(8,"app-menubar-button",5),fn("clicked",function(){return r.janusService.toggleCamera()}),zt()(),Dt(9,"app-menubar-buttongroup")(10,"app-menubar-button",6),fn("clicked",function(){return r.janusService.toggleScreenshare()}),zt(),Dt(11,"app-menubar-button",7),fn("clicked",function(){return r.openDocumentView()}),zt(),Bn(12,"app-menubar-button",8),zt(),Dt(13,"app-menubar-buttongroup"),Bn(14,"app-menubar-button",9),Dt(15,"app-menubar-button",10),fn("clicked",function(){return r.leave()}),zt()()()(),Bn(16,"app-select-overlay"),Dt(17,"div",11),$n(18,u2,2,1,"ng-container",12),zt()),2&t&&(Ut(1),Kt("ngIf","gallery"===r.chosenViewMode),Ut(1),Kt("ngIf","speaker"===r.chosenViewMode),Ut(1),uc("display","document"!==r.chosenViewMode?"none":""),Kt("cameraStreams",r.videoStreams),Ut(4),Kt("highlightToggleStateActive",r.janusService.isMuted)("subButtonClickAction",r.showAvailableMicrophones),Ut(1),Kt("highlightToggleStateActive",r.janusService.isVideoMuted)("subButtonClickAction",r.showAvailableCameras),Ut(2),Kt("highlightToggleStateActive",r.janusService.myScreenshareIsActive),Ut(2),Kt("clickAction",r.showAvailableViewModes),Ut(3),Kt("highlightToggleStateActive",!0),Ut(3),Kt("ngForOf",r.audioStreams))},directives:[Is,Cp,e2,lS,oS,n2,aS,s2,Lc],styles:["body[_ngcontent-%COMP%]{background:#222222;overflow:hidden}.conferenceContainer[_ngcontent-%COMP%]{background-color:#333;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;max-height:100vh;height:100%;width:100%}.videoFeedContainer[_ngcontent-%COMP%]{background:#222222;flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(min(33.3333333333%,max(64px,20%)),1fr));grid-auto-columns:min-content;align-items:center;max-height:90vh}.videoContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;aspect-ratio:4/3}video[_ngcontent-%COMP%]{object-fit:contain;border-radius:.75em;overflow:hidden;max-height:90vh;border:2px solid transparent}.isTalking[_ngcontent-%COMP%]{border-color:#7cfc00}"]}),n})()}];let h2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=di({type:n}),n.\u0275inj=Wr({imports:[[sC.forRoot(d2)],sC]}),n})(),f2=(()=>{class n{constructor(t,r,i){this.router=t,this.janusService=r,this.elementRef=i,this.title="angularPlayer",this.janusService.setUsername(this.elementRef.nativeElement.getAttribute("userdisplayname"))}}return n.\u0275fac=function(t){return new(t||n)(ht(Zn),ht(sl),ht(Ei))},n.\u0275cmp=ur({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Bn(0,"router-outlet")},directives:[qf],styles:[""]}),n})(),p2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=di({type:n,bootstrap:[f2]}),n.\u0275inj=Wr({providers:[],imports:[[g1,h2,sS],sS]}),n})();const Sp=CanvasRenderingContext2D.prototype.getTransform;if(CanvasRenderingContext2D.prototype.getTransformExt=function(){if(Sp){const n=Sp.apply(this,Array.from(arguments));this._transform_ext||(this._transform_ext=new ar),this._transform_ext.setValues(n.a,n.b,n.c,n.d,n.e,n.f)}return this._transform_ext},!Sp){const n=CanvasRenderingContext2D.prototype.resetTransform,e=CanvasRenderingContext2D.prototype.rotate,t=CanvasRenderingContext2D.prototype.scale,r=CanvasRenderingContext2D.prototype.setTransform,i=CanvasRenderingContext2D.prototype.transform,s=CanvasRenderingContext2D.prototype.translate,o=CanvasRenderingContext2D.prototype.save,a=CanvasRenderingContext2D.prototype.restore;CanvasRenderingContext2D.prototype.resetTransform=function(){n&&n.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new ar),this._transform_ext.reset()},CanvasRenderingContext2D.prototype.rotate=function(l){e&&e.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new ar),this._transform_ext.rotate(l)},CanvasRenderingContext2D.prototype.scale=function(l,c){t&&t.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new ar),this._transform_ext.scale(l,c)},CanvasRenderingContext2D.prototype.setTransform=function(l,c,f,w,G,ee){if(r&&r.apply(this,Array.from(arguments)),c)l=l;else{const Ee=l;l=Ee.a,c=Ee.b,f=Ee.c,w=Ee.d,G=Ee.e,ee=Ee.f}this._transform_ext||(this._transform_ext=new ar),this._transform_ext.setValues(l,c,f,w,G,ee)},CanvasRenderingContext2D.prototype.transform=function(l,c,f,w,G,ee){i&&i.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new ar),this._transform_ext.multiply(new ar([l,c,f,w,G,ee]))},CanvasRenderingContext2D.prototype.translate=function(l,c){s&&s.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new ar),this._transform_ext.translate(l,c)},CanvasRenderingContext2D.prototype.save=function(){o&&o.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext||(this._transform_ext=new ar),this._transform_ext_stack.push(this._transform_ext.clone())},CanvasRenderingContext2D.prototype.restore=function(){a&&a.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext=this._transform_ext_stack.pop(),this._transform_ext||(this._transform_ext=new ar)}}dp.GlobalWorkerOptions.workerSrc="./assets/pdf.worker.js",function Kx(){ab=!1}(),f1().bootstrapModule(p2).catch(n=>console.error(n))},164:(We,k,X)=>{var ae,p=X(69);"undefined"!=typeof window&&(ae=window.AudioContext||window.webkitAudioContext);var le=null;We.exports=function(pe,$){var y=new p;if(!ae)return y;var S,H,M,P=($=$||{}).smoothing||.1,N=$.interval||50,O=$.threshold,b=$.play,_=$.history||10,h=!0;le=$.audioContext||le||new ae,(M=le.createAnalyser()).fftSize=512,M.smoothingTimeConstant=P,H=new Float32Array(M.frequencyBinCount),pe.jquery&&(pe=pe[0]),pe instanceof HTMLAudioElement||pe instanceof HTMLVideoElement?(S=le.createMediaElementSource(pe),void 0===b&&(b=!0),O=O||-50):(S=le.createMediaStreamSource(pe),O=O||-50),S.connect(M),b&&M.connect(le.destination),y.speaking=!1,y.suspend=function(){return le.suspend()},y.resume=function(){return le.resume()},Object.defineProperty(y,"state",{get:function(){return le.state}}),le.onstatechange=function(){y.emit("state_change",le.state)},y.setThreshold=function(g){O=g},y.setInterval=function(g){N=g},y.stop=function(){h=!1,y.emit("volume_change",-100,O),y.speaking&&(y.speaking=!1,y.emit("stopped_speaking")),M.disconnect(),S.disconnect()},y.speakingHistory=[];for(var x=0;x<_;x++)y.speakingHistory.push(0);var u=function(){setTimeout(function(){if(h){var g=function ce(pe,Q){var y=-1/0;pe.getFloatFrequencyData(Q);for(var $=4,P=Q.length;$<P;$++)Q[$]>y&&Q[$]<0&&(y=Q[$]);return y}(M,H);y.emit("volume_change",g,O);var R=0;if(g>O&&!y.speaking){for(var I=y.speakingHistory.length-3;I<y.speakingHistory.length;I++)R+=y.speakingHistory[I];R>=2&&(y.speaking=!0,y.emit("speaking"))}else if(g<O&&y.speaking){for(I=0;I<y.speakingHistory.length;I++)R+=y.speakingHistory[I];0==R&&(y.speaking=!1,y.emit("stopped_speaking"))}y.speakingHistory.shift(),y.speakingHistory.push(0+(g>O)),u()}},N)};return u(),y}},36:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(926).default,X;X=()=>(()=>{"use strict";var __webpack_modules__=[,(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.VerbosityLevel=k.Util=k.UnknownErrorException=k.UnexpectedResponseException=k.UNSUPPORTED_FEATURES=k.TextRenderingMode=k.StreamType=k.RenderingIntentFlag=k.PermissionFlag=k.PasswordResponses=k.PasswordException=k.PageActionEventType=k.OPS=k.MissingPDFException=k.InvalidPDFException=k.ImageKind=k.IDENTITY_MATRIX=k.FormatError=k.FontType=k.FeatureTest=k.FONT_IDENTITY_MATRIX=k.DocumentActionEventType=k.CMapCompressionType=k.BaseException=k.AnnotationType=k.AnnotationStateModelType=k.AnnotationReviewState=k.AnnotationReplyType=k.AnnotationMode=k.AnnotationMarkedState=k.AnnotationFlag=k.AnnotationFieldFlag=k.AnnotationBorderStyleType=k.AnnotationActionEventType=k.AbortException=void 0,k.arrayByteLength=be,k.arraysToBytes=function _e(K){const L=K.length;if(1===L&&K[0]instanceof Uint8Array)return K[0];let B=0;for(let me=0;me<L;me++)B+=be(K[me]);let te=0;const Ce=new Uint8Array(B);for(let me=0;me<L;me++){let Se=K[me];Se instanceof Uint8Array||(Se="string"==typeof Se?fe(Se):new Uint8Array(Se));const Ye=Se.byteLength;Ce.set(Se,te),te+=Ye}return Ce},k.assert=function Me(K,L){K||de(L)},k.bytesToString=function W(K){("object"!=typeof K||null===K||void 0===K.length)&&de("Invalid argument for bytesToString");const L=K.length,B=8192;if(L<B)return String.fromCharCode.apply(null,K);const te=[];for(let Ce=0;Ce<L;Ce+=B){const me=Math.min(Ce+B,L),Se=K.subarray(Ce,me);te.push(String.fromCharCode.apply(null,Se))}return te.join("")},k.createPromiseCapability=function se(){const K=Object.create(null);let L=!1;return Object.defineProperty(K,"settled",{get:()=>L}),K.promise=new Promise(function(B,te){K.resolve=function(Ce){L=!0,B(Ce)},K.reject=function(Ce){L=!0,te(Ce)}}),K},k.createValidAbsoluteUrl=function Fe(K,L=null,B=null){if(!K)return null;try{if(B&&"string"==typeof K){if(B.addDefaultProtocol&&K.startsWith("www.")){const Ce=K.match(/\./g);Ce&&Ce.length>=2&&(K=`http://${K}`)}if(B.tryConvertEncoding)try{K=Xe(K)}catch(Ce){}}const te=L?new URL(K,L):new URL(K);if(function Pe(K){if(!K)return!1;switch(K.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(te))return te}catch(te){}return null},k.escapeString=function Te(K){return K.replace(/([()\\\n\r])/g,L=>"\n"===L?"\\n":"\r"===L?"\\r":`\\${L}`)},k.getModificationDate=function Re(K=new Date){return[K.getUTCFullYear().toString(),(K.getUTCMonth()+1).toString().padStart(2,"0"),K.getUTCDate().toString().padStart(2,"0"),K.getUTCHours().toString().padStart(2,"0"),K.getUTCMinutes().toString().padStart(2,"0"),K.getUTCSeconds().toString().padStart(2,"0")].join("")},k.getVerbosityLevel=function ve(){return re},k.info=function we(K){re>=R.INFOS&&console.log(`Info: ${K}`)},k.isArrayBuffer=function T(K){return"object"==typeof K&&null!==K&&void 0!==K.byteLength},k.isArrayEqual=function he(K,L){if(K.length!==L.length)return!1;for(let B=0,te=K.length;B<te;B++)if(K[B]!==L[B])return!1;return!0},k.isAscii=function Ke(K){return/^[\x00-\x7F]*$/.test(K)},k.objectFromMap=function ke(K){const L=Object.create(null);for(const[B,te]of K)L[B]=te;return L},k.objectSize=function xe(K){return Object.keys(K).length},k.setVerbosityLevel=function ue(K){Number.isInteger(K)&&(re=K)},k.shadow=$e,k.string32=function Ae(K){return String.fromCharCode(K>>24&255,K>>16&255,K>>8&255,255&K)},k.stringToBytes=fe,k.stringToPDFString=function ie(K){if(K[0]>="\xef"){let B;if("\xfe"===K[0]&&"\xff"===K[1]?B="utf-16be":"\xff"===K[0]&&"\xfe"===K[1]?B="utf-16le":"\xef"===K[0]&&"\xbb"===K[1]&&"\xbf"===K[2]&&(B="utf-8"),B)try{const te=new TextDecoder(B,{fatal:!0}),Ce=fe(K);return te.decode(Ce)}catch(te){Ie(`stringToPDFString: "${te}".`)}}const L=[];for(let B=0,te=K.length;B<te;B++){const Ce=U[K.charCodeAt(B)];L.push(Ce?String.fromCharCode(Ce):K.charAt(B))}return L.join("")},k.stringToUTF16BEString=function qe(K){const L=["\xfe\xff"];for(let B=0,te=K.length;B<te;B++){const Ce=K.charCodeAt(B);L.push(String.fromCharCode(Ce>>8&255),String.fromCharCode(255&Ce))}return L.join("")},k.stringToUTF8String=Xe,k.unreachable=de,k.utf8StringToString=function it(K){return unescape(encodeURIComponent(K))},k.warn=Ie,X(2),k.IDENTITY_MATRIX=[1,0,0,1,0,0],k.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],k.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},k.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},k.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},k.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},k.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},k.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},k.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},k.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},k.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},k.AnnotationReplyType={GROUP:"Group",REPLY:"R"},k.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},k.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},k.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},k.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},k.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},k.PageActionEventType={O:"PageOpen",C:"PageClose"},k.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},k.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const R={ERRORS:0,WARNINGS:1,INFOS:5};k.VerbosityLevel=R,k.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},k.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},k.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},k.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let re=R.WARNINGS;function Ie(K){re>=R.WARNINGS&&console.log(`Warning: ${K}`)}function de(K){throw new Error(K)}function $e(K,L,B){return Object.defineProperty(K,L,{value:B,enumerable:!0,configurable:!0,writable:!1}),B}const J=function(){function L(B,te){this.constructor===L&&de("Cannot initialize BaseException."),this.message=B,this.name=te}return L.prototype=new Error,L.constructor=L,L}();function fe(K){"string"!=typeof K&&de("Invalid argument for stringToBytes");const L=K.length,B=new Uint8Array(L);for(let te=0;te<L;++te)B[te]=255&K.charCodeAt(te);return B}function be(K){return void 0!==K.length?K.length:void 0!==K.byteLength?K.byteLength:void de("Invalid argument for arrayByteLength")}k.BaseException=J,k.PasswordException=class v extends J{constructor(L,B){super(L,"PasswordException"),this.code=B}},k.UnknownErrorException=class E extends J{constructor(L,B){super(L,"UnknownErrorException"),this.details=B}},k.InvalidPDFException=class d extends J{constructor(L){super(L,"InvalidPDFException")}},k.MissingPDFException=class C extends J{constructor(L){super(L,"MissingPDFException")}},k.UnexpectedResponseException=class D extends J{constructor(L,B){super(L,"UnexpectedResponseException"),this.status=B}},k.FormatError=class F extends J{constructor(L){super(L,"FormatError")}},k.AbortException=class j extends J{constructor(L){super(L,"AbortException")}},k.FeatureTest=class Oe{static get isLittleEndian(){return $e(this,"isLittleEndian",function ze(){const K=new Uint8Array(4);return K[0]=1,1===new Uint32Array(K.buffer,0,1)[0]}())}static get isEvalSupported(){return $e(this,"isEvalSupported",function tt(){try{return new Function(""),!0}catch(K){return!1}}())}static get isOffscreenCanvasSupported(){return $e(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const Ve=[...Array(256).keys()].map(K=>K.toString(16).padStart(2,"0"));class je{static makeHexColor(L,B,te){return`#${Ve[L]}${Ve[B]}${Ve[te]}`}static scaleMinMax(L,B){let te;L[0]?(L[0]<0&&(te=B[0],B[0]=B[1],B[1]=te),B[0]*=L[0],B[1]*=L[0],L[3]<0&&(te=B[2],B[2]=B[3],B[3]=te),B[2]*=L[3],B[3]*=L[3]):(te=B[0],B[0]=B[2],B[2]=te,te=B[1],B[1]=B[3],B[3]=te,L[1]<0&&(te=B[2],B[2]=B[3],B[3]=te),B[2]*=L[1],B[3]*=L[1],L[2]<0&&(te=B[0],B[0]=B[1],B[1]=te),B[0]*=L[2],B[1]*=L[2]),B[0]+=L[4],B[1]+=L[4],B[2]+=L[5],B[3]+=L[5]}static transform(L,B){return[L[0]*B[0]+L[2]*B[1],L[1]*B[0]+L[3]*B[1],L[0]*B[2]+L[2]*B[3],L[1]*B[2]+L[3]*B[3],L[0]*B[4]+L[2]*B[5]+L[4],L[1]*B[4]+L[3]*B[5]+L[5]]}static applyTransform(L,B){return[L[0]*B[0]+L[1]*B[2]+B[4],L[0]*B[1]+L[1]*B[3]+B[5]]}static applyInverseTransform(L,B){const te=B[0]*B[3]-B[1]*B[2];return[(L[0]*B[3]-L[1]*B[2]+B[2]*B[5]-B[4]*B[3])/te,(-L[0]*B[1]+L[1]*B[0]+B[4]*B[1]-B[5]*B[0])/te]}static getAxialAlignedBoundingBox(L,B){const te=je.applyTransform(L,B),Ce=je.applyTransform(L.slice(2,4),B),me=je.applyTransform([L[0],L[3]],B),Se=je.applyTransform([L[2],L[1]],B);return[Math.min(te[0],Ce[0],me[0],Se[0]),Math.min(te[1],Ce[1],me[1],Se[1]),Math.max(te[0],Ce[0],me[0],Se[0]),Math.max(te[1],Ce[1],me[1],Se[1])]}static inverseTransform(L){const B=L[0]*L[3]-L[1]*L[2];return[L[3]/B,-L[1]/B,-L[2]/B,L[0]/B,(L[2]*L[5]-L[4]*L[3])/B,(L[4]*L[1]-L[5]*L[0])/B]}static apply3dTransform(L,B){return[L[0]*B[0]+L[1]*B[1]+L[2]*B[2],L[3]*B[0]+L[4]*B[1]+L[5]*B[2],L[6]*B[0]+L[7]*B[1]+L[8]*B[2]]}static singularValueDecompose2dScale(L){const B=[L[0],L[2],L[1],L[3]],te=L[0]*B[0]+L[1]*B[2],Se=L[2]*B[1]+L[3]*B[3],Ye=(te+Se)/2,et=Math.sqrt((te+Se)**2-4*(te*Se-(L[2]*B[0]+L[3]*B[2])*(L[0]*B[1]+L[1]*B[3])))/2,Ct=Ye-et||1;return[Math.sqrt(Ye+et||1),Math.sqrt(Ct)]}static normalizeRect(L){const B=L.slice(0);return L[0]>L[2]&&(B[0]=L[2],B[2]=L[0]),L[1]>L[3]&&(B[1]=L[3],B[3]=L[1]),B}static intersect(L,B){const te=Math.max(Math.min(L[0],L[2]),Math.min(B[0],B[2])),Ce=Math.min(Math.max(L[0],L[2]),Math.max(B[0],B[2]));if(te>Ce)return null;const me=Math.max(Math.min(L[1],L[3]),Math.min(B[1],B[3])),Se=Math.min(Math.max(L[1],L[3]),Math.max(B[1],B[3]));return me>Se?null:[te,me,Ce,Se]}static bezierBoundingBox(L,B,te,Ce,me,Se,Ye,et){const bt=[],Ct=[[],[]];let Vt,cn,cr,rn,sn,Rr,yr,kr;for(let Xo=0;Xo<2;++Xo)if(0===Xo?(cn=6*L-12*te+6*me,Vt=-3*L+9*te-9*me+3*Ye,cr=3*te-3*L):(cn=6*B-12*Ce+6*Se,Vt=-3*B+9*Ce-9*Se+3*et,cr=3*Ce-3*B),Math.abs(Vt)<1e-12){if(Math.abs(cn)<1e-12)continue;rn=-cr/cn,0<rn&&rn<1&&bt.push(rn)}else yr=cn*cn-4*cr*Vt,kr=Math.sqrt(yr),!(yr<0)&&(sn=(-cn+kr)/(2*Vt),0<sn&&sn<1&&bt.push(sn),Rr=(-cn-kr)/(2*Vt),0<Rr&&Rr<1&&bt.push(Rr));let vn,Vn=bt.length;const _s=Vn;for(;Vn--;)rn=bt[Vn],vn=1-rn,Ct[0][Vn]=vn*vn*vn*L+3*vn*vn*rn*te+3*vn*rn*rn*me+rn*rn*rn*Ye,Ct[1][Vn]=vn*vn*vn*B+3*vn*vn*rn*Ce+3*vn*rn*rn*Se+rn*rn*rn*et;return Ct[0][_s]=L,Ct[1][_s]=B,Ct[0][_s+1]=Ye,Ct[1][_s+1]=et,Ct[0].length=Ct[1].length=_s+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}k.Util=je;const U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Xe(K){return decodeURIComponent(escape(K))}},(We,k,X)=>{X(3)},(We,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.isNodeJS=void 0;const X=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);k.isNodeJS=X},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var We,X,p,ce,ae,le,pe,Q,y,bS,P;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:O,NodeCMapReaderFactory:b,NodeStandardFontDataFactory:_}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=O,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=b,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=_}function setPDFNetworkStreamFactory(O){createPDFNetworkStream=O}function getDocument(O){const b=new PDFDocumentLoadingTask;let _;if("string"==typeof O||O instanceof URL)_={url:O};else if((0,_util.isArrayBuffer)(O))_={data:O};else if(O instanceof PDFDataRangeTransport)_={range:O};else{if("object"!=typeof O)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!O.url&&!O.data&&!O.range)throw new Error("Invalid parameter object: need either .data, .range or .url");_=O}const h=Object.create(null);let S=null,H=null;for(const x in _){const u=_[x];switch(x){case"url":if("undefined"!=typeof window)try{h[x]=new URL(u,window.location).href;continue}catch(g){(0,_util.warn)(`Cannot create valid URL: "${g}".`)}else if("string"==typeof u||u instanceof URL){h[x]=u.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":S=u;continue;case"worker":H=u;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&u instanceof Buffer)h[x]=new Uint8Array(u);else{if(u instanceof Uint8Array)break;if("string"==typeof u)h[x]=(0,_util.stringToBytes)(u);else if("object"!=typeof u||null===u||isNaN(u.length)){if(!(0,_util.isArrayBuffer)(u))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");h[x]=new Uint8Array(u)}else h[x]=new Uint8Array(u)}continue}h[x]=u}if(h.CMapReaderFactory=h.CMapReaderFactory||DefaultCMapReaderFactory,h.StandardFontDataFactory=h.StandardFontDataFactory||DefaultStandardFontDataFactory,h.ignoreErrors=!0!==h.stopAtErrors,h.fontExtraProperties=!0===h.fontExtraProperties,h.pdfBug=!0===h.pdfBug,h.enableXfa=!0===h.enableXfa,(!Number.isInteger(h.rangeChunkSize)||h.rangeChunkSize<1)&&(h.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof h.docBaseUrl||(0,_display_utils.isDataScheme)(h.docBaseUrl))&&(h.docBaseUrl=null),(!Number.isInteger(h.maxImageSize)||h.maxImageSize<-1)&&(h.maxImageSize=-1),"string"!=typeof h.cMapUrl&&(h.cMapUrl=null),"string"!=typeof h.standardFontDataUrl&&(h.standardFontDataUrl=null),"boolean"!=typeof h.useWorkerFetch&&(h.useWorkerFetch=h.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&h.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof h.isEvalSupported&&(h.isEvalSupported=!0),"boolean"!=typeof h.disableFontFace&&(h.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof h.useSystemFonts&&(h.useSystemFonts=!_is_node.isNodeJS&&!h.disableFontFace),("object"!=typeof h.ownerDocument||null===h.ownerDocument)&&(h.ownerDocument=globalThis.document),"boolean"!=typeof h.disableRange&&(h.disableRange=!1),"boolean"!=typeof h.disableStream&&(h.disableStream=!1),"boolean"!=typeof h.disableAutoFetch&&(h.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(h.verbosity),!H){const x={verbosity:h.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};H=x.port?PDFWorker.fromPort(x):new PDFWorker(x),b._worker=H}const M=b.docId;return H.promise.then(function(){if(b.destroyed)throw new Error("Loading aborted");const x=_fetchDocument(H,h,S,M),u=new Promise(function(g){let R;S?R=new _transport_stream.PDFDataTransportStream({length:h.length,initialData:h.initialData,progressiveDone:h.progressiveDone,contentDispositionFilename:h.contentDispositionFilename,disableRange:h.disableRange,disableStream:h.disableStream},S):h.data||(R=createPDFNetworkStream({url:h.url,length:h.length,httpHeaders:h.httpHeaders,withCredentials:h.withCredentials,rangeChunkSize:h.rangeChunkSize,disableRange:h.disableRange,disableStream:h.disableStream})),g(R)});return Promise.all([x,u]).then(function([g,R]){if(b.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(M,g,H.port),V=new WorkerTransport(I,b,R,h);b._transport=V,I.send("Ready",null)})}).catch(b._capability.reject),b}function _fetchDocument(O,b,_,h){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(O,b,_,h){if(O.destroyed)throw new Error("Worker was destroyed");_&&(b.length=_.length,b.initialData=_.initialData,b.progressiveDone=_.progressiveDone,b.contentDispositionFilename=_.contentDispositionFilename);const S=yield O.messageHandler.sendWithPromise("GetDocRequest",{docId:h,apiVersion:"2.14.305",source:{data:b.data,url:b.url,password:b.password,disableAutoFetch:b.disableAutoFetch,rangeChunkSize:b.rangeChunkSize,length:b.length},maxImageSize:b.maxImageSize,disableFontFace:b.disableFontFace,docBaseUrl:b.docBaseUrl,ignoreErrors:b.ignoreErrors,isEvalSupported:b.isEvalSupported,fontExtraProperties:b.fontExtraProperties,enableXfa:b.enableXfa,useSystemFonts:b.useSystemFonts,cMapUrl:b.useWorkerFetch?b.cMapUrl:null,standardFontDataUrl:b.useWorkerFetch?b.standardFontDataUrl:null});if(O.destroyed)throw new Error("Worker was destroyed");return S})).apply(this,arguments)}const k=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+vS(k,We)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var b=this;return _asyncToGenerator(function*(){var _;b.destroyed=!0,yield null==(_=b._transport)?void 0:_.destroy(),b._transport=null,b._worker&&(b._worker.destroy(),b._worker=null)})()}};let PDFDocumentLoadingTask=k;We=new WeakMap,vt(PDFDocumentLoadingTask,We,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(b,_,h=!1,S=null){this.length=b,this.initialData=_,this.progressiveDone=h,this.contentDispositionFilename=S,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(b){this._rangeListeners.push(b)}addProgressListener(b){this._progressListeners.push(b)}addProgressiveReadListener(b){this._progressiveReadListeners.push(b)}addProgressiveDoneListener(b){this._progressiveDoneListeners.push(b)}onDataRange(b,_){for(const h of this._rangeListeners)h(b,_)}onDataProgress(b,_){this._readyCapability.promise.then(()=>{for(const h of this._progressListeners)h(b,_)})}onDataProgressiveRead(b){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveReadListeners)_(b)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const b of this._progressiveDoneListeners)b()})}transportReady(){this._readyCapability.resolve()}requestDataRange(b,_){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(b,_){var S,h=this;this._pdfInfo=b,this._transport=_,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(S=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),h.stats||{streamTypes:{},fontTypes:{}}}),function(){return S.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(b){return this._transport.getPage(b)}getPageIndex(b){return this._transport.getPageIndex(b)}getDestinations(){return this._transport.getDestinations()}getDestination(b){return this._transport.getDestination(b)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(b=!1){return this._transport.startCleanup(b||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(b,_,h,S,H=!1){this._pageIndex=b,this._pageInfo=_,this._ownerDocument=S,this._transport=h,this._stats=H?new _display_utils.StatTimer:null,this._pdfBug=H,this.commonObjs=h.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:b,rotation:_=this.rotate,offsetX:h=0,offsetY:S=0,dontFlip:H=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:b,rotation:_,offsetX:h,offsetY:S,dontFlip:H})}getAnnotations({intent:b="display"}={}){const _=this._transport.getRenderingIntent(b);let h=this._annotationPromises.get(_.cacheKey);return h||(h=this._transport.getAnnotations(this._pageIndex,_.renderingIntent),this._annotationPromises.set(_.cacheKey,h),h=h.then(S=>{for(const H of S)void 0!==H.titleObj&&Object.defineProperty(H,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),H.titleObj.str)}),void 0!==H.contentsObj&&Object.defineProperty(H,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),H.contentsObj.str)});return S})),h}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var b=this;return _asyncToGenerator(function*(){var _;return(null==(_=b._transport._htmlForXfa)?void 0:_.children[b._pageIndex])||null})()}render({canvasContext:b,viewport:_,intent:h="display",annotationMode:S=_util.AnnotationMode.ENABLE,transform:H=null,imageLayer:M=null,canvasFactory:x=null,background:u=null,optionalContentConfigPromise:g=null,annotationCanvasMap:R=null,pageColors:I=null}){var Ie,de;void 0!==(null==(Ie=arguments[0])?void 0:Ie.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&S===_util.AnnotationMode.ENABLE&&(S=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(de=arguments[0])?void 0:de.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&S===_util.AnnotationMode.ENABLE&&(S=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const V=this._transport.getRenderingIntent(h,S);this.pendingCleanup=!1,g||(g=this._transport.getOptionalContentConfig());let Y=this._intentStates.get(V.cacheKey);Y||(Y=Object.create(null),this._intentStates.set(V.cacheKey,Y)),Y.streamReaderCancelTimeout&&(clearTimeout(Y.streamReaderCancelTimeout),Y.streamReaderCancelTimeout=null);const ne=x||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),re=!!(V.renderingIntent&_util.RenderingIntentFlag.PRINT);Y.displayReadyCapability||(Y.displayReadyCapability=(0,_util.createPromiseCapability)(),Y.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(V));const ue=Me=>{Y.renderTasks.delete(ve),(this.cleanupAfterRender||re)&&(this.pendingCleanup=!0),this._tryCleanup(),Me?(ve.capability.reject(Me),this._abortOperatorList({intentState:Y,reason:Me instanceof Error?Me:new Error(Me)})):ve.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},ve=new InternalRenderTask({callback:ue,params:{canvasContext:b,viewport:_,transform:H,imageLayer:M,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:Y.operatorList,pageIndex:this._pageIndex,canvasFactory:ne,useRequestAnimationFrame:!re,pdfBug:this._pdfBug,pageColors:I});(Y.renderTasks||(Y.renderTasks=new Set)).add(ve);const we=ve.task;return Promise.all([Y.displayReadyCapability.promise,g]).then(([Me,Pe])=>{this.pendingCleanup?ue():(this._stats&&this._stats.time("Rendering"),ve.initializeGraphics({transparency:Me,optionalContentConfig:Pe}),ve.operatorListChanged())}).catch(ue),we}getOperatorList({intent:b="display",annotationMode:_=_util.AnnotationMode.ENABLE}={}){const S=this._transport.getRenderingIntent(b,_,!0);let M,H=this._intentStates.get(S.cacheKey);return H||(H=Object.create(null),this._intentStates.set(S.cacheKey,H)),H.opListReadCapability||(M=Object.create(null),M.operatorListChanged=function h(){H.operatorList.lastChunk&&(H.opListReadCapability.resolve(H.operatorList),H.renderTasks.delete(M))},H.opListReadCapability=(0,_util.createPromiseCapability)(),(H.renderTasks||(H.renderTasks=new Set)).add(M),H.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(S)),H.opListReadCapability.promise}streamTextContent({disableCombineTextItems:b=!1,includeMarkedContent:_=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==b,includeMarkedContent:!0===_},{highWaterMark:100,size:S=>S.items.length})}getTextContent(b={}){if(this._transport._htmlForXfa)return this.getXfa().then(h=>_xfa_text.XfaText.textContent(h));const _=this.streamTextContent(b);return new Promise(function(h,S){const M=_.getReader(),x={items:[],styles:Object.create(null)};!function H(){M.read().then(function({value:u,done:g}){g?h(x):(Object.assign(x.styles,u.styles),x.items.push(...u.items),H())},S)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const b=[];for(const _ of this._intentStates.values())if(this._abortOperatorList({intentState:_,reason:new Error("Page was destroyed."),force:!0}),!_.opListReadCapability)for(const h of _.renderTasks)b.push(h.completed),h.cancel();this.objs.clear();for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(b)}cleanup(b=!1){return this.pendingCleanup=!0,this._tryCleanup(b)}_tryCleanup(b=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:_,operatorList:h}of this._intentStates.values())if(_.size>0||!h.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,b&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(b,_){const h=this._intentStates.get(_);!h||(this._stats&&this._stats.timeEnd("Page Request"),h.displayReadyCapability&&h.displayReadyCapability.resolve(b))}_renderPageChunk(b,_){for(let h=0,S=b.length;h<S;h++)_.operatorList.fnArray.push(b.fnArray[h]),_.operatorList.argsArray.push(b.argsArray[h]);_.operatorList.lastChunk=b.lastChunk;for(const h of _.renderTasks)h.operatorListChanged();b.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:b,cacheKey:_}){const S=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:b,cacheKey:_,annotationStorage:b&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),H=this._intentStates.get(_);H.streamReader=S;const M=()=>{S.read().then(({value:x,done:u})=>{u?H.streamReader=null:this._transport.destroyed||(this._renderPageChunk(x,H),M())},x=>{if(H.streamReader=null,!this._transport.destroyed){if(H.operatorList){H.operatorList.lastChunk=!0;for(const u of H.renderTasks)u.operatorListChanged();this._tryCleanup()}if(H.displayReadyCapability)H.displayReadyCapability.reject(x);else{if(!H.opListReadCapability)throw x;H.opListReadCapability.reject(x)}}})};M()}_abortOperatorList({intentState:b,reason:_,force:h=!1}){if(b.streamReader){if(!h){if(b.renderTasks.size>0)return;if(_ instanceof _display_utils.RenderingCancelledException)return void(b.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:b,reason:_,force:!0}),b.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(b.streamReader.cancel(new _util.AbortException(_.message)).catch(()=>{}),b.streamReader=null,!this._transport.destroyed){for(const[S,H]of this._intentStates)if(H===b){this._intentStates.delete(S);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(b,_){const h={data:structuredClone(b,_)};this._deferred.then(()=>{for(const S of this._listeners)S.call(this,h)})}addEventListener(b,_){this._listeners.push(_)}removeEventListener(b,_){const h=this._listeners.indexOf(_);this._listeners.splice(h,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const O=null==(X=null==document?void 0:document.currentScript)?void 0:X.src;O&&(PDFWorkerUtil.fallbackWorkerSrc=O.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(O,b){let _;try{if(_=new URL(O),!_.origin||"null"===_.origin)return!1}catch(S){return!1}const h=new URL(b,_);return _.origin===h.origin},PDFWorkerUtil.createCDNWrapper=function(O){return URL.createObjectURL(new Blob([`importScripts("${O}");`]))};const _PDFWorker=class{constructor({name:O=null,port:b=null,verbosity:_=(0,_util.getVerbosityLevel)()}={}){if(b&&ft(_PDFWorker,p).has(b))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=O,this.destroyed=!1,this.verbosity=_,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,b)return ft(_PDFWorker,p).set(b,this),void this._initializeFromPort(b);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(O){this._port=O,this._messageHandler=new _message_handler.MessageHandler("main","worker",O),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let O=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,O)||(O=PDFWorkerUtil.createCDNWrapper(new URL(O,window.location).href));const b=new Worker(O),_=new _message_handler.MessageHandler("main","worker",b),h=()=>{b.removeEventListener("error",S),_.destroy(),b.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},S=()=>{this._webWorker||h()};b.addEventListener("error",S),_.on("test",M=>{b.removeEventListener("error",S),this.destroyed?h():M?(this._messageHandler=_,this._port=b,this._webWorker=b,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),_.destroy(),b.terminate())}),_.on("ready",M=>{if(b.removeEventListener("error",S),this.destroyed)h();else try{H()}catch(x){this._setupFakeWorker()}});const H=()=>{const M=new Uint8Array;_.send("test",M,[M.buffer])};return void H()}catch(b){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(O=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const b=new LoopbackPort;this._port=b;const _="fake"+PDFWorkerUtil.fakeWorkerId++,h=new _message_handler.MessageHandler(_+"_worker",_,b);O.setup(h,b);const S=new _message_handler.MessageHandler(_,_+"_worker",b);this._messageHandler=S,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})}).catch(O=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${O.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ft(_PDFWorker,p).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(O){if(!(null==O?void 0:O.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ft(this,p).has(O.port)?ft(this,p).get(O.port):new _PDFWorker(O)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var O;try{return(null==(O=globalThis.pdfjsWorker)?void 0:O.WorkerMessageHandler)||null}catch(b){return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function O(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;p=new WeakMap,vt(PDFWorker,p,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(b,_,h,S){vt(this,ce,null),vt(this,ae,new Map),vt(this,le,new Map),vt(this,pe,null),this.messageHandler=b,this.loadingTask=_,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:_.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:S.ownerDocument,styleElement:S.styleElement}),this._params=S,S.useWorkerFetch||(this.CMapReaderFactory=new S.CMapReaderFactory({baseUrl:S.cMapUrl,isCompressed:S.cMapPacked}),this.StandardFontDataFactory=new S.StandardFontDataFactory({baseUrl:S.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=h,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return ft(this,ce)}getRenderingIntent(b,_=_util.AnnotationMode.ENABLE,h=!1){let S=_util.RenderingIntentFlag.DISPLAY,H="";switch(b){case"any":S=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":S=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${b}`)}switch(_){case _util.AnnotationMode.DISABLE:S+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:S+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:S+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,H=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${_}`)}return h&&(S+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:S,cacheKey:`${S}_${H}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const b=[];for(const h of ft(this,ae).values())b.push(h._destroy());ft(this,ae).clear(),ft(this,le).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const _=this.messageHandler.sendWithPromise("Terminate",null);return b.push(_),Promise.all(b).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),dn(this,pe,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:b,loadingTask:_}=this;b.on("GetReader",(h,S)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=H=>{this._lastProgress={loaded:H.loaded,total:H.total}},S.onPull=()=>{this._fullReader.read().then(function({value:H,done:M}){M?S.close():((0,_util.assert)((0,_util.isArrayBuffer)(H),"GetReader - expected an ArrayBuffer."),S.enqueue(new Uint8Array(H),1,[H]))}).catch(H=>{S.error(H)})},S.onCancel=H=>{this._fullReader.cancel(H),S.ready.catch(M=>{if(!this.destroyed)throw M})}}),b.on("ReaderHeadersReady",h=>{const S=(0,_util.createPromiseCapability)(),H=this._fullReader;return H.headersReady.then(()=>{var M;(!H.isStreamingSupported||!H.isRangeSupported)&&(this._lastProgress&&(null==(M=_.onProgress)||M.call(_,this._lastProgress)),H.onProgress=x=>{var u;null==(u=_.onProgress)||u.call(_,{loaded:x.loaded,total:x.total})}),S.resolve({isStreamingSupported:H.isStreamingSupported,isRangeSupported:H.isRangeSupported,contentLength:H.contentLength})},S.reject),S.promise}),b.on("GetRangeReader",(h,S)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const H=this._networkStream.getRangeReader(h.begin,h.end);H?(S.onPull=()=>{H.read().then(function({value:M,done:x}){x?S.close():((0,_util.assert)((0,_util.isArrayBuffer)(M),"GetRangeReader - expected an ArrayBuffer."),S.enqueue(new Uint8Array(M),1,[M]))}).catch(M=>{S.error(M)})},S.onCancel=M=>{H.cancel(M),S.ready.catch(x=>{if(!this.destroyed)throw x})}):S.close()}),b.on("GetDoc",({pdfInfo:h})=>{this._numPages=h.numPages,this._htmlForXfa=h.htmlForXfa,delete h.htmlForXfa,_._capability.resolve(new PDFDocumentProxy(h,this))}),b.on("DocException",function(h){let S;switch(h.name){case"PasswordException":S=new _util.PasswordException(h.message,h.code);break;case"InvalidPDFException":S=new _util.InvalidPDFException(h.message);break;case"MissingPDFException":S=new _util.MissingPDFException(h.message);break;case"UnexpectedResponseException":S=new _util.UnexpectedResponseException(h.message,h.status);break;case"UnknownErrorException":S=new _util.UnknownErrorException(h.message,h.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}_._capability.reject(S)}),b.on("PasswordRequest",h=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),_.onPassword){const S=H=>{H instanceof Error?this._passwordCapability.reject(H):this._passwordCapability.resolve({password:H})};try{_.onPassword(S,h.code)}catch(H){this._passwordCapability.reject(H)}}else this._passwordCapability.reject(new _util.PasswordException(h.message,h.code));return this._passwordCapability.promise}),b.on("DataLoaded",h=>{var S;null==(S=_.onProgress)||S.call(_,{loaded:h.length,total:h.length}),this.downloadInfoCapability.resolve(h)}),b.on("StartRenderPage",h=>{this.destroyed||ft(this,ae).get(h.pageIndex)._startRenderPage(h.transparency,h.cacheKey)}),b.on("commonobj",([h,S,H])=>{var M;if(!this.destroyed&&!this.commonObjs.has(h))switch(S){case"Font":const x=this._params;if("error"in H){const R=H.error;(0,_util.warn)(`Error during font loading: ${R}`),this.commonObjs.resolve(h,R);break}let u=null;x.pdfBug&&(null==(M=globalThis.FontInspector)?void 0:M.enabled)&&(u={registerFont(R,I){globalThis.FontInspector.fontAdded(R,I)}});const g=new _font_loader.FontFaceObject(H,{isEvalSupported:x.isEvalSupported,disableFontFace:x.disableFontFace,ignoreErrors:x.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(g).catch(R=>b.sendWithPromise("FontFallback",{id:h})).finally(()=>{!x.fontExtraProperties&&g.data&&(g.data=null),this.commonObjs.resolve(h,g)});break;case"FontPath":case"Image":this.commonObjs.resolve(h,H);break;default:throw new Error(`Got unknown common object type ${S}`)}}),b.on("obj",([h,S,H,M])=>{var u;if(this.destroyed)return;const x=ft(this,ae).get(S);if(!x.objs.has(h))switch(H){case"Image":x.objs.resolve(h,M);const g=8e6;if(M){let R;if(M.bitmap){const{bitmap:I,width:V,height:Y}=M;R=V*Y*4,x._bitmaps.add(I)}else R=(null==(u=M.data)?void 0:u.length)||0;R>g&&(x.cleanupAfterRender=!0)}break;case"Pattern":x.objs.resolve(h,M);break;default:throw new Error(`Got unknown object type ${H}`)}}),b.on("DocProgress",h=>{var S;this.destroyed||null==(S=_.onProgress)||S.call(_,{loaded:h.loaded,total:h.total})}),b.on("DocStats",h=>{this.destroyed||dn(this,ce,Object.freeze({streamTypes:Object.freeze(h.streamTypes),fontTypes:Object.freeze(h.fontTypes)}))}),b.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),b.on("FetchBuiltInCMap",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),b.on("FetchStandardFontData",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:b}){var _,h;this.destroyed||null==(h=(_=this.loadingTask).onUnsupportedFeature)||h.call(_,b)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(b){if(!Number.isInteger(b)||b<=0||b>this._numPages)return Promise.reject(new Error("Invalid page request."));const _=b-1,h=ft(this,le).get(_);if(h)return h;const S=this.messageHandler.sendWithPromise("GetPage",{pageIndex:_}).then(H=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(_,H,this,this._params.ownerDocument,this._params.pdfBug);return ft(this,ae).set(_,M),M});return ft(this,le).set(_,S),S}getPageIndex(b){return"object"!=typeof b||null===b||!Number.isInteger(b.num)||b.num<0||!Number.isInteger(b.gen)||b.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:b.num,gen:b.gen})}getAnnotations(b,_){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:b,intent:_})}saveDocument(){var b,_;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(_=null==(b=this._fullReader)?void 0:b.filename)?_:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(b){return"string"!=typeof b?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:b})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(b){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:b})}getStructTree(b){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:b})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(b=>new _optional_content_config.OptionalContentConfig(b))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return ft(this,pe)||dn(this,pe,this.messageHandler.sendWithPromise("GetMetadata",null).then(b=>{var _,h,S,H;return{info:b[0],metadata:b[1]?new _metadata.Metadata(b[1]):null,contentDispositionFilename:null!=(h=null==(_=this._fullReader)?void 0:_.filename)?h:null,contentLength:null!=(H=null==(S=this._fullReader)?void 0:S.contentLength)?H:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(b=!1){var _=this;return _asyncToGenerator(function*(){if(yield _.messageHandler.sendWithPromise("Cleanup",null),!_.destroyed){for(const h of ft(_,ae).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);_.commonObjs.clear(),b||_.fontLoader.clear(),dn(_,pe,null),_._getFieldObjectsPromise=null,_._hasJSActionsPromise=null}})()}get loadingParams(){const b=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:b.disableAutoFetch,enableXfa:b.enableXfa})}}ce=new WeakMap,ae=new WeakMap,le=new WeakMap,pe=new WeakMap;class PDFObjects{constructor(){vt(this,y),vt(this,Q,Object.create(null))}get(b,_=null){if(_){const S=mt(this,y,bS).call(this,b);return S.capability.promise.then(()=>_(S.data)),null}const h=ft(this,Q)[b];if(!(null==h?void 0:h.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${b}.`);return h.data}has(b){const _=ft(this,Q)[b];return(null==_?void 0:_.capability.settled)||!1}resolve(b,_=null){const h=mt(this,y,bS).call(this,b);h.data=_,h.capability.resolve()}clear(){dn(this,Q,Object.create(null))}}Q=new WeakMap,y=new WeakSet,bS=function(b){return ft(this,Q)[b]||(ft(this,Q)[b]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(b){this._internalRenderTask=b,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const N=class{constructor({callback:b,params:_,objs:h,commonObjs:S,annotationCanvasMap:H,operatorList:M,pageIndex:x,canvasFactory:u,useRequestAnimationFrame:g=!1,pdfBug:R=!1,pageColors:I=null}){this.callback=b,this.params=_,this.objs=h,this.commonObjs=S,this.annotationCanvasMap=H,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=x,this.canvasFactory=u,this._pdfBug=R,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===g&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=_.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:b=!1,optionalContentConfig:_}){var u;if(this.cancelled)return;if(this._canvas){if(ft(N,P).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ft(N,P).add(this._canvas)}this._pdfBug&&(null==(u=globalThis.StepperManager)?void 0:u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:S,transform:H,imageLayer:M,background:x}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,M,_,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:H,viewport:S,transparency:b,background:x}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(b=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&ft(N,P).delete(this._canvas),this.callback(b||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var b=this;return _asyncToGenerator(function*(){b.cancelled||(b.operatorListIdx=b.gfx.executeOperatorList(b.operatorList,b.operatorListIdx,b._continueBound,b.stepper),b.operatorListIdx===b.operatorList.argsArray.length&&(b.running=!1,b.operatorList.lastChunk&&(b.gfx.endDrawing(),b._canvas&&ft(N,P).delete(b._canvas),b.callback())))})()}};let InternalRenderTask=N;P=new WeakMap,vt(InternalRenderTask,P,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.StatTimer=k.RenderingCancelledException=k.PixelsPerInch=k.PageViewport=k.PDFDateString=k.DOMStandardFontDataFactory=k.DOMSVGFactory=k.DOMCanvasFactory=k.DOMCMapReaderFactory=void 0,k.deprecated=function g(ne){console.log("Deprecated API usage: "+ne)},k.getFilenameFromUrl=function S(ne){const re=ne.indexOf("#"),ue=ne.indexOf("?"),ve=Math.min(re>0?re:ne.length,ue>0?ue:ne.length);return ne.substring(ne.lastIndexOf("/",ve)+1,ve)},k.getPdfFilenameFromUrl=function H(ne,re="document.pdf"){if("string"!=typeof ne)return re;if(_(ne))return(0,ce.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),re;const ve=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,we=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(ne);let Ie=ve.exec(we[1])||ve.exec(we[2])||ve.exec(we[3]);if(Ie&&(Ie=Ie[0],Ie.includes("%")))try{Ie=ve.exec(decodeURIComponent(Ie))[0]}catch(de){}return Ie||re},k.getXfaPageViewport=function V(ne,{scale:re=1,rotation:ue=0}){const{width:ve,height:we}=ne.attributes.style,Ie=[0,0,parseInt(ve),parseInt(we)];return new O({viewBox:Ie,scale:re,rotation:ue})},k.isDataScheme=_,k.isPdfFile=function h(ne){return"string"==typeof ne&&/\.pdf$/i.test(ne)},k.isValidFetchUrl=x,k.loadScript=function u(ne,re=!1){return new Promise((ue,ve)=>{const we=document.createElement("script");we.src=ne,we.onload=function(Ie){re&&we.remove(),ue(Ie)},we.onerror=function(){ve(new Error(`Cannot load script at: ${we.src}`))},(document.head||document.documentElement).appendChild(we)})};var p=X(6),ce=X(1);const Y=class{};let R,le=Y;function Q(ne){return y.apply(this,arguments)}function y(){return(y=_asyncToGenerator(function*(ne,re=!1){if(x(ne,document.baseURI)){const ue=yield fetch(ne);if(!ue.ok)throw new Error(ue.statusText);return re?new Uint8Array(yield ue.arrayBuffer()):(0,ce.stringToBytes)(yield ue.text())}return new Promise((ue,ve)=>{const we=new XMLHttpRequest;we.open("GET",ne,!0),re&&(we.responseType="arraybuffer"),we.onreadystatechange=()=>{if(we.readyState===XMLHttpRequest.DONE){if(200===we.status||0===we.status){let Ie;if(re&&we.response?Ie=new Uint8Array(we.response):!re&&we.responseText&&(Ie=(0,ce.stringToBytes)(we.responseText)),Ie)return void ue(Ie)}ve(new Error(we.statusText))}},we.send(null)})})).apply(this,arguments)}Cu(le,"CSS",96),Cu(le,"PDF",72),Cu(le,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF),k.PixelsPerInch=le,k.DOMCanvasFactory=class pe extends p.BaseCanvasFactory{constructor({ownerDocument:re=globalThis.document}={}){super(),this._document=re}_createCanvas(re,ue){const ve=this._document.createElement("canvas");return ve.width=re,ve.height=ue,ve}},k.DOMCMapReaderFactory=class $ extends p.BaseCMapReaderFactory{_fetchData(re,ue){return Q(re,this.isCompressed).then(ve=>({cMapData:ve,compressionType:ue}))}},k.DOMStandardFontDataFactory=class P extends p.BaseStandardFontDataFactory{_fetchData(re){return Q(re,!0)}},k.DOMSVGFactory=class N extends p.BaseSVGFactory{_createSVG(re){return document.createElementNS("http://www.w3.org/2000/svg",re)}};class O{constructor({viewBox:re,scale:ue,rotation:ve,offsetX:we=0,offsetY:Ie=0,dontFlip:de=!1}){this.viewBox=re,this.scale=ue,this.rotation=ve,this.offsetX=we,this.offsetY=Ie;const Me=(re[2]+re[0])/2,Pe=(re[3]+re[1])/2;let Fe,$e,J,v,E,d,C,D;switch((ve%=360)<0&&(ve+=360),ve){case 180:Fe=-1,$e=0,J=0,v=1;break;case 90:Fe=0,$e=1,J=1,v=0;break;case 270:Fe=0,$e=-1,J=-1,v=0;break;case 0:Fe=1,$e=0,J=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}de&&(J=-J,v=-v),0===Fe?(E=Math.abs(Pe-re[1])*ue+we,d=Math.abs(Me-re[0])*ue+Ie,C=Math.abs(re[3]-re[1])*ue,D=Math.abs(re[2]-re[0])*ue):(E=Math.abs(Me-re[0])*ue+we,d=Math.abs(Pe-re[1])*ue+Ie,C=Math.abs(re[2]-re[0])*ue,D=Math.abs(re[3]-re[1])*ue),this.transform=[Fe*ue,$e*ue,J*ue,v*ue,E-Fe*ue*Me-J*ue*Pe,d-$e*ue*Me-v*ue*Pe],this.width=C,this.height=D}clone({scale:re=this.scale,rotation:ue=this.rotation,offsetX:ve=this.offsetX,offsetY:we=this.offsetY,dontFlip:Ie=!1}={}){return new O({viewBox:this.viewBox.slice(),scale:re,rotation:ue,offsetX:ve,offsetY:we,dontFlip:Ie})}convertToViewportPoint(re,ue){return ce.Util.applyTransform([re,ue],this.transform)}convertToViewportRectangle(re){const ue=ce.Util.applyTransform([re[0],re[1]],this.transform),ve=ce.Util.applyTransform([re[2],re[3]],this.transform);return[ue[0],ue[1],ve[0],ve[1]]}convertToPdfPoint(re,ue){return ce.Util.applyInverseTransform([re,ue],this.transform)}}function _(ne){const re=ne.length;let ue=0;for(;ue<re&&""===ne[ue].trim();)ue++;return"data:"===ne.substring(ue,ue+5).toLowerCase()}function x(ne,re){try{const{protocol:ue}=re?new URL(ne,re):new URL(ne);return"http:"===ue||"https:"===ue}catch(ue){return!1}}k.PageViewport=O,k.RenderingCancelledException=class b extends ce.BaseException{constructor(re,ue){super(re,"RenderingCancelledException"),this.type=ue}},k.StatTimer=class M{constructor(){this.started=Object.create(null),this.times=[]}time(re){re in this.started&&(0,ce.warn)(`Timer is already running for ${re}`),this.started[re]=Date.now()}timeEnd(re){re in this.started||(0,ce.warn)(`Timer has not been started for ${re}`),this.times.push({name:re,start:this.started[re],end:Date.now()}),delete this.started[re]}toString(){const re=[];let ue=0;for(const ve of this.times){const we=ve.name;we.length>ue&&(ue=we.length)}for(const ve of this.times){const we=ve.end-ve.start;re.push(`${ve.name.padEnd(ue)} ${we}ms\n`)}return re.join("")}},k.PDFDateString=class I{static toDateObject(re){if(!re||"string"!=typeof re)return null;R||(R=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ue=R.exec(re);if(!ue)return null;const ve=parseInt(ue[1],10);let we=parseInt(ue[2],10);we=we>=1&&we<=12?we-1:0;let Ie=parseInt(ue[3],10);Ie=Ie>=1&&Ie<=31?Ie:1;let de=parseInt(ue[4],10);de=de>=0&&de<=23?de:0;let Me=parseInt(ue[5],10);Me=Me>=0&&Me<=59?Me:0;let Pe=parseInt(ue[6],10);Pe=Pe>=0&&Pe<=59?Pe:0;const Fe=ue[7]||"Z";let $e=parseInt(ue[8],10);$e=$e>=0&&$e<=23?$e:0;let J=parseInt(ue[9],10)||0;return J=J>=0&&J<=59?J:0,"-"===Fe?(de+=$e,Me+=J):"+"===Fe&&(de-=$e,Me-=J),new Date(Date.UTC(ve,we,Ie,de,Me,Pe))}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.BaseStandardFontDataFactory=k.BaseSVGFactory=k.BaseCanvasFactory=k.BaseCMapReaderFactory=void 0;var p=X(1);class ce{constructor(){this.constructor===ce&&(0,p.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,$){if(y<=0||$<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(y,$);return{canvas:P,context:P.getContext("2d")}}reset(y,$,P){if(!y.canvas)throw new Error("Canvas is not specified");if($<=0||P<=0)throw new Error("Invalid canvas size");y.canvas.width=$,y.canvas.height=P}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,$){(0,p.unreachable)("Abstract method `_createCanvas` called.")}}k.BaseCanvasFactory=ce;class ae{constructor({baseUrl:y=null,isCompressed:$=!1}){this.constructor===ae&&(0,p.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=$}fetch({name:y}){var $=this;return _asyncToGenerator(function*(){if(!$.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const P=$.baseUrl+y+($.isCompressed?".bcmap":"");return $._fetchData(P,$.isCompressed?p.CMapCompressionType.BINARY:p.CMapCompressionType.NONE).catch(O=>{throw new Error(`Unable to load ${$.isCompressed?"binary ":""}CMap at: ${P}`)})})()}_fetchData(y,$){(0,p.unreachable)("Abstract method `_fetchData` called.")}}k.BaseCMapReaderFactory=ae;class le{constructor({baseUrl:y=null}){this.constructor===le&&(0,p.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}fetch({filename:y}){var $=this;return _asyncToGenerator(function*(){if(!$.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const P=`${$.baseUrl}${y}`;return $._fetchData(P).catch(N=>{throw new Error(`Unable to load font data at: ${P}`)})})()}_fetchData(y){(0,p.unreachable)("Abstract method `_fetchData` called.")}}k.BaseStandardFontDataFactory=le;class pe{constructor(){this.constructor===pe&&(0,p.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,$){if(y<=0||$<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),P.setAttribute("width",`${y}px`),P.setAttribute("height",`${$}px`),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${y} ${$}`),P}createElement(y){if("string"!=typeof y)throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,p.unreachable)("Abstract method `_createSVG` called.")}}k.BaseSVGFactory=pe},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.FontLoader=k.FontFaceObject=void 0;var p=X(1);class ce{constructor({docId:Q,onUnsupportedFeature:y,ownerDocument:$=globalThis.document,styleElement:P=null}){this.constructor===ce&&(0,p.unreachable)("Cannot initialize BaseFontLoader."),this.docId=Q,this._onUnsupportedFeature=y,this._document=$,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(Q){this.nativeFontFaces.push(Q),this._document.fonts.add(Q)}insertRule(Q){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(y));const $=y.sheet;$.insertRule(Q,$.cssRules.length)}clear(){for(const Q of this.nativeFontFaces)this._document.fonts.delete(Q);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(Q){var y=this;return _asyncToGenerator(function*(){if(Q.attached||Q.missingFile)return;if(Q.attached=!0,y.isFontLoadingAPISupported){const P=Q.createNativeFontFace();if(P){y.addNativeFontFace(P);try{yield P.loaded}catch(N){throw y._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,p.warn)(`Failed to load font '${P.family}': '${N}'.`),Q.disableFontFace=!0,N}}return}const $=Q.createFontFaceRule();if($){if(y.insertRule($),y.isSyncFontLoadingSupported)return;yield new Promise(P=>{const N=y._queueLoadingCallback(P);y._prepareFontLoadEvent([$],[Q],N)})}})()}_queueLoadingCallback(Q){(0,p.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var y;const Q=!!(null==(y=this._document)?void 0:y.fonts);return(0,p.shadow)(this,"isFontLoadingAPISupported",Q)}get isSyncFontLoadingSupported(){(0,p.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,p.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(Q,y,$){(0,p.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let ae;k.FontLoader=ae,k.FontLoader=ae=class extends ce{constructor(Q){super(Q),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let Q=!1;if("undefined"==typeof navigator)Q=!0;else{const y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==y?void 0:y[1])>=14&&(Q=!0)}return(0,p.shadow)(this,"isSyncFontLoadingSupported",Q)}_queueLoadingCallback(Q){const $=this.loadingContext,P={id:"pdfjs-font-loading-"+$.nextRequestId++,done:!1,complete:function y(){for((0,p.assert)(!P.done,"completeRequest() cannot be called twice."),P.done=!0;$.requests.length>0&&$.requests[0].done;){const N=$.requests.shift();setTimeout(N.callback,0)}},callback:Q};return $.requests.push(P),P}get _loadTestFont(){return(0,p.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(Q,y,$){function P(ue,ve){return ue.charCodeAt(ve)<<24|ue.charCodeAt(ve+1)<<16|ue.charCodeAt(ve+2)<<8|255&ue.charCodeAt(ve+3)}function N(ue,ve,we,Ie){return ue.substring(0,ve)+Ie+ue.substring(ve+we)}let O,b;const _=this._document.createElement("canvas");_.width=1,_.height=1;const h=_.getContext("2d");let S=0;const M=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=N(x,976,M.length,M);const R=1482184792;let I=P(x,16);for(O=0,b=M.length-3;O<b;O+=4)I=I-R+P(M,O)|0;O<M.length&&(I=I-R+P(M+"XXX",O)|0),x=N(x,16,4,(0,p.string32)(I));const V=`url(data:font/opentype;base64,${btoa(x)});`;this.insertRule(`@font-face {font-family:"${M}";src:${V}}`);const ne=[];for(const ue of y)ne.push(ue.loadedName);ne.push(M);const re=this._document.createElement("div");re.style.visibility="hidden",re.style.width=re.style.height="10px",re.style.position="absolute",re.style.top=re.style.left="0px";for(const ue of ne){const ve=this._document.createElement("span");ve.textContent="Hi",ve.style.fontFamily=ue,re.appendChild(ve)}this._document.body.appendChild(re),function H(ue,ve){if(S++,S>30)return(0,p.warn)("Load test font never loaded."),void ve();h.font="30px "+ue,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0?ve():setTimeout(H.bind(null,ue,ve))}(M,()=>{re.remove(),$.complete()})}},k.FontFaceObject=class le{constructor(Q,{isEvalSupported:y=!0,disableFontFace:$=!1,ignoreErrors:P=!1,onUnsupportedFeature:N,fontRegistry:O=null}){this.compiledGlyphs=Object.create(null);for(const b in Q)this[b]=Q[b];this.isEvalSupported=!1!==y,this.disableFontFace=!0===$,this.ignoreErrors=!0===P,this._onUnsupportedFeature=N,this.fontRegistry=O}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let Q;if(this.cssFontInfo){const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Q=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}else Q=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),Q}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const Q=(0,p.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(Q)});`;let $;if(this.cssFontInfo){let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${y}}`}else $=`@font-face {font-family:"${this.loadedName}";src:${y}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,y),$}getPathGenerator(Q,y){if(void 0!==this.compiledGlyphs[y])return this.compiledGlyphs[y];let $;try{$=Q.get(this.loadedName+"_path_"+y)}catch(P){if(!this.ignoreErrors)throw P;return this._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,p.warn)(`getPathGenerator - ignoring character: "${P}".`),this.compiledGlyphs[y]=function(N,O){}}if(this.isEvalSupported&&p.FeatureTest.isEvalSupported){const P=[];for(const N of $){const O=void 0!==N.args?N.args.join(","):"";P.push("c.",N.cmd,"(",O,");\n")}return this.compiledGlyphs[y]=new Function("c","size",P.join(""))}return this.compiledGlyphs[y]=function(P,N){for(const O of $)"scale"===O.cmd&&(O.args=[N,-N]),P[O.cmd].apply(P,O.args)}}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.AnnotationStorage=void 0;var p=X(9),ce=X(1);k.AnnotationStorage=class ae{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(pe,Q){const y=this._storage.get(pe);return void 0===y?Q:Object.assign(Q,y)}getRawValue(pe){return this._storage.get(pe)}setValue(pe,Q){const y=this._storage.get(pe);let $=!1;if(void 0!==y)for(const[P,N]of Object.entries(Q))y[P]!==N&&($=!0,y[P]=N);else $=!0,this._storage.set(pe,Q);$&&this._setModified()}getAll(){return this._storage.size>0?(0,ce.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const pe=new p.MurmurHash3_64;for(const[Q,y]of this._storage)pe.update(`${Q}:${JSON.stringify(y)}`);return pe.hexdigest()}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.MurmurHash3_64=void 0;var p=X(1);const ce=3285377520,ae=4294901760,le=65535;k.MurmurHash3_64=class pe{constructor(y){this.h1=y?4294967295&y:ce,this.h2=y?4294967295&y:ce}update(y){let $,P;if("string"==typeof y){$=new Uint8Array(2*y.length),P=0;for(let R=0,I=y.length;R<I;R++){const V=y.charCodeAt(R);V<=255?$[P++]=V:($[P++]=V>>>8,$[P++]=255&V)}}else{if(!(0,p.isArrayBuffer)(y))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");$=y.slice(),P=$.byteLength}const N=P>>2,O=P-4*N,b=new Uint32Array($.buffer,0,N);let _=0,h=0,S=this.h1,H=this.h2;const M=3432918353,x=461845907,u=M&le,g=x&le;for(let R=0;R<N;R++)1&R?(_=b[R],_=_*M&ae|_*u&le,_=_<<15|_>>>17,_=_*x&ae|_*g&le,S^=_,S=S<<13|S>>>19,S=5*S+3864292196):(h=b[R],h=h*M&ae|h*u&le,h=h<<15|h>>>17,h=h*x&ae|h*g&le,H^=h,H=H<<13|H>>>19,H=5*H+3864292196);switch(_=0,O){case 3:_^=$[4*N+2]<<16;case 2:_^=$[4*N+1]<<8;case 1:_^=$[4*N],_=_*M&ae|_*u&le,_=_<<15|_>>>17,_=_*x&ae|_*g&le,1&N?S^=_:H^=_}this.h1=S,this.h2=H}hexdigest(){let y=this.h1,$=this.h2;y^=$>>>1,y=3981806797*y&ae|36045*y&le,$=4283543511*$&ae|(2950163797*($<<16|y>>>16)&ae)>>>16,y^=$>>>1,y=444984403*y&ae|60499*y&le,$=3301882366*$&ae|(3120437893*($<<16|y>>>16)&ae)>>>16,y^=$>>>1;const P=(y>>>0).toString(16),N=($>>>0).toString(16);return P.padStart(8,"0")+N.padStart(8,"0")}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.CanvasGraphics=void 0;var p=X(1),ce=X(11),ae=X(12),le=X(3),pe=X(5);const $=4096,_=16;function H(J){if(J._transformStack&&(J._transformStack=[]),!J.mozCurrentTransform){J._originalSave=J.save,J._originalRestore=J.restore,J._originalRotate=J.rotate,J._originalScale=J.scale,J._originalTranslate=J.translate,J._originalTransform=J.transform,J._originalSetTransform=J.setTransform,J._originalResetTransform=J.resetTransform,J._transformMatrix=J._transformMatrix||[1,0,0,1,0,0],J._transformStack=[];try{const v=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(J),"lineWidth");J._setLineWidth=v.set,J._getLineWidth=v.get,Object.defineProperty(J,"lineWidth",{set:function(d){this._setLineWidth(1.000001*d)},get:function(){return this._getLineWidth()}})}catch(v){}Object.defineProperty(J,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(J,"mozCurrentTransformInverse",{get:function(){const[E,d,C,D,F,j]=this._transformMatrix,W=E*D-d*C,fe=d*C-E*D;return[D/W,d/fe,C/fe,E/W,(D*F-C*j)/fe,(d*F-E*j)/W]}}),J.save=function(){const E=this._transformMatrix;this._transformStack.push(E),this._transformMatrix=E.slice(0,6),this._originalSave()},J.restore=function(){0===this._transformStack.length&&(0,p.warn)("Tried to restore a ctx when the stack was already empty.");const E=this._transformStack.pop();E&&(this._transformMatrix=E,this._originalRestore())},J.translate=function(E,d){const C=this._transformMatrix;C[4]=C[0]*E+C[2]*d+C[4],C[5]=C[1]*E+C[3]*d+C[5],this._originalTranslate(E,d)},J.scale=function(E,d){const C=this._transformMatrix;C[0]*=E,C[1]*=E,C[2]*=d,C[3]*=d,this._originalScale(E,d)},J.transform=function(E,d,C,D,F,j){const W=this._transformMatrix;this._transformMatrix=[W[0]*E+W[2]*d,W[1]*E+W[3]*d,W[0]*C+W[2]*D,W[1]*C+W[3]*D,W[0]*F+W[2]*j+W[4],W[1]*F+W[3]*j+W[5]],J._originalTransform(E,d,C,D,F,j)},J.setTransform=function(E,d,C,D,F,j){this._transformMatrix=[E,d,C,D,F,j],J._originalSetTransform(E,d,C,D,F,j)},J.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],J._originalResetTransform()},J.rotate=function(E){const d=Math.cos(E),C=Math.sin(E),D=this._transformMatrix;this._transformMatrix=[D[0]*d+D[2]*C,D[1]*d+D[3]*C,D[0]*-C+D[2]*d,D[1]*-C+D[3]*d,D[4],D[5]],this._originalRotate(E)}}}class M{constructor(v){this.canvasFactory=v,this.cache=Object.create(null)}getCanvas(v,E,d,C){let D;return void 0!==this.cache[v]?(D=this.cache[v],this.canvasFactory.reset(D,E,d),D.context.setTransform(1,0,0,1,0,0)):(D=this.canvasFactory.create(E,d),this.cache[v]=D),C&&H(D.context),D}delete(v){delete this.cache[v]}clear(){for(const v in this.cache)this.canvasFactory.destroy(this.cache[v]),delete this.cache[v]}}function x(J,v,E,d,C,D,F,j,W,fe){const[be,_e,Ae,xe,ke,ze]=J.mozCurrentTransform;if(0===_e&&0===Ae){const je=Math.round(F*be+ke),ie=Math.round(j*xe+ze),Ke=Math.abs(Math.round((F+W)*be+ke)-je)||1,Xe=Math.abs(Math.round((j+fe)*xe+ze)-ie)||1;return J.setTransform(Math.sign(be),0,0,Math.sign(xe),je,ie),J.drawImage(v,E,d,C,D,0,0,Ke,Xe),J.setTransform(be,_e,Ae,xe,ke,ze),[Ke,Xe]}if(0===be&&0===xe){const je=Math.round(j*Ae+ke),ie=Math.round(F*_e+ze),Ke=Math.abs(Math.round((j+fe)*Ae+ke)-je)||1,Xe=Math.abs(Math.round((F+W)*_e+ze)-ie)||1;return J.setTransform(0,Math.sign(_e),Math.sign(Ae),0,je,ie),J.drawImage(v,E,d,C,D,0,0,Xe,Ke),J.setTransform(be,_e,Ae,xe,ke,ze),[Xe,Ke]}return J.drawImage(v,E,d,C,D,F,j,W,fe),[Math.hypot(be,_e)*W,Math.hypot(Ae,xe)*fe]}class g{constructor(v,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=p.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=p.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,v,E])}clone(){const v=Object.create(this);return v.clipBox=this.clipBox.slice(),v}setCurrentPoint(v,E){this.x=v,this.y=E}updatePathMinMax(v,E,d){[E,d]=p.Util.applyTransform([E,d],v),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(v,E){const d=p.Util.applyTransform(E,v),C=p.Util.applyTransform(E.slice(2),v);this.minX=Math.min(this.minX,d[0],C[0]),this.minY=Math.min(this.minY,d[1],C[1]),this.maxX=Math.max(this.maxX,d[0],C[0]),this.maxY=Math.max(this.maxY,d[1],C[1])}updateScalingPathMinMax(v,E){p.Util.scaleMinMax(v,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(v,E,d,C,D,F,j,W,fe,be){const _e=p.Util.bezierBoundingBox(E,d,C,D,F,j,W,fe);if(be)return be[0]=Math.min(be[0],_e[0],_e[2]),be[1]=Math.max(be[1],_e[0],_e[2]),be[2]=Math.min(be[2],_e[1],_e[3]),void(be[3]=Math.max(be[3],_e[1],_e[3]));this.updateRectMinMax(v,_e)}getPathBoundingBox(v=ce.PathType.FILL,E=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(v===ce.PathType.STROKE){E||(0,p.unreachable)("Stroke bounding box must include transform.");const C=p.Util.singularValueDecompose2dScale(E),D=C[0]*this.lineWidth/2,F=C[1]*this.lineWidth/2;d[0]-=D,d[1]-=F,d[2]+=D,d[3]+=F}return d}updateClipFromPath(){const v=p.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(v||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(v){this.clipBox=v,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(v=ce.PathType.FILL,E=null){return p.Util.intersect(this.clipBox,this.getPathBoundingBox(v,E))}}function R(J,v,E=null){if("undefined"!=typeof ImageData&&v instanceof ImageData)return void J.putImageData(v,0,0);const d=v.height,C=v.width,D=d%_,F=(d-D)/_,j=0===D?F:F+1,W=J.createImageData(C,_);let be,fe=0;const _e=v.data,Ae=W.data;let xe,ke,ze,tt,Oe,Ve,je,U;if(E)switch(E.length){case 1:Oe=E[0],Ve=E[0],je=E[0],U=E[0];break;case 4:Oe=E[0],Ve=E[1],je=E[2],U=E[3]}if(v.kind===p.ImageKind.GRAYSCALE_1BPP){const ie=_e.byteLength,Te=new Uint32Array(Ae.buffer,0,Ae.byteLength>>2),Ke=Te.length,qe=C+7>>3;let Xe=4294967295,it=p.FeatureTest.isLittleEndian?4278190080:255;for(U&&255===U[0]&&0===U[255]&&([Xe,it]=[it,Xe]),xe=0;xe<j;xe++){for(ze=xe<F?_:D,be=0,ke=0;ke<ze;ke++){const T=ie-fe;let he=0;const Re=T>qe?C:8*T-7,se=-8&Re;let K=0,L=0;for(;he<se;he+=8)L=_e[fe++],Te[be++]=128&L?Xe:it,Te[be++]=64&L?Xe:it,Te[be++]=32&L?Xe:it,Te[be++]=16&L?Xe:it,Te[be++]=8&L?Xe:it,Te[be++]=4&L?Xe:it,Te[be++]=2&L?Xe:it,Te[be++]=1&L?Xe:it;for(;he<Re;he++)0===K&&(L=_e[fe++],K=128),Te[be++]=L&K?Xe:it,K>>=1}for(;be<Ke;)Te[be++]=0;J.putImageData(W,0,xe*_)}}else if(v.kind===p.ImageKind.RGBA_32BPP){const ie=!!(Oe||Ve||je);for(ke=0,tt=C*_*4,xe=0;xe<F;xe++){if(Ae.set(_e.subarray(fe,fe+tt)),fe+=tt,ie)for(let Te=0;Te<tt;Te+=4)Oe&&(Ae[Te+0]=Oe[Ae[Te+0]]),Ve&&(Ae[Te+1]=Ve[Ae[Te+1]]),je&&(Ae[Te+2]=je[Ae[Te+2]]);J.putImageData(W,0,ke),ke+=_}if(xe<j){if(tt=C*D*4,Ae.set(_e.subarray(fe,fe+tt)),ie)for(let Te=0;Te<tt;Te+=4)Oe&&(Ae[Te+0]=Oe[Ae[Te+0]]),Ve&&(Ae[Te+1]=Ve[Ae[Te+1]]),je&&(Ae[Te+2]=je[Ae[Te+2]]);J.putImageData(W,0,ke)}}else{if(v.kind!==p.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${v.kind}`);{const ie=!!(Oe||Ve||je);for(ze=_,tt=C*ze,xe=0;xe<j;xe++){for(xe>=F&&(ze=D,tt=C*ze),be=0,ke=tt;ke--;)Ae[be++]=_e[fe++],Ae[be++]=_e[fe++],Ae[be++]=_e[fe++],Ae[be++]=255;if(ie)for(let Te=0;Te<be;Te+=4)Oe&&(Ae[Te+0]=Oe[Ae[Te+0]]),Ve&&(Ae[Te+1]=Ve[Ae[Te+1]]),je&&(Ae[Te+2]=je[Ae[Te+2]]);J.putImageData(W,0,xe*_)}}}}function I(J,v){if(v.bitmap)return void J.drawImage(v.bitmap,0,0);const E=v.height,d=v.width,C=E%_,D=(E-C)/_,F=0===C?D:D+1,j=J.createImageData(d,_);let W=0;const fe=v.data,be=j.data;for(let _e=0;_e<F;_e++){const Ae=_e<D?_:C;({srcPos:W}=(0,ae.applyMaskImageData)({src:fe,srcPos:W,dest:be,width:d,height:Ae})),J.putImageData(j,0,_e*_)}}function V(J,v){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let d=0,C=E.length;d<C;d++){const D=E[d];void 0!==J[D]&&(v[D]=J[D])}void 0!==J.setLineDash&&(v.setLineDash(J.getLineDash()),v.lineDashOffset=J.lineDashOffset)}function Y(J,v){J.strokeStyle=J.fillStyle=v||"#000000",J.fillRule="nonzero",J.globalAlpha=1,J.lineWidth=1,J.lineCap="butt",J.lineJoin="miter",J.miterLimit=10,J.globalCompositeOperation="source-over",J.font="10px sans-serif",void 0!==J.setLineDash&&(J.setLineDash([]),J.lineDashOffset=0)}function ne(J,v,E,d){const C=J.length;for(let D=3;D<C;D+=4){const F=J[D];if(0===F)J[D-3]=v,J[D-2]=E,J[D-1]=d;else if(F<255){const j=255-F;J[D-3]=J[D-3]*F+v*j>>8,J[D-2]=J[D-2]*F+E*j>>8,J[D-1]=J[D-1]*F+d*j>>8}}}function re(J,v,E){const d=J.length;for(let D=3;D<d;D+=4)v[D]=v[D]*(E?E[J[D]]:J[D])*.00392156862745098|0}function ue(J,v,E){const d=J.length;for(let C=3;C<d;C+=4){const D=77*J[C-3]+152*J[C-2]+28*J[C-1];v[C]=E?v[C]*E[D>>8]>>8:v[C]*D>>16}}function Ie(J,v){const E=p.Util.singularValueDecompose2dScale(J);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*pe.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==v?v:E[0]<=d||E[1]<=d}const de=["butt","round","square"],Me=["miter","round","bevel"],Pe={},Fe={};class $e{constructor(v,E,d,C,D,F,j,W){this.ctx=v,this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=d,this.canvasFactory=C,this.imageLayer=D,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=F,this.cachedCanvases=new M(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=j,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==W?void 0:W.background)||null,this.foregroundColor=(null==W?void 0:W.foreground)||null,v&&H(v),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(v,E=null){return"string"==typeof v?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):E}beginDrawing({transform:v,viewport:E,transparency:d=!1,background:C=null}){const D=this.ctx.canvas.width,F=this.ctx.canvas.height,j=C||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const W=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const fe=this.backgroundColor=this.ctx.fillStyle;let be=!0,_e=j;if(this.ctx.fillStyle=j,_e=this.ctx.fillStyle,be="string"==typeof _e&&/^#[0-9A-Fa-f]{6}$/.test(_e),"#000000"===W&&"#ffffff"===fe||W===fe||!be)this.foregroundColor=this.backgroundColor=null;else{const Ae=parseInt(_e.slice(1),16),ke=(Ae&&65280)>>8,ze=Ae&&255,tt=Ve=>(Ve/=255)<=.03928?Ve/12.92:((Ve+.055)/1.055)**2.4,Oe=Math.round(.2126*tt((Ae&&16711680)>>16)+.7152*tt(ke)+.0722*tt(ze));this.selectColor=(Ve,je,U)=>{const ie=.2126*tt(Ve)+.7152*tt(je)+.0722*tt(U);return Math.round(ie)===Oe?fe:W}}}if(this.ctx.fillStyle=this.backgroundColor||j,this.ctx.fillRect(0,0,D,F),this.ctx.restore(),d){const W=this.cachedCanvases.getCanvas("transparent",D,F,!0);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),Y(this.ctx,this.foregroundColor),v&&(this.ctx.transform.apply(this.ctx,v),this.outputScaleX=v[0],this.outputScaleY=v[0]),this.ctx.transform.apply(this.ctx,E.transform),this.viewportScale=E.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(v,E,d,C){const D=v.argsArray,F=v.fnArray;let j=E||0;const W=D.length;if(W===j)return j;const fe=W-j>10&&"function"==typeof d,be=fe?Date.now()+15:0;let _e=0;const Ae=this.commonObjs,xe=this.objs;let ke;for(;;){if(void 0!==C&&j===C.nextBreakPoint)return C.breakIt(j,d),j;if(ke=F[j],ke!==p.OPS.dependency)this[ke].apply(this,D[j]);else for(const ze of D[j]){const tt=ze.startsWith("g_")?Ae:xe;if(!tt.has(ze))return tt.get(ze,d),j}if(j++,j===W)return j;if(fe&&++_e>10){if(Date.now()>be)return d(),j;_e=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const v of this._cachedBitmapsMap.values()){for(const E of v.values())"undefined"!=typeof HTMLCanvasElement&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);v.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(v,E){const d=v.width,C=v.height;let be,_e,D=Math.max(Math.hypot(E[0],E[1]),1),F=Math.max(Math.hypot(E[2],E[3]),1),j=d,W=C,fe="prescale1";for(;D>2&&j>1||F>2&&W>1;){let Ae=j,xe=W;D>2&&j>1&&(Ae=Math.ceil(j/2),D/=j/Ae),F>2&&W>1&&(xe=Math.ceil(W/2),F/=W/xe),be=this.cachedCanvases.getCanvas(fe,Ae,xe,!1),_e=be.context,_e.clearRect(0,0,Ae,xe),_e.drawImage(v,0,0,j,W,0,0,Ae,xe),v=be.canvas,j=Ae,W=xe,fe="prescale1"===fe?"prescale2":"prescale1"}return{img:v,paintWidth:j,paintHeight:W}}_createMaskCanvas(v){const E=this.ctx,{width:d,height:C}=v,D=this.current.fillColor,F=this.current.patternFill,j=E.mozCurrentTransform;let W,fe,be,_e;if((v.bitmap||v.data)&&v.count>1){const Ke=v.bitmap||v.data.buffer,qe=j.slice(0,4);fe=JSON.stringify(F?qe:[qe,D]),W=this._cachedBitmapsMap.get(Ke),W||(W=new Map,this._cachedBitmapsMap.set(Ke,W));const Xe=W.get(fe);if(Xe&&!F)return{canvas:Xe,offsetX:Math.round(Math.min(j[0],j[2])+j[4]),offsetY:Math.round(Math.min(j[1],j[3])+j[5])};be=Xe}be||(_e=this.cachedCanvases.getCanvas("maskCanvas",d,C,!1),I(_e.context,v));let Ae=p.Util.transform(j,[1/d,0,0,-1/C,0,0]);Ae=p.Util.transform(Ae,[1,0,0,1,0,-C]);const xe=p.Util.applyTransform([0,0],Ae),ke=p.Util.applyTransform([d,C],Ae),ze=p.Util.normalizeRect([xe[0],xe[1],ke[0],ke[1]]),tt=Math.round(ze[2]-ze[0])||1,Oe=Math.round(ze[3]-ze[1])||1,Ve=this.cachedCanvases.getCanvas("fillCanvas",tt,Oe,!0),je=Ve.context,U=Math.min(xe[0],ke[0]),ie=Math.min(xe[1],ke[1]);je.translate(-U,-ie),je.transform.apply(je,Ae),be||(be=this._scaleImage(_e.canvas,je.mozCurrentTransformInverse),be=be.img,W&&F&&W.set(fe,be)),je.imageSmoothingEnabled=Ie(je.mozCurrentTransform,v.interpolate),x(je,be,0,0,be.width,be.height,0,0,d,C),je.globalCompositeOperation="source-in";const Te=p.Util.transform(je.mozCurrentTransformInverse,[1,0,0,1,-U,-ie]);return je.fillStyle=F?D.getPattern(E,this,Te,ce.PathType.FILL):D,je.fillRect(0,0,d,C),W&&!F&&(this.cachedCanvases.delete("fillCanvas"),W.set(fe,Ve.canvas)),{canvas:Ve.canvas,offsetX:Math.round(U),offsetY:Math.round(ie)}}setLineWidth(v){v!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=v,this.ctx.lineWidth=v}setLineCap(v){this.ctx.lineCap=de[v]}setLineJoin(v){this.ctx.lineJoin=Me[v]}setMiterLimit(v){this.ctx.miterLimit=v}setDash(v,E){const d=this.ctx;void 0!==d.setLineDash&&(d.setLineDash(v),d.lineDashOffset=E)}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(let E=0,d=v.length;E<d;E++){const C=v[E],F=C[1];switch(C[0]){case"LW":this.setLineWidth(F);break;case"LC":this.setLineCap(F);break;case"LJ":this.setLineJoin(F);break;case"ML":this.setMiterLimit(F);break;case"D":this.setDash(F[0],F[1]);break;case"RI":this.setRenderingIntent(F);break;case"FL":this.setFlatness(F);break;case"Font":this.setFont(F[0],F[1]);break;case"CA":this.current.strokeAlpha=C[1];break;case"ca":this.current.fillAlpha=C[1],this.ctx.globalAlpha=C[1];break;case"BM":this.ctx.globalCompositeOperation=F;break;case"SMask":this.current.activeSMask=F?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=F}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const v=this.inSMaskMode;this.current.activeSMask&&!v?this.beginSMaskMode():!this.current.activeSMask&&v&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const C=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=C.context;const D=this.ctx;D.setTransform.apply(D,this.suspendedCtx.mozCurrentTransform),V(this.suspendedCtx,D),function S(J,v){if(J._removeMirroring)throw new Error("Context is already forwarding operations.");J.__originalSave=J.save,J.__originalRestore=J.restore,J.__originalRotate=J.rotate,J.__originalScale=J.scale,J.__originalTranslate=J.translate,J.__originalTransform=J.transform,J.__originalSetTransform=J.setTransform,J.__originalResetTransform=J.resetTransform,J.__originalClip=J.clip,J.__originalMoveTo=J.moveTo,J.__originalLineTo=J.lineTo,J.__originalBezierCurveTo=J.bezierCurveTo,J.__originalRect=J.rect,J.__originalClosePath=J.closePath,J.__originalBeginPath=J.beginPath,J._removeMirroring=()=>{J.save=J.__originalSave,J.restore=J.__originalRestore,J.rotate=J.__originalRotate,J.scale=J.__originalScale,J.translate=J.__originalTranslate,J.transform=J.__originalTransform,J.setTransform=J.__originalSetTransform,J.resetTransform=J.__originalResetTransform,J.clip=J.__originalClip,J.moveTo=J.__originalMoveTo,J.lineTo=J.__originalLineTo,J.bezierCurveTo=J.__originalBezierCurveTo,J.rect=J.__originalRect,J.closePath=J.__originalClosePath,J.beginPath=J.__originalBeginPath,delete J._removeMirroring},J.save=function(){v.save(),this.__originalSave()},J.restore=function(){v.restore(),this.__originalRestore()},J.translate=function(d,C){v.translate(d,C),this.__originalTranslate(d,C)},J.scale=function(d,C){v.scale(d,C),this.__originalScale(d,C)},J.transform=function(d,C,D,F,j,W){v.transform(d,C,D,F,j,W),this.__originalTransform(d,C,D,F,j,W)},J.setTransform=function(d,C,D,F,j,W){v.setTransform(d,C,D,F,j,W),this.__originalSetTransform(d,C,D,F,j,W)},J.resetTransform=function(){v.resetTransform(),this.__originalResetTransform()},J.rotate=function(d){v.rotate(d),this.__originalRotate(d)},J.clip=function(d){v.clip(d),this.__originalClip(d)},J.moveTo=function(E,d){v.moveTo(E,d),this.__originalMoveTo(E,d)},J.lineTo=function(E,d){v.lineTo(E,d),this.__originalLineTo(E,d)},J.bezierCurveTo=function(E,d,C,D,F,j){v.bezierCurveTo(E,d,C,D,F,j),this.__originalBezierCurveTo(E,d,C,D,F,j)},J.rect=function(E,d,C,D){v.rect(E,d,C,D),this.__originalRect(E,d,C,D)},J.closePath=function(){v.closePath(),this.__originalClosePath()},J.beginPath=function(){v.beginPath(),this.__originalBeginPath()}}(D,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(v){this.current.activeSMask&&(v?(v[0]=Math.floor(v[0]),v[1]=Math.floor(v[1]),v[2]=Math.ceil(v[2]),v[3]=Math.ceil(v[3])):v=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function we(J,v,E,d){const C=d[0],D=d[1],F=d[2]-C,j=d[3]-D;0===F||0===j||(function ve(J,v,E,d,C,D,F,j,W,fe,be){const _e=!!D,Ae=_e?D[0]:0,xe=_e?D[1]:0,ke=_e?D[2]:0;let ze;ze="Luminosity"===C?ue:re;const Oe=Math.min(d,Math.ceil(1048576/E));for(let Ve=0;Ve<d;Ve+=Oe){const je=Math.min(Oe,d-Ve),U=J.getImageData(j-fe,Ve+(W-be),E,je),ie=v.getImageData(j,Ve+W,E,je);_e&&ne(U.data,Ae,xe,ke),ze(U.data,ie.data,F),v.putImageData(ie,j,Ve+W)}}(v.context,E,F,j,v.subtype,v.backdrop,v.transferMap,C,D,v.offsetX,v.offsetY),J.save(),J.globalAlpha=1,J.globalCompositeOperation="source-over",J.setTransform(1,0,0,1,0,0),J.drawImage(E.canvas,0,0),J.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,v),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(V(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const v=this.current;this.stateStack.push(v),this.current=v.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(v,E,d,C,D,F){this.ctx.transform(v,E,d,C,D,F),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(v,E,d){const C=this.ctx,D=this.current;let W,fe,F=D.x,j=D.y;const be=C.mozCurrentTransform,_e=0===be[0]&&0===be[3]||0===be[1]&&0===be[2],Ae=_e?d.slice(0):null;for(let xe=0,ke=0,ze=v.length;xe<ze;xe++)switch(0|v[xe]){case p.OPS.rectangle:F=E[ke++],j=E[ke++];const tt=E[ke++],Oe=E[ke++],Ve=F+tt,je=j+Oe;C.moveTo(F,j),0===tt||0===Oe?C.lineTo(Ve,je):(C.lineTo(Ve,j),C.lineTo(Ve,je),C.lineTo(F,je)),_e||D.updateRectMinMax(be,[F,j,Ve,je]),C.closePath();break;case p.OPS.moveTo:F=E[ke++],j=E[ke++],C.moveTo(F,j),_e||D.updatePathMinMax(be,F,j);break;case p.OPS.lineTo:F=E[ke++],j=E[ke++],C.lineTo(F,j),_e||D.updatePathMinMax(be,F,j);break;case p.OPS.curveTo:W=F,fe=j,F=E[ke+4],j=E[ke+5],C.bezierCurveTo(E[ke],E[ke+1],E[ke+2],E[ke+3],F,j),D.updateCurvePathMinMax(be,W,fe,E[ke],E[ke+1],E[ke+2],E[ke+3],F,j,Ae),ke+=6;break;case p.OPS.curveTo2:W=F,fe=j,C.bezierCurveTo(F,j,E[ke],E[ke+1],E[ke+2],E[ke+3]),D.updateCurvePathMinMax(be,W,fe,F,j,E[ke],E[ke+1],E[ke+2],E[ke+3],Ae),F=E[ke+2],j=E[ke+3],ke+=4;break;case p.OPS.curveTo3:W=F,fe=j,F=E[ke+2],j=E[ke+3],C.bezierCurveTo(E[ke],E[ke+1],F,j,F,j),D.updateCurvePathMinMax(be,W,fe,E[ke],E[ke+1],F,j,F,j,Ae),ke+=4;break;case p.OPS.closePath:C.closePath()}_e&&D.updateScalingPathMinMax(be,Ae),D.setCurrentPoint(F,j)}closePath(){this.ctx.closePath()}stroke(v){v=void 0===v||v;const E=this.ctx,d=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof d&&(null==d?void 0:d.getPattern)?(E.save(),E.strokeStyle=d.getPattern(E,this,E.mozCurrentTransformInverse,ce.PathType.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),v&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(v){v=void 0===v||v;const E=this.ctx,d=this.current.fillColor;let D=!1;this.current.patternFill&&(E.save(),E.fillStyle=d.getPattern(E,this,E.mozCurrentTransformInverse,ce.PathType.FILL),D=!0);const F=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==F&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),D&&E.restore(),v&&this.consumePath(F)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Pe}eoClip(){this.pendingClip=Fe}beginText(){this.current.textMatrix=p.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const v=this.pendingTextPaths,E=this.ctx;if(void 0!==v){E.save(),E.beginPath();for(let d=0;d<v.length;d++){const C=v[d];E.setTransform.apply(E,C.transform),E.translate(C.x,C.y),C.addToPath(E,C.fontSize)}E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}else E.beginPath()}setCharSpacing(v){this.current.charSpacing=v}setWordSpacing(v){this.current.wordSpacing=v}setHScale(v){this.current.textHScale=v/100}setLeading(v){this.current.leading=-v}setFont(v,E){const d=this.commonObjs.get(v),C=this.current;if(!d)throw new Error(`Can't find font for ${v}`);if(C.fontMatrix=d.fontMatrix||p.FONT_IDENTITY_MATRIX,(0===C.fontMatrix[0]||0===C.fontMatrix[3])&&(0,p.warn)("Invalid font matrix for font "+v),E<0?(E=-E,C.fontDirection=-1):C.fontDirection=1,this.current.font=d,this.current.fontSize=E,d.isType3Font)return;let F="normal";d.black?F="900":d.bold&&(F="bold");const j=d.italic?"italic":"normal",W=`"${d.loadedName||"sans-serif"}", ${d.fallbackName}`;let fe=E;E<16?fe=16:E>100&&(fe=100),this.current.fontSizeScale=E/fe,this.ctx.font=`${j} ${F} ${fe}px ${W}`}setTextRenderingMode(v){this.current.textRenderingMode=v}setTextRise(v){this.current.textRise=v}moveText(v,E){this.current.x=this.current.lineX+=v,this.current.y=this.current.lineY+=E}setLeadingMoveText(v,E){this.setLeading(-E),this.moveText(v,E)}setTextMatrix(v,E,d,C,D,F){this.current.textMatrix=[v,E,d,C,D,F],this.current.textMatrixScale=Math.hypot(v,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(v,E,d,C){const D=this.ctx,F=this.current,j=F.font,W=F.textRenderingMode,fe=F.fontSize/F.fontSizeScale,be=W&p.TextRenderingMode.FILL_STROKE_MASK,_e=!!(W&p.TextRenderingMode.ADD_TO_PATH_FLAG),Ae=F.patternFill&&!j.missingFile;let xe;(j.disableFontFace||_e||Ae)&&(xe=j.getPathGenerator(this.commonObjs,v)),j.disableFontFace||Ae?(D.save(),D.translate(E,d),D.beginPath(),xe(D,fe),C&&D.setTransform.apply(D,C),(be===p.TextRenderingMode.FILL||be===p.TextRenderingMode.FILL_STROKE)&&D.fill(),(be===p.TextRenderingMode.STROKE||be===p.TextRenderingMode.FILL_STROKE)&&D.stroke(),D.restore()):((be===p.TextRenderingMode.FILL||be===p.TextRenderingMode.FILL_STROKE)&&D.fillText(v,E,d),(be===p.TextRenderingMode.STROKE||be===p.TextRenderingMode.FILL_STROKE)&&D.strokeText(v,E,d)),_e&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:D.mozCurrentTransform,x:E,y:d,fontSize:fe,addToPath:xe})}get isFontSubpixelAAEnabled(){const{context:v}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);v.scale(1.5,1),v.fillText("I",0,10);const E=v.getImageData(0,0,10,10).data;let d=!1;for(let C=3;C<E.length;C+=4)if(E[C]>0&&E[C]<255){d=!0;break}return(0,p.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(v){const E=this.current,d=E.font;if(d.isType3Font)return this.showType3Text(v);const C=E.fontSize;if(0===C)return;const D=this.ctx,F=E.fontSizeScale,j=E.charSpacing,W=E.wordSpacing,fe=E.fontDirection,be=E.textHScale*fe,_e=v.length,Ae=d.vertical,xe=Ae?1:-1,ke=d.defaultVMetrics,ze=C*E.fontMatrix[0],tt=E.textRenderingMode===p.TextRenderingMode.FILL&&!d.disableFontFace&&!E.patternFill;let Oe;if(D.save(),D.transform.apply(D,E.textMatrix),D.translate(E.x,E.y+E.textRise),D.scale(be,fe>0?-1:1),E.patternFill){D.save();const Te=E.fillColor.getPattern(D,this,D.mozCurrentTransformInverse,ce.PathType.FILL);Oe=D.mozCurrentTransform,D.restore(),D.fillStyle=Te}let Ve=E.lineWidth;const je=E.textMatrixScale;if(0===je||0===Ve){const Te=E.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;(Te===p.TextRenderingMode.STROKE||Te===p.TextRenderingMode.FILL_STROKE)&&(Ve=this.getSinglePixelWidth())}else Ve/=je;1!==F&&(D.scale(F,F),Ve/=F),D.lineWidth=Ve;let ie,U=0;for(ie=0;ie<_e;++ie){const Te=v[ie];if("number"==typeof Te){U+=xe*Te*C/1e3;continue}let Ke=!1;const qe=(Te.isSpace?W:0)+j,Xe=Te.fontChar,it=Te.accent;let T,he,se,Re=Te.width;if(Ae){const K=Te.vmetric||ke,L=-(Te.vmetric?K[1]:.5*Re)*ze;Re=K?-K[0]:Re,T=L/F,he=(U+K[2]*ze)/F}else T=U/F,he=0;if(d.remeasure&&Re>0){const K=1e3*D.measureText(Xe).width/C*F;if(Re<K&&this.isFontSubpixelAAEnabled){const L=Re/K;Ke=!0,D.save(),D.scale(L,1),T/=L}else Re!==K&&(T+=(Re-K)/2e3*C/F)}this.contentVisible&&(Te.isInFont||d.missingFile)&&(tt&&!it?D.fillText(Xe,T,he):(this.paintChar(Xe,T,he,Oe),it&&this.paintChar(it.fontChar,T+C*it.offset.x/F,he-C*it.offset.y/F,Oe))),se=Ae?Re*ze-qe*fe:Re*ze+qe*fe,U+=se,Ke&&D.restore()}Ae?E.y-=U:E.x+=U*be,D.restore(),this.compose()}showType3Text(v){const E=this.ctx,d=this.current,C=d.font,D=d.fontSize,F=d.fontDirection,j=C.vertical?1:-1,W=d.charSpacing,fe=d.wordSpacing,be=d.textHScale*F,_e=d.fontMatrix||p.FONT_IDENTITY_MATRIX,Ae=v.length;let ke,ze,tt,Oe;if(d.textRenderingMode!==p.TextRenderingMode.INVISIBLE&&0!==D){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,E.save(),E.transform.apply(E,d.textMatrix),E.translate(d.x,d.y),E.scale(be,F),ke=0;ke<Ae;++ke){if(ze=v[ke],"number"==typeof ze){Oe=j*ze*D/1e3,this.ctx.translate(Oe,0),d.x+=Oe*be;continue}const Ve=(ze.isSpace?fe:0)+W,je=C.charProcOperatorList[ze.operatorListId];je?(this.contentVisible&&(this.processingType3=ze,this.save(),E.scale(D,D),E.transform.apply(E,_e),this.executeOperatorList(je),this.restore()),tt=p.Util.applyTransform([ze.width,0],_e)[0]*D+Ve,E.translate(tt,0),d.x+=tt*be):(0,p.warn)(`Type3 character "${ze.operatorListId}" is not available.`)}E.restore(),this.processingType3=null}}setCharWidth(v,E){}setCharWidthAndBounds(v,E,d,C,D,F){this.ctx.rect(d,C,D-d,F-C),this.ctx.clip(),this.endPath()}getColorN_Pattern(v){let E;if("TilingPattern"===v[0]){const d=v[1],C=this.baseTransform||this.ctx.mozCurrentTransform.slice();E=new ce.TilingPattern(v,d,this.ctx,{createCanvasGraphics:F=>new $e(F,this.commonObjs,this.objs,this.canvasFactory)},C)}else E=this._getPattern(v[1],v[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(v,E,d){var D;const C=(null==(D=this.selectColor)?void 0:D.call(this,v,E,d))||p.Util.makeHexColor(v,E,d);this.ctx.strokeStyle=C,this.current.strokeColor=C}setFillRGBColor(v,E,d){var D;const C=(null==(D=this.selectColor)?void 0:D.call(this,v,E,d))||p.Util.makeHexColor(v,E,d);this.ctx.fillStyle=C,this.current.fillColor=C,this.current.patternFill=!1}_getPattern(v,E=null){let d;return this.cachedPatterns.has(v)?d=this.cachedPatterns.get(v):(d=(0,ce.getShadingPattern)(this.objs.get(v)),this.cachedPatterns.set(v,d)),E&&(d.matrix=E),d}shadingFill(v){if(!this.contentVisible)return;const E=this.ctx;this.save();const d=this._getPattern(v);E.fillStyle=d.getPattern(E,this,E.mozCurrentTransformInverse,ce.PathType.SHADING);const C=E.mozCurrentTransformInverse;if(C){const D=E.canvas,F=D.width,j=D.height,W=p.Util.applyTransform([0,0],C),fe=p.Util.applyTransform([0,j],C),be=p.Util.applyTransform([F,0],C),_e=p.Util.applyTransform([F,j],C),Ae=Math.min(W[0],fe[0],be[0],_e[0]),xe=Math.min(W[1],fe[1],be[1],_e[1]),ke=Math.max(W[0],fe[0],be[0],_e[0]),ze=Math.max(W[1],fe[1],be[1],_e[1]);this.ctx.fillRect(Ae,xe,ke-Ae,ze-xe)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,p.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,p.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(v,E){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(v)&&6===v.length&&this.transform.apply(this,v),this.baseTransform=this.ctx.mozCurrentTransform,E)&&(this.ctx.rect(E[0],E[1],E[2]-E[0],E[3]-E[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,E),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(v){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;v.isolated||(0,p.info)("TODO: Support non-isolated groups."),v.knockout&&(0,p.warn)("Knockout groups not supported.");const d=E.mozCurrentTransform;if(v.matrix&&E.transform.apply(E,v.matrix),!v.bbox)throw new Error("Bounding box is required.");let C=p.Util.getAxialAlignedBoundingBox(v.bbox,E.mozCurrentTransform);C=p.Util.intersect(C,[0,0,E.canvas.width,E.canvas.height])||[0,0,0,0];const F=Math.floor(C[0]),j=Math.floor(C[1]);let W=Math.max(Math.ceil(C[2])-F,1),fe=Math.max(Math.ceil(C[3])-j,1),be=1,_e=1;W>$&&(be=W/$,W=$),fe>$&&(_e=fe/$,fe=$),this.current.startNewPathAndClipBox([0,0,W,fe]);let Ae="groupAt"+this.groupLevel;v.smask&&(Ae+="_smask_"+this.smaskCounter++%2);const xe=this.cachedCanvases.getCanvas(Ae,W,fe,!0),ke=xe.context;ke.scale(1/be,1/_e),ke.translate(-F,-j),ke.transform.apply(ke,d),v.smask?this.smaskStack.push({canvas:xe.canvas,context:ke,offsetX:F,offsetY:j,scaleX:be,scaleY:_e,subtype:v.smask.subtype,backdrop:v.smask.backdrop,transferMap:v.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(F,j),E.scale(be,_e),E.save()),V(E,ke),this.ctx=ke,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(v){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,v.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const C=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,C);const D=p.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],C);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose(D)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(v,E,d,C,D){if(this.save(),Array.isArray(E)&&4===E.length){const F=E[2]-E[0],j=E[3]-E[1];if(D&&this.annotationCanvasMap){(d=d.slice())[4]-=E[0],d[5]-=E[1],(E=E.slice())[0]=E[1]=0,E[2]=F,E[3]=j;const[W,fe]=p.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:be}=this,_e=Math.ceil(F*this.outputScaleX*be),Ae=Math.ceil(j*this.outputScaleY*be);this.annotationCanvas=this.canvasFactory.create(_e,Ae);const{canvas:xe,context:ke}=this.annotationCanvas,ze=`var(--zoom-factor) * ${pe.PixelsPerInch.PDF_TO_CSS_UNITS}`;xe.style.width=`calc(${F}px * ${ze})`,xe.style.height=`calc(${j}px * ${ze})`,this.annotationCanvasMap.set(v,xe),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ke,this.ctx.setTransform(W,0,0,-fe,0,j*fe),H(this.ctx),Y(this.ctx,this.foregroundColor)}else Y(this.ctx,this.foregroundColor),this.ctx.rect(E[0],E[1],F,j),this.ctx.clip(),this.endPath()}this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,d),this.transform.apply(this,C)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(v){if(!this.contentVisible)return;const E=v.count;(v=this.getObject(v.data,v)).count=E;const d=this.ctx,C=this.processingType3;if(C&&(void 0===C.compiled&&(C.compiled=function u(J){const{width:v,height:E}=J;if(v>1e3||E>1e3)return null;const C=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),D=v+1;let j,W,fe,F=new Uint8Array(D*(E+1));const be=v+7&-8;let _e=new Uint8Array(be*E),Ae=0;for(const je of J.data){let U=128;for(;U>0;)_e[Ae++]=je&U?0:255,U>>=1}let xe=0;for(Ae=0,0!==_e[Ae]&&(F[0]=1,++xe),W=1;W<v;W++)_e[Ae]!==_e[Ae+1]&&(F[W]=_e[Ae]?2:1,++xe),Ae++;for(0!==_e[Ae]&&(F[W]=2,++xe),j=1;j<E;j++){Ae=j*be,fe=j*D,_e[Ae-be]!==_e[Ae]&&(F[fe]=_e[Ae]?1:8,++xe);let je=(_e[Ae]?4:0)+(_e[Ae-be]?8:0);for(W=1;W<v;W++)je=(je>>2)+(_e[Ae+1]?4:0)+(_e[Ae-be+1]?8:0),C[je]&&(F[fe+W]=C[je],++xe),Ae++;if(_e[Ae-be]!==_e[Ae]&&(F[fe+W]=_e[Ae]?2:4,++xe),xe>1e3)return null}for(Ae=be*(E-1),fe=j*D,0!==_e[Ae]&&(F[fe]=8,++xe),W=1;W<v;W++)_e[Ae]!==_e[Ae+1]&&(F[fe+W]=_e[Ae]?4:8,++xe),Ae++;if(0!==_e[Ae]&&(F[fe+W]=4,++xe),xe>1e3)return null;const ke=new Int32Array([0,D,-1,0,-D,0,0,0,1]);let ze,tt,Oe;for(le.isNodeJS?tt=[]:ze=new Path2D,j=0;xe&&j<=E;j++){let je=j*D;const U=je+v;for(;je<U&&!F[je];)je++;if(je===U)continue;ze?ze.moveTo(je%D,j):Oe=[je%D,j];const ie=je;let Te=F[je];do{const Ke=ke[Te];do{je+=Ke}while(!F[je]);const qe=F[je];5!==qe&&10!==qe?(Te=qe,F[je]=0):(Te=qe&51*Te>>4,F[je]&=Te>>2|Te<<2),ze?ze.lineTo(je%D,je/D|0):Oe.push(je%D,je/D|0),F[je]||--xe}while(ie!==je);ze||tt.push(Oe),--j}return _e=null,F=null,function(je){if(je.save(),je.scale(1/v,-1/E),je.translate(0,-E),ze)je.fill(ze);else{je.beginPath();for(const U of tt){je.moveTo(U[0],U[1]);for(let ie=2,Te=U.length;ie<Te;ie+=2)je.lineTo(U[ie],U[ie+1])}je.fill()}je.beginPath(),je.restore()}}(v)),C.compiled))return void C.compiled(d);const D=this._createMaskCanvas(v),F=D.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(F,D.offsetX,D.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(v,E,d=0,C=0,D,F){if(!this.contentVisible)return;v=this.getObject(v.data,v);const j=this.ctx;j.save();const W=j.mozCurrentTransform;j.transform(E,d,C,D,0,0);const fe=this._createMaskCanvas(v);j.setTransform(1,0,0,1,0,0);for(let be=0,_e=F.length;be<_e;be+=2){const Ae=p.Util.transform(W,[E,d,C,D,F[be],F[be+1]]),[xe,ke]=p.Util.applyTransform([0,0],Ae);j.drawImage(fe.canvas,xe,ke)}j.restore(),this.compose()}paintImageMaskXObjectGroup(v){if(!this.contentVisible)return;const E=this.ctx,d=this.current.fillColor,C=this.current.patternFill;for(let D=0,F=v.length;D<F;D++){const j=v[D],W=j.width,fe=j.height,be=this.cachedCanvases.getCanvas("maskCanvas",W,fe,!1),_e=be.context;_e.save(),I(_e,j),_e.globalCompositeOperation="source-in",_e.fillStyle=C?d.getPattern(_e,this,E.mozCurrentTransformInverse,ce.PathType.FILL):d,_e.fillRect(0,0,W,fe),_e.restore(),E.save(),E.transform.apply(E,j.transform),E.scale(1,-1),x(E,be.canvas,0,0,W,fe,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(v){if(!this.contentVisible)return;const E=this.getObject(v);E?this.paintInlineImageXObject(E):(0,p.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(v,E,d,C){if(!this.contentVisible)return;const D=this.getObject(v);if(!D)return void(0,p.warn)("Dependent image isn't ready yet");const F=D.width,j=D.height,W=[];for(let fe=0,be=C.length;fe<be;fe+=2)W.push({transform:[E,0,0,d,C[fe],C[fe+1]],x:0,y:0,w:F,h:j});this.paintInlineImageXObjectGroup(D,W)}paintInlineImageXObject(v){if(!this.contentVisible)return;const E=v.width,d=v.height,C=this.ctx;let D;if(this.save(),C.scale(1/E,-1/d),"function"==typeof HTMLElement&&v instanceof HTMLElement||!v.data)D=v;else{const fe=this.cachedCanvases.getCanvas("inlineImage",E,d,!1);R(fe.context,v,this.current.transferMaps),D=fe.canvas}const F=this._scaleImage(D,C.mozCurrentTransformInverse);C.imageSmoothingEnabled=Ie(C.mozCurrentTransform,v.interpolate);const[j,W]=x(C,F.img,0,0,F.paintWidth,F.paintHeight,0,-d,E,d);if(this.imageLayer){const fe=this.getCanvasPosition(0,-d);this.imageLayer.appendImage({imgData:v,left:fe[0],top:fe[1],width:j,height:W})}this.compose(),this.restore()}paintInlineImageXObjectGroup(v,E){if(!this.contentVisible)return;const d=this.ctx,C=v.width,D=v.height,F=this.cachedCanvases.getCanvas("inlineImage",C,D,!1);R(F.context,v,this.current.transferMaps);for(let W=0,fe=E.length;W<fe;W++){const be=E[W];if(d.save(),d.transform.apply(d,be.transform),d.scale(1,-1),x(d,F.canvas,be.x,be.y,be.w,be.h,0,-1,1,1),this.imageLayer){const _e=this.getCanvasPosition(be.x,be.y);this.imageLayer.appendImage({imgData:v,left:_e[0],top:_e[1],width:C,height:D})}d.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(v){}markPointProps(v,E){}beginMarkedContent(v){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(v,E){this.markedContentStack.push("OC"===v?{visible:this.optionalContentConfig.isVisible(E)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(v){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(v);const d=this.ctx;this.pendingClip&&(E||(this.pendingClip===Fe?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const v=this.ctx.mozCurrentTransform;if(0===v[1]&&0===v[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(v[0]),Math.abs(v[3]));else{const E=Math.abs(v[0]*v[3]-v[2]*v[1]),d=Math.hypot(v[0],v[2]),C=Math.hypot(v[1],v[3]);this._cachedGetSinglePixelWidth=Math.max(d,C)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:v}=this.current,E=this.ctx.mozCurrentTransform;let d,C;if(0===E[1]&&0===E[2]){const D=Math.abs(E[0]),F=Math.abs(E[3]);if(0===v)d=1/D,C=1/F;else{const j=D*v,W=F*v;d=j<1?1/j:1,C=W<1?1/W:1}}else{const D=Math.abs(E[0]*E[3]-E[2]*E[1]),F=Math.hypot(E[0],E[1]),j=Math.hypot(E[2],E[3]);if(0===v)d=j/D,C=F/D;else{const W=v*D;d=j>W?j/W:1,C=F>W?F/W:1}}this._cachedScaleForStroking=[d,C]}return this._cachedScaleForStroking}rescaleAndStroke(v){const{ctx:E}=this,{lineWidth:d}=this.current,[C,D]=this.getScaleForStroking();if(E.lineWidth=d||1,1===C&&1===D)return void E.stroke();let F,j,W;v&&(F=E.mozCurrentTransform.slice(),j=E.getLineDash().slice(),W=E.lineDashOffset),E.scale(C,D);const fe=Math.max(C,D);E.setLineDash(E.getLineDash().map(be=>be/fe)),E.lineDashOffset/=fe,E.stroke(),v&&(E.setTransform(...F),E.setLineDash(j),E.lineDashOffset=W)}getCanvasPosition(v,E){const d=this.ctx.mozCurrentTransform;return[d[0]*v+d[2]*E+d[4],d[1]*v+d[3]*E+d[5]]}isContentVisible(){for(let v=this.markedContentStack.length-1;v>=0;v--)if(!this.markedContentStack[v].visible)return!1;return!0}}k.CanvasGraphics=$e;for(const J in p.OPS)void 0!==$e.prototype[J]&&($e.prototype[p.OPS[J]]=$e.prototype[J])},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.TilingPattern=k.PathType=void 0,k.getShadingPattern=function O(h){switch(h[0]){case"RadialAxial":return new Q(h);case"Mesh":return new P(h);case"Dummy":return new N}throw new Error(`Unknown IR type: ${h[0]}`)};var p=X(1),ce=X(3);const ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function le(h,S){if(!S||ce.isNodeJS)return;const H=S[2]-S[0],M=S[3]-S[1],x=new Path2D;x.rect(S[0],S[1],H,M),h.clip(x)}k.PathType=ae;class pe{constructor(){this.constructor===pe&&(0,p.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,p.unreachable)("Abstract method `getPattern` called.")}}class Q extends pe{constructor(S){super(),this._type=S[1],this._bbox=S[2],this._colorStops=S[3],this._p0=S[4],this._p1=S[5],this._r0=S[6],this._r1=S[7],this.matrix=null}_createGradient(S){let H;"axial"===this._type?H=S.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(H=S.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const M of this._colorStops)H.addColorStop(M[0],M[1]);return H}getPattern(S,H,M,x){let u;if(x===ae.STROKE||x===ae.FILL){const g=H.current.getClippedPathBoundingBox(x,S.mozCurrentTransform)||[0,0,0,0],R=Math.ceil(g[2]-g[0])||1,I=Math.ceil(g[3]-g[1])||1,V=H.cachedCanvases.getCanvas("pattern",R,I,!0),Y=V.context;Y.clearRect(0,0,Y.canvas.width,Y.canvas.height),Y.beginPath(),Y.rect(0,0,Y.canvas.width,Y.canvas.height),Y.translate(-g[0],-g[1]),M=p.Util.transform(M,[1,0,0,1,g[0],g[1]]),Y.transform.apply(Y,H.baseTransform),this.matrix&&Y.transform.apply(Y,this.matrix),le(Y,this._bbox),Y.fillStyle=this._createGradient(Y),Y.fill(),u=S.createPattern(V.canvas,"no-repeat");const ne=new DOMMatrix(M);try{u.setTransform(ne)}catch(re){(0,p.warn)(`RadialAxialShadingPattern.getPattern: "${null==re?void 0:re.message}".`)}}else le(S,this._bbox),u=this._createGradient(S);return u}}function y(h,S,H,M,x,u,g,R){const I=S.coords,V=S.colors,Y=h.data,ne=4*h.width;let re;I[H+1]>I[M+1]&&(re=H,H=M,M=re,re=u,u=g,g=re),I[M+1]>I[x+1]&&(re=M,M=x,x=re,re=g,g=R,R=re),I[H+1]>I[M+1]&&(re=H,H=M,M=re,re=u,u=g,g=re);const ue=(I[H]+S.offsetX)*S.scaleX,ve=(I[H+1]+S.offsetY)*S.scaleY,we=(I[M]+S.offsetX)*S.scaleX,Ie=(I[M+1]+S.offsetY)*S.scaleY,de=(I[x]+S.offsetX)*S.scaleX,Me=(I[x+1]+S.offsetY)*S.scaleY;if(ve>=Me)return;const Pe=V[u],Fe=V[u+1],$e=V[u+2],J=V[g],v=V[g+1],E=V[g+2],d=V[R],C=V[R+1],D=V[R+2],F=Math.round(ve),j=Math.round(Me);let W,fe,be,_e,Ae,xe,ke,ze;for(let tt=F;tt<=j;tt++){if(tt<Ie){let ie;ie=tt<ve?0:(ve-tt)/(ve-Ie),W=ue-(ue-we)*ie,fe=Pe-(Pe-J)*ie,be=Fe-(Fe-v)*ie,_e=$e-($e-E)*ie}else{let ie;ie=tt>Me?1:Ie===Me?0:(Ie-tt)/(Ie-Me),W=we-(we-de)*ie,fe=J-(J-d)*ie,be=v-(v-C)*ie,_e=E-(E-D)*ie}let Oe;Oe=tt<ve?0:tt>Me?1:(ve-tt)/(ve-Me),Ae=ue-(ue-de)*Oe,xe=Pe-(Pe-d)*Oe,ke=Fe-(Fe-C)*Oe,ze=$e-($e-D)*Oe;const Ve=Math.round(Math.min(W,Ae)),je=Math.round(Math.max(W,Ae));let U=ne*tt+4*Ve;for(let ie=Ve;ie<=je;ie++)Oe=(W-ie)/(W-Ae),Oe<0?Oe=0:Oe>1&&(Oe=1),Y[U++]=fe-(fe-xe)*Oe|0,Y[U++]=be-(be-ke)*Oe|0,Y[U++]=_e-(_e-ze)*Oe|0,Y[U++]=255}}function $(h,S,H){const M=S.coords,x=S.colors;let u,g;switch(S.type){case"lattice":const R=S.verticesPerRow,I=Math.floor(M.length/R)-1,V=R-1;for(u=0;u<I;u++){let Y=u*R;for(let ne=0;ne<V;ne++,Y++)y(h,H,M[Y],M[Y+1],M[Y+R],x[Y],x[Y+1],x[Y+R]),y(h,H,M[Y+R+1],M[Y+1],M[Y+R],x[Y+R+1],x[Y+1],x[Y+R])}break;case"triangles":for(u=0,g=M.length;u<g;u+=3)y(h,H,M[u],M[u+1],M[u+2],x[u],x[u+1],x[u+2]);break;default:throw new Error("illegal figure")}}class P extends pe{constructor(S){super(),this._coords=S[2],this._colors=S[3],this._figures=S[4],this._bounds=S[5],this._bbox=S[7],this._background=S[8],this.matrix=null}_createMeshCanvas(S,H,M){const R=Math.floor(this._bounds[0]),I=Math.floor(this._bounds[1]),V=Math.ceil(this._bounds[2])-R,Y=Math.ceil(this._bounds[3])-I,ne=Math.min(Math.ceil(Math.abs(V*S[0]*1.1)),3e3),re=Math.min(Math.ceil(Math.abs(Y*S[1]*1.1)),3e3),ue=V/ne,ve=Y/re,we={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-I,scaleX:1/ue,scaleY:1/ve},Me=M.getCanvas("mesh",ne+4,re+4,!1),Pe=Me.context,Fe=Pe.createImageData(ne,re);if(H){const J=Fe.data;for(let v=0,E=J.length;v<E;v+=4)J[v]=H[0],J[v+1]=H[1],J[v+2]=H[2],J[v+3]=255}for(const J of this._figures)$(Fe,J,we);return Pe.putImageData(Fe,2,2),{canvas:Me.canvas,offsetX:R-2*ue,offsetY:I-2*ve,scaleX:ue,scaleY:ve}}getPattern(S,H,M,x){let u;if(le(S,this._bbox),x===ae.SHADING)u=p.Util.singularValueDecompose2dScale(S.mozCurrentTransform);else if(u=p.Util.singularValueDecompose2dScale(H.baseTransform),this.matrix){const R=p.Util.singularValueDecompose2dScale(this.matrix);u=[u[0]*R[0],u[1]*R[1]]}const g=this._createMeshCanvas(u,x===ae.SHADING?null:this._background,H.cachedCanvases);return x!==ae.SHADING&&(S.setTransform.apply(S,H.baseTransform),this.matrix&&S.transform.apply(S,this.matrix)),S.translate(g.offsetX,g.offsetY),S.scale(g.scaleX,g.scaleY),S.createPattern(g.canvas,"no-repeat")}}class N extends pe{getPattern(){return"hotpink"}}class _{static get MAX_PATTERN_SIZE(){return(0,p.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(S,H,M,x,u){this.operatorList=S[2],this.matrix=S[3]||[1,0,0,1,0,0],this.bbox=S[4],this.xstep=S[5],this.ystep=S[6],this.paintType=S[7],this.tilingType=S[8],this.color=H,this.ctx=M,this.canvasGraphicsFactory=x,this.baseTransform=u}createPatternCanvas(S){const H=this.operatorList,M=this.bbox,x=this.xstep,u=this.ystep,g=this.paintType,I=this.color,V=this.canvasGraphicsFactory;(0,p.info)("TilingType: "+this.tilingType);const Y=M[0],ne=M[1],re=M[2],ue=M[3],ve=p.Util.singularValueDecompose2dScale(this.matrix),we=p.Util.singularValueDecompose2dScale(this.baseTransform),Ie=[ve[0]*we[0],ve[1]*we[1]],de=this.getSizeAndScale(x,this.ctx.canvas.width,Ie[0]),Me=this.getSizeAndScale(u,this.ctx.canvas.height,Ie[1]),Pe=S.cachedCanvases.getCanvas("pattern",de.size,Me.size,!0),Fe=Pe.context,$e=V.createCanvasGraphics(Fe);$e.groupLevel=S.groupLevel,this.setFillAndStrokeStyleToContext($e,g,I);let J=Y,v=ne,E=re,d=ue;return Y<0&&(J=0,E+=Math.abs(Y)),ne<0&&(v=0,d+=Math.abs(ne)),Fe.translate(-de.scale*J,-Me.scale*v),$e.transform(de.scale,0,0,Me.scale,0,0),Fe.save(),this.clipBbox($e,J,v,E,d),$e.baseTransform=$e.ctx.mozCurrentTransform.slice(),$e.executeOperatorList(H),$e.endDrawing(),{canvas:Pe.canvas,scaleX:de.scale,scaleY:Me.scale,offsetX:J,offsetY:v}}getSizeAndScale(S,H,M){S=Math.abs(S);const x=Math.max(_.MAX_PATTERN_SIZE,H);let u=Math.ceil(S*M);return u>=x?u=x:M=u/S,{scale:M,size:u}}clipBbox(S,H,M,x,u){S.ctx.rect(H,M,x-H,u-M),S.current.updateRectMinMax(S.ctx.mozCurrentTransform,[H,M,x,u]),S.clip(),S.endPath()}setFillAndStrokeStyleToContext(S,H,M){const x=S.ctx,u=S.current;switch(H){case 1:const g=this.ctx;x.fillStyle=g.fillStyle,x.strokeStyle=g.strokeStyle,u.fillColor=g.fillStyle,u.strokeColor=g.strokeStyle;break;case 2:const R=p.Util.makeHexColor(M[0],M[1],M[2]);x.fillStyle=R,x.strokeStyle=R,u.fillColor=R,u.strokeColor=R;break;default:throw new p.FormatError(`Unsupported paint type: ${H}`)}}getPattern(S,H,M,x){let u=M;x!==ae.SHADING&&(u=p.Util.transform(u,H.baseTransform),this.matrix&&(u=p.Util.transform(u,this.matrix)));const g=this.createPatternCanvas(H);let R=new DOMMatrix(u);R=R.translate(g.offsetX,g.offsetY),R=R.scale(1/g.scaleX,1/g.scaleY);const I=S.createPattern(g.canvas,"repeat");try{I.setTransform(R)}catch(V){(0,p.warn)(`TilingPattern.getPattern: "${null==V?void 0:V.message}".`)}return I}}k.TilingPattern=_},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.applyMaskImageData=function ce({src:ae,srcPos:le=0,dest:pe,destPos:Q=0,width:y,height:$,inverseDecode:P=!1}){const N=p.FeatureTest.isLittleEndian?4278190080:255,[O,b]=P?[0,N]:[N,0],_=y>>3,h=7&y,S=ae.length;pe=new Uint32Array(pe.buffer);for(let H=0;H<$;H++){for(const x=le+_;le<x;le++){const u=le<S?ae[le]:255;pe[Q++]=128&u?b:O,pe[Q++]=64&u?b:O,pe[Q++]=32&u?b:O,pe[Q++]=16&u?b:O,pe[Q++]=8&u?b:O,pe[Q++]=4&u?b:O,pe[Q++]=2&u?b:O,pe[Q++]=1&u?b:O}if(0===h)continue;const M=le<S?ae[le++]:255;for(let x=0;x<h;x++)pe[Q++]=M&1<<7-x?b:O}return{srcPos:le,destPos:Q}};var p=X(1)},(We,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.GlobalWorkerOptions=void 0;const X=Object.create(null);k.GlobalWorkerOptions=X,X.workerPort=void 0===X.workerPort?null:X.workerPort,X.workerSrc=void 0===X.workerSrc?"":X.workerSrc},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.MessageHandler=void 0;var p=X(1);function le(Q){switch(Q instanceof Error||"object"==typeof Q&&null!==Q||(0,p.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Q.name){case"AbortException":return new p.AbortException(Q.message);case"MissingPDFException":return new p.MissingPDFException(Q.message);case"PasswordException":return new p.PasswordException(Q.message,Q.code);case"UnexpectedResponseException":return new p.UnexpectedResponseException(Q.message,Q.status);case"UnknownErrorException":return new p.UnknownErrorException(Q.message,Q.details);default:return new p.UnknownErrorException(Q.message,Q.toString())}}k.MessageHandler=class pe{constructor(y,$,P){this.sourceName=y,this.targetName=$,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=N=>{const O=N.data;if(O.targetName!==this.sourceName)return;if(O.stream)return void this._processStreamMessage(O);if(O.callback){const _=O.callbackId,h=this.callbackCapabilities[_];if(!h)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],1===O.callback)h.resolve(O.data);else{if(2!==O.callback)throw new Error("Unexpected callback case");h.reject(le(O.reason))}return}const b=this.actionHandler[O.action];if(!b)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const _=this.sourceName,h=O.sourceName;new Promise(function(S){S(b(O.data))}).then(function(S){P.postMessage({sourceName:_,targetName:h,callback:1,callbackId:O.callbackId,data:S})},function(S){P.postMessage({sourceName:_,targetName:h,callback:2,callbackId:O.callbackId,reason:le(S)})})}else O.streamId?this._createStreamSink(O):b(O.data)},P.addEventListener("message",this._onComObjOnMessage)}on(y,$){const P=this.actionHandler;if(P[y])throw new Error(`There is already an actionName called "${y}"`);P[y]=$}send(y,$,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:$},P)}sendWithPromise(y,$,P){const N=this.callbackId++,O=(0,p.createPromiseCapability)();this.callbackCapabilities[N]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:N,data:$},P)}catch(b){O.reject(b)}return O.promise}sendWithStream(y,$,P,N){const O=this.streamId++,b=this.sourceName,_=this.targetName,h=this.comObj;return new ReadableStream({start:S=>{const H=(0,p.createPromiseCapability)();return this.streamControllers[O]={controller:S,startCall:H,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:b,targetName:_,action:y,streamId:O,data:$,desiredSize:S.desiredSize},N),H.promise},pull:S=>{const H=(0,p.createPromiseCapability)();return this.streamControllers[O].pullCall=H,h.postMessage({sourceName:b,targetName:_,stream:6,streamId:O,desiredSize:S.desiredSize}),H.promise},cancel:S=>{(0,p.assert)(S instanceof Error,"cancel must have a valid reason");const H=(0,p.createPromiseCapability)();return this.streamControllers[O].cancelCall=H,this.streamControllers[O].isClosed=!0,h.postMessage({sourceName:b,targetName:_,stream:1,streamId:O,reason:le(S)}),H.promise}},P)}_createStreamSink(y){const $=y.streamId,P=this.sourceName,N=y.sourceName,O=this.comObj,b=this,_=this.actionHandler[y.action],h={enqueue(S,H=1,M){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=H,x>0&&this.desiredSize<=0&&(this.sinkCapability=(0,p.createPromiseCapability)(),this.ready=this.sinkCapability.promise),O.postMessage({sourceName:P,targetName:N,stream:4,streamId:$,chunk:S},M)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:P,targetName:N,stream:3,streamId:$}),delete b.streamSinks[$])},error(S){(0,p.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:P,targetName:N,stream:5,streamId:$,reason:le(S)}))},sinkCapability:(0,p.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[$]=h,new Promise(function(S){S(_(y.data,h))}).then(function(){O.postMessage({sourceName:P,targetName:N,stream:8,streamId:$,success:!0})},function(S){O.postMessage({sourceName:P,targetName:N,stream:8,streamId:$,reason:le(S)})})}_processStreamMessage(y){const $=y.streamId,P=this.sourceName,N=y.sourceName,O=this.comObj,b=this.streamControllers[$],_=this.streamSinks[$];switch(y.stream){case 8:y.success?b.startCall.resolve():b.startCall.reject(le(y.reason));break;case 7:y.success?b.pullCall.resolve():b.pullCall.reject(le(y.reason));break;case 6:if(!_){O.postMessage({sourceName:P,targetName:N,stream:7,streamId:$,success:!0});break}_.desiredSize<=0&&y.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=y.desiredSize,new Promise(function(h){h(_.onPull&&_.onPull())}).then(function(){O.postMessage({sourceName:P,targetName:N,stream:7,streamId:$,success:!0})},function(h){O.postMessage({sourceName:P,targetName:N,stream:7,streamId:$,reason:le(h)})});break;case 4:if((0,p.assert)(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(y.chunk);break;case 3:if((0,p.assert)(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),this._deleteStreamController(b,$);break;case 5:(0,p.assert)(b,"error should have stream controller"),b.controller.error(le(y.reason)),this._deleteStreamController(b,$);break;case 2:y.success?b.cancelCall.resolve():b.cancelCall.reject(le(y.reason)),this._deleteStreamController(b,$);break;case 1:if(!_)break;new Promise(function(h){h(_.onCancel&&_.onCancel(le(y.reason)))}).then(function(){O.postMessage({sourceName:P,targetName:N,stream:2,streamId:$,success:!0})},function(h){O.postMessage({sourceName:P,targetName:N,stream:2,streamId:$,reason:le(h)})}),_.sinkCapability.reject(le(y.reason)),_.isCancelled=!0,delete this.streamSinks[$];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(y,$){var P=this;return _asyncToGenerator(function*(){yield Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete P.streamControllers[$]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(We,k,X)=>{var ae,le;Object.defineProperty(k,"__esModule",{value:!0}),k.Metadata=void 0;var p=X(1);ae=new WeakMap,le=new WeakMap,k.Metadata=class ce{constructor({parsedData:Q,rawData:y}){vt(this,ae,void 0),vt(this,le,void 0),dn(this,ae,Q),dn(this,le,y)}getRaw(){return ft(this,le)}get(Q){var y;return null!=(y=ft(this,ae).get(Q))?y:null}getAll(){return(0,p.objectFromMap)(ft(this,ae))}has(Q){return ft(this,ae).has(Q)}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.OptionalContentConfig=void 0;var p=X(1);class ce{constructor(pe,Q){this.visible=!0,this.name=pe,this.intent=Q}}k.OptionalContentConfig=class ae{constructor(pe){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==pe){this.name=pe.name,this.creator=pe.creator,this._order=pe.order;for(const Q of pe.groups)this._groups.set(Q.id,new ce(Q.name,Q.intent));if("OFF"===pe.baseState)for(const Q of this._groups)Q.visible=!1;for(const Q of pe.on)this._groups.get(Q).visible=!0;for(const Q of pe.off)this._groups.get(Q).visible=!1}}_evaluateVisibilityExpression(pe){const Q=pe.length;if(Q<2)return!0;const y=pe[0];for(let $=1;$<Q;$++){const P=pe[$];let N;if(Array.isArray(P))N=this._evaluateVisibilityExpression(P);else{if(!this._groups.has(P))return(0,p.warn)(`Optional content group not found: ${P}`),!0;N=this._groups.get(P).visible}switch(y){case"And":if(!N)return!1;break;case"Or":if(N)return!0;break;case"Not":return!N;default:return!0}}return"And"===y}isVisible(pe){if(0===this._groups.size)return!0;if(!pe)return(0,p.warn)("Optional content group not defined."),!0;if("OCG"===pe.type)return this._groups.has(pe.id)?this._groups.get(pe.id).visible:((0,p.warn)(`Optional content group not found: ${pe.id}`),!0);if("OCMD"===pe.type){if(pe.expression)return this._evaluateVisibilityExpression(pe.expression);if(!pe.policy||"AnyOn"===pe.policy){for(const Q of pe.ids){if(!this._groups.has(Q))return(0,p.warn)(`Optional content group not found: ${Q}`),!0;if(this._groups.get(Q).visible)return!0}return!1}if("AllOn"===pe.policy){for(const Q of pe.ids){if(!this._groups.has(Q))return(0,p.warn)(`Optional content group not found: ${Q}`),!0;if(!this._groups.get(Q).visible)return!1}return!0}if("AnyOff"===pe.policy){for(const Q of pe.ids){if(!this._groups.has(Q))return(0,p.warn)(`Optional content group not found: ${Q}`),!0;if(!this._groups.get(Q).visible)return!0}return!1}if("AllOff"===pe.policy){for(const Q of pe.ids){if(!this._groups.has(Q))return(0,p.warn)(`Optional content group not found: ${Q}`),!0;if(this._groups.get(Q).visible)return!1}return!0}return(0,p.warn)(`Unknown optional content policy ${pe.policy}.`),!0}return(0,p.warn)(`Unknown group type ${pe.type}.`),!0}setVisibility(pe,Q=!0){this._groups.has(pe)?this._groups.get(pe).visible=!!Q:(0,p.warn)(`Optional content group not found: ${pe}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,p.objectFromMap)(this._groups):null}getGroup(pe){return this._groups.get(pe)||null}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.PDFDataTransportStream=void 0;var p=X(1),ce=X(5);k.PDFDataTransportStream=class ae{constructor(y,$){(0,p.assert)($,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const P=y.initialData;if((null==P?void 0:P.length)>0){const N=new Uint8Array(P).buffer;this._queuedChunks.push(N)}this._pdfDataRangeTransport=$,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((N,O)=>{this._onReceiveData({begin:N,chunk:O})}),this._pdfDataRangeTransport.addProgressListener((N,O)=>{this._onProgress({loaded:N,total:O})}),this._pdfDataRangeTransport.addProgressiveReadListener(N=>{this._onReceiveData({chunk:N})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const $=new Uint8Array(y.chunk).buffer;if(void 0===y.begin)this._fullRequestReader?this._fullRequestReader._enqueue($):this._queuedChunks.push($);else{const P=this._rangeReaders.some(function(N){return N._begin===y.begin&&(N._enqueue($),!0)});(0,p.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y,$;return null!=($=null==(y=this._fullRequestReader)?void 0:y._loaded)?$:0}_onProgress(y){if(void 0===y.total){const $=this._rangeReaders[0];(null==$?void 0:$.onProgress)&&$.onProgress({loaded:y.loaded})}else{const $=this._fullRequestReader;(null==$?void 0:$.onProgress)&&$.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const $=this._rangeReaders.indexOf(y);$>=0&&this._rangeReaders.splice($,1)}getFullReader(){(0,p.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new le(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,$){if($<=this._progressiveDataLength)return null;const P=new pe(this,y,$);return this._pdfDataRangeTransport.requestDataRange(y,$),this._rangeReaders.push(P),P}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const $ of this._rangeReaders.slice(0))$.cancel(y);this._pdfDataRangeTransport.abort()}};class le{constructor(y,$,P=!1,N=null){this._stream=y,this._done=P||!1,this._filename=(0,ce.isPdfFile)(N)?N:null,this._queuedChunks=$||[],this._loaded=0;for(const O of this._queuedChunks)this._loaded+=O.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var y=this;return _asyncToGenerator(function*(){if(y._queuedChunks.length>0)return{value:y._queuedChunks.shift(),done:!1};if(y._done)return{value:void 0,done:!0};const $=(0,p.createPromiseCapability)();return y._requests.push($),$.promise})()}cancel(y){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pe{constructor(y,$,P){this._stream=y,this._begin=$,this._end=P,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(0===this._requests.length)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var y=this;return _asyncToGenerator(function*(){if(y._queuedChunk){const P=y._queuedChunk;return y._queuedChunk=null,{value:P,done:!1}}if(y._done)return{value:void 0,done:!0};const $=(0,p.createPromiseCapability)();return y._requests.push($),$.promise})()}cancel(y){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(We,k)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.XfaText=void 0;class X{static textContent(ce){const ae=[],le={items:ae,styles:Object.create(null)};return function pe(Q){var P;if(!Q)return;let y=null;const $=Q.name;if("#text"===$)y=Q.value;else{if(!X.shouldBuildText($))return;(null==(P=null==Q?void 0:Q.attributes)?void 0:P.textContent)?y=Q.attributes.textContent:Q.value&&(y=Q.value)}if(null!==y&&ae.push({str:y}),Q.children)for(const N of Q.children)pe(N)}(ce),le}static shouldBuildText(ce){return!("textarea"===ce||"input"===ce||"option"===ce||"select"===ce)}}k.XfaText=X},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.NodeStandardFontDataFactory=k.NodeCanvasFactory=k.NodeCMapReaderFactory=void 0;var p=X(6);const ce=function(Q){return new Promise((y,$)=>{__webpack_require__(172).readFile(Q,(N,O)=>{!N&&O?y(new Uint8Array(O)):$(new Error(N))})})};k.NodeCanvasFactory=class ae extends p.BaseCanvasFactory{_createCanvas(y,$){return __webpack_require__(414).createCanvas(y,$)}},k.NodeCMapReaderFactory=class le extends p.BaseCMapReaderFactory{_fetchData(y,$){return ce(y).then(P=>({cMapData:P,compressionType:$}))}},k.NodeStandardFontDataFactory=class pe extends p.BaseStandardFontDataFactory{_fetchData(y){return ce(y)}}},(We,k,X)=>{var J,CS;Object.defineProperty(k,"__esModule",{value:!0}),k.AnnotationLayer=void 0;var p=X(1),ce=X(5),ae=X(8),le=X(21),pe=X(22);const Q=1e3,y=new WeakSet;function $(E){return{width:E[2]-E[0],height:E[3]-E[1]}}class P{static create(d){switch(d.data.annotationType){case p.AnnotationType.LINK:return new O(d);case p.AnnotationType.TEXT:return new b(d);case p.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new h(d);case"Btn":return d.data.radioButton?new H(d):d.data.checkBox?new S(d):new M(d);case"Ch":return new x(d)}return new _(d);case p.AnnotationType.POPUP:return new u(d);case p.AnnotationType.FREETEXT:return new R(d);case p.AnnotationType.LINE:return new I(d);case p.AnnotationType.SQUARE:return new V(d);case p.AnnotationType.CIRCLE:return new Y(d);case p.AnnotationType.POLYLINE:return new ne(d);case p.AnnotationType.CARET:return new ue(d);case p.AnnotationType.INK:return new ve(d);case p.AnnotationType.POLYGON:return new re(d);case p.AnnotationType.HIGHLIGHT:return new we(d);case p.AnnotationType.UNDERLINE:return new Ie(d);case p.AnnotationType.SQUIGGLY:return new de(d);case p.AnnotationType.STRIKEOUT:return new Me(d);case p.AnnotationType.STAMP:return new Pe(d);case p.AnnotationType.FILEATTACHMENT:return new Fe(d);default:return new N(d)}}}class N{constructor(d,{isRenderable:C=!1,ignoreBorder:D=!1,createQuadrilaterals:F=!1}={}){this.isRenderable=C,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,this._mouseState=d.mouseState,C&&(this.container=this._createContainer(D)),F&&(this.quadrilaterals=this._createQuadrilaterals(D))}_createContainer(d=!1){const C=this.data,D=this.page,F=this.viewport,j=document.createElement("section");let{width:W,height:fe}=$(C.rect);j.setAttribute("data-annotation-id",C.id);const be=p.Util.normalizeRect([C.rect[0],D.view[3]-C.rect[1]+D.view[1],C.rect[2],D.view[3]-C.rect[3]+D.view[1]]);if(C.hasOwnCanvas){const _e=F.transform.slice(),[Ae,xe]=p.Util.singularValueDecompose2dScale(_e);W=Math.ceil(W*Ae),fe=Math.ceil(fe*xe),be[0]*=Ae,be[1]*=xe;for(let ke=0;ke<4;ke++)_e[ke]=Math.sign(_e[ke]);j.style.transform=`matrix(${_e.join(",")})`}else j.style.transform=`matrix(${F.transform.join(",")})`;if(j.style.transformOrigin=`${-be[0]}px ${-be[1]}px`,!d&&C.borderStyle.width>0){j.style.borderWidth=`${C.borderStyle.width}px`,C.borderStyle.style!==p.AnnotationBorderStyleType.UNDERLINE&&(W-=2*C.borderStyle.width,fe-=2*C.borderStyle.width);const _e=C.borderStyle.horizontalCornerRadius,Ae=C.borderStyle.verticalCornerRadius;switch((_e>0||Ae>0)&&(j.style.borderRadius=`${_e}px / ${Ae}px`),C.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:j.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:j.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:j.style.borderBottomStyle="solid"}C.borderColor||C.color?j.style.borderColor=p.Util.makeHexColor(0|C.color[0],0|C.color[1],0|C.color[2]):j.style.borderWidth=0}return j.style.left=`${be[0]}px`,j.style.top=`${be[1]}px`,C.hasOwnCanvas?j.style.width=j.style.height="auto":(j.style.width=`${W}px`,j.style.height=`${fe}px`),j}get _commonActions(){const d=(C,D,F)=>{const j=F.detail[C];F.target.style[D]=le.ColorConverters[`${j[0]}_HTML`](j.slice(1))};return(0,p.shadow)(this,"_commonActions",{display:C=>{const D=C.detail.display%2==1;C.target.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:D,print:0===C.detail.display||3===C.detail.display})},print:C=>{this.annotationStorage.setValue(this.data.id,{print:C.detail.print})},hidden:C=>{C.target.style.visibility=C.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:C.detail.hidden})},focus:C=>{setTimeout(()=>C.target.focus({preventScroll:!1}),0)},userName:C=>{C.target.title=C.detail.userName},readonly:C=>{C.detail.readonly?C.target.setAttribute("readonly",""):C.target.removeAttribute("readonly")},required:C=>{C.detail.required?C.target.setAttribute("required",""):C.target.removeAttribute("required")},bgColor:C=>{d("bgColor","backgroundColor",C)},fillColor:C=>{d("fillColor","backgroundColor",C)},fgColor:C=>{d("fgColor","color",C)},textColor:C=>{d("textColor","color",C)},borderColor:C=>{d("borderColor","borderColor",C)},strokeColor:C=>{d("strokeColor","borderColor",C)}})}_dispatchEventFromSandbox(d,C){const D=this._commonActions;for(const F of Object.keys(C.detail)){const j=d[F]||D[F];j&&j(C)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const C=this.annotationStorage.getRawValue(this.data.id);if(!C)return;const D=this._commonActions;for(const[F,j]of Object.entries(C)){const W=D[F];W&&(W({detail:j,target:d}),delete C[F])}}_createQuadrilaterals(d=!1){if(!this.data.quadPoints)return null;const C=[],D=this.data.rect;for(const F of this.data.quadPoints)this.data.rect=[F[2].x,F[2].y,F[1].x,F[1].y],C.push(this._createContainer(d));return this.data.rect=D,C}_createPopup(d,C){let D=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,D=this.quadrilaterals[0]),d||((d=document.createElement("div")).style.height=D.style.height,d.style.width=D.style.width,D.appendChild(d));const j=new g({container:D,trigger:d,color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,hideWrapper:!0}).render();j.style.left=D.style.width,D.appendChild(j)}_renderQuadrilaterals(d){for(const C of this.quadrilaterals)C.className=d;return this.quadrilaterals}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,C=null){const D=[];if(this._fieldObjects){const F=this._fieldObjects[d];if(F)for(const{page:j,id:W,exportValues:fe}of F){if(-1===j||W===C)continue;const be="string"==typeof fe?fe:null,_e=document.getElementById(W);!_e||y.has(_e)?D.push({id:W,exportValue:be,domElement:_e}):(0,p.warn)(`_getElementsByName - element not allowed: ${W}`)}return D}for(const F of document.getElementsByName(d)){const{id:j,exportValue:W}=F;j!==C&&(!y.has(F)||D.push({id:j,exportValue:W,domElement:F}))}return D}static get platform(){const d="undefined"!=typeof navigator?navigator.platform:"";return(0,p.shadow)(this,"platform",{isWin:d.includes("Win"),isMac:d.includes("Mac")})}}class O extends N{constructor(d,C=null){super(d,{isRenderable:!!(d.data.url||d.data.dest||d.data.action||d.data.isTooltipOnly||d.data.resetForm||d.data.actions&&(d.data.actions.Action||d.data.actions["Mouse Up"]||d.data.actions["Mouse Down"])),ignoreBorder:!!(null==C?void 0:C.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:d,linkService:C}=this,D=document.createElement("a");if(d.url)C.addLinkAttributes(D,d.url,d.newWindow);else if(d.action)this._bindNamedAction(D,d.action);else if(d.dest)this._bindLink(D,d.dest);else{let F=!1;d.actions&&(d.actions.Action||d.actions["Mouse Up"]||d.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(F=!0,this._bindJSAction(D,d)),d.resetForm?this._bindResetFormAction(D,d.resetForm):F||this._bindLink(D,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((F,j)=>{const W=0===j?D:D.cloneNode();return F.appendChild(W),F}):(this.container.className="linkAnnotation",this.container.appendChild(D),this.container)}_bindLink(d,C){d.href=this.linkService.getDestinationHash(C),d.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||""===C)&&(d.className="internalLink")}_bindNamedAction(d,C){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeNamedAction(C),!1),d.className="internalLink"}_bindJSAction(d,C){d.href=this.linkService.getAnchorUrl("");const D=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(C.actions)){const j=D.get(F);!j||(d[j]=()=>{var W;return null==(W=this.linkService.eventBus)||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:F}}),!1})}d.onclick||(d.onclick=()=>!1),d.className="internalLink"}_bindResetFormAction(d,C){const D=d.onclick;if(D||(d.href=this.linkService.getAnchorUrl("")),d.className="internalLink",!this._fieldObjects)return(0,p.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(D||(d.onclick=()=>!1));d.onclick=()=>{var Ae;D&&D();const{fields:F,refs:j,include:W}=C,fe=[];if(0!==F.length||0!==j.length){const xe=new Set(j);for(const ke of F){const ze=this._fieldObjects[ke]||[];for(const{id:tt}of ze)xe.add(tt)}for(const ke of Object.values(this._fieldObjects))for(const ze of ke)xe.has(ze.id)===W&&fe.push(ze)}else for(const xe of Object.values(this._fieldObjects))fe.push(...xe);const be=this.annotationStorage,_e=[];for(const xe of fe){const{id:ke}=xe;switch(_e.push(ke),xe.type){case"text":case"combobox":case"listbox":be.setValue(ke,{value:xe.defaultValue||""});break;case"checkbox":case"radiobutton":be.setValue(ke,{value:xe.defaultValue===xe.exportValues});break;default:continue}const ze=document.getElementById(ke);!ze||!y.has(ze)||ze.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(null==(Ae=this.linkService.eventBus)||Ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:_e,name:"ResetForm"}})),!1}}}class b extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str))})}render(){this.container.className="textAnnotation";const d=document.createElement("img");return d.style.height=this.container.style.height,d.style.width=this.container.style.width,d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.appendChild(d),this.container}}class _ extends N{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:C,isMac:D}=N.platform;return C&&d.ctrlKey||D&&d.metaKey}_setEventListener(d,C,D,F){C.includes("mouse")?d.addEventListener(C,j=>{var W;null==(W=this.linkService.eventBus)||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:F(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):d.addEventListener(C,j=>{var W;null==(W=this.linkService.eventBus)||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:F(j)}})})}_setEventListeners(d,C,D){var F;for(const[j,W]of C)("Action"===W||(null==(F=this.data.actions)?void 0:F[W]))&&this._setEventListener(d,j,W,D)}_setBackgroundColor(d){const C=this.data.backgroundColor||null;d.style.backgroundColor=null===C?"transparent":p.Util.makeHexColor(C[0],C[1],C[2])}}class h extends _{constructor(d){super(d,{isRenderable:d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue})}setPropertyOnSiblings(d,C,D,F){const j=this.annotationStorage;for(const W of this._getElementsByName(d.name,d.id))W.domElement&&(W.domElement[C]=D),j.setValue(W.id,{[F]:D})}render(){var F;const d=this.annotationStorage,C=this.data.id;this.container.className="textWidgetAnnotation";let D=null;if(this.renderForms){const j=d.getValue(C,{value:this.data.fieldValue}),W=j.formattedValue||j.value||"",fe={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=W):(D=document.createElement("input"),D.type="text",D.setAttribute("value",W)),y.add(D),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=Q,fe.userValue=W,D.setAttribute("id",C),D.addEventListener("input",_e=>{d.setValue(C,{value:_e.target.value}),this.setPropertyOnSiblings(D,"value",_e.target.value,"value")}),D.addEventListener("resetform",_e=>{var xe;const Ae=null!=(xe=this.data.defaultFieldValue)?xe:"";D.value=fe.userValue=Ae,fe.formattedValue=null});let be=_e=>{const{formattedValue:Ae}=fe;null!=Ae&&(_e.target.value=Ae),_e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",Ae=>{fe.userValue&&(Ae.target.value=fe.userValue),fe.valueOnFocus=Ae.target.value}),D.addEventListener("updatefromsandbox",Ae=>{this._dispatchEventFromSandbox({value(ke){var ze;fe.userValue=null!=(ze=ke.detail.value)?ze:"",d.setValue(C,{value:fe.userValue.toString()}),ke.target.value=fe.userValue},formattedValue(ke){const{formattedValue:ze}=ke.detail;fe.formattedValue=ze,null!=ze&&ke.target!==document.activeElement&&(ke.target.value=ze),d.setValue(C,{formattedValue:ze})},selRange(ke){ke.target.setSelectionRange(...ke.detail.selRange)}},Ae)}),D.addEventListener("keydown",Ae=>{var ze;let xe=-1;if("Escape"===Ae.key?xe=0:"Enter"===Ae.key?xe=2:"Tab"===Ae.key&&(xe=3),-1===xe)return;const{value:ke}=Ae.target;fe.valueOnFocus!==ke&&(fe.userValue=ke,null==(ze=this.linkService.eventBus)||ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ke,willCommit:!0,commitKey:xe,selStart:Ae.target.selectionStart,selEnd:Ae.target.selectionEnd}}))});const _e=be;be=null,D.addEventListener("blur",Ae=>{var ke;const{value:xe}=Ae.target;fe.userValue=xe,this._mouseState.isDown&&fe.valueOnFocus!==xe&&(null==(ke=this.linkService.eventBus)||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:xe,willCommit:!0,commitKey:1,selStart:Ae.target.selectionStart,selEnd:Ae.target.selectionEnd}})),_e(Ae)}),(null==(F=this.data.actions)?void 0:F.Keystroke)&&D.addEventListener("beforeinput",Ae=>{var U;const{data:xe,target:ke}=Ae,{value:ze,selectionStart:tt,selectionEnd:Oe}=ke;let Ve=tt,je=Oe;switch(Ae.inputType){case"deleteWordBackward":{const ie=ze.substring(0,tt).match(/\w*[^\w]*$/);ie&&(Ve-=ie[0].length);break}case"deleteWordForward":{const ie=ze.substring(tt).match(/^[^\w]*\w*/);ie&&(je+=ie[0].length);break}case"deleteContentBackward":tt===Oe&&(Ve-=1);break;case"deleteContentForward":tt===Oe&&(je+=1)}Ae.preventDefault(),null==(U=this.linkService.eventBus)||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ze,change:xe||"",willCommit:!1,selStart:Ve,selEnd:je}})}),this._setEventListeners(D,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ae=>Ae.target.value)}if(be&&D.addEventListener("blur",be),null!==this.data.maxLen&&(D.maxLength=this.data.maxLen),this.data.comb){const Ae=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;D.classList.add("comb"),D.style.letterSpacing=`calc(${Ae}px - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.appendChild(D),this.container}_setTextStyle(d){const{fontSize:D,fontColor:F}=this.data.defaultAppearanceData,j=d.style;D&&(j.fontSize=`${D}px`),j.color=p.Util.makeHexColor(F[0],F[1],F[2]),null!==this.data.textAlignment&&(j.textAlign=["left","center","right"][this.data.textAlignment])}}class S extends _{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,C=this.data,D=C.id;let F=d.getValue(D,{value:C.exportValue===C.fieldValue}).value;"string"==typeof F&&(F="Off"!==F,d.setValue(D,{value:F})),this.container.className="buttonWidgetAnnotation checkBox";const j=document.createElement("input");return y.add(j),j.disabled=C.readOnly,j.type="checkbox",j.name=C.fieldName,F&&j.setAttribute("checked",!0),j.setAttribute("id",D),j.setAttribute("exportValue",C.exportValue),j.tabIndex=Q,j.addEventListener("change",W=>{const{name:fe,checked:be}=W.target;for(const _e of this._getElementsByName(fe,D)){const Ae=be&&_e.exportValue===C.exportValue;_e.domElement&&(_e.domElement.checked=Ae),d.setValue(_e.id,{value:Ae})}d.setValue(D,{value:be})}),j.addEventListener("resetform",W=>{W.target.checked=(C.defaultFieldValue||"Off")===C.exportValue}),this.enableScripting&&this.hasJSActions&&(j.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({value(be){be.target.checked="Off"!==be.detail.value,d.setValue(D,{value:be.target.checked})}},W)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.appendChild(j),this.container}}class H extends _{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const d=this.annotationStorage,C=this.data,D=C.id;let F=d.getValue(D,{value:C.fieldValue===C.buttonValue}).value;"string"==typeof F&&(F=F!==C.buttonValue,d.setValue(D,{value:F}));const j=document.createElement("input");if(y.add(j),j.disabled=C.readOnly,j.type="radio",j.name=C.fieldName,F&&j.setAttribute("checked",!0),j.setAttribute("id",D),j.tabIndex=Q,j.addEventListener("change",W=>{const{name:fe,checked:be}=W.target;for(const _e of this._getElementsByName(fe,D))d.setValue(_e.id,{value:!1});d.setValue(D,{value:be})}),j.addEventListener("resetform",W=>{const fe=C.defaultFieldValue;W.target.checked=null!=fe&&fe===C.buttonValue}),this.enableScripting&&this.hasJSActions){const W=C.buttonValue;j.addEventListener("updatefromsandbox",fe=>{this._dispatchEventFromSandbox({value:_e=>{const Ae=W===_e.detail.value;for(const xe of this._getElementsByName(_e.target.name)){const ke=Ae&&xe.id===D;xe.domElement&&(xe.domElement.checked=ke),d.setValue(xe.id,{value:ke})}}},fe)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.checked)}return this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.appendChild(j),this.container}}class M extends O{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();return d.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(d.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(d),d}}class x extends _{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const d=this.annotationStorage,C=this.data.id,D=d.getValue(C,{value:this.data.fieldValue});let{fontSize:F}=this.data.defaultAppearanceData;F||(F=9);const j=`calc(${F}px * var(--zoom-factor))`,W=document.createElement("select");y.add(W),W.disabled=this.data.readOnly,W.name=this.data.fieldName,W.setAttribute("id",C),W.tabIndex=Q,W.style.fontSize=`${F}px`,this.data.combo||(W.size=this.data.options.length,this.data.multiSelect&&(W.multiple=!0)),W.addEventListener("resetform",_e=>{const Ae=this.data.defaultFieldValue;for(const xe of W.options)xe.selected=xe.value===Ae});for(const _e of this.data.options){const Ae=document.createElement("option");Ae.textContent=_e.displayValue,Ae.value=_e.exportValue,this.data.combo&&(Ae.style.fontSize=j),D.value.includes(_e.exportValue)&&Ae.setAttribute("selected",!0),W.appendChild(Ae)}const fe=(_e,Ae)=>{const xe=Ae?"value":"textContent",ke=_e.target.options;return _e.target.multiple?Array.prototype.filter.call(ke,ze=>ze.selected).map(ze=>ze[xe]):-1===ke.selectedIndex?null:ke[ke.selectedIndex][xe]},be=_e=>Array.prototype.map.call(_e.target.options,xe=>({displayValue:xe.textContent,exportValue:xe.value}));return this.enableScripting&&this.hasJSActions?(W.addEventListener("updatefromsandbox",_e=>{this._dispatchEventFromSandbox({value(xe){const ke=xe.detail.value,ze=new Set(Array.isArray(ke)?ke:[ke]);for(const tt of W.options)tt.selected=ze.has(tt.value);d.setValue(C,{value:fe(xe,!0)})},multipleSelection(xe){W.multiple=!0},remove(xe){const ke=W.options,ze=xe.detail.remove;ke[ze].selected=!1,W.remove(ze),ke.length>0&&-1===Array.prototype.findIndex.call(ke,Oe=>Oe.selected)&&(ke[0].selected=!0),d.setValue(C,{value:fe(xe,!0),items:be(xe)})},clear(xe){for(;0!==W.length;)W.remove(0);d.setValue(C,{value:null,items:[]})},insert(xe){const{index:ke,displayValue:ze,exportValue:tt}=xe.detail.insert,Oe=document.createElement("option");Oe.textContent=ze,Oe.value=tt,W.insertBefore(Oe,W.children[ke]),d.setValue(C,{value:fe(xe,!0),items:be(xe)})},items(xe){const{items:ke}=xe.detail;for(;0!==W.length;)W.remove(0);for(const ze of ke){const{displayValue:tt,exportValue:Oe}=ze,Ve=document.createElement("option");Ve.textContent=tt,Ve.value=Oe,W.appendChild(Ve)}W.options.length>0&&(W.options[0].selected=!0),d.setValue(C,{value:fe(xe,!0),items:be(xe)})},indices(xe){const ke=new Set(xe.detail.indices);for(const ze of xe.target.options)ze.selected=ke.has(ze.index);d.setValue(C,{value:fe(xe,!0)})},editable(xe){xe.target.disabled=!xe.detail.editable}},_e)}),W.addEventListener("input",_e=>{var ke;const Ae=fe(_e,!0),xe=fe(_e,!1);d.setValue(C,{value:Ae}),null==(ke=this.linkService.eventBus)||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:xe,changeEx:Ae,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(W,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],_e=>_e.target.checked)):W.addEventListener("input",function(_e){d.setValue(C,{value:fe(_e,!0)})}),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.appendChild(W),this.container}}class u extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!((null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str))})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const D=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===D.length)return this.container;const F=new g({container:this.container,trigger:Array.from(D),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),j=this.page,W=p.Util.normalizeRect([this.data.parentRect[0],j.view[3]-this.data.parentRect[1]+j.view[1],this.data.parentRect[2],j.view[3]-this.data.parentRect[3]+j.view[1]]),fe=W[0]+this.data.parentRect[2]-this.data.parentRect[0],be=W[1];return this.container.style.transformOrigin=`${-fe}px ${-be}px`,this.container.style.left=`${fe}px`,this.container.style.top=`${be}px`,this.container.appendChild(F.render()),this.container}}class g{constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var fe,be;const C=document.createElement("div");C.className="popupWrapper",this.hideElement=this.hideWrapper?C:this.container,this.hideElement.hidden=!0;const D=document.createElement("div");D.className="popup";const F=this.color;F&&(D.style.backgroundColor=p.Util.makeHexColor(0|.7*(255-F[0])+F[0],0|.7*(255-F[1])+F[1],0|.7*(255-F[2])+F[2]));const j=document.createElement("h1");j.dir=this.titleObj.dir,j.textContent=this.titleObj.str,D.appendChild(j);const W=ce.PDFDateString.toDateObject(this.modificationDate);if(W){const _e=document.createElement("span");_e.className="popupDate",_e.textContent="{{date}}, {{time}}",_e.dataset.l10nId="annotation_date_string",_e.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),D.appendChild(_e)}if(!(null==(fe=this.richText)?void 0:fe.str)||(null==(be=this.contentsObj)?void 0:be.str)&&this.contentsObj.str!==this.richText.str){const _e=this._formatContents(this.contentsObj);D.appendChild(_e)}else pe.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:D}),D.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const _e of this.trigger)_e.addEventListener("click",this._toggle.bind(this)),_e.addEventListener("mouseover",this._show.bind(this,!1)),_e.addEventListener("mouseout",this._hide.bind(this,!1));return D.addEventListener("click",this._hide.bind(this,!0)),C.appendChild(D),C}_formatContents({str:d,dir:C}){const D=document.createElement("p");D.className="popupContent",D.dir=C;const F=d.split(/(?:\r\n?|\n)/);for(let j=0,W=F.length;j<W;++j)D.appendChild(document.createTextNode(F[j])),j<W-1&&D.appendChild(document.createElement("br"));return D}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(d=!1){d&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(d=!0){d&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class R extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const d=this.data,{width:C,height:D}=$(d.rect),F=this.svgFactory.create(C,D),j=this.svgFactory.createElement("svg:line");return j.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),j.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),j.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),j.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),j.setAttribute("stroke-width",d.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),F.appendChild(j),this.container.append(F),this._createPopup(j,d),this.container}}class V extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const d=this.data,{width:C,height:D}=$(d.rect),F=this.svgFactory.create(C,D),j=d.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",j/2),W.setAttribute("y",j/2),W.setAttribute("width",C-j),W.setAttribute("height",D-j),W.setAttribute("stroke-width",j||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),F.appendChild(W),this.container.append(F),this._createPopup(W,d),this.container}}class Y extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const d=this.data,{width:C,height:D}=$(d.rect),F=this.svgFactory.create(C,D),j=d.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",C/2),W.setAttribute("cy",D/2),W.setAttribute("rx",C/2-j/2),W.setAttribute("ry",D/2-j/2),W.setAttribute("stroke-width",j||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),F.appendChild(W),this.container.append(F),this._createPopup(W,d),this.container}}class ne extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:C,height:D}=$(d.rect),F=this.svgFactory.create(C,D);let j=[];for(const fe of d.vertices)j.push(fe.x-d.rect[0]+","+(d.rect[3]-fe.y));j=j.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",j),W.setAttribute("stroke-width",d.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),F.appendChild(W),this.container.append(F),this._createPopup(W,d),this.container}}class re extends ne{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ue extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ve extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:C,height:D}=$(d.rect),F=this.svgFactory.create(C,D);for(const j of d.inkLists){let W=[];for(const be of j)W.push(`${be.x-d.rect[0]},${d.rect[3]-be.y}`);W=W.join(" ");const fe=this.svgFactory.createElement(this.svgElementName);fe.setAttribute("points",W),fe.setAttribute("stroke-width",d.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),this._createPopup(fe,d),F.appendChild(fe)}return this.container.append(F),this.container}}class we extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Ie extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class de extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Me extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Pe extends N{constructor(d){var D,F,j;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(F=d.data.contentsObj)?void 0:F.str)||(null==(j=d.data.richText)?void 0:j.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Fe extends N{constructor(d){var F;super(d,{isRenderable:!0});const{filename:C,content:D}=this.data.file;this.filename=(0,ce.getFilenameFromUrl)(C),this.content=D,null==(F=this.linkService.eventBus)||F.dispatch("fileattachmentannotation",{source:this,filename:C,content:D})}render(){var C,D;this.container.className="fileAttachmentAnnotation";const d=document.createElement("div");return d.style.height=this.container.style.height,d.style.width=this.container.style.width,d.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(C=this.data.titleObj)?void 0:C.str)||(null==(D=this.data.contentsObj)?void 0:D.str)||this.data.richText)&&this._createPopup(d,this.data),this.container.appendChild(d),this.container}_download(){var d;null==(d=this.downloadManager)||d.openOrDownloadData(this.container,this.content,this.filename)}}class $e{static render(d){const C=[],D=[];for(const j of d.annotations){if(!j)continue;const{width:W,height:fe}=$(j.rect);if(!(W<=0||fe<=0)){if(j.annotationType===p.AnnotationType.POPUP){D.push(j);continue}C.push(j)}}D.length&&C.push(...D);const F=d.div;for(const j of C){const W=P.create({data:j,layer:F,page:d.page,viewport:d.viewport,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:!1!==d.renderForms,svgFactory:new ce.DOMSVGFactory,annotationStorage:d.annotationStorage||new ae.AnnotationStorage,enableScripting:d.enableScripting,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects,mouseState:d.mouseState||{isDown:!1}});if(W.isRenderable){const fe=W.render();if(j.hidden&&(fe.style.visibility="hidden"),Array.isArray(fe))for(const be of fe)F.appendChild(be);else W instanceof u?F.prepend(fe):F.appendChild(fe)}}mt(this,J,CS).call(this,F,d.annotationCanvasMap)}static update(d){const{page:C,viewport:D,annotations:F,annotationCanvasMap:j,div:W}=d,fe=D.transform,be=`matrix(${fe.join(",")})`;let _e,Ae;for(const xe of F){const ke=W.querySelectorAll(`[data-annotation-id="${xe.id}"]`);if(ke)for(const ze of ke)if(xe.hasOwnCanvas){const tt=p.Util.normalizeRect([xe.rect[0],C.view[3]-xe.rect[1]+C.view[1],xe.rect[2],C.view[3]-xe.rect[3]+C.view[1]]);if(!Ae){_e=Math.abs(fe[0]||fe[1]);const je=fe.slice();for(let U=0;U<4;U++)je[U]=Math.sign(je[U]);Ae=`matrix(${je.join(",")})`}const Oe=tt[0]*_e,Ve=tt[1]*_e;ze.style.left=`${Oe}px`,ze.style.top=`${Ve}px`,ze.style.transformOrigin=`${-Oe}px ${-Ve}px`,ze.style.transform=Ae}else ze.style.transform=be}mt(this,J,CS).call(this,W,j),W.hidden=!1}}J=new WeakSet,CS=function(d,C){if(C){for(const[D,F]of C){const j=d.querySelector(`[data-annotation-id="${D}"]`);if(!j)continue;const{firstChild:W}=j;"CANVAS"===W.nodeName?j.replaceChild(F,W):j.insertBefore(F,W)}C.clear()}},vt($e,J),k.AnnotationLayer=$e},(We,k)=>{function X(ce){return Math.floor(255*Math.max(0,Math.min(1,ce))).toString(16).padStart(2,"0")}Object.defineProperty(k,"__esModule",{value:!0}),k.ColorConverters=void 0,k.ColorConverters=class p{static CMYK_G([ae,le,pe,Q]){return["G",1-Math.min(1,.3*ae+.59*pe+.11*le+Q)]}static G_CMYK([ae]){return["CMYK",0,0,0,1-ae]}static G_RGB([ae]){return["RGB",ae,ae,ae]}static G_HTML([ae]){const le=X(ae);return`#${le}${le}${le}`}static RGB_G([ae,le,pe]){return["G",.3*ae+.59*le+.11*pe]}static RGB_HTML([ae,le,pe]){return`#${X(ae)}${X(le)}${X(pe)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ae,le,pe,Q]){return["RGB",1-Math.min(1,ae+Q),1-Math.min(1,pe+Q),1-Math.min(1,le+Q)]}static CMYK_HTML(ae){return this.RGB_HTML(this.CMYK_RGB(ae))}static RGB_CMYK([ae,le,pe]){const Q=1-ae,y=1-le,$=1-pe;return["CMYK",Q,y,$,Math.min(Q,y,$)]}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.XfaLayer=void 0;var p=X(18);k.XfaLayer=class ce{static setupStorage(le,pe,Q,y,$){const P=y.getValue(pe,{value:null});switch(Q.name){case"textarea":if(null!==P.value&&(le.textContent=P.value),"print"===$)break;le.addEventListener("input",N=>{y.setValue(pe,{value:N.target.value})});break;case"input":if("radio"===Q.attributes.type||"checkbox"===Q.attributes.type){if(P.value===Q.attributes.xfaOn?le.setAttribute("checked",!0):P.value===Q.attributes.xfaOff&&le.removeAttribute("checked"),"print"===$)break;le.addEventListener("change",N=>{y.setValue(pe,{value:N.target.getAttribute(N.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==P.value&&le.setAttribute("value",P.value),"print"===$)break;le.addEventListener("input",N=>{y.setValue(pe,{value:N.target.value})})}break;case"select":if(null!==P.value)for(const N of Q.children)N.attributes.value===P.value&&(N.attributes.selected=!0);le.addEventListener("input",N=>{const O=N.target.options;y.setValue(pe,{value:-1===O.selectedIndex?"":O[O.selectedIndex].value})})}}static setAttributes({html:le,element:pe,storage:Q=null,intent:y,linkService:$}){const{attributes:P}=pe,N=le instanceof HTMLAnchorElement;"radio"===P.type&&(P.name=`${P.name}-${y}`);for(const[O,b]of Object.entries(P))if(null!=b&&"dataId"!==O)if("style"!==O)if("textContent"===O)le.textContent=b;else if("class"===O)b.length&&le.setAttribute(O,b.join(" "));else{if(N&&("href"===O||"newWindow"===O))continue;le.setAttribute(O,b)}else Object.assign(le.style,b);N&&$.addLinkAttributes(le,P.href,P.newWindow),Q&&P.dataId&&this.setupStorage(le,P.dataId,pe,Q)}static render(le){var _;const pe=le.annotationStorage,Q=le.linkService,y=le.xfaHtml,$=le.intent||"display",P=document.createElement(y.name);y.attributes&&this.setAttributes({html:P,element:y,intent:$,linkService:Q});const N=[[y,-1,P]],O=le.div;if(O.appendChild(P),le.viewport){const h=`matrix(${le.viewport.transform.join(",")})`;O.style.transform=h}"richText"!==$&&O.setAttribute("class","xfaLayer xfaFont");const b=[];for(;N.length>0;){const[h,S,H]=N[N.length-1];if(S+1===h.children.length){N.pop();continue}const M=h.children[++N[N.length-1][1]];if(null===M)continue;const{name:x}=M;if("#text"===x){const g=document.createTextNode(M.value);b.push(g),H.appendChild(g);continue}let u;if(u=(null==(_=null==M?void 0:M.attributes)?void 0:_.xmlns)?document.createElementNS(M.attributes.xmlns,x):document.createElement(x),H.appendChild(u),M.attributes&&this.setAttributes({html:u,element:M,storage:pe,intent:$,linkService:Q}),M.children&&M.children.length>0)N.push([M,-1,u]);else if(M.value){const g=document.createTextNode(M.value);p.XfaText.shouldBuildText(x)&&b.push(g),u.appendChild(g)}}for(const h of O.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:b}}static update(le){const pe=`matrix(${le.viewport.transform.join(",")})`;le.div.style.transform=pe,le.div.hidden=!1}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.renderTextLayer=function S(H){const M=new h({textContent:H.textContent,textContentStream:H.textContentStream,container:H.container,viewport:H.viewport,textDivs:H.textDivs,textContentItemsStr:H.textContentItemsStr,enhanceTextSelection:H.enhanceTextSelection});return M._render(H.timeout),M};var p=X(1);const pe=new Map,Q=/^\s+$/g;function $(H,M,x,u){const g=document.createElement("span"),R=H._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==M.str,hasEOL:M.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==M.str,hasEOL:M.hasEOL};H._textDivs.push(g);const I=p.Util.transform(H._viewport.transform,M.transform);let V=Math.atan2(I[1],I[0]);const Y=x[M.fontName];Y.vertical&&(V+=Math.PI/2);const ne=Math.hypot(I[2],I[3]),re=ne*function y(H,M){const x=pe.get(H);if(x)return x;M.save(),M.font=`30px ${H}`;const u=M.measureText("");let g=u.fontBoundingBoxAscent,R=Math.abs(u.fontBoundingBoxDescent);if(g){M.restore();const V=g/(g+R);return pe.set(H,V),V}M.strokeStyle="red",M.clearRect(0,0,30,30),M.strokeText("g",0,0);let I=M.getImageData(0,0,30,30).data;R=0;for(let V=I.length-1-3;V>=0;V-=4)if(I[V]>0){R=Math.ceil(V/4/30);break}M.clearRect(0,0,30,30),M.strokeText("A",0,30),I=M.getImageData(0,0,30,30).data,g=0;for(let V=0,Y=I.length;V<Y;V+=4)if(I[V]>0){g=30-Math.floor(V/4/30);break}if(M.restore(),g){const V=g/(g+R);return pe.set(H,V),V}return pe.set(H,.8),.8}(Y.fontFamily,u);let ue,ve;0===V?(ue=I[4],ve=I[5]-re):(ue=I[4]+re*Math.sin(V),ve=I[5]-re*Math.cos(V)),g.style.left=`${ue}px`,g.style.top=`${ve}px`,g.style.fontSize=`${ne}px`,g.style.fontFamily=Y.fontFamily,g.setAttribute("role","presentation"),g.textContent=M.str,g.dir=M.dir,H._fontInspectorEnabled&&(g.dataset.fontName=M.fontName),0!==V&&(R.angle=V*(180/Math.PI));let we=!1;if(M.str.length>1||H._enhanceTextSelection&&Q.test(M.str))we=!0;else if(" "!==M.str&&M.transform[0]!==M.transform[3]){const Ie=Math.abs(M.transform[0]),de=Math.abs(M.transform[3]);Ie!==de&&Math.max(Ie,de)/Math.min(Ie,de)>1.5&&(we=!0)}if(we&&(R.canvasWidth=Y.vertical?M.height*H._viewport.scale:M.width*H._viewport.scale),H._textDivProperties.set(g,R),H._textContentStream&&H._layoutText(g),H._enhanceTextSelection&&R.hasText){let Ie=1,de=0;0!==V&&(Ie=Math.cos(V),de=Math.sin(V));const Me=(Y.vertical?M.height:M.width)*H._viewport.scale,Pe=ne;let Fe,$e;0!==V?(Fe=[Ie,de,-de,Ie,ue,ve],$e=p.Util.getAxialAlignedBoundingBox([0,0,Me,Pe],Fe)):$e=[ue,ve,ue+Me,ve+Pe],H._bounds.push({left:$e[0],top:$e[1],right:$e[2],bottom:$e[3],div:g,size:[Me,Pe],m:Fe})}}function P(H){if(H._canceled)return;const M=H._textDivs,x=H._capability,u=M.length;if(u>1e5)return H._renderingDone=!0,void x.resolve();if(!H._textContentStream)for(let g=0;g<u;g++)H._layoutText(M[g]);H._renderingDone=!0,x.resolve()}function N(H,M,x){let u=0;for(let g=0;g<x;g++){const R=H[M++];R>0&&(u=u?Math.min(R,u):R)}return u}function _(H,M){M.sort(function(g,R){return g.x1-R.x1||g.index-R.index});const u=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const g of M){let R=0;for(;R<u.length&&u[R].end<=g.y1;)R++;let I=u.length-1;for(;I>=0&&u[I].start>=g.y2;)I--;let V,Y,ne,re,ue=-1/0;for(ne=R;ne<=I;ne++){let Ie;V=u[ne],Y=V.boundary,Ie=Y.x2>g.x1?Y.index>g.index?Y.x1New:g.x1:void 0===Y.x2New?(Y.x2+g.x1)/2:Y.x2New,Ie>ue&&(ue=Ie)}for(g.x1New=ue,ne=R;ne<=I;ne++)V=u[ne],Y=V.boundary,void 0===Y.x2New?Y.x2>g.x1?Y.index>g.index&&(Y.x2New=Y.x2):Y.x2New=ue:Y.x2New>ue&&(Y.x2New=Math.max(ue,Y.x2));const ve=[];let we=null;for(ne=R;ne<=I;ne++){V=u[ne],Y=V.boundary;const Ie=Y.x2>g.x2?Y:g;we===Ie?ve[ve.length-1].end=V.end:(ve.push({start:V.start,end:V.end,boundary:Ie}),we=Ie)}for(u[R].start<g.y1&&(ve[0].start=g.y1,ve.unshift({start:u[R].start,end:g.y1,boundary:u[R].boundary})),g.y2<u[I].end&&(ve[ve.length-1].end=g.y2,ve.push({start:g.y2,end:u[I].end,boundary:u[I].boundary})),ne=R;ne<=I;ne++){if(V=u[ne],Y=V.boundary,void 0!==Y.x2New)continue;let Ie=!1;for(re=R-1;!Ie&&re>=0&&u[re].start>=Y.y1;re--)Ie=u[re].boundary===Y;for(re=I+1;!Ie&&re<u.length&&u[re].end<=Y.y2;re++)Ie=u[re].boundary===Y;for(re=0;!Ie&&re<ve.length;re++)Ie=ve[re].boundary===Y;Ie||(Y.x2New=ue)}Array.prototype.splice.apply(u,[R,I-R+1].concat(ve))}for(const g of u){const R=g.boundary;void 0===R.x2New&&(R.x2New=Math.max(H,R.x2))}}class h{constructor({textContent:M,textContentStream:x,container:u,viewport:g,textDivs:R,textContentItemsStr:I,enhanceTextSelection:V}){var Y;this._textContent=M,this._textContentStream=x,this._container=u,this._document=u.ownerDocument,this._viewport=g,this._textDivs=R||[],this._textContentItemsStr=I||[],this._enhanceTextSelection=!!V,this._fontInspectorEnabled=!!(null==(Y=globalThis.FontInspector)?void 0:Y.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,p.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new p.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(M,x){for(let u=0,g=M.length;u<g;u++)if(void 0!==M[u].str)this._textContentItemsStr.push(M[u].str),$(this,M[u],x,this._layoutTextCtx);else if("beginMarkedContentProps"===M[u].type||"beginMarkedContent"===M[u].type){const R=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==M[u].id&&this._container.setAttribute("id",`${M[u].id}`),R.appendChild(this._container)}else"endMarkedContent"===M[u].type&&(this._container=this._container.parentNode)}_layoutText(M){const x=this._textDivProperties.get(M);let u="";if(0!==x.canvasWidth&&x.hasText){const{fontSize:g,fontFamily:R}=M.style;(g!==this._layoutTextLastFontSize||R!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${g} ${R}`,this._layoutTextLastFontSize=g,this._layoutTextLastFontFamily=R);const{width:I}=this._layoutTextCtx.measureText(M.textContent);if(I>0){const V=x.canvasWidth/I;this._enhanceTextSelection&&(x.scale=V),u=`scaleX(${V})`}}if(0!==x.angle&&(u=`rotate(${x.angle}deg) ${u}`),u.length>0&&(this._enhanceTextSelection&&(x.originalTransform=u),M.style.transform=u),x.hasText&&this._container.appendChild(M),x.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.appendChild(g)}}_render(M=0){const x=(0,p.createPromiseCapability)();let u=Object.create(null);const g=this._document.createElement("canvas");if(g.height=g.width=30,this._layoutTextCtx=g.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),x.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const R=()=>{this._reader.read().then(({value:I,done:V})=>{V?x.resolve():(Object.assign(u,I.styles),this._processItems(I.items,u),R())},x.reject)};this._reader=this._textContentStream.getReader(),R()}}x.promise.then(()=>{u=null,M?this._renderTimer=setTimeout(()=>{P(this),this._renderTimer=null},M):P(this)},this._capability.reject)}expandTextDivs(M=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function O(H){const M=H._bounds,x=H._viewport,u=function b(H,M,x){const u=x.map(function(R,I){return{x1:R.left,y1:R.top,x2:R.right,y2:R.bottom,index:I,x1New:void 0,x2New:void 0}});_(H,u);const g=new Array(x.length);for(const R of u)g[R.index]={left:R.x1New,top:0,right:R.x2New,bottom:0};x.map(function(R,I){const V=g[I],Y=u[I];Y.x1=R.top,Y.y1=H-V.right,Y.x2=R.bottom,Y.y2=H-V.left,Y.index=I,Y.x1New=void 0,Y.x2New=void 0}),_(M,u);for(const R of u){const I=R.index;g[I].top=R.x1New,g[I].bottom=R.x2New}return g}(x.width,x.height,M);for(let g=0;g<u.length;g++){const R=M[g].div,I=H._textDivProperties.get(R);if(0===I.angle){I.paddingLeft=M[g].left-u[g].left,I.paddingTop=M[g].top-u[g].top,I.paddingRight=u[g].right-M[g].right,I.paddingBottom=u[g].bottom-M[g].bottom,H._textDivProperties.set(R,I);continue}const V=u[g],Y=M[g],ne=Y.m,re=ne[0],ue=ne[1],ve=[[0,0],[0,Y.size[1]],[Y.size[0],0],Y.size],we=new Float64Array(64);for(let de=0,Me=ve.length;de<Me;de++){const Pe=p.Util.applyTransform(ve[de],ne);we[de+0]=re&&(V.left-Pe[0])/re,we[de+4]=ue&&(V.top-Pe[1])/ue,we[de+8]=re&&(V.right-Pe[0])/re,we[de+12]=ue&&(V.bottom-Pe[1])/ue,we[de+16]=ue&&(V.left-Pe[0])/-ue,we[de+20]=re&&(V.top-Pe[1])/re,we[de+24]=ue&&(V.right-Pe[0])/-ue,we[de+28]=re&&(V.bottom-Pe[1])/re,we[de+32]=re&&(V.left-Pe[0])/-re,we[de+36]=ue&&(V.top-Pe[1])/-ue,we[de+40]=re&&(V.right-Pe[0])/-re,we[de+44]=ue&&(V.bottom-Pe[1])/-ue,we[de+48]=ue&&(V.left-Pe[0])/ue,we[de+52]=re&&(V.top-Pe[1])/-re,we[de+56]=ue&&(V.right-Pe[0])/ue,we[de+60]=re&&(V.bottom-Pe[1])/-re}const Ie=1+Math.min(Math.abs(re),Math.abs(ue));I.paddingLeft=N(we,32,16)/Ie,I.paddingTop=N(we,48,16)/Ie,I.paddingRight=N(we,0,16)/Ie,I.paddingBottom=N(we,16,16)/Ie,H._textDivProperties.set(R,I)}}(this),this._bounds=null);const x=[],u=[];for(let g=0,R=this._textDivs.length;g<R;g++){const I=this._textDivs[g],V=this._textDivProperties.get(I);!V.hasText||(M?(x.length=0,u.length=0,V.originalTransform&&x.push(V.originalTransform),V.paddingTop>0?(u.push(`${V.paddingTop}px`),x.push(`translateY(${-V.paddingTop}px)`)):u.push(0),u.push(V.paddingRight>0?V.paddingRight/V.scale+"px":0),u.push(V.paddingBottom>0?`${V.paddingBottom}px`:0),V.paddingLeft>0?(u.push(V.paddingLeft/V.scale+"px"),x.push(`translateX(${-V.paddingLeft/V.scale}px)`)):u.push(0),I.style.padding=u.join(" "),x.length&&(I.style.transform=x.join(" "))):(I.style.padding=null,I.style.transform=V.originalTransform))}}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.SVGGraphics=void 0;var p=X(1),ce=X(5),ae=X(3);let le=class{constructor(){(0,p.unreachable)("Not implemented: SVGGraphics")}};k.SVGGraphics=le;{let _=function(u){let g=[];const R=[];for(const I of u)"save"!==I.fn?"restore"===I.fn?g=R.pop():g.push(I):(g.push({fnId:92,fn:"group",items:[]}),R.push(g),g=g[g.length-1].items);return g},h=function(u){if(Number.isInteger(u))return u.toString();const g=u.toFixed(10);let R=g.length-1;if("0"!==g[R])return g;do{R--}while("0"===g[R]);return g.substring(0,"."===g[R]?R:R+1)},S=function(u){if(0===u[4]&&0===u[5]){if(0===u[1]&&0===u[2])return 1===u[0]&&1===u[3]?"":`scale(${h(u[0])} ${h(u[3])})`;if(u[0]===u[3]&&u[1]===-u[2]){const g=180*Math.acos(u[0])/Math.PI;return`rotate(${h(g)})`}}else if(1===u[0]&&0===u[1]&&0===u[2]&&1===u[3])return`translate(${h(u[4])} ${h(u[5])})`;return`matrix(${h(u[0])} ${h(u[1])} ${h(u[2])} ${h(u[3])} ${h(u[4])} ${h(u[5])})`};const pe={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Q="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",$=["butt","round","square"],P=["miter","round","bevel"],N=function(u,g="",R=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!R)return URL.createObjectURL(new Blob([u],{type:g}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let V=`data:${g};base64,`;for(let Y=0,ne=u.length;Y<ne;Y+=3){const re=255&u[Y],ue=255&u[Y+1],ve=255&u[Y+2];V+=I[re>>2]+I[(3&re)<<4|ue>>4]+I[Y+1<ne?(15&ue)<<2|ve>>6:64]+I[Y+2<ne?63&ve:64]}return V},O=function(){const u=new Uint8Array([137,80,78,71,13,10,26,10]),R=new Int32Array(256);for(let ve=0;ve<256;ve++){let we=ve;for(let Ie=0;Ie<8;Ie++)we=1&we?3988292384^we>>1&2147483647:we>>1&2147483647;R[ve]=we}function V(ve,we,Ie,de){let Me=de;const Pe=we.length;Ie[Me]=Pe>>24&255,Ie[Me+1]=Pe>>16&255,Ie[Me+2]=Pe>>8&255,Ie[Me+3]=255&Pe,Me+=4,Ie[Me]=255&ve.charCodeAt(0),Ie[Me+1]=255&ve.charCodeAt(1),Ie[Me+2]=255&ve.charCodeAt(2),Ie[Me+3]=255&ve.charCodeAt(3),Me+=4,Ie.set(we,Me),Me+=we.length;const Fe=function I(ve,we,Ie){let de=-1;for(let Me=we;Me<Ie;Me++)de=de>>>8^R[255&(de^ve[Me])];return-1^de}(Ie,de+4,Me);Ie[Me]=Fe>>24&255,Ie[Me+1]=Fe>>16&255,Ie[Me+2]=Fe>>8&255,Ie[Me+3]=255&Fe}function re(ve){let we=ve.length;const Ie=65535,de=Math.ceil(we/Ie),Me=new Uint8Array(2+we+5*de+4);let Pe=0;Me[Pe++]=120,Me[Pe++]=156;let Fe=0;for(;we>Ie;)Me[Pe++]=0,Me[Pe++]=255,Me[Pe++]=255,Me[Pe++]=0,Me[Pe++]=0,Me.set(ve.subarray(Fe,Fe+Ie),Pe),Pe+=Ie,Fe+=Ie,we-=Ie;Me[Pe++]=1,Me[Pe++]=255&we,Me[Pe++]=we>>8&255,Me[Pe++]=255&~we,Me[Pe++]=(65535&~we)>>8&255,Me.set(ve.subarray(Fe),Pe),Pe+=ve.length-Fe;const $e=function Y(ve,we,Ie){let de=1,Me=0;for(let Pe=we;Pe<Ie;++Pe)de=(de+(255&ve[Pe]))%65521,Me=(Me+de)%65521;return Me<<16|de}(ve,0,ve.length);return Me[Pe++]=$e>>24&255,Me[Pe++]=$e>>16&255,Me[Pe++]=$e>>8&255,Me[Pe++]=255&$e,Me}return function(we,Ie,de){return function ue(ve,we,Ie,de){const Me=ve.width,Pe=ve.height;let Fe,$e,J;const v=ve.data;switch(we){case p.ImageKind.GRAYSCALE_1BPP:$e=0,Fe=1,J=Me+7>>3;break;case p.ImageKind.RGB_24BPP:$e=2,Fe=8,J=3*Me;break;case p.ImageKind.RGBA_32BPP:$e=6,Fe=8,J=4*Me;break;default:throw new Error("invalid format")}const E=new Uint8Array((1+J)*Pe);let d=0,C=0;for(let be=0;be<Pe;++be)E[d++]=0,E.set(v.subarray(C,C+J),d),C+=J,d+=J;if(we===p.ImageKind.GRAYSCALE_1BPP&&de){d=0;for(let be=0;be<Pe;be++){d++;for(let _e=0;_e<J;_e++)E[d++]^=255}}const D=new Uint8Array([Me>>24&255,Me>>16&255,Me>>8&255,255&Me,Pe>>24&255,Pe>>16&255,Pe>>8&255,255&Pe,Fe,$e,0,0,0]),F=function ne(ve){if(!ae.isNodeJS)return re(ve);try{let we;we=parseInt(process.versions.node)>=8?ve:Buffer.from(ve);const Ie=__webpack_require__(258).deflateSync(we,{level:9});return Ie instanceof Uint8Array?Ie:new Uint8Array(Ie)}catch(we){(0,p.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+we)}return re(ve)}(E),W=new Uint8Array(u.length+36+D.length+F.length);let fe=0;return W.set(u,fe),fe+=u.length,V("IHDR",D,W,fe),fe+=12+D.length,V("IDATA",F,W,fe),fe+=12+F.length,V("IEND",new Uint8Array(0),W,fe),N(W,"image/png",Ie)}(we,void 0===we.kind?p.ImageKind.GRAYSCALE_1BPP:we.kind,Ie,de)}}();class b{constructor(){this.fontSizeScale=1,this.fontWeight=pe.fontWeight,this.fontSize=0,this.textMatrix=p.IDENTITY_MATRIX,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=p.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=pe.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,R){this.x=g,this.y=R}}let H=0,M=0,x=0;k.SVGGraphics=le=class{constructor(u,g,R=!1){this.svgFactory=new ce.DOMSVGFactory,this.current=new b,this.transformMatrix=p.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!R,this._operatorIdMapping=[];for(const I in p.OPS)this._operatorIdMapping[p.OPS[I]]=I}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const g=u.fnArray,R=u.argsArray;for(let I=0,V=g.length;I<V;I++)if(g[I]===p.OPS.dependency)for(const Y of R[I]){const ne=Y.startsWith("g_")?this.commonObjs:this.objs,re=new Promise(ue=>{ne.get(Y,ue)});this.current.dependencies.push(re)}return Promise.all(this.current.dependencies)}transform(u,g,R,I,V,Y){this.transformMatrix=p.Util.transform(this.transformMatrix,[u,g,R,I,V,Y]),this.tgrp=null}getSVG(u,g){this.viewport=g;const R=this._initialize(g);return this.loadDependencies(u).then(()=>(this.transformMatrix=p.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),R))}convertOpList(u){const g=this._operatorIdMapping,R=u.argsArray,I=u.fnArray,V=[];for(let Y=0,ne=I.length;Y<ne;Y++){const re=I[Y];V.push({fnId:re,fn:g[re],args:R[Y]})}return _(V)}executeOpTree(u){for(const g of u){const R=g.fn,V=g.args;switch(0|g.fnId){case p.OPS.beginText:this.beginText();break;case p.OPS.dependency:break;case p.OPS.setLeading:this.setLeading(V);break;case p.OPS.setLeadingMoveText:this.setLeadingMoveText(V[0],V[1]);break;case p.OPS.setFont:this.setFont(V);break;case p.OPS.showText:case p.OPS.showSpacedText:this.showText(V[0]);break;case p.OPS.endText:this.endText();break;case p.OPS.moveText:this.moveText(V[0],V[1]);break;case p.OPS.setCharSpacing:this.setCharSpacing(V[0]);break;case p.OPS.setWordSpacing:this.setWordSpacing(V[0]);break;case p.OPS.setHScale:this.setHScale(V[0]);break;case p.OPS.setTextMatrix:this.setTextMatrix(V[0],V[1],V[2],V[3],V[4],V[5]);break;case p.OPS.setTextRise:this.setTextRise(V[0]);break;case p.OPS.setTextRenderingMode:this.setTextRenderingMode(V[0]);break;case p.OPS.setLineWidth:this.setLineWidth(V[0]);break;case p.OPS.setLineJoin:this.setLineJoin(V[0]);break;case p.OPS.setLineCap:this.setLineCap(V[0]);break;case p.OPS.setMiterLimit:this.setMiterLimit(V[0]);break;case p.OPS.setFillRGBColor:this.setFillRGBColor(V[0],V[1],V[2]);break;case p.OPS.setStrokeRGBColor:this.setStrokeRGBColor(V[0],V[1],V[2]);break;case p.OPS.setStrokeColorN:this.setStrokeColorN(V);break;case p.OPS.setFillColorN:this.setFillColorN(V);break;case p.OPS.shadingFill:this.shadingFill(V[0]);break;case p.OPS.setDash:this.setDash(V[0],V[1]);break;case p.OPS.setRenderingIntent:this.setRenderingIntent(V[0]);break;case p.OPS.setFlatness:this.setFlatness(V[0]);break;case p.OPS.setGState:this.setGState(V[0]);break;case p.OPS.fill:this.fill();break;case p.OPS.eoFill:this.eoFill();break;case p.OPS.stroke:this.stroke();break;case p.OPS.fillStroke:this.fillStroke();break;case p.OPS.eoFillStroke:this.eoFillStroke();break;case p.OPS.clip:this.clip("nonzero");break;case p.OPS.eoClip:this.clip("evenodd");break;case p.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case p.OPS.paintImageXObject:this.paintImageXObject(V[0]);break;case p.OPS.paintInlineImageXObject:this.paintInlineImageXObject(V[0]);break;case p.OPS.paintImageMaskXObject:this.paintImageMaskXObject(V[0]);break;case p.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(V[0],V[1]);break;case p.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case p.OPS.closePath:this.closePath();break;case p.OPS.closeStroke:this.closeStroke();break;case p.OPS.closeFillStroke:this.closeFillStroke();break;case p.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case p.OPS.nextLine:this.nextLine();break;case p.OPS.transform:this.transform(V[0],V[1],V[2],V[3],V[4],V[5]);break;case p.OPS.constructPath:this.constructPath(V[0],V[1]);break;case p.OPS.endPath:this.endPath();break;case 92:this.group(g.items);break;default:(0,p.warn)(`Unimplemented operator ${R}`)}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,g,R,I,V,Y){const ne=this.current;ne.textMatrix=ne.lineMatrix=[u,g,R,I,V,Y],ne.textMatrixScale=Math.hypot(u,g),ne.x=ne.lineX=0,ne.y=ne.lineY=0,ne.xcoords=[],ne.ycoords=[],ne.tspan=this.svgFactory.createElement("svg:tspan"),ne.tspan.setAttributeNS(null,"font-family",ne.fontFamily),ne.tspan.setAttributeNS(null,"font-size",`${h(ne.fontSize)}px`),ne.tspan.setAttributeNS(null,"y",h(-ne.y)),ne.txtElement=this.svgFactory.createElement("svg:text"),ne.txtElement.appendChild(ne.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=p.IDENTITY_MATRIX,u.lineMatrix=p.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,g){const R=this.current;R.x=R.lineX+=u,R.y=R.lineY+=g,R.xcoords=[],R.ycoords=[],R.tspan=this.svgFactory.createElement("svg:tspan"),R.tspan.setAttributeNS(null,"font-family",R.fontFamily),R.tspan.setAttributeNS(null,"font-size",`${h(R.fontSize)}px`),R.tspan.setAttributeNS(null,"y",h(-R.y))}showText(u){const g=this.current,R=g.font,I=g.fontSize;if(0===I)return;const V=g.fontSizeScale,Y=g.charSpacing,ne=g.wordSpacing,re=g.fontDirection,ue=g.textHScale*re,ve=R.vertical,we=ve?1:-1,Ie=R.defaultVMetrics,de=I*g.fontMatrix[0];let Me=0;for(const $e of u){if(null===$e){Me+=re*ne;continue}if("number"==typeof $e){Me+=we*$e*I/1e3;continue}const J=($e.isSpace?ne:0)+Y,v=$e.fontChar;let E,d,D,C=$e.width;if(ve){let F;const j=$e.vmetric||Ie;F=$e.vmetric?j[1]:.5*C,F=-F*de,C=j?-j[0]:C,E=F/V,d=(Me+j[2]*de)/V}else E=Me/V,d=0;($e.isInFont||R.missingFile)&&(g.xcoords.push(g.x+E),ve&&g.ycoords.push(-g.y+d),g.tspan.textContent+=v),D=ve?C*de-J*re:C*de+J*re,Me+=D}g.tspan.setAttributeNS(null,"x",g.xcoords.map(h).join(" ")),g.tspan.setAttributeNS(null,"y",ve?g.ycoords.map(h).join(" "):h(-g.y)),ve?g.y-=Me:g.x+=Me*ue,g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${h(g.fontSize)}px`),g.fontStyle!==pe.fontStyle&&g.tspan.setAttributeNS(null,"font-style",g.fontStyle),g.fontWeight!==pe.fontWeight&&g.tspan.setAttributeNS(null,"font-weight",g.fontWeight);const Pe=g.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;Pe===p.TextRenderingMode.FILL||Pe===p.TextRenderingMode.FILL_STROKE?(g.fillColor!==pe.fillColor&&g.tspan.setAttributeNS(null,"fill",g.fillColor),g.fillAlpha<1&&g.tspan.setAttributeNS(null,"fill-opacity",g.fillAlpha)):g.tspan.setAttributeNS(null,"fill",g.textRenderingMode===p.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(Pe===p.TextRenderingMode.STROKE||Pe===p.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(g.tspan,1/(g.textMatrixScale||1));let Fe=g.textMatrix;0!==g.textRise&&(Fe=Fe.slice(),Fe[5]+=g.textRise),g.txtElement.setAttributeNS(null,"transform",`${S(Fe)} scale(${h(ue)}, -1)`),g.txtElement.setAttributeNS(Q,"xml:space","preserve"),g.txtElement.appendChild(g.tspan),g.txtgrp.appendChild(g.txtElement),this._ensureTransformGroup().appendChild(g.txtElement)}setLeadingMoveText(u,g){this.setLeading(-g),this.moveText(u,g)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const g=N(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${g}); }\n`}setFont(u){const g=this.current,R=this.commonObjs.get(u[0]);let I=u[1];g.font=R,this.embedFonts&&!R.missingFile&&!this.embeddedFonts[R.loadedName]&&(this.addFontStyle(R),this.embeddedFonts[R.loadedName]=R),g.fontMatrix=R.fontMatrix||p.FONT_IDENTITY_MATRIX;let V="normal";R.black?V="900":R.bold&&(V="bold");const Y=R.italic?"italic":"normal";I<0?(I=-I,g.fontDirection=-1):g.fontDirection=1,g.fontSize=I,g.fontFamily=R.loadedName,g.fontWeight=V,g.fontStyle=Y,g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"y",h(-g.y)),g.xcoords=[],g.ycoords=[]}endText(){var g;const u=this.current;u.textRenderingMode&p.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(g=u.txtElement)?void 0:g.hasChildNodes())&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=$[u]}setLineJoin(u){this.current.lineJoin=P[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,g,R){this.current.strokeColor=p.Util.makeHexColor(u,g,R)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,g,R){this.current.fillColor=p.Util.makeHexColor(u,g,R),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const g=this.viewport.width,R=this.viewport.height,I=p.Util.inverseTransform(this.transformMatrix),V=p.Util.applyTransform([0,0],I),Y=p.Util.applyTransform([0,R],I),ne=p.Util.applyTransform([g,0],I),re=p.Util.applyTransform([g,R],I),ue=Math.min(V[0],Y[0],ne[0],re[0]),ve=Math.min(V[1],Y[1],ne[1],re[1]),we=Math.max(V[0],Y[0],ne[0],re[0]),Ie=Math.max(V[1],Y[1],ne[1],re[1]),de=this.svgFactory.createElement("svg:rect");de.setAttributeNS(null,"x",ue),de.setAttributeNS(null,"y",ve),de.setAttributeNS(null,"width",we-ue),de.setAttributeNS(null,"height",Ie-ve),de.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&de.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(de)}_makeColorN_Pattern(u){return"TilingPattern"===u[0]?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const g=u[1],R=u[2],I=u[3]||p.IDENTITY_MATRIX,[V,Y,ne,re]=u[4],ue=u[5],ve=u[6],we=u[7],Ie="shading"+x++,[de,Me,Pe,Fe]=p.Util.normalizeRect([...p.Util.applyTransform([V,Y],I),...p.Util.applyTransform([ne,re],I)]),[$e,J]=p.Util.singularValueDecompose2dScale(I),v=ue*$e,E=ve*J,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",Ie),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",v),d.setAttributeNS(null,"height",E),d.setAttributeNS(null,"x",`${de}`),d.setAttributeNS(null,"y",`${Me}`);const C=this.svg,D=this.transformMatrix,F=this.current.fillColor,j=this.current.strokeColor,W=this.svgFactory.create(Pe-de,Fe-Me);if(this.svg=W,this.transformMatrix=I,2===we){const fe=p.Util.makeHexColor(...g);this.current.fillColor=fe,this.current.strokeColor=fe}return this.executeOpTree(this.convertOpList(R)),this.svg=C,this.transformMatrix=D,this.current.fillColor=F,this.current.strokeColor=j,d.appendChild(W.childNodes[0]),this.defs.appendChild(d),`url(#${Ie})`}_makeShadingPattern(u){switch("string"==typeof u&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const g="shading"+x++,R=u[3];let I;switch(u[1]){case"axial":const V=u[4],Y=u[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",g),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",V[0]),I.setAttributeNS(null,"y1",V[1]),I.setAttributeNS(null,"x2",Y[0]),I.setAttributeNS(null,"y2",Y[1]);break;case"radial":const ne=u[4],re=u[5],ue=u[6],ve=u[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",g),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",re[0]),I.setAttributeNS(null,"cy",re[1]),I.setAttributeNS(null,"r",ve),I.setAttributeNS(null,"fx",ne[0]),I.setAttributeNS(null,"fy",ne[1]),I.setAttributeNS(null,"fr",ue);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const V of R){const Y=this.svgFactory.createElement("svg:stop");Y.setAttributeNS(null,"offset",V[0]),Y.setAttributeNS(null,"stop-color",V[1]),I.appendChild(Y)}return this.defs.appendChild(I),`url(#${g})`;case"Mesh":return(0,p.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,g){this.current.dashArray=u,this.current.dashPhase=g}constructPath(u,g){const R=this.current;let I=R.x,V=R.y,Y=[],ne=0;for(const re of u)switch(0|re){case p.OPS.rectangle:I=g[ne++],V=g[ne++];const we=I+g[ne++],Ie=V+g[ne++];Y.push("M",h(I),h(V),"L",h(we),h(V),"L",h(we),h(Ie),"L",h(I),h(Ie),"Z");break;case p.OPS.moveTo:I=g[ne++],V=g[ne++],Y.push("M",h(I),h(V));break;case p.OPS.lineTo:I=g[ne++],V=g[ne++],Y.push("L",h(I),h(V));break;case p.OPS.curveTo:I=g[ne+4],V=g[ne+5],Y.push("C",h(g[ne]),h(g[ne+1]),h(g[ne+2]),h(g[ne+3]),h(I),h(V)),ne+=6;break;case p.OPS.curveTo2:Y.push("C",h(I),h(V),h(g[ne]),h(g[ne+1]),h(g[ne+2]),h(g[ne+3])),I=g[ne+2],V=g[ne+3],ne+=4;break;case p.OPS.curveTo3:I=g[ne+2],V=g[ne+3],Y.push("C",h(g[ne]),h(g[ne+1]),h(I),h(V),h(I),h(V)),ne+=4;break;case p.OPS.closePath:Y.push("Z")}Y=Y.join(" "),R.path&&u.length>0&&u[0]!==p.OPS.rectangle&&u[0]!==p.OPS.moveTo?Y=R.path.getAttributeNS(null,"d")+Y:(R.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(R.path)),R.path.setAttributeNS(null,"d",Y),R.path.setAttributeNS(null,"fill","none"),R.element=R.path,R.setCurrentPoint(I,V)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element)return void(this.pendingClip=null);const g="clippath"+H++,R=this.svgFactory.createElement("svg:clipPath");R.setAttributeNS(null,"id",g),R.setAttributeNS(null,"transform",S(this.transformMatrix));const I=u.element.cloneNode(!0);if(I.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,R.appendChild(I),this.defs.appendChild(R),u.activeClipUrl){u.clipGroup=null;for(const V of this.extraStack)V.clipGroup=null;R.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${g})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const g=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",g)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[g,R]of u)switch(g){case"LW":this.setLineWidth(R);break;case"LC":this.setLineCap(R);break;case"LJ":this.setLineJoin(R);break;case"ML":this.setMiterLimit(R);break;case"D":this.setDash(R[0],R[1]);break;case"RI":this.setRenderingIntent(R);break;case"FL":this.setFlatness(R);break;case"Font":this.setFont(R);break;case"CA":this.setStrokeAlpha(R);break;case"ca":this.setFillAlpha(R);break;default:(0,p.warn)(`Unimplemented graphic state operator ${g}`)}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,g=1){const R=this.current;let I=R.dashArray;1!==g&&I.length>0&&(I=I.map(function(V){return g*V})),u.setAttributeNS(null,"stroke",R.strokeColor),u.setAttributeNS(null,"stroke-opacity",R.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",h(R.miterLimit)),u.setAttributeNS(null,"stroke-linecap",R.lineCap),u.setAttributeNS(null,"stroke-linejoin",R.lineJoin),u.setAttributeNS(null,"stroke-width",h(g*R.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",I.map(h).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",h(g*R.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(u)}paintImageXObject(u){const g=u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u);g?this.paintInlineImageXObject(g):(0,p.warn)(`Dependent image with object ID ${u} is not ready yet`)}paintInlineImageXObject(u,g){const R=u.width,I=u.height,V=O(u,this.forceDataSchema,!!g),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y","0"),Y.setAttributeNS(null,"width",h(R)),Y.setAttributeNS(null,"height",h(I)),this.current.element=Y,this.clip("nonzero");const ne=this.svgFactory.createElement("svg:image");ne.setAttributeNS(y,"xlink:href",V),ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y",h(-I)),ne.setAttributeNS(null,"width",h(R)+"px"),ne.setAttributeNS(null,"height",h(I)+"px"),ne.setAttributeNS(null,"transform",`scale(${h(1/R)} ${h(-1/I)})`),g?g.appendChild(ne):this._ensureTransformGroup().appendChild(ne)}paintImageMaskXObject(u){const g=this.current,R=u.width,I=u.height,V=g.fillColor;g.maskId="mask"+M++;const Y=this.svgFactory.createElement("svg:mask");Y.setAttributeNS(null,"id",g.maskId);const ne=this.svgFactory.createElement("svg:rect");ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y","0"),ne.setAttributeNS(null,"width",h(R)),ne.setAttributeNS(null,"height",h(I)),ne.setAttributeNS(null,"fill",V),ne.setAttributeNS(null,"mask",`url(#${g.maskId})`),this.defs.appendChild(Y),this._ensureTransformGroup().appendChild(ne),this.paintInlineImageXObject(u,Y)}paintFormXObjectBegin(u,g){if(Array.isArray(u)&&6===u.length&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),g){const R=g[2]-g[0],I=g[3]-g[1],V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",g[0]),V.setAttributeNS(null,"y",g[1]),V.setAttributeNS(null,"width",h(R)),V.setAttributeNS(null,"height",h(I)),this.current.element=V,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const g=this.svgFactory.create(u.width,u.height),R=this.svgFactory.createElement("svg:defs");g.appendChild(R),this.defs=R;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",S(u.transform)),g.appendChild(I),this.svg=I,g}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.PDFNodeStream=void 0;var p=X(1),ce=X(26);const ae=__webpack_require__(172),le=__webpack_require__(1),pe=__webpack_require__(779),Q=__webpack_require__(558),y=/^file:\/\/\/[a-zA-Z]:\//;k.PDFNodeStream=class P{constructor(x){this.source=x,this.url=function $(M){const x=Q.parse(M);return"file:"===x.protocol||x.host?x:/^[a-z]:[/\\]/i.test(M)?Q.parse(`file:///${M}`):(x.host||(x.protocol="file:"),x)}(x.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x,u;return null!=(u=null==(x=this._fullRequestReader)?void 0:x._loaded)?u:0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new _(this),this._fullRequestReader}getRangeReader(x,u){if(u<=this._progressiveDataLength)return null;const g=this.isFsUrl?new H(this,x,u):new h(this,x,u);return this._rangeRequestReaders.push(g),g}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x);for(const u of this._rangeRequestReaders.slice(0))u.cancel(x)}};class N{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const u=x.source;this._contentLength=u.length,this._loaded=0,this._filename=null,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._headersCapability=(0,p.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var x=this;return _asyncToGenerator(function*(){if(yield x._readCapability.promise,x._done)return{value:void 0,done:!0};if(x._storedError)throw x._storedError;const u=x._readableStream.read();return null===u?(x._readCapability=(0,p.createPromiseCapability)(),x.read()):(x._loaded+=u.length,x.onProgress&&x.onProgress({loaded:x._loaded,total:x._contentLength}),{value:new Uint8Array(u).buffer,done:!1})})()}cancel(x){this._readableStream?this._readableStream.destroy(x):this._error(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",u=>{this._error(u)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new p.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class O{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!x.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var x=this;return _asyncToGenerator(function*(){if(yield x._readCapability.promise,x._done)return{value:void 0,done:!0};if(x._storedError)throw x._storedError;const u=x._readableStream.read();return null===u?(x._readCapability=(0,p.createPromiseCapability)(),x.read()):(x._loaded+=u.length,x.onProgress&&x.onProgress({loaded:x._loaded}),{value:new Uint8Array(u).buffer,done:!1})})()}cancel(x){this._readableStream?this._readableStream.destroy(x):this._error(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",u=>{this._error(u)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function b(M,x){return{protocol:M.protocol,auth:M.auth,host:M.hostname,port:M.port,path:M.path,method:"GET",headers:x}}class _ extends N{constructor(x){super(x);const u=g=>{if(404===g.statusCode){const Y=new p.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=Y,void this._headersCapability.reject(Y)}this._headersCapability.resolve(),this._setReadableStream(g);const R=Y=>this._readableStream.headers[Y.toLowerCase()],{allowRangeRequests:I,suggestedLength:V}=(0,ce.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=V||this._contentLength,this._filename=(0,ce.extractFilenameFromHeader)(R)};this._request=null,this._request="http:"===this._url.protocol?le.request(b(this._url,x.httpHeaders),u):pe.request(b(this._url,x.httpHeaders),u),this._request.on("error",g=>{this._storedError=g,this._headersCapability.reject(g)}),this._request.end()}}class h extends O{constructor(x,u,g){super(x),this._httpHeaders={};for(const I in x.httpHeaders){const V=x.httpHeaders[I];void 0!==V&&(this._httpHeaders[I]=V)}this._httpHeaders.Range=`bytes=${u}-${g-1}`;const R=I=>{if(404!==I.statusCode)this._setReadableStream(I);else{const V=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=V}};this._request=null,this._request="http:"===this._url.protocol?le.request(b(this._url,this._httpHeaders),R):pe.request(b(this._url,this._httpHeaders),R),this._request.on("error",I=>{this._storedError=I}),this._request.end()}}class S extends N{constructor(x){super(x);let u=decodeURIComponent(this._url.path);y.test(this._url.href)&&(u=u.replace(/^\//,"")),ae.lstat(u,(g,R)=>{if(g)return"ENOENT"===g.code&&(g=new p.MissingPDFException(`Missing PDF "${u}".`)),this._storedError=g,void this._headersCapability.reject(g);this._contentLength=R.size,this._setReadableStream(ae.createReadStream(u)),this._headersCapability.resolve()})}}class H extends O{constructor(x,u,g){super(x);let R=decodeURIComponent(this._url.path);y.test(this._url.href)&&(R=R.replace(/^\//,"")),this._setReadableStream(ae.createReadStream(R,{start:u,end:g-1}))}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.createResponseStatusError=function Q($,P){return 404===$||0===$&&P.startsWith("file:")?new p.MissingPDFException('Missing PDF "'+P+'".'):new p.UnexpectedResponseException(`Unexpected server response (${$}) while retrieving PDF "${P}".`,$)},k.extractFilenameFromHeader=function pe($){const P=$("Content-Disposition");if(P){let N=(0,ce.getFilenameFromContentDispositionHeader)(P);if(N.includes("%"))try{N=decodeURIComponent(N)}catch(O){}if((0,ae.isPdfFile)(N))return N}return null},k.validateRangeRequestCapabilities=function le({getResponseHeader:$,isHttp:P,rangeChunkSize:N,disableRange:O}){const b={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt($("Content-Length"),10);return!Number.isInteger(_)||(b.suggestedLength=_,_<=2*N)||O||!P||"bytes"!==$("Accept-Ranges")||"identity"!==($("Content-Encoding")||"identity")||(b.allowRangeRequests=!0),b},k.validateResponseStatus=function y($){return 200===$||206===$};var p=X(1),ce=X(27),ae=X(5)},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.getFilenameFromContentDispositionHeader=function ce(ae){let le=!0,pe=Q("filename\\*","i").exec(ae);if(pe){pe=pe[1];let _=N(pe);return _=unescape(_),_=O(_),_=b(_),$(_)}if(pe=function P(_){const h=[];let S;const H=Q("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(S=H.exec(_));){let[,x,u,g]=S;if(x=parseInt(x,10),x in h){if(0===x)break}else h[x]=[u,g]}const M=[];for(let x=0;x<h.length&&x in h;++x){let[u,g]=h[x];g=N(g),u&&(g=unescape(g),0===x&&(g=O(g))),M.push(g)}return M.join("")}(ae),pe)return $(b(pe));if(pe=Q("filename","i").exec(ae),pe){pe=pe[1];let _=N(pe);return _=b(_),$(_)}function Q(_,h){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function y(_,h){if(_){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const S=new TextDecoder(_,{fatal:!0}),H=(0,p.stringToBytes)(h);h=S.decode(H),le=!1}catch(S){}}return h}function $(_){return le&&/[\x80-\xff]/.test(_)&&(_=y("utf-8",_),le&&(_=y("iso-8859-1",_))),_}function N(_){if(_.startsWith('"')){const h=_.slice(1).split('\\"');for(let S=0;S<h.length;++S){const H=h[S].indexOf('"');-1!==H&&(h[S]=h[S].slice(0,H),h.length=S+1),h[S]=h[S].replace(/\\(.)/g,"$1")}_=h.join('"')}return _}function O(_){const h=_.indexOf("'");return-1===h?_:y(_.slice(0,h),_.slice(h+1).replace(/^[^']*'/,""))}function b(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,S,H,M){if("q"===H||"Q"===H)return y(S,M=(M=M.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(x,u){return String.fromCharCode(parseInt(u,16))}));try{M=atob(M)}catch(x){}return y(S,M)})}return""};var p=X(1)},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.PDFNetworkStream=void 0;var p=X(1),ce=X(26);class Q{constructor(O,b={}){this.url=O,this.isHttp=/^https?:/i.test(O),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.getXhr=b.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(O,b,_){const h={begin:O,end:b};for(const S in _)h[S]=_[S];return this.request(h)}requestFull(O){return this.request(O)}request(O){const b=this.getXhr(),_=this.currXhrId++,h=this.pendingRequests[_]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const S in this.httpHeaders){const H=this.httpHeaders[S];void 0!==H&&b.setRequestHeader(S,H)}return this.isHttp&&"begin"in O&&"end"in O?(b.setRequestHeader("Range",`bytes=${O.begin}-${O.end-1}`),h.expectedStatus=206):h.expectedStatus=200,b.responseType="arraybuffer",O.onError&&(b.onerror=function(S){O.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,_),b.onprogress=this.onProgress.bind(this,_),h.onHeadersReceived=O.onHeadersReceived,h.onDone=O.onDone,h.onError=O.onError,h.onProgress=O.onProgress,b.send(null),_}onProgress(O,b){var h;const _=this.pendingRequests[O];!_||null==(h=_.onProgress)||h.call(_,b)}onStateChange(O,b){var x,u,g;const _=this.pendingRequests[O];if(!_)return;const h=_.xhr;if(h.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),4!==h.readyState||!(O in this.pendingRequests))return;if(delete this.pendingRequests[O],0===h.status&&this.isHttp)return void(null==(x=_.onError)||x.call(_,h.status));const S=h.status||200;if((200!==S||206!==_.expectedStatus)&&S!==_.expectedStatus)return void(null==(u=_.onError)||u.call(_,h.status));const M=function pe(N){const O=N.response;return"string"!=typeof O?O:(0,p.stringToBytes)(O).buffer}(h);if(206===S){const R=h.getResponseHeader("Content-Range"),I=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);_.onDone({begin:parseInt(I[1],10),chunk:M})}else M?_.onDone({begin:0,chunk:M}):null==(g=_.onError)||g.call(_,h.status)}getRequestXhr(O){return this.pendingRequests[O].xhr}isPendingRequest(O){return O in this.pendingRequests}abortRequest(O){const b=this.pendingRequests[O].xhr;delete this.pendingRequests[O],b.abort()}}k.PDFNetworkStream=class y{constructor(O){this._source=O,this._manager=new Q(O.url,{httpHeaders:O.httpHeaders,withCredentials:O.withCredentials}),this._rangeChunkSize=O.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(O){const b=this._rangeRequestReaders.indexOf(O);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $(this._manager,this._source),this._fullRequestReader}getRangeReader(O,b){const _=new P(this._manager,O,b);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(O){var b;null==(b=this._fullRequestReader)||b.cancel(O);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(O)}};class ${constructor(O,b){this._manager=O;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=O.requestFull(_),this._headersReceivedCapability=(0,p.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const O=this._fullRequestId,b=this._manager.getRequestXhr(O),_=H=>b.getResponseHeader(H),{allowRangeRequests:h,suggestedLength:S}=(0,ce.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});h&&(this._isRangeSupported=!0),this._contentLength=S||this._contentLength,this._filename=(0,ce.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(O),this._headersReceivedCapability.resolve()}_onDone(O){if(O&&(this._requests.length>0?this._requests.shift().resolve({value:O.chunk,done:!1}):this._cachedChunks.push(O.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(O){this._storedError=(0,ce.createResponseStatusError)(O,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(O){var b;null==(b=this.onProgress)||b.call(this,{loaded:O.loaded,total:O.lengthComputable?O.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var O=this;return _asyncToGenerator(function*(){if(O._storedError)throw O._storedError;if(O._cachedChunks.length>0)return{value:O._cachedChunks.shift(),done:!1};if(O._done)return{value:void 0,done:!0};const b=(0,p.createPromiseCapability)();return O._requests.push(b),b.promise})()}cancel(O){this._done=!0,this._headersReceivedCapability.reject(O);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class P{constructor(O,b,_){this._manager=O;const h={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=O.url,this._requestId=O.requestRange(b,_,h),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var O;null==(O=this.onClosed)||O.call(this,this)}_onDone(O){const b=O.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(O){this._storedError=(0,ce.createResponseStatusError)(O,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(O){var b;this.isStreamingSupported||null==(b=this.onProgress)||b.call(this,{loaded:O.loaded})}get isStreamingSupported(){return!1}read(){var O=this;return _asyncToGenerator(function*(){if(O._storedError)throw O._storedError;if(null!==O._queuedChunk){const _=O._queuedChunk;return O._queuedChunk=null,{value:_,done:!1}}if(O._done)return{value:void 0,done:!0};const b=(0,p.createPromiseCapability)();return O._requests.push(b),b.promise})()}cancel(O){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(We,k,X)=>{Object.defineProperty(k,"__esModule",{value:!0}),k.PDFFetchStream=void 0;var p=X(1),ce=X(26);function ae($,P,N){return{method:"GET",headers:$,signal:null==N?void 0:N.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function le($){const P=new Headers;for(const N in $){const O=$[N];void 0!==O&&P.append(N,O)}return P}k.PDFFetchStream=class pe{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P,N;return null!=(N=null==(P=this._fullRequestReader)?void 0:P._loaded)?N:0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Q(this),this._fullRequestReader}getRangeReader(P,N){if(N<=this._progressiveDataLength)return null;const O=new y(this,P,N);return this._rangeRequestReaders.push(O),O}cancelAllRequests(P){this._fullRequestReader&&this._fullRequestReader.cancel(P);for(const N of this._rangeRequestReaders.slice(0))N.cancel(P)}};class Q{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const N=P.source;this._withCredentials=N.withCredentials||!1,this._contentLength=N.length,this._headersCapability=(0,p.createPromiseCapability)(),this._disableRange=N.disableRange||!1,this._rangeChunkSize=N.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!N.disableStream,this._isRangeSupported=!N.disableRange,this._headers=le(this._stream.httpHeaders);const O=N.url;fetch(O,ae(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,ce.validateResponseStatus)(b.status))throw(0,ce.createResponseStatusError)(b.status,O);this._reader=b.body.getReader(),this._headersCapability.resolve();const _=H=>b.headers.get(H),{allowRangeRequests:h,suggestedLength:S}=(0,ce.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=S||this._contentLength,this._filename=(0,ce.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new p.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var P=this;return _asyncToGenerator(function*(){yield P._headersCapability.promise;const{value:N,done:O}=yield P._reader.read();return O?{value:N,done:O}:(P._loaded+=N.byteLength,P.onProgress&&P.onProgress({loaded:P._loaded,total:P._contentLength}),{value:new Uint8Array(N).buffer,done:!1})})()}cancel(P){this._reader&&this._reader.cancel(P),this._abortController&&this._abortController.abort()}}class y{constructor(P,N,O){this._stream=P,this._reader=null,this._loaded=0;const b=P.source;this._withCredentials=b.withCredentials||!1,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!b.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=le(this._stream.httpHeaders),this._headers.append("Range",`bytes=${N}-${O-1}`);const _=b.url;fetch(_,ae(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,ce.validateResponseStatus)(h.status))throw(0,ce.createResponseStatusError)(h.status,_);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var P=this;return _asyncToGenerator(function*(){yield P._readCapability.promise;const{value:N,done:O}=yield P._reader.read();return O?{value:N,done:O}:(P._loaded+=N.byteLength,P.onProgress&&P.onProgress({loaded:P._loaded}),{value:new Uint8Array(N).buffer,done:!1})})()}cancel(P){this._reader&&this._reader.cancel(P),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(We){var k=__webpack_module_cache__[We];if(void 0!==k)return k.exports;var X=__webpack_module_cache__[We]={exports:{}};return __webpack_modules__[We](X,X.exports,__w_pdfjs_require__),X.exports}var __webpack_exports__={};return(()=>{var We=__webpack_exports__;Object.defineProperty(We,"__esModule",{value:!0}),Object.defineProperty(We,"AnnotationLayer",{enumerable:!0,get:function(){return ce.AnnotationLayer}}),Object.defineProperty(We,"AnnotationMode",{enumerable:!0,get:function(){return k.AnnotationMode}}),Object.defineProperty(We,"CMapCompressionType",{enumerable:!0,get:function(){return k.CMapCompressionType}}),Object.defineProperty(We,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ae.GlobalWorkerOptions}}),Object.defineProperty(We,"InvalidPDFException",{enumerable:!0,get:function(){return k.InvalidPDFException}}),Object.defineProperty(We,"LoopbackPort",{enumerable:!0,get:function(){return X.LoopbackPort}}),Object.defineProperty(We,"MissingPDFException",{enumerable:!0,get:function(){return k.MissingPDFException}}),Object.defineProperty(We,"OPS",{enumerable:!0,get:function(){return k.OPS}}),Object.defineProperty(We,"PDFDataRangeTransport",{enumerable:!0,get:function(){return X.PDFDataRangeTransport}}),Object.defineProperty(We,"PDFDateString",{enumerable:!0,get:function(){return p.PDFDateString}}),Object.defineProperty(We,"PDFWorker",{enumerable:!0,get:function(){return X.PDFWorker}}),Object.defineProperty(We,"PasswordResponses",{enumerable:!0,get:function(){return k.PasswordResponses}}),Object.defineProperty(We,"PermissionFlag",{enumerable:!0,get:function(){return k.PermissionFlag}}),Object.defineProperty(We,"PixelsPerInch",{enumerable:!0,get:function(){return p.PixelsPerInch}}),Object.defineProperty(We,"RenderingCancelledException",{enumerable:!0,get:function(){return p.RenderingCancelledException}}),Object.defineProperty(We,"SVGGraphics",{enumerable:!0,get:function(){return Q.SVGGraphics}}),Object.defineProperty(We,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return k.UNSUPPORTED_FEATURES}}),Object.defineProperty(We,"UnexpectedResponseException",{enumerable:!0,get:function(){return k.UnexpectedResponseException}}),Object.defineProperty(We,"Util",{enumerable:!0,get:function(){return k.Util}}),Object.defineProperty(We,"VerbosityLevel",{enumerable:!0,get:function(){return k.VerbosityLevel}}),Object.defineProperty(We,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(We,"build",{enumerable:!0,get:function(){return X.build}}),Object.defineProperty(We,"createPromiseCapability",{enumerable:!0,get:function(){return k.createPromiseCapability}}),Object.defineProperty(We,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return k.createValidAbsoluteUrl}}),Object.defineProperty(We,"getDocument",{enumerable:!0,get:function(){return X.getDocument}}),Object.defineProperty(We,"getFilenameFromUrl",{enumerable:!0,get:function(){return p.getFilenameFromUrl}}),Object.defineProperty(We,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return p.getPdfFilenameFromUrl}}),Object.defineProperty(We,"getXfaPageViewport",{enumerable:!0,get:function(){return p.getXfaPageViewport}}),Object.defineProperty(We,"isPdfFile",{enumerable:!0,get:function(){return p.isPdfFile}}),Object.defineProperty(We,"loadScript",{enumerable:!0,get:function(){return p.loadScript}}),Object.defineProperty(We,"renderTextLayer",{enumerable:!0,get:function(){return pe.renderTextLayer}}),Object.defineProperty(We,"shadow",{enumerable:!0,get:function(){return k.shadow}}),Object.defineProperty(We,"version",{enumerable:!0,get:function(){return X.version}});var k=__w_pdfjs_require__(1),X=__w_pdfjs_require__(4),p=__w_pdfjs_require__(5),ce=__w_pdfjs_require__(20),ae=__w_pdfjs_require__(13),le=__w_pdfjs_require__(3),pe=__w_pdfjs_require__(23),Q=__w_pdfjs_require__(24),y=__w_pdfjs_require__(22);if(le.isNodeJS){const{PDFNodeStream:N}=__w_pdfjs_require__(25);(0,X.setPDFNetworkStreamFactory)(O=>new N(O))}else{const{PDFNetworkStream:N}=__w_pdfjs_require__(28),{PDFFetchStream:O}=__w_pdfjs_require__(29);(0,X.setPDFNetworkStreamFactory)(b=>(0,p.isValidFetchUrl)(b.url)?new O(b):new N(b))}})(),__webpack_exports__})(),module.exports=X()},813:function(We,k,X){var le,p=X(926).default;le=()=>(()=>{"use strict";var ce=[,(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DefaultXfaLayerFactory=y.DefaultTextLayerFactory=y.DefaultStructTreeLayerFactory=y.DefaultAnnotationLayerFactory=void 0;var P=$(2),N=$(4),O=$(5),b=$(7),_=$(8),h=$(9);y.DefaultAnnotationLayerFactory=class S{createAnnotationLayerBuilder(g,R,I=null,V="",Y=!0,ne=N.NullL10n,re=!1,ue=null,ve=null,we=null,Ie=null){return new P.AnnotationLayerBuilder({pageDiv:g,pdfPage:R,imageResourcesPath:V,renderForms:Y,linkService:new O.SimpleLinkService,l10n:ne,annotationStorage:I,enableScripting:re,hasJSActionsPromise:ue,fieldObjectsPromise:we,mouseState:ve,annotationCanvasMap:Ie})}},y.DefaultStructTreeLayerFactory=class H{createStructTreeLayerBuilder(g){return new b.StructTreeLayerBuilder({pdfPage:g})}},y.DefaultTextLayerFactory=class M{createTextLayerBuilder(g,R,I,V=!1,Y,ne){return new _.TextLayerBuilder({textLayerDiv:g,pageIndex:R,viewport:I,enhanceTextSelection:V,eventBus:Y,highlighter:ne})}},y.DefaultXfaLayerFactory=class x{createXfaLayerBuilder(g,R,I=null,V=null){return new h.XfaLayerBuilder({pageDiv:g,pdfPage:R,annotationStorage:I,linkService:new O.SimpleLinkService,xfaHtml:V})}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AnnotationLayerBuilder=void 0;var P=$(3),N=$(4);y.AnnotationLayerBuilder=class O{constructor({pageDiv:_,pdfPage:h,linkService:S,downloadManager:H,annotationStorage:M=null,imageResourcesPath:x="",renderForms:u=!0,l10n:g=N.NullL10n,enableScripting:R=!1,hasJSActionsPromise:I=null,fieldObjectsPromise:V=null,mouseState:Y=null,annotationCanvasMap:ne=null}){this.pageDiv=_,this.pdfPage=h,this.linkService=S,this.downloadManager=H,this.imageResourcesPath=x,this.renderForms=u,this.l10n=g,this.annotationStorage=M,this.enableScripting=R,this._hasJSActionsPromise=I,this._fieldObjectsPromise=V,this._mouseState=Y,this._annotationCanvasMap=ne,this.div=null,this._cancelled=!1}render(_,h="display"){var S=this;return p(function*(){const[H,M=!1,x=null]=yield Promise.all([S.pdfPage.getAnnotations({intent:h}),S._hasJSActionsPromise,S._fieldObjectsPromise]);if(S._cancelled||0===H.length)return;const u={viewport:_.clone({dontFlip:!0}),div:S.div,annotations:H,page:S.pdfPage,imageResourcesPath:S.imageResourcesPath,renderForms:S.renderForms,linkService:S.linkService,downloadManager:S.downloadManager,annotationStorage:S.annotationStorage,enableScripting:S.enableScripting,hasJSActions:M,fieldObjects:x,mouseState:S._mouseState,annotationCanvasMap:S._annotationCanvasMap};S.div?P.AnnotationLayer.update(u):(S.div=document.createElement("div"),S.div.className="annotationLayer",S.pageDiv.appendChild(S.div),u.div=S.div,P.AnnotationLayer.render(u),S.l10n.translate(S.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},Q=>{let y;y="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:X(36),Q.exports=y},(Q,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NullL10n=void 0,y.fixupLangCode=function O(h){return N[null==h?void 0:h.toLowerCase()]||h},y.getL10nFallback=P;const $={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function P(h,S){switch(h){case"find_match_count":h=`find_match_count[${1===S.total?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${1===S.limit?"one":"other"}]`}return $[h]||""}const N={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};y.NullL10n={getLanguage:()=>p(function*(){return"en-us"})(),getDirection:()=>p(function*(){return"ltr"})(),get:(h,S=null,H=P(h,S))=>p(function*(){return function b(h,S){return S?h.replace(/\{\{\s*(\w+)\s*\}\}/g,(H,M)=>M in S?S[M]:"{{"+M+"}}"):h}(H,S)})(),translate:h=>p(function*(){})()}},(Q,y,$)=>{var S,H,SS,x,x2;Object.defineProperty(y,"__esModule",{value:!0}),y.SimpleLinkService=y.PDFLinkService=y.LinkTarget=void 0;var P=$(6);const O={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function b(R,{url:I,target:V,rel:Y,enabled:ne=!0}={}){if(!I||"string"!=typeof I)throw new Error('A valid "url" parameter must provided.');const re=(0,P.removeNullCharacters)(I);ne?R.href=R.title=re:(R.href="",R.title=`Disabled: ${re}`,R.onclick=()=>!1);let ue="";switch(V){case O.NONE:break;case O.SELF:ue="_self";break;case O.BLANK:ue="_blank";break;case O.PARENT:ue="_parent";break;case O.TOP:ue="_top"}R.target=ue,R.rel="string"==typeof Y?Y:"noopener noreferrer nofollow"}y.LinkTarget=O;const g=class{constructor({eventBus:I,externalLinkTarget:V=null,externalLinkRel:Y=null,ignoreDestinationZoom:ne=!1}={}){vt(this,H),vt(this,S,new Map),this.eventBus=I,this.externalLinkTarget=V,this.externalLinkRel=Y,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ne,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(I,V=null){this.baseUrl=V,this.pdfDocument=I,ft(this,S).clear()}setViewer(I){this.pdfViewer=I}setHistory(I){this.pdfHistory=I}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(I){this.pdfViewer.currentPageNumber=I}get rotation(){return this.pdfViewer.pagesRotation}set rotation(I){this.pdfViewer.pagesRotation=I}goToDestination(I){var V=this;return p(function*(){var re;if(!V.pdfDocument)return;let Y,ne;"string"==typeof I?(Y=I,ne=yield V.pdfDocument.getDestination(I)):(Y=null,ne=yield I),Array.isArray(ne)?mt(re=V,H,SS).call(re,I,Y,ne):console.error(`PDFLinkService.goToDestination: "${ne}" is not a valid destination array, for dest="${I}".`)})()}goToPage(I){if(!this.pdfDocument)return;const V="string"==typeof I&&this.pdfViewer.pageLabelToPageNumber(I)||0|I;Number.isInteger(V)&&V>0&&V<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(V)),this.pdfViewer.scrollPageIntoView({pageNumber:V})):console.error(`PDFLinkService.goToPage: "${I}" is not a valid page.`)}addLinkAttributes(I,V,Y=!1){b(I,{url:V,target:Y?O.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(I){if("string"==typeof I){if(I.length>0)return this.getAnchorUrl("#"+escape(I))}else if(Array.isArray(I)){const V=JSON.stringify(I);if(V.length>0)return this.getAnchorUrl("#"+escape(V))}return this.getAnchorUrl("")}getAnchorUrl(I){return(this.baseUrl||"")+I}setHash(I){var ne;if(!this.pdfDocument)return;let V,Y;if(I.includes("=")){const re=(0,P.parseQueryString)(I);if(re.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:re.get("search").replace(/"/g,""),phraseSearch:"true"===re.get("phrase")}),re.has("page")&&(V=0|re.get("page")||1),re.has("zoom")){const ue=re.get("zoom").split(","),ve=ue[0],we=parseFloat(ve);ve.includes("Fit")?"Fit"===ve||"FitB"===ve?Y=[null,{name:ve}]:"FitH"===ve||"FitBH"===ve||"FitV"===ve||"FitBV"===ve?Y=[null,{name:ve},ue.length>1?0|ue[1]:null]:"FitR"===ve?5!==ue.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):Y=[null,{name:ve},0|ue[1],0|ue[2],0|ue[3],0|ue[4]]:console.error(`PDFLinkService.setHash: "${ve}" is not a valid zoom value.`):Y=[null,{name:"XYZ"},ue.length>1?0|ue[1]:null,ue.length>2?0|ue[2]:null,we?we/100:ve]}Y?this.pdfViewer.scrollPageIntoView({pageNumber:V||this.page,destArray:Y,allowNegativeOffset:!0}):V&&(this.page=V),re.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:re.get("pagemode")}),re.has("nameddest")&&this.goToDestination(re.get("nameddest"))}else{Y=unescape(I);try{Y=JSON.parse(Y),Array.isArray(Y)||(Y=Y.toString())}catch(re){}if("string"==typeof Y||mt(ne=g,x,x2).call(ne,Y))return void this.goToDestination(Y);console.error(`PDFLinkService.setHash: "${unescape(I)}" is not a valid destination.`)}}executeNamedAction(I){var V,Y;switch(I){case"GoBack":null==(V=this.pdfHistory)||V.back();break;case"GoForward":null==(Y=this.pdfHistory)||Y.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:I})}cachePageRef(I,V){if(!V)return;const Y=0===V.gen?`${V.num}R`:`${V.num}R${V.gen}`;ft(this,S).set(Y,I)}_cachedPageNumber(I){if(!I)return null;const V=0===I.gen?`${I.num}R`:`${I.num}R${I.gen}`;return ft(this,S).get(V)||null}isPageVisible(I){return this.pdfViewer.isPageVisible(I)}isPageCached(I){return this.pdfViewer.isPageCached(I)}};let _=g;S=new WeakMap,H=new WeakSet,SS=function(I,V=null,Y){const ne=Y[0];let re;if("object"==typeof ne&&null!==ne){if(re=this._cachedPageNumber(ne),!re)return void this.pdfDocument.getPageIndex(ne).then(ue=>{this.cachePageRef(ue+1,ne),mt(this,H,SS).call(this,I,V,Y)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${ne}" is not a valid page reference, for dest="${I}".`)})}else{if(!Number.isInteger(ne))return void console.error(`PDFLinkService.#goToDestinationHelper: "${ne}" is not a valid destination reference, for dest="${I}".`);re=ne+1}!re||re<1||re>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${re}" is not a valid page number, for dest="${I}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:V,explicitDest:Y,pageNumber:re})),this.pdfViewer.scrollPageIntoView({pageNumber:re,destArray:Y,ignoreDestinationZoom:this._ignoreDestinationZoom}))},x=new WeakSet,x2=function(I){if(!Array.isArray(I))return!1;const V=I.length;if(V<2)return!1;const Y=I[0];if(!("object"==typeof Y&&Number.isInteger(Y.num)&&Number.isInteger(Y.gen)||Number.isInteger(Y)&&Y>=0))return!1;const ne=I[1];if("object"!=typeof ne||"string"!=typeof ne.name)return!1;let re=!0;switch(ne.name){case"XYZ":if(5!==V)return!1;break;case"Fit":case"FitB":return 2===V;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==V)return!1;break;case"FitR":if(6!==V)return!1;re=!1;break;default:return!1}for(let ue=2;ue<V;ue++){const ve=I[ue];if(!("number"==typeof ve||re&&null===ve))return!1}return!0},vt(_,x),y.PDFLinkService=_,y.SimpleLinkService=class h{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(I){}get rotation(){return 0}set rotation(I){}goToDestination(I){return p(function*(){})()}goToPage(I){}addLinkAttributes(I,V,Y=!1){b(I,{url:V,enabled:this.externalLinkEnabled})}getDestinationHash(I){return"#"}getAnchorUrl(I){return"#"}setHash(I){}executeNamedAction(I){}cachePageRef(I,V){}isPageVisible(I){return!0}isPageCached(I){return!0}}},(Q,y)=>{var ze,I2;Object.defineProperty(y,"__esModule",{value:!0}),y.animationStarted=y.VERTICAL_PADDING=y.UNKNOWN_SCALE=y.TextLayerMode=y.SpreadMode=y.SidebarView=y.ScrollMode=y.SCROLLBAR_PADDING=y.RenderingStates=y.RendererType=y.ProgressBar=y.PresentationModeState=y.OutputScale=y.MIN_SCALE=y.MAX_SCALE=y.MAX_AUTO_SCALE=y.DEFAULT_SCALE_VALUE=y.DEFAULT_SCALE_DELTA=y.DEFAULT_SCALE=y.AutoPrintRegExp=void 0,y.apiPageLayoutToViewerModes=function xe(Oe){let Ve=I.VERTICAL,je=V.NONE;switch(Oe){case"SinglePage":Ve=I.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Ve=I.PAGE;case"TwoColumnLeft":je=V.ODD;break;case"TwoPageRight":Ve=I.PAGE;case"TwoColumnRight":je=V.EVEN}return{scrollMode:Ve,spreadMode:je}},y.apiPageModeToSidebarView=function ke(Oe){switch(Oe){case"UseNone":return u.NONE;case"UseThumbs":return u.THUMBS;case"UseOutlines":return u.OUTLINE;case"UseAttachments":return u.ATTACHMENTS;case"UseOC":return u.LAYERS}return u.NONE},y.approximateFraction=function Pe(Oe){if(Math.floor(Oe)===Oe)return[Oe,1];const Ve=1/Oe;if(Ve>8)return[1,8];if(Math.floor(Ve)===Ve)return[1,Ve];const U=Oe>1?Ve:Oe;let Xe,ie=0,Te=1,Ke=1,qe=1;for(;;){const it=ie+Ke,T=Te+qe;if(T>8)break;U<=it/T?(Ke=it,qe=T):(ie=it,Te=T)}return Xe=U-ie/Te<Ke/qe-U?U===Oe?[ie,Te]:[Te,ie]:U===Oe?[Ke,qe]:[qe,Ke],Xe},y.backtrackBeforeAllVisibleElements=J,y.binarySearchFirstItem=Me,y.getActiveOrFocusedElement=function Ae(){let Oe=document,Ve=Oe.activeElement||Oe.querySelector(":focus");for(;null==Ve?void 0:Ve.shadowRoot;)Oe=Ve.shadowRoot,Ve=Oe.activeElement||Oe.querySelector(":focus");return Ve},y.getPageSizeInches=function $e({view:Oe,userUnit:Ve,rotate:je}){const[U,ie,Te,Ke]=Oe,qe=je%180!=0,Xe=(Te-U)/72*Ve,it=(Ke-ie)/72*Ve;return{width:qe?it:Xe,height:qe?Xe:it}},y.getVisibleElements=function v({scrollEl:Oe,views:Ve,sortByVisibility:je=!1,horizontal:U=!1,rtl:ie=!1}){const Te=Oe.scrollTop,Ke=Te+Oe.clientHeight,qe=Oe.scrollLeft,Xe=qe+Oe.clientWidth,he=[],Re=new Set,se=Ve.length;let K=Me(Ve,U?function T(Ce){const me=Ce.div,Se=me.offsetLeft+me.clientLeft;return ie?Se<Xe:Se+me.clientWidth>qe}:function it(Ce){const me=Ce.div;return me.offsetTop+me.clientTop+me.clientHeight>Te});K>0&&K<se&&!U&&(K=J(K,Ve,Te));let L=U?Xe:-1;for(let Ce=K;Ce<se;Ce++){const me=Ve[Ce],Se=me.div,Ye=Se.offsetLeft+Se.clientLeft,et=Se.offsetTop+Se.clientTop,bt=Se.clientWidth,Ct=Se.clientHeight,Vt=Ye+bt,cn=et+Ct;if(-1===L)cn>=Ke&&(L=cn);else if((U?Ye:et)>L)break;if(cn<=Te||et>=Ke||Vt<=qe||Ye>=Xe)continue;const cr=Math.max(0,Te-et)+Math.max(0,cn-Ke),Rr=(bt-(Math.max(0,qe-Ye)+Math.max(0,Vt-Xe)))/bt;he.push({id:me.id,x:Ye,y:et,view:me,percent:(Ct-cr)/Ct*Rr*100|0,widthPercent:100*Rr|0}),Re.add(me.id)}const B=he[0],te=he[he.length-1];return je&&he.sort(function(Ce,me){const Se=Ce.percent-me.percent;return Math.abs(Se)>.001?-Se:Ce.id-me.id}),{first:B,last:te,views:he,ids:Re}},y.isPortraitOrientation=function W(Oe){return Oe.width<=Oe.height},y.isValidRotation=function D(Oe){return Number.isInteger(Oe)&&Oe%90==0},y.isValidScrollMode=function F(Oe){return Number.isInteger(Oe)&&Object.values(I).includes(Oe)&&Oe!==I.UNKNOWN},y.isValidSpreadMode=function j(Oe){return Number.isInteger(Oe)&&Object.values(V).includes(Oe)&&Oe!==V.UNKNOWN},y.noContextMenuHandler=function E(Oe){Oe.preventDefault()},y.normalizeWheelEventDelta=function C(Oe){let Ve=d(Oe);return 0===Oe.deltaMode?Ve/=900:1===Oe.deltaMode&&(Ve/=30),Ve},y.normalizeWheelEventDirection=d,y.parseQueryString=function ve(Oe){const Ve=new Map;for(const[je,U]of new URLSearchParams(Oe))Ve.set(je.toLowerCase(),U);return Ve},y.removeNullCharacters=function de(Oe,Ve=!1){return"string"!=typeof Oe?(console.error("The argument must be a string."),Oe):(Ve&&(Oe=Oe.replace(Ie," ")),Oe.replace(we,""))},y.roundToDivide=function Fe(Oe,Ve){const je=Oe%Ve;return 0===je?Oe:Math.round(Oe-je+Ve)},y.scrollIntoView=function re(Oe,Ve,je=!1){let U=Oe.offsetParent;if(!U)return void console.error("offsetParent is not set -- cannot scroll");let ie=Oe.offsetTop+Oe.clientTop,Te=Oe.offsetLeft+Oe.clientLeft;for(;U.clientHeight===U.scrollHeight&&U.clientWidth===U.scrollWidth||je&&(U.classList.contains("markedContent")||"hidden"===getComputedStyle(U).overflow);)if(ie+=U.offsetTop,Te+=U.offsetLeft,U=U.offsetParent,!U)return;Ve&&(void 0!==Ve.top&&(ie+=Ve.top),void 0!==Ve.left&&(Te+=Ve.left,U.scrollLeft=Te)),U.scrollTop=ie},y.watchScroll=function ue(Oe,Ve){const je=function(Te){ie||(ie=window.requestAnimationFrame(function(){ie=null;const qe=Oe.scrollLeft,Xe=U.lastX;qe!==Xe&&(U.right=qe>Xe),U.lastX=qe;const it=Oe.scrollTop,T=U.lastY;it!==T&&(U.down=it>T),U.lastY=it,Ve(U)}))},U={right:!0,down:!0,lastX:Oe.scrollLeft,lastY:Oe.scrollTop,_eventHandler:je};let ie=null;return Oe.addEventListener("scroll",je,!0),U},y.DEFAULT_SCALE_VALUE="auto",y.DEFAULT_SCALE=1,y.DEFAULT_SCALE_DELTA=1.1,y.MIN_SCALE=.1,y.MAX_SCALE=10,y.UNKNOWN_SCALE=0,y.MAX_AUTO_SCALE=1.25,y.SCROLLBAR_PADDING=40,y.VERTICAL_PADDING=5,y.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},y.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const u={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};y.SidebarView=u,y.RendererType={CANVAS:"canvas",SVG:"svg"},y.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const I={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};y.ScrollMode=I;const V={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};y.SpreadMode=V,y.AutoPrintRegExp=/\bprint\s*\(/,y.OutputScale=class ne{constructor(){const Ve=window.devicePixelRatio||1;this.sx=Ve,this.sy=Ve}get scaled(){return 1!==this.sx||1!==this.sy}};const we=/\x00/g,Ie=/[\x01-\x1F]/g;function Me(Oe,Ve,je=0){let U=je,ie=Oe.length-1;if(ie<0||!Ve(Oe[ie]))return Oe.length;if(Ve(Oe[U]))return U;for(;U<ie;){const Te=U+ie>>1;Ve(Oe[Te])?ie=Te:U=Te+1}return U}function J(Oe,Ve,je){if(Oe<2)return Oe;let U=Ve[Oe].div,ie=U.offsetTop+U.clientTop;ie>=je&&(U=Ve[Oe-1].div,ie=U.offsetTop+U.clientTop);for(let Te=Oe-2;Te>=0&&(U=Ve[Te].div,!(U.offsetTop+U.clientTop+U.clientHeight<=ie));--Te)Oe=Te;return Oe}function d(Oe){let Ve=Math.hypot(Oe.deltaX,Oe.deltaY);const je=Math.atan2(Oe.deltaY,Oe.deltaX);return-.25*Math.PI<je&&je<.75*Math.PI&&(Ve=-Ve),Ve}const fe=new Promise(function(Oe){window.requestAnimationFrame(Oe)});y.animationStarted=fe,ze=new WeakSet,I2=function(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))},y.ProgressBar=class _e{constructor(Ve){if(vt(this,ze),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(Ve+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(Ve){this._indeterminate=isNaN(Ve),this._percent=function be(Oe,Ve,je){return Math.min(Math.max(Oe,Ve),je)}(Ve,0,100),mt(this,ze,I2).call(this)}setWidth(Ve){if(!Ve)return;const U=Ve.parentNode.offsetWidth-Ve.offsetWidth;U>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${U}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(Q,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.StructTreeLayerBuilder=void 0;const $={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},P=/^H(\d+)$/;y.StructTreeLayerBuilder=class N{constructor({pdfPage:b}){this.pdfPage=b}render(b){return this._walk(b)}_setAttributes(b,_){void 0!==b.alt&&_.setAttribute("aria-label",b.alt),void 0!==b.id&&_.setAttribute("aria-owns",b.id),void 0!==b.lang&&_.setAttribute("lang",b.lang)}_walk(b){if(!b)return null;const _=document.createElement("span");if("role"in b){const{role:h}=b,S=h.match(P);S?(_.setAttribute("role","heading"),_.setAttribute("aria-level",S[1])):$[h]&&_.setAttribute("role",$[h])}if(this._setAttributes(b,_),b.children)if(1===b.children.length&&"id"in b.children[0])this._setAttributes(b.children[0],_);else for(const h of b.children)_.appendChild(this._walk(h));return _}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextLayerBuilder=void 0;var P=$(3);y.TextLayerBuilder=class O{constructor({textLayerDiv:_,eventBus:h,pageIndex:S,viewport:H,highlighter:M=null,enhanceTextSelection:x=!1}){this.textLayerDiv=_,this.eventBus=h,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=S+1,this.viewport=H,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=M,this.enhanceTextSelection=x,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const _=document.createElement("div");_.className="endOfContent",this.textLayerDiv.appendChild(_)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(_=0){var S;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null==(S=this.highlighter)||S.setTextMapping(this.textDivs,this.textContentItemsStr);const h=document.createDocumentFragment();this.textLayerRenderTask=(0,P.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:h,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:_,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var H;this.textLayerDiv.appendChild(h),this._finishRendering(),null==(H=this.highlighter)||H.enable()},function(H){})}cancel(){var _;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(_=this.highlighter)||_.disable()}setTextContentStream(_){this.cancel(),this.textContentStream=_}setTextContent(_){this.cancel(),this.textContent=_}_bindMouse(){const _=this.textLayerDiv;let h=null;_.addEventListener("mousedown",S=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(h&&(clearTimeout(h),h=null));const H=_.querySelector(".endOfContent");if(!H)return;let M=S.target!==_;if(M=M&&"none"!==window.getComputedStyle(H).getPropertyValue("-moz-user-select"),M){const x=_.getBoundingClientRect(),u=Math.max(0,(S.pageY-x.top)/x.height);H.style.top=(100*u).toFixed(2)+"%"}H.classList.add("active")}),_.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(h=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),h=null},300));const S=_.querySelector(".endOfContent");!S||(S.style.top="",S.classList.remove("active"))})}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.XfaLayerBuilder=void 0;var P=$(3);y.XfaLayerBuilder=class N{constructor({pageDiv:b,pdfPage:_,annotationStorage:h=null,linkService:S,xfaHtml:H=null}){this.pageDiv=b,this.pdfPage=_,this.annotationStorage=h,this.linkService=S,this.xfaHtml=H,this.div=null,this._cancelled=!1}render(b,_="display"){if("print"===_){const h={viewport:b.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:_},S=document.createElement("div");this.pageDiv.appendChild(S),h.div=S;const H=P.XfaLayer.render(h);return Promise.resolve(H)}return this.pdfPage.getXfa().then(h=>{if(this._cancelled||!h)return{textDivs:[]};const S={viewport:b.clone({dontFlip:!0}),div:this.div,xfaHtml:h,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:_};return this.div?P.XfaLayer.update(S):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),S.div=this.div,P.XfaLayer.render(S))}).catch(h=>{console.error(h)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFViewer=y.PDFSinglePageViewer=void 0;var P=$(6),N=$(11);y.PDFViewer=class O extends N.BaseViewer{},y.PDFSinglePageViewer=class b extends N.BaseViewer{_resetView(){super._resetView(),this._scrollMode=P.ScrollMode.PAGE,this._spreadMode=P.SpreadMode.NONE}set scrollMode(h){}_updateScrollMode(){}set spreadMode(h){}_updateSpreadMode(){}}},(Q,y,$)=>{var ne,re,ue,ES,we,Ie,de,Me,Pe,Fe,$e,J,R2,E,k2,C,Su,F,xp,W,O2,be,AS,Ae,F2,ke,L2,tt,N2;Object.defineProperty(y,"__esModule",{value:!0}),y.PagesCountLimit=y.PDFPageViewBuffer=y.BaseViewer=void 0;var P=$(3),N=$(6),O=$(2),b=$(4),_=$(12),h=$(14),S=$(5),H=$(7),M=$(15),x=$(8),u=$(9);const R="enablePermissions",I={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};y.PagesCountLimit=I;class V{constructor(U){vt(this,ue),vt(this,ne,new Set),vt(this,re,0),dn(this,re,U)}push(U){const ie=ft(this,ne);ie.has(U)&&ie.delete(U),ie.add(U),ie.size>ft(this,re)&&mt(this,ue,ES).call(this)}resize(U,ie=null){dn(this,re,U);const Te=ft(this,ne);if(ie){const Ke=Te.size;let qe=1;for(const Xe of Te)if(ie.has(Xe.id)&&(Te.delete(Xe),Te.add(Xe)),++qe>Ke)break}for(;Te.size>ft(this,re);)mt(this,ue,ES).call(this)}has(U){return ft(this,ne).has(U)}[Symbol.iterator](){return ft(this,ne).keys()}}ne=new WeakMap,re=new WeakMap,ue=new WeakSet,ES=function(){const U=ft(this,ne).keys().next().value;null==U||U.destroy(),ft(this,ne).delete(U)},y.PDFPageViewBuffer=V;const Ve=class{constructor(U){var Te,Ke,qe,Xe;if(vt(this,J),vt(this,E),vt(this,C),vt(this,F),vt(this,W),vt(this,be),vt(this,Ae),vt(this,ke),vt(this,tt),vt(this,we,null),vt(this,Ie,P.AnnotationMode.ENABLE_FORMS),vt(this,de,null),vt(this,Me,!1),vt(this,Pe,0),vt(this,Fe,null),vt(this,$e,null),this.constructor===Ve)throw new Error("Cannot initialize BaseViewer.");const ie="2.14.305";if(P.version!==ie)throw new Error(`The API version "${P.version}" does not match the Viewer version "${ie}".`);if(this.container=U.container,this.viewer=U.viewer||U.container.firstElementChild,"DIV"!==(null==(Te=this.container)?void 0:Te.tagName.toUpperCase())||"DIV"!==(null==(Ke=this.viewer)?void 0:Ke.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=U.eventBus,this.linkService=U.linkService||new S.SimpleLinkService,this.downloadManager=U.downloadManager||null,this.findController=U.findController||null,this._scriptingManager=U.scriptingManager||null,this.removePageBorders=U.removePageBorders||!1,this.textLayerMode=null!=(qe=U.textLayerMode)?qe:N.TextLayerMode.ENABLE,dn(this,Ie,null!=(Xe=U.annotationMode)?Xe:P.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=U.imageResourcesPath||"",this.enablePrintAutoRotate=U.enablePrintAutoRotate||!1,this.renderer=U.renderer||N.RendererType.CANVAS,this.useOnlyCssZoom=U.useOnlyCssZoom||!1,this.maxCanvasPixels=U.maxCanvasPixels,this.l10n=U.l10n||b.NullL10n,dn(this,Me,U.enablePermissions||!1),this.pageColors=U.pageColors||null,U.pageColors&&(!CSS.supports("color",U.pageColors.background)||!CSS.supports("color",U.pageColors.foreground))&&((U.pageColors.background||U.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!U.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new h.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=U.renderingQueue,this._doc=document.documentElement,this.scroll=(0,N.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=N.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(U){return this._pages[U]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(U){return null==U?void 0:U.pdfPage})}get renderForms(){return ft(this,Ie)===P.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(U){if(!Number.isInteger(U))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(U,!0)||console.error(`currentPageNumber: "${U}" is not a valid page.`)}_setCurrentPageNumber(U,ie=!1){var Ke,qe;if(this._currentPageNumber===U)return ie&&mt(this,be,AS).call(this),!0;if(!(0<U&&U<=this.pagesCount))return!1;const Te=this._currentPageNumber;return this._currentPageNumber=U,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:U,pageLabel:null!=(qe=null==(Ke=this._pageLabels)?void 0:Ke[U-1])?qe:null,previous:Te}),ie&&mt(this,be,AS).call(this),!0}get currentPageLabel(){var U,ie;return null!=(ie=null==(U=this._pageLabels)?void 0:U[this._currentPageNumber-1])?ie:null}set currentPageLabel(U){if(!this.pdfDocument)return;let ie=0|U;if(this._pageLabels){const Te=this._pageLabels.indexOf(U);Te>=0&&(ie=Te+1)}this._setCurrentPageNumber(ie,!0)||console.error(`currentPageLabel: "${U}" is not a valid page.`)}get currentScale(){return this._currentScale!==N.UNKNOWN_SCALE?this._currentScale:N.DEFAULT_SCALE}set currentScale(U){if(isNaN(U))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(U,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(U){!this.pdfDocument||this._setScale(U,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(U){if(!(0,N.isValidRotation)(U))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((U%=360)<0&&(U+=360),this._pagesRotation===U))return;this._pagesRotation=U;const ie=this._currentPageNumber,Te={rotation:U};for(const Ke of this._pages)Ke.update(Te);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:U,pageNumber:ie}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(U){var ie=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=U,!U)return;const Te=U.isPureXfa,Ke=U.numPages,qe=U.getPage(1),Xe=U.getOptionalContentConfig(),it=ft(this,Me)?U.getPermissions():Promise.resolve();if(Ke>I.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const T=this._scrollMode=N.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:T})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:Ke})},()=>{}),this._onBeforeDraw=T=>{const he=this._pages[T.pageNumber-1];!he||ft(this,we).push(he)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=T=>{T.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:T.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,ft(this,$e)&&(document.removeEventListener("visibilitychange",ft(this,$e)),dn(this,$e,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([qe,it]).then(([T,he])=>{if(U!==this.pdfDocument)return;this._firstPageCapability.resolve(T),this._optionalContentConfigPromise=Xe,mt(this,J,R2).call(this,he);const Re=this._scrollMode===N.ScrollMode.PAGE?null:this.viewer,se=this.currentScale,K=T.getViewport({scale:se*P.PixelsPerInch.PDF_TO_CSS_UNITS}),L=this.textLayerMode===N.TextLayerMode.DISABLE||Te?null:this,B=ft(this,Ie)!==P.AnnotationMode.DISABLE?this:null,te=Te?this:null;for(let me=1;me<=Ke;++me){const Se=new _.PDFPageView({container:Re,eventBus:this.eventBus,id:me,scale:se,defaultViewport:K.clone(),optionalContentConfigPromise:Xe,renderingQueue:this.renderingQueue,textLayerFactory:L,textLayerMode:this.textLayerMode,annotationLayerFactory:B,annotationMode:ft(this,Ie),xfaLayerFactory:te,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Se)}const Ce=this._pages[0];Ce&&(Ce.setPdfPage(T),this.linkService.cachePageRef(1,T.ref)),this._scrollMode===N.ScrollMode.PAGE?mt(this,C,Su).call(this):this._spreadMode!==N.SpreadMode.NONE&&this._updateSpreadMode(),mt(this,E,k2).call(this).then(p(function*(){if(ie.findController&&ie.findController.setDocument(U),ie._scriptingManager&&ie._scriptingManager.setDocument(U),U.loadingParams.disableAutoFetch||Ke>I.FORCE_LAZY_PAGE_INIT)return void ie._pagesCapability.resolve();let me=Ke-1;if(me<=0)ie._pagesCapability.resolve();else for(let Se=2;Se<=Ke;++Se){const Ye=U.getPage(Se).then(et=>{const bt=ie._pages[Se-1];bt.pdfPage||bt.setPdfPage(et),ie.linkService.cachePageRef(Se,et.ref),0==--me&&ie._pagesCapability.resolve()},et=>{console.error(`Unable to get page ${Se} to initialize viewer`,et),0==--me&&ie._pagesCapability.resolve()});Se%I.PAUSE_EAGER_PAGE_INIT==0&&(yield Ye)}})),this.eventBus.dispatch("pagesinit",{source:this}),U.getMetadata().then(({info:me})=>{U===this.pdfDocument&&me.Language&&(this.viewer.lang=me.Language)}),this.defaultRenderingQueue&&this.update()}).catch(T=>{console.error("Unable to initialize viewer",T),this._pagesCapability.reject(T)})}setPageLabels(U){var ie,Te;if(this.pdfDocument){U?Array.isArray(U)&&this.pdfDocument.numPages===U.length?this._pageLabels=U:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let Ke=0,qe=this._pages.length;Ke<qe;Ke++)this._pages[Ke].setPageLabel(null!=(Te=null==(ie=this._pageLabels)?void 0:ie[Ke])?Te:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=N.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,dn(this,we,new V(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,P.createPromiseCapability)(),this._onePageRenderedCapability=(0,P.createPromiseCapability)(),this._pagesCapability=(0,P.createPromiseCapability)(),this._scrollMode=N.ScrollMode.VERTICAL,this._previousScrollMode=N.ScrollMode.UNKNOWN,this._spreadMode=N.SpreadMode.NONE,dn(this,Fe,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),ft(this,$e)&&(document.removeEventListener("visibilitychange",ft(this,$e)),dn(this,$e,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(R),null!==ft(this,de)&&(dn(this,Ie,ft(this,de)),dn(this,de,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(U,ie,Te=!1,Ke=!1){if(this._currentScaleValue=ie.toString(),mt(this,W,O2).call(this,U))return void(Ke&&this.eventBus.dispatch("scalechanging",{source:this,scale:U,presetValue:ie}));this._doc.style.setProperty("--zoom-factor",U);const qe={scale:U};for(const Xe of this._pages)Xe.update(qe);if(this._currentScale=U,!Te){let it,Xe=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(Xe=this._location.pageNumber,it=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:Xe,destArray:it,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:U,presetValue:Ke?ie:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==N.SpreadMode.NONE&&this._scrollMode!==N.ScrollMode.HORIZONTAL?2:1}_setScale(U,ie=!1){let Te=parseFloat(U);if(Te>0)this._setScaleUpdatePages(Te,U,ie,!1);else{const Ke=this._pages[this._currentPageNumber-1];if(!Ke)return;let qe=N.SCROLLBAR_PADDING,Xe=N.VERTICAL_PADDING;this.isInPresentationMode?qe=Xe=4:this.removePageBorders?qe=Xe=0:this._scrollMode===N.ScrollMode.HORIZONTAL&&([qe,Xe]=[Xe,qe]);const it=(this.container.clientWidth-qe)/Ke.width*Ke.scale/this._pageWidthScaleFactor,T=(this.container.clientHeight-Xe)/Ke.height*Ke.scale;switch(U){case"page-actual":Te=1;break;case"page-width":Te=it;break;case"page-height":Te=T;break;case"page-fit":Te=Math.min(it,T);break;case"auto":const he=(0,N.isPortraitOrientation)(Ke)?it:Math.min(T,it);Te=Math.min(N.MAX_AUTO_SCALE,he);break;default:return void console.error(`_setScale: "${U}" is an unknown zoom value.`)}this._setScaleUpdatePages(Te,U,ie,!0)}}pageLabelToPageNumber(U){if(!this._pageLabels)return null;const ie=this._pageLabels.indexOf(U);return ie<0?null:ie+1}scrollPageIntoView({pageNumber:U,destArray:ie=null,allowNegativeOffset:Te=!1,ignoreDestinationZoom:Ke=!1}){if(!this.pdfDocument)return;const qe=Number.isInteger(U)&&this._pages[U-1];if(!qe)return void console.error(`scrollPageIntoView: "${U}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!ie)return void this._setCurrentPageNumber(U,!0);let Re,se,Xe=0,it=0,T=0,he=0;const K=qe.rotation%180!=0,L=(K?qe.height:qe.width)/qe.scale/P.PixelsPerInch.PDF_TO_CSS_UNITS,B=(K?qe.width:qe.height)/qe.scale/P.PixelsPerInch.PDF_TO_CSS_UNITS;let te=0;switch(ie[1].name){case"XYZ":Xe=ie[2],it=ie[3],te=ie[4],Xe=null!==Xe?Xe:0,it=null!==it?it:B;break;case"Fit":case"FitB":te="page-fit";break;case"FitH":case"FitBH":it=ie[2],te="page-width",null===it&&this._location?(Xe=this._location.left,it=this._location.top):("number"!=typeof it||it<0)&&(it=B);break;case"FitV":case"FitBV":Xe=ie[2],T=L,he=B,te="page-height";break;case"FitR":Xe=ie[2],it=ie[3],T=ie[4]-Xe,he=ie[5]-it,Re=(this.container.clientWidth-(this.removePageBorders?0:N.SCROLLBAR_PADDING))/T/P.PixelsPerInch.PDF_TO_CSS_UNITS,se=(this.container.clientHeight-(this.removePageBorders?0:N.VERTICAL_PADDING))/he/P.PixelsPerInch.PDF_TO_CSS_UNITS,te=Math.min(Math.abs(Re),Math.abs(se));break;default:return void console.error(`scrollPageIntoView: "${ie[1].name}" is not a valid destination type.`)}if(Ke||(te&&te!==this._currentScale?this.currentScaleValue=te:this._currentScale===N.UNKNOWN_SCALE&&(this.currentScaleValue=N.DEFAULT_SCALE_VALUE)),"page-fit"===te&&!ie[4])return void mt(this,F,xp).call(this,qe);const Ce=[qe.viewport.convertToViewportPoint(Xe,it),qe.viewport.convertToViewportPoint(Xe+T,it+he)];let me=Math.min(Ce[0][0],Ce[1][0]),Se=Math.min(Ce[0][1],Ce[1][1]);Te||(me=Math.max(me,0),Se=Math.max(Se,0)),mt(this,F,xp).call(this,qe,{left:me,top:Se})}_updateLocation(U){const ie=this._currentScale,Te=this._currentScaleValue,Ke=parseFloat(Te)===ie?Math.round(1e4*ie)/100:Te,qe=U.id,it=this.container,T=this._pages[qe-1].getPagePoint(it.scrollLeft-U.x,it.scrollTop-U.y),he=Math.round(T[0]),Re=Math.round(T[1]);let se=`#page=${qe}`;this.isInPresentationMode||(se+=`&zoom=${Ke},${he},${Re}`),this._location={pageNumber:qe,scale:Ke,top:Re,left:he,rotation:this._pagesRotation,pdfOpenParams:se}}update(){const U=this._getVisiblePages(),ie=U.views,Te=ie.length;if(0===Te)return;const Ke=Math.max(10,2*Te+1);ft(this,we).resize(Ke,U.ids),this.renderingQueue.renderHighestPriority(U);const qe=this._spreadMode===N.SpreadMode.NONE&&(this._scrollMode===N.ScrollMode.PAGE||this._scrollMode===N.ScrollMode.VERTICAL),Xe=this._currentPageNumber;let it=!1;for(const T of ie){if(T.percent<100)break;if(T.id===Xe&&qe){it=!0;break}}this._setCurrentPageNumber(it?Xe:ie[0].id),this._updateLocation(U.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(U){return this.container.contains(U)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===N.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===N.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const U=this._scrollMode===N.ScrollMode.PAGE?ft(this,Fe).pages:this._pages,ie=this._scrollMode===N.ScrollMode.HORIZONTAL;return(0,N.getVisibleElements)({scrollEl:this.container,views:U,sortByVisibility:!0,horizontal:ie,rtl:ie&&this._isContainerRtl})}isPageVisible(U){return!!this.pdfDocument&&(Number.isInteger(U)&&U>0&&U<=this.pagesCount?this._getVisiblePages().ids.has(U):(console.error(`isPageVisible: "${U}" is not a valid page.`),!1))}isPageCached(U){if(!this.pdfDocument)return!1;if(!(Number.isInteger(U)&&U>0&&U<=this.pagesCount))return console.error(`isPageCached: "${U}" is not a valid page.`),!1;const ie=this._pages[U-1];return ft(this,we).has(ie)}cleanup(){for(const U of this._pages)U.renderingState!==N.RenderingStates.FINISHED&&U.reset()}_cancelRendering(){for(const U of this._pages)U.cancelRendering()}forceRendering(U){const ie=U||this._getVisiblePages(),Te=mt(this,ke,L2).call(this,ie),qe=this.renderingQueue.getHighestPriority(ie,this._pages,Te,this._spreadMode!==N.SpreadMode.NONE&&this._scrollMode!==N.ScrollMode.HORIZONTAL);return mt(this,tt,N2).call(this,ie.ids),!!qe&&(mt(this,Ae,F2).call(this,qe).then(()=>{this.renderingQueue.renderView(qe)}),!0)}createTextLayerBuilder(U,ie,Te,Ke=!1,qe,Xe){return new x.TextLayerBuilder({textLayerDiv:U,eventBus:qe,pageIndex:ie,viewport:Te,enhanceTextSelection:!this.isInPresentationMode&&Ke,highlighter:Xe})}createTextHighlighter(U,ie){return new M.TextHighlighter({eventBus:ie,pageIndex:U,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(U,ie,Te=null,Ke="",qe=!0,Xe=b.NullL10n,it=null,T=null,he=null,Re=null,se=null){var K,L,B,te;return new O.AnnotationLayerBuilder({pageDiv:U,pdfPage:ie,annotationStorage:Te||(null==(K=this.pdfDocument)?void 0:K.annotationStorage),imageResourcesPath:Ke,renderForms:qe,linkService:this.linkService,downloadManager:this.downloadManager,l10n:Xe,enableScripting:null!=it?it:this.enableScripting,hasJSActionsPromise:T||(null==(L=this.pdfDocument)?void 0:L.hasJSActions()),fieldObjectsPromise:Re||(null==(B=this.pdfDocument)?void 0:B.getFieldObjects()),mouseState:he||(null==(te=this._scriptingManager)?void 0:te.mouseState),annotationCanvasMap:se})}createXfaLayerBuilder(U,ie,Te=null){var Ke;return new u.XfaLayerBuilder({pageDiv:U,pdfPage:ie,annotationStorage:Te||(null==(Ke=this.pdfDocument)?void 0:Ke.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder(U){return new H.StructTreeLayerBuilder({pdfPage:U})}get hasEqualPageSizes(){const U=this._pages[0];for(let ie=1,Te=this._pages.length;ie<Te;++ie){const Ke=this._pages[ie];if(Ke.width!==U.width||Ke.height!==U.height)return!1}return!0}getPagesOverview(){return this._pages.map(U=>{const ie=U.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,N.isPortraitOrientation)(ie)?{width:ie.width,height:ie.height,rotation:ie.rotation}:{width:ie.height,height:ie.width,rotation:(ie.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(U){if(!(U instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${U}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=U;const ie={optionalContentConfigPromise:U};for(const Te of this._pages)Te.update(ie);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:U})}get scrollMode(){return this._scrollMode}set scrollMode(U){if(this._scrollMode!==U){if(!(0,N.isValidScrollMode)(U))throw new Error(`Invalid scroll mode: ${U}`);this.pagesCount>I.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=U,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:U}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(U=null){const ie=this._scrollMode,Te=this.viewer;Te.classList.toggle("scrollHorizontal",ie===N.ScrollMode.HORIZONTAL),Te.classList.toggle("scrollWrapped",ie===N.ScrollMode.WRAPPED),this.pdfDocument&&U&&(ie===N.ScrollMode.PAGE?mt(this,C,Su).call(this):this._previousScrollMode===N.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(U,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(U){if(this._spreadMode!==U){if(!(0,N.isValidSpreadMode)(U))throw new Error(`Invalid spread mode: ${U}`);this._spreadMode=U,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:U}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(U=null){if(!this.pdfDocument)return;const ie=this.viewer,Te=this._pages;if(this._scrollMode===N.ScrollMode.PAGE)mt(this,C,Su).call(this);else if(ie.textContent="",this._spreadMode===N.SpreadMode.NONE)for(const Ke of this._pages)ie.appendChild(Ke.div);else{const Ke=this._spreadMode-1;let qe=null;for(let Xe=0,it=Te.length;Xe<it;++Xe)null===qe?(qe=document.createElement("div"),qe.className="spread",ie.appendChild(qe)):Xe%2===Ke&&(qe=qe.cloneNode(!1),ie.appendChild(qe)),qe.appendChild(Te[Xe].div)}!U||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(U,!0),this.update())}_getPageAdvance(U,ie=!1){switch(this._scrollMode){case N.ScrollMode.WRAPPED:{const{views:Te}=this._getVisiblePages(),Ke=new Map;for(const{id:qe,y:Xe,percent:it,widthPercent:T}of Te){if(0===it||T<100)continue;let he=Ke.get(Xe);he||Ke.set(Xe,he||(he=[])),he.push(qe)}for(const qe of Ke.values()){const Xe=qe.indexOf(U);if(-1===Xe)continue;const it=qe.length;if(1===it)break;if(ie)for(let T=Xe-1,he=0;T>=he;T--){const se=qe[T+1]-1;if(qe[T]<se)return U-se}else for(let T=Xe+1,he=it;T<he;T++){const se=qe[T-1]+1;if(qe[T]>se)return se-U}if(ie){const T=qe[0];if(T<U)return U-T+1}else{const T=qe[it-1];if(T>U)return T-U+1}break}break}case N.ScrollMode.HORIZONTAL:break;case N.ScrollMode.PAGE:case N.ScrollMode.VERTICAL:{if(this._spreadMode===N.SpreadMode.NONE)break;const Te=this._spreadMode-1;if(ie&&U%2!==Te)break;if(!ie&&U%2===Te)break;const{views:Ke}=this._getVisiblePages(),qe=ie?U-1:U+1;for(const{id:Xe,percent:it,widthPercent:T}of Ke)if(Xe===qe){if(it>0&&100===T)return 2;break}break}}return 1}nextPage(){const U=this._currentPageNumber,ie=this.pagesCount;if(U>=ie)return!1;const Te=this._getPageAdvance(U,!1)||1;return this.currentPageNumber=Math.min(U+Te,ie),!0}previousPage(){const U=this._currentPageNumber;if(U<=1)return!1;const ie=this._getPageAdvance(U,!0)||1;return this.currentPageNumber=Math.max(U-ie,1),!0}increaseScale(U=1){let ie=this._currentScale;do{ie=(ie*N.DEFAULT_SCALE_DELTA).toFixed(2),ie=Math.ceil(10*ie)/10,ie=Math.min(N.MAX_SCALE,ie)}while(--U>0&&ie<N.MAX_SCALE);this.currentScaleValue=ie}decreaseScale(U=1){let ie=this._currentScale;do{ie=(ie/N.DEFAULT_SCALE_DELTA).toFixed(2),ie=Math.floor(10*ie)/10,ie=Math.max(N.MIN_SCALE,ie)}while(--U>0&&ie>N.MIN_SCALE);this.currentScaleValue=ie}updateContainerHeightCss(){const U=this.container.clientHeight;U!==ft(this,Pe)&&(dn(this,Pe,U),this._doc.style.setProperty("--viewer-container-height",`${U}px`))}};let Y=Ve;we=new WeakMap,Ie=new WeakMap,de=new WeakMap,Me=new WeakMap,Pe=new WeakMap,Fe=new WeakMap,$e=new WeakMap,J=new WeakSet,R2=function(U){!U||(U.includes(P.PermissionFlag.COPY)||this.viewer.classList.add(R),!U.includes(P.PermissionFlag.MODIFY_ANNOTATIONS)&&!U.includes(P.PermissionFlag.FILL_INTERACTIVE_FORMS)&&ft(this,Ie)===P.AnnotationMode.ENABLE_FORMS&&(dn(this,de,ft(this,Ie)),dn(this,Ie,P.AnnotationMode.ENABLE)))},E=new WeakSet,k2=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const U=new Promise(ie=>{dn(this,$e,()=>{"hidden"===document.visibilityState&&(ie(),document.removeEventListener("visibilitychange",ft(this,$e)),dn(this,$e,null))}),document.addEventListener("visibilitychange",ft(this,$e))});return Promise.race([this._onePageRenderedCapability.promise,U])},C=new WeakSet,Su=function(){if(this._scrollMode!==N.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const U=this._currentPageNumber,ie=ft(this,Fe),Te=this.viewer;if(Te.textContent="",ie.pages.length=0,this._spreadMode!==N.SpreadMode.NONE||this.isInPresentationMode){const Ke=new Set,qe=this._spreadMode-1;-1===qe?Ke.add(U-1):U%2!==qe?(Ke.add(U-1),Ke.add(U)):(Ke.add(U-2),Ke.add(U-1));const Xe=document.createElement("div");if(Xe.className="spread",this.isInPresentationMode){const it=document.createElement("div");it.className="dummyPage",Xe.appendChild(it)}for(const it of Ke){const T=this._pages[it];!T||(Xe.appendChild(T.div),ie.pages.push(T))}Te.appendChild(Xe)}else{const Ke=this._pages[U-1];Te.appendChild(Ke.div),ie.pages.push(Ke)}ie.scrollDown=U>=ie.previousPageNumber,ie.previousPageNumber=U},F=new WeakSet,xp=function(U,ie=null){const{div:Te,id:Ke}=U;if(this._scrollMode===N.ScrollMode.PAGE&&(this._setCurrentPageNumber(Ke),mt(this,C,Su).call(this),this.update()),!ie&&!this.isInPresentationMode){const qe=Te.offsetLeft+Te.clientLeft,Xe=qe+Te.clientWidth,{scrollLeft:it,clientWidth:T}=this.container;(this._scrollMode===N.ScrollMode.HORIZONTAL||qe<it||Xe>it+T)&&(ie={left:0,top:0})}(0,N.scrollIntoView)(Te,ie)},W=new WeakSet,O2=function(U){return U===this._currentScale||Math.abs(U-this._currentScale)<1e-15},be=new WeakSet,AS=function(){const U=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),mt(this,F,xp).call(this,U)},Ae=new WeakSet,F2=function(U){var ie=this;return p(function*(){var Te,Ke;if(U.pdfPage)return U.pdfPage;try{const qe=yield ie.pdfDocument.getPage(U.id);return U.pdfPage||U.setPdfPage(qe),(null==(Ke=(Te=ie.linkService)._cachedPageNumber)?void 0:Ke.call(Te,qe.ref))||ie.linkService.cachePageRef(U.id,qe.ref),qe}catch(qe){return console.error("Unable to get page for page view",qe),null}})()},ke=new WeakSet,L2=function(U){var ie,Te;if(1===(null==(ie=U.first)?void 0:ie.id))return!0;if((null==(Te=U.last)?void 0:Te.id)===this.pagesCount)return!1;switch(this._scrollMode){case N.ScrollMode.PAGE:return ft(this,Fe).scrollDown;case N.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},tt=new WeakSet,N2=function(U){for(const ie of U){const Te=this._pages[ie-1];null==Te||Te.toggleLoadingIconSpinner(!0)}for(const ie of ft(this,we))U.has(ie.id)||ie.toggleLoadingIconSpinner(!1)},y.BaseViewer=Y},(Q,y,$)=>{var S;Object.defineProperty(y,"__esModule",{value:!0}),y.PDFPageView=void 0;var P=$(3),N=$(6),O=$(13),b=$(4);const _=O.compatibilityParams.maxCanvasPixels||16777216;S=new WeakMap,y.PDFPageView=class h{constructor(M){var R,I,V,Y;vt(this,S,P.AnnotationMode.ENABLE_FORMS);const x=M.container,u=M.defaultViewport;this.id=M.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=M.scale||N.DEFAULT_SCALE,this.viewport=u,this.pdfPageRotate=u.rotation,this._optionalContentConfigPromise=M.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!=(R=M.textLayerMode)?R:N.TextLayerMode.ENABLE,dn(this,S,null!=(I=M.annotationMode)?I:P.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=M.imageResourcesPath||"",this.useOnlyCssZoom=M.useOnlyCssZoom||!1,this.maxCanvasPixels=M.maxCanvasPixels||_,this.pageColors=M.pageColors||null,this.eventBus=M.eventBus,this.renderingQueue=M.renderingQueue,this.textLayerFactory=M.textLayerFactory,this.annotationLayerFactory=M.annotationLayerFactory,this.xfaLayerFactory=M.xfaLayerFactory,this.textHighlighter=null==(V=M.textHighlighterFactory)?void 0:V.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=M.structTreeLayerFactory,this.renderer=M.renderer||N.RendererType.CANVAS,this.l10n=M.l10n||b.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=N.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null==(Y=this.renderingQueue)?void 0:Y.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const g=document.createElement("div");g.className="page",g.style.width=Math.floor(this.viewport.width)+"px",g.style.height=Math.floor(this.viewport.height)+"px",g.setAttribute("data-page-number",this.id),g.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(ne=>{g.setAttribute("aria-label",ne)}),this.div=g,null==x||x.appendChild(g)}setPdfPage(M){this.pdfPage=M,this.pdfPageRotate=M.rotate,this.viewport=M.getViewport({scale:this.scale*P.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var M=this;return p(function*(){let x=null;try{yield M.annotationLayer.render(M.viewport,"display")}catch(u){x=u}finally{M.eventBus.dispatch("annotationlayerrendered",{source:M,pageNumber:M.id,error:x})}})()}_renderXfaLayer(){var M=this;return p(function*(){let x=null;try{const u=yield M.xfaLayer.render(M.viewport,"display");M.textHighlighter&&M._buildXfaTextContentItems(u.textDivs)}catch(u){x=u}finally{M.eventBus.dispatch("xfalayerrendered",{source:M,pageNumber:M.id,error:x})}})()}_buildXfaTextContentItems(M){var x=this;return p(function*(){const u=yield x.pdfPage.getTextContent(),g=[];for(const R of u.items)g.push(R.str);x.textHighlighter.setTextMapping(M,g),x.textHighlighter.enable()})()}_resetZoomLayer(M=!1){if(!this.zoomLayer)return;const x=this.zoomLayer.firstChild;this.paintedViewportMap.delete(x),x.width=0,x.height=0,M&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:M=!1,keepAnnotationLayer:x=!1,keepXfaLayer:u=!1}={}){var ne,re;this.cancelRendering({keepAnnotationLayer:x,keepXfaLayer:u}),this.renderingState=N.RenderingStates.INITIAL;const g=this.div;g.style.width=Math.floor(this.viewport.width)+"px",g.style.height=Math.floor(this.viewport.height)+"px";const R=g.childNodes,I=M&&this.zoomLayer||null,V=x&&(null==(ne=this.annotationLayer)?void 0:ne.div)||null,Y=u&&(null==(re=this.xfaLayer)?void 0:re.div)||null;for(let ue=R.length-1;ue>=0;ue--){const ve=R[ue];switch(ve){case I:case V:case Y:continue}ve.remove()}g.removeAttribute("data-loaded"),V&&this.annotationLayer.hide(),Y&&this.xfaLayer.hide(),I||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(ue=>{var ve;null==(ve=this.loadingIconDiv)||ve.setAttribute("aria-label",ue)}),g.appendChild(this.loadingIconDiv)}update({scale:M=0,rotation:x=null,optionalContentConfigPromise:u=null}){if(this.scale=M||this.scale,"number"==typeof x&&(this.rotation=x),u instanceof Promise&&(this._optionalContentConfigPromise=u),this.viewport=this.viewport.clone({scale:this.scale*P.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:I}=document.documentElement;I.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let R=!1;if(this.canvas&&this.maxCanvasPixels>0){const I=this.outputScale;(Math.floor(this.viewport.width)*I.sx|0)*(Math.floor(this.viewport.height)*I.sy|0)>this.maxCanvasPixels&&(R=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&R)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:M=!1,keepXfaLayer:x=!1}={}){var u;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!M||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!x||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,null==(u=this.textHighlighter)||u.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:M,redrawAnnotationLayer:x=!1,redrawXfaLayer:u=!1}){const g=this.viewport.width,R=this.viewport.height,I=this.div;M.style.width=M.parentNode.style.width=I.style.width=Math.floor(g)+"px",M.style.height=M.parentNode.style.height=I.style.height=Math.floor(R)+"px";const V=this.viewport.rotation-this.paintedViewportMap.get(M).rotation,Y=Math.abs(V);let ne=1,re=1;if((90===Y||270===Y)&&(ne=R/g,re=g/R),M.style.transform=`rotate(${V}deg) scale(${ne}, ${re})`,this.textLayer){const ue=this.textLayer.viewport,we=Math.abs(this.viewport.rotation-ue.rotation);let Ie=g/ue.width;(90===we||270===we)&&(Ie=g/ue.height);const de=this.textLayer.textLayerDiv;let Me,Pe;switch(we){case 0:Me=Pe=0;break;case 90:Me=0,Pe="-"+de.style.height;break;case 180:Me="-"+de.style.width,Pe="-"+de.style.height;break;case 270:Me="-"+de.style.width,Pe=0;break;default:console.error("Bad rotation value.")}de.style.transform=`rotate(${we}deg) scale(${Ie}) translate(${Me}, ${Pe})`,de.style.transformOrigin="0% 0%"}x&&this.annotationLayer&&this._renderAnnotationLayer(),u&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(M,x){return this.viewport.convertToPdfPoint(M,x)}toggleLoadingIconSpinner(M=!1){var x;null==(x=this.loadingIconDiv)||x.classList.toggle("notVisible",!M)}draw(){var re,ue,ve,M=this;this.renderingState!==N.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:x,pdfPage:u}=this;if(!u)return this.renderingState=N.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=N.RenderingStates.RUNNING;const g=document.createElement("div");g.style.width=x.style.width,g.style.height=x.style.height,g.classList.add("canvasWrapper"),(null==(re=this.annotationLayer)?void 0:re.div)?x.insertBefore(g,this.annotationLayer.div):x.appendChild(g);let R=null;if(this.textLayerMode!==N.TextLayerMode.DISABLE&&this.textLayerFactory){const we=document.createElement("div");we.className="textLayer",we.style.width=g.style.width,we.style.height=g.style.height,(null==(ue=this.annotationLayer)?void 0:ue.div)?x.insertBefore(we,this.annotationLayer.div):x.appendChild(we),R=this.textLayerFactory.createTextLayerBuilder(we,this.id-1,this.viewport,this.textLayerMode===N.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=R,ft(this,S)!==P.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(x,u,null,this.imageResourcesPath,ft(this,S)===P.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),(null==(ve=this.xfaLayer)?void 0:ve.div)&&x.appendChild(this.xfaLayer.div);let I=null;this.renderingQueue&&(I=we=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=N.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=N.RenderingStates.RUNNING,we()});we()});const V=function(){var we=p(function*(Ie=null){if(Y===M.paintTask&&(M.paintTask=null),Ie instanceof P.RenderingCancelledException)M._renderError=null;else if(M._renderError=Ie,M.renderingState=N.RenderingStates.FINISHED,M.loadingIconDiv&&(M.loadingIconDiv.remove(),delete M.loadingIconDiv),M._resetZoomLayer(!0),M.eventBus.dispatch("pagerendered",{source:M,pageNumber:M.id,cssTransform:!1,timestamp:performance.now(),error:M._renderError}),Ie)throw Ie});return function(){return we.apply(this,arguments)}}(),Y=this.renderer===N.RendererType.SVG?this.paintOnSvg(g):this.paintOnCanvas(g);Y.onRenderContinue=I,this.paintTask=Y;const ne=Y.promise.then(()=>V(null).then(()=>{if(R){const we=u.streamTextContent({includeMarkedContent:!0});R.setTextContentStream(we),R.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(we){return V(we)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(x,u,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=we=>{we.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(Ie=>{if(!Ie||!this.canvas)return;const de=this.structTreeLayer.render(Ie);de.classList.add("structTree"),this.canvas.appendChild(de)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(u)),x.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ne}paintOnCanvas(M){const x=(0,P.createPromiseCapability)(),u={promise:x.promise,onRenderContinue(de){de()},cancel(){Ie.cancel()}},g=this.viewport,R=document.createElement("canvas");R.hidden=!0;let I=!0;const V=function(){I&&(R.hidden=!1,I=!1)};M.appendChild(R),this.canvas=R;const Y=R.getContext("2d",{alpha:!1}),ne=this.outputScale=new N.OutputScale;if(this.useOnlyCssZoom){const de=g.clone({scale:P.PixelsPerInch.PDF_TO_CSS_UNITS});ne.sx*=de.width/g.width,ne.sy*=de.height/g.height}if(this.maxCanvasPixels>0){const Me=Math.sqrt(this.maxCanvasPixels/(g.width*g.height));ne.sx>Me||ne.sy>Me?(ne.sx=Me,ne.sy=Me,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const re=(0,N.approximateFraction)(ne.sx),ue=(0,N.approximateFraction)(ne.sy);R.width=(0,N.roundToDivide)(g.width*ne.sx,re[0]),R.height=(0,N.roundToDivide)(g.height*ne.sy,ue[0]),R.style.width=(0,N.roundToDivide)(g.width,re[1])+"px",R.style.height=(0,N.roundToDivide)(g.height,ue[1])+"px",this.paintedViewportMap.set(R,g);const we={canvasContext:Y,transform:ne.scaled?[ne.sx,0,0,ne.sy,0,0]:null,viewport:this.viewport,annotationMode:ft(this,S),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},Ie=this.pdfPage.render(we);return Ie.onContinue=function(de){V(),u.onRenderContinue?u.onRenderContinue(de):de()},Ie.promise.then(function(){V(),x.resolve()},function(de){V(),x.reject(de)}),u}paintOnSvg(M){let x=!1;const u=()=>{if(x)throw new P.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},g=this.pdfPage,R=this.viewport.clone({scale:P.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:g.getOperatorList({annotationMode:ft(this,S)}).then(V=>(u(),new P.SVGGraphics(g.commonObjs,g.objs).getSVG(V,R).then(ne=>{u(),this.svg=ne,this.paintedViewportMap.set(ne,R),ne.style.width=M.style.width,ne.style.height=M.style.height,this.renderingState=N.RenderingStates.FINISHED,M.appendChild(ne)}))),onRenderContinue(V){V()},cancel(){x=!0}}}setPageLabel(M){this.pageLabel="string"==typeof M?M:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(Q,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.compatibilityParams=y.OptionKind=y.AppOptions=void 0;const $=Object.create(null);y.compatibilityParams=$;{const _=navigator.userAgent||"",h=navigator.platform||"",S=navigator.maxTouchPoints||1,H=/Android/.test(_);(/\b(iPad|iPhone|iPod)(?=;)/.test(_)||"MacIntel"===h&&S>1||H)&&($.maxCanvasPixels=5242880)}const P={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};y.OptionKind=P;const N={annotationMode:{value:2,kind:P.VIEWER+P.PREFERENCE},cursorToolOnLoad:{value:0,kind:P.VIEWER+P.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:P.VIEWER},defaultZoomValue:{value:"",kind:P.VIEWER+P.PREFERENCE},disableHistory:{value:!1,kind:P.VIEWER},disablePageLabels:{value:!1,kind:P.VIEWER+P.PREFERENCE},enablePermissions:{value:!1,kind:P.VIEWER+P.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:P.VIEWER+P.PREFERENCE},enableScripting:{value:!0,kind:P.VIEWER+P.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:P.VIEWER},externalLinkTarget:{value:0,kind:P.VIEWER+P.PREFERENCE},historyUpdateUrl:{value:!1,kind:P.VIEWER+P.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:P.VIEWER+P.PREFERENCE},imageResourcesPath:{value:"./images/",kind:P.VIEWER},maxCanvasPixels:{value:16777216,compatibility:$.maxCanvasPixels,kind:P.VIEWER},pageColorsBackground:{value:"Canvas",kind:P.VIEWER+P.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:P.VIEWER+P.PREFERENCE},pdfBugEnabled:{value:!1,kind:P.VIEWER+P.PREFERENCE},printResolution:{value:150,kind:P.VIEWER},renderer:{value:"canvas",kind:P.VIEWER},sidebarViewOnLoad:{value:-1,kind:P.VIEWER+P.PREFERENCE},scrollModeOnLoad:{value:-1,kind:P.VIEWER+P.PREFERENCE},spreadModeOnLoad:{value:-1,kind:P.VIEWER+P.PREFERENCE},textLayerMode:{value:1,kind:P.VIEWER+P.PREFERENCE},useOnlyCssZoom:{value:!1,kind:P.VIEWER+P.PREFERENCE},viewerCssTheme:{value:0,kind:P.VIEWER+P.PREFERENCE},viewOnLoad:{value:0,kind:P.VIEWER+P.PREFERENCE},cMapPacked:{value:!0,kind:P.API},cMapUrl:{value:"../web/cmaps/",kind:P.API},disableAutoFetch:{value:!1,kind:P.API+P.PREFERENCE},disableFontFace:{value:!1,kind:P.API+P.PREFERENCE},disableRange:{value:!1,kind:P.API+P.PREFERENCE},disableStream:{value:!1,kind:P.API+P.PREFERENCE},docBaseUrl:{value:"",kind:P.API},enableXfa:{value:!0,kind:P.API+P.PREFERENCE},fontExtraProperties:{value:!1,kind:P.API},isEvalSupported:{value:!0,kind:P.API},maxImageSize:{value:-1,kind:P.API},pdfBug:{value:!1,kind:P.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:P.API},verbosity:{value:1,kind:P.API},workerPort:{value:null,kind:P.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:P.WORKER}};N.disablePreferences={value:!1,kind:P.VIEWER},N.locale={value:navigator.language||"en-US",kind:P.VIEWER},N.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:P.VIEWER},N.renderer.kind+=P.PREFERENCE;const O=Object.create(null);y.AppOptions=class b{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(h){var M;const S=O[h];if(void 0!==S)return S;const H=N[h];return void 0!==H?null!=(M=H.compatibility)?M:H.value:void 0}static getAll(h=null){var H;const S=Object.create(null);for(const M in N){const x=N[M];if(h){if(0==(h&x.kind))continue;if(h===P.PREFERENCE){const g=x.value,R=typeof g;if("boolean"===R||"string"===R||"number"===R&&Number.isInteger(g)){S[M]=g;continue}throw new Error(`Invalid type for preference: ${M}`)}}const u=O[M];S[M]=void 0!==u?u:null!=(H=x.compatibility)?H:x.value}return S}static set(h,S){O[h]=S}static setAll(h){for(const S in h)O[S]=h[S]}static remove(h){delete O[h]}static _hasUserOptions(){return Object.keys(O).length>0}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFRenderingQueue=void 0;var P=$(3),N=$(6);y.PDFRenderingQueue=class b{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(h){this.pdfViewer=h}setThumbnailViewer(h){this.pdfThumbnailViewer=h}isHighestPriority(h){return this.highestPriorityPage===h.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(h){var S;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(h)&&(this.isThumbnailViewEnabled&&(null==(S=this.pdfThumbnailViewer)?void 0:S.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(h,S,H,M=!1){const x=h.views,u=x.length;if(0===u)return null;for(let Y=0;Y<u;Y++){const ne=x[Y].view;if(!this.isViewFinished(ne))return ne}const g=h.first.id,R=h.last.id;if(R-g+1>u){const Y=h.ids;for(let ne=1,re=R-g;ne<re;ne++){const ue=H?g+ne:R-ne;if(Y.has(ue))continue;const ve=S[ue-1];if(!this.isViewFinished(ve))return ve}}let I=H?R:g-2,V=S[I];return V&&!this.isViewFinished(V)||M&&(I+=H?1:-1,V=S[I],V&&!this.isViewFinished(V))?V:null}isViewFinished(h){return h.renderingState===N.RenderingStates.FINISHED}renderView(h){switch(h.renderingState){case N.RenderingStates.FINISHED:return!1;case N.RenderingStates.PAUSED:this.highestPriorityPage=h.renderingId,h.resume();break;case N.RenderingStates.RUNNING:this.highestPriorityPage=h.renderingId;break;case N.RenderingStates.INITIAL:this.highestPriorityPage=h.renderingId,h.draw().finally(()=>{this.renderHighestPriority()}).catch(S=>{S instanceof P.RenderingCancelledException||console.error(`renderView: "${S}"`)})}return!0}}},(Q,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextHighlighter=void 0,y.TextHighlighter=class ${constructor({findController:N,eventBus:O,pageIndex:b}){this.findController=N,this.matches=[],this.eventBus=O,this.pageIdx=b,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(N,O){this.textDivs=N,this.textContentItemsStr=O}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=N=>{(N.pageIndex===this.pageIdx||-1===N.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(N,O){if(!N)return[];const{textContentItemsStr:b}=this;let _=0,h=0;const S=b.length-1,H=[];for(let M=0,x=N.length;M<x;M++){let u=N[M];for(;_!==S&&u>=h+b[_].length;)h+=b[_].length,_++;_===b.length&&console.error("Could not find a matching mapping");const g={begin:{divIdx:_,offset:u-h}};for(u+=O[M];_!==S&&u>h+b[_].length;)h+=b[_].length,_++;g.end={divIdx:_,offset:u-h},H.push(g)}return H}_renderMatches(N){if(0===N.length)return;const{findController:O,pageIdx:b}=this,{textContentItemsStr:_,textDivs:h}=this,S=b===O.selected.pageIdx,H=O.selected.matchIdx;let x=null;function g(Y,ne){const re=Y.divIdx;return h[re].textContent="",R(re,0,Y.offset,ne)}function R(Y,ne,re,ue){let ve=h[Y];if(ve.nodeType===Node.TEXT_NODE){const de=document.createElement("span");ve.parentNode.insertBefore(de,ve),de.appendChild(ve),h[Y]=de,ve=de}const we=_[Y].substring(ne,re),Ie=document.createTextNode(we);if(ue){const de=document.createElement("span");return de.className=`${ue} appended`,de.appendChild(Ie),ve.appendChild(de),ue.includes("selected")?de.offsetLeft:0}return ve.appendChild(Ie),0}let I=H,V=I+1;if(O.state.highlightAll)I=0,V=N.length;else if(!S)return;for(let Y=I;Y<V;Y++){const ne=N[Y],re=ne.begin,ue=ne.end,ve=S&&Y===H,we=ve?" selected":"";let Ie=0;if(x&&re.divIdx===x.divIdx?R(x.divIdx,x.offset,re.offset):(null!==x&&R(x.divIdx,x.offset,undefined),g(re)),re.divIdx===ue.divIdx)Ie=R(re.divIdx,re.offset,ue.offset,"highlight"+we);else{Ie=R(re.divIdx,re.offset,undefined,"highlight begin"+we);for(let de=re.divIdx+1,Me=ue.divIdx;de<Me;de++)h[de].className="highlight middle"+we;g(ue,"highlight end"+we)}x=ue,ve&&O.scrollMatchIntoView({element:h[re.divIdx],selectedLeft:Ie,pageIndex:b,matchIndex:H})}x&&R(x.divIdx,x.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:N,matches:O,pageIdx:b}=this,{textContentItemsStr:_,textDivs:h}=this;let S=-1;for(let x=0,u=O.length;x<u;x++){const g=O[x];for(let I=Math.max(S,g.begin.divIdx),V=g.end.divIdx;I<=V;I++){const Y=h[I];Y.textContent=_[I],Y.className=""}S=g.end.divIdx+1}(null==N?void 0:N.highlightMatches)&&(this.matches=this._convertMatches(N.pageMatches[b]||null,N.pageMatchesLength[b]||null),this._renderMatches(this.matches))}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DownloadManager=void 0;var P=$(3);function N(b,_){const h=document.createElement("a");if(!h.click)throw new Error('DownloadManager: "a.click()" is not supported.');h.href=b,h.target="_parent","download"in h&&(h.download=_),(document.body||document.documentElement).appendChild(h),h.click(),h.remove()}y.DownloadManager=class O{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(_,h){(0,P.createValidAbsoluteUrl)(_,"http://example.com")?N(_+"#pdfjs.action=download",h):console.error(`downloadUrl - not a valid URL: ${_}`)}downloadData(_,h,S){N(URL.createObjectURL(new Blob([_],{type:S})),h)}openOrDownloadData(_,h,S){const H=(0,P.isPdfFile)(S),M=H?"application/pdf":"";if(H){let u,x=this._openBlobUrls.get(_);x||(x=URL.createObjectURL(new Blob([h],{type:M})),this._openBlobUrls.set(_,x)),u="?file="+encodeURIComponent(x+"#"+S);try{return window.open(u),!0}catch(g){console.error(`openOrDownloadData: ${g}`),URL.revokeObjectURL(x),this._openBlobUrls.delete(_)}}return this.downloadData(h,S,M),!1}download(_,h,S,H="download"){N(URL.createObjectURL(_),S)}}},(Q,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.WaitOnType=y.EventBus=y.AutomationEventBus=void 0,y.waitOnEventOrTimeout=function P({target:b,name:_,delay:h=0}){return new Promise(function(S,H){if("object"!=typeof b||!_||"string"!=typeof _||!(Number.isInteger(h)&&h>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function M(R){b instanceof N?b._off(_,x):b.removeEventListener(_,x),g&&clearTimeout(g),S(R)}const x=M.bind(null,$.EVENT);b instanceof N?b._on(_,x):b.addEventListener(_,x);const u=M.bind(null,$.TIMEOUT),g=setTimeout(u,h)})};const $={EVENT:"event",TIMEOUT:"timeout"};y.WaitOnType=$;class N{constructor(){this._listeners=Object.create(null)}on(_,h,S=null){this._on(_,h,{external:!0,once:null==S?void 0:S.once})}off(_,h,S=null){this._off(_,h,{external:!0,once:null==S?void 0:S.once})}dispatch(_,h){const S=this._listeners[_];if(!S||0===S.length)return;let H;for(const{listener:M,external:x,once:u}of S.slice(0))u&&this._off(_,M),x?(H||(H=[])).push(M):M(h);if(H){for(const M of H)M(h);H=null}}_on(_,h,S=null){var M;((M=this._listeners)[_]||(M[_]=[])).push({listener:h,external:!0===(null==S?void 0:S.external),once:!0===(null==S?void 0:S.once)})}_off(_,h,S=null){const H=this._listeners[_];if(H)for(let M=0,x=H.length;M<x;M++)if(H[M].listener===h)return void H.splice(M,1)}}y.EventBus=N,y.AutomationEventBus=class O extends N{dispatch(_,h){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.GenericL10n=void 0,$(19);var P=$(4);const N=document.webL10n;y.GenericL10n=class O{constructor(_){this._lang=_,this._ready=new Promise((h,S)=>{N.setLanguage((0,P.fixupLangCode)(_),()=>{h(N)})})}getLanguage(){var _=this;return p(function*(){return(yield _._ready).getLanguage()})()}getDirection(){var _=this;return p(function*(){return(yield _._ready).getDirection()})()}get(_,h=null,S=(0,P.getL10nFallback)(_,h)){var H=this;return p(function*(){return(yield H._ready).get(_,h,S)})()}translate(_){var h=this;return p(function*(){return(yield h._ready).translate(_)})()}}},()=>{document.webL10n=function(Q,y,$){var P={},N="",O="textContent",b="",_={},h="loading";function g(de,Me,Pe){Me=Me||function(J){},Pe=Pe||function(){};var Fe=new XMLHttpRequest;Fe.open("GET",de,!0),Fe.overrideMimeType&&Fe.overrideMimeType("text/plain; charset=utf-8"),Fe.onreadystatechange=function(){4==Fe.readyState&&(200==Fe.status||0===Fe.status?Me(Fe.responseText):Pe())},Fe.onerror=Pe,Fe.ontimeout=Pe;try{Fe.send(null)}catch($e){Pe()}}function I(de,Me){de&&(de=de.toLowerCase()),Me=Me||function(){},function V(){P={},N="",b=""}(),b=de;var Pe=function H(){return y.querySelectorAll('link[type="application/l10n"]')}(),Fe=Pe.length;if(0!==Fe){var E,d=0;E=function(){++d>=Fe&&(Me(),h="complete")};for(var D=0;D<Fe;D++)new C(Pe[D]).load(de,E)}else{var $e=function M(){var de=y.querySelector('script[type="application/l10n"]');return de?JSON.parse(de.innerHTML):null}();if($e&&$e.locales&&$e.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(P=$e.locales[de])){var J=$e.default_locale.toLowerCase();for(var v in $e.locales){if((v=v.toLowerCase())===de){P=$e.locales[de];break}v===J&&(P=$e.locales[J])}}Me()}else console.log("no resource to load, early way out");h="complete"}function C(j){var W=j.href;this.load=function(fe,be){!function R(de,Me,Pe,Fe){var $e=de.replace(/[^\/]*$/,"")||"./";function J(E){return E.lastIndexOf("\\")<0?E:E.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}g(de,function(E){N+=E,function v(E,d){var C={},D=/^\s*|\s*$/,F=/^\s*#|^\s*$/,j=/^\s*\[(.*)\]\s*$/,W=/^\s*@import\s+url\((.*)\)\s*$/i,fe=/^([^=\s]*)\s*=\s*(.+)$/;function be(Ae,xe,ke){var ze=Ae.replace(D,"").split(/[\r\n]+/),tt="*",Oe=Me.split("-",1)[0],Ve=!1,je="";!function U(){for(;;){if(!ze.length)return void ke();var ie=ze.shift();if(!F.test(ie)){if(xe){if(je=j.exec(ie)){tt=je[1].toLowerCase(),Ve="*"!==tt&&tt!==Me&&tt!==Oe;continue}if(Ve)continue;if(je=W.exec(ie))return void _e($e+je[1],U)}var Te=ie.match(fe);Te&&3==Te.length&&(C[Te[1]]=J(Te[2]))}}}()}function _e(Ae,xe){g(Ae,function(ke){be(ke,!1,xe)},function(){console.warn(Ae+" not found."),xe()})}be(E,!0,function(){d(C)})}(E,function(d){for(var C in d){var D,F,j=C.lastIndexOf(".");j>0?(D=C.substring(0,j),F=C.substring(j+1)):(D=C,F=O),P[D]||(P[D]={}),P[D][F]=d[C]}Pe&&Pe()})},Fe)}(W,fe,be,function(){console.warn(W+" not found."),console.warn('"'+fe+'" resource not found'),b="",be()})}}}function ne(de,Me,Pe){var Fe=P[de];if(!Fe){if(console.warn("#"+de+" is undefined."),!Pe)return null;Fe=Pe}var $e={};for(var J in Fe){var v=Fe[J];v=ue(v=re(v,Me,de,J),Me,de),$e[J]=v}return $e}function re(de,Me,Pe,Fe){var J=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(de);if(!J||!J.length)return de;var d,v=J[1],E=J[2];return Me&&E in Me?d=Me[E]:E in P&&(d=P[E]),v in _&&(de=(0,_[v])(de,d,Pe,Fe)),de}function ue(de,Me,Pe){return de.replace(/\{\{\s*(.+?)\s*\}\}/g,function($e,J){return Me&&J in Me?Me[J]:J in P?P[J]:(console.log("argument {{"+J+"}} for #"+Pe+" is undefined."),$e)})}function ve(de){var Me=function u(de){if(!de)return{};var Me=de.getAttribute("data-l10n-id"),Pe=de.getAttribute("data-l10n-args"),Fe={};if(Pe)try{Fe=JSON.parse(Pe)}catch($e){console.warn("could not parse arguments for #"+Me)}return{id:Me,args:Fe}}(de);if(Me.id){var Pe=ne(Me.id,Me.args);if(!Pe)return void console.warn("#"+Me.id+" is undefined.");if(Pe[O]){if(0===function we(de){if(de.children)return de.children.length;if(void 0!==de.childElementCount)return de.childElementCount;for(var Me=0,Pe=0;Pe<de.childNodes.length;Pe++)Me+=1===de.nodeType?1:0;return Me}(de))de[O]=Pe[O];else{for(var Fe=de.childNodes,$e=!1,J=0,v=Fe.length;J<v;J++)3===Fe[J].nodeType&&/\S/.test(Fe[J].nodeValue)&&($e?Fe[J].nodeValue="":(Fe[J].nodeValue=Pe[O],$e=!0));if(!$e){var E=y.createTextNode(Pe[O]);de.insertBefore(E,de.firstChild)}}delete Pe[O]}for(var d in Pe)de[d]=Pe[d]}}return _.plural=function(de,Me,Pe,Fe){var $e=parseFloat(Me);if(isNaN($e)||Fe!=O)return de;_._pluralRules||(_._pluralRules=function Y(de){function Pe(v,E){return-1!==E.indexOf(v)}function Fe(v,E,d){return E<=v&&v<=d}var $e={0:function(v){return"other"},1:function(v){return Fe(v%100,3,10)?"few":0===v?"zero":Fe(v%100,11,99)?"many":2==v?"two":1==v?"one":"other"},2:function(v){return 0!==v&&v%10==0?"many":2==v?"two":1==v?"one":"other"},3:function(v){return 1==v?"one":"other"},4:function(v){return Fe(v,0,1)?"one":"other"},5:function(v){return Fe(v,0,2)&&2!=v?"one":"other"},6:function(v){return 0===v?"zero":v%10==1&&v%100!=11?"one":"other"},7:function(v){return 2==v?"two":1==v?"one":"other"},8:function(v){return Fe(v,3,6)?"few":Fe(v,7,10)?"many":2==v?"two":1==v?"one":"other"},9:function(v){return 0===v||1!=v&&Fe(v%100,1,19)?"few":1==v?"one":"other"},10:function(v){return Fe(v%10,2,9)&&!Fe(v%100,11,19)?"few":v%10!=1||Fe(v%100,11,19)?"other":"one"},11:function(v){return Fe(v%10,2,4)&&!Fe(v%100,12,14)?"few":v%10==0||Fe(v%10,5,9)||Fe(v%100,11,14)?"many":v%10==1&&v%100!=11?"one":"other"},12:function(v){return Fe(v,2,4)?"few":1==v?"one":"other"},13:function(v){return Fe(v%10,2,4)&&!Fe(v%100,12,14)?"few":1!=v&&Fe(v%10,0,1)||Fe(v%10,5,9)||Fe(v%100,12,14)?"many":1==v?"one":"other"},14:function(v){return Fe(v%100,3,4)?"few":v%100==2?"two":v%100==1?"one":"other"},15:function(v){return 0===v||Fe(v%100,2,10)?"few":Fe(v%100,11,19)?"many":1==v?"one":"other"},16:function(v){return v%10==1&&11!=v?"one":"other"},17:function(v){return 3==v?"few":0===v?"zero":6==v?"many":2==v?"two":1==v?"one":"other"},18:function(v){return 0===v?"zero":Fe(v,0,2)&&0!==v&&2!=v?"one":"other"},19:function(v){return Fe(v,2,10)?"few":Fe(v,0,1)?"one":"other"},20:function(v){return!Fe(v%10,3,4)&&v%10!=9||Fe(v%100,10,19)||Fe(v%100,70,79)||Fe(v%100,90,99)?v%1e6==0&&0!==v?"many":v%10!=2||Pe(v%100,[12,72,92])?v%10!=1||Pe(v%100,[11,71,91])?"other":"one":"two":"few"},21:function(v){return 0===v?"zero":1==v?"one":"other"},22:function(v){return Fe(v,0,1)||Fe(v,11,99)?"one":"other"},23:function(v){return Fe(v%10,1,2)||v%20==0?"one":"other"},24:function(v){return Fe(v,3,10)||Fe(v,13,19)?"few":Pe(v,[2,12])?"two":Pe(v,[1,11])?"one":"other"}},J={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[de.replace(/-.*$/,"")];return J in $e?$e[J]:(console.warn("plural form unknown for ["+de+"]"),function(){return"other"})}(b));var J="["+_._pluralRules($e)+"]";return 0===$e&&Pe+"[zero]"in P?de=P[Pe+"[zero]"][Fe]:1==$e&&Pe+"[one]"in P?de=P[Pe+"[one]"][Fe]:2==$e&&Pe+"[two]"in P?de=P[Pe+"[two]"][Fe]:Pe+J in P?de=P[Pe+J][Fe]:Pe+"[other]"in P&&(de=P[Pe+"[other]"][Fe]),de},{get:function(de,Me,Pe){var J,Fe=de.lastIndexOf("."),$e=O;Fe>0&&($e=de.substring(Fe+1),de=de.substring(0,Fe)),Pe&&((J={})[$e]=Pe);var v=ne(de,Me,J);return v&&$e in v?v[$e]:"{{"+de+"}}"},getData:function(){return P},getText:function(){return N},getLanguage:function(){return b},setLanguage:function(de,Me){I(de,function(){Me&&Me()})},getDirection:function(){var Me=b.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(Me)>=0?"rtl":"ltr"},translate:function Ie(de){for(var Me=function x(de){return de?de.querySelectorAll("*[data-l10n-id]"):[]}(de=de||y.documentElement),Pe=Me.length,Fe=0;Fe<Pe;Fe++)ve(Me[Fe]);ve(de)},getReadyState:function(){return h},ready:function(de){de&&("complete"==h||"interactive"==h?Q.setTimeout(function(){de()}):y.addEventListener&&y.addEventListener("localized",function Me(){y.removeEventListener("localized",Me),de()}))}}}(window,document)},(Q,y,$)=>{var ue,B2,we,wS,de,DS,Pe,j2,$e,V2,v,H2,d,TS,D,U2,j,$2,fe,Ip,_e,Eu,xe,gl,ze,G2,Oe,MS,je,PS,ie,Rp,Ke,z2,Xe,xS,T,W2,Re,Au;Object.defineProperty(y,"__esModule",{value:!0}),y.PDFFindController=y.FindState=void 0;var P=$(6),N=$(3),O=$(21);const b={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};y.FindState=b;const H={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},M=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),x=[...M.values()].map(K=>String.fromCharCode(K)).join(""),u=/\p{M}+/gu,g=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,R=/([^\p{M}])\p{M}*$/u,I=/^\p{M}*([^\p{M}])/u;let V=null;function Y(K){if(!V){const Ct=Object.keys(H).join("");V=new RegExp(`([${Ct}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const L=[];let B;for(;null!==(B=u.exec(K));)L.push([B[0].length,B.index]);let te=K.normalize("NFD");const Ce=[[0,0]];let me=0,Se=0,Ye=0,et=0,bt=!1;return te=te.replace(V,(Ct,Vt,cn,cr,rn,sn)=>{var Rr;if(sn-=Ye,Vt){const yr=H[Ct],kr=yr.length;for(let Vn=1;Vn<kr;Vn++)Ce.push([sn-Se+Vn,Se-Vn]);return Se-=kr-1,yr}if(cn){const yr=cn.endsWith("\n"),kr=yr?cn.length-2:cn.length;bt=!0;let Vn=kr;sn+et===(null==(Rr=L[me])?void 0:Rr[1])&&(Vn-=L[me][0],++me);for(let vn=1;vn<Vn+1;vn++)Ce.push([sn-1-Se+vn,Se-vn]);return Se-=Vn,Ye+=Vn,yr?(Ce.push([(sn+=kr-1)-Se+1,1+Se]),Se+=1,Ye+=1,et+=1,cn.slice(0,kr)):cn}return cr?(Ce.push([sn-Se+1,1+Se]),Se+=1,Ye+=1,et+=1,cr.charAt(0)):(Ce.push([sn-Se+1,Se-1]),Se-=1,Ye+=1,et+=1," ")}),Ce.push([te.length,Se]),[te,Ce,bt]}function ne(K,L,B){if(!K)return[L,B];const te=L,Ce=L+B;let me=(0,P.binarySearchFirstItem)(K,Ye=>Ye[0]>=te);K[me][0]>te&&--me;let Se=(0,P.binarySearchFirstItem)(K,Ye=>Ye[0]>=Ce,me);return K[Se][0]>Ce&&--Se,[te+K[me][1],B+K[Se][1]-K[me][1]]}ue=new WeakSet,B2=function(L){if(!L)return;const B=this._pdfDocument,{type:te}=L;(null===this._state||mt(this,Pe,j2).call(this,L))&&(this._dirtyMatch=!0),this._state=L,"highlightallchange"!==te&&mt(this,Re,Au).call(this,b.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||B&&this._pdfDocument!==B)return;mt(this,j,$2).call(this);const Ce=!this._highlightMatches,me=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),te?this._dirtyMatch?mt(this,xe,gl).call(this):"again"===te?(mt(this,xe,gl).call(this),Ce&&this._state.highlightAll&&mt(this,_e,Eu).call(this)):"highlightallchange"===te?(me?mt(this,xe,gl).call(this):this._highlightMatches=!0,mt(this,_e,Eu).call(this)):mt(this,xe,gl).call(this):this._findTimeout=setTimeout(()=>{mt(this,xe,gl).call(this),this._findTimeout=null},250)})},we=new WeakSet,wS=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,N.createPromiseCapability)()},de=new WeakSet,DS=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=Y(this._state.query)),this._normalizedQuery},Pe=new WeakSet,j2=function(L){if(L.query!==this._state.query)return!0;switch(L.type){case"again":const B=this._selected.pageIdx+1,te=this._linkService;return B>=1&&B<=te.pagesCount&&B!==te.page&&!te.isPageVisible(B);case"highlightallchange":return!1}return!0},$e=new WeakSet,V2=function(L,B,te){let Ce=L.slice(0,B).match(R);if(Ce){const me=L.charCodeAt(B),Se=Ce[1].charCodeAt(0);if((0,O.getCharacterType)(me)===(0,O.getCharacterType)(Se))return!1}if(Ce=L.slice(B+te).match(I),Ce){const me=L.charCodeAt(B+te-1),Se=Ce[1].charCodeAt(0);if((0,O.getCharacterType)(me)===(0,O.getCharacterType)(Se))return!1}return!0},v=new WeakSet,H2=function(L,B,te,Ce){const me=[],Se=[],Ye=this._pageDiffs[te];let et;for(;null!==(et=L.exec(Ce));){if(B&&!mt(this,$e,V2).call(this,Ce,et.index,et[0].length))continue;const[bt,Ct]=ne(Ye,et.index,et[0].length);Ct&&(me.push(bt),Se.push(Ct))}this._pageMatches[te]=me,this._pageMatchesLength[te]=Se},d=new WeakSet,TS=function(L,B){const{matchDiacritics:te}=this._state;let Ce=!1;return(L=L.replace(g,(Se,Ye,et,bt,Ct,Vt)=>Ye?`[ ]*\\${Ye}[ ]*`:et?`[ ]*${et}[ ]*`:bt?"[ ]+":te?Ct||Vt:Ct?M.has(Ct.charCodeAt(0))?Ct:"":B?(Ce=!0,`${Vt}\\p{M}*`):Vt)).endsWith("[ ]*")&&(L=L.slice(0,L.length-"[ ]*".length)),te&&B&&(Ce=!0,L=`${L}(?=[${x}]|[^\\p{M}]|$)`),[Ce,L]},D=new WeakSet,U2=function(L){let B=ft(this,de,DS);if(0===B.length)return;const{caseSensitive:te,entireWord:Ce,phraseSearch:me}=this._state,Se=this._pageContents[L],Ye=this._hasDiacritics[L];let et=!1;if(me)[et,B]=mt(this,d,TS).call(this,B,Ye);else{const Vt=B.match(/\S+/g);Vt&&(B=Vt.sort().reverse().map(cn=>{const[cr,rn]=mt(this,d,TS).call(this,cn,Ye);return et||(et=cr),`(${rn})`}).join("|"))}B=new RegExp(B,`g${et?"u":""}${te?"":"i"}`),mt(this,v,H2).call(this,B,Ce,L,Se),this._state.highlightAll&&mt(this,fe,Ip).call(this,L),this._resumePageIdx===L&&(this._resumePageIdx=null,mt(this,Oe,MS).call(this));const Ct=this._pageMatches[L].length;Ct>0&&(this._matchesCountTotal+=Ct,mt(this,T,W2).call(this))},j=new WeakSet,$2=function(){if(this._extractTextPromises.length>0)return;let L=Promise.resolve();for(let B=0,te=this._linkService.pagesCount;B<te;B++){const Ce=(0,N.createPromiseCapability)();this._extractTextPromises[B]=Ce.promise,L=L.then(()=>this._pdfDocument.getPage(B+1).then(me=>me.getTextContent()).then(me=>{const Se=[];for(const Ye of me.items)Se.push(Ye.str),Ye.hasEOL&&Se.push("\n");[this._pageContents[B],this._pageDiffs[B],this._hasDiacritics[B]]=Y(Se.join("")),Ce.resolve()},me=>{console.error(`Unable to get text content for page ${B+1}`,me),this._pageContents[B]="",this._pageDiffs[B]=null,this._hasDiacritics[B]=!1,Ce.resolve()}))}},fe=new WeakSet,Ip=function(L){this._scrollMatches&&this._selected.pageIdx===L&&(this._linkService.page=L+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:L})},_e=new WeakSet,Eu=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},xe=new WeakSet,gl=function(){const L=this._state.findPrevious,B=this._linkService.page-1,te=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=B,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,mt(this,_e,Eu).call(this);for(let me=0;me<te;me++)this._pendingFindMatches.has(me)||(this._pendingFindMatches.add(me),this._extractTextPromises[me].then(()=>{this._pendingFindMatches.delete(me),mt(this,D,U2).call(this,me)}))}if(""===ft(this,de,DS))return void mt(this,Re,Au).call(this,b.FOUND);if(this._resumePageIdx)return;const Ce=this._offset;if(this._pagesToSearch=te,null!==Ce.matchIdx){const me=this._pageMatches[Ce.pageIdx].length;if(!L&&Ce.matchIdx+1<me||L&&Ce.matchIdx>0)return Ce.matchIdx=L?Ce.matchIdx-1:Ce.matchIdx+1,void mt(this,ie,Rp).call(this,!0);mt(this,je,PS).call(this,L)}mt(this,Oe,MS).call(this)},ze=new WeakSet,G2=function(L){const B=this._offset,te=L.length,Ce=this._state.findPrevious;return te?(B.matchIdx=Ce?te-1:0,mt(this,ie,Rp).call(this,!0),!0):(mt(this,je,PS).call(this,Ce),!!(B.wrapped&&(B.matchIdx=null,this._pagesToSearch<0))&&(mt(this,ie,Rp).call(this,!1),!0))},Oe=new WeakSet,MS=function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let L=null;do{const B=this._offset.pageIdx;if(L=this._pageMatches[B],!L){this._resumePageIdx=B;break}}while(!mt(this,ze,G2).call(this,L))},je=new WeakSet,PS=function(L){const B=this._offset,te=this._linkService.pagesCount;B.pageIdx=L?B.pageIdx-1:B.pageIdx+1,B.matchIdx=null,this._pagesToSearch--,(B.pageIdx>=te||B.pageIdx<0)&&(B.pageIdx=L?te-1:0,B.wrapped=!0)},ie=new WeakSet,Rp=function(L=!1){let B=b.NOT_FOUND;const te=this._offset.wrapped;if(this._offset.wrapped=!1,L){const Ce=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,B=te?b.WRAPPED:b.FOUND,-1!==Ce&&Ce!==this._selected.pageIdx&&mt(this,fe,Ip).call(this,Ce)}mt(this,Re,Au).call(this,B,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,mt(this,fe,Ip).call(this,this._selected.pageIdx))},Ke=new WeakSet,z2=function(L){const B=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||B&&this._pdfDocument!==B||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),mt(this,Re,Au).call(this,b.FOUND),this._highlightMatches=!1,mt(this,_e,Eu).call(this))})},Xe=new WeakSet,xS=function(){var me;const{pageIdx:L,matchIdx:B}=this._selected;let te=0,Ce=this._matchesCountTotal;if(-1!==B){for(let Se=0;Se<L;Se++)te+=(null==(me=this._pageMatches[Se])?void 0:me.length)||0;te+=B+1}return(te<1||te>Ce)&&(te=Ce=0),{current:te,total:Ce}},T=new WeakSet,W2=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:mt(this,Xe,xS).call(this)})},Re=new WeakSet,Au=function(L,B=!1){var te,Ce;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:L,previous:B,matchesCount:mt(this,Xe,xS).call(this),rawQuery:null!=(Ce=null==(te=this._state)?void 0:te.query)?Ce:null})},y.PDFFindController=class re{constructor({linkService:L,eventBus:B}){vt(this,ue),vt(this,we),vt(this,de),vt(this,Pe),vt(this,$e),vt(this,v),vt(this,d),vt(this,D),vt(this,j),vt(this,fe),vt(this,_e),vt(this,xe),vt(this,ze),vt(this,Oe),vt(this,je),vt(this,ie),vt(this,Ke),vt(this,Xe),vt(this,T),vt(this,Re),this._linkService=L,this._eventBus=B,mt(this,we,wS).call(this),B._on("find",mt(this,ue,B2).bind(this)),B._on("findbarclose",mt(this,Ke,z2).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(L){this._pdfDocument&&mt(this,we,wS).call(this),L&&(this._pdfDocument=L,this._firstPageCapability.resolve())}scrollMatchIntoView({element:L=null,selectedLeft:B=0,pageIndex:te=-1,matchIndex:Ce=-1}){this._scrollMatches&&L&&-1!==Ce&&Ce===this._selected.matchIdx&&-1!==te&&te===this._selected.pageIdx&&(this._scrollMatches=!1,(0,P.scrollIntoView)(L,{top:-50,left:B+-400},!0))}}},(Q,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.CharacterType=void 0,y.getCharacterType=function u(g){return function P(g){return g<11904}(g)?function N(g){return 0==(65408&g)}(g)?function _(g){return 32===g||9===g||13===g||10===g}(g)?$.SPACE:function O(g){return g>=97&&g<=122||g>=65&&g<=90}(g)||function b(g){return g>=48&&g<=57}(g)||95===g?$.ALPHA_LETTER:$.PUNCT:function x(g){return 3584==(65408&g)}(g)?$.THAI_LETTER:160===g?$.SPACE:$.ALPHA_LETTER:function h(g){return g>=13312&&g<=40959||g>=63744&&g<=64255}(g)?$.HAN_LETTER:function S(g){return g>=12448&&g<=12543}(g)?$.KATAKANA_LETTER:function H(g){return g>=12352&&g<=12447}(g)?$.HIRAGANA_LETTER:function M(g){return g>=65376&&g<=65439}(g)?$.HALFWIDTH_KATAKANA_LETTER:$.ALPHA_LETTER};const $={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};y.CharacterType=$},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFHistory=void 0,y.isDestArraysEqual=M,y.isDestHashesEqual=H;var P=$(6),N=$(17);function h(){return document.location.hash}function H(x,u){return"string"==typeof x&&"string"==typeof u&&(x===u||(0,P.parseQueryString)(x).get("nameddest")===u)}function M(x,u){function g(R,I){if(typeof R!=typeof I||Array.isArray(R)||Array.isArray(I))return!1;if(null!==R&&"object"==typeof R&&null!==I){if(Object.keys(R).length!==Object.keys(I).length)return!1;for(const V in R)if(!g(R[V],I[V]))return!1;return!0}return R===I||Number.isNaN(R)&&Number.isNaN(I)}if(!Array.isArray(x)||!Array.isArray(u)||x.length!==u.length)return!1;for(let R=0,I=x.length;R<I;R++)if(!g(x[R],u[R]))return!1;return!0}y.PDFHistory=class S{constructor({linkService:u,eventBus:g}){this.linkService=u,this.eventBus=g,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",R=>{this._isPagesLoaded=!!R.pagesCount},{once:!0})})}initialize({fingerprint:u,resetHistory:g=!1,updateUrl:R=!1}){if(!u||"string"!=typeof u)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const I=""!==this._fingerprint&&this._fingerprint!==u;this._fingerprint=u,this._updateUrl=!0===R,this._initialized=!0,this._bindEvents();const V=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=h(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(V,!0)||g){const{hash:ne,page:re,rotation:ue}=this._parseCurrentHash(!0);return!ne||I||g?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:ne,page:re,rotation:ue},!0)}const Y=V.destination;this._updateInternalState(Y,V.uid,!0),void 0!==Y.rotation&&(this._initialRotation=Y.rotation),Y.dest?(this._initialBookmark=JSON.stringify(Y.dest),this._destination.page=null):Y.hash?this._initialBookmark=Y.hash:Y.page&&(this._initialBookmark=`page=${Y.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:u=null,explicitDest:g,pageNumber:R}){if(!this._initialized)return;if(u&&"string"!=typeof u)return void console.error(`PDFHistory.push: "${u}" is not a valid namedDest parameter.`);if(!Array.isArray(g))return void console.error(`PDFHistory.push: "${g}" is not a valid explicitDest parameter.`);if(!this._isValidPage(R)&&(null!==R||this._destination))return void console.error(`PDFHistory.push: "${R}" is not a valid pageNumber parameter.`);const I=u||JSON.stringify(g);if(!I)return;let V=!1;if(this._destination&&(H(this._destination.hash,I)||M(this._destination.dest,g))){if(this._destination.page)return;V=!0}this._popStateInProgress&&!V||(this._pushOrReplaceState({dest:g,hash:I,page:R,rotation:this.linkService.rotation},V),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(u){var g;if(this._initialized){if(!this._isValidPage(u))return void console.error(`PDFHistory.pushPage: "${u}" is not a valid page number.`);(null==(g=this._destination)?void 0:g.page)!==u&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${u}`,page:u,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(u,g=!1){const R=g||!this._destination,I={fingerprint:this._fingerprint,uid:R?this._uid:this._uid+1,destination:u};let V;if(this._updateInternalState(u,I.uid),this._updateUrl&&(null==u?void 0:u.hash)){const Y=document.location.href.split("#")[0];Y.startsWith("file://")||(V=`${Y}#${u.hash}`)}R?window.history.replaceState(I,"",V):window.history.pushState(I,"",V)}_tryPushCurrentPosition(u=!1){if(!this._position)return;let g=this._position;if(u&&(g=Object.assign(Object.create(null),this._position),g.temporary=!0),!this._destination)return void this._pushOrReplaceState(g);if(this._destination.temporary)return void this._pushOrReplaceState(g,!0);if(this._destination.hash===g.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let R=!1;if(this._destination.page>=g.first&&this._destination.page<=g.page){if(void 0!==this._destination.dest||!this._destination.first)return;R=!0}this._pushOrReplaceState(g,R)}_isValidPage(u){return Number.isInteger(u)&&u>0&&u<=this.linkService.pagesCount}_isValidState(u,g=!1){if(!u)return!1;if(u.fingerprint!==this._fingerprint){if(!g)return!1;{if("string"!=typeof u.fingerprint||u.fingerprint.length!==this._fingerprint.length)return!1;const[R]=performance.getEntriesByType("navigation");if("reload"!==(null==R?void 0:R.type))return!1}}return!(!Number.isInteger(u.uid)||u.uid<0||null===u.destination||"object"!=typeof u.destination)}_updateInternalState(u,g,R=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),R&&(null==u?void 0:u.temporary)&&delete u.temporary,this._destination=u,this._uid=g,this._maxUid=Math.max(this._maxUid,g),this._numPositionUpdates=0}_parseCurrentHash(u=!1){const g=unescape(h()).substring(1),R=(0,P.parseQueryString)(g),I=R.get("nameddest")||"";let V=0|R.get("page");return(!this._isValidPage(V)||u&&I.length>0)&&(V=null),{hash:g,page:V,rotation:this.linkService.rotation}}_updateViewarea({location:u}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:u.pdfOpenParams.substring(1),page:this.linkService.page,first:u.pageNumber,rotation:u.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:u}){const g=h(),R=this._currentHash!==g;if(this._currentHash=g,!u){this._uid++;const{hash:V,page:Y,rotation:ne}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:V,page:Y,rotation:ne},!0)}if(!this._isValidState(u))return;this._popStateInProgress=!0,R&&(this._blockHashChange++,(0,N.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const I=u.destination;this._updateInternalState(I,u.uid,!0),(0,P.isValidRotation)(I.rotation)&&(this.linkService.rotation=I.rotation),I.dest?this.linkService.goToDestination(I.dest):I.hash?this.linkService.setHash(I.hash):I.page&&(this.linkService.page=I.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFScriptingManager=void 0;var P=$(6),N=$(3);y.PDFScriptingManager=class O{constructor({eventBus:_,sandboxBundleSrc:h=null,scriptingFactory:S=null,docPropertiesLookup:H=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=_,this._sandboxBundleSrc=h,this._scriptingFactory=S,this._docPropertiesLookup=H,this._scriptingFactory||window.addEventListener("updatefromsandbox",M=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:M.detail})})}setViewer(_){this._pdfViewer=_}setDocument(_){var h=this;return p(function*(){var x;if(h._pdfDocument&&(yield h._destroyScripting()),h._pdfDocument=_,!_)return;const[S,H,M]=yield Promise.all([_.getFieldObjects(),_.getCalculationOrderIds(),_.getJSActions()]);if(S||M){if(_===h._pdfDocument){try{h._scripting=h._createScripting()}catch(u){return console.error(`PDFScriptingManager.setDocument: "${null==u?void 0:u.message}".`),void(yield h._destroyScripting())}h._internalEvents.set("updatefromsandbox",u=>{(null==u?void 0:u.source)===window&&h._updateFromSandbox(u.detail)}),h._internalEvents.set("dispatcheventinsandbox",u=>{var g;null==(g=h._scripting)||g.dispatchEventInSandbox(u.detail)}),h._internalEvents.set("pagechanging",({pageNumber:u,previous:g})=>{u!==g&&(h._dispatchPageClose(g),h._dispatchPageOpen(u))}),h._internalEvents.set("pagerendered",({pageNumber:u})=>{!h._pageOpenPending.has(u)||u===h._pdfViewer.currentPageNumber&&h._dispatchPageOpen(u)}),h._internalEvents.set("pagesdestroy",function(){var u=p(function*(g){var R,I;yield h._dispatchPageClose(h._pdfViewer.currentPageNumber),yield null==(R=h._scripting)?void 0:R.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null==(I=h._closeCapability)||I.resolve()});return function(g){return u.apply(this,arguments)}}()),h._domEvents.set("mousedown",u=>{h._mouseState.isDown=!0}),h._domEvents.set("mouseup",u=>{h._mouseState.isDown=!1});for(const[u,g]of h._internalEvents)h._eventBus._on(u,g);for(const[u,g]of h._domEvents)window.addEventListener(u,g,!0);try{const u=yield h._getDocProperties();if(_!==h._pdfDocument)return;yield h._scripting.createSandbox({objects:S,calculationOrder:H,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:Mp(Tp({},u),{actions:M})}),h._eventBus.dispatch("sandboxcreated",{source:h})}catch(u){return console.error(`PDFScriptingManager.setDocument: "${null==u?void 0:u.message}".`),void(yield h._destroyScripting())}yield null==(x=h._scripting)?void 0:x.dispatchEventInSandbox({id:"doc",name:"Open"}),yield h._dispatchPageOpen(h._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{_===h._pdfDocument&&(h._ready=!0)})}}else yield h._destroyScripting()})()}dispatchWillSave(_){var h=this;return p(function*(){var S;return null==(S=h._scripting)?void 0:S.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(_){var h=this;return p(function*(){var S;return null==(S=h._scripting)?void 0:S.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(_){var h=this;return p(function*(){var S;return null==(S=h._scripting)?void 0:S.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(_){var h=this;return p(function*(){var S;return null==(S=h._scripting)?void 0:S.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var _;return(null==(_=this._destroyCapability)?void 0:_.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,N.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,N.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,N.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,N.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(_){var h=this;return p(function*(){var R;const S=h._pdfViewer.isInPresentationMode||h._pdfViewer.isChangingPresentationMode,{id:H,siblings:M,command:x,value:u}=_;if(!H){switch(x){case"clear":console.clear();break;case"error":console.error(u);break;case"layout":if(S)return;const I=(0,P.apiPageLayoutToViewerModes)(u);h._pdfViewer.spreadMode=I.spreadMode;break;case"page-num":h._pdfViewer.currentPageNumber=u+1;break;case"print":yield h._pdfViewer.pagesPromise,h._eventBus.dispatch("print",{source:h});break;case"println":console.log(u);break;case"zoom":if(S)return;h._pdfViewer.currentScaleValue=u;break;case"SaveAs":h._eventBus.dispatch("save",{source:h});break;case"FirstPage":h._pdfViewer.currentPageNumber=1;break;case"LastPage":h._pdfViewer.currentPageNumber=h._pdfViewer.pagesCount;break;case"NextPage":h._pdfViewer.nextPage();break;case"PrevPage":h._pdfViewer.previousPage();break;case"ZoomViewIn":if(S)return;h._pdfViewer.increaseScale();break;case"ZoomViewOut":if(S)return;h._pdfViewer.decreaseScale()}return}if(S&&_.focus)return;delete _.id,delete _.siblings;const g=M?[H,...M]:[H];for(const I of g){const V=document.getElementById(I);V?V.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:_})):null==(R=h._pdfDocument)||R.annotationStorage.setValue(I,_)}})()}_dispatchPageOpen(_,h=!1){var S=this;return p(function*(){const H=S._pdfDocument,M=S._visitedPages;if(h&&(S._closeCapability=(0,N.createPromiseCapability)()),!S._closeCapability)return;const x=S._pdfViewer.getPageView(_-1);if((null==x?void 0:x.renderingState)!==P.RenderingStates.FINISHED)return void S._pageOpenPending.add(_);S._pageOpenPending.delete(_);const u=p(function*(){var R,I;const g=yield M.has(_)?null:null==(R=x.pdfPage)?void 0:R.getJSActions();H===S._pdfDocument&&(yield null==(I=S._scripting)?void 0:I.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:_,actions:g}))})();M.set(_,u)})()}_dispatchPageClose(_){var h=this;return p(function*(){var x;const S=h._pdfDocument,H=h._visitedPages;if(!h._closeCapability||h._pageOpenPending.has(_))return;const M=H.get(_);!M||(H.set(_,null),yield M,S===h._pdfDocument&&(yield null==(x=h._scripting)?void 0:x.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:_})))})()}_getDocProperties(){var _=this;return p(function*(){if(_._docPropertiesLookup)return _._docPropertiesLookup(_._pdfDocument);const{docPropertiesLookup:h}=$(24);return h(_._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,N.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:_}=$(24);return new _(this._sandboxBundleSrc)}_destroyScripting(){var _=this;return p(function*(){var h,S;if(!_._scripting)return _._pdfDocument=null,void(null==(h=_._destroyCapability)||h.resolve());_._closeCapability&&(yield Promise.race([_._closeCapability.promise,new Promise(H=>{setTimeout(H,1e3)})]).catch(H=>{}),_._closeCapability=null),_._pdfDocument=null;try{yield _._scripting.destroySandbox()}catch(H){}for(const[H,M]of _._internalEvents)_._eventBus._off(H,M);_._internalEvents.clear();for(const[H,M]of _._domEvents)window.removeEventListener(H,M,!0);_._domEvents.clear(),_._pageOpenPending.clear(),_._visitedPages.clear(),_._scripting=null,delete _._mouseState.isDown,_._ready=!1,null==(S=_._destroyCapability)||S.resolve()})()}}},(Q,y,$)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.GenericScripting=void 0,y.docPropertiesLookup=function N(_){return O.apply(this,arguments)};var P=$(3);function O(){return(O=p(function*(_){const S="".split("#")[0];let{info:H,metadata:M,contentDispositionFilename:x,contentLength:u}=yield _.getMetadata();if(!u){const{length:g}=yield _.getDownloadInfo();u=g}return Mp(Tp({},H),{baseURL:S,filesize:u,filename:x||(0,P.getPdfFilenameFromUrl)(""),metadata:null==M?void 0:M.getRaw(),authors:null==M?void 0:M.get("dc:creator"),numPages:_.numPages,URL:""})})).apply(this,arguments)}y.GenericScripting=class b{constructor(h){this._ready=(0,P.loadScript)(h,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(h){var S=this;return p(function*(){(yield S._ready).create(h)})()}dispatchEventInSandbox(h){var S=this;return p(function*(){const H=yield S._ready;setTimeout(()=>H.dispatchEvent(h),0)})()}destroySandbox(){var h=this;return p(function*(){(yield h._ready).nukeSandbox()})()}}}],ae={};function le(Q){var y=ae[Q];if(void 0!==y)return y.exports;var $=ae[Q]={exports:{}};return ce[Q]($,$.exports,le),$.exports}var pe={};return(()=>{var Q=pe;Object.defineProperty(Q,"__esModule",{value:!0}),Object.defineProperty(Q,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return O.AnnotationLayerBuilder}}),Object.defineProperty(Q,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return y.DefaultAnnotationLayerFactory}}),Object.defineProperty(Q,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return y.DefaultStructTreeLayerFactory}}),Object.defineProperty(Q,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return y.DefaultTextLayerFactory}}),Object.defineProperty(Q,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return y.DefaultXfaLayerFactory}}),Object.defineProperty(Q,"DownloadManager",{enumerable:!0,get:function(){return b.DownloadManager}}),Object.defineProperty(Q,"EventBus",{enumerable:!0,get:function(){return _.EventBus}}),Object.defineProperty(Q,"GenericL10n",{enumerable:!0,get:function(){return h.GenericL10n}}),Object.defineProperty(Q,"LinkTarget",{enumerable:!0,get:function(){return $.LinkTarget}}),Object.defineProperty(Q,"NullL10n",{enumerable:!0,get:function(){return S.NullL10n}}),Object.defineProperty(Q,"PDFFindController",{enumerable:!0,get:function(){return H.PDFFindController}}),Object.defineProperty(Q,"PDFHistory",{enumerable:!0,get:function(){return M.PDFHistory}}),Object.defineProperty(Q,"PDFLinkService",{enumerable:!0,get:function(){return $.PDFLinkService}}),Object.defineProperty(Q,"PDFPageView",{enumerable:!0,get:function(){return x.PDFPageView}}),Object.defineProperty(Q,"PDFScriptingManager",{enumerable:!0,get:function(){return u.PDFScriptingManager}}),Object.defineProperty(Q,"PDFSinglePageViewer",{enumerable:!0,get:function(){return N.PDFSinglePageViewer}}),Object.defineProperty(Q,"PDFViewer",{enumerable:!0,get:function(){return N.PDFViewer}}),Object.defineProperty(Q,"ProgressBar",{enumerable:!0,get:function(){return P.ProgressBar}}),Object.defineProperty(Q,"SimpleLinkService",{enumerable:!0,get:function(){return $.SimpleLinkService}}),Object.defineProperty(Q,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return g.StructTreeLayerBuilder}}),Object.defineProperty(Q,"TextLayerBuilder",{enumerable:!0,get:function(){return R.TextLayerBuilder}}),Object.defineProperty(Q,"XfaLayerBuilder",{enumerable:!0,get:function(){return I.XfaLayerBuilder}}),Object.defineProperty(Q,"parseQueryString",{enumerable:!0,get:function(){return P.parseQueryString}});var y=le(1),$=le(5),P=le(6),N=le(10),O=le(2),b=le(16),_=le(17),h=le(18),S=le(4),H=le(20),M=le(22),x=le(12),u=le(23),g=le(7),R=le(8),I=le(9)})(),pe})(),We.exports=le()},463:We=>{"use strict";const k={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};k.localCName=k.generateIdentifier(),k.splitLines=function(X){return X.trim().split("\n").map(p=>p.trim())},k.splitSections=function(X){return X.split("\nm=").map((ce,ae)=>(ae>0?"m="+ce:ce).trim()+"\r\n")},k.getDescription=function(X){const p=k.splitSections(X);return p&&p[0]},k.getMediaSections=function(X){const p=k.splitSections(X);return p.shift(),p},k.matchPrefix=function(X,p){return k.splitLines(X).filter(ce=>0===ce.indexOf(p))},k.parseCandidate=function(X){let p;p=0===X.indexOf("a=candidate:")?X.substring(12).split(" "):X.substring(10).split(" ");const ce={foundation:p[0],component:{1:"rtp",2:"rtcp"}[p[1]]||p[1],protocol:p[2].toLowerCase(),priority:parseInt(p[3],10),ip:p[4],address:p[4],port:parseInt(p[5],10),type:p[7]};for(let ae=8;ae<p.length;ae+=2)switch(p[ae]){case"raddr":ce.relatedAddress=p[ae+1];break;case"rport":ce.relatedPort=parseInt(p[ae+1],10);break;case"tcptype":ce.tcpType=p[ae+1];break;case"ufrag":ce.ufrag=p[ae+1],ce.usernameFragment=p[ae+1];break;default:void 0===ce[p[ae]]&&(ce[p[ae]]=p[ae+1])}return ce},k.writeCandidate=function(X){const p=[];p.push(X.foundation);const ce=X.component;p.push("rtp"===ce?1:"rtcp"===ce?2:ce),p.push(X.protocol.toUpperCase()),p.push(X.priority),p.push(X.address||X.ip),p.push(X.port);const ae=X.type;return p.push("typ"),p.push(ae),"host"!==ae&&X.relatedAddress&&X.relatedPort&&(p.push("raddr"),p.push(X.relatedAddress),p.push("rport"),p.push(X.relatedPort)),X.tcpType&&"tcp"===X.protocol.toLowerCase()&&(p.push("tcptype"),p.push(X.tcpType)),(X.usernameFragment||X.ufrag)&&(p.push("ufrag"),p.push(X.usernameFragment||X.ufrag)),"candidate:"+p.join(" ")},k.parseIceOptions=function(X){return X.substr(14).split(" ")},k.parseRtpMap=function(X){let p=X.substr(9).split(" ");const ce={payloadType:parseInt(p.shift(),10)};return p=p[0].split("/"),ce.name=p[0],ce.clockRate=parseInt(p[1],10),ce.channels=3===p.length?parseInt(p[2],10):1,ce.numChannels=ce.channels,ce},k.writeRtpMap=function(X){let p=X.payloadType;void 0!==X.preferredPayloadType&&(p=X.preferredPayloadType);const ce=X.channels||X.numChannels||1;return"a=rtpmap:"+p+" "+X.name+"/"+X.clockRate+(1!==ce?"/"+ce:"")+"\r\n"},k.parseExtmap=function(X){const p=X.substr(9).split(" ");return{id:parseInt(p[0],10),direction:p[0].indexOf("/")>0?p[0].split("/")[1]:"sendrecv",uri:p[1]}},k.writeExtmap=function(X){return"a=extmap:"+(X.id||X.preferredId)+(X.direction&&"sendrecv"!==X.direction?"/"+X.direction:"")+" "+X.uri+"\r\n"},k.parseFmtp=function(X){const p={};let ce;const ae=X.substr(X.indexOf(" ")+1).split(";");for(let le=0;le<ae.length;le++)ce=ae[le].trim().split("="),p[ce[0].trim()]=ce[1];return p},k.writeFmtp=function(X){let p="",ce=X.payloadType;if(void 0!==X.preferredPayloadType&&(ce=X.preferredPayloadType),X.parameters&&Object.keys(X.parameters).length){const ae=[];Object.keys(X.parameters).forEach(le=>{ae.push(void 0!==X.parameters[le]?le+"="+X.parameters[le]:le)}),p+="a=fmtp:"+ce+" "+ae.join(";")+"\r\n"}return p},k.parseRtcpFb=function(X){const p=X.substr(X.indexOf(" ")+1).split(" ");return{type:p.shift(),parameter:p.join(" ")}},k.writeRtcpFb=function(X){let p="",ce=X.payloadType;return void 0!==X.preferredPayloadType&&(ce=X.preferredPayloadType),X.rtcpFeedback&&X.rtcpFeedback.length&&X.rtcpFeedback.forEach(ae=>{p+="a=rtcp-fb:"+ce+" "+ae.type+(ae.parameter&&ae.parameter.length?" "+ae.parameter:"")+"\r\n"}),p},k.parseSsrcMedia=function(X){const p=X.indexOf(" "),ce={ssrc:parseInt(X.substr(7,p-7),10)},ae=X.indexOf(":",p);return ae>-1?(ce.attribute=X.substr(p+1,ae-p-1),ce.value=X.substr(ae+1)):ce.attribute=X.substr(p+1),ce},k.parseSsrcGroup=function(X){const p=X.substr(13).split(" ");return{semantics:p.shift(),ssrcs:p.map(ce=>parseInt(ce,10))}},k.getMid=function(X){const p=k.matchPrefix(X,"a=mid:")[0];if(p)return p.substr(6)},k.parseFingerprint=function(X){const p=X.substr(14).split(" ");return{algorithm:p[0].toLowerCase(),value:p[1].toUpperCase()}},k.getDtlsParameters=function(X,p){return{role:"auto",fingerprints:k.matchPrefix(X+p,"a=fingerprint:").map(k.parseFingerprint)}},k.writeDtlsParameters=function(X,p){let ce="a=setup:"+p+"\r\n";return X.fingerprints.forEach(ae=>{ce+="a=fingerprint:"+ae.algorithm+" "+ae.value+"\r\n"}),ce},k.parseCryptoLine=function(X){const p=X.substr(9).split(" ");return{tag:parseInt(p[0],10),cryptoSuite:p[1],keyParams:p[2],sessionParams:p.slice(3)}},k.writeCryptoLine=function(X){return"a=crypto:"+X.tag+" "+X.cryptoSuite+" "+("object"==typeof X.keyParams?k.writeCryptoKeyParams(X.keyParams):X.keyParams)+(X.sessionParams?" "+X.sessionParams.join(" "):"")+"\r\n"},k.parseCryptoKeyParams=function(X){if(0!==X.indexOf("inline:"))return null;const p=X.substr(7).split("|");return{keyMethod:"inline",keySalt:p[0],lifeTime:p[1],mkiValue:p[2]?p[2].split(":")[0]:void 0,mkiLength:p[2]?p[2].split(":")[1]:void 0}},k.writeCryptoKeyParams=function(X){return X.keyMethod+":"+X.keySalt+(X.lifeTime?"|"+X.lifeTime:"")+(X.mkiValue&&X.mkiLength?"|"+X.mkiValue+":"+X.mkiLength:"")},k.getCryptoParameters=function(X,p){return k.matchPrefix(X+p,"a=crypto:").map(k.parseCryptoLine)},k.getIceParameters=function(X,p){const ce=k.matchPrefix(X+p,"a=ice-ufrag:")[0],ae=k.matchPrefix(X+p,"a=ice-pwd:")[0];return ce&&ae?{usernameFragment:ce.substr(12),password:ae.substr(10)}:null},k.writeIceParameters=function(X){let p="a=ice-ufrag:"+X.usernameFragment+"\r\na=ice-pwd:"+X.password+"\r\n";return X.iceLite&&(p+="a=ice-lite\r\n"),p},k.parseRtpParameters=function(X){const p={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ae=k.splitLines(X)[0].split(" ");for(let le=3;le<ae.length;le++){const pe=ae[le],Q=k.matchPrefix(X,"a=rtpmap:"+pe+" ")[0];if(Q){const y=k.parseRtpMap(Q),$=k.matchPrefix(X,"a=fmtp:"+pe+" ");switch(y.parameters=$.length?k.parseFmtp($[0]):{},y.rtcpFeedback=k.matchPrefix(X,"a=rtcp-fb:"+pe+" ").map(k.parseRtcpFb),p.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":p.fecMechanisms.push(y.name.toUpperCase())}}}return k.matchPrefix(X,"a=extmap:").forEach(le=>{p.headerExtensions.push(k.parseExtmap(le))}),p},k.writeRtpDescription=function(X,p){let ce="";ce+="m="+X+" ",ce+=p.codecs.length>0?"9":"0",ce+=" UDP/TLS/RTP/SAVPF ",ce+=p.codecs.map(le=>void 0!==le.preferredPayloadType?le.preferredPayloadType:le.payloadType).join(" ")+"\r\n",ce+="c=IN IP4 0.0.0.0\r\n",ce+="a=rtcp:9 IN IP4 0.0.0.0\r\n",p.codecs.forEach(le=>{ce+=k.writeRtpMap(le),ce+=k.writeFmtp(le),ce+=k.writeRtcpFb(le)});let ae=0;return p.codecs.forEach(le=>{le.maxptime>ae&&(ae=le.maxptime)}),ae>0&&(ce+="a=maxptime:"+ae+"\r\n"),p.headerExtensions&&p.headerExtensions.forEach(le=>{ce+=k.writeExtmap(le)}),ce},k.parseRtpEncodingParameters=function(X){const p=[],ce=k.parseRtpParameters(X),ae=-1!==ce.fecMechanisms.indexOf("RED"),le=-1!==ce.fecMechanisms.indexOf("ULPFEC"),pe=k.matchPrefix(X,"a=ssrc:").map(N=>k.parseSsrcMedia(N)).filter(N=>"cname"===N.attribute),Q=pe.length>0&&pe[0].ssrc;let y;const $=k.matchPrefix(X,"a=ssrc-group:FID").map(N=>N.substr(17).split(" ").map(b=>parseInt(b,10)));$.length>0&&$[0].length>1&&$[0][0]===Q&&(y=$[0][1]),ce.codecs.forEach(N=>{if("RTX"===N.name.toUpperCase()&&N.parameters.apt){let O={ssrc:Q,codecPayloadType:parseInt(N.parameters.apt,10)};Q&&y&&(O.rtx={ssrc:y}),p.push(O),ae&&(O=JSON.parse(JSON.stringify(O)),O.fec={ssrc:Q,mechanism:le?"red+ulpfec":"red"},p.push(O))}}),0===p.length&&Q&&p.push({ssrc:Q});let P=k.matchPrefix(X,"b=");return P.length&&(P=0===P[0].indexOf("b=TIAS:")?parseInt(P[0].substr(7),10):0===P[0].indexOf("b=AS:")?1e3*parseInt(P[0].substr(5),10)*.95-16e3:void 0,p.forEach(N=>{N.maxBitrate=P})),p},k.parseRtcpParameters=function(X){const p={},ce=k.matchPrefix(X,"a=ssrc:").map(pe=>k.parseSsrcMedia(pe)).filter(pe=>"cname"===pe.attribute)[0];ce&&(p.cname=ce.value,p.ssrc=ce.ssrc);const ae=k.matchPrefix(X,"a=rtcp-rsize");p.reducedSize=ae.length>0,p.compound=0===ae.length;const le=k.matchPrefix(X,"a=rtcp-mux");return p.mux=le.length>0,p},k.writeRtcpParameters=function(X){let p="";return X.reducedSize&&(p+="a=rtcp-rsize\r\n"),X.mux&&(p+="a=rtcp-mux\r\n"),void 0!==X.ssrc&&X.cname&&(p+="a=ssrc:"+X.ssrc+" cname:"+X.cname+"\r\n"),p},k.parseMsid=function(X){let p;const ce=k.matchPrefix(X,"a=msid:");if(1===ce.length)return p=ce[0].substr(7).split(" "),{stream:p[0],track:p[1]};const ae=k.matchPrefix(X,"a=ssrc:").map(le=>k.parseSsrcMedia(le)).filter(le=>"msid"===le.attribute);return ae.length>0?(p=ae[0].value.split(" "),{stream:p[0],track:p[1]}):void 0},k.parseSctpDescription=function(X){const p=k.parseMLine(X),ce=k.matchPrefix(X,"a=max-message-size:");let ae;ce.length>0&&(ae=parseInt(ce[0].substr(19),10)),isNaN(ae)&&(ae=65536);const le=k.matchPrefix(X,"a=sctp-port:");if(le.length>0)return{port:parseInt(le[0].substr(12),10),protocol:p.fmt,maxMessageSize:ae};const pe=k.matchPrefix(X,"a=sctpmap:");if(pe.length>0){const Q=pe[0].substr(10).split(" ");return{port:parseInt(Q[0],10),protocol:Q[1],maxMessageSize:ae}}},k.writeSctpDescription=function(X,p){let ce=[];return ce="DTLS/SCTP"!==X.protocol?["m="+X.kind+" 9 "+X.protocol+" "+p.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+p.port+"\r\n"]:["m="+X.kind+" 9 "+X.protocol+" "+p.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+p.port+" "+p.protocol+" 65535\r\n"],void 0!==p.maxMessageSize&&ce.push("a=max-message-size:"+p.maxMessageSize+"\r\n"),ce.join("")},k.generateSessionId=function(){return Math.random().toString().substr(2,21)},k.writeSessionBoilerplate=function(X,p,ce){let ae;const le=void 0!==p?p:2;return ae=X||k.generateSessionId(),"v=0\r\no="+(ce||"thisisadapterortc")+" "+ae+" "+le+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},k.getDirection=function(X,p){const ce=k.splitLines(X);for(let ae=0;ae<ce.length;ae++)switch(ce[ae]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return ce[ae].substr(2)}return p?k.getDirection(p):"sendrecv"},k.getKind=function(X){return k.splitLines(X)[0].split(" ")[0].substr(2)},k.isRejected=function(X){return"0"===X.split(" ",2)[1]},k.parseMLine=function(X){const ce=k.splitLines(X)[0].substr(2).split(" ");return{kind:ce[0],port:parseInt(ce[1],10),protocol:ce[2],fmt:ce.slice(3).join(" ")}},k.parseOLine=function(X){const ce=k.matchPrefix(X,"o=")[0].substr(2).split(" ");return{username:ce[0],sessionId:ce[1],sessionVersion:parseInt(ce[2],10),netType:ce[3],addressType:ce[4],address:ce[5]}},k.isValidSDP=function(X){if("string"!=typeof X||0===X.length)return!1;const p=k.splitLines(X);for(let ce=0;ce<p.length;ce++)if(p[ce].length<2||"="!==p[ce].charAt(1))return!1;return!0},We.exports=k},97:(We,k,X)=>{"use strict";X.r(k),X.d(k,{default:()=>it});var p={};X.r(p),X.d(p,{fixNegotiationNeeded:()=>we,shimAddTrackRemoveTrack:()=>ue,shimAddTrackRemoveTrackWithNative:()=>re,shimGetDisplayMedia:()=>g,shimGetSendersWithDtmf:()=>V,shimGetStats:()=>Y,shimGetUserMedia:()=>u,shimMediaStream:()=>R,shimOnTrack:()=>I,shimPeerConnection:()=>ve,shimSenderReceiverGetStats:()=>ne});var ce={};X.r(ce),X.d(ce,{shimAddTransceiver:()=>E,shimCreateAnswer:()=>D,shimCreateOffer:()=>C,shimGetDisplayMedia:()=>de,shimGetParameters:()=>d,shimGetUserMedia:()=>Ie,shimOnTrack:()=>Me,shimPeerConnection:()=>Pe,shimRTCDataChannel:()=>v,shimReceiverGetStats:()=>$e,shimRemoveStream:()=>J,shimSenderGetStats:()=>Fe});var ae={};X.r(ae),X.d(ae,{shimAudioContext:()=>ke,shimCallbacksAPI:()=>W,shimConstraints:()=>be,shimCreateOfferLegacy:()=>xe,shimGetUserMedia:()=>fe,shimLocalStreamsAPI:()=>F,shimRTCIceServerUrls:()=>_e,shimRemoteStreamsAPI:()=>j,shimTrackEventTransceiver:()=>Ae});var le={};X.r(le),X.d(le,{removeExtmapAllowMixed:()=>ie,shimAddIceCandidateNullOrEmpty:()=>Te,shimConnectionState:()=>U,shimMaxMessageSize:()=>Ve,shimParameterlessSetLocalDescription:()=>Ke,shimRTCIceCandidate:()=>Oe,shimSendThrowTypeError:()=>je});let pe=!0,Q=!0;function y(T,he,Re){const se=T.match(he);return se&&se.length>=Re&&parseInt(se[Re],10)}function $(T,he,Re){if(!T.RTCPeerConnection)return;const se=T.RTCPeerConnection.prototype,K=se.addEventListener;se.addEventListener=function(B,te){if(B!==he)return K.apply(this,arguments);const Ce=me=>{const Se=Re(me);Se&&(te.handleEvent?te.handleEvent(Se):te(Se))};return this._eventMap=this._eventMap||{},this._eventMap[he]||(this._eventMap[he]=new Map),this._eventMap[he].set(te,Ce),K.apply(this,[B,Ce])};const L=se.removeEventListener;se.removeEventListener=function(B,te){if(B!==he||!this._eventMap||!this._eventMap[he])return L.apply(this,arguments);if(!this._eventMap[he].has(te))return L.apply(this,arguments);const Ce=this._eventMap[he].get(te);return this._eventMap[he].delete(te),0===this._eventMap[he].size&&delete this._eventMap[he],0===Object.keys(this._eventMap).length&&delete this._eventMap,L.apply(this,[B,Ce])},Object.defineProperty(se,"on"+he,{get(){return this["_on"+he]},set(B){this["_on"+he]&&(this.removeEventListener(he,this["_on"+he]),delete this["_on"+he]),B&&this.addEventListener(he,this["_on"+he]=B)},enumerable:!0,configurable:!0})}function P(T){return"boolean"!=typeof T?new Error("Argument type: "+typeof T+". Please use a boolean."):(pe=T,T?"adapter.js logging disabled":"adapter.js logging enabled")}function N(T){return"boolean"!=typeof T?new Error("Argument type: "+typeof T+". Please use a boolean."):(Q=!T,"adapter.js deprecation warnings "+(T?"disabled":"enabled"))}function O(){if("object"==typeof window){if(pe)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function b(T,he){!Q||console.warn(T+" is deprecated, please use "+he+" instead.")}function h(T){return"[object Object]"===Object.prototype.toString.call(T)}function S(T){return h(T)?Object.keys(T).reduce(function(he,Re){const se=h(T[Re]),K=se?S(T[Re]):T[Re],L=se&&!Object.keys(K).length;return void 0===K||L?he:Object.assign(he,{[Re]:K})},{}):T}function H(T,he,Re){!he||Re.has(he.id)||(Re.set(he.id,he),Object.keys(he).forEach(se=>{se.endsWith("Id")?H(T,T.get(he[se]),Re):se.endsWith("Ids")&&he[se].forEach(K=>{H(T,T.get(K),Re)})}))}function M(T,he,Re){const se=Re?"outbound-rtp":"inbound-rtp",K=new Map;if(null===he)return K;const L=[];return T.forEach(B=>{"track"===B.type&&B.trackIdentifier===he.id&&L.push(B)}),L.forEach(B=>{T.forEach(te=>{te.type===se&&te.trackId===B.id&&H(T,te,K)})}),K}const x=O;function u(T,he){const Re=T&&T.navigator;if(!Re.mediaDevices)return;const se=function(te){if("object"!=typeof te||te.mandatory||te.optional)return te;const Ce={};return Object.keys(te).forEach(me=>{if("require"===me||"advanced"===me||"mediaSource"===me)return;const Se="object"==typeof te[me]?te[me]:{ideal:te[me]};void 0!==Se.exact&&"number"==typeof Se.exact&&(Se.min=Se.max=Se.exact);const Ye=function(et,bt){return et?et+bt.charAt(0).toUpperCase()+bt.slice(1):"deviceId"===bt?"sourceId":bt};if(void 0!==Se.ideal){Ce.optional=Ce.optional||[];let et={};"number"==typeof Se.ideal?(et[Ye("min",me)]=Se.ideal,Ce.optional.push(et),et={},et[Ye("max",me)]=Se.ideal,Ce.optional.push(et)):(et[Ye("",me)]=Se.ideal,Ce.optional.push(et))}void 0!==Se.exact&&"number"!=typeof Se.exact?(Ce.mandatory=Ce.mandatory||{},Ce.mandatory[Ye("",me)]=Se.exact):["min","max"].forEach(et=>{void 0!==Se[et]&&(Ce.mandatory=Ce.mandatory||{},Ce.mandatory[Ye(et,me)]=Se[et])})}),te.advanced&&(Ce.optional=(Ce.optional||[]).concat(te.advanced)),Ce},K=function(te,Ce){if(he.version>=61)return Ce(te);if((te=JSON.parse(JSON.stringify(te)))&&"object"==typeof te.audio){const me=function(Se,Ye,et){Ye in Se&&!(et in Se)&&(Se[et]=Se[Ye],delete Se[Ye])};me((te=JSON.parse(JSON.stringify(te))).audio,"autoGainControl","googAutoGainControl"),me(te.audio,"noiseSuppression","googNoiseSuppression"),te.audio=se(te.audio)}if(te&&"object"==typeof te.video){let me=te.video.facingMode;me=me&&("object"==typeof me?me:{ideal:me});const Se=he.version<66;if(me&&("user"===me.exact||"environment"===me.exact||"user"===me.ideal||"environment"===me.ideal)&&(!Re.mediaDevices.getSupportedConstraints||!Re.mediaDevices.getSupportedConstraints().facingMode||Se)){let Ye;if(delete te.video.facingMode,"environment"===me.exact||"environment"===me.ideal?Ye=["back","rear"]:("user"===me.exact||"user"===me.ideal)&&(Ye=["front"]),Ye)return Re.mediaDevices.enumerateDevices().then(et=>{let bt=(et=et.filter(Ct=>"videoinput"===Ct.kind)).find(Ct=>Ye.some(Vt=>Ct.label.toLowerCase().includes(Vt)));return!bt&&et.length&&Ye.includes("back")&&(bt=et[et.length-1]),bt&&(te.video.deviceId=me.exact?{exact:bt.deviceId}:{ideal:bt.deviceId}),te.video=se(te.video),x("chrome: "+JSON.stringify(te)),Ce(te)})}te.video=se(te.video)}return x("chrome: "+JSON.stringify(te)),Ce(te)},L=function(te){return he.version>=64?te:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[te.name]||te.name,message:te.message,constraint:te.constraint||te.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(Re.getUserMedia=function(te,Ce,me){K(te,Se=>{Re.webkitGetUserMedia(Se,Ce,Ye=>{me&&me(L(Ye))})})}.bind(Re),Re.mediaDevices.getUserMedia){const te=Re.mediaDevices.getUserMedia.bind(Re.mediaDevices);Re.mediaDevices.getUserMedia=function(Ce){return K(Ce,me=>te(me).then(Se=>{if(me.audio&&!Se.getAudioTracks().length||me.video&&!Se.getVideoTracks().length)throw Se.getTracks().forEach(Ye=>{Ye.stop()}),new DOMException("","NotFoundError");return Se},Se=>Promise.reject(L(Se))))}}}function g(T,he){if((!T.navigator.mediaDevices||!("getDisplayMedia"in T.navigator.mediaDevices))&&T.navigator.mediaDevices){if("function"!=typeof he)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");T.navigator.mediaDevices.getDisplayMedia=function(se){return he(se).then(K=>{const L=se.video&&se.video.width,B=se.video&&se.video.height;return se.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:K,maxFrameRate:se.video&&se.video.frameRate||3}},L&&(se.video.mandatory.maxWidth=L),B&&(se.video.mandatory.maxHeight=B),T.navigator.mediaDevices.getUserMedia(se)})}}}function R(T){T.MediaStream=T.MediaStream||T.webkitMediaStream}function I(T){if("object"==typeof T&&T.RTCPeerConnection&&!("ontrack"in T.RTCPeerConnection.prototype)){Object.defineProperty(T.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(Re){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=Re)},enumerable:!0,configurable:!0});const he=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=se=>{se.stream.addEventListener("addtrack",K=>{let L;L=T.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(te=>te.track&&te.track.id===K.track.id):{track:K.track};const B=new Event("track");B.track=K.track,B.receiver=L,B.transceiver={receiver:L},B.streams=[se.stream],this.dispatchEvent(B)}),se.stream.getTracks().forEach(K=>{let L;L=T.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(te=>te.track&&te.track.id===K.id):{track:K};const B=new Event("track");B.track=K,B.receiver=L,B.transceiver={receiver:L},B.streams=[se.stream],this.dispatchEvent(B)})},this.addEventListener("addstream",this._ontrackpoly)),he.apply(this,arguments)}}else $(T,"track",he=>(he.transceiver||Object.defineProperty(he,"transceiver",{value:{receiver:he.receiver}}),he))}function V(T){if("object"==typeof T&&T.RTCPeerConnection&&!("getSenders"in T.RTCPeerConnection.prototype)&&"createDTMFSender"in T.RTCPeerConnection.prototype){const he=function(K,L){return{track:L,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===L.kind?K.createDTMFSender(L):null),this._dtmf},_pc:K}};if(!T.RTCPeerConnection.prototype.getSenders){T.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const K=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addTrack=function(te,Ce){let me=K.apply(this,arguments);return me||(me=he(this,te),this._senders.push(me)),me};const L=T.RTCPeerConnection.prototype.removeTrack;T.RTCPeerConnection.prototype.removeTrack=function(te){L.apply(this,arguments);const Ce=this._senders.indexOf(te);-1!==Ce&&this._senders.splice(Ce,1)}}const Re=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(L){this._senders=this._senders||[],Re.apply(this,[L]),L.getTracks().forEach(B=>{this._senders.push(he(this,B))})};const se=T.RTCPeerConnection.prototype.removeStream;T.RTCPeerConnection.prototype.removeStream=function(L){this._senders=this._senders||[],se.apply(this,[L]),L.getTracks().forEach(B=>{const te=this._senders.find(Ce=>Ce.track===B);te&&this._senders.splice(this._senders.indexOf(te),1)})}}else if("object"==typeof T&&T.RTCPeerConnection&&"getSenders"in T.RTCPeerConnection.prototype&&"createDTMFSender"in T.RTCPeerConnection.prototype&&T.RTCRtpSender&&!("dtmf"in T.RTCRtpSender.prototype)){const he=T.RTCPeerConnection.prototype.getSenders;T.RTCPeerConnection.prototype.getSenders=function(){const se=he.apply(this,[]);return se.forEach(K=>K._pc=this),se},Object.defineProperty(T.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function Y(T){if(!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){const[se,K,L]=arguments;if(arguments.length>0&&"function"==typeof se)return he.apply(this,arguments);if(0===he.length&&(0===arguments.length||"function"!=typeof se))return he.apply(this,[]);const B=function(Ce){const me={};return Ce.result().forEach(Ye=>{const et={id:Ye.id,timestamp:Ye.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[Ye.type]||Ye.type};Ye.names().forEach(bt=>{et[bt]=Ye.stat(bt)}),me[et.id]=et}),me},te=function(Ce){return new Map(Object.keys(Ce).map(me=>[me,Ce[me]]))};return arguments.length>=2?he.apply(this,[function(me){K(te(B(me)))},se]):new Promise((Ce,me)=>{he.apply(this,[function(Se){Ce(te(B(Se)))},me])}).then(K,L)}}function ne(T){if(!("object"==typeof T&&T.RTCPeerConnection&&T.RTCRtpSender&&T.RTCRtpReceiver))return;if(!("getStats"in T.RTCRtpSender.prototype)){const Re=T.RTCPeerConnection.prototype.getSenders;Re&&(T.RTCPeerConnection.prototype.getSenders=function(){const L=Re.apply(this,[]);return L.forEach(B=>B._pc=this),L});const se=T.RTCPeerConnection.prototype.addTrack;se&&(T.RTCPeerConnection.prototype.addTrack=function(){const L=se.apply(this,arguments);return L._pc=this,L}),T.RTCRtpSender.prototype.getStats=function(){const L=this;return this._pc.getStats().then(B=>M(B,L.track,!0))}}if(!("getStats"in T.RTCRtpReceiver.prototype)){const Re=T.RTCPeerConnection.prototype.getReceivers;Re&&(T.RTCPeerConnection.prototype.getReceivers=function(){const K=Re.apply(this,[]);return K.forEach(L=>L._pc=this),K}),$(T,"track",se=>(se.receiver._pc=se.srcElement,se)),T.RTCRtpReceiver.prototype.getStats=function(){const K=this;return this._pc.getStats().then(L=>M(L,K.track,!1))}}if(!("getStats"in T.RTCRtpSender.prototype)||!("getStats"in T.RTCRtpReceiver.prototype))return;const he=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof T.MediaStreamTrack){const se=arguments[0];let K,L,B;return this.getSenders().forEach(te=>{te.track===se&&(K?B=!0:K=te)}),this.getReceivers().forEach(te=>(te.track===se&&(L?B=!0:L=te),te.track===se)),B||K&&L?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):K?K.getStats():L?L.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return he.apply(this,arguments)}}function re(T){T.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(B=>this._shimmedLocalStreams[B][0])};const he=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addTrack=function(B,te){if(!te)return he.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const Ce=he.apply(this,arguments);return this._shimmedLocalStreams[te.id]?-1===this._shimmedLocalStreams[te.id].indexOf(Ce)&&this._shimmedLocalStreams[te.id].push(Ce):this._shimmedLocalStreams[te.id]=[te,Ce],Ce};const Re=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(B){this._shimmedLocalStreams=this._shimmedLocalStreams||{},B.getTracks().forEach(me=>{if(this.getSenders().find(Ye=>Ye.track===me))throw new DOMException("Track already exists.","InvalidAccessError")});const te=this.getSenders();Re.apply(this,arguments);const Ce=this.getSenders().filter(me=>-1===te.indexOf(me));this._shimmedLocalStreams[B.id]=[B].concat(Ce)};const se=T.RTCPeerConnection.prototype.removeStream;T.RTCPeerConnection.prototype.removeStream=function(B){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[B.id],se.apply(this,arguments)};const K=T.RTCPeerConnection.prototype.removeTrack;T.RTCPeerConnection.prototype.removeTrack=function(B){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},B&&Object.keys(this._shimmedLocalStreams).forEach(te=>{const Ce=this._shimmedLocalStreams[te].indexOf(B);-1!==Ce&&this._shimmedLocalStreams[te].splice(Ce,1),1===this._shimmedLocalStreams[te].length&&delete this._shimmedLocalStreams[te]}),K.apply(this,arguments)}}function ue(T,he){if(!T.RTCPeerConnection)return;if(T.RTCPeerConnection.prototype.addTrack&&he.version>=65)return re(T);const Re=T.RTCPeerConnection.prototype.getLocalStreams;T.RTCPeerConnection.prototype.getLocalStreams=function(){const Se=Re.apply(this);return this._reverseStreams=this._reverseStreams||{},Se.map(Ye=>this._reverseStreams[Ye.id])};const se=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(Se){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Se.getTracks().forEach(Ye=>{if(this.getSenders().find(bt=>bt.track===Ye))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[Se.id]){const Ye=new T.MediaStream(Se.getTracks());this._streams[Se.id]=Ye,this._reverseStreams[Ye.id]=Se,Se=Ye}se.apply(this,[Se])};const K=T.RTCPeerConnection.prototype.removeStream;function L(me,Se){let Ye=Se.sdp;return Object.keys(me._reverseStreams||[]).forEach(et=>{const bt=me._reverseStreams[et];Ye=Ye.replace(new RegExp(me._streams[bt.id].id,"g"),bt.id)}),new RTCSessionDescription({type:Se.type,sdp:Ye})}function B(me,Se){let Ye=Se.sdp;return Object.keys(me._reverseStreams||[]).forEach(et=>{const bt=me._reverseStreams[et],Ct=me._streams[bt.id];Ye=Ye.replace(new RegExp(bt.id,"g"),Ct.id)}),new RTCSessionDescription({type:Se.type,sdp:Ye})}T.RTCPeerConnection.prototype.removeStream=function(Se){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},K.apply(this,[this._streams[Se.id]||Se]),delete this._reverseStreams[this._streams[Se.id]?this._streams[Se.id].id:Se.id],delete this._streams[Se.id]},T.RTCPeerConnection.prototype.addTrack=function(Se,Ye){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const et=[].slice.call(arguments,1);if(1!==et.length||!et[0].getTracks().find(Vt=>Vt===Se))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Vt=>Vt.track===Se))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const Ct=this._streams[Ye.id];if(Ct)Ct.addTrack(Se),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Vt=new T.MediaStream([Se]);this._streams[Ye.id]=Vt,this._reverseStreams[Vt.id]=Ye,this.addStream(Vt)}return this.getSenders().find(Vt=>Vt.track===Se)},["createOffer","createAnswer"].forEach(function(me){const Se=T.RTCPeerConnection.prototype[me],Ye={[me](){const et=arguments;return arguments.length&&"function"==typeof arguments[0]?Se.apply(this,[Ct=>{const Vt=L(this,Ct);et[0].apply(null,[Vt])},Ct=>{et[1]&&et[1].apply(null,Ct)},arguments[2]]):Se.apply(this,arguments).then(Ct=>L(this,Ct))}};T.RTCPeerConnection.prototype[me]=Ye[me]});const te=T.RTCPeerConnection.prototype.setLocalDescription;T.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=B(this,arguments[0]),te.apply(this,arguments)):te.apply(this,arguments)};const Ce=Object.getOwnPropertyDescriptor(T.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(T.RTCPeerConnection.prototype,"localDescription",{get(){const me=Ce.get.apply(this);return""===me.type?me:L(this,me)}}),T.RTCPeerConnection.prototype.removeTrack=function(Se){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!Se._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(Se._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let et;this._streams=this._streams||{},Object.keys(this._streams).forEach(bt=>{this._streams[bt].getTracks().find(Vt=>Se.track===Vt)&&(et=this._streams[bt])}),et&&(1===et.getTracks().length?this.removeStream(this._reverseStreams[et.id]):et.removeTrack(Se.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ve(T,he){!T.RTCPeerConnection&&T.webkitRTCPeerConnection&&(T.RTCPeerConnection=T.webkitRTCPeerConnection),T.RTCPeerConnection&&he.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Re){const se=T.RTCPeerConnection.prototype[Re],K={[Re](){return arguments[0]=new("addIceCandidate"===Re?T.RTCIceCandidate:T.RTCSessionDescription)(arguments[0]),se.apply(this,arguments)}};T.RTCPeerConnection.prototype[Re]=K[Re]})}function we(T,he){$(T,"negotiationneeded",Re=>{const se=Re.target;if(!(he.version<72||se.getConfiguration&&"plan-b"===se.getConfiguration().sdpSemantics)||"stable"===se.signalingState)return Re})}function Ie(T,he){const Re=T&&T.navigator,se=T&&T.MediaStreamTrack;if(Re.getUserMedia=function(K,L,B){b("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),Re.mediaDevices.getUserMedia(K).then(L,B)},!(he.version>55&&"autoGainControl"in Re.mediaDevices.getSupportedConstraints())){const K=function(B,te,Ce){te in B&&!(Ce in B)&&(B[Ce]=B[te],delete B[te])},L=Re.mediaDevices.getUserMedia.bind(Re.mediaDevices);if(Re.mediaDevices.getUserMedia=function(B){return"object"==typeof B&&"object"==typeof B.audio&&(B=JSON.parse(JSON.stringify(B)),K(B.audio,"autoGainControl","mozAutoGainControl"),K(B.audio,"noiseSuppression","mozNoiseSuppression")),L(B)},se&&se.prototype.getSettings){const B=se.prototype.getSettings;se.prototype.getSettings=function(){const te=B.apply(this,arguments);return K(te,"mozAutoGainControl","autoGainControl"),K(te,"mozNoiseSuppression","noiseSuppression"),te}}if(se&&se.prototype.applyConstraints){const B=se.prototype.applyConstraints;se.prototype.applyConstraints=function(te){return"audio"===this.kind&&"object"==typeof te&&(te=JSON.parse(JSON.stringify(te)),K(te,"autoGainControl","mozAutoGainControl"),K(te,"noiseSuppression","mozNoiseSuppression")),B.apply(this,[te])}}}}function de(T,he){T.navigator.mediaDevices&&"getDisplayMedia"in T.navigator.mediaDevices||!T.navigator.mediaDevices||(T.navigator.mediaDevices.getDisplayMedia=function(se){if(!se||!se.video){const K=new DOMException("getDisplayMedia without video constraints is undefined");return K.name="NotFoundError",K.code=8,Promise.reject(K)}return!0===se.video?se.video={mediaSource:he}:se.video.mediaSource=he,T.navigator.mediaDevices.getUserMedia(se)})}function Me(T){"object"==typeof T&&T.RTCTrackEvent&&"receiver"in T.RTCTrackEvent.prototype&&!("transceiver"in T.RTCTrackEvent.prototype)&&Object.defineProperty(T.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pe(T,he){if("object"!=typeof T||!T.RTCPeerConnection&&!T.mozRTCPeerConnection)return;!T.RTCPeerConnection&&T.mozRTCPeerConnection&&(T.RTCPeerConnection=T.mozRTCPeerConnection),he.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(K){const L=T.RTCPeerConnection.prototype[K],B={[K](){return arguments[0]=new("addIceCandidate"===K?T.RTCIceCandidate:T.RTCSessionDescription)(arguments[0]),L.apply(this,arguments)}};T.RTCPeerConnection.prototype[K]=B[K]});const Re={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},se=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){const[L,B,te]=arguments;return se.apply(this,[L||null]).then(Ce=>{if(he.version<53&&!B)try{Ce.forEach(me=>{me.type=Re[me.type]||me.type})}catch(me){if("TypeError"!==me.name)throw me;Ce.forEach((Se,Ye)=>{Ce.set(Ye,Object.assign({},Se,{type:Re[Se.type]||Se.type}))})}return Ce}).then(B,te)}}function Fe(T){if("object"!=typeof T||!T.RTCPeerConnection||!T.RTCRtpSender||T.RTCRtpSender&&"getStats"in T.RTCRtpSender.prototype)return;const he=T.RTCPeerConnection.prototype.getSenders;he&&(T.RTCPeerConnection.prototype.getSenders=function(){const K=he.apply(this,[]);return K.forEach(L=>L._pc=this),K});const Re=T.RTCPeerConnection.prototype.addTrack;Re&&(T.RTCPeerConnection.prototype.addTrack=function(){const K=Re.apply(this,arguments);return K._pc=this,K}),T.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function $e(T){if("object"!=typeof T||!T.RTCPeerConnection||!T.RTCRtpSender||T.RTCRtpSender&&"getStats"in T.RTCRtpReceiver.prototype)return;const he=T.RTCPeerConnection.prototype.getReceivers;he&&(T.RTCPeerConnection.prototype.getReceivers=function(){const se=he.apply(this,[]);return se.forEach(K=>K._pc=this),se}),$(T,"track",Re=>(Re.receiver._pc=Re.srcElement,Re)),T.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function J(T){!T.RTCPeerConnection||"removeStream"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.removeStream=function(Re){b("removeStream","removeTrack"),this.getSenders().forEach(se=>{se.track&&Re.getTracks().includes(se.track)&&this.removeTrack(se)})})}function v(T){T.DataChannel&&!T.RTCDataChannel&&(T.RTCDataChannel=T.DataChannel)}function E(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.addTransceiver;he&&(T.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const se=arguments[1],K=se&&"sendEncodings"in se;K&&se.sendEncodings.forEach(B=>{if("rid"in B&&!/^[a-z0-9]{0,16}$/i.test(B.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in B&&!(parseFloat(B.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in B&&!(parseFloat(B.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const L=he.apply(this,arguments);if(K){const{sender:B}=L,te=B.getParameters();(!("encodings"in te)||1===te.encodings.length&&0===Object.keys(te.encodings[0]).length)&&(te.encodings=se.sendEncodings,B.sendEncodings=se.sendEncodings,this.setParametersPromises.push(B.setParameters(te).then(()=>{delete B.sendEncodings}).catch(()=>{delete B.sendEncodings})))}return L})}function d(T){if("object"!=typeof T||!T.RTCRtpSender)return;const he=T.RTCRtpSender.prototype.getParameters;he&&(T.RTCRtpSender.prototype.getParameters=function(){const se=he.apply(this,arguments);return"encodings"in se||(se.encodings=[].concat(this.sendEncodings||[{}])),se})}function C(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.createOffer;T.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>he.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):he.apply(this,arguments)}}function D(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.createAnswer;T.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>he.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):he.apply(this,arguments)}}function F(T){if("object"==typeof T&&T.RTCPeerConnection){if("getLocalStreams"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in T.RTCPeerConnection.prototype)){const he=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addStream=function(se){this._localStreams||(this._localStreams=[]),this._localStreams.includes(se)||this._localStreams.push(se),se.getAudioTracks().forEach(K=>he.call(this,K,se)),se.getVideoTracks().forEach(K=>he.call(this,K,se))},T.RTCPeerConnection.prototype.addTrack=function(se,...K){return K&&K.forEach(L=>{this._localStreams?this._localStreams.includes(L)||this._localStreams.push(L):this._localStreams=[L]}),he.apply(this,arguments)}}"removeStream"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.removeStream=function(Re){this._localStreams||(this._localStreams=[]);const se=this._localStreams.indexOf(Re);if(-1===se)return;this._localStreams.splice(se,1);const K=Re.getTracks();this.getSenders().forEach(L=>{K.includes(L.track)&&this.removeTrack(L)})})}}function j(T){if("object"==typeof T&&T.RTCPeerConnection&&("getRemoteStreams"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in T.RTCPeerConnection.prototype))){Object.defineProperty(T.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(Re){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=Re),this.addEventListener("track",this._onaddstreampoly=se=>{se.streams.forEach(K=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(K))return;this._remoteStreams.push(K);const L=new Event("addstream");L.stream=K,this.dispatchEvent(L)})})}});const he=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){const se=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(K){K.streams.forEach(L=>{if(se._remoteStreams||(se._remoteStreams=[]),se._remoteStreams.indexOf(L)>=0)return;se._remoteStreams.push(L);const B=new Event("addstream");B.stream=L,se.dispatchEvent(B)})}),he.apply(se,arguments)}}}function W(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype,Re=he.createOffer,se=he.createAnswer,K=he.setLocalDescription,L=he.setRemoteDescription,B=he.addIceCandidate;he.createOffer=function(me,Se){const Ye=arguments.length>=2?arguments[2]:arguments[0],et=Re.apply(this,[Ye]);return Se?(et.then(me,Se),Promise.resolve()):et},he.createAnswer=function(me,Se){const Ye=arguments.length>=2?arguments[2]:arguments[0],et=se.apply(this,[Ye]);return Se?(et.then(me,Se),Promise.resolve()):et};let te=function(Ce,me,Se){const Ye=K.apply(this,[Ce]);return Se?(Ye.then(me,Se),Promise.resolve()):Ye};he.setLocalDescription=te,te=function(Ce,me,Se){const Ye=L.apply(this,[Ce]);return Se?(Ye.then(me,Se),Promise.resolve()):Ye},he.setRemoteDescription=te,te=function(Ce,me,Se){const Ye=B.apply(this,[Ce]);return Se?(Ye.then(me,Se),Promise.resolve()):Ye},he.addIceCandidate=te}function fe(T){const he=T&&T.navigator;if(he.mediaDevices&&he.mediaDevices.getUserMedia){const Re=he.mediaDevices,se=Re.getUserMedia.bind(Re);he.mediaDevices.getUserMedia=K=>se(be(K))}!he.getUserMedia&&he.mediaDevices&&he.mediaDevices.getUserMedia&&(he.getUserMedia=function(se,K,L){he.mediaDevices.getUserMedia(se).then(K,L)}.bind(he))}function be(T){return T&&void 0!==T.video?Object.assign({},T,{video:S(T.video)}):T}function _e(T){if(!T.RTCPeerConnection)return;const he=T.RTCPeerConnection;T.RTCPeerConnection=function(se,K){if(se&&se.iceServers){const L=[];for(let B=0;B<se.iceServers.length;B++){let te=se.iceServers[B];!te.hasOwnProperty("urls")&&te.hasOwnProperty("url")?(b("RTCIceServer.url","RTCIceServer.urls"),te=JSON.parse(JSON.stringify(te)),te.urls=te.url,delete te.url,L.push(te)):L.push(se.iceServers[B])}se.iceServers=L}return new he(se,K)},T.RTCPeerConnection.prototype=he.prototype,"generateCertificate"in he&&Object.defineProperty(T.RTCPeerConnection,"generateCertificate",{get:()=>he.generateCertificate})}function Ae(T){"object"==typeof T&&T.RTCTrackEvent&&"receiver"in T.RTCTrackEvent.prototype&&!("transceiver"in T.RTCTrackEvent.prototype)&&Object.defineProperty(T.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xe(T){const he=T.RTCPeerConnection.prototype.createOffer;T.RTCPeerConnection.prototype.createOffer=function(se){if(se){void 0!==se.offerToReceiveAudio&&(se.offerToReceiveAudio=!!se.offerToReceiveAudio);const K=this.getTransceivers().find(B=>"audio"===B.receiver.track.kind);!1===se.offerToReceiveAudio&&K?"sendrecv"===K.direction?K.setDirection?K.setDirection("sendonly"):K.direction="sendonly":"recvonly"===K.direction&&(K.setDirection?K.setDirection("inactive"):K.direction="inactive"):!0===se.offerToReceiveAudio&&!K&&this.addTransceiver("audio",{direction:"recvonly"}),void 0!==se.offerToReceiveVideo&&(se.offerToReceiveVideo=!!se.offerToReceiveVideo);const L=this.getTransceivers().find(B=>"video"===B.receiver.track.kind);!1===se.offerToReceiveVideo&&L?"sendrecv"===L.direction?L.setDirection?L.setDirection("sendonly"):L.direction="sendonly":"recvonly"===L.direction&&(L.setDirection?L.setDirection("inactive"):L.direction="inactive"):!0===se.offerToReceiveVideo&&!L&&this.addTransceiver("video",{direction:"recvonly"})}return he.apply(this,arguments)}}function ke(T){"object"!=typeof T||T.AudioContext||(T.AudioContext=T.webkitAudioContext)}var ze=X(463),tt=X.n(ze);function Oe(T){if(!T.RTCIceCandidate||T.RTCIceCandidate&&"foundation"in T.RTCIceCandidate.prototype)return;const he=T.RTCIceCandidate;T.RTCIceCandidate=function(se){if("object"==typeof se&&se.candidate&&0===se.candidate.indexOf("a=")&&((se=JSON.parse(JSON.stringify(se))).candidate=se.candidate.substr(2)),se.candidate&&se.candidate.length){const K=new he(se),L=tt().parseCandidate(se.candidate),B=Object.assign(K,L);return B.toJSON=function(){return{candidate:B.candidate,sdpMid:B.sdpMid,sdpMLineIndex:B.sdpMLineIndex,usernameFragment:B.usernameFragment}},B}return new he(se)},T.RTCIceCandidate.prototype=he.prototype,$(T,"icecandidate",Re=>(Re.candidate&&Object.defineProperty(Re,"candidate",{value:new T.RTCIceCandidate(Re.candidate),writable:"false"}),Re))}function Ve(T,he){if(!T.RTCPeerConnection)return;"sctp"in T.RTCPeerConnection.prototype||Object.defineProperty(T.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const Re=function(te){if(!te||!te.sdp)return!1;const Ce=tt().splitSections(te.sdp);return Ce.shift(),Ce.some(me=>{const Se=tt().parseMLine(me);return Se&&"application"===Se.kind&&-1!==Se.protocol.indexOf("SCTP")})},se=function(te){const Ce=te.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===Ce||Ce.length<2)return-1;const me=parseInt(Ce[1],10);return me!=me?-1:me},K=function(te){let Ce=65536;return"firefox"===he.browser&&(Ce=he.version<57?-1===te?16384:2147483637:he.version<60?57===he.version?65535:65536:2147483637),Ce},L=function(te,Ce){let me=65536;"firefox"===he.browser&&57===he.version&&(me=65535);const Se=tt().matchPrefix(te.sdp,"a=max-message-size:");return Se.length>0?me=parseInt(Se[0].substr(19),10):"firefox"===he.browser&&-1!==Ce&&(me=2147483637),me},B=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===he.browser&&he.version>=76){const{sdpSemantics:Ce}=this.getConfiguration();"plan-b"===Ce&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(Re(arguments[0])){const Ce=se(arguments[0]),me=K(Ce),Se=L(arguments[0],Ce);let Ye;Ye=0===me&&0===Se?Number.POSITIVE_INFINITY:0===me||0===Se?Math.max(me,Se):Math.min(me,Se);const et={};Object.defineProperty(et,"maxMessageSize",{get:()=>Ye}),this._sctp=et}return B.apply(this,arguments)}}function je(T){if(!T.RTCPeerConnection||!("createDataChannel"in T.RTCPeerConnection.prototype))return;function he(se,K){const L=se.send;se.send=function(){const te=arguments[0],Ce=te.length||te.size||te.byteLength;if("open"===se.readyState&&K.sctp&&Ce>K.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+K.sctp.maxMessageSize+" bytes)");return L.apply(se,arguments)}}const Re=T.RTCPeerConnection.prototype.createDataChannel;T.RTCPeerConnection.prototype.createDataChannel=function(){const K=Re.apply(this,arguments);return he(K,this),K},$(T,"datachannel",se=>(he(se.channel,se.target),se))}function U(T){if(!T.RTCPeerConnection||"connectionState"in T.RTCPeerConnection.prototype)return;const he=T.RTCPeerConnection.prototype;Object.defineProperty(he,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(he,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(Re){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),Re&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=Re)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(Re=>{const se=he[Re];he[Re]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=K=>{const L=K.target;if(L._lastConnectionState!==L.connectionState){L._lastConnectionState=L.connectionState;const B=new Event("connectionstatechange",K);L.dispatchEvent(B)}return K},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),se.apply(this,arguments)}})}function ie(T,he){if(!T.RTCPeerConnection||"chrome"===he.browser&&he.version>=71||"safari"===he.browser&&he.version>=605)return;const Re=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(K){if(K&&K.sdp&&-1!==K.sdp.indexOf("\na=extmap-allow-mixed")){const L=K.sdp.split("\n").filter(B=>"a=extmap-allow-mixed"!==B.trim()).join("\n");T.RTCSessionDescription&&K instanceof T.RTCSessionDescription?arguments[0]=new T.RTCSessionDescription({type:K.type,sdp:L}):K.sdp=L}return Re.apply(this,arguments)}}function Te(T,he){if(!T.RTCPeerConnection||!T.RTCPeerConnection.prototype)return;const Re=T.RTCPeerConnection.prototype.addIceCandidate;!Re||0===Re.length||(T.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===he.browser&&he.version<78||"firefox"===he.browser&&he.version<68||"safari"===he.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():Re.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ke(T,he){if(!T.RTCPeerConnection||!T.RTCPeerConnection.prototype)return;const Re=T.RTCPeerConnection.prototype.setLocalDescription;!Re||0===Re.length||(T.RTCPeerConnection.prototype.setLocalDescription=function(){let K=arguments[0]||{};if("object"!=typeof K||K.type&&K.sdp)return Re.apply(this,arguments);if(K={type:K.type,sdp:K.sdp},!K.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":K.type="offer";break;default:K.type="answer"}return K.sdp||"offer"!==K.type&&"answer"!==K.type?Re.apply(this,[K]):("offer"===K.type?this.createOffer:this.createAnswer).apply(this).then(B=>Re.apply(this,[B]))})}const it=function qe({window:T}={},he={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const Re=O,se=function _(T){const he={browser:null,version:null};if(void 0===T||!T.navigator)return he.browser="Not a browser.",he;const{navigator:Re}=T;if(Re.mozGetUserMedia)he.browser="firefox",he.version=y(Re.userAgent,/Firefox\/(\d+)\./,1);else if(Re.webkitGetUserMedia||!1===T.isSecureContext&&T.webkitRTCPeerConnection&&!T.RTCIceGatherer)he.browser="chrome",he.version=y(Re.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!T.RTCPeerConnection||!Re.userAgent.match(/AppleWebKit\/(\d+)\./))return he.browser="Not a supported browser.",he;he.browser="safari",he.version=y(Re.userAgent,/AppleWebKit\/(\d+)\./,1),he.supportsUnifiedPlan=T.RTCRtpTransceiver&&"currentDirection"in T.RTCRtpTransceiver.prototype}return he}(T),K={browserDetails:se,commonShim:le,extractVersion:y,disableLog:P,disableWarnings:N,sdp:ze};switch(se.browser){case"chrome":if(!p||!ve||!he.shimChrome)return Re("Chrome shim is not included in this adapter release."),K;if(null===se.version)return Re("Chrome shim can not determine version, not shimming."),K;Re("adapter.js shimming chrome."),K.browserShim=p,Te(T,se),Ke(T),u(T,se),R(T),ve(T,se),I(T),ue(T,se),V(T),Y(T),ne(T),we(T,se),Oe(T),U(T),Ve(T,se),je(T),ie(T,se);break;case"firefox":if(!ce||!Pe||!he.shimFirefox)return Re("Firefox shim is not included in this adapter release."),K;Re("adapter.js shimming firefox."),K.browserShim=ce,Te(T,se),Ke(T),Ie(T,se),Pe(T,se),Me(T),J(T),Fe(T),$e(T),v(T),E(T),d(T),C(T),D(T),Oe(T),U(T),Ve(T,se),je(T);break;case"safari":if(!ae||!he.shimSafari)return Re("Safari shim is not included in this adapter release."),K;Re("adapter.js shimming safari."),K.browserShim=ae,Te(T,se),Ke(T),_e(T),xe(T),W(T),F(T),j(T),Ae(T),fe(T),ke(T),Oe(T),Ve(T,se),je(T),ie(T,se);break;default:Re("Unsupported browser!")}return K}({window:"undefined"==typeof window?void 0:window})},69:We=>{function k(){}We.exports=k,k.mixin=function(X){var p=X.prototype||X;p.isWildEmitter=!0,p.on=function(ce,ae,le){this.callbacks=this.callbacks||{};var pe=3===arguments.length,Q=pe?arguments[1]:void 0,y=pe?arguments[2]:arguments[1];return y._groupName=Q,(this.callbacks[ce]=this.callbacks[ce]||[]).push(y),this},p.once=function(ce,ae,le){var pe=this,Q=3===arguments.length,y=Q?arguments[1]:void 0,$=Q?arguments[2]:arguments[1];function P(){pe.off(ce,P),$.apply(this,arguments)}return this.on(ce,y,P),this},p.releaseGroup=function(ce){var ae,le,pe,Q;for(ae in this.callbacks=this.callbacks||{},this.callbacks)for(le=0,pe=(Q=this.callbacks[ae]).length;le<pe;le++)Q[le]._groupName===ce&&(Q.splice(le,1),le--,pe--);return this},p.off=function(ce,ae){this.callbacks=this.callbacks||{};var pe,le=this.callbacks[ce];return le?1===arguments.length?(delete this.callbacks[ce],this):(-1!==(pe=le.indexOf(ae))&&(le.splice(pe,1),0===le.length&&delete this.callbacks[ce]),this):this},p.emit=function(ce){this.callbacks=this.callbacks||{};var Q,y,P,ae=[].slice.call(arguments,1),le=this.callbacks[ce],pe=this.getWildcardCallbacks(ce);if(le)for(Q=0,y=(P=le.slice()).length;Q<y&&P[Q];++Q)P[Q].apply(this,ae);if(pe)for(y=pe.length,Q=0,y=(P=pe.slice()).length;Q<y&&P[Q];++Q)P[Q].apply(this,[ce].concat(ae));return this},p.getWildcardCallbacks=function(ce){this.callbacks=this.callbacks||{};var ae,le,pe=[];for(ae in this.callbacks)le=ae.split("*"),("*"===ae||2===le.length&&ce.slice(0,le[0].length)===le[0])&&(pe=pe.concat(this.callbacks[ae]));return pe}},k.mixin(k)},926:We=>{function k(p,ce,ae,le,pe,Q,y){try{var $=p[Q](y),P=$.value}catch(N){return void ae(N)}$.done?ce(P):Promise.resolve(P).then(le,pe)}We.exports=function X(p){return function(){var ce=this,ae=arguments;return new Promise(function(le,pe){var Q=p.apply(ce,ae);function y(P){k(Q,le,pe,y,$,"next",P)}function $(P){k(Q,le,pe,y,$,"throw",P)}y(void 0)})}},We.exports.__esModule=!0,We.exports.default=We.exports},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},We=>{We(We.s=135)}]);
var SB=Object.defineProperty,EB=Object.defineProperties,wB=Object.getOwnPropertyDescriptors,JS=Object.getOwnPropertySymbols,AB=Object.prototype.hasOwnProperty,DB=Object.prototype.propertyIsEnumerable,Gp=(We,O,X)=>O in We?SB(We,O,{enumerable:!0,configurable:!0,writable:!0,value:X}):We[O]=X,zp=(We,O)=>{for(var X in O||(O={}))AB.call(O,X)&&Gp(We,X,O[X]);if(JS)for(var X of JS(O))DB.call(O,X)&&Gp(We,X,O[X]);return We},Wp=(We,O)=>EB(We,wB(O)),Ou=(We,O,X)=>(Gp(We,"symbol"!=typeof O?O+"":O,X),X),qp=(We,O,X)=>{if(!O.has(We))throw TypeError("Cannot "+X)},pt=(We,O,X)=>(qp(We,O,"read from private field"),X?X.call(We):O.get(We)),bt=(We,O,X)=>{if(O.has(We))throw TypeError("Cannot add the same private member more than once");O instanceof WeakSet?O.add(We):O.set(We,X)},pn=(We,O,X,p)=>(qp(We,O,"write to private field"),p?p.call(We,X):O.set(We,X),X),QS=(We,O,X,p)=>({set _(ce){pn(We,O,ce,X)},get _(){return pt(We,O,p)}}),yt=(We,O,X)=>(qp(We,O,"access private method"),X);(self.webpackChunkangularPlayer=self.webpackChunkangularPlayer||[]).push([[179],{739:(We,O,X)=>{"use strict";function p(n){return"function"==typeof n}function ce(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ae=ce(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function le(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class pe{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(p(r))try{r()}catch(s){e=s instanceof ae?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{G(s)}catch(o){e=null!=e?e:[],o instanceof ae?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ae(e)}}add(e){var t;if(e&&e!==this)if(this.closed)G(e);else{if(e instanceof pe){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&le(t,e)}remove(e){const{_finalizers:t}=this;t&&le(t,e),e instanceof pe&&e._removeParent(this)}}pe.EMPTY=(()=>{const n=new pe;return n.closed=!0,n})();const ee=pe.EMPTY;function y(n){return n instanceof pe||n&&"closed"in n&&p(n.remove)&&p(n.add)&&p(n.unsubscribe)}function G(n){p(n)?n():n.unsubscribe()}const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(n,e,...t){const{delegate:r}=N;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=N;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function F(n){N.setTimeout(()=>{const{onUnhandledError:e}=M;if(!e)throw n;e(n)})}function b(){}const _=U("C",void 0,void 0);function U(n,e,t){return{kind:n,value:e,error:t}}let x=null;function P(n){if(M.useDeprecatedSynchronousErrorHandling){const e=!x;if(e&&(x={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=x;if(x=null,t)throw r}}else n()}class g extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,y(e)&&e.add(this)):this.destination=ve}static create(e,t,r){return new Y(e,t,r)}next(e){this.isStopped?ue(function w(n){return U("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ue(function h(n){return U("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ue(_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const R=Function.prototype.bind;function I(n,e){return R.call(n,e)}class V{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ne(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ne(r)}else ne(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ne(t)}}}class Y extends g{constructor(e,t,r){let i;if(super(),p(e)||!e)i={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let s;this&&M.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&I(e.next,s),error:e.error&&I(e.error,s),complete:e.complete&&I(e.complete,s)}):i=e}this.destination=new V(i)}}function ne(n){M.useDeprecatedSynchronousErrorHandling?function u(n){M.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=n)}(n):F(n)}function ue(n,e){const{onStoppedNotification:t}=M;t&&N.setTimeout(()=>t(n,e))}const ve={closed:!0,next:b,error:function re(n){throw n},complete:b},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ie(n){return n}let xe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Q(n){return n&&n instanceof g||function $e(n){return n&&p(n.next)&&p(n.error)&&p(n.complete)}(n)&&y(n)}(t)?t:new Y(t,r,i);return P(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Le(r))((i,s)=>{const o=new Y({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ae](){return this}pipe(...t){return function Me(n){return 0===n.length?Ie:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=Le(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Le(n){var e;return null!==(e=null!=n?n:M.Promise)&&void 0!==e?e:Promise}const v=ce(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class n extends xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new d(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new v}next(t){P(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){P(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){P(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ee:(this.currentObservers=null,s.push(t),new pe(()=>{this.currentObservers=null,le(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new xe;return t.source=this,t}}return n.create=(e,t)=>new d(e,t),n})();class d extends E{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ee}}function S(n){return p(null==n?void 0:n.lift)}function D(n){return e=>{if(S(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function k(n,e,t,r,i){return new H(n,e,t,r,i)}class H extends g{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function W(n,e){return D((t,r)=>{let i=0;t.subscribe(k(r,s=>{r.next(n.call(e,s,i++))}))})}function Xe(n){return this instanceof Xe?(this.v=n,this):new Xe(n)}function it(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(j){r[j]&&(i[j]=function(J){return new Promise(function(be,Fe){s.push([j,J,be,Fe])>1||a(j,J)})})}function a(j,J){try{!function l(j){j.value instanceof Xe?Promise.resolve(j.value.v).then(c,f):C(s[0][2],j)}(r[j](J))}catch(be){C(s[0][3],be)}}function c(j){a("next",j)}function f(j){a("throw",j)}function C(j,J){j(J),s.shift(),s.length&&a(s[0][0],s[0][1])}}function he(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function $(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const me=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ee(n){return p(null==n?void 0:n.then)}function Ye(n){return p(n[Ae])}function et(n){return Symbol.asyncIterator&&p(null==n?void 0:n[Symbol.asyncIterator])}function Ct(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $t=function St(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function dn(n){return p(null==n?void 0:n[$t])}function pr(n){return it(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Xe(t.read());if(i)return yield Xe(void 0);yield yield Xe(r)}}finally{t.releaseLock()}})}function an(n){return p(null==n?void 0:n.getReader)}function Zt(n){if(n instanceof xe)return n;if(null!=n){if(Ye(n))return function Lr(n){return new xe(e=>{const t=n[Ae]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(me(n))return function wr(n){return new xe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ee(n))return function Nr(n){return new xe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,F)})}(n);if(et(n))return Sn(n);if(dn(n))return function Gn(n){return new xe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(an(n))return function Cs(n){return Sn(pr(n))}(n)}throw Ct(n)}function Sn(n){return new xe(e=>{(function ea(n,e){var t,r,i,s;return function tt(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(f){try{c(r.next(f))}catch(C){o(C)}}function l(f){try{c(r.throw(f))}catch(C){o(C)}}function c(f){f.done?s(f.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=he(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ki(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Fn(n,e,t=1/0){return p(e)?Fn((r,i)=>W((s,o)=>e(r,s,i,o))(Zt(n(r,i))),t):("number"==typeof e&&(t=e),D((r,i)=>function uE(n,e,t,r,i,s,o,a){const l=[];let c=0,f=0,C=!1;const j=()=>{C&&!l.length&&!c&&e.complete()},J=Fe=>c<r?be(Fe):l.push(Fe),be=Fe=>{s&&e.next(Fe),c++;let Je=!1;Zt(t(Fe,f++)).subscribe(k(e,Ze=>{null==i||i(Ze),s?J(Ze):e.next(Ze)},()=>{Je=!0},void 0,()=>{if(Je)try{for(c--;l.length&&c<r;){const Ze=l.shift();o?ki(e,o,()=>be(Ze)):be(Ze)}j()}catch(Ze){e.error(Ze)}}))};return n.subscribe(k(e,J,()=>{C=!0,j()})),()=>{null==a||a()}}(r,i,n,t)))}function ta(n=1/0){return Fn(Ie,n)}const Oi=new xe(n=>n.complete());function Bu(n){return n[n.length-1]}function Jp(n){return p(Bu(n))?n.pop():void 0}function na(n){return function hE(n){return n&&p(n.schedule)}(Bu(n))?n.pop():void 0}function Qp(n,e=0){return D((t,r)=>{t.subscribe(k(r,i=>ki(r,n,()=>r.next(i),e),()=>ki(r,n,()=>r.complete(),e),i=>ki(r,n,()=>r.error(i),e)))})}function Zp(n,e=0){return D((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function eg(n,e){if(!n)throw new Error("Iterable cannot be null");return new xe(t=>{ki(t,e,()=>{const r=n[Symbol.asyncIterator]();ki(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Vn(n,e){return e?function vE(n,e){if(null!=n){if(Ye(n))return function pE(n,e){return Zt(n).pipe(Zp(e),Qp(e))}(n,e);if(me(n))return function mE(n,e){return new xe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ee(n))return function gE(n,e){return Zt(n).pipe(Zp(e),Qp(e))}(n,e);if(et(n))return eg(n,e);if(dn(n))return function _E(n,e){return new xe(t=>{let r;return ki(t,e,()=>{r=n[$t](),ki(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>p(null==r?void 0:r.return)&&r.return()})}(n,e);if(an(n))return function yE(n,e){return eg(pr(n),e)}(n,e)}throw Ct(n)}(n,e):Zt(n)}function ju(...n){const e=na(n),t=function fE(n,e){return"number"==typeof Bu(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Zt(r[0]):ta(t)(Vn(r,e)):Oi}function ra(n){return n<=0?()=>Oi:D((e,t)=>{let r=0;e.subscribe(k(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tg(n={}){const{connector:e=(()=>new E),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o=null,a=null,l=null,c=0,f=!1,C=!1;const j=()=>{null==a||a.unsubscribe(),a=null},J=()=>{j(),o=l=null,f=C=!1},be=()=>{const Fe=o;J(),null==Fe||Fe.unsubscribe()};return D((Fe,Je)=>{c++,!C&&!f&&j();const Ze=l=null!=l?l:e();Je.add(()=>{c--,0===c&&!C&&!f&&(a=Hu(be,i))}),Ze.subscribe(Je),o||(o=new Y({next:Ve=>Ze.next(Ve),error:Ve=>{C=!0,j(),a=Hu(J,t,Ve),Ze.error(Ve)},complete:()=>{f=!0,j(),a=Hu(J,r),Ze.complete()}}),Vn(Fe).subscribe(o))})(s)}}function Hu(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(ra(1)).subscribe(()=>n())}function nn(n){for(let e in n)if(n[e]===nn)return e;throw Error("Could not find renamed property on target object.")}function Vu(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Uu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bE=nn({__forward_ref__:nn});function $u(n){return n.__forward_ref__=$u,n.toString=function(){return Qt(this())},n}function Lt(n){return ng(n)?n():n}function ng(n){return"function"==typeof n&&n.hasOwnProperty(bE)&&n.__forward_ref__===$u}class Xt extends Error{constructor(e,t){super(function Gu(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Rt(n){return"string"==typeof n?n:null==n?"":String(n)}function zn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Rt(n)}function Tl(n,e){const t=e?` in ${e}`:"";throw new Xt(-201,`No provider for ${zn(n)} found${t}`)}function Dr(n,e){null==n&&function rn(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ft(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Br(n){return{providers:n.providers||[],imports:n.imports||[]}}function zu(n){return rg(n,xl)||rg(n,sg)}function rg(n,e){return n.hasOwnProperty(e)?n[e]:null}function ig(n){return n&&(n.hasOwnProperty(Wu)||n.hasOwnProperty(TE))?n[Wu]:null}const xl=nn({\u0275prov:nn}),Wu=nn({\u0275inj:nn}),sg=nn({ngInjectableDef:nn}),TE=nn({ngInjectorDef:nn});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let qu;function Ji(n){const e=qu;return qu=n,e}function og(n,e,t){const r=zu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&It.Optional?null:void 0!==e?e:void Tl(Qt(n),"Injector")}function Qi(n){return{toString:n}.toString()}var Qr=(()=>((Qr=Qr||{})[Qr.OnPush=0]="OnPush",Qr[Qr.Default=1]="Default",Qr))(),gi=(()=>{return(n=gi||(gi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",gi;var n})();const ME="undefined"!=typeof globalThis&&globalThis,PE="undefined"!=typeof window&&window,IE="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en=ME||"undefined"!=typeof global&&global||PE||IE,Xs={},sn=[],Ml=nn({\u0275cmp:nn}),Xu=nn({\u0275dir:nn}),Ku=nn({\u0275pipe:nn}),ag=nn({\u0275mod:nn}),Li=nn({\u0275fac:nn}),ia=nn({__NG_ELEMENT_ID__:nn});let RE=0;function Mn(n){return Qi(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Qr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||sn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||gi.Emulated,id:"c",styles:n.styles||sn,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=RE++,r.inputs=dg(n.inputs,t),r.outputs=dg(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(lg):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(cg):null,r})}function lg(n){return Yn(n)||function Zi(n){return n[Xu]||null}(n)}function cg(n){return function Ss(n){return n[Ku]||null}(n)}const ug={};function Zr(n){return Qi(()=>{const e={type:n.type,bootstrap:n.bootstrap||sn,declarations:n.declarations||sn,imports:n.imports||sn,exports:n.exports||sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ug[n.id]=n.type),e})}function dg(n,e){if(null==n)return Xs;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Wn=Mn;function Yn(n){return n[Ml]||null}function jr(n,e){const t=n[ag]||null;if(!t&&!0===e)throw new Error(`Type ${Qt(n)} does not have '\u0275mod' property.`);return t}function mi(n){return Array.isArray(n)&&"object"==typeof n[1]}function ti(n){return Array.isArray(n)&&!0===n[1]}function Qu(n){return 0!=(8&n.flags)}function kl(n){return 2==(2&n.flags)}function Ol(n){return 1==(1&n.flags)}function ni(n){return null!==n.template}function BE(n){return 0!=(512&n[2])}function Ds(n,e){return n.hasOwnProperty(Li)?n[Li]:null}class VE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function es(){return fg}function fg(n){return n.type.prototype.ngOnChanges&&(n.setInput=$E),UE}function UE(){const n=gg(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Xs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $E(n,e,t,r){const i=gg(n)||function GE(n,e){return n[pg]=e}(n,{previous:Xs,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new VE(l&&l.currentValue,e,o===Xs),n[r]=e}es.ngInherit=!0;const pg="__ngSimpleChanges__";function gg(n){return n[pg]||null}let rd;function id(){return void 0!==rd?rd:"undefined"!=typeof document?document:void 0}function _n(n){return!!n.listen}const mg={createRenderer:(n,e)=>id()};function Pn(n){for(;Array.isArray(n);)n=n[0];return n}function Fl(n,e){return Pn(e[n])}function Ur(n,e){return Pn(e[n.index])}function sd(n,e){return n.data[e]}function xr(n,e){const t=e[n];return mi(t)?t:t[0]}function _g(n){return 4==(4&n[2])}function od(n){return 128==(128&n[2])}function ts(n,e){return null==e?null:n[e]}function yg(n){n[18]=0}function ad(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const kt={lFrame:Tg(null),bindingsEnabled:!0};function bg(){return kt.bindingsEnabled}function Qe(){return kt.lFrame.lView}function Wt(){return kt.lFrame.tView}function _r(n){return kt.lFrame.contextLView=n,n[8]}function Ln(){let n=Cg();for(;null!==n&&64===n.type;)n=n.parent;return n}function Cg(){return kt.lFrame.currentTNode}function _i(n,e){const t=kt.lFrame;t.currentTNode=n,t.isParent=e}function ld(){return kt.lFrame.isParent}function cd(){kt.lFrame.isParent=!1}function eo(){return kt.lFrame.bindingIndex++}function aw(n,e){const t=kt.lFrame;t.bindingIndex=t.bindingRootIndex=n,ud(e)}function ud(n){kt.lFrame.currentDirectiveIndex=n}function wg(){return kt.lFrame.currentQueryIndex}function hd(n){kt.lFrame.currentQueryIndex=n}function cw(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Ag(n,e,t){if(t&It.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&It.Host||(i=cw(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=kt.lFrame=Dg();return r.currentTNode=e,r.lView=n,!0}function Nl(n){const e=Dg(),t=n[1];kt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Dg(){const n=kt.lFrame,e=null===n?null:n.child;return null===e?Tg(n):e}function Tg(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function xg(){const n=kt.lFrame;return kt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Mg=xg;function Bl(){const n=xg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function or(){return kt.lFrame.selectedIndex}function ns(n){kt.lFrame.selectedIndex=n}function yn(){const n=kt.lFrame;return sd(n.tView,n.selectedIndex)}function ca(){kt.lFrame.currentNamespace="svg"}function jl(){!function fw(){kt.lFrame.currentNamespace=null}()}function Hl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function Vl(n,e,t){Pg(n,e,3,t)}function Ul(n,e,t,r){(3&n[2])===t&&Pg(n,e,t,r)}function fd(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Pg(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(mw(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function mw(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ua{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function $l(n,e,t){const r=_n(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];gd(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ig(n){return 3===n||4===n||6===n}function gd(n){return 64===n.charCodeAt(0)}function Gl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Rg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Rg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function kg(n){return-1!==n}function to(n){return 32767&n}function no(n,e){let t=function Cw(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let md=!0;function zl(n){const e=md;return md=n,e}let Sw=0;function ha(n,e){const t=yd(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,_d(r.data,n),_d(e,null),_d(r.blueprint,null));const i=Wl(n,e),s=n.injectorIndex;if(kg(i)){const o=to(i),a=no(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function _d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yd(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Wl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function ql(n,e,t){!function Ew(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ia)&&(r=t[ia]),null==r&&(r=t[ia]=Sw++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Lg(n,e,t){if(t&It.Optional)return n;Tl(e,"NodeInjector")}function Ng(n,e,t,r){if(t&It.Optional&&void 0===r&&(r=null),0==(t&(It.Self|It.Host))){const i=n[9],s=Ji(void 0);try{return i?i.get(e,r,t&It.Optional):og(e,r,t&It.Optional)}finally{Ji(s)}}return Lg(r,e,t)}function Bg(n,e,t,r=It.Default,i){if(null!==n){const s=function Tw(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ia)?n[ia]:void 0;return"number"==typeof e?e>=0?255&e:Aw:e}(t);if("function"==typeof s){if(!Ag(e,n,r))return r&It.Host?Lg(i,t,r):Ng(e,t,r,i);try{const o=s(r);if(null!=o||r&It.Optional)return o;Tl(t)}finally{Mg()}}else if("number"==typeof s){let o=null,a=yd(n,e),l=-1,c=r&It.Host?e[16][6]:null;for((-1===a||r&It.SkipSelf)&&(l=-1===a?Wl(n,e):e[a+8],-1!==l&&Vg(r,!1)?(o=e[1],a=to(l),e=no(l,e)):a=-1);-1!==a;){const f=e[1];if(Hg(s,a,f.data)){const C=Dw(a,e,t,o,r,c);if(C!==jg)return C}l=e[a+8],-1!==l&&Vg(r,e[1].data[a+8]===c)&&Hg(s,a,e)?(o=f,a=to(l),e=no(l,e)):a=-1}}}return Ng(e,t,r,i)}const jg={};function Aw(){return new ro(Ln(),Qe())}function Dw(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],f=Xl(a,o,t,null==r?kl(a)&&md:r!=o&&0!=(3&a.type),i&It.Host&&s===a);return null!==f?fa(e,o,f,a):jg}function Xl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,f=s>>20,j=i?a+f:n.directiveEnd;for(let J=r?a:a+f;J<j;J++){const be=o[J];if(J<l&&t===be||J>=l&&be.type===t)return J}if(i){const J=o[l];if(J&&ni(J)&&J.type===t)return l}return null}function fa(n,e,t,r){let i=n[t];const s=e.data;if(function _w(n){return n instanceof ua}(i)){const o=i;o.resolving&&function CE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Xt(-200,`Circular dependency in DI detected for ${n}${t}`)}(zn(s[t]));const a=zl(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ji(o.injectImpl):null;Ag(n,r,It.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function gw(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=fg(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Ji(l),zl(a),o.resolving=!1,Mg()}}return i}function Hg(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Vg(n,e){return!(n&It.Self||n&It.Host&&e)}class ro{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Bg(this._tNode,this._lView,e,r,t)}}function Kl(n){return Qi(()=>{const e=n.prototype.constructor,t=e[Li]||vd(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Li]||vd(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function vd(n){return ng(n)?()=>{const e=vd(Lt(n));return e&&e()}:Ds(n)}function io(n){return function ww(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Ig(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Ln(),n)}const oo="__parameters__";function lo(n,e,t){return Qi(()=>{const r=function bd(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,f){const C=l.hasOwnProperty(oo)?l[oo]:Object.defineProperty(l,oo,{value:[]})[oo];for(;C.length<=f;)C.push(null);return(C[f]=C[f]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Et{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ft({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Mw=new Et("AnalyzeForEntryComponents");function $r(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),$r(r,e)):e!==n&&e.push(r)}return e}function yi(n,e){n.forEach(t=>Array.isArray(t)?yi(t,e):e(t))}function $g(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ma(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Mr(n,e,t){let r=co(n,e);return r>=0?n[1|r]=t:(r=~r,function Rw(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Sd(n,e){const t=co(n,e);if(t>=0)return n[1|t]}function co(n,e){return function Wg(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const _a={},wd="__NG_DI_FLAG__",Ql="ngTempTokenPath",jw=/\n/gm,Xg="__source",Vw=nn({provide:String,useValue:nn});let ya;function Kg(n){const e=ya;return ya=n,e}function Uw(n,e=It.Default){if(void 0===ya)throw new Xt(203,"");return null===ya?og(n,void 0,e):ya.get(n,e&It.Optional?null:void 0,e)}function ft(n,e=It.Default){return(function xE(){return qu}()||Uw)(Lt(n),e)}const uo=ft;function Ad(n){const e=[];for(let t=0;t<n.length;t++){const r=Lt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Xt(900,"");let i,s=It.Default;for(let o=0;o<r.length;o++){const a=r[o],l=$w(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(ft(i,s))}else e.push(ft(r))}return e}function va(n,e){return n[wd]=e,n.prototype[wd]=e,n}function $w(n){return n[wd]}const Zl=va(lo("Inject",n=>({token:n})),-1),ri=va(lo("Optional"),8),ho=va(lo("SkipSelf"),4);let tc,nc;function po(n){var e;return(null===(e=function Td(){if(void 0===tc&&(tc=null,en.trustedTypes))try{tc=en.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return tc}())||void 0===e?void 0:e.createHTML(n))||n}function tm(n){var e;return(null===(e=function xd(){if(void 0===nc&&(nc=null,en.trustedTypes))try{nc=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return nc}())||void 0===e?void 0:e.createHTML(n))||n}class Ts{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class nA extends Ts{getTypeName(){return"HTML"}}class rA extends Ts{getTypeName(){return"Style"}}class iA extends Ts{getTypeName(){return"Script"}}class sA extends Ts{getTypeName(){return"URL"}}class oA extends Ts{getTypeName(){return"ResourceURL"}}function Pr(n){return n instanceof Ts?n.changingThisBreaksApplicationSecurity:n}function vi(n,e){const t=im(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function im(n){return n instanceof Ts&&n.getTypeName()||null}class hA{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(po(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class fA{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=po(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=po(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const gA=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mA=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ca(n){return(n=String(n)).match(gA)||n.match(mA)?n:"unsafe:"+n}function bi(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Sa(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const am=bi("area,br,col,hr,img,wbr"),lm=bi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cm=bi("rp,rt"),Md=Sa(am,Sa(lm,bi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sa(cm,bi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sa(cm,lm)),Pd=bi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Id=bi("srcset"),um=Sa(Pd,Id,bi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_A=bi("script,style,template");class yA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Md.hasOwnProperty(t))return this.sanitizedSomething=!0,!_A.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!um.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Pd[a]&&(l=Ca(l)),Id[a]&&(n=l,l=(n=String(n)).split(",").map(e=>Ca(e.trim())).join(", ")),this.buf.push(" ",o,'="',dm(l),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Md.hasOwnProperty(t)&&!am.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dm(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const vA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bA=/([^\#-~ |!])/g;function dm(n){return n.replace(/&/g,"&amp;").replace(vA,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(bA,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rc;function hm(n,e){let t=null;try{rc=rc||function sm(n){const e=new fA(n);return function pA(){try{return!!(new window.DOMParser).parseFromString(po(""),"text/html")}catch(n){return!1}}()?new hA(e):e}(n);let r=e?String(e):"";t=rc.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=rc.getInertBodyElement(r)}while(r!==s);return po((new yA).sanitizeChildren(Rd(t)||t))}finally{if(t){const r=Rd(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Rd(n){return"content"in n&&function CA(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Kt=(()=>((Kt=Kt||{})[Kt.NONE=0]="NONE",Kt[Kt.HTML=1]="HTML",Kt[Kt.STYLE=2]="STYLE",Kt[Kt.SCRIPT=3]="SCRIPT",Kt[Kt.URL=4]="URL",Kt[Kt.RESOURCE_URL=5]="RESOURCE_URL",Kt))();function kd(n){const e=function Ea(){const n=Qe();return n&&n[12]}();return e?tm(e.sanitize(Kt.HTML,n)||""):vi(n,"HTML")?tm(Pr(n)):hm(id(),Rt(n))}const gm="__ngContext__";function Qn(n,e){n[gm]=e}function Ld(n){const e=function wa(n){return n[gm]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Bd(n){return n.ngOriginalError}function NA(n,...e){n.error(...e)}class is{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function LA(n){return n&&n.ngErrorLogger||NA}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Bd(e);for(;t&&Bd(t);)t=Bd(t);return t||null}}const qA=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(en))();function bm(n){return n.ownerDocument.defaultView}function Ci(n){return n instanceof Function?n():n}var Ir=(()=>((Ir=Ir||{})[Ir.Important=1]="Important",Ir[Ir.DashCase=2]="DashCase",Ir))();function Hd(n,e){return undefined(n,e)}function Aa(n){const e=n[3];return ti(e)?e[3]:e}function Vd(n){return Am(n[13])}function Ud(n){return Am(n[4])}function Am(n){for(;null!==n&&!ti(n);)n=n[4];return n}function mo(n,e,t,r,i){if(null!=r){let s,o=!1;ti(r)?s=r:mi(r)&&(o=!0,r=r[0]);const a=Pn(r);0===n&&null!==t?null==i?Im(e,t,a):xs(e,t,a,i||null,!0):1===n&&null!==t?xs(e,t,a,i||null,!0):2===n?function Bm(n,e,t){const r=ic(n,e);r&&function oD(n,e,t,r){_n(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function cD(n,e,t,r,i){const s=t[7];s!==Pn(t)&&mo(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];Da(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function Gd(n,e,t){if(_n(n))return n.createElement(e,t);{const r=null!==t?function XE(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function Tm(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ad(i,-1)),t.splice(r,1)}function zd(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Tm(i,r),e>0&&(n[t-1][4]=r[4]);const s=Yl(n,10+e);!function QA(n,e){Da(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function xm(n,e){if(!(256&e[2])){const t=e[11];_n(t)&&t.destroyNode&&Da(n,e,t,3,null,null),function tD(n){let e=n[13];if(!e)return Wd(n[1],n);for(;e;){let t=null;if(mi(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)mi(e)&&Wd(e[1],e),e=e[3];null===e&&(e=n),mi(e)&&Wd(e[1],e),t=e&&e[4]}e=t}}(e)}}function Wd(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function sD(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ua)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function iD(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Pn(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&_n(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ti(e[3])){t!==e[3]&&Tm(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function Mm(n,e,t){return function Pm(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===gi.None||i===gi.Emulated)return null}return Ur(r,t)}(n,e.parent,t)}function xs(n,e,t,r,i){_n(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function Im(n,e,t){_n(n)?n.appendChild(e,t):e.appendChild(t)}function Rm(n,e,t,r,i){null!==r?xs(n,e,t,r,i):Im(n,e,t)}function ic(n,e){return _n(n)?n.parentNode(e):e.parentNode}function km(n,e,t){return Fm(n,e,t)}let Fm=function Om(n,e,t){return 40&n.type?Ur(n,t):null};function sc(n,e,t,r){const i=Mm(n,r,e),s=e[11],a=km(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)Rm(s,i,t[l],a,!1);else Rm(s,i,t,a,!1)}function oc(n,e){if(null!==e){const t=e.type;if(3&t)return Ur(e,n);if(4&t)return Xd(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return oc(n,r);{const i=n[e.index];return ti(i)?Xd(-1,i):Pn(i)}}if(32&t)return Hd(e,n)()||Pn(n[e.index]);{const r=Nm(n,e);return null!==r?Array.isArray(r)?r[0]:oc(Aa(n[16]),r):oc(n,e.next)}}return null}function Nm(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Xd(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return oc(r,i)}return e[7]}function Kd(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Qn(Pn(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Kd(n,e,t.child,r,i,s,!1),mo(e,n,i,a,s);else if(32&l){const c=Hd(t,r);let f;for(;f=c();)mo(e,n,i,f,s);mo(e,n,i,a,s)}else 16&l?jm(n,e,r,t,i,s):mo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Da(n,e,t,r,i,s){Kd(t,r,n.firstChild,e,i,s,!1)}function jm(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)mo(e,n,i,l[c],s);else Kd(n,e,l,o[3],i,s,!0)}function Hm(n,e,t){_n(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Yd(n,e,t){_n(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Vm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Um="ng-template";function dD(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Vm(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function $m(n){return 4===n.type&&n.value!==Um}function hD(n,e,t){return e===(4!==n.type||t?n.value:Um)}function fD(n,e,t){let r=4;const i=n.attrs||[],s=function mD(n){for(let e=0;e<n.length;e++)if(Ig(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!hD(n,l,t)||""===l&&1===e.length){if(ii(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!dD(n.attrs,c,t)){if(ii(r))return!1;o=!0}continue}const C=pD(8&r?"class":l,i,$m(n),t);if(-1===C){if(ii(r))return!1;o=!0;continue}if(""!==c){let j;j=C>s?"":i[C+1].toLowerCase();const J=8&r?j:null;if(J&&-1!==Vm(J,c,0)||2&r&&c!==j){if(ii(r))return!1;o=!0}}}}else{if(!o&&!ii(r)&&!ii(l))return!1;if(o&&ii(l))continue;o=!1,r=l|1&r}}return ii(r)||o}function ii(n){return 0==(1&n)}function pD(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function _D(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Gm(n,e,t=!1){for(let r=0;r<e.length;r++)if(fD(n,e[r],t))return!0;return!1}function yD(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function zm(n,e){return n?":not("+e.trim()+")":e}function vD(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ii(o)&&(e+=zm(s,i),i=""),r=o,s=s||!ii(r);t++}return""!==i&&(e+=zm(s,i)),e}const Ot={};function Mt(n){Wm(Wt(),Qe(),or()+n,!1)}function Wm(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Vl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Ul(e,s,0,t)}ns(t)}function ac(n,e){return n<<17|e<<2}function si(n){return n>>17&32767}function Jd(n){return 2|n}function ji(n){return(131068&n)>>2}function Qd(n,e){return-131069&n|e<<2}function Zd(n){return 1|n}function r_(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];hd(i),o.contentQueries(2,e[s],s)}}}function Ta(n,e,t,r,i,s,o,a,l,c){const f=e.blueprint.slice();return f[0]=i,f[2]=140|r,yg(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=l||n&&n[12]||null,f[9]=c||n&&n[9]||null,f[6]=s,f[16]=2==e.type?n[16]:f,f}function _o(n,e,t,r,i){let s=n.data[e];if(null===s)s=function lh(n,e,t,r,i){const s=Cg(),o=ld(),l=n.data[e]=function ND(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function ow(){return kt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function la(){const n=kt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _i(s,!0),s}function yo(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xa(n,e,t){Nl(e);try{const r=n.viewQuery;null!==r&&_h(1,r,t);const i=n.template;null!==i&&i_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&r_(n,e),n.staticViewQueries&&_h(2,n.viewQuery,t);const s=n.components;null!==s&&function OD(n,e){for(let t=0;t<e.length;t++)tT(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Bl()}}function vo(n,e,t,r){const i=e[2];if(256!=(256&i)){Nl(e);try{yg(e),function Sg(n){return kt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&i_(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Vl(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Ul(e,c,0,null),fd(e,0)}if(function ZD(n){for(let e=Vd(n);null!==e;e=Ud(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&ad(s,1),i[2]|=1024}}}(e),function QD(n){for(let e=Vd(n);null!==e;e=Ud(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];od(r)&&vo(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&r_(n,e),o){const c=n.contentCheckHooks;null!==c&&Vl(e,c)}else{const c=n.contentHooks;null!==c&&Ul(e,c,1),fd(e,1)}!function RD(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)ns(~i);else{const s=i,o=t[++r],a=t[++r];aw(o,s),a(2,e[s])}}}finally{ns(-1)}}(n,e);const a=n.components;null!==a&&function kD(n,e){for(let t=0;t<e.length;t++)eT(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&_h(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Vl(e,c)}else{const c=n.viewHooks;null!==c&&Ul(e,c,2),fd(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,ad(e[3],-1))}finally{Bl()}}}function FD(n,e,t,r){const i=e[10],o=_g(e);try{!o&&i.begin&&i.begin(),o&&xa(n,e,r),vo(n,e,t,r)}finally{!o&&i.end&&i.end()}}function i_(n,e,t,r,i){const s=or(),o=2&r;try{ns(-1),o&&e.length>20&&Wm(n,e,20,!1),t(r,i)}finally{ns(s)}}function s_(n,e,t){if(Qu(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function ch(n,e,t){!bg()||(function GD(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||ha(t,e),Qn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=ni(l);c&&KD(e,t,l);const f=fa(e,n,a,t);Qn(f,e),null!==o&&YD(0,a-i,f,l,0,o),c&&(xr(t.index,e)[8]=f)}}(n,e,t,Ur(t,e)),128==(128&t.flags)&&function zD(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function lw(){return kt.lFrame.currentDirectiveIndex}();try{ns(o);for(let l=r;l<i;l++){const c=n.data[l],f=e[l];ud(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&f_(c,f)}}finally{ns(-1),ud(a)}}(n,e,t))}function uh(n,e,t=Ur){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function o_(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=uc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function uc(n,e,t,r,i,s,o,a,l,c){const f=20+r,C=f+i,j=function LD(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ot);return t}(f,C),J="function"==typeof c?c():c;return j[1]={type:n,blueprint:j,template:t,queries:null,viewQuery:a,declTNode:e,data:j.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:J,incompleteFirstPass:!1}}function c_(n,e,t,r){const i=v_(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&b_(n).push(r,i.length-1))}function u_(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function dh(n,e,t,r){let i=!1;if(bg()){const s=function WD(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Gm(t,o.selectors,!1)&&(i||(i=[]),ql(ha(t,e),n,o.type),ni(o)?(p_(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,g_(t,n.data.length,s.length);for(let f=0;f<s.length;f++){const C=s[f];C.providersResolver&&C.providersResolver(C)}let a=!1,l=!1,c=yo(n,e,s.length,null);for(let f=0;f<s.length;f++){const C=s[f];t.mergedAttrs=Gl(t.mergedAttrs,C.hostAttrs),m_(n,t,e,c,C),XD(c,C,o),null!==C.contentQueries&&(t.flags|=8),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(t.flags|=128);const j=C.type.prototype;!a&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(j.ngOnChanges||j.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function BD(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const f=i[c],C=f.inputs,j=null===s||$m(e)?null:JD(C,s);o.push(j),a=u_(C,c,a),l=u_(f.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function qD(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new Xt(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=Gl(t.mergedAttrs,t.attrs),i}function h_(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function $D(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function f_(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function p_(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function XD(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ni(e)&&(t[""]=n)}}function g_(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function m_(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ds(i.type)),o=new ua(s,ni(i),null);n.blueprint[r]=o,t[r]=o,h_(n,e,0,r,yo(n,t,i.hostVars,Ot),i)}function KD(n,e,t){const r=Ur(e,n),i=o_(t),s=n[10],o=dc(n,Ta(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function Si(n,e,t,r,i,s){const o=Ur(n,e);!function hh(n,e,t,r,i,s,o){if(null==s)_n(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?Rt(s):o(s,r||"",i);_n(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function YD(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],f=o[l++],C=o[l++];null!==a?r.setInput(t,C,c,f):t[f]=C}}}function JD(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function __(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function eT(n,e){const t=xr(e,n);if(od(t)){const r=t[1];80&t[2]?vo(r,t,r.template,t[8]):t[5]>0&&fh(t)}}function fh(n){for(let r=Vd(n);null!==r;r=Ud(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];vo(o,s,o.template,s[8])}else s[5]>0&&fh(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=xr(t[r],n);od(i)&&i[5]>0&&fh(i)}}function tT(n,e){const t=xr(e,n),r=t[1];(function nT(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),xa(r,t,t[8])}function dc(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function ph(n){for(;n;){n[2]|=64;const e=Aa(n);if(BE(n)&&!e)return n;n=e}return null}function y_(n){!function gh(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Ld(t),i=r[1];FD(i,r,i.template,t)}}(n[8])}function _h(n,e,t){hd(0),e(n,t)}const iT=(()=>Promise.resolve(null))();function v_(n){return n[7]||(n[7]=[])}function b_(n){return n.cleanup||(n.cleanup=[])}function S_(n,e){const t=n[9],r=t?t.get(is,null):null;r&&r.handleError(e)}function E_(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Hi(n,e,t){const r=Fl(e,n);!function Dm(n,e,t){_n(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function hc(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Uu(i,a):2==s&&(r=Uu(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const yh=new Et("INJECTOR",-1);class w_{get(e,t=_a){if(t===_a){const r=new Error(`NullInjectorError: No provider for ${Qt(e)}!`);throw r.name="NullInjectorError",r}return t}}const vh=new Et("Set Injector scope."),Ma={},aT={};let bh;function A_(){return void 0===bh&&(bh=new w_),bh}function D_(n,e=null,t=null,r){const i=T_(n,e,t,r);return i._resolveInjectorDefTypes(),i}function T_(n,e=null,t=null,r){return new lT(n,t,e||A_(),r)}class lT{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&yi(t,a=>this.processProvider(a,e,t)),yi([e],a=>this.processInjectorType(a,[],s)),this.records.set(yh,bo(void 0,this));const o=this.records.get(vh);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:Qt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=_a,r=It.Default){this.assertNotDestroyed();const i=Kg(this),s=Ji(void 0);try{if(!(r&It.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function mT(n){return"function"==typeof n||"object"==typeof n&&n instanceof Et}(e)&&zu(e);a=l&&this.injectableDefInScope(l)?bo(Ch(e),Ma):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&It.Self?A_():this.parent).get(e,t=r&It.Optional&&t===_a?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Ql]=o[Ql]||[]).unshift(Qt(e)),i)throw o;return function Gw(n,e,t,r){const i=n[Ql];throw e[Xg]&&i.unshift(e[Xg]),n.message=function zw(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=Qt(e);if(Array.isArray(e))i=e.map(Qt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Qt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(jw,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ql]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Ji(s),Kg(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(Qt(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xt(205,!1)}processInjectorType(e,t,r){if(!(e=Lt(e)))return!1;let i=ig(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=ig(s)),null==i)return!1;if(null!=i.imports&&!a){let f;r.push(o);try{yi(i.imports,C=>{this.processInjectorType(C,t,r)&&(void 0===f&&(f=[]),f.push(C))})}finally{}if(void 0!==f)for(let C=0;C<f.length;C++){const{ngModule:j,providers:J}=f[C];yi(J,be=>this.processProvider(be,j,J||sn))}}this.injectorDefTypes.add(o);const l=Ds(o)||(()=>new o);this.records.set(o,bo(l,Ma));const c=i.providers;if(null!=c&&!a){const f=e;yi(c,C=>this.processProvider(C,f,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Co(e=Lt(e))?e:Lt(e&&e.provide);const s=function uT(n,e,t){return M_(n)?bo(void 0,n.useValue):bo(function x_(n,e,t){let r;if(Co(n)){const i=Lt(n);return Ds(i)||Ch(i)}if(M_(n))r=()=>Lt(n.useValue);else if(function hT(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ad(n.deps||[]));else if(function dT(n){return!(!n||!n.useExisting)}(n))r=()=>ft(Lt(n.useExisting));else{const i=Lt(n&&(n.useClass||n.provide));if(!function pT(n){return!!n.deps}(n))return Ds(i)||Ch(i);r=()=>new i(...Ad(n.deps))}return r}(n),Ma)}(e);if(Co(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=bo(void 0,Ma,!0),o.factory=()=>Ad(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===Ma&&(t.value=aT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function gT(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Lt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Ch(n){const e=zu(n),t=null!==e?e.factory:Ds(n);if(null!==t)return t;if(n instanceof Et)throw new Xt(204,!1);if(n instanceof Function)return function cT(n){const e=n.length;if(e>0)throw ma(e,"?"),new Xt(204,!1);const t=function AE(n){const e=n&&(n[xl]||n[sg]);if(e){const t=function DE(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Xt(204,!1)}function bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function M_(n){return null!==n&&"object"==typeof n&&Vw in n}function Co(n){return"function"==typeof n}let qn=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return D_({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return D_({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=_a,n.NULL=new w_,n.\u0275prov=Ft({token:n,providedIn:"any",factory:()=>ft(yh)}),n.__NG_ELEMENT_ID__=-1,n})();function wT(n,e){Hl(Ld(n)[1],Ln())}function So(n){let e=function V_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ni(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Xt(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=wh(n.inputs),o.declaredInputs=wh(n.declaredInputs),o.outputs=wh(n.outputs);const a=i.hostBindings;a&&xT(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&DT(n,l),c&&TT(n,c),Vu(n.inputs,i.inputs),Vu(n.declaredInputs,i.declaredInputs),Vu(n.outputs,i.outputs),ni(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===So&&(t=!1)}}e=Object.getPrototypeOf(e)}!function AT(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gl(i.hostAttrs,t=Gl(t,i.hostAttrs))}}(r)}function wh(n){return n===Xs?{}:n===sn?[]:n}function DT(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function TT(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function xT(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let fc=null;function Eo(){if(!fc){const n=en.Symbol;if(n&&n.iterator)fc=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(fc=r)}}}return fc}function Pa(n){return!!Ah(n)&&(Array.isArray(n)||!(n instanceof Map)&&Eo()in n)}function Ah(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Zn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function gc(n,e,t,r){const i=Qe();return Zn(i,eo(),e)&&(Wt(),Si(yn(),i,n,e,t,r)),gc}function hn(n,e,t,r,i,s,o,a){const l=Qe(),c=Wt(),f=n+20,C=c.firstCreatePass?function FT(n,e,t,r,i,s,o,a,l){const c=e.consts,f=_o(e,n,4,o||null,ts(c,a));dh(e,t,f,ts(c,l)),Hl(e,f);const C=f.tViews=uc(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,f),C.queries=e.queries.embeddedTView(f)),f}(f,c,l,e,t,r,i,s,o):c.data[f];_i(C,!1);const j=l[11].createComment("");sc(c,l,j,C),Qn(j,l),dc(l,l[f]=__(j,l,j,C)),Ol(C)&&ch(c,l,C),null!=o&&uh(l,C,a)}function at(n,e=It.Default){const t=Qe();return null===t?ft(n,e):Bg(Ln(),t,Lt(n),e)}function Ph(){throw new Error("invalid")}function Pt(n,e,t){const r=Qe();return Zn(r,eo(),e)&&function Rr(n,e,t,r,i,s,o,a){const l=Ur(e,t);let f,c=e.inputs;!a&&null!=c&&(f=c[r])?(E_(n,t,f,r,i),kl(e)&&function HD(n,e){const t=xr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function jD(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,_n(s)?s.setProperty(l,r,i):gd(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Wt(),yn(),r,n,e,r[11],t,!1),Pt}function Ih(n,e,t,r,i){const o=i?"class":"style";E_(n,t,e.inputs[o],o,r)}function _t(n,e,t,r){const i=Qe(),s=Wt(),o=20+n,a=i[11],l=i[o]=Gd(a,e,function pw(){return kt.lFrame.currentNamespace}()),c=s.firstCreatePass?function nx(n,e,t,r,i,s,o){const a=e.consts,c=_o(e,n,2,i,ts(a,s));return dh(e,t,c,ts(a,o)),null!==c.attrs&&hc(c,c.attrs,!1),null!==c.mergedAttrs&&hc(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];_i(c,!0);const f=c.mergedAttrs;null!==f&&$l(a,l,f);const C=c.classes;null!==C&&Yd(a,l,C);const j=c.styles;return null!==j&&Hm(a,l,j),64!=(64&c.flags)&&sc(s,i,l,c),0===function ew(){return kt.lFrame.elementDepthCount}()&&Qn(l,i),function tw(){kt.lFrame.elementDepthCount++}(),Ol(c)&&(ch(s,i,c),s_(s,c,i)),null!==r&&uh(i,c),_t}function Dt(){let n=Ln();ld()?cd():(n=n.parent,_i(n,!1));const e=n;!function nw(){kt.lFrame.elementDepthCount--}();const t=Wt();return t.firstCreatePass&&(Hl(t,n),Qu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function vw(n){return 0!=(16&n.flags)}(e)&&Ih(t,e,Qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bw(n){return 0!=(32&n.flags)}(e)&&Ih(t,e,Qe(),e.stylesWithoutHost,!1),Dt}function fn(n,e,t,r){return _t(n,e,t,r),Dt(),fn}function Ra(n,e,t){const r=Qe(),i=Wt(),s=n+20,o=i.firstCreatePass?function rx(n,e,t,r,i){const s=e.consts,o=ts(s,r),a=_o(e,n,8,"ng-container",o);return null!==o&&hc(a,o,!0),dh(e,t,a,ts(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];_i(o,!0);const a=r[s]=r[11].createComment("");return sc(i,r,a,o),Qn(a,r),Ol(o)&&(ch(i,r,o),s_(i,o,r)),null!=t&&uh(r,o),Ra}function ka(){let n=Ln();const e=Wt();return ld()?cd():(n=n.parent,_i(n,!1)),e.firstCreatePass&&(Hl(e,n),Qu(n)&&e.queries.elementEnd(n)),ka}function _c(n,e,t){return Ra(n,e,t),ka(),_c}function wi(){return Qe()}function yc(n){return!!n&&"function"==typeof n.then}const cy=function ly(n){return!!n&&"function"==typeof n.subscribe};function Jt(n,e,t,r){const i=Qe(),s=Wt(),o=Ln();return function dy(n,e,t,r,i,s,o,a){const l=Ol(r),f=n.firstCreatePass&&b_(n),C=e[8],j=v_(e);let J=!0;if(3&r.type||a){const Je=Ur(r,e),Ze=a?a(Je):Je,Ve=j.length,nt=a?rt=>a(Pn(rt[r.index])):r.index;if(_n(t)){let rt=null;if(!a&&l&&(rt=function ix(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==rt)(rt.__ngLastListenerFn__||rt).__ngNextListenerFn__=s,rt.__ngLastListenerFn__=s,J=!1;else{s=Rh(r,e,C,s,!1);const ht=t.listen(Ze,i,s);j.push(s,ht),f&&f.push(i,nt,Ve,Ve+1)}}else s=Rh(r,e,C,s,!0),Ze.addEventListener(i,s,o),j.push(s),f&&f.push(i,nt,Ve,o)}else s=Rh(r,e,C,s,!1);const be=r.outputs;let Fe;if(J&&null!==be&&(Fe=be[i])){const Je=Fe.length;if(Je)for(let Ze=0;Ze<Je;Ze+=2){const An=e[Fe[Ze]][Fe[Ze+1]].subscribe(s),Sr=j.length;j.push(s,An),f&&f.push(i,r.index,Sr,-(Sr+1))}}}(s,i,i[11],o,n,e,!!t,r),Jt}function hy(n,e,t,r){try{return!1!==t(r)}catch(i){return S_(n,i),!1}}function Rh(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?xr(n.index,e):e;0==(32&e[2])&&ph(a);let l=hy(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=hy(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Yt(n=1){return function uw(n){return(kt.lFrame.contextLView=function dw(n,e){for(;n>0;)e=e[15],n--;return e}(n,kt.lFrame.contextLView))[8]}(n)}function sx(n,e){let t=null;const r=function gD(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Gm(n,s,!0):yD(r,s))return i}else t=i}return t}function Oa(n){const e=Qe()[16][6];if(!e.projection){const r=e.projection=ma(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?sx(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function Oo(n,e=0,t){const r=Qe(),i=Wt(),s=_o(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),cd(),64!=(64&s.flags)&&function lD(n,e,t){jm(e[11],0,e,t,Mm(n,t,e),km(t.parent||e[6],t,e))}(i,r,s)}function Sy(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?si(s):ji(s),l=!1;for(;0!==a&&(!1===l||o);){const f=n[a+1];lx(n[a],e)&&(l=!0,n[a+1]=r?Zd(f):Jd(f)),a=r?si(f):ji(f)}l&&(n[t+1]=r?Jd(s):Zd(s))}function lx(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&co(n,e)>=0}function vc(n,e,t){return ai(n,e,t,!1),vc}function yr(n,e){return ai(n,e,null,!0),yr}function ai(n,e,t,r){const i=Qe(),s=Wt(),o=function Bi(n){const e=kt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Py(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[or()],o=function My(n,e){return e>=n.expandoStartIndex}(n,t);(function Oy(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function _x(n,e,t,r){const i=function dd(n){const e=kt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Fa(t=Oh(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Oh(i,n,e,t,r),null===s){let l=function yx(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==ji(r))return n[si(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Oh(null,n,e,l[1],r),l=Fa(l,e.attrs,r),function vx(n,e,t,r){n[si(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function bx(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Fa(r,n[s].hostAttrs,t);return Fa(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function ox(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=si(o),l=ji(o);n[r]=t;let f,c=!1;if(Array.isArray(t)){const C=t;f=C[1],(null===f||co(C,f)>0)&&(c=!0)}else f=t;if(i)if(0!==l){const j=si(n[a+1]);n[r+1]=ac(j,a),0!==j&&(n[j+1]=Qd(n[j+1],r)),n[a+1]=function SD(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=ac(a,0),0!==a&&(n[a+1]=Qd(n[a+1],r)),a=r;else n[r+1]=ac(l,0),0===a?a=r:n[l+1]=Qd(n[l+1],r),l=r;c&&(n[r+1]=Jd(n[r+1])),Sy(n,f,r,!0),Sy(n,f,r,!1),function ax(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&co(s,e)>=0&&(t[r+1]=Zd(t[r+1]))}(e,f,n,r,s),o=ac(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Ot&&Zn(i,o,e)&&function Ry(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];bc(function Km(n){return 1==(1&n)}(c)?ky(l,e,t,i,ji(c),o):void 0)||(bc(s)||function Xm(n){return 2==(2&n)}(c)&&(s=ky(l,null,t,i,a,o)),function uD(n,e,t,r,i){const s=_n(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Ir.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=Ir.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Fl(or(),t),i,s))}(s,s.data[or()],i,i[11],n,i[o+1]=function Ex(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Qt(Pr(n)))),n}(e,t),r,o)}function Oh(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Fa(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Fa(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Mr(n,o,!!t||e[++s]))}return void 0===n?null:n}function ky(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),f=c?l[1]:l,C=null===f;let j=t[i+1];j===Ot&&(j=C?sn:void 0);let J=C?Sd(j,r):f===r?j:void 0;if(c&&!bc(J)&&(J=Sd(l,r)),bc(J)&&(a=J,o))return a;const be=n[i+1];i=o?si(be):ji(be)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Sd(l,r))}return a}function bc(n){return void 0!==n}function $n(n,e=""){const t=Qe(),r=Wt(),i=n+20,s=r.firstCreatePass?_o(r,i,1,e,null):r.data[i],o=t[i]=function $d(n,e){return _n(n)?n.createText(e):n.createTextNode(e)}(t[11],e);sc(r,t,o,s),_i(s,!1)}function Lo(n){return La("",n,""),Lo}function La(n,e,t){const r=Qe(),i=function Ao(n,e,t,r){return Zn(n,eo(),t)?e+Rt(t)+r:Ot}(r,n,e,t);return i!==Ot&&Hi(r,or(),i),La}const Cc="en-US";let nv=Cc;class Tv{}class WM{resolveComponentFactory(e){throw function zM(n){const e=Error(`No component factory found for ${Qt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let jo=(()=>{class n{}return n.NULL=new WM,n})();function qM(){return Ho(Ln(),Qe())}function Ho(n,e){return new kr(Ur(n,e))}let kr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=qM,n})();function XM(n){return n instanceof kr?n.nativeElement:n}class Mv{}let Va=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function YM(){const n=Qe(),t=xr(Ln().index,n);return function KM(n){return n[11]}(mi(t)?t:n)}(),n})(),JM=(()=>{class n{}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:()=>null}),n})();class Vo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const QM=new Vo("13.3.7"),Vh={};function Dc(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Pn(s)),ti(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Dc(l[1],l,c,r)}const o=t.type;if(8&o)Dc(n,e,t.child,r);else if(32&o){const a=Hd(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Nm(e,t);if(Array.isArray(a))r.push(...a);else{const l=Aa(e[16]);Dc(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Ua{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Dc(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ti(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(zd(e,r),Yl(t,r))}this._attachedToViewContainer=!1}xm(this._lView[1],this._lView)}onDestroy(e){c_(this._lView[1],this._lView,null,e)}markForCheck(){ph(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function mh(n,e,t){const r=e[10];r.begin&&r.begin();try{vo(n,e,n.template,t)}catch(i){throw S_(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eD(n,e){Da(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Xt(902,"");this._appRef=e}}class ZM extends Ua{constructor(e){super(e),this._view=e}detectChanges(){y_(this._view)}checkNoChanges(){}get context(){return null}}class Pv extends jo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Yn(e);return new Uh(t,this.ngModule)}}function Iv(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Uh extends Tv{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bD(n){return n.map(vD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Iv(this.componentDef.inputs)}get outputs(){return Iv(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function tP(n,e){return{get:(t,r,i)=>{const s=n.get(t,Vh,i);return s!==Vh||r===Vh?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(Mv,mg),a=s.get(JM,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",f=r?function l_(n,e,t){if(_n(n))return n.selectRootElement(e,t===gi.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Gd(o.createRenderer(null,this.componentDef),c,function eP(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),C=this.componentDef.onPush?576:528,j=function H_(n,e){return{components:[],scheduler:n||qA,clean:iT,playerHandler:e||null,flags:0}}(),J=uc(0,null,null,1,0,null,null,null,null,null),be=Ta(null,J,j,C,null,null,o,l,a,s);let Fe,Je;Nl(be);try{const Ze=function B_(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=_o(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(hc(l,c,!0),null!==n&&($l(i,n,c),null!==l.classes&&Yd(i,n,l.classes),null!==l.styles&&Hm(i,n,l.styles)));const f=r.createRenderer(n,e),C=Ta(t,o_(e),null,e.onPush?64:16,t[20],l,r,f,s||null,null);return o.firstCreatePass&&(ql(ha(l,t),o,e.type),p_(o,l),g_(l,t.length,1)),dc(t,C),t[20]=C}(f,this.componentDef,be,o,l);if(f)if(r)$l(l,f,["ng-version",QM.full]);else{const{attrs:Ve,classes:nt}=function CD(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ii(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);Ve&&$l(l,f,Ve),nt&&nt.length>0&&Yd(l,f,nt.join(" "))}if(Je=sd(J,20),void 0!==t){const Ve=Je.projection=[];for(let nt=0;nt<this.ngContentSelectors.length;nt++){const rt=t[nt];Ve.push(null!=rt?Array.from(rt):null)}}Fe=function j_(n,e,t,r,i){const s=t[1],o=function UD(n,e,t){const r=Ln();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),m_(n,r,e,yo(n,e,1,null),t));const i=fa(e,n,r.directiveStart,r);Qn(i,e);const s=Ur(r,e);return s&&Qn(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Ln();e.contentQueries(1,o,l.directiveStart)}const a=Ln();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ns(a.index),h_(t[1],a,0,a.directiveStart,a.directiveEnd,e),f_(e,o)),o}(Ze,this.componentDef,be,j,[wT]),xa(J,be,null)}finally{Bl()}return new rP(this.componentType,Fe,Ho(Je,be),be,Je)}}class rP extends class GM{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new ZM(i),this.componentType=e}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Vi{}class Rv{}const Uo=new Map;class Fv extends Vi{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pv(this);const r=jr(e);this._bootstrapComponents=Ci(r.bootstrap),this._r3Injector=T_(e,t,[{provide:Vi,useValue:this},{provide:jo,useValue:this.componentFactoryResolver}],Qt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=qn.THROW_IF_NOT_FOUND,r=It.Default){return e===qn||e===Vi||e===yh?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $h extends Rv{constructor(e){super(),this.moduleType=e,null!==jr(e)&&function sP(n){const e=new Set;!function t(r){const i=jr(r,!0),s=i.id;null!==s&&(function kv(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Qt(e)} vs ${Qt(e.name)}`)}(s,Uo.get(s),r),Uo.set(s,r));const o=Ci(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new Fv(this.moduleType,e)}}function Lv(n,e,t,r){return function Nv(n,e,t,r,i,s){const o=e+t;return Zn(n,o,i)?function Ei(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function $a(n,e){const t=n[e];return t===Ot?void 0:t}(n,o+1)}(Qe(),function sr(){const n=kt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function Gh(n){return e=>{setTimeout(n,void 0,e)}}const er=class SP extends E{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),c=r;if(e&&"object"==typeof e){const C=e;a=null===(i=C.next)||void 0===i?void 0:i.bind(C),l=null===(s=C.error)||void 0===s?void 0:s.bind(C),c=null===(o=C.complete)||void 0===o?void 0:o.bind(C)}this.__isAsync&&(l=Gh(l),a&&(a=Gh(a)),c&&(c=Gh(c)));const f=super.subscribe({next:a,error:l,complete:c});return e instanceof pe&&e.add(f),f}};function EP(){return this._results[Eo()]()}class zh{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Eo(),r=zh.prototype;r[t]||(r[t]=EP)}get changes(){return this._changes||(this._changes=new er)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=$r(e);(this._changesDetected=!function Pw(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let zr=(()=>{class n{}return n.__NG_ELEMENT_ID__=DP,n})();const wP=zr,AP=class extends wP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Ta(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),xa(t,r,e),new Ua(r)}};function DP(){return Tc(Ln(),Qe())}function Tc(n,e){return 4&n.type?new AP(e,n,Ho(n,e)):null}let ci=(()=>{class n{}return n.__NG_ELEMENT_ID__=TP,n})();function TP(){return Gv(Ln(),Qe())}const xP=ci,Uv=class extends xP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ho(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const e=Wl(this._hostTNode,this._hostLView);if(kg(e)){const t=no(e,this._hostLView),r=to(e);return new ro(t[1].data[r+8],t)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=$v(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function ga(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.ngModuleRef}const l=o?e:new Uh(Yn(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const j=(o?c:this.parentInjector).get(Vi,null);j&&(s=j)}const f=l.create(c,i,void 0,s);return this.insert(f.hostView,a),f}insert(e,t){const r=e._lView,i=r[1];if(function ZE(n){return ti(n[3])}(r)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const C=r[3],j=new Uv(C,C[6],C[3]);j.detach(j.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function nD(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],$g(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function rD(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=Xd(s,o),l=r[11],c=ic(l,o[7]);return null!==c&&function ZA(n,e,t,r,i,s){r[0]=i,r[6]=e,Da(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),$g(Wh(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=$v(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=zd(this._lContainer,t);r&&(Yl(Wh(this._lContainer),t),xm(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=zd(this._lContainer,t);return r&&null!=Yl(Wh(this._lContainer),t)?new Ua(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function $v(n){return n[8]}function Wh(n){return n[8]||(n[8]=[])}function Gv(n,e){let t;const r=e[n.index];if(ti(r))t=r;else{let i;if(8&n.type)i=Pn(r);else{const s=e[11];i=s.createComment("");const o=Ur(n,e);xs(s,ic(s,o),i,function aD(n,e){return _n(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=__(r,e,i,n),dc(e,t)}return new Uv(t,n,e)}class qh{constructor(e){this.queryList=e,this.matches=null}clone(){return new qh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Xh(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Kv(e,t).matches&&this.queries[t].setDirty()}}class zv{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Kh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Kh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Yh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Yh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,IP(t,s)),this.matchTNodeWithReadOption(e,t,Xl(t,e,s,!1,!1))}else r===zr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===kr||i===ci||i===zr&&4&t.type)this.addMatch(t.index,-2);else{const s=Xl(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function IP(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function kP(n,e,t,r){return-1===t?function RP(n,e){return 11&n.type?Ho(n,e):4&n.type?Tc(n,e):null}(e,n):-2===t?function OP(n,e,t){return t===kr?Ho(e,n):t===zr?Tc(e,n):t===ci?Gv(e,n):void 0}(n,e,r):fa(n,n[1],t,e)}function Wv(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:kP(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function Jh(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=Wv(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],f=e[-l];for(let C=10;C<f.length;C++){const j=f[C];j[17]===j[3]&&Jh(j[1],j,c,r)}if(null!==f[9]){const C=f[9];for(let j=0;j<C.length;j++){const J=C[j];Jh(J[1],J,c,r)}}}}}return r}function tr(n){const e=Qe(),t=Wt(),r=wg();hd(r+1);const i=Kv(t,r);if(n.dirty&&_g(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Jh(t,e,r,[]):Wv(t,e,i,r);n.reset(s,XM),n.notifyOnChanges()}return!0}return!1}function vr(n,e,t){const r=Wt();r.firstCreatePass&&(function Xv(n,e,t){null===n.queries&&(n.queries=new Kh),n.queries.track(new Yh(e,t))}(r,new zv(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function qv(n,e,t){const r=new zh(4==(4&t));c_(n,e,r,r.destroy),null===e[19]&&(e[19]=new Xh),e[19].queries.push(new qh(r))}(r,Qe(),e)}function nr(){return function FP(n,e){return n[19].queries[e].queryList}(Qe(),wg())}function Kv(n,e){return n.queries.getByIndex(e)}function Pc(...n){}const sf=new Et("Application Initializer");let af=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Pc,this.reject=Pc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(yc(s))t.push(s);else if(cy(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ft(sf,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wa=new Et("AppId",{providedIn:"root",factory:function hb(){return`${lf()}${lf()}${lf()}`}});function lf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fb=new Et("Platform Initializer"),cf=new Et("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pb=new Et("appBootstrapListener");let eI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ui=new Et("LocaleId",{providedIn:"root",factory:()=>uo(Ui,It.Optional|It.SkipSelf)||function tI(){return"undefined"!=typeof $localize&&$localize.locale||Cc}()});class rI{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let gb=(()=>{class n{compileModuleSync(t){return new $h(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ci(jr(t).declarations).reduce((o,a)=>{const l=Yn(a);return l&&o.push(new Uh(l)),o},[]);return new rI(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sI=(()=>Promise.resolve(0))();function uf(n){"undefined"==typeof Zone?sI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class jn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new er(!1),this.onMicrotaskEmpty=new er(!1),this.onStable=new er(!1),this.onError=new er(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function oI(){let n=en.requestAnimationFrame,e=en.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function cI(n){const e=()=>{!function lI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(en,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hf(n),n.isCheckStableRunning=!0,df(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hf(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return mb(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),_b(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return mb(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),_b(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,hf(n),df(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(jn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,aI,Pc,Pc);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const aI={};function df(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hf(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function mb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _b(n){n._nesting--,df(n)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new er,this.onMicrotaskEmpty=new er,this.onStable=new er,this.onError=new er}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let ff=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jn.assertNotInAngularZone(),uf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uf(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(ft(jn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),dI=(()=>{class n{constructor(){this._applications=new Map,pf.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return pf.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class hI{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let pf=new hI,Is=null;const yb=new Et("AllowMultipleToken"),vb=new Et("PlatformOnDestroy");class bb{constructor(e,t){this.name=e,this.token=t}}function Cb(n,e,t=[]){const r=`Platform: ${e}`,i=new Et(r);return(s=[])=>{let o=gf();if(!o||o.injector.get(yb,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function mI(n){if(Is&&!Is.get(yb,!1))throw new Xt(400,"");Is=n;const e=n.get(Sb),t=n.get(fb,null);t&&t.forEach(r=>r())}(function yI(n=[],e){return qn.create({name:e,providers:[{provide:vh,useValue:"platform"},{provide:vb,useValue:()=>Is=null},...n]})}(a,r))}return function _I(n){const e=gf();if(!e)throw new Xt(401,"");return e}()}}function gf(){var n;return null!==(n=null==Is?void 0:Is.get(Sb))&&void 0!==n?n:null}let Sb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function vI(n,e){let t;return t="noop"===n?new uI:("zone.js"===n?void 0:n)||new jn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:jn,useValue:a}];return a.run(()=>{const c=qn.create({providers:l,parent:this.injector,name:t.moduleType.name}),f=t.create(c),C=f.injector.get(is,null);if(!C)throw new Xt(402,"");return a.runOutsideAngular(()=>{const j=a.onError.subscribe({next:J=>{C.handleError(J)}});f.onDestroy(()=>{mf(this._modules,f),j.unsubscribe()})}),function bI(n,e,t){try{const r=t();return yc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(C,a,()=>{const j=f.injector.get(af);return j.runInitializers(),j.donePromise.then(()=>(function Xx(n){Dr(n,"Expected localeId to be defined"),"string"==typeof n&&(nv=n.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Ui,Cc)||Cc),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,r=[]){const i=Eb({},r);return function pI(n,e,t){const r=new $h(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ic);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Xt(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xt(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(vb,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ft(qn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Eb(n,e){return Array.isArray(e)?e.reduce(Eb,n):Object.assign(Object.assign({},n),e)}let Ic=(()=>{class n{constructor(t,r,i,s){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new xe(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new xe(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{jn.assertNotInAngularZone(),uf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{jn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),f.unsubscribe()}});this.isStable=ju(o,a.pipe(tg()))}bootstrap(t,r){if(!this._initStatus.done)throw new Xt(405,"");let i;i=t instanceof Tv?t:this._injector.get(jo).resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function gI(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Vi),a=i.create(qn.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(ff,null),f=c&&a.injector.get(dI);return c&&f&&f.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),mf(this.components,a),f&&f.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Xt(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;mf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pb,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(ft(jn),ft(qn),ft(is),ft(af))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ab=!0,_f=(()=>{class n{}return n.__NG_ELEMENT_ID__=EI,n})();function EI(n){return function wI(n,e,t){if(kl(n)&&!t){const r=xr(n.index,e);return new Ua(r,r)}return 47&n.type?new Ua(e[16],e):null}(Ln(),Qe(),16==(16&n))}class Pb{constructor(){}supports(e){return Pa(e)}create(e){return new PI(e)}}const MI=(n,e)=>e;class PI{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MI}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<Rb(r,i,s)?t:r,a=Rb(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,f=l-i;if(c!=f){for(let j=0;j<c;j++){const J=j<s.length?s[j]:s[j]=0,be=J+j;f<=be&&be<c&&(s[j]=J+1)}s[o.previousIndex]=f-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Pa(e))throw new Xt(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function OT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Eo()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new II(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ib),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ib),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class II{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RI{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ib{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new RI,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rb(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class kb{constructor(){}supports(e){return e instanceof Map||Ah(e)}create(){return new kI}}class kI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ah(e)))throw new Xt(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new OI(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class OI{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ob(){return new Oc([new Pb])}let Oc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Ob()),deps:[[n,new ho,new ri]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Xt(901,"")}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:Ob}),n})();function Fb(){return new qa([new kb])}let qa=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Fb()),deps:[[n,new ho,new ri]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new Xt(901,"")}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:Fb}),n})();const NI=Cb(null,"core",[]);let BI=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ft(Ic))},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({}),n})(),Fc=null;function as(){return Fc}const bn=new Et("DocumentToken");let ks=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:function(){return function UI(){return ft(Lb)}()},providedIn:"platform"}),n})();const $I=new Et("Location Initialized");let Lb=(()=>{class n extends ks{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return as().getBaseHref(this._doc)}onPopState(t){const r=as().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=as().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Nb()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Nb()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ft(bn))},n.\u0275prov=Ft({token:n,factory:function(){return function GI(){return new Lb(ft(bn))}()},providedIn:"platform"}),n})();function Nb(){return!!window.history.pushState}function Sf(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Bb(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $i(n){return n&&"?"!==n[0]?"?"+n:n}let Go=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:function(){return function zI(n){const e=ft(bn).location;return new jb(ft(ks),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ef=new Et("appBaseHref");let jb=(()=>{class n extends Go{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Sf(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$i(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+$i(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+$i(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(ft(ks),ft(Ef,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),WI=(()=>{class n extends Go{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Sf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+$i(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+$i(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(ft(ks),ft(Ef,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),wf=(()=>{class n{constructor(t,r){this._subject=new er,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Bb(Hb(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$i(r))}normalize(t){return n.stripTrailingSlash(function XI(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Hb(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$i(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$i(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=$i,n.joinWithSlash=Sf,n.stripTrailingSlash=Bb,n.\u0275fac=function(t){return new(t||n)(ft(Go),ft(ks))},n.\u0275prov=Ft({token:n,factory:function(){return function qI(){return new wf(ft(Go),ft(ks))}()},providedIn:"root"}),n})();function Hb(n){return n.replace(/\/index.html$/,"")}class OR{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zc=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new OR(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Kb(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Kb(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(at(ci),at(zr),at(Oc))},n.\u0275dir=Wn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Kb(n,e){n.context.$implicit=e.item}let ls=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new FR,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(at(ci),at(zr))},n.\u0275dir=Wn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class FR{constructor(){this.$implicit=null,this.ngIf=null}}function Yb(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Qt(e)}'.`)}class Of{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Wc=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Wn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Jb=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Of(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(at(ci),at(zr),at(Wc,9))},n.\u0275dir=Wn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Zb=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(at(kr),at(qa),at(Va))},n.\u0275dir=Wn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),e0=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(at(ci))},n.\u0275dir=Wn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[es]}),n})(),n0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({}),n})();const r0="browser";let u1=(()=>{class n{}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:()=>new d1(ft(bn),window)}),n})();class d1{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function h1(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=s0(this.window.history)||s0(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function s0(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Nf extends class p1 extends class VI{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function HI(n){Fc||(Fc=n)}(new Nf)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function g1(){return Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null}();return null==t?null:function m1(n){qc=qc||document.createElement("a"),qc.setAttribute("href",n);const e=qc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function IR(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let qc,Ya=null;const o0=new Et("TRANSITION_ID"),y1=[{provide:sf,useFactory:function _1(n,e,t){return()=>{t.get(af).donePromise.then(()=>{const r=as(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[o0,bn,qn],multi:!0}];class Bf{static init(){!function fI(n){pf=n}(new Bf)}addToWindow(e){en.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},en.getAllAngularTestabilities=()=>e.getAllTestabilities(),en.getAllAngularRootElements=()=>e.getAllRootElements(),en.frameworkStabilizers||(en.frameworkStabilizers=[]),en.frameworkStabilizers.push(r=>{const i=en.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?as().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let v1=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const Xc=new Et("EventManagerPlugins");let Kc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ft(Xc),ft(jn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();class a0{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=as().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let l0=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),Ja=(()=>{class n extends l0{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(c0),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(c0))}}return n.\u0275fac=function(t){return new(t||n)(ft(bn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();function c0(n){as().remove(n)}const jf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hf=/%COMP%/g;function Yc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Yc(n,i,t):(i=i.replace(Hf,n),t.push(i))}return t}function h0(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vf=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Uf(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case gi.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new A1(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case gi.ShadowDom:return new D1(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Yc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ft(Kc),ft(Ja),ft(Wa))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();class Uf{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(jf[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=jf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=jf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(t,r,i&Ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,h0(r)):this.eventManager.addEventListener(e,t,h0(r))}}class A1 extends Uf{constructor(e,t,r,i){super(e),this.component=r;const s=Yc(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function S1(n){return"_ngcontent-%COMP%".replace(Hf,n)}(i+"-"+r.id),this.hostAttr=function E1(n){return"_nghost-%COMP%".replace(Hf,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class D1 extends Uf{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Yc(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let T1=(()=>{class n extends a0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(ft(bn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const p0=["alt","control","meta","shift"],M1={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},g0={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},P1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let I1=(()=>{class n extends a0{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>as().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(p0.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function R1(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&g0.hasOwnProperty(e)&&(e=g0[e]))}return M1[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),p0.forEach(s=>{s!=i&&P1[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ft(bn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const L1=Cb(NI,"browser",[{provide:cf,useValue:r0},{provide:fb,useValue:function k1(){Nf.makeCurrent(),Bf.init()},multi:!0},{provide:bn,useFactory:function F1(){return function KE(n){rd=n}(document),document},deps:[]}]),N1=[{provide:vh,useValue:"root"},{provide:is,useFactory:function O1(){return new is},deps:[]},{provide:Xc,useClass:T1,multi:!0,deps:[bn,jn,cf]},{provide:Xc,useClass:I1,multi:!0,deps:[bn]},{provide:Vf,useClass:Vf,deps:[Kc,Ja,Wa]},{provide:Mv,useExisting:Vf},{provide:l0,useExisting:Ja},{provide:Ja,useClass:Ja,deps:[bn]},{provide:ff,useClass:ff,deps:[jn]},{provide:Kc,useClass:Kc,deps:[Xc,jn]},{provide:class f1{},useClass:v1,deps:[]}];let B1=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Wa,useValue:t.appId},{provide:o0,useExisting:Wa},y1]}}}return n.\u0275fac=function(t){return new(t||n)(ft(n,12))},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({providers:N1,imports:[n0,BI]}),n})();"undefined"!=typeof window&&window;let Gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:function(t){let r=null;return r=t?new(t||n):ft(y0),r},providedIn:"root"}),n})(),y0=(()=>{class n extends Gf{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Kt.NONE:return r;case Kt.HTML:return vi(r,"HTML")?Pr(r):hm(this._doc,String(r)).toString();case Kt.STYLE:return vi(r,"Style")?Pr(r):r;case Kt.SCRIPT:if(vi(r,"Script"))return Pr(r);throw new Error("unsafe value used in a script context");case Kt.URL:return im(r),vi(r,"URL")?Pr(r):Ca(String(r));case Kt.RESOURCE_URL:if(vi(r,"ResourceURL"))return Pr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function aA(n){return new nA(n)}(t)}bypassSecurityTrustStyle(t){return function lA(n){return new rA(n)}(t)}bypassSecurityTrustScript(t){return function cA(n){return new iA(n)}(t)}bypassSecurityTrustUrl(t){return function uA(n){return new sA(n)}(t)}bypassSecurityTrustResourceUrl(t){return function dA(n){return new oA(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(ft(bn))},n.\u0275prov=Ft({token:n,factory:function(t){let r=null;return r=t?new t:function X1(n){return new y0(n.get(bn))}(ft(qn)),r},providedIn:"root"}),n})();function xt(...n){return Vn(n,na(n))}class hi extends E{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:K1}=Array,{getPrototypeOf:Y1,prototype:J1,keys:Q1}=Object;function v0(n){if(1===n.length){const e=n[0];if(K1(e))return{args:e,keys:null};if(function Z1(n){return n&&"object"==typeof n&&Y1(n)===J1}(e)){const t=Q1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:ek}=Array;function zf(n){return W(e=>function tk(n,e){return ek(e)?n(...e):n(e)}(n,e))}function b0(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function C0(n,e,t){n?ki(t,n,e):e()}function Qa(n,e){const t=p(n)?n:()=>n,r=i=>i.error(t());return new xe(e?i=>e.schedule(r,0,i):r)}const Jc=ce(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Wf(...n){return function ik(){return ta(1)}()(Vn(n,na(n)))}function S0(n){return new xe(e=>{Zt(n()).subscribe(e)})}function E0(){return D((n,e)=>{let t=null;n._refCount++;const r=k(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class sk extends xe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,S(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;const t=this.getSubject();e.add(this.source.subscribe(k(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return E0()(this)}}function us(n,e){return D((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(k(r,l=>{null==i||i.unsubscribe();let c=0;const f=s++;Zt(n(l,f)).subscribe(i=k(r,C=>r.next(e?e(l,C,f,c++):C),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ak(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(k(o,f=>{const C=c++;l=a?n(l,f,C):(a=!0,f),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function w0(n,e){return D(ak(n,e,arguments.length>=2,!0))}function Cr(n,e){return D((t,r)=>{let i=0;t.subscribe(k(r,s=>n.call(e,s,i++)&&r.next(s)))})}function zi(n){return D((e,t)=>{let s,r=null,i=!1;r=e.subscribe(k(t,void 0,void 0,o=>{s=Zt(n(o,zi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function zo(n,e){return p(e)?Fn(n,e,1):Fn(n,1)}function qf(n){return n<=0?()=>Oi:D((e,t)=>{let r=[];e.subscribe(k(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function A0(n=lk){return D((e,t)=>{let r=!1;e.subscribe(k(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lk(){return new Jc}function Xf(n){return D((e,t)=>{let r=!1;e.subscribe(k(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Os(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,s)=>n(i,s,r)):Ie,ra(1),t?Xf(e):A0(()=>new Jc))}function rr(n,e,t){const r=p(n)||e||t?{next:n,error:e,complete:t}:n;return r?D((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(k(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ie}function D0(n){return D((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Wi{constructor(e,t){this.id=e,this.url=t}}class Kf extends Wi{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Za extends Wi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class T0 extends Wi{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uk extends Wi{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dk extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hk extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fk extends Wi{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pk extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gk extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x0{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class M0{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mk{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _k{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yk{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vk{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P0{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ut="primary";class bk{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wo(n){return new bk(n)}const I0="ngNavigationCancelingError";function Yf(n){const e=Error("NavigationCancelingError: "+n);return e[I0]=!0,e}function Sk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ti(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!R0(n[i],e[i]))return!1;return!0}function R0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function k0(n){return Array.prototype.concat.apply([],n)}function O0(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xi(n){return cy(n)?n:yc(n)?Vn(Promise.resolve(n)):xt(n)}const Ak={exact:function N0(n,e,t){if(!Ls(n.segments,e.segments)||!Qc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!N0(n.children[r],e.children[r],t))return!1;return!0},subset:B0},F0={exact:function Dk(n,e){return Ti(n,e)},subset:function Tk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>R0(n[t],e[t]))},ignored:()=>!0};function L0(n,e,t){return Ak[t.paths](n.root,e.root,t.matrixParams)&&F0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function B0(n,e,t){return j0(n,e,e.segments,t)}function j0(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ls(i,t)||e.hasChildren()||!Qc(i,t,r))}if(n.segments.length===t.length){if(!Ls(n.segments,t)||!Qc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!B0(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ls(n.segments,i)&&Qc(n.segments,i,r)&&n.children[Ut])&&j0(n.children[Ut],e,s,r)}}function Qc(n,e,t){return e.every((r,i)=>F0[t](n[i].parameters,r.parameters))}class Fs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wo(this.queryParams)),this._queryParamMap}toString(){return Pk.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zc(this)}}class el{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wo(this.parameters)),this._parameterMap}toString(){return G0(this)}}function Ls(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class H0{}class V0{parse(e){const t=new jk(e);return new Fs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${tl(e.root,!0)}`,r=function kk(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${eu(t)}=${eu(i)}`).join("&"):`${eu(t)}=${eu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ik(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Pk=new V0;function Zc(n){return n.segments.map(e=>G0(e)).join("/")}function tl(n,e){if(!n.hasChildren())return Zc(n);if(e){const t=n.children[Ut]?tl(n.children[Ut],!1):"",r=[];return Xn(n.children,(i,s)=>{s!==Ut&&r.push(`${s}:${tl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Mk(n,e){let t=[];return Xn(n.children,(r,i)=>{i===Ut&&(t=t.concat(e(r,i)))}),Xn(n.children,(r,i)=>{i!==Ut&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ut?[tl(n.children[Ut],!1)]:[`${i}:${tl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ut]?`${Zc(n)}/${t[0]}`:`${Zc(n)}/(${t.join("//")})`}}function U0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eu(n){return U0(n).replace(/%3B/gi,";")}function Jf(n){return U0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tu(n){return decodeURIComponent(n)}function $0(n){return tu(n.replace(/\+/g,"%20"))}function G0(n){return`${Jf(n.path)}${function Rk(n){return Object.keys(n).map(e=>`;${Jf(e)}=${Jf(n[e])}`).join("")}(n.parameters)}`}const Ok=/^[^\/()?;=#]+/;function nu(n){const e=n.match(Ok);return e?e[0]:""}const Fk=/^[^=?&#]+/,Nk=/^[^&#]+/;class jk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ut]=new zt(e,t)),r}parseSegment(){const e=nu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new el(tu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=nu(this.remaining);i&&(r=i,this.capture(r))}e[tu(t)]=tu(r)}parseQueryParam(e){const t=function Lk(n){const e=n.match(Fk);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Bk(n){const e=n.match(Nk);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=$0(t),s=$0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ut);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ut]:new zt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class z0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Qf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Zf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zf(e,this._root).map(t=>t.value)}}function Qf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Qf(n,t);if(r)return r}return null}function Zf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Zf(n,t);if(r.length)return r.unshift(e),r}return[]}class qi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class W0 extends z0{constructor(e,t){super(e),this.snapshot=t,ep(this,e)}toString(){return this.snapshot.toString()}}function q0(n,e){const t=function Hk(n,e){const o=new ru([],{},{},"",{},Ut,e,null,n.root,-1,{});return new K0("",new qi(o,[]))}(n,e),r=new hi([new el("",{})]),i=new hi({}),s=new hi({}),o=new hi({}),a=new hi(""),l=new Ns(r,i,o,a,s,Ut,e,t.root);return l.snapshot=t.root,new W0(new qi(l,[]),t)}class Ns{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(W(e=>Wo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(W(e=>Wo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function X0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Vk(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ru{constructor(e,t,r,i,s,o,a,l,c,f,C){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=f,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class K0 extends z0{constructor(e,t){super(t),this.url=e,ep(this,t)}toString(){return Y0(this._root)}}function ep(n,e){e.value._routerState=n,e.children.forEach(t=>ep(n,t))}function Y0(n){const e=n.children.length>0?` { ${n.children.map(Y0).join(", ")} } `:"";return`${n.value}${e}`}function tp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ti(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ti(e.params,t.params)||n.params.next(t.params),function Ek(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ti(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ti(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function np(n,e){const t=Ti(n.params,e.params)&&function xk(n,e){return Ls(n,e)&&n.every((t,r)=>Ti(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||np(n.parent,e.parent))}function nl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function $k(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return nl(n,r,i);return nl(n,r)})}(n,e,t);return new qi(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>nl(n,a)),o}}const r=function Gk(n){return new Ns(new hi(n.url),new hi(n.params),new hi(n.queryParams),new hi(n.fragment),new hi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>nl(n,s));return new qi(r,i)}}function iu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rl(n){return"object"==typeof n&&null!=n&&n.outlets}function rp(n,e,t,r,i){let s={};if(r&&Xn(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new Fs(t,s,i);const o=J0(n,e,t);return new Fs(o,s,i)}function J0(n,e,t){const r={};return Xn(n.children,(i,s)=>{r[s]=i===e?t:J0(i,e,t)}),new zt(n.segments,r)}class Q0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&iu(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(rl);if(i&&i!==O0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ip{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Z0(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return su(n,e,t);const r=function Yk(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(rl(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!tC(l,c,o))return s;r+=2}else{if(!tC(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new zt(n.segments.slice(0,r.pathIndex),{});return s.children[Ut]=new zt(n.segments.slice(r.pathIndex),n.children),su(s,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?sp(n,e,t):r.match?su(n,0,i):sp(n,e,t)}function su(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function Kk(n){return rl(n[0])?n[0].outlets:{[Ut]:n}}(t),i={};return Xn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Z0(n.children[o],e,s))}),Xn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new zt(n.segments,i)}}function sp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(rl(s)){const l=Jk(s.outlets);return new zt(r,l)}if(0===i&&iu(t[0])){r.push(new el(n.segments[e].path,eC(t[0]))),i++;continue}const o=rl(s)?s.outlets[Ut]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&iu(a)?(r.push(new el(o,eC(a))),i+=2):(r.push(new el(o,{})),i++)}return new zt(r,{})}function Jk(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=sp(new zt([],{}),0,t))}),e}function eC(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function tC(n,e,t){return n==t.path&&Ti(e,t.parameters)}class Zk{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),tp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=qo(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Xn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=qo(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=qo(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=qo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new vk(s.value.snapshot))}),e.children.length&&this.forwardEvent(new _k(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(tp(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),tp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function eO(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class op{constructor(e,t){this.routes=e,this.module=t}}function ds(n){return"function"==typeof n}function Bs(n){return n instanceof Fs}const il=Symbol("INITIAL_VALUE");function sl(){return us(n=>function nk(...n){const e=na(n),t=Jp(n),{args:r,keys:i}=v0(n);if(0===r.length)return Vn([],e);const s=new xe(function rk(n,e,t=Ie){return r=>{C0(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)C0(e,()=>{const c=Vn(n[l],e);let f=!1;c.subscribe(k(r,C=>{s[l]=C,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>b0(i,o):Ie));return t?s.pipe(zf(t)):s}(n.map(e=>e.pipe(ra(1),function ok(...n){const e=na(n);return D((t,r)=>{(e?Wf(n,t,e):Wf(n,t)).subscribe(r)})}(il)))).pipe(w0((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==il?i:(s===il&&(r=!0),r||!1!==s&&o!==t.length-1&&!Bs(s)?i:s),e)},il),Cr(e=>e!==il),W(e=>Bs(e)?e:!0===e),ra(1)))}class oO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ol,this.attachRef=null}}class ol{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new oO,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ap=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new er,this.deactivateEvents=new er,this.attachEvents=new er,this.detachEvents=new er,this.name=s||Ut,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new aO(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(at(ol),at(ci),at(jo),io("name"),at(_f))},n.\u0275dir=Wn({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class aO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ns?this.route:e===ol?this.childContexts:this.parent.get(e,t)}}let nC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&fn(0,"router-outlet")},directives:[ap],encapsulation:2}),n})();function rC(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];lO(r,cO(e,r))}}function lO(n,e){n.children&&rC(n.children,e)}function cO(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function lp(n){const e=n.children&&n.children.map(lp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ut&&(t.component=nC),t}function Xr(n){return n.outlet||Ut}function iC(n,e){const t=n.filter(r=>Xr(r)===e);return t.push(...n.filter(r=>Xr(r)!==e)),t}const sC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ou(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},sC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Sk)(t,n,e);if(!s)return Object.assign({},sC);const o={};Xn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function au(n,e,t,r,i="corrected"){if(t.length>0&&function hO(n,e,t){return t.some(r=>lu(n,e,r)&&Xr(r)!==Ut)}(n,t,r)){const o=new zt(e,function dO(n,e,t,r){const i={};i[Ut]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Xr(s)!==Ut){const o=new zt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Xr(s)]=o}return i}(n,e,r,new zt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function fO(n,e,t){return t.some(r=>lu(n,e,r))}(n,t,r)){const o=new zt(n.segments,function uO(n,e,t,r,i,s){const o={};for(const a of r)if(lu(n,t,a)&&!i[Xr(a)]){const l=new zt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Xr(a)]=l}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new zt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function lu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function oC(n,e,t,r){return!!(Xr(n)===r||r!==Ut&&lu(e,t,n))&&("**"===n.path||ou(e,n,t).matched)}function aC(n,e,t){return 0===e.length&&!n.children[t]}class cu{constructor(e){this.segmentGroup=e||null}}class lC{constructor(e){this.urlTree=e}}function al(n){return Qa(new cu(n))}function cC(n){return Qa(new lC(n))}class _O{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Vi)}apply(){const e=au(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ut).pipe(W(s=>this.createUrlTree(cp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zi(s=>{if(s instanceof lC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof cu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ut).pipe(W(i=>this.createUrlTree(cp(i),e.queryParams,e.fragment))).pipe(zi(i=>{throw i instanceof cu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new zt([],{[Ut]:e}):e;return new Fs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(W(s=>new zt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Vn(i).pipe(zo(s=>{const o=r.children[s],a=iC(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(W(l=>({segment:l,outlet:s})))}),w0((s,o)=>(s[o.outlet]=o.segment,s),{}),function ck(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,s)=>n(i,s,r)):Ie,qf(1),t?Xf(e):A0(()=>new Jc))}())}expandSegment(e,t,r,i,s,o){return Vn(r).pipe(zo(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(zi(c=>{if(c instanceof cu)return xt(null);throw c}))),Os(a=>!!a),zi((a,l)=>{if(a instanceof Jc||"EmptyError"===a.name)return aC(t,i,s)?xt(new zt([],{})):al(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return oC(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):al(t):al(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cC(s):this.lineralizeSegments(r,s).pipe(Fn(o=>{const a=new zt(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:f}=ou(t,i,s);if(!a)return al(t);const C=this.applyRedirectCommands(l,i.redirectTo,f);return i.redirectTo.startsWith("/")?cC(C):this.lineralizeSegments(i,C).pipe(Fn(j=>this.expandSegment(e,t,r,j.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?xt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(W(C=>(r._loadedConfig=C,new zt(i,{})))):xt(new zt(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=ou(t,r,i);return o?this.getChildConfig(e,r,i).pipe(Fn(f=>{const C=f.module,j=f.routes,{segmentGroup:J,slicedSegments:be}=au(t,a,l,j),Fe=new zt(J.segments,J.children);if(0===be.length&&Fe.hasChildren())return this.expandChildren(C,j,Fe).pipe(W(nt=>new zt(a,nt)));if(0===j.length&&0===be.length)return xt(new zt(a,{}));const Je=Xr(r)===s;return this.expandSegment(C,Fe,j,be,Je?Ut:s,!0).pipe(W(Ve=>new zt(a.concat(Ve.segments),Ve.children)))})):al(t)}getChildConfig(e,t,r){return t.children?xt(new op(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?xt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Fn(i=>i?this.configLoader.load(e.injector,t).pipe(W(s=>(t._loadedConfig=s,s))):function gO(n){return Qa(Yf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):xt(new op([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?xt(i.map(o=>{const a=e.get(o);let l;if(function nO(n){return n&&ds(n.canLoad)}(a))l=a.canLoad(t,r);else{if(!ds(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}return xi(l)})).pipe(sl(),rr(o=>{if(!Bs(o))return;const a=Yf(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),W(o=>!0===o)):xt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return xt(r);if(i.numberOfChildren>1||!i.children[Ut])return Qa(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Ut]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Fs(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Xn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new zt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function cp(n){const e={};for(const r of Object.keys(n.children)){const s=cp(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function yO(n){if(1===n.numberOfChildren&&n.children[Ut]){const e=n.children[Ut];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}class uC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uu{constructor(e,t){this.component=e,this.route=t}}function bO(n,e,t){const r=n._root;return ll(r,e?e._root:null,t,[r.value])}function du(n,e,t){const r=function SO(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ll(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=qo(e);return n.children.forEach(o=>{(function EO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function wO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ls(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ls(n.url,e.url)||!Ti(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!np(n,e)||!Ti(n.queryParams,e.queryParams);default:return!np(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new uC(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ll(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uu(a.outlet.component,o))}else o&&cl(e,a,i),i.canActivateChecks.push(new uC(r)),ll(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Xn(s,(o,a)=>cl(o,t.getContext(a),i)),i}function cl(n,e,t){const r=qo(n),i=n.value;Xn(r,(s,o)=>{cl(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new uu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class kO{}function dC(n){return new xe(e=>e.error(n))}class FO{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=au(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ut);if(null===t)return null;const r=new ru([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new qi(r,t),s=new K0(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=X0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=iC(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=hC(r);return function LO(n){n.sort((e,t)=>e.value.outlet===Ut?-1:t.value.outlet===Ut?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return aC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!oC(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const J=r.length>0?O0(r).parameters:{};s=new ru(r,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gC(e),Xr(e),e.component,e,fC(t),pC(t)+r.length,mC(e))}else{const J=ou(t,e,r);if(!J.matched)return null;o=J.consumedSegments,a=J.remainingSegments,s=new ru(o,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gC(e),Xr(e),e.component,e,fC(t),pC(t)+o.length,mC(e))}const l=function NO(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:f}=au(t,o,a,l.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===f.length&&c.hasChildren()){const J=this.processChildren(l,c);return null===J?null:[new qi(s,J)]}if(0===l.length&&0===f.length)return[new qi(s,[])];const C=Xr(e)===i,j=this.processSegment(l,c,f,C?Ut:i);return null===j?null:[new qi(s,j)]}}function BO(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function hC(n){const e=[],t=new Set;for(const r of n){if(!BO(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=hC(r.children);e.push(new qi(r.value,i))}return e.filter(r=>!t.has(r))}function fC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function pC(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function gC(n){return n.data||{}}function mC(n){return n.resolve||{}}function _C(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function up(n){return us(e=>{const t=n(e);return t?Vn(t).pipe(W(()=>e)):xt(e)})}class WO extends class zO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const dp=new Et("ROUTES");class yC{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(W(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new op(k0(o.injector.get(dp,void 0,It.Self|It.Optional)).map(lp),o)}),zi(s=>{throw t._loader$=void 0,s}));return t._loader$=new sk(i,()=>new E).pipe(E0()),t._loader$}loadModuleFactory(e){return xi(e()).pipe(Fn(t=>t instanceof Rv?xt(t):Vn(this.compiler.compileModuleAsync(t))))}}class XO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function KO(n){throw n}function YO(n,e,t){return e.parse("/")}function vC(n,e){return xt(null)}const JO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=KO,this.malformedUriErrorHandler=YO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vC,afterPreactivation:vC},this.urlHandlingStrategy=new XO,this.routeReuseStrategy=new WO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Vi),this.console=o.get(eI);const C=o.get(jn);this.isNgZoneEnabled=C instanceof jn&&jn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function wk(){return new Fs(new zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new yC(o,a,j=>this.triggerEvent(new x0(j)),j=>this.triggerEvent(new M0(j))),this.routerState=q0(this.currentUrlTree,this.rootComponentType),this.transitions=new hi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Cr(i=>0!==i.id),W(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),us(i=>{let s=!1,o=!1;return xt(i).pipe(rr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),us(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return bC(a.source)&&(this.browserUrlTree=a.extractedUrl),xt(a).pipe(us(C=>{const j=this.transitions.getValue();return r.next(new Kf(C.id,this.serializeUrl(C.extractedUrl),C.source,C.restoredState)),j!==this.transitions.getValue()?Oi:Promise.resolve(C)}),function vO(n,e,t,r){return us(i=>function mO(n,e,t,r,i){return new _O(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(W(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),rr(C=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:C.urlAfterRedirects})}),function jO(n,e,t,r,i){return Fn(s=>function OO(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new FO(n,e,t,r,i,s).recognize();return null===o?dC(new kO):xt(o)}catch(o){return dC(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(W(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,C=>this.serializeUrl(C),this.paramsInheritanceStrategy,this.relativeLinkResolution),rr(C=>{if("eager"===this.urlUpdateStrategy){if(!C.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);this.setBrowserUrl(J,C)}this.browserUrlTree=C.urlAfterRedirects}const j=new dk(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);r.next(j)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:J,source:be,restoredState:Fe,extras:Je}=a,Ze=new Kf(j,this.serializeUrl(J),be,Fe);r.next(Ze);const Ve=q0(J,this.rootComponentType).snapshot;return xt(Object.assign(Object.assign({},a),{targetSnapshot:Ve,urlAfterRedirects:J,extras:Object.assign(Object.assign({},Je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Oi}),up(a=>{const{targetSnapshot:l,id:c,extractedUrl:f,rawUrl:C,extras:{skipLocationChange:j,replaceUrl:J}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:f,rawUrlTree:C,skipLocationChange:!!j,replaceUrl:!!J})}),rr(a=>{const l=new hk(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),W(a=>Object.assign(Object.assign({},a),{guards:bO(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function AO(n,e){return Fn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?xt(Object.assign(Object.assign({},t),{guardsResult:!0})):function DO(n,e,t,r){return Vn(n).pipe(Fn(i=>function RO(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?xt(s.map(a=>{const l=du(a,e,i);let c;if(function sO(n){return n&&ds(n.canDeactivate)}(l))c=xi(l.canDeactivate(n,e,t,r));else{if(!ds(l))throw new Error("Invalid CanDeactivate guard");c=xi(l(n,e,t,r))}return c.pipe(Os())})).pipe(sl()):xt(!0)}(i.component,i.route,t,e,r)),Os(i=>!0!==i,!0))}(o,r,i,n).pipe(Fn(a=>a&&function tO(n){return"boolean"==typeof n}(a)?function TO(n,e,t,r){return Vn(e).pipe(zo(i=>Wf(function MO(n,e){return null!==n&&e&&e(new mk(n)),xt(!0)}(i.route.parent,r),function xO(n,e){return null!==n&&e&&e(new yk(n)),xt(!0)}(i.route,r),function IO(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function CO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>S0(()=>xt(o.guards.map(l=>{const c=du(l,o.node,t);let f;if(function iO(n){return n&&ds(n.canActivateChild)}(c))f=xi(c.canActivateChild(r,n));else{if(!ds(c))throw new Error("Invalid CanActivateChild guard");f=xi(c(r,n))}return f.pipe(Os())})).pipe(sl())));return xt(s).pipe(sl())}(n,i.path,t),function PO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return xt(!0);const i=r.map(s=>S0(()=>{const o=du(s,e,t);let a;if(function rO(n){return n&&ds(n.canActivate)}(o))a=xi(o.canActivate(e,n));else{if(!ds(o))throw new Error("Invalid CanActivate guard");a=xi(o(e,n))}return a.pipe(Os())}));return xt(i).pipe(sl())}(n,i.route,t))),Os(i=>!0!==i,!0))}(r,s,n,e):xt(a)),W(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),rr(a=>{if(Bs(a.guardsResult)){const c=Yf(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new fk(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Cr(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),up(a=>{if(a.guards.canActivateChecks.length)return xt(a).pipe(rr(l=>{const c=new pk(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),us(l=>{let c=!1;return xt(l).pipe(function HO(n,e){return Fn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return xt(t);let s=0;return Vn(i).pipe(zo(o=>function VO(n,e,t,r){return function UO(n,e,t,r){const i=_C(n);if(0===i.length)return xt({});const s={};return Vn(i).pipe(Fn(o=>function $O(n,e,t,r){const i=du(n,e,r);return xi(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(rr(a=>{s[o]=a}))),qf(1),Fn(()=>_C(s).length===i.length?xt(s):Oi))}(n._resolve,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),X0(n,t).resolve),null)))}(o.route,r,n,e)),rr(()=>s++),qf(1),Fn(o=>s===i.length?xt(t):Oi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),rr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),rr(l=>{const c=new gk(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),up(a=>{const{targetSnapshot:l,id:c,extractedUrl:f,rawUrl:C,extras:{skipLocationChange:j,replaceUrl:J}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:f,rawUrlTree:C,skipLocationChange:!!j,replaceUrl:!!J})}),W(a=>{const l=function Uk(n,e,t){const r=nl(n,e._root,t?t._root:void 0);return new W0(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),rr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>W(r=>(new Zk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),rr({next(){s=!0},complete(){s=!0}}),D0(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),zi(a=>{if(o=!0,function Ck(n){return n&&n[I0]}(a)){const l=Bs(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new T0(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const f=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bC(i.source)};this.scheduleNavigation(f,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new uk(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return Oi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){rC(t),this.config=t.map(lp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,f=l?this.currentUrlTree.fragment:o;let C=null;switch(a){case"merge":C=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}return null!==C&&(C=this.removeEmptyProps(C)),function zk(n,e,t,r,i){if(0===t.length)return rp(e.root,e.root,e.root,r,i);const s=function Wk(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Q0(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Xn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Q0(t,e,r)}(t);if(s.toRoot())return rp(e.root,e.root,new zt([],{}),r,i);const o=function qk(n,e,t){if(n.isAbsolute)return new ip(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new ip(s,s===e.root,0)}const r=iu(n.commands[0])?0:1;return function Xk(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ip(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?su(o.segmentGroup,o.index,s.commands):Z0(o.segmentGroup,o.index,s.commands);return rp(e.root,o.segmentGroup,a,r,i)}(c,this.currentUrlTree,t,C,null!=f?f:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ZO(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},JO):!1===r?Object.assign({},QO):r,Bs(t))return L0(this.currentUrlTree,t,i);const s=this.parseUrl(t);return L0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Za(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,f,C;o?(c=o.resolve,f=o.reject,C=o.promise):C=new Promise((be,Fe)=>{c=be,f=Fe});const j=++this.navigationId;let J;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),J=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):J=0,this.setTransition({id:j,targetPageId:J,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:f,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(be=>Promise.reject(be))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new T0(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Ph()},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();function bC(n){return"imperative"!==n}class CC{}class SC{preload(e,t){return xt(null)}}let EC=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new yC(i,r,l=>t.triggerEvent(new x0(l)),l=>t.triggerEvent(new M0(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof Za),zo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Vi);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return Vn(i).pipe(ta(),W(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?xt(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Fn(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(ft(ir),ft(gb),ft(qn),ft(CC))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),pp=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Kf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Za&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof P0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new P0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Ph()},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const js=new Et("ROUTER_CONFIGURATION"),wC=new Et("ROUTER_FORROOT_GUARD"),rF=[wf,{provide:H0,useClass:V0},{provide:ir,useFactory:function lF(n,e,t,r,i,s,o={},a,l){const c=new ir(null,n,e,t,r,i,k0(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function cF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(f=>{var C,j;null===(C=console.group)||void 0===C||C.call(console,`Router Event: ${f.constructor.name}`),console.log(f.toString()),console.log(f),null===(j=console.groupEnd)||void 0===j||j.call(console)}),c},deps:[H0,ol,wf,qn,gb,dp,js,[class qO{},new ri],[class GO{},new ri]]},ol,{provide:Ns,useFactory:function uF(n){return n.routerState.root},deps:[ir]},EC,SC,class nF{preload(e,t){return t().pipe(zi(()=>xt(null)))}},{provide:js,useValue:{enableTracing:!1}}];function iF(){return new bb("Router",ir)}let AC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[rF,DC(t),{provide:wC,useFactory:aF,deps:[[ir,new ri,new ho]]},{provide:js,useValue:r||{}},{provide:Go,useFactory:oF,deps:[ks,[new Zl(Ef),new ri],js]},{provide:pp,useFactory:sF,deps:[ir,u1,js]},{provide:CC,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:SC},{provide:bb,multi:!0,useFactory:iF},[gp,{provide:sf,multi:!0,useFactory:dF,deps:[gp]},{provide:TC,useFactory:hF,deps:[gp]},{provide:pb,multi:!0,useExisting:TC}]]}}static forChild(t){return{ngModule:n,providers:[DC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(ft(wC,8),ft(ir,8))},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({}),n})();function sF(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new pp(n,e,t)}function oF(n,e,t={}){return t.useHash?new WI(n,e):new jb(n,e)}function aF(n){return"guarded"}function DC(n){return[{provide:Mw,multi:!0,useValue:n},{provide:dp,multi:!0,useValue:n}]}let gp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get($I,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(ir),o=this.injector.get(js);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?xt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(js),i=this.injector.get(EC),s=this.injector.get(pp),o=this.injector.get(ir),a=this.injector.get(Ic);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(ft(qn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();function dF(n){return n.appInitializer.bind(n)}function hF(n){return n.bootstrapListener.bind(n)}const TC=new Et("Router Initializer");class ul{createDataView(e){let t=new ArrayBuffer(5+e),r=new DataView(t);return r.setInt32(0,e),r.setInt8(4,this.getType()),r}}var on=(()=>{return(n=on||(on={}))[n.STREAM_INIT=0]="STREAM_INIT",n[n.STREAM_START=1]="STREAM_START",n[n.STREAM_PAGE_ACTION=2]="STREAM_PAGE_ACTION",n[n.STREAM_PAGE_ACTIONS=3]="STREAM_PAGE_ACTIONS",n[n.STREAM_PAGE_CREATED=4]="STREAM_PAGE_CREATED",n[n.STREAM_PAGE_DELETED=5]="STREAM_PAGE_DELETED",n[n.STREAM_PAGE_SELECTED=6]="STREAM_PAGE_SELECTED",n[n.STREAM_DOCUMENT_CREATED=7]="STREAM_DOCUMENT_CREATED",n[n.STREAM_DOCUMENT_CLOSED=8]="STREAM_DOCUMENT_CLOSED",n[n.STREAM_DOCUMENT_SELECTED=9]="STREAM_DOCUMENT_SELECTED",n[n.STREAM_SPEECH_PUBLISHED=10]="STREAM_SPEECH_PUBLISHED",on;var n})();class hu extends ul{constructor(e,t){super(),this.documentId=e,this.pageNumber=t}getType(){return on.STREAM_PAGE_ACTIONS}toByteBuffer(){let e=this.createDataView(12);return e.setBigInt64(5,this.documentId),e.setInt32(13,this.pageNumber),e.buffer}}class fu extends hu{constructor(e,t){super(e,t)}getType(){return on.STREAM_PAGE_SELECTED}}class Cn{}class mp extends Cn{constructor(e){super(),this.pageNumber=e}execute(e){e.setPageNumber(this.pageNumber)}}class _p extends ul{constructor(e,t,r,i){super(),this.documentId=e,this.documentType=t,this.documentTitle=r,this.documentFile=i}getType(){return on.STREAM_PAGE_ACTIONS}toByteBuffer(){let e=[],t=[],r=0,i=0,o=8;if(null!=this.documentTitle){for(let f=0;f<this.documentTitle.length;++f){let C=this.documentTitle.charCodeAt(f);e=e.concat([C])}r=e.length,o+=e.length}if(null!=this.documentFile){for(let f=0;f<this.documentFile.length;++f){let C=this.documentFile.charCodeAt(f);t=t.concat([C])}i=t.length,o+=t.length}let a=new ArrayBuffer(22+o),l=new DataView(a);l.setInt32(0,14+o),l.setInt8(4,this.getType()),l.setBigInt64(5,this.documentId),l.setInt8(13,this.documentType),l.setInt32(14,r),l.setInt32(18,i),l.setInt32(22,0);let c=26;for(const f in e)l.setUint8(c,e[f]),c++;for(const f in t)l.setUint8(c,t[f]),c++;return console.log(c),l.buffer}}class yp extends _p{constructor(e,t,r,i){super(e,t,r,i)}getType(){return on.STREAM_DOCUMENT_SELECTED}}class vp extends hu{constructor(e,t,r){super(e,t),this.action=r}getType(){return on.STREAM_PAGE_ACTION}}class xC extends _p{constructor(e,t,r,i){super(e,t,r,i)}getType(){return on.STREAM_DOCUMENT_CLOSED}}function MC(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function Mi(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){MC(s,r,i,o,a,"next",l)}function a(l){MC(s,r,i,o,a,"throw",l)}o(void 0)})}}class dl{constructor(e,t,r,i){this._page=e,this._changeType=t,r&&(this._shape=r),i&&(this._dirtyRegion=i)}get changeType(){return this._changeType}get page(){return this._page}get shape(){return this._shape}get dirtyRegion(){return this._dirtyRegion}}var Or=(()=>{return(n=Or||(Or={})).Clear="Clear",n.ShapeAdded="ShapeAdded",n.ShapeRemoved="ShapeRemoved",n.ShapeModified="ShapeModified",n.PageTransform="PageTransform",Or;var n})();class pu{constructor(){this.listeners=[],this.listenersOncer=[]}subscribe(e){return this.listeners.push(e),{dispose:()=>this.unsubscribe(e)}}subscribeOnce(e){this.listenersOncer.push(e)}unsubscribe(e){const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}publish(e){this.listeners.forEach(t=>t(e)),this.listenersOncer.forEach(t=>t(e)),this.listenersOncer=[]}pipe(e){return this.subscribe(t=>e.publish(t))}}class pF{constructor(e){this.undoActions=[],this.redoActions=[],this.model=e}executeAction(e){this.undoActions.push(e),this.redoActions.length=0,e.execute(this.model)}undo(){if(this.undoActions.length<1)return;const e=this.undoActions.pop();e&&(this.redoActions.push(e),e.undo(this.model))}redo(){if(this.redoActions.length<1)return;const e=this.redoActions.pop();e&&(this.undoActions.push(e),e.redo(this.model))}clear(){this.undoActions.length=0,this.redoActions.length=0}}class ur{constructor(e,t){this._shape=e,this._dirtyRegion=t}get shape(){return this._shape}get dirtyRegion(){return this._dirtyRegion}}class Kr{constructor(e,t,r,i){this.set(e,t,r,i)}set(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i}isEmpty(){return this.width<=0||this.height<=0}containsPoint(e){const t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t<this.x+this.width&&r<this.y+this.height}containsRect(e){if(this.isEmpty()||e.isEmpty())return!1;const t=e.x,r=e.y,o=this.x,a=this.y;return t>=o&&r>=a&&t+e.width<=o+this.width&&r+e.height<=a+this.height}intersectsLine(e,t,r,i){const s=this.x,o=this.x+this.width,a=this.y,l=this.y+this.height;let c=this.computeCode(e,t,s,o,a,l),f=this.computeCode(r,i,s,o,a,l);for(;;){if(!(c|f))return!0;if(c&f)return!1;{let j,J,C=c||f;8&C?(j=e+(r-e)*(l-t)/(i-t),J=l):4&C?(j=e+(r-e)*(a-t)/(i-t),J=a):2&C?(J=t+(i-t)*(o-e)/(r-e),j=o):1&C&&(J=t+(i-t)*(s-e)/(r-e),j=s),void 0!==j&&void 0!==J&&C==c?c=this.computeCode(e=j,t=J,s,o,a,l):void 0!==j&&void 0!==J&&(f=this.computeCode(r=j,i=J,s,o,a,l))}}}intersection(e){const t=Math.max(this.x,e.x),r=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width)-t,s=Math.min(this.y+this.height,e.y+e.height)-r;return i<=0||s<=0?null:new Kr(t,r,i,s)}union(e){const t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);this.set(t,r,i-t,s-r)}equals(e){return!!e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}toString(){return`[${this.x}, ${this.y}, ${this.height}, ${this.width}]`}static empty(){return new Kr(0,0,0,0)}computeCode(e,t,r,i,s,o){let a=0;return e<r?a|=1:e>i&&(a|=2),t<s?a|=4:t>o&&(a|=8),a}}class gu{constructor(e){this._points=[],this._bounds=Kr.empty(),this.changeEvent=new pu,this._handle=e}get handle(){return this._handle}addPoint(e){const t=this._points.length;let r=null;return t>0&&(r=this._points[t-1]),!(r&&e.equals(r)||(this._points.push(e),0))}get points(){return this._points}contains(e){return this._bounds.containsPoint(e)}intersects(e){return null!=this._bounds.intersection(e)}get bounds(){return this._bounds}getKeyEvent(){return this.keyEvent}setKeyEvent(e){this.keyEvent=e}isSelected(){return this.selected}setSelected(e){this.selected!=e&&(this.selected=e,this.fireShapeEvent(new ur(this,this.bounds)))}moveByDelta(e){for(let t of this._points)t.subtract(e);this.updateBoundsByDelta(e),this.fireShapeEvent(new ur(this,this.bounds))}clone(){return Object.create(this)}addChangeListener(e){return this.changeEvent.subscribe(e)}removeChangeListener(e){this.changeEvent.unsubscribe(e)}updateBoundsByDelta(e){this.bounds.x-=e.x,this.bounds.y-=e.y}fireShapeEvent(e){this.changeEvent.publish(e)}}class OC extends gu{constructor(e){super(0),this.page=e,this.updateBounds()}getPage(){return this.page}setPageRect(e){this.bounds.equals(e)||(this.bounds.set(e.x,e.y,e.width,e.height),this.fireShapeEvent(new ur(this,this.bounds)))}updateBounds(){this.bounds.set(0,0,1,1)}}class FC{constructor(e,t){this.actionHandler=new pF(this),this.changeEvent=new pu,this.shapes=[],this.document=e,this.pageNumber=t,this.slideShape=new OC(this),this.slideShape.addChangeListener(this.onSlideTransform.bind(this)),this.shapeChangeListener=this.onShapeModified.bind(this)}render(e,t,r){return this.document.renderPage(this.pageNumber,e,t,r)}renderText(e,t){this.document.renderPageText(this.pageNumber,e,t,this.getSlideShape().bounds)}addChangeListener(e){return this.changeEvent.subscribe(e)}removeChangeListener(e){this.changeEvent.unsubscribe(e)}addShape(e){const t=this.shapes.length;this.shapes.push(e)>t&&(e.addChangeListener(this.shapeChangeListener),this.firePageEvent(new dl(this,Or.ShapeAdded,e)))}removeShape(e){const t=this.shapes.indexOf(e);t>-1&&this.shapes.splice(t,1).length>0&&(e.removeChangeListener(this.shapeChangeListener),this.firePageEvent(new dl(this,Or.ShapeRemoved,e)))}getSlideShape(){return this.slideShape}getShapes(){return this.shapes}hasShapes(){return this.shapes.length>0}addAction(e){this.actionHandler.executeAction(e)}undo(){this.actionHandler.undo()}redo(){this.actionHandler.redo()}clear(){this.actionHandler.clear(),this.shapes.length=0,this.firePageEvent(new dl(this,Or.Clear,void 0))}getPageNumber(){return this.pageNumber}onSlideTransform(e){this.firePageEvent(new dl(this,Or.PageTransform,e.shape,e.dirtyRegion))}onShapeModified(e){this.firePageEvent(new dl(this,Or.ShapeModified,e.shape,e.dirtyRegion))}firePageEvent(e){this.changeEvent.publish(e)}}class LC{constructor(){}getDocumentId(){return this.documentId}setDocumentId(e){this.documentId=e}getPageCount(){return this.pages.length}getPage(e){if(e<0||e>this.pages.length-1)throw new Error(`Page number ${e} out of bounds.`);return this.pages[e]}}class mF{render(e,t,r){return Mi(function*(){return new Promise(i=>{e.canvas.width=r.width,e.canvas.height=r.height,e.fillStyle="white",e.fillRect(r.x,r.y,r.width,r.height),i(e.canvas)})})()}}class NC extends LC{constructor(){super(),this.renderer=new mF,this.loadPages()}getPageText(e){return Mi(function*(){return Promise.resolve("")})()}renderPage(e,t,r,i){return this.renderer.render(t,r,i)}renderPageText(e,t,r,i){}loadPages(){this.pages=[];for(let e=0;e<300;e++)this.pages.push(new FC(this,e))}}class BC extends _p{constructor(e,t,r,i){super(e,t,r,i)}getType(){return on.STREAM_DOCUMENT_CREATED}}class _F extends hu{constructor(e,t){super(e,t)}getType(){return on.STREAM_PAGE_CREATED}}class yF extends hu{constructor(e,t){super(e,t)}getType(){return on.STREAM_PAGE_DELETED}}class vF extends ul{constructor(e,t){super(),this.documentId=e,this.recordedPage=t}getType(){return on.STREAM_PAGE_ACTIONS}toByteBuffer(){let t=this.createDataView([].length+8);return t.setBigInt64(5,this.documentId),t.buffer}}class bF extends ul{constructor(e){super(),this.courseId=e}getType(){return on.STREAM_START}toByteBuffer(){return new ArrayBuffer(12)}}class CF extends ul{constructor(e){super(),this.publisherId=e}getType(){return on.STREAM_SPEECH_PUBLISHED}toByteBuffer(){return new ArrayBuffer(12)}}class SF extends CF{constructor(e){super(e)}getType(){return on.STREAM_SPEECH_PUBLISHED}}var qt=(()=>{return(n=qt||(qt={}))[n.TOOL_BEGIN=0]="TOOL_BEGIN",n[n.TOOL_EXECUTE=1]="TOOL_EXECUTE",n[n.TOOL_END=2]="TOOL_END",n[n.PEN=3]="PEN",n[n.HIGHLIGHTER=4]="HIGHLIGHTER",n[n.POINTER=5]="POINTER",n[n.ARROW=6]="ARROW",n[n.LINE=7]="LINE",n[n.RECTANGLE=8]="RECTANGLE",n[n.ELLIPSE=9]="ELLIPSE",n[n.TEXT=10]="TEXT",n[n.TEXT_CHANGE=11]="TEXT_CHANGE",n[n.TEXT_FONT_CHANGE=12]="TEXT_FONT_CHANGE",n[n.TEXT_LOCATION_CHANGE=13]="TEXT_LOCATION_CHANGE",n[n.TEXT_REMOVE=14]="TEXT_REMOVE",n[n.TEXT_SELECTION=15]="TEXT_SELECTION",n[n.LATEX=16]="LATEX",n[n.LATEX_FONT_CHANGE=17]="LATEX_FONT_CHANGE",n[n.UNDO=18]="UNDO",n[n.REDO=19]="REDO",n[n.CLONE=20]="CLONE",n[n.SELECT=21]="SELECT",n[n.SELECT_GROUP=22]="SELECT_GROUP",n[n.RUBBER=23]="RUBBER",n[n.CLEAR_SHAPES=24]="CLEAR_SHAPES",n[n.PANNING=25]="PANNING",n[n.EXTEND_VIEW=26]="EXTEND_VIEW",n[n.ZOOM=27]="ZOOM",n[n.ZOOM_OUT=28]="ZOOM_OUT",n[n.NEXT_PAGE=29]="NEXT_PAGE",n[n.KEY=30]="KEY",n[n.STATIC=31]="STATIC",n[n.PAGE=32]="PAGE",n[n.RUBBER_EXT=33]="RUBBER_EXT",n[n.TEXT_SELECTION_EXT=34]="TEXT_SELECTION_EXT",qt;var n})();class dr{constructor(e,t){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}distance(e){const t=e.x-this.x,r=e.y-this.y;return Math.sqrt(t*t+r*r)}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return this.x*=e,this.y*=e,this}normalize(){const e=Math.sqrt(this.x*this.x+this.y*this.y);return this.x/=e,this.y/=e,this}equals(e){return!!e&&this.x===e.x&&this.y===e.y}}class Pi extends dr{constructor(e,t,r){super(e,t),this.p=r}clone(){return new Pi(this.x,this.y,this.p)}equals(e){return!!e&&this.x===e.x&&this.y===e.y&&this.p===e.p}static createZero(){return new Pi(0,0,0)}}class hs extends Cn{constructor(e,t){super(),this.shapeHandle=e,t&&(this.brush=t)}}class Hs{begin(e,t){}execute(e){}end(e){}}class jC{constructor(e){this.shapes=e}}class Xi extends jC{constructor(e){super(e)}execute(e){for(let t of this.shapes)e.addShape(t)}undo(e){for(let t of this.shapes)e.removeShape(t)}redo(e){this.execute(e)}}class Ii{constructor(e,t,r,i){this.set(e,t,r,i)}set(e,t,r,i){this.x1=e,this.y1=t,this.x2=r,this.y2=i}getStartPoint(){return new dr(this.x1,this.y1)}getEndPoint(){return new dr(this.x2,this.y2)}distance(e,t){const r=this.x2-this.x1,i=this.y2-this.y1,s=Math.sqrt(r*r+i*i);return Math.abs(((this.y1-this.y2)*e+r*t+(this.x1*this.y2-this.x2*this.y1))/s)}intersects(e){return Ii.intersects(this.x1,this.y1,this.x2,this.y2,e.x1,e.y1,e.x2,e.y2)}getIntersectionPoint(e,t,r,i){const s=(i-t)*(this.x2-this.x1)-(r-e)*(this.y2-this.y1);if(Math.abs(s)<.01)return null;const l=((r-e)*(this.y1-t)-(i-t)*(this.x1-e))/s,c=((this.x2-this.x1)*(this.y1-t)-(this.y2-this.y1)*(this.x1-e))/s;if(l>=0&&l<=1&&c>=0&&c<=1){const f=this.y2-this.y1,C=this.x1-this.x2,j=f*this.x1+C*this.y1,J=i-t,be=e-r,Fe=J*e+be*t;return new dr((be*j-C*Fe)/s,(f*Fe-J*j)/s)}return null}static intersects(e,t,r,i,s,o,a,l){const c=(l-o)*(r-e)-(a-s)*(i-t);if(0==c)return!1;const j=((a-s)*(t-o)-(l-o)*(e-s))/c,J=((r-e)*(t-o)-(i-t)*(e-s))/c;return j>=0&&j<=1&&J>=0&&J<=1}}class Vs extends gu{constructor(e,t){super(e),this.minPoint=new dr(0,0),this.maxPoint=new dr(0,0),t&&(this._brush=t)}get brush(){return this._brush}addPoint(e){const t=super.addPoint(e);return t&&(this.minPoint.x=Math.min(this.minPoint.x,e.x),this.minPoint.y=Math.min(this.minPoint.y,e.y),this.maxPoint.x=Math.max(this.maxPoint.x,e.x),this.maxPoint.y=Math.max(this.maxPoint.y,e.y),this.updateBounds(),this.fireShapeEvent(new ur(this,this.bounds))),t}contains(e){const t=this.brush.width/2;if(0===this.points.length)return!1;if(1===this.points.length)return this.points[0].distance(e)<=t;const r=new Ii(e.x+t,e.y+t,e.x-t,e.y-t),i=new Ii(e.x-t,e.y+t,e.x+t,e.y-t);let s=0,o=this.points[s++],a=null,l=null;for(;s<this.points.length;){if(a=this.points[s++],l=new Ii(o.x,o.y,a.x,a.y),l.intersects(r)||l.intersects(i))return!0;o=a}return!1}intersects(e){if(0===this.points.length)return!1;if(1===this.points.length)return e.containsPoint(this.points[0]);let t=0,r=this.points[t++],i=null;for(;t<this.points.length;){if(i=this.points[t++],e.intersectsLine(r.x,r.y,i.x,i.y))return!0;r=i}return!1}updateBounds(){this.bounds.set(this.minPoint.x,this.minPoint.y,this.maxPoint.x-this.minPoint.x,this.maxPoint.y-this.minPoint.y)}clone(){const e=new Vs(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class bp{constructor(e){this.vector=new dr(0,0),this.normal=new dr(0,0),this.miter=new dr(0,0),this.offsetA=new dr(0,0),this.offsetB=new dr(0,0),this.lastLineTop=new Ii(0,0,0,0),this.lastLineBottom=new Ii(0,0,0,0),this.A=new Array,this.B=new Array,this.points=new Array,this.strokeWidth=e}getStrokeList(){if(0===this.points.length)return null;const e=new Array;return 1==this.points.length?(this.capOnePoint(e,this.points[0],this.strokeWidth),e):(e.push(...this.A),this.capEndpoint(e,this.points[1],this.points[0],!1),e.push(...this.B),e)}addPoint(e){this.points.push(e.clone());const t=this.points.length;if(t>1){t>2&&this.points.shift();const r=this.points[0];0===this.A.length||0===this.B.length?(this.capEndpoint(this.A,r,e,!1),this.beginPath(r,e)):this.advance(r,e)}}intersects(e){return 0!==this.points.length&&(1===this.points.length?e.containsPoint(this.points[0]):!(!this.intersectsRect(this.A,e)&&!this.intersectsRect(this.B,e)))}moveByDelta(e){for(let t of this.A)t.subtract(e);for(let t of this.B)t.subtract(e);for(let t of this.points)t.subtract(e)}clone(){const e=new bp(this.strokeWidth);for(let t of this.A)e.A.push(t.clone());for(let t of this.B)e.B.push(t.clone());for(let t of this.points)e.points.push(t.clone());return e}advance(e,t){this.advancePath(this.A,e,t,!1),this.advancePath(this.B,e,t,!0)}advancePath(e,t,r,i){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y),this.offset(this.offsetA,this.miter,i),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetB.set(r.x,r.y),this.offset(this.offsetB,this.miter,i);const s=new Ii(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),o=i?this.lastLineTop:this.lastLineBottom,a=o.getIntersectionPoint(s.x1,s.y1,s.x2,s.y2);if(null!=a)this.intersect(e,a,i);else{const l=o.getEndPoint(),c=s.getStartPoint();let f=this.toDegrees(l,t),C=this.toDegrees(c,t);Math.abs(f-C)>180&&(f%=360,C%=360),this.cap(e,t,f,C,this.strokeWidth*this.toPressure(t)/2,2,i)}o.set(s.x1,s.y1,s.x2,s.y2)}beginPath(e,t){this.vector.set(t.x,t.y).subtract(e).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(e)/2),this.offsetA.set(e.x,e.y).add(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetB.set(t.x,t.y).add(this.miter),this.addPathPoint(this.A,this.offsetB.x,this.offsetB.y,!1),this.lastLineBottom.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(e)/2),this.offsetA.set(e.x,e.y).subtract(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetB.set(t.x,t.y).subtract(this.miter),this.addPathPoint(this.B,this.offsetA.x,this.offsetA.y,!0),this.addPathPoint(this.B,this.offsetB.x,this.offsetB.y,!0),this.lastLineTop.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y)}cap(e,t,r,i,s,o,a){if(r>i)for(let l=r;l>=i;l-=o){const c=Math.PI*l/180,f=t.x+s*Math.cos(c),C=t.y+s*Math.sin(c);this.addPathPoint(e,f,C,a)}else for(let l=r;l<=i;l+=o){const c=Math.PI*l/180,f=t.x+s*Math.cos(c),C=t.y+s*Math.sin(c);this.addPathPoint(e,f,C,a)}}capOnePoint(e,t,r){this.addPathPoint(e,t.x+r*this.toPressure(t)/2,t.y,!1),this.cap(e,t,0,360,r*this.toPressure(t)/2,2,!1)}capEndpoint(e,t,r,i){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y).add(this.miter),this.offsetB.set(t.x,t.y).subtract(this.miter),this.addPathPoint(e,this.offsetB.x,this.offsetB.y,i);const s=this.toDegrees(this.offsetB,this.offsetA);this.cap(e,t,s,s-180,this.strokeWidth*this.toPressure(t)/2,2,i)}addPathPoint(e,t,r,i){i?e.unshift(new Pi(t,r,1)):e.push(new Pi(t,r,1))}intersect(e,t,r){r?e[0].set(t.x,t.y):e[e.length-1].set(t.x,t.y)}offset(e,t,r){r?e.subtract(t):e.add(t)}toPressure(e){return Math.min(1,Math.sqrt(e.p+.1))}toDegrees(e,t){const r=Math.atan2(e.y-t.y,e.x-t.x);return 180*(2*Math.PI+r)/Math.PI}intersectsRect(e,t){let r=0,i=e[r++],s=null;for(;r<e.length;){if(s=e[r++],t.intersectsLine(i.x,i.y,s.x,s.y))return!0;i=s}return!1}}class mu extends Vs{constructor(e,t){super(e,t),this.stroke=new bp(t.width)}addPoint(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return this.stroke.addPoint(e),this.updateBounds(),this.fireShapeEvent(new ur(this,this.bounds)),!0}contains(e){return this.stroke.intersects(new Kr(e.x,e.y,e.x,e.y))}intersects(e){return this.stroke.intersects(e)}getPenStroke(){return this.stroke}moveByDelta(e){this.stroke.moveByDelta(e),this.updateBoundsByDelta(e),this.fireShapeEvent(new ur(this,this.bounds))}clone(){const e=new mu(this.handle,this.brush.clone());return e.stroke=this.stroke.clone(),e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected()),e}}class EF extends Hs{begin(e,t){this.shape=new mu(this.shapeHandle,this.brush),this.shape.addPoint(e),t.page.addAction(new Xi([this.shape]))}execute(e){this.shape.addPoint(e)}end(e){}}class wF extends hs{execute(e){const t=new EF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setTool(t)}}class Cp extends class AF{constructor(e){this.color=e}}{constructor(e,t){super(e),this.width=t}clone(){return new Cp(this.color,this.width)}}const DF=/\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d*.\d*))?\)/;class fs{constructor(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i||1}toHex(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)}toRgb(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toRgba(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}toAlpha(e){return`rgba(${this.r}, ${this.g}, ${this.b}, ${e})`}equals(e){return this.a===e.a&&this.r===e.r&&this.g===e.g&&this.b===e.b}static fromHex(e){let t=e.trim();if(0!==t.indexOf("#"))throw new Error("Not a hex color representation");t=t.substr(t.indexOf("#")+1);const r=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),s=parseInt(t.substr(4,2),16);return new fs(r,i,s)}static fromRGBString(e){let t=e.trim();if(0!==t.indexOf("rgb"))throw new Error("Not a rgb color representation");const r=DF.exec(t);if(r){const i=parseInt(r[1],10),s=parseInt(r[2],10),o=parseInt(r[3],10),a=r[5]?parseFloat(r[5]):1;return new fs(i,s,o,a)}return null}static fromRGBNumber(e){return new fs(e>>16&255,e>>8&255,255&e,(e>>24&255)/255)}}class TF extends Hs{begin(e,t){this.shape=new Vs(this.shapeHandle,this.brush),this.shape.addPoint(e),t.page.addAction(new Xi([this.shape]))}execute(e){this.shape.addPoint(e)}}class xF extends hs{execute(e){const t=new TF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setTool(t)}}class HC extends Vs{addPoint(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return this.updateBounds(),this.fireShapeEvent(new ur(this,this.bounds)),!0}updateBounds(){const e=this.points[0],t=this.brush.width;this.bounds.set(e.x-t,e.y-t,e.x+2*t,e.y+2*t)}}class MF extends Hs{begin(e,t){this.page=t.page,this.shape=new HC(this.shapeHandle,this.brush),this.shape.addPoint(e),this.page.addShape(this.shape)}execute(e){this.shape.addPoint(e)}end(e){this.page.removeShape(this.shape)}}class PF extends hs{execute(e){const t=new MF;t.brush=this.brush,e.setTool(t)}}class Ko extends Vs{setP0(e){if(this.points.length>0){if(e.equals(this.points[0]))return!1;this.points[0]=e}else this.points.push(e);return!0}setP1(e){if(this.points.length>1){if(e.equals(this.points[1]))return!1;this.points[1]=e}else this.points.push(e);return this.updateBounds(),this.fireShapeEvent(new ur(this,this.bounds)),!0}updateBounds(){if(this.points.length<2)return;const e=this.points[0],t=this.points[1];t.x<e.x?(this.bounds.x=t.x,this.bounds.width=e.x-t.x):(this.bounds.x=e.x,this.bounds.width=t.x-e.x),t.y<e.y?(this.bounds.y=t.y,this.bounds.height=e.y-t.y):(this.bounds.y=e.y,this.bounds.height=t.y-e.y)}fill(){const e=this.getKeyEvent();return null!=e&&e.altKey}}class _u extends Ko{clone(){const e=new _u(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class IF extends Hs{begin(e,t){this.context=t,this.shape=new _u(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new Xi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class RF extends hs{execute(e){const t=new IF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class yu extends Ko{clone(){const e=new yu(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class kF extends Hs{begin(e,t){this.context=t,this.shape=new yu(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new Xi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class OF extends hs{execute(e){const t=new kF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class vu extends Ko{contains(e){if(this.points.length<2)return!1;if(this.fill())return this.bounds.containsPoint(e);const t=this.brush.width;let r=this.bounds.x,i=this.bounds.y,s=this.bounds.x+this.bounds.width,o=this.bounds.y;return!!(this.intersectsSegment(t,r,i,s,o,e)||(r=this.bounds.x+this.bounds.width,i=this.bounds.y,s=this.bounds.x+this.bounds.width,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e))||(r=this.bounds.x+this.bounds.width,i=this.bounds.y+this.bounds.height,s=this.bounds.x,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e))||(r=this.bounds.x,i=this.bounds.y,s=this.bounds.x,o=this.bounds.y+this.bounds.height,this.intersectsSegment(t,r,i,s,o,e)))}intersects(e){return null!=this.bounds.intersection(e)}clone(){const e=new vu(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}intersectsSegment(e,t,r,i,s,o){let a=o.x+e,l=o.y+e,c=o.x-e,f=o.y-e;return!(!Ii.intersects(t,r,i,s,a,l,c,f)&&(a=o.x-e,l=o.y+e,c=o.x+e,f=o.y-e,!Ii.intersects(t,r,i,s,a,l,c,f)))}}class FF extends Hs{begin(e,t){this.context=t,this.shape=new vu(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new Xi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class LF extends hs{execute(e){const t=new FF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class VC{constructor(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i,this.radiusX=.5*r,this.radiusY=.5*i,this.centerX=e+this.radiusX,this.centerY=t+this.radiusY}containsPoint(e,t){const r=this.width;if(r<=0)return!1;const i=this.height;if(i<=0)return!1;const s=(e-this.x)/r-.5,o=(t-this.y)/i-.5;return s*s+o*o<.25}containsRect(e,t,r,i){return this.containsPoint(e,t)&&this.containsPoint(e+r,t)&&this.containsPoint(e,t+i)&&this.containsPoint(e+r,t+i)}intersectsRect(e,t,r,i){return!(r<=0||i<=0||this.width<=0||this.height<=0)&&(this.centerX>=e&&this.centerY>=t&&this.centerX<=e+r&&this.centerY<=t+i||this.intersectsLine(e,t,e+r,t)||this.intersectsLine(e,t+i,e+r,t+i)||this.intersectsLine(e,t,e,t+i)||this.intersectsLine(e+r,t,e+r,t+i))}intersectsLine(e,t,r,i){if(this.width<=0||this.height<=0)return!1;e-=this.centerX,r-=this.centerX,t-=this.centerY,i-=this.centerY;const s=this.radiusX*this.radiusX,o=this.radiusY*this.radiusY,a=Math.pow(r-e,2)/s+Math.pow(i-t,2)/o,l=2*e*(r-e)/s+2*t*(i-t)/o,f=l*l-4*a*(e*e/s+t*t/o-1);if(0===f){const C=-l/2/a;return C>=0&&C<=1}if(f>0){const C=Math.sqrt(f),j=(-l+C)/2/a,J=(-l-C)/2/a;return j>=0&&j<=1||J>=0&&J<=1}return!1}}class bu extends Ko{contains(e){if(this.points.length<2)return!1;const t=new VC(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return this.fill()?t.containsPoint(e.x,e.y):t.intersectsLine(e.x,e.y,e.x+this.brush.width,e.y+this.brush.width)}intersects(e){return!(this.points.length<2)&&new VC(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height).intersectsRect(e.x,e.y,e.width,e.height)}clone(){const e=new bu(this.handle,this.brush.clone());e.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),e.setKeyEvent(this.getKeyEvent()),e.setSelected(this.isSelected());for(let t of this.points)e.points.push(t.clone());return e}}class NF extends Hs{begin(e,t){this.context=t,this.shape=new bu(this.shapeHandle,this.brush),this.shape.setP0(e),t.page.addAction(new Xi([this.shape]))}execute(e){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(e)}}class BF extends hs{execute(e){const t=new NF;t.shapeHandle=this.shapeHandle,t.brush=this.brush,e.setKeyEvent(this.keyEvent),e.setTool(t)}}class Sp extends Cn{constructor(e){super(),e&&(this.point=e)}}class jF extends Sp{execute(e){e.beginTool(this.point)}}class HF extends Sp{execute(e){e.executeTool(this.point)}}class VF extends Sp{execute(e){e.endTool(this.point)}}class Yr{execute(e){}end(e){}}class UF extends Yr{begin(e,t){t.page.undo()}}class $F extends Cn{execute(e){e.selectAndExecuteTool(new UF)}}class GF extends Yr{begin(e,t){t.page.redo()}}class zF extends Cn{execute(e){e.selectAndExecuteTool(new GF)}}class UC extends jC{constructor(e){super(e)}execute(e){for(let t of this.shapes)e.removeShape(t)}undo(e){for(let t of this.shapes)e.addShape(t)}redo(e){this.execute(e)}}class WF extends Yr{begin(e,t){const r=Object.assign([],t.page.getShapes());t.page.addAction(new UC(r))}}class qF extends Cn{execute(e){e.selectAndExecuteTool(new WF)}}class XF extends Cn{execute(e){e.setKeyEvent(this.keyEvent)}}class KF{begin(e,t){if(this.sourcePoint=e.clone(),this.context=t,this.getSelectedShapes(),this.hasSelectedShapes())if(this.hitSelected(e)){const r=new Array;for(let i of this.selectedShapes){const s=i.clone();r.push(s)}t.page.addAction(new Xi(r))}else this.removeSelection();else{const r=this.getTopLevelShape(e);if(null!=r){const i=r.clone();t.page.addAction(new Xi([i])),this.addSelection(i)}}}execute(e){this.sourcePoint.subtract(e),this.moveShapes(e,this.sourcePoint),this.sourcePoint=e.clone()}end(e){}getTopLevelShape(e){let t=null;for(let r of this.context.page.getShapes())r.contains(e)&&(t=r);return t}getSelectedShapes(){this.selectedShapes=new Array;for(let e of this.context.page.getShapes())e.isSelected()&&this.selectedShapes.push(e)}moveShapes(e,t){if(this.hasSelectedShapes()){this.context.beginBulkRender();for(let r of this.selectedShapes)r.moveByDelta(t);this.context.endBulkRender()}}hasSelectedShapes(){return 0!=this.selectedShapes.length}addSelection(e){e.setSelected(!0),this.selectedShapes.push(e)}removeSelection(){this.context.beginBulkRender();for(let e of this.selectedShapes)e.setSelected(!1);this.selectedShapes.length=0,this.context.endBulkRender()}hitSelected(e){for(let t of this.selectedShapes)if(t.contains(e))return!0;return!1}}class YF extends Cn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new KF)}}class JF{begin(e,t){this.sourcePoint=e.clone(),this.context=t,this.selectedShape=this.getTopLevelShape(e),this.removeSelection(),null!=this.selectedShape&&this.selectedShape.setSelected(!0)}execute(e){null!=this.selectedShape&&(this.sourcePoint.subtract(e),this.context.beginBulkRender(),this.selectedShape.moveByDelta(this.sourcePoint),this.context.endBulkRender(),this.sourcePoint=e.clone())}end(e){null!=this.selectedShape&&(this.context.beginBulkRender(),this.selectedShape.setSelected(!1),this.context.endBulkRender())}getTopLevelShape(e){let t=null;for(let r of this.context.page.getShapes())r.contains(e)&&(t=r);return t}removeSelection(){this.context.beginBulkRender();for(let e of this.context.page.getShapes())e.isSelected()&&e.setSelected(!1);this.context.endBulkRender()}}class QF extends Cn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new JF)}}class $C extends Ko{constructor(){super(0,null)}}var ps=(()=>{return(n=ps||(ps={}))[n.Select=0]="Select",n[n.Move=1]="Move",ps;var n})();class ZF{begin(e,t){this.sourcePoint=e.clone(),this.context=t,this.initialized=!1,this.shape=new $C,this.context.page.addShape(this.shape),this.getSelectedShapes(),this.hasSelectedShapes()?this.hitSelected(e)?this.mode=ps.Move:(this.context.beginBulkRender(),this.removeSelection(),this.context.endBulkRender(),this.mode=ps.Select):this.mode=ps.Select}execute(e){this.mode==ps.Select?(this.initialized||(this.shape.setP0(e),this.initialized=!0),this.shape.addPoint(e.clone()),this.shape.setP1(e),this.selectGroup(this.shape.bounds)):this.mode==ps.Move&&(this.sourcePoint.subtract(e),this.moveShapes(this.sourcePoint),this.sourcePoint=e.clone())}end(e){this.context.page.removeShape(this.shape),this.initialized=!1}selectGroup(e){this.context.beginBulkRender(),this.removeSelection();for(let t of this.context.page.getShapes())t!==this.shape&&t.intersects(e)&&this.addSelection(t);this.context.endBulkRender()}addSelection(e){e.setSelected(!0),this.selectedShapes.push(e)}getSelectedShapes(){this.selectedShapes=new Array;for(let e of this.context.page.getShapes())e.isSelected()&&this.selectedShapes.push(e)}hasSelectedShapes(){return 0!=this.selectedShapes.length}hitSelected(e){for(let t of this.selectedShapes)if(t.contains(e))return!0;return!1}removeSelection(){for(let e of this.selectedShapes)e.setSelected(!1);this.selectedShapes.length=0}moveShapes(e){if(this.hasSelectedShapes()){this.context.beginBulkRender();for(let t of this.selectedShapes)t.moveByDelta(e);this.context.endBulkRender()}}}class eL extends Cn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new ZF)}}class tL{begin(e,t){this.context=t,this.lastPoint=e}execute(e){const t=this.context.page.getSlideShape(),r=t.bounds;t.setPageRect(new Kr(r.x+(this.lastPoint.x-e.x),r.y+(this.lastPoint.y-e.y),r.width,r.height)),this.lastPoint=e}end(e){}}class nL extends Cn{execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new tL)}}class rL extends Yr{constructor(e){super(),this.rect=e}begin(e,t){t.page.getSlideShape().setPageRect(this.rect)}}class iL extends Cn{constructor(e){super(),this.rect=e}execute(e){e.setKeyEvent(this.keyEvent),e.selectAndExecuteTool(new rL(this.rect))}}class GC extends Ko{constructor(){super(0,null)}updateBounds(){super.updateBounds();const t=Math.abs(3*this.bounds.width/4)*Math.sign(this.bounds.height);this.bounds.height=t}}class sL{begin(e,t){this.context=t,this.shape=new GC,this.context.page.addShape(this.shape)}execute(e){this.initialized||(this.shape.setP0(e),this.initialized=!0),this.shape.setP1(e)}end(e){this.initialized=!1,this.context.page.removeShape(this.shape),this.context.page.getSlideShape().setPageRect(this.shape.bounds)}}class zC extends hs{constructor(e,t){super(0,t)}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new sL)}}class oL extends Yr{begin(e,t){t.page.getSlideShape().setPageRect(new Kr(0,0,1,1))}}class aL extends Cn{execute(e){e.setKeyEvent(this.keyEvent),e.selectAndExecuteTool(new oL)}}class lL{constructor(e){this.shapeHandle=e}begin(e,t){for(const r of t.page.getShapes())if(r.handle===this.shapeHandle){t.page.addAction(new UC(new Array(r)));break}}execute(e){}end(e){}}class cL extends Cn{constructor(e){super(),this.shapeHandle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new lL(this.shapeHandle)),e.beginTool(new Pi(0,0,0))}}class hl extends gu{setText(e){this.text!==e&&(this.text=e,this.fireShapeEvent(new ur(this,this.bounds)))}getText(){return this.text}setTextColor(e){this.textColor&&this.textColor.equals(e)||(this.textColor=e,this.fireShapeEvent(new ur(this,this.bounds)))}getTextColor(){return this.textColor}setTextAttributes(e){this.textAttributes=new Map(e),this.fireShapeEvent(new ur(this,this.bounds))}getTextAttributes(){return this.textAttributes}isUnderline(){var e;return null!==(e=this.textAttributes.get("underline"))&&void 0!==e&&e}isStrikethrough(){var e;return null!==(e=this.textAttributes.get("strikethrough"))&&void 0!==e&&e}setLocation(e){return(this.bounds.x!==e.x||this.bounds.y!==e.y)&&(this.bounds.x=e.x,this.bounds.y=e.y,this.fireShapeEvent(new ur(this,this.bounds)),!0)}updateBounds(){}}class fl extends hl{setFont(e){this.font&&this.font.equals(e)||(this.font=e,this.fireShapeEvent(new ur(this,this.bounds)))}getFont(){return this.font}clone(){const e=new fl(this.handle);return e.setLocation(new dr(this.bounds.x,this.bounds.y)),e.setFont(this.font),e.setTextColor(this.getTextColor()),e.setTextAttributes(new Map(this.getTextAttributes())),e}}class uL{constructor(e){this.handle=e}begin(e,t){this.context=t,this.shape=new fl(this.handle)}execute(e){}end(e){this.shape.setLocation(e),this.context.page.addShape(this.shape)}}class dL extends Cn{constructor(e){super(),this.handle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new uL(this.handle))}}class hL extends Yr{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof fl&&i.handle===this.handle){i.setFont(this.font),i.setTextColor(this.textColor),i.setTextAttributes(this.textAttributes);break}}}class fL extends Cn{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}execute(e){e.selectAndExecuteTool(new hL(this.handle,this.font,this.textColor,this.textAttributes))}}class pL extends Yr{constructor(e,t){super(),this.handle=e,this.text=t}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof hl&&i.handle===this.handle){i.setText(this.text);break}}}class gL extends Cn{constructor(e,t){super(),this.handle=e,this.text=t}execute(e){e.selectAndExecuteTool(new pL(this.handle,this.text))}}class mL extends Yr{constructor(e,t){super(),this.handle=e,this.point=t}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof hl&&i.handle===this.handle){t.beginBulkRender(),i.setLocation(this.point),t.endBulkRender();break}}}class _L extends Cn{constructor(e,t){super(),this.handle=e,this.point=t}execute(e){e.selectAndExecuteTool(new mL(this.handle,this.point))}}class yL extends Yr{constructor(e){super(),this.handle=e}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof hl&&i.handle===this.handle){t.page.removeShape(i);break}}}class vL extends Cn{constructor(e){super(),this.handle=e}execute(e){e.selectAndExecuteTool(new yL(this.handle))}}class Cu{constructor(e,t,r,i){this.family=e,this.size=t,r&&(this.style=r),i&&(this.weight=i)}equals(e){return!!e&&(this===e||this.family===e.family&&this.size===e.size&&this.style===e.style&&this.weight===e.weight)}toString(){let e=this.size+"px "+this.family;return this.weight&&(e=this.weight+" "+e),this.style&&(e=this.style+" "+e),e}}class Su extends gu{constructor(e,t){super(e),this.color=t}addTextBounds(e){this.bounds.isEmpty()?this.bounds.set(e.x,e.y,e.width,e.height):this.bounds.union(e),this.fireShapeEvent(new ur(this,this.bounds))}getColor(){return this.color}contains(e){return this.bounds.containsPoint(e)}intersects(e){return null!=this.bounds.intersection(e)}clone(){const e=new Su(this.handle,this.color);return e.setKeyEvent(this.getKeyEvent()),e}updateBounds(){}}class bL{constructor(e,t,r){this.shapeHandle=e,this.color=t,this.textBounds=r}begin(e,t){if(this.textBounds.length<1)return;let r=null;for(const i of t.page.getShapes())if(i.handle===this.shapeHandle){r=i;break}r||(r=new Su(this.shapeHandle,this.color),t.page.addAction(new Xi([r])));for(const i of this.textBounds)r.addTextBounds(i)}execute(e){}end(e){}}class CL extends Cn{constructor(e,t,r){super(),this.shapeHandle=e,this.color=t,this.textBounds=r}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new bL(this.shapeHandle,this.color,this.textBounds)),e.beginTool(new Pi(0,0,0))}}class pl extends hl{setFont(e){this.font&&this.font.equals(e)||(this.font=e,this.fireShapeEvent(new ur(this,this.bounds)))}getFont(){return this.font}clone(){const e=new pl(this.handle);return e.setLocation(new dr(this.bounds.x,this.bounds.y)),e.setFont(this.font),e.setTextColor(this.getTextColor()),e.setTextAttributes(new Map(this.getTextAttributes())),e}}class SL{constructor(e){this.handle=e}begin(e,t){this.context=t,this.shape=new pl(this.handle)}execute(e){}end(e){this.shape.setLocation(e),this.context.page.addShape(this.shape)}}class EL extends Cn{constructor(e){super(),this.handle=e}execute(e){e.setKeyEvent(this.keyEvent),e.setTool(new SL(this.handle))}}class wL extends Yr{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}begin(e,t){const r=t.page.getShapes();for(let i of r)if(i instanceof pl&&i.handle===this.handle){i.setFont(this.font),i.setTextColor(this.textColor),i.setTextAttributes(this.textAttributes);break}}}class AL extends Cn{constructor(e,t,r,i){super(),this.handle=e,this.font=t,this.textColor=r,this.textAttributes=i}execute(e){e.selectAndExecuteTool(new wL(this.handle,this.font,this.textColor,this.textAttributes))}}let Ep=(()=>{class n{static parse(t,r,i){let s=null;const o=this.parseActionHeader(t);switch(i-=13,r){case qt.CLEAR_SHAPES:s=this.atomicAction(t,qF);break;case qt.UNDO:s=this.atomicAction(t,$F);break;case qt.REDO:s=this.atomicAction(t,zF);break;case qt.KEY:s=this.atomicAction(t,XF);break;case qt.PEN:s=this.toolBrushAction(t,wF);break;case qt.HIGHLIGHTER:s=this.toolBrushAction(t,xF);break;case qt.POINTER:s=this.toolBrushAction(t,PF);break;case qt.ARROW:s=this.toolBrushAction(t,RF);break;case qt.LINE:s=this.toolBrushAction(t,OF);break;case qt.RECTANGLE:s=this.toolBrushAction(t,LF);break;case qt.ELLIPSE:s=this.toolBrushAction(t,BF);break;case qt.CLONE:s=this.atomicAction(t,YF);break;case qt.SELECT:s=this.atomicAction(t,QF);break;case qt.SELECT_GROUP:s=this.atomicAction(t,eL);break;case qt.LATEX:s=this.textAction(t,EL);break;case qt.LATEX_FONT_CHANGE:s=this.latexFontAction(t);break;case qt.TEXT:s=this.textAction(t,dL);break;case qt.TEXT_CHANGE:s=this.textChangeAction(t);break;case qt.TEXT_FONT_CHANGE:s=this.textFontAction(t);break;case qt.TEXT_LOCATION_CHANGE:s=this.textMoveAction(t);break;case qt.TEXT_REMOVE:s=this.textRemoveAction(t);break;case qt.TEXT_SELECTION_EXT:s=this.textHighlightAction(t);break;case qt.TOOL_BEGIN:s=this.toolDragAction(t,jF);break;case qt.TOOL_EXECUTE:s=this.toolDragAction(t,HF);break;case qt.TOOL_END:s=this.toolDragAction(t,VF);break;case qt.PANNING:s=this.atomicAction(t,nL);break;case qt.EXTEND_VIEW:s=this.extendViewAction(t);break;case qt.ZOOM:s=i<1?this.atomicAction(t,zC):this.toolBrushAction(t,zC);break;case qt.ZOOM_OUT:s=this.atomicAction(t,aL);break;case qt.RUBBER_EXT:s=this.rubberAction(t)}return s&&o&&(s.keyEvent=o),s}static parseActionHeader(t){let i=null;return(t.getInt32()&this.KEY_EVENT_MASK)==this.KEY_EVENT_MASK&&(i=this.parseKeyEvent(t)),i}static parseKeyEvent(t){t.getInt32();const i=t.getInt32();let o;switch(t.getInt8()){case 0:o="keydown";break;case 1:o="keyup";break;case 2:o="keypress";break;default:throw new Error("Unknown key event type")}return new KeyboardEvent(o,{shiftKey:0!=(2&i),ctrlKey:0!=(4&i),altKey:0!=(8&i)})}static atomicAction(t,r){return new r}static toolBrushAction(t,r){const i=t.getInt32(),s=t.getInt32(),a=(t.getInt8(),t.getFloat64()),l=fs.fromRGBNumber(s);return new r(i,new Cp(l,a))}static rubberAction(t){const r=t.getInt32();return new cL(r)}static toolDragAction(t,r){return new r(new Pi(t.getFloat32(),t.getFloat32(),t.getFloat32()))}static extendViewAction(t){const r=t.getFloat64(),i=t.getFloat64(),s=t.getFloat64(),o=t.getFloat64();return new iL(new Kr(r,i,s,o))}static textAction(t,r){return new r(t.getInt32())}static textChangeAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getString(i);return new gL(r,s)}static textMoveAction(t){const r=t.getInt32(),i=new dr(t.getFloat64(),t.getFloat64());return new _L(r,i)}static textRemoveAction(t){const r=t.getInt32();return new vL(r)}static textHighlightAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getInt32(),o=fs.fromRGBNumber(i),a=new Array;for(let l=0;l<s;l++){const c=t.getFloat64(),f=t.getFloat64(),C=t.getFloat64(),j=t.getFloat64();a.push(new Kr(c,f,C,j))}return new CL(r,o,a)}static textFontAction(t){const r=t.getInt32(),i=t.getInt32(),s=t.getInt32(),o=t.getString(s),a=t.getFloat64(),l=t.getInt8(),c=t.getInt8(),f=t.getInt8()>0,C=t.getInt8()>0;let J,j=100*(c+1);switch(l){case 0:J="normal";break;case 1:J="italic";break;default:console.error("Unsupported font style")}const be=fs.fromRGBNumber(i),Fe=new Cu(o,a,J,j.toString()),Je=new Map;return Je.set("strikethrough",f),Je.set("underline",C),new fL(r,Fe,be,Je)}static latexFontAction(t){const r=t.getInt32(),s=(t.getInt32(),t.getFloat32()),o=t.getInt32(),a=fs.fromRGBNumber(o),l=new Cu("Arial",s);return new AL(r,l,a,new Map)}}return n.KEY_EVENT_MASK=1,n})();class DL{constructor(){this.staticActions=[],this.playbackActions=[]}}class WC{parse(e){const t=new DL,r=e.getInt32(),i=e.getInt32();t.pageNumber=r,t.timestamp=i;const s=e.getInt32();if(s>0){const a=e.byteOffset+s;for(;e.byteOffset<a;){const l=e.getInt32(),c=e.getInt8(),f=e.getInt32(),C=Ep.parse(e,c,l);C&&(C.timestamp=f,t.staticActions.push(C))}}const o=e.getInt32();if(o>0){const a=e.byteOffset+o;for(;e.byteOffset<a;){const l=e.getInt32(),c=e.getInt8(),f=e.getInt32(),C=Ep.parse(e,c,l);C&&(C.timestamp=f,t.playbackActions.push(C))}}return t}}class qC{static parse(e,t,r){let i=null;switch(t){case on.STREAM_INIT:break;case on.STREAM_START:i=this.startAction(e);break;case on.STREAM_PAGE_ACTION:i=this.playbackAction(e);break;case on.STREAM_PAGE_ACTIONS:i=this.playbackActions(e);break;case on.STREAM_PAGE_CREATED:i=this.pageAction(e,_F);break;case on.STREAM_PAGE_DELETED:i=this.pageAction(e,yF);break;case on.STREAM_PAGE_SELECTED:i=this.pageAction(e,fu);break;case on.STREAM_DOCUMENT_CREATED:i=this.documentAction(e,BC);break;case on.STREAM_DOCUMENT_CLOSED:i=this.documentAction(e,xC);break;case on.STREAM_DOCUMENT_SELECTED:i=this.documentAction(e,yp);break;case on.STREAM_SPEECH_PUBLISHED:i=this.speechAction(e,SF)}return i}static startAction(e){const t=e.getUint32();return new bF(t)}static playbackAction(e){const t=e.getInt64(),r=e.getInt32(),i=e.getInt32(),s=e.getInt8(),o=e.getInt32(),a=Ep.parse(e,s,i);return a?(a.timestamp=o,new vp(t,r,a)):null}static playbackActions(e){const t=e.getInt64(),s=(e.getInt32(),(new WC).parse(e));return new vF(t,s)}static pageAction(e,t){return new t(e.getInt64(),e.getInt32())}static documentAction(e,t){const r=e.getInt64(),i=e.getInt8(),s=e.getInt32(),o=e.getInt32(),a=e.getInt32(),l=e.getString(s),c=e.getString(o);return e.getString(a),new t(r,i,l,c)}static speechAction(e,t){const r=e.getInt32(),i=e.getString(r);return new t(BigInt(i))}static parseActionToBinary(e){return e.toByteBuffer()}}class XC{constructor(e,t,r){this.dataView=new DataView(e,t,r),this.offset=t||0}get byteOffset(){return this.offset}skip(e){if(this.offset+e>=this.dataView.byteLength)throw new Error(`Out of bounds ${this.offset+e} exceeds length ${this.dataView.byteLength}`);this.offset+=e}getString(e){let t="",r=-1;for(let i=0;i<e&&(r=this.getUint8(),0!=r);i++)t+=String.fromCharCode(r);return t}getFloat32(e){const t=this.dataView.getFloat32(this.offset,e);return this.offset+=4,t}getFloat64(e){const t=this.dataView.getFloat64(this.offset,e);return this.offset+=8,t}getInt8(){const e=this.dataView.getInt8(this.offset);return this.offset+=1,e}getInt16(e){const t=this.dataView.getInt16(this.offset,e);return this.offset+=2,t}getInt32(e){const t=this.dataView.getInt32(this.offset,e);return this.offset+=4,t}getInt64(e){const t=this.dataView.getBigInt64(this.offset,e);return this.offset+=8,t}getUint8(){const e=this.dataView.getUint8(this.offset);return this.offset+=1,e}getUint16(e){const t=this.dataView.getUint16(this.offset,e);return this.offset+=2,t}getUint32(e){const t=this.dataView.getUint32(this.offset,e);return this.offset+=4,t}}class KC{constructor(e){e&&(this.renderController=e)}beginBulkRender(){this.renderController.beginBulkRender()}endBulkRender(){this.renderController.endBulkRender()}}class TL{constructor(e){this.document=e,this.toolContext=new KC(null)}setOnSelectPageIndex(e){}setSeek(e){}setKeyEvent(e){this.toolContext.keyEvent=e}setDocument(e){}setPageNumber(e){if(this.pageNumber===e)return;const t=this.document.getPage(e);this.pageNumber=e,this.toolContext.page=t}setTool(e){if(!e)throw new Error("Tool must not be null");!this.tool&&this.tool===e||(this.setPreviousTool(this.tool),this.tool=e)}selectAndExecuteTool(e){const t=Pi.createZero();this.setTool(e),this.beginTool(t),this.executeTool(t),this.endTool(t),this.setPreviousTool(this.previousTool)}beginTool(e){this.tool.begin(e.clone(),this.toolContext)}executeTool(e){this.tool.execute(e.clone())}endTool(e){this.tool.end(e.clone())}setPreviousTool(e){!e||e instanceof Yr||(this.previousTool=e)}}class wp{constructor(e){this.requestOptions=e||{returnType:"body",responseType:"json",withCredentials:!1,timeout:0}}setHttpParams(e){return this.requestOptions.params=e,this}setHttpHeaders(e){return this.requestOptions.headers=e,this}setReturnType(e){return this.requestOptions.returnType=e,this}setResponseType(e){return this.requestOptions.responseType=e,this}setWithCredentials(e){return this.requestOptions.withCredentials=e,this}setTimeout(e){return this.requestOptions.timeout=e,this}setOptions(e){return this.requestOptions=e,this}setOnProgress(e){return this.onProgress=e,this}delete(e){return this.request("DELETE",e)}get(e){return this.request("GET",e)}head(e){return this.request("HEAD",e)}options(e){return this.request("OPTIONS",e)}patch(e,t){return this.request("PATCH",e,t)}post(e,t){return this.request("POST",e,t)}put(e,t){return this.request("PUT",e,t)}request(e,t,r){const i=new XMLHttpRequest;return i.open(e,this.composeUrl(t),!0),this.requestOptions.responseType&&(i.responseType=this.requestOptions.responseType),this.requestOptions.timeout&&(i.timeout=this.requestOptions.timeout),this.requestOptions.withCredentials&&(i.withCredentials=this.requestOptions.withCredentials),this.setHeaders(r,i),new Promise((s,o)=>{const a=()=>{o(this.getResponse(i))};i.onload=()=>{if(i.status>=200&&i.status<400){let l=null;l="response"===this.requestOptions.returnType?this.getResponse(i):this.decodeBody(i),s(l)}else a()},i.ontimeout=a,i.onerror=a,this.onProgress&&(r&&i.upload?i.upload.onprogress=this.onProgress:i.onprogress=this.onProgress),i.send(this.encodeBody(r))})}getResponse(e){return{body:this.decodeBody(e),headers:this.getHeaders(e),status:e.status,statusText:e.statusText}}composeUrl(e){const t=this.requestOptions.params;if(!t)return e;const r=t?t.toString():"";if(r){const i=e.indexOf("?");e=e+(-1===i?"?":i<e.length-1?"&":"")+r}return e}getContentType(e){return null==e?"":e instanceof Blob?e.type:e instanceof FormData?"":"string"==typeof e?"text/plain":e instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=UTF-8":"object"==typeof e||"number"==typeof e||Array.isArray(e)?"application/json":""}encodeBody(e){return null==e?null:e instanceof ArrayBuffer||e instanceof Blob||e instanceof FormData||"string"==typeof e?e:"object"==typeof e||"boolean"==typeof e||Array.isArray(e)?JSON.stringify(e):e.toString()}decodeBody(e){var t;let r=e.response||null,i=e.responseType;if(!i){i=null!==(t=e.getResponseHeader("Content-Type"))&&void 0!==t?t:"";const s=new RegExp("^\\w+/(\\w+);?").exec(i);s&&(i=s[1])}return"json"===i&&"string"==typeof r&&(r=""!==r?JSON.parse(r):null),r}setHeaders(e,t){const r=this.requestOptions.headers;if(r)for(const[i,s]of r)if(Array.isArray(s))for(const o of s)t.setRequestHeader(i,o);else t.setRequestHeader(i,s);if(!r||!r.has("Content-Type")){const i=this.getContentType(e);i&&t.setRequestHeader("Content-Type",i)}(!r||!r.has("Accept"))&&t.setRequestHeader("Accept","application/json, text/plain, */*")}getHeaders(e){const t=new Map,r=e.getAllResponseHeaders();if(r){const i=r.trim().split(/[\r\n]+/);for(const s of i){const o=s.indexOf(":");if(o>0){const a=s.slice(0,o),l=s.slice(o+1).trim(),c=a.toLowerCase(),f=t.get(c);f?("string"==typeof f?[f]:f).push(l):t.set(c,l)}}}return t}}var Ap=X(36);class xL{constructor(){this.backCanvas=document.createElement("canvas")}render(e,t,r,i){var s=this;return Mi(function*(){if(s.renderTask)return null;const o=1/r.width,a=i.width*o,l=r.x*a,c=r.y*a,j=e.getViewport({scale:o*(i.width/(e.view[2]-e.view[0])),dontFlip:!1});return j.transform[4]-=l,j.transform[5]-=c,s.backCanvas.width=i.width,s.backCanvas.height=i.height,s.renderTask=e.render({canvasContext:s.backCanvas.getContext("2d"),viewport:j}),s.renderTask.promise.then(()=>(t.canvas.width=s.backCanvas.width,t.canvas.height=s.backCanvas.height,t.drawImage(s.backCanvas,0,0),s.renderTask=null,s.backCanvas),J=>{})})()}}var YC=X(813);class ML{render(e,t,r,i){return Mi(function*(){const s=yield e.getTextContent(),o=1/i.width,a=r.width*o,l=i.x*a,c=i.y*a,j=e.getViewport({scale:o*(r.width/(e.view[2]-e.view[0])),dontFlip:!1});j.transform[4]-=l,j.transform[5]-=c,(0,Ap.renderTextLayer)({textContent:s,container:t,viewport:j,enhanceTextSelection:!0,textDivs:[]}).promise.catch(Fe=>{console.error(Fe)});const J=new YC.SimpleLinkService;J.externalLinkTarget=2,new YC.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,linkService:J}).render(j)})()}}class PL extends LC{constructor(e){super(),this.document=e,this.renderer=new xL,this.textRenderer=new ML,this.loadPages(e)}getPageText(e){var t=this;return Mi(function*(){return(yield(yield t.document.getPage(e+1)).getTextContent()).items.map(function(s){return s.str}).join(" ")})()}renderPage(e,t,r,i){var s=this;return Mi(function*(){const o=yield s.getPdfPage(e);return s.renderer.render(o,t,r,i)})()}renderPageText(e,t,r,i){var s=this;return Mi(function*(){const o=yield s.getPdfPage(e);s.textRenderer.render(o,t,r,i)})()}getPdfPage(e){return this.document.getPage(e+1)}loadPages(e){this.pages=[];for(let t=0;t<e.numPages;t++)this.pages.push(new FC(this,t))}}class IL{loadDocument(e){return new Promise((t,r)=>{(0,Ap.getDocument)(e).promise.then(i=>{t(new PL(i))},i=>{r(i)})})}}class RL{constructor(e){this.apiPath="/course/state",this.host=e}getCourseState(e){return(new wp).get(this.getFullPath("/"+e))}getStateDocument(e,t){return new Promise(t.documentFile?(r,i)=>{(new wp).setResponseType("arraybuffer").get(t.documentFile).then(s=>{if(!s)throw new Error("Received empty course document");const o=new Uint8Array(s);return(new IL).loadDocument(o)}).then(s=>{s.setDocumentId(t.documentId),r(s)}).catch(s=>{i(s)})}:(r,i)=>{(new NC).setDocumentId(t.documentId)})}getStateDocumentActions(e,t){return new Promise((r,i)=>(new wp).setResponseType("arraybuffer").get(this.getFullPath("/"+e+"/pages/"+t.documentId)).then(s=>{if(!s)return void i("Received empty course document");const o=new XC(s),a=s.byteLength,l=[];for(;o.byteOffset<a;){o.getInt32();const C=(new WC).parse(o);C&&l.push(C)}r(l)}).catch(s=>{i(s)}))}preloadSlideDocument(e,t,r){return this.getStateDocumentActions(e,t).then(i=>{const s=new TL(r);for(const o of i)this.loadActions(s,o)})}loadActions(e,t){const r=t.playbackActions;if(!(r.length<1)){e.setPageNumber(t.pageNumber);for(let s of r)try{s.execute(e)}catch(o){console.error(o)}}}getFullPath(e){return this.host+this.apiPath+e}}class kL{constructor(e){this.renderController=e,this.toolContext=new KC(e)}setOnSelectPageIndex(e){this.pageIndexObserver=e}setKeyEvent(e){this.toolContext.keyEvent=e}setSeek(e){this.renderController.setSeek(e)}setDocument(e){this.document=e}setPageNumber(e){const t=this.document.getPage(e);this.pageNumber=e,this.toolContext.page=t,this.renderController.setPage(t),this.pageIndexObserver&&this.pageIndexObserver(e)}setTool(e){if(!e)throw new Error("Tool must not be null");!this.tool&&this.tool===e||(this.setPreviousTool(this.tool),this.tool=e)}selectAndExecuteTool(e){this.executeAtomicTool(e)}beginTool(e){this.tool.begin(e.clone(),this.toolContext)}executeTool(e){this.tool.execute(e.clone())}endTool(e){this.tool.end(e.clone())}executeAtomicTool(e){const t=Pi.createZero();this.setTool(e),this.beginTool(t),this.executeTool(t),this.endTool(t),this.setPreviousTool(this.previousTool)}setPreviousTool(e){!e||e instanceof Yr||(this.previousTool=e)}}var mt=(()=>{return(n=mt||(mt={})).Created="Created",n.Initializing="Initializing",n.Initialized="Initialized",n.Starting="Starting",n.Started="Started",n.Stopping="Stopping",n.Stopped="Stopped",n.Suspending="Suspending",n.Suspended="Suspended",n.Destroying="Destroying",n.Destroyed="Destroyed",n.Error="Error",mt;var n})();class NL extends class LL extends class FL extends class OL{constructor(){this.stateEvent=new pu,this._state=mt.Created,this._prevState=mt.Created}get state(){return this._state}get previousState(){return this._prevState}initialized(){return this._state===mt.Initialized}created(){return this._state===mt.Created}started(){return this._state===mt.Started}stopped(){return this._state===mt.Stopped}suspended(){return this._state===mt.Suspended}destroyed(){return this._state===mt.Destroyed}error(){return this._state===mt.Error}addStateListener(e){return this.stateEvent.subscribe(e)}removeStateListener(e){this.stateEvent.unsubscribe(e)}fireStateChanged(){this.stateEvent.publish(this._state)}setState(e){if(!this.validateNextState(e))throw new Error(`Invalid state transition for ${this.constructor.name}: [${this.state}] -> [${e}].`);this._prevState=this._state,this._state=e,this.fireStateChanged()}validateNextState(e){switch(this._state){case mt.Created:return this.isAllowed(e,mt.Initializing,mt.Destroying);case mt.Initializing:return this.isAllowed(e,mt.Initialized,mt.Error);case mt.Initialized:return this.isAllowed(e,mt.Starting,mt.Destroying);case mt.Starting:return this.isAllowed(e,mt.Started,mt.Error);case mt.Started:return this.isAllowed(e,mt.Suspending,mt.Stopping,mt.Destroying,mt.Error);case mt.Stopping:return this.isAllowed(e,mt.Stopped,mt.Error);case mt.Stopped:return this.isAllowed(e,mt.Starting,mt.Destroying);case mt.Suspending:return this.isAllowed(e,mt.Suspended,mt.Error);case mt.Suspended:return this.isAllowed(e,mt.Starting,mt.Stopping,mt.Destroying);case mt.Destroying:return this.isAllowed(e,mt.Destroyed,mt.Error);case mt.Destroyed:return this.isAllowed(e,mt.Initializing);case mt.Error:return this.isAllowed(e,mt.Starting,mt.Stopping,mt.Destroying);default:return!1}}isAllowed(e,...t){if(!t)throw new Error("No allowed states provided.");for(let r of t)if(e==r)return!0;return!1}}{init(){this.setState(mt.Initializing);try{this.initInternal()}catch(e){throw this.setState(mt.Error),new Error(`Failed to init ${this.constructor.name}: ${e}`)}this.setState(mt.Initialized)}start(){(this.created()||this.destroyed())&&this.init(),this.setState(mt.Starting);try{this.startInternal()}catch(e){throw this.setState(mt.Error),new Error(`Failed to start ${this.constructor.name}: ${e}`)}this.setState(mt.Started)}stop(){this.setState(mt.Stopping);try{this.stopInternal()}catch(e){throw this.setState(mt.Error),new Error(`Failed to stop ${this.constructor.name}: ${e}`)}this.setState(mt.Stopped)}suspend(){this.setState(mt.Suspending);try{this.suspendInternal()}catch(e){throw this.setState(mt.Error),new Error(`Failed to suspend ${this.constructor.name}: ${e}`)}this.setState(mt.Suspended)}suspendInternal(){}destroy(){(this.started()||this.suspended())&&stop(),this.setState(mt.Destroying);try{this.destroyInternal()}catch(e){throw this.setState(mt.Error),new Error(`Failed to destroy ${this.constructor.name}: ${e}`)}this.setState(mt.Destroyed)}}{constructor(e){super(),this.executor=e}}{constructor(e,t){super(e),this.syncState=t}addAction(e){this.actions.push(e)}setDocument(e){this.executor.setDocument(e)}seekByTime(e){throw new Error("Method not implemented.")}seekByPage(e){throw new Error("Method not implemented.")}executeActions(){let e=this.actions.length;for(;e>0;){const t=this.actions[0];try{t.execute(this.executor)}catch(i){}this.actions.shift(),e=this.actions.length}}initInternal(){this.actions=[]}startInternal(){try{this.run()}catch(e){throw console.error(e),new Error("Execute action failed.")}}stopInternal(){cancelAnimationFrame(this.requestID)}suspendInternal(){cancelAnimationFrame(this.requestID)}destroyInternal(){this.actions.length=0}run(){this.executeActions(),this.requestID=requestAnimationFrame(this.run.bind(this))}}class BL{render(e,t,r){const i=t.points,s=i.length;if(s<1)return;const o=t.brush,a=t.isSelected()?"rgba(255, 0, 100, 0.5)":o.color.toRgba();let l=0,c=i[l++];if(l!==s){for(e.beginPath(),e.strokeStyle=a,e.lineWidth=o.width,e.lineCap="round",e.lineJoin="round",e.globalAlpha=1,e.globalCompositeOperation="multiply",e.moveTo(c.x,c.y);l<s;)c=i[l++],e.lineTo(c.x,c.y);e.stroke()}else this.drawCircle(e,o,c.x,c.y,c.p)}drawCircle(e,t,r,i,s){const a=s*t.width/2;e.beginPath(),e.fillStyle=t.color.toRgba(),e.arc(r,i,a,0,2*Math.PI),e.fill()}}class jL{render(e,t,r){return Mi(function*(){return t.getPage().render(e,t.bounds,r)})()}}class HL{render(e,t,r){const i=t.points[0];if(!i)return;const s=t.brush,o=s.width,a=o/2;e.beginPath(),e.fillStyle=s.color.toAlpha(.4),e.arc(i.x,i.y,o,0,2*Math.PI),e.fill(),e.beginPath(),e.strokeStyle=s.color.toRgb(),e.lineWidth=o/4,e.arc(i.x,i.y,a,0,2*Math.PI),e.stroke()}}class VL{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush;if(e.save(),this.createArrowPath(e,o,i,s,a.width),e.fillStyle=a.color.toRgba(),e.fill(),e.restore(),t.isSelected()){const l=e.getTransformExt().getScaleX();this.createArrowPath(e,o,i,s,a.width),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=2/l,e.setLineDash([5/l]),e.stroke()}}createArrowPath(e,t,r,i,s){const a=null!=t&&t.shiftKey,l=r.x,c=r.y,j=null!=t&&t.altKey?2*s:s,J=j/2,be=i.x-l,Fe=i.y-c,Je=Math.atan2(Fe,be),Ze=Math.sqrt(be*be+Fe*Fe),nt=5*j,ht=Ze-.5*j/.5,An=Ze-.5*nt,Sr=.5*nt*.5*.35,Dn=.5*nt,Fr=a?.5*j/.5+.75*nt:0;if(e.translate(l,c),e.rotate(Je),e.beginPath(),e.moveTo(Fr,-J),e.lineTo(ht-.75*nt,-J),e.lineTo(ht-nt,-Dn),e.quadraticCurveTo(An,-Sr,Ze,0),e.quadraticCurveTo(An,Sr,ht-nt,Dn),e.lineTo(ht-.75*nt,J),e.lineTo(Fr,J),a){const Ri=Fr-.5*nt,Ki=.5*nt*.5*.35;e.lineTo(Fr+.25*nt,Dn),e.quadraticCurveTo(Ri,Ki,0,0),e.quadraticCurveTo(Ri,-Ki,Fr+.25*nt,-Dn)}e.closePath()}}class UL{render(e,t,r){const i=t.bounds;if(i.isEmpty())return;const s=t.getKeyEvent(),o=t.brush,a=o.color.toRgba(),l=s&&s.altKey;let c=i.x,f=i.y,C=i.width,j=i.height;e.beginPath(),l?(e.fillStyle=a,e.rect(c,f,C,j),e.fill()):(e.strokeStyle=a,e.lineWidth=o.width,e.rect(c,f,C,j),e.stroke()),t.isSelected()&&(l&&(c+=o.width/2,f+=o.width/2,C-=o.width,j-=o.width),e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=o.width,e.setLineDash([5/e.getTransformExt().getScaleX()]),e.rect(c,f,C,j),e.stroke())}}class $L{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush,l=null!=o&&o.altKey,c=l?2*a.width:a.width;if(e.beginPath(),e.strokeStyle=a.color.toRgba(),e.lineWidth=c,e.lineCap="round",e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke(),t.isSelected()){const f=e.getTransformExt().getScaleX(),C=l?7/f:5/f,j=l?15/f:12/f;e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=c,e.setLineDash([C,j]),e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke()}}}class GL{render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=t.getKeyEvent(),a=t.brush,l=a.color.toRgba(),c=o&&o.altKey,f=Math.min(i.x,s.x),C=Math.min(i.y,s.y),j=Math.max(i.x,s.x),J=Math.max(i.y,s.y),be=.5*Math.abs(j-f),Fe=.5*Math.abs(J-C),Je=f+be,Ze=C+Fe;if(e.beginPath(),c?(e.fillStyle=l,e.ellipse(Je,Ze,be,Fe,0,0,2*Math.PI),e.fill()):(e.strokeStyle=l,e.lineWidth=a.width,e.ellipse(Je,Ze,be,Fe,0,0,2*Math.PI),e.stroke()),t.isSelected()){let Ve=0;c&&(Ve=a.width/2),e.beginPath(),e.strokeStyle="rgb(255, 0, 100)",e.lineWidth=a.width,e.setLineDash([5/e.getTransformExt().getScaleX()]),e.ellipse(Je,Ze,be-Ve,Fe-Ve,0,0,2*Math.PI),e.stroke()}}}class zL{constructor(){this.FRAME_COLOR="#FF0064"}render(e,t,r){const i=t.points[0],s=t.points[1];if(!i||!s)return;const o=2/e.getTransformExt().getScaleX(),a=4/e.getTransformExt().getScaleY();e.beginPath(),e.strokeStyle=this.FRAME_COLOR,e.lineWidth=o,e.lineDashOffset=0,e.setLineDash([a]),e.lineCap="butt",e.lineJoin="bevel",e.rect(i.x,i.y,s.x-i.x,s.y-i.y),e.stroke()}}class WL{constructor(){this.FILL_COLOR="rgba(0, 163, 232, 0.4)",this.FRAME_COLOR="rgb(255, 0, 100)"}render(e,t,r){const i=t.bounds;e.fillStyle=this.FILL_COLOR,e.fillRect(i.x,i.y,i.width,i.height),e.beginPath(),e.strokeStyle=this.FRAME_COLOR,e.lineWidth=2/e.getTransformExt().getScaleX(),e.rect(i.x,i.y,i.width,i.height),e.stroke()}}class qL{render(e,t,r){const i=t.getText();if(!i||0===i.length)return;const s=t.bounds,o=t.getFont(),a=e.getTransformExt(),l=a.getScaleX(),c=o.size*l,f=a.getTranslateX()+s.x*l,C=a.getTranslateY()+s.y*l,j=new Cu(o.family,c,o.style,o.weight);e.setTransform(1,0,0,1,0,0),e.font=j.toString(),e.fillStyle=t.getTextColor().toRgba(),e.fillText(i,f,C+c)}}class hr{constructor(e){this.m=e?e.slice(0,6):[1,0,0,1,0,0]}getScaleX(){return this.m[0]}getScaleY(){return this.m[3]}getShearX(){return this.m[1]}getShearY(){return this.m[2]}getTranslateX(){return this.m[4]}getTranslateY(){return this.m[5]}clone(){return new hr(this.m)}reset(){this.setValues(1,0,0,1,0,0)}setTransform(e){this.m[0]=e.getScaleX(),this.m[1]=e.getShearX(),this.m[2]=e.getShearY(),this.m[3]=e.getScaleY(),this.m[4]=e.getTranslateX(),this.m[5]=e.getTranslateY()}setValues(e,t,r,i,s,o){this.m[0]=e,this.m[1]=t,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]);this.m[0]=this.m[3]*e,this.m[1]=-this.m[1]*e,this.m[2]=-this.m[2]*e,this.m[3]=this.m[0]*e,this.m[4]=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),this.m[5]=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5])}multiply(e){this.m[0]=this.m[0]*e.m[0]+this.m[2]*e.m[1],this.m[1]=this.m[1]*e.m[0]+this.m[3]*e.m[1],this.m[2]=this.m[0]*e.m[2]+this.m[2]*e.m[3],this.m[3]=this.m[1]*e.m[2]+this.m[3]*e.m[3],this.m[4]=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],this.m[5]=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5]}rotate(e){const t=Math.cos(e),r=Math.sin(e);this.m[0]=this.m[0]*t+this.m[1]*r,this.m[1]=this.m[0]*-r+this.m[1]*t,this.m[2]=this.m[2]*t+this.m[3]*r,this.m[3]=this.m[2]*-r+this.m[3]*t}scale(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}translate(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}transformPoint(e,t){const r=e;return new dr(e=r*this.m[0]+t*this.m[2]+this.m[4],t=r*this.m[1]+t*this.m[3]+this.m[5])}equals(e){return!!e&&this.m.length===e.m.length&&this.m.every(function(t,r){return t===e.m[r]})}toString(){return"["+this.m.join(", ")+"]"}}class XL{render(e,t,r){const i=t.bounds;i.isEmpty()||(e.beginPath(),e.globalAlpha=1,e.globalCompositeOperation="multiply",e.fillStyle=t.getColor().toRgba(),e.rect(i.x,i.y,i.width,i.height),e.fill())}}class KL{render(e,t,r){const i=t.getText();if(!i||0===i.length)return;const s=t.bounds,o=t.getFont(),a=e.getTransformExt(),l=a.getScaleX(),c=o.size*l,f=a.getTranslateX()+s.x*l,C=a.getTranslateY()+s.y*l,j=new Cu(o.family,c,o.style,o.weight);e.setTransform(1,0,0,1,0,0),e.font=j.toString(),e.fillStyle=t.getTextColor().toRgba(),e.fillText(i,f,C+c)}}class YL{render(e,t,r){const i=t.brush,s=t.isSelected()?"rgb(255, 0, 100)":i.color.toRgb(),a=t.getPenStroke().getStrokeList();if(a){const l=a.length;let c=0,f=a[c++];for(e.beginPath(),e.fillStyle=s,e.beginPath(),e.moveTo(f.x,f.y);c<l;)f=a[c++],c<l&&e.lineTo(f.x,f.y)}e.fill()}}class JL{constructor(){this.seek=!1,this.pageChangeListener=this.pageChanged.bind(this),this.lastTransform=new hr}setPage(e){this.page&&this.disableRendering(),this.page=e,this.seek||this.enableRendering(),this.renderAllLayers()}setSeek(e){this.seek=e,e?this.disableRendering():(this.enableRendering(),this.lastTransform.equals(this.getPageTransform())?this.refreshAnnotationLayers():this.renderAllLayers())}setSlideRenderSurface(e){this.slideRenderSurface=e,this.slideRenderSurface.registerRenderer(OC.name,new jL),this.slideRenderSurface.addSizeListener(this.slideRenderSurfaceSizeChanged.bind(this))}setActionRenderSurface(e){this.actionRenderSurface=e,this.actionRenderSurface.addSizeListener(this.actionRenderSurfaceSizeChanged.bind(this)),this.registerShapeRenderers(e)}setVolatileRenderSurface(e){this.volatileRenderSurface=e,this.registerShapeRenderers(e)}setTextLayerSurface(e){this.textLayerSurface=e}beginBulkRender(){this.seek||this.disableRendering()}endBulkRender(){this.seek||(this.refreshAnnotationLayers(),this.enableRendering())}getPage(){return this.page}enableRendering(){this.page.addChangeListener(this.pageChangeListener)}disableRendering(){this.page.removeChangeListener(this.pageChangeListener)}slideRenderSurfaceSizeChanged(e){this.renderAllLayers()}actionRenderSurfaceSizeChanged(e){this.refreshAnnotationLayers()}pageChanged(e){switch(e.changeType){case Or.PageTransform:this.renderAllLayers();break;case Or.Clear:this.clearAnnotationLayers();break;case Or.ShapeAdded:if(this.lastShape&&this.lastShape!=e.shape){const t=this.actionRenderSurface.getSize(),r=new Kr(0,0,t.width,t.height);this.renderPermanentLayer(this.lastShape,r)}this.renderVolatileLayer(e.shape,e.dirtyRegion);break;case Or.ShapeRemoved:this.refreshAnnotationLayers();break;case Or.ShapeModified:this.renderVolatileLayer(e.shape,e.dirtyRegion)}}clearAnnotationLayers(){this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}refreshAnnotationLayers(){const e=this.page.getShapes(),t=e.length-1;if(t>=0){this.actionRenderSurface.renderSurface(this.slideRenderSurface),t>0&&this.actionRenderSurface.renderShapes(e.slice(0,t));const r=e[t];this.renderVolatileLayer(r,r.bounds)}else this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}renderAllLayers(){this.renderSlideLayer(this.page).then(t=>{if(t){const r=this.getPageTransform();this.lastTransform.setTransform(r),this.actionRenderSurface.setTransform(r),this.volatileRenderSurface.setTransform(r),this.actionRenderSurface.renderImageSource(t),this.actionRenderSurface.renderShapes(this.page.getShapes()),this.volatileRenderSurface.clear(),this.textLayerSurface.render(this.page),this.lastShape=null,console.log("RendererController Rendered image source: ",t)}}).catch(t=>{console.log("RendererController error: ",t)})}renderPermanentLayer(e,t){this.actionRenderSurface.renderShape(e,t)}renderVolatileLayer(e,t){this.volatileRenderSurface.renderSurface(this.actionRenderSurface),this.volatileRenderSurface.renderShape(e,t),this.lastShape=e}renderSlideLayer(e){const t=this.slideRenderSurface.getSize();if(!t)return this.slideRenderSurface.renderSlideShape(e.getSlideShape(),new Kr(0,0,0,0));const r=new Kr(0,0,t.width,t.height);return this.slideRenderSurface.renderSlideShape(e.getSlideShape(),r)}getPageTransform(){const e=this.page.getSlideShape().bounds,t=new hr;return t.translate(e.x,e.y),t.scale(1/e.width,1/e.height),t}registerShapeRenderers(e){e.registerRenderer(mu.name,new YL),e.registerRenderer(Vs.name,new BL),e.registerRenderer(HC.name,new HL),e.registerRenderer(_u.name,new VL),e.registerRenderer(vu.name,new UL),e.registerRenderer(yu.name,new $L),e.registerRenderer(bu.name,new GL),e.registerRenderer($C.name,new zL),e.registerRenderer(fl.name,new qL),e.registerRenderer(Su.name,new XL),e.registerRenderer(pl.name,new KL),e.registerRenderer(GC.name,new WL)}}class QL{constructor(e){e&&(this.mediaPlayer=e)}get audioTime(){return this.mediaPlayer?1e3*this.mediaPlayer.time:0}}class Us{constructor(e){this.playbackModel=e,this.documents=new Map,Us._instance=this}static getInstance(){return this._instance}initialize(e,t,r,i){r.forEach(c=>{this.addDocument(c)}),Number(i);const o=t.avtiveDocument;let a=null;for(const c of r)if(c.getDocumentId()==o.documentId){a=c;break}this.renderController=new JL,this.renderController.setActionRenderSurface(e.getActionRenderSurface()),this.renderController.setSlideRenderSurface(e.getSlideRenderSurface()),this.renderController.setVolatileRenderSurface(e.getVolatileRenderSurface()),this.renderController.setTextLayerSurface(e.getTextLayerSurface());const l=new kL(this.renderController);a&&l.setDocument(a),o.activePage&&l.setPageNumber(o.activePage.pageNumber),this.actionPlayer=new NL(l,new QL),this.actionPlayer.start()}addAction(e){this.actionPlayer.addAction(e)}addDocument(e){this.documents.set(BigInt(e.getDocumentId()),e)}removeDocument(e){this.documents.delete(BigInt(e))}selectDocument(e){const t=this.documents.get(BigInt(e));t&&this.actionPlayer.setDocument(t)}}class fr extends class ZL{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}notify(e){this.observers.forEach(t=>t(e))}}{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.notify(this._value))}notifyObservers(){super.notify(this._value)}}class eN{constructor(){this._elementA=new fr,this._raisedHand=new fr,this._showQuiz=new fr,this._showChat=new fr,this._showQuizActive=new fr,this._webrtcConnected=new fr,this._webrtcPublisherConnected=new fr,this._videoAvailable=new fr,this._mainVideoAvailable=new fr,this._localVideoAvailable=new fr,this._selectedPageIndex=new fr,this._duration=new fr,this._time=new fr,this._volume=new fr,this._muted=new fr}get elementAProperty(){return this._elementA}get selectedPageIndexProperty(){return this._selectedPageIndex}get selectedPageIndex(){return this._selectedPageIndex.value}set selectedPageIndex(e){this._selectedPageIndex.value=e}get raisedHandProperty(){return this._raisedHand}set raisedHand(e){this._raisedHand.value=e}get showChatProperty(){return this._showChat}get showChat(){return this._showChat.value}set showChat(e){this._showChat.value=e}get showQuizProperty(){return this._showQuiz}set showQuiz(e){this._showQuiz.value=e}get showQuizActiveProperty(){return this._showQuizActive}set showQuizActive(e){this._showQuizActive.value=e}get webrtcConnectedProperty(){return this._webrtcConnected}set webrtcConnected(e){this._webrtcConnected.value=e}get webrtcPublisherConnectedProperty(){return this._webrtcPublisherConnected}set webrtcPublisherConnected(e){this._webrtcPublisherConnected.value=e}get videoAvailableProperty(){return this._videoAvailable}get videoAvailable(){return this._videoAvailable.value}set videoAvailable(e){this._videoAvailable.value=e}get mainVideoAvailableProperty(){return this._mainVideoAvailable}get mainVideoAvailable(){return this._mainVideoAvailable.value}set mainVideoAvailable(e){this._mainVideoAvailable.value=e}get localVideoAvailableProperty(){return this._localVideoAvailable}get localVideoAvailable(){return this._localVideoAvailable.value}set localVideoAvailable(e){this._localVideoAvailable.value=e}get durationProperty(){return this._duration}getDuration(){return this._duration.value}setDuration(e){this._duration.value=e}get timeProperty(){return this._time}getTime(){return this._time.value}setTime(e){this._time.value=e}get volumeProperty(){return this._volume}getVolume(){return this._volume.value}setVolume(e){this._volume.value=e}get mutedProperty(){return this._muted}getMuted(){return this._muted.value}setMuted(e){this._muted.value=e}}class JC{constructor(e,t){this.width=e,this.height=t}equals(e){return!!e&&this.width===e.height&&this.height===e.height}toString(){return`[${this.height}, ${this.width}]`}}class tN{constructor(e){this._size=e}get size(){return this._size}}class Dp{constructor(e){this.sizeEvent=new pu,this.canvas=e,this.canvasContext=e.getContext("2d"),this.renderers=new Map,this.transform=new hr}clear(){this.canvasContext&&this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}registerRenderer(e,t){this.renderers.set(e,t)}renderImageSource(e){this.canvasContext&&this.canvasContext.drawImage(e,0,0)}renderSurface(e){0===e.canvas.width||0===e.canvas.height||this.canvasContext&&this.canvasContext.drawImage(e.canvas,0,0)}renderShapes(e){for(let t of e)this.renderShape(t,null)}renderShape(e,t){const r=this.renderers.get(e.constructor.name);if(r){const i=this.canvas.width*this.transform.getScaleX(),s=this.transform.getTranslateX(),o=this.transform.getTranslateY();this.canvasContext&&(this.canvasContext.save(),this.canvasContext.scale(i,i),this.canvasContext.translate(-s,-o),t&&r.render(this.canvasContext,e,t),this.canvasContext.restore())}}getSize(){return this.size}setSize(e,t){if(e<1||t<1)return;const r=window.devicePixelRatio||1;this.size=new JC(e*r,t*r),this.resizeCanvas(e,t,r),this.fireSizeEvent(new tN(this.size))}setTransform(e){this.transform.setTransform(e)}addSizeListener(e){return this.sizeEvent.subscribe(e)}removeSizeListener(e){this.sizeEvent.unsubscribe(e)}fireSizeEvent(e){this.sizeEvent.publish(e)}resizeCanvas(e,t,r){const i=this.canvas.getAttribute("scale");i&&"full"===i&&(this.canvas.width=e*r,this.canvas.height=t*r),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"}}class nN extends Dp{renderSlideShape(e,t){const r=this.renderers.get(e.constructor.name);let i;if(r){const o=this.canvas.width/e.bounds.width;this.canvasContext&&(this.canvasContext.save(),this.canvasContext.scale(o,o),i=r.render(this.canvasContext,e,t),this.canvasContext.restore())}return i}}class rN{constructor(e){this.root=e}clear(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild)}render(e){var t=this;return Mi(function*(){t.clear(),e.renderText(t.root,t.size)})()}getSize(){return this.size}setSize(e,t){this.size=new JC(e,t),this.root.style.width=e+"px",this.root.style.height=t+"px"}}var QC=X(97).default;m.sessions={},m.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var n=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),e=33;return window.navigator.userAgent.match("Linux")&&(e=35),n>=26&&n<=e||m.extension.isInstalled()}return!0};var ZC={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(n){var e=window.setTimeout(function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',n(t)},1e3);this.cache[e]=n,window.postMessage({type:"janusGetScreen",id:e},"*")},init:function(){var n={};this.cache=n,window.addEventListener("message",function(e){if(e.origin==window.location.origin)if("janusGotScreen"==e.data.type&&n[e.data.id]){var t=n[e.data.id];if(delete n[e.data.id],""===e.data.sourceId){var r=new Error("NavigatorUserMediaError");r.name="You cancelled the request for permission, giving up...",t(r)}else t(null,e.data.sourceId)}else"janusGetScreenPending"==e.data.type&&(console.log("clearing ",e.data.id),window.clearTimeout(e.data.id))})}};function m(n){if((n=n||{}).success="function"==typeof n.success?n.success:m.noop,n.error="function"==typeof n.error?n.error:m.noop,n.destroyed="function"==typeof n.destroyed?n.destroyed:m.noop,!m.initDone)return n.error("Library not initialized"),{};if(!m.isWebrtcSupported())return n.error("WebRTC not supported by this browser"),{};if(m.log("Library initialized: "+m.initDone),!n.server)return n.error("Invalid server url"),{};var e=!1,t=null,r={},i=null,s=null,o=0,a=n.server;m.isArray(a)?(m.log("Multiple servers provided ("+a.length+"), will use the first that works"),a=null,m.debug(s=n.server)):0===a.indexOf("ws")?(e=!0,m.log("Using WebSockets to contact Janus: "+a)):(e=!1,m.log("Using REST API to contact Janus: "+a));var l=n.iceServers||[{urls:"stun:stun.l.google.com:19302"}],c=n.iceTransportPolicy,f=n.bundlePolicy,C=!0===n.ipv6,j=!1;null!=n.withCredentials&&(j=!0===n.withCredentials);var J=10;null!=n.max_poll_events&&(J=n.max_poll_events),J<1&&(J=1);var be=null;null!=n.token&&(be=n.token);var Fe=null;null!=n.apisecret&&(Fe=n.apisecret),this.destroyOnUnload=!0,null!=n.destroyOnUnload&&(this.destroyOnUnload=!0===n.destroyOnUnload);var Je=25e3;null!=n.keepAlivePeriod&&(Je=n.keepAlivePeriod),isNaN(Je)&&(Je=25e3);var Ze=6e4;function Ve(z){var oe={high:9e5,medium:3e5,low:1e5};return null!=z&&(z.high&&(oe.high=z.high),z.medium&&(oe.medium=z.medium),z.low&&(oe.low=z.low)),oe}null!=n.longPollTimeout&&(Ze=n.longPollTimeout),isNaN(Ze)&&(Ze=6e4);var nt=!1,rt=null,ht={},An=this,Sr=0,Dn={};function Fr(){if(null!=rt){if(m.debug("Long poll..."),!nt)return void m.warn("Is the server down? (connected=false)");var z=a+"/"+rt+"?rid="+(new Date).getTime();J&&(z=z+"&maxev="+J),be&&(z=z+"&token="+encodeURIComponent(be)),Fe&&(z=z+"&apisecret="+encodeURIComponent(Fe)),m.httpAPICall(z,{verb:"GET",withCredentials:j,success:Ri,timeout:Ze,error:function(oe,De){if(m.error(oe+":",De),++Sr>3)return nt=!1,void n.error("Lost connection to the server (is it down?)");Fr()}})}}function Ri(z,oe){if(Sr=0,!e&&null!=rt&&!0!==oe&&Fr(),e||!m.isArray(z))if("keepalive"!==z.janus)if("server_info"!==z.janus)if("ack"!==z.janus)if("success"!==z.janus)if("trickle"===z.janus){const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const lt=ht[ot];if(!lt)return void m.debug("This handle is not attached to this session");var ge=z.candidate;m.debug("Got a trickled candidate on session "+rt),m.debug(ge);var q=lt.webrtcStuff;q.pc&&q.remoteSdp?(m.debug("Adding remote candidate:",ge),q.pc.addIceCandidate(ge&&!0!==ge.completed?ge:m.endOfCandidates)):(m.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),q.candidates||(q.candidates=[]),q.candidates.push(ge),m.debug(q.candidates))}else{if("webrtcup"===z.janus){m.debug("Got a webrtcup event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const lt=ht[ot];return lt?void lt.webrtcState(!0):void m.debug("This handle is not attached to this session")}if("hangup"===z.janus){m.debug("Got a hangup event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const lt=ht[ot];if(!lt)return void m.debug("This handle is not attached to this session");lt.webrtcState(!1,z.reason),lt.hangup()}else if("detached"===z.janus){m.debug("Got a detached event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const lt=ht[ot];if(!lt)return;lt.ondetached(),lt.detach()}else if("media"===z.janus){m.debug("Got a media event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const lt=ht[ot];if(!lt)return void m.debug("This handle is not attached to this session");lt.mediaState(z.type,z.receiving,z.mid)}else if("slowlink"===z.janus){m.debug("Got a slowlink event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");const lt=ht[ot];if(!lt)return void m.debug("This handle is not attached to this session");lt.slowLink(z.uplink,z.lost,z.mid)}else{if("error"===z.janus){m.error("Ooops: "+z.error.code+" "+z.error.reason),m.debug(z);var Ne=z.transaction;if(Ne){var ye=Dn[Ne];ye&&ye(z),delete Dn[Ne]}return}if("event"===z.janus){m.debug("Got a plugin event on session "+rt),m.debug(z);const ot=z.sender;if(!ot)return void m.warn("Missing sender...");var Ge=z.plugindata;if(!Ge)return void m.warn("Missing plugindata...");m.debug("  -- Event is coming from "+ot+" ("+Ge.plugin+")");var Be=Ge.data;m.debug(Be);const lt=ht[ot];if(!lt)return void m.warn("This handle is not attached to this session");var st=z.jsep;st&&(m.debug("Handling SDP as well..."),m.debug(st));var Ue=lt.onmessage;Ue?(m.debug("Notifying application..."),Ue(Be,st)):m.debug("No provided notification callback")}else{if("timeout"===z.janus)return m.error("Timeout on session "+rt),m.debug(z),void(e&&t.close(3504,"Gateway timeout"));m.warn("Unknown message/event  '"+z.janus+"' on session "+rt),m.debug(z)}}}else{m.debug("Got a success on session "+rt),m.debug(z);const ot=z.transaction;if(ot){const lt=Dn[ot];lt&&lt(z),delete Dn[ot]}}else{m.debug("Got an ack on session "+rt),m.debug(z);const ot=z.transaction;if(ot){const lt=Dn[ot];lt&&lt(z),delete Dn[ot]}}else{m.debug("Got info on the Janus instance"),m.debug(z);const ot=z.transaction;if(ot){const lt=Dn[ot];lt&&lt(z),delete Dn[ot]}}else m.vdebug("Got a keepalive on session "+rt);else for(var De=0;De<z.length;De++)Ri(z[De],!0)}function Ki(){if(a&&e&&nt){i=setTimeout(Ki,Je);var z={janus:"keepalive",session_id:rt,transaction:m.randomString(12)};be&&(z.token=be),Fe&&(z.apisecret=Fe),t.send(JSON.stringify(z))}}function _s(z){var oe=m.randomString(12),De={janus:"create",transaction:oe};if(z.reconnect&&(nt=!1,De.janus="claim",De.session_id=rt,t&&(t.onopen=null,t.onerror=null,t.onclose=null,i&&(clearTimeout(i),i=null))),be&&(De.token=be),Fe&&(De.apisecret=Fe),!a&&m.isArray(s)&&(0===(a=s[o]).indexOf("ws")?(e=!0,m.log("Server #"+(o+1)+": trying WebSockets to contact Janus ("+a+")")):(e=!1,m.log("Server #"+(o+1)+": trying REST API to contact Janus ("+a+")"))),e)for(var ge in t=m.newWebSocket(a,"janus-protocol"),r={error:function(){if(m.error("Error connecting to the Janus WebSockets server... "+a),m.isArray(s)&&!z.reconnect)return++o===s.length?void z.error("Error connecting to any of the provided Janus servers: Is the server down?"):(a=null,void setTimeout(function(){_s(z)},200));z.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){Dn[oe]=function(q){if(m.debug(q),"success"!==q.janus)return m.error("Ooops: "+q.error.code+" "+q.error.reason),void z.error(q.error.reason);i=setTimeout(Ki,Je),nt=!0,rt=q.session_id?q.session_id:q.data.id,m.log(z.reconnect?"Claimed session: "+rt:"Created session: "+rt),m.sessions[rt]=An,z.success()},t.send(JSON.stringify(De))},message:function(q){Ri(JSON.parse(q.data))},close:function(){!a||!nt||(nt=!1,n.error("Lost connection to the server (is it down?)"))}})t.addEventListener(ge,r[ge]);else m.httpAPICall(a,{verb:"POST",withCredentials:j,body:De,success:function(q){if(m.debug(q),"success"!==q.janus)return m.error("Ooops: "+q.error.code+" "+q.error.reason),void z.error(q.error.reason);nt=!0,rt=q.session_id?q.session_id:q.data.id,m.log(z.reconnect?"Claimed session: "+rt:"Created session: "+rt),m.sessions[rt]=An,Fr(),z.success()},error:function(q,Ne){if(m.error(q+":",Ne),m.isArray(s)&&!z.reconnect)return++o===s.length?void z.error("Error connecting to any of the provided Janus servers: Is the server down?"):(a=null,void setTimeout(function(){_s(z)},200));z.error(""===Ne?q+": Is the server down?":Ne&&Ne.error?q+": "+Ne.error.message:q+": "+Ne)}})}function Jo(z,oe){if((oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop,!nt)return m.warn("Is the server down? (connected=false)"),void oe.error("Is the server down? (connected=false)");var De=ht[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var ge=oe.message,q=oe.jsep,Ne=m.randomString(12),ye={janus:"message",body:ge,transaction:Ne};if(De.token&&(ye.token=De.token),Fe&&(ye.apisecret=Fe),q&&(ye.jsep={type:q.type,sdp:q.sdp},q.e2ee&&(ye.jsep.e2ee=!0),("hml"===q.rid_order||"lmh"===q.rid_order)&&(ye.jsep.rid_order=q.rid_order),q.force_relay&&(ye.jsep.force_relay=!0)),m.debug("Sending message to plugin (handle="+z+"):"),m.debug(ye),e)return ye.session_id=rt,ye.handle_id=z,Dn[Ne]=function(Ge){if(m.debug("Message sent!"),m.debug(Ge),"success"===Ge.janus){var Be=Ge.plugindata;if(!Be)return m.warn("Request succeeded, but missing plugindata..."),void oe.success();m.log("Synchronous transaction successful ("+Be.plugin+")");var st=Be.data;return m.debug(st),void oe.success(st)}"ack"===Ge.janus?oe.success():Ge.error?(m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),oe.error(Ge.error.code+" "+Ge.error.reason)):(m.error("Unknown error"),oe.error("Unknown error"))},void t.send(JSON.stringify(ye));m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:j,body:ye,success:function(Ge){if(m.debug("Message sent!"),m.debug(Ge),"success"===Ge.janus){var Be=Ge.plugindata;if(!Be)return m.warn("Request succeeded, but missing plugindata..."),void oe.success();m.log("Synchronous transaction successful ("+Be.plugin+")");var st=Be.data;return m.debug(st),void oe.success(st)}"ack"===Ge.janus?oe.success():Ge.error?(m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),oe.error(Ge.error.code+" "+Ge.error.reason)):(m.error("Unknown error"),oe.error("Unknown error"))},error:function(Ge,Be){m.error(Ge+":",Be),oe.error(Ge+": "+Be)}})}function $S(z,oe){if(nt){var De=ht[z];if(De&&De.webrtcStuff){var ge={janus:"trickle",candidate:oe,transaction:m.randomString(12)};if(De.token&&(ge.token=De.token),Fe&&(ge.apisecret=Fe),m.vdebug("Sending trickle candidate (handle="+z+"):"),m.vdebug(ge),e)return ge.session_id=rt,ge.handle_id=z,void t.send(JSON.stringify(ge));m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:j,body:ge,success:function(q){m.vdebug("Candidate sent!"),m.vdebug(q),"ack"===q.janus||m.error("Ooops: "+q.error.code+" "+q.error.reason)},error:function(q,Ne){m.error(q+":",Ne)}})}else m.warn("Invalid handle")}else m.warn("Is the server down? (connected=false)")}function Vp(z,oe,De,ge,q){var Ne=ht[z];if(Ne&&Ne.webrtcStuff){var ye=Ne.webrtcStuff;if(ye.pc){var Be=function(ot){m.log("Received state change on data channel:",ot);var lt=ot.target.label,Tn=ot.target.protocol,jt=ye.dataChannel[lt]?ye.dataChannel[lt].readyState:"null";if(m.log("State change on <"+lt+"> data channel: "+jt),"open"===jt){if(ye.dataChannel[lt].pending&&ye.dataChannel[lt].pending.length>0){for(var vt of(m.log("Sending pending messages on <"+lt+">:",ye.dataChannel[lt].pending.length),ye.dataChannel[lt].pending))m.log("Sending data on data channel <"+lt+">"),m.debug(vt),ye.dataChannel[lt].send(vt);ye.dataChannel[lt].pending=[]}Ne.ondataopen(lt,Tn)}};if(ge)ye.dataChannel[oe]=ge;else{var Ue=ye.dataChannelOptions;De&&(Ue.protocol=De),ye.dataChannel[oe]=ye.pc.createDataChannel(oe,Ue)}ye.dataChannel[oe].onmessage=function(ot){m.log("Received message on data channel:",ot),Ne.ondata(ot.data,ot.target.label)},ye.dataChannel[oe].onopen=Be,ye.dataChannel[oe].onclose=Be,ye.dataChannel[oe].onerror=function(ot){m.error("Got error on data channel:",ot)},ye.dataChannel[oe].pending=[],q&&ye.dataChannel[oe].pending.push(q)}else m.warn("Invalid PeerConnection")}else m.warn("Invalid handle")}function GS(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=ht[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var ge=De.webrtcStuff,q=oe.text||oe.data;if(!q)return m.warn("Invalid data"),void oe.error("Invalid data");var Ne=oe.label?oe.label:m.dataChanDefaultLabel;return ge.dataChannel[Ne]?"open"!==ge.dataChannel[Ne].readyState?(ge.dataChannel[Ne].pending.push(q),void oe.success()):(m.log("Sending data on data channel <"+Ne+">"),m.debug(q),ge.dataChannel[Ne].send(q),void oe.success()):(Vp(z,Ne,oe.protocol,!1,q),void oe.success())}function zS(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=ht[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var ge=De.webrtcStuff;if(!ge.dtmfSender){if(ge.pc){var Ne=ge.pc.getSenders().find(function(Ue){return Ue.track&&"audio"===Ue.track.kind});if(!Ne)return m.warn("Invalid DTMF configuration (no audio track)"),void oe.error("Invalid DTMF configuration (no audio track)");ge.dtmfSender=Ne.dtmf,ge.dtmfSender&&(m.log("Created DTMF Sender"),ge.dtmfSender.ontonechange=function(Ue){m.debug("Sent DTMF tone: "+Ue.tone)})}if(!ge.dtmfSender)return m.warn("Invalid DTMF configuration"),void oe.error("Invalid DTMF configuration")}var ye=oe.dtmf;if(!ye)return m.warn("Invalid DTMF parameters"),void oe.error("Invalid DTMF parameters");var Ge=ye.tones;if(!Ge)return m.warn("Invalid DTMF string"),void oe.error("Invalid DTMF string");var Be="number"==typeof ye.duration?ye.duration:500,st="number"==typeof ye.gap?ye.gap:50;m.debug("Sending DTMF string "+Ge+" (duration "+Be+"ms, gap "+st+"ms)"),ge.dtmfSender.insertDTMF(Ge,Be,st),oe.success()}function Up(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=!0===oe.noRequest;m.log("Destroying handle "+z+" (only-locally="+De+")"),$p(z);var ge=ht[z];if(!ge||ge.detached)return delete ht[z],void oe.success();if(ge.detached=!0,De)return delete ht[z],void oe.success();if(!nt)return m.warn("Is the server down? (connected=false)"),void oe.error("Is the server down? (connected=false)");var q={janus:"detach",transaction:m.randomString(12)};if(ge.token&&(q.token=ge.token),Fe&&(q.apisecret=Fe),e)return q.session_id=rt,q.handle_id=z,t.send(JSON.stringify(q)),delete ht[z],void oe.success();m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:j,body:q,success:function(Ne){m.log("Destroyed handle:"),m.debug(Ne),"success"!==Ne.janus&&m.error("Ooops: "+Ne.error.code+" "+Ne.error.reason),delete ht[z],oe.success()},error:function(Ne,ye){m.error(Ne+":",ye),delete ht[z],oe.success()}})}function ys(z,oe,De,ge,q){var Ne=ht[z];if(!Ne||!Ne.webrtcStuff)return m.warn("Invalid handle"),ge.stream||m.stopAllTracks(q),void ge.error("Invalid handle");var ye=Ne.webrtcStuff;m.debug("streamsDone:",q),q&&(m.debug("  -- Audio tracks:",q.getAudioTracks()),m.debug("  -- Video tracks:",q.getVideoTracks()));var Ge=!1;if(ye.myStream&&De.update&&(!ye.streamExternal||De.replaceAudio||De.replaceVideo)){if((!De.update&&Er(De)||De.update&&(De.addAudio||De.replaceAudio))&&q.getAudioTracks()&&q.getAudioTracks().length)if(ye.myStream.addTrack(q.getAudioTracks()[0]),m.unifiedPlan){m.log((De.replaceAudio?"Replacing":"Adding")+" audio track:",q.getAudioTracks()[0]);var Be=null;const ct=ye.pc.getTransceivers();if(ct&&ct.length>0)for(const wt of ct)if(wt.sender&&wt.sender.track&&"audio"===wt.sender.track.kind||wt.receiver&&wt.receiver.track&&"audio"===wt.receiver.track.kind){Be=wt;break}Be&&Be.sender?Be.sender.replaceTrack(q.getAudioTracks()[0]):ye.pc.addTrack(q.getAudioTracks()[0],q)}else m.log((De.replaceAudio?"Replacing":"Adding")+" audio track:",q.getAudioTracks()[0]),ye.pc.addTrack(q.getAudioTracks()[0],q);if((!De.update&&Jr(De)||De.update&&(De.addVideo||De.replaceVideo))&&q.getVideoTracks()&&q.getVideoTracks().length)if(ye.myStream.addTrack(q.getVideoTracks()[0]),m.unifiedPlan){m.log((De.replaceVideo?"Replacing":"Adding")+" video track:",q.getVideoTracks()[0]);var st=null;const ct=ye.pc.getTransceivers();if(ct&&ct.length>0)for(const wt of ct)if(wt.sender&&wt.sender.track&&"video"===wt.sender.track.kind||wt.receiver&&wt.receiver.track&&"video"===wt.receiver.track.kind){st=wt;break}st&&st.sender?st.sender.replaceTrack(q.getVideoTracks()[0]):ye.pc.addTrack(q.getVideoTracks()[0],q)}else m.log((De.replaceVideo?"Replacing":"Adding")+" video track:",q.getVideoTracks()[0]),ye.pc.addTrack(q.getVideoTracks()[0],q)}else ye.myStream=q,Ge=!0;if(!ye.pc){var Ue={iceServers:l,iceTransportPolicy:c,bundlePolicy:f};"chrome"===m.webRTCAdapter.browserDetails.browser&&(Ue.sdpSemantics=m.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var ot={optional:[{DtlsSrtpKeyAgreement:!0}]};if(C&&ot.optional.push({googIPv6:!0}),ge.rtcConstraints&&"object"==typeof ge.rtcConstraints)for(var lt in m.debug("Adding custom PeerConnection constraints:",ge.rtcConstraints),ge.rtcConstraints)ot.optional.push(ge.rtcConstraints[lt]);"edge"===m.webRTCAdapter.browserDetails.browser&&(Ue.bundlePolicy="max-bundle"),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&(ge.senderTransforms||ge.receiverTransforms)&&(ye.senderTransforms=ge.senderTransforms,ye.receiverTransforms=ge.receiverTransforms,Ue.forceEncodedAudioInsertableStreams=!0,Ue.forceEncodedVideoInsertableStreams=!0,Ue.encodedInsertableStreams=!0),m.log("Creating PeerConnection"),m.debug(ot),ye.pc=new RTCPeerConnection(Ue,ot),m.debug(ye.pc),ye.pc.getStats&&(ye.volume={},ye.bitrate.value="0 kbits/sec"),m.log("Preparing local SDP and gathering candidates (trickle="+ye.trickle+")"),ye.pc.oniceconnectionstatechange=function(){ye.pc&&Ne.iceState(ye.pc.iceConnectionState)},ye.pc.onicecandidate=function(ct){!ct.candidate||"edge"===m.webRTCAdapter.browserDetails.browser&&ct.candidate.candidate.indexOf("endOfCandidates")>0?(m.log("End of candidates."),ye.iceDone=!0,!0===ye.trickle?$S(z,{completed:!0}):function gB(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:m.noop;var De=ht[z];if(De&&De.webrtcStuff){var ge=De.webrtcStuff;m.log("Sending offer/answer SDP..."),ge.mySdp?(ge.mySdp={type:ge.pc.localDescription.type,sdp:ge.pc.localDescription.sdp},!1===ge.trickle&&(ge.mySdp.trickle=!1),m.debug(oe),ge.sdpSent=!0,oe.success(ge.mySdp)):m.warn("Local SDP instance is invalid, not sending anything...")}else m.warn("Invalid handle, not sending anything")}(z,ge)):!0===ye.trickle&&$S(z,{candidate:ct.candidate.candidate,sdpMid:ct.candidate.sdpMid,sdpMLineIndex:ct.candidate.sdpMLineIndex})},ye.pc.ontrack=function(ct){if(m.log("Handling Remote Track"),m.debug(ct),ct.streams&&(ye.remoteStream=ct.streams[0],ct.track)){var wt=ct.transceiver?ct.transceiver.mid:ct.track.id;try{Ne.onremotetrack(ct.track,wt,!0)}catch(tn){m.error(tn)}if(!ct.track.onended){if(ye.receiverTransforms){var gt=null;RTCRtpSender.prototype.createEncodedStreams?gt=ct.receiver.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===ct.track.kind&&ye.receiverTransforms.audio?gt=ct.receiver.createEncodedAudioStreams():"video"===ct.track.kind&&ye.receiverTransforms.video&&(gt=ct.receiver.createEncodedVideoStreams())),gt&&(console.log(gt),gt.readableStream&&gt.writableStream?gt.readableStream.pipeThrough(ye.receiverTransforms[ct.track.kind]).pipeTo(gt.writableStream):gt.readable&&gt.writable&&gt.readable.pipeThrough(ye.receiverTransforms[ct.track.kind]).pipeTo(gt.writable))}var Ht=null;m.log("Adding onended callback to track:",ct.track),ct.track.onended=function(tn){if(m.log("Remote track removed:",tn),ye.remoteStream){clearTimeout(Ht),ye.remoteStream.removeTrack(tn.target);var fi=tn.target.id;m.unifiedPlan&&(fi=ye.pc.getTransceivers().find(un=>un.receiver.track===tn.target).mid);try{Ne.onremotetrack(tn.target,fi,!1)}catch(un){m.error(un)}}},ct.track.onmute=function(tn){m.log("Remote track muted:",tn),ye.remoteStream&&null==Ht&&(Ht=setTimeout(function(){if(m.log("Removing remote track"),ye.remoteStream){ye.remoteStream.removeTrack(tn.target);var fi=tn.target.id;m.unifiedPlan&&(fi=ye.pc.getTransceivers().find(un=>un.receiver.track===tn.target).mid);try{Ne.onremotetrack(tn.target,fi,!1)}catch(un){m.error(un)}}Ht=null},2520))},ct.track.onunmute=function(tn){if(m.log("Remote track flowing again:",tn),null!=Ht)clearTimeout(Ht),Ht=null;else try{ye.remoteStream.addTrack(tn.target);var fi=tn.target.id;m.unifiedPlan&&(fi=ye.pc.getTransceivers().find(un=>un.receiver.track===tn.target).mid),Ne.onremotetrack(tn.target,fi,!0)}catch(un){m.error(un)}}}}}}if(Ge&&q){m.log("Adding local stream");var Tn=(!0===ge.simulcast||!0===ge.simulcast2)&&m.unifiedPlan,jt=ge.svc;q.getTracks().forEach(function(ct){m.log("Adding local track:",ct);var wt=null;if(!Tn&&!jt||"audio"===ct.kind)wt=ye.pc.addTrack(ct,q);else if(Tn){m.log("Enabling rid-based simulcasting:",ct);let Ht=Ve(ge.simulcastMaxBitrates),tn=ye.pc.addTransceiver(ct,{direction:"sendrecv",streams:[q],sendEncodings:ge.sendEncodings||[{rid:"h",active:!0,maxBitrate:Ht.high},{rid:"m",active:!0,maxBitrate:Ht.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:Ht.low,scaleResolutionDownBy:4}]});tn&&(wt=tn.sender)}else{m.log("Enabling SVC ("+jt+"):",ct);let Ht=ye.pc.addTransceiver(ct,{direction:"sendrecv",streams:[q],sendEncodings:[{scalabilityMode:jt}]});Ht&&(wt=Ht.sender)}if(wt&&ye.senderTransforms){var gt=null;RTCRtpSender.prototype.createEncodedStreams?gt=wt.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===wt.track.kind&&ye.senderTransforms.audio?gt=wt.createEncodedAudioStreams():"video"===wt.track.kind&&ye.senderTransforms.video&&(gt=wt.createEncodedVideoStreams())),gt&&(console.log(gt),gt.readableStream&&gt.writableStream?gt.readableStream.pipeThrough(ye.senderTransforms[wt.track.kind]).pipeTo(gt.writableStream):gt.readable&&gt.writable&&gt.readable.pipeThrough(ye.senderTransforms[wt.track.kind]).pipeTo(gt.writable))}})}if(function bB(z){return m.debug("isDataEnabled:",z),"edge"===m.webRTCAdapter.browserDetails.browser?(m.warn("Edge doesn't support data channels yet"),!1):null!=z&&!0===z.data}(De)&&!ye.dataChannel[m.dataChanDefaultLabel]&&(m.log("Creating default data channel"),Vp(z,m.dataChanDefaultLabel,null,!1),ye.pc.ondatachannel=function(ct){m.log("Data channel created by Janus:",ct),Vp(z,ct.channel.label,ct.channel.protocol,ct.channel)}),ye.myStream){var vt=ye.myStream.getTracks();for(let ct in vt){var xn=vt[ct];xn.onended=function(wt){m.log("Local track removed:",wt);try{Ne.onlocaltrack(wt.target,!1)}catch(gt){m.error(gt)}};try{Ne.onlocaltrack(xn,!0)}catch(wt){m.error(wt)}}}oe?ye.pc.setRemoteDescription(oe).then(function(){if(m.log("Remote description accepted!"),ye.remoteSdp=oe.sdp,ye.candidates&&ye.candidates.length>0){for(var ct=0;ct<ye.candidates.length;ct++){var wt=ye.candidates[ct];m.debug("Adding remote candidate:",wt),ye.pc.addIceCandidate(wt&&!0!==wt.completed?wt:m.endOfCandidates)}ye.candidates=[]}!function pB(z,oe,De){(De=De||{}).success="function"==typeof De.success?De.success:m.noop,De.error="function"==typeof De.error?De.error:m.noop,De.customizeSdp="function"==typeof De.customizeSdp?De.customizeSdp:m.noop;var ge=ht[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),void De.error("Invalid handle");var q=ge.webrtcStuff,Ne=!0===De.simulcast||!0===De.simulcast2;m.log(Ne?"Creating answer (iceDone="+q.iceDone+", simulcast="+Ne+")":"Creating answer (iceDone="+q.iceDone+")");var ye=null;if(m.unifiedPlan){ye={};var Ge=null,Be=null,st=q.pc.getTransceivers();if(st&&st.length>0)for(var Ue of st)Ue.sender&&Ue.sender.track&&"audio"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"audio"===Ue.receiver.track.kind?Ge||(Ge=Ue):(Ue.sender&&Ue.sender.track&&"video"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"video"===Ue.receiver.track.kind)&&(Be||(Be=Ue));var ot=Er(oe),lt=wl(oe);if(ot||lt){if(ot&&lt){if(Ge)try{Ge.setDirection?Ge.setDirection("sendrecv"):Ge.direction="sendrecv",m.log("Setting audio transceiver to sendrecv:",Ge)}catch(gt){m.error(gt)}}else if(ot&&!lt)try{Ge&&(Ge.setDirection?Ge.setDirection("sendonly"):Ge.direction="sendonly",m.log("Setting audio transceiver to sendonly:",Ge))}catch(gt){m.error(gt)}else if(!ot&&lt)if(Ge)try{Ge.setDirection?Ge.setDirection("recvonly"):Ge.direction="recvonly",m.log("Setting audio transceiver to recvonly:",Ge)}catch(gt){m.error(gt)}else Ge=q.pc.addTransceiver("audio",{direction:"recvonly"}),m.log("Adding recvonly audio transceiver:",Ge)}else if(oe.removeAudio&&Ge)try{Ge.setDirection?Ge.setDirection("inactive"):Ge.direction="inactive",m.log("Setting audio transceiver to inactive:",Ge)}catch(gt){m.error(gt)}var Tn=Jr(oe),jt=Al(oe);if(Tn||jt){if(Tn&&jt){if(Be)try{Be.setDirection?Be.setDirection("sendrecv"):Be.direction="sendrecv",m.log("Setting video transceiver to sendrecv:",Be)}catch(gt){m.error(gt)}}else if(Tn&&!jt){if(Be)try{Be.setDirection?Be.setDirection("sendonly"):Be.direction="sendonly",m.log("Setting video transceiver to sendonly:",Be)}catch(gt){m.error(gt)}}else if(!Tn&&jt)if(Be)try{Be.setDirection?Be.setDirection("recvonly"):Be.direction="recvonly",m.log("Setting video transceiver to recvonly:",Be)}catch(gt){m.error(gt)}else Be=q.pc.addTransceiver("video",{direction:"recvonly"}),m.log("Adding recvonly video transceiver:",Be)}else if(oe.removeVideo&&Be)try{Be.setDirection?Be.setDirection("inactive"):Be.direction="inactive",m.log("Setting video transceiver to inactive:",Be)}catch(gt){m.error(gt)}}else ye="firefox"===m.webRTCAdapter.browserDetails.browser||"edge"===m.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:wl(oe),offerToReceiveVideo:Al(oe)}:{mandatory:{OfferToReceiveAudio:wl(oe),OfferToReceiveVideo:Al(oe)}};m.debug(ye);var vt=Jr(oe);if(vt&&Ne&&"firefox"===m.webRTCAdapter.browserDetails.browser){m.log("Enabling Simulcasting for Firefox (RID)");var xn=q.pc.getSenders()[1];m.log(xn);var ct=xn.getParameters();m.log(ct);var wt=Ve(De.simulcastMaxBitrates);xn.setParameters({encodings:De.sendEncodings||[{rid:"h",active:!0,maxBitrate:wt.high},{rid:"m",active:!0,maxBitrate:wt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:wt.low,scaleResolutionDownBy:4}]})}q.pc.createAnswer(ye).then(function(gt){m.debug(gt);var Ht={type:gt.type,sdp:gt.sdp};De.customizeSdp(Ht),gt.sdp=Ht.sdp,m.log("Setting local description"),vt&&Ne&&!m.unifiedPlan&&"chrome"===m.webRTCAdapter.browserDetails.browser&&m.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"),q.mySdp={type:"answer",sdp:gt.sdp},q.pc.setLocalDescription(gt).catch(De.error),q.mediaConstraints=ye,q.iceDone||q.trickle?((q.senderTransforms||q.receiverTransforms)&&(gt.e2ee=!0),De.success(gt)):m.log("Waiting for all candidates...")},De.error)}(z,De,ge)},ge.error):function fB(z,oe,De){(De=De||{}).success="function"==typeof De.success?De.success:m.noop,De.error="function"==typeof De.error?De.error:m.noop,De.customizeSdp="function"==typeof De.customizeSdp?De.customizeSdp:m.noop;var ge=ht[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),void De.error("Invalid handle");var q=ge.webrtcStuff,Ne=!0===De.simulcast||!0===De.simulcast2;m.log(Ne?"Creating offer (iceDone="+q.iceDone+", simulcast="+Ne+")":"Creating offer (iceDone="+q.iceDone+")");var ye={};if(m.unifiedPlan){var Ge=null,Be=null,st=q.pc.getTransceivers();if(st&&st.length>0)for(var Ue of st)Ue.sender&&Ue.sender.track&&"audio"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"audio"===Ue.receiver.track.kind?Ge||(Ge=Ue):(Ue.sender&&Ue.sender.track&&"video"===Ue.sender.track.kind||Ue.receiver&&Ue.receiver.track&&"video"===Ue.receiver.track.kind)&&(Be||(Be=Ue));var ot=Er(oe),lt=wl(oe);ot||lt?ot&&lt?Ge&&(Ge.setDirection?Ge.setDirection("sendrecv"):Ge.direction="sendrecv",m.log("Setting audio transceiver to sendrecv:",Ge)):ot&&!lt?Ge&&(Ge.setDirection?Ge.setDirection("sendonly"):Ge.direction="sendonly",m.log("Setting audio transceiver to sendonly:",Ge)):!ot&&lt&&(Ge?(Ge.setDirection?Ge.setDirection("recvonly"):Ge.direction="recvonly",m.log("Setting audio transceiver to recvonly:",Ge)):(Ge=q.pc.addTransceiver("audio",{direction:"recvonly"}),m.log("Adding recvonly audio transceiver:",Ge))):oe.removeAudio&&Ge&&(Ge.setDirection?Ge.setDirection("inactive"):Ge.direction="inactive",m.log("Setting audio transceiver to inactive:",Ge));var Tn=Jr(oe),jt=Al(oe);Tn||jt?Tn&&jt?Be&&(Be.setDirection?Be.setDirection("sendrecv"):Be.direction="sendrecv",m.log("Setting video transceiver to sendrecv:",Be)):Tn&&!jt?Be&&(Be.setDirection?Be.setDirection("sendonly"):Be.direction="sendonly",m.log("Setting video transceiver to sendonly:",Be)):!Tn&&jt&&(Be?(Be.setDirection?Be.setDirection("recvonly"):Be.direction="recvonly",m.log("Setting video transceiver to recvonly:",Be)):(Be=q.pc.addTransceiver("video",{direction:"recvonly"}),m.log("Adding recvonly video transceiver:",Be))):oe.removeVideo&&Be&&(Be.setDirection?Be.setDirection("inactive"):Be.direction="inactive",m.log("Setting video transceiver to inactive:",Be))}else ye.offerToReceiveAudio=wl(oe),ye.offerToReceiveVideo=Al(oe);!0===De.iceRestart&&(ye.iceRestart=!0),m.debug(ye);var xn=Jr(oe);if(xn&&Ne&&"firefox"===m.webRTCAdapter.browserDetails.browser){m.log("Enabling Simulcasting for Firefox (RID)");var ct=q.pc.getSenders().find(function(Ht){return Ht.track&&"video"===Ht.track.kind});if(ct){var wt=ct.getParameters();wt||(wt={});var gt=Ve(De.simulcastMaxBitrates);wt.encodings=De.sendEncodings||[{rid:"h",active:!0,maxBitrate:gt.high},{rid:"m",active:!0,maxBitrate:gt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:gt.low,scaleResolutionDownBy:4}],ct.setParameters(wt)}}q.pc.createOffer(ye).then(function(Ht){m.debug(Ht);var tn={type:Ht.type,sdp:Ht.sdp};De.customizeSdp(tn),Ht.sdp=tn.sdp,m.log("Setting local description"),xn&&Ne&&!m.unifiedPlan&&("chrome"===m.webRTCAdapter.browserDetails.browser||"safari"===m.webRTCAdapter.browserDetails.browser)&&(m.log("Enabling Simulcasting for Chrome (SDP munging)"),Ht.sdp=function mB(z){var oe=z.split("\r\n"),De=!1,ge=[-1],q=[-1],Ne=null,ye=null,Ge=null,Be=null,st=-1;for(let vt=0;vt<oe.length;vt++){const xn=oe[vt].match(/m=(\w+) */);if(xn){if("video"===xn[1]){if(!(ge[0]<0)){st=vt;break}De=!0}else if(ge[0]>-1){st=vt;break}}else if(De){var Ue=oe[vt].match(/a=ssrc-group:SIM (\d+) (\d+) (\d+)/);if(Ue)return m.warn("The SDP already contains a SIM attribute, munging will be skipped"),z;var ot=oe[vt].match(/a=ssrc-group:FID (\d+) (\d+)/);if(ot){ge[0]=ot[1],q[0]=ot[2],oe.splice(vt,1),vt--;continue}if(ge[0]){var lt=oe[vt].match("a=ssrc:"+ge[0]+" cname:(.+)");if(lt&&(Ne=lt[1]),lt=oe[vt].match("a=ssrc:"+ge[0]+" msid:(.+)"),lt&&(ye=lt[1]),lt=oe[vt].match("a=ssrc:"+ge[0]+" mslabel:(.+)"),lt&&(Ge=lt[1]),lt=oe[vt].match("a=ssrc:"+ge[0]+" label:(.+)"),lt&&(Be=lt[1]),0===oe[vt].indexOf("a=ssrc:"+q[0])){oe.splice(vt,1),vt--;continue}if(0===oe[vt].indexOf("a=ssrc:"+ge[0])){oe.splice(vt,1),vt--;continue}}if(0==oe[vt].length){oe.splice(vt,1),vt--;continue}}}if(ge[0]<0){st=-1,De=!1;for(let vt=0;vt<oe.length;vt++){const xn=oe[vt].match(/m=(\w+) */);if(xn){if("video"===xn[1]){if(!(ge[0]<0)){st=vt;break}De=!0}else if(ge[0]>-1){st=vt;break}}else if(De){if(ge[0]<0){var Tn=oe[vt].match(/a=ssrc:(\d+)/);if(Tn){ge[0]=Tn[1],oe.splice(vt,1),vt--;continue}}else{let ct=oe[vt].match("a=ssrc:"+ge[0]+" cname:(.+)");if(ct&&(Ne=ct[1]),ct=oe[vt].match("a=ssrc:"+ge[0]+" msid:(.+)"),ct&&(ye=ct[1]),ct=oe[vt].match("a=ssrc:"+ge[0]+" mslabel:(.+)"),ct&&(Ge=ct[1]),ct=oe[vt].match("a=ssrc:"+ge[0]+" label:(.+)"),ct&&(Be=ct[1]),0===oe[vt].indexOf("a=ssrc:"+q[0])){oe.splice(vt,1),vt--;continue}if(0===oe[vt].indexOf("a=ssrc:"+ge[0])){oe.splice(vt,1),vt--;continue}}if(0===oe[vt].length){oe.splice(vt,1),vt--;continue}}}}if(ge[0]<0)return m.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),z;st<0&&(st=oe.length),ge[1]=Math.floor(4294967295*Math.random()),ge[2]=Math.floor(4294967295*Math.random()),q[1]=Math.floor(4294967295*Math.random()),q[2]=Math.floor(4294967295*Math.random());for(var jt=0;jt<ge.length;jt++)Ne&&(oe.splice(st,0,"a=ssrc:"+ge[jt]+" cname:"+Ne),st++),ye&&(oe.splice(st,0,"a=ssrc:"+ge[jt]+" msid:"+ye),st++),Ge&&(oe.splice(st,0,"a=ssrc:"+ge[jt]+" mslabel:"+Ge),st++),Be&&(oe.splice(st,0,"a=ssrc:"+ge[jt]+" label:"+Be),st++),Ne&&(oe.splice(st,0,"a=ssrc:"+q[jt]+" cname:"+Ne),st++),ye&&(oe.splice(st,0,"a=ssrc:"+q[jt]+" msid:"+ye),st++),Ge&&(oe.splice(st,0,"a=ssrc:"+q[jt]+" mslabel:"+Ge),st++),Be&&(oe.splice(st,0,"a=ssrc:"+q[jt]+" label:"+Be),st++);return oe.splice(st,0,"a=ssrc-group:FID "+ge[2]+" "+q[2]),oe.splice(st,0,"a=ssrc-group:FID "+ge[1]+" "+q[1]),oe.splice(st,0,"a=ssrc-group:FID "+ge[0]+" "+q[0]),oe.splice(st,0,"a=ssrc-group:SIM "+ge[0]+" "+ge[1]+" "+ge[2]),(z=oe.join("\r\n")).endsWith("\r\n")||(z+="\r\n"),z}(Ht.sdp)),q.mySdp={type:"offer",sdp:Ht.sdp},q.pc.setLocalDescription(Ht).catch(De.error),q.mediaConstraints=ye,q.iceDone||q.trickle?((q.senderTransforms||q.receiverTransforms)&&(Ht.e2ee=!0),De.success(Ht)):m.log("Waiting for all candidates...")},De.error)}(z,De,ge)}function Pu(z,oe,De){(De=De||{}).success="function"==typeof De.success?De.success:m.noop,De.error="function"==typeof De.error?De.error:XS;var ge=De.jsep;if(oe&&ge)return m.error("Provided a JSEP to a createOffer"),void De.error("Provided a JSEP to a createOffer");if(!(oe||ge&&ge.type&&ge.sdp))return m.error("A valid JSEP is required for createAnswer"),void De.error("A valid JSEP is required for createAnswer");De.media="object"==typeof De.media&&De.media?De.media:{audio:!0,video:!0};var q=De.media,Ne=ht[z];if(!Ne||!Ne.webrtcStuff)return m.warn("Invalid handle"),void De.error("Invalid handle");var ye=Ne.webrtcStuff;if(ye.trickle=function CB(z){return m.debug("isTrickleEnabled:",z),!1!==z}(De.trickle),ye.pc){if(m.log("Updating existing media session"),q.update=!0,De.stream)De.stream!==ye.myStream&&m.log("Renegotiation involves a new external stream");else{if(q.addAudio){if(q.keepAudio=!1,q.replaceAudio=!1,q.removeAudio=!1,q.audioSend=!0,ye.myStream&&ye.myStream.getAudioTracks()&&ye.myStream.getAudioTracks().length)return m.error("Can't add audio stream, there already is one"),void De.error("Can't add audio stream, there already is one")}else q.removeAudio?(q.keepAudio=!1,q.replaceAudio=!1,q.addAudio=!1,q.audioSend=!1):q.replaceAudio&&(q.keepAudio=!1,q.addAudio=!1,q.removeAudio=!1,q.audioSend=!0);if(ye.myStream&&ye.myStream.getAudioTracks()&&0!==ye.myStream.getAudioTracks().length?Er(q)&&!q.removeAudio&&!q.replaceAudio&&(q.keepAudio=!0):(q.replaceAudio&&(q.keepAudio=!1,q.replaceAudio=!1,q.addAudio=!0,q.audioSend=!0),Er(q)&&(q.keepAudio=!1,q.addAudio=!0)),q.addVideo){if(q.keepVideo=!1,q.replaceVideo=!1,q.removeVideo=!1,q.videoSend=!0,ye.myStream&&ye.myStream.getVideoTracks()&&ye.myStream.getVideoTracks().length)return m.error("Can't add video stream, there already is one"),void De.error("Can't add video stream, there already is one")}else q.removeVideo?(q.keepVideo=!1,q.replaceVideo=!1,q.addVideo=!1,q.videoSend=!1):q.replaceVideo&&(q.keepVideo=!1,q.addVideo=!1,q.removeVideo=!1,q.videoSend=!0);ye.myStream&&ye.myStream.getVideoTracks()&&0!==ye.myStream.getVideoTracks().length?Jr(q)&&!q.removeVideo&&!q.replaceVideo&&(q.keepVideo=!0):(q.replaceVideo&&(q.keepVideo=!1,q.replaceVideo=!1,q.addVideo=!0,q.videoSend=!0),Jr(q)&&(q.keepVideo=!1,q.addVideo=!0)),q.addData&&(q.data=!0)}if(Er(q)&&q.keepAudio&&Jr(q)&&q.keepVideo)return Ne.consentDialog(!1),void ys(z,ge,q,De,ye.myStream)}else q.update=!1,q.keepAudio=!1,q.keepVideo=!1;if(q.update&&(!ye.streamExternal||ye.streamExternal&&(q.replaceAudio||q.replaceVideo))){if(q.removeAudio||q.replaceAudio){if(ye.myStream&&ye.myStream.getAudioTracks()&&ye.myStream.getAudioTracks().length){var Ge=ye.myStream.getAudioTracks()[0];m.log("Removing audio track:",Ge),ye.myStream.removeTrack(Ge);try{Ne.onlocaltrack(Ge,!1)}catch(un){m.error(un)}try{Ge.stop()}catch(un){}}if(ye.pc.getSenders()&&ye.pc.getSenders().length){var Be=!0;if(q.replaceAudio&&m.unifiedPlan&&(Be=!1),Be)for(var st of ye.pc.getSenders())st&&st.track&&"audio"===st.track.kind&&(m.log("Removing audio sender:",st),ye.pc.removeTrack(st))}}if(q.removeVideo||q.replaceVideo){if(ye.myStream&&ye.myStream.getVideoTracks()&&ye.myStream.getVideoTracks().length){var Ue=ye.myStream.getVideoTracks()[0];m.log("Removing video track:",Ue),ye.myStream.removeTrack(Ue);try{Ne.onlocaltrack(Ue,!1)}catch(un){m.error(un)}try{Ue.stop()}catch(un){}}if(ye.pc.getSenders()&&ye.pc.getSenders().length){var ot=!0;if(q.replaceVideo&&m.unifiedPlan&&(ot=!1),ot)for(var lt of ye.pc.getSenders())lt&&lt.track&&"video"===lt.track.kind&&(m.log("Removing video sender:",lt),ye.pc.removeTrack(lt))}}}if(De.stream){var Tn=De.stream;return m.log("MediaStream provided by the application"),m.debug(Tn),q.update&&ye.myStream&&ye.myStream!==De.stream&&!ye.streamExternal&&!q.replaceAudio&&!q.replaceVideo&&(m.stopAllTracks(ye.myStream),ye.myStream=null),ye.streamExternal=!0,Ne.consentDialog(!1),void ys(z,ge,q,De,Tn)}if(Er(q)||Jr(q)){if(!m.isGetUserMediaAvailable())return void De.error("getUserMedia not available");var jt={mandatory:{},optional:[]};Ne.consentDialog(!0);var vt=Er(q);vt&&q&&"object"==typeof q.audio&&(vt=q.audio);var xn=Jr(q);if(xn&&q)if((!0===De.simulcast||!0===De.simulcast2||De.svc)&&!ge&&!q.video&&(q.video="hires"),q.video&&"screen"!=q.video&&"window"!=q.video)if("object"==typeof q.video)xn=q.video;else{var gt=0,Ht=0;"lowres"===q.video?(Ht=240,gt=320):"lowres-16:9"===q.video?(Ht=180,gt=320):"hires"===q.video||"hires-16:9"===q.video||"hdres"===q.video?(Ht=720,gt=1280):"fhdres"===q.video?(Ht=1080,gt=1920):"4kres"===q.video?(Ht=2160,gt=3840):"stdres"===q.video?(Ht=480,gt=640):"stdres-16:9"===q.video?(Ht=360,gt=640):(m.log("Default video setting is stdres 4:3"),Ht=480,gt=640),m.log("Adding media constraint:",q.video),m.log("Adding video constraint:",xn={height:{ideal:Ht},width:{ideal:gt}})}else if("screen"===q.video||"window"===q.video){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return jt.video={},q.screenshareFrameRate&&(jt.video.frameRate=q.screenshareFrameRate),q.screenshareHeight&&(jt.video.height=q.screenshareHeight),q.screenshareWidth&&(jt.video.width=q.screenshareWidth),jt.audio=q.captureDesktopAudio,void navigator.mediaDevices.getDisplayMedia(jt).then(function(kn){Ne.consentDialog(!1),Er(q)&&!q.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(On){kn.addTrack(On.getAudioTracks()[0]),ys(z,ge,q,De,kn)}):ys(z,ge,q,De,kn)},function(kn){Ne.consentDialog(!1),De.error(kn)});const un=function(kn,On){Ne.consentDialog(!1),kn?De.error(kn):ys(z,ge,q,De,On)},Zo=function(kn,On,qs){m.log("Adding media constraint (screen capture)"),m.debug(kn),navigator.mediaDevices.getUserMedia(kn).then(function(pi){qs?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(Ru){pi.addTrack(Ru.getAudioTracks()[0]),On(null,pi)}):On(null,pi)}).catch(function(pi){Ne.consentDialog(!1),On(pi)})};if("chrome"===m.webRTCAdapter.browserDetails.browser){var tn=m.webRTCAdapter.browserDetails.version,fi=33;window.navigator.userAgent.match("Linux")&&(fi=35),tn>=26&&tn<=fi?(jt={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:q.screenshareFrameRate,maxFrameRate:q.screenshareFrameRate,chromeMediaSource:"screen"}},audio:Er(q)&&!q.keepAudio},Zo(jt,un)):m.extension.getScreen(function(kn,On){if(kn)return Ne.consentDialog(!1),De.error(kn);(jt={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:q.screenshareFrameRate,maxFrameRate:q.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=On,Zo(jt,un,Er(q)&&!q.keepAudio)})}else if("firefox"===m.webRTCAdapter.browserDetails.browser){if(!(m.webRTCAdapter.browserDetails.version>=33)){var bs=new Error("NavigatorUserMediaError");return bs.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",Ne.consentDialog(!1),void De.error(bs)}jt={video:{mozMediaSource:q.video,mediaSource:q.video},audio:Er(q)&&!q.keepAudio},Zo(jt,function(kn,On){if(un(kn,On),!kn)var qs=On.currentTime,pi=window.setInterval(function(){On||window.clearInterval(pi),On.currentTime==qs&&(window.clearInterval(pi),On.onended&&On.onended()),qs=On.currentTime},500)})}return}(!q||"screen"!==q.video)&&navigator.mediaDevices.enumerateDevices().then(function(un){var Zo=un.some(function(Yi){return"audioinput"===Yi.kind}),kn=function vB(z){if(m.debug("isScreenSendEnabled:",z),!z||"object"!=typeof z.video||"object"!=typeof z.video.mandatory)return!1;var oe=z.video.mandatory;return oe.chromeMediaSource?"desktop"===oe.chromeMediaSource||"screen"===oe.chromeMediaSource:oe.mozMediaSource?"window"===oe.mozMediaSource||"screen"===oe.mozMediaSource:!!oe.mediaSource&&("window"===oe.mediaSource||"screen"===oe.mediaSource)}(q)||un.some(function(Yi){return"videoinput"===Yi.kind}),On=Er(q),qs=Jr(q),pi=function _B(z){return m.debug("isAudioSendRequired:",z),!(!z||!1===z.audio||!1===z.audioSend||null==z.failIfNoAudio)&&!0===z.failIfNoAudio}(q),Ru=function yB(z){return m.debug("isVideoSendRequired:",z),!(!z||!1===z.video||!1===z.videoSend||null==z.failIfNoVideo)&&!0===z.failIfNoVideo}(q);if(On||qs||pi||Ru){var KS=!!On&&Zo,YS=!!qs&&kn;if(!KS&&!YS)return Ne.consentDialog(!1),De.error("No capture device found"),!1;if(!KS&&pi)return Ne.consentDialog(!1),De.error("Audio capture is required, but no capture device found"),!1;if(!YS&&Ru)return Ne.consentDialog(!1),De.error("Video capture is required, but no capture device found"),!1}var ku={audio:!(!Zo||q.keepAudio)&&vt,video:!(!kn||q.keepVideo)&&xn};m.debug("getUserMedia constraints",ku),ku.audio||ku.video?navigator.mediaDevices.getUserMedia(ku).then(function(Yi){Ne.consentDialog(!1),ys(z,ge,q,De,Yi)}).catch(function(Yi){Ne.consentDialog(!1),De.error({code:Yi.code,name:Yi.name,message:Yi.message})}):(Ne.consentDialog(!1),ys(z,ge,q,De,Tn))}).catch(function(un){Ne.consentDialog(!1),De.error(un)})}else ys(z,ge,q,De)}function WS(z,oe){(oe=oe||{}).success="function"==typeof oe.success?oe.success:m.noop,oe.error="function"==typeof oe.error?oe.error:XS,oe.customizeSdp="function"==typeof oe.customizeSdp?oe.customizeSdp:m.noop;var De=oe.jsep,ge=ht[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),void oe.error("Invalid handle");var q=ge.webrtcStuff;if(De){if(!q.pc)return m.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void oe.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");oe.customizeSdp(De),q.pc.setRemoteDescription(De).then(function(){if(m.log("Remote description accepted!"),q.remoteSdp=De.sdp,q.candidates&&q.candidates.length>0){for(var Ne=0;Ne<q.candidates.length;Ne++){var ye=q.candidates[Ne];m.debug("Adding remote candidate:",ye),q.pc.addIceCandidate(ye&&!0!==ye.completed?ye:m.endOfCandidates)}q.candidates=[]}oe.success()},oe.error)}else oe.error("Invalid JSEP")}function Qo(z,oe,De,ge){ge="function"==typeof ge?ge:m.noop;var q=ht[z];if(!q||!q.webrtcStuff)return m.warn("Invalid handle"),void ge(0);var Ne=De?"remote":"local",ye=q.webrtcStuff;if(ye.volume[Ne]||(ye.volume[Ne]={value:0}),!ye.pc.getStats||"chrome"!==m.webRTCAdapter.browserDetails.browser&&"safari"!==m.webRTCAdapter.browserDetails.browser)return m.warn("Getting the "+Ne+" volume unsupported by browser"),void ge(0);if(De&&!ye.remoteStream)return m.warn("Remote stream unavailable"),void ge(0);if(!De&&!ye.myStream)return m.warn("Local stream unavailable"),void ge(0);var Ge=ye.pc;if(oe&&m.unifiedPlan){var Be=ye.pc.getTransceivers().find(st=>st.mid===oe&&"audio"===st.receiver.track.kind);if(!Be)return m.warn("No audio transceiver with mid "+oe),void ge(0);if(De&&!Be.receiver)return m.warn("Remote transceiver track unavailable"),void ge(0);if(!De&&!Be.sender)return m.warn("Local transceiver track unavailable"),void ge(0);Ge=De?Be.receiver:Be.sender}return Ge.getStats().then(function(st){st.forEach(function(Ue){!Ue||"audio"!==Ue.kind||De&&!Ue.remoteSource||!De&&"media-source"!==Ue.type||ge(Ue.audioLevel?Ue.audioLevel:0)})}),ye.volume[Ne].value}function Iu(z,oe,De){var ge=ht[z];if(!ge||!ge.webrtcStuff)return m.warn("Invalid handle"),!0;var q=ge.webrtcStuff;if(!q.pc)return m.warn("Invalid PeerConnection"),!0;if(!q.myStream)return m.warn("Invalid local MediaStream"),!0;if(De){if(!q.myStream.getVideoTracks()||0===q.myStream.getVideoTracks().length)return m.warn("No video track"),!0;if(oe&&m.unifiedPlan){let Ne=q.pc.getTransceivers().find(ye=>ye.mid===oe&&"video"===ye.receiver.track.kind);return Ne?Ne.sender&&Ne.sender.track?!Ne.sender.track.enabled:(m.warn("No video sender with mid "+oe),!0):(m.warn("No video transceiver with mid "+oe),!0)}return!q.myStream.getVideoTracks()[0].enabled}if(!q.myStream.getAudioTracks()||0===q.myStream.getAudioTracks().length)return m.warn("No audio track"),!0;if(oe&&m.unifiedPlan){let Ne=q.pc.getTransceivers().find(ye=>ye.mid===oe&&"audio"===ye.receiver.track.kind);return Ne?Ne.sender&&Ne.sender.track?!Ne.sender.track.enabled:(m.warn("No audio sender with mid "+oe),!0):(m.warn("No audio transceiver with mid "+oe),!0)}return!q.myStream.getAudioTracks()[0].enabled}function vs(z,oe,De,ge){var q=ht[z];if(!q||!q.webrtcStuff)return m.warn("Invalid handle"),!1;var Ne=q.webrtcStuff;if(!Ne.pc)return m.warn("Invalid PeerConnection"),!1;if(!Ne.myStream)return m.warn("Invalid local MediaStream"),!1;if(De){if(!Ne.myStream.getVideoTracks()||0===Ne.myStream.getVideoTracks().length)return m.warn("No video track"),!1;if(oe&&m.unifiedPlan){let ye=Ne.pc.getTransceivers().find(Ge=>Ge.mid===oe&&"video"===Ge.receiver.track.kind);if(!ye)return m.warn("No video transceiver with mid "+oe),!1;if(!ye.sender||!ye.sender.track)return m.warn("No video sender with mid "+oe),!1;ye.sender.track.enabled=!ge}else Ne.myStream.getVideoTracks()[0].enabled=!ge}else{if(!Ne.myStream.getAudioTracks()||0===Ne.myStream.getAudioTracks().length)return m.warn("No audio track"),!1;if(oe&&m.unifiedPlan){let ye=Ne.pc.getTransceivers().find(Ge=>Ge.mid===oe&&"audio"===Ge.receiver.track.kind);if(!ye)return m.warn("No audio transceiver with mid "+oe),!1;if(!ye.sender||!ye.sender.track)return m.warn("No audio sender with mid "+oe),!1;ye.sender.track.enabled=!ge}else Ne.myStream.getAudioTracks()[0].enabled=!ge}return!0}function qS(z,oe){var De=ht[z];if(!De||!De.webrtcStuff)return m.warn("Invalid handle"),"Invalid handle";var ge=De.webrtcStuff;if(!ge.pc)return"Invalid PeerConnection";if(ge.pc.getStats){var q=ge.pc,Ne=oe||"default";if(oe&&m.unifiedPlan){var ye=ge.pc.getTransceivers().find(Ge=>Ge.mid===oe&&"video"===Ge.receiver.track.kind);if(!ye)return m.warn("No video transceiver with mid "+oe),"No video transceiver with mid "+oe;if(!ye.receiver)return m.warn("No video receiver with mid "+oe),"No video receiver with mid "+oe;q=ye.receiver}return ge.bitrate[Ne]||(ge.bitrate[Ne]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),ge.bitrate[Ne].timer?ge.bitrate[Ne].value:(m.log("Starting bitrate timer"+(oe?" for mid "+oe:"")+" (via getStats)"),ge.bitrate[Ne].timer=setInterval(function(){q.getStats().then(function(Ge){Ge.forEach(function(Be){if(Be){var st=!1;if((("video"===Be.mediaType||Be.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===Be.type&&Be.id.indexOf("rtcp")<0||"ssrc"==Be.type&&Be.bytesReceived&&("VP8"===Be.googCodecName||""===Be.googCodecName))&&(st=!0),st)if(ge.bitrate[Ne].bsnow=Be.bytesReceived,ge.bitrate[Ne].tsnow=Be.timestamp,null===ge.bitrate[Ne].bsbefore||null===ge.bitrate[Ne].tsbefore)ge.bitrate[Ne].bsbefore=ge.bitrate[Ne].bsnow,ge.bitrate[Ne].tsbefore=ge.bitrate[Ne].tsnow;else{var Ue=ge.bitrate[Ne].tsnow-ge.bitrate[Ne].tsbefore;"safari"===m.webRTCAdapter.browserDetails.browser&&(Ue/=1e3);var ot=Math.round(8*(ge.bitrate[Ne].bsnow-ge.bitrate[Ne].bsbefore)/Ue);"safari"===m.webRTCAdapter.browserDetails.browser&&(ot=parseInt(ot/1e3)),ge.bitrate[Ne].value=ot+" kbits/sec",ge.bitrate[Ne].bsbefore=ge.bitrate[Ne].bsnow,ge.bitrate[Ne].tsbefore=ge.bitrate[Ne].tsnow}}})})},1e3),"0 kbits/sec")}return m.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function XS(z){m.error("WebRTC error:",z)}function $p(z,oe){m.log("Cleaning WebRTC stuff");var De=ht[z];if(De){var ge=De.webrtcStuff;if(ge){if(!0===oe){var q={janus:"hangup",transaction:m.randomString(12)};De.token&&(q.token=De.token),Fe&&(q.apisecret=Fe),m.debug("Sending hangup request (handle="+z+"):"),m.debug(q),e?(q.session_id=rt,q.handle_id=z,t.send(JSON.stringify(q))):m.httpAPICall(a+"/"+rt+"/"+z,{verb:"POST",withCredentials:j,body:q})}for(var Ne in ge.remoteStream=null,ge.volume&&(ge.volume.local&&ge.volume.local.timer&&clearInterval(ge.volume.local.timer),ge.volume.remote&&ge.volume.remote.timer&&clearInterval(ge.volume.remote.timer)),ge.bitrate)ge.bitrate[Ne].timer&&clearInterval(ge.bitrate[Ne].timer);ge.bitrate={},!ge.streamExternal&&ge.myStream&&(m.log("Stopping local stream tracks"),m.stopAllTracks(ge.myStream)),ge.streamExternal=!1,ge.myStream=null;try{ge.pc.close()}catch(ye){}ge.pc=null,ge.candidates=null,ge.mySdp=null,ge.remoteSdp=null,ge.iceDone=!1,ge.dataChannel={},ge.dtmfSender=null,ge.senderTransforms=null,ge.receiverTransforms=null}De.oncleanup()}}function Er(z){return m.debug("isAudioSendEnabled:",z),!z||!1!==z.audio&&(null==z.audioSend||!0===z.audioSend)}function wl(z){return m.debug("isAudioRecvEnabled:",z),!z||!1!==z.audio&&(null==z.audioRecv||!0===z.audioRecv)}function Jr(z){return m.debug("isVideoSendEnabled:",z),!z||!1!==z.video&&(null==z.videoSend||!0===z.videoSend)}function Al(z){return m.debug("isVideoRecvEnabled:",z),!z||!1!==z.video&&(null==z.videoRecv||!0===z.videoRecv)}_s(n),this.getServer=function(){return a},this.isConnected=function(){return nt},this.reconnect=function(z){(z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop,z.reconnect=!0,_s(z)},this.getSessionId=function(){return rt},this.getInfo=function(z){!function Cl(z){if((z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop,m.log("Getting info on Janus instance"),!nt)return m.warn("Is the server down? (connected=false)"),void z.error("Is the server down? (connected=false)");var oe=m.randomString(12),De={janus:"info",transaction:oe};if(be&&(De.token=be),Fe&&(De.apisecret=Fe),e)return Dn[oe]=function(ge){m.log("Server info:"),m.debug(ge),"server_info"!==ge.janus&&m.error("Ooops: "+ge.error.code+" "+ge.error.reason),z.success(ge)},void t.send(JSON.stringify(De));m.httpAPICall(a,{verb:"POST",withCredentials:j,body:De,success:function(ge){m.log("Server info:"),m.debug(ge),"server_info"!==ge.janus&&m.error("Ooops: "+ge.error.code+" "+ge.error.reason),z.success(ge)},error:function(ge,q){m.error(ge+":",q),z.error(""===q?ge+": Is the server down?":ge+": "+q)}})}(z)},this.destroy=function(z){!function Sl(z){(z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop;var oe=!0===z.unload,De=!0;null!=z.notifyDestroyed&&(De=!0===z.notifyDestroyed);var ge=!0===z.cleanupHandles;if(m.log("Destroying session "+rt+" (unload="+oe+")"),!rt)return m.warn("No session to destroy"),z.success(),void(De&&n.destroyed());if(ge)for(var q in ht)Up(q,{noRequest:!0});if(!nt)return m.warn("Is the server down? (connected=false)"),rt=null,void z.success();var Ne={janus:"destroy",transaction:m.randomString(12)};if(be&&(Ne.token=be),Fe&&(Ne.apisecret=Fe),oe)return e?(t.onclose=null,t.close(),t=null):navigator.sendBeacon(a+"/"+rt,JSON.stringify(Ne)),m.log("Destroyed session:"),rt=null,nt=!1,z.success(),void(De&&n.destroyed());if(e){Ne.session_id=rt;var ye=function(){for(var st in r)t.removeEventListener(st,r[st]);t.removeEventListener("message",Ge),t.removeEventListener("error",Be),i&&clearTimeout(i),t.close()},Ge=function(st){var Ue=JSON.parse(st.data);Ue.session_id==Ne.session_id&&Ue.transaction==Ne.transaction&&(ye(),z.success(),De&&n.destroyed())},Be=function(){ye(),z.error("Failed to destroy the server: Is the server down?"),De&&n.destroyed()};return t.addEventListener("message",Ge),t.addEventListener("error",Be),void(1===t.readyState?t.send(JSON.stringify(Ne)):Be())}m.httpAPICall(a+"/"+rt,{verb:"POST",withCredentials:j,body:Ne,success:function(st){m.log("Destroyed session:"),m.debug(st),rt=null,nt=!1,"success"!==st.janus&&m.error("Ooops: "+st.error.code+" "+st.error.reason),z.success(),De&&n.destroyed()},error:function(st,Ue){m.error(st+":",Ue),rt=null,nt=!1,z.success(),De&&n.destroyed()}})}(z)},this.attach=function(z){!function El(z){if((z=z||{}).success="function"==typeof z.success?z.success:m.noop,z.error="function"==typeof z.error?z.error:m.noop,z.dataChannelOptions=z.dataChannelOptions||{ordered:!0},z.consentDialog="function"==typeof z.consentDialog?z.consentDialog:m.noop,z.iceState="function"==typeof z.iceState?z.iceState:m.noop,z.mediaState="function"==typeof z.mediaState?z.mediaState:m.noop,z.webrtcState="function"==typeof z.webrtcState?z.webrtcState:m.noop,z.slowLink="function"==typeof z.slowLink?z.slowLink:m.noop,z.onmessage="function"==typeof z.onmessage?z.onmessage:m.noop,z.onlocaltrack="function"==typeof z.onlocaltrack?z.onlocaltrack:m.noop,z.onremotetrack="function"==typeof z.onremotetrack?z.onremotetrack:m.noop,z.ondata="function"==typeof z.ondata?z.ondata:m.noop,z.ondataopen="function"==typeof z.ondataopen?z.ondataopen:m.noop,z.oncleanup="function"==typeof z.oncleanup?z.oncleanup:m.noop,z.ondetached="function"==typeof z.ondetached?z.ondetached:m.noop,!nt)return m.warn("Is the server down? (connected=false)"),void z.error("Is the server down? (connected=false)");var oe=z.plugin;if(!oe)return m.error("Invalid plugin"),void z.error("Invalid plugin");var De=z.opaqueId,ge=z.loopIndex,q=z.token?z.token:be,Ne=m.randomString(12),ye={janus:"attach",plugin:oe,opaque_id:De,loop_index:ge,transaction:Ne};if(q&&(ye.token=q),Fe&&(ye.apisecret=Fe),e)return Dn[Ne]=function(Ge){if(m.debug(Ge),"success"!==Ge.janus)return m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),void z.error("Ooops: "+Ge.error.code+" "+Ge.error.reason);var Be=Ge.data.id;m.log("Created handle: "+Be);var st={session:An,plugin:oe,id:Be,token:q,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:z.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return Be},getPlugin:function(){return oe},getVolume:function(Ue,ot){return Qo(Be,Ue,!0,ot)},getRemoteVolume:function(Ue,ot){return Qo(Be,Ue,!0,ot)},getLocalVolume:function(Ue,ot){return Qo(Be,Ue,!1,ot)},isAudioMuted:function(Ue){return Iu(Be,Ue,!1)},muteAudio:function(Ue){return vs(Be,Ue,!1,!0)},unmuteAudio:function(Ue){return vs(Be,Ue,!1,!1)},isVideoMuted:function(Ue){return Iu(Be,Ue,!0)},muteVideo:function(Ue){return vs(Be,Ue,!0,!0)},unmuteVideo:function(Ue){return vs(Be,Ue,!0,!1)},getBitrate:function(Ue){return qS(Be,Ue)},send:function(Ue){Jo(Be,Ue)},data:function(Ue){GS(Be,Ue)},dtmf:function(Ue){zS(Be,Ue)},consentDialog:z.consentDialog,iceState:z.iceState,mediaState:z.mediaState,webrtcState:z.webrtcState,slowLink:z.slowLink,onmessage:z.onmessage,createOffer:function(Ue){Pu(Be,!0,Ue)},createAnswer:function(Ue){Pu(Be,!1,Ue)},handleRemoteJsep:function(Ue){WS(Be,Ue)},onlocaltrack:z.onlocaltrack,onremotetrack:z.onremotetrack,ondata:z.ondata,ondataopen:z.ondataopen,oncleanup:z.oncleanup,ondetached:z.ondetached,hangup:function(Ue){$p(Be,!0===Ue)},detach:function(Ue){Up(Be,Ue)}};ht[Be]=st,z.success(st)},ye.session_id=rt,void t.send(JSON.stringify(ye));m.httpAPICall(a+"/"+rt,{verb:"POST",withCredentials:j,body:ye,success:function(Ge){if(m.debug(Ge),"success"!==Ge.janus)return m.error("Ooops: "+Ge.error.code+" "+Ge.error.reason),void z.error("Ooops: "+Ge.error.code+" "+Ge.error.reason);var Be=Ge.data.id;m.log("Created handle: "+Be);var st={session:An,plugin:oe,id:Be,token:q,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:z.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return Be},getPlugin:function(){return oe},getVolume:function(Ue,ot){return Qo(Be,Ue,!0,ot)},getRemoteVolume:function(Ue,ot){return Qo(Be,Ue,!0,ot)},getLocalVolume:function(Ue,ot){return Qo(Be,Ue,!1,ot)},isAudioMuted:function(Ue){return Iu(Be,Ue,!1)},muteAudio:function(Ue){return vs(Be,Ue,!1,!0)},unmuteAudio:function(Ue){return vs(Be,Ue,!1,!1)},isVideoMuted:function(Ue){return Iu(Be,Ue,!0)},muteVideo:function(Ue){return vs(Be,Ue,!0,!0)},unmuteVideo:function(Ue){return vs(Be,Ue,!0,!1)},getBitrate:function(Ue){return qS(Be,Ue)},send:function(Ue){Jo(Be,Ue)},data:function(Ue){GS(Be,Ue)},dtmf:function(Ue){zS(Be,Ue)},consentDialog:z.consentDialog,iceState:z.iceState,mediaState:z.mediaState,webrtcState:z.webrtcState,slowLink:z.slowLink,onmessage:z.onmessage,createOffer:function(Ue){Pu(Be,!0,Ue)},createAnswer:function(Ue){Pu(Be,!1,Ue)},handleRemoteJsep:function(Ue){WS(Be,Ue)},onlocaltrack:z.onlocaltrack,onremotetrack:z.onremotetrack,ondata:z.ondata,ondataopen:z.ondataopen,oncleanup:z.oncleanup,ondetached:z.ondetached,hangup:function(Ue){$p(Be,!0===Ue)},detach:function(Ue){Up(Be,Ue)}};ht[Be]=st,z.success(st)},error:function(Ge,Be){m.error(Ge+":",Be),z.error(""===Be?Ge+": Is the server down?":Ge+": "+Be)}})}(z)}}m.useDefaultDependencies=function(n){var e=n&&n.fetch||fetch,t=n&&n.Promise||Promise,r=n&&n.WebSocket||WebSocket;return{newWebSocket:function(i,s){return new r(i,s)},extension:n&&n.extension||ZC,isArray:function(i){return Array.isArray(i)},webRTCAdapter:n&&n.adapter||QC,httpAPICall:function(i,s){var o={method:s.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===s.verb&&(o.headers["Content-Type"]="application/json"),void 0!==s.withCredentials&&(o.credentials=!0===s.withCredentials?"include":s.withCredentials?s.withCredentials:"omit"),s.body&&(o.body=JSON.stringify(s.body));var a=e(i,o).catch(function(c){return t.reject({message:"Probably a network error, is the server down?",error:c})});if(s.timeout){var l=new t(function(c,f){var C=setTimeout(function(){return clearTimeout(C),f({message:"Request timed out",timeout:s.timeout})},s.timeout)});a=t.race([a,l])}return a.then(function(c){return c.ok?typeof s.success==typeof m.noop?c.json().then(function(f){try{s.success(f)}catch(C){m.error("Unhandled httpAPICall success callback error",C)}},function(f){return t.reject({message:"Failed to parse response body",error:f,response:c})}):void 0:t.reject({message:"API call failed",response:c})}).catch(function(c){typeof s.error==typeof m.noop&&s.error(c.message||"<< internal error >>",c)}),a}}},m.useOldDependencies=function(n){var e=n&&n.jQuery||jQuery,t=n&&n.WebSocket||WebSocket;return{newWebSocket:function(r,i){return new t(r,i)},isArray:function(r){return e.isArray(r)},extension:n&&n.extension||ZC,webRTCAdapter:n&&n.adapter||QC,httpAPICall:function(r,i){var s=void 0!==i.body?{contentType:"application/json",data:JSON.stringify(i.body)}:{};return e.ajax(e.extend(s,void 0!==i.withCredentials?{xhrFields:{withCredentials:i.withCredentials}}:{},{url:r,type:i.verb,cache:!1,dataType:"json",async:i.async,timeout:i.timeout,success:function(a){typeof i.success==typeof m.noop&&i.success(a)},error:function(a,l,c){typeof i.error==typeof m.noop&&i.error(l,c)}}))}}},m.noop=function(){},m.dataChanDefaultLabel="JanusDataChannel",m.endOfCandidates=null,m.stopAllTracks=function(n){try{var e=n.getTracks();for(var t of e)m.log(t),t&&t.stop()}catch(r){}},m.init=function(n){if((n=n||{}).callback="function"==typeof n.callback?n.callback:m.noop,m.initDone)n.callback();else{if(void 0===console.log&&(console.log=function(){}),m.trace=m.noop,m.debug=m.noop,m.vdebug=m.noop,m.log=m.noop,m.warn=m.noop,m.error=m.noop,!0===n.debug||"all"===n.debug)m.trace=console.trace.bind(console),m.debug=console.debug.bind(console),m.vdebug=console.debug.bind(console),m.log=console.log.bind(console),m.warn=console.warn.bind(console),m.error=console.error.bind(console);else if(Array.isArray(n.debug))for(var e of n.debug)switch(e){case"trace":m.trace=console.trace.bind(console);break;case"debug":m.debug=console.debug.bind(console);break;case"vdebug":m.vdebug=console.debug.bind(console);break;case"log":m.log=console.log.bind(console);break;case"warn":m.warn=console.warn.bind(console);break;case"error":m.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+e+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}m.log("Initializing library");var t=n.dependencies||m.useDefaultDependencies();m.isArray=t.isArray,m.webRTCAdapter=t.webRTCAdapter,m.httpAPICall=t.httpAPICall,m.newWebSocket=t.newWebSocket,(m.extension=t.extension).init(),m.listDevices=function(c,f){c="function"==typeof c?c:m.noop,null==f&&(f={audio:!0,video:!0}),m.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(f).then(function(C){navigator.mediaDevices.enumerateDevices().then(function(j){m.debug(j),c(j),m.stopAllTracks(C)})}).catch(function(C){m.error(C),c([])}):(m.warn("navigator.mediaDevices unavailable"),c([]))},m.attachMediaStream=function(c,f){try{c.srcObject=f}catch(C){try{c.src=URL.createObjectURL(f)}catch(j){m.error("Error attaching stream to element")}}},m.reattachMediaStream=function(c,f){try{c.srcObject=f.srcObject}catch(C){try{c.src=f.src}catch(j){m.error("Error reattaching stream to element")}}};var i=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",s=window["on"+i];if(window.addEventListener(i,function(){for(var c in m.log("Closing window"),m.sessions)m.sessions[c]&&m.sessions[c].destroyOnUnload&&(m.log("Destroying session "+c),m.sessions[c].destroy({unload:!0,notifyDestroyed:!1}));s&&"function"==typeof s&&s()}),m.safariVp8=!1,"safari"===m.webRTCAdapter.browserDetails.browser&&m.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var o of RTCRtpSender.getCapabilities("video").codecs)if(o&&o.mimeType&&"video/vp8"===o.mimeType.toLowerCase()){m.safariVp8=!0;break}m.safariVp8?m.log("This version of Safari supports VP8"):m.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var a=new RTCPeerConnection({});a.createOffer({offerToReceiveVideo:!0}).then(function(c){(m.safariVp8=-1!==c.sdp.indexOf("VP8"))?m.log("This version of Safari supports VP8"):m.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),a.close(),a=null})}if(m.unifiedPlan=!1,"firefox"===m.webRTCAdapter.browserDetails.browser&&m.webRTCAdapter.browserDetails.version>=59)m.unifiedPlan=!0;else if("chrome"===m.webRTCAdapter.browserDetails.browser&&m.webRTCAdapter.browserDetails.version>=72)m.unifiedPlan=!0;else if(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype){var l=new RTCPeerConnection;try{l.addTransceiver("audio"),m.unifiedPlan=!0}catch(c){}l.close()}else m.unifiedPlan=!1;m.initDone=!0,n.callback()}},m.isWebrtcSupported=function(){return!!window.RTCPeerConnection},m.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},m.randomString=function(n){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",r=0;r<n;r++){var i=Math.floor(Math.random()*e.length);t+=e.substring(i,i+1)}return t};var iN=X(164);let Tp,gl=(()=>{class n{constructor(t){this.ngZone=t,this.serverUrl=("localhost"===window.location.hostname?"http://":"https://")+window.location.hostname+("localhost"===window.location.hostname?":8088":":8099")+"/janus",this.subscriberJanusHandle=null,this.screensharingIsActive=!1,this.myScreenshareIsActive=!1,this.feedStreams={},this.localTracks={},this.isMuted=!1,this.isVideoMuted=!1,this.isCurrentlyCreatingASubscription=!1,this.subscriptions={},this.feeds={},this.remoteTracks={},this.simulcastStarted={},this.mids={},this.slots={},this.subStreams={},this.audioDevices={},this.videoDevices={},this.currentlyChosenOverrideAudioDeviceId="",this.currentlyChosenOverrideVideoDeviceId="",this.talkingFeeds={},this.talkingFeedsSubject=new E,this.screenshareStateSubject=new E,this.doSimulcast=!1,this.subscriberMode=!1,this.locallyMutedRemoteAudioFeeds={},this.initDeviceList=r=>{this.audioDevices={},this.videoDevices={};for(const i of r){let s=i.label;(!s||""===s)&&(s=i.deviceId),console.log("Device found: ",s,i),"audioinput"===i.kind?(this.audioDevices[i.deviceId]=s,console.log("audio devices",this.audioDevices)):"videoinput"===i.kind&&(this.videoDevices[i.deviceId]=s)}},this.opaqueId="course-"+m.randomString(12),this.myUsername=m.randomString(12),window.janusService=this}setUsername(t){t&&""!==t&&(this.myUsername=t,console.log("(JanusService) Set username to ",this.myUsername))}start(){this.isCurrentlyCreatingASubscription=!1,this.subscriptions={},this.feeds={},this.remoteTracks={},this.simulcastStarted={},this.mids={},this.slots={},this.subStreams={},this.subscriberJanusHandle=null,this.publisherJanusHandle=null,this.screenshareJanusHandle=null,this.janus=null,m.init({debug:"all",callback:()=>{console.log("Does browser support webrtc?"),m.isWebrtcSupported()?(console.log("WebRTC is supported."),this.createSession()):console.error("No WebRTC support...")}})}end(){this.unpublishOwnFeed();for(const[t,r]of Object.entries(this.feedStreams))this.unsubscribeFrom(t);this.publisherJanusHandle.hangup(),this.screenshareJanusHandle&&this.screenshareJanusHandle.hangup(),this.subscriberJanusHandle&&this.subscriberJanusHandle.hangup(),this.janus.destroy()}createSession(){this.janus=new m({server:this.serverUrl,success:()=>{console.log("Janus handle created!"),this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:t=>{this.publisherJanusHandle=t,m.log("Plugin attached!"+this.publisherJanusHandle.getPlugin()+", id="+this.publisherJanusHandle.getId()+")"),this.registerUsernameToJoinAsPublisher(),m.listDevices(this.initDeviceList)},iceState:t=>{console.log("ICE state changed to "+t)},webrtcState:t=>{m.log("Janus says our WebRTC PeerConnection is "+(t?"up":"down")+" now")},onmessage:(t,r)=>{m.debug("::: Got a message (publisher) :::");const i=t.videoroom;if(i&&("joined"===i?this.messageHandle_OnJoinedEvent(t):"destroyed"===i?this.messageHandle_OnDestroyedEvent(t):"event"===i&&this.messageHandle_OnGeneralEvent(t)),r){m.debug("Handling SDP as well...",r),this.publisherJanusHandle.handleRemoteJsep({jsep:r});const s=t.audio_codec;this.myStream&&this.myStream.getAudioStracks()&&this.myStream.getAudioTracks().length>0&&!s&&m.warn("Our audio stream has been rejected, viewers won't hear us.");const o=t.video_codec;this.myStream&&this.myStream.getVideoTracks()&&this.myStream.getVideoTracks().length>0&&!o&&m.warn("Our video stream has been rejected, viewers won't see us.")}},error:t=>{m.error(t)},destroyed:()=>{m.log("Janus destroyed")},onlocaltrack:(t,r)=>{m.debug("Got a local track event"),m.debug("Local track "+(r?"added":"removed")+":",t);var i=t.id.replace(/[{}]/g,"");if(r){var l=this.localTracks[i];if(!l)if("audio"===t.kind){for(const[c,f]of Object.entries(this.audioDevices))if(f==t.label)return void(this.currentlyChosenOverrideAudioDeviceId=c)}else{const c=new MediaStream;c.addTrack(t.clone()),this.localTracks[i]={stream:c,feedId:i,userName:this.myUsername+" (You)",isMyStream:!0},m.log("Created local stream:",l),m.log(c.getTracks()),m.log(c.getVideoTracks());for(const[f,C]of Object.entries(this.videoDevices))if(C==t.label)return void(this.currentlyChosenOverrideVideoDeviceId=f)}}else{const c=this.localTracks[i];if(c)try{var s=c.stream.getTracks();for(var o in s){var a=s[o];a&&a.stop()}}catch(f){}delete this.localTracks[i]}},onremotetrack:(t,r,i)=>{},oncleanup:()=>{m.log(" ::: Got a cleanup notification: we are unpublished now :::"),this.myStream=null,this.myId&&delete this.feedStreams[this.myId]}})},error:t=>{m.error(t)},destroyed:()=>{console.log("Janus instance destroyed.")}})}registerUsernameToJoinAsPublisher(){this.publisherJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"publisher",display:this.myUsername}})}publishOwnFeed(t,r,i){const s={};r&&(s.audio||(s.audio={}),s.audio={deviceId:{exact:r}},s.replaceAudio=!0),i&&(s.video||(s.video={}),s.video={deviceId:{exact:i}},s.replaceVideo=!0),this.publisherJanusHandle.createOffer({media:Object.assign(Object.assign({},s),{audioRecv:!1,videoRecv:!1,audioSend:t,videoSend:!0,data:!0}),simulcast:this.doSimulcast,success:o=>{m.debug("Got a publisher SDP!",o),this.publisherJanusHandle.send({message:{request:"configure",audio:t,video:!0},jsep:o})},error:o=>{m.error("WebRTC error: ",o),t&&this.publishOwnFeed(!1)}})}toggleMute(){this.isMuted=this.publisherJanusHandle.isAudioMuted(),m.log((this.isMuted?"Unmuting":"Muting")+" local stream..."),this.isMuted?this.publisherJanusHandle.unmuteAudio():this.publisherJanusHandle.muteAudio(),this.isMuted=this.publisherJanusHandle.isAudioMuted()}toggleCamera(){this.isVideoMuted=this.publisherJanusHandle.isVideoMuted(),m.log((this.isMuted?"Unmuting":"Muting")+" local video stream..."),this.isVideoMuted?this.publisherJanusHandle.unmuteVideo():this.publisherJanusHandle.muteVideo(),this.isVideoMuted=this.publisherJanusHandle.isVideoMuted()}selectAudioDevice(t){this.currentlyChosenOverrideAudioDeviceId=t,this.publishOwnFeed(!0,t)}selectVideoDevice(t){this.currentlyChosenOverrideVideoDeviceId=t,this.publishOwnFeed(!0,void 0,t)}unpublishOwnFeed(){this.publisherJanusHandle.send({message:{request:"unpublish"}})}messageHandle_OnJoinedEvent(t){this.myId=t.id,this.myPrivateId=t.private_id,m.log("Successfully joined room "+t.room+" with ID "+this.myId+" and private ID "+this.myPrivateId),this.subscriberMode||this.publishOwnFeed(!0),t.publishers&&this.handlePublisherEvent(t)}messageHandle_OnDestroyedEvent(t){m.warn("The room has been destroyed.")}messageHandle_OnGeneralEvent(t){if(t.streams){const r=t.streams;for(const i in r){const s=r[i];s.id=this.myId,s.display=this.myUsername}if(!this.myId)return;this.feedStreams[this.myId]={id:this.myId,display:this.myUsername,streams:r}}else if(t.publishers)m.debug("Got a list of available pubs: ",t.publishers),this.handlePublisherEvent(t);else if(t.leaving){const r=t.leaving;m.log("A publisher left: "+r,t),this.unsubscribeFrom(r)}else if(t.unpublished){const r=t.unpublished;m.log("Publisher left: "+r,t),this.unsubscribeFrom(r)}else t.error&&m.log("Some kind of error occurred.",t.error)}handlePublisherEvent(t){const r=t.publishers;let i;m.debug("Got a list of available publishers: ",r);for(const s in r){if(r[s].dummy)continue;const o=r[s].id,a=r[s].display,l=r[s].streams;for(const c in l){const f=l[c];f.id=o,f.display=a}this.feedStreams[o]={id:o,display:a,streams:l},m.debug("Stream "+o+" display: "+a+" streams: ",l),i||(i=[]),o!==this.screenshareId&&o!==this.myId&&i.push(l)}i&&this.subscribeTo(i)}subscribeTo(t){if(this.isCurrentlyCreatingASubscription)setTimeout(()=>{this.subscribeTo(t)},500);else if(this.subscriberJanusHandle){const r=this.subscriber_HandleSubscription(t);r.length>0&&this.subscriberJanusHandle.send({message:{request:"subscribe",streams:r}})}else this.isCurrentlyCreatingASubscription=!0,this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:r=>{this.subscriberJanusHandle=r,this.remoteTracks={},m.log("Plugin attached! ("+this.subscriberJanusHandle.getPlugin()+", id="+this.subscriberJanusHandle.getId()+")"),m.log("  -- This is a multistream subscriber");const i=this.subscriber_HandleSubscription(t);this.subscriberJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"subscriber",streams:i,private_id:this.myPrivateId}})},error:r=>{m.error("Error attaching plugin...",r)},iceState:r=>{m.log("ICE state (remote feed) changed to "+r)},webrtcState:r=>{m.log("Janus says this WebRTC PeerConnection (remote feed) is "+(r?"up":"down")+" now")},slowLink:(r,i,s)=>{m.warn("Janus reports problems "+(r?"sending":"receiving")+" packets on mid "+s+" ("+i+" lost packets)")},onmessage:(r,i)=>{m.debug("Got a message (subscriber)",r);const s=r.videoroom;if(m.debug("Event: ",s),r.error?m.warn("Subscriber error: ",r.error):s&&("attached"===s?(this.isCurrentlyCreatingASubscription=!1,m.log("Successfully attached to feed in room "+r.room)):"event"===s&&this.subscriber_HandleGeneralEvent(r)),r.streams&&this.subscriber_HandleStreamsEvent(r),i){m.debug("Handling SDP as well...",i);const o=this.myRoomId,a=this.subscriberJanusHandle;this.subscriberJanusHandle.createAnswer({jsep:i,media:{audioSend:!1,videoSend:!1,data:!0},success:function(l){m.debug("Got SDP!"),m.debug(l),a.send({message:{request:"start",room:o},jsep:l})},error:function(l){m.error("WebRTC error:",l)}})}},onlocaltrack:(r,i)=>{},onremotetrack:(r,i,s)=>{const o=this.subStreams[i],a=this.feedStreams[o.feed_id];m.debug("This track is coming from feed "+o.feed_id+":",a);let l=this.slots[i];if(a&&!l&&(l=a.slot,this.slots[i]=a.slot,this.mids[a.slot]=i),m.debug("mid "+i+" is in slot "+l),!s){const c=this.remoteTracks[i];if(c)try{const f=c.stream.getTracks();for(const C in f){const j=f[C];j&&j.stop()}}catch(f){}return"video"===r.kind&&a&&a.remoteVideos--,this.ngZone.run(()=>{delete this.remoteTracks[i]}),void delete this.mids[this.slots]}if(a.spinner&&(a.spinner.stop(),a.spinner=null),"audio"===r.kind){const c=new MediaStream;c.addTrack(r.clone()),this.ngZone.run(()=>{this.remoteTracks[i]={stream:c,feedId:a.id,userName:a.display}});const f=iN(c,{}),C=this;f.on("speaking",function(){C.ngZone.run(()=>{C.talkingFeeds[a.id]=!0,C.talkingFeedsSubject.next(C.talkingFeeds)}),console.log("speaking: ",a.id,C.talkingFeeds)}),f.on("stopped_speaking",function(){C.ngZone.run(()=>{C.talkingFeeds[a.id]=!1,C.talkingFeedsSubject.next(C.talkingFeeds)}),console.log("stopped_speaking: ",a.id)}),m.log("Created remote audio stream: ",c)}else{a.remoteVideos++;const c=new MediaStream;c.addTrack(r.clone());let f=!1;a.display.includes("_screen")&&(f=!0,this.screensharingIsActive=!0,this.screenshareStateSubject.next("start"),this.talkingFeedsSubject.next(this.talkingFeeds)),this.ngZone.run(()=>{this.remoteTracks[i]={stream:c,feedId:a.id,isScreenshare:f,userName:a.display.replace("_screen","'s Screen")}}),m.log("Created remote video stream: ",c,"for feed: ",a)}},ondataopen:(r,i)=>{m.log("The DataChannel is available! - "+r+" - "+i)},oncleanup:()=>{m.log("Got a cleanup notification (remote feed)")},ondata:r=>{this.dataCallback(r)}})}unsubscribeFrom(t){const r=this.feedStreams[t];r&&(m.debug("Feed "+t+" ("+r.display+") has left the room, detaching"),delete this.simulcastStarted[r.slot],delete this.feeds[r.slot],delete this.feedStreams[t],null!==this.subscriberJanusHandle&&this.subscriberJanusHandle.send({message:{request:"unsubscribe",streams:[{feed:t}]}}),delete this.subscriptions[t],r.display.includes("_screen")&&(this.screensharingIsActive=!1,this.screenshareStateSubject.next("stop"),this.talkingFeedsSubject.next(this.talkingFeeds)))}subscriber_HandleSubscription(t){var r;const i=[];for(const s in t){const o=t[s];for(const a in o){const l=o[a];if("video"!==l.type||"safari"!==m.webRTCAdapter.browserDetails.browser||"vp9"!==l.codec&&("vp8"!==l.codec||m.safariVp8))if(l.disabled)m.log("Disabled stream:",l);else if(this.subscriptions[l.id]&&this.subscriptions[l.id][l.mid])m.log("Already subscribed to stream, skipping:",l);else{if(!(null===(r=this.feedStreams[l.id])||void 0===r?void 0:r.slot)){let c;for(let f=1;f<6;f++)this.feeds[f]||(c=f,this.feeds[c]=l.id,this.feedStreams[l.id].slot=c,this.feedStreams[l.id].remoteVideos=0)}i.push({feed:l.id,mid:l.mid}),this.subscriptions[l.id]||(this.subscriptions[l.id]={}),this.subscriptions[l.id][l.mid]=!0}else m.warn("Publisher is using "+l.codec.toUpperCase+", but Safari doesn't support it: disabling video stream #"+l.mindex)}}return i}subscriber_HandleGeneralEvent(t){if(null!=t.substream||null!=t.temporal){const l=this.slots[t.mid];this.simulcastStarted[l]||(this.simulcastStarted[l]=!0)}}subscriber_HandleStreamsEvent(t){for(const r in t.streams){const i=t.streams[r].mid;this.subStreams[i]=t.streams[r];const s=this.feedStreams[t.streams[r].feed_id];s&&s.slot&&(this.slots[i]=s.slot,this.mids[s.slot]=i)}}startScreenshare(){var t=this;return Mi(function*(){if(t.screenshareJanusHandle){const r=yield navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.screenshareJanusHandle.createOffer({media:{audioRecv:!1,videoRecv:!1,audioSend:!1,videoSend:!0,video:"screen",screenshareFrameRate:25},stream:r,simulcast:t.doSimulcast,success:i=>{m.debug("Got a publisher SDP!",i),t.screenshareJanusHandle.send({message:{request:"configure",audio:!0,video:!0},jsep:i}),t.myScreenshareIsActive=!0},error:i=>{m.error("WebRTC error: ",i)}})}else t.attachScreenshareHandle()})()}stopScreenshare(){this.myScreenshareIsActive&&(this.screenshareJanusHandle.send({message:{request:"unpublish"}}),this.screenshareJanusHandle.hangup(),this.myScreenshareIsActive=!1)}attachScreenshareHandle(){this.janus.attach({plugin:"janus.plugin.videoroom",opaqueId:this.opaqueId,success:t=>{this.screenshareJanusHandle=t,m.log("Plugin attached!"+this.screenshareJanusHandle.getPlugin()+", id="+this.screenshareJanusHandle.getId()+")"),this.screenshareJanusHandle.send({message:{request:"join",room:this.myRoomId,ptype:"publisher",display:this.myUsername+"_screen"}})},iceState:t=>{console.log("ICE state changed to "+t)},webrtcState:t=>{m.log("Janus says our WebRTC PeerConnection is "+(t?"up":"down")+" now")},onmessage:(t,r)=>{m.debug("::: Got a message (publisher) :::");const i=t.videoroom;if(i&&("joined"===i?(this.screenshareId=t.id,this.privateScreenshareId=t.private_id,m.log("Successfully joined room "+t.room+" with ID "+this.screenshareId+" and private ID "+this.privateScreenshareId),this.startScreenshare()):"destroyed"===i?this.messageHandle_OnDestroyedEvent(t):"event"===i&&this.messageHandle_OnGeneralEvent(t)),r){m.debug("Handling SDP as well...",r),this.screenshareJanusHandle.handleRemoteJsep({jsep:r});const s=t.audio_codec;this.myScreenshareStream&&this.myScreenshareStream.getAudioStracks()&&this.myScreenshareStream.getAudioTracks().length>0&&!s&&m.warn("Our audio stream has been rejected, viewers won't hear us.");const o=t.video_codec;this.myScreenshareStream&&this.myScreenshareStream.getVideoTracks()&&this.myScreenshareStream.getVideoTracks().length>0&&!o&&m.warn("Our video stream has been rejected, viewers won't see us.")}},error:t=>{m.error(t)},destroyed:()=>{m.log("Janus destroyed")},onlocaltrack:(t,r)=>{m.debug("Got a local track event"),m.debug("Local track "+(r?"added":"removed")+":",t),t.addEventListener("ended",()=>{this.stopScreenshare()});var i=t.id.replace(/[{}]/g,"");if(r){var l=this.localTracks[i];if(!l&&"audio"!==t.kind){const c=new MediaStream;c.addTrack(t.clone()),this.localTracks[i]={stream:c,feedId:i,isScreenshare:!0,userName:"My Screenshare",isMyStream:!0},m.log("Created local stream:",l),m.log(c.getTracks()),m.log(c.getVideoTracks())}}else{const c=this.localTracks[i];if(c)try{var s=c.stream.getTracks();for(var o in s){var a=s[o];a&&a.stop()}}catch(f){}delete this.localTracks[i]}},onremotetrack:(t,r,i)=>{},oncleanup:()=>{m.log(" ::: Got a cleanup notification: we are unpublished now :::"),this.myScreenshareStream=null,this.screenshareId&&delete this.feedStreams[this.screenshareId]}})}toggleScreenshare(){if(this.myScreenshareIsActive)if(this.myScreenshareIsActive){for(const[r,i]of Object.entries(this.localTracks))if(i.isScreenshare){for(var t of i.stream.getTracks())t&&t.stop();delete this.localTracks[r]}this.stopScreenshare()}else console.error("Something went horribly wrong with screenshare!");else this.startScreenshare()}muteRemoteAudioLocallyForFeedId(t){let r=!0;this.locallyMutedRemoteAudioFeeds[t]&&(r=!1),this.locallyMutedRemoteAudioFeeds[t]=r}setOnData(t){this.dataCallback=t}sendData(t){this.publisherJanusHandle.data({data:t})}}return n.\u0275fac=function(t){return new(t||n)(ft(jn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({}),n})();try{Tp="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Tp=!1}let aN=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function c1(n){return n===r0}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Tp)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(ft(cf))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oS="cdk-high-contrast-black-on-white",aS="cdk-high-contrast-white-on-black",Pp="cdk-high-contrast-active";let wN=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Pp),t.remove(oS),t.remove(aS),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(Pp),t.add(oS)):2===r&&(t.add(Pp),t.add(aS))}}}return n.\u0275fac=function(t){return new(t||n)(ft(aN),ft(bn))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DN=new Et("mat-sanity-checks",{providedIn:"root",factory:function AN(){return!0}});let cS=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function uN(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(ft(wN),ft(DN,8),ft(bn))},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({imports:[[eS],eS]}),n})();function TN(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}class LN{}class gs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof gs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new gs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof gs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class NN{encodeKey(e){return fS(e)}encodeValue(e){return fS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const jN=/%(\d[a-f0-9])/gi,HN={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function fS(n){return encodeURIComponent(n).replace(jN,(e,t)=>{var r;return null!==(r=HN[t])&&void 0!==r?r:e})}function pS(n){return`${n}`}class ms{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new NN,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function BN(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ms({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(pS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class VN{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function gS(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function mS(n){return"undefined"!=typeof Blob&&n instanceof Blob}function _S(n){return"undefined"!=typeof FormData&&n instanceof FormData}class yl{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function UN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new gs),this.context||(this.context=new VN),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new ms,this.urlWithParams=t}serializeBody(){return null===this.body?null:gS(this.body)||mS(this.body)||_S(this.body)||function $N(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ms?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_S(this.body)?null:mS(this.body)?this.body.type||null:gS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ms?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,f=e.params||this.params;const C=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((j,J)=>j.set(J,e.setHeaders[J]),c)),e.setParams&&(f=Object.keys(e.setParams).reduce((j,J)=>j.set(J,e.setParams[J]),f)),new yl(r,i,o,{params:f,headers:c,context:C,reportProgress:l,responseType:s,withCredentials:a})}}var Kn=(()=>((Kn=Kn||{})[Kn.Sent=0]="Sent",Kn[Kn.UploadProgress=1]="UploadProgress",Kn[Kn.ResponseHeader=2]="ResponseHeader",Kn[Kn.DownloadProgress=3]="DownloadProgress",Kn[Kn.Response=4]="Response",Kn[Kn.User=5]="User",Kn))();class Rp extends class GN{constructor(e,t=200,r="OK"){this.headers=e.headers||new gs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Kn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Rp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function kp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let vS=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof yl)s=t;else{let l,c;l=i.headers instanceof gs?i.headers:new gs(i.headers),i.params&&(c=i.params instanceof ms?i.params:new ms({fromObject:i.params})),s=new yl(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=xt(s).pipe(zo(l=>this.handler.handle(l)));if(t instanceof yl||"events"===i.observe)return o;const a=o.pipe(Cr(l=>l instanceof Rp));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(W(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(W(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(W(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(W(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ms).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,kp(i,r))}post(t,r,i={}){return this.request("POST",t,kp(i,r))}put(t,r,i={}){return this.request("PUT",t,kp(i,r))}}return n.\u0275fac=function(t){return new(t||n)(ft(LN))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const WN=["*"];let wu;function vl(n){var e;return(null===(e=function qN(){if(void 0===wu&&(wu=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(wu=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return wu}())||void 0===e?void 0:e.createHTML(n))||n}function bS(n){return Error(`Unable to find icon with the name "${n}"`)}function CS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function SS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Gs{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Au=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Gs(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(Kt.HTML,i);if(!o)throw SS(i);const a=vl(o);return this._addSvgIconConfig(t,r,new Gs("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Gs(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(Kt.HTML,r);if(!s)throw SS(r);const o=vl(s);return this._addSvgIconSetConfig(t,new Gs("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Kt.RESOURCE_URL,t);if(!r)throw CS(t);const i=this._cachedIconsByUrl.get(r);return i?xt(Du(i)):this._loadSvgIconFromConfig(new Gs(t,null)).pipe(rr(s=>this._cachedIconsByUrl.set(r,s)),W(s=>Du(s)))}getNamedSvgIcon(t,r=""){const i=ES(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):Qa(bS(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?xt(Du(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(W(r=>Du(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?xt(i):function FN(...n){const e=Jp(n),{args:t,keys:r}=v0(n),i=new xe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let f=0;f<o;f++){let C=!1;Zt(t[f]).subscribe(k(s,j=>{C||(C=!0,c--),a[f]=j},()=>l--,void 0,()=>{(!l||!C)&&(c||s.next(r?b0(r,a):a),s.complete())}))}});return e?i.pipe(zf(e)):i}(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(zi(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Kt.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),xt(null)})))).pipe(W(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw bS(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(rr(r=>t.svgText=r),W(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?xt(null):this._fetchIcon(t).pipe(rr(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(vl("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(vl("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,o=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function XN(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(Kt.RESOURCE_URL,i);if(!a)throw CS(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(W(f=>vl(f)),D0(()=>this._inProgressUrlFetches.delete(a)),tg());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(ES(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return YN(s)?new Gs(s.url,null,s.options):new Gs(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(ft(vS,8),ft(Gf),ft(bn,8),ft(is))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Du(n){return n.cloneNode(!0)}function ES(n,e){return n+":"+e}function YN(n){return!(!n.url||!n.options)}const JN=TN(class{constructor(n){this._elementRef=n}}),QN=new Et("mat-icon-location",{providedIn:"root",factory:function ZN(){const n=uo(bn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),wS=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],e2=wS.map(n=>`[${n}]`).join(", "),t2=/^url\(['"]?#(.*?)['"]?\)$/;let Op=(()=>{class n extends JN{constructor(t,r,i,s,o){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=pe.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=function kN(n){return null!=n&&"false"!=`${n}`}(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(e2),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)wS.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(t2):null;if(c){let f=i.get(a);f||(f=[],i.set(a,f)),f.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(ra(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(at(kr),at(Au),io("aria-hidden"),at(QN),at(is))},n.\u0275cmp=Mn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(gc("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),yr("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[So],ngContentSelectors:WN,decls:1,vars:0,template:function(t,r){1&t&&(Oa(),Oo(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),AS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({imports:[[cS],cS]}),n})();const n2=["renderSpace"],r2=["conferenceView"],i2=["dish"];function s2(n,e){if(1&n){const t=wi();_t(0,"div",8)(1,"div",9),Jt("click",function(){return _r(t),Yt().changePage(-1)}),_t(2,"mat-icon"),$n(3,"arrow_left"),Dt()()()}}function o2(n,e){if(1&n){const t=wi();_t(0,"video",15),Jt("loadedmetadata",function(){return _r(t),Yt().$implicit.loadingFinished=!0}),Dt()}if(2&n){const t=Yt().$implicit;yr("animatedVideo",!t.firstRenderFinished)("loading",!t.loadingFinished)("screenshareNoCrop",t.isScreenshare),Pt("srcObject",t.stream)}}function a2(n,e){1&n&&(_t(0,"div",16)(1,"mat-icon"),$n(2,"videocam_off"),Dt()())}function l2(n,e){if(1&n){const t=wi();_t(0,"div",17)(1,"div",9),Jt("click",function(){_r(t);const i=Yt().$implicit;return i.isVideoMuted=!i.isVideoMuted}),_t(2,"mat-icon"),$n(3),Dt()(),_t(4,"div",9),Jt("click",function(){_r(t);const i=Yt().$implicit;return Yt().muteAudioForFeedId(i.feedId)}),_t(5,"mat-icon"),$n(6),Dt()()()}if(2&n){const t=Yt().$implicit,r=Yt();Mt(2),yr("tinyView",r.isTinyView)("red",t.isVideoMuted),Mt(1),Lo(t.isVideoMuted?"videocam_off":"videocam"),Mt(2),yr("tinyView",r.isTinyView)("red",!0===r.janusService.locallyMutedRemoteAudioFeeds[t.feedId]),Mt(1),Lo(!0===r.janusService.locallyMutedRemoteAudioFeeds[t.feedId]?"mic_off":"mic")}}function c2(n,e){if(1&n){const t=wi();_t(0,"div",10),Jt("mouseover",function(){const s=_r(t).$implicit;return Yt().mouseHoverFeedId=s.feedId})("mouseleave",function(){return _r(t),Yt().mouseHoverFeedId=""}),hn(1,o2,1,7,"video",11),hn(2,a2,3,0,"div",12),_t(3,"div",13),$n(4),Dt(),hn(5,l2,7,10,"div",14),Dt()}if(2&n){const t=e.$implicit,r=Yt();yr("isTalking",r.janusService.talkingFeeds[t.feedId])("screenshareNoCrop",t.isScreenshare)("animatedDiv",!t.firstRenderFinished),Mt(1),Pt("ngIf",!t.isVideoMuted),Mt(1),Pt("ngIf",t.isVideoMuted),Mt(1),yr("tinyViewUsernameContainer",r.isTinyView),Mt(1),La(" ",t.userName," "),Mt(1),Pt("ngIf",!t.isMyStream&&r.mouseHoverFeedId===t.feedId)}}function u2(n,e){if(1&n){const t=wi();_t(0,"div",8)(1,"div",9),Jt("click",function(){return _r(t),Yt().changePage(1)}),_t(2,"mat-icon"),$n(3,"arrow_right"),Dt()()()}}let Fp=(()=>{class n{constructor(t){this.janusService=t,this.pageinatedStreams=[],this._cameraStreams=[],this.skipAnimations=!1,this.allowNavigation=!0,this.isTinyView=!1,this.width=0,this.height=0,this.ratios=["4:3","16:9","1:1","1:2"],this.aspect=1,this.margin=5,this.cameras=15,this.ratio=this.calculateRatio(),this.maximumAmountOfCamsPerPage=6,this.currentPage=0,this.mouseHoverFeedId=""}set cameraStreams(t){let r=!1;t&&t.length!==this._cameraStreams.length&&(r=!0),this.skipAnimations&&(t=t.map(i=>Object.assign(Object.assign({},i),{firstRenderFinished:!0,loadingFinished:!0}))),this._cameraStreams=t,this.pageinatedStreams=this._cameraStreams.sort().slice(this.currentPage*this.maximumAmountOfCamsPerPage,this.currentPage*this.maximumAmountOfCamsPerPage+this.maximumAmountOfCamsPerPage),this.dish&&r&&(this.render(),this.resize())}ngOnInit(){}ngAfterViewInit(){this.render(),this.resize()}ngAfterContentChecked(){this.dish&&(this.render(),this.resize())}onResize(t){this.render(),this.resize()}changePage(t){this.pageinatedStreams.forEach(i=>i.firstRenderFinished=!0);const r=this.currentPage+t;r>=0&&r<=this._cameraStreams.length/this.maximumAmountOfCamsPerPage&&(this.currentPage=r,this.pageinatedStreams=this._cameraStreams.sort().slice(this.currentPage*this.maximumAmountOfCamsPerPage,this.currentPage*this.maximumAmountOfCamsPerPage+this.maximumAmountOfCamsPerPage))}calculateDimensions(){this.width=this.dish.nativeElement.offsetWidth-2*this.margin,this.height=this.dish.nativeElement.offsetHeight-2*this.margin}render(){}resize(){this.calculateDimensions();let t=0,r=0;for(;r<5e3;){if(!1===this.area(r)){t=r-1;break}r++}t-=2*this.margin,this.resizer(t)}resizer(t){for(var r=0;r<this.dish.nativeElement.children.length;r++){let i=this.dish.nativeElement.children[r];i.style.margin=this.margin+"px",i.style.width=t+"px",i.style.height=t*this.ratio+"px"}}calculateRatio(){const t=this.ratios[this.aspect].split(":");return Number.parseInt(t[1])/Number.parseInt(t[0])}area(t){let r=0,i=0,s=t*this.ratio+2*this.margin;for(;r<this.dish.nativeElement.children.length;)i+t>this.width&&(i=0,s=s+t*this.ratio+2*this.margin),i=i+t+2*this.margin,r++;return!(s>this.height||t>this.width)&&t}add(){this.cameras++,this.render(),this.resize()}delete(){this.cameras--,this.render(),this.resize()}getRatios(){return this.ratios}getCameras(){return this.cameras}setAspect(t){this.aspect=t,this.ratio=this.calculateRatio(),this.resize()}expand(){let t=this.conferenceView.nativeElement.querySelector(".Screen");if(t)this.conferenceView.nativeElement.removeChild(t);else{let r=document.createElement("div");r.classList.add("Screen"),this.conferenceView.nativeElement.prepend(r)}this.resize()}muteAudioForFeedId(t){this.janusService.muteRemoteAudioLocallyForFeedId(t)}}return n.\u0275fac=function(t){return new(t||n)(at(gl))},n.\u0275cmp=Mn({type:n,selectors:[["app-gallery-view"]],viewQuery:function(t,r){if(1&t&&(vr(n2,5),vr(r2,5),vr(i2,5)),2&t){let i;tr(i=nr())&&(r.renderSpace=i.first),tr(i=nr())&&(r.conferenceView=i.first),tr(i=nr())&&(r.dish=i.first)}},hostBindings:function(t,r){1&t&&Jt("resize",function(s){return r.onResize(s)},!1,bm)},inputs:{cameraStreams:"cameraStreams",skipAnimations:"skipAnimations",allowNavigation:"allowNavigation",isTinyView:"isTinyView"},decls:9,vars:3,consts:[[1,"renderSpace"],["renderSpace",""],[1,"conferenceView"],["conferenceView",""],["class","buttonContainer",4,"ngIf"],[1,"dish"],["dish",""],[3,"isTalking","screenshareNoCrop","animatedDiv","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"buttonContainer"],[1,"button",3,"click"],[3,"mouseover","mouseleave"],["autoplay","","playsinline","",3,"animatedVideo","loading","srcObject","screenshareNoCrop","loadedmetadata",4,"ngIf"],["class","videoUnavailable",4,"ngIf"],[1,"usernameContainer"],["class","controlButtons",4,"ngIf"],["autoplay","","playsinline","",3,"srcObject","loadedmetadata"],[1,"videoUnavailable"],[1,"controlButtons"]],template:function(t,r){1&t&&(_t(0,"div",0,1)(2,"div",2,3),hn(4,s2,4,0,"div",4),_t(5,"div",5,6),hn(7,c2,6,12,"div",7),Dt(),hn(8,u2,4,0,"div",4),Dt()()),2&t&&(Mt(4),Pt("ngIf",r.allowNavigation&&r._cameraStreams.length>r.maximumAmountOfCamsPerPage),Mt(3),Pt("ngForOf",r.pageinatedStreams),Mt(1),Pt("ngIf",r.allowNavigation&&r._cameraStreams.length>r.maximumAmountOfCamsPerPage))},directives:[ls,Op,zc],styles:['[_nghost-%COMP%]{display:flex;flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}mat-icon[_ngcontent-%COMP%]{font-size:5vw;width:5vw;height:5vw;margin:0;color:#fff}.tinyView[_ngcontent-%COMP%]{font-size:1.5vw!important;width:1.5vw!important;height:1.5vw!important}.button[_ngcontent-%COMP%]:hover{background-color:#555}.renderSpace[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.conferenceView[_ngcontent-%COMP%]{display:flex;flex:1;max-height:100%;max-width:100%}.dish[_ngcontent-%COMP%]{overflow:hidden;display:flex;align-content:center;flex-wrap:wrap;align-items:center;justify-content:center;vertical-align:middle;flex:1}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;vertical-align:middle;align-self:center;border-radius:10px;overflow:hidden;display:inline-block;box-shadow:var(--shadow-dark);border:2px solid transparent}.animatedDiv[_ngcontent-%COMP%]{animation:show .4s ease}.animatedVideo[_ngcontent-%COMP%]{transition:margin-top .4s ease-in-out}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .videoUnavailable[_ngcontent-%COMP%]{position:absolute;right:0;object-fit:cover;bottom:0;width:100%;height:100%;background:transparent;border-radius:10px;left:0;top:0;background-size:cover;overflow:hidden}.videoUnavailable[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#666}.isTalking[_ngcontent-%COMP%]{border-color:#7cfc00!important}.dish[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   video.loading[_ngcontent-%COMP%]{margin-top:100%}.usernameContainer[_ngcontent-%COMP%]{color:#aaa;font-size:1em;font-family:Arial,Helvetica,sans-serif;position:absolute;left:1%;bottom:1%;font-weight:100;display:block;background:rgba(0,0,0,.6);padding:.75em;border-radius:.75em}.tinyViewUsernameContainer[_ngcontent-%COMP%]{font-size:.45vw!important;background:rgba(0,0,0,.6);padding:.35em;border-radius:.45em}.controlButtons[_ngcontent-%COMP%]{position:absolute;left:1%;display:flex;flex-direction:column;top:50%;transform:translateY(-50%)}.dish[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{position:absolute;height:100%;background-size:100% 100%;width:100%;opacity:.3;font-weight:100;content:"";display:block}.screen[_ngcontent-%COMP%]{flex:2;background:#000;opacity:.8;border-radius:10px}@keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}.button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:5vw;width:100%;margin-left:.5em;margin-right:.5em}.red[_ngcontent-%COMP%]{color:red}.screenshareNoCrop[_ngcontent-%COMP%]{object-fit:contain!important;background:#252525}']}),n})();const d2=["*"];let DS=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["app-menubar"]],ngContentSelectors:d2,decls:1,vars:0,template:function(t,r){1&t&&(Oa(),Oo(0))},styles:["[_nghost-%COMP%]{background:#151515;display:grid;grid-auto-flow:column;grid-auto-columns:minmax(0,1fr);grid-column-gap:10%}[_nghost-%COMP%]     app-menubar-buttongroup:last-of-type{justify-content:flex-end!important}[_nghost-%COMP%]     app-menubar-buttongroup:first-of-type{justify-content:flex-start!important}"]}),n})();function h2(n,e){if(1&n){const t=wi();_t(0,"div",2),Jt("click",function(i){return _r(t),Yt().subButtonClickAction(i)}),_t(1,"mat-icon"),$n(2,"keyboard_arrow_up"),Dt()()}}let TS=(()=>{class n{constructor(){this.highlightToggleStateActive=!1,this.clicked=new er}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["app-menubar-button"]],inputs:{clickAction:"clickAction",subButtonClickAction:"subButtonClickAction",highlightToggleStateActive:"highlightToggleStateActive",matIconName:"matIconName",matIconNameHighlightedToggleState:"matIconNameHighlightedToggleState",caption:"caption",captionHighlightedToggleState:"captionHighlightedToggleState"},outputs:{clicked:"clicked"},decls:6,vars:5,consts:[[1,"button",3,"click"],["class","subbutton",3,"click",4,"ngIf"],[1,"subbutton",3,"click"]],template:function(t,r){1&t&&(_t(0,"div",0),Jt("click",function(s){return r.clicked.emit(),r.clickAction&&r.clickAction(s)}),hn(1,h2,3,0,"div",1),_t(2,"mat-icon"),$n(3),Dt(),_t(4,"p"),$n(5),Dt()()),2&t&&(Mt(1),Pt("ngIf",r.subButtonClickAction),Mt(1),yr("red",r.highlightToggleStateActive),Mt(1),Lo(r.highlightToggleStateActive?r.matIconNameHighlightedToggleState:r.matIconName),Mt(2),Lo(r.highlightToggleStateActive?r.captionHighlightedToggleState:r.caption))},directives:[ls,Op],styles:["[_nghost-%COMP%]{display:contents}.button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:6.5vw;width:100%;padding-top:.3em;padding-bottom:.3em}.red[_ngcontent-%COMP%]{color:red}.button[_ngcontent-%COMP%]:hover{background-color:#555}mat-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:min(2.25vw,2.5em);width:min(2.25vw,2.5em);height:min(2.25vw,2.5em);margin:0;color:#fff;text-align:center;pointer-events:none}.button[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-weight:700;font-size:min(.75vw,1em);margin:.25em;color:#fff;pointer-events:none}.subbutton[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:flex;align-items:center;justify-content:center;cursor:context-menu;border-radius:.5em}.subbutton[_ngcontent-%COMP%]:hover{background-color:#393939}.subbutton[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:min(2vw,3em);margin:0}"]}),n})();const f2=["actionCanvas"],p2=["slideCanvas"],g2=["volatileCanvas"],m2=["textLayer"],_2=["parent"],y2=["pdfActionBar"];function v2(n,e){if(1&n&&(_t(0,"div",15),fn(1,"div",16),_t(2,"div",17),fn(3,"app-gallery-view",18),Dt()()),2&n){const t=Yt();Mt(3),Pt("isTinyView",!0)("skipAnimations",!0)("allowNavigation",!0)("cameraStreams",t._cameraStreams)}}function b2(n,e){if(1&n){const t=wi();_t(0,"app-menubar",19,20),Jt("mouseover",function(){return _r(t),Yt().showHoverMenu=!0}),_t(2,"app-menubar-button",21),Jt("clicked",function(){return _r(t),Yt().pageBack()}),Dt(),_t(3,"app-menubar-button",22),Jt("clicked",function(){return _r(t),Yt().pageForward()}),Dt()()}}let xS=(()=>{class n{constructor(t){this.janusService=t,this.showHoverMenu=!1}set cameraStreams(t){var r;((null===(r=this._cameraStreams)||void 0===r?void 0:r.length)||-1)!==t.length&&(this._cameraStreams=t)}ngOnInit(){}ngAfterViewInit(){this.slideRenderSurface=new nN(this.slideCanvas.nativeElement),this.actionRenderSurface=new Dp(this.actionCanvas.nativeElement),this.volatileRenderSurface=new Dp(this.volatileCanvas.nativeElement),this.textLayerSurface=new rN(this.textLayer.nativeElement),this.repaint(),new ResizeObserver(this.resize.bind(this)).observe(this.parent.nativeElement)}getActionRenderSurface(){return this.actionRenderSurface}getSlideRenderSurface(){return this.slideRenderSurface}getTextLayerSurface(){return this.textLayerSurface}getVolatileRenderSurface(){return this.volatileRenderSurface}repaint(){this.resize()}resize(){var t;const r=1.3333333333333333;let i=this.parent.nativeElement.clientWidth,s=this.parent.nativeElement.clientHeight;i/s>r?i=s*r:s=i/r,0!==i&&0!==s&&(this.slideRenderSurface.setSize(i,s),this.actionRenderSurface.setSize(i,s),this.volatileRenderSurface.setSize(i,s),this.textLayerSurface.setSize(i,s),(null===(t=this.pdfActionBar)||void 0===t?void 0:t.nativeElement)&&(this.pdfActionBar.nativeElement.style.width=i+"px"))}pageBack(){const t=Us.getInstance().renderController.getPage().getPageNumber();this.modifyPage(t-1)}pageForward(){const t=Us.getInstance().renderController.getPage().getPageNumber();this.modifyPage(t+1)}modifyPage(t){const r=new fu(BigInt(0),t),i=qC.parseActionToBinary(r);this.janusService.sendData(i);const s=new mp(r.pageNumber);s.timestamp=0,Us.getInstance().addAction(s)}}return n.\u0275fac=function(t){return new(t||n)(at(gl))},n.\u0275cmp=Mn({type:n,selectors:[["app-document-view"]],viewQuery:function(t,r){if(1&t&&(vr(f2,5),vr(p2,5),vr(g2,5),vr(m2,5),vr(_2,5),vr(y2,5)),2&t){let i;tr(i=nr())&&(r.actionCanvas=i.first),tr(i=nr())&&(r.slideCanvas=i.first),tr(i=nr())&&(r.volatileCanvas=i.first),tr(i=nr())&&(r.textLayer=i.first),tr(i=nr())&&(r.parent=i.first),tr(i=nr())&&(r.pdfActionBar=i.first)}},inputs:{cameraStreams:"cameraStreams"},decls:15,vars:2,consts:[[1,"conferenceContainer"],["class","topBar",4,"ngIf"],[1,"documentContainer"],[1,"slide-view"],["parent",""],[1,"slide-canvas"],["slideCanvas",""],["scale","full",1,"action-canvas"],["actionCanvas",""],["scale","full",1,"volatile-canvas"],["volatileCanvas",""],[1,"text-layer",3,"mouseover","mouseleave"],["textLayer",""],[1,"menubarContainer"],[3,"mouseover",4,"ngIf"],[1,"topBar"],[1,"me"],[1,"attendants"],[3,"isTinyView","skipAnimations","allowNavigation","cameraStreams"],[3,"mouseover"],["pdfActionBar",""],["matIconName","arrow_back",3,"clicked"],["matIconName","arrow_forward",3,"clicked"]],template:function(t,r){1&t&&(_t(0,"div",0),hn(1,v2,4,4,"div",1),_t(2,"div",2)(3,"div",3,4),fn(5,"canvas",5,6)(7,"canvas",7,8)(9,"canvas",9,10),_t(11,"div",11,12),Jt("mouseover",function(){return r.showHoverMenu=!0})("mouseleave",function(){return r.showHoverMenu=!0}),Dt()()(),_t(13,"div",13),hn(14,b2,4,0,"app-menubar",14),Dt()()),2&t&&(Mt(1),Pt("ngIf",r._cameraStreams.length>1),Mt(13),Pt("ngIf",r.showHoverMenu))},directives:[ls,Fp,DS,TS],styles:["[_nghost-%COMP%]{flex:1;display:flex}.slide-view[_ngcontent-%COMP%]{flex:1;min-height:1px;padding:0;margin:0;overflow:hidden;position:relative;text-align:center;box-sizing:border-box;display:flex!important;align-items:center!important;justify-content:center!important;border:none}.slide-view[_ngcontent-%COMP%] > canvas[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);left:50%;border-radius:.2em;border:none}.slide-view[_ngcontent-%COMP%]   .slide-canvas[_ngcontent-%COMP%]{visibility:hidden;z-index:0}.slide-view[_ngcontent-%COMP%]   .action-canvas[_ngcontent-%COMP%]{z-index:1}.slide-view[_ngcontent-%COMP%]   .volatile-canvas[_ngcontent-%COMP%]{z-index:2}.text-layer[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;margin:0 auto;z-index:3}.text-layer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}.text-layer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}.text-layer[_ngcontent-%COMP%]   .highlight.begin[_ngcontent-%COMP%]{border-radius:4px 0 0 4px}.text-layer[_ngcontent-%COMP%]   .highlight.end[_ngcontent-%COMP%]{border-radius:0 4px 4px 0}.text-layer[_ngcontent-%COMP%]   .highlight.middle[_ngcontent-%COMP%]{border-radius:0}.text-layer[_ngcontent-%COMP%]   .highlight.selected[_ngcontent-%COMP%]{background-color:#006400}.text-layer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection{background:blue}.text-layer[_ngcontent-%COMP%]   .endOfContent[_ngcontent-%COMP%]{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}.text-layer[_ngcontent-%COMP%]   .endOfContent.active[_ngcontent-%COMP%]{top:0}.annotationLayer[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{position:absolute;z-index:4}.annotationLayer[_ngcontent-%COMP%]   .linkAnnotation[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%;cursor:pointer}.annotationLayer[_ngcontent-%COMP%]   .linkAnnotation[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background:#ff0}[_nghost-%COMP%]{display:flex;flex:1}.conferenceContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{display:flex;max-height:10vh;margin-bottom:.75em}.attendants[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;min-height:12vh}.attendantStreams[_ngcontent-%COMP%]{flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}mat-icon[_ngcontent-%COMP%]{color:#fff}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}.button[_ngcontent-%COMP%]:hover{background-color:#555}.attendantStreams[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;max-height:100%;max-width:95%}.documentContainer[_ngcontent-%COMP%]{flex:1;display:flex;position:relative;justify-content:center}.attendantStreamContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:100%;aspect-ratio:4/3;padding-right:1em}.attendantStreamContainer[_ngcontent-%COMP%]:first-of-type   [_ngcontent-%COMP%]:last-of-type{padding:0}video[_ngcontent-%COMP%]{background:transparent;border-radius:10px;overflow:hidden}.menubarContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.menubarContainer[_ngcontent-%COMP%] > app-menubar[_ngcontent-%COMP%]{z-index:10;margin-bottom:.33em;margin-top:.33em;border-radius:1em;min-width:10vw}"]}),n})(),C2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["app-settings"]],decls:1,vars:0,consts:[[1,"content"]],template:function(t,r){1&t&&fn(0,"div",0)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1}.content[_ngcontent-%COMP%]{flex:1}"]}),n})(),MS=(()=>{class n{constructor(){this.isOverlayVisible=!1,this.options=[]}trigger(t,r,i,s){t.stopPropagation();const o=t.target.getBoundingClientRect(),a=o.left;this.topPx=o.top+"px",this.leftPx=a+"px",this.isOverlayVisible=!0,this.options=r,this.callback=i,this.activeKey=s}hideAll(){this.options=[],this.callback=void 0,this.activeKey="",this.isOverlayVisible=!1}optionSelected(t){this.callback&&(this.callback(t),this.callback=void 0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const S2=["addListener","removeListener"],E2=["addEventListener","removeEventListener"],w2=["on","off"];function zs(n,e,t,r){if(p(t)&&(r=t,t=void 0),r)return zs(n,e,t).pipe(zf(r));const[i,s]=function T2(n){return p(n.addEventListener)&&p(n.removeEventListener)}(n)?E2.map(o=>a=>n[o](e,a,t)):function A2(n){return p(n.addListener)&&p(n.removeListener)}(n)?S2.map(PS(n,e)):function D2(n){return p(n.on)&&p(n.off)}(n)?w2.map(PS(n,e)):[];if(!i&&me(n))return Fn(o=>zs(o,e,t))(Zt(n));if(!i)throw new TypeError("Invalid event target");return new xe(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function PS(n,e){return t=>r=>n[t](e,r)}function bl(n){return D((e,t)=>{Zt(n).subscribe(k(t,()=>t.complete(),b)),!t.closed&&e.subscribe(t)})}function I2(n,e){1&n&&fn(0,"h2",10),2&n&&Pt("innerHTML",Yt().title.content,kd)}function R2(n,e){1&n&&_c(0)}function k2(n,e){if(1&n&&(_t(0,"h2"),hn(1,R2,1,0,"ng-container",11),Dt()),2&n){const t=Yt();Mt(1),Pt("ngTemplateOutlet",t.title.content)("ngTemplateOutletContext",t.context)}}function O2(n,e){if(1&n&&fn(0,"p",10),2&n){const t=Yt();yr("with-title",t.title),Pt("innerHTML",t.body.content,kd)}}function F2(n,e){1&n&&_c(0)}function L2(n,e){if(1&n&&(_t(0,"p"),hn(1,F2,1,0,"ng-container",11),Dt()),2&n){const t=Yt();yr("with-title",t.title),Mt(1),Pt("ngTemplateOutlet",t.body.content)("ngTemplateOutletContext",t.context)}}const N2=[[["",8,"icon"]],[["",8,"btn"]]],B2=[".icon",".btn"],OS="[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}",j2=["backdrop"],H2=["dialog"];function V2(n,e){if(1&n&&fn(0,"div",6),2&n){const t=Yt(),r=function J_(n){return function Zs(n,e){return n[e]}(function sw(){return kt.lFrame.contextLView}(),20+n)}(3);Pt("dialogDragEnabled",!0)("dialogDragTarget",r)("dragConstraint",t.config.dragConstraint)}}function U2(n,e){if(1&n){const t=wi();_t(0,"div",7),Jt("click",function(){return _r(t),Yt().closeDialog()}),ca(),_t(1,"svg",8),fn(2,"path",9),Dt()()}}function xu(n){return function $2(n){return null==n}(n)?"":function G2(n){return"string"==typeof n}(n)?n:`${n}px`}const Np=Symbol("Dialog Content Data");class Bp{}class jp extends Bp{constructor(e={}){super(),this.beforeCloseGuards=[],this.mutate(e)}close(e){this.canClose(e).pipe(Cr(Boolean)).subscribe({next:()=>this.onClose(e)})}beforeClose(e){this.beforeCloseGuards.push(e)}resetDrag(e){this.onReset(e)}canClose(e){return ju(...this.beforeCloseGuards.map(r=>r(e)).filter(r=>void 0!==r&&!0!==r).map(r=>"boolean"==typeof r?xt(r):Vn(r).pipe(Cr(i=>!i)))).pipe(Xf(!0),Os())}mutate(e){Object.assign(this,e)}asDialogRef(){return this}}let Ws=(()=>{class n{constructor(t){this.ref=t,this.title=this.ref.data[Np].title,this.body=this.ref.data[Np].body,this.context={$implicit:this.ref,data:this.ref.data}}}return n.\u0275fac=function(t){return new(t||n)(at(Bp))},n.\u0275cmp=Mn({type:n,selectors:[["ngneat-dialog-base"]],ngContentSelectors:B2,decls:12,vars:6,consts:[[1,"dialog"],[1,"dialog-header"],[1,"dialog-icon"],[3,"ngSwitch"],[3,"innerHTML",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"dialog-content",3,"ngSwitch"],[3,"with-title","innerHTML",4,"ngSwitchCase"],[3,"with-title",4,"ngSwitchCase"],[1,"dialog-footer"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(Oa(N2),_t(0,"div",0)(1,"div",1)(2,"span",2),Oo(3),Dt(),Ra(4,3),hn(5,I2,1,1,"h2",4),hn(6,k2,2,2,"h2",5),ka(),Dt(),_t(7,"div",6),hn(8,O2,1,3,"p",7),hn(9,L2,2,4,"p",8),Dt(),_t(10,"div",9),Oo(11,1),Dt()()),2&t&&(Mt(4),Pt("ngSwitch",null==r.title?null:r.title.type),Mt(1),Pt("ngSwitchCase","string"),Mt(1),Pt("ngSwitchCase","template"),Mt(1),Pt("ngSwitch",r.body.type),Mt(1),Pt("ngSwitchCase","string"),Mt(1),Pt("ngSwitchCase","template"))},directives:[Wc,Jb,e0],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex-grow:1}.dialog[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;flex-direction:column;justify-content:flex-start;overflow:hidden}.dialog-header[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;width:100%;margin:0;padding:18px 40px 10px 30px}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]    {display:flex}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon{width:24px;margin-right:10px}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-success{fill:#72c140}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-question{fill:#f0af41}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-error{fill:#e74c3c}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin:0}.dialog-content[_ngcontent-%COMP%]{width:100%;flex-grow:1;overflow:auto;position:relative;display:flex;flex-direction:column;padding:0 30px 30px}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.75;margin:5px 0}.dialog-content[_ngcontent-%COMP%]   .with-title[_ngcontent-%COMP%]{padding-left:35px}.dialog-footer[_ngcontent-%COMP%]    {display:flex;width:100%;justify-content:flex-end;padding:17px 30px 16px;border-top:1px solid #f1f2f5}.dialog-footer[_ngcontent-%COMP%]     .btn{margin-right:10px;padding:10px 18px;border:0;border-radius:4px;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]     .btn:focus{outline:none}.dialog-footer[_ngcontent-%COMP%]     .btn:last-child{margin-right:0}.dialog-footer[_ngcontent-%COMP%]     .btn-success{background-color:#4091f7;color:#fff}.dialog-footer[_ngcontent-%COMP%]     .btn-error{background-color:#e74c3c;color:#fff}.dialog-footer[_ngcontent-%COMP%]     .btn-cancel{background-color:#fff;border:2px solid #4091f7;color:#4091f7}"],changeDetection:0}),n})(),FS=(()=>{class n extends Ws{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Kl(n)))(r||n)}}(),n.\u0275cmp=Mn({type:n,selectors:[["ngneat-dialog-success"]],features:[So],decls:7,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 496 496",1,"icon","icon-success"],["d","M248,0C111.033,0,0,111.033,0,248s111.033,248,248,248s248-111.033,248-248C495.841,111.099,384.901,0.159,248,0z      M248,480C119.87,480,16,376.13,16,248S119.87,16,248,16s232,103.87,232,232C479.859,376.072,376.072,479.859,248,480z"],["d","M370.344,158.344L208,320.688l-82.344-82.344c-3.178-3.07-8.242-2.982-11.312,0.196c-2.994,3.1-2.994,8.015,0,11.116     l88,88c3.124,3.123,8.188,3.123,11.312,0l168-168c3.07-3.178,2.982-8.242-0.196-11.312     C378.359,155.35,373.444,155.35,370.344,158.344z"],[1,"btn","btn-success","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(_t(0,"ngneat-dialog-base"),ca(),_t(1,"svg",0)(2,"g"),fn(3,"path",1)(4,"path",2),Dt()(),jl(),_t(5,"button",3),Jt("click",function(){return r.ref.close()}),$n(6,"OK"),Dt()())},directives:[Ws],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}"],changeDetection:0}),n})(),LS=(()=>{class n extends Ws{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Kl(n)))(r||n)}}(),n.\u0275cmp=Mn({type:n,selectors:[["ngneat-dialog-confirm"]],features:[So],decls:10,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 512 512",1,"icon","icon-question"],["cx","256","cy","378.5","r","25"],["d","M256,0C114.516,0,0,114.497,0,256c0,141.484,114.497,256,256,256c141.484,0,256-114.497,256-256     C512,114.516,397.503,0,256,0z M256,472c-119.377,0-216-96.607-216-216c0-119.377,96.607-216,216-216     c119.377,0,216,96.607,216,216C472,375.377,375.393,472,256,472z"],["d","M256,128.5c-44.112,0-80,35.888-80,80c0,11.046,8.954,20,20,20s20-8.954,20-20c0-22.056,17.944-40,40-40     c22.056,0,40,17.944,40,40c0,22.056-17.944,40-40,40c-11.046,0-20,8.954-20,20v50c0,11.046,8.954,20,20,20     c11.046,0,20-8.954,20-20v-32.531c34.466-8.903,60-40.26,60-77.469C336,164.388,300.112,128.5,256,128.5z"],[1,"btn","btn-cancel","ngneat-dialog-secondary-btn",3,"click"],[1,"btn","btn-success","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(_t(0,"ngneat-dialog-base"),ca(),_t(1,"svg",0)(2,"g"),fn(3,"circle",1)(4,"path",2)(5,"path",3),Dt()(),jl(),_t(6,"button",4),Jt("click",function(){return r.ref.close(!1)}),$n(7,"Cancel"),Dt(),_t(8,"button",5),Jt("click",function(){return r.ref.close(!0)}),$n(9,"OK"),Dt()())},directives:[Ws],styles:[OS],changeDetection:0}),n})(),NS=(()=>{class n extends Ws{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Kl(n)))(r||n)}}(),n.\u0275cmp=Mn({type:n,selectors:[["ngneat-dialog-error"]],features:[So],decls:7,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 512 512",1,"icon","icon-error"],["d","M256,0C114.508,0,0,114.497,0,256c0,141.493,114.497,256,256,256c141.492,0,256-114.497,256-256    C512,114.507,397.503,0,256,0z M256,472c-119.384,0-216-96.607-216-216c0-119.385,96.607-216,216-216    c119.384,0,216,96.607,216,216C472,375.385,375.393,472,256,472z"],["d","M343.586,315.302L284.284,256l59.302-59.302c7.81-7.81,7.811-20.473,0.001-28.284c-7.812-7.811-20.475-7.81-28.284,0    L256,227.716l-59.303-59.302c-7.809-7.811-20.474-7.811-28.284,0c-7.81,7.811-7.81,20.474,0.001,28.284L227.716,256    l-59.302,59.302c-7.811,7.811-7.812,20.474-0.001,28.284c7.813,7.812,20.476,7.809,28.284,0L256,284.284l59.303,59.302    c7.808,7.81,20.473,7.811,28.284,0C351.398,335.775,351.397,323.112,343.586,315.302z"],[1,"btn","btn-error","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(_t(0,"ngneat-dialog-base"),ca(),_t(1,"svg",0)(2,"g"),fn(3,"path",1)(4,"path",2),Dt()(),jl(),_t(5,"button",3),Jt("click",function(){return r.ref.close()}),$n(6,"OK"),Dt()())},directives:[Ws],styles:[OS],changeDetection:0}),n})();const BS=new Et("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>uo(bn)}),jS=new Et("Global dialog config token"),Mu=new Et("Dialog config token",{providedIn:"root",factory:()=>({id:void 0,container:uo(BS).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{minHeight:"200px",width:"400px"},md:{minHeight:"280px",width:"560px"},lg:{minHeight:"350px",width:"800px"},fullScreen:{height:"100%",width:"100%"}},success:{component:FS},confirm:{component:LS},error:{component:NS},onClose:void 0,onOpen:void 0})}),HS=new Et("Nodes inserted into the dialog");let VS=(()=>{class n{constructor(t,r,i){this.host=t,this.zone=r,this.renderer=i,this.dialogDragEnabled=!1,this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new E}set dialogDragOffset(t){this.reset(t)}ngAfterViewInit(){!this.enabled||this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.renderer.setStyle(this.handle,"cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.renderer.setStyle(this.handle,"cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(t){const r={x:0,y:0};this.offset=Object.assign(Object.assign({},r),t),this.delta=Object.assign({},r),this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const t=zs(this.handle,"mousedown"),r=zs(document,"mousemove"),i=zs(document,"mouseup");t.pipe(Cr(()=>this.enabled),W(o=>({startX:o.clientX,startY:o.clientY})),us(({startX:o,startY:a})=>r.pipe(W(l=>{l.preventDefault(),this.delta={x:l.clientX-o,y:l.clientY-a},"constrain"===this.dragConstraint&&this.checkConstraint()}),bl(i))),bl(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),i.pipe(Cr(()=>this.enabled),Cr(()=>0!==this.delta.x||0!==this.delta.y),bl(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.renderer.setStyle(this.target,"transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.renderer.setStyle(this.handle,"cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:r,height:i}=this.target.getBoundingClientRect(),{innerWidth:o,innerHeight:a}=window,l=this.translateY>0?this.translateY+i/2:this.translateY-i/2,c=a/2,f=this.translateX>0?this.translateX+r/2:this.translateX-r/2,C=o/2;-c>l&&(this.delta.y=i/2-c-this.offset.y),c<l&&(this.delta.y=c-i/2-this.offset.y),-C>f&&(this.delta.x=r/2-C-this.offset.x),C<f&&(this.delta.x=C-r/2-this.offset.x)}}return n.\u0275fac=function(t){return new(t||n)(at(kr),at(jn),at(Va))},n.\u0275dir=Wn({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},features:[es]}),n})(),z2=(()=>{class n{constructor(t,{nativeElement:r},i,s,o){var a,l,c,f,C;this.document=t,this.dialogRef=i,this.config=s,this.nodes=o,this.size=null===(a=this.config.sizes)||void 0===a?void 0:a[this.config.size||"md"],this.styles={width:xu(this.config.width||(null===(l=this.size)||void 0===l?void 0:l.width)),height:xu(this.config.height||(null===(c=this.size)||void 0===c?void 0:c.height)),minHeight:xu(this.config.minHeight||(null===(f=this.size)||void 0===f?void 0:f.minHeight)),maxHeight:xu(this.config.maxHeight||(null===(C=this.size)||void 0===C?void 0:C.maxHeight))},this.destroy$=new E,r.id=this.config.id,this.nodes.forEach(j=>r.appendChild(j)),s.windowClass&&s.windowClass.split(/\s/).filter(J=>J).forEach(J=>r.classList.add(J))}ngOnInit(){const r=this.dialogElement.nativeElement,i=zs(this.config.backdrop?this.backdrop.nativeElement:this.document.body,"click",{capture:!0}).pipe(Cr(({target:s})=>!r.contains(s)));i.pipe(bl(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&ju(zs(this.document.body,"keyup").pipe(Cr(({key:s})=>"Escape"===s)),i).pipe(bl(this.destroy$)).subscribe(()=>this.closeDialog()),this.nodes.forEach(s=>r.appendChild(s))}reset(t){this.config.draggable&&this.draggable.reset(t)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(t){return new(t||n)(at(bn),at(kr),at(jp),at(Mu),at(HS))},n.\u0275cmp=Mn({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(t,r){if(1&t&&(vr(j2,7),vr(H2,7),vr(VS,5)),2&t){let i;tr(i=nr())&&(r.backdrop=i.first),tr(i=nr())&&(r.dialogElement=i.first),tr(i=nr())&&(r.draggable=i.first)}},decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],[1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(t,r){1&t&&(_t(0,"div",0,1)(2,"div",2,3),hn(4,V2,1,3,"div",4),hn(5,U2,3,0,"div",5),Dt()()),2&t&&(yr("ngneat-dialog-backdrop-visible",r.config.backdrop),Pt("hidden",!r.config.backdrop),Mt(2),yr("ngneat-dialog-resizable",r.config.resizable),Pt("ngStyle",r.styles),Mt(2),Pt("ngIf",r.config.draggable),Mt(1),Pt("ngIf",r.config.closeButton))},directives:[Zb,ls,VS],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;-webkit-animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:4px;box-sizing:border-box;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f;background:#fff;color:#000000de;width:auto;max-width:100%;height:auto;max-height:100%}@-webkit-keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;top:0;left:0;bottom:0;right:0;height:100%;width:100%;padding:30px;z-index:1050;background:rgba(0,0,0,.32);-webkit-animation:dialog-open-backdrop .3s;animation:dialog-open-backdrop .3s}@-webkit-keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px;z-index:1051}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;top:10px;cursor:pointer;right:10px;width:24px;height:24px;color:#5f6368;transition:color .2s ease-in-out;z-index:1051}.ngneat-close-dialog svg{width:12px;height:12px}.ngneat-close-dialog:hover{color:#5d9ff1}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const US="ngneat-dialog-hidden";let W2=(()=>{class n{constructor(t,r,i,s,o,a){this.appRef=t,this.componentFactoryResolver=r,this.injector=i,this.document=s,this.defaultConfig=o,this.globalConfig=a,this.dialogs=[],this.dialogFactory=this.componentFactoryResolver.resolveComponentFactory(z2)}closeAll(){this.dialogs.forEach(t=>t.close())}success(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.success.component,i)}confirm(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.confirm.component,i)}error(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.error.component,i)}open(t,r={}){var i;const s=this.mergeConfig(r);null===(i=s.onOpen)||void 0===i||i.call(s);const o=new jp({id:s.id,data:s.data,backdropClick$:new E}),a={config:s,dialogRef:o};return this.throwIfIDAlreadyExists(s.id),this.dialogs.push(o),1===this.dialogs.length&&this.document.body.classList.add(US),t instanceof zr?this.openTemplate(t,a):"function"==typeof t?this.openComponent(t,a):this.throwMustBeAComponentOrATemplateRef(t)}openTemplate(t,{config:r,dialogRef:i}){var s;const o={$implicit:i,config:r},a=(null===(s=r.vcr)||void 0===s?void 0:s.createEmbeddedView(t,o))||t.createEmbeddedView(o);return this.attach({dialogRef:i,config:r,ref:t,view:a,attachToApp:!r.vcr})}openComponent(t,{config:r,dialogRef:i}){var s;const a=this.componentFactoryResolver.resolveComponentFactory(t).create(qn.create({providers:[{provide:Bp,useValue:i},{provide:Mu,useValue:r}],parent:(null===(s=r.vcr)||void 0===s?void 0:s.injector)||this.injector}));return this.attach({dialogRef:i,config:r,ref:a,view:a.hostView,attachToApp:!0})}attach({dialogRef:t,config:r,ref:i,view:s,attachToApp:o}){const a=this.createDialog(r,t,s),l=r.container instanceof kr?r.container.nativeElement:r.container,c={after:new E};return t.mutate({id:r.id,data:r.data,ref:i,onClose:j=>{var J,be;null===(be=(J=this.globalConfig).onClose)||void 0===be||be.call(J),this.dialogs=this.dialogs.filter(({id:Fe})=>t.id!==Fe),l.removeChild(a.location.nativeElement),this.appRef.detachView(a.hostView),this.appRef.detachView(s),a.destroy(),s.destroy(),t.backdropClick$.complete(),t.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),c.after.next(j),c.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(US)},afterClosed$:c.after.asObservable(),onReset:j=>{a.instance.reset(j)}}),l.appendChild(a.location.nativeElement),this.appRef.attachView(a.hostView),o&&this.appRef.attachView(s),t.asDialogRef()}createDialog(t,r,i){return this.dialogFactory.create(qn.create({providers:[{provide:jp,useValue:r},{provide:Mu,useValue:t},{provide:HS,useValue:i.rootNodes}],parent:this.injector}))}mergeConfig(t){var r;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.defaultConfig),{id:`dialog-${Math.random().toString(36).substring(7)}`}),this.globalConfig),this.cleanConfig(t)),{sizes:Object.assign(Object.assign(Object.assign({},this.defaultConfig.sizes),null===(r=this.globalConfig)||void 0===r?void 0:r.sizes),null==t?void 0:t.sizes)})}mergeConfigWithContent(t,r){const i=this.mergeConfig(t),{data:s}=i,o=function x2(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(i,["data"]);return Object.assign(Object.assign({},o),{data:Object.assign(Object.assign({},s),{[Np]:this.isTemplateOrString(r)?{title:null,body:{type:this.getTypeOfContent(r),content:r}}:Object.entries(r).reduce((a,[l,c])=>(a[l]={type:this.getTypeOfContent(c),content:c},a),{})})})}cleanConfig(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}isTemplateOrString(t){return t instanceof zr||"string"==typeof t}getTypeOfContent(t){return t instanceof zr?"template":"string"}throwMustBeAComponentOrATemplateRef(t){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${t}`)}throwIfIDAlreadyExists(t){if(this.dialogs.find(r=>r.id===t))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${t}`)}applyDefaultSize(t){return Object.assign(Object.assign({},t),{size:t.size||"sm"})}}return n.\u0275fac=function(t){return new(t||n)(ft(Ic),ft(jo),ft(qn),ft(BS),ft(Mu),ft(jS))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X2=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:jS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({imports:[[n0]]}),n})();function K2(n,e){if(1&n&&(_t(0,"div",4),fn(1,"div",5),_t(2,"div",6),fn(3,"app-gallery-view",7),Dt()()),2&n){const t=Yt();Mt(3),Pt("isTinyView",!0)("skipAnimations",!0)("allowNavigation",!0)("cameraStreams",t.nonTalkingFeedStreams)}}const Y2=function(n){return[n]};let J2=(()=>{class n{constructor(t){this.janusService=t,this.talkingFeedId=""}set cameraStreams(t){var r;const i=(null===(r=this._cameraStreams)||void 0===r?void 0:r.length)||-1;this._cameraStreams=t,i!==t.length&&this.refreshViews(this.janusService.talkingFeeds)}ngOnInit(){}ngAfterContentInit(){!this.talkingFeedId&&!this.talkingFeedStream&&this._cameraStreams.length>0&&(this.talkingFeedId=this._cameraStreams[0].feedId,this.talkingFeedStream=this._cameraStreams[0],this.nonTalkingFeedStreams=this.nonTalkingFeeds),this.janusService.talkingFeedsSubject.subscribe(t=>{this.refreshViews(t)})}refreshViews(t){const r=Object.keys(t).filter(s=>t[s])[0],i=this._cameraStreams.find(s=>!0===s.isScreenshare);if(console.log(t),this.janusService.screensharingIsActive&&i)this.talkingFeedId=i.feedId,this.talkingFeedStream=i,this.nonTalkingFeedStreams=this.nonTalkingFeeds;else if(1===this._cameraStreams.length&&(this.talkingFeedId=this._cameraStreams[0].feedId),r&&""!=r&&this.talkingFeedId!==r){this.talkingFeedId=r,console.log("(Speaker View) Active speaker changed: ",this.talkingFeedId);const s=this.talkingFeed;s&&(this.talkingFeedStream=s),this.nonTalkingFeedStreams=this.nonTalkingFeeds,console.log("Non talking feed streams: ",this.nonTalkingFeedStreams)}else{const s=this._cameraStreams.find(o=>!o.isScreenshare);s&&(this.talkingFeedId=s.feedId,this.talkingFeedStream=s,this.nonTalkingFeedStreams=this.nonTalkingFeeds)}}get talkingFeed(){return this._cameraStreams.find(t=>t.feedId==this.talkingFeedId)}get nonTalkingFeeds(){return this._cameraStreams.filter(t=>t.feedId!=this.talkingFeedId)}}return n.\u0275fac=function(t){return new(t||n)(at(gl))},n.\u0275cmp=Mn({type:n,selectors:[["app-speaker-view"]],inputs:{cameraStreams:"cameraStreams"},decls:4,vars:6,consts:[[1,"conferenceContainer"],["class","topBar",4,"ngIf"],[1,"speakerContainer"],[3,"skipAnimations","allowNavigation","cameraStreams"],[1,"topBar"],[1,"me"],[1,"attendants"],[3,"isTinyView","skipAnimations","allowNavigation","cameraStreams"]],template:function(t,r){1&t&&(_t(0,"div",0),hn(1,K2,4,4,"div",1),_t(2,"div",2),fn(3,"app-gallery-view",3),Dt()()),2&t&&(Mt(1),Pt("ngIf",r._cameraStreams.length>1),Mt(2),Pt("skipAnimations",!0)("allowNavigation",!1)("cameraStreams",Lv(4,Y2,r.talkingFeedStream)))},directives:[ls,Fp],styles:["[_nghost-%COMP%]{display:flex;flex:1}.conferenceContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{display:flex;max-height:10vh;margin-bottom:.75em}.attendants[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;min-height:12vh}.attendantStreams[_ngcontent-%COMP%]{flex:1}.buttonContainer[_ngcontent-%COMP%]{display:flex}mat-icon[_ngcontent-%COMP%]{color:#fff}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:.5em;max-width:10vw;width:100%}.button[_ngcontent-%COMP%]:hover{background-color:#555}.attendantStreams[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;max-height:100%;max-width:95%}.speakerContainer[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.attendantStreamContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;max-height:100%;aspect-ratio:4/3;padding-right:1em}.attendantStreamContainer[_ngcontent-%COMP%]:first-of-type   [_ngcontent-%COMP%]:last-of-type{padding:0}video[_ngcontent-%COMP%]{background:transparent;border-radius:10px;overflow:hidden}"]}),n})();const Q2=["*"];let Z2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["app-menubar-buttongroup"]],ngContentSelectors:Q2,decls:1,vars:0,template:function(t,r){1&t&&(Oa(),Oo(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;justify-content:center}"]}),n})();function eB(n,e){1&n&&(_t(0,"mat-icon"),$n(1,"check"),Dt())}function tB(n,e){if(1&n){const t=wi();_t(0,"div",2),Jt("click",function(){const s=_r(t).$implicit;return Yt().selectOverlayService.optionSelected(s)}),hn(1,eB,2,0,"mat-icon",3),$n(2),Dt()}if(2&n){const t=e.$implicit,r=Yt();yr("active",r.selectOverlayService.activeKey===t.key),Mt(1),Pt("ngIf",r.selectOverlayService.activeKey===t.key),Mt(1),La(" ",t.value," ")}}let nB=(()=>{class n{constructor(t){this.selectOverlayService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(at(MS))},n.\u0275cmp=Mn({type:n,selectors:[["app-select-overlay"]],decls:2,vars:7,consts:[[1,"selectList"],["class","selectListItem",3,"active","click",4,"ngFor","ngForOf"],[1,"selectListItem",3,"click"],[4,"ngIf"]],template:function(t,r){1&t&&(_t(0,"div",0),hn(1,tB,3,4,"div",1),Dt()),2&t&&(vc("top",r.selectOverlayService.topPx)("left",r.selectOverlayService.leftPx)("display",r.selectOverlayService.isOverlayVisible?"":"none"),Mt(1),Pt("ngForOf",r.selectOverlayService.options))},directives:[zc,ls,Op],styles:[".selectList[_ngcontent-%COMP%]{background:#151515;border:1px solid black;border-radius:1em;display:flex;flex-direction:column;position:absolute;transform:translateY(-100%);min-width:15vw;z-index:99}.selectListItem[_ngcontent-%COMP%]{color:#fff;height:4em;display:flex;flex-direction:row;cursor:pointer;justify-content:center;align-items:center;padding:.5em 1em;border-radius:1em}.selectListItem[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:25px;height:25px;width:25px;margin-bottom:4px;margin-right:4px}.active[_ngcontent-%COMP%]{background-color:#444}.selectListItem[_ngcontent-%COMP%]:hover{background-color:#555}"]}),n})();const rB=["slideView"];function iB(n,e){1&n&&fn(0,"app-gallery-view",2),2&n&&Pt("cameraStreams",Yt().videoStreams)}function sB(n,e){1&n&&fn(0,"app-speaker-view",2),2&n&&Pt("cameraStreams",Yt().videoStreams)}function oB(n,e){1&n&&fn(0,"audio",14),2&n&&Pt("srcObject",Yt().$implicit.stream)}function aB(n,e){if(1&n&&(Ra(0),hn(1,oB,1,1,"audio",13),ka()),2&n){const t=e.$implicit,r=Yt();Mt(1),Pt("ngIf",!r.janusService.locallyMutedRemoteAudioFeeds[t.feedId])}}const lB=[{path:"",component:(()=>{class n{constructor(t){this.router=t}ngOnInit(){}buttonPressed(){this.router.navigate(["/course/1"])}}return n.\u0275fac=function(t){return new(t||n)(at(ir))},n.\u0275cmp=Mn({type:n,selectors:[["app-home"]],decls:11,vars:0,consts:[["placeholder","Room ID"],["placeholder","Room Password"],["placeholder","Your name"],[3,"click"]],template:function(t,r){1&t&&($n(0,"Please enter your room details."),fn(1,"br")(2,"br")(3,"input",0)(4,"br")(5,"input",1)(6,"br")(7,"input",2)(8,"br"),_t(9,"button",3),Jt("click",function(){return r.buttonPressed()}),$n(10,"Join Room"),Dt())},styles:[""]}),n})()},{path:"course/:courseId",component:(()=>{class n{constructor(t,r,i,s,o){var a;this.janusService=t,this.router=r,this.selectOverlayService=i,this.activatedRoute=s,this.dialog=o,this.chosenViewMode="gallery",this.prevViewMode="gallery",this.screenShareActive=!1,this.availableViewModes={gallery:"Gallery view",speaker:"Speaker view",document:"Document view"},this.showAvailableMicrophones=l=>{this.selectOverlayService.trigger(l,Object.keys(this.janusService.audioDevices).map(c=>({key:c,value:this.janusService.audioDevices[c]})),c=>{this.janusService.selectAudioDevice(c.key)},this.janusService.currentlyChosenOverrideAudioDeviceId)},this.showAvailableCameras=l=>{this.selectOverlayService.trigger(l,Object.keys(this.janusService.videoDevices).map(c=>({key:c,value:this.janusService.videoDevices[c]})),c=>{this.janusService.selectVideoDevice(c.key)},this.janusService.currentlyChosenOverrideVideoDeviceId)},this.showAvailableViewModes=l=>{const c=[{key:"gallery",value:this.availableViewModes.gallery},{key:"speaker",value:this.availableViewModes.speaker}];Us.getInstance().renderController&&c.push({key:"document",value:this.availableViewModes.document}),this.selectOverlayService.trigger(l,c,f=>{this.chosenViewMode=f.key},this.chosenViewMode)},this.janusService.myRoomId=null!==(a=Number(this.activatedRoute.snapshot.params.courseId))&&void 0!==a?a:1,console.log("Read room id: ",this.janusService.myRoomId),this.courseStateService=new RL("fastrootserver.de"),this.playbackModel=new eN,this.playbackService=new Us(this.playbackModel)}ngOnInit(){this.janusService.start(),this.janusService.setOnData(t=>{t instanceof Blob?t.arrayBuffer().then(r=>{this.processData(r)}):this.processData(t)}),document.addEventListener("click",()=>{this.selectOverlayService.hideAll()}),this.janusService.screenshareStateSubject.subscribe(t=>{"start"===t?this.screenShareActive||(this.prevViewMode=this.chosenViewMode,this.chosenViewMode="speaker",this.screenShareActive=!0):this.screenShareActive&&(this.chosenViewMode=this.prevViewMode,this.screenShareActive=!1)})}ngOnDestroy(){this.janusService.end()}get audioStreams(){return Object.values(this.janusService.remoteTracks).filter(t=>t.stream.getAudioTracks().length>0)}get videoStreams(){return Object.values(Object.assign(Object.assign({},this.janusService.remoteTracks),this.janusService.localTracks)).filter(t=>t.stream.getVideoTracks().length>0)}leave(){try{this.janusService.end()}catch(t){console.log("Could not end janus session: ",t)}document.location.href=""}openSettingsDialog(){this.dialog.open(C2)}openDocumentView(){this.chosenViewMode="document";const t={documentName:"CourseStateDoc",documentId:BigInt(0),documentFile:"/angular/assets/sample.pdf",type:"type",activePage:{pageNumber:0},pages:new Map([[0,{pageNumber:0}]])};this.courseStateService.getStateDocument(this.janusService.myRoomId,{documentFile:"/angular/assets/sample.pdf",documentName:"Dokument"}).then(r=>{r.setDocumentId(BigInt(0)),this.playbackService.addDocument(r),this.playbackService.initialize(this.slideView,{documentMap:new Map([[BigInt(0),t]]),avtiveDocument:t},[r],BigInt(0)),this.flushActionBuffer(r.getDocumentId())}).catch(r=>{console.error("(SlideDocumentError)",r)}),console.log("(SlideDocument) Told it to load"),this.slideView.repaint()}processData(t){if(!this.janusService.myRoomId)return;const r=new XC(t),i=r.getInt32(),s=r.getInt8(),o=qC.parse(r,s,i);if(o instanceof yp)this.bufferAction(o,o.documentId)||this.playbackService.selectDocument(o.documentId);else if(o instanceof BC)if(1===o.documentType){const a=new NC;a.setDocumentId(o.documentId),this.playbackService.addDocument(a)}else this.streamActionBuffer={bufferedActions:[],docId:BigInt(o.documentId)},this.courseStateService.getStateDocument(this.janusService.myRoomId,{activePage:null,documentFile:o.documentFile,documentId:o.documentId,documentName:o.documentTitle,pages:null,type:"pdf"}).then(l=>{this.playbackService.addDocument(l),this.flushActionBuffer(l.getDocumentId())}).catch(l=>{console.error(l)});else if(o instanceof xC)this.playbackService.removeDocument(o.documentId);else if(o instanceof fu){if(!this.bufferAction(o,o.documentId)){const a=new mp(o.pageNumber);a.timestamp=0,this.playbackService.addAction(a)}}else o instanceof vp&&(this.bufferAction(o,o.documentId)||this.playbackService.addAction(o.action))}bufferAction(t,r){return!(!this.streamActionBuffer||this.streamActionBuffer.docId!==BigInt(r)||(this.streamActionBuffer.bufferedActions.push(t),0))}flushActionBuffer(t){this.streamActionBuffer&&this.streamActionBuffer.docId===BigInt(t)&&this.streamActionBuffer.bufferedActions.forEach(r=>{if(r instanceof yp)this.playbackService.selectDocument(r.documentId);else if(r instanceof fu){const i=new mp(r.pageNumber);i.timestamp=0,this.playbackService.addAction(i)}else r instanceof vp&&this.playbackService.addAction(r.action)}),this.streamActionBuffer=null}}return n.\u0275fac=function(t){return new(t||n)(at(gl),at(ir),at(MS),at(Ns),at(W2))},n.\u0275cmp=Mn({type:n,selectors:[["app-player"]],viewQuery:function(t,r){if(1&t&&vr(rB,5,xS),2&t){let i;tr(i=nr())&&(r.slideView=i.first)}},decls:19,vars:13,consts:[["xmlns","http://www.w3.org/1999/html",1,"conferenceContainer"],[3,"cameraStreams",4,"ngIf"],[3,"cameraStreams"],["slideView",""],["caption","Microphone off","captionHighlightedToggleState","Microphone on","matIconName","mic","matIconNameHighlightedToggleState","mic_off",3,"highlightToggleStateActive","subButtonClickAction","clicked"],["caption","Camera off","captionHighlightedToggleState","Camera on","matIconName","videocam","matIconNameHighlightedToggleState","videocam_off",3,"highlightToggleStateActive","subButtonClickAction","clicked"],["caption","Screenshare","captionHighlightedToggleState","Screenshare","matIconName","screen_share","matIconNameHighlightedToggleState","stop_screen_share",3,"highlightToggleStateActive","clicked"],["caption","Documents","matIconName","edit",3,"clicked"],["caption","View mode","matIconName","image",3,"clickAction"],["caption","Settings","matIconName","settings",3,"clicked"],["captionHighlightedToggleState","Leave","matIconNameHighlightedToggleState","exit_to_app",3,"highlightToggleStateActive","clicked"],[1,"not-rendered"],[4,"ngFor","ngForOf"],["autoplay","",3,"srcObject",4,"ngIf"],["autoplay","",3,"srcObject"]],template:function(t,r){1&t&&(_t(0,"div",0),hn(1,iB,1,1,"app-gallery-view",1),hn(2,sB,1,1,"app-speaker-view",1),fn(3,"app-document-view",2,3),_t(5,"app-menubar")(6,"app-menubar-buttongroup")(7,"app-menubar-button",4),Jt("clicked",function(){return r.janusService.toggleMute()}),Dt(),_t(8,"app-menubar-button",5),Jt("clicked",function(){return r.janusService.toggleCamera()}),Dt()(),_t(9,"app-menubar-buttongroup")(10,"app-menubar-button",6),Jt("clicked",function(){return r.janusService.toggleScreenshare()}),Dt(),_t(11,"app-menubar-button",7),Jt("clicked",function(){return r.openDocumentView()}),Dt(),fn(12,"app-menubar-button",8),Dt(),_t(13,"app-menubar-buttongroup")(14,"app-menubar-button",9),Jt("clicked",function(){return r.openSettingsDialog()}),Dt(),_t(15,"app-menubar-button",10),Jt("clicked",function(){return r.leave()}),Dt()()()(),fn(16,"app-select-overlay"),_t(17,"div",11),hn(18,aB,2,1,"ng-container",12),Dt()),2&t&&(Mt(1),Pt("ngIf","gallery"===r.chosenViewMode),Mt(1),Pt("ngIf","speaker"===r.chosenViewMode),Mt(1),vc("display","document"!==r.chosenViewMode?"none":""),Pt("cameraStreams",r.videoStreams),Mt(4),Pt("highlightToggleStateActive",r.janusService.isMuted)("subButtonClickAction",r.showAvailableMicrophones),Mt(1),Pt("highlightToggleStateActive",r.janusService.isVideoMuted)("subButtonClickAction",r.showAvailableCameras),Mt(2),Pt("highlightToggleStateActive",r.janusService.myScreenshareIsActive),Mt(2),Pt("clickAction",r.showAvailableViewModes),Mt(3),Pt("highlightToggleStateActive",!0),Mt(3),Pt("ngForOf",r.audioStreams))},directives:[ls,Fp,J2,xS,DS,Z2,TS,nB,zc],styles:["body[_ngcontent-%COMP%]{background:#222222;overflow:hidden}.conferenceContainer[_ngcontent-%COMP%]{background-color:#333;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;max-height:100vh;height:100%;width:100%}.videoFeedContainer[_ngcontent-%COMP%]{background:#222222;flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(min(33.3333333333%,max(64px,20%)),1fr));grid-auto-columns:min-content;align-items:center;max-height:90vh}.videoContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;aspect-ratio:4/3}video[_ngcontent-%COMP%]{object-fit:contain;border-radius:.75em;overflow:hidden;max-height:90vh;border:2px solid transparent}.isTalking[_ngcontent-%COMP%]{border-color:#7cfc00}"]}),n})()}];let cB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zr({type:n}),n.\u0275inj=Br({imports:[[AC.forRoot(lB)],AC]}),n})(),uB=(()=>{class n{constructor(t,r,i){this.router=t,this.janusService=r,this.elementRef=i,this.title="angularPlayer",this.janusService.setUsername(this.elementRef.nativeElement.getAttribute("userdisplayname"))}}return n.\u0275fac=function(t){return new(t||n)(at(ir),at(gl),at(kr))},n.\u0275cmp=Mn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&fn(0,"router-outlet")},directives:[ap],styles:[""]}),n})(),dB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zr({type:n,bootstrap:[uB]}),n.\u0275inj=Br({providers:[],imports:[[B1,cB,AS,X2.forRoot({closeButton:!0,resizable:!1,draggable:!1,sizes:{md:{width:"40vw",height:"60vh"}}})],AS]}),n})();const Hp=CanvasRenderingContext2D.prototype.getTransform;if(CanvasRenderingContext2D.prototype.getTransformExt=function(){if(Hp){const n=Hp.apply(this,Array.from(arguments));this._transform_ext||(this._transform_ext=new hr),this._transform_ext.setValues(n.a,n.b,n.c,n.d,n.e,n.f)}return this._transform_ext},!Hp){const n=CanvasRenderingContext2D.prototype.resetTransform,e=CanvasRenderingContext2D.prototype.rotate,t=CanvasRenderingContext2D.prototype.scale,r=CanvasRenderingContext2D.prototype.setTransform,i=CanvasRenderingContext2D.prototype.transform,s=CanvasRenderingContext2D.prototype.translate,o=CanvasRenderingContext2D.prototype.save,a=CanvasRenderingContext2D.prototype.restore;CanvasRenderingContext2D.prototype.resetTransform=function(){n&&n.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new hr),this._transform_ext.reset()},CanvasRenderingContext2D.prototype.rotate=function(l){e&&e.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new hr),this._transform_ext.rotate(l)},CanvasRenderingContext2D.prototype.scale=function(l,c){t&&t.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new hr),this._transform_ext.scale(l,c)},CanvasRenderingContext2D.prototype.setTransform=function(l,c,f,C,j,J){if(r&&r.apply(this,Array.from(arguments)),c)l=l;else{const be=l;l=be.a,c=be.b,f=be.c,C=be.d,j=be.e,J=be.f}this._transform_ext||(this._transform_ext=new hr),this._transform_ext.setValues(l,c,f,C,j,J)},CanvasRenderingContext2D.prototype.transform=function(l,c,f,C,j,J){i&&i.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new hr),this._transform_ext.multiply(new hr([l,c,f,C,j,J]))},CanvasRenderingContext2D.prototype.translate=function(l,c){s&&s.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new hr),this._transform_ext.translate(l,c)},CanvasRenderingContext2D.prototype.save=function(){o&&o.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext||(this._transform_ext=new hr),this._transform_ext_stack.push(this._transform_ext.clone())},CanvasRenderingContext2D.prototype.restore=function(){a&&a.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext=this._transform_ext_stack.pop(),this._transform_ext||(this._transform_ext=new hr)}}Ap.GlobalWorkerOptions.workerSrc="./angular/assets/pdf.worker.js",function SI(){Ab=!1}(),L1().bootstrapModule(dB).catch(n=>console.error(n))},164:(We,O,X)=>{var ae,p=X(69);"undefined"!=typeof window&&(ae=window.AudioContext||window.webkitAudioContext);var le=null;We.exports=function(pe,G){var y=new p;if(!ae)return y;var w,U,x,M=(G=G||{}).smoothing||.1,N=G.interval||50,F=G.threshold,b=G.play,_=G.history||10,h=!0;le=G.audioContext||le||new ae,(x=le.createAnalyser()).fftSize=512,x.smoothingTimeConstant=M,U=new Float32Array(x.frequencyBinCount),pe.jquery&&(pe=pe[0]),pe instanceof HTMLAudioElement||pe instanceof HTMLVideoElement?(w=le.createMediaElementSource(pe),void 0===b&&(b=!0),F=F||-50):(w=le.createMediaStreamSource(pe),F=F||-50),w.connect(x),b&&x.connect(le.destination),y.speaking=!1,y.suspend=function(){return le.suspend()},y.resume=function(){return le.resume()},Object.defineProperty(y,"state",{get:function(){return le.state}}),le.onstatechange=function(){y.emit("state_change",le.state)},y.setThreshold=function(g){F=g},y.setInterval=function(g){N=g},y.stop=function(){h=!1,y.emit("volume_change",-100,F),y.speaking&&(y.speaking=!1,y.emit("stopped_speaking")),x.disconnect(),w.disconnect()},y.speakingHistory=[];for(var P=0;P<_;P++)y.speakingHistory.push(0);var u=function(){setTimeout(function(){if(h){var g=function ce(pe,ee){var y=-1/0;pe.getFloatFrequencyData(ee);for(var G=4,M=ee.length;G<M;G++)ee[G]>y&&ee[G]<0&&(y=ee[G]);return y}(x,U);y.emit("volume_change",g,F);var R=0;if(g>F&&!y.speaking){for(var I=y.speakingHistory.length-3;I<y.speakingHistory.length;I++)R+=y.speakingHistory[I];R>=2&&(y.speaking=!0,y.emit("speaking"))}else if(g<F&&y.speaking){for(I=0;I<y.speakingHistory.length;I++)R+=y.speakingHistory[I];0==R&&(y.speaking=!1,y.emit("stopped_speaking"))}y.speakingHistory.shift(),y.speakingHistory.push(0+(g>F)),u()}},N)};return u(),y}},36:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(926).default,X;X=()=>(()=>{"use strict";var __webpack_modules__=[,(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.VerbosityLevel=O.Util=O.UnknownErrorException=O.UnexpectedResponseException=O.UNSUPPORTED_FEATURES=O.TextRenderingMode=O.StreamType=O.RenderingIntentFlag=O.PermissionFlag=O.PasswordResponses=O.PasswordException=O.PageActionEventType=O.OPS=O.MissingPDFException=O.InvalidPDFException=O.ImageKind=O.IDENTITY_MATRIX=O.FormatError=O.FontType=O.FeatureTest=O.FONT_IDENTITY_MATRIX=O.DocumentActionEventType=O.CMapCompressionType=O.BaseException=O.AnnotationType=O.AnnotationStateModelType=O.AnnotationReviewState=O.AnnotationReplyType=O.AnnotationMode=O.AnnotationMarkedState=O.AnnotationFlag=O.AnnotationFieldFlag=O.AnnotationBorderStyleType=O.AnnotationActionEventType=O.AbortException=void 0,O.arrayByteLength=Ce,O.arraysToBytes=function _e(K){const L=K.length;if(1===L&&K[0]instanceof Uint8Array)return K[0];let B=0;for(let me=0;me<L;me++)B+=Ce(K[me]);let te=0;const Se=new Uint8Array(B);for(let me=0;me<L;me++){let Ee=K[me];Ee instanceof Uint8Array||(Ee="string"==typeof Ee?fe(Ee):new Uint8Array(Ee));const Ye=Ee.byteLength;Se.set(Ee,te),te+=Ye}return Se},O.assert=function Me(K,L){K||de(L)},O.bytesToString=function W(K){("object"!=typeof K||null===K||void 0===K.length)&&de("Invalid argument for bytesToString");const L=K.length,B=8192;if(L<B)return String.fromCharCode.apply(null,K);const te=[];for(let Se=0;Se<L;Se+=B){const me=Math.min(Se+B,L),Ee=K.subarray(Se,me);te.push(String.fromCharCode.apply(null,Ee))}return te.join("")},O.createPromiseCapability=function se(){const K=Object.create(null);let L=!1;return Object.defineProperty(K,"settled",{get:()=>L}),K.promise=new Promise(function(B,te){K.resolve=function(Se){L=!0,B(Se)},K.reject=function(Se){L=!0,te(Se)}}),K},O.createValidAbsoluteUrl=function Le(K,L=null,B=null){if(!K)return null;try{if(B&&"string"==typeof K){if(B.addDefaultProtocol&&K.startsWith("www.")){const Se=K.match(/\./g);Se&&Se.length>=2&&(K=`http://${K}`)}if(B.tryConvertEncoding)try{K=Xe(K)}catch(Se){}}const te=L?new URL(K,L):new URL(K);if(function xe(K){if(!K)return!1;switch(K.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(te))return te}catch(te){}return null},O.escapeString=function Te(K){return K.replace(/([()\\\n\r])/g,L=>"\n"===L?"\\n":"\r"===L?"\\r":`\\${L}`)},O.getModificationDate=function Re(K=new Date){return[K.getUTCFullYear().toString(),(K.getUTCMonth()+1).toString().padStart(2,"0"),K.getUTCDate().toString().padStart(2,"0"),K.getUTCHours().toString().padStart(2,"0"),K.getUTCMinutes().toString().padStart(2,"0"),K.getUTCSeconds().toString().padStart(2,"0")].join("")},O.getVerbosityLevel=function ve(){return re},O.info=function Ae(K){re>=R.INFOS&&console.log(`Info: ${K}`)},O.isArrayBuffer=function T(K){return"object"==typeof K&&null!==K&&void 0!==K.byteLength},O.isArrayEqual=function he(K,L){if(K.length!==L.length)return!1;for(let B=0,te=K.length;B<te;B++)if(K[B]!==L[B])return!1;return!0},O.isAscii=function Ke(K){return/^[\x00-\x7F]*$/.test(K)},O.objectFromMap=function ke(K){const L=Object.create(null);for(const[B,te]of K)L[B]=te;return L},O.objectSize=function Pe(K){return Object.keys(K).length},O.setVerbosityLevel=function ue(K){Number.isInteger(K)&&(re=K)},O.shadow=$e,O.string32=function we(K){return String.fromCharCode(K>>24&255,K>>16&255,K>>8&255,255&K)},O.stringToBytes=fe,O.stringToPDFString=function ie(K){if(K[0]>="\xef"){let B;if("\xfe"===K[0]&&"\xff"===K[1]?B="utf-16be":"\xff"===K[0]&&"\xfe"===K[1]?B="utf-16le":"\xef"===K[0]&&"\xbb"===K[1]&&"\xbf"===K[2]&&(B="utf-8"),B)try{const te=new TextDecoder(B,{fatal:!0}),Se=fe(K);return te.decode(Se)}catch(te){Ie(`stringToPDFString: "${te}".`)}}const L=[];for(let B=0,te=K.length;B<te;B++){const Se=$[K.charCodeAt(B)];L.push(Se?String.fromCharCode(Se):K.charAt(B))}return L.join("")},O.stringToUTF16BEString=function qe(K){const L=["\xfe\xff"];for(let B=0,te=K.length;B<te;B++){const Se=K.charCodeAt(B);L.push(String.fromCharCode(Se>>8&255),String.fromCharCode(255&Se))}return L.join("")},O.stringToUTF8String=Xe,O.unreachable=de,O.utf8StringToString=function it(K){return unescape(encodeURIComponent(K))},O.warn=Ie,X(2),O.IDENTITY_MATRIX=[1,0,0,1,0,0],O.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],O.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},O.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},O.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},O.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},O.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},O.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},O.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},O.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},O.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},O.AnnotationReplyType={GROUP:"Group",REPLY:"R"},O.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},O.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},O.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},O.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},O.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},O.PageActionEventType={O:"PageOpen",C:"PageClose"},O.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},O.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const R={ERRORS:0,WARNINGS:1,INFOS:5};O.VerbosityLevel=R,O.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},O.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},O.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},O.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let re=R.WARNINGS;function Ie(K){re>=R.WARNINGS&&console.log(`Warning: ${K}`)}function de(K){throw new Error(K)}function $e(K,L,B){return Object.defineProperty(K,L,{value:B,enumerable:!0,configurable:!0,writable:!1}),B}const Q=function(){function L(B,te){this.constructor===L&&de("Cannot initialize BaseException."),this.message=B,this.name=te}return L.prototype=new Error,L.constructor=L,L}();function fe(K){"string"!=typeof K&&de("Invalid argument for stringToBytes");const L=K.length,B=new Uint8Array(L);for(let te=0;te<L;++te)B[te]=255&K.charCodeAt(te);return B}function Ce(K){return void 0!==K.length?K.length:void 0!==K.byteLength?K.byteLength:void de("Invalid argument for arrayByteLength")}O.BaseException=Q,O.PasswordException=class v extends Q{constructor(L,B){super(L,"PasswordException"),this.code=B}},O.UnknownErrorException=class E extends Q{constructor(L,B){super(L,"UnknownErrorException"),this.details=B}},O.InvalidPDFException=class d extends Q{constructor(L){super(L,"InvalidPDFException")}},O.MissingPDFException=class S extends Q{constructor(L){super(L,"MissingPDFException")}},O.UnexpectedResponseException=class D extends Q{constructor(L,B){super(L,"UnexpectedResponseException"),this.status=B}},O.FormatError=class k extends Q{constructor(L){super(L,"FormatError")}},O.AbortException=class H extends Q{constructor(L){super(L,"AbortException")}},O.FeatureTest=class Oe{static get isLittleEndian(){return $e(this,"isLittleEndian",function ze(){const K=new Uint8Array(4);return K[0]=1,1===new Uint32Array(K.buffer,0,1)[0]}())}static get isEvalSupported(){return $e(this,"isEvalSupported",function tt(){try{return new Function(""),!0}catch(K){return!1}}())}static get isOffscreenCanvasSupported(){return $e(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const He=[...Array(256).keys()].map(K=>K.toString(16).padStart(2,"0"));class je{static makeHexColor(L,B,te){return`#${He[L]}${He[B]}${He[te]}`}static scaleMinMax(L,B){let te;L[0]?(L[0]<0&&(te=B[0],B[0]=B[1],B[1]=te),B[0]*=L[0],B[1]*=L[0],L[3]<0&&(te=B[2],B[2]=B[3],B[3]=te),B[2]*=L[3],B[3]*=L[3]):(te=B[0],B[0]=B[2],B[2]=te,te=B[1],B[1]=B[3],B[3]=te,L[1]<0&&(te=B[2],B[2]=B[3],B[3]=te),B[2]*=L[1],B[3]*=L[1],L[2]<0&&(te=B[0],B[0]=B[1],B[1]=te),B[0]*=L[2],B[1]*=L[2]),B[0]+=L[4],B[1]+=L[4],B[2]+=L[5],B[3]+=L[5]}static transform(L,B){return[L[0]*B[0]+L[2]*B[1],L[1]*B[0]+L[3]*B[1],L[0]*B[2]+L[2]*B[3],L[1]*B[2]+L[3]*B[3],L[0]*B[4]+L[2]*B[5]+L[4],L[1]*B[4]+L[3]*B[5]+L[5]]}static applyTransform(L,B){return[L[0]*B[0]+L[1]*B[2]+B[4],L[0]*B[1]+L[1]*B[3]+B[5]]}static applyInverseTransform(L,B){const te=B[0]*B[3]-B[1]*B[2];return[(L[0]*B[3]-L[1]*B[2]+B[2]*B[5]-B[4]*B[3])/te,(-L[0]*B[1]+L[1]*B[0]+B[4]*B[1]-B[5]*B[0])/te]}static getAxialAlignedBoundingBox(L,B){const te=je.applyTransform(L,B),Se=je.applyTransform(L.slice(2,4),B),me=je.applyTransform([L[0],L[3]],B),Ee=je.applyTransform([L[2],L[1]],B);return[Math.min(te[0],Se[0],me[0],Ee[0]),Math.min(te[1],Se[1],me[1],Ee[1]),Math.max(te[0],Se[0],me[0],Ee[0]),Math.max(te[1],Se[1],me[1],Ee[1])]}static inverseTransform(L){const B=L[0]*L[3]-L[1]*L[2];return[L[3]/B,-L[1]/B,-L[2]/B,L[0]/B,(L[2]*L[5]-L[4]*L[3])/B,(L[4]*L[1]-L[5]*L[0])/B]}static apply3dTransform(L,B){return[L[0]*B[0]+L[1]*B[1]+L[2]*B[2],L[3]*B[0]+L[4]*B[1]+L[5]*B[2],L[6]*B[0]+L[7]*B[1]+L[8]*B[2]]}static singularValueDecompose2dScale(L){const B=[L[0],L[2],L[1],L[3]],te=L[0]*B[0]+L[1]*B[2],Ee=L[2]*B[1]+L[3]*B[3],Ye=(te+Ee)/2,et=Math.sqrt((te+Ee)**2-4*(te*Ee-(L[2]*B[0]+L[3]*B[2])*(L[0]*B[1]+L[1]*B[3])))/2,St=Ye-et||1;return[Math.sqrt(Ye+et||1),Math.sqrt(St)]}static normalizeRect(L){const B=L.slice(0);return L[0]>L[2]&&(B[0]=L[2],B[2]=L[0]),L[1]>L[3]&&(B[1]=L[3],B[3]=L[1]),B}static intersect(L,B){const te=Math.max(Math.min(L[0],L[2]),Math.min(B[0],B[2])),Se=Math.min(Math.max(L[0],L[2]),Math.max(B[0],B[2]));if(te>Se)return null;const me=Math.max(Math.min(L[1],L[3]),Math.min(B[1],B[3])),Ee=Math.min(Math.max(L[1],L[3]),Math.max(B[1],B[3]));return me>Ee?null:[te,me,Se,Ee]}static bezierBoundingBox(L,B,te,Se,me,Ee,Ye,et){const Ct=[],St=[[],[]];let $t,dn,pr,an,Zt,Lr,wr,Nr;for(let ea=0;ea<2;++ea)if(0===ea?(dn=6*L-12*te+6*me,$t=-3*L+9*te-9*me+3*Ye,pr=3*te-3*L):(dn=6*B-12*Se+6*Ee,$t=-3*B+9*Se-9*Ee+3*et,pr=3*Se-3*B),Math.abs($t)<1e-12){if(Math.abs(dn)<1e-12)continue;an=-pr/dn,0<an&&an<1&&Ct.push(an)}else wr=dn*dn-4*pr*$t,Nr=Math.sqrt(wr),!(wr<0)&&(Zt=(-dn+Nr)/(2*$t),0<Zt&&Zt<1&&Ct.push(Zt),Lr=(-dn-Nr)/(2*$t),0<Lr&&Lr<1&&Ct.push(Lr));let Sn,Gn=Ct.length;const Cs=Gn;for(;Gn--;)an=Ct[Gn],Sn=1-an,St[0][Gn]=Sn*Sn*Sn*L+3*Sn*Sn*an*te+3*Sn*an*an*me+an*an*an*Ye,St[1][Gn]=Sn*Sn*Sn*B+3*Sn*Sn*an*Se+3*Sn*an*an*Ee+an*an*an*et;return St[0][Cs]=L,St[1][Cs]=B,St[0][Cs+1]=Ye,St[1][Cs+1]=et,St[0].length=St[1].length=Cs+2,[Math.min(...St[0]),Math.min(...St[1]),Math.max(...St[0]),Math.max(...St[1])]}}O.Util=je;const $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Xe(K){return decodeURIComponent(escape(K))}},(We,O,X)=>{X(3)},(We,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isNodeJS=void 0;const X=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);O.isNodeJS=X},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var We,X,p,ce,ae,le,pe,ee,y,ZS,M;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:F,NodeCMapReaderFactory:b,NodeStandardFontDataFactory:_}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=F,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=b,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=_}function setPDFNetworkStreamFactory(F){createPDFNetworkStream=F}function getDocument(F){const b=new PDFDocumentLoadingTask;let _;if("string"==typeof F||F instanceof URL)_={url:F};else if((0,_util.isArrayBuffer)(F))_={data:F};else if(F instanceof PDFDataRangeTransport)_={range:F};else{if("object"!=typeof F)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!F.url&&!F.data&&!F.range)throw new Error("Invalid parameter object: need either .data, .range or .url");_=F}const h=Object.create(null);let w=null,U=null;for(const P in _){const u=_[P];switch(P){case"url":if("undefined"!=typeof window)try{h[P]=new URL(u,window.location).href;continue}catch(g){(0,_util.warn)(`Cannot create valid URL: "${g}".`)}else if("string"==typeof u||u instanceof URL){h[P]=u.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":w=u;continue;case"worker":U=u;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&u instanceof Buffer)h[P]=new Uint8Array(u);else{if(u instanceof Uint8Array)break;if("string"==typeof u)h[P]=(0,_util.stringToBytes)(u);else if("object"!=typeof u||null===u||isNaN(u.length)){if(!(0,_util.isArrayBuffer)(u))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");h[P]=new Uint8Array(u)}else h[P]=new Uint8Array(u)}continue}h[P]=u}if(h.CMapReaderFactory=h.CMapReaderFactory||DefaultCMapReaderFactory,h.StandardFontDataFactory=h.StandardFontDataFactory||DefaultStandardFontDataFactory,h.ignoreErrors=!0!==h.stopAtErrors,h.fontExtraProperties=!0===h.fontExtraProperties,h.pdfBug=!0===h.pdfBug,h.enableXfa=!0===h.enableXfa,(!Number.isInteger(h.rangeChunkSize)||h.rangeChunkSize<1)&&(h.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof h.docBaseUrl||(0,_display_utils.isDataScheme)(h.docBaseUrl))&&(h.docBaseUrl=null),(!Number.isInteger(h.maxImageSize)||h.maxImageSize<-1)&&(h.maxImageSize=-1),"string"!=typeof h.cMapUrl&&(h.cMapUrl=null),"string"!=typeof h.standardFontDataUrl&&(h.standardFontDataUrl=null),"boolean"!=typeof h.useWorkerFetch&&(h.useWorkerFetch=h.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&h.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof h.isEvalSupported&&(h.isEvalSupported=!0),"boolean"!=typeof h.disableFontFace&&(h.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof h.useSystemFonts&&(h.useSystemFonts=!_is_node.isNodeJS&&!h.disableFontFace),("object"!=typeof h.ownerDocument||null===h.ownerDocument)&&(h.ownerDocument=globalThis.document),"boolean"!=typeof h.disableRange&&(h.disableRange=!1),"boolean"!=typeof h.disableStream&&(h.disableStream=!1),"boolean"!=typeof h.disableAutoFetch&&(h.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(h.verbosity),!U){const P={verbosity:h.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};U=P.port?PDFWorker.fromPort(P):new PDFWorker(P),b._worker=U}const x=b.docId;return U.promise.then(function(){if(b.destroyed)throw new Error("Loading aborted");const P=_fetchDocument(U,h,w,x),u=new Promise(function(g){let R;w?R=new _transport_stream.PDFDataTransportStream({length:h.length,initialData:h.initialData,progressiveDone:h.progressiveDone,contentDispositionFilename:h.contentDispositionFilename,disableRange:h.disableRange,disableStream:h.disableStream},w):h.data||(R=createPDFNetworkStream({url:h.url,length:h.length,httpHeaders:h.httpHeaders,withCredentials:h.withCredentials,rangeChunkSize:h.rangeChunkSize,disableRange:h.disableRange,disableStream:h.disableStream})),g(R)});return Promise.all([P,u]).then(function([g,R]){if(b.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(x,g,U.port),V=new WorkerTransport(I,b,R,h);b._transport=V,I.send("Ready",null)})}).catch(b._capability.reject),b}function _fetchDocument(F,b,_,h){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(F,b,_,h){if(F.destroyed)throw new Error("Worker was destroyed");_&&(b.length=_.length,b.initialData=_.initialData,b.progressiveDone=_.progressiveDone,b.contentDispositionFilename=_.contentDispositionFilename);const w=yield F.messageHandler.sendWithPromise("GetDocRequest",{docId:h,apiVersion:"2.14.305",source:{data:b.data,url:b.url,password:b.password,disableAutoFetch:b.disableAutoFetch,rangeChunkSize:b.rangeChunkSize,length:b.length},maxImageSize:b.maxImageSize,disableFontFace:b.disableFontFace,docBaseUrl:b.docBaseUrl,ignoreErrors:b.ignoreErrors,isEvalSupported:b.isEvalSupported,fontExtraProperties:b.fontExtraProperties,enableXfa:b.enableXfa,useSystemFonts:b.useSystemFonts,cMapUrl:b.useWorkerFetch?b.cMapUrl:null,standardFontDataUrl:b.useWorkerFetch?b.standardFontDataUrl:null});if(F.destroyed)throw new Error("Worker was destroyed");return w})).apply(this,arguments)}const O=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+QS(O,We)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var b=this;return _asyncToGenerator(function*(){var _;b.destroyed=!0,yield null==(_=b._transport)?void 0:_.destroy(),b._transport=null,b._worker&&(b._worker.destroy(),b._worker=null)})()}};let PDFDocumentLoadingTask=O;We=new WeakMap,bt(PDFDocumentLoadingTask,We,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(b,_,h=!1,w=null){this.length=b,this.initialData=_,this.progressiveDone=h,this.contentDispositionFilename=w,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(b){this._rangeListeners.push(b)}addProgressListener(b){this._progressListeners.push(b)}addProgressiveReadListener(b){this._progressiveReadListeners.push(b)}addProgressiveDoneListener(b){this._progressiveDoneListeners.push(b)}onDataRange(b,_){for(const h of this._rangeListeners)h(b,_)}onDataProgress(b,_){this._readyCapability.promise.then(()=>{for(const h of this._progressListeners)h(b,_)})}onDataProgressiveRead(b){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveReadListeners)_(b)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const b of this._progressiveDoneListeners)b()})}transportReady(){this._readyCapability.resolve()}requestDataRange(b,_){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(b,_){var w,h=this;this._pdfInfo=b,this._transport=_,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(w=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),h.stats||{streamTypes:{},fontTypes:{}}}),function(){return w.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(b){return this._transport.getPage(b)}getPageIndex(b){return this._transport.getPageIndex(b)}getDestinations(){return this._transport.getDestinations()}getDestination(b){return this._transport.getDestination(b)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(b=!1){return this._transport.startCleanup(b||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(b,_,h,w,U=!1){this._pageIndex=b,this._pageInfo=_,this._ownerDocument=w,this._transport=h,this._stats=U?new _display_utils.StatTimer:null,this._pdfBug=U,this.commonObjs=h.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:b,rotation:_=this.rotate,offsetX:h=0,offsetY:w=0,dontFlip:U=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:b,rotation:_,offsetX:h,offsetY:w,dontFlip:U})}getAnnotations({intent:b="display"}={}){const _=this._transport.getRenderingIntent(b);let h=this._annotationPromises.get(_.cacheKey);return h||(h=this._transport.getAnnotations(this._pageIndex,_.renderingIntent),this._annotationPromises.set(_.cacheKey,h),h=h.then(w=>{for(const U of w)void 0!==U.titleObj&&Object.defineProperty(U,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),U.titleObj.str)}),void 0!==U.contentsObj&&Object.defineProperty(U,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),U.contentsObj.str)});return w})),h}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var b=this;return _asyncToGenerator(function*(){var _;return(null==(_=b._transport._htmlForXfa)?void 0:_.children[b._pageIndex])||null})()}render({canvasContext:b,viewport:_,intent:h="display",annotationMode:w=_util.AnnotationMode.ENABLE,transform:U=null,imageLayer:x=null,canvasFactory:P=null,background:u=null,optionalContentConfigPromise:g=null,annotationCanvasMap:R=null,pageColors:I=null}){var Ie,de;void 0!==(null==(Ie=arguments[0])?void 0:Ie.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&w===_util.AnnotationMode.ENABLE&&(w=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(de=arguments[0])?void 0:de.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&w===_util.AnnotationMode.ENABLE&&(w=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const V=this._transport.getRenderingIntent(h,w);this.pendingCleanup=!1,g||(g=this._transport.getOptionalContentConfig());let Y=this._intentStates.get(V.cacheKey);Y||(Y=Object.create(null),this._intentStates.set(V.cacheKey,Y)),Y.streamReaderCancelTimeout&&(clearTimeout(Y.streamReaderCancelTimeout),Y.streamReaderCancelTimeout=null);const ne=P||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),re=!!(V.renderingIntent&_util.RenderingIntentFlag.PRINT);Y.displayReadyCapability||(Y.displayReadyCapability=(0,_util.createPromiseCapability)(),Y.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(V));const ue=Me=>{Y.renderTasks.delete(ve),(this.cleanupAfterRender||re)&&(this.pendingCleanup=!0),this._tryCleanup(),Me?(ve.capability.reject(Me),this._abortOperatorList({intentState:Y,reason:Me instanceof Error?Me:new Error(Me)})):ve.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},ve=new InternalRenderTask({callback:ue,params:{canvasContext:b,viewport:_,transform:U,imageLayer:x,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:Y.operatorList,pageIndex:this._pageIndex,canvasFactory:ne,useRequestAnimationFrame:!re,pdfBug:this._pdfBug,pageColors:I});(Y.renderTasks||(Y.renderTasks=new Set)).add(ve);const Ae=ve.task;return Promise.all([Y.displayReadyCapability.promise,g]).then(([Me,xe])=>{this.pendingCleanup?ue():(this._stats&&this._stats.time("Rendering"),ve.initializeGraphics({transparency:Me,optionalContentConfig:xe}),ve.operatorListChanged())}).catch(ue),Ae}getOperatorList({intent:b="display",annotationMode:_=_util.AnnotationMode.ENABLE}={}){const w=this._transport.getRenderingIntent(b,_,!0);let x,U=this._intentStates.get(w.cacheKey);return U||(U=Object.create(null),this._intentStates.set(w.cacheKey,U)),U.opListReadCapability||(x=Object.create(null),x.operatorListChanged=function h(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(x))},U.opListReadCapability=(0,_util.createPromiseCapability)(),(U.renderTasks||(U.renderTasks=new Set)).add(x),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(w)),U.opListReadCapability.promise}streamTextContent({disableCombineTextItems:b=!1,includeMarkedContent:_=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==b,includeMarkedContent:!0===_},{highWaterMark:100,size:w=>w.items.length})}getTextContent(b={}){if(this._transport._htmlForXfa)return this.getXfa().then(h=>_xfa_text.XfaText.textContent(h));const _=this.streamTextContent(b);return new Promise(function(h,w){const x=_.getReader(),P={items:[],styles:Object.create(null)};!function U(){x.read().then(function({value:u,done:g}){g?h(P):(Object.assign(P.styles,u.styles),P.items.push(...u.items),U())},w)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const b=[];for(const _ of this._intentStates.values())if(this._abortOperatorList({intentState:_,reason:new Error("Page was destroyed."),force:!0}),!_.opListReadCapability)for(const h of _.renderTasks)b.push(h.completed),h.cancel();this.objs.clear();for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(b)}cleanup(b=!1){return this.pendingCleanup=!0,this._tryCleanup(b)}_tryCleanup(b=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:_,operatorList:h}of this._intentStates.values())if(_.size>0||!h.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,b&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(b,_){const h=this._intentStates.get(_);!h||(this._stats&&this._stats.timeEnd("Page Request"),h.displayReadyCapability&&h.displayReadyCapability.resolve(b))}_renderPageChunk(b,_){for(let h=0,w=b.length;h<w;h++)_.operatorList.fnArray.push(b.fnArray[h]),_.operatorList.argsArray.push(b.argsArray[h]);_.operatorList.lastChunk=b.lastChunk;for(const h of _.renderTasks)h.operatorListChanged();b.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:b,cacheKey:_}){const w=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:b,cacheKey:_,annotationStorage:b&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),U=this._intentStates.get(_);U.streamReader=w;const x=()=>{w.read().then(({value:P,done:u})=>{u?U.streamReader=null:this._transport.destroyed||(this._renderPageChunk(P,U),x())},P=>{if(U.streamReader=null,!this._transport.destroyed){if(U.operatorList){U.operatorList.lastChunk=!0;for(const u of U.renderTasks)u.operatorListChanged();this._tryCleanup()}if(U.displayReadyCapability)U.displayReadyCapability.reject(P);else{if(!U.opListReadCapability)throw P;U.opListReadCapability.reject(P)}}})};x()}_abortOperatorList({intentState:b,reason:_,force:h=!1}){if(b.streamReader){if(!h){if(b.renderTasks.size>0)return;if(_ instanceof _display_utils.RenderingCancelledException)return void(b.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:b,reason:_,force:!0}),b.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(b.streamReader.cancel(new _util.AbortException(_.message)).catch(()=>{}),b.streamReader=null,!this._transport.destroyed){for(const[w,U]of this._intentStates)if(U===b){this._intentStates.delete(w);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(b,_){const h={data:structuredClone(b,_)};this._deferred.then(()=>{for(const w of this._listeners)w.call(this,h)})}addEventListener(b,_){this._listeners.push(_)}removeEventListener(b,_){const h=this._listeners.indexOf(_);this._listeners.splice(h,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const F=null==(X=null==document?void 0:document.currentScript)?void 0:X.src;F&&(PDFWorkerUtil.fallbackWorkerSrc=F.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(F,b){let _;try{if(_=new URL(F),!_.origin||"null"===_.origin)return!1}catch(w){return!1}const h=new URL(b,_);return _.origin===h.origin},PDFWorkerUtil.createCDNWrapper=function(F){return URL.createObjectURL(new Blob([`importScripts("${F}");`]))};const _PDFWorker=class{constructor({name:F=null,port:b=null,verbosity:_=(0,_util.getVerbosityLevel)()}={}){if(b&&pt(_PDFWorker,p).has(b))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=F,this.destroyed=!1,this.verbosity=_,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,b)return pt(_PDFWorker,p).set(b,this),void this._initializeFromPort(b);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(F){this._port=F,this._messageHandler=new _message_handler.MessageHandler("main","worker",F),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let F=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,F)||(F=PDFWorkerUtil.createCDNWrapper(new URL(F,window.location).href));const b=new Worker(F),_=new _message_handler.MessageHandler("main","worker",b),h=()=>{b.removeEventListener("error",w),_.destroy(),b.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},w=()=>{this._webWorker||h()};b.addEventListener("error",w),_.on("test",x=>{b.removeEventListener("error",w),this.destroyed?h():x?(this._messageHandler=_,this._port=b,this._webWorker=b,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),_.destroy(),b.terminate())}),_.on("ready",x=>{if(b.removeEventListener("error",w),this.destroyed)h();else try{U()}catch(P){this._setupFakeWorker()}});const U=()=>{const x=new Uint8Array;_.send("test",x,[x.buffer])};return void U()}catch(b){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(F=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const b=new LoopbackPort;this._port=b;const _="fake"+PDFWorkerUtil.fakeWorkerId++,h=new _message_handler.MessageHandler(_+"_worker",_,b);F.setup(h,b);const w=new _message_handler.MessageHandler(_,_+"_worker",b);this._messageHandler=w,this._readyCapability.resolve(),w.send("configure",{verbosity:this.verbosity})}).catch(F=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${F.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pt(_PDFWorker,p).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(F){if(!(null==F?void 0:F.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return pt(this,p).has(F.port)?pt(this,p).get(F.port):new _PDFWorker(F)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var F;try{return(null==(F=globalThis.pdfjsWorker)?void 0:F.WorkerMessageHandler)||null}catch(b){return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function F(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;p=new WeakMap,bt(PDFWorker,p,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(b,_,h,w){bt(this,ce,null),bt(this,ae,new Map),bt(this,le,new Map),bt(this,pe,null),this.messageHandler=b,this.loadingTask=_,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:_.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:w.ownerDocument,styleElement:w.styleElement}),this._params=w,w.useWorkerFetch||(this.CMapReaderFactory=new w.CMapReaderFactory({baseUrl:w.cMapUrl,isCompressed:w.cMapPacked}),this.StandardFontDataFactory=new w.StandardFontDataFactory({baseUrl:w.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=h,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return pt(this,ce)}getRenderingIntent(b,_=_util.AnnotationMode.ENABLE,h=!1){let w=_util.RenderingIntentFlag.DISPLAY,U="";switch(b){case"any":w=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":w=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${b}`)}switch(_){case _util.AnnotationMode.DISABLE:w+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:w+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:w+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${_}`)}return h&&(w+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:w,cacheKey:`${w}_${U}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const b=[];for(const h of pt(this,ae).values())b.push(h._destroy());pt(this,ae).clear(),pt(this,le).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const _=this.messageHandler.sendWithPromise("Terminate",null);return b.push(_),Promise.all(b).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),pn(this,pe,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:b,loadingTask:_}=this;b.on("GetReader",(h,w)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=U=>{this._lastProgress={loaded:U.loaded,total:U.total}},w.onPull=()=>{this._fullReader.read().then(function({value:U,done:x}){x?w.close():((0,_util.assert)((0,_util.isArrayBuffer)(U),"GetReader - expected an ArrayBuffer."),w.enqueue(new Uint8Array(U),1,[U]))}).catch(U=>{w.error(U)})},w.onCancel=U=>{this._fullReader.cancel(U),w.ready.catch(x=>{if(!this.destroyed)throw x})}}),b.on("ReaderHeadersReady",h=>{const w=(0,_util.createPromiseCapability)(),U=this._fullReader;return U.headersReady.then(()=>{var x;(!U.isStreamingSupported||!U.isRangeSupported)&&(this._lastProgress&&(null==(x=_.onProgress)||x.call(_,this._lastProgress)),U.onProgress=P=>{var u;null==(u=_.onProgress)||u.call(_,{loaded:P.loaded,total:P.total})}),w.resolve({isStreamingSupported:U.isStreamingSupported,isRangeSupported:U.isRangeSupported,contentLength:U.contentLength})},w.reject),w.promise}),b.on("GetRangeReader",(h,w)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const U=this._networkStream.getRangeReader(h.begin,h.end);U?(w.onPull=()=>{U.read().then(function({value:x,done:P}){P?w.close():((0,_util.assert)((0,_util.isArrayBuffer)(x),"GetRangeReader - expected an ArrayBuffer."),w.enqueue(new Uint8Array(x),1,[x]))}).catch(x=>{w.error(x)})},w.onCancel=x=>{U.cancel(x),w.ready.catch(P=>{if(!this.destroyed)throw P})}):w.close()}),b.on("GetDoc",({pdfInfo:h})=>{this._numPages=h.numPages,this._htmlForXfa=h.htmlForXfa,delete h.htmlForXfa,_._capability.resolve(new PDFDocumentProxy(h,this))}),b.on("DocException",function(h){let w;switch(h.name){case"PasswordException":w=new _util.PasswordException(h.message,h.code);break;case"InvalidPDFException":w=new _util.InvalidPDFException(h.message);break;case"MissingPDFException":w=new _util.MissingPDFException(h.message);break;case"UnexpectedResponseException":w=new _util.UnexpectedResponseException(h.message,h.status);break;case"UnknownErrorException":w=new _util.UnknownErrorException(h.message,h.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}_._capability.reject(w)}),b.on("PasswordRequest",h=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),_.onPassword){const w=U=>{U instanceof Error?this._passwordCapability.reject(U):this._passwordCapability.resolve({password:U})};try{_.onPassword(w,h.code)}catch(U){this._passwordCapability.reject(U)}}else this._passwordCapability.reject(new _util.PasswordException(h.message,h.code));return this._passwordCapability.promise}),b.on("DataLoaded",h=>{var w;null==(w=_.onProgress)||w.call(_,{loaded:h.length,total:h.length}),this.downloadInfoCapability.resolve(h)}),b.on("StartRenderPage",h=>{this.destroyed||pt(this,ae).get(h.pageIndex)._startRenderPage(h.transparency,h.cacheKey)}),b.on("commonobj",([h,w,U])=>{var x;if(!this.destroyed&&!this.commonObjs.has(h))switch(w){case"Font":const P=this._params;if("error"in U){const R=U.error;(0,_util.warn)(`Error during font loading: ${R}`),this.commonObjs.resolve(h,R);break}let u=null;P.pdfBug&&(null==(x=globalThis.FontInspector)?void 0:x.enabled)&&(u={registerFont(R,I){globalThis.FontInspector.fontAdded(R,I)}});const g=new _font_loader.FontFaceObject(U,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(g).catch(R=>b.sendWithPromise("FontFallback",{id:h})).finally(()=>{!P.fontExtraProperties&&g.data&&(g.data=null),this.commonObjs.resolve(h,g)});break;case"FontPath":case"Image":this.commonObjs.resolve(h,U);break;default:throw new Error(`Got unknown common object type ${w}`)}}),b.on("obj",([h,w,U,x])=>{var u;if(this.destroyed)return;const P=pt(this,ae).get(w);if(!P.objs.has(h))switch(U){case"Image":P.objs.resolve(h,x);const g=8e6;if(x){let R;if(x.bitmap){const{bitmap:I,width:V,height:Y}=x;R=V*Y*4,P._bitmaps.add(I)}else R=(null==(u=x.data)?void 0:u.length)||0;R>g&&(P.cleanupAfterRender=!0)}break;case"Pattern":P.objs.resolve(h,x);break;default:throw new Error(`Got unknown object type ${U}`)}}),b.on("DocProgress",h=>{var w;this.destroyed||null==(w=_.onProgress)||w.call(_,{loaded:h.loaded,total:h.total})}),b.on("DocStats",h=>{this.destroyed||pn(this,ce,Object.freeze({streamTypes:Object.freeze(h.streamTypes),fontTypes:Object.freeze(h.fontTypes)}))}),b.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),b.on("FetchBuiltInCMap",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),b.on("FetchStandardFontData",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:b}){var _,h;this.destroyed||null==(h=(_=this.loadingTask).onUnsupportedFeature)||h.call(_,b)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(b){if(!Number.isInteger(b)||b<=0||b>this._numPages)return Promise.reject(new Error("Invalid page request."));const _=b-1,h=pt(this,le).get(_);if(h)return h;const w=this.messageHandler.sendWithPromise("GetPage",{pageIndex:_}).then(U=>{if(this.destroyed)throw new Error("Transport destroyed");const x=new PDFPageProxy(_,U,this,this._params.ownerDocument,this._params.pdfBug);return pt(this,ae).set(_,x),x});return pt(this,le).set(_,w),w}getPageIndex(b){return"object"!=typeof b||null===b||!Number.isInteger(b.num)||b.num<0||!Number.isInteger(b.gen)||b.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:b.num,gen:b.gen})}getAnnotations(b,_){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:b,intent:_})}saveDocument(){var b,_;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(_=null==(b=this._fullReader)?void 0:b.filename)?_:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(b){return"string"!=typeof b?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:b})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(b){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:b})}getStructTree(b){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:b})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(b=>new _optional_content_config.OptionalContentConfig(b))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return pt(this,pe)||pn(this,pe,this.messageHandler.sendWithPromise("GetMetadata",null).then(b=>{var _,h,w,U;return{info:b[0],metadata:b[1]?new _metadata.Metadata(b[1]):null,contentDispositionFilename:null!=(h=null==(_=this._fullReader)?void 0:_.filename)?h:null,contentLength:null!=(U=null==(w=this._fullReader)?void 0:w.contentLength)?U:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(b=!1){var _=this;return _asyncToGenerator(function*(){if(yield _.messageHandler.sendWithPromise("Cleanup",null),!_.destroyed){for(const h of pt(_,ae).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);_.commonObjs.clear(),b||_.fontLoader.clear(),pn(_,pe,null),_._getFieldObjectsPromise=null,_._hasJSActionsPromise=null}})()}get loadingParams(){const b=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:b.disableAutoFetch,enableXfa:b.enableXfa})}}ce=new WeakMap,ae=new WeakMap,le=new WeakMap,pe=new WeakMap;class PDFObjects{constructor(){bt(this,y),bt(this,ee,Object.create(null))}get(b,_=null){if(_){const w=yt(this,y,ZS).call(this,b);return w.capability.promise.then(()=>_(w.data)),null}const h=pt(this,ee)[b];if(!(null==h?void 0:h.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${b}.`);return h.data}has(b){const _=pt(this,ee)[b];return(null==_?void 0:_.capability.settled)||!1}resolve(b,_=null){const h=yt(this,y,ZS).call(this,b);h.data=_,h.capability.resolve()}clear(){pn(this,ee,Object.create(null))}}ee=new WeakMap,y=new WeakSet,ZS=function(b){return pt(this,ee)[b]||(pt(this,ee)[b]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(b){this._internalRenderTask=b,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const N=class{constructor({callback:b,params:_,objs:h,commonObjs:w,annotationCanvasMap:U,operatorList:x,pageIndex:P,canvasFactory:u,useRequestAnimationFrame:g=!1,pdfBug:R=!1,pageColors:I=null}){this.callback=b,this.params=_,this.objs=h,this.commonObjs=w,this.annotationCanvasMap=U,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=P,this.canvasFactory=u,this._pdfBug=R,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===g&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=_.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:b=!1,optionalContentConfig:_}){var u;if(this.cancelled)return;if(this._canvas){if(pt(N,M).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");pt(N,M).add(this._canvas)}this._pdfBug&&(null==(u=globalThis.StepperManager)?void 0:u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:w,transform:U,imageLayer:x,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,x,_,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:U,viewport:w,transparency:b,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(b=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&pt(N,M).delete(this._canvas),this.callback(b||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var b=this;return _asyncToGenerator(function*(){b.cancelled||(b.operatorListIdx=b.gfx.executeOperatorList(b.operatorList,b.operatorListIdx,b._continueBound,b.stepper),b.operatorListIdx===b.operatorList.argsArray.length&&(b.running=!1,b.operatorList.lastChunk&&(b.gfx.endDrawing(),b._canvas&&pt(N,M).delete(b._canvas),b.callback())))})()}};let InternalRenderTask=N;M=new WeakMap,bt(InternalRenderTask,M,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.StatTimer=O.RenderingCancelledException=O.PixelsPerInch=O.PageViewport=O.PDFDateString=O.DOMStandardFontDataFactory=O.DOMSVGFactory=O.DOMCanvasFactory=O.DOMCMapReaderFactory=void 0,O.deprecated=function g(ne){console.log("Deprecated API usage: "+ne)},O.getFilenameFromUrl=function w(ne){const re=ne.indexOf("#"),ue=ne.indexOf("?"),ve=Math.min(re>0?re:ne.length,ue>0?ue:ne.length);return ne.substring(ne.lastIndexOf("/",ve)+1,ve)},O.getPdfFilenameFromUrl=function U(ne,re="document.pdf"){if("string"!=typeof ne)return re;if(_(ne))return(0,ce.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),re;const ve=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ae=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(ne);let Ie=ve.exec(Ae[1])||ve.exec(Ae[2])||ve.exec(Ae[3]);if(Ie&&(Ie=Ie[0],Ie.includes("%")))try{Ie=ve.exec(decodeURIComponent(Ie))[0]}catch(de){}return Ie||re},O.getXfaPageViewport=function V(ne,{scale:re=1,rotation:ue=0}){const{width:ve,height:Ae}=ne.attributes.style,Ie=[0,0,parseInt(ve),parseInt(Ae)];return new F({viewBox:Ie,scale:re,rotation:ue})},O.isDataScheme=_,O.isPdfFile=function h(ne){return"string"==typeof ne&&/\.pdf$/i.test(ne)},O.isValidFetchUrl=P,O.loadScript=function u(ne,re=!1){return new Promise((ue,ve)=>{const Ae=document.createElement("script");Ae.src=ne,Ae.onload=function(Ie){re&&Ae.remove(),ue(Ie)},Ae.onerror=function(){ve(new Error(`Cannot load script at: ${Ae.src}`))},(document.head||document.documentElement).appendChild(Ae)})};var p=X(6),ce=X(1);const Y=class{};let R,le=Y;function ee(ne){return y.apply(this,arguments)}function y(){return(y=_asyncToGenerator(function*(ne,re=!1){if(P(ne,document.baseURI)){const ue=yield fetch(ne);if(!ue.ok)throw new Error(ue.statusText);return re?new Uint8Array(yield ue.arrayBuffer()):(0,ce.stringToBytes)(yield ue.text())}return new Promise((ue,ve)=>{const Ae=new XMLHttpRequest;Ae.open("GET",ne,!0),re&&(Ae.responseType="arraybuffer"),Ae.onreadystatechange=()=>{if(Ae.readyState===XMLHttpRequest.DONE){if(200===Ae.status||0===Ae.status){let Ie;if(re&&Ae.response?Ie=new Uint8Array(Ae.response):!re&&Ae.responseText&&(Ie=(0,ce.stringToBytes)(Ae.responseText)),Ie)return void ue(Ie)}ve(new Error(Ae.statusText))}},Ae.send(null)})})).apply(this,arguments)}Ou(le,"CSS",96),Ou(le,"PDF",72),Ou(le,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF),O.PixelsPerInch=le,O.DOMCanvasFactory=class pe extends p.BaseCanvasFactory{constructor({ownerDocument:re=globalThis.document}={}){super(),this._document=re}_createCanvas(re,ue){const ve=this._document.createElement("canvas");return ve.width=re,ve.height=ue,ve}},O.DOMCMapReaderFactory=class G extends p.BaseCMapReaderFactory{_fetchData(re,ue){return ee(re,this.isCompressed).then(ve=>({cMapData:ve,compressionType:ue}))}},O.DOMStandardFontDataFactory=class M extends p.BaseStandardFontDataFactory{_fetchData(re){return ee(re,!0)}},O.DOMSVGFactory=class N extends p.BaseSVGFactory{_createSVG(re){return document.createElementNS("http://www.w3.org/2000/svg",re)}};class F{constructor({viewBox:re,scale:ue,rotation:ve,offsetX:Ae=0,offsetY:Ie=0,dontFlip:de=!1}){this.viewBox=re,this.scale=ue,this.rotation=ve,this.offsetX=Ae,this.offsetY=Ie;const Me=(re[2]+re[0])/2,xe=(re[3]+re[1])/2;let Le,$e,Q,v,E,d,S,D;switch((ve%=360)<0&&(ve+=360),ve){case 180:Le=-1,$e=0,Q=0,v=1;break;case 90:Le=0,$e=1,Q=1,v=0;break;case 270:Le=0,$e=-1,Q=-1,v=0;break;case 0:Le=1,$e=0,Q=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}de&&(Q=-Q,v=-v),0===Le?(E=Math.abs(xe-re[1])*ue+Ae,d=Math.abs(Me-re[0])*ue+Ie,S=Math.abs(re[3]-re[1])*ue,D=Math.abs(re[2]-re[0])*ue):(E=Math.abs(Me-re[0])*ue+Ae,d=Math.abs(xe-re[1])*ue+Ie,S=Math.abs(re[2]-re[0])*ue,D=Math.abs(re[3]-re[1])*ue),this.transform=[Le*ue,$e*ue,Q*ue,v*ue,E-Le*ue*Me-Q*ue*xe,d-$e*ue*Me-v*ue*xe],this.width=S,this.height=D}clone({scale:re=this.scale,rotation:ue=this.rotation,offsetX:ve=this.offsetX,offsetY:Ae=this.offsetY,dontFlip:Ie=!1}={}){return new F({viewBox:this.viewBox.slice(),scale:re,rotation:ue,offsetX:ve,offsetY:Ae,dontFlip:Ie})}convertToViewportPoint(re,ue){return ce.Util.applyTransform([re,ue],this.transform)}convertToViewportRectangle(re){const ue=ce.Util.applyTransform([re[0],re[1]],this.transform),ve=ce.Util.applyTransform([re[2],re[3]],this.transform);return[ue[0],ue[1],ve[0],ve[1]]}convertToPdfPoint(re,ue){return ce.Util.applyInverseTransform([re,ue],this.transform)}}function _(ne){const re=ne.length;let ue=0;for(;ue<re&&""===ne[ue].trim();)ue++;return"data:"===ne.substring(ue,ue+5).toLowerCase()}function P(ne,re){try{const{protocol:ue}=re?new URL(ne,re):new URL(ne);return"http:"===ue||"https:"===ue}catch(ue){return!1}}O.PageViewport=F,O.RenderingCancelledException=class b extends ce.BaseException{constructor(re,ue){super(re,"RenderingCancelledException"),this.type=ue}},O.StatTimer=class x{constructor(){this.started=Object.create(null),this.times=[]}time(re){re in this.started&&(0,ce.warn)(`Timer is already running for ${re}`),this.started[re]=Date.now()}timeEnd(re){re in this.started||(0,ce.warn)(`Timer has not been started for ${re}`),this.times.push({name:re,start:this.started[re],end:Date.now()}),delete this.started[re]}toString(){const re=[];let ue=0;for(const ve of this.times){const Ae=ve.name;Ae.length>ue&&(ue=Ae.length)}for(const ve of this.times){const Ae=ve.end-ve.start;re.push(`${ve.name.padEnd(ue)} ${Ae}ms\n`)}return re.join("")}},O.PDFDateString=class I{static toDateObject(re){if(!re||"string"!=typeof re)return null;R||(R=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ue=R.exec(re);if(!ue)return null;const ve=parseInt(ue[1],10);let Ae=parseInt(ue[2],10);Ae=Ae>=1&&Ae<=12?Ae-1:0;let Ie=parseInt(ue[3],10);Ie=Ie>=1&&Ie<=31?Ie:1;let de=parseInt(ue[4],10);de=de>=0&&de<=23?de:0;let Me=parseInt(ue[5],10);Me=Me>=0&&Me<=59?Me:0;let xe=parseInt(ue[6],10);xe=xe>=0&&xe<=59?xe:0;const Le=ue[7]||"Z";let $e=parseInt(ue[8],10);$e=$e>=0&&$e<=23?$e:0;let Q=parseInt(ue[9],10)||0;return Q=Q>=0&&Q<=59?Q:0,"-"===Le?(de+=$e,Me+=Q):"+"===Le&&(de-=$e,Me-=Q),new Date(Date.UTC(ve,Ae,Ie,de,Me,xe))}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.BaseStandardFontDataFactory=O.BaseSVGFactory=O.BaseCanvasFactory=O.BaseCMapReaderFactory=void 0;var p=X(1);class ce{constructor(){this.constructor===ce&&(0,p.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,G){if(y<=0||G<=0)throw new Error("Invalid canvas size");const M=this._createCanvas(y,G);return{canvas:M,context:M.getContext("2d")}}reset(y,G,M){if(!y.canvas)throw new Error("Canvas is not specified");if(G<=0||M<=0)throw new Error("Invalid canvas size");y.canvas.width=G,y.canvas.height=M}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,G){(0,p.unreachable)("Abstract method `_createCanvas` called.")}}O.BaseCanvasFactory=ce;class ae{constructor({baseUrl:y=null,isCompressed:G=!1}){this.constructor===ae&&(0,p.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=G}fetch({name:y}){var G=this;return _asyncToGenerator(function*(){if(!G.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const M=G.baseUrl+y+(G.isCompressed?".bcmap":"");return G._fetchData(M,G.isCompressed?p.CMapCompressionType.BINARY:p.CMapCompressionType.NONE).catch(F=>{throw new Error(`Unable to load ${G.isCompressed?"binary ":""}CMap at: ${M}`)})})()}_fetchData(y,G){(0,p.unreachable)("Abstract method `_fetchData` called.")}}O.BaseCMapReaderFactory=ae;class le{constructor({baseUrl:y=null}){this.constructor===le&&(0,p.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}fetch({filename:y}){var G=this;return _asyncToGenerator(function*(){if(!G.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const M=`${G.baseUrl}${y}`;return G._fetchData(M).catch(N=>{throw new Error(`Unable to load font data at: ${M}`)})})()}_fetchData(y){(0,p.unreachable)("Abstract method `_fetchData` called.")}}O.BaseStandardFontDataFactory=le;class pe{constructor(){this.constructor===pe&&(0,p.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,G){if(y<=0||G<=0)throw new Error("Invalid SVG dimensions");const M=this._createSVG("svg:svg");return M.setAttribute("version","1.1"),M.setAttribute("width",`${y}px`),M.setAttribute("height",`${G}px`),M.setAttribute("preserveAspectRatio","none"),M.setAttribute("viewBox",`0 0 ${y} ${G}`),M}createElement(y){if("string"!=typeof y)throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,p.unreachable)("Abstract method `_createSVG` called.")}}O.BaseSVGFactory=pe},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.FontLoader=O.FontFaceObject=void 0;var p=X(1);class ce{constructor({docId:ee,onUnsupportedFeature:y,ownerDocument:G=globalThis.document,styleElement:M=null}){this.constructor===ce&&(0,p.unreachable)("Cannot initialize BaseFontLoader."),this.docId=ee,this._onUnsupportedFeature=y,this._document=G,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(ee){this.nativeFontFaces.push(ee),this._document.fonts.add(ee)}insertRule(ee){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(y));const G=y.sheet;G.insertRule(ee,G.cssRules.length)}clear(){for(const ee of this.nativeFontFaces)this._document.fonts.delete(ee);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(ee){var y=this;return _asyncToGenerator(function*(){if(ee.attached||ee.missingFile)return;if(ee.attached=!0,y.isFontLoadingAPISupported){const M=ee.createNativeFontFace();if(M){y.addNativeFontFace(M);try{yield M.loaded}catch(N){throw y._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,p.warn)(`Failed to load font '${M.family}': '${N}'.`),ee.disableFontFace=!0,N}}return}const G=ee.createFontFaceRule();if(G){if(y.insertRule(G),y.isSyncFontLoadingSupported)return;yield new Promise(M=>{const N=y._queueLoadingCallback(M);y._prepareFontLoadEvent([G],[ee],N)})}})()}_queueLoadingCallback(ee){(0,p.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var y;const ee=!!(null==(y=this._document)?void 0:y.fonts);return(0,p.shadow)(this,"isFontLoadingAPISupported",ee)}get isSyncFontLoadingSupported(){(0,p.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,p.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(ee,y,G){(0,p.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let ae;O.FontLoader=ae,O.FontLoader=ae=class extends ce{constructor(ee){super(ee),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let ee=!1;if("undefined"==typeof navigator)ee=!0;else{const y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==y?void 0:y[1])>=14&&(ee=!0)}return(0,p.shadow)(this,"isSyncFontLoadingSupported",ee)}_queueLoadingCallback(ee){const G=this.loadingContext,M={id:"pdfjs-font-loading-"+G.nextRequestId++,done:!1,complete:function y(){for((0,p.assert)(!M.done,"completeRequest() cannot be called twice."),M.done=!0;G.requests.length>0&&G.requests[0].done;){const N=G.requests.shift();setTimeout(N.callback,0)}},callback:ee};return G.requests.push(M),M}get _loadTestFont(){return(0,p.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(ee,y,G){function M(ue,ve){return ue.charCodeAt(ve)<<24|ue.charCodeAt(ve+1)<<16|ue.charCodeAt(ve+2)<<8|255&ue.charCodeAt(ve+3)}function N(ue,ve,Ae,Ie){return ue.substring(0,ve)+Ie+ue.substring(ve+Ae)}let F,b;const _=this._document.createElement("canvas");_.width=1,_.height=1;const h=_.getContext("2d");let w=0;const x=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=N(P,976,x.length,x);const R=1482184792;let I=M(P,16);for(F=0,b=x.length-3;F<b;F+=4)I=I-R+M(x,F)|0;F<x.length&&(I=I-R+M(x+"XXX",F)|0),P=N(P,16,4,(0,p.string32)(I));const V=`url(data:font/opentype;base64,${btoa(P)});`;this.insertRule(`@font-face {font-family:"${x}";src:${V}}`);const ne=[];for(const ue of y)ne.push(ue.loadedName);ne.push(x);const re=this._document.createElement("div");re.style.visibility="hidden",re.style.width=re.style.height="10px",re.style.position="absolute",re.style.top=re.style.left="0px";for(const ue of ne){const ve=this._document.createElement("span");ve.textContent="Hi",ve.style.fontFamily=ue,re.appendChild(ve)}this._document.body.appendChild(re),function U(ue,ve){if(w++,w>30)return(0,p.warn)("Load test font never loaded."),void ve();h.font="30px "+ue,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0?ve():setTimeout(U.bind(null,ue,ve))}(x,()=>{re.remove(),G.complete()})}},O.FontFaceObject=class le{constructor(ee,{isEvalSupported:y=!0,disableFontFace:G=!1,ignoreErrors:M=!1,onUnsupportedFeature:N,fontRegistry:F=null}){this.compiledGlyphs=Object.create(null);for(const b in ee)this[b]=ee[b];this.isEvalSupported=!1!==y,this.disableFontFace=!0===G,this.ignoreErrors=!0===M,this._onUnsupportedFeature=N,this.fontRegistry=F}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let ee;if(this.cssFontInfo){const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ee=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}else ee=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),ee}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const ee=(0,p.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(ee)});`;let G;if(this.cssFontInfo){let M=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(M+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),G=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${M}src:${y}}`}else G=`@font-face {font-family:"${this.loadedName}";src:${y}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,y),G}getPathGenerator(ee,y){if(void 0!==this.compiledGlyphs[y])return this.compiledGlyphs[y];let G;try{G=ee.get(this.loadedName+"_path_"+y)}catch(M){if(!this.ignoreErrors)throw M;return this._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,p.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[y]=function(N,F){}}if(this.isEvalSupported&&p.FeatureTest.isEvalSupported){const M=[];for(const N of G){const F=void 0!==N.args?N.args.join(","):"";M.push("c.",N.cmd,"(",F,");\n")}return this.compiledGlyphs[y]=new Function("c","size",M.join(""))}return this.compiledGlyphs[y]=function(M,N){for(const F of G)"scale"===F.cmd&&(F.args=[N,-N]),M[F.cmd].apply(M,F.args)}}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AnnotationStorage=void 0;var p=X(9),ce=X(1);O.AnnotationStorage=class ae{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(pe,ee){const y=this._storage.get(pe);return void 0===y?ee:Object.assign(ee,y)}getRawValue(pe){return this._storage.get(pe)}setValue(pe,ee){const y=this._storage.get(pe);let G=!1;if(void 0!==y)for(const[M,N]of Object.entries(ee))y[M]!==N&&(G=!0,y[M]=N);else G=!0,this._storage.set(pe,ee);G&&this._setModified()}getAll(){return this._storage.size>0?(0,ce.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const pe=new p.MurmurHash3_64;for(const[ee,y]of this._storage)pe.update(`${ee}:${JSON.stringify(y)}`);return pe.hexdigest()}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MurmurHash3_64=void 0;var p=X(1);const ce=3285377520,ae=4294901760,le=65535;O.MurmurHash3_64=class pe{constructor(y){this.h1=y?4294967295&y:ce,this.h2=y?4294967295&y:ce}update(y){let G,M;if("string"==typeof y){G=new Uint8Array(2*y.length),M=0;for(let R=0,I=y.length;R<I;R++){const V=y.charCodeAt(R);V<=255?G[M++]=V:(G[M++]=V>>>8,G[M++]=255&V)}}else{if(!(0,p.isArrayBuffer)(y))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");G=y.slice(),M=G.byteLength}const N=M>>2,F=M-4*N,b=new Uint32Array(G.buffer,0,N);let _=0,h=0,w=this.h1,U=this.h2;const x=3432918353,P=461845907,u=x&le,g=P&le;for(let R=0;R<N;R++)1&R?(_=b[R],_=_*x&ae|_*u&le,_=_<<15|_>>>17,_=_*P&ae|_*g&le,w^=_,w=w<<13|w>>>19,w=5*w+3864292196):(h=b[R],h=h*x&ae|h*u&le,h=h<<15|h>>>17,h=h*P&ae|h*g&le,U^=h,U=U<<13|U>>>19,U=5*U+3864292196);switch(_=0,F){case 3:_^=G[4*N+2]<<16;case 2:_^=G[4*N+1]<<8;case 1:_^=G[4*N],_=_*x&ae|_*u&le,_=_<<15|_>>>17,_=_*P&ae|_*g&le,1&N?w^=_:U^=_}this.h1=w,this.h2=U}hexdigest(){let y=this.h1,G=this.h2;y^=G>>>1,y=3981806797*y&ae|36045*y&le,G=4283543511*G&ae|(2950163797*(G<<16|y>>>16)&ae)>>>16,y^=G>>>1,y=444984403*y&ae|60499*y&le,G=3301882366*G&ae|(3120437893*(G<<16|y>>>16)&ae)>>>16,y^=G>>>1;const M=(y>>>0).toString(16),N=(G>>>0).toString(16);return M.padStart(8,"0")+N.padStart(8,"0")}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.CanvasGraphics=void 0;var p=X(1),ce=X(11),ae=X(12),le=X(3),pe=X(5);const G=4096,_=16;function U(Q){if(Q._transformStack&&(Q._transformStack=[]),!Q.mozCurrentTransform){Q._originalSave=Q.save,Q._originalRestore=Q.restore,Q._originalRotate=Q.rotate,Q._originalScale=Q.scale,Q._originalTranslate=Q.translate,Q._originalTransform=Q.transform,Q._originalSetTransform=Q.setTransform,Q._originalResetTransform=Q.resetTransform,Q._transformMatrix=Q._transformMatrix||[1,0,0,1,0,0],Q._transformStack=[];try{const v=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Q),"lineWidth");Q._setLineWidth=v.set,Q._getLineWidth=v.get,Object.defineProperty(Q,"lineWidth",{set:function(d){this._setLineWidth(1.000001*d)},get:function(){return this._getLineWidth()}})}catch(v){}Object.defineProperty(Q,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(Q,"mozCurrentTransformInverse",{get:function(){const[E,d,S,D,k,H]=this._transformMatrix,W=E*D-d*S,fe=d*S-E*D;return[D/W,d/fe,S/fe,E/W,(D*k-S*H)/fe,(d*k-E*H)/W]}}),Q.save=function(){const E=this._transformMatrix;this._transformStack.push(E),this._transformMatrix=E.slice(0,6),this._originalSave()},Q.restore=function(){0===this._transformStack.length&&(0,p.warn)("Tried to restore a ctx when the stack was already empty.");const E=this._transformStack.pop();E&&(this._transformMatrix=E,this._originalRestore())},Q.translate=function(E,d){const S=this._transformMatrix;S[4]=S[0]*E+S[2]*d+S[4],S[5]=S[1]*E+S[3]*d+S[5],this._originalTranslate(E,d)},Q.scale=function(E,d){const S=this._transformMatrix;S[0]*=E,S[1]*=E,S[2]*=d,S[3]*=d,this._originalScale(E,d)},Q.transform=function(E,d,S,D,k,H){const W=this._transformMatrix;this._transformMatrix=[W[0]*E+W[2]*d,W[1]*E+W[3]*d,W[0]*S+W[2]*D,W[1]*S+W[3]*D,W[0]*k+W[2]*H+W[4],W[1]*k+W[3]*H+W[5]],Q._originalTransform(E,d,S,D,k,H)},Q.setTransform=function(E,d,S,D,k,H){this._transformMatrix=[E,d,S,D,k,H],Q._originalSetTransform(E,d,S,D,k,H)},Q.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],Q._originalResetTransform()},Q.rotate=function(E){const d=Math.cos(E),S=Math.sin(E),D=this._transformMatrix;this._transformMatrix=[D[0]*d+D[2]*S,D[1]*d+D[3]*S,D[0]*-S+D[2]*d,D[1]*-S+D[3]*d,D[4],D[5]],this._originalRotate(E)}}}class x{constructor(v){this.canvasFactory=v,this.cache=Object.create(null)}getCanvas(v,E,d,S){let D;return void 0!==this.cache[v]?(D=this.cache[v],this.canvasFactory.reset(D,E,d),D.context.setTransform(1,0,0,1,0,0)):(D=this.canvasFactory.create(E,d),this.cache[v]=D),S&&U(D.context),D}delete(v){delete this.cache[v]}clear(){for(const v in this.cache)this.canvasFactory.destroy(this.cache[v]),delete this.cache[v]}}function P(Q,v,E,d,S,D,k,H,W,fe){const[Ce,_e,we,Pe,ke,ze]=Q.mozCurrentTransform;if(0===_e&&0===we){const je=Math.round(k*Ce+ke),ie=Math.round(H*Pe+ze),Ke=Math.abs(Math.round((k+W)*Ce+ke)-je)||1,Xe=Math.abs(Math.round((H+fe)*Pe+ze)-ie)||1;return Q.setTransform(Math.sign(Ce),0,0,Math.sign(Pe),je,ie),Q.drawImage(v,E,d,S,D,0,0,Ke,Xe),Q.setTransform(Ce,_e,we,Pe,ke,ze),[Ke,Xe]}if(0===Ce&&0===Pe){const je=Math.round(H*we+ke),ie=Math.round(k*_e+ze),Ke=Math.abs(Math.round((H+fe)*we+ke)-je)||1,Xe=Math.abs(Math.round((k+W)*_e+ze)-ie)||1;return Q.setTransform(0,Math.sign(_e),Math.sign(we),0,je,ie),Q.drawImage(v,E,d,S,D,0,0,Xe,Ke),Q.setTransform(Ce,_e,we,Pe,ke,ze),[Xe,Ke]}return Q.drawImage(v,E,d,S,D,k,H,W,fe),[Math.hypot(Ce,_e)*W,Math.hypot(we,Pe)*fe]}class g{constructor(v,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=p.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=p.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,v,E])}clone(){const v=Object.create(this);return v.clipBox=this.clipBox.slice(),v}setCurrentPoint(v,E){this.x=v,this.y=E}updatePathMinMax(v,E,d){[E,d]=p.Util.applyTransform([E,d],v),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(v,E){const d=p.Util.applyTransform(E,v),S=p.Util.applyTransform(E.slice(2),v);this.minX=Math.min(this.minX,d[0],S[0]),this.minY=Math.min(this.minY,d[1],S[1]),this.maxX=Math.max(this.maxX,d[0],S[0]),this.maxY=Math.max(this.maxY,d[1],S[1])}updateScalingPathMinMax(v,E){p.Util.scaleMinMax(v,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(v,E,d,S,D,k,H,W,fe,Ce){const _e=p.Util.bezierBoundingBox(E,d,S,D,k,H,W,fe);if(Ce)return Ce[0]=Math.min(Ce[0],_e[0],_e[2]),Ce[1]=Math.max(Ce[1],_e[0],_e[2]),Ce[2]=Math.min(Ce[2],_e[1],_e[3]),void(Ce[3]=Math.max(Ce[3],_e[1],_e[3]));this.updateRectMinMax(v,_e)}getPathBoundingBox(v=ce.PathType.FILL,E=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(v===ce.PathType.STROKE){E||(0,p.unreachable)("Stroke bounding box must include transform.");const S=p.Util.singularValueDecompose2dScale(E),D=S[0]*this.lineWidth/2,k=S[1]*this.lineWidth/2;d[0]-=D,d[1]-=k,d[2]+=D,d[3]+=k}return d}updateClipFromPath(){const v=p.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(v||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(v){this.clipBox=v,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(v=ce.PathType.FILL,E=null){return p.Util.intersect(this.clipBox,this.getPathBoundingBox(v,E))}}function R(Q,v,E=null){if("undefined"!=typeof ImageData&&v instanceof ImageData)return void Q.putImageData(v,0,0);const d=v.height,S=v.width,D=d%_,k=(d-D)/_,H=0===D?k:k+1,W=Q.createImageData(S,_);let Ce,fe=0;const _e=v.data,we=W.data;let Pe,ke,ze,tt,Oe,He,je,$;if(E)switch(E.length){case 1:Oe=E[0],He=E[0],je=E[0],$=E[0];break;case 4:Oe=E[0],He=E[1],je=E[2],$=E[3]}if(v.kind===p.ImageKind.GRAYSCALE_1BPP){const ie=_e.byteLength,Te=new Uint32Array(we.buffer,0,we.byteLength>>2),Ke=Te.length,qe=S+7>>3;let Xe=4294967295,it=p.FeatureTest.isLittleEndian?4278190080:255;for($&&255===$[0]&&0===$[255]&&([Xe,it]=[it,Xe]),Pe=0;Pe<H;Pe++){for(ze=Pe<k?_:D,Ce=0,ke=0;ke<ze;ke++){const T=ie-fe;let he=0;const Re=T>qe?S:8*T-7,se=-8&Re;let K=0,L=0;for(;he<se;he+=8)L=_e[fe++],Te[Ce++]=128&L?Xe:it,Te[Ce++]=64&L?Xe:it,Te[Ce++]=32&L?Xe:it,Te[Ce++]=16&L?Xe:it,Te[Ce++]=8&L?Xe:it,Te[Ce++]=4&L?Xe:it,Te[Ce++]=2&L?Xe:it,Te[Ce++]=1&L?Xe:it;for(;he<Re;he++)0===K&&(L=_e[fe++],K=128),Te[Ce++]=L&K?Xe:it,K>>=1}for(;Ce<Ke;)Te[Ce++]=0;Q.putImageData(W,0,Pe*_)}}else if(v.kind===p.ImageKind.RGBA_32BPP){const ie=!!(Oe||He||je);for(ke=0,tt=S*_*4,Pe=0;Pe<k;Pe++){if(we.set(_e.subarray(fe,fe+tt)),fe+=tt,ie)for(let Te=0;Te<tt;Te+=4)Oe&&(we[Te+0]=Oe[we[Te+0]]),He&&(we[Te+1]=He[we[Te+1]]),je&&(we[Te+2]=je[we[Te+2]]);Q.putImageData(W,0,ke),ke+=_}if(Pe<H){if(tt=S*D*4,we.set(_e.subarray(fe,fe+tt)),ie)for(let Te=0;Te<tt;Te+=4)Oe&&(we[Te+0]=Oe[we[Te+0]]),He&&(we[Te+1]=He[we[Te+1]]),je&&(we[Te+2]=je[we[Te+2]]);Q.putImageData(W,0,ke)}}else{if(v.kind!==p.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${v.kind}`);{const ie=!!(Oe||He||je);for(ze=_,tt=S*ze,Pe=0;Pe<H;Pe++){for(Pe>=k&&(ze=D,tt=S*ze),Ce=0,ke=tt;ke--;)we[Ce++]=_e[fe++],we[Ce++]=_e[fe++],we[Ce++]=_e[fe++],we[Ce++]=255;if(ie)for(let Te=0;Te<Ce;Te+=4)Oe&&(we[Te+0]=Oe[we[Te+0]]),He&&(we[Te+1]=He[we[Te+1]]),je&&(we[Te+2]=je[we[Te+2]]);Q.putImageData(W,0,Pe*_)}}}}function I(Q,v){if(v.bitmap)return void Q.drawImage(v.bitmap,0,0);const E=v.height,d=v.width,S=E%_,D=(E-S)/_,k=0===S?D:D+1,H=Q.createImageData(d,_);let W=0;const fe=v.data,Ce=H.data;for(let _e=0;_e<k;_e++){const we=_e<D?_:S;({srcPos:W}=(0,ae.applyMaskImageData)({src:fe,srcPos:W,dest:Ce,width:d,height:we})),Q.putImageData(H,0,_e*_)}}function V(Q,v){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let d=0,S=E.length;d<S;d++){const D=E[d];void 0!==Q[D]&&(v[D]=Q[D])}void 0!==Q.setLineDash&&(v.setLineDash(Q.getLineDash()),v.lineDashOffset=Q.lineDashOffset)}function Y(Q,v){Q.strokeStyle=Q.fillStyle=v||"#000000",Q.fillRule="nonzero",Q.globalAlpha=1,Q.lineWidth=1,Q.lineCap="butt",Q.lineJoin="miter",Q.miterLimit=10,Q.globalCompositeOperation="source-over",Q.font="10px sans-serif",void 0!==Q.setLineDash&&(Q.setLineDash([]),Q.lineDashOffset=0)}function ne(Q,v,E,d){const S=Q.length;for(let D=3;D<S;D+=4){const k=Q[D];if(0===k)Q[D-3]=v,Q[D-2]=E,Q[D-1]=d;else if(k<255){const H=255-k;Q[D-3]=Q[D-3]*k+v*H>>8,Q[D-2]=Q[D-2]*k+E*H>>8,Q[D-1]=Q[D-1]*k+d*H>>8}}}function re(Q,v,E){const d=Q.length;for(let D=3;D<d;D+=4)v[D]=v[D]*(E?E[Q[D]]:Q[D])*.00392156862745098|0}function ue(Q,v,E){const d=Q.length;for(let S=3;S<d;S+=4){const D=77*Q[S-3]+152*Q[S-2]+28*Q[S-1];v[S]=E?v[S]*E[D>>8]>>8:v[S]*D>>16}}function Ie(Q,v){const E=p.Util.singularValueDecompose2dScale(Q);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*pe.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==v?v:E[0]<=d||E[1]<=d}const de=["butt","round","square"],Me=["miter","round","bevel"],xe={},Le={};class $e{constructor(v,E,d,S,D,k,H,W){this.ctx=v,this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=d,this.canvasFactory=S,this.imageLayer=D,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=k,this.cachedCanvases=new x(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=H,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==W?void 0:W.background)||null,this.foregroundColor=(null==W?void 0:W.foreground)||null,v&&U(v),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(v,E=null){return"string"==typeof v?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):E}beginDrawing({transform:v,viewport:E,transparency:d=!1,background:S=null}){const D=this.ctx.canvas.width,k=this.ctx.canvas.height,H=S||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const W=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const fe=this.backgroundColor=this.ctx.fillStyle;let Ce=!0,_e=H;if(this.ctx.fillStyle=H,_e=this.ctx.fillStyle,Ce="string"==typeof _e&&/^#[0-9A-Fa-f]{6}$/.test(_e),"#000000"===W&&"#ffffff"===fe||W===fe||!Ce)this.foregroundColor=this.backgroundColor=null;else{const we=parseInt(_e.slice(1),16),ke=(we&&65280)>>8,ze=we&&255,tt=He=>(He/=255)<=.03928?He/12.92:((He+.055)/1.055)**2.4,Oe=Math.round(.2126*tt((we&&16711680)>>16)+.7152*tt(ke)+.0722*tt(ze));this.selectColor=(He,je,$)=>{const ie=.2126*tt(He)+.7152*tt(je)+.0722*tt($);return Math.round(ie)===Oe?fe:W}}}if(this.ctx.fillStyle=this.backgroundColor||H,this.ctx.fillRect(0,0,D,k),this.ctx.restore(),d){const W=this.cachedCanvases.getCanvas("transparent",D,k,!0);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),Y(this.ctx,this.foregroundColor),v&&(this.ctx.transform.apply(this.ctx,v),this.outputScaleX=v[0],this.outputScaleY=v[0]),this.ctx.transform.apply(this.ctx,E.transform),this.viewportScale=E.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(v,E,d,S){const D=v.argsArray,k=v.fnArray;let H=E||0;const W=D.length;if(W===H)return H;const fe=W-H>10&&"function"==typeof d,Ce=fe?Date.now()+15:0;let _e=0;const we=this.commonObjs,Pe=this.objs;let ke;for(;;){if(void 0!==S&&H===S.nextBreakPoint)return S.breakIt(H,d),H;if(ke=k[H],ke!==p.OPS.dependency)this[ke].apply(this,D[H]);else for(const ze of D[H]){const tt=ze.startsWith("g_")?we:Pe;if(!tt.has(ze))return tt.get(ze,d),H}if(H++,H===W)return H;if(fe&&++_e>10){if(Date.now()>Ce)return d(),H;_e=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const v of this._cachedBitmapsMap.values()){for(const E of v.values())"undefined"!=typeof HTMLCanvasElement&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);v.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(v,E){const d=v.width,S=v.height;let Ce,_e,D=Math.max(Math.hypot(E[0],E[1]),1),k=Math.max(Math.hypot(E[2],E[3]),1),H=d,W=S,fe="prescale1";for(;D>2&&H>1||k>2&&W>1;){let we=H,Pe=W;D>2&&H>1&&(we=Math.ceil(H/2),D/=H/we),k>2&&W>1&&(Pe=Math.ceil(W/2),k/=W/Pe),Ce=this.cachedCanvases.getCanvas(fe,we,Pe,!1),_e=Ce.context,_e.clearRect(0,0,we,Pe),_e.drawImage(v,0,0,H,W,0,0,we,Pe),v=Ce.canvas,H=we,W=Pe,fe="prescale1"===fe?"prescale2":"prescale1"}return{img:v,paintWidth:H,paintHeight:W}}_createMaskCanvas(v){const E=this.ctx,{width:d,height:S}=v,D=this.current.fillColor,k=this.current.patternFill,H=E.mozCurrentTransform;let W,fe,Ce,_e;if((v.bitmap||v.data)&&v.count>1){const Ke=v.bitmap||v.data.buffer,qe=H.slice(0,4);fe=JSON.stringify(k?qe:[qe,D]),W=this._cachedBitmapsMap.get(Ke),W||(W=new Map,this._cachedBitmapsMap.set(Ke,W));const Xe=W.get(fe);if(Xe&&!k)return{canvas:Xe,offsetX:Math.round(Math.min(H[0],H[2])+H[4]),offsetY:Math.round(Math.min(H[1],H[3])+H[5])};Ce=Xe}Ce||(_e=this.cachedCanvases.getCanvas("maskCanvas",d,S,!1),I(_e.context,v));let we=p.Util.transform(H,[1/d,0,0,-1/S,0,0]);we=p.Util.transform(we,[1,0,0,1,0,-S]);const Pe=p.Util.applyTransform([0,0],we),ke=p.Util.applyTransform([d,S],we),ze=p.Util.normalizeRect([Pe[0],Pe[1],ke[0],ke[1]]),tt=Math.round(ze[2]-ze[0])||1,Oe=Math.round(ze[3]-ze[1])||1,He=this.cachedCanvases.getCanvas("fillCanvas",tt,Oe,!0),je=He.context,$=Math.min(Pe[0],ke[0]),ie=Math.min(Pe[1],ke[1]);je.translate(-$,-ie),je.transform.apply(je,we),Ce||(Ce=this._scaleImage(_e.canvas,je.mozCurrentTransformInverse),Ce=Ce.img,W&&k&&W.set(fe,Ce)),je.imageSmoothingEnabled=Ie(je.mozCurrentTransform,v.interpolate),P(je,Ce,0,0,Ce.width,Ce.height,0,0,d,S),je.globalCompositeOperation="source-in";const Te=p.Util.transform(je.mozCurrentTransformInverse,[1,0,0,1,-$,-ie]);return je.fillStyle=k?D.getPattern(E,this,Te,ce.PathType.FILL):D,je.fillRect(0,0,d,S),W&&!k&&(this.cachedCanvases.delete("fillCanvas"),W.set(fe,He.canvas)),{canvas:He.canvas,offsetX:Math.round($),offsetY:Math.round(ie)}}setLineWidth(v){v!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=v,this.ctx.lineWidth=v}setLineCap(v){this.ctx.lineCap=de[v]}setLineJoin(v){this.ctx.lineJoin=Me[v]}setMiterLimit(v){this.ctx.miterLimit=v}setDash(v,E){const d=this.ctx;void 0!==d.setLineDash&&(d.setLineDash(v),d.lineDashOffset=E)}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(let E=0,d=v.length;E<d;E++){const S=v[E],k=S[1];switch(S[0]){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k[0],k[1]);break;case"CA":this.current.strokeAlpha=S[1];break;case"ca":this.current.fillAlpha=S[1],this.ctx.globalAlpha=S[1];break;case"BM":this.ctx.globalCompositeOperation=k;break;case"SMask":this.current.activeSMask=k?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=k}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const v=this.inSMaskMode;this.current.activeSMask&&!v?this.beginSMaskMode():!this.current.activeSMask&&v&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const S=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=S.context;const D=this.ctx;D.setTransform.apply(D,this.suspendedCtx.mozCurrentTransform),V(this.suspendedCtx,D),function w(Q,v){if(Q._removeMirroring)throw new Error("Context is already forwarding operations.");Q.__originalSave=Q.save,Q.__originalRestore=Q.restore,Q.__originalRotate=Q.rotate,Q.__originalScale=Q.scale,Q.__originalTranslate=Q.translate,Q.__originalTransform=Q.transform,Q.__originalSetTransform=Q.setTransform,Q.__originalResetTransform=Q.resetTransform,Q.__originalClip=Q.clip,Q.__originalMoveTo=Q.moveTo,Q.__originalLineTo=Q.lineTo,Q.__originalBezierCurveTo=Q.bezierCurveTo,Q.__originalRect=Q.rect,Q.__originalClosePath=Q.closePath,Q.__originalBeginPath=Q.beginPath,Q._removeMirroring=()=>{Q.save=Q.__originalSave,Q.restore=Q.__originalRestore,Q.rotate=Q.__originalRotate,Q.scale=Q.__originalScale,Q.translate=Q.__originalTranslate,Q.transform=Q.__originalTransform,Q.setTransform=Q.__originalSetTransform,Q.resetTransform=Q.__originalResetTransform,Q.clip=Q.__originalClip,Q.moveTo=Q.__originalMoveTo,Q.lineTo=Q.__originalLineTo,Q.bezierCurveTo=Q.__originalBezierCurveTo,Q.rect=Q.__originalRect,Q.closePath=Q.__originalClosePath,Q.beginPath=Q.__originalBeginPath,delete Q._removeMirroring},Q.save=function(){v.save(),this.__originalSave()},Q.restore=function(){v.restore(),this.__originalRestore()},Q.translate=function(d,S){v.translate(d,S),this.__originalTranslate(d,S)},Q.scale=function(d,S){v.scale(d,S),this.__originalScale(d,S)},Q.transform=function(d,S,D,k,H,W){v.transform(d,S,D,k,H,W),this.__originalTransform(d,S,D,k,H,W)},Q.setTransform=function(d,S,D,k,H,W){v.setTransform(d,S,D,k,H,W),this.__originalSetTransform(d,S,D,k,H,W)},Q.resetTransform=function(){v.resetTransform(),this.__originalResetTransform()},Q.rotate=function(d){v.rotate(d),this.__originalRotate(d)},Q.clip=function(d){v.clip(d),this.__originalClip(d)},Q.moveTo=function(E,d){v.moveTo(E,d),this.__originalMoveTo(E,d)},Q.lineTo=function(E,d){v.lineTo(E,d),this.__originalLineTo(E,d)},Q.bezierCurveTo=function(E,d,S,D,k,H){v.bezierCurveTo(E,d,S,D,k,H),this.__originalBezierCurveTo(E,d,S,D,k,H)},Q.rect=function(E,d,S,D){v.rect(E,d,S,D),this.__originalRect(E,d,S,D)},Q.closePath=function(){v.closePath(),this.__originalClosePath()},Q.beginPath=function(){v.beginPath(),this.__originalBeginPath()}}(D,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(v){this.current.activeSMask&&(v?(v[0]=Math.floor(v[0]),v[1]=Math.floor(v[1]),v[2]=Math.ceil(v[2]),v[3]=Math.ceil(v[3])):v=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function Ae(Q,v,E,d){const S=d[0],D=d[1],k=d[2]-S,H=d[3]-D;0===k||0===H||(function ve(Q,v,E,d,S,D,k,H,W,fe,Ce){const _e=!!D,we=_e?D[0]:0,Pe=_e?D[1]:0,ke=_e?D[2]:0;let ze;ze="Luminosity"===S?ue:re;const Oe=Math.min(d,Math.ceil(1048576/E));for(let He=0;He<d;He+=Oe){const je=Math.min(Oe,d-He),$=Q.getImageData(H-fe,He+(W-Ce),E,je),ie=v.getImageData(H,He+W,E,je);_e&&ne($.data,we,Pe,ke),ze($.data,ie.data,k),v.putImageData(ie,H,He+W)}}(v.context,E,k,H,v.subtype,v.backdrop,v.transferMap,S,D,v.offsetX,v.offsetY),Q.save(),Q.globalAlpha=1,Q.globalCompositeOperation="source-over",Q.setTransform(1,0,0,1,0,0),Q.drawImage(E.canvas,0,0),Q.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,v),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(V(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const v=this.current;this.stateStack.push(v),this.current=v.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(v,E,d,S,D,k){this.ctx.transform(v,E,d,S,D,k),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(v,E,d){const S=this.ctx,D=this.current;let W,fe,k=D.x,H=D.y;const Ce=S.mozCurrentTransform,_e=0===Ce[0]&&0===Ce[3]||0===Ce[1]&&0===Ce[2],we=_e?d.slice(0):null;for(let Pe=0,ke=0,ze=v.length;Pe<ze;Pe++)switch(0|v[Pe]){case p.OPS.rectangle:k=E[ke++],H=E[ke++];const tt=E[ke++],Oe=E[ke++],He=k+tt,je=H+Oe;S.moveTo(k,H),0===tt||0===Oe?S.lineTo(He,je):(S.lineTo(He,H),S.lineTo(He,je),S.lineTo(k,je)),_e||D.updateRectMinMax(Ce,[k,H,He,je]),S.closePath();break;case p.OPS.moveTo:k=E[ke++],H=E[ke++],S.moveTo(k,H),_e||D.updatePathMinMax(Ce,k,H);break;case p.OPS.lineTo:k=E[ke++],H=E[ke++],S.lineTo(k,H),_e||D.updatePathMinMax(Ce,k,H);break;case p.OPS.curveTo:W=k,fe=H,k=E[ke+4],H=E[ke+5],S.bezierCurveTo(E[ke],E[ke+1],E[ke+2],E[ke+3],k,H),D.updateCurvePathMinMax(Ce,W,fe,E[ke],E[ke+1],E[ke+2],E[ke+3],k,H,we),ke+=6;break;case p.OPS.curveTo2:W=k,fe=H,S.bezierCurveTo(k,H,E[ke],E[ke+1],E[ke+2],E[ke+3]),D.updateCurvePathMinMax(Ce,W,fe,k,H,E[ke],E[ke+1],E[ke+2],E[ke+3],we),k=E[ke+2],H=E[ke+3],ke+=4;break;case p.OPS.curveTo3:W=k,fe=H,k=E[ke+2],H=E[ke+3],S.bezierCurveTo(E[ke],E[ke+1],k,H,k,H),D.updateCurvePathMinMax(Ce,W,fe,E[ke],E[ke+1],k,H,k,H,we),ke+=4;break;case p.OPS.closePath:S.closePath()}_e&&D.updateScalingPathMinMax(Ce,we),D.setCurrentPoint(k,H)}closePath(){this.ctx.closePath()}stroke(v){v=void 0===v||v;const E=this.ctx,d=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof d&&(null==d?void 0:d.getPattern)?(E.save(),E.strokeStyle=d.getPattern(E,this,E.mozCurrentTransformInverse,ce.PathType.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),v&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(v){v=void 0===v||v;const E=this.ctx,d=this.current.fillColor;let D=!1;this.current.patternFill&&(E.save(),E.fillStyle=d.getPattern(E,this,E.mozCurrentTransformInverse,ce.PathType.FILL),D=!0);const k=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==k&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),D&&E.restore(),v&&this.consumePath(k)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=xe}eoClip(){this.pendingClip=Le}beginText(){this.current.textMatrix=p.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const v=this.pendingTextPaths,E=this.ctx;if(void 0!==v){E.save(),E.beginPath();for(let d=0;d<v.length;d++){const S=v[d];E.setTransform.apply(E,S.transform),E.translate(S.x,S.y),S.addToPath(E,S.fontSize)}E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}else E.beginPath()}setCharSpacing(v){this.current.charSpacing=v}setWordSpacing(v){this.current.wordSpacing=v}setHScale(v){this.current.textHScale=v/100}setLeading(v){this.current.leading=-v}setFont(v,E){const d=this.commonObjs.get(v),S=this.current;if(!d)throw new Error(`Can't find font for ${v}`);if(S.fontMatrix=d.fontMatrix||p.FONT_IDENTITY_MATRIX,(0===S.fontMatrix[0]||0===S.fontMatrix[3])&&(0,p.warn)("Invalid font matrix for font "+v),E<0?(E=-E,S.fontDirection=-1):S.fontDirection=1,this.current.font=d,this.current.fontSize=E,d.isType3Font)return;let k="normal";d.black?k="900":d.bold&&(k="bold");const H=d.italic?"italic":"normal",W=`"${d.loadedName||"sans-serif"}", ${d.fallbackName}`;let fe=E;E<16?fe=16:E>100&&(fe=100),this.current.fontSizeScale=E/fe,this.ctx.font=`${H} ${k} ${fe}px ${W}`}setTextRenderingMode(v){this.current.textRenderingMode=v}setTextRise(v){this.current.textRise=v}moveText(v,E){this.current.x=this.current.lineX+=v,this.current.y=this.current.lineY+=E}setLeadingMoveText(v,E){this.setLeading(-E),this.moveText(v,E)}setTextMatrix(v,E,d,S,D,k){this.current.textMatrix=[v,E,d,S,D,k],this.current.textMatrixScale=Math.hypot(v,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(v,E,d,S){const D=this.ctx,k=this.current,H=k.font,W=k.textRenderingMode,fe=k.fontSize/k.fontSizeScale,Ce=W&p.TextRenderingMode.FILL_STROKE_MASK,_e=!!(W&p.TextRenderingMode.ADD_TO_PATH_FLAG),we=k.patternFill&&!H.missingFile;let Pe;(H.disableFontFace||_e||we)&&(Pe=H.getPathGenerator(this.commonObjs,v)),H.disableFontFace||we?(D.save(),D.translate(E,d),D.beginPath(),Pe(D,fe),S&&D.setTransform.apply(D,S),(Ce===p.TextRenderingMode.FILL||Ce===p.TextRenderingMode.FILL_STROKE)&&D.fill(),(Ce===p.TextRenderingMode.STROKE||Ce===p.TextRenderingMode.FILL_STROKE)&&D.stroke(),D.restore()):((Ce===p.TextRenderingMode.FILL||Ce===p.TextRenderingMode.FILL_STROKE)&&D.fillText(v,E,d),(Ce===p.TextRenderingMode.STROKE||Ce===p.TextRenderingMode.FILL_STROKE)&&D.strokeText(v,E,d)),_e&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:D.mozCurrentTransform,x:E,y:d,fontSize:fe,addToPath:Pe})}get isFontSubpixelAAEnabled(){const{context:v}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);v.scale(1.5,1),v.fillText("I",0,10);const E=v.getImageData(0,0,10,10).data;let d=!1;for(let S=3;S<E.length;S+=4)if(E[S]>0&&E[S]<255){d=!0;break}return(0,p.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(v){const E=this.current,d=E.font;if(d.isType3Font)return this.showType3Text(v);const S=E.fontSize;if(0===S)return;const D=this.ctx,k=E.fontSizeScale,H=E.charSpacing,W=E.wordSpacing,fe=E.fontDirection,Ce=E.textHScale*fe,_e=v.length,we=d.vertical,Pe=we?1:-1,ke=d.defaultVMetrics,ze=S*E.fontMatrix[0],tt=E.textRenderingMode===p.TextRenderingMode.FILL&&!d.disableFontFace&&!E.patternFill;let Oe;if(D.save(),D.transform.apply(D,E.textMatrix),D.translate(E.x,E.y+E.textRise),D.scale(Ce,fe>0?-1:1),E.patternFill){D.save();const Te=E.fillColor.getPattern(D,this,D.mozCurrentTransformInverse,ce.PathType.FILL);Oe=D.mozCurrentTransform,D.restore(),D.fillStyle=Te}let He=E.lineWidth;const je=E.textMatrixScale;if(0===je||0===He){const Te=E.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;(Te===p.TextRenderingMode.STROKE||Te===p.TextRenderingMode.FILL_STROKE)&&(He=this.getSinglePixelWidth())}else He/=je;1!==k&&(D.scale(k,k),He/=k),D.lineWidth=He;let ie,$=0;for(ie=0;ie<_e;++ie){const Te=v[ie];if("number"==typeof Te){$+=Pe*Te*S/1e3;continue}let Ke=!1;const qe=(Te.isSpace?W:0)+H,Xe=Te.fontChar,it=Te.accent;let T,he,se,Re=Te.width;if(we){const K=Te.vmetric||ke,L=-(Te.vmetric?K[1]:.5*Re)*ze;Re=K?-K[0]:Re,T=L/k,he=($+K[2]*ze)/k}else T=$/k,he=0;if(d.remeasure&&Re>0){const K=1e3*D.measureText(Xe).width/S*k;if(Re<K&&this.isFontSubpixelAAEnabled){const L=Re/K;Ke=!0,D.save(),D.scale(L,1),T/=L}else Re!==K&&(T+=(Re-K)/2e3*S/k)}this.contentVisible&&(Te.isInFont||d.missingFile)&&(tt&&!it?D.fillText(Xe,T,he):(this.paintChar(Xe,T,he,Oe),it&&this.paintChar(it.fontChar,T+S*it.offset.x/k,he-S*it.offset.y/k,Oe))),se=we?Re*ze-qe*fe:Re*ze+qe*fe,$+=se,Ke&&D.restore()}we?E.y-=$:E.x+=$*Ce,D.restore(),this.compose()}showType3Text(v){const E=this.ctx,d=this.current,S=d.font,D=d.fontSize,k=d.fontDirection,H=S.vertical?1:-1,W=d.charSpacing,fe=d.wordSpacing,Ce=d.textHScale*k,_e=d.fontMatrix||p.FONT_IDENTITY_MATRIX,we=v.length;let ke,ze,tt,Oe;if(d.textRenderingMode!==p.TextRenderingMode.INVISIBLE&&0!==D){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,E.save(),E.transform.apply(E,d.textMatrix),E.translate(d.x,d.y),E.scale(Ce,k),ke=0;ke<we;++ke){if(ze=v[ke],"number"==typeof ze){Oe=H*ze*D/1e3,this.ctx.translate(Oe,0),d.x+=Oe*Ce;continue}const He=(ze.isSpace?fe:0)+W,je=S.charProcOperatorList[ze.operatorListId];je?(this.contentVisible&&(this.processingType3=ze,this.save(),E.scale(D,D),E.transform.apply(E,_e),this.executeOperatorList(je),this.restore()),tt=p.Util.applyTransform([ze.width,0],_e)[0]*D+He,E.translate(tt,0),d.x+=tt*Ce):(0,p.warn)(`Type3 character "${ze.operatorListId}" is not available.`)}E.restore(),this.processingType3=null}}setCharWidth(v,E){}setCharWidthAndBounds(v,E,d,S,D,k){this.ctx.rect(d,S,D-d,k-S),this.ctx.clip(),this.endPath()}getColorN_Pattern(v){let E;if("TilingPattern"===v[0]){const d=v[1],S=this.baseTransform||this.ctx.mozCurrentTransform.slice();E=new ce.TilingPattern(v,d,this.ctx,{createCanvasGraphics:k=>new $e(k,this.commonObjs,this.objs,this.canvasFactory)},S)}else E=this._getPattern(v[1],v[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(v,E,d){var D;const S=(null==(D=this.selectColor)?void 0:D.call(this,v,E,d))||p.Util.makeHexColor(v,E,d);this.ctx.strokeStyle=S,this.current.strokeColor=S}setFillRGBColor(v,E,d){var D;const S=(null==(D=this.selectColor)?void 0:D.call(this,v,E,d))||p.Util.makeHexColor(v,E,d);this.ctx.fillStyle=S,this.current.fillColor=S,this.current.patternFill=!1}_getPattern(v,E=null){let d;return this.cachedPatterns.has(v)?d=this.cachedPatterns.get(v):(d=(0,ce.getShadingPattern)(this.objs.get(v)),this.cachedPatterns.set(v,d)),E&&(d.matrix=E),d}shadingFill(v){if(!this.contentVisible)return;const E=this.ctx;this.save();const d=this._getPattern(v);E.fillStyle=d.getPattern(E,this,E.mozCurrentTransformInverse,ce.PathType.SHADING);const S=E.mozCurrentTransformInverse;if(S){const D=E.canvas,k=D.width,H=D.height,W=p.Util.applyTransform([0,0],S),fe=p.Util.applyTransform([0,H],S),Ce=p.Util.applyTransform([k,0],S),_e=p.Util.applyTransform([k,H],S),we=Math.min(W[0],fe[0],Ce[0],_e[0]),Pe=Math.min(W[1],fe[1],Ce[1],_e[1]),ke=Math.max(W[0],fe[0],Ce[0],_e[0]),ze=Math.max(W[1],fe[1],Ce[1],_e[1]);this.ctx.fillRect(we,Pe,ke-we,ze-Pe)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,p.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,p.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(v,E){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(v)&&6===v.length&&this.transform.apply(this,v),this.baseTransform=this.ctx.mozCurrentTransform,E)&&(this.ctx.rect(E[0],E[1],E[2]-E[0],E[3]-E[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,E),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(v){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;v.isolated||(0,p.info)("TODO: Support non-isolated groups."),v.knockout&&(0,p.warn)("Knockout groups not supported.");const d=E.mozCurrentTransform;if(v.matrix&&E.transform.apply(E,v.matrix),!v.bbox)throw new Error("Bounding box is required.");let S=p.Util.getAxialAlignedBoundingBox(v.bbox,E.mozCurrentTransform);S=p.Util.intersect(S,[0,0,E.canvas.width,E.canvas.height])||[0,0,0,0];const k=Math.floor(S[0]),H=Math.floor(S[1]);let W=Math.max(Math.ceil(S[2])-k,1),fe=Math.max(Math.ceil(S[3])-H,1),Ce=1,_e=1;W>G&&(Ce=W/G,W=G),fe>G&&(_e=fe/G,fe=G),this.current.startNewPathAndClipBox([0,0,W,fe]);let we="groupAt"+this.groupLevel;v.smask&&(we+="_smask_"+this.smaskCounter++%2);const Pe=this.cachedCanvases.getCanvas(we,W,fe,!0),ke=Pe.context;ke.scale(1/Ce,1/_e),ke.translate(-k,-H),ke.transform.apply(ke,d),v.smask?this.smaskStack.push({canvas:Pe.canvas,context:ke,offsetX:k,offsetY:H,scaleX:Ce,scaleY:_e,subtype:v.smask.subtype,backdrop:v.smask.backdrop,transferMap:v.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(k,H),E.scale(Ce,_e),E.save()),V(E,ke),this.ctx=ke,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(v){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,v.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const S=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,S);const D=p.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],S);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose(D)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(v,E,d,S,D){if(this.save(),Array.isArray(E)&&4===E.length){const k=E[2]-E[0],H=E[3]-E[1];if(D&&this.annotationCanvasMap){(d=d.slice())[4]-=E[0],d[5]-=E[1],(E=E.slice())[0]=E[1]=0,E[2]=k,E[3]=H;const[W,fe]=p.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:Ce}=this,_e=Math.ceil(k*this.outputScaleX*Ce),we=Math.ceil(H*this.outputScaleY*Ce);this.annotationCanvas=this.canvasFactory.create(_e,we);const{canvas:Pe,context:ke}=this.annotationCanvas,ze=`var(--zoom-factor) * ${pe.PixelsPerInch.PDF_TO_CSS_UNITS}`;Pe.style.width=`calc(${k}px * ${ze})`,Pe.style.height=`calc(${H}px * ${ze})`,this.annotationCanvasMap.set(v,Pe),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ke,this.ctx.setTransform(W,0,0,-fe,0,H*fe),U(this.ctx),Y(this.ctx,this.foregroundColor)}else Y(this.ctx,this.foregroundColor),this.ctx.rect(E[0],E[1],k,H),this.ctx.clip(),this.endPath()}this.current=new g(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,d),this.transform.apply(this,S)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(v){if(!this.contentVisible)return;const E=v.count;(v=this.getObject(v.data,v)).count=E;const d=this.ctx,S=this.processingType3;if(S&&(void 0===S.compiled&&(S.compiled=function u(Q){const{width:v,height:E}=Q;if(v>1e3||E>1e3)return null;const S=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),D=v+1;let H,W,fe,k=new Uint8Array(D*(E+1));const Ce=v+7&-8;let _e=new Uint8Array(Ce*E),we=0;for(const je of Q.data){let $=128;for(;$>0;)_e[we++]=je&$?0:255,$>>=1}let Pe=0;for(we=0,0!==_e[we]&&(k[0]=1,++Pe),W=1;W<v;W++)_e[we]!==_e[we+1]&&(k[W]=_e[we]?2:1,++Pe),we++;for(0!==_e[we]&&(k[W]=2,++Pe),H=1;H<E;H++){we=H*Ce,fe=H*D,_e[we-Ce]!==_e[we]&&(k[fe]=_e[we]?1:8,++Pe);let je=(_e[we]?4:0)+(_e[we-Ce]?8:0);for(W=1;W<v;W++)je=(je>>2)+(_e[we+1]?4:0)+(_e[we-Ce+1]?8:0),S[je]&&(k[fe+W]=S[je],++Pe),we++;if(_e[we-Ce]!==_e[we]&&(k[fe+W]=_e[we]?2:4,++Pe),Pe>1e3)return null}for(we=Ce*(E-1),fe=H*D,0!==_e[we]&&(k[fe]=8,++Pe),W=1;W<v;W++)_e[we]!==_e[we+1]&&(k[fe+W]=_e[we]?4:8,++Pe),we++;if(0!==_e[we]&&(k[fe+W]=4,++Pe),Pe>1e3)return null;const ke=new Int32Array([0,D,-1,0,-D,0,0,0,1]);let ze,tt,Oe;for(le.isNodeJS?tt=[]:ze=new Path2D,H=0;Pe&&H<=E;H++){let je=H*D;const $=je+v;for(;je<$&&!k[je];)je++;if(je===$)continue;ze?ze.moveTo(je%D,H):Oe=[je%D,H];const ie=je;let Te=k[je];do{const Ke=ke[Te];do{je+=Ke}while(!k[je]);const qe=k[je];5!==qe&&10!==qe?(Te=qe,k[je]=0):(Te=qe&51*Te>>4,k[je]&=Te>>2|Te<<2),ze?ze.lineTo(je%D,je/D|0):Oe.push(je%D,je/D|0),k[je]||--Pe}while(ie!==je);ze||tt.push(Oe),--H}return _e=null,k=null,function(je){if(je.save(),je.scale(1/v,-1/E),je.translate(0,-E),ze)je.fill(ze);else{je.beginPath();for(const $ of tt){je.moveTo($[0],$[1]);for(let ie=2,Te=$.length;ie<Te;ie+=2)je.lineTo($[ie],$[ie+1])}je.fill()}je.beginPath(),je.restore()}}(v)),S.compiled))return void S.compiled(d);const D=this._createMaskCanvas(v),k=D.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(k,D.offsetX,D.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(v,E,d=0,S=0,D,k){if(!this.contentVisible)return;v=this.getObject(v.data,v);const H=this.ctx;H.save();const W=H.mozCurrentTransform;H.transform(E,d,S,D,0,0);const fe=this._createMaskCanvas(v);H.setTransform(1,0,0,1,0,0);for(let Ce=0,_e=k.length;Ce<_e;Ce+=2){const we=p.Util.transform(W,[E,d,S,D,k[Ce],k[Ce+1]]),[Pe,ke]=p.Util.applyTransform([0,0],we);H.drawImage(fe.canvas,Pe,ke)}H.restore(),this.compose()}paintImageMaskXObjectGroup(v){if(!this.contentVisible)return;const E=this.ctx,d=this.current.fillColor,S=this.current.patternFill;for(let D=0,k=v.length;D<k;D++){const H=v[D],W=H.width,fe=H.height,Ce=this.cachedCanvases.getCanvas("maskCanvas",W,fe,!1),_e=Ce.context;_e.save(),I(_e,H),_e.globalCompositeOperation="source-in",_e.fillStyle=S?d.getPattern(_e,this,E.mozCurrentTransformInverse,ce.PathType.FILL):d,_e.fillRect(0,0,W,fe),_e.restore(),E.save(),E.transform.apply(E,H.transform),E.scale(1,-1),P(E,Ce.canvas,0,0,W,fe,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(v){if(!this.contentVisible)return;const E=this.getObject(v);E?this.paintInlineImageXObject(E):(0,p.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(v,E,d,S){if(!this.contentVisible)return;const D=this.getObject(v);if(!D)return void(0,p.warn)("Dependent image isn't ready yet");const k=D.width,H=D.height,W=[];for(let fe=0,Ce=S.length;fe<Ce;fe+=2)W.push({transform:[E,0,0,d,S[fe],S[fe+1]],x:0,y:0,w:k,h:H});this.paintInlineImageXObjectGroup(D,W)}paintInlineImageXObject(v){if(!this.contentVisible)return;const E=v.width,d=v.height,S=this.ctx;let D;if(this.save(),S.scale(1/E,-1/d),"function"==typeof HTMLElement&&v instanceof HTMLElement||!v.data)D=v;else{const fe=this.cachedCanvases.getCanvas("inlineImage",E,d,!1);R(fe.context,v,this.current.transferMaps),D=fe.canvas}const k=this._scaleImage(D,S.mozCurrentTransformInverse);S.imageSmoothingEnabled=Ie(S.mozCurrentTransform,v.interpolate);const[H,W]=P(S,k.img,0,0,k.paintWidth,k.paintHeight,0,-d,E,d);if(this.imageLayer){const fe=this.getCanvasPosition(0,-d);this.imageLayer.appendImage({imgData:v,left:fe[0],top:fe[1],width:H,height:W})}this.compose(),this.restore()}paintInlineImageXObjectGroup(v,E){if(!this.contentVisible)return;const d=this.ctx,S=v.width,D=v.height,k=this.cachedCanvases.getCanvas("inlineImage",S,D,!1);R(k.context,v,this.current.transferMaps);for(let W=0,fe=E.length;W<fe;W++){const Ce=E[W];if(d.save(),d.transform.apply(d,Ce.transform),d.scale(1,-1),P(d,k.canvas,Ce.x,Ce.y,Ce.w,Ce.h,0,-1,1,1),this.imageLayer){const _e=this.getCanvasPosition(Ce.x,Ce.y);this.imageLayer.appendImage({imgData:v,left:_e[0],top:_e[1],width:S,height:D})}d.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(v){}markPointProps(v,E){}beginMarkedContent(v){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(v,E){this.markedContentStack.push("OC"===v?{visible:this.optionalContentConfig.isVisible(E)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(v){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(v);const d=this.ctx;this.pendingClip&&(E||(this.pendingClip===Le?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const v=this.ctx.mozCurrentTransform;if(0===v[1]&&0===v[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(v[0]),Math.abs(v[3]));else{const E=Math.abs(v[0]*v[3]-v[2]*v[1]),d=Math.hypot(v[0],v[2]),S=Math.hypot(v[1],v[3]);this._cachedGetSinglePixelWidth=Math.max(d,S)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:v}=this.current,E=this.ctx.mozCurrentTransform;let d,S;if(0===E[1]&&0===E[2]){const D=Math.abs(E[0]),k=Math.abs(E[3]);if(0===v)d=1/D,S=1/k;else{const H=D*v,W=k*v;d=H<1?1/H:1,S=W<1?1/W:1}}else{const D=Math.abs(E[0]*E[3]-E[2]*E[1]),k=Math.hypot(E[0],E[1]),H=Math.hypot(E[2],E[3]);if(0===v)d=H/D,S=k/D;else{const W=v*D;d=H>W?H/W:1,S=k>W?k/W:1}}this._cachedScaleForStroking=[d,S]}return this._cachedScaleForStroking}rescaleAndStroke(v){const{ctx:E}=this,{lineWidth:d}=this.current,[S,D]=this.getScaleForStroking();if(E.lineWidth=d||1,1===S&&1===D)return void E.stroke();let k,H,W;v&&(k=E.mozCurrentTransform.slice(),H=E.getLineDash().slice(),W=E.lineDashOffset),E.scale(S,D);const fe=Math.max(S,D);E.setLineDash(E.getLineDash().map(Ce=>Ce/fe)),E.lineDashOffset/=fe,E.stroke(),v&&(E.setTransform(...k),E.setLineDash(H),E.lineDashOffset=W)}getCanvasPosition(v,E){const d=this.ctx.mozCurrentTransform;return[d[0]*v+d[2]*E+d[4],d[1]*v+d[3]*E+d[5]]}isContentVisible(){for(let v=this.markedContentStack.length-1;v>=0;v--)if(!this.markedContentStack[v].visible)return!1;return!0}}O.CanvasGraphics=$e;for(const Q in p.OPS)void 0!==$e.prototype[Q]&&($e.prototype[p.OPS[Q]]=$e.prototype[Q])},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.TilingPattern=O.PathType=void 0,O.getShadingPattern=function F(h){switch(h[0]){case"RadialAxial":return new ee(h);case"Mesh":return new M(h);case"Dummy":return new N}throw new Error(`Unknown IR type: ${h[0]}`)};var p=X(1),ce=X(3);const ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function le(h,w){if(!w||ce.isNodeJS)return;const U=w[2]-w[0],x=w[3]-w[1],P=new Path2D;P.rect(w[0],w[1],U,x),h.clip(P)}O.PathType=ae;class pe{constructor(){this.constructor===pe&&(0,p.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,p.unreachable)("Abstract method `getPattern` called.")}}class ee extends pe{constructor(w){super(),this._type=w[1],this._bbox=w[2],this._colorStops=w[3],this._p0=w[4],this._p1=w[5],this._r0=w[6],this._r1=w[7],this.matrix=null}_createGradient(w){let U;"axial"===this._type?U=w.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(U=w.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)U.addColorStop(x[0],x[1]);return U}getPattern(w,U,x,P){let u;if(P===ae.STROKE||P===ae.FILL){const g=U.current.getClippedPathBoundingBox(P,w.mozCurrentTransform)||[0,0,0,0],R=Math.ceil(g[2]-g[0])||1,I=Math.ceil(g[3]-g[1])||1,V=U.cachedCanvases.getCanvas("pattern",R,I,!0),Y=V.context;Y.clearRect(0,0,Y.canvas.width,Y.canvas.height),Y.beginPath(),Y.rect(0,0,Y.canvas.width,Y.canvas.height),Y.translate(-g[0],-g[1]),x=p.Util.transform(x,[1,0,0,1,g[0],g[1]]),Y.transform.apply(Y,U.baseTransform),this.matrix&&Y.transform.apply(Y,this.matrix),le(Y,this._bbox),Y.fillStyle=this._createGradient(Y),Y.fill(),u=w.createPattern(V.canvas,"no-repeat");const ne=new DOMMatrix(x);try{u.setTransform(ne)}catch(re){(0,p.warn)(`RadialAxialShadingPattern.getPattern: "${null==re?void 0:re.message}".`)}}else le(w,this._bbox),u=this._createGradient(w);return u}}function y(h,w,U,x,P,u,g,R){const I=w.coords,V=w.colors,Y=h.data,ne=4*h.width;let re;I[U+1]>I[x+1]&&(re=U,U=x,x=re,re=u,u=g,g=re),I[x+1]>I[P+1]&&(re=x,x=P,P=re,re=g,g=R,R=re),I[U+1]>I[x+1]&&(re=U,U=x,x=re,re=u,u=g,g=re);const ue=(I[U]+w.offsetX)*w.scaleX,ve=(I[U+1]+w.offsetY)*w.scaleY,Ae=(I[x]+w.offsetX)*w.scaleX,Ie=(I[x+1]+w.offsetY)*w.scaleY,de=(I[P]+w.offsetX)*w.scaleX,Me=(I[P+1]+w.offsetY)*w.scaleY;if(ve>=Me)return;const xe=V[u],Le=V[u+1],$e=V[u+2],Q=V[g],v=V[g+1],E=V[g+2],d=V[R],S=V[R+1],D=V[R+2],k=Math.round(ve),H=Math.round(Me);let W,fe,Ce,_e,we,Pe,ke,ze;for(let tt=k;tt<=H;tt++){if(tt<Ie){let ie;ie=tt<ve?0:(ve-tt)/(ve-Ie),W=ue-(ue-Ae)*ie,fe=xe-(xe-Q)*ie,Ce=Le-(Le-v)*ie,_e=$e-($e-E)*ie}else{let ie;ie=tt>Me?1:Ie===Me?0:(Ie-tt)/(Ie-Me),W=Ae-(Ae-de)*ie,fe=Q-(Q-d)*ie,Ce=v-(v-S)*ie,_e=E-(E-D)*ie}let Oe;Oe=tt<ve?0:tt>Me?1:(ve-tt)/(ve-Me),we=ue-(ue-de)*Oe,Pe=xe-(xe-d)*Oe,ke=Le-(Le-S)*Oe,ze=$e-($e-D)*Oe;const He=Math.round(Math.min(W,we)),je=Math.round(Math.max(W,we));let $=ne*tt+4*He;for(let ie=He;ie<=je;ie++)Oe=(W-ie)/(W-we),Oe<0?Oe=0:Oe>1&&(Oe=1),Y[$++]=fe-(fe-Pe)*Oe|0,Y[$++]=Ce-(Ce-ke)*Oe|0,Y[$++]=_e-(_e-ze)*Oe|0,Y[$++]=255}}function G(h,w,U){const x=w.coords,P=w.colors;let u,g;switch(w.type){case"lattice":const R=w.verticesPerRow,I=Math.floor(x.length/R)-1,V=R-1;for(u=0;u<I;u++){let Y=u*R;for(let ne=0;ne<V;ne++,Y++)y(h,U,x[Y],x[Y+1],x[Y+R],P[Y],P[Y+1],P[Y+R]),y(h,U,x[Y+R+1],x[Y+1],x[Y+R],P[Y+R+1],P[Y+1],P[Y+R])}break;case"triangles":for(u=0,g=x.length;u<g;u+=3)y(h,U,x[u],x[u+1],x[u+2],P[u],P[u+1],P[u+2]);break;default:throw new Error("illegal figure")}}class M extends pe{constructor(w){super(),this._coords=w[2],this._colors=w[3],this._figures=w[4],this._bounds=w[5],this._bbox=w[7],this._background=w[8],this.matrix=null}_createMeshCanvas(w,U,x){const R=Math.floor(this._bounds[0]),I=Math.floor(this._bounds[1]),V=Math.ceil(this._bounds[2])-R,Y=Math.ceil(this._bounds[3])-I,ne=Math.min(Math.ceil(Math.abs(V*w[0]*1.1)),3e3),re=Math.min(Math.ceil(Math.abs(Y*w[1]*1.1)),3e3),ue=V/ne,ve=Y/re,Ae={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-I,scaleX:1/ue,scaleY:1/ve},Me=x.getCanvas("mesh",ne+4,re+4,!1),xe=Me.context,Le=xe.createImageData(ne,re);if(U){const Q=Le.data;for(let v=0,E=Q.length;v<E;v+=4)Q[v]=U[0],Q[v+1]=U[1],Q[v+2]=U[2],Q[v+3]=255}for(const Q of this._figures)G(Le,Q,Ae);return xe.putImageData(Le,2,2),{canvas:Me.canvas,offsetX:R-2*ue,offsetY:I-2*ve,scaleX:ue,scaleY:ve}}getPattern(w,U,x,P){let u;if(le(w,this._bbox),P===ae.SHADING)u=p.Util.singularValueDecompose2dScale(w.mozCurrentTransform);else if(u=p.Util.singularValueDecompose2dScale(U.baseTransform),this.matrix){const R=p.Util.singularValueDecompose2dScale(this.matrix);u=[u[0]*R[0],u[1]*R[1]]}const g=this._createMeshCanvas(u,P===ae.SHADING?null:this._background,U.cachedCanvases);return P!==ae.SHADING&&(w.setTransform.apply(w,U.baseTransform),this.matrix&&w.transform.apply(w,this.matrix)),w.translate(g.offsetX,g.offsetY),w.scale(g.scaleX,g.scaleY),w.createPattern(g.canvas,"no-repeat")}}class N extends pe{getPattern(){return"hotpink"}}class _{static get MAX_PATTERN_SIZE(){return(0,p.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(w,U,x,P,u){this.operatorList=w[2],this.matrix=w[3]||[1,0,0,1,0,0],this.bbox=w[4],this.xstep=w[5],this.ystep=w[6],this.paintType=w[7],this.tilingType=w[8],this.color=U,this.ctx=x,this.canvasGraphicsFactory=P,this.baseTransform=u}createPatternCanvas(w){const U=this.operatorList,x=this.bbox,P=this.xstep,u=this.ystep,g=this.paintType,I=this.color,V=this.canvasGraphicsFactory;(0,p.info)("TilingType: "+this.tilingType);const Y=x[0],ne=x[1],re=x[2],ue=x[3],ve=p.Util.singularValueDecompose2dScale(this.matrix),Ae=p.Util.singularValueDecompose2dScale(this.baseTransform),Ie=[ve[0]*Ae[0],ve[1]*Ae[1]],de=this.getSizeAndScale(P,this.ctx.canvas.width,Ie[0]),Me=this.getSizeAndScale(u,this.ctx.canvas.height,Ie[1]),xe=w.cachedCanvases.getCanvas("pattern",de.size,Me.size,!0),Le=xe.context,$e=V.createCanvasGraphics(Le);$e.groupLevel=w.groupLevel,this.setFillAndStrokeStyleToContext($e,g,I);let Q=Y,v=ne,E=re,d=ue;return Y<0&&(Q=0,E+=Math.abs(Y)),ne<0&&(v=0,d+=Math.abs(ne)),Le.translate(-de.scale*Q,-Me.scale*v),$e.transform(de.scale,0,0,Me.scale,0,0),Le.save(),this.clipBbox($e,Q,v,E,d),$e.baseTransform=$e.ctx.mozCurrentTransform.slice(),$e.executeOperatorList(U),$e.endDrawing(),{canvas:xe.canvas,scaleX:de.scale,scaleY:Me.scale,offsetX:Q,offsetY:v}}getSizeAndScale(w,U,x){w=Math.abs(w);const P=Math.max(_.MAX_PATTERN_SIZE,U);let u=Math.ceil(w*x);return u>=P?u=P:x=u/w,{scale:x,size:u}}clipBbox(w,U,x,P,u){w.ctx.rect(U,x,P-U,u-x),w.current.updateRectMinMax(w.ctx.mozCurrentTransform,[U,x,P,u]),w.clip(),w.endPath()}setFillAndStrokeStyleToContext(w,U,x){const P=w.ctx,u=w.current;switch(U){case 1:const g=this.ctx;P.fillStyle=g.fillStyle,P.strokeStyle=g.strokeStyle,u.fillColor=g.fillStyle,u.strokeColor=g.strokeStyle;break;case 2:const R=p.Util.makeHexColor(x[0],x[1],x[2]);P.fillStyle=R,P.strokeStyle=R,u.fillColor=R,u.strokeColor=R;break;default:throw new p.FormatError(`Unsupported paint type: ${U}`)}}getPattern(w,U,x,P){let u=x;P!==ae.SHADING&&(u=p.Util.transform(u,U.baseTransform),this.matrix&&(u=p.Util.transform(u,this.matrix)));const g=this.createPatternCanvas(U);let R=new DOMMatrix(u);R=R.translate(g.offsetX,g.offsetY),R=R.scale(1/g.scaleX,1/g.scaleY);const I=w.createPattern(g.canvas,"repeat");try{I.setTransform(R)}catch(V){(0,p.warn)(`TilingPattern.getPattern: "${null==V?void 0:V.message}".`)}return I}}O.TilingPattern=_},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.applyMaskImageData=function ce({src:ae,srcPos:le=0,dest:pe,destPos:ee=0,width:y,height:G,inverseDecode:M=!1}){const N=p.FeatureTest.isLittleEndian?4278190080:255,[F,b]=M?[0,N]:[N,0],_=y>>3,h=7&y,w=ae.length;pe=new Uint32Array(pe.buffer);for(let U=0;U<G;U++){for(const P=le+_;le<P;le++){const u=le<w?ae[le]:255;pe[ee++]=128&u?b:F,pe[ee++]=64&u?b:F,pe[ee++]=32&u?b:F,pe[ee++]=16&u?b:F,pe[ee++]=8&u?b:F,pe[ee++]=4&u?b:F,pe[ee++]=2&u?b:F,pe[ee++]=1&u?b:F}if(0===h)continue;const x=le<w?ae[le++]:255;for(let P=0;P<h;P++)pe[ee++]=x&1<<7-P?b:F}return{srcPos:le,destPos:ee}};var p=X(1)},(We,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.GlobalWorkerOptions=void 0;const X=Object.create(null);O.GlobalWorkerOptions=X,X.workerPort=void 0===X.workerPort?null:X.workerPort,X.workerSrc=void 0===X.workerSrc?"":X.workerSrc},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MessageHandler=void 0;var p=X(1);function le(ee){switch(ee instanceof Error||"object"==typeof ee&&null!==ee||(0,p.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ee.name){case"AbortException":return new p.AbortException(ee.message);case"MissingPDFException":return new p.MissingPDFException(ee.message);case"PasswordException":return new p.PasswordException(ee.message,ee.code);case"UnexpectedResponseException":return new p.UnexpectedResponseException(ee.message,ee.status);case"UnknownErrorException":return new p.UnknownErrorException(ee.message,ee.details);default:return new p.UnknownErrorException(ee.message,ee.toString())}}O.MessageHandler=class pe{constructor(y,G,M){this.sourceName=y,this.targetName=G,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=N=>{const F=N.data;if(F.targetName!==this.sourceName)return;if(F.stream)return void this._processStreamMessage(F);if(F.callback){const _=F.callbackId,h=this.callbackCapabilities[_];if(!h)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],1===F.callback)h.resolve(F.data);else{if(2!==F.callback)throw new Error("Unexpected callback case");h.reject(le(F.reason))}return}const b=this.actionHandler[F.action];if(!b)throw new Error(`Unknown action from worker: ${F.action}`);if(F.callbackId){const _=this.sourceName,h=F.sourceName;new Promise(function(w){w(b(F.data))}).then(function(w){M.postMessage({sourceName:_,targetName:h,callback:1,callbackId:F.callbackId,data:w})},function(w){M.postMessage({sourceName:_,targetName:h,callback:2,callbackId:F.callbackId,reason:le(w)})})}else F.streamId?this._createStreamSink(F):b(F.data)},M.addEventListener("message",this._onComObjOnMessage)}on(y,G){const M=this.actionHandler;if(M[y])throw new Error(`There is already an actionName called "${y}"`);M[y]=G}send(y,G,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:G},M)}sendWithPromise(y,G,M){const N=this.callbackId++,F=(0,p.createPromiseCapability)();this.callbackCapabilities[N]=F;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:N,data:G},M)}catch(b){F.reject(b)}return F.promise}sendWithStream(y,G,M,N){const F=this.streamId++,b=this.sourceName,_=this.targetName,h=this.comObj;return new ReadableStream({start:w=>{const U=(0,p.createPromiseCapability)();return this.streamControllers[F]={controller:w,startCall:U,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:b,targetName:_,action:y,streamId:F,data:G,desiredSize:w.desiredSize},N),U.promise},pull:w=>{const U=(0,p.createPromiseCapability)();return this.streamControllers[F].pullCall=U,h.postMessage({sourceName:b,targetName:_,stream:6,streamId:F,desiredSize:w.desiredSize}),U.promise},cancel:w=>{(0,p.assert)(w instanceof Error,"cancel must have a valid reason");const U=(0,p.createPromiseCapability)();return this.streamControllers[F].cancelCall=U,this.streamControllers[F].isClosed=!0,h.postMessage({sourceName:b,targetName:_,stream:1,streamId:F,reason:le(w)}),U.promise}},M)}_createStreamSink(y){const G=y.streamId,M=this.sourceName,N=y.sourceName,F=this.comObj,b=this,_=this.actionHandler[y.action],h={enqueue(w,U=1,x){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=U,P>0&&this.desiredSize<=0&&(this.sinkCapability=(0,p.createPromiseCapability)(),this.ready=this.sinkCapability.promise),F.postMessage({sourceName:M,targetName:N,stream:4,streamId:G,chunk:w},x)},close(){this.isCancelled||(this.isCancelled=!0,F.postMessage({sourceName:M,targetName:N,stream:3,streamId:G}),delete b.streamSinks[G])},error(w){(0,p.assert)(w instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,F.postMessage({sourceName:M,targetName:N,stream:5,streamId:G,reason:le(w)}))},sinkCapability:(0,p.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[G]=h,new Promise(function(w){w(_(y.data,h))}).then(function(){F.postMessage({sourceName:M,targetName:N,stream:8,streamId:G,success:!0})},function(w){F.postMessage({sourceName:M,targetName:N,stream:8,streamId:G,reason:le(w)})})}_processStreamMessage(y){const G=y.streamId,M=this.sourceName,N=y.sourceName,F=this.comObj,b=this.streamControllers[G],_=this.streamSinks[G];switch(y.stream){case 8:y.success?b.startCall.resolve():b.startCall.reject(le(y.reason));break;case 7:y.success?b.pullCall.resolve():b.pullCall.reject(le(y.reason));break;case 6:if(!_){F.postMessage({sourceName:M,targetName:N,stream:7,streamId:G,success:!0});break}_.desiredSize<=0&&y.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=y.desiredSize,new Promise(function(h){h(_.onPull&&_.onPull())}).then(function(){F.postMessage({sourceName:M,targetName:N,stream:7,streamId:G,success:!0})},function(h){F.postMessage({sourceName:M,targetName:N,stream:7,streamId:G,reason:le(h)})});break;case 4:if((0,p.assert)(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(y.chunk);break;case 3:if((0,p.assert)(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),this._deleteStreamController(b,G);break;case 5:(0,p.assert)(b,"error should have stream controller"),b.controller.error(le(y.reason)),this._deleteStreamController(b,G);break;case 2:y.success?b.cancelCall.resolve():b.cancelCall.reject(le(y.reason)),this._deleteStreamController(b,G);break;case 1:if(!_)break;new Promise(function(h){h(_.onCancel&&_.onCancel(le(y.reason)))}).then(function(){F.postMessage({sourceName:M,targetName:N,stream:2,streamId:G,success:!0})},function(h){F.postMessage({sourceName:M,targetName:N,stream:2,streamId:G,reason:le(h)})}),_.sinkCapability.reject(le(y.reason)),_.isCancelled=!0,delete this.streamSinks[G];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(y,G){var M=this;return _asyncToGenerator(function*(){yield Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete M.streamControllers[G]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(We,O,X)=>{var ae,le;Object.defineProperty(O,"__esModule",{value:!0}),O.Metadata=void 0;var p=X(1);ae=new WeakMap,le=new WeakMap,O.Metadata=class ce{constructor({parsedData:ee,rawData:y}){bt(this,ae,void 0),bt(this,le,void 0),pn(this,ae,ee),pn(this,le,y)}getRaw(){return pt(this,le)}get(ee){var y;return null!=(y=pt(this,ae).get(ee))?y:null}getAll(){return(0,p.objectFromMap)(pt(this,ae))}has(ee){return pt(this,ae).has(ee)}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.OptionalContentConfig=void 0;var p=X(1);class ce{constructor(pe,ee){this.visible=!0,this.name=pe,this.intent=ee}}O.OptionalContentConfig=class ae{constructor(pe){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==pe){this.name=pe.name,this.creator=pe.creator,this._order=pe.order;for(const ee of pe.groups)this._groups.set(ee.id,new ce(ee.name,ee.intent));if("OFF"===pe.baseState)for(const ee of this._groups)ee.visible=!1;for(const ee of pe.on)this._groups.get(ee).visible=!0;for(const ee of pe.off)this._groups.get(ee).visible=!1}}_evaluateVisibilityExpression(pe){const ee=pe.length;if(ee<2)return!0;const y=pe[0];for(let G=1;G<ee;G++){const M=pe[G];let N;if(Array.isArray(M))N=this._evaluateVisibilityExpression(M);else{if(!this._groups.has(M))return(0,p.warn)(`Optional content group not found: ${M}`),!0;N=this._groups.get(M).visible}switch(y){case"And":if(!N)return!1;break;case"Or":if(N)return!0;break;case"Not":return!N;default:return!0}}return"And"===y}isVisible(pe){if(0===this._groups.size)return!0;if(!pe)return(0,p.warn)("Optional content group not defined."),!0;if("OCG"===pe.type)return this._groups.has(pe.id)?this._groups.get(pe.id).visible:((0,p.warn)(`Optional content group not found: ${pe.id}`),!0);if("OCMD"===pe.type){if(pe.expression)return this._evaluateVisibilityExpression(pe.expression);if(!pe.policy||"AnyOn"===pe.policy){for(const ee of pe.ids){if(!this._groups.has(ee))return(0,p.warn)(`Optional content group not found: ${ee}`),!0;if(this._groups.get(ee).visible)return!0}return!1}if("AllOn"===pe.policy){for(const ee of pe.ids){if(!this._groups.has(ee))return(0,p.warn)(`Optional content group not found: ${ee}`),!0;if(!this._groups.get(ee).visible)return!1}return!0}if("AnyOff"===pe.policy){for(const ee of pe.ids){if(!this._groups.has(ee))return(0,p.warn)(`Optional content group not found: ${ee}`),!0;if(!this._groups.get(ee).visible)return!0}return!1}if("AllOff"===pe.policy){for(const ee of pe.ids){if(!this._groups.has(ee))return(0,p.warn)(`Optional content group not found: ${ee}`),!0;if(this._groups.get(ee).visible)return!1}return!0}return(0,p.warn)(`Unknown optional content policy ${pe.policy}.`),!0}return(0,p.warn)(`Unknown group type ${pe.type}.`),!0}setVisibility(pe,ee=!0){this._groups.has(pe)?this._groups.get(pe).visible=!!ee:(0,p.warn)(`Optional content group not found: ${pe}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,p.objectFromMap)(this._groups):null}getGroup(pe){return this._groups.get(pe)||null}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.PDFDataTransportStream=void 0;var p=X(1),ce=X(5);O.PDFDataTransportStream=class ae{constructor(y,G){(0,p.assert)(G,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const M=y.initialData;if((null==M?void 0:M.length)>0){const N=new Uint8Array(M).buffer;this._queuedChunks.push(N)}this._pdfDataRangeTransport=G,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((N,F)=>{this._onReceiveData({begin:N,chunk:F})}),this._pdfDataRangeTransport.addProgressListener((N,F)=>{this._onProgress({loaded:N,total:F})}),this._pdfDataRangeTransport.addProgressiveReadListener(N=>{this._onReceiveData({chunk:N})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const G=new Uint8Array(y.chunk).buffer;if(void 0===y.begin)this._fullRequestReader?this._fullRequestReader._enqueue(G):this._queuedChunks.push(G);else{const M=this._rangeReaders.some(function(N){return N._begin===y.begin&&(N._enqueue(G),!0)});(0,p.assert)(M,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y,G;return null!=(G=null==(y=this._fullRequestReader)?void 0:y._loaded)?G:0}_onProgress(y){if(void 0===y.total){const G=this._rangeReaders[0];(null==G?void 0:G.onProgress)&&G.onProgress({loaded:y.loaded})}else{const G=this._fullRequestReader;(null==G?void 0:G.onProgress)&&G.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const G=this._rangeReaders.indexOf(y);G>=0&&this._rangeReaders.splice(G,1)}getFullReader(){(0,p.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new le(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,G){if(G<=this._progressiveDataLength)return null;const M=new pe(this,y,G);return this._pdfDataRangeTransport.requestDataRange(y,G),this._rangeReaders.push(M),M}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const G of this._rangeReaders.slice(0))G.cancel(y);this._pdfDataRangeTransport.abort()}};class le{constructor(y,G,M=!1,N=null){this._stream=y,this._done=M||!1,this._filename=(0,ce.isPdfFile)(N)?N:null,this._queuedChunks=G||[],this._loaded=0;for(const F of this._queuedChunks)this._loaded+=F.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var y=this;return _asyncToGenerator(function*(){if(y._queuedChunks.length>0)return{value:y._queuedChunks.shift(),done:!1};if(y._done)return{value:void 0,done:!0};const G=(0,p.createPromiseCapability)();return y._requests.push(G),G.promise})()}cancel(y){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pe{constructor(y,G,M){this._stream=y,this._begin=G,this._end=M,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(0===this._requests.length)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var y=this;return _asyncToGenerator(function*(){if(y._queuedChunk){const M=y._queuedChunk;return y._queuedChunk=null,{value:M,done:!1}}if(y._done)return{value:void 0,done:!0};const G=(0,p.createPromiseCapability)();return y._requests.push(G),G.promise})()}cancel(y){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(We,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.XfaText=void 0;class X{static textContent(ce){const ae=[],le={items:ae,styles:Object.create(null)};return function pe(ee){var M;if(!ee)return;let y=null;const G=ee.name;if("#text"===G)y=ee.value;else{if(!X.shouldBuildText(G))return;(null==(M=null==ee?void 0:ee.attributes)?void 0:M.textContent)?y=ee.attributes.textContent:ee.value&&(y=ee.value)}if(null!==y&&ae.push({str:y}),ee.children)for(const N of ee.children)pe(N)}(ce),le}static shouldBuildText(ce){return!("textarea"===ce||"input"===ce||"option"===ce||"select"===ce)}}O.XfaText=X},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.NodeStandardFontDataFactory=O.NodeCanvasFactory=O.NodeCMapReaderFactory=void 0;var p=X(6);const ce=function(ee){return new Promise((y,G)=>{__webpack_require__(172).readFile(ee,(N,F)=>{!N&&F?y(new Uint8Array(F)):G(new Error(N))})})};O.NodeCanvasFactory=class ae extends p.BaseCanvasFactory{_createCanvas(y,G){return __webpack_require__(414).createCanvas(y,G)}},O.NodeCMapReaderFactory=class le extends p.BaseCMapReaderFactory{_fetchData(y,G){return ce(y).then(M=>({cMapData:M,compressionType:G}))}},O.NodeStandardFontDataFactory=class pe extends p.BaseStandardFontDataFactory{_fetchData(y){return ce(y)}}},(We,O,X)=>{var Q,eE;Object.defineProperty(O,"__esModule",{value:!0}),O.AnnotationLayer=void 0;var p=X(1),ce=X(5),ae=X(8),le=X(21),pe=X(22);const y=new WeakSet;function G(E){return{width:E[2]-E[0],height:E[3]-E[1]}}class M{static create(d){switch(d.data.annotationType){case p.AnnotationType.LINK:return new F(d);case p.AnnotationType.TEXT:return new b(d);case p.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new h(d);case"Btn":return d.data.radioButton?new U(d):d.data.checkBox?new w(d):new x(d);case"Ch":return new P(d)}return new _(d);case p.AnnotationType.POPUP:return new u(d);case p.AnnotationType.FREETEXT:return new R(d);case p.AnnotationType.LINE:return new I(d);case p.AnnotationType.SQUARE:return new V(d);case p.AnnotationType.CIRCLE:return new Y(d);case p.AnnotationType.POLYLINE:return new ne(d);case p.AnnotationType.CARET:return new ue(d);case p.AnnotationType.INK:return new ve(d);case p.AnnotationType.POLYGON:return new re(d);case p.AnnotationType.HIGHLIGHT:return new Ae(d);case p.AnnotationType.UNDERLINE:return new Ie(d);case p.AnnotationType.SQUIGGLY:return new de(d);case p.AnnotationType.STRIKEOUT:return new Me(d);case p.AnnotationType.STAMP:return new xe(d);case p.AnnotationType.FILEATTACHMENT:return new Le(d);default:return new N(d)}}}class N{constructor(d,{isRenderable:S=!1,ignoreBorder:D=!1,createQuadrilaterals:k=!1}={}){this.isRenderable=S,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,this._mouseState=d.mouseState,S&&(this.container=this._createContainer(D)),k&&(this.quadrilaterals=this._createQuadrilaterals(D))}_createContainer(d=!1){const S=this.data,D=this.page,k=this.viewport,H=document.createElement("section");let{width:W,height:fe}=G(S.rect);H.setAttribute("data-annotation-id",S.id);const Ce=p.Util.normalizeRect([S.rect[0],D.view[3]-S.rect[1]+D.view[1],S.rect[2],D.view[3]-S.rect[3]+D.view[1]]);if(S.hasOwnCanvas){const _e=k.transform.slice(),[we,Pe]=p.Util.singularValueDecompose2dScale(_e);W=Math.ceil(W*we),fe=Math.ceil(fe*Pe),Ce[0]*=we,Ce[1]*=Pe;for(let ke=0;ke<4;ke++)_e[ke]=Math.sign(_e[ke]);H.style.transform=`matrix(${_e.join(",")})`}else H.style.transform=`matrix(${k.transform.join(",")})`;if(H.style.transformOrigin=`${-Ce[0]}px ${-Ce[1]}px`,!d&&S.borderStyle.width>0){H.style.borderWidth=`${S.borderStyle.width}px`,S.borderStyle.style!==p.AnnotationBorderStyleType.UNDERLINE&&(W-=2*S.borderStyle.width,fe-=2*S.borderStyle.width);const _e=S.borderStyle.horizontalCornerRadius,we=S.borderStyle.verticalCornerRadius;switch((_e>0||we>0)&&(H.style.borderRadius=`${_e}px / ${we}px`),S.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:H.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:H.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:H.style.borderBottomStyle="solid"}S.borderColor||S.color?H.style.borderColor=p.Util.makeHexColor(0|S.color[0],0|S.color[1],0|S.color[2]):H.style.borderWidth=0}return H.style.left=`${Ce[0]}px`,H.style.top=`${Ce[1]}px`,S.hasOwnCanvas?H.style.width=H.style.height="auto":(H.style.width=`${W}px`,H.style.height=`${fe}px`),H}get _commonActions(){const d=(S,D,k)=>{const H=k.detail[S];k.target.style[D]=le.ColorConverters[`${H[0]}_HTML`](H.slice(1))};return(0,p.shadow)(this,"_commonActions",{display:S=>{const D=S.detail.display%2==1;S.target.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:D,print:0===S.detail.display||3===S.detail.display})},print:S=>{this.annotationStorage.setValue(this.data.id,{print:S.detail.print})},hidden:S=>{S.target.style.visibility=S.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:S.detail.hidden})},focus:S=>{setTimeout(()=>S.target.focus({preventScroll:!1}),0)},userName:S=>{S.target.title=S.detail.userName},readonly:S=>{S.detail.readonly?S.target.setAttribute("readonly",""):S.target.removeAttribute("readonly")},required:S=>{S.detail.required?S.target.setAttribute("required",""):S.target.removeAttribute("required")},bgColor:S=>{d("bgColor","backgroundColor",S)},fillColor:S=>{d("fillColor","backgroundColor",S)},fgColor:S=>{d("fgColor","color",S)},textColor:S=>{d("textColor","color",S)},borderColor:S=>{d("borderColor","borderColor",S)},strokeColor:S=>{d("strokeColor","borderColor",S)}})}_dispatchEventFromSandbox(d,S){const D=this._commonActions;for(const k of Object.keys(S.detail)){const H=d[k]||D[k];H&&H(S)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const S=this.annotationStorage.getRawValue(this.data.id);if(!S)return;const D=this._commonActions;for(const[k,H]of Object.entries(S)){const W=D[k];W&&(W({detail:H,target:d}),delete S[k])}}_createQuadrilaterals(d=!1){if(!this.data.quadPoints)return null;const S=[],D=this.data.rect;for(const k of this.data.quadPoints)this.data.rect=[k[2].x,k[2].y,k[1].x,k[1].y],S.push(this._createContainer(d));return this.data.rect=D,S}_createPopup(d,S){let D=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,D=this.quadrilaterals[0]),d||((d=document.createElement("div")).style.height=D.style.height,d.style.width=D.style.width,D.appendChild(d));const H=new g({container:D,trigger:d,color:S.color,titleObj:S.titleObj,modificationDate:S.modificationDate,contentsObj:S.contentsObj,richText:S.richText,hideWrapper:!0}).render();H.style.left=D.style.width,D.appendChild(H)}_renderQuadrilaterals(d){for(const S of this.quadrilaterals)S.className=d;return this.quadrilaterals}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,S=null){const D=[];if(this._fieldObjects){const k=this._fieldObjects[d];if(k)for(const{page:H,id:W,exportValues:fe}of k){if(-1===H||W===S)continue;const Ce="string"==typeof fe?fe:null,_e=document.getElementById(W);!_e||y.has(_e)?D.push({id:W,exportValue:Ce,domElement:_e}):(0,p.warn)(`_getElementsByName - element not allowed: ${W}`)}return D}for(const k of document.getElementsByName(d)){const{id:H,exportValue:W}=k;H!==S&&(!y.has(k)||D.push({id:H,exportValue:W,domElement:k}))}return D}static get platform(){const d="undefined"!=typeof navigator?navigator.platform:"";return(0,p.shadow)(this,"platform",{isWin:d.includes("Win"),isMac:d.includes("Mac")})}}class F extends N{constructor(d,S=null){super(d,{isRenderable:!!(d.data.url||d.data.dest||d.data.action||d.data.isTooltipOnly||d.data.resetForm||d.data.actions&&(d.data.actions.Action||d.data.actions["Mouse Up"]||d.data.actions["Mouse Down"])),ignoreBorder:!!(null==S?void 0:S.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:d,linkService:S}=this,D=document.createElement("a");if(d.url)S.addLinkAttributes(D,d.url,d.newWindow);else if(d.action)this._bindNamedAction(D,d.action);else if(d.dest)this._bindLink(D,d.dest);else{let k=!1;d.actions&&(d.actions.Action||d.actions["Mouse Up"]||d.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(k=!0,this._bindJSAction(D,d)),d.resetForm?this._bindResetFormAction(D,d.resetForm):k||this._bindLink(D,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((k,H)=>{const W=0===H?D:D.cloneNode();return k.appendChild(W),k}):(this.container.className="linkAnnotation",this.container.appendChild(D),this.container)}_bindLink(d,S){d.href=this.linkService.getDestinationHash(S),d.onclick=()=>(S&&this.linkService.goToDestination(S),!1),(S||""===S)&&(d.className="internalLink")}_bindNamedAction(d,S){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeNamedAction(S),!1),d.className="internalLink"}_bindJSAction(d,S){d.href=this.linkService.getAnchorUrl("");const D=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const k of Object.keys(S.actions)){const H=D.get(k);!H||(d[H]=()=>{var W;return null==(W=this.linkService.eventBus)||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S.id,name:k}}),!1})}d.onclick||(d.onclick=()=>!1),d.className="internalLink"}_bindResetFormAction(d,S){const D=d.onclick;if(D||(d.href=this.linkService.getAnchorUrl("")),d.className="internalLink",!this._fieldObjects)return(0,p.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(D||(d.onclick=()=>!1));d.onclick=()=>{var we;D&&D();const{fields:k,refs:H,include:W}=S,fe=[];if(0!==k.length||0!==H.length){const Pe=new Set(H);for(const ke of k){const ze=this._fieldObjects[ke]||[];for(const{id:tt}of ze)Pe.add(tt)}for(const ke of Object.values(this._fieldObjects))for(const ze of ke)Pe.has(ze.id)===W&&fe.push(ze)}else for(const Pe of Object.values(this._fieldObjects))fe.push(...Pe);const Ce=this.annotationStorage,_e=[];for(const Pe of fe){const{id:ke}=Pe;switch(_e.push(ke),Pe.type){case"text":case"combobox":case"listbox":Ce.setValue(ke,{value:Pe.defaultValue||""});break;case"checkbox":case"radiobutton":Ce.setValue(ke,{value:Pe.defaultValue===Pe.exportValues});break;default:continue}const ze=document.getElementById(ke);!ze||!y.has(ze)||ze.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(null==(we=this.linkService.eventBus)||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:_e,name:"ResetForm"}})),!1}}}class b extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str))})}render(){this.container.className="textAnnotation";const d=document.createElement("img");return d.style.height=this.container.style.height,d.style.width=this.container.style.width,d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.appendChild(d),this.container}}class _ extends N{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:S,isMac:D}=N.platform;return S&&d.ctrlKey||D&&d.metaKey}_setEventListener(d,S,D,k){S.includes("mouse")?d.addEventListener(S,H=>{var W;null==(W=this.linkService.eventBus)||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:k(H),shift:H.shiftKey,modifier:this._getKeyModifier(H)}})}):d.addEventListener(S,H=>{var W;null==(W=this.linkService.eventBus)||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:k(H)}})})}_setEventListeners(d,S,D){var k;for(const[H,W]of S)("Action"===W||(null==(k=this.data.actions)?void 0:k[W]))&&this._setEventListener(d,H,W,D)}_setBackgroundColor(d){const S=this.data.backgroundColor||null;d.style.backgroundColor=null===S?"transparent":p.Util.makeHexColor(S[0],S[1],S[2])}}class h extends _{constructor(d){super(d,{isRenderable:d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue})}setPropertyOnSiblings(d,S,D,k){const H=this.annotationStorage;for(const W of this._getElementsByName(d.name,d.id))W.domElement&&(W.domElement[S]=D),H.setValue(W.id,{[k]:D})}render(){var k;const d=this.annotationStorage,S=this.data.id;this.container.className="textWidgetAnnotation";let D=null;if(this.renderForms){const H=d.getValue(S,{value:this.data.fieldValue}),W=H.formattedValue||H.value||"",fe={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=W):(D=document.createElement("input"),D.type="text",D.setAttribute("value",W)),y.add(D),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=1e3,fe.userValue=W,D.setAttribute("id",S),D.addEventListener("input",_e=>{d.setValue(S,{value:_e.target.value}),this.setPropertyOnSiblings(D,"value",_e.target.value,"value")}),D.addEventListener("resetform",_e=>{var Pe;const we=null!=(Pe=this.data.defaultFieldValue)?Pe:"";D.value=fe.userValue=we,fe.formattedValue=null});let Ce=_e=>{const{formattedValue:we}=fe;null!=we&&(_e.target.value=we),_e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",we=>{fe.userValue&&(we.target.value=fe.userValue),fe.valueOnFocus=we.target.value}),D.addEventListener("updatefromsandbox",we=>{this._dispatchEventFromSandbox({value(ke){var ze;fe.userValue=null!=(ze=ke.detail.value)?ze:"",d.setValue(S,{value:fe.userValue.toString()}),ke.target.value=fe.userValue},formattedValue(ke){const{formattedValue:ze}=ke.detail;fe.formattedValue=ze,null!=ze&&ke.target!==document.activeElement&&(ke.target.value=ze),d.setValue(S,{formattedValue:ze})},selRange(ke){ke.target.setSelectionRange(...ke.detail.selRange)}},we)}),D.addEventListener("keydown",we=>{var ze;let Pe=-1;if("Escape"===we.key?Pe=0:"Enter"===we.key?Pe=2:"Tab"===we.key&&(Pe=3),-1===Pe)return;const{value:ke}=we.target;fe.valueOnFocus!==ke&&(fe.userValue=ke,null==(ze=this.linkService.eventBus)||ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:ke,willCommit:!0,commitKey:Pe,selStart:we.target.selectionStart,selEnd:we.target.selectionEnd}}))});const _e=Ce;Ce=null,D.addEventListener("blur",we=>{var ke;const{value:Pe}=we.target;fe.userValue=Pe,this._mouseState.isDown&&fe.valueOnFocus!==Pe&&(null==(ke=this.linkService.eventBus)||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:Pe,willCommit:!0,commitKey:1,selStart:we.target.selectionStart,selEnd:we.target.selectionEnd}})),_e(we)}),(null==(k=this.data.actions)?void 0:k.Keystroke)&&D.addEventListener("beforeinput",we=>{var $;const{data:Pe,target:ke}=we,{value:ze,selectionStart:tt,selectionEnd:Oe}=ke;let He=tt,je=Oe;switch(we.inputType){case"deleteWordBackward":{const ie=ze.substring(0,tt).match(/\w*[^\w]*$/);ie&&(He-=ie[0].length);break}case"deleteWordForward":{const ie=ze.substring(tt).match(/^[^\w]*\w*/);ie&&(je+=ie[0].length);break}case"deleteContentBackward":tt===Oe&&(He-=1);break;case"deleteContentForward":tt===Oe&&(je+=1)}we.preventDefault(),null==($=this.linkService.eventBus)||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:ze,change:Pe||"",willCommit:!1,selStart:He,selEnd:je}})}),this._setEventListeners(D,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],we=>we.target.value)}if(Ce&&D.addEventListener("blur",Ce),null!==this.data.maxLen&&(D.maxLength=this.data.maxLen),this.data.comb){const we=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;D.classList.add("comb"),D.style.letterSpacing=`calc(${we}px - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.appendChild(D),this.container}_setTextStyle(d){const{fontSize:D,fontColor:k}=this.data.defaultAppearanceData,H=d.style;D&&(H.fontSize=`${D}px`),H.color=p.Util.makeHexColor(k[0],k[1],k[2]),null!==this.data.textAlignment&&(H.textAlign=["left","center","right"][this.data.textAlignment])}}class w extends _{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,S=this.data,D=S.id;let k=d.getValue(D,{value:S.exportValue===S.fieldValue}).value;"string"==typeof k&&(k="Off"!==k,d.setValue(D,{value:k})),this.container.className="buttonWidgetAnnotation checkBox";const H=document.createElement("input");return y.add(H),H.disabled=S.readOnly,H.type="checkbox",H.name=S.fieldName,k&&H.setAttribute("checked",!0),H.setAttribute("id",D),H.setAttribute("exportValue",S.exportValue),H.tabIndex=1e3,H.addEventListener("change",W=>{const{name:fe,checked:Ce}=W.target;for(const _e of this._getElementsByName(fe,D)){const we=Ce&&_e.exportValue===S.exportValue;_e.domElement&&(_e.domElement.checked=we),d.setValue(_e.id,{value:we})}d.setValue(D,{value:Ce})}),H.addEventListener("resetform",W=>{W.target.checked=(S.defaultFieldValue||"Off")===S.exportValue}),this.enableScripting&&this.hasJSActions&&(H.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({value(Ce){Ce.target.checked="Off"!==Ce.detail.value,d.setValue(D,{value:Ce.target.checked})}},W)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.appendChild(H),this.container}}class U extends _{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const d=this.annotationStorage,S=this.data,D=S.id;let k=d.getValue(D,{value:S.fieldValue===S.buttonValue}).value;"string"==typeof k&&(k=k!==S.buttonValue,d.setValue(D,{value:k}));const H=document.createElement("input");if(y.add(H),H.disabled=S.readOnly,H.type="radio",H.name=S.fieldName,k&&H.setAttribute("checked",!0),H.setAttribute("id",D),H.tabIndex=1e3,H.addEventListener("change",W=>{const{name:fe,checked:Ce}=W.target;for(const _e of this._getElementsByName(fe,D))d.setValue(_e.id,{value:!1});d.setValue(D,{value:Ce})}),H.addEventListener("resetform",W=>{const fe=S.defaultFieldValue;W.target.checked=null!=fe&&fe===S.buttonValue}),this.enableScripting&&this.hasJSActions){const W=S.buttonValue;H.addEventListener("updatefromsandbox",fe=>{this._dispatchEventFromSandbox({value:_e=>{const we=W===_e.detail.value;for(const Pe of this._getElementsByName(_e.target.name)){const ke=we&&Pe.id===D;Pe.domElement&&(Pe.domElement.checked=ke),d.setValue(Pe.id,{value:ke})}}},fe)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.checked)}return this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.appendChild(H),this.container}}class x extends F{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();return d.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(d.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(d),d}}class P extends _{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const d=this.annotationStorage,S=this.data.id,D=d.getValue(S,{value:this.data.fieldValue});let{fontSize:k}=this.data.defaultAppearanceData;k||(k=9);const H=`calc(${k}px * var(--zoom-factor))`,W=document.createElement("select");y.add(W),W.disabled=this.data.readOnly,W.name=this.data.fieldName,W.setAttribute("id",S),W.tabIndex=1e3,W.style.fontSize=`${k}px`,this.data.combo||(W.size=this.data.options.length,this.data.multiSelect&&(W.multiple=!0)),W.addEventListener("resetform",_e=>{const we=this.data.defaultFieldValue;for(const Pe of W.options)Pe.selected=Pe.value===we});for(const _e of this.data.options){const we=document.createElement("option");we.textContent=_e.displayValue,we.value=_e.exportValue,this.data.combo&&(we.style.fontSize=H),D.value.includes(_e.exportValue)&&we.setAttribute("selected",!0),W.appendChild(we)}const fe=(_e,we)=>{const Pe=we?"value":"textContent",ke=_e.target.options;return _e.target.multiple?Array.prototype.filter.call(ke,ze=>ze.selected).map(ze=>ze[Pe]):-1===ke.selectedIndex?null:ke[ke.selectedIndex][Pe]},Ce=_e=>Array.prototype.map.call(_e.target.options,Pe=>({displayValue:Pe.textContent,exportValue:Pe.value}));return this.enableScripting&&this.hasJSActions?(W.addEventListener("updatefromsandbox",_e=>{this._dispatchEventFromSandbox({value(Pe){const ke=Pe.detail.value,ze=new Set(Array.isArray(ke)?ke:[ke]);for(const tt of W.options)tt.selected=ze.has(tt.value);d.setValue(S,{value:fe(Pe,!0)})},multipleSelection(Pe){W.multiple=!0},remove(Pe){const ke=W.options,ze=Pe.detail.remove;ke[ze].selected=!1,W.remove(ze),ke.length>0&&-1===Array.prototype.findIndex.call(ke,Oe=>Oe.selected)&&(ke[0].selected=!0),d.setValue(S,{value:fe(Pe,!0),items:Ce(Pe)})},clear(Pe){for(;0!==W.length;)W.remove(0);d.setValue(S,{value:null,items:[]})},insert(Pe){const{index:ke,displayValue:ze,exportValue:tt}=Pe.detail.insert,Oe=document.createElement("option");Oe.textContent=ze,Oe.value=tt,W.insertBefore(Oe,W.children[ke]),d.setValue(S,{value:fe(Pe,!0),items:Ce(Pe)})},items(Pe){const{items:ke}=Pe.detail;for(;0!==W.length;)W.remove(0);for(const ze of ke){const{displayValue:tt,exportValue:Oe}=ze,He=document.createElement("option");He.textContent=tt,He.value=Oe,W.appendChild(He)}W.options.length>0&&(W.options[0].selected=!0),d.setValue(S,{value:fe(Pe,!0),items:Ce(Pe)})},indices(Pe){const ke=new Set(Pe.detail.indices);for(const ze of Pe.target.options)ze.selected=ke.has(ze.index);d.setValue(S,{value:fe(Pe,!0)})},editable(Pe){Pe.target.disabled=!Pe.detail.editable}},_e)}),W.addEventListener("input",_e=>{var ke;const we=fe(_e,!0),Pe=fe(_e,!1);d.setValue(S,{value:we}),null==(ke=this.linkService.eventBus)||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:Pe,changeEx:we,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(W,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],_e=>_e.target.checked)):W.addEventListener("input",function(_e){d.setValue(S,{value:fe(_e,!0)})}),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.appendChild(W),this.container}}class u extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!((null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str))})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const D=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===D.length)return this.container;const k=new g({container:this.container,trigger:Array.from(D),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),H=this.page,W=p.Util.normalizeRect([this.data.parentRect[0],H.view[3]-this.data.parentRect[1]+H.view[1],this.data.parentRect[2],H.view[3]-this.data.parentRect[3]+H.view[1]]),fe=W[0]+this.data.parentRect[2]-this.data.parentRect[0],Ce=W[1];return this.container.style.transformOrigin=`${-fe}px ${-Ce}px`,this.container.style.left=`${fe}px`,this.container.style.top=`${Ce}px`,this.container.appendChild(k.render()),this.container}}class g{constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var fe,Ce;const S=document.createElement("div");S.className="popupWrapper",this.hideElement=this.hideWrapper?S:this.container,this.hideElement.hidden=!0;const D=document.createElement("div");D.className="popup";const k=this.color;k&&(D.style.backgroundColor=p.Util.makeHexColor(0|.7*(255-k[0])+k[0],0|.7*(255-k[1])+k[1],0|.7*(255-k[2])+k[2]));const H=document.createElement("h1");H.dir=this.titleObj.dir,H.textContent=this.titleObj.str,D.appendChild(H);const W=ce.PDFDateString.toDateObject(this.modificationDate);if(W){const _e=document.createElement("span");_e.className="popupDate",_e.textContent="{{date}}, {{time}}",_e.dataset.l10nId="annotation_date_string",_e.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),D.appendChild(_e)}if(!(null==(fe=this.richText)?void 0:fe.str)||(null==(Ce=this.contentsObj)?void 0:Ce.str)&&this.contentsObj.str!==this.richText.str){const _e=this._formatContents(this.contentsObj);D.appendChild(_e)}else pe.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:D}),D.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const _e of this.trigger)_e.addEventListener("click",this._toggle.bind(this)),_e.addEventListener("mouseover",this._show.bind(this,!1)),_e.addEventListener("mouseout",this._hide.bind(this,!1));return D.addEventListener("click",this._hide.bind(this,!0)),S.appendChild(D),S}_formatContents({str:d,dir:S}){const D=document.createElement("p");D.className="popupContent",D.dir=S;const k=d.split(/(?:\r\n?|\n)/);for(let H=0,W=k.length;H<W;++H)D.appendChild(document.createTextNode(k[H])),H<W-1&&D.appendChild(document.createElement("br"));return D}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(d=!1){d&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(d=!0){d&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class R extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const d=this.data,{width:S,height:D}=G(d.rect),k=this.svgFactory.create(S,D),H=this.svgFactory.createElement("svg:line");return H.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),H.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),H.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),H.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),H.setAttribute("stroke-width",d.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),k.appendChild(H),this.container.append(k),this._createPopup(H,d),this.container}}class V extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const d=this.data,{width:S,height:D}=G(d.rect),k=this.svgFactory.create(S,D),H=d.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",H/2),W.setAttribute("y",H/2),W.setAttribute("width",S-H),W.setAttribute("height",D-H),W.setAttribute("stroke-width",H||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),k.appendChild(W),this.container.append(k),this._createPopup(W,d),this.container}}class Y extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const d=this.data,{width:S,height:D}=G(d.rect),k=this.svgFactory.create(S,D),H=d.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",S/2),W.setAttribute("cy",D/2),W.setAttribute("rx",S/2-H/2),W.setAttribute("ry",D/2-H/2),W.setAttribute("stroke-width",H||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),k.appendChild(W),this.container.append(k),this._createPopup(W,d),this.container}}class ne extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:S,height:D}=G(d.rect),k=this.svgFactory.create(S,D);let H=[];for(const fe of d.vertices)H.push(fe.x-d.rect[0]+","+(d.rect[3]-fe.y));H=H.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",H),W.setAttribute("stroke-width",d.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),k.appendChild(W),this.container.append(k),this._createPopup(W,d),this.container}}class re extends ne{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ue extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ve extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:S,height:D}=G(d.rect),k=this.svgFactory.create(S,D);for(const H of d.inkLists){let W=[];for(const Ce of H)W.push(`${Ce.x-d.rect[0]},${d.rect[3]-Ce.y}`);W=W.join(" ");const fe=this.svgFactory.createElement(this.svgElementName);fe.setAttribute("points",W),fe.setAttribute("stroke-width",d.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),this._createPopup(fe,d),k.appendChild(fe)}return this.container.append(k),this.container}}class Ae extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Ie extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class de extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Me extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class xe extends N{constructor(d){var D,k,H;super(d,{isRenderable:!!(d.data.hasPopup||(null==(D=d.data.titleObj)?void 0:D.str)||(null==(k=d.data.contentsObj)?void 0:k.str)||(null==(H=d.data.richText)?void 0:H.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Le extends N{constructor(d){var k;super(d,{isRenderable:!0});const{filename:S,content:D}=this.data.file;this.filename=(0,ce.getFilenameFromUrl)(S),this.content=D,null==(k=this.linkService.eventBus)||k.dispatch("fileattachmentannotation",{source:this,filename:S,content:D})}render(){var S,D;this.container.className="fileAttachmentAnnotation";const d=document.createElement("div");return d.style.height=this.container.style.height,d.style.width=this.container.style.width,d.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(S=this.data.titleObj)?void 0:S.str)||(null==(D=this.data.contentsObj)?void 0:D.str)||this.data.richText)&&this._createPopup(d,this.data),this.container.appendChild(d),this.container}_download(){var d;null==(d=this.downloadManager)||d.openOrDownloadData(this.container,this.content,this.filename)}}class $e{static render(d){const S=[],D=[];for(const H of d.annotations){if(!H)continue;const{width:W,height:fe}=G(H.rect);if(!(W<=0||fe<=0)){if(H.annotationType===p.AnnotationType.POPUP){D.push(H);continue}S.push(H)}}D.length&&S.push(...D);const k=d.div;for(const H of S){const W=M.create({data:H,layer:k,page:d.page,viewport:d.viewport,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:!1!==d.renderForms,svgFactory:new ce.DOMSVGFactory,annotationStorage:d.annotationStorage||new ae.AnnotationStorage,enableScripting:d.enableScripting,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects,mouseState:d.mouseState||{isDown:!1}});if(W.isRenderable){const fe=W.render();if(H.hidden&&(fe.style.visibility="hidden"),Array.isArray(fe))for(const Ce of fe)k.appendChild(Ce);else W instanceof u?k.prepend(fe):k.appendChild(fe)}}yt(this,Q,eE).call(this,k,d.annotationCanvasMap)}static update(d){const{page:S,viewport:D,annotations:k,annotationCanvasMap:H,div:W}=d,fe=D.transform,Ce=`matrix(${fe.join(",")})`;let _e,we;for(const Pe of k){const ke=W.querySelectorAll(`[data-annotation-id="${Pe.id}"]`);if(ke)for(const ze of ke)if(Pe.hasOwnCanvas){const tt=p.Util.normalizeRect([Pe.rect[0],S.view[3]-Pe.rect[1]+S.view[1],Pe.rect[2],S.view[3]-Pe.rect[3]+S.view[1]]);if(!we){_e=Math.abs(fe[0]||fe[1]);const je=fe.slice();for(let $=0;$<4;$++)je[$]=Math.sign(je[$]);we=`matrix(${je.join(",")})`}const Oe=tt[0]*_e,He=tt[1]*_e;ze.style.left=`${Oe}px`,ze.style.top=`${He}px`,ze.style.transformOrigin=`${-Oe}px ${-He}px`,ze.style.transform=we}else ze.style.transform=Ce}yt(this,Q,eE).call(this,W,H),W.hidden=!1}}Q=new WeakSet,eE=function(d,S){if(S){for(const[D,k]of S){const H=d.querySelector(`[data-annotation-id="${D}"]`);if(!H)continue;const{firstChild:W}=H;"CANVAS"===W.nodeName?H.replaceChild(k,W):H.insertBefore(k,W)}S.clear()}},bt($e,Q),O.AnnotationLayer=$e},(We,O)=>{function X(ce){return Math.floor(255*Math.max(0,Math.min(1,ce))).toString(16).padStart(2,"0")}Object.defineProperty(O,"__esModule",{value:!0}),O.ColorConverters=void 0,O.ColorConverters=class p{static CMYK_G([ae,le,pe,ee]){return["G",1-Math.min(1,.3*ae+.59*pe+.11*le+ee)]}static G_CMYK([ae]){return["CMYK",0,0,0,1-ae]}static G_RGB([ae]){return["RGB",ae,ae,ae]}static G_HTML([ae]){const le=X(ae);return`#${le}${le}${le}`}static RGB_G([ae,le,pe]){return["G",.3*ae+.59*le+.11*pe]}static RGB_HTML([ae,le,pe]){return`#${X(ae)}${X(le)}${X(pe)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ae,le,pe,ee]){return["RGB",1-Math.min(1,ae+ee),1-Math.min(1,pe+ee),1-Math.min(1,le+ee)]}static CMYK_HTML(ae){return this.RGB_HTML(this.CMYK_RGB(ae))}static RGB_CMYK([ae,le,pe]){const ee=1-ae,y=1-le,G=1-pe;return["CMYK",ee,y,G,Math.min(ee,y,G)]}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.XfaLayer=void 0;var p=X(18);O.XfaLayer=class ce{static setupStorage(le,pe,ee,y,G){const M=y.getValue(pe,{value:null});switch(ee.name){case"textarea":if(null!==M.value&&(le.textContent=M.value),"print"===G)break;le.addEventListener("input",N=>{y.setValue(pe,{value:N.target.value})});break;case"input":if("radio"===ee.attributes.type||"checkbox"===ee.attributes.type){if(M.value===ee.attributes.xfaOn?le.setAttribute("checked",!0):M.value===ee.attributes.xfaOff&&le.removeAttribute("checked"),"print"===G)break;le.addEventListener("change",N=>{y.setValue(pe,{value:N.target.getAttribute(N.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==M.value&&le.setAttribute("value",M.value),"print"===G)break;le.addEventListener("input",N=>{y.setValue(pe,{value:N.target.value})})}break;case"select":if(null!==M.value)for(const N of ee.children)N.attributes.value===M.value&&(N.attributes.selected=!0);le.addEventListener("input",N=>{const F=N.target.options;y.setValue(pe,{value:-1===F.selectedIndex?"":F[F.selectedIndex].value})})}}static setAttributes({html:le,element:pe,storage:ee=null,intent:y,linkService:G}){const{attributes:M}=pe,N=le instanceof HTMLAnchorElement;"radio"===M.type&&(M.name=`${M.name}-${y}`);for(const[F,b]of Object.entries(M))if(null!=b&&"dataId"!==F)if("style"!==F)if("textContent"===F)le.textContent=b;else if("class"===F)b.length&&le.setAttribute(F,b.join(" "));else{if(N&&("href"===F||"newWindow"===F))continue;le.setAttribute(F,b)}else Object.assign(le.style,b);N&&G.addLinkAttributes(le,M.href,M.newWindow),ee&&M.dataId&&this.setupStorage(le,M.dataId,pe,ee)}static render(le){var _;const pe=le.annotationStorage,ee=le.linkService,y=le.xfaHtml,G=le.intent||"display",M=document.createElement(y.name);y.attributes&&this.setAttributes({html:M,element:y,intent:G,linkService:ee});const N=[[y,-1,M]],F=le.div;if(F.appendChild(M),le.viewport){const h=`matrix(${le.viewport.transform.join(",")})`;F.style.transform=h}"richText"!==G&&F.setAttribute("class","xfaLayer xfaFont");const b=[];for(;N.length>0;){const[h,w,U]=N[N.length-1];if(w+1===h.children.length){N.pop();continue}const x=h.children[++N[N.length-1][1]];if(null===x)continue;const{name:P}=x;if("#text"===P){const g=document.createTextNode(x.value);b.push(g),U.appendChild(g);continue}let u;if(u=(null==(_=null==x?void 0:x.attributes)?void 0:_.xmlns)?document.createElementNS(x.attributes.xmlns,P):document.createElement(P),U.appendChild(u),x.attributes&&this.setAttributes({html:u,element:x,storage:pe,intent:G,linkService:ee}),x.children&&x.children.length>0)N.push([x,-1,u]);else if(x.value){const g=document.createTextNode(x.value);p.XfaText.shouldBuildText(P)&&b.push(g),u.appendChild(g)}}for(const h of F.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:b}}static update(le){const pe=`matrix(${le.viewport.transform.join(",")})`;le.div.style.transform=pe,le.div.hidden=!1}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.renderTextLayer=function w(U){const x=new h({textContent:U.textContent,textContentStream:U.textContentStream,container:U.container,viewport:U.viewport,textDivs:U.textDivs,textContentItemsStr:U.textContentItemsStr,enhanceTextSelection:U.enhanceTextSelection});return x._render(U.timeout),x};var p=X(1);const pe=new Map,ee=/^\s+$/g;function G(U,x,P,u){const g=document.createElement("span"),R=U._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==x.str,hasEOL:x.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==x.str,hasEOL:x.hasEOL};U._textDivs.push(g);const I=p.Util.transform(U._viewport.transform,x.transform);let V=Math.atan2(I[1],I[0]);const Y=P[x.fontName];Y.vertical&&(V+=Math.PI/2);const ne=Math.hypot(I[2],I[3]),re=ne*function y(U,x){const P=pe.get(U);if(P)return P;x.save(),x.font=`30px ${U}`;const u=x.measureText("");let g=u.fontBoundingBoxAscent,R=Math.abs(u.fontBoundingBoxDescent);if(g){x.restore();const V=g/(g+R);return pe.set(U,V),V}x.strokeStyle="red",x.clearRect(0,0,30,30),x.strokeText("g",0,0);let I=x.getImageData(0,0,30,30).data;R=0;for(let V=I.length-1-3;V>=0;V-=4)if(I[V]>0){R=Math.ceil(V/4/30);break}x.clearRect(0,0,30,30),x.strokeText("A",0,30),I=x.getImageData(0,0,30,30).data,g=0;for(let V=0,Y=I.length;V<Y;V+=4)if(I[V]>0){g=30-Math.floor(V/4/30);break}if(x.restore(),g){const V=g/(g+R);return pe.set(U,V),V}return pe.set(U,.8),.8}(Y.fontFamily,u);let ue,ve;0===V?(ue=I[4],ve=I[5]-re):(ue=I[4]+re*Math.sin(V),ve=I[5]-re*Math.cos(V)),g.style.left=`${ue}px`,g.style.top=`${ve}px`,g.style.fontSize=`${ne}px`,g.style.fontFamily=Y.fontFamily,g.setAttribute("role","presentation"),g.textContent=x.str,g.dir=x.dir,U._fontInspectorEnabled&&(g.dataset.fontName=x.fontName),0!==V&&(R.angle=V*(180/Math.PI));let Ae=!1;if(x.str.length>1||U._enhanceTextSelection&&ee.test(x.str))Ae=!0;else if(" "!==x.str&&x.transform[0]!==x.transform[3]){const Ie=Math.abs(x.transform[0]),de=Math.abs(x.transform[3]);Ie!==de&&Math.max(Ie,de)/Math.min(Ie,de)>1.5&&(Ae=!0)}if(Ae&&(R.canvasWidth=Y.vertical?x.height*U._viewport.scale:x.width*U._viewport.scale),U._textDivProperties.set(g,R),U._textContentStream&&U._layoutText(g),U._enhanceTextSelection&&R.hasText){let Ie=1,de=0;0!==V&&(Ie=Math.cos(V),de=Math.sin(V));const Me=(Y.vertical?x.height:x.width)*U._viewport.scale,xe=ne;let Le,$e;0!==V?(Le=[Ie,de,-de,Ie,ue,ve],$e=p.Util.getAxialAlignedBoundingBox([0,0,Me,xe],Le)):$e=[ue,ve,ue+Me,ve+xe],U._bounds.push({left:$e[0],top:$e[1],right:$e[2],bottom:$e[3],div:g,size:[Me,xe],m:Le})}}function M(U){if(U._canceled)return;const x=U._textDivs,P=U._capability,u=x.length;if(u>1e5)return U._renderingDone=!0,void P.resolve();if(!U._textContentStream)for(let g=0;g<u;g++)U._layoutText(x[g]);U._renderingDone=!0,P.resolve()}function N(U,x,P){let u=0;for(let g=0;g<P;g++){const R=U[x++];R>0&&(u=u?Math.min(R,u):R)}return u}function _(U,x){x.sort(function(g,R){return g.x1-R.x1||g.index-R.index});const u=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const g of x){let R=0;for(;R<u.length&&u[R].end<=g.y1;)R++;let I=u.length-1;for(;I>=0&&u[I].start>=g.y2;)I--;let V,Y,ne,re,ue=-1/0;for(ne=R;ne<=I;ne++){let Ie;V=u[ne],Y=V.boundary,Ie=Y.x2>g.x1?Y.index>g.index?Y.x1New:g.x1:void 0===Y.x2New?(Y.x2+g.x1)/2:Y.x2New,Ie>ue&&(ue=Ie)}for(g.x1New=ue,ne=R;ne<=I;ne++)V=u[ne],Y=V.boundary,void 0===Y.x2New?Y.x2>g.x1?Y.index>g.index&&(Y.x2New=Y.x2):Y.x2New=ue:Y.x2New>ue&&(Y.x2New=Math.max(ue,Y.x2));const ve=[];let Ae=null;for(ne=R;ne<=I;ne++){V=u[ne],Y=V.boundary;const Ie=Y.x2>g.x2?Y:g;Ae===Ie?ve[ve.length-1].end=V.end:(ve.push({start:V.start,end:V.end,boundary:Ie}),Ae=Ie)}for(u[R].start<g.y1&&(ve[0].start=g.y1,ve.unshift({start:u[R].start,end:g.y1,boundary:u[R].boundary})),g.y2<u[I].end&&(ve[ve.length-1].end=g.y2,ve.push({start:g.y2,end:u[I].end,boundary:u[I].boundary})),ne=R;ne<=I;ne++){if(V=u[ne],Y=V.boundary,void 0!==Y.x2New)continue;let Ie=!1;for(re=R-1;!Ie&&re>=0&&u[re].start>=Y.y1;re--)Ie=u[re].boundary===Y;for(re=I+1;!Ie&&re<u.length&&u[re].end<=Y.y2;re++)Ie=u[re].boundary===Y;for(re=0;!Ie&&re<ve.length;re++)Ie=ve[re].boundary===Y;Ie||(Y.x2New=ue)}Array.prototype.splice.apply(u,[R,I-R+1].concat(ve))}for(const g of u){const R=g.boundary;void 0===R.x2New&&(R.x2New=Math.max(U,R.x2))}}class h{constructor({textContent:x,textContentStream:P,container:u,viewport:g,textDivs:R,textContentItemsStr:I,enhanceTextSelection:V}){var Y;this._textContent=x,this._textContentStream=P,this._container=u,this._document=u.ownerDocument,this._viewport=g,this._textDivs=R||[],this._textContentItemsStr=I||[],this._enhanceTextSelection=!!V,this._fontInspectorEnabled=!!(null==(Y=globalThis.FontInspector)?void 0:Y.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,p.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new p.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(x,P){for(let u=0,g=x.length;u<g;u++)if(void 0!==x[u].str)this._textContentItemsStr.push(x[u].str),G(this,x[u],P,this._layoutTextCtx);else if("beginMarkedContentProps"===x[u].type||"beginMarkedContent"===x[u].type){const R=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==x[u].id&&this._container.setAttribute("id",`${x[u].id}`),R.appendChild(this._container)}else"endMarkedContent"===x[u].type&&(this._container=this._container.parentNode)}_layoutText(x){const P=this._textDivProperties.get(x);let u="";if(0!==P.canvasWidth&&P.hasText){const{fontSize:g,fontFamily:R}=x.style;(g!==this._layoutTextLastFontSize||R!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${g} ${R}`,this._layoutTextLastFontSize=g,this._layoutTextLastFontFamily=R);const{width:I}=this._layoutTextCtx.measureText(x.textContent);if(I>0){const V=P.canvasWidth/I;this._enhanceTextSelection&&(P.scale=V),u=`scaleX(${V})`}}if(0!==P.angle&&(u=`rotate(${P.angle}deg) ${u}`),u.length>0&&(this._enhanceTextSelection&&(P.originalTransform=u),x.style.transform=u),P.hasText&&this._container.appendChild(x),P.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.appendChild(g)}}_render(x=0){const P=(0,p.createPromiseCapability)();let u=Object.create(null);const g=this._document.createElement("canvas");if(g.height=g.width=30,this._layoutTextCtx=g.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),P.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const R=()=>{this._reader.read().then(({value:I,done:V})=>{V?P.resolve():(Object.assign(u,I.styles),this._processItems(I.items,u),R())},P.reject)};this._reader=this._textContentStream.getReader(),R()}}P.promise.then(()=>{u=null,x?this._renderTimer=setTimeout(()=>{M(this),this._renderTimer=null},x):M(this)},this._capability.reject)}expandTextDivs(x=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function F(U){const x=U._bounds,P=U._viewport,u=function b(U,x,P){const u=P.map(function(R,I){return{x1:R.left,y1:R.top,x2:R.right,y2:R.bottom,index:I,x1New:void 0,x2New:void 0}});_(U,u);const g=new Array(P.length);for(const R of u)g[R.index]={left:R.x1New,top:0,right:R.x2New,bottom:0};P.map(function(R,I){const V=g[I],Y=u[I];Y.x1=R.top,Y.y1=U-V.right,Y.x2=R.bottom,Y.y2=U-V.left,Y.index=I,Y.x1New=void 0,Y.x2New=void 0}),_(x,u);for(const R of u){const I=R.index;g[I].top=R.x1New,g[I].bottom=R.x2New}return g}(P.width,P.height,x);for(let g=0;g<u.length;g++){const R=x[g].div,I=U._textDivProperties.get(R);if(0===I.angle){I.paddingLeft=x[g].left-u[g].left,I.paddingTop=x[g].top-u[g].top,I.paddingRight=u[g].right-x[g].right,I.paddingBottom=u[g].bottom-x[g].bottom,U._textDivProperties.set(R,I);continue}const V=u[g],Y=x[g],ne=Y.m,re=ne[0],ue=ne[1],ve=[[0,0],[0,Y.size[1]],[Y.size[0],0],Y.size],Ae=new Float64Array(64);for(let de=0,Me=ve.length;de<Me;de++){const xe=p.Util.applyTransform(ve[de],ne);Ae[de+0]=re&&(V.left-xe[0])/re,Ae[de+4]=ue&&(V.top-xe[1])/ue,Ae[de+8]=re&&(V.right-xe[0])/re,Ae[de+12]=ue&&(V.bottom-xe[1])/ue,Ae[de+16]=ue&&(V.left-xe[0])/-ue,Ae[de+20]=re&&(V.top-xe[1])/re,Ae[de+24]=ue&&(V.right-xe[0])/-ue,Ae[de+28]=re&&(V.bottom-xe[1])/re,Ae[de+32]=re&&(V.left-xe[0])/-re,Ae[de+36]=ue&&(V.top-xe[1])/-ue,Ae[de+40]=re&&(V.right-xe[0])/-re,Ae[de+44]=ue&&(V.bottom-xe[1])/-ue,Ae[de+48]=ue&&(V.left-xe[0])/ue,Ae[de+52]=re&&(V.top-xe[1])/-re,Ae[de+56]=ue&&(V.right-xe[0])/ue,Ae[de+60]=re&&(V.bottom-xe[1])/-re}const Ie=1+Math.min(Math.abs(re),Math.abs(ue));I.paddingLeft=N(Ae,32,16)/Ie,I.paddingTop=N(Ae,48,16)/Ie,I.paddingRight=N(Ae,0,16)/Ie,I.paddingBottom=N(Ae,16,16)/Ie,U._textDivProperties.set(R,I)}}(this),this._bounds=null);const P=[],u=[];for(let g=0,R=this._textDivs.length;g<R;g++){const I=this._textDivs[g],V=this._textDivProperties.get(I);!V.hasText||(x?(P.length=0,u.length=0,V.originalTransform&&P.push(V.originalTransform),V.paddingTop>0?(u.push(`${V.paddingTop}px`),P.push(`translateY(${-V.paddingTop}px)`)):u.push(0),u.push(V.paddingRight>0?V.paddingRight/V.scale+"px":0),u.push(V.paddingBottom>0?`${V.paddingBottom}px`:0),V.paddingLeft>0?(u.push(V.paddingLeft/V.scale+"px"),P.push(`translateX(${-V.paddingLeft/V.scale}px)`)):u.push(0),I.style.padding=u.join(" "),P.length&&(I.style.transform=P.join(" "))):(I.style.padding=null,I.style.transform=V.originalTransform))}}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.SVGGraphics=void 0;var p=X(1),ce=X(5),ae=X(3);let le=class{constructor(){(0,p.unreachable)("Not implemented: SVGGraphics")}};O.SVGGraphics=le;{let _=function(u){let g=[];const R=[];for(const I of u)"save"!==I.fn?"restore"===I.fn?g=R.pop():g.push(I):(g.push({fnId:92,fn:"group",items:[]}),R.push(g),g=g[g.length-1].items);return g},h=function(u){if(Number.isInteger(u))return u.toString();const g=u.toFixed(10);let R=g.length-1;if("0"!==g[R])return g;do{R--}while("0"===g[R]);return g.substring(0,"."===g[R]?R:R+1)},w=function(u){if(0===u[4]&&0===u[5]){if(0===u[1]&&0===u[2])return 1===u[0]&&1===u[3]?"":`scale(${h(u[0])} ${h(u[3])})`;if(u[0]===u[3]&&u[1]===-u[2]){const g=180*Math.acos(u[0])/Math.PI;return`rotate(${h(g)})`}}else if(1===u[0]&&0===u[1]&&0===u[2]&&1===u[3])return`translate(${h(u[4])} ${h(u[5])})`;return`matrix(${h(u[0])} ${h(u[1])} ${h(u[2])} ${h(u[3])} ${h(u[4])} ${h(u[5])})`};const pe={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ee="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",G=["butt","round","square"],M=["miter","round","bevel"],N=function(u,g="",R=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!R)return URL.createObjectURL(new Blob([u],{type:g}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let V=`data:${g};base64,`;for(let Y=0,ne=u.length;Y<ne;Y+=3){const re=255&u[Y],ue=255&u[Y+1],ve=255&u[Y+2];V+=I[re>>2]+I[(3&re)<<4|ue>>4]+I[Y+1<ne?(15&ue)<<2|ve>>6:64]+I[Y+2<ne?63&ve:64]}return V},F=function(){const u=new Uint8Array([137,80,78,71,13,10,26,10]),R=new Int32Array(256);for(let ve=0;ve<256;ve++){let Ae=ve;for(let Ie=0;Ie<8;Ie++)Ae=1&Ae?3988292384^Ae>>1&2147483647:Ae>>1&2147483647;R[ve]=Ae}function V(ve,Ae,Ie,de){let Me=de;const xe=Ae.length;Ie[Me]=xe>>24&255,Ie[Me+1]=xe>>16&255,Ie[Me+2]=xe>>8&255,Ie[Me+3]=255&xe,Me+=4,Ie[Me]=255&ve.charCodeAt(0),Ie[Me+1]=255&ve.charCodeAt(1),Ie[Me+2]=255&ve.charCodeAt(2),Ie[Me+3]=255&ve.charCodeAt(3),Me+=4,Ie.set(Ae,Me),Me+=Ae.length;const Le=function I(ve,Ae,Ie){let de=-1;for(let Me=Ae;Me<Ie;Me++)de=de>>>8^R[255&(de^ve[Me])];return-1^de}(Ie,de+4,Me);Ie[Me]=Le>>24&255,Ie[Me+1]=Le>>16&255,Ie[Me+2]=Le>>8&255,Ie[Me+3]=255&Le}function re(ve){let Ae=ve.length;const Ie=65535,de=Math.ceil(Ae/Ie),Me=new Uint8Array(2+Ae+5*de+4);let xe=0;Me[xe++]=120,Me[xe++]=156;let Le=0;for(;Ae>Ie;)Me[xe++]=0,Me[xe++]=255,Me[xe++]=255,Me[xe++]=0,Me[xe++]=0,Me.set(ve.subarray(Le,Le+Ie),xe),xe+=Ie,Le+=Ie,Ae-=Ie;Me[xe++]=1,Me[xe++]=255&Ae,Me[xe++]=Ae>>8&255,Me[xe++]=255&~Ae,Me[xe++]=(65535&~Ae)>>8&255,Me.set(ve.subarray(Le),xe),xe+=ve.length-Le;const $e=function Y(ve,Ae,Ie){let de=1,Me=0;for(let xe=Ae;xe<Ie;++xe)de=(de+(255&ve[xe]))%65521,Me=(Me+de)%65521;return Me<<16|de}(ve,0,ve.length);return Me[xe++]=$e>>24&255,Me[xe++]=$e>>16&255,Me[xe++]=$e>>8&255,Me[xe++]=255&$e,Me}return function(Ae,Ie,de){return function ue(ve,Ae,Ie,de){const Me=ve.width,xe=ve.height;let Le,$e,Q;const v=ve.data;switch(Ae){case p.ImageKind.GRAYSCALE_1BPP:$e=0,Le=1,Q=Me+7>>3;break;case p.ImageKind.RGB_24BPP:$e=2,Le=8,Q=3*Me;break;case p.ImageKind.RGBA_32BPP:$e=6,Le=8,Q=4*Me;break;default:throw new Error("invalid format")}const E=new Uint8Array((1+Q)*xe);let d=0,S=0;for(let Ce=0;Ce<xe;++Ce)E[d++]=0,E.set(v.subarray(S,S+Q),d),S+=Q,d+=Q;if(Ae===p.ImageKind.GRAYSCALE_1BPP&&de){d=0;for(let Ce=0;Ce<xe;Ce++){d++;for(let _e=0;_e<Q;_e++)E[d++]^=255}}const D=new Uint8Array([Me>>24&255,Me>>16&255,Me>>8&255,255&Me,xe>>24&255,xe>>16&255,xe>>8&255,255&xe,Le,$e,0,0,0]),k=function ne(ve){if(!ae.isNodeJS)return re(ve);try{let Ae;Ae=parseInt(process.versions.node)>=8?ve:Buffer.from(ve);const Ie=__webpack_require__(258).deflateSync(Ae,{level:9});return Ie instanceof Uint8Array?Ie:new Uint8Array(Ie)}catch(Ae){(0,p.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ae)}return re(ve)}(E),W=new Uint8Array(u.length+36+D.length+k.length);let fe=0;return W.set(u,fe),fe+=u.length,V("IHDR",D,W,fe),fe+=12+D.length,V("IDATA",k,W,fe),fe+=12+k.length,V("IEND",new Uint8Array(0),W,fe),N(W,"image/png",Ie)}(Ae,void 0===Ae.kind?p.ImageKind.GRAYSCALE_1BPP:Ae.kind,Ie,de)}}();class b{constructor(){this.fontSizeScale=1,this.fontWeight=pe.fontWeight,this.fontSize=0,this.textMatrix=p.IDENTITY_MATRIX,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=p.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=pe.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,R){this.x=g,this.y=R}}let U=0,x=0,P=0;O.SVGGraphics=le=class{constructor(u,g,R=!1){this.svgFactory=new ce.DOMSVGFactory,this.current=new b,this.transformMatrix=p.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!R,this._operatorIdMapping=[];for(const I in p.OPS)this._operatorIdMapping[p.OPS[I]]=I}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const g=u.fnArray,R=u.argsArray;for(let I=0,V=g.length;I<V;I++)if(g[I]===p.OPS.dependency)for(const Y of R[I]){const ne=Y.startsWith("g_")?this.commonObjs:this.objs,re=new Promise(ue=>{ne.get(Y,ue)});this.current.dependencies.push(re)}return Promise.all(this.current.dependencies)}transform(u,g,R,I,V,Y){this.transformMatrix=p.Util.transform(this.transformMatrix,[u,g,R,I,V,Y]),this.tgrp=null}getSVG(u,g){this.viewport=g;const R=this._initialize(g);return this.loadDependencies(u).then(()=>(this.transformMatrix=p.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),R))}convertOpList(u){const g=this._operatorIdMapping,R=u.argsArray,I=u.fnArray,V=[];for(let Y=0,ne=I.length;Y<ne;Y++){const re=I[Y];V.push({fnId:re,fn:g[re],args:R[Y]})}return _(V)}executeOpTree(u){for(const g of u){const R=g.fn,V=g.args;switch(0|g.fnId){case p.OPS.beginText:this.beginText();break;case p.OPS.dependency:break;case p.OPS.setLeading:this.setLeading(V);break;case p.OPS.setLeadingMoveText:this.setLeadingMoveText(V[0],V[1]);break;case p.OPS.setFont:this.setFont(V);break;case p.OPS.showText:case p.OPS.showSpacedText:this.showText(V[0]);break;case p.OPS.endText:this.endText();break;case p.OPS.moveText:this.moveText(V[0],V[1]);break;case p.OPS.setCharSpacing:this.setCharSpacing(V[0]);break;case p.OPS.setWordSpacing:this.setWordSpacing(V[0]);break;case p.OPS.setHScale:this.setHScale(V[0]);break;case p.OPS.setTextMatrix:this.setTextMatrix(V[0],V[1],V[2],V[3],V[4],V[5]);break;case p.OPS.setTextRise:this.setTextRise(V[0]);break;case p.OPS.setTextRenderingMode:this.setTextRenderingMode(V[0]);break;case p.OPS.setLineWidth:this.setLineWidth(V[0]);break;case p.OPS.setLineJoin:this.setLineJoin(V[0]);break;case p.OPS.setLineCap:this.setLineCap(V[0]);break;case p.OPS.setMiterLimit:this.setMiterLimit(V[0]);break;case p.OPS.setFillRGBColor:this.setFillRGBColor(V[0],V[1],V[2]);break;case p.OPS.setStrokeRGBColor:this.setStrokeRGBColor(V[0],V[1],V[2]);break;case p.OPS.setStrokeColorN:this.setStrokeColorN(V);break;case p.OPS.setFillColorN:this.setFillColorN(V);break;case p.OPS.shadingFill:this.shadingFill(V[0]);break;case p.OPS.setDash:this.setDash(V[0],V[1]);break;case p.OPS.setRenderingIntent:this.setRenderingIntent(V[0]);break;case p.OPS.setFlatness:this.setFlatness(V[0]);break;case p.OPS.setGState:this.setGState(V[0]);break;case p.OPS.fill:this.fill();break;case p.OPS.eoFill:this.eoFill();break;case p.OPS.stroke:this.stroke();break;case p.OPS.fillStroke:this.fillStroke();break;case p.OPS.eoFillStroke:this.eoFillStroke();break;case p.OPS.clip:this.clip("nonzero");break;case p.OPS.eoClip:this.clip("evenodd");break;case p.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case p.OPS.paintImageXObject:this.paintImageXObject(V[0]);break;case p.OPS.paintInlineImageXObject:this.paintInlineImageXObject(V[0]);break;case p.OPS.paintImageMaskXObject:this.paintImageMaskXObject(V[0]);break;case p.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(V[0],V[1]);break;case p.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case p.OPS.closePath:this.closePath();break;case p.OPS.closeStroke:this.closeStroke();break;case p.OPS.closeFillStroke:this.closeFillStroke();break;case p.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case p.OPS.nextLine:this.nextLine();break;case p.OPS.transform:this.transform(V[0],V[1],V[2],V[3],V[4],V[5]);break;case p.OPS.constructPath:this.constructPath(V[0],V[1]);break;case p.OPS.endPath:this.endPath();break;case 92:this.group(g.items);break;default:(0,p.warn)(`Unimplemented operator ${R}`)}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,g,R,I,V,Y){const ne=this.current;ne.textMatrix=ne.lineMatrix=[u,g,R,I,V,Y],ne.textMatrixScale=Math.hypot(u,g),ne.x=ne.lineX=0,ne.y=ne.lineY=0,ne.xcoords=[],ne.ycoords=[],ne.tspan=this.svgFactory.createElement("svg:tspan"),ne.tspan.setAttributeNS(null,"font-family",ne.fontFamily),ne.tspan.setAttributeNS(null,"font-size",`${h(ne.fontSize)}px`),ne.tspan.setAttributeNS(null,"y",h(-ne.y)),ne.txtElement=this.svgFactory.createElement("svg:text"),ne.txtElement.appendChild(ne.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=p.IDENTITY_MATRIX,u.lineMatrix=p.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,g){const R=this.current;R.x=R.lineX+=u,R.y=R.lineY+=g,R.xcoords=[],R.ycoords=[],R.tspan=this.svgFactory.createElement("svg:tspan"),R.tspan.setAttributeNS(null,"font-family",R.fontFamily),R.tspan.setAttributeNS(null,"font-size",`${h(R.fontSize)}px`),R.tspan.setAttributeNS(null,"y",h(-R.y))}showText(u){const g=this.current,R=g.font,I=g.fontSize;if(0===I)return;const V=g.fontSizeScale,Y=g.charSpacing,ne=g.wordSpacing,re=g.fontDirection,ue=g.textHScale*re,ve=R.vertical,Ae=ve?1:-1,Ie=R.defaultVMetrics,de=I*g.fontMatrix[0];let Me=0;for(const $e of u){if(null===$e){Me+=re*ne;continue}if("number"==typeof $e){Me+=Ae*$e*I/1e3;continue}const Q=($e.isSpace?ne:0)+Y,v=$e.fontChar;let E,d,D,S=$e.width;if(ve){let k;const H=$e.vmetric||Ie;k=$e.vmetric?H[1]:.5*S,k=-k*de,S=H?-H[0]:S,E=k/V,d=(Me+H[2]*de)/V}else E=Me/V,d=0;($e.isInFont||R.missingFile)&&(g.xcoords.push(g.x+E),ve&&g.ycoords.push(-g.y+d),g.tspan.textContent+=v),D=ve?S*de-Q*re:S*de+Q*re,Me+=D}g.tspan.setAttributeNS(null,"x",g.xcoords.map(h).join(" ")),g.tspan.setAttributeNS(null,"y",ve?g.ycoords.map(h).join(" "):h(-g.y)),ve?g.y-=Me:g.x+=Me*ue,g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${h(g.fontSize)}px`),g.fontStyle!==pe.fontStyle&&g.tspan.setAttributeNS(null,"font-style",g.fontStyle),g.fontWeight!==pe.fontWeight&&g.tspan.setAttributeNS(null,"font-weight",g.fontWeight);const xe=g.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;xe===p.TextRenderingMode.FILL||xe===p.TextRenderingMode.FILL_STROKE?(g.fillColor!==pe.fillColor&&g.tspan.setAttributeNS(null,"fill",g.fillColor),g.fillAlpha<1&&g.tspan.setAttributeNS(null,"fill-opacity",g.fillAlpha)):g.tspan.setAttributeNS(null,"fill",g.textRenderingMode===p.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(xe===p.TextRenderingMode.STROKE||xe===p.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(g.tspan,1/(g.textMatrixScale||1));let Le=g.textMatrix;0!==g.textRise&&(Le=Le.slice(),Le[5]+=g.textRise),g.txtElement.setAttributeNS(null,"transform",`${w(Le)} scale(${h(ue)}, -1)`),g.txtElement.setAttributeNS(ee,"xml:space","preserve"),g.txtElement.appendChild(g.tspan),g.txtgrp.appendChild(g.txtElement),this._ensureTransformGroup().appendChild(g.txtElement)}setLeadingMoveText(u,g){this.setLeading(-g),this.moveText(u,g)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const g=N(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${g}); }\n`}setFont(u){const g=this.current,R=this.commonObjs.get(u[0]);let I=u[1];g.font=R,this.embedFonts&&!R.missingFile&&!this.embeddedFonts[R.loadedName]&&(this.addFontStyle(R),this.embeddedFonts[R.loadedName]=R),g.fontMatrix=R.fontMatrix||p.FONT_IDENTITY_MATRIX;let V="normal";R.black?V="900":R.bold&&(V="bold");const Y=R.italic?"italic":"normal";I<0?(I=-I,g.fontDirection=-1):g.fontDirection=1,g.fontSize=I,g.fontFamily=R.loadedName,g.fontWeight=V,g.fontStyle=Y,g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"y",h(-g.y)),g.xcoords=[],g.ycoords=[]}endText(){var g;const u=this.current;u.textRenderingMode&p.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(g=u.txtElement)?void 0:g.hasChildNodes())&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=G[u]}setLineJoin(u){this.current.lineJoin=M[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,g,R){this.current.strokeColor=p.Util.makeHexColor(u,g,R)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,g,R){this.current.fillColor=p.Util.makeHexColor(u,g,R),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const g=this.viewport.width,R=this.viewport.height,I=p.Util.inverseTransform(this.transformMatrix),V=p.Util.applyTransform([0,0],I),Y=p.Util.applyTransform([0,R],I),ne=p.Util.applyTransform([g,0],I),re=p.Util.applyTransform([g,R],I),ue=Math.min(V[0],Y[0],ne[0],re[0]),ve=Math.min(V[1],Y[1],ne[1],re[1]),Ae=Math.max(V[0],Y[0],ne[0],re[0]),Ie=Math.max(V[1],Y[1],ne[1],re[1]),de=this.svgFactory.createElement("svg:rect");de.setAttributeNS(null,"x",ue),de.setAttributeNS(null,"y",ve),de.setAttributeNS(null,"width",Ae-ue),de.setAttributeNS(null,"height",Ie-ve),de.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&de.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(de)}_makeColorN_Pattern(u){return"TilingPattern"===u[0]?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const g=u[1],R=u[2],I=u[3]||p.IDENTITY_MATRIX,[V,Y,ne,re]=u[4],ue=u[5],ve=u[6],Ae=u[7],Ie="shading"+P++,[de,Me,xe,Le]=p.Util.normalizeRect([...p.Util.applyTransform([V,Y],I),...p.Util.applyTransform([ne,re],I)]),[$e,Q]=p.Util.singularValueDecompose2dScale(I),v=ue*$e,E=ve*Q,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",Ie),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",v),d.setAttributeNS(null,"height",E),d.setAttributeNS(null,"x",`${de}`),d.setAttributeNS(null,"y",`${Me}`);const S=this.svg,D=this.transformMatrix,k=this.current.fillColor,H=this.current.strokeColor,W=this.svgFactory.create(xe-de,Le-Me);if(this.svg=W,this.transformMatrix=I,2===Ae){const fe=p.Util.makeHexColor(...g);this.current.fillColor=fe,this.current.strokeColor=fe}return this.executeOpTree(this.convertOpList(R)),this.svg=S,this.transformMatrix=D,this.current.fillColor=k,this.current.strokeColor=H,d.appendChild(W.childNodes[0]),this.defs.appendChild(d),`url(#${Ie})`}_makeShadingPattern(u){switch("string"==typeof u&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const g="shading"+P++,R=u[3];let I;switch(u[1]){case"axial":const V=u[4],Y=u[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",g),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",V[0]),I.setAttributeNS(null,"y1",V[1]),I.setAttributeNS(null,"x2",Y[0]),I.setAttributeNS(null,"y2",Y[1]);break;case"radial":const ne=u[4],re=u[5],ue=u[6],ve=u[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",g),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",re[0]),I.setAttributeNS(null,"cy",re[1]),I.setAttributeNS(null,"r",ve),I.setAttributeNS(null,"fx",ne[0]),I.setAttributeNS(null,"fy",ne[1]),I.setAttributeNS(null,"fr",ue);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const V of R){const Y=this.svgFactory.createElement("svg:stop");Y.setAttributeNS(null,"offset",V[0]),Y.setAttributeNS(null,"stop-color",V[1]),I.appendChild(Y)}return this.defs.appendChild(I),`url(#${g})`;case"Mesh":return(0,p.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,g){this.current.dashArray=u,this.current.dashPhase=g}constructPath(u,g){const R=this.current;let I=R.x,V=R.y,Y=[],ne=0;for(const re of u)switch(0|re){case p.OPS.rectangle:I=g[ne++],V=g[ne++];const Ae=I+g[ne++],Ie=V+g[ne++];Y.push("M",h(I),h(V),"L",h(Ae),h(V),"L",h(Ae),h(Ie),"L",h(I),h(Ie),"Z");break;case p.OPS.moveTo:I=g[ne++],V=g[ne++],Y.push("M",h(I),h(V));break;case p.OPS.lineTo:I=g[ne++],V=g[ne++],Y.push("L",h(I),h(V));break;case p.OPS.curveTo:I=g[ne+4],V=g[ne+5],Y.push("C",h(g[ne]),h(g[ne+1]),h(g[ne+2]),h(g[ne+3]),h(I),h(V)),ne+=6;break;case p.OPS.curveTo2:Y.push("C",h(I),h(V),h(g[ne]),h(g[ne+1]),h(g[ne+2]),h(g[ne+3])),I=g[ne+2],V=g[ne+3],ne+=4;break;case p.OPS.curveTo3:I=g[ne+2],V=g[ne+3],Y.push("C",h(g[ne]),h(g[ne+1]),h(I),h(V),h(I),h(V)),ne+=4;break;case p.OPS.closePath:Y.push("Z")}Y=Y.join(" "),R.path&&u.length>0&&u[0]!==p.OPS.rectangle&&u[0]!==p.OPS.moveTo?Y=R.path.getAttributeNS(null,"d")+Y:(R.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(R.path)),R.path.setAttributeNS(null,"d",Y),R.path.setAttributeNS(null,"fill","none"),R.element=R.path,R.setCurrentPoint(I,V)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element)return void(this.pendingClip=null);const g="clippath"+U++,R=this.svgFactory.createElement("svg:clipPath");R.setAttributeNS(null,"id",g),R.setAttributeNS(null,"transform",w(this.transformMatrix));const I=u.element.cloneNode(!0);if(I.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,R.appendChild(I),this.defs.appendChild(R),u.activeClipUrl){u.clipGroup=null;for(const V of this.extraStack)V.clipGroup=null;R.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${g})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const g=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",g)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[g,R]of u)switch(g){case"LW":this.setLineWidth(R);break;case"LC":this.setLineCap(R);break;case"LJ":this.setLineJoin(R);break;case"ML":this.setMiterLimit(R);break;case"D":this.setDash(R[0],R[1]);break;case"RI":this.setRenderingIntent(R);break;case"FL":this.setFlatness(R);break;case"Font":this.setFont(R);break;case"CA":this.setStrokeAlpha(R);break;case"ca":this.setFillAlpha(R);break;default:(0,p.warn)(`Unimplemented graphic state operator ${g}`)}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,g=1){const R=this.current;let I=R.dashArray;1!==g&&I.length>0&&(I=I.map(function(V){return g*V})),u.setAttributeNS(null,"stroke",R.strokeColor),u.setAttributeNS(null,"stroke-opacity",R.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",h(R.miterLimit)),u.setAttributeNS(null,"stroke-linecap",R.lineCap),u.setAttributeNS(null,"stroke-linejoin",R.lineJoin),u.setAttributeNS(null,"stroke-width",h(g*R.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",I.map(h).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",h(g*R.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(u)}paintImageXObject(u){const g=u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u);g?this.paintInlineImageXObject(g):(0,p.warn)(`Dependent image with object ID ${u} is not ready yet`)}paintInlineImageXObject(u,g){const R=u.width,I=u.height,V=F(u,this.forceDataSchema,!!g),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y","0"),Y.setAttributeNS(null,"width",h(R)),Y.setAttributeNS(null,"height",h(I)),this.current.element=Y,this.clip("nonzero");const ne=this.svgFactory.createElement("svg:image");ne.setAttributeNS(y,"xlink:href",V),ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y",h(-I)),ne.setAttributeNS(null,"width",h(R)+"px"),ne.setAttributeNS(null,"height",h(I)+"px"),ne.setAttributeNS(null,"transform",`scale(${h(1/R)} ${h(-1/I)})`),g?g.appendChild(ne):this._ensureTransformGroup().appendChild(ne)}paintImageMaskXObject(u){const g=this.current,R=u.width,I=u.height,V=g.fillColor;g.maskId="mask"+x++;const Y=this.svgFactory.createElement("svg:mask");Y.setAttributeNS(null,"id",g.maskId);const ne=this.svgFactory.createElement("svg:rect");ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y","0"),ne.setAttributeNS(null,"width",h(R)),ne.setAttributeNS(null,"height",h(I)),ne.setAttributeNS(null,"fill",V),ne.setAttributeNS(null,"mask",`url(#${g.maskId})`),this.defs.appendChild(Y),this._ensureTransformGroup().appendChild(ne),this.paintInlineImageXObject(u,Y)}paintFormXObjectBegin(u,g){if(Array.isArray(u)&&6===u.length&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),g){const R=g[2]-g[0],I=g[3]-g[1],V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",g[0]),V.setAttributeNS(null,"y",g[1]),V.setAttributeNS(null,"width",h(R)),V.setAttributeNS(null,"height",h(I)),this.current.element=V,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const g=this.svgFactory.create(u.width,u.height),R=this.svgFactory.createElement("svg:defs");g.appendChild(R),this.defs=R;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",w(u.transform)),g.appendChild(I),this.svg=I,g}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",w(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.PDFNodeStream=void 0;var p=X(1),ce=X(26);const ae=__webpack_require__(172),le=__webpack_require__(1),pe=__webpack_require__(779),ee=__webpack_require__(558),y=/^file:\/\/\/[a-zA-Z]:\//;O.PDFNodeStream=class M{constructor(P){this.source=P,this.url=function G(x){const P=ee.parse(x);return"file:"===P.protocol||P.host?P:/^[a-z]:[/\\]/i.test(x)?ee.parse(`file:///${x}`):(P.host||(P.protocol="file:"),P)}(P.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P,u;return null!=(u=null==(P=this._fullRequestReader)?void 0:P._loaded)?u:0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new w(this):new _(this),this._fullRequestReader}getRangeReader(P,u){if(u<=this._progressiveDataLength)return null;const g=this.isFsUrl?new U(this,P,u):new h(this,P,u);return this._rangeRequestReaders.push(g),g}cancelAllRequests(P){this._fullRequestReader&&this._fullRequestReader.cancel(P);for(const u of this._rangeRequestReaders.slice(0))u.cancel(P)}};class N{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const u=P.source;this._contentLength=u.length,this._loaded=0,this._filename=null,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._headersCapability=(0,p.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var P=this;return _asyncToGenerator(function*(){if(yield P._readCapability.promise,P._done)return{value:void 0,done:!0};if(P._storedError)throw P._storedError;const u=P._readableStream.read();return null===u?(P._readCapability=(0,p.createPromiseCapability)(),P.read()):(P._loaded+=u.length,P.onProgress&&P.onProgress({loaded:P._loaded,total:P._contentLength}),{value:new Uint8Array(u).buffer,done:!1})})()}cancel(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",u=>{this._error(u)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new p.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class F{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!P.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var P=this;return _asyncToGenerator(function*(){if(yield P._readCapability.promise,P._done)return{value:void 0,done:!0};if(P._storedError)throw P._storedError;const u=P._readableStream.read();return null===u?(P._readCapability=(0,p.createPromiseCapability)(),P.read()):(P._loaded+=u.length,P.onProgress&&P.onProgress({loaded:P._loaded}),{value:new Uint8Array(u).buffer,done:!1})})()}cancel(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",u=>{this._error(u)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function b(x,P){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:P}}class _ extends N{constructor(P){super(P);const u=g=>{if(404===g.statusCode){const Y=new p.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=Y,void this._headersCapability.reject(Y)}this._headersCapability.resolve(),this._setReadableStream(g);const R=Y=>this._readableStream.headers[Y.toLowerCase()],{allowRangeRequests:I,suggestedLength:V}=(0,ce.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=V||this._contentLength,this._filename=(0,ce.extractFilenameFromHeader)(R)};this._request=null,this._request="http:"===this._url.protocol?le.request(b(this._url,P.httpHeaders),u):pe.request(b(this._url,P.httpHeaders),u),this._request.on("error",g=>{this._storedError=g,this._headersCapability.reject(g)}),this._request.end()}}class h extends F{constructor(P,u,g){super(P),this._httpHeaders={};for(const I in P.httpHeaders){const V=P.httpHeaders[I];void 0!==V&&(this._httpHeaders[I]=V)}this._httpHeaders.Range=`bytes=${u}-${g-1}`;const R=I=>{if(404!==I.statusCode)this._setReadableStream(I);else{const V=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=V}};this._request=null,this._request="http:"===this._url.protocol?le.request(b(this._url,this._httpHeaders),R):pe.request(b(this._url,this._httpHeaders),R),this._request.on("error",I=>{this._storedError=I}),this._request.end()}}class w extends N{constructor(P){super(P);let u=decodeURIComponent(this._url.path);y.test(this._url.href)&&(u=u.replace(/^\//,"")),ae.lstat(u,(g,R)=>{if(g)return"ENOENT"===g.code&&(g=new p.MissingPDFException(`Missing PDF "${u}".`)),this._storedError=g,void this._headersCapability.reject(g);this._contentLength=R.size,this._setReadableStream(ae.createReadStream(u)),this._headersCapability.resolve()})}}class U extends F{constructor(P,u,g){super(P);let R=decodeURIComponent(this._url.path);y.test(this._url.href)&&(R=R.replace(/^\//,"")),this._setReadableStream(ae.createReadStream(R,{start:u,end:g-1}))}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.createResponseStatusError=function ee(G,M){return 404===G||0===G&&M.startsWith("file:")?new p.MissingPDFException('Missing PDF "'+M+'".'):new p.UnexpectedResponseException(`Unexpected server response (${G}) while retrieving PDF "${M}".`,G)},O.extractFilenameFromHeader=function pe(G){const M=G("Content-Disposition");if(M){let N=(0,ce.getFilenameFromContentDispositionHeader)(M);if(N.includes("%"))try{N=decodeURIComponent(N)}catch(F){}if((0,ae.isPdfFile)(N))return N}return null},O.validateRangeRequestCapabilities=function le({getResponseHeader:G,isHttp:M,rangeChunkSize:N,disableRange:F}){const b={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(G("Content-Length"),10);return!Number.isInteger(_)||(b.suggestedLength=_,_<=2*N)||F||!M||"bytes"!==G("Accept-Ranges")||"identity"!==(G("Content-Encoding")||"identity")||(b.allowRangeRequests=!0),b},O.validateResponseStatus=function y(G){return 200===G||206===G};var p=X(1),ce=X(27),ae=X(5)},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.getFilenameFromContentDispositionHeader=function ce(ae){let le=!0,pe=ee("filename\\*","i").exec(ae);if(pe){pe=pe[1];let _=N(pe);return _=unescape(_),_=F(_),_=b(_),G(_)}if(pe=function M(_){const h=[];let w;const U=ee("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(w=U.exec(_));){let[,P,u,g]=w;if(P=parseInt(P,10),P in h){if(0===P)break}else h[P]=[u,g]}const x=[];for(let P=0;P<h.length&&P in h;++P){let[u,g]=h[P];g=N(g),u&&(g=unescape(g),0===P&&(g=F(g))),x.push(g)}return x.join("")}(ae),pe)return G(b(pe));if(pe=ee("filename","i").exec(ae),pe){pe=pe[1];let _=N(pe);return _=b(_),G(_)}function ee(_,h){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function y(_,h){if(_){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const w=new TextDecoder(_,{fatal:!0}),U=(0,p.stringToBytes)(h);h=w.decode(U),le=!1}catch(w){}}return h}function G(_){return le&&/[\x80-\xff]/.test(_)&&(_=y("utf-8",_),le&&(_=y("iso-8859-1",_))),_}function N(_){if(_.startsWith('"')){const h=_.slice(1).split('\\"');for(let w=0;w<h.length;++w){const U=h[w].indexOf('"');-1!==U&&(h[w]=h[w].slice(0,U),h.length=w+1),h[w]=h[w].replace(/\\(.)/g,"$1")}_=h.join('"')}return _}function F(_){const h=_.indexOf("'");return-1===h?_:y(_.slice(0,h),_.slice(h+1).replace(/^[^']*'/,""))}function b(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,w,U,x){if("q"===U||"Q"===U)return y(w,x=(x=x.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(P,u){return String.fromCharCode(parseInt(u,16))}));try{x=atob(x)}catch(P){}return y(w,x)})}return""};var p=X(1)},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.PDFNetworkStream=void 0;var p=X(1),ce=X(26);class ee{constructor(F,b={}){this.url=F,this.isHttp=/^https?:/i.test(F),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.getXhr=b.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(F,b,_){const h={begin:F,end:b};for(const w in _)h[w]=_[w];return this.request(h)}requestFull(F){return this.request(F)}request(F){const b=this.getXhr(),_=this.currXhrId++,h=this.pendingRequests[_]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const w in this.httpHeaders){const U=this.httpHeaders[w];void 0!==U&&b.setRequestHeader(w,U)}return this.isHttp&&"begin"in F&&"end"in F?(b.setRequestHeader("Range",`bytes=${F.begin}-${F.end-1}`),h.expectedStatus=206):h.expectedStatus=200,b.responseType="arraybuffer",F.onError&&(b.onerror=function(w){F.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,_),b.onprogress=this.onProgress.bind(this,_),h.onHeadersReceived=F.onHeadersReceived,h.onDone=F.onDone,h.onError=F.onError,h.onProgress=F.onProgress,b.send(null),_}onProgress(F,b){var h;const _=this.pendingRequests[F];!_||null==(h=_.onProgress)||h.call(_,b)}onStateChange(F,b){var P,u,g;const _=this.pendingRequests[F];if(!_)return;const h=_.xhr;if(h.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),4!==h.readyState||!(F in this.pendingRequests))return;if(delete this.pendingRequests[F],0===h.status&&this.isHttp)return void(null==(P=_.onError)||P.call(_,h.status));const w=h.status||200;if((200!==w||206!==_.expectedStatus)&&w!==_.expectedStatus)return void(null==(u=_.onError)||u.call(_,h.status));const x=function pe(N){const F=N.response;return"string"!=typeof F?F:(0,p.stringToBytes)(F).buffer}(h);if(206===w){const R=h.getResponseHeader("Content-Range"),I=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);_.onDone({begin:parseInt(I[1],10),chunk:x})}else x?_.onDone({begin:0,chunk:x}):null==(g=_.onError)||g.call(_,h.status)}getRequestXhr(F){return this.pendingRequests[F].xhr}isPendingRequest(F){return F in this.pendingRequests}abortRequest(F){const b=this.pendingRequests[F].xhr;delete this.pendingRequests[F],b.abort()}}O.PDFNetworkStream=class y{constructor(F){this._source=F,this._manager=new ee(F.url,{httpHeaders:F.httpHeaders,withCredentials:F.withCredentials}),this._rangeChunkSize=F.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(F){const b=this._rangeRequestReaders.indexOf(F);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new G(this._manager,this._source),this._fullRequestReader}getRangeReader(F,b){const _=new M(this._manager,F,b);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(F){var b;null==(b=this._fullRequestReader)||b.cancel(F);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(F)}};class G{constructor(F,b){this._manager=F;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=F.requestFull(_),this._headersReceivedCapability=(0,p.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const F=this._fullRequestId,b=this._manager.getRequestXhr(F),_=U=>b.getResponseHeader(U),{allowRangeRequests:h,suggestedLength:w}=(0,ce.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});h&&(this._isRangeSupported=!0),this._contentLength=w||this._contentLength,this._filename=(0,ce.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(F),this._headersReceivedCapability.resolve()}_onDone(F){if(F&&(this._requests.length>0?this._requests.shift().resolve({value:F.chunk,done:!1}):this._cachedChunks.push(F.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(F){this._storedError=(0,ce.createResponseStatusError)(F,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(F){var b;null==(b=this.onProgress)||b.call(this,{loaded:F.loaded,total:F.lengthComputable?F.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var F=this;return _asyncToGenerator(function*(){if(F._storedError)throw F._storedError;if(F._cachedChunks.length>0)return{value:F._cachedChunks.shift(),done:!1};if(F._done)return{value:void 0,done:!0};const b=(0,p.createPromiseCapability)();return F._requests.push(b),b.promise})()}cancel(F){this._done=!0,this._headersReceivedCapability.reject(F);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M{constructor(F,b,_){this._manager=F;const h={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._requestId=F.requestRange(b,_,h),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var F;null==(F=this.onClosed)||F.call(this,this)}_onDone(F){const b=F.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(F){this._storedError=(0,ce.createResponseStatusError)(F,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(F){var b;this.isStreamingSupported||null==(b=this.onProgress)||b.call(this,{loaded:F.loaded})}get isStreamingSupported(){return!1}read(){var F=this;return _asyncToGenerator(function*(){if(F._storedError)throw F._storedError;if(null!==F._queuedChunk){const _=F._queuedChunk;return F._queuedChunk=null,{value:_,done:!1}}if(F._done)return{value:void 0,done:!0};const b=(0,p.createPromiseCapability)();return F._requests.push(b),b.promise})()}cancel(F){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(We,O,X)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.PDFFetchStream=void 0;var p=X(1),ce=X(26);function ae(G,M,N){return{method:"GET",headers:G,signal:null==N?void 0:N.signal,mode:"cors",credentials:M?"include":"same-origin",redirect:"follow"}}function le(G){const M=new Headers;for(const N in G){const F=G[N];void 0!==F&&M.append(N,F)}return M}O.PDFFetchStream=class pe{constructor(M){this.source=M,this.isHttp=/^https?:/i.test(M.url),this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var M,N;return null!=(N=null==(M=this._fullRequestReader)?void 0:M._loaded)?N:0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ee(this),this._fullRequestReader}getRangeReader(M,N){if(N<=this._progressiveDataLength)return null;const F=new y(this,M,N);return this._rangeRequestReaders.push(F),F}cancelAllRequests(M){this._fullRequestReader&&this._fullRequestReader.cancel(M);for(const N of this._rangeRequestReaders.slice(0))N.cancel(M)}};class ee{constructor(M){this._stream=M,this._reader=null,this._loaded=0,this._filename=null;const N=M.source;this._withCredentials=N.withCredentials||!1,this._contentLength=N.length,this._headersCapability=(0,p.createPromiseCapability)(),this._disableRange=N.disableRange||!1,this._rangeChunkSize=N.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!N.disableStream,this._isRangeSupported=!N.disableRange,this._headers=le(this._stream.httpHeaders);const F=N.url;fetch(F,ae(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,ce.validateResponseStatus)(b.status))throw(0,ce.createResponseStatusError)(b.status,F);this._reader=b.body.getReader(),this._headersCapability.resolve();const _=U=>b.headers.get(U),{allowRangeRequests:h,suggestedLength:w}=(0,ce.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=w||this._contentLength,this._filename=(0,ce.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new p.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var M=this;return _asyncToGenerator(function*(){yield M._headersCapability.promise;const{value:N,done:F}=yield M._reader.read();return F?{value:N,done:F}:(M._loaded+=N.byteLength,M.onProgress&&M.onProgress({loaded:M._loaded,total:M._contentLength}),{value:new Uint8Array(N).buffer,done:!1})})()}cancel(M){this._reader&&this._reader.cancel(M),this._abortController&&this._abortController.abort()}}class y{constructor(M,N,F){this._stream=M,this._reader=null,this._loaded=0;const b=M.source;this._withCredentials=b.withCredentials||!1,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!b.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=le(this._stream.httpHeaders),this._headers.append("Range",`bytes=${N}-${F-1}`);const _=b.url;fetch(_,ae(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,ce.validateResponseStatus)(h.status))throw(0,ce.createResponseStatusError)(h.status,_);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var M=this;return _asyncToGenerator(function*(){yield M._readCapability.promise;const{value:N,done:F}=yield M._reader.read();return F?{value:N,done:F}:(M._loaded+=N.byteLength,M.onProgress&&M.onProgress({loaded:M._loaded}),{value:new Uint8Array(N).buffer,done:!1})})()}cancel(M){this._reader&&this._reader.cancel(M),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(We){var O=__webpack_module_cache__[We];if(void 0!==O)return O.exports;var X=__webpack_module_cache__[We]={exports:{}};return __webpack_modules__[We](X,X.exports,__w_pdfjs_require__),X.exports}var __webpack_exports__={};return(()=>{var We=__webpack_exports__;Object.defineProperty(We,"__esModule",{value:!0}),Object.defineProperty(We,"AnnotationLayer",{enumerable:!0,get:function(){return ce.AnnotationLayer}}),Object.defineProperty(We,"AnnotationMode",{enumerable:!0,get:function(){return O.AnnotationMode}}),Object.defineProperty(We,"CMapCompressionType",{enumerable:!0,get:function(){return O.CMapCompressionType}}),Object.defineProperty(We,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ae.GlobalWorkerOptions}}),Object.defineProperty(We,"InvalidPDFException",{enumerable:!0,get:function(){return O.InvalidPDFException}}),Object.defineProperty(We,"LoopbackPort",{enumerable:!0,get:function(){return X.LoopbackPort}}),Object.defineProperty(We,"MissingPDFException",{enumerable:!0,get:function(){return O.MissingPDFException}}),Object.defineProperty(We,"OPS",{enumerable:!0,get:function(){return O.OPS}}),Object.defineProperty(We,"PDFDataRangeTransport",{enumerable:!0,get:function(){return X.PDFDataRangeTransport}}),Object.defineProperty(We,"PDFDateString",{enumerable:!0,get:function(){return p.PDFDateString}}),Object.defineProperty(We,"PDFWorker",{enumerable:!0,get:function(){return X.PDFWorker}}),Object.defineProperty(We,"PasswordResponses",{enumerable:!0,get:function(){return O.PasswordResponses}}),Object.defineProperty(We,"PermissionFlag",{enumerable:!0,get:function(){return O.PermissionFlag}}),Object.defineProperty(We,"PixelsPerInch",{enumerable:!0,get:function(){return p.PixelsPerInch}}),Object.defineProperty(We,"RenderingCancelledException",{enumerable:!0,get:function(){return p.RenderingCancelledException}}),Object.defineProperty(We,"SVGGraphics",{enumerable:!0,get:function(){return ee.SVGGraphics}}),Object.defineProperty(We,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return O.UNSUPPORTED_FEATURES}}),Object.defineProperty(We,"UnexpectedResponseException",{enumerable:!0,get:function(){return O.UnexpectedResponseException}}),Object.defineProperty(We,"Util",{enumerable:!0,get:function(){return O.Util}}),Object.defineProperty(We,"VerbosityLevel",{enumerable:!0,get:function(){return O.VerbosityLevel}}),Object.defineProperty(We,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(We,"build",{enumerable:!0,get:function(){return X.build}}),Object.defineProperty(We,"createPromiseCapability",{enumerable:!0,get:function(){return O.createPromiseCapability}}),Object.defineProperty(We,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return O.createValidAbsoluteUrl}}),Object.defineProperty(We,"getDocument",{enumerable:!0,get:function(){return X.getDocument}}),Object.defineProperty(We,"getFilenameFromUrl",{enumerable:!0,get:function(){return p.getFilenameFromUrl}}),Object.defineProperty(We,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return p.getPdfFilenameFromUrl}}),Object.defineProperty(We,"getXfaPageViewport",{enumerable:!0,get:function(){return p.getXfaPageViewport}}),Object.defineProperty(We,"isPdfFile",{enumerable:!0,get:function(){return p.isPdfFile}}),Object.defineProperty(We,"loadScript",{enumerable:!0,get:function(){return p.loadScript}}),Object.defineProperty(We,"renderTextLayer",{enumerable:!0,get:function(){return pe.renderTextLayer}}),Object.defineProperty(We,"shadow",{enumerable:!0,get:function(){return O.shadow}}),Object.defineProperty(We,"version",{enumerable:!0,get:function(){return X.version}});var O=__w_pdfjs_require__(1),X=__w_pdfjs_require__(4),p=__w_pdfjs_require__(5),ce=__w_pdfjs_require__(20),ae=__w_pdfjs_require__(13),le=__w_pdfjs_require__(3),pe=__w_pdfjs_require__(23),ee=__w_pdfjs_require__(24),y=__w_pdfjs_require__(22);if(le.isNodeJS){const{PDFNodeStream:N}=__w_pdfjs_require__(25);(0,X.setPDFNetworkStreamFactory)(F=>new N(F))}else{const{PDFNetworkStream:N}=__w_pdfjs_require__(28),{PDFFetchStream:F}=__w_pdfjs_require__(29);(0,X.setPDFNetworkStreamFactory)(b=>(0,p.isValidFetchUrl)(b.url)?new F(b):new N(b))}})(),__webpack_exports__})(),module.exports=X()},813:function(We,O,X){var le,p=X(926).default;le=()=>(()=>{"use strict";var ce=[,(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DefaultXfaLayerFactory=y.DefaultTextLayerFactory=y.DefaultStructTreeLayerFactory=y.DefaultAnnotationLayerFactory=void 0;var M=G(2),N=G(4),F=G(5),b=G(7),_=G(8),h=G(9);y.DefaultAnnotationLayerFactory=class w{createAnnotationLayerBuilder(g,R,I=null,V="",Y=!0,ne=N.NullL10n,re=!1,ue=null,ve=null,Ae=null,Ie=null){return new M.AnnotationLayerBuilder({pageDiv:g,pdfPage:R,imageResourcesPath:V,renderForms:Y,linkService:new F.SimpleLinkService,l10n:ne,annotationStorage:I,enableScripting:re,hasJSActionsPromise:ue,fieldObjectsPromise:Ae,mouseState:ve,annotationCanvasMap:Ie})}},y.DefaultStructTreeLayerFactory=class U{createStructTreeLayerBuilder(g){return new b.StructTreeLayerBuilder({pdfPage:g})}},y.DefaultTextLayerFactory=class x{createTextLayerBuilder(g,R,I,V=!1,Y,ne){return new _.TextLayerBuilder({textLayerDiv:g,pageIndex:R,viewport:I,enhanceTextSelection:V,eventBus:Y,highlighter:ne})}},y.DefaultXfaLayerFactory=class P{createXfaLayerBuilder(g,R,I=null,V=null){return new h.XfaLayerBuilder({pageDiv:g,pdfPage:R,annotationStorage:I,linkService:new F.SimpleLinkService,xfaHtml:V})}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AnnotationLayerBuilder=void 0;var M=G(3),N=G(4);y.AnnotationLayerBuilder=class F{constructor({pageDiv:_,pdfPage:h,linkService:w,downloadManager:U,annotationStorage:x=null,imageResourcesPath:P="",renderForms:u=!0,l10n:g=N.NullL10n,enableScripting:R=!1,hasJSActionsPromise:I=null,fieldObjectsPromise:V=null,mouseState:Y=null,annotationCanvasMap:ne=null}){this.pageDiv=_,this.pdfPage=h,this.linkService=w,this.downloadManager=U,this.imageResourcesPath=P,this.renderForms=u,this.l10n=g,this.annotationStorage=x,this.enableScripting=R,this._hasJSActionsPromise=I,this._fieldObjectsPromise=V,this._mouseState=Y,this._annotationCanvasMap=ne,this.div=null,this._cancelled=!1}render(_,h="display"){var w=this;return p(function*(){const[U,x=!1,P=null]=yield Promise.all([w.pdfPage.getAnnotations({intent:h}),w._hasJSActionsPromise,w._fieldObjectsPromise]);if(w._cancelled||0===U.length)return;const u={viewport:_.clone({dontFlip:!0}),div:w.div,annotations:U,page:w.pdfPage,imageResourcesPath:w.imageResourcesPath,renderForms:w.renderForms,linkService:w.linkService,downloadManager:w.downloadManager,annotationStorage:w.annotationStorage,enableScripting:w.enableScripting,hasJSActions:x,fieldObjects:P,mouseState:w._mouseState,annotationCanvasMap:w._annotationCanvasMap};w.div?M.AnnotationLayer.update(u):(w.div=document.createElement("div"),w.div.className="annotationLayer",w.pageDiv.appendChild(w.div),u.div=w.div,M.AnnotationLayer.render(u),w.l10n.translate(w.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},ee=>{let y;y="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:X(36),ee.exports=y},(ee,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NullL10n=void 0,y.fixupLangCode=function F(h){return N[null==h?void 0:h.toLowerCase()]||h},y.getL10nFallback=M;const G={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function M(h,w){switch(h){case"find_match_count":h=`find_match_count[${1===w.total?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${1===w.limit?"one":"other"}]`}return G[h]||""}const N={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};y.NullL10n={getLanguage:()=>p(function*(){return"en-us"})(),getDirection:()=>p(function*(){return"ltr"})(),get:(h,w=null,U=M(h,w))=>p(function*(){return function b(h,w){return w?h.replace(/\{\{\s*(\w+)\s*\}\}/g,(U,x)=>x in w?w[x]:"{{"+x+"}}"):h}(U,w)})(),translate:h=>p(function*(){})()}},(ee,y,G)=>{var w,U,tE,P,TB;Object.defineProperty(y,"__esModule",{value:!0}),y.SimpleLinkService=y.PDFLinkService=y.LinkTarget=void 0;var M=G(6);const F={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function b(R,{url:I,target:V,rel:Y,enabled:ne=!0}={}){if(!I||"string"!=typeof I)throw new Error('A valid "url" parameter must provided.');const re=(0,M.removeNullCharacters)(I);ne?R.href=R.title=re:(R.href="",R.title=`Disabled: ${re}`,R.onclick=()=>!1);let ue="";switch(V){case F.NONE:break;case F.SELF:ue="_self";break;case F.BLANK:ue="_blank";break;case F.PARENT:ue="_parent";break;case F.TOP:ue="_top"}R.target=ue,R.rel="string"==typeof Y?Y:"noopener noreferrer nofollow"}y.LinkTarget=F;const g=class{constructor({eventBus:I,externalLinkTarget:V=null,externalLinkRel:Y=null,ignoreDestinationZoom:ne=!1}={}){bt(this,U),bt(this,w,new Map),this.eventBus=I,this.externalLinkTarget=V,this.externalLinkRel=Y,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ne,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(I,V=null){this.baseUrl=V,this.pdfDocument=I,pt(this,w).clear()}setViewer(I){this.pdfViewer=I}setHistory(I){this.pdfHistory=I}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(I){this.pdfViewer.currentPageNumber=I}get rotation(){return this.pdfViewer.pagesRotation}set rotation(I){this.pdfViewer.pagesRotation=I}goToDestination(I){var V=this;return p(function*(){var re;if(!V.pdfDocument)return;let Y,ne;"string"==typeof I?(Y=I,ne=yield V.pdfDocument.getDestination(I)):(Y=null,ne=yield I),Array.isArray(ne)?yt(re=V,U,tE).call(re,I,Y,ne):console.error(`PDFLinkService.goToDestination: "${ne}" is not a valid destination array, for dest="${I}".`)})()}goToPage(I){if(!this.pdfDocument)return;const V="string"==typeof I&&this.pdfViewer.pageLabelToPageNumber(I)||0|I;Number.isInteger(V)&&V>0&&V<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(V)),this.pdfViewer.scrollPageIntoView({pageNumber:V})):console.error(`PDFLinkService.goToPage: "${I}" is not a valid page.`)}addLinkAttributes(I,V,Y=!1){b(I,{url:V,target:Y?F.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(I){if("string"==typeof I){if(I.length>0)return this.getAnchorUrl("#"+escape(I))}else if(Array.isArray(I)){const V=JSON.stringify(I);if(V.length>0)return this.getAnchorUrl("#"+escape(V))}return this.getAnchorUrl("")}getAnchorUrl(I){return(this.baseUrl||"")+I}setHash(I){var ne;if(!this.pdfDocument)return;let V,Y;if(I.includes("=")){const re=(0,M.parseQueryString)(I);if(re.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:re.get("search").replace(/"/g,""),phraseSearch:"true"===re.get("phrase")}),re.has("page")&&(V=0|re.get("page")||1),re.has("zoom")){const ue=re.get("zoom").split(","),ve=ue[0],Ae=parseFloat(ve);ve.includes("Fit")?"Fit"===ve||"FitB"===ve?Y=[null,{name:ve}]:"FitH"===ve||"FitBH"===ve||"FitV"===ve||"FitBV"===ve?Y=[null,{name:ve},ue.length>1?0|ue[1]:null]:"FitR"===ve?5!==ue.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):Y=[null,{name:ve},0|ue[1],0|ue[2],0|ue[3],0|ue[4]]:console.error(`PDFLinkService.setHash: "${ve}" is not a valid zoom value.`):Y=[null,{name:"XYZ"},ue.length>1?0|ue[1]:null,ue.length>2?0|ue[2]:null,Ae?Ae/100:ve]}Y?this.pdfViewer.scrollPageIntoView({pageNumber:V||this.page,destArray:Y,allowNegativeOffset:!0}):V&&(this.page=V),re.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:re.get("pagemode")}),re.has("nameddest")&&this.goToDestination(re.get("nameddest"))}else{Y=unescape(I);try{Y=JSON.parse(Y),Array.isArray(Y)||(Y=Y.toString())}catch(re){}if("string"==typeof Y||yt(ne=g,P,TB).call(ne,Y))return void this.goToDestination(Y);console.error(`PDFLinkService.setHash: "${unescape(I)}" is not a valid destination.`)}}executeNamedAction(I){var V,Y;switch(I){case"GoBack":null==(V=this.pdfHistory)||V.back();break;case"GoForward":null==(Y=this.pdfHistory)||Y.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:I})}cachePageRef(I,V){if(!V)return;const Y=0===V.gen?`${V.num}R`:`${V.num}R${V.gen}`;pt(this,w).set(Y,I)}_cachedPageNumber(I){if(!I)return null;const V=0===I.gen?`${I.num}R`:`${I.num}R${I.gen}`;return pt(this,w).get(V)||null}isPageVisible(I){return this.pdfViewer.isPageVisible(I)}isPageCached(I){return this.pdfViewer.isPageCached(I)}};let _=g;w=new WeakMap,U=new WeakSet,tE=function(I,V=null,Y){const ne=Y[0];let re;if("object"==typeof ne&&null!==ne){if(re=this._cachedPageNumber(ne),!re)return void this.pdfDocument.getPageIndex(ne).then(ue=>{this.cachePageRef(ue+1,ne),yt(this,U,tE).call(this,I,V,Y)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${ne}" is not a valid page reference, for dest="${I}".`)})}else{if(!Number.isInteger(ne))return void console.error(`PDFLinkService.#goToDestinationHelper: "${ne}" is not a valid destination reference, for dest="${I}".`);re=ne+1}!re||re<1||re>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${re}" is not a valid page number, for dest="${I}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:V,explicitDest:Y,pageNumber:re})),this.pdfViewer.scrollPageIntoView({pageNumber:re,destArray:Y,ignoreDestinationZoom:this._ignoreDestinationZoom}))},P=new WeakSet,TB=function(I){if(!Array.isArray(I))return!1;const V=I.length;if(V<2)return!1;const Y=I[0];if(!("object"==typeof Y&&Number.isInteger(Y.num)&&Number.isInteger(Y.gen)||Number.isInteger(Y)&&Y>=0))return!1;const ne=I[1];if("object"!=typeof ne||"string"!=typeof ne.name)return!1;let re=!0;switch(ne.name){case"XYZ":if(5!==V)return!1;break;case"Fit":case"FitB":return 2===V;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==V)return!1;break;case"FitR":if(6!==V)return!1;re=!1;break;default:return!1}for(let ue=2;ue<V;ue++){const ve=I[ue];if(!("number"==typeof ve||re&&null===ve))return!1}return!0},bt(_,P),y.PDFLinkService=_,y.SimpleLinkService=class h{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(I){}get rotation(){return 0}set rotation(I){}goToDestination(I){return p(function*(){})()}goToPage(I){}addLinkAttributes(I,V,Y=!1){b(I,{url:V,enabled:this.externalLinkEnabled})}getDestinationHash(I){return"#"}getAnchorUrl(I){return"#"}setHash(I){}executeNamedAction(I){}cachePageRef(I,V){}isPageVisible(I){return!0}isPageCached(I){return!0}}},(ee,y)=>{var ze,xB;Object.defineProperty(y,"__esModule",{value:!0}),y.animationStarted=y.VERTICAL_PADDING=y.UNKNOWN_SCALE=y.TextLayerMode=y.SpreadMode=y.SidebarView=y.ScrollMode=y.SCROLLBAR_PADDING=y.RenderingStates=y.RendererType=y.ProgressBar=y.PresentationModeState=y.OutputScale=y.MIN_SCALE=y.MAX_SCALE=y.MAX_AUTO_SCALE=y.DEFAULT_SCALE_VALUE=y.DEFAULT_SCALE_DELTA=y.DEFAULT_SCALE=y.AutoPrintRegExp=void 0,y.apiPageLayoutToViewerModes=function Pe(Oe){let He=I.VERTICAL,je=V.NONE;switch(Oe){case"SinglePage":He=I.PAGE;break;case"OneColumn":break;case"TwoPageLeft":He=I.PAGE;case"TwoColumnLeft":je=V.ODD;break;case"TwoPageRight":He=I.PAGE;case"TwoColumnRight":je=V.EVEN}return{scrollMode:He,spreadMode:je}},y.apiPageModeToSidebarView=function ke(Oe){switch(Oe){case"UseNone":return u.NONE;case"UseThumbs":return u.THUMBS;case"UseOutlines":return u.OUTLINE;case"UseAttachments":return u.ATTACHMENTS;case"UseOC":return u.LAYERS}return u.NONE},y.approximateFraction=function xe(Oe){if(Math.floor(Oe)===Oe)return[Oe,1];const He=1/Oe;if(He>8)return[1,8];if(Math.floor(He)===He)return[1,He];const $=Oe>1?He:Oe;let Xe,ie=0,Te=1,Ke=1,qe=1;for(;;){const it=ie+Ke,T=Te+qe;if(T>8)break;$<=it/T?(Ke=it,qe=T):(ie=it,Te=T)}return Xe=$-ie/Te<Ke/qe-$?$===Oe?[ie,Te]:[Te,ie]:$===Oe?[Ke,qe]:[qe,Ke],Xe},y.backtrackBeforeAllVisibleElements=Q,y.binarySearchFirstItem=Me,y.getActiveOrFocusedElement=function we(){let Oe=document,He=Oe.activeElement||Oe.querySelector(":focus");for(;null==He?void 0:He.shadowRoot;)Oe=He.shadowRoot,He=Oe.activeElement||Oe.querySelector(":focus");return He},y.getPageSizeInches=function $e({view:Oe,userUnit:He,rotate:je}){const[$,ie,Te,Ke]=Oe,qe=je%180!=0,Xe=(Te-$)/72*He,it=(Ke-ie)/72*He;return{width:qe?it:Xe,height:qe?Xe:it}},y.getVisibleElements=function v({scrollEl:Oe,views:He,sortByVisibility:je=!1,horizontal:$=!1,rtl:ie=!1}){const Te=Oe.scrollTop,Ke=Te+Oe.clientHeight,qe=Oe.scrollLeft,Xe=qe+Oe.clientWidth,he=[],Re=new Set,se=He.length;let K=Me(He,$?function T(Se){const me=Se.div,Ee=me.offsetLeft+me.clientLeft;return ie?Ee<Xe:Ee+me.clientWidth>qe}:function it(Se){const me=Se.div;return me.offsetTop+me.clientTop+me.clientHeight>Te});K>0&&K<se&&!$&&(K=Q(K,He,Te));let L=$?Xe:-1;for(let Se=K;Se<se;Se++){const me=He[Se],Ee=me.div,Ye=Ee.offsetLeft+Ee.clientLeft,et=Ee.offsetTop+Ee.clientTop,Ct=Ee.clientWidth,St=Ee.clientHeight,$t=Ye+Ct,dn=et+St;if(-1===L)dn>=Ke&&(L=dn);else if(($?Ye:et)>L)break;if(dn<=Te||et>=Ke||$t<=qe||Ye>=Xe)continue;const pr=Math.max(0,Te-et)+Math.max(0,dn-Ke),Lr=(Ct-(Math.max(0,qe-Ye)+Math.max(0,$t-Xe)))/Ct;he.push({id:me.id,x:Ye,y:et,view:me,percent:(St-pr)/St*Lr*100|0,widthPercent:100*Lr|0}),Re.add(me.id)}const B=he[0],te=he[he.length-1];return je&&he.sort(function(Se,me){const Ee=Se.percent-me.percent;return Math.abs(Ee)>.001?-Ee:Se.id-me.id}),{first:B,last:te,views:he,ids:Re}},y.isPortraitOrientation=function W(Oe){return Oe.width<=Oe.height},y.isValidRotation=function D(Oe){return Number.isInteger(Oe)&&Oe%90==0},y.isValidScrollMode=function k(Oe){return Number.isInteger(Oe)&&Object.values(I).includes(Oe)&&Oe!==I.UNKNOWN},y.isValidSpreadMode=function H(Oe){return Number.isInteger(Oe)&&Object.values(V).includes(Oe)&&Oe!==V.UNKNOWN},y.noContextMenuHandler=function E(Oe){Oe.preventDefault()},y.normalizeWheelEventDelta=function S(Oe){let He=d(Oe);return 0===Oe.deltaMode?He/=900:1===Oe.deltaMode&&(He/=30),He},y.normalizeWheelEventDirection=d,y.parseQueryString=function ve(Oe){const He=new Map;for(const[je,$]of new URLSearchParams(Oe))He.set(je.toLowerCase(),$);return He},y.removeNullCharacters=function de(Oe,He=!1){return"string"!=typeof Oe?(console.error("The argument must be a string."),Oe):(He&&(Oe=Oe.replace(Ie," ")),Oe.replace(Ae,""))},y.roundToDivide=function Le(Oe,He){const je=Oe%He;return 0===je?Oe:Math.round(Oe-je+He)},y.scrollIntoView=function re(Oe,He,je=!1){let $=Oe.offsetParent;if(!$)return void console.error("offsetParent is not set -- cannot scroll");let ie=Oe.offsetTop+Oe.clientTop,Te=Oe.offsetLeft+Oe.clientLeft;for(;$.clientHeight===$.scrollHeight&&$.clientWidth===$.scrollWidth||je&&($.classList.contains("markedContent")||"hidden"===getComputedStyle($).overflow);)if(ie+=$.offsetTop,Te+=$.offsetLeft,$=$.offsetParent,!$)return;He&&(void 0!==He.top&&(ie+=He.top),void 0!==He.left&&(Te+=He.left,$.scrollLeft=Te)),$.scrollTop=ie},y.watchScroll=function ue(Oe,He){const je=function(Te){ie||(ie=window.requestAnimationFrame(function(){ie=null;const qe=Oe.scrollLeft,Xe=$.lastX;qe!==Xe&&($.right=qe>Xe),$.lastX=qe;const it=Oe.scrollTop,T=$.lastY;it!==T&&($.down=it>T),$.lastY=it,He($)}))},$={right:!0,down:!0,lastX:Oe.scrollLeft,lastY:Oe.scrollTop,_eventHandler:je};let ie=null;return Oe.addEventListener("scroll",je,!0),$},y.DEFAULT_SCALE_VALUE="auto",y.DEFAULT_SCALE=1,y.DEFAULT_SCALE_DELTA=1.1,y.MIN_SCALE=.1,y.MAX_SCALE=10,y.UNKNOWN_SCALE=0,y.MAX_AUTO_SCALE=1.25,y.SCROLLBAR_PADDING=40,y.VERTICAL_PADDING=5,y.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},y.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const u={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};y.SidebarView=u,y.RendererType={CANVAS:"canvas",SVG:"svg"},y.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const I={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};y.ScrollMode=I;const V={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};y.SpreadMode=V,y.AutoPrintRegExp=/\bprint\s*\(/,y.OutputScale=class ne{constructor(){const He=window.devicePixelRatio||1;this.sx=He,this.sy=He}get scaled(){return 1!==this.sx||1!==this.sy}};const Ae=/\x00/g,Ie=/[\x01-\x1F]/g;function Me(Oe,He,je=0){let $=je,ie=Oe.length-1;if(ie<0||!He(Oe[ie]))return Oe.length;if(He(Oe[$]))return $;for(;$<ie;){const Te=$+ie>>1;He(Oe[Te])?ie=Te:$=Te+1}return $}function Q(Oe,He,je){if(Oe<2)return Oe;let $=He[Oe].div,ie=$.offsetTop+$.clientTop;ie>=je&&($=He[Oe-1].div,ie=$.offsetTop+$.clientTop);for(let Te=Oe-2;Te>=0&&($=He[Te].div,!($.offsetTop+$.clientTop+$.clientHeight<=ie));--Te)Oe=Te;return Oe}function d(Oe){let He=Math.hypot(Oe.deltaX,Oe.deltaY);const je=Math.atan2(Oe.deltaY,Oe.deltaX);return-.25*Math.PI<je&&je<.75*Math.PI&&(He=-He),He}const fe=new Promise(function(Oe){window.requestAnimationFrame(Oe)});y.animationStarted=fe,ze=new WeakSet,xB=function(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))},y.ProgressBar=class _e{constructor(He){if(bt(this,ze),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(He+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(He){this._indeterminate=isNaN(He),this._percent=function Ce(Oe,He,je){return Math.min(Math.max(Oe,He),je)}(He,0,100),yt(this,ze,xB).call(this)}setWidth(He){if(!He)return;const $=He.parentNode.offsetWidth-He.offsetWidth;$>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${$}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(ee,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.StructTreeLayerBuilder=void 0;const G={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},M=/^H(\d+)$/;y.StructTreeLayerBuilder=class N{constructor({pdfPage:b}){this.pdfPage=b}render(b){return this._walk(b)}_setAttributes(b,_){void 0!==b.alt&&_.setAttribute("aria-label",b.alt),void 0!==b.id&&_.setAttribute("aria-owns",b.id),void 0!==b.lang&&_.setAttribute("lang",b.lang)}_walk(b){if(!b)return null;const _=document.createElement("span");if("role"in b){const{role:h}=b,w=h.match(M);w?(_.setAttribute("role","heading"),_.setAttribute("aria-level",w[1])):G[h]&&_.setAttribute("role",G[h])}if(this._setAttributes(b,_),b.children)if(1===b.children.length&&"id"in b.children[0])this._setAttributes(b.children[0],_);else for(const h of b.children)_.appendChild(this._walk(h));return _}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextLayerBuilder=void 0;var M=G(3);y.TextLayerBuilder=class F{constructor({textLayerDiv:_,eventBus:h,pageIndex:w,viewport:U,highlighter:x=null,enhanceTextSelection:P=!1}){this.textLayerDiv=_,this.eventBus=h,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=w+1,this.viewport=U,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=x,this.enhanceTextSelection=P,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const _=document.createElement("div");_.className="endOfContent",this.textLayerDiv.appendChild(_)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(_=0){var w;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null==(w=this.highlighter)||w.setTextMapping(this.textDivs,this.textContentItemsStr);const h=document.createDocumentFragment();this.textLayerRenderTask=(0,M.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:h,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:_,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var U;this.textLayerDiv.appendChild(h),this._finishRendering(),null==(U=this.highlighter)||U.enable()},function(U){})}cancel(){var _;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(_=this.highlighter)||_.disable()}setTextContentStream(_){this.cancel(),this.textContentStream=_}setTextContent(_){this.cancel(),this.textContent=_}_bindMouse(){const _=this.textLayerDiv;let h=null;_.addEventListener("mousedown",w=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(h&&(clearTimeout(h),h=null));const U=_.querySelector(".endOfContent");if(!U)return;let x=w.target!==_;if(x=x&&"none"!==window.getComputedStyle(U).getPropertyValue("-moz-user-select"),x){const P=_.getBoundingClientRect(),u=Math.max(0,(w.pageY-P.top)/P.height);U.style.top=(100*u).toFixed(2)+"%"}U.classList.add("active")}),_.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(h=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),h=null},300));const w=_.querySelector(".endOfContent");!w||(w.style.top="",w.classList.remove("active"))})}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.XfaLayerBuilder=void 0;var M=G(3);y.XfaLayerBuilder=class N{constructor({pageDiv:b,pdfPage:_,annotationStorage:h=null,linkService:w,xfaHtml:U=null}){this.pageDiv=b,this.pdfPage=_,this.annotationStorage=h,this.linkService=w,this.xfaHtml=U,this.div=null,this._cancelled=!1}render(b,_="display"){if("print"===_){const h={viewport:b.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:_},w=document.createElement("div");this.pageDiv.appendChild(w),h.div=w;const U=M.XfaLayer.render(h);return Promise.resolve(U)}return this.pdfPage.getXfa().then(h=>{if(this._cancelled||!h)return{textDivs:[]};const w={viewport:b.clone({dontFlip:!0}),div:this.div,xfaHtml:h,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:_};return this.div?M.XfaLayer.update(w):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),w.div=this.div,M.XfaLayer.render(w))}).catch(h=>{console.error(h)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFViewer=y.PDFSinglePageViewer=void 0;var M=G(6),N=G(11);y.PDFViewer=class F extends N.BaseViewer{},y.PDFSinglePageViewer=class b extends N.BaseViewer{_resetView(){super._resetView(),this._scrollMode=M.ScrollMode.PAGE,this._spreadMode=M.SpreadMode.NONE}set scrollMode(h){}_updateScrollMode(){}set spreadMode(h){}_updateSpreadMode(){}}},(ee,y,G)=>{var ne,re,ue,nE,Ae,Ie,de,Me,xe,Le,$e,Q,MB,E,PB,S,Fu,k,Xp,W,IB,Ce,rE,we,RB,ke,kB,tt,OB;Object.defineProperty(y,"__esModule",{value:!0}),y.PagesCountLimit=y.PDFPageViewBuffer=y.BaseViewer=void 0;var M=G(3),N=G(6),F=G(2),b=G(4),_=G(12),h=G(14),w=G(5),U=G(7),x=G(15),P=G(8),u=G(9);const R="enablePermissions",I={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};y.PagesCountLimit=I;class V{constructor($){bt(this,ue),bt(this,ne,new Set),bt(this,re,0),pn(this,re,$)}push($){const ie=pt(this,ne);ie.has($)&&ie.delete($),ie.add($),ie.size>pt(this,re)&&yt(this,ue,nE).call(this)}resize($,ie=null){pn(this,re,$);const Te=pt(this,ne);if(ie){const Ke=Te.size;let qe=1;for(const Xe of Te)if(ie.has(Xe.id)&&(Te.delete(Xe),Te.add(Xe)),++qe>Ke)break}for(;Te.size>pt(this,re);)yt(this,ue,nE).call(this)}has($){return pt(this,ne).has($)}[Symbol.iterator](){return pt(this,ne).keys()}}ne=new WeakMap,re=new WeakMap,ue=new WeakSet,nE=function(){const $=pt(this,ne).keys().next().value;null==$||$.destroy(),pt(this,ne).delete($)},y.PDFPageViewBuffer=V;const He=class{constructor($){var Te,Ke,qe,Xe;if(bt(this,Q),bt(this,E),bt(this,S),bt(this,k),bt(this,W),bt(this,Ce),bt(this,we),bt(this,ke),bt(this,tt),bt(this,Ae,null),bt(this,Ie,M.AnnotationMode.ENABLE_FORMS),bt(this,de,null),bt(this,Me,!1),bt(this,xe,0),bt(this,Le,null),bt(this,$e,null),this.constructor===He)throw new Error("Cannot initialize BaseViewer.");const ie="2.14.305";if(M.version!==ie)throw new Error(`The API version "${M.version}" does not match the Viewer version "${ie}".`);if(this.container=$.container,this.viewer=$.viewer||$.container.firstElementChild,"DIV"!==(null==(Te=this.container)?void 0:Te.tagName.toUpperCase())||"DIV"!==(null==(Ke=this.viewer)?void 0:Ke.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=$.eventBus,this.linkService=$.linkService||new w.SimpleLinkService,this.downloadManager=$.downloadManager||null,this.findController=$.findController||null,this._scriptingManager=$.scriptingManager||null,this.removePageBorders=$.removePageBorders||!1,this.textLayerMode=null!=(qe=$.textLayerMode)?qe:N.TextLayerMode.ENABLE,pn(this,Ie,null!=(Xe=$.annotationMode)?Xe:M.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=$.imageResourcesPath||"",this.enablePrintAutoRotate=$.enablePrintAutoRotate||!1,this.renderer=$.renderer||N.RendererType.CANVAS,this.useOnlyCssZoom=$.useOnlyCssZoom||!1,this.maxCanvasPixels=$.maxCanvasPixels,this.l10n=$.l10n||b.NullL10n,pn(this,Me,$.enablePermissions||!1),this.pageColors=$.pageColors||null,$.pageColors&&(!CSS.supports("color",$.pageColors.background)||!CSS.supports("color",$.pageColors.foreground))&&(($.pageColors.background||$.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!$.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new h.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=$.renderingQueue,this._doc=document.documentElement,this.scroll=(0,N.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=N.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView($){return this._pages[$]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function($){return null==$?void 0:$.pdfPage})}get renderForms(){return pt(this,Ie)===M.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber($){if(!Number.isInteger($))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber($,!0)||console.error(`currentPageNumber: "${$}" is not a valid page.`)}_setCurrentPageNumber($,ie=!1){var Ke,qe;if(this._currentPageNumber===$)return ie&&yt(this,Ce,rE).call(this),!0;if(!(0<$&&$<=this.pagesCount))return!1;const Te=this._currentPageNumber;return this._currentPageNumber=$,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:$,pageLabel:null!=(qe=null==(Ke=this._pageLabels)?void 0:Ke[$-1])?qe:null,previous:Te}),ie&&yt(this,Ce,rE).call(this),!0}get currentPageLabel(){var $,ie;return null!=(ie=null==($=this._pageLabels)?void 0:$[this._currentPageNumber-1])?ie:null}set currentPageLabel($){if(!this.pdfDocument)return;let ie=0|$;if(this._pageLabels){const Te=this._pageLabels.indexOf($);Te>=0&&(ie=Te+1)}this._setCurrentPageNumber(ie,!0)||console.error(`currentPageLabel: "${$}" is not a valid page.`)}get currentScale(){return this._currentScale!==N.UNKNOWN_SCALE?this._currentScale:N.DEFAULT_SCALE}set currentScale($){if(isNaN($))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale($,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue($){!this.pdfDocument||this._setScale($,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation($){if(!(0,N.isValidRotation)($))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(($%=360)<0&&($+=360),this._pagesRotation===$))return;this._pagesRotation=$;const ie=this._currentPageNumber,Te={rotation:$};for(const Ke of this._pages)Ke.update(Te);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:$,pageNumber:ie}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument($){var ie=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=$,!$)return;const Te=$.isPureXfa,Ke=$.numPages,qe=$.getPage(1),Xe=$.getOptionalContentConfig(),it=pt(this,Me)?$.getPermissions():Promise.resolve();if(Ke>I.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const T=this._scrollMode=N.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:T})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:Ke})},()=>{}),this._onBeforeDraw=T=>{const he=this._pages[T.pageNumber-1];!he||pt(this,Ae).push(he)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=T=>{T.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:T.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,pt(this,$e)&&(document.removeEventListener("visibilitychange",pt(this,$e)),pn(this,$e,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([qe,it]).then(([T,he])=>{if($!==this.pdfDocument)return;this._firstPageCapability.resolve(T),this._optionalContentConfigPromise=Xe,yt(this,Q,MB).call(this,he);const Re=this._scrollMode===N.ScrollMode.PAGE?null:this.viewer,se=this.currentScale,K=T.getViewport({scale:se*M.PixelsPerInch.PDF_TO_CSS_UNITS}),L=this.textLayerMode===N.TextLayerMode.DISABLE||Te?null:this,B=pt(this,Ie)!==M.AnnotationMode.DISABLE?this:null,te=Te?this:null;for(let me=1;me<=Ke;++me){const Ee=new _.PDFPageView({container:Re,eventBus:this.eventBus,id:me,scale:se,defaultViewport:K.clone(),optionalContentConfigPromise:Xe,renderingQueue:this.renderingQueue,textLayerFactory:L,textLayerMode:this.textLayerMode,annotationLayerFactory:B,annotationMode:pt(this,Ie),xfaLayerFactory:te,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Ee)}const Se=this._pages[0];Se&&(Se.setPdfPage(T),this.linkService.cachePageRef(1,T.ref)),this._scrollMode===N.ScrollMode.PAGE?yt(this,S,Fu).call(this):this._spreadMode!==N.SpreadMode.NONE&&this._updateSpreadMode(),yt(this,E,PB).call(this).then(p(function*(){if(ie.findController&&ie.findController.setDocument($),ie._scriptingManager&&ie._scriptingManager.setDocument($),$.loadingParams.disableAutoFetch||Ke>I.FORCE_LAZY_PAGE_INIT)return void ie._pagesCapability.resolve();let me=Ke-1;if(me<=0)ie._pagesCapability.resolve();else for(let Ee=2;Ee<=Ke;++Ee){const Ye=$.getPage(Ee).then(et=>{const Ct=ie._pages[Ee-1];Ct.pdfPage||Ct.setPdfPage(et),ie.linkService.cachePageRef(Ee,et.ref),0==--me&&ie._pagesCapability.resolve()},et=>{console.error(`Unable to get page ${Ee} to initialize viewer`,et),0==--me&&ie._pagesCapability.resolve()});Ee%I.PAUSE_EAGER_PAGE_INIT==0&&(yield Ye)}})),this.eventBus.dispatch("pagesinit",{source:this}),$.getMetadata().then(({info:me})=>{$===this.pdfDocument&&me.Language&&(this.viewer.lang=me.Language)}),this.defaultRenderingQueue&&this.update()}).catch(T=>{console.error("Unable to initialize viewer",T),this._pagesCapability.reject(T)})}setPageLabels($){var ie,Te;if(this.pdfDocument){$?Array.isArray($)&&this.pdfDocument.numPages===$.length?this._pageLabels=$:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let Ke=0,qe=this._pages.length;Ke<qe;Ke++)this._pages[Ke].setPageLabel(null!=(Te=null==(ie=this._pageLabels)?void 0:ie[Ke])?Te:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=N.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,pn(this,Ae,new V(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,M.createPromiseCapability)(),this._onePageRenderedCapability=(0,M.createPromiseCapability)(),this._pagesCapability=(0,M.createPromiseCapability)(),this._scrollMode=N.ScrollMode.VERTICAL,this._previousScrollMode=N.ScrollMode.UNKNOWN,this._spreadMode=N.SpreadMode.NONE,pn(this,Le,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),pt(this,$e)&&(document.removeEventListener("visibilitychange",pt(this,$e)),pn(this,$e,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(R),null!==pt(this,de)&&(pn(this,Ie,pt(this,de)),pn(this,de,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages($,ie,Te=!1,Ke=!1){if(this._currentScaleValue=ie.toString(),yt(this,W,IB).call(this,$))return void(Ke&&this.eventBus.dispatch("scalechanging",{source:this,scale:$,presetValue:ie}));this._doc.style.setProperty("--zoom-factor",$);const qe={scale:$};for(const Xe of this._pages)Xe.update(qe);if(this._currentScale=$,!Te){let it,Xe=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(Xe=this._location.pageNumber,it=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:Xe,destArray:it,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:$,presetValue:Ke?ie:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==N.SpreadMode.NONE&&this._scrollMode!==N.ScrollMode.HORIZONTAL?2:1}_setScale($,ie=!1){let Te=parseFloat($);if(Te>0)this._setScaleUpdatePages(Te,$,ie,!1);else{const Ke=this._pages[this._currentPageNumber-1];if(!Ke)return;let qe=N.SCROLLBAR_PADDING,Xe=N.VERTICAL_PADDING;this.isInPresentationMode?qe=Xe=4:this.removePageBorders?qe=Xe=0:this._scrollMode===N.ScrollMode.HORIZONTAL&&([qe,Xe]=[Xe,qe]);const it=(this.container.clientWidth-qe)/Ke.width*Ke.scale/this._pageWidthScaleFactor,T=(this.container.clientHeight-Xe)/Ke.height*Ke.scale;switch($){case"page-actual":Te=1;break;case"page-width":Te=it;break;case"page-height":Te=T;break;case"page-fit":Te=Math.min(it,T);break;case"auto":const he=(0,N.isPortraitOrientation)(Ke)?it:Math.min(T,it);Te=Math.min(N.MAX_AUTO_SCALE,he);break;default:return void console.error(`_setScale: "${$}" is an unknown zoom value.`)}this._setScaleUpdatePages(Te,$,ie,!0)}}pageLabelToPageNumber($){if(!this._pageLabels)return null;const ie=this._pageLabels.indexOf($);return ie<0?null:ie+1}scrollPageIntoView({pageNumber:$,destArray:ie=null,allowNegativeOffset:Te=!1,ignoreDestinationZoom:Ke=!1}){if(!this.pdfDocument)return;const qe=Number.isInteger($)&&this._pages[$-1];if(!qe)return void console.error(`scrollPageIntoView: "${$}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!ie)return void this._setCurrentPageNumber($,!0);let Re,se,Xe=0,it=0,T=0,he=0;const K=qe.rotation%180!=0,L=(K?qe.height:qe.width)/qe.scale/M.PixelsPerInch.PDF_TO_CSS_UNITS,B=(K?qe.width:qe.height)/qe.scale/M.PixelsPerInch.PDF_TO_CSS_UNITS;let te=0;switch(ie[1].name){case"XYZ":Xe=ie[2],it=ie[3],te=ie[4],Xe=null!==Xe?Xe:0,it=null!==it?it:B;break;case"Fit":case"FitB":te="page-fit";break;case"FitH":case"FitBH":it=ie[2],te="page-width",null===it&&this._location?(Xe=this._location.left,it=this._location.top):("number"!=typeof it||it<0)&&(it=B);break;case"FitV":case"FitBV":Xe=ie[2],T=L,he=B,te="page-height";break;case"FitR":Xe=ie[2],it=ie[3],T=ie[4]-Xe,he=ie[5]-it,Re=(this.container.clientWidth-(this.removePageBorders?0:N.SCROLLBAR_PADDING))/T/M.PixelsPerInch.PDF_TO_CSS_UNITS,se=(this.container.clientHeight-(this.removePageBorders?0:N.VERTICAL_PADDING))/he/M.PixelsPerInch.PDF_TO_CSS_UNITS,te=Math.min(Math.abs(Re),Math.abs(se));break;default:return void console.error(`scrollPageIntoView: "${ie[1].name}" is not a valid destination type.`)}if(Ke||(te&&te!==this._currentScale?this.currentScaleValue=te:this._currentScale===N.UNKNOWN_SCALE&&(this.currentScaleValue=N.DEFAULT_SCALE_VALUE)),"page-fit"===te&&!ie[4])return void yt(this,k,Xp).call(this,qe);const Se=[qe.viewport.convertToViewportPoint(Xe,it),qe.viewport.convertToViewportPoint(Xe+T,it+he)];let me=Math.min(Se[0][0],Se[1][0]),Ee=Math.min(Se[0][1],Se[1][1]);Te||(me=Math.max(me,0),Ee=Math.max(Ee,0)),yt(this,k,Xp).call(this,qe,{left:me,top:Ee})}_updateLocation($){const ie=this._currentScale,Te=this._currentScaleValue,Ke=parseFloat(Te)===ie?Math.round(1e4*ie)/100:Te,qe=$.id,it=this.container,T=this._pages[qe-1].getPagePoint(it.scrollLeft-$.x,it.scrollTop-$.y),he=Math.round(T[0]),Re=Math.round(T[1]);let se=`#page=${qe}`;this.isInPresentationMode||(se+=`&zoom=${Ke},${he},${Re}`),this._location={pageNumber:qe,scale:Ke,top:Re,left:he,rotation:this._pagesRotation,pdfOpenParams:se}}update(){const $=this._getVisiblePages(),ie=$.views,Te=ie.length;if(0===Te)return;const Ke=Math.max(10,2*Te+1);pt(this,Ae).resize(Ke,$.ids),this.renderingQueue.renderHighestPriority($);const qe=this._spreadMode===N.SpreadMode.NONE&&(this._scrollMode===N.ScrollMode.PAGE||this._scrollMode===N.ScrollMode.VERTICAL),Xe=this._currentPageNumber;let it=!1;for(const T of ie){if(T.percent<100)break;if(T.id===Xe&&qe){it=!0;break}}this._setCurrentPageNumber(it?Xe:ie[0].id),this._updateLocation($.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement($){return this.container.contains($)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===N.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===N.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const $=this._scrollMode===N.ScrollMode.PAGE?pt(this,Le).pages:this._pages,ie=this._scrollMode===N.ScrollMode.HORIZONTAL;return(0,N.getVisibleElements)({scrollEl:this.container,views:$,sortByVisibility:!0,horizontal:ie,rtl:ie&&this._isContainerRtl})}isPageVisible($){return!!this.pdfDocument&&(Number.isInteger($)&&$>0&&$<=this.pagesCount?this._getVisiblePages().ids.has($):(console.error(`isPageVisible: "${$}" is not a valid page.`),!1))}isPageCached($){if(!this.pdfDocument)return!1;if(!(Number.isInteger($)&&$>0&&$<=this.pagesCount))return console.error(`isPageCached: "${$}" is not a valid page.`),!1;const ie=this._pages[$-1];return pt(this,Ae).has(ie)}cleanup(){for(const $ of this._pages)$.renderingState!==N.RenderingStates.FINISHED&&$.reset()}_cancelRendering(){for(const $ of this._pages)$.cancelRendering()}forceRendering($){const ie=$||this._getVisiblePages(),Te=yt(this,ke,kB).call(this,ie),qe=this.renderingQueue.getHighestPriority(ie,this._pages,Te,this._spreadMode!==N.SpreadMode.NONE&&this._scrollMode!==N.ScrollMode.HORIZONTAL);return yt(this,tt,OB).call(this,ie.ids),!!qe&&(yt(this,we,RB).call(this,qe).then(()=>{this.renderingQueue.renderView(qe)}),!0)}createTextLayerBuilder($,ie,Te,Ke=!1,qe,Xe){return new P.TextLayerBuilder({textLayerDiv:$,eventBus:qe,pageIndex:ie,viewport:Te,enhanceTextSelection:!this.isInPresentationMode&&Ke,highlighter:Xe})}createTextHighlighter($,ie){return new x.TextHighlighter({eventBus:ie,pageIndex:$,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder($,ie,Te=null,Ke="",qe=!0,Xe=b.NullL10n,it=null,T=null,he=null,Re=null,se=null){var K,L,B,te;return new F.AnnotationLayerBuilder({pageDiv:$,pdfPage:ie,annotationStorage:Te||(null==(K=this.pdfDocument)?void 0:K.annotationStorage),imageResourcesPath:Ke,renderForms:qe,linkService:this.linkService,downloadManager:this.downloadManager,l10n:Xe,enableScripting:null!=it?it:this.enableScripting,hasJSActionsPromise:T||(null==(L=this.pdfDocument)?void 0:L.hasJSActions()),fieldObjectsPromise:Re||(null==(B=this.pdfDocument)?void 0:B.getFieldObjects()),mouseState:he||(null==(te=this._scriptingManager)?void 0:te.mouseState),annotationCanvasMap:se})}createXfaLayerBuilder($,ie,Te=null){var Ke;return new u.XfaLayerBuilder({pageDiv:$,pdfPage:ie,annotationStorage:Te||(null==(Ke=this.pdfDocument)?void 0:Ke.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder($){return new U.StructTreeLayerBuilder({pdfPage:$})}get hasEqualPageSizes(){const $=this._pages[0];for(let ie=1,Te=this._pages.length;ie<Te;++ie){const Ke=this._pages[ie];if(Ke.width!==$.width||Ke.height!==$.height)return!1}return!0}getPagesOverview(){return this._pages.map($=>{const ie=$.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,N.isPortraitOrientation)(ie)?{width:ie.width,height:ie.height,rotation:ie.rotation}:{width:ie.height,height:ie.width,rotation:(ie.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise($){if(!($ instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${$}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=$;const ie={optionalContentConfigPromise:$};for(const Te of this._pages)Te.update(ie);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:$})}get scrollMode(){return this._scrollMode}set scrollMode($){if(this._scrollMode!==$){if(!(0,N.isValidScrollMode)($))throw new Error(`Invalid scroll mode: ${$}`);this.pagesCount>I.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=$,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:$}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode($=null){const ie=this._scrollMode,Te=this.viewer;Te.classList.toggle("scrollHorizontal",ie===N.ScrollMode.HORIZONTAL),Te.classList.toggle("scrollWrapped",ie===N.ScrollMode.WRAPPED),this.pdfDocument&&$&&(ie===N.ScrollMode.PAGE?yt(this,S,Fu).call(this):this._previousScrollMode===N.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber($,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode($){if(this._spreadMode!==$){if(!(0,N.isValidSpreadMode)($))throw new Error(`Invalid spread mode: ${$}`);this._spreadMode=$,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:$}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode($=null){if(!this.pdfDocument)return;const ie=this.viewer,Te=this._pages;if(this._scrollMode===N.ScrollMode.PAGE)yt(this,S,Fu).call(this);else if(ie.textContent="",this._spreadMode===N.SpreadMode.NONE)for(const Ke of this._pages)ie.appendChild(Ke.div);else{const Ke=this._spreadMode-1;let qe=null;for(let Xe=0,it=Te.length;Xe<it;++Xe)null===qe?(qe=document.createElement("div"),qe.className="spread",ie.appendChild(qe)):Xe%2===Ke&&(qe=qe.cloneNode(!1),ie.appendChild(qe)),qe.appendChild(Te[Xe].div)}!$||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber($,!0),this.update())}_getPageAdvance($,ie=!1){switch(this._scrollMode){case N.ScrollMode.WRAPPED:{const{views:Te}=this._getVisiblePages(),Ke=new Map;for(const{id:qe,y:Xe,percent:it,widthPercent:T}of Te){if(0===it||T<100)continue;let he=Ke.get(Xe);he||Ke.set(Xe,he||(he=[])),he.push(qe)}for(const qe of Ke.values()){const Xe=qe.indexOf($);if(-1===Xe)continue;const it=qe.length;if(1===it)break;if(ie)for(let T=Xe-1,he=0;T>=he;T--){const se=qe[T+1]-1;if(qe[T]<se)return $-se}else for(let T=Xe+1,he=it;T<he;T++){const se=qe[T-1]+1;if(qe[T]>se)return se-$}if(ie){const T=qe[0];if(T<$)return $-T+1}else{const T=qe[it-1];if(T>$)return T-$+1}break}break}case N.ScrollMode.HORIZONTAL:break;case N.ScrollMode.PAGE:case N.ScrollMode.VERTICAL:{if(this._spreadMode===N.SpreadMode.NONE)break;const Te=this._spreadMode-1;if(ie&&$%2!==Te)break;if(!ie&&$%2===Te)break;const{views:Ke}=this._getVisiblePages(),qe=ie?$-1:$+1;for(const{id:Xe,percent:it,widthPercent:T}of Ke)if(Xe===qe){if(it>0&&100===T)return 2;break}break}}return 1}nextPage(){const $=this._currentPageNumber,ie=this.pagesCount;if($>=ie)return!1;const Te=this._getPageAdvance($,!1)||1;return this.currentPageNumber=Math.min($+Te,ie),!0}previousPage(){const $=this._currentPageNumber;if($<=1)return!1;const ie=this._getPageAdvance($,!0)||1;return this.currentPageNumber=Math.max($-ie,1),!0}increaseScale($=1){let ie=this._currentScale;do{ie=(ie*N.DEFAULT_SCALE_DELTA).toFixed(2),ie=Math.ceil(10*ie)/10,ie=Math.min(N.MAX_SCALE,ie)}while(--$>0&&ie<N.MAX_SCALE);this.currentScaleValue=ie}decreaseScale($=1){let ie=this._currentScale;do{ie=(ie/N.DEFAULT_SCALE_DELTA).toFixed(2),ie=Math.floor(10*ie)/10,ie=Math.max(N.MIN_SCALE,ie)}while(--$>0&&ie>N.MIN_SCALE);this.currentScaleValue=ie}updateContainerHeightCss(){const $=this.container.clientHeight;$!==pt(this,xe)&&(pn(this,xe,$),this._doc.style.setProperty("--viewer-container-height",`${$}px`))}};let Y=He;Ae=new WeakMap,Ie=new WeakMap,de=new WeakMap,Me=new WeakMap,xe=new WeakMap,Le=new WeakMap,$e=new WeakMap,Q=new WeakSet,MB=function($){!$||($.includes(M.PermissionFlag.COPY)||this.viewer.classList.add(R),!$.includes(M.PermissionFlag.MODIFY_ANNOTATIONS)&&!$.includes(M.PermissionFlag.FILL_INTERACTIVE_FORMS)&&pt(this,Ie)===M.AnnotationMode.ENABLE_FORMS&&(pn(this,de,pt(this,Ie)),pn(this,Ie,M.AnnotationMode.ENABLE)))},E=new WeakSet,PB=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const $=new Promise(ie=>{pn(this,$e,()=>{"hidden"===document.visibilityState&&(ie(),document.removeEventListener("visibilitychange",pt(this,$e)),pn(this,$e,null))}),document.addEventListener("visibilitychange",pt(this,$e))});return Promise.race([this._onePageRenderedCapability.promise,$])},S=new WeakSet,Fu=function(){if(this._scrollMode!==N.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const $=this._currentPageNumber,ie=pt(this,Le),Te=this.viewer;if(Te.textContent="",ie.pages.length=0,this._spreadMode!==N.SpreadMode.NONE||this.isInPresentationMode){const Ke=new Set,qe=this._spreadMode-1;-1===qe?Ke.add($-1):$%2!==qe?(Ke.add($-1),Ke.add($)):(Ke.add($-2),Ke.add($-1));const Xe=document.createElement("div");if(Xe.className="spread",this.isInPresentationMode){const it=document.createElement("div");it.className="dummyPage",Xe.appendChild(it)}for(const it of Ke){const T=this._pages[it];!T||(Xe.appendChild(T.div),ie.pages.push(T))}Te.appendChild(Xe)}else{const Ke=this._pages[$-1];Te.appendChild(Ke.div),ie.pages.push(Ke)}ie.scrollDown=$>=ie.previousPageNumber,ie.previousPageNumber=$},k=new WeakSet,Xp=function($,ie=null){const{div:Te,id:Ke}=$;if(this._scrollMode===N.ScrollMode.PAGE&&(this._setCurrentPageNumber(Ke),yt(this,S,Fu).call(this),this.update()),!ie&&!this.isInPresentationMode){const qe=Te.offsetLeft+Te.clientLeft,Xe=qe+Te.clientWidth,{scrollLeft:it,clientWidth:T}=this.container;(this._scrollMode===N.ScrollMode.HORIZONTAL||qe<it||Xe>it+T)&&(ie={left:0,top:0})}(0,N.scrollIntoView)(Te,ie)},W=new WeakSet,IB=function($){return $===this._currentScale||Math.abs($-this._currentScale)<1e-15},Ce=new WeakSet,rE=function(){const $=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),yt(this,k,Xp).call(this,$)},we=new WeakSet,RB=function($){var ie=this;return p(function*(){var Te,Ke;if($.pdfPage)return $.pdfPage;try{const qe=yield ie.pdfDocument.getPage($.id);return $.pdfPage||$.setPdfPage(qe),(null==(Ke=(Te=ie.linkService)._cachedPageNumber)?void 0:Ke.call(Te,qe.ref))||ie.linkService.cachePageRef($.id,qe.ref),qe}catch(qe){return console.error("Unable to get page for page view",qe),null}})()},ke=new WeakSet,kB=function($){var ie,Te;if(1===(null==(ie=$.first)?void 0:ie.id))return!0;if((null==(Te=$.last)?void 0:Te.id)===this.pagesCount)return!1;switch(this._scrollMode){case N.ScrollMode.PAGE:return pt(this,Le).scrollDown;case N.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},tt=new WeakSet,OB=function($){for(const ie of $){const Te=this._pages[ie-1];null==Te||Te.toggleLoadingIconSpinner(!0)}for(const ie of pt(this,Ae))$.has(ie.id)||ie.toggleLoadingIconSpinner(!1)},y.BaseViewer=Y},(ee,y,G)=>{var w;Object.defineProperty(y,"__esModule",{value:!0}),y.PDFPageView=void 0;var M=G(3),N=G(6),F=G(13),b=G(4);const _=F.compatibilityParams.maxCanvasPixels||16777216;w=new WeakMap,y.PDFPageView=class h{constructor(x){var R,I,V,Y;bt(this,w,M.AnnotationMode.ENABLE_FORMS);const P=x.container,u=x.defaultViewport;this.id=x.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=x.scale||N.DEFAULT_SCALE,this.viewport=u,this.pdfPageRotate=u.rotation,this._optionalContentConfigPromise=x.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!=(R=x.textLayerMode)?R:N.TextLayerMode.ENABLE,pn(this,w,null!=(I=x.annotationMode)?I:M.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=x.imageResourcesPath||"",this.useOnlyCssZoom=x.useOnlyCssZoom||!1,this.maxCanvasPixels=x.maxCanvasPixels||_,this.pageColors=x.pageColors||null,this.eventBus=x.eventBus,this.renderingQueue=x.renderingQueue,this.textLayerFactory=x.textLayerFactory,this.annotationLayerFactory=x.annotationLayerFactory,this.xfaLayerFactory=x.xfaLayerFactory,this.textHighlighter=null==(V=x.textHighlighterFactory)?void 0:V.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=x.structTreeLayerFactory,this.renderer=x.renderer||N.RendererType.CANVAS,this.l10n=x.l10n||b.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=N.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null==(Y=this.renderingQueue)?void 0:Y.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const g=document.createElement("div");g.className="page",g.style.width=Math.floor(this.viewport.width)+"px",g.style.height=Math.floor(this.viewport.height)+"px",g.setAttribute("data-page-number",this.id),g.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(ne=>{g.setAttribute("aria-label",ne)}),this.div=g,null==P||P.appendChild(g)}setPdfPage(x){this.pdfPage=x,this.pdfPageRotate=x.rotate,this.viewport=x.getViewport({scale:this.scale*M.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var x=this;return p(function*(){let P=null;try{yield x.annotationLayer.render(x.viewport,"display")}catch(u){P=u}finally{x.eventBus.dispatch("annotationlayerrendered",{source:x,pageNumber:x.id,error:P})}})()}_renderXfaLayer(){var x=this;return p(function*(){let P=null;try{const u=yield x.xfaLayer.render(x.viewport,"display");x.textHighlighter&&x._buildXfaTextContentItems(u.textDivs)}catch(u){P=u}finally{x.eventBus.dispatch("xfalayerrendered",{source:x,pageNumber:x.id,error:P})}})()}_buildXfaTextContentItems(x){var P=this;return p(function*(){const u=yield P.pdfPage.getTextContent(),g=[];for(const R of u.items)g.push(R.str);P.textHighlighter.setTextMapping(x,g),P.textHighlighter.enable()})()}_resetZoomLayer(x=!1){if(!this.zoomLayer)return;const P=this.zoomLayer.firstChild;this.paintedViewportMap.delete(P),P.width=0,P.height=0,x&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:x=!1,keepAnnotationLayer:P=!1,keepXfaLayer:u=!1}={}){var ne,re;this.cancelRendering({keepAnnotationLayer:P,keepXfaLayer:u}),this.renderingState=N.RenderingStates.INITIAL;const g=this.div;g.style.width=Math.floor(this.viewport.width)+"px",g.style.height=Math.floor(this.viewport.height)+"px";const R=g.childNodes,I=x&&this.zoomLayer||null,V=P&&(null==(ne=this.annotationLayer)?void 0:ne.div)||null,Y=u&&(null==(re=this.xfaLayer)?void 0:re.div)||null;for(let ue=R.length-1;ue>=0;ue--){const ve=R[ue];switch(ve){case I:case V:case Y:continue}ve.remove()}g.removeAttribute("data-loaded"),V&&this.annotationLayer.hide(),Y&&this.xfaLayer.hide(),I||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(ue=>{var ve;null==(ve=this.loadingIconDiv)||ve.setAttribute("aria-label",ue)}),g.appendChild(this.loadingIconDiv)}update({scale:x=0,rotation:P=null,optionalContentConfigPromise:u=null}){if(this.scale=x||this.scale,"number"==typeof P&&(this.rotation=P),u instanceof Promise&&(this._optionalContentConfigPromise=u),this.viewport=this.viewport.clone({scale:this.scale*M.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:I}=document.documentElement;I.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let R=!1;if(this.canvas&&this.maxCanvasPixels>0){const I=this.outputScale;(Math.floor(this.viewport.width)*I.sx|0)*(Math.floor(this.viewport.height)*I.sy|0)>this.maxCanvasPixels&&(R=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&R)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:x=!1,keepXfaLayer:P=!1}={}){var u;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!x||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!P||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,null==(u=this.textHighlighter)||u.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:x,redrawAnnotationLayer:P=!1,redrawXfaLayer:u=!1}){const g=this.viewport.width,R=this.viewport.height,I=this.div;x.style.width=x.parentNode.style.width=I.style.width=Math.floor(g)+"px",x.style.height=x.parentNode.style.height=I.style.height=Math.floor(R)+"px";const V=this.viewport.rotation-this.paintedViewportMap.get(x).rotation,Y=Math.abs(V);let ne=1,re=1;if((90===Y||270===Y)&&(ne=R/g,re=g/R),x.style.transform=`rotate(${V}deg) scale(${ne}, ${re})`,this.textLayer){const ue=this.textLayer.viewport,Ae=Math.abs(this.viewport.rotation-ue.rotation);let Ie=g/ue.width;(90===Ae||270===Ae)&&(Ie=g/ue.height);const de=this.textLayer.textLayerDiv;let Me,xe;switch(Ae){case 0:Me=xe=0;break;case 90:Me=0,xe="-"+de.style.height;break;case 180:Me="-"+de.style.width,xe="-"+de.style.height;break;case 270:Me="-"+de.style.width,xe=0;break;default:console.error("Bad rotation value.")}de.style.transform=`rotate(${Ae}deg) scale(${Ie}) translate(${Me}, ${xe})`,de.style.transformOrigin="0% 0%"}P&&this.annotationLayer&&this._renderAnnotationLayer(),u&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(x,P){return this.viewport.convertToPdfPoint(x,P)}toggleLoadingIconSpinner(x=!1){var P;null==(P=this.loadingIconDiv)||P.classList.toggle("notVisible",!x)}draw(){var re,ue,ve,x=this;this.renderingState!==N.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:P,pdfPage:u}=this;if(!u)return this.renderingState=N.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=N.RenderingStates.RUNNING;const g=document.createElement("div");g.style.width=P.style.width,g.style.height=P.style.height,g.classList.add("canvasWrapper"),(null==(re=this.annotationLayer)?void 0:re.div)?P.insertBefore(g,this.annotationLayer.div):P.appendChild(g);let R=null;if(this.textLayerMode!==N.TextLayerMode.DISABLE&&this.textLayerFactory){const Ae=document.createElement("div");Ae.className="textLayer",Ae.style.width=g.style.width,Ae.style.height=g.style.height,(null==(ue=this.annotationLayer)?void 0:ue.div)?P.insertBefore(Ae,this.annotationLayer.div):P.appendChild(Ae),R=this.textLayerFactory.createTextLayerBuilder(Ae,this.id-1,this.viewport,this.textLayerMode===N.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=R,pt(this,w)!==M.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(P,u,null,this.imageResourcesPath,pt(this,w)===M.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),(null==(ve=this.xfaLayer)?void 0:ve.div)&&P.appendChild(this.xfaLayer.div);let I=null;this.renderingQueue&&(I=Ae=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=N.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=N.RenderingStates.RUNNING,Ae()});Ae()});const V=function(){var Ae=p(function*(Ie=null){if(Y===x.paintTask&&(x.paintTask=null),Ie instanceof M.RenderingCancelledException)x._renderError=null;else if(x._renderError=Ie,x.renderingState=N.RenderingStates.FINISHED,x.loadingIconDiv&&(x.loadingIconDiv.remove(),delete x.loadingIconDiv),x._resetZoomLayer(!0),x.eventBus.dispatch("pagerendered",{source:x,pageNumber:x.id,cssTransform:!1,timestamp:performance.now(),error:x._renderError}),Ie)throw Ie});return function(){return Ae.apply(this,arguments)}}(),Y=this.renderer===N.RendererType.SVG?this.paintOnSvg(g):this.paintOnCanvas(g);Y.onRenderContinue=I,this.paintTask=Y;const ne=Y.promise.then(()=>V(null).then(()=>{if(R){const Ae=u.streamTextContent({includeMarkedContent:!0});R.setTextContentStream(Ae),R.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(Ae){return V(Ae)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(P,u,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=Ae=>{Ae.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(Ie=>{if(!Ie||!this.canvas)return;const de=this.structTreeLayer.render(Ie);de.classList.add("structTree"),this.canvas.appendChild(de)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(u)),P.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ne}paintOnCanvas(x){const P=(0,M.createPromiseCapability)(),u={promise:P.promise,onRenderContinue(de){de()},cancel(){Ie.cancel()}},g=this.viewport,R=document.createElement("canvas");R.hidden=!0;let I=!0;const V=function(){I&&(R.hidden=!1,I=!1)};x.appendChild(R),this.canvas=R;const Y=R.getContext("2d",{alpha:!1}),ne=this.outputScale=new N.OutputScale;if(this.useOnlyCssZoom){const de=g.clone({scale:M.PixelsPerInch.PDF_TO_CSS_UNITS});ne.sx*=de.width/g.width,ne.sy*=de.height/g.height}if(this.maxCanvasPixels>0){const Me=Math.sqrt(this.maxCanvasPixels/(g.width*g.height));ne.sx>Me||ne.sy>Me?(ne.sx=Me,ne.sy=Me,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const re=(0,N.approximateFraction)(ne.sx),ue=(0,N.approximateFraction)(ne.sy);R.width=(0,N.roundToDivide)(g.width*ne.sx,re[0]),R.height=(0,N.roundToDivide)(g.height*ne.sy,ue[0]),R.style.width=(0,N.roundToDivide)(g.width,re[1])+"px",R.style.height=(0,N.roundToDivide)(g.height,ue[1])+"px",this.paintedViewportMap.set(R,g);const Ae={canvasContext:Y,transform:ne.scaled?[ne.sx,0,0,ne.sy,0,0]:null,viewport:this.viewport,annotationMode:pt(this,w),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},Ie=this.pdfPage.render(Ae);return Ie.onContinue=function(de){V(),u.onRenderContinue?u.onRenderContinue(de):de()},Ie.promise.then(function(){V(),P.resolve()},function(de){V(),P.reject(de)}),u}paintOnSvg(x){let P=!1;const u=()=>{if(P)throw new M.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},g=this.pdfPage,R=this.viewport.clone({scale:M.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:g.getOperatorList({annotationMode:pt(this,w)}).then(V=>(u(),new M.SVGGraphics(g.commonObjs,g.objs).getSVG(V,R).then(ne=>{u(),this.svg=ne,this.paintedViewportMap.set(ne,R),ne.style.width=x.style.width,ne.style.height=x.style.height,this.renderingState=N.RenderingStates.FINISHED,x.appendChild(ne)}))),onRenderContinue(V){V()},cancel(){P=!0}}}setPageLabel(x){this.pageLabel="string"==typeof x?x:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(ee,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.compatibilityParams=y.OptionKind=y.AppOptions=void 0;const G=Object.create(null);y.compatibilityParams=G;{const _=navigator.userAgent||"",h=navigator.platform||"",w=navigator.maxTouchPoints||1,U=/Android/.test(_);(/\b(iPad|iPhone|iPod)(?=;)/.test(_)||"MacIntel"===h&&w>1||U)&&(G.maxCanvasPixels=5242880)}const M={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};y.OptionKind=M;const N={annotationMode:{value:2,kind:M.VIEWER+M.PREFERENCE},cursorToolOnLoad:{value:0,kind:M.VIEWER+M.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:M.VIEWER},defaultZoomValue:{value:"",kind:M.VIEWER+M.PREFERENCE},disableHistory:{value:!1,kind:M.VIEWER},disablePageLabels:{value:!1,kind:M.VIEWER+M.PREFERENCE},enablePermissions:{value:!1,kind:M.VIEWER+M.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:M.VIEWER+M.PREFERENCE},enableScripting:{value:!0,kind:M.VIEWER+M.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:M.VIEWER},externalLinkTarget:{value:0,kind:M.VIEWER+M.PREFERENCE},historyUpdateUrl:{value:!1,kind:M.VIEWER+M.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:M.VIEWER+M.PREFERENCE},imageResourcesPath:{value:"./images/",kind:M.VIEWER},maxCanvasPixels:{value:16777216,compatibility:G.maxCanvasPixels,kind:M.VIEWER},pageColorsBackground:{value:"Canvas",kind:M.VIEWER+M.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:M.VIEWER+M.PREFERENCE},pdfBugEnabled:{value:!1,kind:M.VIEWER+M.PREFERENCE},printResolution:{value:150,kind:M.VIEWER},renderer:{value:"canvas",kind:M.VIEWER},sidebarViewOnLoad:{value:-1,kind:M.VIEWER+M.PREFERENCE},scrollModeOnLoad:{value:-1,kind:M.VIEWER+M.PREFERENCE},spreadModeOnLoad:{value:-1,kind:M.VIEWER+M.PREFERENCE},textLayerMode:{value:1,kind:M.VIEWER+M.PREFERENCE},useOnlyCssZoom:{value:!1,kind:M.VIEWER+M.PREFERENCE},viewerCssTheme:{value:0,kind:M.VIEWER+M.PREFERENCE},viewOnLoad:{value:0,kind:M.VIEWER+M.PREFERENCE},cMapPacked:{value:!0,kind:M.API},cMapUrl:{value:"../web/cmaps/",kind:M.API},disableAutoFetch:{value:!1,kind:M.API+M.PREFERENCE},disableFontFace:{value:!1,kind:M.API+M.PREFERENCE},disableRange:{value:!1,kind:M.API+M.PREFERENCE},disableStream:{value:!1,kind:M.API+M.PREFERENCE},docBaseUrl:{value:"",kind:M.API},enableXfa:{value:!0,kind:M.API+M.PREFERENCE},fontExtraProperties:{value:!1,kind:M.API},isEvalSupported:{value:!0,kind:M.API},maxImageSize:{value:-1,kind:M.API},pdfBug:{value:!1,kind:M.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:M.API},verbosity:{value:1,kind:M.API},workerPort:{value:null,kind:M.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:M.WORKER}};N.disablePreferences={value:!1,kind:M.VIEWER},N.locale={value:navigator.language||"en-US",kind:M.VIEWER},N.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:M.VIEWER},N.renderer.kind+=M.PREFERENCE;const F=Object.create(null);y.AppOptions=class b{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(h){var x;const w=F[h];if(void 0!==w)return w;const U=N[h];return void 0!==U?null!=(x=U.compatibility)?x:U.value:void 0}static getAll(h=null){var U;const w=Object.create(null);for(const x in N){const P=N[x];if(h){if(0==(h&P.kind))continue;if(h===M.PREFERENCE){const g=P.value,R=typeof g;if("boolean"===R||"string"===R||"number"===R&&Number.isInteger(g)){w[x]=g;continue}throw new Error(`Invalid type for preference: ${x}`)}}const u=F[x];w[x]=void 0!==u?u:null!=(U=P.compatibility)?U:P.value}return w}static set(h,w){F[h]=w}static setAll(h){for(const w in h)F[w]=h[w]}static remove(h){delete F[h]}static _hasUserOptions(){return Object.keys(F).length>0}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFRenderingQueue=void 0;var M=G(3),N=G(6);y.PDFRenderingQueue=class b{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(h){this.pdfViewer=h}setThumbnailViewer(h){this.pdfThumbnailViewer=h}isHighestPriority(h){return this.highestPriorityPage===h.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(h){var w;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(h)&&(this.isThumbnailViewEnabled&&(null==(w=this.pdfThumbnailViewer)?void 0:w.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(h,w,U,x=!1){const P=h.views,u=P.length;if(0===u)return null;for(let Y=0;Y<u;Y++){const ne=P[Y].view;if(!this.isViewFinished(ne))return ne}const g=h.first.id,R=h.last.id;if(R-g+1>u){const Y=h.ids;for(let ne=1,re=R-g;ne<re;ne++){const ue=U?g+ne:R-ne;if(Y.has(ue))continue;const ve=w[ue-1];if(!this.isViewFinished(ve))return ve}}let I=U?R:g-2,V=w[I];return V&&!this.isViewFinished(V)||x&&(I+=U?1:-1,V=w[I],V&&!this.isViewFinished(V))?V:null}isViewFinished(h){return h.renderingState===N.RenderingStates.FINISHED}renderView(h){switch(h.renderingState){case N.RenderingStates.FINISHED:return!1;case N.RenderingStates.PAUSED:this.highestPriorityPage=h.renderingId,h.resume();break;case N.RenderingStates.RUNNING:this.highestPriorityPage=h.renderingId;break;case N.RenderingStates.INITIAL:this.highestPriorityPage=h.renderingId,h.draw().finally(()=>{this.renderHighestPriority()}).catch(w=>{w instanceof M.RenderingCancelledException||console.error(`renderView: "${w}"`)})}return!0}}},(ee,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextHighlighter=void 0,y.TextHighlighter=class G{constructor({findController:N,eventBus:F,pageIndex:b}){this.findController=N,this.matches=[],this.eventBus=F,this.pageIdx=b,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(N,F){this.textDivs=N,this.textContentItemsStr=F}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=N=>{(N.pageIndex===this.pageIdx||-1===N.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(N,F){if(!N)return[];const{textContentItemsStr:b}=this;let _=0,h=0;const w=b.length-1,U=[];for(let x=0,P=N.length;x<P;x++){let u=N[x];for(;_!==w&&u>=h+b[_].length;)h+=b[_].length,_++;_===b.length&&console.error("Could not find a matching mapping");const g={begin:{divIdx:_,offset:u-h}};for(u+=F[x];_!==w&&u>h+b[_].length;)h+=b[_].length,_++;g.end={divIdx:_,offset:u-h},U.push(g)}return U}_renderMatches(N){if(0===N.length)return;const{findController:F,pageIdx:b}=this,{textContentItemsStr:_,textDivs:h}=this,w=b===F.selected.pageIdx,U=F.selected.matchIdx;let P=null;function g(Y,ne){const re=Y.divIdx;return h[re].textContent="",R(re,0,Y.offset,ne)}function R(Y,ne,re,ue){let ve=h[Y];if(ve.nodeType===Node.TEXT_NODE){const de=document.createElement("span");ve.parentNode.insertBefore(de,ve),de.appendChild(ve),h[Y]=de,ve=de}const Ae=_[Y].substring(ne,re),Ie=document.createTextNode(Ae);if(ue){const de=document.createElement("span");return de.className=`${ue} appended`,de.appendChild(Ie),ve.appendChild(de),ue.includes("selected")?de.offsetLeft:0}return ve.appendChild(Ie),0}let I=U,V=I+1;if(F.state.highlightAll)I=0,V=N.length;else if(!w)return;for(let Y=I;Y<V;Y++){const ne=N[Y],re=ne.begin,ue=ne.end,ve=w&&Y===U,Ae=ve?" selected":"";let Ie=0;if(P&&re.divIdx===P.divIdx?R(P.divIdx,P.offset,re.offset):(null!==P&&R(P.divIdx,P.offset,undefined),g(re)),re.divIdx===ue.divIdx)Ie=R(re.divIdx,re.offset,ue.offset,"highlight"+Ae);else{Ie=R(re.divIdx,re.offset,undefined,"highlight begin"+Ae);for(let de=re.divIdx+1,Me=ue.divIdx;de<Me;de++)h[de].className="highlight middle"+Ae;g(ue,"highlight end"+Ae)}P=ue,ve&&F.scrollMatchIntoView({element:h[re.divIdx],selectedLeft:Ie,pageIndex:b,matchIndex:U})}P&&R(P.divIdx,P.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:N,matches:F,pageIdx:b}=this,{textContentItemsStr:_,textDivs:h}=this;let w=-1;for(let P=0,u=F.length;P<u;P++){const g=F[P];for(let I=Math.max(w,g.begin.divIdx),V=g.end.divIdx;I<=V;I++){const Y=h[I];Y.textContent=_[I],Y.className=""}w=g.end.divIdx+1}(null==N?void 0:N.highlightMatches)&&(this.matches=this._convertMatches(N.pageMatches[b]||null,N.pageMatchesLength[b]||null),this._renderMatches(this.matches))}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DownloadManager=void 0;var M=G(3);function N(b,_){const h=document.createElement("a");if(!h.click)throw new Error('DownloadManager: "a.click()" is not supported.');h.href=b,h.target="_parent","download"in h&&(h.download=_),(document.body||document.documentElement).appendChild(h),h.click(),h.remove()}y.DownloadManager=class F{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(_,h){(0,M.createValidAbsoluteUrl)(_,"http://example.com")?N(_+"#pdfjs.action=download",h):console.error(`downloadUrl - not a valid URL: ${_}`)}downloadData(_,h,w){N(URL.createObjectURL(new Blob([_],{type:w})),h)}openOrDownloadData(_,h,w){const U=(0,M.isPdfFile)(w),x=U?"application/pdf":"";if(U){let u,P=this._openBlobUrls.get(_);P||(P=URL.createObjectURL(new Blob([h],{type:x})),this._openBlobUrls.set(_,P)),u="?file="+encodeURIComponent(P+"#"+w);try{return window.open(u),!0}catch(g){console.error(`openOrDownloadData: ${g}`),URL.revokeObjectURL(P),this._openBlobUrls.delete(_)}}return this.downloadData(h,w,x),!1}download(_,h,w,U="download"){N(URL.createObjectURL(_),w)}}},(ee,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.WaitOnType=y.EventBus=y.AutomationEventBus=void 0,y.waitOnEventOrTimeout=function M({target:b,name:_,delay:h=0}){return new Promise(function(w,U){if("object"!=typeof b||!_||"string"!=typeof _||!(Number.isInteger(h)&&h>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function x(R){b instanceof N?b._off(_,P):b.removeEventListener(_,P),g&&clearTimeout(g),w(R)}const P=x.bind(null,G.EVENT);b instanceof N?b._on(_,P):b.addEventListener(_,P);const u=x.bind(null,G.TIMEOUT),g=setTimeout(u,h)})};const G={EVENT:"event",TIMEOUT:"timeout"};y.WaitOnType=G;class N{constructor(){this._listeners=Object.create(null)}on(_,h,w=null){this._on(_,h,{external:!0,once:null==w?void 0:w.once})}off(_,h,w=null){this._off(_,h,{external:!0,once:null==w?void 0:w.once})}dispatch(_,h){const w=this._listeners[_];if(!w||0===w.length)return;let U;for(const{listener:x,external:P,once:u}of w.slice(0))u&&this._off(_,x),P?(U||(U=[])).push(x):x(h);if(U){for(const x of U)x(h);U=null}}_on(_,h,w=null){var x;((x=this._listeners)[_]||(x[_]=[])).push({listener:h,external:!0===(null==w?void 0:w.external),once:!0===(null==w?void 0:w.once)})}_off(_,h,w=null){const U=this._listeners[_];if(U)for(let x=0,P=U.length;x<P;x++)if(U[x].listener===h)return void U.splice(x,1)}}y.EventBus=N,y.AutomationEventBus=class F extends N{dispatch(_,h){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.GenericL10n=void 0,G(19);var M=G(4);const N=document.webL10n;y.GenericL10n=class F{constructor(_){this._lang=_,this._ready=new Promise((h,w)=>{N.setLanguage((0,M.fixupLangCode)(_),()=>{h(N)})})}getLanguage(){var _=this;return p(function*(){return(yield _._ready).getLanguage()})()}getDirection(){var _=this;return p(function*(){return(yield _._ready).getDirection()})()}get(_,h=null,w=(0,M.getL10nFallback)(_,h)){var U=this;return p(function*(){return(yield U._ready).get(_,h,w)})()}translate(_){var h=this;return p(function*(){return(yield h._ready).translate(_)})()}}},()=>{document.webL10n=function(ee,y,G){var M={},N="",F="textContent",b="",_={},h="loading";function g(de,Me,xe){Me=Me||function(Q){},xe=xe||function(){};var Le=new XMLHttpRequest;Le.open("GET",de,!0),Le.overrideMimeType&&Le.overrideMimeType("text/plain; charset=utf-8"),Le.onreadystatechange=function(){4==Le.readyState&&(200==Le.status||0===Le.status?Me(Le.responseText):xe())},Le.onerror=xe,Le.ontimeout=xe;try{Le.send(null)}catch($e){xe()}}function I(de,Me){de&&(de=de.toLowerCase()),Me=Me||function(){},function V(){M={},N="",b=""}(),b=de;var xe=function U(){return y.querySelectorAll('link[type="application/l10n"]')}(),Le=xe.length;if(0!==Le){var E,d=0;E=function(){++d>=Le&&(Me(),h="complete")};for(var D=0;D<Le;D++)new S(xe[D]).load(de,E)}else{var $e=function x(){var de=y.querySelector('script[type="application/l10n"]');return de?JSON.parse(de.innerHTML):null}();if($e&&$e.locales&&$e.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(M=$e.locales[de])){var Q=$e.default_locale.toLowerCase();for(var v in $e.locales){if((v=v.toLowerCase())===de){M=$e.locales[de];break}v===Q&&(M=$e.locales[Q])}}Me()}else console.log("no resource to load, early way out");h="complete"}function S(H){var W=H.href;this.load=function(fe,Ce){!function R(de,Me,xe,Le){var $e=de.replace(/[^\/]*$/,"")||"./";function Q(E){return E.lastIndexOf("\\")<0?E:E.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}g(de,function(E){N+=E,function v(E,d){var S={},D=/^\s*|\s*$/,k=/^\s*#|^\s*$/,H=/^\s*\[(.*)\]\s*$/,W=/^\s*@import\s+url\((.*)\)\s*$/i,fe=/^([^=\s]*)\s*=\s*(.+)$/;function Ce(we,Pe,ke){var ze=we.replace(D,"").split(/[\r\n]+/),tt="*",Oe=Me.split("-",1)[0],He=!1,je="";!function $(){for(;;){if(!ze.length)return void ke();var ie=ze.shift();if(!k.test(ie)){if(Pe){if(je=H.exec(ie)){tt=je[1].toLowerCase(),He="*"!==tt&&tt!==Me&&tt!==Oe;continue}if(He)continue;if(je=W.exec(ie))return void _e($e+je[1],$)}var Te=ie.match(fe);Te&&3==Te.length&&(S[Te[1]]=Q(Te[2]))}}}()}function _e(we,Pe){g(we,function(ke){Ce(ke,!1,Pe)},function(){console.warn(we+" not found."),Pe()})}Ce(E,!0,function(){d(S)})}(E,function(d){for(var S in d){var D,k,H=S.lastIndexOf(".");H>0?(D=S.substring(0,H),k=S.substring(H+1)):(D=S,k=F),M[D]||(M[D]={}),M[D][k]=d[S]}xe&&xe()})},Le)}(W,fe,Ce,function(){console.warn(W+" not found."),console.warn('"'+fe+'" resource not found'),b="",Ce()})}}}function ne(de,Me,xe){var Le=M[de];if(!Le){if(console.warn("#"+de+" is undefined."),!xe)return null;Le=xe}var $e={};for(var Q in Le){var v=Le[Q];v=ue(v=re(v,Me,de,Q),Me,de),$e[Q]=v}return $e}function re(de,Me,xe,Le){var Q=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(de);if(!Q||!Q.length)return de;var d,v=Q[1],E=Q[2];return Me&&E in Me?d=Me[E]:E in M&&(d=M[E]),v in _&&(de=(0,_[v])(de,d,xe,Le)),de}function ue(de,Me,xe){return de.replace(/\{\{\s*(.+?)\s*\}\}/g,function($e,Q){return Me&&Q in Me?Me[Q]:Q in M?M[Q]:(console.log("argument {{"+Q+"}} for #"+xe+" is undefined."),$e)})}function ve(de){var Me=function u(de){if(!de)return{};var Me=de.getAttribute("data-l10n-id"),xe=de.getAttribute("data-l10n-args"),Le={};if(xe)try{Le=JSON.parse(xe)}catch($e){console.warn("could not parse arguments for #"+Me)}return{id:Me,args:Le}}(de);if(Me.id){var xe=ne(Me.id,Me.args);if(!xe)return void console.warn("#"+Me.id+" is undefined.");if(xe[F]){if(0===function Ae(de){if(de.children)return de.children.length;if(void 0!==de.childElementCount)return de.childElementCount;for(var Me=0,xe=0;xe<de.childNodes.length;xe++)Me+=1===de.nodeType?1:0;return Me}(de))de[F]=xe[F];else{for(var Le=de.childNodes,$e=!1,Q=0,v=Le.length;Q<v;Q++)3===Le[Q].nodeType&&/\S/.test(Le[Q].nodeValue)&&($e?Le[Q].nodeValue="":(Le[Q].nodeValue=xe[F],$e=!0));if(!$e){var E=y.createTextNode(xe[F]);de.insertBefore(E,de.firstChild)}}delete xe[F]}for(var d in xe)de[d]=xe[d]}}return _.plural=function(de,Me,xe,Le){var $e=parseFloat(Me);if(isNaN($e)||Le!=F)return de;_._pluralRules||(_._pluralRules=function Y(de){function xe(v,E){return-1!==E.indexOf(v)}function Le(v,E,d){return E<=v&&v<=d}var $e={0:function(v){return"other"},1:function(v){return Le(v%100,3,10)?"few":0===v?"zero":Le(v%100,11,99)?"many":2==v?"two":1==v?"one":"other"},2:function(v){return 0!==v&&v%10==0?"many":2==v?"two":1==v?"one":"other"},3:function(v){return 1==v?"one":"other"},4:function(v){return Le(v,0,1)?"one":"other"},5:function(v){return Le(v,0,2)&&2!=v?"one":"other"},6:function(v){return 0===v?"zero":v%10==1&&v%100!=11?"one":"other"},7:function(v){return 2==v?"two":1==v?"one":"other"},8:function(v){return Le(v,3,6)?"few":Le(v,7,10)?"many":2==v?"two":1==v?"one":"other"},9:function(v){return 0===v||1!=v&&Le(v%100,1,19)?"few":1==v?"one":"other"},10:function(v){return Le(v%10,2,9)&&!Le(v%100,11,19)?"few":v%10!=1||Le(v%100,11,19)?"other":"one"},11:function(v){return Le(v%10,2,4)&&!Le(v%100,12,14)?"few":v%10==0||Le(v%10,5,9)||Le(v%100,11,14)?"many":v%10==1&&v%100!=11?"one":"other"},12:function(v){return Le(v,2,4)?"few":1==v?"one":"other"},13:function(v){return Le(v%10,2,4)&&!Le(v%100,12,14)?"few":1!=v&&Le(v%10,0,1)||Le(v%10,5,9)||Le(v%100,12,14)?"many":1==v?"one":"other"},14:function(v){return Le(v%100,3,4)?"few":v%100==2?"two":v%100==1?"one":"other"},15:function(v){return 0===v||Le(v%100,2,10)?"few":Le(v%100,11,19)?"many":1==v?"one":"other"},16:function(v){return v%10==1&&11!=v?"one":"other"},17:function(v){return 3==v?"few":0===v?"zero":6==v?"many":2==v?"two":1==v?"one":"other"},18:function(v){return 0===v?"zero":Le(v,0,2)&&0!==v&&2!=v?"one":"other"},19:function(v){return Le(v,2,10)?"few":Le(v,0,1)?"one":"other"},20:function(v){return!Le(v%10,3,4)&&v%10!=9||Le(v%100,10,19)||Le(v%100,70,79)||Le(v%100,90,99)?v%1e6==0&&0!==v?"many":v%10!=2||xe(v%100,[12,72,92])?v%10!=1||xe(v%100,[11,71,91])?"other":"one":"two":"few"},21:function(v){return 0===v?"zero":1==v?"one":"other"},22:function(v){return Le(v,0,1)||Le(v,11,99)?"one":"other"},23:function(v){return Le(v%10,1,2)||v%20==0?"one":"other"},24:function(v){return Le(v,3,10)||Le(v,13,19)?"few":xe(v,[2,12])?"two":xe(v,[1,11])?"one":"other"}},Q={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[de.replace(/-.*$/,"")];return Q in $e?$e[Q]:(console.warn("plural form unknown for ["+de+"]"),function(){return"other"})}(b));var Q="["+_._pluralRules($e)+"]";return 0===$e&&xe+"[zero]"in M?de=M[xe+"[zero]"][Le]:1==$e&&xe+"[one]"in M?de=M[xe+"[one]"][Le]:2==$e&&xe+"[two]"in M?de=M[xe+"[two]"][Le]:xe+Q in M?de=M[xe+Q][Le]:xe+"[other]"in M&&(de=M[xe+"[other]"][Le]),de},{get:function(de,Me,xe){var Q,Le=de.lastIndexOf("."),$e=F;Le>0&&($e=de.substring(Le+1),de=de.substring(0,Le)),xe&&((Q={})[$e]=xe);var v=ne(de,Me,Q);return v&&$e in v?v[$e]:"{{"+de+"}}"},getData:function(){return M},getText:function(){return N},getLanguage:function(){return b},setLanguage:function(de,Me){I(de,function(){Me&&Me()})},getDirection:function(){var Me=b.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(Me)>=0?"rtl":"ltr"},translate:function Ie(de){for(var Me=function P(de){return de?de.querySelectorAll("*[data-l10n-id]"):[]}(de=de||y.documentElement),xe=Me.length,Le=0;Le<xe;Le++)ve(Me[Le]);ve(de)},getReadyState:function(){return h},ready:function(de){de&&("complete"==h||"interactive"==h?ee.setTimeout(function(){de()}):y.addEventListener&&y.addEventListener("localized",function Me(){y.removeEventListener("localized",Me),de()}))}}}(window,document)},(ee,y,G)=>{var ue,FB,Ae,iE,de,sE,xe,LB,$e,NB,v,BB,d,oE,D,jB,H,HB,fe,Kp,_e,Lu,Pe,Dl,ze,VB,Oe,aE,je,lE,ie,Yp,Ke,UB,Xe,cE,T,$B,Re,Nu;Object.defineProperty(y,"__esModule",{value:!0}),y.PDFFindController=y.FindState=void 0;var M=G(6),N=G(3),F=G(21);const b={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};y.FindState=b;const U={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},x=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),P=[...x.values()].map(K=>String.fromCharCode(K)).join(""),u=/\p{M}+/gu,g=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,R=/([^\p{M}])\p{M}*$/u,I=/^\p{M}*([^\p{M}])/u;let V=null;function Y(K){if(!V){const St=Object.keys(U).join("");V=new RegExp(`([${St}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const L=[];let B;for(;null!==(B=u.exec(K));)L.push([B[0].length,B.index]);let te=K.normalize("NFD");const Se=[[0,0]];let me=0,Ee=0,Ye=0,et=0,Ct=!1;return te=te.replace(V,(St,$t,dn,pr,an,Zt)=>{var Lr;if(Zt-=Ye,$t){const wr=U[St],Nr=wr.length;for(let Gn=1;Gn<Nr;Gn++)Se.push([Zt-Ee+Gn,Ee-Gn]);return Ee-=Nr-1,wr}if(dn){const wr=dn.endsWith("\n"),Nr=wr?dn.length-2:dn.length;Ct=!0;let Gn=Nr;Zt+et===(null==(Lr=L[me])?void 0:Lr[1])&&(Gn-=L[me][0],++me);for(let Sn=1;Sn<Gn+1;Sn++)Se.push([Zt-1-Ee+Sn,Ee-Sn]);return Ee-=Gn,Ye+=Gn,wr?(Se.push([(Zt+=Nr-1)-Ee+1,1+Ee]),Ee+=1,Ye+=1,et+=1,dn.slice(0,Nr)):dn}return pr?(Se.push([Zt-Ee+1,1+Ee]),Ee+=1,Ye+=1,et+=1,pr.charAt(0)):(Se.push([Zt-Ee+1,Ee-1]),Ee-=1,Ye+=1,et+=1," ")}),Se.push([te.length,Ee]),[te,Se,Ct]}function ne(K,L,B){if(!K)return[L,B];const te=L,Se=L+B;let me=(0,M.binarySearchFirstItem)(K,Ye=>Ye[0]>=te);K[me][0]>te&&--me;let Ee=(0,M.binarySearchFirstItem)(K,Ye=>Ye[0]>=Se,me);return K[Ee][0]>Se&&--Ee,[te+K[me][1],B+K[Ee][1]-K[me][1]]}ue=new WeakSet,FB=function(L){if(!L)return;const B=this._pdfDocument,{type:te}=L;(null===this._state||yt(this,xe,LB).call(this,L))&&(this._dirtyMatch=!0),this._state=L,"highlightallchange"!==te&&yt(this,Re,Nu).call(this,b.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||B&&this._pdfDocument!==B)return;yt(this,H,HB).call(this);const Se=!this._highlightMatches,me=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),te?this._dirtyMatch?yt(this,Pe,Dl).call(this):"again"===te?(yt(this,Pe,Dl).call(this),Se&&this._state.highlightAll&&yt(this,_e,Lu).call(this)):"highlightallchange"===te?(me?yt(this,Pe,Dl).call(this):this._highlightMatches=!0,yt(this,_e,Lu).call(this)):yt(this,Pe,Dl).call(this):this._findTimeout=setTimeout(()=>{yt(this,Pe,Dl).call(this),this._findTimeout=null},250)})},Ae=new WeakSet,iE=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,N.createPromiseCapability)()},de=new WeakSet,sE=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=Y(this._state.query)),this._normalizedQuery},xe=new WeakSet,LB=function(L){if(L.query!==this._state.query)return!0;switch(L.type){case"again":const B=this._selected.pageIdx+1,te=this._linkService;return B>=1&&B<=te.pagesCount&&B!==te.page&&!te.isPageVisible(B);case"highlightallchange":return!1}return!0},$e=new WeakSet,NB=function(L,B,te){let Se=L.slice(0,B).match(R);if(Se){const me=L.charCodeAt(B),Ee=Se[1].charCodeAt(0);if((0,F.getCharacterType)(me)===(0,F.getCharacterType)(Ee))return!1}if(Se=L.slice(B+te).match(I),Se){const me=L.charCodeAt(B+te-1),Ee=Se[1].charCodeAt(0);if((0,F.getCharacterType)(me)===(0,F.getCharacterType)(Ee))return!1}return!0},v=new WeakSet,BB=function(L,B,te,Se){const me=[],Ee=[],Ye=this._pageDiffs[te];let et;for(;null!==(et=L.exec(Se));){if(B&&!yt(this,$e,NB).call(this,Se,et.index,et[0].length))continue;const[Ct,St]=ne(Ye,et.index,et[0].length);St&&(me.push(Ct),Ee.push(St))}this._pageMatches[te]=me,this._pageMatchesLength[te]=Ee},d=new WeakSet,oE=function(L,B){const{matchDiacritics:te}=this._state;let Se=!1;return(L=L.replace(g,(Ee,Ye,et,Ct,St,$t)=>Ye?`[ ]*\\${Ye}[ ]*`:et?`[ ]*${et}[ ]*`:Ct?"[ ]+":te?St||$t:St?x.has(St.charCodeAt(0))?St:"":B?(Se=!0,`${$t}\\p{M}*`):$t)).endsWith("[ ]*")&&(L=L.slice(0,L.length-"[ ]*".length)),te&&B&&(Se=!0,L=`${L}(?=[${P}]|[^\\p{M}]|$)`),[Se,L]},D=new WeakSet,jB=function(L){let B=pt(this,de,sE);if(0===B.length)return;const{caseSensitive:te,entireWord:Se,phraseSearch:me}=this._state,Ee=this._pageContents[L],Ye=this._hasDiacritics[L];let et=!1;if(me)[et,B]=yt(this,d,oE).call(this,B,Ye);else{const $t=B.match(/\S+/g);$t&&(B=$t.sort().reverse().map(dn=>{const[pr,an]=yt(this,d,oE).call(this,dn,Ye);return et||(et=pr),`(${an})`}).join("|"))}B=new RegExp(B,`g${et?"u":""}${te?"":"i"}`),yt(this,v,BB).call(this,B,Se,L,Ee),this._state.highlightAll&&yt(this,fe,Kp).call(this,L),this._resumePageIdx===L&&(this._resumePageIdx=null,yt(this,Oe,aE).call(this));const St=this._pageMatches[L].length;St>0&&(this._matchesCountTotal+=St,yt(this,T,$B).call(this))},H=new WeakSet,HB=function(){if(this._extractTextPromises.length>0)return;let L=Promise.resolve();for(let B=0,te=this._linkService.pagesCount;B<te;B++){const Se=(0,N.createPromiseCapability)();this._extractTextPromises[B]=Se.promise,L=L.then(()=>this._pdfDocument.getPage(B+1).then(me=>me.getTextContent()).then(me=>{const Ee=[];for(const Ye of me.items)Ee.push(Ye.str),Ye.hasEOL&&Ee.push("\n");[this._pageContents[B],this._pageDiffs[B],this._hasDiacritics[B]]=Y(Ee.join("")),Se.resolve()},me=>{console.error(`Unable to get text content for page ${B+1}`,me),this._pageContents[B]="",this._pageDiffs[B]=null,this._hasDiacritics[B]=!1,Se.resolve()}))}},fe=new WeakSet,Kp=function(L){this._scrollMatches&&this._selected.pageIdx===L&&(this._linkService.page=L+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:L})},_e=new WeakSet,Lu=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Pe=new WeakSet,Dl=function(){const L=this._state.findPrevious,B=this._linkService.page-1,te=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=B,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,yt(this,_e,Lu).call(this);for(let me=0;me<te;me++)this._pendingFindMatches.has(me)||(this._pendingFindMatches.add(me),this._extractTextPromises[me].then(()=>{this._pendingFindMatches.delete(me),yt(this,D,jB).call(this,me)}))}if(""===pt(this,de,sE))return void yt(this,Re,Nu).call(this,b.FOUND);if(this._resumePageIdx)return;const Se=this._offset;if(this._pagesToSearch=te,null!==Se.matchIdx){const me=this._pageMatches[Se.pageIdx].length;if(!L&&Se.matchIdx+1<me||L&&Se.matchIdx>0)return Se.matchIdx=L?Se.matchIdx-1:Se.matchIdx+1,void yt(this,ie,Yp).call(this,!0);yt(this,je,lE).call(this,L)}yt(this,Oe,aE).call(this)},ze=new WeakSet,VB=function(L){const B=this._offset,te=L.length,Se=this._state.findPrevious;return te?(B.matchIdx=Se?te-1:0,yt(this,ie,Yp).call(this,!0),!0):(yt(this,je,lE).call(this,Se),!!(B.wrapped&&(B.matchIdx=null,this._pagesToSearch<0))&&(yt(this,ie,Yp).call(this,!1),!0))},Oe=new WeakSet,aE=function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let L=null;do{const B=this._offset.pageIdx;if(L=this._pageMatches[B],!L){this._resumePageIdx=B;break}}while(!yt(this,ze,VB).call(this,L))},je=new WeakSet,lE=function(L){const B=this._offset,te=this._linkService.pagesCount;B.pageIdx=L?B.pageIdx-1:B.pageIdx+1,B.matchIdx=null,this._pagesToSearch--,(B.pageIdx>=te||B.pageIdx<0)&&(B.pageIdx=L?te-1:0,B.wrapped=!0)},ie=new WeakSet,Yp=function(L=!1){let B=b.NOT_FOUND;const te=this._offset.wrapped;if(this._offset.wrapped=!1,L){const Se=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,B=te?b.WRAPPED:b.FOUND,-1!==Se&&Se!==this._selected.pageIdx&&yt(this,fe,Kp).call(this,Se)}yt(this,Re,Nu).call(this,B,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,yt(this,fe,Kp).call(this,this._selected.pageIdx))},Ke=new WeakSet,UB=function(L){const B=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||B&&this._pdfDocument!==B||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),yt(this,Re,Nu).call(this,b.FOUND),this._highlightMatches=!1,yt(this,_e,Lu).call(this))})},Xe=new WeakSet,cE=function(){var me;const{pageIdx:L,matchIdx:B}=this._selected;let te=0,Se=this._matchesCountTotal;if(-1!==B){for(let Ee=0;Ee<L;Ee++)te+=(null==(me=this._pageMatches[Ee])?void 0:me.length)||0;te+=B+1}return(te<1||te>Se)&&(te=Se=0),{current:te,total:Se}},T=new WeakSet,$B=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:yt(this,Xe,cE).call(this)})},Re=new WeakSet,Nu=function(L,B=!1){var te,Se;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:L,previous:B,matchesCount:yt(this,Xe,cE).call(this),rawQuery:null!=(Se=null==(te=this._state)?void 0:te.query)?Se:null})},y.PDFFindController=class re{constructor({linkService:L,eventBus:B}){bt(this,ue),bt(this,Ae),bt(this,de),bt(this,xe),bt(this,$e),bt(this,v),bt(this,d),bt(this,D),bt(this,H),bt(this,fe),bt(this,_e),bt(this,Pe),bt(this,ze),bt(this,Oe),bt(this,je),bt(this,ie),bt(this,Ke),bt(this,Xe),bt(this,T),bt(this,Re),this._linkService=L,this._eventBus=B,yt(this,Ae,iE).call(this),B._on("find",yt(this,ue,FB).bind(this)),B._on("findbarclose",yt(this,Ke,UB).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(L){this._pdfDocument&&yt(this,Ae,iE).call(this),L&&(this._pdfDocument=L,this._firstPageCapability.resolve())}scrollMatchIntoView({element:L=null,selectedLeft:B=0,pageIndex:te=-1,matchIndex:Se=-1}){this._scrollMatches&&L&&-1!==Se&&Se===this._selected.matchIdx&&-1!==te&&te===this._selected.pageIdx&&(this._scrollMatches=!1,(0,M.scrollIntoView)(L,{top:-50,left:B+-400},!0))}}},(ee,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.CharacterType=void 0,y.getCharacterType=function u(g){return function M(g){return g<11904}(g)?function N(g){return 0==(65408&g)}(g)?function _(g){return 32===g||9===g||13===g||10===g}(g)?G.SPACE:function F(g){return g>=97&&g<=122||g>=65&&g<=90}(g)||function b(g){return g>=48&&g<=57}(g)||95===g?G.ALPHA_LETTER:G.PUNCT:function P(g){return 3584==(65408&g)}(g)?G.THAI_LETTER:160===g?G.SPACE:G.ALPHA_LETTER:function h(g){return g>=13312&&g<=40959||g>=63744&&g<=64255}(g)?G.HAN_LETTER:function w(g){return g>=12448&&g<=12543}(g)?G.KATAKANA_LETTER:function U(g){return g>=12352&&g<=12447}(g)?G.HIRAGANA_LETTER:function x(g){return g>=65376&&g<=65439}(g)?G.HALFWIDTH_KATAKANA_LETTER:G.ALPHA_LETTER};const G={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};y.CharacterType=G},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFHistory=void 0,y.isDestArraysEqual=x,y.isDestHashesEqual=U;var M=G(6),N=G(17);function h(){return document.location.hash}function U(P,u){return"string"==typeof P&&"string"==typeof u&&(P===u||(0,M.parseQueryString)(P).get("nameddest")===u)}function x(P,u){function g(R,I){if(typeof R!=typeof I||Array.isArray(R)||Array.isArray(I))return!1;if(null!==R&&"object"==typeof R&&null!==I){if(Object.keys(R).length!==Object.keys(I).length)return!1;for(const V in R)if(!g(R[V],I[V]))return!1;return!0}return R===I||Number.isNaN(R)&&Number.isNaN(I)}if(!Array.isArray(P)||!Array.isArray(u)||P.length!==u.length)return!1;for(let R=0,I=P.length;R<I;R++)if(!g(P[R],u[R]))return!1;return!0}y.PDFHistory=class w{constructor({linkService:u,eventBus:g}){this.linkService=u,this.eventBus=g,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",R=>{this._isPagesLoaded=!!R.pagesCount},{once:!0})})}initialize({fingerprint:u,resetHistory:g=!1,updateUrl:R=!1}){if(!u||"string"!=typeof u)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const I=""!==this._fingerprint&&this._fingerprint!==u;this._fingerprint=u,this._updateUrl=!0===R,this._initialized=!0,this._bindEvents();const V=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=h(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(V,!0)||g){const{hash:ne,page:re,rotation:ue}=this._parseCurrentHash(!0);return!ne||I||g?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:ne,page:re,rotation:ue},!0)}const Y=V.destination;this._updateInternalState(Y,V.uid,!0),void 0!==Y.rotation&&(this._initialRotation=Y.rotation),Y.dest?(this._initialBookmark=JSON.stringify(Y.dest),this._destination.page=null):Y.hash?this._initialBookmark=Y.hash:Y.page&&(this._initialBookmark=`page=${Y.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:u=null,explicitDest:g,pageNumber:R}){if(!this._initialized)return;if(u&&"string"!=typeof u)return void console.error(`PDFHistory.push: "${u}" is not a valid namedDest parameter.`);if(!Array.isArray(g))return void console.error(`PDFHistory.push: "${g}" is not a valid explicitDest parameter.`);if(!this._isValidPage(R)&&(null!==R||this._destination))return void console.error(`PDFHistory.push: "${R}" is not a valid pageNumber parameter.`);const I=u||JSON.stringify(g);if(!I)return;let V=!1;if(this._destination&&(U(this._destination.hash,I)||x(this._destination.dest,g))){if(this._destination.page)return;V=!0}this._popStateInProgress&&!V||(this._pushOrReplaceState({dest:g,hash:I,page:R,rotation:this.linkService.rotation},V),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(u){var g;if(this._initialized){if(!this._isValidPage(u))return void console.error(`PDFHistory.pushPage: "${u}" is not a valid page number.`);(null==(g=this._destination)?void 0:g.page)!==u&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${u}`,page:u,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(u,g=!1){const R=g||!this._destination,I={fingerprint:this._fingerprint,uid:R?this._uid:this._uid+1,destination:u};let V;if(this._updateInternalState(u,I.uid),this._updateUrl&&(null==u?void 0:u.hash)){const Y=document.location.href.split("#")[0];Y.startsWith("file://")||(V=`${Y}#${u.hash}`)}R?window.history.replaceState(I,"",V):window.history.pushState(I,"",V)}_tryPushCurrentPosition(u=!1){if(!this._position)return;let g=this._position;if(u&&(g=Object.assign(Object.create(null),this._position),g.temporary=!0),!this._destination)return void this._pushOrReplaceState(g);if(this._destination.temporary)return void this._pushOrReplaceState(g,!0);if(this._destination.hash===g.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let R=!1;if(this._destination.page>=g.first&&this._destination.page<=g.page){if(void 0!==this._destination.dest||!this._destination.first)return;R=!0}this._pushOrReplaceState(g,R)}_isValidPage(u){return Number.isInteger(u)&&u>0&&u<=this.linkService.pagesCount}_isValidState(u,g=!1){if(!u)return!1;if(u.fingerprint!==this._fingerprint){if(!g)return!1;{if("string"!=typeof u.fingerprint||u.fingerprint.length!==this._fingerprint.length)return!1;const[R]=performance.getEntriesByType("navigation");if("reload"!==(null==R?void 0:R.type))return!1}}return!(!Number.isInteger(u.uid)||u.uid<0||null===u.destination||"object"!=typeof u.destination)}_updateInternalState(u,g,R=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),R&&(null==u?void 0:u.temporary)&&delete u.temporary,this._destination=u,this._uid=g,this._maxUid=Math.max(this._maxUid,g),this._numPositionUpdates=0}_parseCurrentHash(u=!1){const g=unescape(h()).substring(1),R=(0,M.parseQueryString)(g),I=R.get("nameddest")||"";let V=0|R.get("page");return(!this._isValidPage(V)||u&&I.length>0)&&(V=null),{hash:g,page:V,rotation:this.linkService.rotation}}_updateViewarea({location:u}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:u.pdfOpenParams.substring(1),page:this.linkService.page,first:u.pageNumber,rotation:u.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:u}){const g=h(),R=this._currentHash!==g;if(this._currentHash=g,!u){this._uid++;const{hash:V,page:Y,rotation:ne}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:V,page:Y,rotation:ne},!0)}if(!this._isValidState(u))return;this._popStateInProgress=!0,R&&(this._blockHashChange++,(0,N.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const I=u.destination;this._updateInternalState(I,u.uid,!0),(0,M.isValidRotation)(I.rotation)&&(this.linkService.rotation=I.rotation),I.dest?this.linkService.goToDestination(I.dest):I.hash?this.linkService.setHash(I.hash):I.page&&(this.linkService.page=I.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFScriptingManager=void 0;var M=G(6),N=G(3);y.PDFScriptingManager=class F{constructor({eventBus:_,sandboxBundleSrc:h=null,scriptingFactory:w=null,docPropertiesLookup:U=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=_,this._sandboxBundleSrc=h,this._scriptingFactory=w,this._docPropertiesLookup=U,this._scriptingFactory||window.addEventListener("updatefromsandbox",x=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:x.detail})})}setViewer(_){this._pdfViewer=_}setDocument(_){var h=this;return p(function*(){var P;if(h._pdfDocument&&(yield h._destroyScripting()),h._pdfDocument=_,!_)return;const[w,U,x]=yield Promise.all([_.getFieldObjects(),_.getCalculationOrderIds(),_.getJSActions()]);if(w||x){if(_===h._pdfDocument){try{h._scripting=h._createScripting()}catch(u){return console.error(`PDFScriptingManager.setDocument: "${null==u?void 0:u.message}".`),void(yield h._destroyScripting())}h._internalEvents.set("updatefromsandbox",u=>{(null==u?void 0:u.source)===window&&h._updateFromSandbox(u.detail)}),h._internalEvents.set("dispatcheventinsandbox",u=>{var g;null==(g=h._scripting)||g.dispatchEventInSandbox(u.detail)}),h._internalEvents.set("pagechanging",({pageNumber:u,previous:g})=>{u!==g&&(h._dispatchPageClose(g),h._dispatchPageOpen(u))}),h._internalEvents.set("pagerendered",({pageNumber:u})=>{!h._pageOpenPending.has(u)||u===h._pdfViewer.currentPageNumber&&h._dispatchPageOpen(u)}),h._internalEvents.set("pagesdestroy",function(){var u=p(function*(g){var R,I;yield h._dispatchPageClose(h._pdfViewer.currentPageNumber),yield null==(R=h._scripting)?void 0:R.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null==(I=h._closeCapability)||I.resolve()});return function(g){return u.apply(this,arguments)}}()),h._domEvents.set("mousedown",u=>{h._mouseState.isDown=!0}),h._domEvents.set("mouseup",u=>{h._mouseState.isDown=!1});for(const[u,g]of h._internalEvents)h._eventBus._on(u,g);for(const[u,g]of h._domEvents)window.addEventListener(u,g,!0);try{const u=yield h._getDocProperties();if(_!==h._pdfDocument)return;yield h._scripting.createSandbox({objects:w,calculationOrder:U,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:Wp(zp({},u),{actions:x})}),h._eventBus.dispatch("sandboxcreated",{source:h})}catch(u){return console.error(`PDFScriptingManager.setDocument: "${null==u?void 0:u.message}".`),void(yield h._destroyScripting())}yield null==(P=h._scripting)?void 0:P.dispatchEventInSandbox({id:"doc",name:"Open"}),yield h._dispatchPageOpen(h._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{_===h._pdfDocument&&(h._ready=!0)})}}else yield h._destroyScripting()})()}dispatchWillSave(_){var h=this;return p(function*(){var w;return null==(w=h._scripting)?void 0:w.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(_){var h=this;return p(function*(){var w;return null==(w=h._scripting)?void 0:w.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(_){var h=this;return p(function*(){var w;return null==(w=h._scripting)?void 0:w.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(_){var h=this;return p(function*(){var w;return null==(w=h._scripting)?void 0:w.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var _;return(null==(_=this._destroyCapability)?void 0:_.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,N.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,N.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,N.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,N.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(_){var h=this;return p(function*(){var R;const w=h._pdfViewer.isInPresentationMode||h._pdfViewer.isChangingPresentationMode,{id:U,siblings:x,command:P,value:u}=_;if(!U){switch(P){case"clear":console.clear();break;case"error":console.error(u);break;case"layout":if(w)return;const I=(0,M.apiPageLayoutToViewerModes)(u);h._pdfViewer.spreadMode=I.spreadMode;break;case"page-num":h._pdfViewer.currentPageNumber=u+1;break;case"print":yield h._pdfViewer.pagesPromise,h._eventBus.dispatch("print",{source:h});break;case"println":console.log(u);break;case"zoom":if(w)return;h._pdfViewer.currentScaleValue=u;break;case"SaveAs":h._eventBus.dispatch("save",{source:h});break;case"FirstPage":h._pdfViewer.currentPageNumber=1;break;case"LastPage":h._pdfViewer.currentPageNumber=h._pdfViewer.pagesCount;break;case"NextPage":h._pdfViewer.nextPage();break;case"PrevPage":h._pdfViewer.previousPage();break;case"ZoomViewIn":if(w)return;h._pdfViewer.increaseScale();break;case"ZoomViewOut":if(w)return;h._pdfViewer.decreaseScale()}return}if(w&&_.focus)return;delete _.id,delete _.siblings;const g=x?[U,...x]:[U];for(const I of g){const V=document.getElementById(I);V?V.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:_})):null==(R=h._pdfDocument)||R.annotationStorage.setValue(I,_)}})()}_dispatchPageOpen(_,h=!1){var w=this;return p(function*(){const U=w._pdfDocument,x=w._visitedPages;if(h&&(w._closeCapability=(0,N.createPromiseCapability)()),!w._closeCapability)return;const P=w._pdfViewer.getPageView(_-1);if((null==P?void 0:P.renderingState)!==M.RenderingStates.FINISHED)return void w._pageOpenPending.add(_);w._pageOpenPending.delete(_);const u=p(function*(){var R,I;const g=yield x.has(_)?null:null==(R=P.pdfPage)?void 0:R.getJSActions();U===w._pdfDocument&&(yield null==(I=w._scripting)?void 0:I.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:_,actions:g}))})();x.set(_,u)})()}_dispatchPageClose(_){var h=this;return p(function*(){var P;const w=h._pdfDocument,U=h._visitedPages;if(!h._closeCapability||h._pageOpenPending.has(_))return;const x=U.get(_);!x||(U.set(_,null),yield x,w===h._pdfDocument&&(yield null==(P=h._scripting)?void 0:P.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:_})))})()}_getDocProperties(){var _=this;return p(function*(){if(_._docPropertiesLookup)return _._docPropertiesLookup(_._pdfDocument);const{docPropertiesLookup:h}=G(24);return h(_._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,N.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:_}=G(24);return new _(this._sandboxBundleSrc)}_destroyScripting(){var _=this;return p(function*(){var h,w;if(!_._scripting)return _._pdfDocument=null,void(null==(h=_._destroyCapability)||h.resolve());_._closeCapability&&(yield Promise.race([_._closeCapability.promise,new Promise(U=>{setTimeout(U,1e3)})]).catch(U=>{}),_._closeCapability=null),_._pdfDocument=null;try{yield _._scripting.destroySandbox()}catch(U){}for(const[U,x]of _._internalEvents)_._eventBus._off(U,x);_._internalEvents.clear();for(const[U,x]of _._domEvents)window.removeEventListener(U,x,!0);_._domEvents.clear(),_._pageOpenPending.clear(),_._visitedPages.clear(),_._scripting=null,delete _._mouseState.isDown,_._ready=!1,null==(w=_._destroyCapability)||w.resolve()})()}}},(ee,y,G)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.GenericScripting=void 0,y.docPropertiesLookup=function N(_){return F.apply(this,arguments)};var M=G(3);function F(){return(F=p(function*(_){const w="".split("#")[0];let{info:U,metadata:x,contentDispositionFilename:P,contentLength:u}=yield _.getMetadata();if(!u){const{length:g}=yield _.getDownloadInfo();u=g}return Wp(zp({},U),{baseURL:w,filesize:u,filename:P||(0,M.getPdfFilenameFromUrl)(""),metadata:null==x?void 0:x.getRaw(),authors:null==x?void 0:x.get("dc:creator"),numPages:_.numPages,URL:""})})).apply(this,arguments)}y.GenericScripting=class b{constructor(h){this._ready=(0,M.loadScript)(h,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(h){var w=this;return p(function*(){(yield w._ready).create(h)})()}dispatchEventInSandbox(h){var w=this;return p(function*(){const U=yield w._ready;setTimeout(()=>U.dispatchEvent(h),0)})()}destroySandbox(){var h=this;return p(function*(){(yield h._ready).nukeSandbox()})()}}}],ae={};function le(ee){var y=ae[ee];if(void 0!==y)return y.exports;var G=ae[ee]={exports:{}};return ce[ee](G,G.exports,le),G.exports}var pe={};return(()=>{var ee=pe;Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return F.AnnotationLayerBuilder}}),Object.defineProperty(ee,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return y.DefaultAnnotationLayerFactory}}),Object.defineProperty(ee,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return y.DefaultStructTreeLayerFactory}}),Object.defineProperty(ee,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return y.DefaultTextLayerFactory}}),Object.defineProperty(ee,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return y.DefaultXfaLayerFactory}}),Object.defineProperty(ee,"DownloadManager",{enumerable:!0,get:function(){return b.DownloadManager}}),Object.defineProperty(ee,"EventBus",{enumerable:!0,get:function(){return _.EventBus}}),Object.defineProperty(ee,"GenericL10n",{enumerable:!0,get:function(){return h.GenericL10n}}),Object.defineProperty(ee,"LinkTarget",{enumerable:!0,get:function(){return G.LinkTarget}}),Object.defineProperty(ee,"NullL10n",{enumerable:!0,get:function(){return w.NullL10n}}),Object.defineProperty(ee,"PDFFindController",{enumerable:!0,get:function(){return U.PDFFindController}}),Object.defineProperty(ee,"PDFHistory",{enumerable:!0,get:function(){return x.PDFHistory}}),Object.defineProperty(ee,"PDFLinkService",{enumerable:!0,get:function(){return G.PDFLinkService}}),Object.defineProperty(ee,"PDFPageView",{enumerable:!0,get:function(){return P.PDFPageView}}),Object.defineProperty(ee,"PDFScriptingManager",{enumerable:!0,get:function(){return u.PDFScriptingManager}}),Object.defineProperty(ee,"PDFSinglePageViewer",{enumerable:!0,get:function(){return N.PDFSinglePageViewer}}),Object.defineProperty(ee,"PDFViewer",{enumerable:!0,get:function(){return N.PDFViewer}}),Object.defineProperty(ee,"ProgressBar",{enumerable:!0,get:function(){return M.ProgressBar}}),Object.defineProperty(ee,"SimpleLinkService",{enumerable:!0,get:function(){return G.SimpleLinkService}}),Object.defineProperty(ee,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return g.StructTreeLayerBuilder}}),Object.defineProperty(ee,"TextLayerBuilder",{enumerable:!0,get:function(){return R.TextLayerBuilder}}),Object.defineProperty(ee,"XfaLayerBuilder",{enumerable:!0,get:function(){return I.XfaLayerBuilder}}),Object.defineProperty(ee,"parseQueryString",{enumerable:!0,get:function(){return M.parseQueryString}});var y=le(1),G=le(5),M=le(6),N=le(10),F=le(2),b=le(16),_=le(17),h=le(18),w=le(4),U=le(20),x=le(22),P=le(12),u=le(23),g=le(7),R=le(8),I=le(9)})(),pe})(),We.exports=le()},463:We=>{"use strict";const O={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};O.localCName=O.generateIdentifier(),O.splitLines=function(X){return X.trim().split("\n").map(p=>p.trim())},O.splitSections=function(X){return X.split("\nm=").map((ce,ae)=>(ae>0?"m="+ce:ce).trim()+"\r\n")},O.getDescription=function(X){const p=O.splitSections(X);return p&&p[0]},O.getMediaSections=function(X){const p=O.splitSections(X);return p.shift(),p},O.matchPrefix=function(X,p){return O.splitLines(X).filter(ce=>0===ce.indexOf(p))},O.parseCandidate=function(X){let p;p=0===X.indexOf("a=candidate:")?X.substring(12).split(" "):X.substring(10).split(" ");const ce={foundation:p[0],component:{1:"rtp",2:"rtcp"}[p[1]]||p[1],protocol:p[2].toLowerCase(),priority:parseInt(p[3],10),ip:p[4],address:p[4],port:parseInt(p[5],10),type:p[7]};for(let ae=8;ae<p.length;ae+=2)switch(p[ae]){case"raddr":ce.relatedAddress=p[ae+1];break;case"rport":ce.relatedPort=parseInt(p[ae+1],10);break;case"tcptype":ce.tcpType=p[ae+1];break;case"ufrag":ce.ufrag=p[ae+1],ce.usernameFragment=p[ae+1];break;default:void 0===ce[p[ae]]&&(ce[p[ae]]=p[ae+1])}return ce},O.writeCandidate=function(X){const p=[];p.push(X.foundation);const ce=X.component;p.push("rtp"===ce?1:"rtcp"===ce?2:ce),p.push(X.protocol.toUpperCase()),p.push(X.priority),p.push(X.address||X.ip),p.push(X.port);const ae=X.type;return p.push("typ"),p.push(ae),"host"!==ae&&X.relatedAddress&&X.relatedPort&&(p.push("raddr"),p.push(X.relatedAddress),p.push("rport"),p.push(X.relatedPort)),X.tcpType&&"tcp"===X.protocol.toLowerCase()&&(p.push("tcptype"),p.push(X.tcpType)),(X.usernameFragment||X.ufrag)&&(p.push("ufrag"),p.push(X.usernameFragment||X.ufrag)),"candidate:"+p.join(" ")},O.parseIceOptions=function(X){return X.substr(14).split(" ")},O.parseRtpMap=function(X){let p=X.substr(9).split(" ");const ce={payloadType:parseInt(p.shift(),10)};return p=p[0].split("/"),ce.name=p[0],ce.clockRate=parseInt(p[1],10),ce.channels=3===p.length?parseInt(p[2],10):1,ce.numChannels=ce.channels,ce},O.writeRtpMap=function(X){let p=X.payloadType;void 0!==X.preferredPayloadType&&(p=X.preferredPayloadType);const ce=X.channels||X.numChannels||1;return"a=rtpmap:"+p+" "+X.name+"/"+X.clockRate+(1!==ce?"/"+ce:"")+"\r\n"},O.parseExtmap=function(X){const p=X.substr(9).split(" ");return{id:parseInt(p[0],10),direction:p[0].indexOf("/")>0?p[0].split("/")[1]:"sendrecv",uri:p[1]}},O.writeExtmap=function(X){return"a=extmap:"+(X.id||X.preferredId)+(X.direction&&"sendrecv"!==X.direction?"/"+X.direction:"")+" "+X.uri+"\r\n"},O.parseFmtp=function(X){const p={};let ce;const ae=X.substr(X.indexOf(" ")+1).split(";");for(let le=0;le<ae.length;le++)ce=ae[le].trim().split("="),p[ce[0].trim()]=ce[1];return p},O.writeFmtp=function(X){let p="",ce=X.payloadType;if(void 0!==X.preferredPayloadType&&(ce=X.preferredPayloadType),X.parameters&&Object.keys(X.parameters).length){const ae=[];Object.keys(X.parameters).forEach(le=>{ae.push(void 0!==X.parameters[le]?le+"="+X.parameters[le]:le)}),p+="a=fmtp:"+ce+" "+ae.join(";")+"\r\n"}return p},O.parseRtcpFb=function(X){const p=X.substr(X.indexOf(" ")+1).split(" ");return{type:p.shift(),parameter:p.join(" ")}},O.writeRtcpFb=function(X){let p="",ce=X.payloadType;return void 0!==X.preferredPayloadType&&(ce=X.preferredPayloadType),X.rtcpFeedback&&X.rtcpFeedback.length&&X.rtcpFeedback.forEach(ae=>{p+="a=rtcp-fb:"+ce+" "+ae.type+(ae.parameter&&ae.parameter.length?" "+ae.parameter:"")+"\r\n"}),p},O.parseSsrcMedia=function(X){const p=X.indexOf(" "),ce={ssrc:parseInt(X.substr(7,p-7),10)},ae=X.indexOf(":",p);return ae>-1?(ce.attribute=X.substr(p+1,ae-p-1),ce.value=X.substr(ae+1)):ce.attribute=X.substr(p+1),ce},O.parseSsrcGroup=function(X){const p=X.substr(13).split(" ");return{semantics:p.shift(),ssrcs:p.map(ce=>parseInt(ce,10))}},O.getMid=function(X){const p=O.matchPrefix(X,"a=mid:")[0];if(p)return p.substr(6)},O.parseFingerprint=function(X){const p=X.substr(14).split(" ");return{algorithm:p[0].toLowerCase(),value:p[1].toUpperCase()}},O.getDtlsParameters=function(X,p){return{role:"auto",fingerprints:O.matchPrefix(X+p,"a=fingerprint:").map(O.parseFingerprint)}},O.writeDtlsParameters=function(X,p){let ce="a=setup:"+p+"\r\n";return X.fingerprints.forEach(ae=>{ce+="a=fingerprint:"+ae.algorithm+" "+ae.value+"\r\n"}),ce},O.parseCryptoLine=function(X){const p=X.substr(9).split(" ");return{tag:parseInt(p[0],10),cryptoSuite:p[1],keyParams:p[2],sessionParams:p.slice(3)}},O.writeCryptoLine=function(X){return"a=crypto:"+X.tag+" "+X.cryptoSuite+" "+("object"==typeof X.keyParams?O.writeCryptoKeyParams(X.keyParams):X.keyParams)+(X.sessionParams?" "+X.sessionParams.join(" "):"")+"\r\n"},O.parseCryptoKeyParams=function(X){if(0!==X.indexOf("inline:"))return null;const p=X.substr(7).split("|");return{keyMethod:"inline",keySalt:p[0],lifeTime:p[1],mkiValue:p[2]?p[2].split(":")[0]:void 0,mkiLength:p[2]?p[2].split(":")[1]:void 0}},O.writeCryptoKeyParams=function(X){return X.keyMethod+":"+X.keySalt+(X.lifeTime?"|"+X.lifeTime:"")+(X.mkiValue&&X.mkiLength?"|"+X.mkiValue+":"+X.mkiLength:"")},O.getCryptoParameters=function(X,p){return O.matchPrefix(X+p,"a=crypto:").map(O.parseCryptoLine)},O.getIceParameters=function(X,p){const ce=O.matchPrefix(X+p,"a=ice-ufrag:")[0],ae=O.matchPrefix(X+p,"a=ice-pwd:")[0];return ce&&ae?{usernameFragment:ce.substr(12),password:ae.substr(10)}:null},O.writeIceParameters=function(X){let p="a=ice-ufrag:"+X.usernameFragment+"\r\na=ice-pwd:"+X.password+"\r\n";return X.iceLite&&(p+="a=ice-lite\r\n"),p},O.parseRtpParameters=function(X){const p={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ae=O.splitLines(X)[0].split(" ");for(let le=3;le<ae.length;le++){const pe=ae[le],ee=O.matchPrefix(X,"a=rtpmap:"+pe+" ")[0];if(ee){const y=O.parseRtpMap(ee),G=O.matchPrefix(X,"a=fmtp:"+pe+" ");switch(y.parameters=G.length?O.parseFmtp(G[0]):{},y.rtcpFeedback=O.matchPrefix(X,"a=rtcp-fb:"+pe+" ").map(O.parseRtcpFb),p.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":p.fecMechanisms.push(y.name.toUpperCase())}}}return O.matchPrefix(X,"a=extmap:").forEach(le=>{p.headerExtensions.push(O.parseExtmap(le))}),p},O.writeRtpDescription=function(X,p){let ce="";ce+="m="+X+" ",ce+=p.codecs.length>0?"9":"0",ce+=" UDP/TLS/RTP/SAVPF ",ce+=p.codecs.map(le=>void 0!==le.preferredPayloadType?le.preferredPayloadType:le.payloadType).join(" ")+"\r\n",ce+="c=IN IP4 0.0.0.0\r\n",ce+="a=rtcp:9 IN IP4 0.0.0.0\r\n",p.codecs.forEach(le=>{ce+=O.writeRtpMap(le),ce+=O.writeFmtp(le),ce+=O.writeRtcpFb(le)});let ae=0;return p.codecs.forEach(le=>{le.maxptime>ae&&(ae=le.maxptime)}),ae>0&&(ce+="a=maxptime:"+ae+"\r\n"),p.headerExtensions&&p.headerExtensions.forEach(le=>{ce+=O.writeExtmap(le)}),ce},O.parseRtpEncodingParameters=function(X){const p=[],ce=O.parseRtpParameters(X),ae=-1!==ce.fecMechanisms.indexOf("RED"),le=-1!==ce.fecMechanisms.indexOf("ULPFEC"),pe=O.matchPrefix(X,"a=ssrc:").map(N=>O.parseSsrcMedia(N)).filter(N=>"cname"===N.attribute),ee=pe.length>0&&pe[0].ssrc;let y;const G=O.matchPrefix(X,"a=ssrc-group:FID").map(N=>N.substr(17).split(" ").map(b=>parseInt(b,10)));G.length>0&&G[0].length>1&&G[0][0]===ee&&(y=G[0][1]),ce.codecs.forEach(N=>{if("RTX"===N.name.toUpperCase()&&N.parameters.apt){let F={ssrc:ee,codecPayloadType:parseInt(N.parameters.apt,10)};ee&&y&&(F.rtx={ssrc:y}),p.push(F),ae&&(F=JSON.parse(JSON.stringify(F)),F.fec={ssrc:ee,mechanism:le?"red+ulpfec":"red"},p.push(F))}}),0===p.length&&ee&&p.push({ssrc:ee});let M=O.matchPrefix(X,"b=");return M.length&&(M=0===M[0].indexOf("b=TIAS:")?parseInt(M[0].substr(7),10):0===M[0].indexOf("b=AS:")?1e3*parseInt(M[0].substr(5),10)*.95-16e3:void 0,p.forEach(N=>{N.maxBitrate=M})),p},O.parseRtcpParameters=function(X){const p={},ce=O.matchPrefix(X,"a=ssrc:").map(pe=>O.parseSsrcMedia(pe)).filter(pe=>"cname"===pe.attribute)[0];ce&&(p.cname=ce.value,p.ssrc=ce.ssrc);const ae=O.matchPrefix(X,"a=rtcp-rsize");p.reducedSize=ae.length>0,p.compound=0===ae.length;const le=O.matchPrefix(X,"a=rtcp-mux");return p.mux=le.length>0,p},O.writeRtcpParameters=function(X){let p="";return X.reducedSize&&(p+="a=rtcp-rsize\r\n"),X.mux&&(p+="a=rtcp-mux\r\n"),void 0!==X.ssrc&&X.cname&&(p+="a=ssrc:"+X.ssrc+" cname:"+X.cname+"\r\n"),p},O.parseMsid=function(X){let p;const ce=O.matchPrefix(X,"a=msid:");if(1===ce.length)return p=ce[0].substr(7).split(" "),{stream:p[0],track:p[1]};const ae=O.matchPrefix(X,"a=ssrc:").map(le=>O.parseSsrcMedia(le)).filter(le=>"msid"===le.attribute);return ae.length>0?(p=ae[0].value.split(" "),{stream:p[0],track:p[1]}):void 0},O.parseSctpDescription=function(X){const p=O.parseMLine(X),ce=O.matchPrefix(X,"a=max-message-size:");let ae;ce.length>0&&(ae=parseInt(ce[0].substr(19),10)),isNaN(ae)&&(ae=65536);const le=O.matchPrefix(X,"a=sctp-port:");if(le.length>0)return{port:parseInt(le[0].substr(12),10),protocol:p.fmt,maxMessageSize:ae};const pe=O.matchPrefix(X,"a=sctpmap:");if(pe.length>0){const ee=pe[0].substr(10).split(" ");return{port:parseInt(ee[0],10),protocol:ee[1],maxMessageSize:ae}}},O.writeSctpDescription=function(X,p){let ce=[];return ce="DTLS/SCTP"!==X.protocol?["m="+X.kind+" 9 "+X.protocol+" "+p.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+p.port+"\r\n"]:["m="+X.kind+" 9 "+X.protocol+" "+p.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+p.port+" "+p.protocol+" 65535\r\n"],void 0!==p.maxMessageSize&&ce.push("a=max-message-size:"+p.maxMessageSize+"\r\n"),ce.join("")},O.generateSessionId=function(){return Math.random().toString().substr(2,21)},O.writeSessionBoilerplate=function(X,p,ce){let ae;const le=void 0!==p?p:2;return ae=X||O.generateSessionId(),"v=0\r\no="+(ce||"thisisadapterortc")+" "+ae+" "+le+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},O.getDirection=function(X,p){const ce=O.splitLines(X);for(let ae=0;ae<ce.length;ae++)switch(ce[ae]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return ce[ae].substr(2)}return p?O.getDirection(p):"sendrecv"},O.getKind=function(X){return O.splitLines(X)[0].split(" ")[0].substr(2)},O.isRejected=function(X){return"0"===X.split(" ",2)[1]},O.parseMLine=function(X){const ce=O.splitLines(X)[0].substr(2).split(" ");return{kind:ce[0],port:parseInt(ce[1],10),protocol:ce[2],fmt:ce.slice(3).join(" ")}},O.parseOLine=function(X){const ce=O.matchPrefix(X,"o=")[0].substr(2).split(" ");return{username:ce[0],sessionId:ce[1],sessionVersion:parseInt(ce[2],10),netType:ce[3],addressType:ce[4],address:ce[5]}},O.isValidSDP=function(X){if("string"!=typeof X||0===X.length)return!1;const p=O.splitLines(X);for(let ce=0;ce<p.length;ce++)if(p[ce].length<2||"="!==p[ce].charAt(1))return!1;return!0},We.exports=O},97:(We,O,X)=>{"use strict";X.r(O),X.d(O,{default:()=>it});var p={};X.r(p),X.d(p,{fixNegotiationNeeded:()=>Ae,shimAddTrackRemoveTrack:()=>ue,shimAddTrackRemoveTrackWithNative:()=>re,shimGetDisplayMedia:()=>g,shimGetSendersWithDtmf:()=>V,shimGetStats:()=>Y,shimGetUserMedia:()=>u,shimMediaStream:()=>R,shimOnTrack:()=>I,shimPeerConnection:()=>ve,shimSenderReceiverGetStats:()=>ne});var ce={};X.r(ce),X.d(ce,{shimAddTransceiver:()=>E,shimCreateAnswer:()=>D,shimCreateOffer:()=>S,shimGetDisplayMedia:()=>de,shimGetParameters:()=>d,shimGetUserMedia:()=>Ie,shimOnTrack:()=>Me,shimPeerConnection:()=>xe,shimRTCDataChannel:()=>v,shimReceiverGetStats:()=>$e,shimRemoveStream:()=>Q,shimSenderGetStats:()=>Le});var ae={};X.r(ae),X.d(ae,{shimAudioContext:()=>ke,shimCallbacksAPI:()=>W,shimConstraints:()=>Ce,shimCreateOfferLegacy:()=>Pe,shimGetUserMedia:()=>fe,shimLocalStreamsAPI:()=>k,shimRTCIceServerUrls:()=>_e,shimRemoteStreamsAPI:()=>H,shimTrackEventTransceiver:()=>we});var le={};X.r(le),X.d(le,{removeExtmapAllowMixed:()=>ie,shimAddIceCandidateNullOrEmpty:()=>Te,shimConnectionState:()=>$,shimMaxMessageSize:()=>He,shimParameterlessSetLocalDescription:()=>Ke,shimRTCIceCandidate:()=>Oe,shimSendThrowTypeError:()=>je});let pe=!0,ee=!0;function y(T,he,Re){const se=T.match(he);return se&&se.length>=Re&&parseInt(se[Re],10)}function G(T,he,Re){if(!T.RTCPeerConnection)return;const se=T.RTCPeerConnection.prototype,K=se.addEventListener;se.addEventListener=function(B,te){if(B!==he)return K.apply(this,arguments);const Se=me=>{const Ee=Re(me);Ee&&(te.handleEvent?te.handleEvent(Ee):te(Ee))};return this._eventMap=this._eventMap||{},this._eventMap[he]||(this._eventMap[he]=new Map),this._eventMap[he].set(te,Se),K.apply(this,[B,Se])};const L=se.removeEventListener;se.removeEventListener=function(B,te){if(B!==he||!this._eventMap||!this._eventMap[he])return L.apply(this,arguments);if(!this._eventMap[he].has(te))return L.apply(this,arguments);const Se=this._eventMap[he].get(te);return this._eventMap[he].delete(te),0===this._eventMap[he].size&&delete this._eventMap[he],0===Object.keys(this._eventMap).length&&delete this._eventMap,L.apply(this,[B,Se])},Object.defineProperty(se,"on"+he,{get(){return this["_on"+he]},set(B){this["_on"+he]&&(this.removeEventListener(he,this["_on"+he]),delete this["_on"+he]),B&&this.addEventListener(he,this["_on"+he]=B)},enumerable:!0,configurable:!0})}function M(T){return"boolean"!=typeof T?new Error("Argument type: "+typeof T+". Please use a boolean."):(pe=T,T?"adapter.js logging disabled":"adapter.js logging enabled")}function N(T){return"boolean"!=typeof T?new Error("Argument type: "+typeof T+". Please use a boolean."):(ee=!T,"adapter.js deprecation warnings "+(T?"disabled":"enabled"))}function F(){if("object"==typeof window){if(pe)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function b(T,he){!ee||console.warn(T+" is deprecated, please use "+he+" instead.")}function h(T){return"[object Object]"===Object.prototype.toString.call(T)}function w(T){return h(T)?Object.keys(T).reduce(function(he,Re){const se=h(T[Re]),K=se?w(T[Re]):T[Re],L=se&&!Object.keys(K).length;return void 0===K||L?he:Object.assign(he,{[Re]:K})},{}):T}function U(T,he,Re){!he||Re.has(he.id)||(Re.set(he.id,he),Object.keys(he).forEach(se=>{se.endsWith("Id")?U(T,T.get(he[se]),Re):se.endsWith("Ids")&&he[se].forEach(K=>{U(T,T.get(K),Re)})}))}function x(T,he,Re){const se=Re?"outbound-rtp":"inbound-rtp",K=new Map;if(null===he)return K;const L=[];return T.forEach(B=>{"track"===B.type&&B.trackIdentifier===he.id&&L.push(B)}),L.forEach(B=>{T.forEach(te=>{te.type===se&&te.trackId===B.id&&U(T,te,K)})}),K}const P=F;function u(T,he){const Re=T&&T.navigator;if(!Re.mediaDevices)return;const se=function(te){if("object"!=typeof te||te.mandatory||te.optional)return te;const Se={};return Object.keys(te).forEach(me=>{if("require"===me||"advanced"===me||"mediaSource"===me)return;const Ee="object"==typeof te[me]?te[me]:{ideal:te[me]};void 0!==Ee.exact&&"number"==typeof Ee.exact&&(Ee.min=Ee.max=Ee.exact);const Ye=function(et,Ct){return et?et+Ct.charAt(0).toUpperCase()+Ct.slice(1):"deviceId"===Ct?"sourceId":Ct};if(void 0!==Ee.ideal){Se.optional=Se.optional||[];let et={};"number"==typeof Ee.ideal?(et[Ye("min",me)]=Ee.ideal,Se.optional.push(et),et={},et[Ye("max",me)]=Ee.ideal,Se.optional.push(et)):(et[Ye("",me)]=Ee.ideal,Se.optional.push(et))}void 0!==Ee.exact&&"number"!=typeof Ee.exact?(Se.mandatory=Se.mandatory||{},Se.mandatory[Ye("",me)]=Ee.exact):["min","max"].forEach(et=>{void 0!==Ee[et]&&(Se.mandatory=Se.mandatory||{},Se.mandatory[Ye(et,me)]=Ee[et])})}),te.advanced&&(Se.optional=(Se.optional||[]).concat(te.advanced)),Se},K=function(te,Se){if(he.version>=61)return Se(te);if((te=JSON.parse(JSON.stringify(te)))&&"object"==typeof te.audio){const me=function(Ee,Ye,et){Ye in Ee&&!(et in Ee)&&(Ee[et]=Ee[Ye],delete Ee[Ye])};me((te=JSON.parse(JSON.stringify(te))).audio,"autoGainControl","googAutoGainControl"),me(te.audio,"noiseSuppression","googNoiseSuppression"),te.audio=se(te.audio)}if(te&&"object"==typeof te.video){let me=te.video.facingMode;me=me&&("object"==typeof me?me:{ideal:me});const Ee=he.version<66;if(me&&("user"===me.exact||"environment"===me.exact||"user"===me.ideal||"environment"===me.ideal)&&(!Re.mediaDevices.getSupportedConstraints||!Re.mediaDevices.getSupportedConstraints().facingMode||Ee)){let Ye;if(delete te.video.facingMode,"environment"===me.exact||"environment"===me.ideal?Ye=["back","rear"]:("user"===me.exact||"user"===me.ideal)&&(Ye=["front"]),Ye)return Re.mediaDevices.enumerateDevices().then(et=>{let Ct=(et=et.filter(St=>"videoinput"===St.kind)).find(St=>Ye.some($t=>St.label.toLowerCase().includes($t)));return!Ct&&et.length&&Ye.includes("back")&&(Ct=et[et.length-1]),Ct&&(te.video.deviceId=me.exact?{exact:Ct.deviceId}:{ideal:Ct.deviceId}),te.video=se(te.video),P("chrome: "+JSON.stringify(te)),Se(te)})}te.video=se(te.video)}return P("chrome: "+JSON.stringify(te)),Se(te)},L=function(te){return he.version>=64?te:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[te.name]||te.name,message:te.message,constraint:te.constraint||te.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(Re.getUserMedia=function(te,Se,me){K(te,Ee=>{Re.webkitGetUserMedia(Ee,Se,Ye=>{me&&me(L(Ye))})})}.bind(Re),Re.mediaDevices.getUserMedia){const te=Re.mediaDevices.getUserMedia.bind(Re.mediaDevices);Re.mediaDevices.getUserMedia=function(Se){return K(Se,me=>te(me).then(Ee=>{if(me.audio&&!Ee.getAudioTracks().length||me.video&&!Ee.getVideoTracks().length)throw Ee.getTracks().forEach(Ye=>{Ye.stop()}),new DOMException("","NotFoundError");return Ee},Ee=>Promise.reject(L(Ee))))}}}function g(T,he){if((!T.navigator.mediaDevices||!("getDisplayMedia"in T.navigator.mediaDevices))&&T.navigator.mediaDevices){if("function"!=typeof he)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");T.navigator.mediaDevices.getDisplayMedia=function(se){return he(se).then(K=>{const L=se.video&&se.video.width,B=se.video&&se.video.height;return se.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:K,maxFrameRate:se.video&&se.video.frameRate||3}},L&&(se.video.mandatory.maxWidth=L),B&&(se.video.mandatory.maxHeight=B),T.navigator.mediaDevices.getUserMedia(se)})}}}function R(T){T.MediaStream=T.MediaStream||T.webkitMediaStream}function I(T){if("object"==typeof T&&T.RTCPeerConnection&&!("ontrack"in T.RTCPeerConnection.prototype)){Object.defineProperty(T.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(Re){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=Re)},enumerable:!0,configurable:!0});const he=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=se=>{se.stream.addEventListener("addtrack",K=>{let L;L=T.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(te=>te.track&&te.track.id===K.track.id):{track:K.track};const B=new Event("track");B.track=K.track,B.receiver=L,B.transceiver={receiver:L},B.streams=[se.stream],this.dispatchEvent(B)}),se.stream.getTracks().forEach(K=>{let L;L=T.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(te=>te.track&&te.track.id===K.id):{track:K};const B=new Event("track");B.track=K,B.receiver=L,B.transceiver={receiver:L},B.streams=[se.stream],this.dispatchEvent(B)})},this.addEventListener("addstream",this._ontrackpoly)),he.apply(this,arguments)}}else G(T,"track",he=>(he.transceiver||Object.defineProperty(he,"transceiver",{value:{receiver:he.receiver}}),he))}function V(T){if("object"==typeof T&&T.RTCPeerConnection&&!("getSenders"in T.RTCPeerConnection.prototype)&&"createDTMFSender"in T.RTCPeerConnection.prototype){const he=function(K,L){return{track:L,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===L.kind?K.createDTMFSender(L):null),this._dtmf},_pc:K}};if(!T.RTCPeerConnection.prototype.getSenders){T.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const K=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addTrack=function(te,Se){let me=K.apply(this,arguments);return me||(me=he(this,te),this._senders.push(me)),me};const L=T.RTCPeerConnection.prototype.removeTrack;T.RTCPeerConnection.prototype.removeTrack=function(te){L.apply(this,arguments);const Se=this._senders.indexOf(te);-1!==Se&&this._senders.splice(Se,1)}}const Re=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(L){this._senders=this._senders||[],Re.apply(this,[L]),L.getTracks().forEach(B=>{this._senders.push(he(this,B))})};const se=T.RTCPeerConnection.prototype.removeStream;T.RTCPeerConnection.prototype.removeStream=function(L){this._senders=this._senders||[],se.apply(this,[L]),L.getTracks().forEach(B=>{const te=this._senders.find(Se=>Se.track===B);te&&this._senders.splice(this._senders.indexOf(te),1)})}}else if("object"==typeof T&&T.RTCPeerConnection&&"getSenders"in T.RTCPeerConnection.prototype&&"createDTMFSender"in T.RTCPeerConnection.prototype&&T.RTCRtpSender&&!("dtmf"in T.RTCRtpSender.prototype)){const he=T.RTCPeerConnection.prototype.getSenders;T.RTCPeerConnection.prototype.getSenders=function(){const se=he.apply(this,[]);return se.forEach(K=>K._pc=this),se},Object.defineProperty(T.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function Y(T){if(!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){const[se,K,L]=arguments;if(arguments.length>0&&"function"==typeof se)return he.apply(this,arguments);if(0===he.length&&(0===arguments.length||"function"!=typeof se))return he.apply(this,[]);const B=function(Se){const me={};return Se.result().forEach(Ye=>{const et={id:Ye.id,timestamp:Ye.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[Ye.type]||Ye.type};Ye.names().forEach(Ct=>{et[Ct]=Ye.stat(Ct)}),me[et.id]=et}),me},te=function(Se){return new Map(Object.keys(Se).map(me=>[me,Se[me]]))};return arguments.length>=2?he.apply(this,[function(me){K(te(B(me)))},se]):new Promise((Se,me)=>{he.apply(this,[function(Ee){Se(te(B(Ee)))},me])}).then(K,L)}}function ne(T){if(!("object"==typeof T&&T.RTCPeerConnection&&T.RTCRtpSender&&T.RTCRtpReceiver))return;if(!("getStats"in T.RTCRtpSender.prototype)){const Re=T.RTCPeerConnection.prototype.getSenders;Re&&(T.RTCPeerConnection.prototype.getSenders=function(){const L=Re.apply(this,[]);return L.forEach(B=>B._pc=this),L});const se=T.RTCPeerConnection.prototype.addTrack;se&&(T.RTCPeerConnection.prototype.addTrack=function(){const L=se.apply(this,arguments);return L._pc=this,L}),T.RTCRtpSender.prototype.getStats=function(){const L=this;return this._pc.getStats().then(B=>x(B,L.track,!0))}}if(!("getStats"in T.RTCRtpReceiver.prototype)){const Re=T.RTCPeerConnection.prototype.getReceivers;Re&&(T.RTCPeerConnection.prototype.getReceivers=function(){const K=Re.apply(this,[]);return K.forEach(L=>L._pc=this),K}),G(T,"track",se=>(se.receiver._pc=se.srcElement,se)),T.RTCRtpReceiver.prototype.getStats=function(){const K=this;return this._pc.getStats().then(L=>x(L,K.track,!1))}}if(!("getStats"in T.RTCRtpSender.prototype)||!("getStats"in T.RTCRtpReceiver.prototype))return;const he=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof T.MediaStreamTrack){const se=arguments[0];let K,L,B;return this.getSenders().forEach(te=>{te.track===se&&(K?B=!0:K=te)}),this.getReceivers().forEach(te=>(te.track===se&&(L?B=!0:L=te),te.track===se)),B||K&&L?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):K?K.getStats():L?L.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return he.apply(this,arguments)}}function re(T){T.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(B=>this._shimmedLocalStreams[B][0])};const he=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addTrack=function(B,te){if(!te)return he.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const Se=he.apply(this,arguments);return this._shimmedLocalStreams[te.id]?-1===this._shimmedLocalStreams[te.id].indexOf(Se)&&this._shimmedLocalStreams[te.id].push(Se):this._shimmedLocalStreams[te.id]=[te,Se],Se};const Re=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(B){this._shimmedLocalStreams=this._shimmedLocalStreams||{},B.getTracks().forEach(me=>{if(this.getSenders().find(Ye=>Ye.track===me))throw new DOMException("Track already exists.","InvalidAccessError")});const te=this.getSenders();Re.apply(this,arguments);const Se=this.getSenders().filter(me=>-1===te.indexOf(me));this._shimmedLocalStreams[B.id]=[B].concat(Se)};const se=T.RTCPeerConnection.prototype.removeStream;T.RTCPeerConnection.prototype.removeStream=function(B){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[B.id],se.apply(this,arguments)};const K=T.RTCPeerConnection.prototype.removeTrack;T.RTCPeerConnection.prototype.removeTrack=function(B){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},B&&Object.keys(this._shimmedLocalStreams).forEach(te=>{const Se=this._shimmedLocalStreams[te].indexOf(B);-1!==Se&&this._shimmedLocalStreams[te].splice(Se,1),1===this._shimmedLocalStreams[te].length&&delete this._shimmedLocalStreams[te]}),K.apply(this,arguments)}}function ue(T,he){if(!T.RTCPeerConnection)return;if(T.RTCPeerConnection.prototype.addTrack&&he.version>=65)return re(T);const Re=T.RTCPeerConnection.prototype.getLocalStreams;T.RTCPeerConnection.prototype.getLocalStreams=function(){const Ee=Re.apply(this);return this._reverseStreams=this._reverseStreams||{},Ee.map(Ye=>this._reverseStreams[Ye.id])};const se=T.RTCPeerConnection.prototype.addStream;T.RTCPeerConnection.prototype.addStream=function(Ee){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Ee.getTracks().forEach(Ye=>{if(this.getSenders().find(Ct=>Ct.track===Ye))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[Ee.id]){const Ye=new T.MediaStream(Ee.getTracks());this._streams[Ee.id]=Ye,this._reverseStreams[Ye.id]=Ee,Ee=Ye}se.apply(this,[Ee])};const K=T.RTCPeerConnection.prototype.removeStream;function L(me,Ee){let Ye=Ee.sdp;return Object.keys(me._reverseStreams||[]).forEach(et=>{const Ct=me._reverseStreams[et];Ye=Ye.replace(new RegExp(me._streams[Ct.id].id,"g"),Ct.id)}),new RTCSessionDescription({type:Ee.type,sdp:Ye})}function B(me,Ee){let Ye=Ee.sdp;return Object.keys(me._reverseStreams||[]).forEach(et=>{const Ct=me._reverseStreams[et],St=me._streams[Ct.id];Ye=Ye.replace(new RegExp(Ct.id,"g"),St.id)}),new RTCSessionDescription({type:Ee.type,sdp:Ye})}T.RTCPeerConnection.prototype.removeStream=function(Ee){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},K.apply(this,[this._streams[Ee.id]||Ee]),delete this._reverseStreams[this._streams[Ee.id]?this._streams[Ee.id].id:Ee.id],delete this._streams[Ee.id]},T.RTCPeerConnection.prototype.addTrack=function(Ee,Ye){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const et=[].slice.call(arguments,1);if(1!==et.length||!et[0].getTracks().find($t=>$t===Ee))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find($t=>$t.track===Ee))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const St=this._streams[Ye.id];if(St)St.addTrack(Ee),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const $t=new T.MediaStream([Ee]);this._streams[Ye.id]=$t,this._reverseStreams[$t.id]=Ye,this.addStream($t)}return this.getSenders().find($t=>$t.track===Ee)},["createOffer","createAnswer"].forEach(function(me){const Ee=T.RTCPeerConnection.prototype[me],Ye={[me](){const et=arguments;return arguments.length&&"function"==typeof arguments[0]?Ee.apply(this,[St=>{const $t=L(this,St);et[0].apply(null,[$t])},St=>{et[1]&&et[1].apply(null,St)},arguments[2]]):Ee.apply(this,arguments).then(St=>L(this,St))}};T.RTCPeerConnection.prototype[me]=Ye[me]});const te=T.RTCPeerConnection.prototype.setLocalDescription;T.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=B(this,arguments[0]),te.apply(this,arguments)):te.apply(this,arguments)};const Se=Object.getOwnPropertyDescriptor(T.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(T.RTCPeerConnection.prototype,"localDescription",{get(){const me=Se.get.apply(this);return""===me.type?me:L(this,me)}}),T.RTCPeerConnection.prototype.removeTrack=function(Ee){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!Ee._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(Ee._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let et;this._streams=this._streams||{},Object.keys(this._streams).forEach(Ct=>{this._streams[Ct].getTracks().find($t=>Ee.track===$t)&&(et=this._streams[Ct])}),et&&(1===et.getTracks().length?this.removeStream(this._reverseStreams[et.id]):et.removeTrack(Ee.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ve(T,he){!T.RTCPeerConnection&&T.webkitRTCPeerConnection&&(T.RTCPeerConnection=T.webkitRTCPeerConnection),T.RTCPeerConnection&&he.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Re){const se=T.RTCPeerConnection.prototype[Re],K={[Re](){return arguments[0]=new("addIceCandidate"===Re?T.RTCIceCandidate:T.RTCSessionDescription)(arguments[0]),se.apply(this,arguments)}};T.RTCPeerConnection.prototype[Re]=K[Re]})}function Ae(T,he){G(T,"negotiationneeded",Re=>{const se=Re.target;if(!(he.version<72||se.getConfiguration&&"plan-b"===se.getConfiguration().sdpSemantics)||"stable"===se.signalingState)return Re})}function Ie(T,he){const Re=T&&T.navigator,se=T&&T.MediaStreamTrack;if(Re.getUserMedia=function(K,L,B){b("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),Re.mediaDevices.getUserMedia(K).then(L,B)},!(he.version>55&&"autoGainControl"in Re.mediaDevices.getSupportedConstraints())){const K=function(B,te,Se){te in B&&!(Se in B)&&(B[Se]=B[te],delete B[te])},L=Re.mediaDevices.getUserMedia.bind(Re.mediaDevices);if(Re.mediaDevices.getUserMedia=function(B){return"object"==typeof B&&"object"==typeof B.audio&&(B=JSON.parse(JSON.stringify(B)),K(B.audio,"autoGainControl","mozAutoGainControl"),K(B.audio,"noiseSuppression","mozNoiseSuppression")),L(B)},se&&se.prototype.getSettings){const B=se.prototype.getSettings;se.prototype.getSettings=function(){const te=B.apply(this,arguments);return K(te,"mozAutoGainControl","autoGainControl"),K(te,"mozNoiseSuppression","noiseSuppression"),te}}if(se&&se.prototype.applyConstraints){const B=se.prototype.applyConstraints;se.prototype.applyConstraints=function(te){return"audio"===this.kind&&"object"==typeof te&&(te=JSON.parse(JSON.stringify(te)),K(te,"autoGainControl","mozAutoGainControl"),K(te,"noiseSuppression","mozNoiseSuppression")),B.apply(this,[te])}}}}function de(T,he){T.navigator.mediaDevices&&"getDisplayMedia"in T.navigator.mediaDevices||!T.navigator.mediaDevices||(T.navigator.mediaDevices.getDisplayMedia=function(se){if(!se||!se.video){const K=new DOMException("getDisplayMedia without video constraints is undefined");return K.name="NotFoundError",K.code=8,Promise.reject(K)}return!0===se.video?se.video={mediaSource:he}:se.video.mediaSource=he,T.navigator.mediaDevices.getUserMedia(se)})}function Me(T){"object"==typeof T&&T.RTCTrackEvent&&"receiver"in T.RTCTrackEvent.prototype&&!("transceiver"in T.RTCTrackEvent.prototype)&&Object.defineProperty(T.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xe(T,he){if("object"!=typeof T||!T.RTCPeerConnection&&!T.mozRTCPeerConnection)return;!T.RTCPeerConnection&&T.mozRTCPeerConnection&&(T.RTCPeerConnection=T.mozRTCPeerConnection),he.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(K){const L=T.RTCPeerConnection.prototype[K],B={[K](){return arguments[0]=new("addIceCandidate"===K?T.RTCIceCandidate:T.RTCSessionDescription)(arguments[0]),L.apply(this,arguments)}};T.RTCPeerConnection.prototype[K]=B[K]});const Re={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},se=T.RTCPeerConnection.prototype.getStats;T.RTCPeerConnection.prototype.getStats=function(){const[L,B,te]=arguments;return se.apply(this,[L||null]).then(Se=>{if(he.version<53&&!B)try{Se.forEach(me=>{me.type=Re[me.type]||me.type})}catch(me){if("TypeError"!==me.name)throw me;Se.forEach((Ee,Ye)=>{Se.set(Ye,Object.assign({},Ee,{type:Re[Ee.type]||Ee.type}))})}return Se}).then(B,te)}}function Le(T){if("object"!=typeof T||!T.RTCPeerConnection||!T.RTCRtpSender||T.RTCRtpSender&&"getStats"in T.RTCRtpSender.prototype)return;const he=T.RTCPeerConnection.prototype.getSenders;he&&(T.RTCPeerConnection.prototype.getSenders=function(){const K=he.apply(this,[]);return K.forEach(L=>L._pc=this),K});const Re=T.RTCPeerConnection.prototype.addTrack;Re&&(T.RTCPeerConnection.prototype.addTrack=function(){const K=Re.apply(this,arguments);return K._pc=this,K}),T.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function $e(T){if("object"!=typeof T||!T.RTCPeerConnection||!T.RTCRtpSender||T.RTCRtpSender&&"getStats"in T.RTCRtpReceiver.prototype)return;const he=T.RTCPeerConnection.prototype.getReceivers;he&&(T.RTCPeerConnection.prototype.getReceivers=function(){const se=he.apply(this,[]);return se.forEach(K=>K._pc=this),se}),G(T,"track",Re=>(Re.receiver._pc=Re.srcElement,Re)),T.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Q(T){!T.RTCPeerConnection||"removeStream"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.removeStream=function(Re){b("removeStream","removeTrack"),this.getSenders().forEach(se=>{se.track&&Re.getTracks().includes(se.track)&&this.removeTrack(se)})})}function v(T){T.DataChannel&&!T.RTCDataChannel&&(T.RTCDataChannel=T.DataChannel)}function E(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.addTransceiver;he&&(T.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const se=arguments[1],K=se&&"sendEncodings"in se;K&&se.sendEncodings.forEach(B=>{if("rid"in B&&!/^[a-z0-9]{0,16}$/i.test(B.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in B&&!(parseFloat(B.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in B&&!(parseFloat(B.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const L=he.apply(this,arguments);if(K){const{sender:B}=L,te=B.getParameters();(!("encodings"in te)||1===te.encodings.length&&0===Object.keys(te.encodings[0]).length)&&(te.encodings=se.sendEncodings,B.sendEncodings=se.sendEncodings,this.setParametersPromises.push(B.setParameters(te).then(()=>{delete B.sendEncodings}).catch(()=>{delete B.sendEncodings})))}return L})}function d(T){if("object"!=typeof T||!T.RTCRtpSender)return;const he=T.RTCRtpSender.prototype.getParameters;he&&(T.RTCRtpSender.prototype.getParameters=function(){const se=he.apply(this,arguments);return"encodings"in se||(se.encodings=[].concat(this.sendEncodings||[{}])),se})}function S(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.createOffer;T.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>he.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):he.apply(this,arguments)}}function D(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype.createAnswer;T.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>he.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):he.apply(this,arguments)}}function k(T){if("object"==typeof T&&T.RTCPeerConnection){if("getLocalStreams"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in T.RTCPeerConnection.prototype)){const he=T.RTCPeerConnection.prototype.addTrack;T.RTCPeerConnection.prototype.addStream=function(se){this._localStreams||(this._localStreams=[]),this._localStreams.includes(se)||this._localStreams.push(se),se.getAudioTracks().forEach(K=>he.call(this,K,se)),se.getVideoTracks().forEach(K=>he.call(this,K,se))},T.RTCPeerConnection.prototype.addTrack=function(se,...K){return K&&K.forEach(L=>{this._localStreams?this._localStreams.includes(L)||this._localStreams.push(L):this._localStreams=[L]}),he.apply(this,arguments)}}"removeStream"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.removeStream=function(Re){this._localStreams||(this._localStreams=[]);const se=this._localStreams.indexOf(Re);if(-1===se)return;this._localStreams.splice(se,1);const K=Re.getTracks();this.getSenders().forEach(L=>{K.includes(L.track)&&this.removeTrack(L)})})}}function H(T){if("object"==typeof T&&T.RTCPeerConnection&&("getRemoteStreams"in T.RTCPeerConnection.prototype||(T.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in T.RTCPeerConnection.prototype))){Object.defineProperty(T.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(Re){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=Re),this.addEventListener("track",this._onaddstreampoly=se=>{se.streams.forEach(K=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(K))return;this._remoteStreams.push(K);const L=new Event("addstream");L.stream=K,this.dispatchEvent(L)})})}});const he=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){const se=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(K){K.streams.forEach(L=>{if(se._remoteStreams||(se._remoteStreams=[]),se._remoteStreams.indexOf(L)>=0)return;se._remoteStreams.push(L);const B=new Event("addstream");B.stream=L,se.dispatchEvent(B)})}),he.apply(se,arguments)}}}function W(T){if("object"!=typeof T||!T.RTCPeerConnection)return;const he=T.RTCPeerConnection.prototype,Re=he.createOffer,se=he.createAnswer,K=he.setLocalDescription,L=he.setRemoteDescription,B=he.addIceCandidate;he.createOffer=function(me,Ee){const Ye=arguments.length>=2?arguments[2]:arguments[0],et=Re.apply(this,[Ye]);return Ee?(et.then(me,Ee),Promise.resolve()):et},he.createAnswer=function(me,Ee){const Ye=arguments.length>=2?arguments[2]:arguments[0],et=se.apply(this,[Ye]);return Ee?(et.then(me,Ee),Promise.resolve()):et};let te=function(Se,me,Ee){const Ye=K.apply(this,[Se]);return Ee?(Ye.then(me,Ee),Promise.resolve()):Ye};he.setLocalDescription=te,te=function(Se,me,Ee){const Ye=L.apply(this,[Se]);return Ee?(Ye.then(me,Ee),Promise.resolve()):Ye},he.setRemoteDescription=te,te=function(Se,me,Ee){const Ye=B.apply(this,[Se]);return Ee?(Ye.then(me,Ee),Promise.resolve()):Ye},he.addIceCandidate=te}function fe(T){const he=T&&T.navigator;if(he.mediaDevices&&he.mediaDevices.getUserMedia){const Re=he.mediaDevices,se=Re.getUserMedia.bind(Re);he.mediaDevices.getUserMedia=K=>se(Ce(K))}!he.getUserMedia&&he.mediaDevices&&he.mediaDevices.getUserMedia&&(he.getUserMedia=function(se,K,L){he.mediaDevices.getUserMedia(se).then(K,L)}.bind(he))}function Ce(T){return T&&void 0!==T.video?Object.assign({},T,{video:w(T.video)}):T}function _e(T){if(!T.RTCPeerConnection)return;const he=T.RTCPeerConnection;T.RTCPeerConnection=function(se,K){if(se&&se.iceServers){const L=[];for(let B=0;B<se.iceServers.length;B++){let te=se.iceServers[B];!te.hasOwnProperty("urls")&&te.hasOwnProperty("url")?(b("RTCIceServer.url","RTCIceServer.urls"),te=JSON.parse(JSON.stringify(te)),te.urls=te.url,delete te.url,L.push(te)):L.push(se.iceServers[B])}se.iceServers=L}return new he(se,K)},T.RTCPeerConnection.prototype=he.prototype,"generateCertificate"in he&&Object.defineProperty(T.RTCPeerConnection,"generateCertificate",{get:()=>he.generateCertificate})}function we(T){"object"==typeof T&&T.RTCTrackEvent&&"receiver"in T.RTCTrackEvent.prototype&&!("transceiver"in T.RTCTrackEvent.prototype)&&Object.defineProperty(T.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pe(T){const he=T.RTCPeerConnection.prototype.createOffer;T.RTCPeerConnection.prototype.createOffer=function(se){if(se){void 0!==se.offerToReceiveAudio&&(se.offerToReceiveAudio=!!se.offerToReceiveAudio);const K=this.getTransceivers().find(B=>"audio"===B.receiver.track.kind);!1===se.offerToReceiveAudio&&K?"sendrecv"===K.direction?K.setDirection?K.setDirection("sendonly"):K.direction="sendonly":"recvonly"===K.direction&&(K.setDirection?K.setDirection("inactive"):K.direction="inactive"):!0===se.offerToReceiveAudio&&!K&&this.addTransceiver("audio",{direction:"recvonly"}),void 0!==se.offerToReceiveVideo&&(se.offerToReceiveVideo=!!se.offerToReceiveVideo);const L=this.getTransceivers().find(B=>"video"===B.receiver.track.kind);!1===se.offerToReceiveVideo&&L?"sendrecv"===L.direction?L.setDirection?L.setDirection("sendonly"):L.direction="sendonly":"recvonly"===L.direction&&(L.setDirection?L.setDirection("inactive"):L.direction="inactive"):!0===se.offerToReceiveVideo&&!L&&this.addTransceiver("video",{direction:"recvonly"})}return he.apply(this,arguments)}}function ke(T){"object"!=typeof T||T.AudioContext||(T.AudioContext=T.webkitAudioContext)}var ze=X(463),tt=X.n(ze);function Oe(T){if(!T.RTCIceCandidate||T.RTCIceCandidate&&"foundation"in T.RTCIceCandidate.prototype)return;const he=T.RTCIceCandidate;T.RTCIceCandidate=function(se){if("object"==typeof se&&se.candidate&&0===se.candidate.indexOf("a=")&&((se=JSON.parse(JSON.stringify(se))).candidate=se.candidate.substr(2)),se.candidate&&se.candidate.length){const K=new he(se),L=tt().parseCandidate(se.candidate),B=Object.assign(K,L);return B.toJSON=function(){return{candidate:B.candidate,sdpMid:B.sdpMid,sdpMLineIndex:B.sdpMLineIndex,usernameFragment:B.usernameFragment}},B}return new he(se)},T.RTCIceCandidate.prototype=he.prototype,G(T,"icecandidate",Re=>(Re.candidate&&Object.defineProperty(Re,"candidate",{value:new T.RTCIceCandidate(Re.candidate),writable:"false"}),Re))}function He(T,he){if(!T.RTCPeerConnection)return;"sctp"in T.RTCPeerConnection.prototype||Object.defineProperty(T.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const Re=function(te){if(!te||!te.sdp)return!1;const Se=tt().splitSections(te.sdp);return Se.shift(),Se.some(me=>{const Ee=tt().parseMLine(me);return Ee&&"application"===Ee.kind&&-1!==Ee.protocol.indexOf("SCTP")})},se=function(te){const Se=te.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===Se||Se.length<2)return-1;const me=parseInt(Se[1],10);return me!=me?-1:me},K=function(te){let Se=65536;return"firefox"===he.browser&&(Se=he.version<57?-1===te?16384:2147483637:he.version<60?57===he.version?65535:65536:2147483637),Se},L=function(te,Se){let me=65536;"firefox"===he.browser&&57===he.version&&(me=65535);const Ee=tt().matchPrefix(te.sdp,"a=max-message-size:");return Ee.length>0?me=parseInt(Ee[0].substr(19),10):"firefox"===he.browser&&-1!==Se&&(me=2147483637),me},B=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===he.browser&&he.version>=76){const{sdpSemantics:Se}=this.getConfiguration();"plan-b"===Se&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(Re(arguments[0])){const Se=se(arguments[0]),me=K(Se),Ee=L(arguments[0],Se);let Ye;Ye=0===me&&0===Ee?Number.POSITIVE_INFINITY:0===me||0===Ee?Math.max(me,Ee):Math.min(me,Ee);const et={};Object.defineProperty(et,"maxMessageSize",{get:()=>Ye}),this._sctp=et}return B.apply(this,arguments)}}function je(T){if(!T.RTCPeerConnection||!("createDataChannel"in T.RTCPeerConnection.prototype))return;function he(se,K){const L=se.send;se.send=function(){const te=arguments[0],Se=te.length||te.size||te.byteLength;if("open"===se.readyState&&K.sctp&&Se>K.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+K.sctp.maxMessageSize+" bytes)");return L.apply(se,arguments)}}const Re=T.RTCPeerConnection.prototype.createDataChannel;T.RTCPeerConnection.prototype.createDataChannel=function(){const K=Re.apply(this,arguments);return he(K,this),K},G(T,"datachannel",se=>(he(se.channel,se.target),se))}function $(T){if(!T.RTCPeerConnection||"connectionState"in T.RTCPeerConnection.prototype)return;const he=T.RTCPeerConnection.prototype;Object.defineProperty(he,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(he,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(Re){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),Re&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=Re)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(Re=>{const se=he[Re];he[Re]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=K=>{const L=K.target;if(L._lastConnectionState!==L.connectionState){L._lastConnectionState=L.connectionState;const B=new Event("connectionstatechange",K);L.dispatchEvent(B)}return K},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),se.apply(this,arguments)}})}function ie(T,he){if(!T.RTCPeerConnection||"chrome"===he.browser&&he.version>=71||"safari"===he.browser&&he.version>=605)return;const Re=T.RTCPeerConnection.prototype.setRemoteDescription;T.RTCPeerConnection.prototype.setRemoteDescription=function(K){if(K&&K.sdp&&-1!==K.sdp.indexOf("\na=extmap-allow-mixed")){const L=K.sdp.split("\n").filter(B=>"a=extmap-allow-mixed"!==B.trim()).join("\n");T.RTCSessionDescription&&K instanceof T.RTCSessionDescription?arguments[0]=new T.RTCSessionDescription({type:K.type,sdp:L}):K.sdp=L}return Re.apply(this,arguments)}}function Te(T,he){if(!T.RTCPeerConnection||!T.RTCPeerConnection.prototype)return;const Re=T.RTCPeerConnection.prototype.addIceCandidate;!Re||0===Re.length||(T.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===he.browser&&he.version<78||"firefox"===he.browser&&he.version<68||"safari"===he.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():Re.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ke(T,he){if(!T.RTCPeerConnection||!T.RTCPeerConnection.prototype)return;const Re=T.RTCPeerConnection.prototype.setLocalDescription;!Re||0===Re.length||(T.RTCPeerConnection.prototype.setLocalDescription=function(){let K=arguments[0]||{};if("object"!=typeof K||K.type&&K.sdp)return Re.apply(this,arguments);if(K={type:K.type,sdp:K.sdp},!K.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":K.type="offer";break;default:K.type="answer"}return K.sdp||"offer"!==K.type&&"answer"!==K.type?Re.apply(this,[K]):("offer"===K.type?this.createOffer:this.createAnswer).apply(this).then(B=>Re.apply(this,[B]))})}const it=function qe({window:T}={},he={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const Re=F,se=function _(T){const he={browser:null,version:null};if(void 0===T||!T.navigator)return he.browser="Not a browser.",he;const{navigator:Re}=T;if(Re.mozGetUserMedia)he.browser="firefox",he.version=y(Re.userAgent,/Firefox\/(\d+)\./,1);else if(Re.webkitGetUserMedia||!1===T.isSecureContext&&T.webkitRTCPeerConnection&&!T.RTCIceGatherer)he.browser="chrome",he.version=y(Re.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!T.RTCPeerConnection||!Re.userAgent.match(/AppleWebKit\/(\d+)\./))return he.browser="Not a supported browser.",he;he.browser="safari",he.version=y(Re.userAgent,/AppleWebKit\/(\d+)\./,1),he.supportsUnifiedPlan=T.RTCRtpTransceiver&&"currentDirection"in T.RTCRtpTransceiver.prototype}return he}(T),K={browserDetails:se,commonShim:le,extractVersion:y,disableLog:M,disableWarnings:N,sdp:ze};switch(se.browser){case"chrome":if(!p||!ve||!he.shimChrome)return Re("Chrome shim is not included in this adapter release."),K;if(null===se.version)return Re("Chrome shim can not determine version, not shimming."),K;Re("adapter.js shimming chrome."),K.browserShim=p,Te(T,se),Ke(T),u(T,se),R(T),ve(T,se),I(T),ue(T,se),V(T),Y(T),ne(T),Ae(T,se),Oe(T),$(T),He(T,se),je(T),ie(T,se);break;case"firefox":if(!ce||!xe||!he.shimFirefox)return Re("Firefox shim is not included in this adapter release."),K;Re("adapter.js shimming firefox."),K.browserShim=ce,Te(T,se),Ke(T),Ie(T,se),xe(T,se),Me(T),Q(T),Le(T),$e(T),v(T),E(T),d(T),S(T),D(T),Oe(T),$(T),He(T,se),je(T);break;case"safari":if(!ae||!he.shimSafari)return Re("Safari shim is not included in this adapter release."),K;Re("adapter.js shimming safari."),K.browserShim=ae,Te(T,se),Ke(T),_e(T),Pe(T),W(T),k(T),H(T),we(T),fe(T),ke(T),Oe(T),He(T,se),je(T),ie(T,se);break;default:Re("Unsupported browser!")}return K}({window:"undefined"==typeof window?void 0:window})},69:We=>{function O(){}We.exports=O,O.mixin=function(X){var p=X.prototype||X;p.isWildEmitter=!0,p.on=function(ce,ae,le){this.callbacks=this.callbacks||{};var pe=3===arguments.length,ee=pe?arguments[1]:void 0,y=pe?arguments[2]:arguments[1];return y._groupName=ee,(this.callbacks[ce]=this.callbacks[ce]||[]).push(y),this},p.once=function(ce,ae,le){var pe=this,ee=3===arguments.length,y=ee?arguments[1]:void 0,G=ee?arguments[2]:arguments[1];function M(){pe.off(ce,M),G.apply(this,arguments)}return this.on(ce,y,M),this},p.releaseGroup=function(ce){var ae,le,pe,ee;for(ae in this.callbacks=this.callbacks||{},this.callbacks)for(le=0,pe=(ee=this.callbacks[ae]).length;le<pe;le++)ee[le]._groupName===ce&&(ee.splice(le,1),le--,pe--);return this},p.off=function(ce,ae){this.callbacks=this.callbacks||{};var pe,le=this.callbacks[ce];return le?1===arguments.length?(delete this.callbacks[ce],this):(-1!==(pe=le.indexOf(ae))&&(le.splice(pe,1),0===le.length&&delete this.callbacks[ce]),this):this},p.emit=function(ce){this.callbacks=this.callbacks||{};var ee,y,M,ae=[].slice.call(arguments,1),le=this.callbacks[ce],pe=this.getWildcardCallbacks(ce);if(le)for(ee=0,y=(M=le.slice()).length;ee<y&&M[ee];++ee)M[ee].apply(this,ae);if(pe)for(y=pe.length,ee=0,y=(M=pe.slice()).length;ee<y&&M[ee];++ee)M[ee].apply(this,[ce].concat(ae));return this},p.getWildcardCallbacks=function(ce){this.callbacks=this.callbacks||{};var ae,le,pe=[];for(ae in this.callbacks)le=ae.split("*"),("*"===ae||2===le.length&&ce.slice(0,le[0].length)===le[0])&&(pe=pe.concat(this.callbacks[ae]));return pe}},O.mixin(O)},926:We=>{function O(p,ce,ae,le,pe,ee,y){try{var G=p[ee](y),M=G.value}catch(N){return void ae(N)}G.done?ce(M):Promise.resolve(M).then(le,pe)}We.exports=function X(p){return function(){var ce=this,ae=arguments;return new Promise(function(le,pe){var ee=p.apply(ce,ae);function y(M){O(ee,le,pe,y,G,"next",M)}function G(M){O(ee,le,pe,y,G,"throw",M)}y(void 0)})}},We.exports.__esModule=!0,We.exports.default=We.exports},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},We=>{We(We.s=739)}]);
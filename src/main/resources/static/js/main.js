(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["lect"] = factory();
	else
		root["lect"] = factory();
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var _typeof = (__webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/typeof.js")["default"]);

function _regeneratorRuntime() {
  "use strict";
  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */

  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {
    return exports;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports;
  var exports = {},
      Op = Object.prototype,
      hasOwn = Op.hasOwnProperty,
      $Symbol = "function" == typeof Symbol ? Symbol : {},
      iteratorSymbol = $Symbol.iterator || "@@iterator",
      asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator",
      toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    return Object.defineProperty(obj, key, {
      value: value,
      enumerable: !0,
      configurable: !0,
      writable: !0
    }), obj[key];
  }

  try {
    define({}, "");
  } catch (err) {
    define = function define(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,
        generator = Object.create(protoGenerator.prototype),
        context = new Context(tryLocsList || []);
    return generator._invoke = function (innerFn, self, context) {
      var state = "suspendedStart";
      return function (method, arg) {
        if ("executing" === state) throw new Error("Generator is already running");

        if ("completed" === state) {
          if ("throw" === method) throw arg;
          return doneResult();
        }

        for (context.method = method, context.arg = arg;;) {
          var delegate = context.delegate;

          if (delegate) {
            var delegateResult = maybeInvokeDelegate(delegate, context);

            if (delegateResult) {
              if (delegateResult === ContinueSentinel) continue;
              return delegateResult;
            }
          }

          if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) {
            if ("suspendedStart" === state) throw state = "completed", context.arg;
            context.dispatchException(context.arg);
          } else "return" === context.method && context.abrupt("return", context.arg);
          state = "executing";
          var record = tryCatch(innerFn, self, context);

          if ("normal" === record.type) {
            if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue;
            return {
              value: record.arg,
              done: context.done
            };
          }

          "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg);
        }
      };
    }(innerFn, self, context), generator;
  }

  function tryCatch(fn, obj, arg) {
    try {
      return {
        type: "normal",
        arg: fn.call(obj, arg)
      };
    } catch (err) {
      return {
        type: "throw",
        arg: err
      };
    }
  }

  exports.wrap = wrap;
  var ContinueSentinel = {};

  function Generator() {}

  function GeneratorFunction() {}

  function GeneratorFunctionPrototype() {}

  var IteratorPrototype = {};
  define(IteratorPrototype, iteratorSymbol, function () {
    return this;
  });
  var getProto = Object.getPrototypeOf,
      NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);
  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);

  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function (method) {
      define(prototype, method, function (arg) {
        return this._invoke(method, arg);
      });
    });
  }

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);

      if ("throw" !== record.type) {
        var result = record.arg,
            value = result.value;
        return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) {
          invoke("next", value, resolve, reject);
        }, function (err) {
          invoke("throw", err, resolve, reject);
        }) : PromiseImpl.resolve(value).then(function (unwrapped) {
          result.value = unwrapped, resolve(result);
        }, function (error) {
          return invoke("throw", error, resolve, reject);
        });
      }

      reject(record.arg);
    }

    var previousPromise;

    this._invoke = function (method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function (resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
    };
  }

  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];

    if (undefined === method) {
      if (context.delegate = null, "throw" === context.method) {
        if (delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method)) return ContinueSentinel;
        context.method = "throw", context.arg = new TypeError("The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);
    if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel;
    var info = record.arg;
    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel);
  }

  function pushTryEntry(locs) {
    var entry = {
      tryLoc: locs[0]
    };
    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal", delete record.arg, entry.completion = record;
  }

  function Context(tryLocsList) {
    this.tryEntries = [{
      tryLoc: "root"
    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);
  }

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) return iteratorMethod.call(iterable);
      if ("function" == typeof iterable.next) return iterable;

      if (!isNaN(iterable.length)) {
        var i = -1,
            next = function next() {
          for (; ++i < iterable.length;) {
            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;
          }

          return next.value = undefined, next.done = !0, next;
        };

        return next.next = next;
      }
    }

    return {
      next: doneResult
    };
  }

  function doneResult() {
    return {
      value: undefined,
      done: !0
    };
  }

  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, "constructor", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) {
    var ctor = "function" == typeof genFun && genFun.constructor;
    return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name));
  }, exports.mark = function (genFun) {
    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun;
  }, exports.awrap = function (arg) {
    return {
      __await: arg
    };
  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {
    return this;
  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    void 0 === PromiseImpl && (PromiseImpl = Promise);
    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);
    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {
      return result.done ? result.value : iter.next();
    });
  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () {
    return this;
  }), define(Gp, "toString", function () {
    return "[object Generator]";
  }), exports.keys = function (object) {
    var keys = [];

    for (var key in object) {
      keys.push(key);
    }

    return keys.reverse(), function next() {
      for (; keys.length;) {
        var key = keys.pop();
        if (key in object) return next.value = key, next.done = !1, next;
      }

      return next.done = !0, next;
    };
  }, exports.values = values, Context.prototype = {
    constructor: Context,
    reset: function reset(skipTempReset) {
      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {
        "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);
      }
    },
    stop: function stop() {
      this.done = !0;
      var rootRecord = this.tryEntries[0].completion;
      if ("throw" === rootRecord.type) throw rootRecord.arg;
      return this.rval;
    },
    dispatchException: function dispatchException(exception) {
      if (this.done) throw exception;
      var context = this;

      function handle(loc, caught) {
        return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i],
            record = entry.completion;
        if ("root" === entry.tryLoc) return handle("end");

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc"),
              hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);
            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);
          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);
          } else {
            if (!hasFinally) throw new Error("try statement without catch or finally");
            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);
          }
        }
      }
    },
    abrupt: function abrupt(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];

        if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);
      var record = finallyEntry ? finallyEntry.completion : {};
      return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);
    },
    complete: function complete(record, afterLoc) {
      if ("throw" === record.type) throw record.arg;
      return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;
    },
    finish: function finish(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;
      }
    },
    "catch": function _catch(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];

        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;

          if ("throw" === record.type) {
            var thrown = record.arg;
            resetTryEntry(entry);
          }

          return thrown;
        }
      }

      throw new Error("illegal catch attempt");
    },
    delegateYield: function delegateYield(iterable, resultName, nextLoc) {
      return this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      }, "next" === this.method && (this.arg = undefined), ContinueSentinel;
    }
  }, exports;
}

module.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/***/ ((module) => {

function _typeof(obj) {
  "@babel/helpers - typeof";

  return (module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports), _typeof(obj);
}

module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__(/*! ../helpers/regeneratorRuntime */ "./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();


/***/ }),

/***/ "./src/action/action-player.ts":
/*!*************************************!*\
  !*** ./src/action/action-player.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActionPlayer": () => (/* binding */ ActionPlayer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _utils_executable_base__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/executable-base */ "./src/utils/executable-base.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ActionPlayer = /*#__PURE__*/function (_ExecutableBase) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ActionPlayer, _ExecutableBase);

  var _super = _createSuper(ActionPlayer);

  function ActionPlayer(executor) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, ActionPlayer);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "executor", void 0);

    _this.executor = executor;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(ActionPlayer);
}(_utils_executable_base__WEBPACK_IMPORTED_MODULE_7__.ExecutableBase);



/***/ }),

/***/ "./src/action/action-type.ts":
/*!***********************************!*\
  !*** ./src/action/action-type.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActionType": () => (/* binding */ ActionType)
/* harmony export */ });
var ActionType;

(function (ActionType) {
  ActionType[ActionType["TOOL_BEGIN"] = 0] = "TOOL_BEGIN";
  ActionType[ActionType["TOOL_EXECUTE"] = 1] = "TOOL_EXECUTE";
  ActionType[ActionType["TOOL_END"] = 2] = "TOOL_END";
  ActionType[ActionType["PEN"] = 3] = "PEN";
  ActionType[ActionType["HIGHLIGHTER"] = 4] = "HIGHLIGHTER";
  ActionType[ActionType["POINTER"] = 5] = "POINTER";
  ActionType[ActionType["ARROW"] = 6] = "ARROW";
  ActionType[ActionType["LINE"] = 7] = "LINE";
  ActionType[ActionType["RECTANGLE"] = 8] = "RECTANGLE";
  ActionType[ActionType["ELLIPSE"] = 9] = "ELLIPSE";
  ActionType[ActionType["TEXT"] = 10] = "TEXT";
  ActionType[ActionType["TEXT_CHANGE"] = 11] = "TEXT_CHANGE";
  ActionType[ActionType["TEXT_FONT_CHANGE"] = 12] = "TEXT_FONT_CHANGE";
  ActionType[ActionType["TEXT_LOCATION_CHANGE"] = 13] = "TEXT_LOCATION_CHANGE";
  ActionType[ActionType["TEXT_REMOVE"] = 14] = "TEXT_REMOVE";
  ActionType[ActionType["TEXT_SELECTION"] = 15] = "TEXT_SELECTION";
  ActionType[ActionType["LATEX"] = 16] = "LATEX";
  ActionType[ActionType["LATEX_FONT_CHANGE"] = 17] = "LATEX_FONT_CHANGE";
  ActionType[ActionType["UNDO"] = 18] = "UNDO";
  ActionType[ActionType["REDO"] = 19] = "REDO";
  ActionType[ActionType["CLONE"] = 20] = "CLONE";
  ActionType[ActionType["SELECT"] = 21] = "SELECT";
  ActionType[ActionType["SELECT_GROUP"] = 22] = "SELECT_GROUP";
  ActionType[ActionType["RUBBER"] = 23] = "RUBBER";
  ActionType[ActionType["CLEAR_SHAPES"] = 24] = "CLEAR_SHAPES";
  ActionType[ActionType["PANNING"] = 25] = "PANNING";
  ActionType[ActionType["EXTEND_VIEW"] = 26] = "EXTEND_VIEW";
  ActionType[ActionType["ZOOM"] = 27] = "ZOOM";
  ActionType[ActionType["ZOOM_OUT"] = 28] = "ZOOM_OUT";
  ActionType[ActionType["NEXT_PAGE"] = 29] = "NEXT_PAGE";
  ActionType[ActionType["KEY"] = 30] = "KEY";
  ActionType[ActionType["STATIC"] = 31] = "STATIC";
  ActionType[ActionType["PAGE"] = 32] = "PAGE";
  ActionType[ActionType["RUBBER_EXT"] = 33] = "RUBBER_EXT";
  ActionType[ActionType["TEXT_SELECTION_EXT"] = 34] = "TEXT_SELECTION_EXT";
})(ActionType || (ActionType = {}));



/***/ }),

/***/ "./src/action/action.executor.ts":
/*!***************************************!*\
  !*** ./src/action/action.executor.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamActionExecutor": () => (/* binding */ StreamActionExecutor)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _tool_tool_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tool/tool-context */ "./src/tool/tool-context.ts");
/* harmony import */ var _geometry_pen_point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../geometry/pen-point */ "./src/geometry/pen-point.ts");
/* harmony import */ var _tool_atomic_tool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tool/atomic.tool */ "./src/tool/atomic.tool.ts");







var StreamActionExecutor = /*#__PURE__*/function () {
  function StreamActionExecutor(renderController) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StreamActionExecutor);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "renderController", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "toolContext", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "document", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "tool", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "previousTool", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pageNumber", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pageIndexObserver", void 0);

    this.renderController = renderController;
    this.toolContext = new _tool_tool_context__WEBPACK_IMPORTED_MODULE_3__.ToolContext(renderController);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StreamActionExecutor, [{
    key: "setOnSelectPageIndex",
    value: function setOnSelectPageIndex(observer) {
      this.pageIndexObserver = observer;
    }
  }, {
    key: "setKeyEvent",
    value: function setKeyEvent(keyEvent) {
      this.toolContext.keyEvent = keyEvent;
    }
  }, {
    key: "setSeek",
    value: function setSeek(seek) {
      this.renderController.setSeek(seek);
    }
  }, {
    key: "setDocument",
    value: function setDocument(document) {
      this.document = document;
    }
  }, {
    key: "setPageNumber",
    value: function setPageNumber(pageNumber) {
      var page = this.document.getPage(pageNumber);
      this.pageNumber = pageNumber;
      this.toolContext.page = page;
      this.renderController.setPage(page);

      if (this.pageIndexObserver) {
        this.pageIndexObserver(pageNumber);
      }
    }
  }, {
    key: "setTool",
    value: function setTool(tool) {
      if (!tool) {
        throw new Error("Tool must not be null");
      }

      if (!this.tool && this.tool === tool) {
        return;
      }

      this.setPreviousTool(this.tool);
      this.tool = tool;
    }
  }, {
    key: "selectAndExecuteTool",
    value: function selectAndExecuteTool(tool) {
      this.executeAtomicTool(tool);
    }
  }, {
    key: "beginTool",
    value: function beginTool(point) {
      this.tool.begin(point.clone(), this.toolContext);
    }
  }, {
    key: "executeTool",
    value: function executeTool(point) {
      this.tool.execute(point.clone());
    }
  }, {
    key: "endTool",
    value: function endTool(point) {
      this.tool.end(point.clone());
    }
  }, {
    key: "executeAtomicTool",
    value: function executeAtomicTool(tool) {
      var point = _geometry_pen_point__WEBPACK_IMPORTED_MODULE_4__.PenPoint.createZero();
      this.setTool(tool);
      this.beginTool(point);
      this.executeTool(point);
      this.endTool(point);
      this.setPreviousTool(this.previousTool);
    }
  }, {
    key: "setPreviousTool",
    value: function setPreviousTool(tool) {
      if (!tool) {
        return;
      }

      if (tool instanceof _tool_atomic_tool__WEBPACK_IMPORTED_MODULE_5__.AtomicTool) {
        // Do not remember atomic tools.
        return;
      }

      this.previousTool = tool;
    }
  }]);

  return StreamActionExecutor;
}();



/***/ }),

/***/ "./src/action/action.ts":
/*!******************************!*\
  !*** ./src/action/action.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Action": () => (/* binding */ Action)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var Action = /*#__PURE__*/(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(function Action() {
  (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, Action);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "keyEvent", void 0);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "timestamp", void 0);
});



/***/ }),

/***/ "./src/action/arrow.action.ts":
/*!************************************!*\
  !*** ./src/action/arrow.action.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArrowAction": () => (/* binding */ ArrowAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_arrow_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/arrow.tool */ "./src/tool/arrow.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ArrowAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ArrowAction, _BrushAction);

  var _super = _createSuper(ArrowAction);

  function ArrowAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ArrowAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ArrowAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_arrow_tool__WEBPACK_IMPORTED_MODULE_6__.ArrowTool();
      tool.shapeHandle = this.shapeHandle;
      tool.brush = this.brush;
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(tool);
    }
  }]);

  return ArrowAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/brush.action.ts":
/*!************************************!*\
  !*** ./src/action/brush.action.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BrushAction": () => (/* binding */ BrushAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var BrushAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(BrushAction, _Action);

  var _super = _createSuper(BrushAction);

  function BrushAction(shapeHandle, brush) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, BrushAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shapeHandle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "brush", void 0);

    _this.shapeHandle = shapeHandle;
    _this.brush = brush;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(BrushAction);
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/clear-shapes.action.ts":
/*!*******************************************!*\
  !*** ./src/action/clear-shapes.action.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ClearShapesAction": () => (/* binding */ ClearShapesAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_clear_shapes_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/clear-shapes.tool */ "./src/tool/clear-shapes.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ClearShapesAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ClearShapesAction, _Action);

  var _super = _createSuper(ClearShapesAction);

  function ClearShapesAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ClearShapesAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ClearShapesAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_clear_shapes_tool__WEBPACK_IMPORTED_MODULE_6__.ClearShapesTool());
    }
  }]);

  return ClearShapesAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/clone.action.ts":
/*!************************************!*\
  !*** ./src/action/clone.action.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CloneAction": () => (/* binding */ CloneAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_clone_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/clone.tool */ "./src/tool/clone.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var CloneAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(CloneAction, _Action);

  var _super = _createSuper(CloneAction);

  function CloneAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, CloneAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(CloneAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_clone_tool__WEBPACK_IMPORTED_MODULE_6__.CloneTool());
    }
  }]);

  return CloneAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/ellipse.action.ts":
/*!**************************************!*\
  !*** ./src/action/ellipse.action.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EllipseAction": () => (/* binding */ EllipseAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_ellipse_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/ellipse.tool */ "./src/tool/ellipse.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var EllipseAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(EllipseAction, _BrushAction);

  var _super = _createSuper(EllipseAction);

  function EllipseAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, EllipseAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(EllipseAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_ellipse_tool__WEBPACK_IMPORTED_MODULE_6__.EllipseTool();
      tool.shapeHandle = this.shapeHandle;
      tool.brush = this.brush;
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(tool);
    }
  }]);

  return EllipseAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/extend-view.action.ts":
/*!******************************************!*\
  !*** ./src/action/extend-view.action.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ExtendViewAction": () => (/* binding */ ExtendViewAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_extend_view_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/extend-view.tool */ "./src/tool/extend-view.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ExtendViewAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ExtendViewAction, _Action);

  var _super = _createSuper(ExtendViewAction);

  function ExtendViewAction(rect) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ExtendViewAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "rect", void 0);

    _this.rect = rect;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ExtendViewAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.selectAndExecuteTool(new _tool_extend_view_tool__WEBPACK_IMPORTED_MODULE_8__.ExtendViewTool(this.rect));
    }
  }]);

  return ExtendViewAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/highlighter.action.ts":
/*!******************************************!*\
  !*** ./src/action/highlighter.action.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HighlighterAction": () => (/* binding */ HighlighterAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_highlighter_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/highlighter.tool */ "./src/tool/highlighter.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var HighlighterAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(HighlighterAction, _BrushAction);

  var _super = _createSuper(HighlighterAction);

  function HighlighterAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, HighlighterAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(HighlighterAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_highlighter_tool__WEBPACK_IMPORTED_MODULE_6__.HighlighterTool();
      tool.shapeHandle = this.shapeHandle;
      tool.brush = this.brush;
      executor.setTool(tool);
    }
  }]);

  return HighlighterAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/key.action.ts":
/*!**********************************!*\
  !*** ./src/action/key.action.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KeyAction": () => (/* binding */ KeyAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var KeyAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(KeyAction, _Action);

  var _super = _createSuper(KeyAction);

  function KeyAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, KeyAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(KeyAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
    }
  }]);

  return KeyAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/latex-font.action.ts":
/*!*****************************************!*\
  !*** ./src/action/latex-font.action.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatexFontAction": () => (/* binding */ LatexFontAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_latex_font_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/latex-font.tool */ "./src/tool/latex-font.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var LatexFontAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LatexFontAction, _Action);

  var _super = _createSuper(LatexFontAction);

  function LatexFontAction(handle, font, textColor, textAttributes) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LatexFontAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "font", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textColor", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textAttributes", void 0);

    _this.handle = handle;
    _this.font = font;
    _this.textColor = textColor;
    _this.textAttributes = textAttributes;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LatexFontAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_latex_font_tool__WEBPACK_IMPORTED_MODULE_8__.LatexFontTool(this.handle, this.font, this.textColor, this.textAttributes));
    }
  }]);

  return LatexFontAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/latex.action.ts":
/*!************************************!*\
  !*** ./src/action/latex.action.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatexAction": () => (/* binding */ LatexAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_latex_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/latex.tool */ "./src/tool/latex.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var LatexAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LatexAction, _Action);

  var _super = _createSuper(LatexAction);

  function LatexAction(handle) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LatexAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    _this.handle = handle;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LatexAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_latex_tool__WEBPACK_IMPORTED_MODULE_8__.LatexTool(this.handle));
    }
  }]);

  return LatexAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/line.action.ts":
/*!***********************************!*\
  !*** ./src/action/line.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LineAction": () => (/* binding */ LineAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_line_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/line.tool */ "./src/tool/line.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var LineAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(LineAction, _BrushAction);

  var _super = _createSuper(LineAction);

  function LineAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LineAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LineAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_line_tool__WEBPACK_IMPORTED_MODULE_6__.LineTool();
      tool.shapeHandle = this.shapeHandle;
      tool.brush = this.brush;
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(tool);
    }
  }]);

  return LineAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/page.action.ts":
/*!***********************************!*\
  !*** ./src/action/page.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PageAction": () => (/* binding */ PageAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var PageAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(PageAction, _Action);

  var _super = _createSuper(PageAction);

  function PageAction(pageNumber) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PageAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "pageNumber", void 0);

    _this.pageNumber = pageNumber;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PageAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setPageNumber(this.pageNumber);
    }
  }]);

  return PageAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/pan.action.ts":
/*!**********************************!*\
  !*** ./src/action/pan.action.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PanAction": () => (/* binding */ PanAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_pan_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/pan.tool */ "./src/tool/pan.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var PanAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(PanAction, _Action);

  var _super = _createSuper(PanAction);

  function PanAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PanAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PanAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_pan_tool__WEBPACK_IMPORTED_MODULE_6__.PanTool());
    }
  }]);

  return PanAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/parser/action.parser.ts":
/*!********************************************!*\
  !*** ./src/action/parser/action.parser.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActionParser": () => (/* binding */ ActionParser)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../action-type */ "./src/action/action-type.ts");
/* harmony import */ var _geometry_pen_point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../geometry/pen-point */ "./src/geometry/pen-point.ts");
/* harmony import */ var _pen_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pen.action */ "./src/action/pen.action.ts");
/* harmony import */ var _paint_brush__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../paint/brush */ "./src/paint/brush.ts");
/* harmony import */ var _paint_color__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../paint/color */ "./src/paint/color.ts");
/* harmony import */ var _highlighter_action__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../highlighter.action */ "./src/action/highlighter.action.ts");
/* harmony import */ var _pointer_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../pointer.action */ "./src/action/pointer.action.ts");
/* harmony import */ var _arrow_action__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../arrow.action */ "./src/action/arrow.action.ts");
/* harmony import */ var _line_action__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../line.action */ "./src/action/line.action.ts");
/* harmony import */ var _rectangle_action__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../rectangle.action */ "./src/action/rectangle.action.ts");
/* harmony import */ var _ellipse_action__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../ellipse.action */ "./src/action/ellipse.action.ts");
/* harmony import */ var _tool_begin_action__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../tool-begin.action */ "./src/action/tool-begin.action.ts");
/* harmony import */ var _tool_execute_action__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tool-execute.action */ "./src/action/tool-execute.action.ts");
/* harmony import */ var _tool_end_action__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../tool-end.action */ "./src/action/tool-end.action.ts");
/* harmony import */ var _undo_action__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../undo.action */ "./src/action/undo.action.ts");
/* harmony import */ var _redo_action__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../redo.action */ "./src/action/redo.action.ts");
/* harmony import */ var _clear_shapes_action__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../clear-shapes.action */ "./src/action/clear-shapes.action.ts");
/* harmony import */ var _key_action__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../key.action */ "./src/action/key.action.ts");
/* harmony import */ var _clone_action__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../clone.action */ "./src/action/clone.action.ts");
/* harmony import */ var _select_action__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../select.action */ "./src/action/select.action.ts");
/* harmony import */ var _select_group_action__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../select-group.action */ "./src/action/select-group.action.ts");
/* harmony import */ var _pan_action__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../pan.action */ "./src/action/pan.action.ts");
/* harmony import */ var _extend_view_action__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../extend-view.action */ "./src/action/extend-view.action.ts");
/* harmony import */ var _geometry_rectangle__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../geometry/rectangle */ "./src/geometry/rectangle.ts");
/* harmony import */ var _zoom_action__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../zoom.action */ "./src/action/zoom.action.ts");
/* harmony import */ var _zoom_out_action__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../zoom-out.action */ "./src/action/zoom-out.action.ts");
/* harmony import */ var _rubber_action__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../rubber.action */ "./src/action/rubber.action.ts");
/* harmony import */ var _text_action__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../text.action */ "./src/action/text.action.ts");
/* harmony import */ var _text_font_action__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../text-font.action */ "./src/action/text-font.action.ts");
/* harmony import */ var _text_change_action__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../text-change.action */ "./src/action/text-change.action.ts");
/* harmony import */ var _text_move_action__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../text-move.action */ "./src/action/text-move.action.ts");
/* harmony import */ var _geometry_point__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../geometry/point */ "./src/geometry/point.ts");
/* harmony import */ var _text_remove_action__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../text-remove.action */ "./src/action/text-remove.action.ts");
/* harmony import */ var _paint_font__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../paint/font */ "./src/paint/font.ts");
/* harmony import */ var _text_highlight_action__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../text-highlight.action */ "./src/action/text-highlight.action.ts");
/* harmony import */ var _latex_action__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../latex.action */ "./src/action/latex.action.ts");
/* harmony import */ var _latex_font_action__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../latex-font.action */ "./src/action/latex-font.action.ts");









































var ActionParser = /*#__PURE__*/function () {
  function ActionParser() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ActionParser);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ActionParser, null, [{
    key: "parse",
    value: function parse(dataView, type, length) {
      var action = null;
      var keyEvent = this.parseActionHeader(dataView);
      length -= 13; // Action header has a length of 13 bytes.

      switch (type) {
        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.CLEAR_SHAPES:
          action = this.atomicAction(dataView, _clear_shapes_action__WEBPACK_IMPORTED_MODULE_19__.ClearShapesAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.UNDO:
          action = this.atomicAction(dataView, _undo_action__WEBPACK_IMPORTED_MODULE_17__.UndoAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.REDO:
          action = this.atomicAction(dataView, _redo_action__WEBPACK_IMPORTED_MODULE_18__.RedoAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.KEY:
          action = this.atomicAction(dataView, _key_action__WEBPACK_IMPORTED_MODULE_20__.KeyAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.PEN:
          action = this.toolBrushAction(dataView, _pen_action__WEBPACK_IMPORTED_MODULE_5__.PenAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.HIGHLIGHTER:
          action = this.toolBrushAction(dataView, _highlighter_action__WEBPACK_IMPORTED_MODULE_8__.HighlighterAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.POINTER:
          action = this.toolBrushAction(dataView, _pointer_action__WEBPACK_IMPORTED_MODULE_9__.PointerAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.ARROW:
          action = this.toolBrushAction(dataView, _arrow_action__WEBPACK_IMPORTED_MODULE_10__.ArrowAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.LINE:
          action = this.toolBrushAction(dataView, _line_action__WEBPACK_IMPORTED_MODULE_11__.LineAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.RECTANGLE:
          action = this.toolBrushAction(dataView, _rectangle_action__WEBPACK_IMPORTED_MODULE_12__.RectangleAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.ELLIPSE:
          action = this.toolBrushAction(dataView, _ellipse_action__WEBPACK_IMPORTED_MODULE_13__.EllipseAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.CLONE:
          action = this.atomicAction(dataView, _clone_action__WEBPACK_IMPORTED_MODULE_21__.CloneAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.SELECT:
          action = this.atomicAction(dataView, _select_action__WEBPACK_IMPORTED_MODULE_22__.SelectAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.SELECT_GROUP:
          action = this.atomicAction(dataView, _select_group_action__WEBPACK_IMPORTED_MODULE_23__.SelectGroupAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.LATEX:
          action = this.textAction(dataView, _latex_action__WEBPACK_IMPORTED_MODULE_38__.LatexAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.LATEX_FONT_CHANGE:
          action = this.latexFontAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TEXT:
          action = this.textAction(dataView, _text_action__WEBPACK_IMPORTED_MODULE_30__.TextAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TEXT_CHANGE:
          action = this.textChangeAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TEXT_FONT_CHANGE:
          action = this.textFontAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TEXT_LOCATION_CHANGE:
          action = this.textMoveAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TEXT_REMOVE:
          action = this.textRemoveAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TEXT_SELECTION_EXT:
          action = this.textHighlightAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TOOL_BEGIN:
          action = this.toolDragAction(dataView, _tool_begin_action__WEBPACK_IMPORTED_MODULE_14__.ToolBeginAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TOOL_EXECUTE:
          action = this.toolDragAction(dataView, _tool_execute_action__WEBPACK_IMPORTED_MODULE_15__.ToolExecuteAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.TOOL_END:
          action = this.toolDragAction(dataView, _tool_end_action__WEBPACK_IMPORTED_MODULE_16__.ToolEndAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.PANNING:
          action = this.atomicAction(dataView, _pan_action__WEBPACK_IMPORTED_MODULE_24__.PanAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.EXTEND_VIEW:
          action = this.extendViewAction(dataView);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.ZOOM:
          if (length < 1) {
            action = this.atomicAction(dataView, _zoom_action__WEBPACK_IMPORTED_MODULE_27__.ZoomAction);
          } else {
            action = this.toolBrushAction(dataView, _zoom_action__WEBPACK_IMPORTED_MODULE_27__.ZoomAction);
          }

          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.ZOOM_OUT:
          action = this.atomicAction(dataView, _zoom_out_action__WEBPACK_IMPORTED_MODULE_28__.ZoomOutAction);
          break;

        case _action_type__WEBPACK_IMPORTED_MODULE_3__.ActionType.RUBBER_EXT:
          action = this.rubberAction(dataView);
          break;
      }

      if (action) {
        action.keyEvent = keyEvent;
      }

      return action;
    }
  }, {
    key: "parseActionHeader",
    value: function parseActionHeader(dataView) {
      var header = dataView.getInt32();
      var keyEvent = null;

      if ((header & this.KEY_EVENT_MASK) == this.KEY_EVENT_MASK) {
        keyEvent = this.parseKeyEvent(dataView);
      }

      return keyEvent;
    }
  }, {
    key: "parseKeyEvent",
    value: function parseKeyEvent(dataView) {
      var keyCode = dataView.getInt32();
      var modifiers = dataView.getInt32();
      var actionType = dataView.getInt8();
      var typeArg;

      switch (actionType) {
        case 0:
          typeArg = "keydown";
          break;

        case 1:
          typeArg = "keyup";
          break;

        case 2:
          typeArg = "keypress";
          break;

        default:
          throw new Error("Unknown key event type");
      }
      /** The Shift key modifier constant. */


      var SHIFT_MASK = 1 << 1;
      /** The Control key modifier constant. */

      var CTRL_MASK = 1 << 2;
      /** The Alt key modifier constant. */

      var ALT_MASK = 1 << 3;
      return new KeyboardEvent(typeArg, {
        //code: keyCode,
        shiftKey: (modifiers & SHIFT_MASK) != 0,
        ctrlKey: (modifiers & CTRL_MASK) != 0,
        altKey: (modifiers & ALT_MASK) != 0
      });
    }
  }, {
    key: "atomicAction",
    value: function atomicAction(dataView, type) {
      return new type();
    }
  }, {
    key: "toolBrushAction",
    value: function toolBrushAction(dataView, type) {
      var shapeHandle = dataView.getInt32();
      var rgba = dataView.getInt32();
      var lineCap = dataView.getInt8();
      var brushWidth = dataView.getFloat64();
      var color = _paint_color__WEBPACK_IMPORTED_MODULE_7__.Color.fromRGBNumber(rgba);
      var brush = new _paint_brush__WEBPACK_IMPORTED_MODULE_6__.Brush(color, brushWidth);
      var action = new type(shapeHandle, brush);
      return action;
    }
  }, {
    key: "rubberAction",
    value: function rubberAction(dataView) {
      var shapeHandle = dataView.getInt32();
      return new _rubber_action__WEBPACK_IMPORTED_MODULE_29__.RubberAction(shapeHandle);
    }
  }, {
    key: "toolDragAction",
    value: function toolDragAction(dataView, type) {
      var point = new _geometry_pen_point__WEBPACK_IMPORTED_MODULE_4__.PenPoint(dataView.getFloat32(), dataView.getFloat32(), dataView.getFloat32());
      var action = new type(point);
      return action;
    }
  }, {
    key: "extendViewAction",
    value: function extendViewAction(dataView) {
      var x = dataView.getFloat64();
      var y = dataView.getFloat64();
      var w = dataView.getFloat64();
      var h = dataView.getFloat64();
      return new _extend_view_action__WEBPACK_IMPORTED_MODULE_25__.ExtendViewAction(new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_26__.Rectangle(x, y, w, h));
    }
  }, {
    key: "textAction",
    value: function textAction(dataView, type) {
      var handle = dataView.getInt32();
      var action = new type(handle);
      return action;
    }
  }, {
    key: "textChangeAction",
    value: function textChangeAction(dataView) {
      var handle = dataView.getInt32();
      var textLength = dataView.getInt32();
      var text = dataView.getString(textLength);
      return new _text_change_action__WEBPACK_IMPORTED_MODULE_32__.TextChangeAction(handle, text);
    }
  }, {
    key: "textMoveAction",
    value: function textMoveAction(dataView) {
      var handle = dataView.getInt32();
      var point = new _geometry_point__WEBPACK_IMPORTED_MODULE_34__.Point(dataView.getFloat64(), dataView.getFloat64());
      return new _text_move_action__WEBPACK_IMPORTED_MODULE_33__.TextMoveAction(handle, point);
    }
  }, {
    key: "textRemoveAction",
    value: function textRemoveAction(dataView) {
      var handle = dataView.getInt32();
      return new _text_remove_action__WEBPACK_IMPORTED_MODULE_35__.TextRemoveAction(handle);
    }
  }, {
    key: "textHighlightAction",
    value: function textHighlightAction(dataView) {
      var handle = dataView.getInt32();
      var rgba = dataView.getInt32();
      var count = dataView.getInt32();
      var color = _paint_color__WEBPACK_IMPORTED_MODULE_7__.Color.fromRGBNumber(rgba);
      var textBounds = new Array();

      for (var i = 0; i < count; i++) {
        var x = dataView.getFloat64();
        var y = dataView.getFloat64();
        var w = dataView.getFloat64();
        var h = dataView.getFloat64();
        textBounds.push(new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_26__.Rectangle(x, y, w, h));
      }

      return new _text_highlight_action__WEBPACK_IMPORTED_MODULE_37__.TextHighlightAction(handle, color, textBounds);
    }
  }, {
    key: "textFontAction",
    value: function textFontAction(dataView) {
      var handle = dataView.getInt32();
      var rgba = dataView.getInt32();
      var fontFamilyLength = dataView.getInt32();
      var fontFamily = dataView.getString(fontFamilyLength);
      var fontSize = dataView.getFloat64();
      var posture = dataView.getInt8();
      var weight = dataView.getInt8();
      var strikethrough = dataView.getInt8() > 0;
      var underline = dataView.getInt8() > 0;
      var fontWeight = (weight + 1) * 100;
      var fontStyle;

      switch (posture) {
        case 0:
          fontStyle = "normal";
          break;

        case 1:
          fontStyle = "italic";
          break;

        default:
          console.error("Unsupported font style");
          break;
      }

      var color = _paint_color__WEBPACK_IMPORTED_MODULE_7__.Color.fromRGBNumber(rgba);
      var font = new _paint_font__WEBPACK_IMPORTED_MODULE_36__.Font(fontFamily, fontSize, fontStyle, fontWeight.toString());
      var attributes = new Map();
      attributes.set("strikethrough", strikethrough);
      attributes.set("underline", underline);
      return new _text_font_action__WEBPACK_IMPORTED_MODULE_31__.TextFontAction(handle, font, color, attributes);
    }
  }, {
    key: "latexFontAction",
    value: function latexFontAction(dataView) {
      var handle = dataView.getInt32();
      var fontType = dataView.getInt32();
      var fontSize = dataView.getFloat32();
      var rgba = dataView.getInt32();
      var color = _paint_color__WEBPACK_IMPORTED_MODULE_7__.Color.fromRGBNumber(rgba);
      var font = new _paint_font__WEBPACK_IMPORTED_MODULE_36__.Font("Arial", fontSize);
      var attributes = new Map();
      return new _latex_font_action__WEBPACK_IMPORTED_MODULE_39__.LatexFontAction(handle, font, color, attributes);
    }
  }]);

  return ActionParser;
}();

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(ActionParser, "KEY_EVENT_MASK", 1);



/***/ }),

/***/ "./src/action/parser/progressive-data-view.ts":
/*!****************************************************!*\
  !*** ./src/action/parser/progressive-data-view.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProgressiveDataView": () => (/* binding */ ProgressiveDataView)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var ProgressiveDataView = /*#__PURE__*/function () {
  function ProgressiveDataView(buffer, byteOffset, byteLength) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ProgressiveDataView);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "dataView", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "offset", void 0);

    this.dataView = new DataView(buffer, byteOffset, byteLength);
    this.offset = byteOffset ? byteOffset : 0;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ProgressiveDataView, [{
    key: "byteOffset",
    get: function get() {
      return this.offset;
    }
  }, {
    key: "skip",
    value: function skip(n) {
      if (this.offset + n >= this.dataView.byteLength) {
        throw new Error("Out of bounds ".concat(this.offset + n, " exceeds length ").concat(this.dataView.byteLength));
      }

      this.offset += n;
    }
  }, {
    key: "getString",
    value: function getString(length) {
      var text = "";
      var val = -1;

      for (var i = 0; i < length; i++) {
        val = this.getUint8();

        if (val == 0) {
          break;
        }

        text += String.fromCharCode(val);
      }

      return text;
    }
  }, {
    key: "getFloat32",
    value: function getFloat32(littleEndian) {
      var value = this.dataView.getFloat32(this.offset, littleEndian);
      this.offset += 4;
      return value;
    }
  }, {
    key: "getFloat64",
    value: function getFloat64(littleEndian) {
      var value = this.dataView.getFloat64(this.offset, littleEndian);
      this.offset += 8;
      return value;
    }
  }, {
    key: "getInt8",
    value: function getInt8() {
      var value = this.dataView.getInt8(this.offset);
      this.offset += 1;
      return value;
    }
  }, {
    key: "getInt16",
    value: function getInt16(littleEndian) {
      var value = this.dataView.getInt16(this.offset, littleEndian);
      this.offset += 2;
      return value;
    }
  }, {
    key: "getInt32",
    value: function getInt32(littleEndian) {
      var value = this.dataView.getInt32(this.offset, littleEndian);
      this.offset += 4;
      return value;
    }
  }, {
    key: "getInt64",
    value: function getInt64(littleEndian) {
      var value = this.dataView.getBigInt64(this.offset, littleEndian);
      this.offset += 8;
      return value;
    }
  }, {
    key: "getUint8",
    value: function getUint8() {
      var value = this.dataView.getUint8(this.offset);
      this.offset += 1;
      return value;
    }
  }, {
    key: "getUint16",
    value: function getUint16(littleEndian) {
      var value = this.dataView.getUint16(this.offset, littleEndian);
      this.offset += 2;
      return value;
    }
  }, {
    key: "getUint32",
    value: function getUint32(littleEndian) {
      var value = this.dataView.getUint32(this.offset, littleEndian);
      this.offset += 4;
      return value;
    }
  }]);

  return ProgressiveDataView;
}();



/***/ }),

/***/ "./src/action/parser/recorded-page.parser.ts":
/*!***************************************************!*\
  !*** ./src/action/parser/recorded-page.parser.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RecordedPageParser": () => (/* binding */ RecordedPageParser)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _action_parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./action.parser */ "./src/action/parser/action.parser.ts");
/* harmony import */ var _model_recorded_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../model/recorded-page */ "./src/model/recorded-page.ts");





var RecordedPageParser = /*#__PURE__*/function () {
  function RecordedPageParser() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RecordedPageParser);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RecordedPageParser, [{
    key: "parse",
    value: function parse(dataView) {
      var recordedPage = new _model_recorded_page__WEBPACK_IMPORTED_MODULE_3__.RecordedPage();
      var number = dataView.getInt32();
      var timestamp = dataView.getInt32();
      recordedPage.pageNumber = number;
      recordedPage.timestamp = timestamp;
      var staticActionSize = dataView.getInt32();

      if (staticActionSize > 0) {
        var end = dataView.byteOffset + staticActionSize;

        while (dataView.byteOffset < end) {
          var length = dataView.getInt32();
          var type = dataView.getInt8();

          var _timestamp = dataView.getInt32();

          var action = _action_parser__WEBPACK_IMPORTED_MODULE_2__.ActionParser.parse(dataView, type, length);
          action.timestamp = _timestamp;

          if (action) {
            recordedPage.staticActions.push(action);
          }
        }
      }

      var playbackActionSize = dataView.getInt32();

      if (playbackActionSize > 0) {
        var _end = dataView.byteOffset + playbackActionSize;

        while (dataView.byteOffset < _end) {
          var _length = dataView.getInt32();

          var _type = dataView.getInt8();

          var _timestamp2 = dataView.getInt32();

          var _action = _action_parser__WEBPACK_IMPORTED_MODULE_2__.ActionParser.parse(dataView, _type, _length);

          _action.timestamp = _timestamp2;

          if (_action) {
            recordedPage.playbackActions.push(_action);
          }
        }
      }

      return recordedPage;
    }
  }]);

  return RecordedPageParser;
}();



/***/ }),

/***/ "./src/action/parser/stream.action.parser.ts":
/*!***************************************************!*\
  !*** ./src/action/parser/stream.action.parser.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamActionParser": () => (/* binding */ StreamActionParser)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _stream_action_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stream.action-type */ "./src/action/stream.action-type.ts");
/* harmony import */ var _stream_document_closed_action__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stream.document.closed.action */ "./src/action/stream.document.closed.action.ts");
/* harmony import */ var _stream_document_created_action__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../stream.document.created.action */ "./src/action/stream.document.created.action.ts");
/* harmony import */ var _stream_document_selected_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../stream.document.selected.action */ "./src/action/stream.document.selected.action.ts");
/* harmony import */ var _stream_page_created_action__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../stream.page.created.action */ "./src/action/stream.page.created.action.ts");
/* harmony import */ var _stream_page_deleted_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../stream.page.deleted.action */ "./src/action/stream.page.deleted.action.ts");
/* harmony import */ var _stream_page_selected_action__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../stream.page.selected.action */ "./src/action/stream.page.selected.action.ts");
/* harmony import */ var _stream_playback_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../stream.playback.action */ "./src/action/stream.playback.action.ts");
/* harmony import */ var _stream_playbacks_action__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../stream.playbacks.action */ "./src/action/stream.playbacks.action.ts");
/* harmony import */ var _stream_start_action__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../stream.start.action */ "./src/action/stream.start.action.ts");
/* harmony import */ var _stream_speech_published_action__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../stream.speech.published.action */ "./src/action/stream.speech.published.action.ts");
/* harmony import */ var _action_parser__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./action.parser */ "./src/action/parser/action.parser.ts");
/* harmony import */ var _recorded_page_parser__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./recorded-page.parser */ "./src/action/parser/recorded-page.parser.ts");















var StreamActionParser = /*#__PURE__*/function () {
  function StreamActionParser() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StreamActionParser);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StreamActionParser, null, [{
    key: "parse",
    value: function parse(dataView, type, length) {
      var action = null;

      switch (type) {
        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_INIT:
          //action = this.initAction(dataView);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_START:
          action = this.startAction(dataView);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_PAGE_ACTION:
          action = this.playbackAction(dataView);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_PAGE_ACTIONS:
          action = this.playbackActions(dataView);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_PAGE_CREATED:
          action = this.pageAction(dataView, _stream_page_created_action__WEBPACK_IMPORTED_MODULE_6__.StreamPageCreatedAction);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_PAGE_DELETED:
          action = this.pageAction(dataView, _stream_page_deleted_action__WEBPACK_IMPORTED_MODULE_7__.StreamPageDeletedAction);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_PAGE_SELECTED:
          action = this.pageAction(dataView, _stream_page_selected_action__WEBPACK_IMPORTED_MODULE_8__.StreamPageSelectedAction);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_DOCUMENT_CREATED:
          action = this.documentAction(dataView, _stream_document_created_action__WEBPACK_IMPORTED_MODULE_4__.StreamDocumentCreatedAction);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_DOCUMENT_CLOSED:
          action = this.documentAction(dataView, _stream_document_closed_action__WEBPACK_IMPORTED_MODULE_3__.StreamDocumentClosedAction);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_DOCUMENT_SELECTED:
          action = this.documentAction(dataView, _stream_document_selected_action__WEBPACK_IMPORTED_MODULE_5__.StreamDocumentSelectedAction);
          break;

        case _stream_action_type__WEBPACK_IMPORTED_MODULE_2__.StreamActionType.STREAM_SPEECH_PUBLISHED:
          action = this.speechAction(dataView, _stream_speech_published_action__WEBPACK_IMPORTED_MODULE_12__.StreamSpeechPublishedAction);
          break;
      }

      return action;
    }
  }, {
    key: "startAction",
    value: function startAction(dataView) {
      var courseId = dataView.getUint32();
      return new _stream_start_action__WEBPACK_IMPORTED_MODULE_11__.StreamStartAction(courseId);
    }
  }, {
    key: "playbackAction",
    value: function playbackAction(dataView) {
      var docId = dataView.getInt64();
      var pageNumber = dataView.getInt32();
      var length = dataView.getInt32();
      var type = dataView.getInt8();
      var timestamp = dataView.getInt32();
      var action = _action_parser__WEBPACK_IMPORTED_MODULE_13__.ActionParser.parse(dataView, type, length);
      action.timestamp = timestamp;
      return new _stream_playback_action__WEBPACK_IMPORTED_MODULE_9__.StreamPagePlaybackAction(docId, pageNumber, action);
    }
  }, {
    key: "playbackActions",
    value: function playbackActions(dataView) {
      var docId = dataView.getInt64();
      var entryLength = dataView.getInt32();
      var pageParser = new _recorded_page_parser__WEBPACK_IMPORTED_MODULE_14__.RecordedPageParser();
      var recordedPage = pageParser.parse(dataView);
      return new _stream_playbacks_action__WEBPACK_IMPORTED_MODULE_10__.StreamPageActionsAction(docId, recordedPage);
    }
  }, {
    key: "pageAction",
    value: function pageAction(dataView, type) {
      var docId = dataView.getInt64();
      var pageNumber = dataView.getInt32();
      return new type(docId, pageNumber);
    }
  }, {
    key: "documentAction",
    value: function documentAction(dataView, type) {
      var docId = dataView.getInt64();
      var docType = dataView.getInt8();
      var titleLength = dataView.getInt32();
      var nameLength = dataView.getInt32();
      var checksumLength = dataView.getInt32();
      var docTitle = dataView.getString(titleLength);
      var docName = dataView.getString(nameLength);
      var docChecksum = dataView.getString(checksumLength);
      return new type(docId, docType, docTitle, docName);
    }
  }, {
    key: "speechAction",
    value: function speechAction(dataView, type) {
      var idLength = dataView.getInt32();
      var idStr = dataView.getString(idLength);
      var publisherId = BigInt(idStr);
      return new type(publisherId);
    }
  }]);

  return StreamActionParser;
}();

/***/ }),

/***/ "./src/action/pen.action.ts":
/*!**********************************!*\
  !*** ./src/action/pen.action.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PenAction": () => (/* binding */ PenAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_pen_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/pen.tool */ "./src/tool/pen.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var PenAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(PenAction, _BrushAction);

  var _super = _createSuper(PenAction);

  function PenAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PenAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PenAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_pen_tool__WEBPACK_IMPORTED_MODULE_6__.PenTool();
      tool.shapeHandle = this.shapeHandle;
      tool.brush = this.brush;
      executor.setTool(tool);
    }
  }]);

  return PenAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/pointer.action.ts":
/*!**************************************!*\
  !*** ./src/action/pointer.action.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PointerAction": () => (/* binding */ PointerAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_pointer_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/pointer.tool */ "./src/tool/pointer.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var PointerAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(PointerAction, _BrushAction);

  var _super = _createSuper(PointerAction);

  function PointerAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PointerAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PointerAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_pointer_tool__WEBPACK_IMPORTED_MODULE_6__.PointerTool();
      tool.brush = this.brush;
      executor.setTool(tool);
    }
  }]);

  return PointerAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/rectangle.action.ts":
/*!****************************************!*\
  !*** ./src/action/rectangle.action.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RectangleAction": () => (/* binding */ RectangleAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_rectangle_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/rectangle.tool */ "./src/tool/rectangle.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var RectangleAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(RectangleAction, _BrushAction);

  var _super = _createSuper(RectangleAction);

  function RectangleAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RectangleAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RectangleAction, [{
    key: "execute",
    value: function execute(executor) {
      var tool = new _tool_rectangle_tool__WEBPACK_IMPORTED_MODULE_6__.RectangleTool();
      tool.shapeHandle = this.shapeHandle;
      tool.brush = this.brush;
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(tool);
    }
  }]);

  return RectangleAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/action/redo.action.ts":
/*!***********************************!*\
  !*** ./src/action/redo.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RedoAction": () => (/* binding */ RedoAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_redo_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/redo.tool */ "./src/tool/redo.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var RedoAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(RedoAction, _Action);

  var _super = _createSuper(RedoAction);

  function RedoAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RedoAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RedoAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_redo_tool__WEBPACK_IMPORTED_MODULE_6__.RedoTool());
    }
  }]);

  return RedoAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/rubber.action.ts":
/*!*************************************!*\
  !*** ./src/action/rubber.action.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RubberAction": () => (/* binding */ RubberAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_delete_shape_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/delete.shape.tool */ "./src/tool/delete.shape.tool.ts");
/* harmony import */ var _geometry_pen_point__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geometry/pen-point */ "./src/geometry/pen-point.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var RubberAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(RubberAction, _Action);

  var _super = _createSuper(RubberAction);

  function RubberAction(shapeHandle) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RubberAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shapeHandle", void 0);

    _this.shapeHandle = shapeHandle;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RubberAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_delete_shape_tool__WEBPACK_IMPORTED_MODULE_8__.DeleteShapeTool(this.shapeHandle));
      executor.beginTool(new _geometry_pen_point__WEBPACK_IMPORTED_MODULE_9__.PenPoint(0, 0, 0));
    }
  }]);

  return RubberAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/select-group.action.ts":
/*!*******************************************!*\
  !*** ./src/action/select-group.action.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectGroupAction": () => (/* binding */ SelectGroupAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_select_group_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/select-group.tool */ "./src/tool/select-group.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var SelectGroupAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(SelectGroupAction, _Action);

  var _super = _createSuper(SelectGroupAction);

  function SelectGroupAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SelectGroupAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SelectGroupAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_select_group_tool__WEBPACK_IMPORTED_MODULE_6__.SelectGroupTool());
    }
  }]);

  return SelectGroupAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/select.action.ts":
/*!*************************************!*\
  !*** ./src/action/select.action.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectAction": () => (/* binding */ SelectAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_select_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/select.tool */ "./src/tool/select.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var SelectAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(SelectAction, _Action);

  var _super = _createSuper(SelectAction);

  function SelectAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SelectAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SelectAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_select_tool__WEBPACK_IMPORTED_MODULE_6__.SelectTool());
    }
  }]);

  return SelectAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/simple-action-executor.ts":
/*!**********************************************!*\
  !*** ./src/action/simple-action-executor.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SimpleActionExecutor": () => (/* binding */ SimpleActionExecutor)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _tool_tool_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tool/tool-context */ "./src/tool/tool-context.ts");
/* harmony import */ var _geometry_pen_point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../geometry/pen-point */ "./src/geometry/pen-point.ts");
/* harmony import */ var _tool_atomic_tool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tool/atomic.tool */ "./src/tool/atomic.tool.ts");







var SimpleActionExecutor = /*#__PURE__*/function () {
  function SimpleActionExecutor(document) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SimpleActionExecutor);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "document", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "toolContext", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "tool", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "previousTool", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pageNumber", void 0);

    this.document = document;
    this.toolContext = new _tool_tool_context__WEBPACK_IMPORTED_MODULE_3__.ToolContext(null);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SimpleActionExecutor, [{
    key: "setOnSelectPageIndex",
    value: function setOnSelectPageIndex(observer) {}
  }, {
    key: "setSeek",
    value: function setSeek(seek) {}
  }, {
    key: "setKeyEvent",
    value: function setKeyEvent(keyEvent) {
      this.toolContext.keyEvent = keyEvent;
    }
  }, {
    key: "setDocument",
    value: function setDocument(document) {}
  }, {
    key: "setPageNumber",
    value: function setPageNumber(pageNumber) {
      if (this.pageNumber === pageNumber) {
        return;
      }

      var page = this.document.getPage(pageNumber);
      this.pageNumber = pageNumber;
      this.toolContext.page = page;
    }
  }, {
    key: "setTool",
    value: function setTool(tool) {
      if (!tool) {
        throw new Error("Tool must not be null");
      }

      if (!this.tool && this.tool === tool) {
        return;
      }

      this.setPreviousTool(this.tool);
      this.tool = tool;
    }
  }, {
    key: "selectAndExecuteTool",
    value: function selectAndExecuteTool(tool) {
      var point = _geometry_pen_point__WEBPACK_IMPORTED_MODULE_4__.PenPoint.createZero();
      this.setTool(tool);
      this.beginTool(point);
      this.executeTool(point);
      this.endTool(point);
      this.setPreviousTool(this.previousTool);
    }
  }, {
    key: "beginTool",
    value: function beginTool(point) {
      this.tool.begin(point.clone(), this.toolContext);
    }
  }, {
    key: "executeTool",
    value: function executeTool(point) {
      this.tool.execute(point.clone());
    }
  }, {
    key: "endTool",
    value: function endTool(point) {
      this.tool.end(point.clone());
    }
  }, {
    key: "setPreviousTool",
    value: function setPreviousTool(tool) {
      if (!tool) {
        return;
      }

      if (tool instanceof _tool_atomic_tool__WEBPACK_IMPORTED_MODULE_5__.AtomicTool) {
        // Do not remember atomic tools.
        return;
      }

      this.previousTool = tool;
    }
  }]);

  return SimpleActionExecutor;
}();



/***/ }),

/***/ "./src/action/stream-action-player.ts":
/*!********************************************!*\
  !*** ./src/action/stream-action-player.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamActionPlayer": () => (/* binding */ StreamActionPlayer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action_player__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action-player */ "./src/action/action-player.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamActionPlayer = /*#__PURE__*/function (_ActionPlayer) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamActionPlayer, _ActionPlayer);

  var _super = _createSuper(StreamActionPlayer);

  function StreamActionPlayer(executor, syncState) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StreamActionPlayer);

    _this = _super.call(this, executor);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "syncState", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "actions", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "requestID", void 0);

    _this.syncState = syncState;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StreamActionPlayer, [{
    key: "addAction",
    value: function addAction(action) {
      if (document.visibilityState === "hidden") {
        // Execute action with the current state.
        // Some browsers, mostly Chromium-based, get the state mixed-up when the player is not visible.
        try {
          action.execute(this.executor);
        } catch (cause) {
          console.error(cause);
        }
      } else {
        this.actions.push(action);
      }
    }
  }, {
    key: "setDocument",
    value: function setDocument(document) {
      this.executor.setDocument(document);
    }
  }, {
    key: "seekByTime",
    value: function seekByTime(time) {
      throw new Error("Method not implemented.");
    }
  }, {
    key: "seekByPage",
    value: function seekByPage(pageNumber) {
      throw new Error("Method not implemented.");
    }
  }, {
    key: "executeActions",
    value: function executeActions() {
      var actionCount = this.actions.length;

      while (actionCount > 0) {
        // Get next action for execution.
        var action = this.actions[0];
        var time = this.syncState.audioTime; // if (time >= action.timestamp) {
        //console.log("action latency: " + (time - action.timestamp));

        try {
          action.execute(this.executor);
        } catch (cause) {//console.error(cause);
        } // Remove executed action.


        this.actions.shift();
        actionCount = this.actions.length; // }
        // else {
        // 	break;
        // }
      }
    }
  }, {
    key: "initInternal",
    value: function initInternal() {
      this.actions = [];
    }
  }, {
    key: "startInternal",
    value: function startInternal() {
      try {
        this.run();
      } catch (e) {
        console.error(e);
        throw new Error("Execute action failed.");
      }
    }
  }, {
    key: "stopInternal",
    value: function stopInternal() {
      cancelAnimationFrame(this.requestID);
    }
  }, {
    key: "suspendInternal",
    value: function suspendInternal() {
      cancelAnimationFrame(this.requestID);
    }
  }, {
    key: "destroyInternal",
    value: function destroyInternal() {
      this.actions.length = 0;
    }
  }, {
    key: "run",
    value: function run() {
      this.executeActions();
      this.requestID = requestAnimationFrame(this.run.bind(this));
    }
  }]);

  return StreamActionPlayer;
}(_action_player__WEBPACK_IMPORTED_MODULE_7__.ActionPlayer);



/***/ }),

/***/ "./src/action/stream.action-type.ts":
/*!******************************************!*\
  !*** ./src/action/stream.action-type.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamActionType": () => (/* binding */ StreamActionType)
/* harmony export */ });
var StreamActionType;

(function (StreamActionType) {
  StreamActionType[StreamActionType["STREAM_INIT"] = 0] = "STREAM_INIT";
  StreamActionType[StreamActionType["STREAM_START"] = 1] = "STREAM_START";
  StreamActionType[StreamActionType["STREAM_PAGE_ACTION"] = 2] = "STREAM_PAGE_ACTION";
  StreamActionType[StreamActionType["STREAM_PAGE_ACTIONS"] = 3] = "STREAM_PAGE_ACTIONS";
  StreamActionType[StreamActionType["STREAM_PAGE_CREATED"] = 4] = "STREAM_PAGE_CREATED";
  StreamActionType[StreamActionType["STREAM_PAGE_DELETED"] = 5] = "STREAM_PAGE_DELETED";
  StreamActionType[StreamActionType["STREAM_PAGE_SELECTED"] = 6] = "STREAM_PAGE_SELECTED";
  StreamActionType[StreamActionType["STREAM_DOCUMENT_CREATED"] = 7] = "STREAM_DOCUMENT_CREATED";
  StreamActionType[StreamActionType["STREAM_DOCUMENT_CLOSED"] = 8] = "STREAM_DOCUMENT_CLOSED";
  StreamActionType[StreamActionType["STREAM_DOCUMENT_SELECTED"] = 9] = "STREAM_DOCUMENT_SELECTED";
  StreamActionType[StreamActionType["STREAM_SPEECH_PUBLISHED"] = 10] = "STREAM_SPEECH_PUBLISHED";
})(StreamActionType || (StreamActionType = {}));



/***/ }),

/***/ "./src/action/stream.action.ts":
/*!*************************************!*\
  !*** ./src/action/stream.action.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamAction": () => (/* binding */ StreamAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");



var StreamAction = /*#__PURE__*/(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(function StreamAction() {
  (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamAction);
});



/***/ }),

/***/ "./src/action/stream.document.action.ts":
/*!**********************************************!*\
  !*** ./src/action/stream.document.action.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamDocumentAction": () => (/* binding */ StreamDocumentAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stream_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stream.action */ "./src/action/stream.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamDocumentAction = /*#__PURE__*/function (_StreamAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamDocumentAction, _StreamAction);

  var _super = _createSuper(StreamDocumentAction);

  function StreamDocumentAction(documentId, documentType, documentTitle, documentFile) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamDocumentAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "documentId", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "documentType", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "documentTitle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "documentFile", void 0);

    _this.documentId = documentId;
    _this.documentType = documentType;
    _this.documentTitle = documentTitle;
    _this.documentFile = documentFile;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamDocumentAction);
}(_stream_action__WEBPACK_IMPORTED_MODULE_7__.StreamAction);



/***/ }),

/***/ "./src/action/stream.document.closed.action.ts":
/*!*****************************************************!*\
  !*** ./src/action/stream.document.closed.action.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamDocumentClosedAction": () => (/* binding */ StreamDocumentClosedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_document_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.document.action */ "./src/action/stream.document.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamDocumentClosedAction = /*#__PURE__*/function (_StreamDocumentAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamDocumentClosedAction, _StreamDocumentAction);

  var _super = _createSuper(StreamDocumentClosedAction);

  function StreamDocumentClosedAction(documentId, documentType, documentTitle, documentFile) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamDocumentClosedAction);

    return _super.call(this, documentId, documentType, documentTitle, documentFile);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamDocumentClosedAction);
}(_stream_document_action__WEBPACK_IMPORTED_MODULE_5__.StreamDocumentAction);



/***/ }),

/***/ "./src/action/stream.document.created.action.ts":
/*!******************************************************!*\
  !*** ./src/action/stream.document.created.action.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamDocumentCreatedAction": () => (/* binding */ StreamDocumentCreatedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_document_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.document.action */ "./src/action/stream.document.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamDocumentCreatedAction = /*#__PURE__*/function (_StreamDocumentAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamDocumentCreatedAction, _StreamDocumentAction);

  var _super = _createSuper(StreamDocumentCreatedAction);

  function StreamDocumentCreatedAction(documentId, documentType, documentTitle, documentFile) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamDocumentCreatedAction);

    return _super.call(this, documentId, documentType, documentTitle, documentFile);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamDocumentCreatedAction);
}(_stream_document_action__WEBPACK_IMPORTED_MODULE_5__.StreamDocumentAction);



/***/ }),

/***/ "./src/action/stream.document.selected.action.ts":
/*!*******************************************************!*\
  !*** ./src/action/stream.document.selected.action.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamDocumentSelectedAction": () => (/* binding */ StreamDocumentSelectedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_document_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.document.action */ "./src/action/stream.document.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamDocumentSelectedAction = /*#__PURE__*/function (_StreamDocumentAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamDocumentSelectedAction, _StreamDocumentAction);

  var _super = _createSuper(StreamDocumentSelectedAction);

  function StreamDocumentSelectedAction(documentId, documentType, documentTitle, documentFile) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamDocumentSelectedAction);

    return _super.call(this, documentId, documentType, documentTitle, documentFile);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamDocumentSelectedAction);
}(_stream_document_action__WEBPACK_IMPORTED_MODULE_5__.StreamDocumentAction);



/***/ }),

/***/ "./src/action/stream.page.action.ts":
/*!******************************************!*\
  !*** ./src/action/stream.page.action.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamPageAction": () => (/* binding */ StreamPageAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stream_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stream.action */ "./src/action/stream.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamPageAction = /*#__PURE__*/function (_StreamAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamPageAction, _StreamAction);

  var _super = _createSuper(StreamPageAction);

  function StreamPageAction(documentId, pageNumber) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamPageAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "documentId", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "pageNumber", void 0);

    _this.documentId = documentId;
    _this.pageNumber = pageNumber;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamPageAction);
}(_stream_action__WEBPACK_IMPORTED_MODULE_7__.StreamAction);



/***/ }),

/***/ "./src/action/stream.page.created.action.ts":
/*!**************************************************!*\
  !*** ./src/action/stream.page.created.action.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamPageCreatedAction": () => (/* binding */ StreamPageCreatedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_page_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.page.action */ "./src/action/stream.page.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamPageCreatedAction = /*#__PURE__*/function (_StreamPageAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamPageCreatedAction, _StreamPageAction);

  var _super = _createSuper(StreamPageCreatedAction);

  function StreamPageCreatedAction(documentId, pageNumber) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamPageCreatedAction);

    return _super.call(this, documentId, pageNumber);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamPageCreatedAction);
}(_stream_page_action__WEBPACK_IMPORTED_MODULE_5__.StreamPageAction);



/***/ }),

/***/ "./src/action/stream.page.deleted.action.ts":
/*!**************************************************!*\
  !*** ./src/action/stream.page.deleted.action.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamPageDeletedAction": () => (/* binding */ StreamPageDeletedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_page_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.page.action */ "./src/action/stream.page.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamPageDeletedAction = /*#__PURE__*/function (_StreamPageAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamPageDeletedAction, _StreamPageAction);

  var _super = _createSuper(StreamPageDeletedAction);

  function StreamPageDeletedAction(documentId, pageNumber) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamPageDeletedAction);

    return _super.call(this, documentId, pageNumber);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamPageDeletedAction);
}(_stream_page_action__WEBPACK_IMPORTED_MODULE_5__.StreamPageAction);



/***/ }),

/***/ "./src/action/stream.page.selected.action.ts":
/*!***************************************************!*\
  !*** ./src/action/stream.page.selected.action.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamPageSelectedAction": () => (/* binding */ StreamPageSelectedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_page_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.page.action */ "./src/action/stream.page.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamPageSelectedAction = /*#__PURE__*/function (_StreamPageAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamPageSelectedAction, _StreamPageAction);

  var _super = _createSuper(StreamPageSelectedAction);

  function StreamPageSelectedAction(documentId, pageNumber) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamPageSelectedAction);

    return _super.call(this, documentId, pageNumber);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamPageSelectedAction);
}(_stream_page_action__WEBPACK_IMPORTED_MODULE_5__.StreamPageAction);



/***/ }),

/***/ "./src/action/stream.playback.action.ts":
/*!**********************************************!*\
  !*** ./src/action/stream.playback.action.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamPagePlaybackAction": () => (/* binding */ StreamPagePlaybackAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stream_page_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stream.page.action */ "./src/action/stream.page.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamPagePlaybackAction = /*#__PURE__*/function (_StreamPageAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamPagePlaybackAction, _StreamPageAction);

  var _super = _createSuper(StreamPagePlaybackAction);

  function StreamPagePlaybackAction(documentId, pageNumber, action) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamPagePlaybackAction);

    _this = _super.call(this, documentId, pageNumber);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "action", void 0);

    _this.action = action;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamPagePlaybackAction);
}(_stream_page_action__WEBPACK_IMPORTED_MODULE_7__.StreamPageAction);



/***/ }),

/***/ "./src/action/stream.playbacks.action.ts":
/*!***********************************************!*\
  !*** ./src/action/stream.playbacks.action.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamPageActionsAction": () => (/* binding */ StreamPageActionsAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stream_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stream.action */ "./src/action/stream.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamPageActionsAction = /*#__PURE__*/function (_StreamAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamPageActionsAction, _StreamAction);

  var _super = _createSuper(StreamPageActionsAction);

  function StreamPageActionsAction(documentId, recPage) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamPageActionsAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "documentId", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "recordedPage", void 0);

    _this.documentId = documentId;
    _this.recordedPage = recPage;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamPageActionsAction);
}(_stream_action__WEBPACK_IMPORTED_MODULE_7__.StreamAction);



/***/ }),

/***/ "./src/action/stream.speech.action.ts":
/*!********************************************!*\
  !*** ./src/action/stream.speech.action.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamSpeechAction": () => (/* binding */ StreamSpeechAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stream_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stream.action */ "./src/action/stream.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamSpeechAction = /*#__PURE__*/function (_StreamAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamSpeechAction, _StreamAction);

  var _super = _createSuper(StreamSpeechAction);

  function StreamSpeechAction(publisherId) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamSpeechAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "publisherId", void 0);

    _this.publisherId = publisherId;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamSpeechAction);
}(_stream_action__WEBPACK_IMPORTED_MODULE_7__.StreamAction);



/***/ }),

/***/ "./src/action/stream.speech.published.action.ts":
/*!******************************************************!*\
  !*** ./src/action/stream.speech.published.action.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamSpeechPublishedAction": () => (/* binding */ StreamSpeechPublishedAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stream_speech_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream.speech.action */ "./src/action/stream.speech.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamSpeechPublishedAction = /*#__PURE__*/function (_StreamSpeechAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(StreamSpeechPublishedAction, _StreamSpeechAction);

  var _super = _createSuper(StreamSpeechPublishedAction);

  function StreamSpeechPublishedAction(publisherId) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamSpeechPublishedAction);

    return _super.call(this, publisherId);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamSpeechPublishedAction);
}(_stream_speech_action__WEBPACK_IMPORTED_MODULE_5__.StreamSpeechAction);



/***/ }),

/***/ "./src/action/stream.start.action.ts":
/*!*******************************************!*\
  !*** ./src/action/stream.start.action.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamStartAction": () => (/* binding */ StreamStartAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stream_action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stream.action */ "./src/action/stream.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var StreamStartAction = /*#__PURE__*/function (_StreamAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StreamStartAction, _StreamAction);

  var _super = _createSuper(StreamStartAction);

  function StreamStartAction(courseId) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, StreamStartAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "courseId", void 0);

    _this.courseId = courseId;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(StreamStartAction);
}(_stream_action__WEBPACK_IMPORTED_MODULE_7__.StreamAction);



/***/ }),

/***/ "./src/action/text-change.action.ts":
/*!******************************************!*\
  !*** ./src/action/text-change.action.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextChangeAction": () => (/* binding */ TextChangeAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_text_change_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/text-change.tool */ "./src/tool/text-change.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextChangeAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextChangeAction, _Action);

  var _super = _createSuper(TextChangeAction);

  function TextChangeAction(handle, text) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextChangeAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "text", void 0);

    _this.handle = handle;
    _this.text = text;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextChangeAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_text_change_tool__WEBPACK_IMPORTED_MODULE_8__.TextChangeTool(this.handle, this.text));
    }
  }]);

  return TextChangeAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/text-font.action.ts":
/*!****************************************!*\
  !*** ./src/action/text-font.action.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextFontAction": () => (/* binding */ TextFontAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_text_font_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/text-font.tool */ "./src/tool/text-font.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextFontAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextFontAction, _Action);

  var _super = _createSuper(TextFontAction);

  function TextFontAction(handle, font, textColor, textAttributes) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextFontAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "font", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textColor", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textAttributes", void 0);

    _this.handle = handle;
    _this.font = font;
    _this.textColor = textColor;
    _this.textAttributes = textAttributes;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextFontAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_text_font_tool__WEBPACK_IMPORTED_MODULE_8__.TextFontTool(this.handle, this.font, this.textColor, this.textAttributes));
    }
  }]);

  return TextFontAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/text-highlight.action.ts":
/*!*********************************************!*\
  !*** ./src/action/text-highlight.action.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextHighlightAction": () => (/* binding */ TextHighlightAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_text_highlight_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/text-highlight.tool */ "./src/tool/text-highlight.tool.ts");
/* harmony import */ var _geometry_pen_point__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geometry/pen-point */ "./src/geometry/pen-point.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var TextHighlightAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextHighlightAction, _Action);

  var _super = _createSuper(TextHighlightAction);

  function TextHighlightAction(shapeHandle, color, textBounds) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextHighlightAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shapeHandle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "color", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textBounds", void 0);

    _this.shapeHandle = shapeHandle;
    _this.color = color;
    _this.textBounds = textBounds;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextHighlightAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_text_highlight_tool__WEBPACK_IMPORTED_MODULE_8__.TextHighlightTool(this.shapeHandle, this.color, this.textBounds));
      executor.beginTool(new _geometry_pen_point__WEBPACK_IMPORTED_MODULE_9__.PenPoint(0, 0, 0));
    }
  }]);

  return TextHighlightAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/text-move.action.ts":
/*!****************************************!*\
  !*** ./src/action/text-move.action.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextMoveAction": () => (/* binding */ TextMoveAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_text_move_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/text-move.tool */ "./src/tool/text-move.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextMoveAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextMoveAction, _Action);

  var _super = _createSuper(TextMoveAction);

  function TextMoveAction(handle, point) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextMoveAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "point", void 0);

    _this.handle = handle;
    _this.point = point;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextMoveAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_text_move_tool__WEBPACK_IMPORTED_MODULE_8__.TextMoveTool(this.handle, this.point));
    }
  }]);

  return TextMoveAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/text-remove.action.ts":
/*!******************************************!*\
  !*** ./src/action/text-remove.action.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextRemoveAction": () => (/* binding */ TextRemoveAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_text_remove_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/text-remove.tool */ "./src/tool/text-remove.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextRemoveAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextRemoveAction, _Action);

  var _super = _createSuper(TextRemoveAction);

  function TextRemoveAction(handle) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextRemoveAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    _this.handle = handle;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextRemoveAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_text_remove_tool__WEBPACK_IMPORTED_MODULE_8__.TextRemoveTool(this.handle));
    }
  }]);

  return TextRemoveAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/text.action.ts":
/*!***********************************!*\
  !*** ./src/action/text.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextAction": () => (/* binding */ TextAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_text_tool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tool/text.tool */ "./src/tool/text.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextAction, _Action);

  var _super = _createSuper(TextAction);

  function TextAction(handle) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    _this.handle = handle;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_text_tool__WEBPACK_IMPORTED_MODULE_8__.TextTool(this.handle));
    }
  }]);

  return TextAction;
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/tool-begin.action.ts":
/*!*****************************************!*\
  !*** ./src/action/tool-begin.action.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ToolBeginAction": () => (/* binding */ ToolBeginAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _tool_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tool.action */ "./src/action/tool.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ToolBeginAction = /*#__PURE__*/function (_ToolAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ToolBeginAction, _ToolAction);

  var _super = _createSuper(ToolBeginAction);

  function ToolBeginAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ToolBeginAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ToolBeginAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.beginTool(this.point);
    }
  }]);

  return ToolBeginAction;
}(_tool_action__WEBPACK_IMPORTED_MODULE_5__.ToolAction);



/***/ }),

/***/ "./src/action/tool-end.action.ts":
/*!***************************************!*\
  !*** ./src/action/tool-end.action.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ToolEndAction": () => (/* binding */ ToolEndAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _tool_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tool.action */ "./src/action/tool.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ToolEndAction = /*#__PURE__*/function (_ToolAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ToolEndAction, _ToolAction);

  var _super = _createSuper(ToolEndAction);

  function ToolEndAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ToolEndAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ToolEndAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.endTool(this.point);
    }
  }]);

  return ToolEndAction;
}(_tool_action__WEBPACK_IMPORTED_MODULE_5__.ToolAction);



/***/ }),

/***/ "./src/action/tool-execute.action.ts":
/*!*******************************************!*\
  !*** ./src/action/tool-execute.action.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ToolExecuteAction": () => (/* binding */ ToolExecuteAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _tool_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tool.action */ "./src/action/tool.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ToolExecuteAction = /*#__PURE__*/function (_ToolAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ToolExecuteAction, _ToolAction);

  var _super = _createSuper(ToolExecuteAction);

  function ToolExecuteAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ToolExecuteAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ToolExecuteAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.executeTool(this.point);
    }
  }]);

  return ToolExecuteAction;
}(_tool_action__WEBPACK_IMPORTED_MODULE_5__.ToolAction);



/***/ }),

/***/ "./src/action/tool.action.ts":
/*!***********************************!*\
  !*** ./src/action/tool.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ToolAction": () => (/* binding */ ToolAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ToolAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ToolAction, _Action);

  var _super = _createSuper(ToolAction);

  function ToolAction(point) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, ToolAction);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "point", void 0);

    _this.point = point;
    return _this;
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(ToolAction);
}(_action__WEBPACK_IMPORTED_MODULE_7__.Action);



/***/ }),

/***/ "./src/action/undo.action.ts":
/*!***********************************!*\
  !*** ./src/action/undo.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UndoAction": () => (/* binding */ UndoAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_undo_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/undo.tool */ "./src/tool/undo.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var UndoAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(UndoAction, _Action);

  var _super = _createSuper(UndoAction);

  function UndoAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, UndoAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(UndoAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.selectAndExecuteTool(new _tool_undo_tool__WEBPACK_IMPORTED_MODULE_6__.UndoTool());
    }
  }]);

  return UndoAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/zoom-out.action.ts":
/*!***************************************!*\
  !*** ./src/action/zoom-out.action.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZoomOutAction": () => (/* binding */ ZoomOutAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action */ "./src/action/action.ts");
/* harmony import */ var _tool_zoom_out_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/zoom-out.tool */ "./src/tool/zoom-out.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ZoomOutAction = /*#__PURE__*/function (_Action) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ZoomOutAction, _Action);

  var _super = _createSuper(ZoomOutAction);

  function ZoomOutAction() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ZoomOutAction);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ZoomOutAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.selectAndExecuteTool(new _tool_zoom_out_tool__WEBPACK_IMPORTED_MODULE_6__.ZoomOutTool());
    }
  }]);

  return ZoomOutAction;
}(_action__WEBPACK_IMPORTED_MODULE_5__.Action);



/***/ }),

/***/ "./src/action/zoom.action.ts":
/*!***********************************!*\
  !*** ./src/action/zoom.action.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZoomAction": () => (/* binding */ ZoomAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _brush_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./brush.action */ "./src/action/brush.action.ts");
/* harmony import */ var _tool_zoom_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tool/zoom.tool */ "./src/tool/zoom.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ZoomAction = /*#__PURE__*/function (_BrushAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ZoomAction, _BrushAction);

  var _super = _createSuper(ZoomAction);

  function ZoomAction(shapeHandle, brush) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ZoomAction);

    return _super.call(this, 0, brush);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ZoomAction, [{
    key: "execute",
    value: function execute(executor) {
      executor.setKeyEvent(this.keyEvent);
      executor.setTool(new _tool_zoom_tool__WEBPACK_IMPORTED_MODULE_6__.ZoomTool());
    }
  }]);

  return ZoomAction;
}(_brush_action__WEBPACK_IMPORTED_MODULE_5__.BrushAction);



/***/ }),

/***/ "./src/component/index.ts":
/*!********************************!*\
  !*** ./src/component/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebPlayerControls": () => (/* reexport safe */ _player_controls_player_controls__WEBPACK_IMPORTED_MODULE_0__.WebPlayerControls)
/* harmony export */ });
/* harmony import */ var _player_controls_player_controls__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./player-controls/player-controls */ "./src/component/player-controls/player-controls.ts");


/***/ }),

/***/ "./src/component/player-controls/player-controls.ts":
/*!**********************************************************!*\
  !*** ./src/component/player-controls/player-controls.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebPlayerControls": () => (/* binding */ WebPlayerControls)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _view_view_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../view/view-element */ "./src/view/view-element.ts");
/* harmony import */ var _view_web_view_element__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../view/web-view-element */ "./src/view/web-view-element.ts");








var _dec, _class;

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var WebPlayerControls = (_dec = (0,_view_view_element__WEBPACK_IMPORTED_MODULE_7__.ViewElement)({
  selector: "player-controls",
  template: __webpack_require__(/*! ./player-controls.html */ "./src/component/player-controls/player-controls.html"),
  styles: [__webpack_require__(/*! ./player-controls.css */ "./src/component/player-controls/player-controls.css")]
}), _dec(_class = /*#__PURE__*/function (_WebViewElement) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(WebPlayerControls, _WebViewElement);

  var _super = _createSuper(WebPlayerControls);

  function WebPlayerControls() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, WebPlayerControls);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "controlContainer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "fullscreenButton", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "playMediaButton", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "chatButton", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "settingsButton", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "raiseHandButton", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "showQuizButton", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "volumeSlider", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "volumeIndicator", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "duration", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "muteObserver", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(WebPlayerControls, [{
    key: "connectedCallback",
    value: function connectedCallback() {
      var _this2 = this;

      this.updateVolumeIndicator(parseFloat(this.volumeSlider.value) / 100);
      this.setFullscreen(false);
      document.addEventListener("fullscreenchange", function () {
        _this2.setFullscreen(document.fullscreenElement !== null);
      });
      this.volumeIndicator.addEventListener("click", function () {
        _this2.setMuted(!_this2.volumeIndicator.classList.contains("icon-mute"));
      });
      this.volumeSlider.addEventListener("input", function () {
        var inputRange = _this2.volumeSlider;

        _this2.controlContainer.style.setProperty('--volume-before-width', inputRange.value / inputRange.max * 100 + '%');
      });
      this.raiseHandButton.addEventListener("click", function () {
        _this2.setSelected(_this2.raiseHandButton, !_this2.raiseHandButton.classList.contains("selected"));
      });
      this.showQuizButton.addEventListener("click", function () {
        _this2.setSelected(_this2.showQuizButton, !_this2.showQuizButton.classList.contains("selected"));
      });
    }
  }, {
    key: "visible",
    get: function get() {
      return this.hasAttribute("visible");
    },
    set: function set(value) {
      if (value) {
        this.setAttribute("visible", "");
      } else {
        this.removeAttribute("visible");
      }
    }
  }, {
    key: "show",
    value: function show() {
      this.visible = true;
    }
  }, {
    key: "hide",
    value: function hide() {
      this.visible = false;
    }
  }, {
    key: "setDuration",
    value: function setDuration(durationMs) {
      var date = new Date(durationMs);
      var hours = date.getUTCHours();
      var minutes = "0" + date.getUTCMinutes();
      var seconds = "0" + date.getUTCSeconds();
      var formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);
      this.duration.innerText = formattedTime;
    }
  }, {
    key: "setVolume",
    value: function setVolume(volume) {
      this.volumeSlider.value = (volume * 100).toString();
      this.updateVolumeIndicator(volume);
    }
  }, {
    key: "setMuted",
    value: function setMuted(muted) {
      if (muted) {
        this.setVolumeIndicator("icon-mute");
      } else {
        this.updateVolumeIndicator(parseFloat(this.volumeSlider.value) / 100);
      }

      if (this.muteObserver) {
        this.muteObserver(muted);
      }
    }
  }, {
    key: "setFullscreen",
    value: function setFullscreen(fullscreen) {
      if (fullscreen) {
        this.setFullscreenIndicator("bi-fullscreen-exit");
      } else {
        this.setFullscreenIndicator("bi-fullscreen");
      }
    }
  }, {
    key: "setSelected",
    value: function setSelected(button, selected) {
      var classList = button.classList;

      if (selected) {
        classList.add("selected");
      } else {
        classList.remove("selected");
      }
    }
  }, {
    key: "setActive",
    value: function setActive(button, active) {
      var classList = button.classList;

      if (active) {
        classList.add("active");
      } else {
        classList.remove("active");
      }
    }
  }, {
    key: "setVisible",
    value: function setVisible(button, visible) {
      if (visible) {
        button.classList.remove("invisible");
      } else {
        button.classList.add("invisible");
      }
    }
  }, {
    key: "setPlayMediaVisible",
    value: function setPlayMediaVisible(visible) {
      this.setVisible(this.playMediaButton, visible);
      this.toggleClass(this.playMediaButton, visible, "pulse-infinite");
    }
  }, {
    key: "setOnPlayMedia",
    value: function setOnPlayMedia(observer) {
      this.playMediaButton.addEventListener("click", function (event) {
        event.stopPropagation();
        observer();
      }, false);
    }
  }, {
    key: "setOnVolume",
    value: function setOnVolume(observer) {
      var _this3 = this;

      this.volumeSlider.addEventListener("input", function () {
        var volume = parseFloat(_this3.volumeSlider.value) / 100;

        _this3.updateVolumeIndicator(volume);

        observer(volume);
      });
    }
  }, {
    key: "setOnMute",
    value: function setOnMute(observer) {
      this.muteObserver = observer;
    }
  }, {
    key: "setOnSettings",
    value: function setOnSettings(observer) {
      var _this4 = this;

      this.settingsButton.addEventListener("click", function (event) {
        event.stopPropagation();
        _this4.settingsButton.disabled = true;
        observer(true);
      }, false);
    }
  }, {
    key: "setOnFullscreen",
    value: function setOnFullscreen(observer) {
      this.fullscreenButton.addEventListener("click", function (event) {
        event.stopPropagation();
        observer(!document.fullscreenElement);
      }, false);
    }
  }, {
    key: "setOnRaiseHand",
    value: function setOnRaiseHand(property) {
      var _this5 = this;

      property.subscribe(function (raise) {
        _this5.setSelected(_this5.raiseHandButton, raise);
      });
      this.raiseHandButton.addEventListener("click", function (event) {
        event.stopPropagation();
        property.value = _this5.raiseHandButton.classList.contains("selected");
      }, false);
    }
  }, {
    key: "setOnRaiseHandActive",
    value: function setOnRaiseHandActive(property) {
      var _this6 = this;

      property.subscribe(function (active) {
        _this6.setActive(_this6.raiseHandButton, active);
      });
    }
  }, {
    key: "setOnShowQuiz",
    value: function setOnShowQuiz(property) {
      var _this7 = this;

      property.subscribe(function (show) {
        _this7.setSelected(_this7.showQuizButton, show);
      });
      this.showQuizButton.addEventListener("click", function (event) {
        event.stopPropagation();
        property.value = _this7.showQuizButton.classList.contains("selected");
      }, false);
    }
  }, {
    key: "setOnShowQuizActive",
    value: function setOnShowQuizActive(property) {
      var _this8 = this;

      this.setVisible(this.showQuizButton, property.value);
      this.toggleClass(this.showQuizButton, property.value, "pulse");
      property.subscribe(function (active) {
        _this8.setVisible(_this8.showQuizButton, active);

        _this8.toggleClass(_this8.showQuizButton, active, "pulse");
      });
    }
  }, {
    key: "setChatEnabled",
    value: function setChatEnabled(enabled) {
      this.setVisible(this.chatButton, enabled);
    }
  }, {
    key: "setOnChatAction",
    value: function setOnChatAction(property) {
      var _this9 = this;

      this.setActive(this.chatButton, property.value);
      property.subscribe(function (show) {
        _this9.setActive(_this9.chatButton, show);
      });
      this.chatButton.addEventListener("click", function (event) {
        event.stopPropagation();
        property.value = _this9.chatButton.classList.contains("active");
      }, false);
    }
  }, {
    key: "toggleClass",
    value: function toggleClass(button, add, name) {
      var classList = button.classList;

      if (add) {
        classList.add(name);
      } else {
        classList.remove(name);
      }
    }
  }, {
    key: "updateVolumeIndicator",
    value: function updateVolumeIndicator(volume) {
      if (volume === 0) {
        this.setVolumeIndicator("icon-volume0");
      } else if (volume < 0.33) {
        this.setVolumeIndicator("icon-volume1");
      } else if (volume > 0.33 && volume < 0.66) {
        this.setVolumeIndicator("icon-volume2");
      } else if (volume > 0.66) {
        this.setVolumeIndicator("icon-volume3");
      }
    }
  }, {
    key: "setFullscreenIndicator",
    value: function setFullscreenIndicator(indicatorName) {
      var classList = this.fullscreenButton.classList;
      classList.remove("bi-fullscreen", "bi-fullscreen-exit");
      classList.add(indicatorName);
    }
  }, {
    key: "setVolumeIndicator",
    value: function setVolumeIndicator(indicatorName) {
      var classList = this.volumeIndicator.classList;
      classList.remove("icon-mute");

      for (var i = 0; i < 4; i++) {
        classList.remove("icon-volume" + i);
      }

      classList.add(indicatorName);
    }
  }]);

  return WebPlayerControls;
}(_view_web_view_element__WEBPACK_IMPORTED_MODULE_8__.WebViewElement)) || _class);


/***/ }),

/***/ "./src/event/size-event.ts":
/*!*********************************!*\
  !*** ./src/event/size-event.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SizeEvent": () => (/* binding */ SizeEvent)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var SizeEvent = /*#__PURE__*/function () {
  function SizeEvent(size) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SizeEvent);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_size", void 0);

    this._size = size;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SizeEvent, [{
    key: "size",
    get: function get() {
      return this._size;
    }
  }]);

  return SizeEvent;
}();



/***/ }),

/***/ "./src/extension/array.extension.ts":
/*!******************************************!*\
  !*** ./src/extension/array.extension.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
if (Array.prototype.equals) {
  console.warn("Overriding existing Array.prototype.equals.");
}

Array.prototype.equals = function (other) {
  if (!other) {
    return false;
  }

  if (this === other) {
    return true;
  }

  if (this.length != other.length) {
    return false;
  }

  for (var i = 0, l = this.length; i < l; i++) {
    if (this[i] instanceof Array && other[i] instanceof Array) {
      if (!this[i].equals(other[i])) {
        return false;
      }
    } else if (this[i] != other[i]) {
      // TODO optional: compare objects.
      return false;
    }
  }

  return true;
}; // Hide method from for-in loops.


Object.defineProperty(Array.prototype, "equals", {
  enumerable: false
});


/***/ }),

/***/ "./src/extension/context-2d.extension.ts":
/*!***********************************************!*\
  !*** ./src/extension/context-2d.extension.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _geometry_transform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry/transform */ "./src/geometry/transform.ts");

var _getTransform = CanvasRenderingContext2D.prototype.getTransform;

CanvasRenderingContext2D.prototype.getTransformExt = function () {
  if (_getTransform) {
    // This is the DOMMatrix.
    var m = _getTransform.apply(this, Array.from(arguments));

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.setValues(m.a, m.b, m.c, m.d, m.e, m.f);
  }

  return this._transform_ext;
};

if (!_getTransform) {
  var _resetTransform = CanvasRenderingContext2D.prototype.resetTransform;
  var _rotate = CanvasRenderingContext2D.prototype.rotate;
  var _scale = CanvasRenderingContext2D.prototype.scale;
  var _setTransform = CanvasRenderingContext2D.prototype.setTransform;
  var _transform = CanvasRenderingContext2D.prototype.transform;
  var _translate = CanvasRenderingContext2D.prototype.translate;
  var _save = CanvasRenderingContext2D.prototype.save;
  var _restore = CanvasRenderingContext2D.prototype.restore;

  CanvasRenderingContext2D.prototype.resetTransform = function () {
    if (_resetTransform) {
      _resetTransform.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.reset();
  };

  CanvasRenderingContext2D.prototype.rotate = function (angle) {
    if (_rotate) {
      _rotate.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.rotate(angle);
  };

  CanvasRenderingContext2D.prototype.scale = function (x, y) {
    if (_scale) {
      _scale.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.scale(x, y);
  };

  CanvasRenderingContext2D.prototype.setTransform = function (a, b, c, d, e, f) {
    if (_setTransform) {
      _setTransform.apply(this, Array.from(arguments));
    }

    if (b) {
      a = a;
    } else {
      var domMatrix = a;
      a = domMatrix.a;
      b = domMatrix.b;
      c = domMatrix.c;
      d = domMatrix.d;
      e = domMatrix.e;
      f = domMatrix.f;
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.setValues(a, b, c, d, e, f);
  };

  CanvasRenderingContext2D.prototype.transform = function (a, b, c, d, e, f) {
    if (_transform) {
      _transform.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.multiply(new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform([a, b, c, d, e, f]));
  };

  CanvasRenderingContext2D.prototype.translate = function (x, y) {
    if (_translate) {
      _translate.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext.translate(x, y);
  };

  CanvasRenderingContext2D.prototype.save = function () {
    if (_save) {
      _save.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext_stack) {
      this._transform_ext_stack = [];
    }

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }

    this._transform_ext_stack.push(this._transform_ext.clone());
  };

  CanvasRenderingContext2D.prototype.restore = function () {
    if (_restore) {
      _restore.apply(this, Array.from(arguments));
    }

    if (!this._transform_ext_stack) {
      this._transform_ext_stack = [];
    }

    this._transform_ext = this._transform_ext_stack.pop();

    if (!this._transform_ext) {
      this._transform_ext = new _geometry_transform__WEBPACK_IMPORTED_MODULE_0__.Transform();
    }
  };
}



/***/ }),

/***/ "./src/extension/fullscreen.extension.ts":
/*!***********************************************!*\
  !*** ./src/extension/fullscreen.extension.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var specKeys = {
  fullscreenEnabled: 0,
  fullscreenElement: 1,
  requestFullscreen: 2,
  exitFullscreen: 3,
  fullscreenchange: 4,
  fullscreenerror: 5
};
var webkit = ['webkitFullscreenEnabled', 'webkitFullscreenElement', 'webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitfullscreenchange', 'webkitfullscreenerror'];
var moz = ['mozFullScreenEnabled', 'mozFullScreenElement', 'mozRequestFullScreen', 'mozCancelFullScreen', 'mozfullscreenchange', 'mozfullscreenerror'];
var ms = ['msFullscreenEnabled', 'msFullscreenElement', 'msRequestFullscreen', 'msExitFullscreen', 'MSFullscreenChange', 'MSFullscreenError'];
var spec = Object.keys(specKeys);
var vendor = null;

for (var _i = 0, _arr = [spec, webkit, moz, ms]; _i < _arr.length; _i++) {
  var v = _arr[_i];

  if (v[specKeys.fullscreenEnabled] in document) {
    vendor = v;
    break;
  }
}

if (vendor) {
  var proto = Element.prototype;
  proto.requestFullscreen = proto[vendor[specKeys.requestFullscreen]];
  proto = Document.prototype;
  proto.exitFullscreen = proto[vendor[specKeys.exitFullscreen]];
  var fullscreenElement = spec[specKeys.fullscreenElement];
  var fullscreenEnabled = spec[specKeys.fullscreenEnabled];

  if (!(fullscreenElement in document)) {
    Object.defineProperty(document, fullscreenElement, {
      get: function get() {
        return document[vendor[specKeys.fullscreenElement]];
      }
    });
    Object.defineProperty(document, fullscreenEnabled, {
      get: function get() {
        return document[vendor[specKeys.fullscreenEnabled]];
      }
    });
  }

  if (spec !== vendor) {
    var proxyListener = function proxyListener(event) {
      var actionType = event.type.replace(/^(webkit|moz|MS)/, '').toLowerCase();
      var newEvent;

      if (typeof Event === 'function') {
        newEvent = new Event(actionType, event);
      } else {
        newEvent = document.createEvent('Event');
        newEvent.initEvent(actionType, event.bubbles, event.cancelable);
      }

      event.target.dispatchEvent(newEvent);
    };

    document.addEventListener(vendor[specKeys.fullscreenchange], proxyListener);
    document.addEventListener(vendor[specKeys.fullscreenerror], proxyListener);
  }
}



/***/ }),

/***/ "./src/extension/index.ts":
/*!********************************!*\
  !*** ./src/extension/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _array_extension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./array.extension */ "./src/extension/array.extension.ts");
/* harmony import */ var _context_2d_extension__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context-2d.extension */ "./src/extension/context-2d.extension.ts");
/* harmony import */ var _fullscreen_extension__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fullscreen.extension */ "./src/extension/fullscreen.extension.ts");
/* harmony import */ var _string_extension__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string.extension */ "./src/extension/string.extension.ts");





/***/ }),

/***/ "./src/extension/string.extension.ts":
/*!*******************************************!*\
  !*** ./src/extension/string.extension.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/typeof */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");


String.format = function (str) {
  for (var _len = arguments.length, arr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    arr[_key - 1] = arguments[_key];
  }

  var i = -1;

  function callback(exp, p0, p1, p2, p3, p4) {
    if (exp == '%%') return '%';
    if (arr[++i] === undefined) return undefined;
    exp = p2 ? parseInt(p2.substr(1)) : undefined;
    var base = p3 ? parseInt(p3.substr(1)) : undefined;
    var val;

    switch (p4) {
      case 's':
        val = arr[i];
        break;

      case 'c':
        val = arr[i][0];
        break;

      case 'f':
        val = parseFloat(arr[i]).toFixed(exp);
        break;

      case 'p':
        val = parseFloat(arr[i]).toPrecision(exp);
        break;

      case 'e':
        val = parseFloat(arr[i]).toExponential(exp);
        break;

      case 'x':
        val = parseInt(arr[i]).toString(base ? base : 16);
        break;

      case 'd':
        val = parseFloat(parseInt(arr[i], base ? base : 10).toPrecision(exp)).toFixed(0);
        break;
    }

    val = (0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__["default"])(val) == 'object' ? JSON.stringify(val) : val.toString(base);
    var sz = parseInt(p1);
    /* padding size */

    var ch = p1 && p1[0] == '0' ? '0' : ' ';
    /* isnull? */

    while (val.length < sz) {
      val = p0 !== undefined ? val + ch : ch + val;
    }
    /* isminus? */


    return val;
  }

  var regex = /%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;
  return str.replace(regex, callback);
};



/***/ }),

/***/ "./src/geometry/dimension.ts":
/*!***********************************!*\
  !*** ./src/geometry/dimension.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Dimension": () => (/* binding */ Dimension)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




/**
 * A Dimension specifies a size through its width and height.
 */
var Dimension = /*#__PURE__*/function () {
  /** The width of the dimension. */

  /** The height of the dimension. */

  /**
   * Constructs a new Dimension with the specified size.
   *
   * @param width the width of the dimension.
   * @param height the height of the dimension.
   */
  function Dimension(width, height) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Dimension);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "width", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "height", void 0);

    this.width = width;
    this.height = height;
  }
  /**
   * Tests whether the provided dimension describes the same dimension.
   * 
   * @param other the dimension to compare this dimension to.
   * 
   * @return true if the dimensions are equal, false otherwise.
   */


  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Dimension, [{
    key: "equals",
    value: function equals(other) {
      if (!other) {
        return false;
      }

      return this.width === other.height && this.height === other.height;
    }
    /**
     * @return a string representation of this dimension.
     */

  }, {
    key: "toString",
    value: function toString() {
      return "[".concat(this.height, ", ").concat(this.width, "]");
    }
  }]);

  return Dimension;
}();



/***/ }),

/***/ "./src/geometry/ellipse.ts":
/*!*********************************!*\
  !*** ./src/geometry/ellipse.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Ellipse": () => (/* binding */ Ellipse)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var Ellipse = /*#__PURE__*/function () {
  /** The X coordinate of the upper-left corner of the Ellipse. */

  /** The Y coordinate of the upper-left corner of the Ellipse. */

  /** The overall width of the Ellipse. */

  /** The overall height of the Ellipse. */

  /** The major-axis radius of the Ellipse. */

  /** The minor-axis radius of the Ellipse. */

  /** The X coordinate of the center of the Ellipse. */

  /** The Y coordinate of the center of the Ellipse. */

  /**
   * Constructs an Ellipse from the specified coordinates.
   *
   * @param x the X coordinate of the upper-left corner of the Ellipse.
   * @param y the Y coordinate of the upper-left corner of the Ellipse.
   * @param width the width of the Ellipse.
   * @param height the height of the Ellipse.
   */
  function Ellipse(x, y, width, height) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Ellipse);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "x", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "y", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "width", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "height", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "radiusX", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "radiusY", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "centerX", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "centerY", void 0);

    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.radiusX = width * 0.5;
    this.radiusY = height * 0.5;
    this.centerX = x + this.radiusX;
    this.centerY = y + this.radiusY;
  }
  /**
   * Tests if the specified coordinates are inside the boundary of the Ellipse.
   * 
   * @param x the specified X coordinate to be tested.
   * @param y the specified Y coordinate to be tested.
   * 
   * @return true if the specified coordinates are inside the Ellipse boundary,
   *         false otherwise.
   */


  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Ellipse, [{
    key: "containsPoint",
    value: function containsPoint(x, y) {
      var w = this.width;

      if (w <= 0.0) {
        return false;
      }

      var h = this.height;

      if (h <= 0.0) {
        return false;
      }

      var normX = (x - this.x) / w - 0.5;
      var normY = (y - this.y) / h - 0.5;
      return normX * normX + normY * normY < 0.25;
    }
    /**
     * Tests if the Ellipse entirely contains the specified rectangle.
     *
     * @param x the X coordinate of the upper-left corner of the specified rectangle.
     * @param y the Y coordinate of the upper-left corner of the specified rectangle.
     * @param w the width of the specified rectangle.
     * @param h the height of the specified rectangle.
     * 
     * @return true if the Ellipse entirely contains the specified rectangle,
     *         false otherwise.
     */

  }, {
    key: "containsRect",
    value: function containsRect(x, y, width, height) {
      return this.containsPoint(x, y) && this.containsPoint(x + width, y) && this.containsPoint(x, y + height) && this.containsPoint(x + width, y + height);
    }
    /**
     * Tests if the Ellipse intersects the specified rectangle.
     *
     * @param x the X coordinate of the upper-left corner of the specified rectangle.
     * @param y the Y coordinate of the upper-left corner of the specified rectangle.
     * @param w the width of the specified rectangle.
     * @param h the height of the specified rectangle.
     * 
     * @return true if the Ellipse and the rectangle intersect each other,
     *         false otherwise.
     */

  }, {
    key: "intersectsRect",
    value: function intersectsRect(x, y, width, height) {
      if (width <= 0.0 || height <= 0.0) {
        return false;
      }

      if (this.width <= 0.0 || this.height <= 0.0) {
        return false;
      } // Test whether the rectangle encloses the ellipse center.


      if (this.centerX >= x && this.centerY >= y && this.centerX <= x + width && this.centerY <= y + height) {
        return true;
      }

      return this.intersectsLine(x, y, x + width, y) || this.intersectsLine(x, y + height, x + width, y + height) || this.intersectsLine(x, y, x, y + height) || this.intersectsLine(x + width, y, x + width, y + height);
    }
    /**
     * Tests if the Ellipse intersects the line segment (x1,y1) to (x2,y2).
     *
        * @param x1 the X coordinate of the start point of the line segment.
        * @param y1 the Y coordinate of the start point of the line segment.
        * @param x2 the X coordinate of the end point of the line segment.
        * @param y2 the Y coordinate of the end point of the line segment.
     *
     * @return true if the Ellipse and the line segment intersect each other,
     *         false otherwise.
     */

  }, {
    key: "intersectsLine",
    value: function intersectsLine(x1, y1, x2, y2) {
      if (this.width <= 0.0 || this.height <= 0.0) {
        return false;
      }

      x1 -= this.centerX;
      x2 -= this.centerX;
      y1 -= this.centerY;
      y2 -= this.centerY;
      var rxsq = this.radiusX * this.radiusX;
      var rysq = this.radiusY * this.radiusY;
      var A = Math.pow(x2 - x1, 2) / rxsq + Math.pow(y2 - y1, 2) / rysq;
      var B = 2 * x1 * (x2 - x1) / rxsq + 2 * y1 * (y2 - y1) / rysq;
      var C = x1 * x1 / rxsq + y1 * y1 / rysq - 1;
      var D = B * B - 4 * A * C;

      if (D === 0) {
        var t = -B / 2 / A;
        return t >= 0 && t <= 1;
      } else if (D > 0) {
        var sqrt = Math.sqrt(D);
        var t1 = (-B + sqrt) / 2 / A;
        var t2 = (-B - sqrt) / 2 / A;
        return t1 >= 0 && t1 <= 1 || t2 >= 0 && t2 <= 1;
      }

      return false;
    }
  }]);

  return Ellipse;
}();



/***/ }),

/***/ "./src/geometry/line.ts":
/*!******************************!*\
  !*** ./src/geometry/line.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Line": () => (/* binding */ Line)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./point */ "./src/geometry/point.ts");





var Line = /*#__PURE__*/function () {
  /** The x coordinate of the start point. */

  /** The y coordinate of the start point. */

  /** The x coordinate of the end point. */

  /** The y coordinate of the end point. */

  /**
   * Constructs a Line from the start point (x1,y1) to the end point (x2,y2).
   *
      * @param x1 the X coordinate of the start point.
      * @param y1 the Y coordinate of the start point.
      * @param x2 the X coordinate of the end point.
      * @param y2 the Y coordinate of the end point.
   */
  function Line(x1, y1, x2, y2) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Line);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "x1", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "y1", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "x2", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "y2", void 0);

    this.set(x1, y1, x2, y2);
  }
  /**
   * Sets new start (x1,y1) and end (x2,y2) coordinates.
   * 
   * @param start the start point (x1,y1) of the line.
   * @param end the end point (x2,y2) of the line.
   */


  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Line, [{
    key: "set",
    value: function set(x1, y1, x2, y2) {
      this.x1 = x1;
      this.y1 = y1;
      this.x2 = x2;
      this.y2 = y2;
    }
    /**
     * The start point (x1,y1) of the line represented by {@link Point}.
     *
     * @return the start point (x1,y1).
     */

  }, {
    key: "getStartPoint",
    value: function getStartPoint() {
      return new _point__WEBPACK_IMPORTED_MODULE_3__.Point(this.x1, this.y1);
    }
    /**
     * The end point (x2,y2) of the line represented by {@link Point}.
     *
     * @return the end point (x2,y2).
     */

  }, {
    key: "getEndPoint",
    value: function getEndPoint() {
      return new _point__WEBPACK_IMPORTED_MODULE_3__.Point(this.x2, this.y2);
    }
    /**
     * Returns the shortest distance from the specified point to this line.
     * 
     * @param x the X coordinate of the point.
     * @param y the Y coordinate of the point.
     * 
     * @return the shortest distance from a point to this line.
     */

  }, {
    key: "distance",
    value: function distance(x, y) {
      var dx = this.x2 - this.x1;
      var dy = this.y2 - this.y1;
      var length = Math.sqrt(dx * dx + dy * dy);
      return Math.abs(((this.y1 - this.y2) * x + dx * y + (this.x1 * this.y2 - this.x2 * this.y1)) / length);
    }
    /**
     * Tests if the specified line intersects this line.
     * 
     * @param line the line to check the intersection with.
     * 
     * @return true if the lines intersect each other, false otherwise.
     */

  }, {
    key: "intersects",
    value: function intersects(line) {
      return Line.intersects(this.x1, this.y1, this.x2, this.y2, line.x1, line.y1, line.x2, line.y2);
    }
    /**
     * Computes the intersection point of this line segment and the provided line
     * segment.
     *
     * @param x3 the X coordinate of the start point of the specified line segment.
     * @param y3 the Y coordinate of the start point of the specified line segment.
     * @param x4 the X coordinate of the end point of the specified line segment.
     * @param y4 the Y coordinate of the end point of the specified line segment.
     *
     * @return the intersection point of the two line segments, null if the line
     *         segments do not intersect each other.
     */

  }, {
    key: "getIntersectionPoint",
    value: function getIntersectionPoint(x3, y3, x4, y4) {
      var d = (y4 - y3) * (this.x2 - this.x1) - (x4 - x3) * (this.y2 - this.y1); // Are the lines parallel.

      if (Math.abs(d) < 0.01) {
        return null;
      } // Calculate the intermediate fractional point.


      var a = (x4 - x3) * (this.y1 - y3) - (y4 - y3) * (this.x1 - x3);
      var b = (this.x2 - this.x1) * (this.y1 - y3) - (this.y2 - this.y1) * (this.x1 - x3);
      var ua = a / d;
      var ub = b / d; // Test for intersection along the the segments.

      if (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {
        var A1 = this.y2 - this.y1;
        var B1 = this.x1 - this.x2;
        var C1 = A1 * this.x1 + B1 * this.y1;
        var A2 = y4 - y3;
        var B2 = x3 - x4;
        var C2 = A2 * x3 + B2 * y3;
        return new _point__WEBPACK_IMPORTED_MODULE_3__.Point((B2 * C1 - B1 * C2) / d, (A1 * C2 - A2 * C1) / d);
      }

      return null;
    }
    /**
     * Tests if the line segment from (x1,y1) to (x2,y2) intersects the line segment
     * from (x3,y3) to (x4,y4).
     *
        * @param x1 the X coordinate of the start point of the first specified line segment.
        * @param y1 the Y coordinate of the start point of the first specified line segment.
        * @param x2 the X coordinate of the end point of the first specified line segment.
        * @param y2 the Y coordinate of the end point of the first specified line segment.
        * @param x3 the X coordinate of the start point of the second specified line segment.
        * @param y3 the Y coordinate of the start point of the second specified line segment.
        * @param x4 the X coordinate of the end point of the second specified line segment.
        * @param y4 the Y coordinate of the end point of the second specified line segment.
     *
     * @return true if the line segments intersect each other, false otherwise.
     */

  }], [{
    key: "intersects",
    value: function intersects(x1, y1, x2, y2, x3, y3, x4, y4) {
      var d = (y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1); // Are the lines parallel.

      if (d == 0) {
        return false;
      } // Calculate the intermediate fractional point.


      var a = (x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3);
      var b = (x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3);
      var ua = a / d;
      var ub = b / d; // Test for intersection along the the segments.

      if (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {
        return true;
      }

      return false;
    }
  }]);

  return Line;
}();



/***/ }),

/***/ "./src/geometry/pen-point.ts":
/*!***********************************!*\
  !*** ./src/geometry/pen-point.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PenPoint": () => (/* binding */ PenPoint)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./point */ "./src/geometry/point.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var PenPoint = /*#__PURE__*/function (_Point) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(PenPoint, _Point);

  var _super = _createSuper(PenPoint);

  /** The pressure. */
  function PenPoint(x, y, p) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PenPoint);

    _this = _super.call(this, x, y);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "p", void 0);

    _this.p = p;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PenPoint, [{
    key: "clone",
    value: function clone() {
      return new PenPoint(this.x, this.y, this.p);
    }
  }, {
    key: "equals",
    value: function equals(other) {
      if (!other) {
        return false;
      }

      return this.x === other.x && this.y === other.y && this.p === other.p;
    }
  }], [{
    key: "createZero",
    value: function createZero() {
      return new PenPoint(0, 0, 0);
    }
  }]);

  return PenPoint;
}(_point__WEBPACK_IMPORTED_MODULE_7__.Point);



/***/ }),

/***/ "./src/geometry/pen-stroke.ts":
/*!************************************!*\
  !*** ./src/geometry/pen-stroke.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PenStroke": () => (/* binding */ PenStroke)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./point */ "./src/geometry/point.ts");
/* harmony import */ var _pen_point__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pen-point */ "./src/geometry/pen-point.ts");
/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./line */ "./src/geometry/line.ts");





function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }





var PenStroke = /*#__PURE__*/function () {
  /** Temporary working space. */

  /** Bottom line of the stroke. */

  /** Top line of the stroke. */

  /** Last two inserted points. */

  /** The stroke width. */
  function PenStroke(strokeWidth) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, PenStroke);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "vector", new _point__WEBPACK_IMPORTED_MODULE_4__.Point(0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "normal", new _point__WEBPACK_IMPORTED_MODULE_4__.Point(0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "miter", new _point__WEBPACK_IMPORTED_MODULE_4__.Point(0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "offsetA", new _point__WEBPACK_IMPORTED_MODULE_4__.Point(0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "offsetB", new _point__WEBPACK_IMPORTED_MODULE_4__.Point(0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "lastLineTop", new _line__WEBPACK_IMPORTED_MODULE_6__.Line(0, 0, 0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "lastLineBottom", new _line__WEBPACK_IMPORTED_MODULE_6__.Line(0, 0, 0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "A", new Array());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "B", new Array());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "points", new Array());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "strokeWidth", void 0);

    this.strokeWidth = strokeWidth;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(PenStroke, [{
    key: "getStrokeList",
    value: function getStrokeList() {
      if (this.points.length === 0) {
        return null;
      }

      var stroke = new Array(); // Special case with only one point.

      if (this.points.length == 1) {
        this.capOnePoint(stroke, this.points[0], this.strokeWidth);
        return stroke;
      } // Get bottom line.


      stroke.push.apply(stroke, (0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(this.A)); // Cap last point.

      this.capEndpoint(stroke, this.points[1], this.points[0], false); // Get top line.

      stroke.push.apply(stroke, (0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(this.B));
      return stroke;
    }
  }, {
    key: "addPoint",
    value: function addPoint(point) {
      this.points.push(point.clone());
      var pSize = this.points.length;

      if (pSize > 1) {
        if (pSize > 2) {
          // Keep track only of two last observed points.
          this.points.shift();
        }

        var p0 = this.points[0];

        if (this.A.length === 0 || this.B.length === 0) {
          // Cap first point.
          this.capEndpoint(this.A, p0, point, false);
          this.beginPath(p0, point);
        } else {
          this.advance(p0, point);
        }
      }
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      // Handle simple cases.
      if (this.points.length === 0) {
        return false;
      } else if (this.points.length === 1) {
        return rect.containsPoint(this.points[0]);
      }

      if (this.intersectsRect(this.A, rect)) {
        return true;
      }

      if (this.intersectsRect(this.B, rect)) {
        return true;
      }

      return false;
    }
  }, {
    key: "moveByDelta",
    value: function moveByDelta(delta) {
      var _iterator = _createForOfIteratorHelper(this.A),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          point.subtract(delta);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      var _iterator2 = _createForOfIteratorHelper(this.B),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _point = _step2.value;

          _point.subtract(delta);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      var _iterator3 = _createForOfIteratorHelper(this.points),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var _point2 = _step3.value;

          _point2.subtract(delta);
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    }
  }, {
    key: "clone",
    value: function clone() {
      var stroke = new PenStroke(this.strokeWidth);

      var _iterator4 = _createForOfIteratorHelper(this.A),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var point = _step4.value;
          stroke.A.push(point.clone());
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }

      var _iterator5 = _createForOfIteratorHelper(this.B),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var _point3 = _step5.value;
          stroke.B.push(_point3.clone());
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }

      var _iterator6 = _createForOfIteratorHelper(this.points),
          _step6;

      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var _point4 = _step6.value;
          stroke.points.push(_point4.clone());
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }

      return stroke;
    }
  }, {
    key: "advance",
    value: function advance(p0, p1) {
      this.advancePath(this.A, p0, p1, false);
      this.advancePath(this.B, p0, p1, true);
    }
  }, {
    key: "advancePath",
    value: function advancePath(target, p0, p1, reverse) {
      this.vector.set(p1.x, p1.y).subtract(p0).normalize();
      this.normal.set(-this.vector.y, this.vector.x).normalize();
      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p0) / 2);
      this.offsetA.set(p0.x, p0.y);
      this.offset(this.offsetA, this.miter, reverse);
      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p1) / 2);
      this.offsetB.set(p1.x, p1.y);
      this.offset(this.offsetB, this.miter, reverse);
      var line = new _line__WEBPACK_IMPORTED_MODULE_6__.Line(this.offsetA.x, this.offsetA.y, this.offsetB.x, this.offsetB.y);
      var lastLine = reverse ? this.lastLineTop : this.lastLineBottom;
      var inter = lastLine.getIntersectionPoint(line.x1, line.y1, line.x2, line.y2);

      if (inter != null) {
        this.intersect(target, inter, reverse);
      } else {
        var a = lastLine.getEndPoint();
        var b = line.getStartPoint();
        var s = this.toDegrees(a, p0);
        var e = this.toDegrees(b, p0);
        var d = Math.abs(s - e);

        if (d > 180) {
          s %= 360;
          e %= 360;
        }

        this.cap(target, p0, s, e, this.strokeWidth * this.toPressure(p0) / 2, 2, reverse);
      }

      lastLine.set(line.x1, line.y1, line.x2, line.y2);
    }
  }, {
    key: "beginPath",
    value: function beginPath(p0, p1) {
      this.vector.set(p1.x, p1.y).subtract(p0).normalize();
      this.normal.set(-this.vector.y, this.vector.x).normalize(); // Bottom

      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p0) / 2);
      this.offsetA.set(p0.x, p0.y).add(this.miter);
      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p1) / 2);
      this.offsetB.set(p1.x, p1.y).add(this.miter);
      this.addPathPoint(this.A, this.offsetB.x, this.offsetB.y, false);
      this.lastLineBottom.set(this.offsetA.x, this.offsetA.y, this.offsetB.x, this.offsetB.y); // Top

      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p0) / 2);
      this.offsetA.set(p0.x, p0.y).subtract(this.miter);
      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p1) / 2);
      this.offsetB.set(p1.x, p1.y).subtract(this.miter);
      this.addPathPoint(this.B, this.offsetA.x, this.offsetA.y, true);
      this.addPathPoint(this.B, this.offsetB.x, this.offsetB.y, true);
      this.lastLineTop.set(this.offsetA.x, this.offsetA.y, this.offsetB.x, this.offsetB.y);
    }
  }, {
    key: "cap",
    value: function cap(target, center, start, end, radius, step, reverse) {
      if (start > end) {
        for (var angle = start; angle >= end; angle -= step) {
          var rad = Math.PI * angle / 180;
          var x = center.x + radius * Math.cos(rad);
          var y = center.y + radius * Math.sin(rad);
          this.addPathPoint(target, x, y, reverse);
        }
      } else {
        for (var _angle = start; _angle <= end; _angle += step) {
          var _rad = Math.PI * _angle / 180;

          var _x = center.x + radius * Math.cos(_rad);

          var _y = center.y + radius * Math.sin(_rad);

          this.addPathPoint(target, _x, _y, reverse);
        }
      }
    }
  }, {
    key: "capOnePoint",
    value: function capOnePoint(target, center, strokeWidth) {
      this.addPathPoint(target, center.x + strokeWidth * this.toPressure(center) / 2, center.y, false);
      this.cap(target, center, 0, 360, strokeWidth * this.toPressure(center) / 2, 2, false);
    }
  }, {
    key: "capEndpoint",
    value: function capEndpoint(target, p0, p1, reverse) {
      this.vector.set(p1.x, p1.y).subtract(p0).normalize();
      this.normal.set(-this.vector.y, this.vector.x).normalize();
      this.miter.set(this.normal.x, this.normal.y).multiply(this.strokeWidth * this.toPressure(p0) / 2);
      this.offsetA.set(p0.x, p0.y).add(this.miter);
      this.offsetB.set(p0.x, p0.y).subtract(this.miter); // First/Last point offset.

      this.addPathPoint(target, this.offsetB.x, this.offsetB.y, reverse); // Cap point with 180 degrees.

      var s = this.toDegrees(this.offsetB, this.offsetA);
      var e = s - 180;
      this.cap(target, p0, s, e, this.strokeWidth * this.toPressure(p0) / 2, 2, reverse);
    }
  }, {
    key: "addPathPoint",
    value: function addPathPoint(target, x, y, reverse) {
      if (reverse) {
        target.unshift(new _pen_point__WEBPACK_IMPORTED_MODULE_5__.PenPoint(x, y, 1));
      } else {
        target.push(new _pen_point__WEBPACK_IMPORTED_MODULE_5__.PenPoint(x, y, 1));
      }
    }
  }, {
    key: "intersect",
    value: function intersect(target, inter, reverse) {
      if (reverse) {
        target[0].set(inter.x, inter.y);
      } else {
        target[target.length - 1].set(inter.x, inter.y);
      }
    }
  }, {
    key: "offset",
    value: function offset(center, miter, reverse) {
      if (reverse) {
        center.subtract(miter);
      } else {
        center.add(miter);
      }
    }
  }, {
    key: "toPressure",
    value: function toPressure(point) {
      return Math.min(1.0, Math.sqrt(point.p + 0.1));
    }
  }, {
    key: "toDegrees",
    value: function toDegrees(p1, p2) {
      var degrees = Math.atan2(p1.y - p2.y, p1.x - p2.x);
      return (2 * Math.PI + degrees) * 180 / Math.PI;
    }
  }, {
    key: "intersectsRect",
    value: function intersectsRect(path, rect) {
      var index = 0;
      var p1 = path[index++];
      var p2 = null;

      while (index < path.length) {
        p2 = path[index++];

        if (rect.intersectsLine(p1.x, p1.y, p2.x, p2.y)) {
          return true;
        }

        p1 = p2;
      }

      return false;
    }
  }]);

  return PenStroke;
}();



/***/ }),

/***/ "./src/geometry/point.ts":
/*!*******************************!*\
  !*** ./src/geometry/point.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Point": () => (/* binding */ Point)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




/**
 * A Point object describes a point in the two dimensional space through
 * its (x,y) properties.
 */
var Point = /*#__PURE__*/function () {
  /** The x coordinate. */

  /** The y coordinate. */

  /**
   * Creates a new instance of Point with specified coordinates.
   *
   * @param x The x coordinate of the point.
   * @param y The y coordinate of the point.
   */
  function Point(x, y) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Point);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "x", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "y", void 0);

    this.x = x;
    this.y = y;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Point, [{
    key: "set",
    value: function set(x, y) {
      this.x = x;
      this.y = y;
      return this;
    }
    /**
     * Returns the distance from this Point to a specified Point.
     *
     * @param p The point to which the distance should be measured.
     *
     * @return The distance to the given point.
     */

  }, {
    key: "distance",
    value: function distance(point) {
      var dx = point.x - this.x;
      var dy = point.y - this.y;
      return Math.sqrt(dx * dx + dy * dy);
    }
  }, {
    key: "add",
    value: function add(point) {
      this.x += point.x;
      this.y += point.y;
      return this;
    }
  }, {
    key: "subtract",
    value: function subtract(point) {
      this.x -= point.x;
      this.y -= point.y;
      return this;
    }
  }, {
    key: "multiply",
    value: function multiply(scalar) {
      this.x *= scalar;
      this.y *= scalar;
      return this;
    }
  }, {
    key: "normalize",
    value: function normalize() {
      var length = Math.sqrt(this.x * this.x + this.y * this.y);
      this.x /= length;
      this.y /= length;
      return this;
    }
    /**
     * Tests whether the provided point describes the same point.
     *
     * @param other the point to compare this point to.
     *
     * @return true if the points are equal, false otherwise.
     */

  }, {
    key: "equals",
    value: function equals(other) {
      if (!other) {
        return false;
      }

      return this.x === other.x && this.y === other.y;
    }
  }]);

  return Point;
}();



/***/ }),

/***/ "./src/geometry/rectangle.ts":
/*!***********************************!*\
  !*** ./src/geometry/rectangle.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Rectangle": () => (/* binding */ Rectangle)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");



var INSIDE = 0;
var LEFT = 1;
var RIGHT = 2;
var BOTTOM = 4;
var TOP = 8;
/**
 * A Rectangle specifies an area that is enclosed by it's top-left point (x,y)
 * and its width and height.
 */

var Rectangle = /*#__PURE__*/function () {
  /** The x coordinate. */

  /** The y coordinate. */

  /** The width. */

  /** The height. */

  /**
   * Creates a new instance of Rectangle with specified location coordinates and size.
   *
   * @param x the x coordinate of the rectangle.
   * @param y the y coordinate of the rectangle.
   * @param width the width of the rectangle.
   * @param height the height of the rectangle.
   */
  function Rectangle(x, y, width, height) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Rectangle);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "x", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "y", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "width", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "height", void 0);

    this.set(x, y, width, height);
  }
  /**
   * Set new location coordinates and size of this rectangle.
   *
   * @param x the x coordinate of the rectangle.
   * @param y the y coordinate of the rectangle.
   * @param width the width of the rectangle.
   * @param height the height of the rectangle.
   */


  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Rectangle, [{
    key: "set",
    value: function set(x, y, width, height) {
      this.x = x;
      this.y = y;
      this.width = width;
      this.height = height;
    }
    /**
     * Determines whether the rectangle encloses some area.
     *
     * @return true if the rectangle is empty, false otherwise.
     */

  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this.width <= 0.0 || this.height <= 0.0;
    }
    /**
     * Tests if the specified point is inside the boundary of the rectangle.
     *
     * @param point the point that represents a x and y coordinate pair.
     *
     * @return true if the specified point is inside the boundary, false otherwise.
     */

  }, {
    key: "containsPoint",
    value: function containsPoint(point) {
      var px = point.x;
      var py = point.y;
      return px >= this.x && py >= this.y && px < this.x + this.width && py < this.y + this.height;
    }
    /**
     * Tests if the interior of this rectangle entirely encloses the specified
     * rectangle.
     *
     * @param rect The rectangle to check, whether it is enclosed by this rectangle.
     *
     * @return true if the interior of this rectangle entirely contains the
     *         specified area, false otherwise.
     */

  }, {
    key: "containsRect",
    value: function containsRect(rect) {
      if (this.isEmpty() || rect.isEmpty()) {
        return false;
      }

      var x = rect.x;
      var y = rect.y;
      var w = rect.width;
      var h = rect.height;
      var x0 = this.x;
      var y0 = this.y;
      return x >= x0 && y >= y0 && x + w <= x0 + this.width && y + h <= y0 + this.height;
    }
    /**
     * Tests if the line segment from (x1,y1) to (x2,y2) intersects this rectangle.
     * 
     * @param x1 the X coordinate of the start point of the line segment.
     * @param y1 the Y coordinate of the start point of the line segment.
     * @param x2 the X coordinate of the end point of the line segment.
     * @param y2 the Y coordinate of the end point of the line segment.
     * 
     * @return true if the line segment intersects this rectangle, false otherwise.
     */

  }, {
    key: "intersectsLine",
    value: function intersectsLine(x1, y1, x2, y2) {
      var xmin = this.x;
      var xmax = this.x + this.width;
      var ymin = this.y;
      var ymax = this.y + this.height;
      var outcode0 = this.computeCode(x1, y1, xmin, xmax, ymin, ymax);
      var outcode1 = this.computeCode(x2, y2, xmin, xmax, ymin, ymax);

      while (true) {
        if (!(outcode0 | outcode1)) {
          return true;
        } else if (outcode0 & outcode1) {
          return false;
        } else {
          var outcodeOut = outcode0 ? outcode0 : outcode1;
          var x = void 0,
              y = void 0;

          if (outcodeOut & TOP) {
            x = x1 + (x2 - x1) * (ymax - y1) / (y2 - y1);
            y = ymax;
          } else if (outcodeOut & BOTTOM) {
            x = x1 + (x2 - x1) * (ymin - y1) / (y2 - y1);
            y = ymin;
          } else if (outcodeOut & RIGHT) {
            y = y1 + (y2 - y1) * (xmax - x1) / (x2 - x1);
            x = xmax;
          } else if (outcodeOut & LEFT) {
            y = y1 + (y2 - y1) * (xmin - x1) / (x2 - x1);
            x = xmin;
          }

          if (outcodeOut == outcode0) {
            x1 = x;
            y1 = y;
            outcode0 = this.computeCode(x1, y1, xmin, xmax, ymin, ymax);
          } else {
            x2 = x;
            y2 = y;
            outcode1 = this.computeCode(x2, y2, xmin, xmax, ymin, ymax);
          }
        }
      }
    }
    /**
     * Intersects the provided rectangle with this one and puts the result into the
     * returned rectangle object.
     *
     * @param rect The rectangle to be intersected with this one.
     *
     * @return the intersection rectangle, or null if the rectangles don't intersect
     *         each other.
     */

  }, {
    key: "intersection",
    value: function intersection(rect) {
      var iX = Math.max(this.x, rect.x);
      var iY = Math.max(this.y, rect.y);
      var iW = Math.min(this.x + this.width, rect.x + rect.width) - iX;
      var iH = Math.min(this.y + this.height, rect.y + rect.height) - iY;

      if (iW <= 0) {
        return null;
      }

      if (iH <= 0) {
        return null;
      }

      return new Rectangle(iX, iY, iW, iH);
    }
    /**
     * Unions the provided rectangle with this one and puts the result into
     * this rectangle object.
     * 
     * @param rect The rectangle to be combined with this one.
     */

  }, {
    key: "union",
    value: function union(rect) {
      var x1 = Math.min(this.x, rect.x);
      var y1 = Math.min(this.y, rect.y);
      var x2 = Math.max(this.x + this.width, rect.x + rect.width);
      var y2 = Math.max(this.y + this.height, rect.y + rect.height);
      this.set(x1, y1, x2 - x1, y2 - y1);
    }
    /**
     * Tests whether the provided rectangle describes the same rectangle.
     *
     * @param other the rectangle to compare this rectangle to.
     *
     * @return true if the rectangles are equal, false otherwise.
     */

  }, {
    key: "equals",
    value: function equals(other) {
      if (!other) {
        return false;
      }

      return this.x === other.x && this.y === other.y && this.width === other.width && this.height === other.height;
    }
    /**
     * @return a string representation of this rectangle.
     */

  }, {
    key: "toString",
    value: function toString() {
      return "[".concat(this.x, ", ").concat(this.y, ", ").concat(this.height, ", ").concat(this.width, "]");
    }
    /**
     * @return a new empty rectangle which encloses no area.
     */

  }, {
    key: "computeCode",
    value: function computeCode(x, y, xmin, xmax, ymin, ymax) {
      var code = INSIDE;

      if (x < xmin) {
        code |= LEFT;
      } else if (x > xmax) {
        code |= RIGHT;
      }

      if (y < ymin) {
        code |= BOTTOM;
      } else if (y > ymax) {
        code |= TOP;
      }

      return code;
    }
  }], [{
    key: "empty",
    value: function empty() {
      return new Rectangle(0, 0, 0, 0);
    }
  }]);

  return Rectangle;
}();



/***/ }),

/***/ "./src/geometry/transform.ts":
/*!***********************************!*\
  !*** ./src/geometry/transform.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Transform": () => (/* binding */ Transform)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./point */ "./src/geometry/point.ts");





var Transform = /*#__PURE__*/function () {
  /** Transformation matrix elements */

  /**
   * Creates a new Transform with a transformation matrix specified by an array
   * consisting of [a, b, c, d, e, f] where the elements have the following
   * representation:
   * 
   * @value a: the horizontal scaling factor
   * @value b: the horizontal shearing factor
   * @value c: the vertical shearing factor
   * @value d: the vertical scaling factor
   * @value e: the horizontal translation factor
   * @value f: the vertical translation factor
   * 
   * If no transformation matrix is provided, the new transform is set to the
   * identity transform.
   * 
   * @param m The transformation matrix elements.
   */
  function Transform(m) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Transform);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "m", void 0);

    this.m = m ? m.slice(0, 6) : [1, 0, 0, 1, 0, 0];
  }
  /**
   * @returns the horizontal scaling factor.
   */


  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Transform, [{
    key: "getScaleX",
    value: function getScaleX() {
      return this.m[0];
    }
    /**
     * @returns the vertical scaling factor.
     */

  }, {
    key: "getScaleY",
    value: function getScaleY() {
      return this.m[3];
    }
    /**
     * @returns the horizontal shearing factor.
     */

  }, {
    key: "getShearX",
    value: function getShearX() {
      return this.m[1];
    }
    /**
     * @returns the vertical shearing factor.
     */

  }, {
    key: "getShearY",
    value: function getShearY() {
      return this.m[2];
    }
    /**
     * @returns the horizontal translation factor.
     */

  }, {
    key: "getTranslateX",
    value: function getTranslateX() {
      return this.m[4];
    }
    /**
     * @returns the vertical translation factor.
     */

  }, {
    key: "getTranslateY",
    value: function getTranslateY() {
      return this.m[5];
    }
    /**
     * Creates a deep copy of this transform.
     * 
     * @return a copy of this transform.
     */

  }, {
    key: "clone",
    value: function clone() {
      return new Transform(this.m);
    }
    /**
     * Resets this transform to the identity transform.
     */

  }, {
    key: "reset",
    value: function reset() {
      this.setValues(1, 0, 0, 1, 0, 0);
    }
    /**
     * Sets the matrix elements of this transform to the matrix elements provided
     * by the specified transform.
     * 
     * @param transform The transform to copy the matrix elements from.
     */

  }, {
    key: "setTransform",
    value: function setTransform(transform) {
      this.m[0] = transform.getScaleX();
      this.m[1] = transform.getShearX();
      this.m[2] = transform.getShearY();
      this.m[3] = transform.getScaleY();
      this.m[4] = transform.getTranslateX();
      this.m[5] = transform.getTranslateY();
    }
    /**
     * Sets the matrix elements of this transform to the provided 2D matrix elements.
     * 
     * @param a the horizontal scaling factor.
     * @param b the horizontal shearing factor.
     * @param c the vertical shearing factor.
     * @param d the vertical scaling factor.
     * @param e the horizontal translation factor.
     * @param f the vertical translation factor.
     */

  }, {
    key: "setValues",
    value: function setValues(a, b, c, d, e, f) {
      this.m[0] = a;
      this.m[1] = b;
      this.m[2] = c;
      this.m[3] = d;
      this.m[4] = e;
      this.m[5] = f;
    }
    /**
     * Inverts this transform in place.
     */

  }, {
    key: "invert",
    value: function invert() {
      var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);
      this.m[0] = this.m[3] * d;
      this.m[1] = -this.m[1] * d;
      this.m[2] = -this.m[2] * d;
      this.m[3] = this.m[0] * d;
      this.m[4] = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);
      this.m[5] = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);
    }
    /**
     * Multiplies this transform with the provided transform in place.
     * 
     * @param transform The transform to multiply with.
     */

  }, {
    key: "multiply",
    value: function multiply(transform) {
      this.m[0] = this.m[0] * transform.m[0] + this.m[2] * transform.m[1];
      this.m[1] = this.m[1] * transform.m[0] + this.m[3] * transform.m[1];
      this.m[2] = this.m[0] * transform.m[2] + this.m[2] * transform.m[3];
      this.m[3] = this.m[1] * transform.m[2] + this.m[3] * transform.m[3];
      this.m[4] = this.m[0] * transform.m[4] + this.m[2] * transform.m[5] + this.m[4];
      this.m[5] = this.m[1] * transform.m[4] + this.m[3] * transform.m[5] + this.m[5];
    }
    /**
     * Concatenates this transform with a rotation transformation.
     * 
     * @param angle The angle of rotation measured in radians.
     */

  }, {
    key: "rotate",
    value: function rotate(angle) {
      var c = Math.cos(angle);
      var s = Math.sin(angle);
      this.m[0] = this.m[0] * c + this.m[1] * s;
      this.m[1] = this.m[0] * -s + this.m[1] * c;
      this.m[2] = this.m[2] * c + this.m[3] * s;
      this.m[3] = this.m[2] * -s + this.m[3] * c;
    }
    /**
     * Concatenates this transform with a scaling transformation.
     * 
     * @param sx the horizontal scaling factor.
     * @param sy the vertical scaling factor.
     */

  }, {
    key: "scale",
    value: function scale(sx, sy) {
      this.m[0] *= sx;
      this.m[1] *= sx;
      this.m[2] *= sy;
      this.m[3] *= sy;
    }
    /**
     * Concatenates this transform with a translate transformation.
     * 
     * @param x the distance to translate in the x direction.
     * @param y the distance to translate in the y direction.
     */

  }, {
    key: "translate",
    value: function translate(x, y) {
      this.m[4] += this.m[0] * x + this.m[2] * y;
      this.m[5] += this.m[1] * x + this.m[3] * y;
    }
    /**
     * Transforms a point represented by (x,y) coordinates.
     * 
     * @param px the x coordinate of the point to transform.
     * @param py the y coordinate of the point to transform.
     * 
     * @return the transformed point.
     */

  }, {
    key: "transformPoint",
    value: function transformPoint(px, py) {
      var x = px;
      var y = py;
      px = x * this.m[0] + y * this.m[2] + this.m[4];
      py = x * this.m[1] + y * this.m[3] + this.m[5];
      return new _point__WEBPACK_IMPORTED_MODULE_3__.Point(px, py);
    }
    /**
     * Tests whether the provided transform describes the same transform.
     * 
     * @param other the transform to compare this transform to.
     * 
     * @return true if the transforms are equal, false otherwise.
     */

  }, {
    key: "equals",
    value: function equals(other) {
      if (!other) {
        return false;
      }

      return this.m.equals(other.m);
    }
    /**
     * @return a string representation of this transform.
     */

  }, {
    key: "toString",
    value: function toString() {
      return "[" + this.m.join(", ") + "]";
    }
  }]);

  return Transform;
}();



/***/ }),

/***/ "./src/media/media-player.ts":
/*!***********************************!*\
  !*** ./src/media/media-player.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MediaPlayer": () => (/* binding */ MediaPlayer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var MediaPlayer = /*#__PURE__*/function () {
  function MediaPlayer(media) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, MediaPlayer);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "media", void 0);

    this.media = media;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(MediaPlayer, [{
    key: "source",
    set: function set(source) {
      this.media.src = source;
    }
  }, {
    key: "duration",
    get: function get() {
      return this.media.duration;
    }
  }, {
    key: "time",
    get: function get() {
      return this.media.currentTime;
    },
    set: function set(time) {
      this.media.currentTime = time;
    }
  }, {
    key: "muted",
    get: function get() {
      return this.media.muted;
    },
    set: function set(muted) {
      this.media.muted = muted;
    }
  }, {
    key: "volume",
    get: function get() {
      return this.media.volume;
    },
    set: function set(volume) {
      this.media.volume = volume;
    }
  }, {
    key: "start",
    value: function start() {
      this.media.play();
    }
  }, {
    key: "stop",
    value: function stop() {
      this.media.pause();
    }
  }, {
    key: "addDurationListener",
    value: function addDurationListener(listener) {
      var _this = this;

      this.media.addEventListener("durationchange", function () {
        listener(_this.media.duration);
      }, false);
    }
  }, {
    key: "addTimeListener",
    value: function addTimeListener(listener) {
      var _this2 = this;

      this.media.addEventListener("timeupdate", function () {
        listener(_this2.media.currentTime);
      }, false);
    }
  }, {
    key: "addVolumeListener",
    value: function addVolumeListener(listener) {
      var _this3 = this;

      this.media.addEventListener("volumechange", function () {
        listener(_this3.media.volume);
      }, false);
    }
  }, {
    key: "addMutedListener",
    value: function addMutedListener(listener) {
      var _this4 = this;

      this.media.addEventListener("volumechange", function () {
        listener(_this4.media.muted);
      }, false);
    }
  }]);

  return MediaPlayer;
}();



/***/ }),

/***/ "./src/model/action/action-handler.ts":
/*!********************************************!*\
  !*** ./src/model/action/action-handler.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActionHandler": () => (/* binding */ ActionHandler)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var ActionHandler = /*#__PURE__*/function () {
  function ActionHandler(model) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ActionHandler);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "undoActions", []);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "redoActions", []);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "model", void 0);

    this.model = model;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ActionHandler, [{
    key: "executeAction",
    value: function executeAction(action) {
      this.undoActions.push(action);
      this.redoActions.length = 0;
      action.execute(this.model);
    }
  }, {
    key: "undo",
    value: function undo() {
      if (this.undoActions.length < 1) {
        return;
      }

      var action = this.undoActions.pop();
      this.redoActions.push(action);
      action.undo(this.model);
    }
  }, {
    key: "redo",
    value: function redo() {
      if (this.redoActions.length < 1) {
        return;
      }

      var action = this.redoActions.pop();
      this.undoActions.push(action);
      action.redo(this.model);
    }
  }, {
    key: "clear",
    value: function clear() {
      this.undoActions.length = 0;
      this.redoActions.length = 0;
    }
  }]);

  return ActionHandler;
}();



/***/ }),

/***/ "./src/model/action/add-shape.action.ts":
/*!**********************************************!*\
  !*** ./src/model/action/add-shape.action.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AddShapeAction": () => (/* binding */ AddShapeAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _shape_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shape.action */ "./src/model/action/shape.action.ts");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var AddShapeAction = /*#__PURE__*/function (_ShapeAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(AddShapeAction, _ShapeAction);

  var _super = _createSuper(AddShapeAction);

  function AddShapeAction(shapes) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, AddShapeAction);

    return _super.call(this, shapes);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(AddShapeAction, [{
    key: "execute",
    value: function execute(page) {
      var _iterator = _createForOfIteratorHelper(this.shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;
          page.addShape(shape);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "undo",
    value: function undo(page) {
      var _iterator2 = _createForOfIteratorHelper(this.shapes),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var shape = _step2.value;
          page.removeShape(shape);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "redo",
    value: function redo(page) {
      this.execute(page);
    }
  }]);

  return AddShapeAction;
}(_shape_action__WEBPACK_IMPORTED_MODULE_5__.ShapeAction);



/***/ }),

/***/ "./src/model/action/remove-shape.action.ts":
/*!*************************************************!*\
  !*** ./src/model/action/remove-shape.action.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RemoveShapeAction": () => (/* binding */ RemoveShapeAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _shape_action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shape.action */ "./src/model/action/shape.action.ts");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var RemoveShapeAction = /*#__PURE__*/function (_ShapeAction) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(RemoveShapeAction, _ShapeAction);

  var _super = _createSuper(RemoveShapeAction);

  function RemoveShapeAction(shapes) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RemoveShapeAction);

    return _super.call(this, shapes);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RemoveShapeAction, [{
    key: "execute",
    value: function execute(page) {
      var _iterator = _createForOfIteratorHelper(this.shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;
          page.removeShape(shape);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "undo",
    value: function undo(page) {
      var _iterator2 = _createForOfIteratorHelper(this.shapes),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var shape = _step2.value;
          page.addShape(shape);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "redo",
    value: function redo(page) {
      this.execute(page);
    }
  }]);

  return RemoveShapeAction;
}(_shape_action__WEBPACK_IMPORTED_MODULE_5__.ShapeAction);



/***/ }),

/***/ "./src/model/action/shape.action.ts":
/*!******************************************!*\
  !*** ./src/model/action/shape.action.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShapeAction": () => (/* binding */ ShapeAction)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var ShapeAction = /*#__PURE__*/(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(function ShapeAction(shapes) {
  (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, ShapeAction);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shapes", void 0);

  this.shapes = shapes;
});



/***/ }),

/***/ "./src/model/document.ts":
/*!*******************************!*\
  !*** ./src/model/document.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SlideDocument": () => (/* binding */ SlideDocument)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var SlideDocument = /*#__PURE__*/function () {
  function SlideDocument() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SlideDocument);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pages", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "documentId", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SlideDocument, [{
    key: "getDocumentId",
    value: function getDocumentId() {
      return this.documentId;
    }
  }, {
    key: "setDocumentId",
    value: function setDocumentId(id) {
      this.documentId = id;
    }
  }, {
    key: "getPageCount",
    value: function getPageCount() {
      return this.pages.length;
    }
  }, {
    key: "getPage",
    value: function getPage(pageNumber) {
      if (pageNumber < 0 || pageNumber > this.pages.length - 1) {
        throw new Error("Page number ".concat(pageNumber, " out of bounds."));
      }

      return this.pages[pageNumber];
    }
  }]);

  return SlideDocument;
}();



/***/ }),

/***/ "./src/model/page-event.ts":
/*!*********************************!*\
  !*** ./src/model/page-event.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PageChangeType": () => (/* binding */ PageChangeType),
/* harmony export */   "PageEvent": () => (/* binding */ PageEvent)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var PageEvent = /*#__PURE__*/function () {
  function PageEvent(page, changeType, shape, dirtyRegion) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PageEvent);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_changeType", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_page", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_dirtyRegion", void 0);

    this._page = page;
    this._changeType = changeType;
    this._shape = shape;
    this._dirtyRegion = dirtyRegion;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PageEvent, [{
    key: "changeType",
    get: function get() {
      return this._changeType;
    }
  }, {
    key: "page",
    get: function get() {
      return this._page;
    }
  }, {
    key: "shape",
    get: function get() {
      return this._shape;
    }
  }, {
    key: "dirtyRegion",
    get: function get() {
      return this._dirtyRegion;
    }
  }]);

  return PageEvent;
}();

var PageChangeType;

(function (PageChangeType) {
  PageChangeType["Clear"] = "Clear";
  PageChangeType["ShapeAdded"] = "ShapeAdded";
  PageChangeType["ShapeRemoved"] = "ShapeRemoved";
  PageChangeType["ShapeModified"] = "ShapeModified";
  PageChangeType["PageTransform"] = "PageTransform";
})(PageChangeType || (PageChangeType = {}));



/***/ }),

/***/ "./src/model/page.ts":
/*!***************************!*\
  !*** ./src/model/page.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Page": () => (/* binding */ Page)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _page_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./page-event */ "./src/model/page-event.ts");
/* harmony import */ var _utils_event_listener__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/event-listener */ "./src/utils/event-listener.ts");
/* harmony import */ var _action_action_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action/action-handler */ "./src/model/action/action-handler.ts");
/* harmony import */ var _shape_slide_shape__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./shape/slide.shape */ "./src/model/shape/slide.shape.ts");








var Page = /*#__PURE__*/function () {
  function Page(document, pageNumber) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Page);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shapeChangeListener", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "actionHandler", new _action_action_handler__WEBPACK_IMPORTED_MODULE_5__.ActionHandler(this));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "changeEvent", new _utils_event_listener__WEBPACK_IMPORTED_MODULE_4__.TypedEvent());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shapes", []);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "slideShape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "document", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pageNumber", void 0);

    this.document = document;
    this.pageNumber = pageNumber;
    this.slideShape = new _shape_slide_shape__WEBPACK_IMPORTED_MODULE_6__.SlideShape(this);
    this.slideShape.addChangeListener(this.onSlideTransform.bind(this));
    this.shapeChangeListener = this.onShapeModified.bind(this);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Page, [{
    key: "render",
    value: function render(context, viewRect, dirtyRegion) {
      return this.document.renderPage(this.pageNumber, context, viewRect, dirtyRegion);
    }
  }, {
    key: "renderText",
    value: function renderText(root, size) {
      this.document.renderPageText(this.pageNumber, root, size, this.getSlideShape().bounds);
    }
  }, {
    key: "addChangeListener",
    value: function addChangeListener(listener) {
      return this.changeEvent.subscribe(listener);
    }
  }, {
    key: "removeChangeListener",
    value: function removeChangeListener(listener) {
      this.changeEvent.unsubscribe(listener);
    }
  }, {
    key: "addShape",
    value: function addShape(shape) {
      var prevCount = this.shapes.length;

      if (this.shapes.push(shape) > prevCount) {
        shape.addChangeListener(this.shapeChangeListener);
        this.firePageEvent(new _page_event__WEBPACK_IMPORTED_MODULE_3__.PageEvent(this, _page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.ShapeAdded, shape));
      }
    }
  }, {
    key: "removeShape",
    value: function removeShape(shape) {
      var shapeIndex = this.shapes.indexOf(shape);

      if (shapeIndex > -1) {
        var deleted = this.shapes.splice(shapeIndex, 1);

        if (deleted.length > 0) {
          shape.removeChangeListener(this.shapeChangeListener);
          this.firePageEvent(new _page_event__WEBPACK_IMPORTED_MODULE_3__.PageEvent(this, _page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.ShapeRemoved, shape));
        }
      }
    }
  }, {
    key: "getPageNumber",
    value: function getPageNumber() {
      return this.pageNumber;
    }
  }, {
    key: "getSlideShape",
    value: function getSlideShape() {
      return this.slideShape;
    }
  }, {
    key: "getShapes",
    value: function getShapes() {
      return this.shapes;
    }
  }, {
    key: "hasShapes",
    value: function hasShapes() {
      return this.shapes.length > 0;
    }
  }, {
    key: "addAction",
    value: function addAction(action) {
      this.actionHandler.executeAction(action);
    }
  }, {
    key: "undo",
    value: function undo() {
      this.actionHandler.undo();
    }
  }, {
    key: "redo",
    value: function redo() {
      this.actionHandler.redo();
    }
  }, {
    key: "clear",
    value: function clear() {
      this.actionHandler.clear();
      this.shapes.length = 0;
      this.firePageEvent(new _page_event__WEBPACK_IMPORTED_MODULE_3__.PageEvent(this, _page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.Clear, null));
    }
  }, {
    key: "onSlideTransform",
    value: function onSlideTransform(event) {
      this.firePageEvent(new _page_event__WEBPACK_IMPORTED_MODULE_3__.PageEvent(this, _page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.PageTransform, event.shape, event.dirtyRegion));
    }
  }, {
    key: "onShapeModified",
    value: function onShapeModified(event) {
      this.firePageEvent(new _page_event__WEBPACK_IMPORTED_MODULE_3__.PageEvent(this, _page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.ShapeModified, event.shape, event.dirtyRegion));
    }
  }, {
    key: "firePageEvent",
    value: function firePageEvent(event) {
      this.changeEvent.publish(event);
    }
  }]);

  return Page;
}();



/***/ }),

/***/ "./src/model/pdf-js-document.ts":
/*!**************************************!*\
  !*** ./src/model/pdf-js-document.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PdfJsDocument": () => (/* binding */ PdfJsDocument)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./page */ "./src/model/page.ts");
/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./document */ "./src/model/document.ts");
/* harmony import */ var _render_pdf_renderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../render/pdf.renderer */ "./src/render/pdf.renderer.ts");
/* harmony import */ var _render_pdf_text_renderer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../render/pdf.text.renderer */ "./src/render/pdf.text.renderer.ts");










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






var PdfJsDocument = /*#__PURE__*/function (_SlideDocument) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["default"])(PdfJsDocument, _SlideDocument);

  var _super = _createSuper(PdfJsDocument);

  function PdfJsDocument(document) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, PdfJsDocument);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__["default"])(_this), "document", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__["default"])(_this), "renderer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__["default"])(_this), "textRenderer", void 0);

    _this.document = document;
    _this.renderer = new _render_pdf_renderer__WEBPACK_IMPORTED_MODULE_11__.PdfRenderer();
    _this.textRenderer = new _render_pdf_text_renderer__WEBPACK_IMPORTED_MODULE_12__.PdfTextRenderer();

    _this.loadPages(document);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(PdfJsDocument, [{
    key: "getPageText",
    value: function () {
      var _getPageText = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().mark(function _callee(pageNumber) {
        var page, content;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.document.getPage(pageNumber + 1);

              case 2:
                page = _context.sent;
                _context.next = 5;
                return page.getTextContent();

              case 5:
                content = _context.sent;
                return _context.abrupt("return", content.items.map(function (s) {
                  return s.str;
                }).join(' '));

              case 7:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function getPageText(_x) {
        return _getPageText.apply(this, arguments);
      }

      return getPageText;
    }()
  }, {
    key: "renderPage",
    value: function () {
      var _renderPage = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().mark(function _callee2(pageNumber, context, viewRect, dirtyRegion) {
        var pageProxy;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.getPdfPage(pageNumber);

              case 2:
                pageProxy = _context2.sent;
                return _context2.abrupt("return", this.renderer.render(pageProxy, context, viewRect, dirtyRegion));

              case 4:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function renderPage(_x2, _x3, _x4, _x5) {
        return _renderPage.apply(this, arguments);
      }

      return renderPage;
    }()
  }, {
    key: "renderPageText",
    value: function () {
      var _renderPageText = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().mark(function _callee3(pageNumber, root, size, viewRect) {
        var pageProxy;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return this.getPdfPage(pageNumber);

              case 2:
                pageProxy = _context3.sent;
                this.textRenderer.render(pageProxy, root, size, viewRect);

              case 4:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function renderPageText(_x6, _x7, _x8, _x9) {
        return _renderPageText.apply(this, arguments);
      }

      return renderPageText;
    }()
  }, {
    key: "getPdfPage",
    value: function getPdfPage(pageNumber) {
      return this.document.getPage(pageNumber + 1);
    }
  }, {
    key: "loadPages",
    value: function loadPages(document) {
      this.pages = [];

      for (var i = 0; i < document.numPages; i++) {
        this.pages.push(new _page__WEBPACK_IMPORTED_MODULE_9__.Page(this, i));
      }
    }
  }]);

  return PdfJsDocument;
}(_document__WEBPACK_IMPORTED_MODULE_10__.SlideDocument);



/***/ }),

/***/ "./src/model/playback-model.ts":
/*!*************************************!*\
  !*** ./src/model/playback-model.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlaybackModel": () => (/* binding */ PlaybackModel)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _utils_property__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/property */ "./src/utils/property.ts");





var PlaybackModel = /*#__PURE__*/function () {
  function PlaybackModel() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PlaybackModel);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_elementA", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_state", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_raisedHand", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_showQuiz", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_showChat", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_showQuizActive", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_webrtcConnected", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_webrtcPublisherConnected", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_videoAvailable", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_mainVideoAvailable", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_localVideoAvailable", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_selectedPageIndex", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_duration", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_time", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_volume", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_muted", new _utils_property__WEBPACK_IMPORTED_MODULE_3__.Property());
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PlaybackModel, [{
    key: "elementAProperty",
    get: function get() {
      return this._elementA;
    }
  }, {
    key: "selectedPageIndexProperty",
    get: function get() {
      return this._selectedPageIndex;
    }
  }, {
    key: "selectedPageIndex",
    get: function get() {
      return this._selectedPageIndex.value;
    },
    set: function set(index) {
      this._selectedPageIndex.value = index;
    }
  }, {
    key: "stateProperty",
    get: function get() {
      return this._state;
    }
  }, {
    key: "raisedHandProperty",
    get: function get() {
      return this._raisedHand;
    }
  }, {
    key: "raisedHand",
    set: function set(raised) {
      this._raisedHand.value = raised;
    }
  }, {
    key: "showChatProperty",
    get: function get() {
      return this._showChat;
    }
  }, {
    key: "showChat",
    get: function get() {
      return this._showChat.value;
    },
    set: function set(show) {
      this._showChat.value = show;
    }
  }, {
    key: "showQuizProperty",
    get: function get() {
      return this._showQuiz;
    }
  }, {
    key: "showQuiz",
    set: function set(show) {
      this._showQuiz.value = show;
    }
  }, {
    key: "showQuizActiveProperty",
    get: function get() {
      return this._showQuizActive;
    }
  }, {
    key: "showQuizActive",
    set: function set(active) {
      this._showQuizActive.value = active;
    }
  }, {
    key: "webrtcConnectedProperty",
    get: function get() {
      return this._webrtcConnected;
    }
  }, {
    key: "webrtcConnected",
    set: function set(connected) {
      this._webrtcConnected.value = connected;
    }
  }, {
    key: "webrtcPublisherConnectedProperty",
    get: function get() {
      return this._webrtcPublisherConnected;
    }
  }, {
    key: "webrtcPublisherConnected",
    set: function set(connected) {
      this._webrtcPublisherConnected.value = connected;
    }
  }, {
    key: "videoAvailableProperty",
    get: function get() {
      return this._videoAvailable;
    }
  }, {
    key: "videoAvailable",
    get: function get() {
      return this._videoAvailable.value;
    },
    set: function set(available) {
      this._videoAvailable.value = available;
    }
  }, {
    key: "mainVideoAvailableProperty",
    get: function get() {
      return this._mainVideoAvailable;
    }
  }, {
    key: "mainVideoAvailable",
    get: function get() {
      return this._mainVideoAvailable.value;
    },
    set: function set(available) {
      this._mainVideoAvailable.value = available;
    }
  }, {
    key: "localVideoAvailableProperty",
    get: function get() {
      return this._localVideoAvailable;
    }
  }, {
    key: "localVideoAvailable",
    get: function get() {
      return this._localVideoAvailable.value;
    },
    set: function set(available) {
      this._localVideoAvailable.value = available;
    }
  }, {
    key: "getState",
    value: function getState() {
      return this._state.value;
    }
  }, {
    key: "setState",
    value: function setState(state) {
      this._state.value = state;
    }
  }, {
    key: "durationProperty",
    get: function get() {
      return this._duration;
    }
  }, {
    key: "getDuration",
    value: function getDuration() {
      return this._duration.value;
    }
  }, {
    key: "setDuration",
    value: function setDuration(duration) {
      this._duration.value = duration;
    }
  }, {
    key: "timeProperty",
    get: function get() {
      return this._time;
    }
  }, {
    key: "getTime",
    value: function getTime() {
      return this._time.value;
    }
  }, {
    key: "setTime",
    value: function setTime(time) {
      this._time.value = time;
    }
  }, {
    key: "volumeProperty",
    get: function get() {
      return this._volume;
    }
  }, {
    key: "getVolume",
    value: function getVolume() {
      return this._volume.value;
    }
  }, {
    key: "setVolume",
    value: function setVolume(volume) {
      this._volume.value = volume;
    }
  }, {
    key: "mutedProperty",
    get: function get() {
      return this._muted;
    }
  }, {
    key: "getMuted",
    value: function getMuted() {
      return this._muted.value;
    }
  }, {
    key: "setMuted",
    value: function setMuted(muted) {
      this._muted.value = muted;
    }
  }]);

  return PlaybackModel;
}();



/***/ }),

/***/ "./src/model/recorded-page.ts":
/*!************************************!*\
  !*** ./src/model/recorded-page.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RecordedPage": () => (/* binding */ RecordedPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var RecordedPage = /*#__PURE__*/(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(function RecordedPage() {
  (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, RecordedPage);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "staticActions", []);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "playbackActions", []);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pageNumber", void 0);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "timestamp", void 0);
});



/***/ }),

/***/ "./src/model/shape/arrow.shape.ts":
/*!****************************************!*\
  !*** ./src/model/shape/arrow.shape.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArrowShape": () => (/* binding */ ArrowShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _form_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form.shape */ "./src/model/shape/form.shape.ts");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ArrowShape = /*#__PURE__*/function (_FormShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ArrowShape, _FormShape);

  var _super = _createSuper(ArrowShape);

  function ArrowShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ArrowShape);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ArrowShape, [{
    key: "clone",
    value: function clone() {
      var shape = new ArrowShape(this.handle, this.brush.clone());
      shape.bounds.set(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      shape.setKeyEvent(this.getKeyEvent());
      shape.setSelected(this.isSelected());

      var _iterator = _createForOfIteratorHelper(this.points),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          shape.points.push(point.clone());
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return shape;
    }
  }]);

  return ArrowShape;
}(_form_shape__WEBPACK_IMPORTED_MODULE_5__.FormShape);



/***/ }),

/***/ "./src/model/shape/ellipse.shape.ts":
/*!******************************************!*\
  !*** ./src/model/shape/ellipse.shape.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EllipseShape": () => (/* binding */ EllipseShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _form_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form.shape */ "./src/model/shape/form.shape.ts");
/* harmony import */ var _geometry_ellipse__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/ellipse */ "./src/geometry/ellipse.ts");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var EllipseShape = /*#__PURE__*/function (_FormShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(EllipseShape, _FormShape);

  var _super = _createSuper(EllipseShape);

  function EllipseShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, EllipseShape);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(EllipseShape, [{
    key: "contains",
    value: function contains(point) {
      if (this.points.length < 2) {
        return false;
      }

      var ellipse = new _geometry_ellipse__WEBPACK_IMPORTED_MODULE_6__.Ellipse(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);

      if (this.fill()) {
        return ellipse.containsPoint(point.x, point.y);
      }

      return ellipse.intersectsLine(point.x, point.y, point.x + this.brush.width, point.y + this.brush.width);
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      if (this.points.length < 2) {
        return false;
      }

      var ellipse = new _geometry_ellipse__WEBPACK_IMPORTED_MODULE_6__.Ellipse(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      return ellipse.intersectsRect(rect.x, rect.y, rect.width, rect.height);
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new EllipseShape(this.handle, this.brush.clone());
      shape.bounds.set(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      shape.setKeyEvent(this.getKeyEvent());
      shape.setSelected(this.isSelected());

      var _iterator = _createForOfIteratorHelper(this.points),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          shape.points.push(point.clone());
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return shape;
    }
  }]);

  return EllipseShape;
}(_form_shape__WEBPACK_IMPORTED_MODULE_5__.FormShape);



/***/ }),

/***/ "./src/model/shape/form.shape.ts":
/*!***************************************!*\
  !*** ./src/model/shape/form.shape.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FormShape": () => (/* binding */ FormShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stroke_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stroke.shape */ "./src/model/shape/stroke.shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var FormShape = /*#__PURE__*/function (_StrokeShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(FormShape, _StrokeShape);

  var _super = _createSuper(FormShape);

  function FormShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, FormShape);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(FormShape, [{
    key: "setP0",
    value: function setP0(point) {
      if (this.points.length > 0) {
        var prev = this.points[0];

        if (point.equals(prev)) {
          return false;
        }

        this.points[0] = point;
      } else {
        this.points.push(point);
      }

      return true;
    }
  }, {
    key: "setP1",
    value: function setP1(point) {
      if (this.points.length > 1) {
        var prev = this.points[1];

        if (point.equals(prev)) {
          return false;
        }

        this.points[1] = point;
      } else {
        this.points.push(point);
      }

      this.updateBounds();
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_6__.ShapeEvent(this, this.bounds));
      return true;
    }
  }, {
    key: "updateBounds",
    value: function updateBounds() {
      if (this.points.length < 2) {
        return;
      }

      var p0 = this.points[0];
      var p1 = this.points[1];

      if (p1.x < p0.x) {
        this.bounds.x = p1.x;
        this.bounds.width = p0.x - p1.x;
      } else {
        this.bounds.x = p0.x;
        this.bounds.width = p1.x - p0.x;
      }

      if (p1.y < p0.y) {
        this.bounds.y = p1.y;
        this.bounds.height = p0.y - p1.y;
      } else {
        this.bounds.y = p0.y;
        this.bounds.height = p1.y - p0.y;
      }
    }
    /**
     * Indicates whether to fill the interior of the shape.
     */

  }, {
    key: "fill",
    value: function fill() {
      var keyEvent = this.getKeyEvent();
      return keyEvent != null && keyEvent.altKey;
    }
  }]);

  return FormShape;
}(_stroke_shape__WEBPACK_IMPORTED_MODULE_5__.StrokeShape);



/***/ }),

/***/ "./src/model/shape/latex.shape.ts":
/*!****************************************!*\
  !*** ./src/model/shape/latex.shape.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatexShape": () => (/* binding */ LatexShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _typesetting_shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./typesetting.shape */ "./src/model/shape/typesetting.shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");
/* harmony import */ var _geometry_point__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../geometry/point */ "./src/geometry/point.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var LatexShape = /*#__PURE__*/function (_TypesettingShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LatexShape, _TypesettingShape);

  var _super = _createSuper(LatexShape);

  function LatexShape() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LatexShape);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "font", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LatexShape, [{
    key: "setFont",
    value: function setFont(font) {
      if (this.font && this.font.equals(font)) {
        return;
      }

      this.font = font;
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "getFont",
    value: function getFont() {
      return this.font;
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new LatexShape(this.handle);
      shape.setLocation(new _geometry_point__WEBPACK_IMPORTED_MODULE_9__.Point(this.bounds.x, this.bounds.y));
      shape.setFont(this.font);
      shape.setTextColor(this.getTextColor());
      shape.setTextAttributes(new Map(this.getTextAttributes()));
      return shape;
    }
  }]);

  return LatexShape;
}(_typesetting_shape__WEBPACK_IMPORTED_MODULE_7__.TypesettingShape);



/***/ }),

/***/ "./src/model/shape/line.shape.ts":
/*!***************************************!*\
  !*** ./src/model/shape/line.shape.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LineShape": () => (/* binding */ LineShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _form_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form.shape */ "./src/model/shape/form.shape.ts");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var LineShape = /*#__PURE__*/function (_FormShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(LineShape, _FormShape);

  var _super = _createSuper(LineShape);

  function LineShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LineShape);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LineShape, [{
    key: "clone",
    value: function clone() {
      var shape = new LineShape(this.handle, this.brush.clone());
      shape.bounds.set(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      shape.setKeyEvent(this.getKeyEvent());
      shape.setSelected(this.isSelected());

      var _iterator = _createForOfIteratorHelper(this.points),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          shape.points.push(point.clone());
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return shape;
    }
  }]);

  return LineShape;
}(_form_shape__WEBPACK_IMPORTED_MODULE_5__.FormShape);



/***/ }),

/***/ "./src/model/shape/pen.shape.ts":
/*!**************************************!*\
  !*** ./src/model/shape/pen.shape.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PenShape": () => (/* binding */ PenShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _stroke_shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stroke.shape */ "./src/model/shape/stroke.shape.ts");
/* harmony import */ var _geometry_pen_stroke__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../geometry/pen-stroke */ "./src/geometry/pen-stroke.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");
/* harmony import */ var _geometry_rectangle__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/rectangle */ "./src/geometry/rectangle.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






var PenShape = /*#__PURE__*/function (_StrokeShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(PenShape, _StrokeShape);

  var _super = _createSuper(PenShape);

  function PenShape(shapeHandle, brush) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PenShape);

    _this = _super.call(this, shapeHandle, brush);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "stroke", void 0);

    _this.stroke = new _geometry_pen_stroke__WEBPACK_IMPORTED_MODULE_8__.PenStroke(brush.width);
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PenShape, [{
    key: "addPoint",
    value: function addPoint(point) {
      // Keep only one point at a time.
      if (this.points.length > 0) {
        var prev = this.points[0];

        if (point.equals(prev)) {
          return false;
        }

        this.points[0] = point;
      } else {
        this.points.push(point);
      }

      this.stroke.addPoint(point);
      this.updateBounds();
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_9__.ShapeEvent(this, this.bounds));
      return true;
    }
  }, {
    key: "contains",
    value: function contains(point) {
      return this.stroke.intersects(new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_10__.Rectangle(point.x, point.y, point.x, point.y));
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      return this.stroke.intersects(rect);
    }
  }, {
    key: "getPenStroke",
    value: function getPenStroke() {
      return this.stroke;
    }
  }, {
    key: "moveByDelta",
    value: function moveByDelta(delta) {
      this.stroke.moveByDelta(delta);
      this.updateBoundsByDelta(delta);
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_9__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new PenShape(this.handle, this.brush.clone());
      shape.stroke = this.stroke.clone();
      shape.bounds.set(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      shape.setKeyEvent(this.getKeyEvent());
      shape.setSelected(this.isSelected());
      return shape;
    }
  }]);

  return PenShape;
}(_stroke_shape__WEBPACK_IMPORTED_MODULE_7__.StrokeShape);



/***/ }),

/***/ "./src/model/shape/pointer.shape.ts":
/*!******************************************!*\
  !*** ./src/model/shape/pointer.shape.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PointerShape": () => (/* binding */ PointerShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _stroke_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stroke.shape */ "./src/model/shape/stroke.shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var PointerShape = /*#__PURE__*/function (_StrokeShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(PointerShape, _StrokeShape);

  var _super = _createSuper(PointerShape);

  function PointerShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PointerShape);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PointerShape, [{
    key: "addPoint",
    value: function addPoint(point) {
      // Keep only one point at a time.
      if (this.points.length > 0) {
        var prev = this.points[0];

        if (point.equals(prev)) {
          return false;
        }

        this.points[0] = point;
      } else {
        this.points.push(point);
      }

      this.updateBounds();
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_6__.ShapeEvent(this, this.bounds));
      return true;
    }
  }, {
    key: "updateBounds",
    value: function updateBounds() {
      var p0 = this.points[0];
      var d = this.brush.width;
      this.bounds.set(p0.x - d, p0.y - d, p0.x + d * 2, p0.y + d * 2);
    }
  }]);

  return PointerShape;
}(_stroke_shape__WEBPACK_IMPORTED_MODULE_5__.StrokeShape);



/***/ }),

/***/ "./src/model/shape/rectangle.shape.ts":
/*!********************************************!*\
  !*** ./src/model/shape/rectangle.shape.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RectangleShape": () => (/* binding */ RectangleShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _form_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form.shape */ "./src/model/shape/form.shape.ts");
/* harmony import */ var _geometry_line__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/line */ "./src/geometry/line.ts");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var RectangleShape = /*#__PURE__*/function (_FormShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(RectangleShape, _FormShape);

  var _super = _createSuper(RectangleShape);

  function RectangleShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RectangleShape);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RectangleShape, [{
    key: "contains",
    value: function contains(point) {
      // Handle simple cases.
      if (this.points.length < 2) {
        return false;
      }

      if (this.fill()) {
        return this.bounds.containsPoint(point);
      }

      var delta = this.brush.width;
      var x1 = this.bounds.x;
      var y1 = this.bounds.y;
      var x2 = this.bounds.x + this.bounds.width;
      var y2 = this.bounds.y;

      if (this.intersectsSegment(delta, x1, y1, x2, y2, point)) {
        return true;
      }

      x1 = this.bounds.x + this.bounds.width;
      y1 = this.bounds.y;
      x2 = this.bounds.x + this.bounds.width;
      y2 = this.bounds.y + this.bounds.height;

      if (this.intersectsSegment(delta, x1, y1, x2, y2, point)) {
        return true;
      }

      x1 = this.bounds.x + this.bounds.width;
      y1 = this.bounds.y + this.bounds.height;
      x2 = this.bounds.x;
      y2 = this.bounds.y + this.bounds.height;

      if (this.intersectsSegment(delta, x1, y1, x2, y2, point)) {
        return true;
      }

      x1 = this.bounds.x;
      y1 = this.bounds.y;
      x2 = this.bounds.x;
      y2 = this.bounds.y + this.bounds.height;

      if (this.intersectsSegment(delta, x1, y1, x2, y2, point)) {
        return true;
      }

      return false;
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      return this.bounds.intersection(rect) != null;
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new RectangleShape(this.handle, this.brush.clone());
      shape.bounds.set(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      shape.setKeyEvent(this.getKeyEvent());
      shape.setSelected(this.isSelected());

      var _iterator = _createForOfIteratorHelper(this.points),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          shape.points.push(point.clone());
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return shape;
    }
  }, {
    key: "intersectsSegment",
    value: function intersectsSegment(delta, x1, y1, x2, y2, p) {
      var x3 = p.x + delta;
      var y3 = p.y + delta;
      var x4 = p.x - delta;
      var y4 = p.y - delta;

      if (_geometry_line__WEBPACK_IMPORTED_MODULE_6__.Line.intersects(x1, y1, x2, y2, x3, y3, x4, y4)) {
        return true;
      }

      x3 = p.x - delta;
      y3 = p.y + delta;
      x4 = p.x + delta;
      y4 = p.y - delta;

      if (_geometry_line__WEBPACK_IMPORTED_MODULE_6__.Line.intersects(x1, y1, x2, y2, x3, y3, x4, y4)) {
        return true;
      }

      return false;
    }
  }]);

  return RectangleShape;
}(_form_shape__WEBPACK_IMPORTED_MODULE_5__.FormShape);



/***/ }),

/***/ "./src/model/shape/select.shape.ts":
/*!*****************************************!*\
  !*** ./src/model/shape/select.shape.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectShape": () => (/* binding */ SelectShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _form_shape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form.shape */ "./src/model/shape/form.shape.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var SelectShape = /*#__PURE__*/function (_FormShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(SelectShape, _FormShape);

  var _super = _createSuper(SelectShape);

  function SelectShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, SelectShape);

    return _super.call(this, 0, null);
  }

  return (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(SelectShape);
}(_form_shape__WEBPACK_IMPORTED_MODULE_5__.FormShape);



/***/ }),

/***/ "./src/model/shape/shape-event.ts":
/*!****************************************!*\
  !*** ./src/model/shape/shape-event.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShapeEvent": () => (/* binding */ ShapeEvent)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var ShapeEvent = /*#__PURE__*/function () {
  function ShapeEvent(shape, dirtyRegion) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ShapeEvent);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_dirtyRegion", void 0);

    this._shape = shape;
    this._dirtyRegion = dirtyRegion;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ShapeEvent, [{
    key: "shape",
    get: function get() {
      return this._shape;
    }
  }, {
    key: "dirtyRegion",
    get: function get() {
      return this._dirtyRegion;
    }
  }]);

  return ShapeEvent;
}();



/***/ }),

/***/ "./src/model/shape/shape.ts":
/*!**********************************!*\
  !*** ./src/model/shape/shape.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Shape": () => (/* binding */ Shape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");
/* harmony import */ var _geometry_rectangle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../geometry/rectangle */ "./src/geometry/rectangle.ts");
/* harmony import */ var _utils_event_listener__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/event-listener */ "./src/utils/event-listener.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }





var Shape = /*#__PURE__*/function () {
  function Shape(handle) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Shape);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_points", []);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_bounds", _geometry_rectangle__WEBPACK_IMPORTED_MODULE_4__.Rectangle.empty());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "changeEvent", new _utils_event_listener__WEBPACK_IMPORTED_MODULE_5__.TypedEvent());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "selected", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "keyEvent", void 0);

    this._handle = handle;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Shape, [{
    key: "handle",
    get: function get() {
      return this._handle;
    }
  }, {
    key: "addPoint",
    value: function addPoint(point) {
      var count = this._points.length;
      var last = null;

      if (count > 0) {
        last = this._points[count - 1];
      }

      if (point.equals(last)) {
        return false;
      }

      this._points.push(point);

      return true;
    }
  }, {
    key: "points",
    get: function get() {
      return this._points;
    }
  }, {
    key: "contains",
    value: function contains(point) {
      return this._bounds.containsPoint(point);
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      return this._bounds.intersection(rect) != null;
    }
  }, {
    key: "bounds",
    get: function get() {
      return this._bounds;
    }
  }, {
    key: "getKeyEvent",
    value: function getKeyEvent() {
      return this.keyEvent;
    }
  }, {
    key: "setKeyEvent",
    value: function setKeyEvent(event) {
      this.keyEvent = event;
    }
  }, {
    key: "isSelected",
    value: function isSelected() {
      return this.selected;
    }
  }, {
    key: "setSelected",
    value: function setSelected(selected) {
      if (this.selected == selected) {
        return;
      }

      this.selected = selected;
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_3__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "moveByDelta",
    value: function moveByDelta(delta) {
      var _iterator = _createForOfIteratorHelper(this._points),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          point.subtract(delta);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      this.updateBoundsByDelta(delta);
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_3__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "clone",
    value: function clone() {
      return Object.create(this);
    }
  }, {
    key: "addChangeListener",
    value: function addChangeListener(listener) {
      return this.changeEvent.subscribe(listener);
    }
  }, {
    key: "removeChangeListener",
    value: function removeChangeListener(listener) {
      this.changeEvent.unsubscribe(listener);
    }
  }, {
    key: "updateBoundsByDelta",
    value: function updateBoundsByDelta(delta) {
      this.bounds.x -= delta.x;
      this.bounds.y -= delta.y;
    }
  }, {
    key: "fireShapeEvent",
    value: function fireShapeEvent(event) {
      this.changeEvent.publish(event);
    }
  }]);

  return Shape;
}();



/***/ }),

/***/ "./src/model/shape/slide.shape.ts":
/*!****************************************!*\
  !*** ./src/model/shape/slide.shape.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SlideShape": () => (/* binding */ SlideShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shape */ "./src/model/shape/shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var SlideShape = /*#__PURE__*/function (_Shape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(SlideShape, _Shape);

  var _super = _createSuper(SlideShape);

  function SlideShape(page) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SlideShape);

    _this = _super.call(this, 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "page", void 0);

    _this.page = page;

    _this.updateBounds();

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SlideShape, [{
    key: "getPage",
    value: function getPage() {
      return this.page;
    }
  }, {
    key: "setPageRect",
    value: function setPageRect(rect) {
      if (this.bounds.equals(rect)) {
        return;
      }

      this.bounds.set(rect.x, rect.y, rect.width, rect.height);
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "updateBounds",
    value: function updateBounds() {
      this.bounds.set(0, 0, 1, 1);
    }
  }]);

  return SlideShape;
}(_shape__WEBPACK_IMPORTED_MODULE_7__.Shape);



/***/ }),

/***/ "./src/model/shape/stroke.shape.ts":
/*!*****************************************!*\
  !*** ./src/model/shape/stroke.shape.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StrokeShape": () => (/* binding */ StrokeShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "./node_modules/@babel/runtime/helpers/esm/get.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shape */ "./src/model/shape/shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");
/* harmony import */ var _geometry_line__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/line */ "./src/geometry/line.ts");
/* harmony import */ var _geometry_point__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../geometry/point */ "./src/geometry/point.ts");









function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






var StrokeShape = /*#__PURE__*/function (_Shape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["default"])(StrokeShape, _Shape);

  var _super = _createSuper(StrokeShape);

  function StrokeShape(shapeHandle, brush) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StrokeShape);

    _this = _super.call(this, shapeHandle);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "_brush", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "minPoint", new _geometry_point__WEBPACK_IMPORTED_MODULE_11__.Point(0, 0));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "maxPoint", new _geometry_point__WEBPACK_IMPORTED_MODULE_11__.Point(0, 0));

    _this._brush = brush;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StrokeShape, [{
    key: "brush",
    get: function get() {
      return this._brush;
    }
  }, {
    key: "addPoint",
    value: function addPoint(point) {
      var added = (0,_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__["default"])((0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(StrokeShape.prototype), "addPoint", this).call(this, point);

      if (added) {
        this.minPoint.x = Math.min(this.minPoint.x, point.x);
        this.minPoint.y = Math.min(this.minPoint.y, point.y);
        this.maxPoint.x = Math.max(this.maxPoint.x, point.x);
        this.maxPoint.y = Math.max(this.maxPoint.y, point.y);
        this.updateBounds();
        this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_9__.ShapeEvent(this, this.bounds));
      }

      return added;
    }
  }, {
    key: "contains",
    value: function contains(point) {
      var delta = this.brush.width / 2; // Handle simple cases.

      if (this.points.length === 0) {
        return false;
      } else if (this.points.length === 1) {
        return this.points[0].distance(point) <= delta;
      } // One of these lines must be crossed by a segment of our stroke.


      var l1 = new _geometry_line__WEBPACK_IMPORTED_MODULE_10__.Line(point.x + delta, point.y + delta, point.x - delta, point.y - delta);
      var l2 = new _geometry_line__WEBPACK_IMPORTED_MODULE_10__.Line(point.x - delta, point.y + delta, point.x + delta, point.y - delta);
      var index = 0;
      var p1 = this.points[index++];
      var p2 = null;
      var segment = null;

      while (index < this.points.length) {
        p2 = this.points[index++];
        segment = new _geometry_line__WEBPACK_IMPORTED_MODULE_10__.Line(p1.x, p1.y, p2.x, p2.y);

        if (segment.intersects(l1)) {
          return true;
        }

        if (segment.intersects(l2)) {
          return true;
        }

        p1 = p2;
      }

      return false;
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      // Handle simple cases.
      if (this.points.length === 0) {
        return false;
      } else if (this.points.length === 1) {
        return rect.containsPoint(this.points[0]);
      }

      var index = 0;
      var p1 = this.points[index++];
      var p2 = null;

      while (index < this.points.length) {
        p2 = this.points[index++];

        if (rect.intersectsLine(p1.x, p1.y, p2.x, p2.y)) {
          return true;
        }

        p1 = p2;
      }

      return false;
    }
  }, {
    key: "updateBounds",
    value: function updateBounds() {
      var x = this.minPoint.x;
      var y = this.minPoint.y;
      var width = this.maxPoint.x - this.minPoint.x;
      var height = this.maxPoint.y - this.minPoint.y;
      this.bounds.set(x, y, width, height);
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new StrokeShape(this.handle, this.brush.clone());
      shape.bounds.set(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);
      shape.setKeyEvent(this.getKeyEvent());
      shape.setSelected(this.isSelected());

      var _iterator = _createForOfIteratorHelper(this.points),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var point = _step.value;
          shape.points.push(point.clone());
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return shape;
    }
  }]);

  return StrokeShape;
}(_shape__WEBPACK_IMPORTED_MODULE_8__.Shape);



/***/ }),

/***/ "./src/model/shape/text-highlight.shape.ts":
/*!*************************************************!*\
  !*** ./src/model/shape/text-highlight.shape.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextHighlightShape": () => (/* binding */ TextHighlightShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shape */ "./src/model/shape/shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextHighlightShape = /*#__PURE__*/function (_Shape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextHighlightShape, _Shape);

  var _super = _createSuper(TextHighlightShape);

  function TextHighlightShape(shapeHandle, color) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextHighlightShape);

    _this = _super.call(this, shapeHandle);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "color", void 0);

    _this.color = color;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextHighlightShape, [{
    key: "addTextBounds",
    value: function addTextBounds(rect) {
      if (this.bounds.isEmpty()) {
        this.bounds.set(rect.x, rect.y, rect.width, rect.height);
      } else {
        this.bounds.union(rect);
      }

      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "getColor",
    value: function getColor() {
      return this.color;
    }
  }, {
    key: "contains",
    value: function contains(point) {
      return this.bounds.containsPoint(point);
    }
  }, {
    key: "intersects",
    value: function intersects(rect) {
      return this.bounds.intersection(rect) != null;
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new TextHighlightShape(this.handle, this.color);
      shape.setKeyEvent(this.getKeyEvent());
      return shape;
    }
  }, {
    key: "updateBounds",
    value: function updateBounds() {// No-op
    }
  }]);

  return TextHighlightShape;
}(_shape__WEBPACK_IMPORTED_MODULE_7__.Shape);



/***/ }),

/***/ "./src/model/shape/text.shape.ts":
/*!***************************************!*\
  !*** ./src/model/shape/text.shape.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextShape": () => (/* binding */ TextShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _typesetting_shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./typesetting.shape */ "./src/model/shape/typesetting.shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");
/* harmony import */ var _geometry_point__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../geometry/point */ "./src/geometry/point.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var TextShape = /*#__PURE__*/function (_TypesettingShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextShape, _TypesettingShape);

  var _super = _createSuper(TextShape);

  function TextShape() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextShape);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "font", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextShape, [{
    key: "setFont",
    value: function setFont(font) {
      if (this.font && this.font.equals(font)) {
        return;
      }

      this.font = font;
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "getFont",
    value: function getFont() {
      return this.font;
    }
  }, {
    key: "clone",
    value: function clone() {
      var shape = new TextShape(this.handle);
      shape.setLocation(new _geometry_point__WEBPACK_IMPORTED_MODULE_9__.Point(this.bounds.x, this.bounds.y));
      shape.setFont(this.font);
      shape.setTextColor(this.getTextColor());
      shape.setTextAttributes(new Map(this.getTextAttributes()));
      return shape;
    }
  }]);

  return TextShape;
}(_typesetting_shape__WEBPACK_IMPORTED_MODULE_7__.TypesettingShape);



/***/ }),

/***/ "./src/model/shape/typesetting.shape.ts":
/*!**********************************************!*\
  !*** ./src/model/shape/typesetting.shape.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TypesettingShape": () => (/* binding */ TypesettingShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shape */ "./src/model/shape/shape.ts");
/* harmony import */ var _shape_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shape-event */ "./src/model/shape/shape-event.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TypesettingShape = /*#__PURE__*/function (_Shape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TypesettingShape, _Shape);

  var _super = _createSuper(TypesettingShape);

  function TypesettingShape() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TypesettingShape);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textAttributes", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textColor", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "text", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TypesettingShape, [{
    key: "setText",
    value: function setText(text) {
      if (this.text === text) {
        return;
      }

      this.text = text;
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "getText",
    value: function getText() {
      return this.text;
    }
  }, {
    key: "setTextColor",
    value: function setTextColor(color) {
      if (this.textColor && this.textColor.equals(color)) {
        return;
      }

      this.textColor = color;
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "getTextColor",
    value: function getTextColor() {
      return this.textColor;
    }
  }, {
    key: "setTextAttributes",
    value: function setTextAttributes(attributes) {
      //if (this.textAttributes.equals(attributes)) {
      //	return;
      //}
      this.textAttributes = new Map(attributes);
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
    }
  }, {
    key: "getTextAttributes",
    value: function getTextAttributes() {
      return this.textAttributes;
    }
  }, {
    key: "isUnderline",
    value: function isUnderline() {
      return this.textAttributes.get("underline");
    }
  }, {
    key: "isStrikethrough",
    value: function isStrikethrough() {
      return this.textAttributes.get("strikethrough");
    }
  }, {
    key: "setLocation",
    value: function setLocation(point) {
      if (this.bounds.x === point.x && this.bounds.y === point.y) {
        return false;
      }

      this.bounds.x = point.x;
      this.bounds.y = point.y;
      this.fireShapeEvent(new _shape_event__WEBPACK_IMPORTED_MODULE_8__.ShapeEvent(this, this.bounds));
      return true;
    }
  }, {
    key: "updateBounds",
    value: function updateBounds() {}
  }]);

  return TypesettingShape;
}(_shape__WEBPACK_IMPORTED_MODULE_7__.Shape);



/***/ }),

/***/ "./src/model/shape/zoom.shape.ts":
/*!***************************************!*\
  !*** ./src/model/shape/zoom.shape.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZoomShape": () => (/* binding */ ZoomShape)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "./node_modules/@babel/runtime/helpers/esm/get.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _form_shape__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./form.shape */ "./src/model/shape/form.shape.ts");







function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ZoomShape = /*#__PURE__*/function (_FormShape) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ZoomShape, _FormShape);

  var _super = _createSuper(ZoomShape);

  function ZoomShape() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ZoomShape);

    return _super.call(this, 0, null);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ZoomShape, [{
    key: "updateBounds",
    value: function updateBounds() {
      (0,_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_2__["default"])((0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(ZoomShape.prototype), "updateBounds", this).call(this); // Keep aspect ratio with width bias.


      var width = this.bounds.width;
      var height = Math.abs(width * 3.0 / 4.0) * Math.sign(this.bounds.height);
      this.bounds.height = height;
    }
  }]);

  return ZoomShape;
}(_form_shape__WEBPACK_IMPORTED_MODULE_6__.FormShape);



/***/ }),

/***/ "./src/model/whiteboard.document.ts":
/*!******************************************!*\
  !*** ./src/model/whiteboard.document.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WhiteboardDocument": () => (/* binding */ WhiteboardDocument)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./page */ "./src/model/page.ts");
/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./document */ "./src/model/document.ts");
/* harmony import */ var _render_whiteboard_renderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../render/whiteboard.renderer */ "./src/render/whiteboard.renderer.ts");










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var WhiteboardDocument = /*#__PURE__*/function (_SlideDocument) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["default"])(WhiteboardDocument, _SlideDocument);

  var _super = _createSuper(WhiteboardDocument);

  function WhiteboardDocument() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, WhiteboardDocument);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__["default"])(_this), "renderer", void 0);

    _this.renderer = new _render_whiteboard_renderer__WEBPACK_IMPORTED_MODULE_11__.WhiteboardRenderer();

    _this.loadPages();

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(WhiteboardDocument, [{
    key: "getPageText",
    value: function () {
      var _getPageText = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().mark(function _callee(pageNumber) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                return _context.abrupt("return", Promise.resolve(""));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function getPageText(_x) {
        return _getPageText.apply(this, arguments);
      }

      return getPageText;
    }()
  }, {
    key: "renderPage",
    value: function renderPage(pageNumber, context, viewRect, dirtyRegion) {
      return this.renderer.render(context, viewRect, dirtyRegion);
    }
  }, {
    key: "renderPageText",
    value: function renderPageText(pageNumber, root, size, viewRect) {// No-op
    }
  }, {
    key: "loadPages",
    value: function loadPages() {
      this.pages = [];

      for (var i = 0; i < 300; i++) {
        this.pages.push(new _page__WEBPACK_IMPORTED_MODULE_9__.Page(this, i));
      }
    }
  }]);

  return WhiteboardDocument;
}(_document__WEBPACK_IMPORTED_MODULE_10__.SlideDocument);



/***/ }),

/***/ "./src/paint/brush.ts":
/*!****************************!*\
  !*** ./src/paint/brush.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Brush": () => (/* binding */ Brush)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint */ "./src/paint/paint.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var Brush = /*#__PURE__*/function (_Paint) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(Brush, _Paint);

  var _super = _createSuper(Brush);

  function Brush(color, width) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Brush);

    _this = _super.call(this, color);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "width", void 0);

    _this.width = width;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Brush, [{
    key: "clone",
    value: function clone() {
      return new Brush(this.color, this.width);
    }
  }]);

  return Brush;
}(_paint__WEBPACK_IMPORTED_MODULE_7__.Paint);



/***/ }),

/***/ "./src/paint/color.ts":
/*!****************************!*\
  !*** ./src/paint/color.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Color": () => (/* binding */ Color)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");



var RGB_COLOR_REGEX = /\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d*.\d*))?\)/;

var Color = /*#__PURE__*/function () {
  function Color(r, g, b, a) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Color);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "r", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "g", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "b", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "a", void 0);

    this.r = r;
    this.g = g;
    this.b = b;
    this.a = a || 1;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Color, [{
    key: "toHex",
    value: function toHex() {
      return '#' + this.r.toString(16) + this.g.toString(16) + this.b.toString(16);
    }
  }, {
    key: "toRgb",
    value: function toRgb() {
      return "rgb(".concat(this.r, ", ").concat(this.g, ", ").concat(this.b, ")");
    }
  }, {
    key: "toRgba",
    value: function toRgba() {
      return "rgba(".concat(this.r, ", ").concat(this.g, ", ").concat(this.b, ", ").concat(this.a, ")");
    }
  }, {
    key: "toAlpha",
    value: function toAlpha(alpha) {
      return "rgba(".concat(this.r, ", ").concat(this.g, ", ").concat(this.b, ", ").concat(alpha, ")");
    }
  }, {
    key: "equals",
    value: function equals(other) {
      return this.a === other.a && this.r === other.r && this.g === other.g && this.b === other.b;
    }
  }], [{
    key: "fromHex",
    value: function fromHex(hex) {
      var s = hex.trim();

      if (s.indexOf('#') !== 0) {
        throw new Error("Not a hex color representation");
      }

      s = s.substr(s.indexOf('#') + 1);
      var r = parseInt(s.substr(0, 2), 16);
      var g = parseInt(s.substr(2, 2), 16);
      var b = parseInt(s.substr(4, 2), 16);
      return new Color(r, g, b);
    }
  }, {
    key: "fromRGBString",
    value: function fromRGBString(hex) {
      var s = hex.trim();

      if (s.indexOf('rgb') !== 0) {
        throw new Error("Not a rgb color representation");
      }

      var res = RGB_COLOR_REGEX.exec(s);
      var r = parseInt(res[1], 10);
      var g = parseInt(res[2], 10);
      var b = parseInt(res[3], 10);
      var a = res[5] ? parseFloat(res[5]) : 1;
      return new Color(r, g, b, a);
    }
  }, {
    key: "fromRGBNumber",
    value: function fromRGBNumber(rgba) {
      var a = (rgba >> 24 & 0xFF) / 0xFF;
      var r = rgba >> 16 & 0xFF;
      var g = rgba >> 8 & 0xFF;
      var b = rgba & 0xFF;
      return new Color(r, g, b, a);
    }
  }]);

  return Color;
}();



/***/ }),

/***/ "./src/paint/font.ts":
/*!***************************!*\
  !*** ./src/paint/font.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Font": () => (/* binding */ Font)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var Font = /*#__PURE__*/function () {
  function Font(family, size, style, weight) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Font);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "family", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "size", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "style", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "weight", void 0);

    this.family = family;
    this.size = size;
    this.style = style;
    this.weight = weight;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Font, [{
    key: "equals",
    value: function equals(other) {
      if (!other) {
        return false;
      }

      if (this === other) {
        return true;
      }

      return this.family === other.family && this.size === other.size && this.style === other.style && this.weight === other.weight;
    }
  }, {
    key: "toString",
    value: function toString() {
      var str = this.size + "px " + this.family;

      if (this.weight) {
        str = this.weight + " " + str;
      }

      if (this.style) {
        str = this.style + " " + str;
      }

      return str;
    }
  }]);

  return Font;
}();



/***/ }),

/***/ "./src/paint/paint.ts":
/*!****************************!*\
  !*** ./src/paint/paint.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Paint": () => (/* binding */ Paint)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var Paint = /*#__PURE__*/(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(function Paint(color) {
  (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, Paint);

  (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "color", void 0);

  this.color = color;
});



/***/ }),

/***/ "./src/render/arrow.renderer.ts":
/*!**************************************!*\
  !*** ./src/render/arrow.renderer.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArrowRenderer": () => (/* binding */ ArrowRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var ArrowRenderer = /*#__PURE__*/function () {
  function ArrowRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ArrowRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ArrowRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var p0 = shape.points[0];
      var p1 = shape.points[1];

      if (!p0 || !p1) {
        return;
      }

      var keyEvent = shape.getKeyEvent();
      var brush = shape.brush;
      context.save();
      this.createArrowPath(context, keyEvent, p0, p1, brush.width);
      context.fillStyle = brush.color.toRgba();
      context.fill();
      context.restore();

      if (shape.isSelected()) {
        var scale = context.getTransformExt().getScaleX();
        this.createArrowPath(context, keyEvent, p0, p1, brush.width);
        context.strokeStyle = "rgb(255, 0, 100)";
        context.lineWidth = 2 / scale;
        context.setLineDash([5 / scale]);
        context.stroke();
      }
    }
  }, {
    key: "createArrowPath",
    value: function createArrowPath(context, keyEvent, p1, p2, width) {
      var bold = keyEvent != null && keyEvent.altKey;
      var twoSided = keyEvent != null && keyEvent.shiftKey;
      var x1 = p1.x;
      var y1 = p1.y;
      var x2 = p2.x;
      var y2 = p2.y;
      var w = bold ? width * 2 : width;
      var wd = w / 2;
      var dx = x2 - x1;
      var dy = y2 - y1;
      var angle = Math.atan2(dy, dx);
      var length = Math.sqrt(dx * dx + dy * dy);
      var arrowRatio = 0.5;
      var arrowLength = w * 5;
      var waisting = 0.35;
      var veeX = length - w * 0.5 / arrowRatio;
      var waistX = length - arrowLength * 0.5;
      var waistY = arrowRatio * arrowLength * 0.5 * waisting;
      var arrowWidth = arrowRatio * arrowLength;
      var x = twoSided ? w * 0.5 / arrowRatio + arrowLength * 0.75 : 0;
      context.translate(x1, y1);
      context.rotate(angle);
      context.beginPath();
      context.moveTo(x, -wd);
      context.lineTo(veeX - arrowLength * 0.75, -wd);
      context.lineTo(veeX - arrowLength, -arrowWidth);
      context.quadraticCurveTo(waistX, -waistY, length, 0);
      context.quadraticCurveTo(waistX, waistY, veeX - arrowLength, arrowWidth);
      context.lineTo(veeX - arrowLength * 0.75, wd);
      context.lineTo(x, wd);

      if (twoSided) {
        var _waistX = x - arrowLength * 0.5;

        var _waistY = arrowRatio * arrowLength * 0.5 * waisting;

        context.lineTo(x + arrowLength * 0.25, arrowWidth);
        context.quadraticCurveTo(_waistX, _waistY, 0, 0);
        context.quadraticCurveTo(_waistX, -_waistY, x + arrowLength * 0.25, -arrowWidth);
      }

      context.closePath();
    }
  }]);

  return ArrowRenderer;
}();



/***/ }),

/***/ "./src/render/ellipse.renderer.ts":
/*!****************************************!*\
  !*** ./src/render/ellipse.renderer.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EllipseRenderer": () => (/* binding */ EllipseRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var EllipseRenderer = /*#__PURE__*/function () {
  function EllipseRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, EllipseRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(EllipseRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var p0 = shape.points[0];
      var p1 = shape.points[1];

      if (!p0 || !p1) {
        return;
      }

      var keyEvent = shape.getKeyEvent();
      var brush = shape.brush;
      var color = brush.color.toRgba();
      var fill = keyEvent && keyEvent.altKey;
      var minX = Math.min(p0.x, p1.x);
      var minY = Math.min(p0.y, p1.y);
      var maxX = Math.max(p0.x, p1.x);
      var maxY = Math.max(p0.y, p1.y);
      var radiusX = Math.abs(maxX - minX) * 0.5;
      var radiusY = Math.abs(maxY - minY) * 0.5;
      var centerX = minX + radiusX;
      var centerY = minY + radiusY;
      context.beginPath();

      if (fill) {
        context.fillStyle = color;
        context.ellipse(centerX, centerY, radiusX, radiusY, 0, 0, Math.PI * 2);
        context.fill();
      } else {
        context.strokeStyle = color;
        context.lineWidth = brush.width;
        context.ellipse(centerX, centerY, radiusX, radiusY, 0, 0, Math.PI * 2);
        context.stroke();
      }

      if (shape.isSelected()) {
        var w = 0;

        if (fill) {
          // Draw the selection indicator inside the ellipse.
          w = brush.width / 2;
        }

        context.beginPath();
        context.strokeStyle = "rgb(255, 0, 100)";
        context.lineWidth = brush.width;
        context.setLineDash([5 / context.getTransformExt().getScaleX()]);
        context.ellipse(centerX, centerY, radiusX - w, radiusY - w, 0, 0, Math.PI * 2);
        context.stroke();
      }
    }
  }]);

  return EllipseRenderer;
}();



/***/ }),

/***/ "./src/render/highlighter.renderer.ts":
/*!********************************************!*\
  !*** ./src/render/highlighter.renderer.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HighlighterRenderer": () => (/* binding */ HighlighterRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var HighlighterRenderer = /*#__PURE__*/function () {
  function HighlighterRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, HighlighterRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(HighlighterRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var points = shape.points;
      var pointCount = points.length;

      if (pointCount < 1) {
        return;
      }

      var brush = shape.brush;
      var color = shape.isSelected() ? "rgba(255, 0, 100, 0.5)" : brush.color.toRgba();
      var index = 0;
      var p0 = points[index++];

      if (index === pointCount) {
        this.drawCircle(context, brush, p0.x, p0.y, p0.p);
        return;
      }

      context.beginPath();
      context.strokeStyle = color;
      context.lineWidth = brush.width;
      context.lineCap = "round";
      context.lineJoin = "round";
      context.globalAlpha = 1;
      context.globalCompositeOperation = "multiply";
      context.moveTo(p0.x, p0.y);

      while (index < pointCount) {
        p0 = points[index++];
        context.lineTo(p0.x, p0.y);
      }

      context.stroke();
    }
  }, {
    key: "drawCircle",
    value: function drawCircle(context, brush, x, y, p) {
      var w = p * brush.width;
      var d = w / 2;
      context.beginPath();
      context.fillStyle = brush.color.toRgba();
      context.arc(x, y, d, 0, 2 * Math.PI);
      context.fill();
    }
  }]);

  return HighlighterRenderer;
}();



/***/ }),

/***/ "./src/render/latex.renderer.ts":
/*!**************************************!*\
  !*** ./src/render/latex.renderer.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatexRenderer": () => (/* binding */ LatexRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _paint_font__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../paint/font */ "./src/paint/font.ts");




var LatexRenderer = /*#__PURE__*/function () {
  function LatexRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LatexRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LatexRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var text = shape.getText();

      if (!text || text.length === 0) {
        return;
      }

      var bounds = shape.bounds;
      var font = shape.getFont();
      var transform = context.getTransformExt();
      var scale = transform.getScaleX();
      /*
       * Render with identity transform and scaled font, since normalized
       * font size won't give us the desired result as the text will be
       * misplaced and missized.
       */

      var scaledHeight = font.size * scale;
      var x = transform.getTranslateX() + bounds.x * scale;
      var y = transform.getTranslateY() + bounds.y * scale;
      var scaledFont = new _paint_font__WEBPACK_IMPORTED_MODULE_2__.Font(font.family, scaledHeight, font.style, font.weight);
      context.setTransform(1, 0, 0, 1, 0, 0);
      context.font = scaledFont.toString();
      context.fillStyle = shape.getTextColor().toRgba();
      context.fillText(text, x, y + scaledHeight);
    }
  }]);

  return LatexRenderer;
}();



/***/ }),

/***/ "./src/render/line.renderer.ts":
/*!*************************************!*\
  !*** ./src/render/line.renderer.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LineRenderer": () => (/* binding */ LineRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var LineRenderer = /*#__PURE__*/function () {
  function LineRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LineRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LineRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var p0 = shape.points[0];
      var p1 = shape.points[1];

      if (!p0 || !p1) {
        return;
      }

      var keyEvent = shape.getKeyEvent();
      var brush = shape.brush;
      var bold = keyEvent != null && keyEvent.altKey;
      var width = bold ? brush.width * 2 : brush.width;
      context.beginPath();
      context.strokeStyle = brush.color.toRgba();
      context.lineWidth = width;
      context.lineCap = "round";
      context.moveTo(p0.x, p0.y);
      context.lineTo(p1.x, p1.y);
      context.stroke();

      if (shape.isSelected()) {
        var scale = context.getTransformExt().getScaleX();
        var dashWidth = bold ? 7 / scale : 5 / scale;
        var dashDist = bold ? 15 / scale : 12 / scale;
        context.beginPath();
        context.strokeStyle = "rgb(255, 0, 100)";
        context.lineWidth = width;
        context.setLineDash([dashWidth, dashDist]);
        context.moveTo(p0.x, p0.y);
        context.lineTo(p1.x, p1.y);
        context.stroke();
      }
    }
  }]);

  return LineRenderer;
}();



/***/ }),

/***/ "./src/render/pdf.renderer.ts":
/*!************************************!*\
  !*** ./src/render/pdf.renderer.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PdfRenderer": () => (/* binding */ PdfRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);






var PdfRenderer = /*#__PURE__*/function () {
  function PdfRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, PdfRenderer);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "backCanvas", document.createElement('canvas'));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "renderTask", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(PdfRenderer, [{
    key: "render",
    value: function () {
      var _render = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee(pageProxy, context, viewRect, dirtyRegion) {
        var _this = this;

        var scaleX, scaleTx, tx, ty, width, scale, viewport;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!this.renderTask) {
                  _context.next = 2;
                  break;
                }

                return _context.abrupt("return", null);

              case 2:
                scaleX = 1.0 / viewRect.width;
                scaleTx = dirtyRegion.width * scaleX;
                tx = viewRect.x * scaleTx;
                ty = viewRect.y * scaleTx;
                width = pageProxy.view[2] - pageProxy.view[0];
                scale = scaleX * (dirtyRegion.width / width);
                viewport = pageProxy.getViewport({
                  scale: scale,
                  dontFlip: false
                });
                viewport.transform[4] -= tx;
                viewport.transform[5] -= ty;
                this.backCanvas.width = dirtyRegion.width;
                this.backCanvas.height = dirtyRegion.height;
                this.renderTask = pageProxy.render({
                  canvasContext: this.backCanvas.getContext('2d'),
                  viewport: viewport
                });
                return _context.abrupt("return", this.renderTask.promise.then(function () {
                  context.canvas.width = _this.backCanvas.width;
                  context.canvas.height = _this.backCanvas.height;
                  context.drawImage(_this.backCanvas, 0, 0);
                  _this.renderTask = null;
                  return _this.backCanvas;
                }, function (reason) {//console.error(reason);
                }));

              case 15:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function render(_x, _x2, _x3, _x4) {
        return _render.apply(this, arguments);
      }

      return render;
    }()
  }]);

  return PdfRenderer;
}();



/***/ }),

/***/ "./src/render/pdf.text.renderer.ts":
/*!*****************************************!*\
  !*** ./src/render/pdf.text.renderer.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PdfTextRenderer": () => (/* binding */ PdfTextRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! pdfjs-dist */ "./node_modules/pdfjs-dist/build/pdf.js");
/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(pdfjs_dist__WEBPACK_IMPORTED_MODULE_4__);






var pdfViever = __webpack_require__(/*! pdfjs-dist/web/pdf_viewer */ "./node_modules/pdfjs-dist/web/pdf_viewer.js");

var PdfTextRenderer = /*#__PURE__*/function () {
  function PdfTextRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, PdfTextRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(PdfTextRenderer, [{
    key: "render",
    value: function () {
      var _render = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(pageProxy, root, size, viewRect) {
        var textContent, scaleX, scaleTx, tx, ty, width, scale, viewport, linkService, annotationLayer;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return pageProxy.getTextContent();

              case 2:
                textContent = _context.sent;
                scaleX = 1.0 / viewRect.width;
                scaleTx = size.width * scaleX;
                tx = viewRect.x * scaleTx;
                ty = viewRect.y * scaleTx;
                width = pageProxy.view[2] - pageProxy.view[0];
                scale = scaleX * (size.width / width);
                viewport = pageProxy.getViewport({
                  scale: scale,
                  dontFlip: false
                });
                viewport.transform[4] -= tx;
                viewport.transform[5] -= ty;
                (0,pdfjs_dist__WEBPACK_IMPORTED_MODULE_4__.renderTextLayer)({
                  textContent: textContent,
                  container: root,
                  viewport: viewport,
                  enhanceTextSelection: true,
                  textDivs: []
                }).promise["catch"](function (reason) {
                  console.error(reason);
                });
                linkService = new pdfViever.PDFLinkService(); // Open links in new tab.

                linkService.externalLinkTarget = 2;
                annotationLayer = new pdfViever.AnnotationLayerBuilder({
                  pageDiv: root,
                  pdfPage: pageProxy,
                  linkService: linkService
                });
                annotationLayer.render(viewport);

              case 17:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function render(_x, _x2, _x3, _x4) {
        return _render.apply(this, arguments);
      }

      return render;
    }()
  }]);

  return PdfTextRenderer;
}();



/***/ }),

/***/ "./src/render/pen.renderer.ts":
/*!************************************!*\
  !*** ./src/render/pen.renderer.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PenRenderer": () => (/* binding */ PenRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var PenRenderer = /*#__PURE__*/function () {
  function PenRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PenRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PenRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var brush = shape.brush;
      var color = shape.isSelected() ? "rgb(255, 0, 100)" : brush.color.toRgb();
      var stroke = shape.getPenStroke();
      var points = stroke.getStrokeList();
      var size = points.length;
      var index = 0;
      var point = points[index++];
      context.beginPath();
      context.fillStyle = color;
      context.beginPath();
      context.moveTo(point.x, point.y);

      for (; index < size;) {
        point = points[index++];

        if (index < size) {
          context.lineTo(point.x, point.y);
        }
      }

      context.fill();
    }
  }]);

  return PenRenderer;
}();



/***/ }),

/***/ "./src/render/pointer.renderer.ts":
/*!****************************************!*\
  !*** ./src/render/pointer.renderer.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PointerRenderer": () => (/* binding */ PointerRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var PointerRenderer = /*#__PURE__*/function () {
  function PointerRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PointerRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PointerRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var point = shape.points[0];

      if (!point) {
        return;
      }

      var brush = shape.brush;
      var w = brush.width;
      var w2 = w / 2;
      context.beginPath();
      context.fillStyle = brush.color.toAlpha(0.4);
      context.arc(point.x, point.y, w, 0, 2 * Math.PI);
      context.fill(); // Draw inner ring.

      context.beginPath();
      context.strokeStyle = brush.color.toRgb();
      context.lineWidth = w / 4;
      context.arc(point.x, point.y, w2, 0, 2 * Math.PI);
      context.stroke();
    }
  }]);

  return PointerRenderer;
}();



/***/ }),

/***/ "./src/render/rectangle.renderer.ts":
/*!******************************************!*\
  !*** ./src/render/rectangle.renderer.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RectangleRenderer": () => (/* binding */ RectangleRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var RectangleRenderer = /*#__PURE__*/function () {
  function RectangleRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RectangleRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RectangleRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var bounds = shape.bounds;

      if (bounds.isEmpty()) {
        return;
      }

      var keyEvent = shape.getKeyEvent();
      var brush = shape.brush;
      var color = brush.color.toRgba();
      var fill = keyEvent && keyEvent.altKey;
      var x = bounds.x;
      var y = bounds.y;
      var w = bounds.width;
      var h = bounds.height;
      context.beginPath();

      if (fill) {
        context.fillStyle = color;
        context.rect(x, y, w, h);
        context.fill();
      } else {
        context.strokeStyle = color;
        context.lineWidth = brush.width;
        context.rect(x, y, w, h);
        context.stroke();
      }

      if (shape.isSelected()) {
        if (fill) {
          // Draw the selection indicator inside the rectangle.
          x += brush.width / 2;
          y += brush.width / 2;
          w -= brush.width;
          h -= brush.width;
        }

        context.beginPath();
        context.strokeStyle = "rgb(255, 0, 100)";
        context.lineWidth = brush.width;
        context.setLineDash([5 / context.getTransformExt().getScaleX()]);
        context.rect(x, y, w, h);
        context.stroke();
      }
    }
  }]);

  return RectangleRenderer;
}();



/***/ }),

/***/ "./src/render/render-controller.ts":
/*!*****************************************!*\
  !*** ./src/render/render-controller.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderController": () => (/* binding */ RenderController)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_page_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/page-event */ "./src/model/page-event.ts");
/* harmony import */ var _model_shape_stroke_shape__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/shape/stroke.shape */ "./src/model/shape/stroke.shape.ts");
/* harmony import */ var _highlighter_renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./highlighter.renderer */ "./src/render/highlighter.renderer.ts");
/* harmony import */ var _model_shape_slide_shape__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/shape/slide.shape */ "./src/model/shape/slide.shape.ts");
/* harmony import */ var _slide_renderer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./slide.renderer */ "./src/render/slide.renderer.ts");
/* harmony import */ var _geometry_rectangle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/rectangle */ "./src/geometry/rectangle.ts");
/* harmony import */ var _pointer_renderer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./pointer.renderer */ "./src/render/pointer.renderer.ts");
/* harmony import */ var _arrow_renderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./arrow.renderer */ "./src/render/arrow.renderer.ts");
/* harmony import */ var _rectangle_renderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./rectangle.renderer */ "./src/render/rectangle.renderer.ts");
/* harmony import */ var _line_renderer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./line.renderer */ "./src/render/line.renderer.ts");
/* harmony import */ var _ellipse_renderer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ellipse.renderer */ "./src/render/ellipse.renderer.ts");
/* harmony import */ var _model_shape_pointer_shape__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../model/shape/pointer.shape */ "./src/model/shape/pointer.shape.ts");
/* harmony import */ var _model_shape_arrow_shape__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../model/shape/arrow.shape */ "./src/model/shape/arrow.shape.ts");
/* harmony import */ var _model_shape_rectangle_shape__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../model/shape/rectangle.shape */ "./src/model/shape/rectangle.shape.ts");
/* harmony import */ var _model_shape_line_shape__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../model/shape/line.shape */ "./src/model/shape/line.shape.ts");
/* harmony import */ var _model_shape_ellipse_shape__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../model/shape/ellipse.shape */ "./src/model/shape/ellipse.shape.ts");
/* harmony import */ var _model_shape_select_shape__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../model/shape/select.shape */ "./src/model/shape/select.shape.ts");
/* harmony import */ var _select_renderer__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./select.renderer */ "./src/render/select.renderer.ts");
/* harmony import */ var _model_shape_zoom_shape__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../model/shape/zoom.shape */ "./src/model/shape/zoom.shape.ts");
/* harmony import */ var _zoom_renderer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./zoom.renderer */ "./src/render/zoom.renderer.ts");
/* harmony import */ var _model_shape_text_shape__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../model/shape/text.shape */ "./src/model/shape/text.shape.ts");
/* harmony import */ var _text_renderer__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./text.renderer */ "./src/render/text.renderer.ts");
/* harmony import */ var _geometry_transform__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../geometry/transform */ "./src/geometry/transform.ts");
/* harmony import */ var _model_shape_text_highlight_shape__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../model/shape/text-highlight.shape */ "./src/model/shape/text-highlight.shape.ts");
/* harmony import */ var _text_highlight_renderer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./text-highlight.renderer */ "./src/render/text-highlight.renderer.ts");
/* harmony import */ var _model_shape_latex_shape__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../model/shape/latex.shape */ "./src/model/shape/latex.shape.ts");
/* harmony import */ var _latex_renderer__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./latex.renderer */ "./src/render/latex.renderer.ts");
/* harmony import */ var _model_shape_pen_shape__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../model/shape/pen.shape */ "./src/model/shape/pen.shape.ts");
/* harmony import */ var _pen_renderer__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./pen.renderer */ "./src/render/pen.renderer.ts");

































var RenderController = /*#__PURE__*/function () {
  function RenderController() {
    var _this = this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RenderController);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "pageChangeListener", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "slideRenderSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "actionRenderSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "volatileRenderSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "textLayerSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "page", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "lastShape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "lastTransform", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "seek", false);

    this.pageChangeListener = this.pageChanged.bind(this);
    this.lastTransform = new _geometry_transform__WEBPACK_IMPORTED_MODULE_25__.Transform();
    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState === "visible") {
        setTimeout(function () {
          window.dispatchEvent(new Event("resize"));

          _this.renderAllLayers(_this.page);
        }, 100);
      }
    });
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RenderController, [{
    key: "setPage",
    value: function setPage(page) {
      if (this.page) {
        // Disable rendering for previous page.
        this.disableRendering();
      }

      this.page = page;

      if (!this.seek) {
        this.enableRendering();
      }

      this.renderAllLayers(page);
    }
  }, {
    key: "setSeek",
    value: function setSeek(seek) {
      this.seek = seek;

      if (seek) {
        this.disableRendering();
      } else {
        this.enableRendering(); // Finished seeking step. Render current state.

        if (this.lastTransform.equals(this.getPageTransform())) {
          // Render slide and text layer only if we have to: see page transform.
          this.refreshAnnotationLayers();
        } else {
          // Page transform changed. Update all layers.
          this.renderAllLayers(this.page);
        }
      }
    }
  }, {
    key: "setSlideRenderSurface",
    value: function setSlideRenderSurface(renderSurface) {
      this.slideRenderSurface = renderSurface;
      this.slideRenderSurface.registerRenderer(_model_shape_slide_shape__WEBPACK_IMPORTED_MODULE_6__.SlideShape.name, new _slide_renderer__WEBPACK_IMPORTED_MODULE_7__.SlideRenderer());
      this.slideRenderSurface.addSizeListener(this.slideRenderSurfaceSizeChanged.bind(this));
    }
  }, {
    key: "setActionRenderSurface",
    value: function setActionRenderSurface(renderSurface) {
      this.actionRenderSurface = renderSurface;
      this.actionRenderSurface.addSizeListener(this.actionRenderSurfaceSizeChanged.bind(this));
      this.registerShapeRenderers(renderSurface);
    }
  }, {
    key: "setVolatileRenderSurface",
    value: function setVolatileRenderSurface(renderSurface) {
      this.volatileRenderSurface = renderSurface;
      this.registerShapeRenderers(renderSurface);
    }
  }, {
    key: "setTextLayerSurface",
    value: function setTextLayerSurface(textLayerSurface) {
      this.textLayerSurface = textLayerSurface;
    }
  }, {
    key: "beginBulkRender",
    value: function beginBulkRender() {
      if (!this.seek) {
        this.disableRendering();
      }
    }
  }, {
    key: "endBulkRender",
    value: function endBulkRender() {
      if (!this.seek) {
        this.refreshAnnotationLayers();
        this.enableRendering();
      }
    }
  }, {
    key: "enableRendering",
    value: function enableRendering() {
      this.page.addChangeListener(this.pageChangeListener);
    }
  }, {
    key: "disableRendering",
    value: function disableRendering() {
      this.page.removeChangeListener(this.pageChangeListener);
    }
  }, {
    key: "slideRenderSurfaceSizeChanged",
    value: function slideRenderSurfaceSizeChanged(event) {
      this.renderAllLayers(this.page);
    }
  }, {
    key: "actionRenderSurfaceSizeChanged",
    value: function actionRenderSurfaceSizeChanged(event) {
      this.refreshAnnotationLayers();
    }
  }, {
    key: "pageChanged",
    value: function pageChanged(event) {
      switch (event.changeType) {
        case _model_page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.PageTransform:
          this.renderAllLayers(this.page);
          break;

        case _model_page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.Clear:
          this.clearAnnotationLayers();
          break;

        case _model_page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.ShapeAdded:
          if (this.lastShape && this.lastShape != event.shape) {
            var size = this.actionRenderSurface.getSize();
            var bounds = new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_8__.Rectangle(0, 0, size.width, size.height);
            this.renderPermanentLayer(this.lastShape, bounds);
          }

          this.renderVolatileLayer(event.shape, event.dirtyRegion);
          break;

        case _model_page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.ShapeRemoved:
          this.refreshAnnotationLayers();
          break;

        case _model_page_event__WEBPACK_IMPORTED_MODULE_3__.PageChangeType.ShapeModified:
          this.renderVolatileLayer(event.shape, event.dirtyRegion);
          break;
      }
    }
  }, {
    key: "clearAnnotationLayers",
    value: function clearAnnotationLayers() {
      this.volatileRenderSurface.clear();
      this.actionRenderSurface.renderSurface(this.slideRenderSurface);
      this.lastShape = null;
    }
  }, {
    key: "refreshAnnotationLayers",
    value: function refreshAnnotationLayers() {
      var shapes = this.page.getShapes();
      var lastIndex = shapes.length - 1;

      if (lastIndex >= 0) {
        // The page contains at least one shape.
        this.actionRenderSurface.renderSurface(this.slideRenderSurface);

        if (lastIndex > 0) {
          // Render all shapes except the last one on the permanent surface.
          this.actionRenderSurface.renderShapes(shapes.slice(0, lastIndex));
        } // Always render the last shape on the volatile surface.


        var lastShape = shapes[lastIndex];
        this.renderVolatileLayer(lastShape, lastShape.bounds);
      } else {
        // The page contains no shapes.
        this.volatileRenderSurface.clear();
        this.actionRenderSurface.renderSurface(this.slideRenderSurface);
        this.lastShape = null;
      }
    }
  }, {
    key: "renderAllLayers",
    value: function renderAllLayers(page) {
      var _this2 = this;

      var promise = this.renderSlideLayer(page);
      promise.then(function (imageSource) {
        if (imageSource) {
          var pageTransform = _this2.getPageTransform();

          _this2.lastTransform.setTransform(pageTransform);

          _this2.actionRenderSurface.setTransform(pageTransform);

          _this2.volatileRenderSurface.setTransform(pageTransform);

          _this2.actionRenderSurface.renderImageSource(imageSource);

          _this2.actionRenderSurface.renderShapes(page.getShapes());

          _this2.volatileRenderSurface.clear();

          _this2.textLayerSurface.render(page);

          _this2.lastShape = null;

          if (!Object.is(page, _this2.page)) {
            // Keep the view up to date.
            _this2.renderAllLayers(_this2.page);
          }
        }
      })["catch"](function (error) {
        console.error(error);
      });
    }
  }, {
    key: "renderPermanentLayer",
    value: function renderPermanentLayer(shape, dirtyRegion) {
      this.actionRenderSurface.renderShape(shape, dirtyRegion);
    }
  }, {
    key: "renderVolatileLayer",
    value: function renderVolatileLayer(shape, dirtyRegion) {
      this.volatileRenderSurface.renderSurface(this.actionRenderSurface);
      this.volatileRenderSurface.renderShape(shape, dirtyRegion);
      this.lastShape = shape;
    }
  }, {
    key: "renderSlideLayer",
    value: function renderSlideLayer(page) {
      var size = this.slideRenderSurface.getSize();

      if (!size) {
        return this.slideRenderSurface.renderSlideShape(page.getSlideShape(), new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_8__.Rectangle(0, 0, 0, 0));
      }

      var bounds = new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_8__.Rectangle(0, 0, size.width, size.height);
      return this.slideRenderSurface.renderSlideShape(page.getSlideShape(), bounds);
    }
  }, {
    key: "getPageTransform",
    value: function getPageTransform() {
      var pageBounds = this.page.getSlideShape().bounds;
      var pageTransform = new _geometry_transform__WEBPACK_IMPORTED_MODULE_25__.Transform();
      pageTransform.translate(pageBounds.x, pageBounds.y);
      pageTransform.scale(1.0 / pageBounds.width, 1.0 / pageBounds.height);
      return pageTransform;
    }
  }, {
    key: "registerShapeRenderers",
    value: function registerShapeRenderers(renderSurface) {
      renderSurface.registerRenderer(_model_shape_pen_shape__WEBPACK_IMPORTED_MODULE_30__.PenShape.name, new _pen_renderer__WEBPACK_IMPORTED_MODULE_31__.PenRenderer());
      renderSurface.registerRenderer(_model_shape_stroke_shape__WEBPACK_IMPORTED_MODULE_4__.StrokeShape.name, new _highlighter_renderer__WEBPACK_IMPORTED_MODULE_5__.HighlighterRenderer());
      renderSurface.registerRenderer(_model_shape_pointer_shape__WEBPACK_IMPORTED_MODULE_14__.PointerShape.name, new _pointer_renderer__WEBPACK_IMPORTED_MODULE_9__.PointerRenderer());
      renderSurface.registerRenderer(_model_shape_arrow_shape__WEBPACK_IMPORTED_MODULE_15__.ArrowShape.name, new _arrow_renderer__WEBPACK_IMPORTED_MODULE_10__.ArrowRenderer());
      renderSurface.registerRenderer(_model_shape_rectangle_shape__WEBPACK_IMPORTED_MODULE_16__.RectangleShape.name, new _rectangle_renderer__WEBPACK_IMPORTED_MODULE_11__.RectangleRenderer());
      renderSurface.registerRenderer(_model_shape_line_shape__WEBPACK_IMPORTED_MODULE_17__.LineShape.name, new _line_renderer__WEBPACK_IMPORTED_MODULE_12__.LineRenderer());
      renderSurface.registerRenderer(_model_shape_ellipse_shape__WEBPACK_IMPORTED_MODULE_18__.EllipseShape.name, new _ellipse_renderer__WEBPACK_IMPORTED_MODULE_13__.EllipseRenderer());
      renderSurface.registerRenderer(_model_shape_select_shape__WEBPACK_IMPORTED_MODULE_19__.SelectShape.name, new _select_renderer__WEBPACK_IMPORTED_MODULE_20__.SelectRenderer());
      renderSurface.registerRenderer(_model_shape_text_shape__WEBPACK_IMPORTED_MODULE_23__.TextShape.name, new _text_renderer__WEBPACK_IMPORTED_MODULE_24__.TextRenderer());
      renderSurface.registerRenderer(_model_shape_text_highlight_shape__WEBPACK_IMPORTED_MODULE_26__.TextHighlightShape.name, new _text_highlight_renderer__WEBPACK_IMPORTED_MODULE_27__.TextHighlightRenderer());
      renderSurface.registerRenderer(_model_shape_latex_shape__WEBPACK_IMPORTED_MODULE_28__.LatexShape.name, new _latex_renderer__WEBPACK_IMPORTED_MODULE_29__.LatexRenderer());
      renderSurface.registerRenderer(_model_shape_zoom_shape__WEBPACK_IMPORTED_MODULE_21__.ZoomShape.name, new _zoom_renderer__WEBPACK_IMPORTED_MODULE_22__.ZoomRenderer());
    }
  }]);

  return RenderController;
}();



/***/ }),

/***/ "./src/render/render-surface.ts":
/*!**************************************!*\
  !*** ./src/render/render-surface.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderSurface": () => (/* binding */ RenderSurface)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _geometry_dimension__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/dimension */ "./src/geometry/dimension.ts");
/* harmony import */ var _event_size_event__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../event/size-event */ "./src/event/size-event.ts");
/* harmony import */ var _utils_event_listener__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/event-listener */ "./src/utils/event-listener.ts");
/* harmony import */ var _geometry_transform__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../geometry/transform */ "./src/geometry/transform.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






var RenderSurface = /*#__PURE__*/function () {
  function RenderSurface(canvas) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RenderSurface);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "canvas", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "canvasContext", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "renderers", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "sizeEvent", new _utils_event_listener__WEBPACK_IMPORTED_MODULE_5__.TypedEvent());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "transform", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "size", void 0);

    this.canvas = canvas;
    this.canvasContext = canvas.getContext("2d");
    this.renderers = new Map();
    this.transform = new _geometry_transform__WEBPACK_IMPORTED_MODULE_6__.Transform();
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RenderSurface, [{
    key: "clear",
    value: function clear() {
      this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
  }, {
    key: "registerRenderer",
    value: function registerRenderer(shapeName, render) {
      this.renderers.set(shapeName, render);
    }
  }, {
    key: "renderImageSource",
    value: function renderImageSource(canvas) {
      this.canvasContext.drawImage(canvas, 0, 0);
    }
  }, {
    key: "renderSurface",
    value: function renderSurface(surface) {
      if (surface.canvas.width === 0 || surface.canvas.height === 0) {
        return;
      }

      this.canvasContext.drawImage(surface.canvas, 0, 0);
    }
  }, {
    key: "renderShapes",
    value: function renderShapes(shapes) {
      var _iterator = _createForOfIteratorHelper(shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;
          this.renderShape(shape, null);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "renderShape",
    value: function renderShape(shape, dirtyRegion) {
      var renderer = this.renderers.get(shape.constructor.name);

      if (renderer) {
        var s = this.canvas.width * this.transform.getScaleX();
        var tx = this.transform.getTranslateX();
        var ty = this.transform.getTranslateY();
        this.canvasContext.save();
        this.canvasContext.scale(s, s);
        this.canvasContext.translate(-tx, -ty);
        renderer.render(this.canvasContext, shape, dirtyRegion);
        this.canvasContext.restore();
      }
    }
  }, {
    key: "getSize",
    value: function getSize() {
      return this.size;
    }
  }, {
    key: "setSize",
    value: function setSize(width, height) {
      if (width < 1 || height < 1) {
        return;
      } // HiDPI handling


      var dpr = window.devicePixelRatio || 1;
      this.size = new _geometry_dimension__WEBPACK_IMPORTED_MODULE_3__.Dimension(width * dpr, height * dpr);
      this.resizeCanvas(width, height, dpr);
      this.fireSizeEvent(new _event_size_event__WEBPACK_IMPORTED_MODULE_4__.SizeEvent(this.size));
    }
  }, {
    key: "setTransform",
    value: function setTransform(transform) {
      this.transform.setTransform(transform);
    }
  }, {
    key: "addSizeListener",
    value: function addSizeListener(listener) {
      return this.sizeEvent.subscribe(listener);
    }
  }, {
    key: "removeSizeListener",
    value: function removeSizeListener(listener) {
      this.sizeEvent.unsubscribe(listener);
    }
  }, {
    key: "fireSizeEvent",
    value: function fireSizeEvent(event) {
      this.sizeEvent.publish(event);
    }
  }, {
    key: "resizeCanvas",
    value: function resizeCanvas(width, height, devicePixelRatio) {
      var scaleMode = this.canvas.getAttribute("scale");

      if (scaleMode && scaleMode === "full") {
        this.canvas.width = width * devicePixelRatio;
        this.canvas.height = height * devicePixelRatio;
      }

      this.canvas.style.width = width + "px";
      this.canvas.style.height = height + "px";
    }
  }]);

  return RenderSurface;
}();



/***/ }),

/***/ "./src/render/select.renderer.ts":
/*!***************************************!*\
  !*** ./src/render/select.renderer.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectRenderer": () => (/* binding */ SelectRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var SelectRenderer = /*#__PURE__*/function () {
  function SelectRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SelectRenderer);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "FRAME_COLOR", "#FF0064");
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SelectRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var p0 = shape.points[0];
      var p1 = shape.points[1];

      if (!p0 || !p1) {
        return;
      }

      var width = 2 / context.getTransformExt().getScaleX();
      var dash = 4 / context.getTransformExt().getScaleY();
      context.beginPath();
      context.strokeStyle = this.FRAME_COLOR;
      context.lineWidth = width;
      context.lineDashOffset = 0;
      context.setLineDash([dash]);
      context.lineCap = "butt";
      context.lineJoin = "bevel";
      context.rect(p0.x, p0.y, p1.x - p0.x, p1.y - p0.y);
      context.stroke();
    }
  }]);

  return SelectRenderer;
}();



/***/ }),

/***/ "./src/render/slide-render-surface.ts":
/*!********************************************!*\
  !*** ./src/render/slide-render-surface.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SlideRenderSurface": () => (/* binding */ SlideRenderSurface)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _render_surface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./render-surface */ "./src/render/render-surface.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var SlideRenderSurface = /*#__PURE__*/function (_RenderSurface) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(SlideRenderSurface, _RenderSurface);

  var _super = _createSuper(SlideRenderSurface);

  function SlideRenderSurface() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SlideRenderSurface);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SlideRenderSurface, [{
    key: "renderSlideShape",
    value: function renderSlideShape(shape, dirtyRegion) {
      if (!this.canvasContext.canvas.style.width || !this.canvasContext.canvas.style.height) {
        return new Promise(function (resolve, reject) {
          reject();
        });
      }

      var renderer = this.renderers.get(shape.constructor.name);
      var promise = null;

      if (renderer) {
        var pageRect = shape.bounds;
        var sx = this.canvas.width / pageRect.width; //const sy = this.canvas.height / pageRect.height;

        this.canvasContext.save();
        this.canvasContext.scale(sx, sx);
        promise = renderer.render(this.canvasContext, shape, dirtyRegion);
        this.canvasContext.restore();
      }

      return promise;
    }
  }]);

  return SlideRenderSurface;
}(_render_surface__WEBPACK_IMPORTED_MODULE_5__.RenderSurface);



/***/ }),

/***/ "./src/render/slide.renderer.ts":
/*!**************************************!*\
  !*** ./src/render/slide.renderer.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SlideRenderer": () => (/* binding */ SlideRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);





var SlideRenderer = /*#__PURE__*/function () {
  function SlideRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, SlideRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(SlideRenderer, [{
    key: "render",
    value: function () {
      var _render = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(context, shape, dirtyRegion) {
        var page;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                page = shape.getPage();
                return _context.abrupt("return", page.render(context, shape.bounds, dirtyRegion));

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function render(_x, _x2, _x3) {
        return _render.apply(this, arguments);
      }

      return render;
    }()
  }]);

  return SlideRenderer;
}();



/***/ }),

/***/ "./src/render/text-highlight.renderer.ts":
/*!***********************************************!*\
  !*** ./src/render/text-highlight.renderer.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextHighlightRenderer": () => (/* binding */ TextHighlightRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var TextHighlightRenderer = /*#__PURE__*/function () {
  function TextHighlightRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextHighlightRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextHighlightRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var bounds = shape.bounds;

      if (bounds.isEmpty()) {
        return;
      }

      context.beginPath();
      context.globalAlpha = 1;
      context.globalCompositeOperation = "multiply";
      context.fillStyle = shape.getColor().toRgba();
      context.rect(bounds.x, bounds.y, bounds.width, bounds.height);
      context.fill();
    }
  }]);

  return TextHighlightRenderer;
}();



/***/ }),

/***/ "./src/render/text-layer-surface.ts":
/*!******************************************!*\
  !*** ./src/render/text-layer-surface.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextLayerSurface": () => (/* binding */ TextLayerSurface)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _geometry_dimension__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../geometry/dimension */ "./src/geometry/dimension.ts");







var TextLayerSurface = /*#__PURE__*/function () {
  function TextLayerSurface(root) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, TextLayerSurface);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "root", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["default"])(this, "size", void 0);

    this.root = root;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(TextLayerSurface, [{
    key: "clear",
    value: function clear() {
      while (this.root.firstChild) {
        this.root.removeChild(this.root.firstChild);
      }
    }
  }, {
    key: "render",
    value: function () {
      var _render = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee(page) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.clear();
                page.renderText(this.root, this.size);

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function render(_x) {
        return _render.apply(this, arguments);
      }

      return render;
    }()
  }, {
    key: "getSize",
    value: function getSize() {
      return this.size;
    }
  }, {
    key: "setSize",
    value: function setSize(width, height) {
      this.size = new _geometry_dimension__WEBPACK_IMPORTED_MODULE_5__.Dimension(width, height);
      this.root.style.width = width + "px";
      this.root.style.height = height + "px";
    }
  }]);

  return TextLayerSurface;
}();



/***/ }),

/***/ "./src/render/text.renderer.ts":
/*!*************************************!*\
  !*** ./src/render/text.renderer.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextRenderer": () => (/* binding */ TextRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _paint_font__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../paint/font */ "./src/paint/font.ts");




var TextRenderer = /*#__PURE__*/function () {
  function TextRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var text = shape.getText();

      if (!text || text.length === 0) {
        return;
      }

      var bounds = shape.bounds;
      var font = shape.getFont();
      var transform = context.getTransformExt();
      var scale = transform.getScaleX();
      /*
       * Render with identity transform and scaled font, since normalized
       * font size won't give us the desired result as the text will be
       * misplaced and missized.
       */

      var scaledHeight = font.size * scale;
      var x = transform.getTranslateX() + bounds.x * scale;
      var y = transform.getTranslateY() + bounds.y * scale;
      var scaledFont = new _paint_font__WEBPACK_IMPORTED_MODULE_2__.Font(font.family, scaledHeight, font.style, font.weight);
      context.setTransform(1, 0, 0, 1, 0, 0);
      context.font = scaledFont.toString();
      context.fillStyle = shape.getTextColor().toRgba();
      context.fillText(text, x, y + scaledHeight);
    }
  }]);

  return TextRenderer;
}();



/***/ }),

/***/ "./src/render/whiteboard.renderer.ts":
/*!*******************************************!*\
  !*** ./src/render/whiteboard.renderer.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WhiteboardRenderer": () => (/* binding */ WhiteboardRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);





var WhiteboardRenderer = /*#__PURE__*/function () {
  function WhiteboardRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this, WhiteboardRenderer);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(WhiteboardRenderer, [{
    key: "render",
    value: function () {
      var _render = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(context, viewRect, dirtyRegion) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                return _context.abrupt("return", new Promise(function (resolve) {
                  context.canvas.width = dirtyRegion.width;
                  context.canvas.height = dirtyRegion.height;
                  context.fillStyle = "white";
                  context.fillRect(dirtyRegion.x, dirtyRegion.y, dirtyRegion.width, dirtyRegion.height);
                  resolve(context.canvas);
                }));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function render(_x, _x2, _x3) {
        return _render.apply(this, arguments);
      }

      return render;
    }()
  }]);

  return WhiteboardRenderer;
}();



/***/ }),

/***/ "./src/render/zoom.renderer.ts":
/*!*************************************!*\
  !*** ./src/render/zoom.renderer.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZoomRenderer": () => (/* binding */ ZoomRenderer)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var ZoomRenderer = /*#__PURE__*/function () {
  function ZoomRenderer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ZoomRenderer);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "FILL_COLOR", "rgba(0, 163, 232, 0.4)");

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "FRAME_COLOR", "rgb(255, 0, 100)");
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ZoomRenderer, [{
    key: "render",
    value: function render(context, shape, dirtyRegion) {
      var bounds = shape.bounds;
      context.fillStyle = this.FILL_COLOR;
      context.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);
      context.beginPath();
      context.strokeStyle = this.FRAME_COLOR;
      context.lineWidth = 2 / context.getTransformExt().getScaleX();
      context.rect(bounds.x, bounds.y, bounds.width, bounds.height);
      context.stroke();
    }
  }]);

  return ZoomRenderer;
}();



/***/ }),

/***/ "./src/service/course.service.ts":
/*!***************************************!*\
  !*** ./src/service/course.service.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CourseStateService": () => (/* binding */ CourseStateService)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action_parser_progressive_data_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../action/parser/progressive-data-view */ "./src/action/parser/progressive-data-view.ts");
/* harmony import */ var _action_parser_recorded_page_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../action/parser/recorded-page.parser */ "./src/action/parser/recorded-page.parser.ts");
/* harmony import */ var _action_simple_action_executor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../action/simple-action-executor */ "./src/action/simple-action-executor.ts");
/* harmony import */ var _model_whiteboard_document__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/whiteboard.document */ "./src/model/whiteboard.document.ts");
/* harmony import */ var _utils_http_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/http-request */ "./src/utils/http-request.ts");
/* harmony import */ var _document_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./document.service */ "./src/service/document.service.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







var CourseStateService = /*#__PURE__*/function () {
  function CourseStateService(host) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, CourseStateService);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "apiPath", "/course/state");

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "host", void 0);

    this.host = host;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(CourseStateService, [{
    key: "getCourseState",
    value: function getCourseState(courseId) {
      return new _utils_http_request__WEBPACK_IMPORTED_MODULE_7__.HttpRequest().get(this.getFullPath("/" + courseId));
    }
  }, {
    key: "getStateDocument",
    value: function getStateDocument(courseId, stateDoc) {
      var _this = this;

      if (stateDoc.documentFile) {
        return new Promise(function (resolve, reject) {
          new _utils_http_request__WEBPACK_IMPORTED_MODULE_7__.HttpRequest().setResponseType("arraybuffer").get(stateDoc.documentFile).then(function (dataBuffer) {
            if (!dataBuffer) {
              throw new Error("Received empty course document");
            }

            var byteBuffer = new Uint8Array(dataBuffer);
            var docService = new _document_service__WEBPACK_IMPORTED_MODULE_8__.DocumentService();
            var aDom = document.createElement('a');
            var blob = new Blob([byteBuffer], {
              type: 'application/pdf'
            });

            if ('download' in aDom) {
              //    aDom.type = 'download'
              aDom.href = URL.createObjectURL(blob);
              aDom.download = stateDoc.documentName + '.pdf';
              aDom.target = "_blank"; //    aDom.click();
            }

            document.body.appendChild(aDom);
            return docService.loadDocument(byteBuffer);
          }).then(function (slideDoc) {
            slideDoc.setDocumentId(stateDoc.documentId);

            _this.preloadSlideDocument(courseId, stateDoc, slideDoc).then(function () {
              resolve(slideDoc);
            })["catch"](function (error) {
              reject(error);
            });
          })["catch"](function (error) {
            reject(error);
          });
        });
      }

      return new Promise(function (resolve, reject) {
        var slideDoc = new _model_whiteboard_document__WEBPACK_IMPORTED_MODULE_6__.WhiteboardDocument();
        slideDoc.setDocumentId(stateDoc.documentId);

        _this.preloadSlideDocument(courseId, stateDoc, slideDoc).then(function () {
          resolve(slideDoc);
        })["catch"](function (error) {
          reject(error);
        });
      });
    }
  }, {
    key: "getStateDocumentActions",
    value: function getStateDocumentActions(courseId, stateDoc) {
      var _this2 = this;

      return new Promise(function (resolve, reject) {
        return new _utils_http_request__WEBPACK_IMPORTED_MODULE_7__.HttpRequest().setResponseType("arraybuffer").get(_this2.getFullPath("/" + courseId + "/pages/" + stateDoc.documentId)).then(function (dataBuffer) {
          if (!dataBuffer) {
            reject("Received empty course document");
            return;
          }

          var dataView = new _action_parser_progressive_data_view__WEBPACK_IMPORTED_MODULE_3__.ProgressiveDataView(dataBuffer);
          var bufferLength = dataBuffer.byteLength;
          var recordedPages = [];

          while (dataView.byteOffset < bufferLength) {
            var entryLength = dataView.getInt32();
            var pageParser = new _action_parser_recorded_page_parser__WEBPACK_IMPORTED_MODULE_4__.RecordedPageParser();
            var recordedPage = pageParser.parse(dataView);

            if (recordedPage) {
              recordedPages.push(recordedPage);
            }
          }

          resolve(recordedPages);
        })["catch"](function (error) {
          reject(error);
        });
      });
    }
  }, {
    key: "preloadSlideDocument",
    value: function preloadSlideDocument(courseId, stateDoc, slideDoc) {
      var _this3 = this;

      return this.getStateDocumentActions(courseId, stateDoc).then(function (pages) {
        // Pre-load actions for all pages in the document.
        var executor = new _action_simple_action_executor__WEBPACK_IMPORTED_MODULE_5__.SimpleActionExecutor(slideDoc);

        var _iterator = _createForOfIteratorHelper(pages),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var page = _step.value;

            _this3.loadActions(executor, page);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      });
    }
  }, {
    key: "loadActions",
    value: function loadActions(executor, recPage) {
      var actions = recPage.playbackActions;
      var actionCount = actions.length;

      if (actionCount < 1) {
        return;
      } // Select the page on which to execute the actions.


      executor.setPageNumber(recPage.pageNumber);

      var _iterator2 = _createForOfIteratorHelper(actions),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var action = _step2.value;

          try {
            action.execute(executor);
          } catch (e) {
            console.error(e);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "getFullPath",
    value: function getFullPath(path) {
      return this.host + this.apiPath + path;
    }
  }]);

  return CourseStateService;
}();

/***/ }),

/***/ "./src/service/document.service.ts":
/*!*****************************************!*\
  !*** ./src/service/document.service.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DocumentService": () => (/* binding */ DocumentService)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdfjs-dist */ "./node_modules/pdfjs-dist/build/pdf.js");
/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _model_pdf_js_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/pdf-js-document */ "./src/model/pdf-js-document.ts");




var DocumentService = /*#__PURE__*/function () {
  function DocumentService() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, DocumentService);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(DocumentService, [{
    key: "loadDocument",
    value: function loadDocument(source) {
      return new Promise(function (resolve, reject) {
        var loadingTask = (0,pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__.getDocument)(source);
        loadingTask.promise.then(function (pdf) {
          resolve(new _model_pdf_js_document__WEBPACK_IMPORTED_MODULE_3__.PdfJsDocument(pdf));
        })["catch"](function (reason) {
          reject(reason);
        });
      });
    }
  }]);

  return DocumentService;
}();

/***/ }),

/***/ "./src/service/janus.service.ts":
/*!**************************************!*\
  !*** ./src/service/janus.service.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JanusService": () => (/* binding */ JanusService)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var janus_gateway__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! janus-gateway */ "./node_modules/janus-gateway/html/janus.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var JanusService = /*#__PURE__*/function () {
  function JanusService(serverUrl, playbackModel) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, JanusService);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "playbackModel", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "serverUrl", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "playerView", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "janus", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "publisherLocalStream", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "publisherHandle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "publisherId", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "remoteFeeds", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "myroom", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "opaqueId", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "deviceConstraints", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "myusername", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "dataCallback", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "errorCallback", void 0);

    this.serverUrl = serverUrl;
    this.playbackModel = playbackModel;
    this.janus = null;
    this.publisherHandle = null;
    this.publisherId = null;
    this.publisherLocalStream = null;
    this.dataCallback = null;
    this.remoteFeeds = [];
    this.opaqueId = "course-" + janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.randomString(12);
    this.myusername = janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.randomString(12);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(JanusService, [{
    key: "setPlayerView",
    value: function setPlayerView(playerView) {
      this.playerView = playerView;
    }
  }, {
    key: "setDeviceConstraints",
    value: function setDeviceConstraints(deviceConstraints) {
      this.deviceConstraints = deviceConstraints;
    }
  }, {
    key: "setUserId",
    value: function setUserId(userId) {
      this.opaqueId = userId;
    }
  }, {
    key: "setRoomId",
    value: function setRoomId(roomId) {
      this.myroom = roomId;
    }
  }, {
    key: "setOnData",
    value: function setOnData(consumer) {
      _utils_utils__WEBPACK_IMPORTED_MODULE_4__.Utils.checkFunction(consumer);
      this.dataCallback = consumer;
    }
  }, {
    key: "setOnError",
    value: function setOnError(consumer) {
      _utils_utils__WEBPACK_IMPORTED_MODULE_4__.Utils.checkFunction(consumer);
      this.errorCallback = consumer;
    }
  }, {
    key: "start",
    value: function start() {
      var _this = this;

      // Initialize the library (all console debuggers enabled).
      janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.init({
        // debug: "all",
        callback: function callback() {
          // Make sure the browser supports WebRTC.
          if (!janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.isWebrtcSupported()) {
            console.error("No WebRTC support...");
            return;
          }

          _this.createSession();
        }
      });
    }
  }, {
    key: "addPeer",
    value: function addPeer(peerId) {
      var publisherId = Number(peerId);

      if (this.publisherId !== publisherId) {
        this.attachToPublisher({
          id: publisherId
        }, false);
      }
    }
  }, {
    key: "startSpeech",
    value: function startSpeech(deviceConstraints) {
      var _this2 = this;

      // Create a new plugin handle and attach to it as a publisher.
      this.janus.attach({
        plugin: "janus.plugin.videoroom",
        opaqueId: this.opaqueId,
        success: function success(pluginHandle) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Plugin attached! (" + pluginHandle.getPlugin() + ", id=" + pluginHandle.getId() + ")");
          _this2.publisherHandle = pluginHandle;

          _this2.joinAsPublisher(_this2.publisherHandle);
        },
        error: function error(cause) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error("  -- Error attaching plugin...", cause);
        },
        consentDialog: function consentDialog(on) {// e.g., darken the screen if on=true (getUserMedia incoming), restore it otherwise
        },
        iceState: function iceState(state) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("ICE state changed to " + state);
        },
        mediaState: function mediaState(medium, receiving, mid) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Janus " + (receiving ? "started" : "stopped") + " receiving our " + medium);
        },
        webrtcState: function webrtcState(isConnected) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Janus says our WebRTC PeerConnection is " + (isConnected ? "up" : "down") + " now");
          _this2.playbackModel.webrtcPublisherConnected = isConnected;

          if (!isConnected) {
            _this2.playbackModel.localVideoAvailable = false;
            _this2.playbackModel.raisedHand = false;
          }
        },
        onmessage: function onmessage(message, jsep) {
          var event = message["videoroom"];

          if (message["error"]) {
            janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error(message["error"]);
            return;
          }

          if (event) {
            if (event === "joined") {
              _this2.publisherId = message["id"];

              _this2.publishOwnFeed(_this2.publisherHandle, deviceConstraints);
            }
          }

          if (jsep) {
            _this2.publisherHandle.handleRemoteJsep({
              jsep: jsep
            }); // Check if any of the media we wanted to publish has
            // been rejected (e.g., wrong or unsupported codec)


            var audio = message["audio_codec"];
            var video = message["video_codec"];

            if (_this2.publisherLocalStream && _this2.publisherLocalStream.getAudioTracks() && _this2.publisherLocalStream.getAudioTracks().length > 0 && !audio) {
              // Audio has been rejected
              console.log("Our audio stream has been rejected, viewers won't hear us");
            }

            if (_this2.publisherLocalStream && _this2.publisherLocalStream.getVideoTracks() && _this2.publisherLocalStream.getVideoTracks().length > 0 && !video) {
              // Video has been rejected.
              console.log("Our video stream has been rejected, viewers won't see us"); // Hide the webcam video
            }
          }
        },
        onlocalstream: function onlocalstream(stream) {
          _this2.publisherLocalStream = stream;

          var localVideoFeed = _this2.getElementById("localVideoFeed");

          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.attachMediaStream(localVideoFeed, stream);
          localVideoFeed.muted = true;
          var hasVideo = false;
          var constraints = {
            width: {
              min: 640,
              ideal: 640,
              max: 1280
            },
            height: {
              min: 360,
              ideal: 360
            },
            aspectRatio: {
              ideal: 1.7777777778
            },
            frameRate: {
              max: 30
            },
            facingMode: {
              ideal: "user"
            }
          };

          var _iterator = _createForOfIteratorHelper(stream.getVideoTracks()),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var videoTrack = _step.value;
              videoTrack.applyConstraints(constraints);

              if (videoTrack.muted == false) {
                hasVideo = true;
                break;
              }
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          _this2.playbackModel.localVideoAvailable = hasVideo;
        },
        onremotestream: function onremotestream(stream) {// The publisher stream is sendonly, we don't expect anything here.
        },
        oncleanup: function oncleanup() {},
        detached: function detached() {}
      });
    }
  }, {
    key: "stopSpeech",
    value: function stopSpeech() {
      this.publisherId = null;

      if (this.publisherHandle) {
        var unpublish = {
          request: "unpublish"
        };
        this.publisherHandle.send({
          message: unpublish
        });
        this.playbackModel.localVideoAvailable = false;
      }
    }
  }, {
    key: "createSession",
    value: function createSession() {
      var _this3 = this;

      this.janus = new janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus({
        server: this.serverUrl,
        success: function success() {
          _this3.attach();
        },
        error: function error(cause) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error(cause);

          if (_this3.errorCallback) {
            _this3.errorCallback(cause);
          }
        },
        destroyed: function destroyed() {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Janus destroyed");
        }
      });
    }
  }, {
    key: "attach",
    value: function attach() {
      var _this4 = this;

      this.janus.attach({
        plugin: "janus.plugin.videoroom",
        opaqueId: this.opaqueId,
        success: function success(pluginHandle) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Plugin attached! (" + pluginHandle.getPlugin() + ", id=" + pluginHandle.getId() + ")");

          _this4.getParticipants(pluginHandle);
        },
        onmessage: function onmessage(message, jsep) {
          console.log("init handler", message);
        },
        error: function error(cause) {
          console.error("  -- Error attaching plugin...", cause);
        },
        detached: function detached() {
          console.log("detached main...");
        }
      });
    }
  }, {
    key: "getParticipants",
    value: function getParticipants(pluginHandle) {
      var _this5 = this;

      var list = {
        request: "listparticipants",
        room: this.myroom
      };
      pluginHandle.send({
        message: list,
        success: function success(res) {
          var canJoin = res.participants && res.participants.length > 0;

          if (canJoin) {
            for (var i in res.participants) {
              var publisher = res.participants[i];

              _this5.attachToPublisher(publisher, !publisher.display);
            }
          } else {
            janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error("Requested feed is not available anymore");
          }

          pluginHandle.detach();
        }
      });
    }
  }, {
    key: "attachToPublisher",
    value: function attachToPublisher(publisher, isPrimary) {
      var _this6 = this;

      var remoteFeed = null;
      this.janus.attach({
        plugin: "janus.plugin.videoroom",
        opaqueId: this.opaqueId,
        success: function success(pluginHandle) {
          remoteFeed = pluginHandle;
          remoteFeed.isPrimary = isPrimary;
          remoteFeed.hasVideo = false;
          var subscribe = {
            request: "join",
            room: _this6.myroom,
            ptype: "subscriber",
            feed: publisher.id
          };
          remoteFeed.send({
            message: subscribe
          });
        },
        error: function error(cause) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error("  -- Error attaching plugin...", cause);

          if (remoteFeed.isPrimary) {
            _this6.stopSpeech();
          }
        },
        iceState: function iceState(state) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("ICE state changed to " + state);

          if (state === "failed" && _this6.errorCallback) {
            _this6.errorCallback({
              cause: "ICE failed"
            });
          }
        },
        mediaState: function mediaState(medium, receiving, mid) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Janus " + (receiving ? "started" : "stopped") + " receiving our " + medium);
        },
        webrtcState: function webrtcState(isConnected) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Janus says our WebRTC PeerConnection is " + (isConnected ? "up" : "down") + " now");

          if (remoteFeed.isPrimary) {
            _this6.playbackModel.webrtcConnected = isConnected;

            if (!isConnected) {
              _this6.stopSpeech();
            }
          }
        },
        onmessage: function onmessage(message, jsep) {
          var event = message["videoroom"];

          if (message["error"]) {
            console.error(message["error"]);
            return;
          }

          if (event) {
            if (event === "attached") {
              // Subscriber created and attached.
              janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("Successfully attached to feed " + message["id"] + " (" + message["display"] + ") in room " + message["room"]);
              remoteFeed.rfid = message["id"];

              _this6.remoteFeeds.push(remoteFeed);
            }
          }

          if (jsep) {
            _this6.createAnswer(remoteFeed, jsep, remoteFeed.isPrimary);
          }
        },
        onremotestream: function onremotestream(stream) {
          var hasVideo = false;

          var _iterator2 = _createForOfIteratorHelper(stream.getVideoTracks()),
              _step2;

          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var videoTrack = _step2.value;

              if (videoTrack.muted == false) {
                var _ret = function () {
                  var removeListener = function removeListener(event) {
                    _this6.onVideoTrackRemoved(remoteFeed, event.track);

                    stream.removeEventListener("removetrack", removeListener);
                  };

                  stream.addEventListener("removetrack", removeListener);
                  hasVideo = true;
                  return "break";
                }();

                if (_ret === "break") break;
              }
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }

          remoteFeed.hasVideo = hasVideo;

          if (remoteFeed.isPrimary) {
            var video = _this6.playerView.getMediaElement();

            janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.attachMediaStream(video, stream);

            _this6.setAudioSink(video, _this6.deviceConstraints.audioOutput);

            _this6.playbackModel.mainVideoAvailable = hasVideo;
          } else {
            var _video = _this6.getElementById("videoFeed-" + publisher.id);

            if (!_video) {
              _video = document.createElement("video");
              _video.id = "videoFeed-" + publisher.id;
              _video.autoplay = true;
              _video.playsInline = true; // for (const key in video) {
              // 	if(/^on/.test(key)) {
              // 		const eventType = key.substr(2);
              // 		console.log("addEventListener: " + eventType);
              // 		if (eventType === "timeupdate") {
              // 			continue;
              // 		}
              // 		video.addEventListener(eventType, (e: any) => {
              // 			console.log(e);
              // 		});
              // 	}
              // }

              var div = document.createElement("div");
              div.id = "videoFeedDiv-" + publisher.id;
              div.classList.add("feed-container", "invisible");
              div.appendChild(_video);

              var videoFeedContainer = _this6.getElementById("videoFeedContainer");

              videoFeedContainer.appendChild(div);
            }

            if (hasVideo) {
              var videoFeedDiv = _this6.getElementById("videoFeedDiv-" + publisher.id);

              videoFeedDiv.classList.remove("invisible");
            }

            janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.attachMediaStream(_video, stream);

            _this6.setAudioSink(_video, _this6.deviceConstraints.audioOutput);
          }

          _this6.checkVideoCount();
        },
        ondataopen: function ondataopen(label, protocol) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("The DataChannel is available!" + " - " + label + " - " + protocol);
        },
        ondata: function ondata(data) {
          if (remoteFeed.isPrimary) {
            _this6.dataCallback(data);
          }
        },
        oncleanup: function oncleanup() {
          if (!remoteFeed.isPrimary) {
            var videoFeedContainer = _this6.getElementById("videoFeedContainer");

            var videoFeedDiv = _this6.getElementById("videoFeedDiv-" + publisher.id);

            videoFeedContainer.removeChild(videoFeedDiv);
          }

          _this6.remoteFeeds = _this6.remoteFeeds.filter(function (item) {
            return item !== remoteFeed;
          });

          if (remoteFeed.isPrimary) {
            _this6.stopSpeech();
          }

          _this6.checkVideoCount();

          if (remoteFeed.isPrimary) {
            _this6.janus.destroy();
          }
        },
        detached: function detached() {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.log("detached...");
        }
      });
    }
  }, {
    key: "setAudioSink",
    value: function setAudioSink(element, audioSink) {
      if (!('sinkId' in HTMLMediaElement.prototype)) {
        return;
      }

      element.setSinkId(audioSink)["catch"](function (error) {
        console.error(error);
      });
    }
  }, {
    key: "onVideoTrackRemoved",
    value: function onVideoTrackRemoved(remoteFeed, track) {
      this.playbackModel.mainVideoAvailable = false;
      remoteFeed.hasVideo = false;
      this.checkVideoCount();
    }
  }, {
    key: "checkVideoCount",
    value: function checkVideoCount() {
      var hasVideo = false;

      var _iterator3 = _createForOfIteratorHelper(this.remoteFeeds),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var remoteFeed = _step3.value;

          if (remoteFeed.hasVideo === true) {
            hasVideo = true;
            break;
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      this.playbackModel.videoAvailable = hasVideo;
    }
  }, {
    key: "joinAsPublisher",
    value: function joinAsPublisher(remoteFeed) {
      var subscribe = {
        request: "join",
        room: this.myroom,
        ptype: "publisher",
        display: this.myusername
      };
      remoteFeed.send({
        message: subscribe
      });
    }
  }, {
    key: "createAnswer",
    value: function createAnswer(remoteFeed, jsep, wantData) {
      var _this7 = this;

      remoteFeed.createAnswer({
        jsep: jsep,
        media: {
          audioSend: false,
          videoSend: false,
          data: wantData
        },
        // We want recvonly audio/video.
        success: function success(jsep) {
          var body = {
            request: "start",
            room: _this7.myroom
          };
          remoteFeed.send({
            message: body,
            jsep: jsep
          });
        },
        error: function error(_error) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error("WebRTC error: ", _error);
        }
      });
    }
  }, {
    key: "publishOwnFeed",
    value: function publishOwnFeed(remoteFeed, deviceConstraints) {
      var useVideo = deviceConstraints.videoDeviceId != null; // Publish our stream.

      remoteFeed.createOffer({
        // Publishers are sendonly.
        media: {
          audioRecv: false,
          videoRecv: false,
          audioSend: true,
          videoSend: useVideo,
          audio: {
            deviceId: deviceConstraints.audioDeviceId,
            echoCancellation: true
          },
          video: {
            deviceId: deviceConstraints.videoDeviceId,
            width: 1280,
            height: 720
          },
          failIfNoAudio: true,
          failIfNoVideo: false
        },
        success: function success(jsep) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.debug("Got publisher SDP!", jsep);
          var publish = {
            request: "configure",
            audio: true,
            video: useVideo
          }; // if(acodec)
          // 	publish["audiocodec"] = acodec;
          // if(vcodec)
          // 	publish["videocodec"] = vcodec;

          remoteFeed.send({
            message: publish,
            jsep: jsep
          });
        },
        error: function error(_error2) {
          janus_gateway__WEBPACK_IMPORTED_MODULE_3__.Janus.error("WebRTC error:", _error2);
          console.error("WebRTC error:", _error2);
          deviceConstraints.videoDeviceId = null;
          this.publishOwnFeed(remoteFeed, deviceConstraints);
        }
      });
    }
  }, {
    key: "getElementById",
    value: function getElementById(id) {
      return document.getElementById(id);
    }
  }]);

  return JanusService;
}();

/***/ }),

/***/ "./src/service/playback.service.ts":
/*!*****************************************!*\
  !*** ./src/service/playback.service.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlaybackService": () => (/* binding */ PlaybackService)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _action_action_executor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../action/action.executor */ "./src/action/action.executor.ts");
/* harmony import */ var _action_stream_action_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../action/stream-action-player */ "./src/action/stream-action-player.ts");
/* harmony import */ var _media_media_player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../media/media-player */ "./src/media/media-player.ts");
/* harmony import */ var _render_render_controller__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../render/render-controller */ "./src/render/render-controller.ts");
/* harmony import */ var _utils_sync_state__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/sync-state */ "./src/utils/sync-state.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






var PlaybackService = /*#__PURE__*/function () {
  function PlaybackService(playbackModel) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PlaybackService);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "playbackModel", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "documents", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "actionPlayer", void 0);

    this.playbackModel = playbackModel;
    this.documents = new Map();
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PlaybackService, [{
    key: "initialize",
    value: function initialize(playerView, courseState, documents, startTime) {
      var _this = this;

      documents.forEach(function (doc) {
        _this.addDocument(doc);
      });
      var startTimeMs = Number(startTime);
      var slideView = playerView.getSlideView();
      var mediaPlayer = new _media_media_player__WEBPACK_IMPORTED_MODULE_5__.MediaPlayer(playerView.getMediaElement());
      mediaPlayer.muted = this.playbackModel.getMuted();
      mediaPlayer.addTimeListener(function () {
        playerView.setDuration(Date.now() - startTimeMs);
      });
      playerView.setOnMute(function (mute) {
        mediaPlayer.muted = mute;
      });
      playerView.setOnVolume(function (value) {
        mediaPlayer.muted = false;
        mediaPlayer.volume = value;
      }); // Select active document.

      var activeStateDoc = courseState.avtiveDocument;
      var activeDoc = null;

      var _iterator = _createForOfIteratorHelper(documents),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var doc = _step.value;

          if (doc.getDocumentId() == activeStateDoc.documentId) {
            activeDoc = doc;
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      var renderController = new _render_render_controller__WEBPACK_IMPORTED_MODULE_6__.RenderController();
      renderController.setActionRenderSurface(slideView.getActionRenderSurface());
      renderController.setSlideRenderSurface(slideView.getSlideRenderSurface());
      renderController.setVolatileRenderSurface(slideView.getVolatileRenderSurface());
      renderController.setTextLayerSurface(slideView.getTextLayerSurface());
      var executor = new _action_action_executor__WEBPACK_IMPORTED_MODULE_3__.StreamActionExecutor(renderController);
      executor.setDocument(activeDoc);
      executor.setPageNumber(activeStateDoc.activePage.pageNumber);
      this.actionPlayer = new _action_stream_action_player__WEBPACK_IMPORTED_MODULE_4__.StreamActionPlayer(executor, new _utils_sync_state__WEBPACK_IMPORTED_MODULE_7__.SyncState(mediaPlayer));
      this.actionPlayer.start();
      this.playbackModel.webrtcConnectedProperty.subscribe(function () {
        playerView.show();
      });
    }
  }, {
    key: "addAction",
    value: function addAction(action) {
      this.actionPlayer.addAction(action);
    }
  }, {
    key: "addDocument",
    value: function addDocument(document) {
      this.documents.set(BigInt(document.getDocumentId()), document);
    }
  }, {
    key: "removeDocument",
    value: function removeDocument(docId) {
      this.documents["delete"](BigInt(docId));
    }
  }, {
    key: "selectDocument",
    value: function selectDocument(docId) {
      var document = this.documents.get(BigInt(docId));

      if (document) {
        this.actionPlayer.setDocument(document);
      }
    }
  }]);

  return PlaybackService;
}();

/***/ }),

/***/ "./src/tool/arrow.tool.ts":
/*!********************************!*\
  !*** ./src/tool/arrow.tool.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArrowTool": () => (/* binding */ ArrowTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_shape_arrow_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/arrow.shape */ "./src/model/shape/arrow.shape.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var ArrowTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ArrowTool, _PaintTool);

  var _super = _createSuper(ArrowTool);

  function ArrowTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ArrowTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "context", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ArrowTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_arrow_shape__WEBPACK_IMPORTED_MODULE_8__.ArrowShape(this.shapeHandle, this.brush);
      this.shape.setP0(point);
      context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__.AddShapeAction([this.shape]));
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.setKeyEvent(this.context.keyEvent);
      this.shape.setP1(point);
    }
  }]);

  return ArrowTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/atomic.tool.ts":
/*!*********************************!*\
  !*** ./src/tool/atomic.tool.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AtomicTool": () => (/* binding */ AtomicTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");



var AtomicTool = /*#__PURE__*/function () {
  function AtomicTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, AtomicTool);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(AtomicTool, [{
    key: "execute",
    value: function execute(point) {// No action
    }
  }, {
    key: "end",
    value: function end(point) {// No action
    }
  }]);

  return AtomicTool;
}();



/***/ }),

/***/ "./src/tool/clear-shapes.tool.ts":
/*!***************************************!*\
  !*** ./src/tool/clear-shapes.tool.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ClearShapesTool": () => (/* binding */ ClearShapesTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _model_action_remove_shape_action__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/action/remove-shape.action */ "./src/model/action/remove-shape.action.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ClearShapesTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ClearShapesTool, _AtomicTool);

  var _super = _createSuper(ClearShapesTool);

  function ClearShapesTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ClearShapesTool);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ClearShapesTool, [{
    key: "begin",
    value: function begin(point, context) {
      var shapes = Object.assign([], context.page.getShapes());
      context.page.addAction(new _model_action_remove_shape_action__WEBPACK_IMPORTED_MODULE_6__.RemoveShapeAction(shapes));
    }
  }]);

  return ClearShapesTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_5__.AtomicTool);



/***/ }),

/***/ "./src/tool/clone.tool.ts":
/*!********************************!*\
  !*** ./src/tool/clone.tool.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CloneTool": () => (/* binding */ CloneTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var CloneTool = /*#__PURE__*/function () {
  function CloneTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, CloneTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "sourcePoint", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "selectedShapes", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(CloneTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.sourcePoint = point.clone();
      this.context = context;
      this.getSelectedShapes();

      if (this.hasSelectedShapes()) {
        if (this.hitSelected(point)) {
          var cloned = new Array();

          var _iterator = _createForOfIteratorHelper(this.selectedShapes),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var shape = _step.value;
              var clonedShape = shape.clone();
              cloned.push(clonedShape);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_3__.AddShapeAction(cloned));
        } else {
          this.removeSelection();
        }
      } else {
        var selectedShape = this.getTopLevelShape(point);

        if (selectedShape != null) {
          var _clonedShape = selectedShape.clone();

          context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_3__.AddShapeAction([_clonedShape]));
          this.addSelection(_clonedShape);
        }
      }
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.sourcePoint.subtract(point);
      this.moveShapes(point, this.sourcePoint);
      this.sourcePoint = point.clone();
    }
  }, {
    key: "end",
    value: function end(point) {// No-op
    }
  }, {
    key: "getTopLevelShape",
    value: function getTopLevelShape(point) {
      var shape = null;

      var _iterator2 = _createForOfIteratorHelper(this.context.page.getShapes()),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var s = _step2.value;

          if (s.contains(point)) {
            shape = s;
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      return shape;
    }
  }, {
    key: "getSelectedShapes",
    value: function getSelectedShapes() {
      this.selectedShapes = new Array();

      var _iterator3 = _createForOfIteratorHelper(this.context.page.getShapes()),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var shape = _step3.value;

          if (shape.isSelected()) {
            this.selectedShapes.push(shape);
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    }
  }, {
    key: "moveShapes",
    value: function moveShapes(point, delta) {
      if (!this.hasSelectedShapes()) {
        return;
      }

      this.context.beginBulkRender();

      var _iterator4 = _createForOfIteratorHelper(this.selectedShapes),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var shape = _step4.value;
          shape.moveByDelta(delta);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }

      this.context.endBulkRender();
    }
  }, {
    key: "hasSelectedShapes",
    value: function hasSelectedShapes() {
      return this.selectedShapes.length != 0;
    }
  }, {
    key: "addSelection",
    value: function addSelection(shape) {
      shape.setSelected(true);
      this.selectedShapes.push(shape);
    }
  }, {
    key: "removeSelection",
    value: function removeSelection() {
      this.context.beginBulkRender();

      var _iterator5 = _createForOfIteratorHelper(this.selectedShapes),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var shape = _step5.value;
          shape.setSelected(false);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }

      this.selectedShapes.length = 0;
      this.context.endBulkRender();
    }
  }, {
    key: "hitSelected",
    value: function hitSelected(point) {
      var _iterator6 = _createForOfIteratorHelper(this.selectedShapes),
          _step6;

      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var shape = _step6.value;

          if (shape.contains(point)) {
            return true;
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }

      return false;
    }
  }]);

  return CloneTool;
}();



/***/ }),

/***/ "./src/tool/delete.shape.tool.ts":
/*!***************************************!*\
  !*** ./src/tool/delete.shape.tool.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DeleteShapeTool": () => (/* binding */ DeleteShapeTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_action_remove_shape_action__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/action/remove-shape.action */ "./src/model/action/remove-shape.action.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var DeleteShapeTool = /*#__PURE__*/function () {
  function DeleteShapeTool(shapeHandle) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, DeleteShapeTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shapeHandle", void 0);

    this.shapeHandle = shapeHandle;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(DeleteShapeTool, [{
    key: "begin",
    value: function begin(point, context) {
      var _iterator = _createForOfIteratorHelper(context.page.getShapes()),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape.handle === this.shapeHandle) {
            context.page.addAction(new _model_action_remove_shape_action__WEBPACK_IMPORTED_MODULE_3__.RemoveShapeAction(new Array(shape)));
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "execute",
    value: function execute(point) {// No-op
    }
  }, {
    key: "end",
    value: function end(point) {// No-op
    }
  }]);

  return DeleteShapeTool;
}();



/***/ }),

/***/ "./src/tool/ellipse.tool.ts":
/*!**********************************!*\
  !*** ./src/tool/ellipse.tool.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EllipseTool": () => (/* binding */ EllipseTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_shape_ellipse_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/ellipse.shape */ "./src/model/shape/ellipse.shape.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var EllipseTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(EllipseTool, _PaintTool);

  var _super = _createSuper(EllipseTool);

  function EllipseTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, EllipseTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "context", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(EllipseTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_ellipse_shape__WEBPACK_IMPORTED_MODULE_8__.EllipseShape(this.shapeHandle, this.brush);
      this.shape.setP0(point);
      context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__.AddShapeAction([this.shape]));
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.setKeyEvent(this.context.keyEvent);
      this.shape.setP1(point);
    }
  }]);

  return EllipseTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/extend-view.tool.ts":
/*!**************************************!*\
  !*** ./src/tool/extend-view.tool.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ExtendViewTool": () => (/* binding */ ExtendViewTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var ExtendViewTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ExtendViewTool, _AtomicTool);

  var _super = _createSuper(ExtendViewTool);

  function ExtendViewTool(rect) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ExtendViewTool);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "rect", void 0);

    _this.rect = rect;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ExtendViewTool, [{
    key: "begin",
    value: function begin(point, context) {
      context.page.getSlideShape().setPageRect(this.rect);
    }
  }]);

  return ExtendViewTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_7__.AtomicTool);



/***/ }),

/***/ "./src/tool/highlighter.tool.ts":
/*!**************************************!*\
  !*** ./src/tool/highlighter.tool.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HighlighterTool": () => (/* binding */ HighlighterTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_shape_stroke_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/stroke.shape */ "./src/model/shape/stroke.shape.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var HighlighterTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(HighlighterTool, _PaintTool);

  var _super = _createSuper(HighlighterTool);

  function HighlighterTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, HighlighterTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(HighlighterTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.shape = new _model_shape_stroke_shape__WEBPACK_IMPORTED_MODULE_8__.StrokeShape(this.shapeHandle, this.brush);
      this.shape.addPoint(point);
      context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__.AddShapeAction([this.shape]));
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.addPoint(point);
    }
  }]);

  return HighlighterTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/latex-font.tool.ts":
/*!*************************************!*\
  !*** ./src/tool/latex-font.tool.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatexFontTool": () => (/* binding */ LatexFontTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _model_shape_latex_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/latex.shape */ "./src/model/shape/latex.shape.ts");








function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var LatexFontTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LatexFontTool, _AtomicTool);

  var _super = _createSuper(LatexFontTool);

  function LatexFontTool(handle, font, textColor, textAttributes) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LatexFontTool);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "font", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textColor", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textAttributes", void 0);

    _this.handle = handle;
    _this.font = font;
    _this.textColor = textColor;
    _this.textAttributes = textAttributes;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LatexFontTool, [{
    key: "begin",
    value: function begin(point, context) {
      var shapes = context.page.getShapes();

      var _iterator = _createForOfIteratorHelper(shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape instanceof _model_shape_latex_shape__WEBPACK_IMPORTED_MODULE_8__.LatexShape && shape.handle === this.handle) {
            shape.setFont(this.font);
            shape.setTextColor(this.textColor);
            shape.setTextAttributes(this.textAttributes);
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);

  return LatexFontTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_7__.AtomicTool);



/***/ }),

/***/ "./src/tool/latex.tool.ts":
/*!********************************!*\
  !*** ./src/tool/latex.tool.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatexTool": () => (/* binding */ LatexTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_shape_latex_shape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/shape/latex.shape */ "./src/model/shape/latex.shape.ts");





var LatexTool = /*#__PURE__*/function () {
  function LatexTool(handle) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LatexTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    this.handle = handle;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LatexTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_latex_shape__WEBPACK_IMPORTED_MODULE_3__.LatexShape(this.handle);
    }
  }, {
    key: "execute",
    value: function execute(point) {// No-op
    }
  }, {
    key: "end",
    value: function end(point) {
      this.shape.setLocation(point);
      this.context.page.addShape(this.shape);
    }
  }]);

  return LatexTool;
}();



/***/ }),

/***/ "./src/tool/line.tool.ts":
/*!*******************************!*\
  !*** ./src/tool/line.tool.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LineTool": () => (/* binding */ LineTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_shape_line_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/line.shape */ "./src/model/shape/line.shape.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var LineTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LineTool, _PaintTool);

  var _super = _createSuper(LineTool);

  function LineTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LineTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "context", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LineTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_line_shape__WEBPACK_IMPORTED_MODULE_8__.LineShape(this.shapeHandle, this.brush);
      this.shape.setP0(point);
      context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__.AddShapeAction([this.shape]));
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.setKeyEvent(this.context.keyEvent);
      this.shape.setP1(point);
    }
  }]);

  return LineTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/paint.tool.ts":
/*!********************************!*\
  !*** ./src/tool/paint.tool.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PaintTool": () => (/* binding */ PaintTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var PaintTool = /*#__PURE__*/function () {
  function PaintTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PaintTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shapeHandle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "brush", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PaintTool, [{
    key: "begin",
    value: function begin(point, context) {}
  }, {
    key: "execute",
    value: function execute(point) {}
  }, {
    key: "end",
    value: function end(point) {}
  }]);

  return PaintTool;
}();



/***/ }),

/***/ "./src/tool/pan.tool.ts":
/*!******************************!*\
  !*** ./src/tool/pan.tool.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PanTool": () => (/* binding */ PanTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _geometry_rectangle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/rectangle */ "./src/geometry/rectangle.ts");





var PanTool = /*#__PURE__*/function () {
  function PanTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PanTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "lastPoint", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PanTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.lastPoint = point;
    }
  }, {
    key: "execute",
    value: function execute(point) {
      var slideShape = this.context.page.getSlideShape();
      var pageRect = slideShape.bounds;
      var x = pageRect.x + (this.lastPoint.x - point.x);
      var y = pageRect.y + (this.lastPoint.y - point.y);
      slideShape.setPageRect(new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_3__.Rectangle(x, y, pageRect.width, pageRect.height));
      this.lastPoint = point;
    }
  }, {
    key: "end",
    value: function end(point) {// No-op
    }
  }]);

  return PanTool;
}();



/***/ }),

/***/ "./src/tool/pen.tool.ts":
/*!******************************!*\
  !*** ./src/tool/pen.tool.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PenTool": () => (/* binding */ PenTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");
/* harmony import */ var _model_shape_pen_shape__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/shape/pen.shape */ "./src/model/shape/pen.shape.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var PenTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(PenTool, _PaintTool);

  var _super = _createSuper(PenTool);

  function PenTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PenTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PenTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.shape = new _model_shape_pen_shape__WEBPACK_IMPORTED_MODULE_9__.PenShape(this.shapeHandle, this.brush);
      this.shape.addPoint(point);
      context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_8__.AddShapeAction([this.shape]));
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.addPoint(point);
    }
  }, {
    key: "end",
    value: function end(point) {// No-op
    }
  }]);

  return PenTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/pointer.tool.ts":
/*!**********************************!*\
  !*** ./src/tool/pointer.tool.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PointerTool": () => (/* binding */ PointerTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_shape_pointer_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/pointer.shape */ "./src/model/shape/pointer.shape.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var PointerTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(PointerTool, _PaintTool);

  var _super = _createSuper(PointerTool);

  function PointerTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PointerTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "page", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PointerTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.page = context.page;
      this.shape = new _model_shape_pointer_shape__WEBPACK_IMPORTED_MODULE_8__.PointerShape(this.shapeHandle, this.brush);
      this.shape.addPoint(point);
      this.page.addShape(this.shape);
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.addPoint(point);
    }
  }, {
    key: "end",
    value: function end(point) {
      this.page.removeShape(this.shape);
    }
  }]);

  return PointerTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/rectangle.tool.ts":
/*!************************************!*\
  !*** ./src/tool/rectangle.tool.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RectangleTool": () => (/* binding */ RectangleTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _paint_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paint.tool */ "./src/tool/paint.tool.ts");
/* harmony import */ var _model_shape_rectangle_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/rectangle.shape */ "./src/model/shape/rectangle.shape.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var RectangleTool = /*#__PURE__*/function (_PaintTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(RectangleTool, _PaintTool);

  var _super = _createSuper(RectangleTool);

  function RectangleTool() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RectangleTool);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "context", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RectangleTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_rectangle_shape__WEBPACK_IMPORTED_MODULE_8__.RectangleShape(this.shapeHandle, this.brush);
      this.shape.setP0(point);
      context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_9__.AddShapeAction([this.shape]));
    }
  }, {
    key: "execute",
    value: function execute(point) {
      this.shape.setKeyEvent(this.context.keyEvent);
      this.shape.setP1(point);
    }
  }]);

  return RectangleTool;
}(_paint_tool__WEBPACK_IMPORTED_MODULE_7__.PaintTool);



/***/ }),

/***/ "./src/tool/redo.tool.ts":
/*!*******************************!*\
  !*** ./src/tool/redo.tool.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RedoTool": () => (/* binding */ RedoTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var RedoTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(RedoTool, _AtomicTool);

  var _super = _createSuper(RedoTool);

  function RedoTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, RedoTool);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(RedoTool, [{
    key: "begin",
    value: function begin(point, context) {
      context.page.redo();
    }
  }]);

  return RedoTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_5__.AtomicTool);



/***/ }),

/***/ "./src/tool/select-group.tool.ts":
/*!***************************************!*\
  !*** ./src/tool/select-group.tool.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectGroupTool": () => (/* binding */ SelectGroupTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_shape_select_shape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/shape/select.shape */ "./src/model/shape/select.shape.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


var Mode;

(function (Mode) {
  Mode[Mode["Select"] = 0] = "Select";
  Mode[Mode["Move"] = 1] = "Move";
})(Mode || (Mode = {}));

var SelectGroupTool = /*#__PURE__*/function () {
  function SelectGroupTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SelectGroupTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "mode", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "selectedShapes", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "sourcePoint", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "initialized", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SelectGroupTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.sourcePoint = point.clone();
      this.context = context;
      this.initialized = false;
      this.shape = new _model_shape_select_shape__WEBPACK_IMPORTED_MODULE_3__.SelectShape();
      this.context.page.addShape(this.shape);
      this.getSelectedShapes();

      if (this.hasSelectedShapes()) {
        if (this.hitSelected(point)) {
          this.mode = Mode.Move;
        } else {
          this.context.beginBulkRender();
          this.removeSelection();
          this.context.endBulkRender();
          this.mode = Mode.Select;
        }
      } else {
        this.mode = Mode.Select;
      }
    }
  }, {
    key: "execute",
    value: function execute(point) {
      if (this.mode == Mode.Select) {
        if (!this.initialized) {
          this.shape.setP0(point);
          this.initialized = true;
        }

        this.shape.addPoint(point.clone());
        this.shape.setP1(point);
        this.selectGroup(this.shape.bounds);
      } else if (this.mode == Mode.Move) {
        this.sourcePoint.subtract(point);
        this.moveShapes(this.sourcePoint);
        this.sourcePoint = point.clone();
      }
    }
  }, {
    key: "end",
    value: function end(point) {
      this.context.page.removeShape(this.shape);
      this.initialized = false;
    }
  }, {
    key: "selectGroup",
    value: function selectGroup(rect) {
      this.context.beginBulkRender();
      this.removeSelection();

      var _iterator = _createForOfIteratorHelper(this.context.page.getShapes()),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape === this.shape) {
            continue;
          }

          if (shape.intersects(rect)) {
            this.addSelection(shape);
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      this.context.endBulkRender();
    }
  }, {
    key: "addSelection",
    value: function addSelection(shape) {
      shape.setSelected(true);
      this.selectedShapes.push(shape);
    }
  }, {
    key: "getSelectedShapes",
    value: function getSelectedShapes() {
      this.selectedShapes = new Array();

      var _iterator2 = _createForOfIteratorHelper(this.context.page.getShapes()),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var shape = _step2.value;

          if (shape.isSelected()) {
            this.selectedShapes.push(shape);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "hasSelectedShapes",
    value: function hasSelectedShapes() {
      return this.selectedShapes.length != 0;
    }
  }, {
    key: "hitSelected",
    value: function hitSelected(point) {
      var _iterator3 = _createForOfIteratorHelper(this.selectedShapes),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var shape = _step3.value;

          if (shape.contains(point)) {
            return true;
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      return false;
    }
  }, {
    key: "removeSelection",
    value: function removeSelection() {
      var _iterator4 = _createForOfIteratorHelper(this.selectedShapes),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var shape = _step4.value;
          shape.setSelected(false);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }

      this.selectedShapes.length = 0;
    }
  }, {
    key: "moveShapes",
    value: function moveShapes(delta) {
      if (!this.hasSelectedShapes()) {
        return;
      }

      this.context.beginBulkRender();

      var _iterator5 = _createForOfIteratorHelper(this.selectedShapes),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var shape = _step5.value;
          shape.moveByDelta(delta);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }

      this.context.endBulkRender();
    }
  }]);

  return SelectGroupTool;
}();



/***/ }),

/***/ "./src/tool/select.tool.ts":
/*!*********************************!*\
  !*** ./src/tool/select.tool.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SelectTool": () => (/* binding */ SelectTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var SelectTool = /*#__PURE__*/function () {
  function SelectTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SelectTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "sourcePoint", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "selectedShape", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SelectTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.sourcePoint = point.clone();
      this.context = context;
      this.selectedShape = this.getTopLevelShape(point);
      this.removeSelection();

      if (this.selectedShape != null) {
        this.selectedShape.setSelected(true);
      }
    }
  }, {
    key: "execute",
    value: function execute(point) {
      if (this.selectedShape != null) {
        this.sourcePoint.subtract(point);
        this.context.beginBulkRender();
        this.selectedShape.moveByDelta(this.sourcePoint);
        this.context.endBulkRender();
        this.sourcePoint = point.clone();
      }
    }
  }, {
    key: "end",
    value: function end(point) {
      if (this.selectedShape != null) {
        this.context.beginBulkRender();
        this.selectedShape.setSelected(false);
        this.context.endBulkRender();
      }
    }
  }, {
    key: "getTopLevelShape",
    value: function getTopLevelShape(point) {
      var shape = null;

      var _iterator = _createForOfIteratorHelper(this.context.page.getShapes()),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var s = _step.value;

          if (s.contains(point)) {
            shape = s;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return shape;
    }
  }, {
    key: "removeSelection",
    value: function removeSelection() {
      this.context.beginBulkRender();

      var _iterator2 = _createForOfIteratorHelper(this.context.page.getShapes()),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var shape = _step2.value;

          if (shape.isSelected()) {
            shape.setSelected(false);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      this.context.endBulkRender();
    }
  }]);

  return SelectTool;
}();



/***/ }),

/***/ "./src/tool/text-change.tool.ts":
/*!**************************************!*\
  !*** ./src/tool/text-change.tool.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextChangeTool": () => (/* binding */ TextChangeTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _model_shape_typesetting_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/typesetting.shape */ "./src/model/shape/typesetting.shape.ts");








function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextChangeTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextChangeTool, _AtomicTool);

  var _super = _createSuper(TextChangeTool);

  function TextChangeTool(handle, text) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextChangeTool);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "text", void 0);

    _this.handle = handle;
    _this.text = text;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextChangeTool, [{
    key: "begin",
    value: function begin(point, context) {
      var shapes = context.page.getShapes();

      var _iterator = _createForOfIteratorHelper(shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape instanceof _model_shape_typesetting_shape__WEBPACK_IMPORTED_MODULE_8__.TypesettingShape && shape.handle === this.handle) {
            shape.setText(this.text);
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);

  return TextChangeTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_7__.AtomicTool);



/***/ }),

/***/ "./src/tool/text-font.tool.ts":
/*!************************************!*\
  !*** ./src/tool/text-font.tool.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextFontTool": () => (/* binding */ TextFontTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _model_shape_text_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/text.shape */ "./src/model/shape/text.shape.ts");








function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextFontTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextFontTool, _AtomicTool);

  var _super = _createSuper(TextFontTool);

  function TextFontTool(handle, font, textColor, textAttributes) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextFontTool);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "font", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textColor", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textAttributes", void 0);

    _this.handle = handle;
    _this.font = font;
    _this.textColor = textColor;
    _this.textAttributes = textAttributes;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextFontTool, [{
    key: "begin",
    value: function begin(point, context) {
      var shapes = context.page.getShapes();

      var _iterator = _createForOfIteratorHelper(shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape instanceof _model_shape_text_shape__WEBPACK_IMPORTED_MODULE_8__.TextShape && shape.handle === this.handle) {
            shape.setFont(this.font);
            shape.setTextColor(this.textColor);
            shape.setTextAttributes(this.textAttributes);
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);

  return TextFontTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_7__.AtomicTool);



/***/ }),

/***/ "./src/tool/text-highlight.tool.ts":
/*!*****************************************!*\
  !*** ./src/tool/text-highlight.tool.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextHighlightTool": () => (/* binding */ TextHighlightTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_shape_text_highlight_shape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/shape/text-highlight.shape */ "./src/model/shape/text-highlight.shape.ts");
/* harmony import */ var _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/action/add-shape.action */ "./src/model/action/add-shape.action.ts");




function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var TextHighlightTool = /*#__PURE__*/function () {
  function TextHighlightTool(shapeHandle, color, textBounds) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextHighlightTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shapeHandle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "color", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "textBounds", void 0);

    this.shapeHandle = shapeHandle;
    this.color = color;
    this.textBounds = textBounds;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextHighlightTool, [{
    key: "begin",
    value: function begin(point, context) {
      if (this.textBounds.length < 1) {
        return;
      }

      var selectShape = null;

      var _iterator = _createForOfIteratorHelper(context.page.getShapes()),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape.handle === this.shapeHandle) {
            selectShape = shape;
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      if (!selectShape) {
        selectShape = new _model_shape_text_highlight_shape__WEBPACK_IMPORTED_MODULE_3__.TextHighlightShape(this.shapeHandle, this.color);
        context.page.addAction(new _model_action_add_shape_action__WEBPACK_IMPORTED_MODULE_4__.AddShapeAction([selectShape]));
      }

      var _iterator2 = _createForOfIteratorHelper(this.textBounds),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var rect = _step2.value;
          selectShape.addTextBounds(rect);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "execute",
    value: function execute(point) {// Do nothing.
    }
  }, {
    key: "end",
    value: function end(point) {// Do nothing.
    }
  }]);

  return TextHighlightTool;
}();



/***/ }),

/***/ "./src/tool/text-move.tool.ts":
/*!************************************!*\
  !*** ./src/tool/text-move.tool.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextMoveTool": () => (/* binding */ TextMoveTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _model_shape_typesetting_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/typesetting.shape */ "./src/model/shape/typesetting.shape.ts");








function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextMoveTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextMoveTool, _AtomicTool);

  var _super = _createSuper(TextMoveTool);

  function TextMoveTool(handle, point) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextMoveTool);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "point", void 0);

    _this.handle = handle;
    _this.point = point;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextMoveTool, [{
    key: "begin",
    value: function begin(point, context) {
      var shapes = context.page.getShapes();

      var _iterator = _createForOfIteratorHelper(shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape instanceof _model_shape_typesetting_shape__WEBPACK_IMPORTED_MODULE_8__.TypesettingShape && shape.handle === this.handle) {
            context.beginBulkRender();
            shape.setLocation(this.point);
            context.endBulkRender();
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);

  return TextMoveTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_7__.AtomicTool);



/***/ }),

/***/ "./src/tool/text-remove.tool.ts":
/*!**************************************!*\
  !*** ./src/tool/text-remove.tool.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextRemoveTool": () => (/* binding */ TextRemoveTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _model_shape_typesetting_shape__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../model/shape/typesetting.shape */ "./src/model/shape/typesetting.shape.ts");








function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var TextRemoveTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TextRemoveTool, _AtomicTool);

  var _super = _createSuper(TextRemoveTool);

  function TextRemoveTool(handle) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextRemoveTool);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "handle", void 0);

    _this.handle = handle;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextRemoveTool, [{
    key: "begin",
    value: function begin(point, context) {
      var shapes = context.page.getShapes();

      var _iterator = _createForOfIteratorHelper(shapes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var shape = _step.value;

          if (shape instanceof _model_shape_typesetting_shape__WEBPACK_IMPORTED_MODULE_8__.TypesettingShape && shape.handle === this.handle) {
            context.page.removeShape(shape);
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);

  return TextRemoveTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_7__.AtomicTool);



/***/ }),

/***/ "./src/tool/text.tool.ts":
/*!*******************************!*\
  !*** ./src/tool/text.tool.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextTool": () => (/* binding */ TextTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_shape_text_shape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/shape/text.shape */ "./src/model/shape/text.shape.ts");





var TextTool = /*#__PURE__*/function () {
  function TextTool(handle) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TextTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "handle", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    this.handle = handle;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TextTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_text_shape__WEBPACK_IMPORTED_MODULE_3__.TextShape(this.handle);
    }
  }, {
    key: "execute",
    value: function execute(point) {// No-op
    }
  }, {
    key: "end",
    value: function end(point) {
      this.shape.setLocation(point);
      this.context.page.addShape(this.shape);
    }
  }]);

  return TextTool;
}();



/***/ }),

/***/ "./src/tool/tool-context.ts":
/*!**********************************!*\
  !*** ./src/tool/tool-context.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ToolContext": () => (/* binding */ ToolContext)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var ToolContext = /*#__PURE__*/function () {
  function ToolContext(renderController) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ToolContext);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "renderController", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "page", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "keyEvent", void 0);

    this.renderController = renderController;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ToolContext, [{
    key: "beginBulkRender",
    value: function beginBulkRender() {
      this.renderController.beginBulkRender();
    }
  }, {
    key: "endBulkRender",
    value: function endBulkRender() {
      this.renderController.endBulkRender();
    }
  }]);

  return ToolContext;
}();



/***/ }),

/***/ "./src/tool/undo.tool.ts":
/*!*******************************!*\
  !*** ./src/tool/undo.tool.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UndoTool": () => (/* binding */ UndoTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var UndoTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(UndoTool, _AtomicTool);

  var _super = _createSuper(UndoTool);

  function UndoTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, UndoTool);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(UndoTool, [{
    key: "begin",
    value: function begin(point, context) {
      context.page.undo();
    }
  }]);

  return UndoTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_5__.AtomicTool);



/***/ }),

/***/ "./src/tool/zoom-out.tool.ts":
/*!***********************************!*\
  !*** ./src/tool/zoom-out.tool.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZoomOutTool": () => (/* binding */ ZoomOutTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _atomic_tool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./atomic.tool */ "./src/tool/atomic.tool.ts");
/* harmony import */ var _geometry_rectangle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../geometry/rectangle */ "./src/geometry/rectangle.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ZoomOutTool = /*#__PURE__*/function (_AtomicTool) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ZoomOutTool, _AtomicTool);

  var _super = _createSuper(ZoomOutTool);

  function ZoomOutTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ZoomOutTool);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ZoomOutTool, [{
    key: "begin",
    value: function begin(point, context) {
      context.page.getSlideShape().setPageRect(new _geometry_rectangle__WEBPACK_IMPORTED_MODULE_6__.Rectangle(0, 0, 1, 1));
    }
  }]);

  return ZoomOutTool;
}(_atomic_tool__WEBPACK_IMPORTED_MODULE_5__.AtomicTool);



/***/ }),

/***/ "./src/tool/zoom.tool.ts":
/*!*******************************!*\
  !*** ./src/tool/zoom.tool.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZoomTool": () => (/* binding */ ZoomTool)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _model_shape_zoom_shape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/shape/zoom.shape */ "./src/model/shape/zoom.shape.ts");





var ZoomTool = /*#__PURE__*/function () {
  function ZoomTool() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ZoomTool);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "shape", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "context", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "initialized", void 0);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ZoomTool, [{
    key: "begin",
    value: function begin(point, context) {
      this.context = context;
      this.shape = new _model_shape_zoom_shape__WEBPACK_IMPORTED_MODULE_3__.ZoomShape();
      this.context.page.addShape(this.shape);
    }
  }, {
    key: "execute",
    value: function execute(point) {
      if (!this.initialized) {
        this.shape.setP0(point);
        this.initialized = true;
      }

      this.shape.setP1(point);
    }
  }, {
    key: "end",
    value: function end(point) {
      this.initialized = false;
      this.context.page.removeShape(this.shape);
      this.context.page.getSlideShape().setPageRect(this.shape.bounds);
    }
  }]);

  return ZoomTool;
}();



/***/ }),

/***/ "./src/utils/event-listener.ts":
/*!*************************************!*\
  !*** ./src/utils/event-listener.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TypedEvent": () => (/* binding */ TypedEvent)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");



var TypedEvent = /*#__PURE__*/function () {
  function TypedEvent() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TypedEvent);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "listeners", []);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "listenersOncer", []);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TypedEvent, [{
    key: "subscribe",
    value: function subscribe(listener) {
      var _this = this;

      this.listeners.push(listener);
      return {
        dispose: function dispose() {
          return _this.unsubscribe(listener);
        }
      };
    }
  }, {
    key: "subscribeOnce",
    value: function subscribeOnce(listener) {
      this.listenersOncer.push(listener);
    }
  }, {
    key: "unsubscribe",
    value: function unsubscribe(listener) {
      var callbackIndex = this.listeners.indexOf(listener);

      if (callbackIndex > -1) {
        this.listeners.splice(callbackIndex, 1);
      }
    }
  }, {
    key: "publish",
    value: function publish(event) {
      this.listeners.forEach(function (listener) {
        return listener(event);
      });
      this.listenersOncer.forEach(function (listener) {
        return listener(event);
      });
      this.listenersOncer = [];
    }
  }, {
    key: "pipe",
    value: function pipe(te) {
      return this.subscribe(function (e) {
        return te.publish(e);
      });
    }
  }]);

  return TypedEvent;
}(); //export { Listener, Disposable, TypedEvent };

/***/ }),

/***/ "./src/utils/executable-base.ts":
/*!**************************************!*\
  !*** ./src/utils/executable-base.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ExecutableBase": () => (/* binding */ ExecutableBase)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _executable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./executable */ "./src/utils/executable.ts");
/* harmony import */ var _executable_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./executable-state */ "./src/utils/executable-state.ts");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var ExecutableBase = /*#__PURE__*/function (_Executable) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["default"])(ExecutableBase, _Executable);

  var _super = _createSuper(ExecutableBase);

  function ExecutableBase() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ExecutableBase);

    return _super.apply(this, arguments);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ExecutableBase, [{
    key: "init",
    value: function init() {
      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Initializing);

      try {
        this.initInternal();
      } catch (e) {
        this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Error);
        throw new Error("Failed to init ".concat(this.constructor.name, ": ").concat(e));
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Initialized);
    }
  }, {
    key: "start",
    value: function start() {
      if (this.created() || this.destroyed()) {
        this.init();
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Starting);

      try {
        this.startInternal();
      } catch (e) {
        this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Error);
        throw new Error("Failed to start ".concat(this.constructor.name, ": ").concat(e));
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Started);
    }
  }, {
    key: "stop",
    value: function stop() {
      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Stopping);

      try {
        this.stopInternal();
      } catch (e) {
        this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Error);
        throw new Error("Failed to stop ".concat(this.constructor.name, ": ").concat(e));
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Stopped);
    }
  }, {
    key: "suspend",
    value: function suspend() {
      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Suspending);

      try {
        this.suspendInternal();
      } catch (e) {
        this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Error);
        throw new Error("Failed to suspend ".concat(this.constructor.name, ": ").concat(e));
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Suspended);
    }
  }, {
    key: "suspendInternal",
    value: function suspendInternal() {}
  }, {
    key: "destroy",
    value: function destroy() {
      if (this.started() || this.suspended()) {
        stop();
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Destroying);

      try {
        this.destroyInternal();
      } catch (e) {
        this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Error);
        throw new Error("Failed to destroy ".concat(this.constructor.name, ": ").concat(e));
      }

      this.setState(_executable_state__WEBPACK_IMPORTED_MODULE_6__.ExecutableState.Destroyed);
    }
  }]);

  return ExecutableBase;
}(_executable__WEBPACK_IMPORTED_MODULE_5__.Executable);



/***/ }),

/***/ "./src/utils/executable-state.ts":
/*!***************************************!*\
  !*** ./src/utils/executable-state.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ExecutableState": () => (/* binding */ ExecutableState)
/* harmony export */ });
var ExecutableState;

(function (ExecutableState) {
  ExecutableState["Created"] = "Created";
  ExecutableState["Initializing"] = "Initializing";
  ExecutableState["Initialized"] = "Initialized";
  ExecutableState["Starting"] = "Starting";
  ExecutableState["Started"] = "Started";
  ExecutableState["Stopping"] = "Stopping";
  ExecutableState["Stopped"] = "Stopped";
  ExecutableState["Suspending"] = "Suspending";
  ExecutableState["Suspended"] = "Suspended";
  ExecutableState["Destroying"] = "Destroying";
  ExecutableState["Destroyed"] = "Destroyed";
  ExecutableState["Error"] = "Error";
})(ExecutableState || (ExecutableState = {}));



/***/ }),

/***/ "./src/utils/executable.ts":
/*!*********************************!*\
  !*** ./src/utils/executable.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Executable": () => (/* binding */ Executable)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _executable_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./executable-state */ "./src/utils/executable-state.ts");
/* harmony import */ var _event_listener__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./event-listener */ "./src/utils/event-listener.ts");






var Executable = /*#__PURE__*/function () {
  function Executable() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Executable);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "stateEvent", new _event_listener__WEBPACK_IMPORTED_MODULE_4__.TypedEvent());

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_state", _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Created);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "_prevState", _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Created);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Executable, [{
    key: "state",
    get: function get() {
      return this._state;
    }
  }, {
    key: "previousState",
    get: function get() {
      return this._prevState;
    }
  }, {
    key: "initialized",
    value: function initialized() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Initialized;
    }
  }, {
    key: "created",
    value: function created() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Created;
    }
  }, {
    key: "started",
    value: function started() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Started;
    }
  }, {
    key: "stopped",
    value: function stopped() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopped;
    }
  }, {
    key: "suspended",
    value: function suspended() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Suspended;
    }
  }, {
    key: "destroyed",
    value: function destroyed() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroyed;
    }
  }, {
    key: "error",
    value: function error() {
      return this._state === _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error;
    }
  }, {
    key: "addStateListener",
    value: function addStateListener(listener) {
      return this.stateEvent.subscribe(listener);
    }
  }, {
    key: "removeStateListener",
    value: function removeStateListener(listener) {
      this.stateEvent.unsubscribe(listener);
    }
  }, {
    key: "fireStateChanged",
    value: function fireStateChanged() {
      this.stateEvent.publish(this._state);
    }
  }, {
    key: "setState",
    value: function setState(state) {
      //console.log(`Setting state for ${this.constructor.name} to ${state}`);
      if (!this.validateNextState(state)) {
        throw new Error("Invalid state transition for ".concat(this.constructor.name, ": [").concat(this.state, "] -> [").concat(state, "]."));
      }

      this._prevState = this._state;
      this._state = state;
      this.fireStateChanged();
    }
  }, {
    key: "validateNextState",
    value: function validateNextState(nextState) {
      switch (this._state) {
        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Created:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Initializing, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Initializing:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Initialized, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Initialized:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Starting, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Starting:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Started, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Started:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Suspending, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopping, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopping:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopped, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopped:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Starting, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Suspending:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Suspended, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Suspended:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Starting, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopping, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroyed, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroyed:
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Initializing);

        case _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Error:
          // Allow to recover from previous operation failure.
          return this.isAllowed(nextState, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Starting, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Stopping, _executable_state__WEBPACK_IMPORTED_MODULE_3__.ExecutableState.Destroying);

        default:
          return false;
      }
    }
  }, {
    key: "isAllowed",
    value: function isAllowed(nextState) {
      for (var _len = arguments.length, allowedStates = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        allowedStates[_key - 1] = arguments[_key];
      }

      if (!allowedStates) {
        throw new Error("No allowed states provided.");
      }

      for (var _i = 0, _allowedStates = allowedStates; _i < _allowedStates.length; _i++) {
        var allowedState = _allowedStates[_i];

        if (nextState == allowedState) {
          return true;
        }
      }

      return false;
    }
  }]);

  return Executable;
}();



/***/ }),

/***/ "./src/utils/http-request.ts":
/*!***********************************!*\
  !*** ./src/utils/http-request.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HttpRequest": () => (/* binding */ HttpRequest)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/typeof */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");






function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var HttpRequest = /*#__PURE__*/function () {
  function HttpRequest(options) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["default"])(this, HttpRequest);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__["default"])(this, "requestOptions", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__["default"])(this, "onProgress", void 0);

    this.requestOptions = options || {
      returnType: "body",
      responseType: "json",
      withCredentials: false,
      timeout: 0
    };
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["default"])(HttpRequest, [{
    key: "setHttpParams",
    value: function setHttpParams(params) {
      this.requestOptions.params = params;
      return this;
    }
  }, {
    key: "setHttpHeaders",
    value: function setHttpHeaders(headers) {
      this.requestOptions.headers = headers;
      return this;
    }
  }, {
    key: "setReturnType",
    value: function setReturnType(returnType) {
      this.requestOptions.returnType = returnType;
      return this;
    }
  }, {
    key: "setResponseType",
    value: function setResponseType(responseType) {
      this.requestOptions.responseType = responseType;
      return this;
    }
  }, {
    key: "setWithCredentials",
    value: function setWithCredentials(withCredentials) {
      this.requestOptions.withCredentials = withCredentials;
      return this;
    }
  }, {
    key: "setTimeout",
    value: function setTimeout(timeout) {
      this.requestOptions.timeout = timeout;
      return this;
    }
  }, {
    key: "setOptions",
    value: function setOptions(options) {
      this.requestOptions = options;
      return this;
    }
  }, {
    key: "setOnProgress",
    value: function setOnProgress(onProgress) {
      this.onProgress = onProgress;
      return this;
    }
  }, {
    key: "delete",
    value: function _delete(url) {
      return this.request("DELETE", url);
    }
  }, {
    key: "get",
    value: function get(url) {
      return this.request("GET", url);
    }
  }, {
    key: "head",
    value: function head(url) {
      return this.request("HEAD", url);
    }
  }, {
    key: "options",
    value: function options(url) {
      return this.request("OPTIONS", url);
    }
  }, {
    key: "patch",
    value: function patch(url, body) {
      return this.request("PATCH", url, body);
    }
  }, {
    key: "post",
    value: function post(url, body) {
      return this.request("POST", url, body);
    }
  }, {
    key: "put",
    value: function put(url, body) {
      return this.request("PUT", url, body);
    }
  }, {
    key: "request",
    value: function request(method, url, body) {
      var _this = this;

      var request = new XMLHttpRequest();
      request.open(method, this.composeUrl(url), true);
      request.responseType = this.requestOptions.responseType;
      request.timeout = this.requestOptions.timeout;
      request.withCredentials = this.requestOptions.withCredentials;
      this.setHeaders(body, request);
      return new Promise(function (resolve, reject) {
        var errorHandler = function errorHandler() {
          reject(_this.getResponse(request));
        };

        request.onload = function () {
          if (request.status >= 200 && request.status < 400) {
            var returnValue = null;

            if (_this.requestOptions.returnType === "response") {
              returnValue = _this.getResponse(request);
            } else {
              returnValue = _this.decodeBody(request);
            }

            resolve(returnValue);
          } else {
            errorHandler();
          }
        };

        request.ontimeout = errorHandler;
        request.onerror = errorHandler;

        if (_this.onProgress) {
          if (body && request.upload) {
            request.upload.onprogress = _this.onProgress;
          } else {
            request.onprogress = _this.onProgress;
          }
        }

        request.send(_this.encodeBody(body));
      });
    }
  }, {
    key: "getResponse",
    value: function getResponse(request) {
      var response = {
        body: this.decodeBody(request),
        headers: this.getHeaders(request),
        status: request.status,
        statusText: request.statusText
      };
      return response;
    }
  }, {
    key: "composeUrl",
    value: function composeUrl(url) {
      var params = this.requestOptions.params;

      if (!params) {
        return url;
      }

      var paramsEnc = params ? params.toString() : "";

      if (paramsEnc) {
        var qIndex = url.indexOf("?");
        var sep = qIndex === -1 ? "?" : qIndex < url.length - 1 ? "&" : "";
        url = url + sep + paramsEnc;
      }

      return url;
    }
  }, {
    key: "getContentType",
    value: function getContentType(body) {
      if (body == null) {
        return null;
      }

      if (body instanceof Blob) {
        return body.type;
      } // Rely on the browser's content type assignment.


      if (body instanceof FormData) {
        return null;
      }

      if (typeof body === "string") {
        return "text/plain";
      }

      if (body instanceof URLSearchParams) {
        return "application/x-www-form-urlencoded; charset=UTF-8";
      }

      if ((0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_1__["default"])(body) === "object" || typeof body === "number" || Array.isArray(body)) {
        return "application/json";
      }

      return null;
    }
  }, {
    key: "encodeBody",
    value: function encodeBody(body) {
      if (body == null) {
        return null;
      }

      if (body instanceof ArrayBuffer || body instanceof Blob || body instanceof FormData || typeof body === "string") {
        return body;
      }

      if ((0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_1__["default"])(body) === "object" || typeof body === "boolean" || Array.isArray(body)) {
        return JSON.stringify(body);
      }

      return body.toString();
    }
  }, {
    key: "decodeBody",
    value: function decodeBody(request) {
      var body = request.response || null;
      var responseType = request.responseType;

      if (!responseType) {
        responseType = request.getResponseHeader("Content-Type");
        var match = new RegExp("^\\w+\/(\\w+);?").exec(responseType);

        if (match) {
          responseType = match[1];
        }
      }

      if (responseType === "json" && typeof body === "string") {
        body = body !== "" ? JSON.parse(body) : null;
      }

      return body;
    }
  }, {
    key: "setHeaders",
    value: function setHeaders(body, request) {
      var headers = this.requestOptions.headers;

      if (headers) {
        var _iterator = _createForOfIteratorHelper(headers),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _step$value = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_step.value, 2),
                key = _step$value[0],
                value = _step$value[1];

            if (Array.isArray(value)) {
              var _iterator2 = _createForOfIteratorHelper(value),
                  _step2;

              try {
                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                  var v = _step2.value;
                  request.setRequestHeader(key, v);
                }
              } catch (err) {
                _iterator2.e(err);
              } finally {
                _iterator2.f();
              }
            } else {
              request.setRequestHeader(key, value);
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }

      if (!headers || !headers.has("Content-Type")) {
        var contentType = this.getContentType(body);

        if (contentType) {
          request.setRequestHeader("Content-Type", contentType);
        }
      }

      if (!headers || !headers.has("Accept")) {
        request.setRequestHeader("Accept", "application/json, text/plain, */*");
      }
    }
  }, {
    key: "getHeaders",
    value: function getHeaders(request) {
      var headers = new Map();
      var responseHeaders = request.getAllResponseHeaders();

      if (responseHeaders) {
        var headerList = responseHeaders.trim().split(/[\r\n]+/);

        var _iterator3 = _createForOfIteratorHelper(headerList),
            _step3;

        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var line = _step3.value;
            var index = line.indexOf(':');

            if (index > 0) {
              var name = line.slice(0, index);
              var value = line.slice(index + 1).trim();
              var header = name.toLowerCase();
              var headerValues = headers.get(header);

              if (headerValues) {
                (typeof headerValues === "string" ? [headerValues] : headerValues).push(value);
              } else {
                headers.set(header, value);
              }
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
      }

      return headers;
    }
  }]);

  return HttpRequest;
}();

/***/ }),

/***/ "./src/utils/observable.ts":
/*!*********************************!*\
  !*** ./src/utils/observable.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Observable": () => (/* binding */ Observable)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");



var Observable = /*#__PURE__*/function () {
  function Observable() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Observable);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "observers", void 0);

    this.observers = [];
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Observable, [{
    key: "subscribe",
    value: function subscribe(observer) {
      this.observers.push(observer);
    }
  }, {
    key: "unsubscribe",
    value: function unsubscribe(observer) {
      this.observers = this.observers.filter(function (subscriber) {
        return subscriber !== observer;
      });
    }
  }, {
    key: "notify",
    value: function notify(data) {
      this.observers.forEach(function (observer) {
        return observer(data);
      });
    }
  }]);

  return Observable;
}();

/***/ }),

/***/ "./src/utils/property.ts":
/*!*******************************!*\
  !*** ./src/utils/property.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Property": () => (/* binding */ Property)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "./node_modules/@babel/runtime/helpers/esm/get.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _utils_observable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/observable */ "./src/utils/observable.ts");









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var Property = /*#__PURE__*/function (_Observable) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["default"])(Property, _Observable);

  var _super = _createSuper(Property);

  function Property(defaultValue) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Property);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "_value", void 0);

    _this._value = defaultValue;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Property, [{
    key: "value",
    get: function get() {
      return this._value;
    },
    set: function set(newValue) {
      if (this._value === newValue) {
        return;
      }

      this._value = newValue;
      this.notify(this._value);
    }
  }, {
    key: "notifyObservers",
    value: function notifyObservers() {
      (0,_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__["default"])((0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__["default"])(Property.prototype), "notify", this).call(this, this._value);
    }
  }]);

  return Property;
}(_utils_observable__WEBPACK_IMPORTED_MODULE_8__.Observable);



/***/ }),

/***/ "./src/utils/sync-state.ts":
/*!*********************************!*\
  !*** ./src/utils/sync-state.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SyncState": () => (/* binding */ SyncState)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");




var SyncState = /*#__PURE__*/function () {
  function SyncState(mediaPlayer) {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SyncState);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "mediaPlayer", void 0);

    this.mediaPlayer = mediaPlayer;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SyncState, [{
    key: "audioTime",
    get: function get() {
      return this.mediaPlayer.time * 1000;
    }
  }]);

  return SyncState;
}();



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Utils": () => (/* binding */ Utils)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");


var Utils = /*#__PURE__*/function () {
  function Utils() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Utils);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Utils, null, [{
    key: "isFunction",
    value: function isFunction(func) {
      return typeof func === "function";
    }
  }, {
    key: "checkFunction",
    value: function checkFunction(func) {
      if (!this.isFunction(func)) {
        console.error("Consumer is not a function");
      }
    }
  }]);

  return Utils;
}();

/***/ }),

/***/ "./src/view/index.ts":
/*!***************************!*\
  !*** ./src/view/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlayerView": () => (/* reexport safe */ _player_view_player_view__WEBPACK_IMPORTED_MODULE_1__.PlayerView),
/* harmony export */   "WebSlideView": () => (/* reexport safe */ _slide_view_web_slide_view__WEBPACK_IMPORTED_MODULE_0__.WebSlideView)
/* harmony export */ });
/* harmony import */ var _slide_view_web_slide_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./slide-view/web-slide.view */ "./src/view/slide-view/web-slide.view.ts");
/* harmony import */ var _player_view_player_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./player-view/player.view */ "./src/view/player-view/player.view.ts");



/***/ }),

/***/ "./src/view/player-view/player.view.ts":
/*!*********************************************!*\
  !*** ./src/view/player-view/player.view.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlayerView": () => (/* binding */ PlayerView)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _view_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../view-element */ "./src/view/view-element.ts");
/* harmony import */ var _web_view_element__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../web-view-element */ "./src/view/web-view-element.ts");








var _dec, _class;

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var PlayerView = (_dec = (0,_view_element__WEBPACK_IMPORTED_MODULE_7__.ViewElement)({
  selector: "player-view",
  template: __webpack_require__(/*! ./player.view.html */ "./src/view/player-view/player.view.html"),
  styles: [__webpack_require__(/*! ./player.view.css */ "./src/view/player-view/player.view.css")]
}), _dec(_class = /*#__PURE__*/function (_WebViewElement) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(PlayerView, _WebViewElement);

  var _super = _createSuper(PlayerView);

  function PlayerView(model) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, PlayerView);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "playbackModel", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "playerContainer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "slideView", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "playerControls", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "videoFeed", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "videoFeedContainer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "mainVideoFeedContainer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "localVideoFeedContainer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "chatContainer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "chatModal", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "chatModalState", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "chatCollapse", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "rightContainer", void 0);

    _this.playbackModel = model;
    _this.chatCollapse = null;
    _this.chatModal = null;
    _this.chatModalState = false;
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(PlayerView, [{
    key: "connectedCallback",
    value: function connectedCallback() {
      var _this2 = this;

      var elementA = this.playbackModel.elementAProperty.value;

      if (elementA) {
        this.setChat(elementA);
      }

      this.videoFeed.addEventListener("canplay", function () {
        _this2.videoFeed.play()["catch"](function (error) {
          if (error.name == "NotAllowedError") {
            _this2.cannotPlay();
          }
        });
      });
      this.videoFeed.addEventListener("play", function () {// window.dispatchEvent(new Event("resize"));
      });
      this.playbackModel.elementAProperty.subscribe(this.setChat.bind(this)); // this.playbackModel.videoAvailableProperty.subscribe(this.setVideoAvailable.bind(this));

      this.playbackModel.mainVideoAvailableProperty.subscribe(this.setMainVideoAvailable.bind(this));
      this.playbackModel.localVideoAvailableProperty.subscribe(this.setLocalVideoAvailable.bind(this));
      this.playbackModel.showChatProperty.subscribe(this.showChat.bind(this));
      this.playerControls.setOnRaiseHand(this.playbackModel.raisedHandProperty);
      this.playerControls.setOnRaiseHandActive(this.playbackModel.webrtcPublisherConnectedProperty);
      this.playerControls.setOnShowQuiz(this.playbackModel.showQuizProperty);
      this.playerControls.setOnShowQuizActive(this.playbackModel.showQuizActiveProperty);
      this.playerControls.setOnChatAction(this.playbackModel.showChatProperty);
      this.playerControls.setOnFullscreen(function (fullscreen) {
        _this2.setFullscreen(fullscreen);
      });
      this.playerControls.setOnPlayMedia(function () {
        _this2.videoFeed.play().then(function () {
          _this2.playerControls.setPlayMediaVisible(false);

          var videos = _this2.querySelectorAll("video");

          videos.forEach(function (video) {
            video.play();
          });
        })["catch"](function (error) {
          console.error(error);
        });
      });
      var chatModalElement = document.getElementById("chatModal");
      chatModalElement.addEventListener("hidden.bs.modal", function (e) {
        _this2.playbackModel.showChat = false;
      });
      this.chatModal = new bootstrap.Modal(chatModalElement, {});
      var mql = window.matchMedia("(max-width: 576px)");
      mql.addEventListener('change', function (e) {
        _this2.chatModalState = e.matches;
        _this2.playbackModel.showChat = !mql.matches;
      });
      this.chatModalState = mql.matches;
      this.playbackModel.showChat = !mql.matches;
      new ResizeObserver(this.computeViewSize.bind(this)).observe(this.playerContainer);
      this.style.display = "none";
    }
  }, {
    key: "initEntryModal",
    value: function initEntryModal() {
      var _this3 = this;

      var entryModalElement = document.getElementById("entry-modal");
      var entryModalLabel = document.getElementById("entry-modal-label");
      var entryModal = bootstrap.Modal.getOrCreateInstance(entryModalElement, {
        backdrop: "static",
        keyboard: false
      });

      var hiddenHandler = function hiddenHandler() {
        _this3.videoFeed.play().then(function () {
          var videos = _this3.querySelectorAll("video");

          videos.forEach(function (video) {
            video.play();
          });
        })["catch"](function (error) {
          console.error(error);
        });
      };

      entryModalElement.addEventListener("hidden.bs.modal", hiddenHandler);
      entryModal.show();
    }
  }, {
    key: "show",
    value: function show() {
      this.style.display = "flex";
    }
  }, {
    key: "getSlideView",
    value: function getSlideView() {
      return this.slideView;
    }
  }, {
    key: "getMediaElement",
    value: function getMediaElement() {
      return this.videoFeed;
    }
  }, {
    key: "setDuration",
    value: function setDuration(durationMs) {
      this.playerControls.setDuration(durationMs);
    }
  }, {
    key: "setVolume",
    value: function setVolume(volume) {
      this.playerControls.setVolume(volume);
    }
  }, {
    key: "setMuted",
    value: function setMuted(muted) {
      this.playerControls.setMuted(muted);
    }
  }, {
    key: "setFullscreen",
    value: function setFullscreen(fullscreen) {
      if (fullscreen) {
        if (this.requestFullscreen) {
          this.requestFullscreen();
        } else if (this.mozRequestFullScreen) {
          this.mozRequestFullScreen();
        } else if (this.webkitRequestFullScreen) {
          this.webkitRequestFullScreen();
        } else if (this.msRequestFullscreen) {
          this.msRequestFullscreen();
        }
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.mozCancelFullScreen) {
          document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
      }

      this.computeViewSize();
    }
  }, {
    key: "setOnVolume",
    value: function setOnVolume(observer) {
      this.playerControls.setOnVolume(observer);
    }
  }, {
    key: "setOnMute",
    value: function setOnMute(observer) {
      this.playerControls.setOnMute(observer);
    }
  }, {
    key: "setOnFullscreen",
    value: function setOnFullscreen(observer) {
      this.playerControls.setOnFullscreen(observer);
    }
  }, {
    key: "setOnSettings",
    value: function setOnSettings(observer) {
      this.playerControls.setOnSettings(observer);
    }
  }, {
    key: "cannotPlay",
    value: function cannotPlay() {
      this.initEntryModal(); //this.playerControls.setPlayMediaVisible(true);
      // window.dispatchEvent(new Event("resize"));
    }
  }, {
    key: "setChat",
    value: function setChat(element) {
      var _this4 = this;

      if (element) {
        this.chatContainer.appendChild(element);
        var chatCloseButton = element.querySelector("#chat-close-button");
        chatCloseButton.addEventListener("click", this.toggleChat.bind(this));
        var chatCollapseElement = element.querySelector("#flush-chat");
        this.chatCollapse = new bootstrap.Collapse(chatCollapseElement, {
          toggle: false
        });
        var clone = element.cloneNode(true);
        var messageForm = clone.querySelector("#course-message-form");
        var chatModalElement = document.getElementById("chatModal");
        var chatModalContent = chatModalElement.querySelector(".modal-body");
        chatModalContent.appendChild(messageForm);
        var submitButton = chatModalContent.querySelector("#messageSubmit");
        var chatModalFooter = chatModalElement.querySelector(".modal-footer");
        chatModalFooter.appendChild(submitButton);
        submitButton.addEventListener("click", function (event) {
          // Disable default action.
          event.preventDefault();
          var data = new FormData(messageForm);
          var value = Object.fromEntries(data.entries());
          fetch(messageForm.getAttribute("action"), {
            method: "POST",
            body: JSON.stringify(value),
            headers: {
              "Content-Type": "application/json"
            }
          }).then(function (response) {
            var toastId = response.status === 200 ? "toast-success" : "toast-warn";
            var toastMessage = response.status === 200 ? "course.feature.message.sent" : "course.feature.message.send.error";

            _this4.showToast(toastId, toastMessage);

            messageForm.reset();

            _this4.chatModal.hide();
          })["catch"](function (error) {
            return console.error(error);
          });
        });
        this.playbackModel.showChat = !window.matchMedia("(max-width: 768px)").matches;
      } else {
        while (this.chatContainer.firstElementChild) {
          var _chatCloseButton = this.chatContainer.firstElementChild.querySelector("#chat-close-button");

          _chatCloseButton.removeEventListener("click", this.toggleChat);

          if (this.chatCollapse) {
            this.chatCollapse.dispose();
            this.chatCollapse = null;
          }

          var _chatModalElement = document.getElementById("chatModal");

          var _chatModalContent = _chatModalElement.querySelector(".modal-body");

          var _chatModalFooter = _chatModalElement.querySelector(".modal-footer");

          var _submitButton = _chatModalFooter.querySelector("#messageSubmit");

          _chatModalFooter.removeChild(_submitButton);

          this.removeAllChildNodes(_chatModalContent);
          this.chatContainer.removeChild(this.chatContainer.firstElementChild);
        }
      }

      this.playerControls.setChatEnabled(element !== null);
      this.updateRightContainer();
    }
  }, {
    key: "showChat",
    value: function showChat(show) {
      var chat = this.chatContainer.firstElementChild;

      if (chat === null) {
        return;
      }

      if (show && this.chatModalState) {
        this.chatModal.show();
      }

      this.setElementVisible(chat, show);

      if (show) {
        this.chatCollapse.show();
      }
    }
  }, {
    key: "toggleChat",
    value: function toggleChat() {
      var enabled = this.playbackModel.showChat;
      this.playbackModel.showChat = !enabled;
    }
  }, {
    key: "showToast",
    value: function showToast(toastId, messageId) {
      var toastElement = document.getElementById(toastId);
      var toastBody = toastElement.getElementsByClassName("toast-body")[0];
      toastBody.innerHTML = window.dict[messageId];
      var toast = new bootstrap.Toast(toastElement);
      toast.show();
    }
  }, {
    key: "setElementVisible",
    value: function setElementVisible(element, visible) {
      if (visible) {
        element.classList.remove("invisible");
      } else {
        element.classList.add("invisible");
      }
    }
  }, {
    key: "setVideoAvailable",
    value: function setVideoAvailable(available) {
      this.setElementVisible(this.videoFeedContainer, available);
      this.updateRightContainer();
    }
  }, {
    key: "setMainVideoAvailable",
    value: function setMainVideoAvailable(available) {
      this.setElementVisible(this.mainVideoFeedContainer, available);
      this.updateRightContainer();
    }
  }, {
    key: "setLocalVideoAvailable",
    value: function setLocalVideoAvailable(available) {
      this.setElementVisible(this.localVideoFeedContainer, available);
      this.updateRightContainer();
    }
  }, {
    key: "updateRightContainer",
    value: function updateRightContainer() {
      this.setElementVisible(this.rightContainer, this.playbackModel.videoAvailable || this.playbackModel.localVideoAvailable || this.chatContainer.hasChildNodes());
      this.computeViewSize();
    }
  }, {
    key: "computeViewSize",
    value: function computeViewSize() {
      var slideRatio = 4 / 3;
      var width = this.offsetWidth - this.rightContainer.offsetWidth;
      var height = this.offsetHeight;
      var viewRatio = width / height;

      if (viewRatio > slideRatio) {
        width = height * slideRatio;
      } else {
        height = width / slideRatio;
      }

      this.playerContainer.style.height = (height + this.playerControls.offsetHeight) / this.offsetHeight * 100 + "%";
    }
  }, {
    key: "removeAllChildNodes",
    value: function removeAllChildNodes(parent) {
      while (parent.firstChild) {
        parent.removeChild(parent.firstChild);
      }
    }
  }]);

  return PlayerView;
}(_web_view_element__WEBPACK_IMPORTED_MODULE_8__.WebViewElement)) || _class);


/***/ }),

/***/ "./src/view/slide-view/web-slide.view.ts":
/*!***********************************************!*\
  !*** ./src/view/slide-view/web-slide.view.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebSlideView": () => (/* binding */ WebSlideView)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _render_slide_render_surface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../render/slide-render-surface */ "./src/render/slide-render-surface.ts");
/* harmony import */ var _render_render_surface__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../render/render-surface */ "./src/render/render-surface.ts");
/* harmony import */ var _render_text_layer_surface__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../render/text-layer-surface */ "./src/render/text-layer-surface.ts");
/* harmony import */ var _view_element__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../view-element */ "./src/view/view-element.ts");
/* harmony import */ var _web_view_element__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../web-view-element */ "./src/view/web-view-element.ts");








var _dec, _class;

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






var WebSlideView = (_dec = (0,_view_element__WEBPACK_IMPORTED_MODULE_10__.ViewElement)({
  selector: "slide-view",
  template: __webpack_require__(/*! ./web-slide.view.html */ "./src/view/slide-view/web-slide.view.html"),
  styles: [__webpack_require__(/*! ./web-slide.view.css */ "./src/view/slide-view/web-slide.view.css")]
}), _dec(_class = /*#__PURE__*/function (_WebViewElement) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(WebSlideView, _WebViewElement);

  var _super = _createSuper(WebSlideView);

  function WebSlideView() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, WebSlideView);

    _this = _super.call(this);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "slideRenderSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "actionRenderSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "volatileRenderSurface", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "textLayerSurface", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(WebSlideView, [{
    key: "connectedCallback",
    value: function connectedCallback() {
      var slideCanvas = this.querySelector('.slide-canvas');
      var actionCanvas = this.querySelector('.action-canvas');
      var volatileCanvas = this.querySelector('.volatile-canvas');
      var textLayer = this.querySelector('.text-layer');
      this.slideRenderSurface = new _render_slide_render_surface__WEBPACK_IMPORTED_MODULE_7__.SlideRenderSurface(slideCanvas);
      this.actionRenderSurface = new _render_render_surface__WEBPACK_IMPORTED_MODULE_8__.RenderSurface(actionCanvas);
      this.volatileRenderSurface = new _render_render_surface__WEBPACK_IMPORTED_MODULE_8__.RenderSurface(volatileCanvas);
      this.textLayerSurface = new _render_text_layer_surface__WEBPACK_IMPORTED_MODULE_9__.TextLayerSurface(textLayer);
      new ResizeObserver(this.resize.bind(this)).observe(this);
      this.resize();
    }
  }, {
    key: "getActionRenderSurface",
    value: function getActionRenderSurface() {
      return this.actionRenderSurface;
    }
  }, {
    key: "getSlideRenderSurface",
    value: function getSlideRenderSurface() {
      return this.slideRenderSurface;
    }
  }, {
    key: "getVolatileRenderSurface",
    value: function getVolatileRenderSurface() {
      return this.volatileRenderSurface;
    }
  }, {
    key: "getTextLayerSurface",
    value: function getTextLayerSurface() {
      return this.textLayerSurface;
    }
  }, {
    key: "repaint",
    value: function repaint() {
      this.resize();
    }
  }, {
    key: "resize",
    value: function resize() {
      var slideRatio = 4 / 3;
      var width = this.clientWidth;
      var height = this.clientHeight;
      var viewRatio = width / height;

      if (viewRatio > slideRatio) {
        width = height * slideRatio;
      } else {
        height = width / slideRatio;
      }

      if (width === 0 || height === 0) {
        return;
      }

      this.slideRenderSurface.setSize(width, height);
      this.actionRenderSurface.setSize(width, height);
      this.volatileRenderSurface.setSize(width, height);
      this.textLayerSurface.setSize(width, height);
    }
  }]);

  return WebSlideView;
}(_web_view_element__WEBPACK_IMPORTED_MODULE_11__.WebViewElement)) || _class);


/***/ }),

/***/ "./src/view/view-element.ts":
/*!**********************************!*\
  !*** ./src/view/view-element.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ViewElement": () => (/* binding */ ViewElement)
/* harmony export */ });
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var validateSelector = function validateSelector(selector) {
  if (selector.indexOf("-") <= 0) {
    throw new Error("At least one dash is required in the custom element name!");
  }
};

var ViewElement = function ViewElement(config) {
  return function (ctor) {
    validateSelector(config.selector);
    var content = "";

    if (config.styles) {
      content += "<style>\n".concat(config.styles, "\n</style>");
    }

    if (config.template) {
      content += "\n".concat(config.template);
    }

    var template = document.createElement("template");
    template.innerHTML = content;

    var connectedCallback = ctor.prototype.connectedCallback || function () {};

    var initialized = ctor.prototype.initialized || function () {
      return false;
    };

    ctor.prototype.connectedCallback = function () {
      if (initialized.call(this)) {
        return;
      }

      this.template = config.template; // Attach the template to the element.

      var clone = document.importNode(template.content, true);

      if (config.useShadow) {
        this.attachShadow({
          mode: "open"
        }).appendChild(clone);
      } else {
        this.appendChild(clone);
      }

      var root = config.useShadow ? this.shadowRoot : this; // Bind view id's to class properties.

      var _iterator = _createForOfIteratorHelper(Reflect.ownKeys(this)),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var key = _step.value;
          var propName = key.toString();
          var prop = root.querySelector("#" + propName);

          if (prop) {
            this[propName] = prop;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      connectedCallback.call(this);
    };

    customElements.define(config.selector, ctor);
  };
};

/***/ }),

/***/ "./src/view/web-view-element.ts":
/*!**************************************!*\
  !*** ./src/view/web-view-element.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebViewElement": () => (/* binding */ WebViewElement)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/wrapNativeSuper */ "./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

// import Mustache from "mustache";
// import morphdom from "morphdom";
var WebViewElement = /*#__PURE__*/function (_HTMLElement) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(WebViewElement, _HTMLElement);

  var _super = _createSuper(WebViewElement);

  function WebViewElement() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, WebViewElement);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "template", void 0);

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(WebViewElement, [{
    key: "initialized",
    value: function initialized() {
      return false;
    }
  }, {
    key: "render",
    value: function render() {// if (this.template) {
      // 	const template = Mustache.render(this.template, this);
      // 	morphdom(this.lastElementChild, template);
      // }
    }
  }]);

  return WebViewElement;
}( /*#__PURE__*/(0,_babel_runtime_helpers_esm_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_6__["default"])(HTMLElement));



/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./src/style.css":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./src/style.css ***!
  \*******************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_icons_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! -!../node_modules/css-loader/dist/cjs.js!./icons.css */ "./node_modules/css-loader/dist/cjs.js!./src/icons.css");
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_tooltip_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! -!../node_modules/css-loader/dist/cjs.js!./tooltip.css */ "./node_modules/css-loader/dist/cjs.js!./src/tooltip.css");
// Imports




var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_icons_css__WEBPACK_IMPORTED_MODULE_2__["default"]);
___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_tooltip_css__WEBPACK_IMPORTED_MODULE_3__["default"]);
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".fullscreen {\r\n\tz-index: 1000; \r\n\twidth: 100%; \r\n\theight: 100%; \r\n\tposition: fixed; \r\n\ttop: 0; \r\n\tleft: 0; \r\n}", "",{"version":3,"sources":["webpack://./src/style.css"],"names":[],"mappings":"AAGA;CACC,aAAa;CACb,WAAW;CACX,YAAY;CACZ,eAAe;CACf,MAAM;CACN,OAAO;AACR","sourcesContent":["@import url(icons.css);\r\n@import url(tooltip.css);\r\n\r\n.fullscreen {\r\n\tz-index: 1000; \r\n\twidth: 100%; \r\n\theight: 100%; \r\n\tposition: fixed; \r\n\ttop: 0; \r\n\tleft: 0; \r\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/icons.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/icons.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/getUrl.js */ "./node_modules/css-loader/dist/runtime/getUrl.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _player_icons_ttf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./player-icons.ttf */ "./src/player-icons.ttf");
// Imports




var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
var ___CSS_LOADER_URL_REPLACEMENT_0___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(_player_icons_ttf__WEBPACK_IMPORTED_MODULE_3__);
// Module
___CSS_LOADER_EXPORT___.push([module.id, "@font-face {\r\n\tfont-family: 'player-icons';\r\n\tsrc: url(" + ___CSS_LOADER_URL_REPLACEMENT_0___ + ") format('truetype');\r\n\tfont-weight: normal;\r\n\tfont-style: normal;\r\n}\r\n\r\n[class^=\"icon-\"], [class*=\" icon-\"] {\r\n\t/* use !important to prevent issues with browser extensions that change fonts */\r\n\tfont-family: 'player-icons' !important;\r\n\tspeak: none;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\tfont-variant: normal;\r\n\ttext-transform: none;\r\n\tline-height: 1;\r\n\r\n\t/* Better Font Rendering =========== */\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n.icon-document:before {\r\n\tcontent: \"\\ed43\";\r\n}\r\n.icon-sidebar-left:before {\r\n\tcontent: \"\\e900\";\r\n}\r\n.icon-sidebar-none:before {\r\n\tcontent: \"\\e901\";\r\n}\r\n.icon-sidebar-right:before {\r\n\tcontent: \"\\e902\";\r\n}\r\n.icon-search:before {\r\n\tcontent: \"\\e908\";\r\n}\r\n.icon-contract:before {\r\n\tcontent: \"\\e906\";\r\n}\r\n.icon-expand:before {\r\n\tcontent: \"\\e905\";\r\n}\r\n.icon-arrow-dropdown:before {\r\n\tcontent: \"\\e903\";\r\n}\r\n.icon-arrow-dropup:before {\r\n\tcontent: \"\\e904\";\r\n}\r\n.icon-close-circle-outline:before {\r\n\tcontent: \"\\e907\";\r\n}\r\n.icon-previous:before {\r\n\tcontent: \"\\ed7f\";\r\n}\r\n.icon-next:before {\r\n\tcontent: \"\\ed16\";\r\n}\r\n.icon-pause:before {\r\n\tcontent: \"\\ed4f\";\r\n}\r\n.icon-play:before {\r\n\tcontent: \"\\ed6c\";\r\n}\r\n.icon-playback-rate:before {\r\n\tcontent: \"\\ed72\";\r\n}\r\n.icon-mute:before {\r\n\tcontent: \"\\ecf9\";\r\n}\r\n.icon-volume0:before {\r\n\tcontent: \"\\ef0c\";\r\n}\r\n.icon-volume1:before {\r\n\tcontent: \"\\ef0d\";\r\n}\r\n.icon-volume2:before {\r\n\tcontent: \"\\ef0e\";\r\n}\r\n.icon-volume3:before {\r\n\tcontent: \"\\ef0f\";\r\n}\r\n", "",{"version":3,"sources":["webpack://./src/icons.css"],"names":[],"mappings":"AAAA;CACC,2BAA2B;CAC3B,+DAA+C;CAC/C,mBAAmB;CACnB,kBAAkB;AACnB;;AAEA;CACC,+EAA+E;CAC/E,sCAAsC;CACtC,WAAW;CACX,kBAAkB;CAClB,mBAAmB;CACnB,oBAAoB;CACpB,oBAAoB;CACpB,cAAc;;CAEd,sCAAsC;CACtC,mCAAmC;CACnC,kCAAkC;AACnC;;AAEA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB;AACA;CACC,gBAAgB;AACjB","sourcesContent":["@font-face {\r\n\tfont-family: 'player-icons';\r\n\tsrc: url('player-icons.ttf') format('truetype');\r\n\tfont-weight: normal;\r\n\tfont-style: normal;\r\n}\r\n\r\n[class^=\"icon-\"], [class*=\" icon-\"] {\r\n\t/* use !important to prevent issues with browser extensions that change fonts */\r\n\tfont-family: 'player-icons' !important;\r\n\tspeak: none;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\tfont-variant: normal;\r\n\ttext-transform: none;\r\n\tline-height: 1;\r\n\r\n\t/* Better Font Rendering =========== */\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n.icon-document:before {\r\n\tcontent: \"\\ed43\";\r\n}\r\n.icon-sidebar-left:before {\r\n\tcontent: \"\\e900\";\r\n}\r\n.icon-sidebar-none:before {\r\n\tcontent: \"\\e901\";\r\n}\r\n.icon-sidebar-right:before {\r\n\tcontent: \"\\e902\";\r\n}\r\n.icon-search:before {\r\n\tcontent: \"\\e908\";\r\n}\r\n.icon-contract:before {\r\n\tcontent: \"\\e906\";\r\n}\r\n.icon-expand:before {\r\n\tcontent: \"\\e905\";\r\n}\r\n.icon-arrow-dropdown:before {\r\n\tcontent: \"\\e903\";\r\n}\r\n.icon-arrow-dropup:before {\r\n\tcontent: \"\\e904\";\r\n}\r\n.icon-close-circle-outline:before {\r\n\tcontent: \"\\e907\";\r\n}\r\n.icon-previous:before {\r\n\tcontent: \"\\ed7f\";\r\n}\r\n.icon-next:before {\r\n\tcontent: \"\\ed16\";\r\n}\r\n.icon-pause:before {\r\n\tcontent: \"\\ed4f\";\r\n}\r\n.icon-play:before {\r\n\tcontent: \"\\ed6c\";\r\n}\r\n.icon-playback-rate:before {\r\n\tcontent: \"\\ed72\";\r\n}\r\n.icon-mute:before {\r\n\tcontent: \"\\ecf9\";\r\n}\r\n.icon-volume0:before {\r\n\tcontent: \"\\ef0c\";\r\n}\r\n.icon-volume1:before {\r\n\tcontent: \"\\ef0d\";\r\n}\r\n.icon-volume2:before {\r\n\tcontent: \"\\ef0e\";\r\n}\r\n.icon-volume3:before {\r\n\tcontent: \"\\ef0f\";\r\n}\r\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/tooltip.css":
/*!***************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/tooltip.css ***!
  \***************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "[tooltip],\r\n[tooltip-bottom],\r\n[tooltip-left],\r\n[tooltip-right] {\r\n\tposition: relative;\r\n}\r\n\r\n[tooltip]:before,\r\n[tooltip]:after,\r\n[tooltip-bottom]:before,\r\n[tooltip-bottom]:after,\r\n[tooltip-left]:before,\r\n[tooltip-left]:after,\r\n[tooltip-right]:before,\r\n[tooltip-right]:after {\r\n\tposition: absolute;\r\n\tvisibility: hidden;\r\n\topacity: 0;\r\n\tpointer-events: none;\r\n\r\n\t-webkit-transition:\r\n\t\topacity 0.2s ease-in-out,\r\n\t\tvisibility 0.2s ease-in-out;\r\n\t-moz-transition:\r\n\t\topacity 0.2s ease-in-out,\r\n\t\tvisibility 0.2s ease-in-out;\r\n\ttransition:\r\n\t\topacity 0.2s ease-in-out,\r\n\t\tvisibility 0.2s ease-in-out;\r\n}\r\n\r\n[tooltip]:hover:before,\r\n[tooltip]:hover:after,\r\n[tooltip]:focus:before,\r\n[tooltip]:focus:after,\r\n[tooltip-bottom]:hover:before,\r\n[tooltip-bottom]:hover:after,\r\n[tooltip-bottom]:focus:before,\r\n[tooltip-bottom]:focus:after,\r\n[tooltip-left]:hover:before,\r\n[tooltip-left]:hover:after,\r\n[tooltip-left]:focus:before,\r\n[tooltip-left]:focus:after,\r\n[tooltip-right]:hover:before,\r\n[tooltip-right]:hover:after,\r\n[tooltip-right]:focus:before,\r\n[tooltip-right]:focus:after {\r\n\tvisibility: visible;\r\n\topacity: 1;\r\n}\r\n\r\n/* Base styles for the tooltip's directional arrow */\r\n[tooltip]:before,\r\n[tooltip-bottom]:before,\r\n[tooltip-left]:before,\r\n[tooltip-right]:before {\r\n\tz-index: 1001;\r\n\tborder: 6px solid transparent;\r\n\tbackground: transparent;\r\n\tcontent: \"\";\r\n}\r\n\r\n/* Base styles for the tooltip's content area */\r\n[tooltip]:after,\r\n[tooltip-bottom]:after,\r\n[tooltip-left]:after,\r\n[tooltip-right]:after {\r\n\tz-index: 1000;\r\n\tpadding: 8px;\r\n\tmargin: 0;\r\n\tbackground-color: #000;\r\n\tbackground-color: hsl(0, 0%, 20%);\r\n\tcolor: #fff;\r\n\tfont-size: 14px;\r\n\tline-height: 1.2;\r\n\twhite-space: pre;\r\n}\r\n\r\n/* Top (default) */\r\n[tooltip]:after {\r\n\tmargin-bottom: 12px;\r\n\tcontent: attr(tooltip);\r\n}\r\n\r\n[tooltip]:before,\r\n[tooltip]:after {\r\n\tbottom: 100%;\r\n\tleft: 50%;\r\n\r\n\t-webkit-transform: translateX(-50%);\r\n\ttransform: translateX(-50%);\r\n}\r\n\r\n[tooltip]:before {\r\n\tborder-top-color: #000;\r\n\tborder-top-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n/* Bottom */\r\n[tooltip-bottom]:after {\r\n\tmargin-top: 12px;\r\n\tcontent: attr(tooltip-bottom);\r\n}\r\n\r\n[tooltip-bottom]:before,\r\n[tooltip-bottom]:after {\r\n\ttop: 100%;\r\n\tleft: 50%;\r\n\r\n\t-webkit-transform: translateX(-50%);\r\n\ttransform: translateX(-50%);\r\n}\r\n\r\n[tooltip-bottom]:before {\r\n\tborder-bottom-color: #000;\r\n\tborder-bottom-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n/* Left */\r\n[tooltip-left]:before,\r\n[tooltip-left]:after {\r\n\ttop: 50%;\r\n\tright: 100%;\r\n\t-webkit-transform: translateY(-50%);\r\n\ttransform: translateY(-50%);\r\n}\r\n\r\n[tooltip-left]:before {\r\n\tbottom: 50%;\r\n\tmargin-bottom: 0;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: #000;\r\n\tborder-left-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n[tooltip-left]:after {\r\n\tmargin-right: 12px;\r\n\tcontent: attr(tooltip-left);\r\n}\r\n\r\n/* Right */\r\n[tooltip-right]:before,\r\n[tooltip-right]:after {\r\n\ttop: 50%;\r\n\tleft: 100%;\r\n\t-webkit-transform: translateY(-50%);\r\n\ttransform: translateY(-50%);\r\n}\r\n\r\n[tooltip-right]:before {\r\n\tbottom: 50%;\r\n\tmargin-bottom: 0;\r\n\tborder-top-color: transparent;\r\n\tborder-right-color: #000;\r\n\tborder-right-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n[tooltip-right]:after {\r\n\tmargin-left: 12px;\r\n\tcontent: attr(tooltip-right);\r\n}", "",{"version":3,"sources":["webpack://./src/tooltip.css"],"names":[],"mappings":"AAAA;;;;CAIC,kBAAkB;AACnB;;AAEA;;;;;;;;CAQC,kBAAkB;CAClB,kBAAkB;CAClB,UAAU;CACV,oBAAoB;;CAEpB;;6BAE4B;CAC5B;;6BAE4B;CAC5B;;6BAE4B;AAC7B;;AAEA;;;;;;;;;;;;;;;;CAgBC,mBAAmB;CACnB,UAAU;AACX;;AAEA,oDAAoD;AACpD;;;;CAIC,aAAa;CACb,6BAA6B;CAC7B,uBAAuB;CACvB,WAAW;AACZ;;AAEA,+CAA+C;AAC/C;;;;CAIC,aAAa;CACb,YAAY;CACZ,SAAS;CACT,sBAAsB;CACtB,iCAAiC;CACjC,WAAW;CACX,eAAe;CACf,gBAAgB;CAChB,gBAAgB;AACjB;;AAEA,kBAAkB;AAClB;CACC,mBAAmB;CACnB,sBAAsB;AACvB;;AAEA;;CAEC,YAAY;CACZ,SAAS;;CAET,mCAAmC;CACnC,2BAA2B;AAC5B;;AAEA;CACC,sBAAsB;CACtB,iCAAiC;AAClC;;AAEA,WAAW;AACX;CACC,gBAAgB;CAChB,6BAA6B;AAC9B;;AAEA;;CAEC,SAAS;CACT,SAAS;;CAET,mCAAmC;CACnC,2BAA2B;AAC5B;;AAEA;CACC,yBAAyB;CACzB,oCAAoC;AACrC;;AAEA,SAAS;AACT;;CAEC,QAAQ;CACR,WAAW;CACX,mCAAmC;CACnC,2BAA2B;AAC5B;;AAEA;CACC,WAAW;CACX,gBAAgB;CAChB,6BAA6B;CAC7B,uBAAuB;CACvB,kCAAkC;AACnC;;AAEA;CACC,kBAAkB;CAClB,2BAA2B;AAC5B;;AAEA,UAAU;AACV;;CAEC,QAAQ;CACR,UAAU;CACV,mCAAmC;CACnC,2BAA2B;AAC5B;;AAEA;CACC,WAAW;CACX,gBAAgB;CAChB,6BAA6B;CAC7B,wBAAwB;CACxB,mCAAmC;AACpC;;AAEA;CACC,iBAAiB;CACjB,4BAA4B;AAC7B","sourcesContent":["[tooltip],\r\n[tooltip-bottom],\r\n[tooltip-left],\r\n[tooltip-right] {\r\n\tposition: relative;\r\n}\r\n\r\n[tooltip]:before,\r\n[tooltip]:after,\r\n[tooltip-bottom]:before,\r\n[tooltip-bottom]:after,\r\n[tooltip-left]:before,\r\n[tooltip-left]:after,\r\n[tooltip-right]:before,\r\n[tooltip-right]:after {\r\n\tposition: absolute;\r\n\tvisibility: hidden;\r\n\topacity: 0;\r\n\tpointer-events: none;\r\n\r\n\t-webkit-transition:\r\n\t\topacity 0.2s ease-in-out,\r\n\t\tvisibility 0.2s ease-in-out;\r\n\t-moz-transition:\r\n\t\topacity 0.2s ease-in-out,\r\n\t\tvisibility 0.2s ease-in-out;\r\n\ttransition:\r\n\t\topacity 0.2s ease-in-out,\r\n\t\tvisibility 0.2s ease-in-out;\r\n}\r\n\r\n[tooltip]:hover:before,\r\n[tooltip]:hover:after,\r\n[tooltip]:focus:before,\r\n[tooltip]:focus:after,\r\n[tooltip-bottom]:hover:before,\r\n[tooltip-bottom]:hover:after,\r\n[tooltip-bottom]:focus:before,\r\n[tooltip-bottom]:focus:after,\r\n[tooltip-left]:hover:before,\r\n[tooltip-left]:hover:after,\r\n[tooltip-left]:focus:before,\r\n[tooltip-left]:focus:after,\r\n[tooltip-right]:hover:before,\r\n[tooltip-right]:hover:after,\r\n[tooltip-right]:focus:before,\r\n[tooltip-right]:focus:after {\r\n\tvisibility: visible;\r\n\topacity: 1;\r\n}\r\n\r\n/* Base styles for the tooltip's directional arrow */\r\n[tooltip]:before,\r\n[tooltip-bottom]:before,\r\n[tooltip-left]:before,\r\n[tooltip-right]:before {\r\n\tz-index: 1001;\r\n\tborder: 6px solid transparent;\r\n\tbackground: transparent;\r\n\tcontent: \"\";\r\n}\r\n\r\n/* Base styles for the tooltip's content area */\r\n[tooltip]:after,\r\n[tooltip-bottom]:after,\r\n[tooltip-left]:after,\r\n[tooltip-right]:after {\r\n\tz-index: 1000;\r\n\tpadding: 8px;\r\n\tmargin: 0;\r\n\tbackground-color: #000;\r\n\tbackground-color: hsl(0, 0%, 20%);\r\n\tcolor: #fff;\r\n\tfont-size: 14px;\r\n\tline-height: 1.2;\r\n\twhite-space: pre;\r\n}\r\n\r\n/* Top (default) */\r\n[tooltip]:after {\r\n\tmargin-bottom: 12px;\r\n\tcontent: attr(tooltip);\r\n}\r\n\r\n[tooltip]:before,\r\n[tooltip]:after {\r\n\tbottom: 100%;\r\n\tleft: 50%;\r\n\r\n\t-webkit-transform: translateX(-50%);\r\n\ttransform: translateX(-50%);\r\n}\r\n\r\n[tooltip]:before {\r\n\tborder-top-color: #000;\r\n\tborder-top-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n/* Bottom */\r\n[tooltip-bottom]:after {\r\n\tmargin-top: 12px;\r\n\tcontent: attr(tooltip-bottom);\r\n}\r\n\r\n[tooltip-bottom]:before,\r\n[tooltip-bottom]:after {\r\n\ttop: 100%;\r\n\tleft: 50%;\r\n\r\n\t-webkit-transform: translateX(-50%);\r\n\ttransform: translateX(-50%);\r\n}\r\n\r\n[tooltip-bottom]:before {\r\n\tborder-bottom-color: #000;\r\n\tborder-bottom-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n/* Left */\r\n[tooltip-left]:before,\r\n[tooltip-left]:after {\r\n\ttop: 50%;\r\n\tright: 100%;\r\n\t-webkit-transform: translateY(-50%);\r\n\ttransform: translateY(-50%);\r\n}\r\n\r\n[tooltip-left]:before {\r\n\tbottom: 50%;\r\n\tmargin-bottom: 0;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: #000;\r\n\tborder-left-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n[tooltip-left]:after {\r\n\tmargin-right: 12px;\r\n\tcontent: attr(tooltip-left);\r\n}\r\n\r\n/* Right */\r\n[tooltip-right]:before,\r\n[tooltip-right]:after {\r\n\ttop: 50%;\r\n\tleft: 100%;\r\n\t-webkit-transform: translateY(-50%);\r\n\ttransform: translateY(-50%);\r\n}\r\n\r\n[tooltip-right]:before {\r\n\tbottom: 50%;\r\n\tmargin-bottom: 0;\r\n\tborder-top-color: transparent;\r\n\tborder-right-color: #000;\r\n\tborder-right-color: hsl(0, 0%, 20%);\r\n}\r\n\r\n[tooltip-right]:after {\r\n\tmargin-left: 12px;\r\n\tcontent: attr(tooltip-right);\r\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join("");
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === "string") {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, ""]];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \************************************************************************/
/***/ ((module) => {

"use strict";


function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

module.exports = function cssWithMappingToString(item) {
  var _item = _slicedToArray(item, 4),
      content = _item[1],
      cssMapping = _item[3];

  if (!cssMapping) {
    return content;
  }

  if (typeof btoa === "function") {
    // eslint-disable-next-line no-undef
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || "").concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join("\n");
  }

  return [content].join("\n");
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/getUrl.js":
/*!********************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/getUrl.js ***!
  \********************************************************/
/***/ ((module) => {

"use strict";


module.exports = function (url, options) {
  if (!options) {
    // eslint-disable-next-line no-param-reassign
    options = {};
  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign


  url = url && url.__esModule ? url.default : url;

  if (typeof url !== "string") {
    return url;
  } // If url is already wrapped in quotes, remove them


  if (/^['"].*['"]$/.test(url)) {
    // eslint-disable-next-line no-param-reassign
    url = url.slice(1, -1);
  }

  if (options.hash) {
    // eslint-disable-next-line no-param-reassign
    url += options.hash;
  } // Should url be wrapped?
  // See https://drafts.csswg.org/css-values-3/#urls


  if (/["'() \t\n]/.test(url) || options.needQuotes) {
    return "\"".concat(url.replace(/"/g, '\\"').replace(/\n/g, "\\n"), "\"");
  }

  return url;
};

/***/ }),

/***/ "./node_modules/janus-gateway/html/janus.js":
/*!**************************************************!*\
  !*** ./node_modules/janus-gateway/html/janus.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Janus": () => (/* binding */ Janus)
/* harmony export */ });
/* provided dependency */ var adapter = __webpack_require__(/*! webrtc-adapter */ "./node_modules/webrtc-adapter/src/js/adapter_core.js")["default"];


/*
	The MIT License (MIT)

	Copyright (c) 2016 Meetecho

	Permission is hereby granted, free of charge, to any person obtaining
	a copy of this software and associated documentation files (the "Software"),
	to deal in the Software without restriction, including without limitation
	the rights to use, copy, modify, merge, publish, distribute, sublicense,
	and/or sell copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included
	in all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
	OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
	THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
	OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
	ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.
 */

// List of sessions
Janus.sessions = {};

Janus.isExtensionEnabled = function() {
	if(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
		// No need for the extension, getDisplayMedia is supported
		return true;
	}
	if(window.navigator.userAgent.match('Chrome')) {
		var chromever = parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1], 10);
		var maxver = 33;
		if(window.navigator.userAgent.match('Linux'))
			maxver = 35;	// "known" crash in chrome 34 and 35 on linux
		if(chromever >= 26 && chromever <= maxver) {
			// Older versions of Chrome don't support this extension-based approach, so lie
			return true;
		}
		return Janus.extension.isInstalled();
	} else {
		// Firefox and others, no need for the extension (but this doesn't mean it will work)
		return true;
	}
};

var defaultExtension = {
	// Screensharing Chrome Extension ID
	extensionId: 'hapfgfdkleiggjjpfpenajgdnfckjpaj',
	isInstalled: function() { return document.querySelector('#janus-extension-installed') !== null; },
	getScreen: function (callback) {
		var pending = window.setTimeout(function () {
			var error = new Error('NavigatorUserMediaError');
			error.name = 'The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)';
			return callback(error);
		}, 1000);
		this.cache[pending] = callback;
		window.postMessage({ type: 'janusGetScreen', id: pending }, '*');
	},
	init: function () {
		var cache = {};
		this.cache = cache;
		// Wait for events from the Chrome Extension
		window.addEventListener('message', function (event) {
			if(event.origin != window.location.origin)
				return;
			if(event.data.type == 'janusGotScreen' && cache[event.data.id]) {
				var callback = cache[event.data.id];
				delete cache[event.data.id];

				if (event.data.sourceId === '') {
					// user canceled
					var error = new Error('NavigatorUserMediaError');
					error.name = 'You cancelled the request for permission, giving up...';
					callback(error);
				} else {
					callback(null, event.data.sourceId);
				}
			} else if (event.data.type == 'janusGetScreenPending') {
				console.log('clearing ', event.data.id);
				window.clearTimeout(event.data.id);
			}
		});
	}
};

Janus.useDefaultDependencies = function (deps) {
	var f = (deps && deps.fetch) || fetch;
	var p = (deps && deps.Promise) || Promise;
	var socketCls = (deps && deps.WebSocket) || WebSocket;

	return {
		newWebSocket: function(server, proto) { return new socketCls(server, proto); },
		extension: (deps && deps.extension) || defaultExtension,
		isArray: function(arr) { return Array.isArray(arr); },
		webRTCAdapter: (deps && deps.adapter) || adapter,
		httpAPICall: function(url, options) {
			var fetchOptions = {
				method: options.verb,
				headers: {
					'Accept': 'application/json, text/plain, */*'
				},
				cache: 'no-cache'
			};
			if(options.verb === "POST") {
				fetchOptions.headers['Content-Type'] = 'application/json';
			}
			if(options.withCredentials !== undefined) {
				fetchOptions.credentials = options.withCredentials === true ? 'include' : (options.withCredentials ? options.withCredentials : 'omit');
			}
			if(options.body) {
				fetchOptions.body = JSON.stringify(options.body);
			}

			var fetching = f(url, fetchOptions).catch(function(error) {
				return p.reject({message: 'Probably a network error, is the server down?', error: error});
			});

			/*
			 * fetch() does not natively support timeouts.
			 * Work around this by starting a timeout manually, and racing it agains the fetch() to see which thing resolves first.
			 */

			if(options.timeout) {
				var timeout = new p(function(resolve, reject) {
					var timerId = setTimeout(function() {
						clearTimeout(timerId);
						return reject({message: 'Request timed out', timeout: options.timeout});
					}, options.timeout);
				});
				fetching = p.race([fetching, timeout]);
			}

			fetching.then(function(response) {
				if(response.ok) {
					if(typeof(options.success) === typeof(Janus.noop)) {
						return response.json().then(function(parsed) {
							try {
								options.success(parsed);
							} catch(error) {
								Janus.error('Unhandled httpAPICall success callback error', error);
							}
						}, function(error) {
							return p.reject({message: 'Failed to parse response body', error: error, response: response});
						});
					}
				}
				else {
					return p.reject({message: 'API call failed', response: response});
				}
			}).catch(function(error) {
				if(typeof(options.error) === typeof(Janus.noop)) {
					options.error(error.message || '<< internal error >>', error);
				}
			});

			return fetching;
		}
	}
};

Janus.useOldDependencies = function (deps) {
	var jq = (deps && deps.jQuery) || jQuery;
	var socketCls = (deps && deps.WebSocket) || WebSocket;
	return {
		newWebSocket: function(server, proto) { return new socketCls(server, proto); },
		isArray: function(arr) { return jq.isArray(arr); },
		extension: (deps && deps.extension) || defaultExtension,
		webRTCAdapter: (deps && deps.adapter) || adapter,
		httpAPICall: function(url, options) {
			var payload = options.body !== undefined ? {
				contentType: 'application/json',
				data: JSON.stringify(options.body)
			} : {};
			var credentials = options.withCredentials !== undefined ? {xhrFields: {withCredentials: options.withCredentials}} : {};

			return jq.ajax(jq.extend(payload, credentials, {
				url: url,
				type: options.verb,
				cache: false,
				dataType: 'json',
				async: options.async,
				timeout: options.timeout,
				success: function(result) {
					if(typeof(options.success) === typeof(Janus.noop)) {
						options.success(result);
					}
				},
				error: function(xhr, status, err) {
					if(typeof(options.error) === typeof(Janus.noop)) {
						options.error(status, err);
					}
				}
			}));
		}
	};
};

Janus.noop = function() {};

Janus.dataChanDefaultLabel = "JanusDataChannel";

// Note: in the future we may want to change this, e.g., as was
// attempted in https://github.com/meetecho/janus-gateway/issues/1670
Janus.endOfCandidates = null;

// Stop all tracks from a given stream
Janus.stopAllTracks = function(stream) {
	try {
		// Try a MediaStreamTrack.stop() for each track
		var tracks = stream.getTracks();
		for(var mst of tracks) {
			Janus.log(mst);
			if(mst) {
				mst.stop();
			}
		}
	} catch(e) {
		// Do nothing if this fails
	}
}

// Initialization
Janus.init = function(options) {
	options = options || {};
	options.callback = (typeof options.callback == "function") ? options.callback : Janus.noop;
	if(Janus.initDone) {
		// Already initialized
		options.callback();
	} else {
		if(typeof console.log == "undefined") {
			console.log = function() {};
		}
		// Console logging (all debugging disabled by default)
		Janus.trace = Janus.noop;
		Janus.debug = Janus.noop;
		Janus.vdebug = Janus.noop;
		Janus.log = Janus.noop;
		Janus.warn = Janus.noop;
		Janus.error = Janus.noop;
		if(options.debug === true || options.debug === "all") {
			// Enable all debugging levels
			Janus.trace = console.trace.bind(console);
			Janus.debug = console.debug.bind(console);
			Janus.vdebug = console.debug.bind(console);
			Janus.log = console.log.bind(console);
			Janus.warn = console.warn.bind(console);
			Janus.error = console.error.bind(console);
		} else if(Array.isArray(options.debug)) {
			for(var d of options.debug) {
				switch(d) {
					case "trace":
						Janus.trace = console.trace.bind(console);
						break;
					case "debug":
						Janus.debug = console.debug.bind(console);
						break;
					case "vdebug":
						Janus.vdebug = console.debug.bind(console);
						break;
					case "log":
						Janus.log = console.log.bind(console);
						break;
					case "warn":
						Janus.warn = console.warn.bind(console);
						break;
					case "error":
						Janus.error = console.error.bind(console);
						break;
					default:
						console.error("Unknown debugging option '" + d + "' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");
						break;
				}
			}
		}
		Janus.log("Initializing library");

		var usedDependencies = options.dependencies || Janus.useDefaultDependencies();
		Janus.isArray = usedDependencies.isArray;
		Janus.webRTCAdapter = usedDependencies.webRTCAdapter;
		Janus.httpAPICall = usedDependencies.httpAPICall;
		Janus.newWebSocket = usedDependencies.newWebSocket;
		Janus.extension = usedDependencies.extension;
		Janus.extension.init();

		// Helper method to enumerate devices
		Janus.listDevices = function(callback, config) {
			callback = (typeof callback == "function") ? callback : Janus.noop;
			if (config == null) config = { audio: true, video: true };
			if(Janus.isGetUserMediaAvailable()) {
				navigator.mediaDevices.getUserMedia(config)
				.then(function(stream) {
					navigator.mediaDevices.enumerateDevices().then(function(devices) {
						Janus.debug(devices);
						callback(devices);
						// Get rid of the now useless stream
						Janus.stopAllTracks(stream)
					});
				})
				.catch(function(err) {
					Janus.error(err);
					callback([]);
				});
			} else {
				Janus.warn("navigator.mediaDevices unavailable");
				callback([]);
			}
		};
		// Helper methods to attach/reattach a stream to a video element (previously part of adapter.js)
		Janus.attachMediaStream = function(element, stream) {
			try {
				element.srcObject = stream;
			} catch (e) {
				try {
					element.src = URL.createObjectURL(stream);
				} catch (e) {
					Janus.error("Error attaching stream to element");
				}
			}
		};
		Janus.reattachMediaStream = function(to, from) {
			try {
				to.srcObject = from.srcObject;
			} catch (e) {
				try {
					to.src = from.src;
				} catch (e) {
					Janus.error("Error reattaching stream to element");
				}
			}
		};
		// Detect tab close: make sure we don't loose existing onbeforeunload handlers
		// (note: for iOS we need to subscribe to a different event, 'pagehide', see
		// https://gist.github.com/thehunmonkgroup/6bee8941a49b86be31a787fe8f4b8cfe)
		var iOS = ['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0;
		var eventName = iOS ? 'pagehide' : 'beforeunload';
		var oldOBF = window["on" + eventName];
		window.addEventListener(eventName, function() {
			Janus.log("Closing window");
			for(var s in Janus.sessions) {
				if(Janus.sessions[s] && Janus.sessions[s].destroyOnUnload) {
					Janus.log("Destroying session " + s);
					Janus.sessions[s].destroy({unload: true, notifyDestroyed: false});
				}
			}
			if(oldOBF && typeof oldOBF == "function") {
				oldOBF();
			}
		});
		// If this is a Safari Technology Preview, check if VP8 is supported
		Janus.safariVp8 = false;
		if(Janus.webRTCAdapter.browserDetails.browser === 'safari' &&
				Janus.webRTCAdapter.browserDetails.version >= 605) {
			// Let's see if RTCRtpSender.getCapabilities() is there
			if(RTCRtpSender && RTCRtpSender.getCapabilities && RTCRtpSender.getCapabilities("video") &&
					RTCRtpSender.getCapabilities("video").codecs && RTCRtpSender.getCapabilities("video").codecs.length) {
				for(var codec of RTCRtpSender.getCapabilities("video").codecs) {
					if(codec && codec.mimeType && codec.mimeType.toLowerCase() === "video/vp8") {
						Janus.safariVp8 = true;
						break;
					}
				}
				if(Janus.safariVp8) {
					Janus.log("This version of Safari supports VP8");
				} else {
					Janus.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, " +
						"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu");
				}
			} else {
				// We do it in a very ugly way, as there's no alternative...
				// We create a PeerConnection to see if VP8 is in an offer
				var testpc = new RTCPeerConnection({});
				testpc.createOffer({offerToReceiveVideo: true}).then(function(offer) {
					Janus.safariVp8 = offer.sdp.indexOf("VP8") !== -1;
					if(Janus.safariVp8) {
						Janus.log("This version of Safari supports VP8");
					} else {
						Janus.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, " +
							"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu");
					}
					testpc.close();
					testpc = null;
				});
			}
		}
		// Check if this browser supports Unified Plan and transceivers
		// Based on https://codepen.io/anon/pen/ZqLwWV?editors=0010
		Janus.unifiedPlan = false;
		if(Janus.webRTCAdapter.browserDetails.browser === 'firefox' &&
				Janus.webRTCAdapter.browserDetails.version >= 59) {
			// Firefox definitely does, starting from version 59
			Janus.unifiedPlan = true;
		} else if(Janus.webRTCAdapter.browserDetails.browser === 'chrome' &&
				Janus.webRTCAdapter.browserDetails.version >= 72) {
			// Chrome does, but it's only usable from version 72 on
			Janus.unifiedPlan = true;
		} else if(!window.RTCRtpTransceiver || !('currentDirection' in RTCRtpTransceiver.prototype)) {
			// Safari supports addTransceiver() but not Unified Plan when
			// currentDirection is not defined (see codepen above).
			Janus.unifiedPlan = false;
		} else {
			// Check if addTransceiver() throws an exception
			var tempPc = new RTCPeerConnection();
			try {
				tempPc.addTransceiver('audio');
				Janus.unifiedPlan = true;
			} catch (e) {}
			tempPc.close();
		}
		Janus.initDone = true;
		options.callback();
	}
};

// Helper method to check whether WebRTC is supported by this browser
Janus.isWebrtcSupported = function() {
	return !!window.RTCPeerConnection;
};
// Helper method to check whether devices can be accessed by this browser (e.g., not possible via plain HTTP)
Janus.isGetUserMediaAvailable = function() {
	return navigator.mediaDevices && navigator.mediaDevices.getUserMedia;
};

// Helper method to create random identifiers (e.g., transaction)
Janus.randomString = function(len) {
	var charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
	var randomString = '';
	for (var i = 0; i < len; i++) {
		var randomPoz = Math.floor(Math.random() * charSet.length);
		randomString += charSet.substring(randomPoz,randomPoz+1);
	}
	return randomString;
};

function Janus(gatewayCallbacks) {
	gatewayCallbacks = gatewayCallbacks || {};
	gatewayCallbacks.success = (typeof gatewayCallbacks.success == "function") ? gatewayCallbacks.success : Janus.noop;
	gatewayCallbacks.error = (typeof gatewayCallbacks.error == "function") ? gatewayCallbacks.error : Janus.noop;
	gatewayCallbacks.destroyed = (typeof gatewayCallbacks.destroyed == "function") ? gatewayCallbacks.destroyed : Janus.noop;
	if(!Janus.initDone) {
		gatewayCallbacks.error("Library not initialized");
		return {};
	}
	if(!Janus.isWebrtcSupported()) {
		gatewayCallbacks.error("WebRTC not supported by this browser");
		return {};
	}
	Janus.log("Library initialized: " + Janus.initDone);
	if(!gatewayCallbacks.server) {
		gatewayCallbacks.error("Invalid server url");
		return {};
	}
	var websockets = false;
	var ws = null;
	var wsHandlers = {};
	var wsKeepaliveTimeoutId = null;
	var servers = null;
	var serversIndex = 0;
	var server = gatewayCallbacks.server;
	if(Janus.isArray(server)) {
		Janus.log("Multiple servers provided (" + server.length + "), will use the first that works");
		server = null;
		servers = gatewayCallbacks.server;
		Janus.debug(servers);
	} else {
		if(server.indexOf("ws") === 0) {
			websockets = true;
			Janus.log("Using WebSockets to contact Janus: " + server);
		} else {
			websockets = false;
			Janus.log("Using REST API to contact Janus: " + server);
		}
	}
	var iceServers = gatewayCallbacks.iceServers || [{urls: "stun:stun.l.google.com:19302"}];
	var iceTransportPolicy = gatewayCallbacks.iceTransportPolicy;
	var bundlePolicy = gatewayCallbacks.bundlePolicy;
	// Whether IPv6 candidates should be gathered
	var ipv6Support = (gatewayCallbacks.ipv6 === true);
	// Whether we should enable the withCredentials flag for XHR requests
	var withCredentials = false;
	if(gatewayCallbacks.withCredentials !== undefined && gatewayCallbacks.withCredentials !== null)
		withCredentials = gatewayCallbacks.withCredentials === true;
	// Optional max events
	var maxev = 10;
	if(gatewayCallbacks.max_poll_events !== undefined && gatewayCallbacks.max_poll_events !== null)
		maxev = gatewayCallbacks.max_poll_events;
	if(maxev < 1)
		maxev = 1;
	// Token to use (only if the token based authentication mechanism is enabled)
	var token = null;
	if(gatewayCallbacks.token !== undefined && gatewayCallbacks.token !== null)
		token = gatewayCallbacks.token;
	// API secret to use (only if the shared API secret is enabled)
	var apisecret = null;
	if(gatewayCallbacks.apisecret !== undefined && gatewayCallbacks.apisecret !== null)
		apisecret = gatewayCallbacks.apisecret;
	// Whether we should destroy this session when onbeforeunload is called
	this.destroyOnUnload = true;
	if(gatewayCallbacks.destroyOnUnload !== undefined && gatewayCallbacks.destroyOnUnload !== null)
		this.destroyOnUnload = (gatewayCallbacks.destroyOnUnload === true);
	// Some timeout-related values
	var keepAlivePeriod = 25000;
	if(gatewayCallbacks.keepAlivePeriod !== undefined && gatewayCallbacks.keepAlivePeriod !== null)
		keepAlivePeriod = gatewayCallbacks.keepAlivePeriod;
	if(isNaN(keepAlivePeriod))
		keepAlivePeriod = 25000;
	var longPollTimeout = 60000;
	if(gatewayCallbacks.longPollTimeout !== undefined && gatewayCallbacks.longPollTimeout !== null)
		longPollTimeout = gatewayCallbacks.longPollTimeout;
	if(isNaN(longPollTimeout))
		longPollTimeout = 60000;

	// overrides for default maxBitrate values for simulcasting
	function getMaxBitrates(simulcastMaxBitrates) {
		var maxBitrates = {
			high: 900000,
			medium: 300000,
			low: 100000,
		};

		if (simulcastMaxBitrates !== undefined && simulcastMaxBitrates !== null) {
			if (simulcastMaxBitrates.high)
				maxBitrates.high = simulcastMaxBitrates.high;
			if (simulcastMaxBitrates.medium)
				maxBitrates.medium = simulcastMaxBitrates.medium;
			if (simulcastMaxBitrates.low)
				maxBitrates.low = simulcastMaxBitrates.low;
		}

		return maxBitrates;
	}

	var connected = false;
	var sessionId = null;
	var pluginHandles = {};
	var that = this;
	var retries = 0;
	var transactions = {};
	createSession(gatewayCallbacks);

	// Public methods
	this.getServer = function() { return server; };
	this.isConnected = function() { return connected; };
	this.reconnect = function(callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks["reconnect"] = true;
		createSession(callbacks);
	};
	this.getSessionId = function() { return sessionId; };
	this.getInfo = function(callbacks) { getInfo(callbacks); };
	this.destroy = function(callbacks) { destroySession(callbacks); };
	this.attach = function(callbacks) { createHandle(callbacks); };

	function eventHandler() {
		if(sessionId == null)
			return;
		Janus.debug('Long poll...');
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			return;
		}
		var longpoll = server + "/" + sessionId + "?rid=" + new Date().getTime();
		if(maxev)
			longpoll = longpoll + "&maxev=" + maxev;
		if(token)
			longpoll = longpoll + "&token=" + encodeURIComponent(token);
		if(apisecret)
			longpoll = longpoll + "&apisecret=" + encodeURIComponent(apisecret);
		Janus.httpAPICall(longpoll, {
			verb: 'GET',
			withCredentials: withCredentials,
			success: handleEvent,
			timeout: longPollTimeout,
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);
				retries++;
				if(retries > 3) {
					// Did we just lose the server? :-(
					connected = false;
					gatewayCallbacks.error("Lost connection to the server (is it down?)");
					return;
				}
				eventHandler();
			}
		});
	}

	// Private event handler: this will trigger plugin callbacks, if set
	function handleEvent(json, skipTimeout) {
		retries = 0;
		if(!websockets && sessionId !== undefined && sessionId !== null && skipTimeout !== true)
			eventHandler();
		if(!websockets && Janus.isArray(json)) {
			// We got an array: it means we passed a maxev > 1, iterate on all objects
			for(var i=0; i<json.length; i++) {
				handleEvent(json[i], true);
			}
			return;
		}
		if(json["janus"] === "keepalive") {
			// Nothing happened
			Janus.vdebug("Got a keepalive on session " + sessionId);
			return;
		} else if(json["janus"] === "server_info") {
			// Just info on the Janus instance
			Janus.debug("Got info on the Janus instance");
			Janus.debug(json);
			const transaction = json["transaction"];
			if(transaction) {
				const reportSuccess = transactions[transaction];
				if(reportSuccess)
					reportSuccess(json);
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "ack") {
			// Just an ack, we can probably ignore
			Janus.debug("Got an ack on session " + sessionId);
			Janus.debug(json);
			const transaction = json["transaction"];
			if(transaction) {
				const reportSuccess = transactions[transaction];
				if(reportSuccess)
					reportSuccess(json);
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "success") {
			// Success!
			Janus.debug("Got a success on session " + sessionId);
			Janus.debug(json);
			const transaction = json["transaction"];
			if(transaction) {
				const reportSuccess = transactions[transaction];
				if(reportSuccess)
					reportSuccess(json);
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "trickle") {
			// We got a trickle candidate from Janus
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			var candidate = json["candidate"];
			Janus.debug("Got a trickled candidate on session " + sessionId);
			Janus.debug(candidate);
			var config = pluginHandle.webrtcStuff;
			if(config.pc && config.remoteSdp) {
				// Add candidate right now
				Janus.debug("Adding remote candidate:", candidate);
				if(!candidate || candidate.completed === true) {
					// end-of-candidates
					config.pc.addIceCandidate(Janus.endOfCandidates);
				} else {
					// New candidate
					config.pc.addIceCandidate(candidate);
				}
			} else {
				// We didn't do setRemoteDescription (trickle got here before the offer?)
				Janus.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate");
				if(!config.candidates)
					config.candidates = [];
				config.candidates.push(candidate);
				Janus.debug(config.candidates);
			}
		} else if(json["janus"] === "webrtcup") {
			// The PeerConnection with the server is up! Notify this
			Janus.debug("Got a webrtcup event on session " + sessionId);
			Janus.debug(json);
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.webrtcState(true);
			return;
		} else if(json["janus"] === "hangup") {
			// A plugin asked the core to hangup a PeerConnection on one of our handles
			Janus.debug("Got a hangup event on session " + sessionId);
			Janus.debug(json);
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.webrtcState(false, json["reason"]);
			pluginHandle.hangup();
		} else if(json["janus"] === "detached") {
			// A plugin asked the core to detach one of our handles
			Janus.debug("Got a detached event on session " + sessionId);
			Janus.debug(json);
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				// Don't warn here because destroyHandle causes this situation.
				return;
			}
			pluginHandle.ondetached();
			pluginHandle.detach();
		} else if(json["janus"] === "media") {
			// Media started/stopped flowing
			Janus.debug("Got a media event on session " + sessionId);
			Janus.debug(json);
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.mediaState(json["type"], json["receiving"]);
		} else if(json["janus"] === "slowlink") {
			Janus.debug("Got a slowlink event on session " + sessionId);
			Janus.debug(json);
			// Trouble uplink or downlink
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.slowLink(json["uplink"], json["lost"]);
		} else if(json["janus"] === "error") {
			// Oops, something wrong happened
			Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
			Janus.debug(json);
			var transaction = json["transaction"];
			if(transaction) {
				var reportSuccess = transactions[transaction];
				if(reportSuccess) {
					reportSuccess(json);
				}
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "event") {
			Janus.debug("Got a plugin event on session " + sessionId);
			Janus.debug(json);
			const sender = json["sender"];
			if(!sender) {
				Janus.warn("Missing sender...");
				return;
			}
			var plugindata = json["plugindata"];
			if(!plugindata) {
				Janus.warn("Missing plugindata...");
				return;
			}
			Janus.debug("  -- Event is coming from " + sender + " (" + plugindata["plugin"] + ")");
			var data = plugindata["data"];
			Janus.debug(data);
			const pluginHandle = pluginHandles[sender];
			if(!pluginHandle) {
				Janus.warn("This handle is not attached to this session");
				return;
			}
			var jsep = json["jsep"];
			if(jsep) {
				Janus.debug("Handling SDP as well...");
				Janus.debug(jsep);
			}
			var callback = pluginHandle.onmessage;
			if(callback) {
				Janus.debug("Notifying application...");
				// Send to callback specified when attaching plugin handle
				callback(data, jsep);
			} else {
				// Send to generic callback (?)
				Janus.debug("No provided notification callback");
			}
		} else if(json["janus"] === "timeout") {
			Janus.error("Timeout on session " + sessionId);
			Janus.debug(json);
			if (websockets) {
				ws.close(3504, "Gateway timeout");
			}
			return;
		} else {
			Janus.warn("Unknown message/event  '" + json["janus"] + "' on session " + sessionId);
			Janus.debug(json);
		}
	}

	// Private helper to send keep-alive messages on WebSockets
	function keepAlive() {
		if(!server || !websockets || !connected)
			return;
		wsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);
		var request = { "janus": "keepalive", "session_id": sessionId, "transaction": Janus.randomString(12) };
		if(token)
			request["token"] = token;
		if(apisecret)
			request["apisecret"] = apisecret;
		ws.send(JSON.stringify(request));
	}

	// Private method to create a session
	function createSession(callbacks) {
		var transaction = Janus.randomString(12);
		var request = { "janus": "create", "transaction": transaction };
		if(callbacks["reconnect"]) {
			// We're reconnecting, claim the session
			connected = false;
			request["janus"] = "claim";
			request["session_id"] = sessionId;
			// If we were using websockets, ignore the old connection
			if(ws) {
				ws.onopen = null;
				ws.onerror = null;
				ws.onclose = null;
				if(wsKeepaliveTimeoutId) {
					clearTimeout(wsKeepaliveTimeoutId);
					wsKeepaliveTimeoutId = null;
				}
			}
		}
		if(token)
			request["token"] = token;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(!server && Janus.isArray(servers)) {
			// We still need to find a working server from the list we were given
			server = servers[serversIndex];
			if(server.indexOf("ws") === 0) {
				websockets = true;
				Janus.log("Server #" + (serversIndex+1) + ": trying WebSockets to contact Janus (" + server + ")");
			} else {
				websockets = false;
				Janus.log("Server #" + (serversIndex+1) + ": trying REST API to contact Janus (" + server + ")");
			}
		}
		if(websockets) {
			ws = Janus.newWebSocket(server, 'janus-protocol');
			wsHandlers = {
				'error': function() {
					Janus.error("Error connecting to the Janus WebSockets server... " + server);
					if (Janus.isArray(servers) && !callbacks["reconnect"]) {
						serversIndex++;
						if (serversIndex === servers.length) {
							// We tried all the servers the user gave us and they all failed
							callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");
							return;
						}
						// Let's try the next server
						server = null;
						setTimeout(function() {
							createSession(callbacks);
						}, 200);
						return;
					}
					callbacks.error("Error connecting to the Janus WebSockets server: Is the server down?");
				},

				'open': function() {
					// We need to be notified about the success
					transactions[transaction] = function(json) {
						Janus.debug(json);
						if (json["janus"] !== "success") {
							Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
							callbacks.error(json["error"].reason);
							return;
						}
						wsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);
						connected = true;
						sessionId = json["session_id"] ? json["session_id"] : json.data["id"];
						if(callbacks["reconnect"]) {
							Janus.log("Claimed session: " + sessionId);
						} else {
							Janus.log("Created session: " + sessionId);
						}
						Janus.sessions[sessionId] = that;
						callbacks.success();
					};
					ws.send(JSON.stringify(request));
				},

				'message': function(event) {
					handleEvent(JSON.parse(event.data));
				},

				'close': function() {
					if (!server || !connected) {
						return;
					}
					connected = false;
					// FIXME What if this is called when the page is closed?
					gatewayCallbacks.error("Lost connection to the server (is it down?)");
				}
			};

			for(var eventName in wsHandlers) {
				ws.addEventListener(eventName, wsHandlers[eventName]);
			}

			return;
		}
		Janus.httpAPICall(server, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					callbacks.error(json["error"].reason);
					return;
				}
				connected = true;
				sessionId = json["session_id"] ? json["session_id"] : json.data["id"];
				if(callbacks["reconnect"]) {
					Janus.log("Claimed session: " + sessionId);
				} else {
					Janus.log("Created session: " + sessionId);
				}
				Janus.sessions[sessionId] = that;
				eventHandler();
				callbacks.success();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				if(Janus.isArray(servers) && !callbacks["reconnect"]) {
					serversIndex++;
					if(serversIndex === servers.length) {
						// We tried all the servers the user gave us and they all failed
						callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");
						return;
					}
					// Let's try the next server
					server = null;
					setTimeout(function() { createSession(callbacks); }, 200);
					return;
				}
				if(errorThrown === "")
					callbacks.error(textStatus + ": Is the server down?");
				else if (errorThrown && errorThrown.error)
					callbacks.error(textStatus + ": " + errorThrown.error.message);
				else
					callbacks.error(textStatus + ": " + errorThrown);
			}
		});
	}

	// Private method to get info on the server
	function getInfo(callbacks) {
		callbacks = callbacks || {};
		// FIXME This method triggers a success even when we fail
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		Janus.log("Getting info on Janus instance");
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		// We just need to send an "info" request
		var transaction = Janus.randomString(12);
		var request = { "janus": "info", "transaction": transaction };
		if(token)
			request["token"] = token;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(websockets) {
			transactions[transaction] = function(json) {
				Janus.log("Server info:");
				Janus.debug(json);
				if(json["janus"] !== "server_info") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
				}
				callbacks.success(json);
			}
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.log("Server info:");
				Janus.debug(json);
				if(json["janus"] !== "server_info") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
				}
				callbacks.success(json);
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				if(errorThrown === "")
					callbacks.error(textStatus + ": Is the server down?");
				else
					callbacks.error(textStatus + ": " + errorThrown);
			}
		});
	}

	// Private method to destroy a session
	function destroySession(callbacks) {
		callbacks = callbacks || {};
		// FIXME This method triggers a success even when we fail
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var unload = (callbacks.unload === true);
		var notifyDestroyed = true;
		if(callbacks.notifyDestroyed !== undefined && callbacks.notifyDestroyed !== null)
			notifyDestroyed = (callbacks.notifyDestroyed === true);
		var cleanupHandles = (callbacks.cleanupHandles === true);
		Janus.log("Destroying session " + sessionId + " (unload=" + unload + ")");
		if(!sessionId) {
			Janus.warn("No session to destroy");
			callbacks.success();
			if(notifyDestroyed)
				gatewayCallbacks.destroyed();
			return;
		}
		if(cleanupHandles) {
			for(var handleId in pluginHandles)
				destroyHandle(handleId, { noRequest: true });
		}
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			sessionId = null;
			callbacks.success();
			return;
		}
		// No need to destroy all handles first, Janus will do that itself
		var request = { "janus": "destroy", "transaction": Janus.randomString(12) };
		if(token)
			request["token"] = token;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(unload) {
			// We're unloading the page: use sendBeacon for HTTP instead,
			// or just close the WebSocket connection if we're using that
			if(websockets) {
				ws.onclose = null;
				ws.close();
				ws = null;
			} else {
				navigator.sendBeacon(server + "/" + sessionId, JSON.stringify(request));
			}
			Janus.log("Destroyed session:");
			sessionId = null;
			connected = false;
			callbacks.success();
			if(notifyDestroyed)
				gatewayCallbacks.destroyed();
			return;
		}
		if(websockets) {
			request["session_id"] = sessionId;

			var unbindWebSocket = function() {
				for(var eventName in wsHandlers) {
					ws.removeEventListener(eventName, wsHandlers[eventName]);
				}
				ws.removeEventListener('message', onUnbindMessage);
				ws.removeEventListener('error', onUnbindError);
				if(wsKeepaliveTimeoutId) {
					clearTimeout(wsKeepaliveTimeoutId);
				}
				ws.close();
			};

			var onUnbindMessage = function(event){
				var data = JSON.parse(event.data);
				if(data.session_id == request.session_id && data.transaction == request.transaction) {
					unbindWebSocket();
					callbacks.success();
					if(notifyDestroyed)
						gatewayCallbacks.destroyed();
				}
			};
			var onUnbindError = function() {
				unbindWebSocket();
				callbacks.error("Failed to destroy the server: Is the server down?");
				if(notifyDestroyed)
					gatewayCallbacks.destroyed();
			};

			ws.addEventListener('message', onUnbindMessage);
			ws.addEventListener('error', onUnbindError);

			if (ws.readyState === 1) {
				ws.send(JSON.stringify(request));
			} else {
				onUnbindError();
			}

			return;
		}
		Janus.httpAPICall(server + "/" + sessionId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.log("Destroyed session:");
				Janus.debug(json);
				sessionId = null;
				connected = false;
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
				}
				callbacks.success();
				if(notifyDestroyed)
					gatewayCallbacks.destroyed();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				// Reset everything anyway
				sessionId = null;
				connected = false;
				callbacks.success();
				if(notifyDestroyed)
					gatewayCallbacks.destroyed();
			}
		});
	}

	// Private method to create a plugin handle
	function createHandle(callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks.dataChannelOptions = callbacks.dataChannelOptions || { ordered: true };
		callbacks.consentDialog = (typeof callbacks.consentDialog == "function") ? callbacks.consentDialog : Janus.noop;
		callbacks.iceState = (typeof callbacks.iceState == "function") ? callbacks.iceState : Janus.noop;
		callbacks.mediaState = (typeof callbacks.mediaState == "function") ? callbacks.mediaState : Janus.noop;
		callbacks.webrtcState = (typeof callbacks.webrtcState == "function") ? callbacks.webrtcState : Janus.noop;
		callbacks.slowLink = (typeof callbacks.slowLink == "function") ? callbacks.slowLink : Janus.noop;
		callbacks.onmessage = (typeof callbacks.onmessage == "function") ? callbacks.onmessage : Janus.noop;
		callbacks.onlocalstream = (typeof callbacks.onlocalstream == "function") ? callbacks.onlocalstream : Janus.noop;
		callbacks.onremotestream = (typeof callbacks.onremotestream == "function") ? callbacks.onremotestream : Janus.noop;
		callbacks.ondata = (typeof callbacks.ondata == "function") ? callbacks.ondata : Janus.noop;
		callbacks.ondataopen = (typeof callbacks.ondataopen == "function") ? callbacks.ondataopen : Janus.noop;
		callbacks.oncleanup = (typeof callbacks.oncleanup == "function") ? callbacks.oncleanup : Janus.noop;
		callbacks.ondetached = (typeof callbacks.ondetached == "function") ? callbacks.ondetached : Janus.noop;
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		var plugin = callbacks.plugin;
		if(!plugin) {
			Janus.error("Invalid plugin");
			callbacks.error("Invalid plugin");
			return;
		}
		var opaqueId = callbacks.opaqueId;
		var loopIndex = callbacks.loopIndex;
		var handleToken = callbacks.token ? callbacks.token : token;
		var transaction = Janus.randomString(12);
		var request = { "janus": "attach", "plugin": plugin, "opaque_id": opaqueId, "loop_index": loopIndex, "transaction": transaction };
		if(handleToken)
			request["token"] = handleToken;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(websockets) {
			transactions[transaction] = function(json) {
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					callbacks.error("Ooops: " + json["error"].code + " " + json["error"].reason);
					return;
				}
				var handleId = json.data["id"];
				Janus.log("Created handle: " + handleId);
				var pluginHandle =
					{
						session : that,
						plugin : plugin,
						id : handleId,
						token : handleToken,
						detached : false,
						webrtcStuff : {
							started : false,
							myStream : null,
							streamExternal : false,
							remoteStream : null,
							mySdp : null,
							mediaConstraints : null,
							pc : null,
							dataChannelOptions: callbacks.dataChannelOptions,
							dataChannel : {},
							dtmfSender : null,
							trickle : true,
							iceDone : false,
							volume : {
								value : null,
								timer : null
							},
							bitrate : {
								value : null,
								bsnow : null,
								bsbefore : null,
								tsnow : null,
								tsbefore : null,
								timer : null
							}
						},
						getId : function() { return handleId; },
						getPlugin : function() { return plugin; },
						getVolume : function() { return getVolume(handleId, true); },
						getRemoteVolume : function() { return getVolume(handleId, true); },
						getLocalVolume : function() { return getVolume(handleId, false); },
						isAudioMuted : function() { return isMuted(handleId, false); },
						muteAudio : function() { return mute(handleId, false, true); },
						unmuteAudio : function() { return mute(handleId, false, false); },
						isVideoMuted : function() { return isMuted(handleId, true); },
						muteVideo : function() { return mute(handleId, true, true); },
						unmuteVideo : function() { return mute(handleId, true, false); },
						getBitrate : function() { return getBitrate(handleId); },
						send : function(callbacks) { sendMessage(handleId, callbacks); },
						data : function(callbacks) { sendData(handleId, callbacks); },
						dtmf : function(callbacks) { sendDtmf(handleId, callbacks); },
						consentDialog : callbacks.consentDialog,
						iceState : callbacks.iceState,
						mediaState : callbacks.mediaState,
						webrtcState : callbacks.webrtcState,
						slowLink : callbacks.slowLink,
						onmessage : callbacks.onmessage,
						createOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },
						createAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },
						handleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },
						onlocalstream : callbacks.onlocalstream,
						onremotestream : callbacks.onremotestream,
						ondata : callbacks.ondata,
						ondataopen : callbacks.ondataopen,
						oncleanup : callbacks.oncleanup,
						ondetached : callbacks.ondetached,
						hangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },
						detach : function(callbacks) { destroyHandle(handleId, callbacks); }
					};
				pluginHandles[handleId] = pluginHandle;
				callbacks.success(pluginHandle);
			};
			request["session_id"] = sessionId;
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					callbacks.error("Ooops: " + json["error"].code + " " + json["error"].reason);
					return;
				}
				var handleId = json.data["id"];
				Janus.log("Created handle: " + handleId);
				var pluginHandle =
					{
						session : that,
						plugin : plugin,
						id : handleId,
						token : handleToken,
						detached : false,
						webrtcStuff : {
							started : false,
							myStream : null,
							streamExternal : false,
							remoteStream : null,
							mySdp : null,
							mediaConstraints : null,
							pc : null,
							dataChannelOptions: callbacks.dataChannelOptions,
							dataChannel : {},
							dtmfSender : null,
							trickle : true,
							iceDone : false,
							volume : {
								value : null,
								timer : null
							},
							bitrate : {
								value : null,
								bsnow : null,
								bsbefore : null,
								tsnow : null,
								tsbefore : null,
								timer : null
							}
						},
						getId : function() { return handleId; },
						getPlugin : function() { return plugin; },
						getVolume : function() { return getVolume(handleId, true); },
						getRemoteVolume : function() { return getVolume(handleId, true); },
						getLocalVolume : function() { return getVolume(handleId, false); },
						isAudioMuted : function() { return isMuted(handleId, false); },
						muteAudio : function() { return mute(handleId, false, true); },
						unmuteAudio : function() { return mute(handleId, false, false); },
						isVideoMuted : function() { return isMuted(handleId, true); },
						muteVideo : function() { return mute(handleId, true, true); },
						unmuteVideo : function() { return mute(handleId, true, false); },
						getBitrate : function() { return getBitrate(handleId); },
						send : function(callbacks) { sendMessage(handleId, callbacks); },
						data : function(callbacks) { sendData(handleId, callbacks); },
						dtmf : function(callbacks) { sendDtmf(handleId, callbacks); },
						consentDialog : callbacks.consentDialog,
						iceState : callbacks.iceState,
						mediaState : callbacks.mediaState,
						webrtcState : callbacks.webrtcState,
						slowLink : callbacks.slowLink,
						onmessage : callbacks.onmessage,
						createOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },
						createAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },
						handleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },
						onlocalstream : callbacks.onlocalstream,
						onremotestream : callbacks.onremotestream,
						ondata : callbacks.ondata,
						ondataopen : callbacks.ondataopen,
						oncleanup : callbacks.oncleanup,
						ondetached : callbacks.ondetached,
						hangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },
						detach : function(callbacks) { destroyHandle(handleId, callbacks); }
					}
				pluginHandles[handleId] = pluginHandle;
				callbacks.success(pluginHandle);
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				if(errorThrown === "")
					callbacks.error(textStatus + ": Is the server down?");
				else
					callbacks.error(textStatus + ": " + errorThrown);
			}
		});
	}

	// Private method to send a message
	function sendMessage(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var message = callbacks.message;
		var jsep = callbacks.jsep;
		var transaction = Janus.randomString(12);
		var request = { "janus": "message", "body": message, "transaction": transaction };
		if(pluginHandle.token)
			request["token"] = pluginHandle.token;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(jsep) {
			request.jsep = {
				type: jsep.type,
				sdp: jsep.sdp
			};
			if(jsep.e2ee)
				request.jsep.e2ee = true;
			if(jsep.rid_order === "hml" || jsep.rid_order === "lmh")
				request.jsep.rid_order = jsep.rid_order;
			if(jsep.force_relay)
				request.jsep.force_relay = true;
		}
		Janus.debug("Sending message to plugin (handle=" + handleId + "):");
		Janus.debug(request);
		if(websockets) {
			request["session_id"] = sessionId;
			request["handle_id"] = handleId;
			transactions[transaction] = function(json) {
				Janus.debug("Message sent!");
				Janus.debug(json);
				if(json["janus"] === "success") {
					// We got a success, must have been a synchronous transaction
					var plugindata = json["plugindata"];
					if(!plugindata) {
						Janus.warn("Request succeeded, but missing plugindata...");
						callbacks.success();
						return;
					}
					Janus.log("Synchronous transaction successful (" + plugindata["plugin"] + ")");
					var data = plugindata["data"];
					Janus.debug(data);
					callbacks.success(data);
					return;
				} else if(json["janus"] !== "ack") {
					// Not a success and not an ack, must be an error
					if(json["error"]) {
						Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
						callbacks.error(json["error"].code + " " + json["error"].reason);
					} else {
						Janus.error("Unknown error");	// FIXME
						callbacks.error("Unknown error");
					}
					return;
				}
				// If we got here, the plugin decided to handle the request asynchronously
				callbacks.success();
			};
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.debug("Message sent!");
				Janus.debug(json);
				if(json["janus"] === "success") {
					// We got a success, must have been a synchronous transaction
					var plugindata = json["plugindata"];
					if(!plugindata) {
						Janus.warn("Request succeeded, but missing plugindata...");
						callbacks.success();
						return;
					}
					Janus.log("Synchronous transaction successful (" + plugindata["plugin"] + ")");
					var data = plugindata["data"];
					Janus.debug(data);
					callbacks.success(data);
					return;
				} else if(json["janus"] !== "ack") {
					// Not a success and not an ack, must be an error
					if(json["error"]) {
						Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
						callbacks.error(json["error"].code + " " + json["error"].reason);
					} else {
						Janus.error("Unknown error");	// FIXME
						callbacks.error("Unknown error");
					}
					return;
				}
				// If we got here, the plugin decided to handle the request asynchronously
				callbacks.success();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				callbacks.error(textStatus + ": " + errorThrown);
			}
		});
	}

	// Private method to send a trickle candidate
	function sendTrickleCandidate(handleId, candidate) {
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			return;
		}
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return;
		}
		var request = { "janus": "trickle", "candidate": candidate, "transaction": Janus.randomString(12) };
		if(pluginHandle.token)
			request["token"] = pluginHandle.token;
		if(apisecret)
			request["apisecret"] = apisecret;
		Janus.vdebug("Sending trickle candidate (handle=" + handleId + "):");
		Janus.vdebug(request);
		if(websockets) {
			request["session_id"] = sessionId;
			request["handle_id"] = handleId;
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.vdebug("Candidate sent!");
				Janus.vdebug(json);
				if(json["janus"] !== "ack") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					return;
				}
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
			}
		});
	}

	// Private method to create a data channel
	function createDataChannel(handleId, dclabel, dcprotocol, incoming, pendingData) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc) {
			Janus.warn("Invalid PeerConnection");
			return;
		}
		var onDataChannelMessage = function(event) {
			Janus.log('Received message on data channel:', event);
			var label = event.target.label;
			pluginHandle.ondata(event.data, label);
		};
		var onDataChannelStateChange = function(event) {
			Janus.log('Received state change on data channel:', event);
			var label = event.target.label;
			var protocol = event.target.protocol;
			var dcState = config.dataChannel[label] ? config.dataChannel[label].readyState : "null";
			Janus.log('State change on <' + label + '> data channel: ' + dcState);
			if(dcState === 'open') {
				// Any pending messages to send?
				if(config.dataChannel[label].pending && config.dataChannel[label].pending.length > 0) {
					Janus.log("Sending pending messages on <" + label + ">:", config.dataChannel[label].pending.length);
					for(var data of config.dataChannel[label].pending) {
						Janus.log("Sending data on data channel <" + label + ">");
						Janus.debug(data);
						config.dataChannel[label].send(data);
					}
					config.dataChannel[label].pending = [];
				}
				// Notify the open data channel
				pluginHandle.ondataopen(label, protocol);
			}
		};
		var onDataChannelError = function(error) {
			Janus.error('Got error on data channel:', error);
			// TODO
		};
		if(!incoming) {
			// FIXME Add options (ordered, maxRetransmits, etc.)
			var dcoptions = config.dataChannelOptions;
			if(dcprotocol)
				dcoptions.protocol = dcprotocol;
			config.dataChannel[dclabel] = config.pc.createDataChannel(dclabel, dcoptions);
		} else {
			// The channel was created by Janus
			config.dataChannel[dclabel] = incoming;
		}
		config.dataChannel[dclabel].onmessage = onDataChannelMessage;
		config.dataChannel[dclabel].onopen = onDataChannelStateChange;
		config.dataChannel[dclabel].onclose = onDataChannelStateChange;
		config.dataChannel[dclabel].onerror = onDataChannelError;
		config.dataChannel[dclabel].pending = [];
		if(pendingData)
			config.dataChannel[dclabel].pending.push(pendingData);
	}

	// Private method to send a data channel message
	function sendData(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var data = callbacks.text || callbacks.data;
		if(!data) {
			Janus.warn("Invalid data");
			callbacks.error("Invalid data");
			return;
		}
		var label = callbacks.label ? callbacks.label : Janus.dataChanDefaultLabel;
		if(!config.dataChannel[label]) {
			// Create new data channel and wait for it to open
			createDataChannel(handleId, label, callbacks.protocol, false, data, callbacks.protocol);
			callbacks.success();
			return;
		}
		if(config.dataChannel[label].readyState !== "open") {
			config.dataChannel[label].pending.push(data);
			callbacks.success();
			return;
		}
		Janus.log("Sending data on data channel <" + label + ">");
		Janus.debug(data);
		config.dataChannel[label].send(data);
		callbacks.success();
	}

	// Private method to send a DTMF tone
	function sendDtmf(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.dtmfSender) {
			// Create the DTMF sender the proper way, if possible
			if(config.pc) {
				var senders = config.pc.getSenders();
				var audioSender = senders.find(function(sender) {
					return sender.track && sender.track.kind === 'audio';
				});
				if(!audioSender) {
					Janus.warn("Invalid DTMF configuration (no audio track)");
					callbacks.error("Invalid DTMF configuration (no audio track)");
					return;
				}
				config.dtmfSender = audioSender.dtmf;
				if(config.dtmfSender) {
					Janus.log("Created DTMF Sender");
					config.dtmfSender.ontonechange = function(tone) { Janus.debug("Sent DTMF tone: " + tone.tone); };
				}
			}
			if(!config.dtmfSender) {
				Janus.warn("Invalid DTMF configuration");
				callbacks.error("Invalid DTMF configuration");
				return;
			}
		}
		var dtmf = callbacks.dtmf;
		if(!dtmf) {
			Janus.warn("Invalid DTMF parameters");
			callbacks.error("Invalid DTMF parameters");
			return;
		}
		var tones = dtmf.tones;
		if(!tones) {
			Janus.warn("Invalid DTMF string");
			callbacks.error("Invalid DTMF string");
			return;
		}
		var duration = (typeof dtmf.duration === 'number') ? dtmf.duration : 500; // We choose 500ms as the default duration for a tone
		var gap = (typeof dtmf.gap === 'number') ? dtmf.gap : 50; // We choose 50ms as the default gap between tones
		Janus.debug("Sending DTMF string " + tones + " (duration " + duration + "ms, gap " + gap + "ms)");
		config.dtmfSender.insertDTMF(tones, duration, gap);
		callbacks.success();
	}

	// Private method to destroy a plugin handle
	function destroyHandle(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var noRequest = (callbacks.noRequest === true);
		Janus.log("Destroying handle " + handleId + " (only-locally=" + noRequest + ")");
		cleanupWebrtc(handleId);
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || pluginHandle.detached) {
			// Plugin was already detached by Janus, calling detach again will return a handle not found error, so just exit here
			delete pluginHandles[handleId];
			callbacks.success();
			return;
		}
		pluginHandle.detached = true;
		if(noRequest) {
			// We're only removing the handle locally
			delete pluginHandles[handleId];
			callbacks.success();
			return;
		}
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		var request = { "janus": "detach", "transaction": Janus.randomString(12) };
		if(pluginHandle.token)
			request["token"] = pluginHandle.token;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(websockets) {
			request["session_id"] = sessionId;
			request["handle_id"] = handleId;
			ws.send(JSON.stringify(request));
			delete pluginHandles[handleId];
			callbacks.success();
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.log("Destroyed handle:");
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
				}
				delete pluginHandles[handleId];
				callbacks.success();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				// We cleanup anyway
				delete pluginHandles[handleId];
				callbacks.success();
			}
		});
	}

	// WebRTC stuff
	function streamsDone(handleId, jsep, media, callbacks, stream) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			// Close all tracks if the given stream has been created internally
			if(!callbacks.stream) {
				Janus.stopAllTracks(stream);
			}
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		Janus.debug("streamsDone:", stream);
		if(stream) {
			Janus.debug("  -- Audio tracks:", stream.getAudioTracks());
			Janus.debug("  -- Video tracks:", stream.getVideoTracks());
		}
		// We're now capturing the new stream: check if we're updating or if it's a new thing
		var addTracks = false;
		if(!config.myStream || !media.update || (config.streamExternal && !media.replaceAudio && !media.replaceVideo)) {
			config.myStream = stream;
			addTracks = true;
		} else {
			// We only need to update the existing stream
			if(((!media.update && isAudioSendEnabled(media)) || (media.update && (media.addAudio || media.replaceAudio))) &&
					stream.getAudioTracks() && stream.getAudioTracks().length) {
				config.myStream.addTrack(stream.getAudioTracks()[0]);
				if(Janus.unifiedPlan) {
					// Use Transceivers
					Janus.log((media.replaceAudio ? "Replacing" : "Adding") + " audio track:", stream.getAudioTracks()[0]);
					var audioTransceiver = null;
					const transceivers = config.pc.getTransceivers();
					if(transceivers && transceivers.length > 0) {
						for(const t of transceivers) {
							if((t.sender && t.sender.track && t.sender.track.kind === "audio") ||
									(t.receiver && t.receiver.track && t.receiver.track.kind === "audio")) {
								audioTransceiver = t;
								break;
							}
						}
					}
					if(audioTransceiver && audioTransceiver.sender) {
						audioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0]);
					} else {
						config.pc.addTrack(stream.getAudioTracks()[0], stream);
					}
				} else {
					Janus.log((media.replaceAudio ? "Replacing" : "Adding") + " audio track:", stream.getAudioTracks()[0]);
					config.pc.addTrack(stream.getAudioTracks()[0], stream);
				}
			}
			if(((!media.update && isVideoSendEnabled(media)) || (media.update && (media.addVideo || media.replaceVideo))) &&
					stream.getVideoTracks() && stream.getVideoTracks().length) {
				config.myStream.addTrack(stream.getVideoTracks()[0]);
				if(Janus.unifiedPlan) {
					// Use Transceivers
					Janus.log((media.replaceVideo ? "Replacing" : "Adding") + " video track:", stream.getVideoTracks()[0]);
					var videoTransceiver = null;
					const transceivers = config.pc.getTransceivers();
					if(transceivers && transceivers.length > 0) {
						for(const t of transceivers) {
							if((t.sender && t.sender.track && t.sender.track.kind === "video") ||
									(t.receiver && t.receiver.track && t.receiver.track.kind === "video")) {
								videoTransceiver = t;
								break;
							}
						}
					}
					if(videoTransceiver && videoTransceiver.sender) {
						videoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0]);
					} else {
						config.pc.addTrack(stream.getVideoTracks()[0], stream);
					}
				} else {
					Janus.log((media.replaceVideo ? "Replacing" : "Adding") + " video track:", stream.getVideoTracks()[0]);
					config.pc.addTrack(stream.getVideoTracks()[0], stream);
				}
			}
		}
		// If we still need to create a PeerConnection, let's do that
		if(!config.pc) {
			var pc_config = {"iceServers": iceServers, "iceTransportPolicy": iceTransportPolicy, "bundlePolicy": bundlePolicy};
			if(Janus.webRTCAdapter.browserDetails.browser === "chrome") {
				// For Chrome versions before 72, we force a plan-b semantic, and unified-plan otherwise
				pc_config["sdpSemantics"] = (Janus.webRTCAdapter.browserDetails.version < 72) ? "plan-b" : "unified-plan";
			}
			var pc_constraints = {
				"optional": [{"DtlsSrtpKeyAgreement": true}]
			};
			if(ipv6Support) {
				pc_constraints.optional.push({"googIPv6":true});
			}
			// Any custom constraint to add?
			if(callbacks.rtcConstraints && typeof callbacks.rtcConstraints === 'object') {
				Janus.debug("Adding custom PeerConnection constraints:", callbacks.rtcConstraints);
				for(var i in callbacks.rtcConstraints) {
					pc_constraints.optional.push(callbacks.rtcConstraints[i]);
				}
			}
			if(Janus.webRTCAdapter.browserDetails.browser === "edge") {
				// This is Edge, enable BUNDLE explicitly
				pc_config.bundlePolicy = "max-bundle";
			}
			// Check if a sender or receiver transform has been provided
			if(RTCRtpSender && (RTCRtpSender.prototype.createEncodedStreams ||
					(RTCRtpSender.prototype.createEncodedAudioStreams &&
					RTCRtpSender.prototype.createEncodedVideoStreams)) &&
					(callbacks.senderTransforms || callbacks.receiverTransforms)) {
				config.senderTransforms = callbacks.senderTransforms;
				config.receiverTransforms = callbacks.receiverTransforms;
				pc_config["forceEncodedAudioInsertableStreams"] = true;
				pc_config["forceEncodedVideoInsertableStreams"] = true;
				pc_config["encodedInsertableStreams"] = true;
			}
			Janus.log("Creating PeerConnection");
			Janus.debug(pc_constraints);
			config.pc = new RTCPeerConnection(pc_config, pc_constraints);
			Janus.debug(config.pc);
			if(config.pc.getStats) {	// FIXME
				config.volume = {};
				config.bitrate.value = "0 kbits/sec";
			}
			Janus.log("Preparing local SDP and gathering candidates (trickle=" + config.trickle + ")");
			config.pc.oniceconnectionstatechange = function() {
				if(config.pc)
					pluginHandle.iceState(config.pc.iceConnectionState);
			};
			config.pc.onicecandidate = function(event) {
				if (!event.candidate ||
						(Janus.webRTCAdapter.browserDetails.browser === 'edge' && event.candidate.candidate.indexOf('endOfCandidates') > 0)) {
					Janus.log("End of candidates.");
					config.iceDone = true;
					if(config.trickle === true) {
						// Notify end of candidates
						sendTrickleCandidate(handleId, {"completed": true});
					} else {
						// No trickle, time to send the complete SDP (including all candidates)
						sendSDP(handleId, callbacks);
					}
				} else {
					// JSON.stringify doesn't work on some WebRTC objects anymore
					// See https://code.google.com/p/chromium/issues/detail?id=467366
					var candidate = {
						"candidate": event.candidate.candidate,
						"sdpMid": event.candidate.sdpMid,
						"sdpMLineIndex": event.candidate.sdpMLineIndex
					};
					if(config.trickle === true) {
						// Send candidate
						sendTrickleCandidate(handleId, candidate);
					}
				}
			};
			config.pc.ontrack = function(event) {
				Janus.log("Handling Remote Track");
				Janus.debug(event);
				if(!event.streams)
					return;
				config.remoteStream = event.streams[0];
				pluginHandle.onremotestream(config.remoteStream);
				if(event.track.onended)
					return;
				if(config.receiverTransforms) {
					var receiverStreams = null;
					if(RTCRtpSender.prototype.createEncodedStreams) {
						receiverStreams = event.receiver.createEncodedStreams();
					} else if(RTCRtpSender.prototype.createAudioEncodedStreams || RTCRtpSender.prototype.createEncodedVideoStreams) {
						if(event.track.kind === "audio" && config.receiverTransforms["audio"]) {
							receiverStreams = event.receiver.createEncodedAudioStreams();
						} else if(event.track.kind === "video" && config.receiverTransforms["video"]) {
							receiverStreams = event.receiver.createEncodedVideoStreams();
						}
					}
					if(receiverStreams) {
						console.log(receiverStreams);
						if(receiverStreams.readableStream && receiverStreams.writableStream) {
							receiverStreams.readableStream
								.pipeThrough(config.receiverTransforms[event.track.kind])
								.pipeTo(receiverStreams.writableStream);
						} else if(receiverStreams.readable && receiverStreams.writable) {
							receiverStreams.readable
								.pipeThrough(config.receiverTransforms[event.track.kind])
								.pipeTo(receiverStreams.writable);
						}
					}
				}
				var trackMutedTimeoutId = null;
				Janus.log("Adding onended callback to track:", event.track);
				event.track.onended = function(ev) {
					Janus.log("Remote track removed:", ev);
					if(config.remoteStream) {
						clearTimeout(trackMutedTimeoutId);
						config.remoteStream.removeTrack(ev.target);
						pluginHandle.onremotestream(config.remoteStream);
					}
				};
				event.track.onmute = function(ev) {
					Janus.log("Remote track muted:", ev);
					if(config.remoteStream && trackMutedTimeoutId == null) {
						trackMutedTimeoutId = setTimeout(function() {
							Janus.log("Removing remote track");
							if (config.remoteStream) {
								config.remoteStream.removeTrack(ev.target);
								pluginHandle.onremotestream(config.remoteStream);
							}
							trackMutedTimeoutId = null;
						// Chrome seems to raise mute events only at multiples of 834ms;
						// we set the timeout to three times this value (rounded to 840ms)
						}, 3 * 840);
					}
				};
				event.track.onunmute = function(ev) {
					Janus.log("Remote track flowing again:", ev);
					if(trackMutedTimeoutId != null) {
						clearTimeout(trackMutedTimeoutId);
						trackMutedTimeoutId = null;
					} else {
						try {
							config.remoteStream.addTrack(ev.target);
							pluginHandle.onremotestream(config.remoteStream);
						} catch(e) {
							Janus.error(e);
						}
					}
				};
			};
		}
		if(addTracks && stream) {
			Janus.log('Adding local stream');
			var simulcast = (callbacks.simulcast === true || callbacks.simulcast2 === true) && Janus.unifiedPlan;
			var svc = callbacks.svc;
			stream.getTracks().forEach(function(track) {
				Janus.log('Adding local track:', track);
				var sender = null;
				if((!simulcast && !svc) || track.kind === 'audio') {
					sender = config.pc.addTrack(track, stream);
				} else if(simulcast) {
					Janus.log('Enabling rid-based simulcasting:', track);
					let maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);
					let tr = config.pc.addTransceiver(track, {
						direction: "sendrecv",
						streams: [stream],
						sendEncodings: callbacks.sendEncodings || [
							{ rid: "h", active: true, maxBitrate: maxBitrates.high },
							{ rid: "m", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },
							{ rid: "l", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }
						]
					});
					if(tr)
						sender = tr.sender;
				} else {
					Janus.log('Enabling SVC (' + svc + '):', track);
					let tr = config.pc.addTransceiver(track, {
						direction: "sendrecv",
						streams: [stream],
						sendEncodings: [
							{ scalabilityMode: svc }
						]
					});
					if(tr)
						sender = tr.sender;
				}
				// Check if insertable streams are involved
				if(sender && config.senderTransforms) {
					var senderStreams = null;
					if(RTCRtpSender.prototype.createEncodedStreams) {
						senderStreams = sender.createEncodedStreams();
					} else if(RTCRtpSender.prototype.createAudioEncodedStreams || RTCRtpSender.prototype.createEncodedVideoStreams) {
						if(sender.track.kind === "audio" && config.senderTransforms["audio"]) {
							senderStreams = sender.createEncodedAudioStreams();
						} else if(sender.track.kind === "video" && config.senderTransforms["video"]) {
							senderStreams = sender.createEncodedVideoStreams();
						}
					}
					if(senderStreams) {
						console.log(senderStreams);
						if(senderStreams.readableStream && senderStreams.writableStream) {
							senderStreams.readableStream
								.pipeThrough(config.senderTransforms[sender.track.kind])
								.pipeTo(senderStreams.writableStream);
						} else if(senderStreams.readable && senderStreams.writable) {
							senderStreams.readable
								.pipeThrough(config.senderTransforms[sender.track.kind])
								.pipeTo(senderStreams.writable);
						}
					}
				}
			});
		}
		// Any data channel to create?
		if(isDataEnabled(media) && !config.dataChannel[Janus.dataChanDefaultLabel]) {
			Janus.log("Creating default data channel");
			createDataChannel(handleId, Janus.dataChanDefaultLabel, null, false);
			config.pc.ondatachannel = function(event) {
				Janus.log("Data channel created by Janus:", event);
				createDataChannel(handleId, event.channel.label, event.channel.protocol, event.channel);
			};
		}
		// If there's a new local stream, let's notify the application
		if(config.myStream) {
			pluginHandle.onlocalstream(config.myStream);
		}
		// Create offer/answer now
		if(!jsep) {
			createOffer(handleId, media, callbacks);
		} else {
			config.pc.setRemoteDescription(jsep)
				.then(function() {
					Janus.log("Remote description accepted!");
					config.remoteSdp = jsep.sdp;
					// Any trickle candidate we cached?
					if(config.candidates && config.candidates.length > 0) {
						for(var i = 0; i< config.candidates.length; i++) {
							var candidate = config.candidates[i];
							Janus.debug("Adding remote candidate:", candidate);
							if(!candidate || candidate.completed === true) {
								// end-of-candidates
								config.pc.addIceCandidate(Janus.endOfCandidates);
							} else {
								// New candidate
								config.pc.addIceCandidate(candidate);
							}
						}
						config.candidates = [];
					}
					// Create the answer now
					createAnswer(handleId, media, callbacks);
				}, callbacks.error);
		}
	}

	function prepareWebrtc(handleId, offer, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : webrtcError;
		var jsep = callbacks.jsep;
		if(offer && jsep) {
			Janus.error("Provided a JSEP to a createOffer");
			callbacks.error("Provided a JSEP to a createOffer");
			return;
		} else if(!offer && (!jsep || !jsep.type || !jsep.sdp)) {
			Janus.error("A valid JSEP is required for createAnswer");
			callbacks.error("A valid JSEP is required for createAnswer");
			return;
		}
		/* Check that callbacks.media is a (not null) Object */
		callbacks.media = (typeof callbacks.media === 'object' && callbacks.media) ? callbacks.media : { audio: true, video: true };
		var media = callbacks.media;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		config.trickle = isTrickleEnabled(callbacks.trickle);
		// Are we updating a session?
		if(!config.pc) {
			// Nope, new PeerConnection
			media.update = false;
			media.keepAudio = false;
			media.keepVideo = false;
		} else {
			Janus.log("Updating existing media session");
			media.update = true;
			// Check if there's anything to add/remove/replace, or if we
			// can go directly to preparing the new SDP offer or answer
			if(callbacks.stream) {
				// External stream: is this the same as the one we were using before?
				if(callbacks.stream !== config.myStream) {
					Janus.log("Renegotiation involves a new external stream");
				}
			} else {
				// Check if there are changes on audio
				if(media.addAudio) {
					media.keepAudio = false;
					media.replaceAudio = false;
					media.removeAudio = false;
					media.audioSend = true;
					if(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {
						Janus.error("Can't add audio stream, there already is one");
						callbacks.error("Can't add audio stream, there already is one");
						return;
					}
				} else if(media.removeAudio) {
					media.keepAudio = false;
					media.replaceAudio = false;
					media.addAudio = false;
					media.audioSend = false;
				} else if(media.replaceAudio) {
					media.keepAudio = false;
					media.addAudio = false;
					media.removeAudio = false;
					media.audioSend = true;
				}
				if(!config.myStream) {
					// No media stream: if we were asked to replace, it's actually an "add"
					if(media.replaceAudio) {
						media.keepAudio = false;
						media.replaceAudio = false;
						media.addAudio = true;
						media.audioSend = true;
					}
					if(isAudioSendEnabled(media)) {
						media.keepAudio = false;
						media.addAudio = true;
					}
				} else {
					if(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {
						// No audio track: if we were asked to replace, it's actually an "add"
						if(media.replaceAudio) {
							media.keepAudio = false;
							media.replaceAudio = false;
							media.addAudio = true;
							media.audioSend = true;
						}
						if(isAudioSendEnabled(media)) {
							media.keepAudio = false;
							media.addAudio = true;
						}
					} else {
						// We have an audio track: should we keep it as it is?
						if(isAudioSendEnabled(media) &&
								!media.removeAudio && !media.replaceAudio) {
							media.keepAudio = true;
						}
					}
				}
				// Check if there are changes on video
				if(media.addVideo) {
					media.keepVideo = false;
					media.replaceVideo = false;
					media.removeVideo = false;
					media.videoSend = true;
					if(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {
						Janus.error("Can't add video stream, there already is one");
						callbacks.error("Can't add video stream, there already is one");
						return;
					}
				} else if(media.removeVideo) {
					media.keepVideo = false;
					media.replaceVideo = false;
					media.addVideo = false;
					media.videoSend = false;
				} else if(media.replaceVideo) {
					media.keepVideo = false;
					media.addVideo = false;
					media.removeVideo = false;
					media.videoSend = true;
				}
				if(!config.myStream) {
					// No media stream: if we were asked to replace, it's actually an "add"
					if(media.replaceVideo) {
						media.keepVideo = false;
						media.replaceVideo = false;
						media.addVideo = true;
						media.videoSend = true;
					}
					if(isVideoSendEnabled(media)) {
						media.keepVideo = false;
						media.addVideo = true;
					}
				} else {
					if(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {
						// No video track: if we were asked to replace, it's actually an "add"
						if(media.replaceVideo) {
							media.keepVideo = false;
							media.replaceVideo = false;
							media.addVideo = true;
							media.videoSend = true;
						}
						if(isVideoSendEnabled(media)) {
							media.keepVideo = false;
							media.addVideo = true;
						}
					} else {
						// We have a video track: should we keep it as it is?
						if(isVideoSendEnabled(media) && !media.removeVideo && !media.replaceVideo) {
							media.keepVideo = true;
						}
					}
				}
				// Data channels can only be added
				if(media.addData) {
					media.data = true;
				}
			}
			// If we're updating and keeping all tracks, let's skip the getUserMedia part
			if((isAudioSendEnabled(media) && media.keepAudio) &&
					(isVideoSendEnabled(media) && media.keepVideo)) {
				pluginHandle.consentDialog(false);
				streamsDone(handleId, jsep, media, callbacks, config.myStream);
				return;
			}
		}
		// If we're updating, check if we need to remove/replace one of the tracks
		if(media.update && (!config.streamExternal || (config.streamExternal && (media.replaceAudio || media.replaceVideo)))) {
			if(media.removeAudio || media.replaceAudio) {
				if(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {
					var at = config.myStream.getAudioTracks()[0];
					Janus.log("Removing audio track:", at);
					config.myStream.removeTrack(at);
					try {
						at.stop();
					} catch(e) {}
				}
				if(config.pc.getSenders() && config.pc.getSenders().length) {
					var ra = true;
					if(media.replaceAudio && Janus.unifiedPlan) {
						// We can use replaceTrack
						ra = false;
					}
					if(ra) {
						for(var asnd of config.pc.getSenders()) {
							if(asnd && asnd.track && asnd.track.kind === "audio") {
								Janus.log("Removing audio sender:", asnd);
								config.pc.removeTrack(asnd);
							}
						}
					}
				}
			}
			if(media.removeVideo || media.replaceVideo) {
				if(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {
					var vt = config.myStream.getVideoTracks()[0];
					Janus.log("Removing video track:", vt);
					config.myStream.removeTrack(vt);
					try {
						vt.stop();
					} catch(e) {}
				}
				if(config.pc.getSenders() && config.pc.getSenders().length) {
					var rv = true;
					if(media.replaceVideo && Janus.unifiedPlan) {
						// We can use replaceTrack
						rv = false;
					}
					if(rv) {
						for(var vsnd of config.pc.getSenders()) {
							if(vsnd && vsnd.track && vsnd.track.kind === "video") {
								Janus.log("Removing video sender:", vsnd);
								config.pc.removeTrack(vsnd);
							}
						}
					}
				}
			}
		}
		// Was a MediaStream object passed, or do we need to take care of that?
		if(callbacks.stream) {
			var stream = callbacks.stream;
			Janus.log("MediaStream provided by the application");
			Janus.debug(stream);
			// If this is an update, let's check if we need to release the previous stream
			if(media.update && config.myStream && config.myStream !== callbacks.stream && !config.streamExternal && !media.replaceAudio && !media.replaceVideo) {
				// We're replacing a stream we captured ourselves with an external one
				Janus.stopAllTracks(config.myStream);
				config.myStream = null;
			}
			// Skip the getUserMedia part
			config.streamExternal = true;
			pluginHandle.consentDialog(false);
			streamsDone(handleId, jsep, media, callbacks, stream);
			return;
		}
		if(isAudioSendEnabled(media) || isVideoSendEnabled(media)) {
			if(!Janus.isGetUserMediaAvailable()) {
				callbacks.error("getUserMedia not available");
				return;
			}
			var constraints = { mandatory: {}, optional: []};
			pluginHandle.consentDialog(true);
			var audioSupport = isAudioSendEnabled(media);
			if(audioSupport && media && typeof media.audio === 'object')
				audioSupport = media.audio;
			var videoSupport = isVideoSendEnabled(media);
			if(videoSupport && media) {
				var simulcast = (callbacks.simulcast === true || callbacks.simulcast2 === true);
				var svc = callbacks.svc;
				if((simulcast || svc) && !jsep && !media.video)
					media.video = "hires";
				if(media.video && media.video != 'screen' && media.video != 'window') {
					if(typeof media.video === 'object') {
						videoSupport = media.video;
					} else {
						var width = 0;
						var height = 0;
						if(media.video === 'lowres') {
							// Small resolution, 4:3
							height = 240;
							width = 320;
						} else if(media.video === 'lowres-16:9') {
							// Small resolution, 16:9
							height = 180;
							width = 320;
						} else if(media.video === 'hires' || media.video === 'hires-16:9' || media.video === 'hdres') {
							// High(HD) resolution is only 16:9
							height = 720;
							width = 1280;
						} else if(media.video === 'fhdres') {
							// Full HD resolution is only 16:9
							height = 1080;
							width = 1920;
						} else if(media.video === '4kres') {
							// 4K resolution is only 16:9
							height = 2160;
							width = 3840;
						} else if(media.video === 'stdres') {
							// Normal resolution, 4:3
							height = 480;
							width = 640;
						} else if(media.video === 'stdres-16:9') {
							// Normal resolution, 16:9
							height = 360;
							width = 640;
						} else {
							Janus.log("Default video setting is stdres 4:3");
							height = 480;
							width = 640;
						}
						Janus.log("Adding media constraint:", media.video);
						videoSupport = {
							'height': {'ideal': height},
							'width': {'ideal': width}
						};
						Janus.log("Adding video constraint:", videoSupport);
					}
				} else if(media.video === 'screen' || media.video === 'window') {
					if(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
						// The new experimental getDisplayMedia API is available, let's use that
						// https://groups.google.com/forum/#!topic/discuss-webrtc/Uf0SrR4uxzk
						// https://webrtchacks.com/chrome-screensharing-getdisplaymedia/
						constraints.video = {};
						if(media.screenshareFrameRate) {
							constraints.video.frameRate = media.screenshareFrameRate;
						}
						if(media.screenshareHeight) {
							constraints.video.height = media.screenshareHeight;
						}
						if(media.screenshareWidth) {
							constraints.video.width = media.screenshareWidth;
						}
						constraints.audio = media.captureDesktopAudio;
						navigator.mediaDevices.getDisplayMedia(constraints)
							.then(function(stream) {
								pluginHandle.consentDialog(false);
								if(isAudioSendEnabled(media) && !media.keepAudio) {
									navigator.mediaDevices.getUserMedia({ audio: true, video: false })
									.then(function (audioStream) {
										stream.addTrack(audioStream.getAudioTracks()[0]);
										streamsDone(handleId, jsep, media, callbacks, stream);
									})
								} else {
									streamsDone(handleId, jsep, media, callbacks, stream);
								}
							}, function (error) {
								pluginHandle.consentDialog(false);
								callbacks.error(error);
							});
						return;
					}
					// We're going to try and use the extension for Chrome 34+, the old approach
					// for older versions of Chrome, or the experimental support in Firefox 33+
					const callbackUserMedia = function(error, stream) {
						pluginHandle.consentDialog(false);
						if(error) {
							callbacks.error(error);
						} else {
							streamsDone(handleId, jsep, media, callbacks, stream);
						}
					}
					const getScreenMedia = function(constraints, gsmCallback, useAudio) {
						Janus.log("Adding media constraint (screen capture)");
						Janus.debug(constraints);
						navigator.mediaDevices.getUserMedia(constraints)
							.then(function(stream) {
								if(useAudio) {
									navigator.mediaDevices.getUserMedia({ audio: true, video: false })
									.then(function (audioStream) {
										stream.addTrack(audioStream.getAudioTracks()[0]);
										gsmCallback(null, stream);
									})
								} else {
									gsmCallback(null, stream);
								}
							})
							.catch(function(error) { pluginHandle.consentDialog(false); gsmCallback(error); });
					}
					if(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {
						var chromever = Janus.webRTCAdapter.browserDetails.version;
						var maxver = 33;
						if(window.navigator.userAgent.match('Linux'))
							maxver = 35;	// "known" crash in chrome 34 and 35 on linux
						if(chromever >= 26 && chromever <= maxver) {
							// Chrome 26->33 requires some awkward chrome://flags manipulation
							constraints = {
								video: {
									mandatory: {
										googLeakyBucket: true,
										maxWidth: window.screen.width,
										maxHeight: window.screen.height,
										minFrameRate: media.screenshareFrameRate,
										maxFrameRate: media.screenshareFrameRate,
										chromeMediaSource: 'screen'
									}
								},
								audio: isAudioSendEnabled(media) && !media.keepAudio
							};
							getScreenMedia(constraints, callbackUserMedia);
						} else {
							// Chrome 34+ requires an extension
							Janus.extension.getScreen(function (error, sourceId) {
								if (error) {
									pluginHandle.consentDialog(false);
									return callbacks.error(error);
								}
								constraints = {
									audio: false,
									video: {
										mandatory: {
											chromeMediaSource: 'desktop',
											maxWidth: window.screen.width,
											maxHeight: window.screen.height,
											minFrameRate: media.screenshareFrameRate,
											maxFrameRate: media.screenshareFrameRate,
										},
										optional: [
											{googLeakyBucket: true},
											{googTemporalLayeredScreencast: true}
										]
									}
								};
								constraints.video.mandatory.chromeMediaSourceId = sourceId;
								getScreenMedia(constraints, callbackUserMedia,
									isAudioSendEnabled(media) && !media.keepAudio);
							});
						}
					} else if(Janus.webRTCAdapter.browserDetails.browser === 'firefox') {
						if(Janus.webRTCAdapter.browserDetails.version >= 33) {
							// Firefox 33+ has experimental support for screen sharing
							constraints = {
								video: {
									mozMediaSource: media.video,
									mediaSource: media.video
								},
								audio: isAudioSendEnabled(media) && !media.keepAudio
							};
							getScreenMedia(constraints, function (err, stream) {
								callbackUserMedia(err, stream);
								// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810
								if (!err) {
									var lastTime = stream.currentTime;
									var polly = window.setInterval(function () {
										if(!stream)
											window.clearInterval(polly);
										if(stream.currentTime == lastTime) {
											window.clearInterval(polly);
											if(stream.onended) {
												stream.onended();
											}
										}
										lastTime = stream.currentTime;
									}, 500);
								}
							});
						} else {
							var error = new Error('NavigatorUserMediaError');
							error.name = 'Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)';
							pluginHandle.consentDialog(false);
							callbacks.error(error);
							return;
						}
					}
					return;
				}
			}
			// If we got here, we're not screensharing
			if(!media || media.video !== 'screen') {
				// Check whether all media sources are actually available or not
				navigator.mediaDevices.enumerateDevices().then(function(devices) {
					var audioExist = devices.some(function(device) {
						return device.kind === 'audioinput';
					}),
					videoExist = isScreenSendEnabled(media) || devices.some(function(device) {
						return device.kind === 'videoinput';
					});

					// Check whether a missing device is really a problem
					var audioSend = isAudioSendEnabled(media);
					var videoSend = isVideoSendEnabled(media);
					var needAudioDevice = isAudioSendRequired(media);
					var needVideoDevice = isVideoSendRequired(media);
					if(audioSend || videoSend || needAudioDevice || needVideoDevice) {
						// We need to send either audio or video
						var haveAudioDevice = audioSend ? audioExist : false;
						var haveVideoDevice = videoSend ? videoExist : false;
						if(!haveAudioDevice && !haveVideoDevice) {
							// FIXME Should we really give up, or just assume recvonly for both?
							pluginHandle.consentDialog(false);
							callbacks.error('No capture device found');
							return false;
						} else if(!haveAudioDevice && needAudioDevice) {
							pluginHandle.consentDialog(false);
							callbacks.error('Audio capture is required, but no capture device found');
							return false;
						} else if(!haveVideoDevice && needVideoDevice) {
							pluginHandle.consentDialog(false);
							callbacks.error('Video capture is required, but no capture device found');
							return false;
						}
					}

					var gumConstraints = {
						audio: (audioExist && !media.keepAudio) ? audioSupport : false,
						video: (videoExist && !media.keepVideo) ? videoSupport : false
					};
					Janus.debug("getUserMedia constraints", gumConstraints);
					if (!gumConstraints.audio && !gumConstraints.video) {
						pluginHandle.consentDialog(false);
						streamsDone(handleId, jsep, media, callbacks, stream);
					} else {
						navigator.mediaDevices.getUserMedia(gumConstraints)
							.then(function(stream) {
								pluginHandle.consentDialog(false);
								streamsDone(handleId, jsep, media, callbacks, stream);
							}).catch(function(error) {
								pluginHandle.consentDialog(false);
								callbacks.error({code: error.code, name: error.name, message: error.message});
							});
					}
				})
				.catch(function(error) {
					pluginHandle.consentDialog(false);
					callbacks.error(error);
				});
			}
		} else {
			// No need to do a getUserMedia, create offer/answer right away
			streamsDone(handleId, jsep, media, callbacks);
		}
	}

	function prepareWebrtcPeer(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : webrtcError;
		callbacks.customizeSdp = (typeof callbacks.customizeSdp == "function") ? callbacks.customizeSdp : Janus.noop;
		var jsep = callbacks.jsep;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(jsep) {
			if(!config.pc) {
				Janus.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep");
				callbacks.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");
				return;
			}
			callbacks.customizeSdp(jsep);
			config.pc.setRemoteDescription(jsep)
				.then(function() {
					Janus.log("Remote description accepted!");
					config.remoteSdp = jsep.sdp;
					// Any trickle candidate we cached?
					if(config.candidates && config.candidates.length > 0) {
						for(var i = 0; i< config.candidates.length; i++) {
							var candidate = config.candidates[i];
							Janus.debug("Adding remote candidate:", candidate);
							if(!candidate || candidate.completed === true) {
								// end-of-candidates
								config.pc.addIceCandidate(Janus.endOfCandidates);
							} else {
								// New candidate
								config.pc.addIceCandidate(candidate);
							}
						}
						config.candidates = [];
					}
					// Done
					callbacks.success();
				}, callbacks.error);
		} else {
			callbacks.error("Invalid JSEP");
		}
	}

	function createOffer(handleId, media, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks.customizeSdp = (typeof callbacks.customizeSdp == "function") ? callbacks.customizeSdp : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var simulcast = (callbacks.simulcast === true);
		if(!simulcast) {
			Janus.log("Creating offer (iceDone=" + config.iceDone + ")");
		} else {
			Janus.log("Creating offer (iceDone=" + config.iceDone + ", simulcast=" + simulcast + ")");
		}
		// https://code.google.com/p/webrtc/issues/detail?id=3508
		var mediaConstraints = {};
		if(Janus.unifiedPlan) {
			// We can use Transceivers
			var audioTransceiver = null, videoTransceiver = null;
			var transceivers = config.pc.getTransceivers();
			if(transceivers && transceivers.length > 0) {
				for(var t of transceivers) {
					if((t.sender && t.sender.track && t.sender.track.kind === "audio") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "audio")) {
						if(!audioTransceiver) {
							audioTransceiver = t;
						}
						continue;
					}
					if((t.sender && t.sender.track && t.sender.track.kind === "video") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "video")) {
						if(!videoTransceiver) {
							videoTransceiver = t;
						}
						continue;
					}
				}
			}
			// Handle audio (and related changes, if any)
			var audioSend = isAudioSendEnabled(media);
			var audioRecv = isAudioRecvEnabled(media);
			if(!audioSend && !audioRecv) {
				// Audio disabled: have we removed it?
				if(media.removeAudio && audioTransceiver) {
					if (audioTransceiver.setDirection) {
						audioTransceiver.setDirection("inactive");
					} else {
						audioTransceiver.direction = "inactive";
					}
					Janus.log("Setting audio transceiver to inactive:", audioTransceiver);
				}
			} else {
				// Take care of audio m-line
				if(audioSend && audioRecv) {
					if(audioTransceiver) {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("sendrecv");
						} else {
							audioTransceiver.direction = "sendrecv";
						}
						Janus.log("Setting audio transceiver to sendrecv:", audioTransceiver);
					}
				} else if(audioSend && !audioRecv) {
					if(audioTransceiver) {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("sendonly");
						} else {
							audioTransceiver.direction = "sendonly";
						}
						Janus.log("Setting audio transceiver to sendonly:", audioTransceiver);
					}
				} else if(!audioSend && audioRecv) {
					if(audioTransceiver) {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("recvonly");
						} else {
							audioTransceiver.direction = "recvonly";
						}
						Janus.log("Setting audio transceiver to recvonly:", audioTransceiver);
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						audioTransceiver = config.pc.addTransceiver("audio", { direction: "recvonly" });
						Janus.log("Adding recvonly audio transceiver:", audioTransceiver);
					}
				}
			}
			// Handle video (and related changes, if any)
			var videoSend = isVideoSendEnabled(media);
			var videoRecv = isVideoRecvEnabled(media);
			if(!videoSend && !videoRecv) {
				// Video disabled: have we removed it?
				if(media.removeVideo && videoTransceiver) {
					if (videoTransceiver.setDirection) {
						videoTransceiver.setDirection("inactive");
					} else {
						videoTransceiver.direction = "inactive";
					}
					Janus.log("Setting video transceiver to inactive:", videoTransceiver);
				}
			} else {
				// Take care of video m-line
				if(videoSend && videoRecv) {
					if(videoTransceiver) {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("sendrecv");
						} else {
							videoTransceiver.direction = "sendrecv";
						}
						Janus.log("Setting video transceiver to sendrecv:", videoTransceiver);
					}
				} else if(videoSend && !videoRecv) {
					if(videoTransceiver) {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("sendonly");
						} else {
							videoTransceiver.direction = "sendonly";
						}
						Janus.log("Setting video transceiver to sendonly:", videoTransceiver);
					}
				} else if(!videoSend && videoRecv) {
					if(videoTransceiver) {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("recvonly");
						} else {
							videoTransceiver.direction = "recvonly";
						}
						Janus.log("Setting video transceiver to recvonly:", videoTransceiver);
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						videoTransceiver = config.pc.addTransceiver("video", { direction: "recvonly" });
						Janus.log("Adding recvonly video transceiver:", videoTransceiver);
					}
				}
			}
		} else {
			mediaConstraints["offerToReceiveAudio"] = isAudioRecvEnabled(media);
			mediaConstraints["offerToReceiveVideo"] = isVideoRecvEnabled(media);
		}
		var iceRestart = (callbacks.iceRestart === true);
		if(iceRestart) {
			mediaConstraints["iceRestart"] = true;
		}
		Janus.debug(mediaConstraints);
		// Check if this is Firefox and we've been asked to do simulcasting
		var sendVideo = isVideoSendEnabled(media);
		if(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === "firefox") {
			// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b
			Janus.log("Enabling Simulcasting for Firefox (RID)");
			var sender = config.pc.getSenders().find(function(s) {return s.track && s.track.kind === "video"});
			if(sender) {
				var parameters = sender.getParameters();
				if(!parameters) {
					parameters = {};
				}
				var maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);
				parameters.encodings = callbacks.sendEncodings || [
					{ rid: "h", active: true, maxBitrate: maxBitrates.high },
					{ rid: "m", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },
					{ rid: "l", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }
				];
				sender.setParameters(parameters);
			}
		}
		config.pc.createOffer(mediaConstraints)
			.then(function(offer) {
				Janus.debug(offer);
				// JSON.stringify doesn't work on some WebRTC objects anymore
				// See https://code.google.com/p/chromium/issues/detail?id=467366
				var jsep = {
					"type": offer.type,
					"sdp": offer.sdp
				};
				callbacks.customizeSdp(jsep);
				offer.sdp = jsep.sdp;
				Janus.log("Setting local description");
				if(sendVideo && simulcast && !Janus.unifiedPlan) {
					// We only do simulcast via SDP munging on older versions of Chrome and Safari
					if(Janus.webRTCAdapter.browserDetails.browser === "chrome" ||
							Janus.webRTCAdapter.browserDetails.browser === "safari") {
						Janus.log("Enabling Simulcasting for Chrome (SDP munging)");
						offer.sdp = mungeSdpForSimulcasting(offer.sdp);
					}
				}
				config.mySdp = {
					type: "offer",
					sdp: offer.sdp
				};
				config.pc.setLocalDescription(offer)
					.catch(callbacks.error);
				config.mediaConstraints = mediaConstraints;
				if(!config.iceDone && !config.trickle) {
					// Don't do anything until we have all candidates
					Janus.log("Waiting for all candidates...");
					return;
				}
				// If transforms are present, notify Janus that the media is end-to-end encrypted
				if(config.senderTransforms || config.receiverTransforms) {
					offer["e2ee"] = true;
				}
				callbacks.success(offer);
			}, callbacks.error);
	}

	function createAnswer(handleId, media, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks.customizeSdp = (typeof callbacks.customizeSdp == "function") ? callbacks.customizeSdp : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var simulcast = (callbacks.simulcast === true || callbacks.simulcast2 === true);
		if(!simulcast) {
			Janus.log("Creating answer (iceDone=" + config.iceDone + ")");
		} else {
			Janus.log("Creating answer (iceDone=" + config.iceDone + ", simulcast=" + simulcast + ")");
		}
		var mediaConstraints = null;
		if(Janus.unifiedPlan) {
			// We can use Transceivers
			mediaConstraints = {};
			var audioTransceiver = null, videoTransceiver = null;
			var transceivers = config.pc.getTransceivers();
			if(transceivers && transceivers.length > 0) {
				for(var t of transceivers) {
					if((t.sender && t.sender.track && t.sender.track.kind === "audio") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "audio")) {
						if(!audioTransceiver)
							audioTransceiver = t;
						continue;
					}
					if((t.sender && t.sender.track && t.sender.track.kind === "video") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "video")) {
						if(!videoTransceiver)
							videoTransceiver = t;
						continue;
					}
				}
			}
			// Handle audio (and related changes, if any)
			var audioSend = isAudioSendEnabled(media);
			var audioRecv = isAudioRecvEnabled(media);
			if(!audioSend && !audioRecv) {
				// Audio disabled: have we removed it?
				if(media.removeAudio && audioTransceiver) {
					try {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("inactive");
						} else {
							audioTransceiver.direction = "inactive";
						}
						Janus.log("Setting audio transceiver to inactive:", audioTransceiver);
					} catch(e) {
						Janus.error(e);
					}
				}
			} else {
				// Take care of audio m-line
				if(audioSend && audioRecv) {
					if(audioTransceiver) {
						try {
							if (audioTransceiver.setDirection) {
								audioTransceiver.setDirection("sendrecv");
							} else {
								audioTransceiver.direction = "sendrecv";
							}
							Janus.log("Setting audio transceiver to sendrecv:", audioTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					}
				} else if(audioSend && !audioRecv) {
					try {
						if(audioTransceiver) {
							if (audioTransceiver.setDirection) {
								audioTransceiver.setDirection("sendonly");
							} else {
								audioTransceiver.direction = "sendonly";
							}
							Janus.log("Setting audio transceiver to sendonly:", audioTransceiver);
						}
					} catch(e) {
						Janus.error(e);
					}
				} else if(!audioSend && audioRecv) {
					if(audioTransceiver) {
						try {
							if (audioTransceiver.setDirection) {
								audioTransceiver.setDirection("recvonly");
							} else {
								audioTransceiver.direction = "recvonly";
							}
							Janus.log("Setting audio transceiver to recvonly:", audioTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						audioTransceiver = config.pc.addTransceiver("audio", { direction: "recvonly" });
						Janus.log("Adding recvonly audio transceiver:", audioTransceiver);
					}
				}
			}
			// Handle video (and related changes, if any)
			var videoSend = isVideoSendEnabled(media);
			var videoRecv = isVideoRecvEnabled(media);
			if(!videoSend && !videoRecv) {
				// Video disabled: have we removed it?
				if(media.removeVideo && videoTransceiver) {
					try {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("inactive");
						} else {
							videoTransceiver.direction = "inactive";
						}
						Janus.log("Setting video transceiver to inactive:", videoTransceiver);
					} catch(e) {
						Janus.error(e);
					}
				}
			} else {
				// Take care of video m-line
				if(videoSend && videoRecv) {
					if(videoTransceiver) {
						try {
							if (videoTransceiver.setDirection) {
								videoTransceiver.setDirection("sendrecv");
							} else {
								videoTransceiver.direction = "sendrecv";
							}
							Janus.log("Setting video transceiver to sendrecv:", videoTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					}
				} else if(videoSend && !videoRecv) {
					if(videoTransceiver) {
						try {
							if (videoTransceiver.setDirection) {
								videoTransceiver.setDirection("sendonly");
							} else {
								videoTransceiver.direction = "sendonly";
							}
							Janus.log("Setting video transceiver to sendonly:", videoTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					}
				} else if(!videoSend && videoRecv) {
					if(videoTransceiver) {
						try {
							if (videoTransceiver.setDirection) {
								videoTransceiver.setDirection("recvonly");
							} else {
								videoTransceiver.direction = "recvonly";
							}
							Janus.log("Setting video transceiver to recvonly:", videoTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						videoTransceiver = config.pc.addTransceiver("video", { direction: "recvonly" });
						Janus.log("Adding recvonly video transceiver:", videoTransceiver);
					}
				}
			}
		} else {
			if(Janus.webRTCAdapter.browserDetails.browser === "firefox" || Janus.webRTCAdapter.browserDetails.browser === "edge") {
				mediaConstraints = {
					offerToReceiveAudio: isAudioRecvEnabled(media),
					offerToReceiveVideo: isVideoRecvEnabled(media)
				};
			} else {
				mediaConstraints = {
					mandatory: {
						OfferToReceiveAudio: isAudioRecvEnabled(media),
						OfferToReceiveVideo: isVideoRecvEnabled(media)
					}
				};
			}
		}
		Janus.debug(mediaConstraints);
		// Check if this is Firefox and we've been asked to do simulcasting
		var sendVideo = isVideoSendEnabled(media);
		if(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === "firefox") {
			// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b
			Janus.log("Enabling Simulcasting for Firefox (RID)");
			var sender = config.pc.getSenders()[1];
			Janus.log(sender);
			var parameters = sender.getParameters();
			Janus.log(parameters);

			var maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);
			sender.setParameters({encodings: callbacks.sendEncodings || [
				{ rid: "h", active: true, maxBitrate: maxBitrates.high },
				{ rid: "m", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2},
				{ rid: "l", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4}
			]});
		}
		config.pc.createAnswer(mediaConstraints)
			.then(function(answer) {
				Janus.debug(answer);
				// JSON.stringify doesn't work on some WebRTC objects anymore
				// See https://code.google.com/p/chromium/issues/detail?id=467366
				var jsep = {
					"type": answer.type,
					"sdp": answer.sdp
				};
				callbacks.customizeSdp(jsep);
				answer.sdp = jsep.sdp;
				Janus.log("Setting local description");
				if(sendVideo && simulcast && !Janus.unifiedPlan) {
					// We only do simulcast via SDP munging on older versions of Chrome and Safari
					if(Janus.webRTCAdapter.browserDetails.browser === "chrome") {
						// FIXME Apparently trying to simulcast when answering breaks video in Chrome...
						//~ Janus.log("Enabling Simulcasting for Chrome (SDP munging)");
						//~ answer.sdp = mungeSdpForSimulcasting(answer.sdp);
						Janus.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it");
					}
				}
				config.mySdp = {
					type: "answer",
					sdp: answer.sdp
				};
				config.pc.setLocalDescription(answer)
					.catch(callbacks.error);
				config.mediaConstraints = mediaConstraints;
				if(!config.iceDone && !config.trickle) {
					// Don't do anything until we have all candidates
					Janus.log("Waiting for all candidates...");
					return;
				}
				// If transforms are present, notify Janus that the media is end-to-end encrypted
				if(config.senderTransforms || config.receiverTransforms) {
					answer["e2ee"] = true;
				}
				callbacks.success(answer);
			}, callbacks.error);
	}

	function sendSDP(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle, not sending anything");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		Janus.log("Sending offer/answer SDP...");
		if(!config.mySdp) {
			Janus.warn("Local SDP instance is invalid, not sending anything...");
			return;
		}
		config.mySdp = {
			"type": config.pc.localDescription.type,
			"sdp": config.pc.localDescription.sdp
		};
		if(config.trickle === false)
			config.mySdp["trickle"] = false;
		Janus.debug(callbacks);
		config.sdpSent = true;
		callbacks.success(config.mySdp);
	}

	function getVolume(handleId, remote) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return 0;
		}
		var stream = remote ? "remote" : "local";
		var config = pluginHandle.webrtcStuff;
		if(!config.volume[stream])
			config.volume[stream] = { value: 0 };
		// Start getting the volume, if audioLevel in getStats is supported (apparently
		// they're only available in Chrome/Safari right now: https://webrtc-stats.callstats.io/)
		if(config.pc.getStats && (Janus.webRTCAdapter.browserDetails.browser === "chrome" ||
				Janus.webRTCAdapter.browserDetails.browser === "safari")) {
			if(remote && !config.remoteStream) {
				Janus.warn("Remote stream unavailable");
				return 0;
			} else if(!remote && !config.myStream) {
				Janus.warn("Local stream unavailable");
				return 0;
			}
			if(!config.volume[stream].timer) {
				Janus.log("Starting " + stream + " volume monitor");
				config.volume[stream].timer = setInterval(function() {
					config.pc.getStats()
						.then(function(stats) {
							stats.forEach(function (res) {
								if(!res || res.kind !== "audio")
									return;
								if((remote && !res.remoteSource) || (!remote && res.type !== "media-source"))
									return;
								config.volume[stream].value = (res.audioLevel ? res.audioLevel : 0);
							});
						});
				}, 200);
				return 0;	// We don't have a volume to return yet
			}
			return config.volume[stream].value;
		} else {
			// audioInputLevel and audioOutputLevel seem only available in Chrome? audioLevel
			// seems to be available on Chrome and Firefox, but they don't seem to work
			Janus.warn("Getting the " + stream + " volume unsupported by browser");
			return 0;
		}
	}

	function isMuted(handleId, video) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return true;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc) {
			Janus.warn("Invalid PeerConnection");
			return true;
		}
		if(!config.myStream) {
			Janus.warn("Invalid local MediaStream");
			return true;
		}
		if(video) {
			// Check video track
			if(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {
				Janus.warn("No video track");
				return true;
			}
			return !config.myStream.getVideoTracks()[0].enabled;
		} else {
			// Check audio track
			if(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {
				Janus.warn("No audio track");
				return true;
			}
			return !config.myStream.getAudioTracks()[0].enabled;
		}
	}

	function mute(handleId, video, mute) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return false;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc) {
			Janus.warn("Invalid PeerConnection");
			return false;
		}
		if(!config.myStream) {
			Janus.warn("Invalid local MediaStream");
			return false;
		}
		if(video) {
			// Mute/unmute video track
			if(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {
				Janus.warn("No video track");
				return false;
			}
			config.myStream.getVideoTracks()[0].enabled = !mute;
			return true;
		} else {
			// Mute/unmute audio track
			if(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {
				Janus.warn("No audio track");
				return false;
			}
			config.myStream.getAudioTracks()[0].enabled = !mute;
			return true;
		}
	}

	function getBitrate(handleId) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return "Invalid handle";
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc)
			return "Invalid PeerConnection";
		// Start getting the bitrate, if getStats is supported
		if(config.pc.getStats) {
			if(!config.bitrate.timer) {
				Janus.log("Starting bitrate timer (via getStats)");
				config.bitrate.timer = setInterval(function() {
					config.pc.getStats()
						.then(function(stats) {
							stats.forEach(function (res) {
								if(!res)
									return;
								var inStats = false;
								// Check if these are statistics on incoming media
								if((res.mediaType === "video" || res.id.toLowerCase().indexOf("video") > -1) &&
										res.type === "inbound-rtp" && res.id.indexOf("rtcp") < 0) {
									// New stats
									inStats = true;
								} else if(res.type == 'ssrc' && res.bytesReceived &&
										(res.googCodecName === "VP8" || res.googCodecName === "")) {
									// Older Chromer versions
									inStats = true;
								}
								// Parse stats now
								if(inStats) {
									config.bitrate.bsnow = res.bytesReceived;
									config.bitrate.tsnow = res.timestamp;
									if(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {
										// Skip this round
										config.bitrate.bsbefore = config.bitrate.bsnow;
										config.bitrate.tsbefore = config.bitrate.tsnow;
									} else {
										// Calculate bitrate
										var timePassed = config.bitrate.tsnow - config.bitrate.tsbefore;
										if(Janus.webRTCAdapter.browserDetails.browser === "safari")
											timePassed = timePassed/1000;	// Apparently the timestamp is in microseconds, in Safari
										var bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / timePassed);
										if(Janus.webRTCAdapter.browserDetails.browser === "safari")
											bitRate = parseInt(bitRate/1000);
										config.bitrate.value = bitRate + ' kbits/sec';
										//~ Janus.log("Estimated bitrate is " + config.bitrate.value);
										config.bitrate.bsbefore = config.bitrate.bsnow;
										config.bitrate.tsbefore = config.bitrate.tsnow;
									}
								}
							});
						});
				}, 1000);
				return "0 kbits/sec";	// We don't have a bitrate value yet
			}
			return config.bitrate.value;
		} else {
			Janus.warn("Getting the video bitrate unsupported by browser");
			return "Feature unsupported by browser";
		}
	}

	function webrtcError(error) {
		Janus.error("WebRTC error:", error);
	}

	function cleanupWebrtc(handleId, hangupRequest) {
		Janus.log("Cleaning WebRTC stuff");
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle) {
			// Nothing to clean
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(config) {
			if(hangupRequest === true) {
				// Send a hangup request (we don't really care about the response)
				var request = { "janus": "hangup", "transaction": Janus.randomString(12) };
				if(pluginHandle.token)
					request["token"] = pluginHandle.token;
				if(apisecret)
					request["apisecret"] = apisecret;
				Janus.debug("Sending hangup request (handle=" + handleId + "):");
				Janus.debug(request);
				if(websockets) {
					request["session_id"] = sessionId;
					request["handle_id"] = handleId;
					ws.send(JSON.stringify(request));
				} else {
					Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
						verb: 'POST',
						withCredentials: withCredentials,
						body: request
					});
				}
			}
			// Cleanup stack
			config.remoteStream = null;
			if(config.volume) {
				if(config.volume["local"] && config.volume["local"].timer)
					clearInterval(config.volume["local"].timer);
				if(config.volume["remote"] && config.volume["remote"].timer)
					clearInterval(config.volume["remote"].timer);
			}
			config.volume = {};
			if(config.bitrate.timer)
				clearInterval(config.bitrate.timer);
			config.bitrate.timer = null;
			config.bitrate.bsnow = null;
			config.bitrate.bsbefore = null;
			config.bitrate.tsnow = null;
			config.bitrate.tsbefore = null;
			config.bitrate.value = null;
			if(!config.streamExternal && config.myStream) {
				Janus.log("Stopping local stream tracks");
				Janus.stopAllTracks(config.myStream);
			}
			config.streamExternal = false;
			config.myStream = null;
			// Close PeerConnection
			try {
				config.pc.close();
			} catch(e) {
				// Do nothing
			}
			config.pc = null;
			config.candidates = null;
			config.mySdp = null;
			config.remoteSdp = null;
			config.iceDone = false;
			config.dataChannel = {};
			config.dtmfSender = null;
			config.senderTransforms = null;
			config.receiverTransforms = null;
		}
		pluginHandle.oncleanup();
	}

	// Helper method to munge an SDP to enable simulcasting (Chrome only)
	function mungeSdpForSimulcasting(sdp) {
		// Let's munge the SDP to add the attributes for enabling simulcasting
		// (based on https://gist.github.com/ggarber/a19b4c33510028b9c657)
		var lines = sdp.split("\r\n");
		var video = false;
		var ssrc = [ -1 ], ssrc_fid = [ -1 ];
		var cname = null, msid = null, mslabel = null, label = null;
		var insertAt = -1;
		for(let i=0; i<lines.length; i++) {
			const mline = lines[i].match(/m=(\w+) */);
			if(mline) {
				const medium = mline[1];
				if(medium === "video") {
					// New video m-line: make sure it's the first one
					if(ssrc[0] < 0) {
						video = true;
					} else {
						// We're done, let's add the new attributes here
						insertAt = i;
						break;
					}
				} else {
					// New non-video m-line: do we have what we were looking for?
					if(ssrc[0] > -1) {
						// We're done, let's add the new attributes here
						insertAt = i;
						break;
					}
				}
				continue;
			}
			if(!video)
				continue;
			var sim = lines[i].match(/a=ssrc-group:SIM (\d+) (\d+) (\d+)/);
			if(sim) {
				Janus.warn("The SDP already contains a SIM attribute, munging will be skipped");
				return sdp;
			}
			var fid = lines[i].match(/a=ssrc-group:FID (\d+) (\d+)/);
			if(fid) {
				ssrc[0] = fid[1];
				ssrc_fid[0] = fid[2];
				lines.splice(i, 1); i--;
				continue;
			}
			if(ssrc[0]) {
				var match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')
				if(match) {
					cname = match[1];
				}
				match = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')
				if(match) {
					msid = match[1];
				}
				match = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')
				if(match) {
					mslabel = match[1];
				}
				match = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')
				if(match) {
					label = match[1];
				}
				if(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {
					lines.splice(i, 1); i--;
					continue;
				}
				if(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {
					lines.splice(i, 1); i--;
					continue;
				}
			}
			if(lines[i].length == 0) {
				lines.splice(i, 1); i--;
				continue;
			}
		}
		if(ssrc[0] < 0) {
			// Couldn't find a FID attribute, let's just take the first video SSRC we find
			insertAt = -1;
			video = false;
			for(let i=0; i<lines.length; i++) {
				const mline = lines[i].match(/m=(\w+) */);
				if(mline) {
					const medium = mline[1];
					if(medium === "video") {
						// New video m-line: make sure it's the first one
						if(ssrc[0] < 0) {
							video = true;
						} else {
							// We're done, let's add the new attributes here
							insertAt = i;
							break;
						}
					} else {
						// New non-video m-line: do we have what we were looking for?
						if(ssrc[0] > -1) {
							// We're done, let's add the new attributes here
							insertAt = i;
							break;
						}
					}
					continue;
				}
				if(!video)
					continue;
				if(ssrc[0] < 0) {
					var value = lines[i].match(/a=ssrc:(\d+)/);
					if(value) {
						ssrc[0] = value[1];
						lines.splice(i, 1); i--;
						continue;
					}
				} else {
					let match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')
					if(match) {
						cname = match[1];
					}
					match = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')
					if(match) {
						msid = match[1];
					}
					match = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')
					if(match) {
						mslabel = match[1];
					}
					match = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')
					if(match) {
						label = match[1];
					}
					if(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {
						lines.splice(i, 1); i--;
						continue;
					}
					if(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {
						lines.splice(i, 1); i--;
						continue;
					}
				}
				if(lines[i].length === 0) {
					lines.splice(i, 1); i--;
					continue;
				}
			}
		}
		if(ssrc[0] < 0) {
			// Still nothing, let's just return the SDP we were asked to munge
			Janus.warn("Couldn't find the video SSRC, simulcasting NOT enabled");
			return sdp;
		}
		if(insertAt < 0) {
			// Append at the end
			insertAt = lines.length;
		}
		// Generate a couple of SSRCs (for retransmissions too)
		// Note: should we check if there are conflicts, here?
		ssrc[1] = Math.floor(Math.random()*0xFFFFFFFF);
		ssrc[2] = Math.floor(Math.random()*0xFFFFFFFF);
		ssrc_fid[1] = Math.floor(Math.random()*0xFFFFFFFF);
		ssrc_fid[2] = Math.floor(Math.random()*0xFFFFFFFF);
		// Add attributes to the SDP
		for(var i=0; i<ssrc.length; i++) {
			if(cname) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' cname:' + cname);
				insertAt++;
			}
			if(msid) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' msid:' + msid);
				insertAt++;
			}
			if(mslabel) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' mslabel:' + mslabel);
				insertAt++;
			}
			if(label) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' label:' + label);
				insertAt++;
			}
			// Add the same info for the retransmission SSRC
			if(cname) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' cname:' + cname);
				insertAt++;
			}
			if(msid) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' msid:' + msid);
				insertAt++;
			}
			if(mslabel) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' mslabel:' + mslabel);
				insertAt++;
			}
			if(label) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' label:' + label);
				insertAt++;
			}
		}
		lines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[2] + ' ' + ssrc_fid[2]);
		lines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[1] + ' ' + ssrc_fid[1]);
		lines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[0] + ' ' + ssrc_fid[0]);
		lines.splice(insertAt, 0, 'a=ssrc-group:SIM ' + ssrc[0] + ' ' + ssrc[1] + ' ' + ssrc[2]);
		sdp = lines.join("\r\n");
		if(!sdp.endsWith("\r\n"))
			sdp += "\r\n";
		return sdp;
	}

	// Helper methods to parse a media object
	function isAudioSendEnabled(media) {
		Janus.debug("isAudioSendEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.audio === false)
			return false;	// Generic audio has precedence
		if(media.audioSend === undefined || media.audioSend === null)
			return true;	// Default
		return (media.audioSend === true);
	}

	function isAudioSendRequired(media) {
		Janus.debug("isAudioSendRequired:", media);
		if(!media)
			return false;	// Default
		if(media.audio === false || media.audioSend === false)
			return false;	// If we're not asking to capture audio, it's not required
		if(media.failIfNoAudio === undefined || media.failIfNoAudio === null)
			return false;	// Default
		return (media.failIfNoAudio === true);
	}

	function isAudioRecvEnabled(media) {
		Janus.debug("isAudioRecvEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.audio === false)
			return false;	// Generic audio has precedence
		if(media.audioRecv === undefined || media.audioRecv === null)
			return true;	// Default
		return (media.audioRecv === true);
	}

	function isVideoSendEnabled(media) {
		Janus.debug("isVideoSendEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.video === false)
			return false;	// Generic video has precedence
		if(media.videoSend === undefined || media.videoSend === null)
			return true;	// Default
		return (media.videoSend === true);
	}

	function isVideoSendRequired(media) {
		Janus.debug("isVideoSendRequired:", media);
		if(!media)
			return false;	// Default
		if(media.video === false || media.videoSend === false)
			return false;	// If we're not asking to capture video, it's not required
		if(media.failIfNoVideo === undefined || media.failIfNoVideo === null)
			return false;	// Default
		return (media.failIfNoVideo === true);
	}

	function isVideoRecvEnabled(media) {
		Janus.debug("isVideoRecvEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.video === false)
			return false;	// Generic video has precedence
		if(media.videoRecv === undefined || media.videoRecv === null)
			return true;	// Default
		return (media.videoRecv === true);
	}

	function isScreenSendEnabled(media) {
		Janus.debug("isScreenSendEnabled:", media);
		if (!media)
			return false;
		if (typeof media.video !== 'object' || typeof media.video.mandatory !== 'object')
			return false;
		var constraints = media.video.mandatory;
		if (constraints.chromeMediaSource)
			return constraints.chromeMediaSource === 'desktop' || constraints.chromeMediaSource === 'screen';
		else if (constraints.mozMediaSource)
			return constraints.mozMediaSource === 'window' || constraints.mozMediaSource === 'screen';
		else if (constraints.mediaSource)
			return constraints.mediaSource === 'window' || constraints.mediaSource === 'screen';
		return false;
	}

	function isDataEnabled(media) {
		Janus.debug("isDataEnabled:", media);
		if(Janus.webRTCAdapter.browserDetails.browser === "edge") {
			Janus.warn("Edge doesn't support data channels yet");
			return false;
		}
		if(media === undefined || media === null)
			return false;	// Default
		return (media.data === true);
	}

	function isTrickleEnabled(trickle) {
		Janus.debug("isTrickleEnabled:", trickle);
		return (trickle === false) ? false : true;
	}
}

/*** EXPORTS FROM exports-loader ***/



/***/ }),

/***/ "./node_modules/pdfjs-dist/build/pdf.js":
/*!**********************************************!*\
  !*** ./node_modules/pdfjs-dist/build/pdf.js ***!
  \**********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ([
/* 0 */,
/* 1 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.VerbosityLevel = exports.Util = exports.UnknownErrorException = exports.UnexpectedResponseException = exports.UNSUPPORTED_FEATURES = exports.TextRenderingMode = exports.StreamType = exports.RenderingIntentFlag = exports.PermissionFlag = exports.PasswordResponses = exports.PasswordException = exports.PageActionEventType = exports.OPS = exports.MissingPDFException = exports.InvalidPDFException = exports.ImageKind = exports.IDENTITY_MATRIX = exports.FormatError = exports.FontType = exports.FeatureTest = exports.FONT_IDENTITY_MATRIX = exports.DocumentActionEventType = exports.CMapCompressionType = exports.BaseException = exports.AnnotationType = exports.AnnotationStateModelType = exports.AnnotationReviewState = exports.AnnotationReplyType = exports.AnnotationMode = exports.AnnotationMarkedState = exports.AnnotationFlag = exports.AnnotationFieldFlag = exports.AnnotationBorderStyleType = exports.AnnotationActionEventType = exports.AbortException = void 0;
exports.arrayByteLength = arrayByteLength;
exports.arraysToBytes = arraysToBytes;
exports.assert = assert;
exports.bytesToString = bytesToString;
exports.createPromiseCapability = createPromiseCapability;
exports.createValidAbsoluteUrl = createValidAbsoluteUrl;
exports.escapeString = escapeString;
exports.getModificationDate = getModificationDate;
exports.getVerbosityLevel = getVerbosityLevel;
exports.info = info;
exports.isArrayBuffer = isArrayBuffer;
exports.isArrayEqual = isArrayEqual;
exports.isAscii = isAscii;
exports.objectFromMap = objectFromMap;
exports.objectSize = objectSize;
exports.setVerbosityLevel = setVerbosityLevel;
exports.shadow = shadow;
exports.string32 = string32;
exports.stringToBytes = stringToBytes;
exports.stringToPDFString = stringToPDFString;
exports.stringToUTF16BEString = stringToUTF16BEString;
exports.stringToUTF8String = stringToUTF8String;
exports.unreachable = unreachable;
exports.utf8StringToString = utf8StringToString;
exports.warn = warn;

__w_pdfjs_require__(2);

const IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];
exports.IDENTITY_MATRIX = IDENTITY_MATRIX;
const FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];
exports.FONT_IDENTITY_MATRIX = FONT_IDENTITY_MATRIX;
const RenderingIntentFlag = {
  ANY: 0x01,
  DISPLAY: 0x02,
  PRINT: 0x04,
  ANNOTATIONS_FORMS: 0x10,
  ANNOTATIONS_STORAGE: 0x20,
  ANNOTATIONS_DISABLE: 0x40,
  OPLIST: 0x100
};
exports.RenderingIntentFlag = RenderingIntentFlag;
const AnnotationMode = {
  DISABLE: 0,
  ENABLE: 1,
  ENABLE_FORMS: 2,
  ENABLE_STORAGE: 3
};
exports.AnnotationMode = AnnotationMode;
const PermissionFlag = {
  PRINT: 0x04,
  MODIFY_CONTENTS: 0x08,
  COPY: 0x10,
  MODIFY_ANNOTATIONS: 0x20,
  FILL_INTERACTIVE_FORMS: 0x100,
  COPY_FOR_ACCESSIBILITY: 0x200,
  ASSEMBLE: 0x400,
  PRINT_HIGH_QUALITY: 0x800
};
exports.PermissionFlag = PermissionFlag;
const TextRenderingMode = {
  FILL: 0,
  STROKE: 1,
  FILL_STROKE: 2,
  INVISIBLE: 3,
  FILL_ADD_TO_PATH: 4,
  STROKE_ADD_TO_PATH: 5,
  FILL_STROKE_ADD_TO_PATH: 6,
  ADD_TO_PATH: 7,
  FILL_STROKE_MASK: 3,
  ADD_TO_PATH_FLAG: 4
};
exports.TextRenderingMode = TextRenderingMode;
const ImageKind = {
  GRAYSCALE_1BPP: 1,
  RGB_24BPP: 2,
  RGBA_32BPP: 3
};
exports.ImageKind = ImageKind;
const AnnotationType = {
  TEXT: 1,
  LINK: 2,
  FREETEXT: 3,
  LINE: 4,
  SQUARE: 5,
  CIRCLE: 6,
  POLYGON: 7,
  POLYLINE: 8,
  HIGHLIGHT: 9,
  UNDERLINE: 10,
  SQUIGGLY: 11,
  STRIKEOUT: 12,
  STAMP: 13,
  CARET: 14,
  INK: 15,
  POPUP: 16,
  FILEATTACHMENT: 17,
  SOUND: 18,
  MOVIE: 19,
  WIDGET: 20,
  SCREEN: 21,
  PRINTERMARK: 22,
  TRAPNET: 23,
  WATERMARK: 24,
  THREED: 25,
  REDACT: 26
};
exports.AnnotationType = AnnotationType;
const AnnotationStateModelType = {
  MARKED: "Marked",
  REVIEW: "Review"
};
exports.AnnotationStateModelType = AnnotationStateModelType;
const AnnotationMarkedState = {
  MARKED: "Marked",
  UNMARKED: "Unmarked"
};
exports.AnnotationMarkedState = AnnotationMarkedState;
const AnnotationReviewState = {
  ACCEPTED: "Accepted",
  REJECTED: "Rejected",
  CANCELLED: "Cancelled",
  COMPLETED: "Completed",
  NONE: "None"
};
exports.AnnotationReviewState = AnnotationReviewState;
const AnnotationReplyType = {
  GROUP: "Group",
  REPLY: "R"
};
exports.AnnotationReplyType = AnnotationReplyType;
const AnnotationFlag = {
  INVISIBLE: 0x01,
  HIDDEN: 0x02,
  PRINT: 0x04,
  NOZOOM: 0x08,
  NOROTATE: 0x10,
  NOVIEW: 0x20,
  READONLY: 0x40,
  LOCKED: 0x80,
  TOGGLENOVIEW: 0x100,
  LOCKEDCONTENTS: 0x200
};
exports.AnnotationFlag = AnnotationFlag;
const AnnotationFieldFlag = {
  READONLY: 0x0000001,
  REQUIRED: 0x0000002,
  NOEXPORT: 0x0000004,
  MULTILINE: 0x0001000,
  PASSWORD: 0x0002000,
  NOTOGGLETOOFF: 0x0004000,
  RADIO: 0x0008000,
  PUSHBUTTON: 0x0010000,
  COMBO: 0x0020000,
  EDIT: 0x0040000,
  SORT: 0x0080000,
  FILESELECT: 0x0100000,
  MULTISELECT: 0x0200000,
  DONOTSPELLCHECK: 0x0400000,
  DONOTSCROLL: 0x0800000,
  COMB: 0x1000000,
  RICHTEXT: 0x2000000,
  RADIOSINUNISON: 0x2000000,
  COMMITONSELCHANGE: 0x4000000
};
exports.AnnotationFieldFlag = AnnotationFieldFlag;
const AnnotationBorderStyleType = {
  SOLID: 1,
  DASHED: 2,
  BEVELED: 3,
  INSET: 4,
  UNDERLINE: 5
};
exports.AnnotationBorderStyleType = AnnotationBorderStyleType;
const AnnotationActionEventType = {
  E: "Mouse Enter",
  X: "Mouse Exit",
  D: "Mouse Down",
  U: "Mouse Up",
  Fo: "Focus",
  Bl: "Blur",
  PO: "PageOpen",
  PC: "PageClose",
  PV: "PageVisible",
  PI: "PageInvisible",
  K: "Keystroke",
  F: "Format",
  V: "Validate",
  C: "Calculate"
};
exports.AnnotationActionEventType = AnnotationActionEventType;
const DocumentActionEventType = {
  WC: "WillClose",
  WS: "WillSave",
  DS: "DidSave",
  WP: "WillPrint",
  DP: "DidPrint"
};
exports.DocumentActionEventType = DocumentActionEventType;
const PageActionEventType = {
  O: "PageOpen",
  C: "PageClose"
};
exports.PageActionEventType = PageActionEventType;
const StreamType = {
  UNKNOWN: "UNKNOWN",
  FLATE: "FLATE",
  LZW: "LZW",
  DCT: "DCT",
  JPX: "JPX",
  JBIG: "JBIG",
  A85: "A85",
  AHX: "AHX",
  CCF: "CCF",
  RLX: "RLX"
};
exports.StreamType = StreamType;
const FontType = {
  UNKNOWN: "UNKNOWN",
  TYPE1: "TYPE1",
  TYPE1STANDARD: "TYPE1STANDARD",
  TYPE1C: "TYPE1C",
  CIDFONTTYPE0: "CIDFONTTYPE0",
  CIDFONTTYPE0C: "CIDFONTTYPE0C",
  TRUETYPE: "TRUETYPE",
  CIDFONTTYPE2: "CIDFONTTYPE2",
  TYPE3: "TYPE3",
  OPENTYPE: "OPENTYPE",
  TYPE0: "TYPE0",
  MMTYPE1: "MMTYPE1"
};
exports.FontType = FontType;
const VerbosityLevel = {
  ERRORS: 0,
  WARNINGS: 1,
  INFOS: 5
};
exports.VerbosityLevel = VerbosityLevel;
const CMapCompressionType = {
  NONE: 0,
  BINARY: 1,
  STREAM: 2
};
exports.CMapCompressionType = CMapCompressionType;
const OPS = {
  dependency: 1,
  setLineWidth: 2,
  setLineCap: 3,
  setLineJoin: 4,
  setMiterLimit: 5,
  setDash: 6,
  setRenderingIntent: 7,
  setFlatness: 8,
  setGState: 9,
  save: 10,
  restore: 11,
  transform: 12,
  moveTo: 13,
  lineTo: 14,
  curveTo: 15,
  curveTo2: 16,
  curveTo3: 17,
  closePath: 18,
  rectangle: 19,
  stroke: 20,
  closeStroke: 21,
  fill: 22,
  eoFill: 23,
  fillStroke: 24,
  eoFillStroke: 25,
  closeFillStroke: 26,
  closeEOFillStroke: 27,
  endPath: 28,
  clip: 29,
  eoClip: 30,
  beginText: 31,
  endText: 32,
  setCharSpacing: 33,
  setWordSpacing: 34,
  setHScale: 35,
  setLeading: 36,
  setFont: 37,
  setTextRenderingMode: 38,
  setTextRise: 39,
  moveText: 40,
  setLeadingMoveText: 41,
  setTextMatrix: 42,
  nextLine: 43,
  showText: 44,
  showSpacedText: 45,
  nextLineShowText: 46,
  nextLineSetSpacingShowText: 47,
  setCharWidth: 48,
  setCharWidthAndBounds: 49,
  setStrokeColorSpace: 50,
  setFillColorSpace: 51,
  setStrokeColor: 52,
  setStrokeColorN: 53,
  setFillColor: 54,
  setFillColorN: 55,
  setStrokeGray: 56,
  setFillGray: 57,
  setStrokeRGBColor: 58,
  setFillRGBColor: 59,
  setStrokeCMYKColor: 60,
  setFillCMYKColor: 61,
  shadingFill: 62,
  beginInlineImage: 63,
  beginImageData: 64,
  endInlineImage: 65,
  paintXObject: 66,
  markPoint: 67,
  markPointProps: 68,
  beginMarkedContent: 69,
  beginMarkedContentProps: 70,
  endMarkedContent: 71,
  beginCompat: 72,
  endCompat: 73,
  paintFormXObjectBegin: 74,
  paintFormXObjectEnd: 75,
  beginGroup: 76,
  endGroup: 77,
  beginAnnotations: 78,
  endAnnotations: 79,
  beginAnnotation: 80,
  endAnnotation: 81,
  paintJpegXObject: 82,
  paintImageMaskXObject: 83,
  paintImageMaskXObjectGroup: 84,
  paintImageXObject: 85,
  paintInlineImageXObject: 86,
  paintInlineImageXObjectGroup: 87,
  paintImageXObjectRepeat: 88,
  paintImageMaskXObjectRepeat: 89,
  paintSolidColorImageMask: 90,
  constructPath: 91
};
exports.OPS = OPS;
const UNSUPPORTED_FEATURES = {
  unknown: "unknown",
  forms: "forms",
  javaScript: "javaScript",
  signatures: "signatures",
  smask: "smask",
  shadingPattern: "shadingPattern",
  font: "font",
  errorTilingPattern: "errorTilingPattern",
  errorExtGState: "errorExtGState",
  errorXObject: "errorXObject",
  errorFontLoadType3: "errorFontLoadType3",
  errorFontState: "errorFontState",
  errorFontMissing: "errorFontMissing",
  errorFontTranslate: "errorFontTranslate",
  errorColorSpace: "errorColorSpace",
  errorOperatorList: "errorOperatorList",
  errorFontToUnicode: "errorFontToUnicode",
  errorFontLoadNative: "errorFontLoadNative",
  errorFontBuildPath: "errorFontBuildPath",
  errorFontGetPath: "errorFontGetPath",
  errorMarkedContent: "errorMarkedContent",
  errorContentSubStream: "errorContentSubStream"
};
exports.UNSUPPORTED_FEATURES = UNSUPPORTED_FEATURES;
const PasswordResponses = {
  NEED_PASSWORD: 1,
  INCORRECT_PASSWORD: 2
};
exports.PasswordResponses = PasswordResponses;
let verbosity = VerbosityLevel.WARNINGS;

function setVerbosityLevel(level) {
  if (Number.isInteger(level)) {
    verbosity = level;
  }
}

function getVerbosityLevel() {
  return verbosity;
}

function info(msg) {
  if (verbosity >= VerbosityLevel.INFOS) {
    console.log(`Info: ${msg}`);
  }
}

function warn(msg) {
  if (verbosity >= VerbosityLevel.WARNINGS) {
    console.log(`Warning: ${msg}`);
  }
}

function unreachable(msg) {
  throw new Error(msg);
}

function assert(cond, msg) {
  if (!cond) {
    unreachable(msg);
  }
}

function _isValidProtocol(url) {
  if (!url) {
    return false;
  }

  switch (url.protocol) {
    case "http:":
    case "https:":
    case "ftp:":
    case "mailto:":
    case "tel:":
      return true;

    default:
      return false;
  }
}

function createValidAbsoluteUrl(url, baseUrl = null, options = null) {
  if (!url) {
    return null;
  }

  try {
    if (options && typeof url === "string") {
      if (options.addDefaultProtocol && url.startsWith("www.")) {
        const dots = url.match(/\./g);

        if (dots && dots.length >= 2) {
          url = `http://${url}`;
        }
      }

      if (options.tryConvertEncoding) {
        try {
          url = stringToUTF8String(url);
        } catch (ex) {}
      }
    }

    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);

    if (_isValidProtocol(absoluteUrl)) {
      return absoluteUrl;
    }
  } catch (ex) {}

  return null;
}

function shadow(obj, prop, value) {
  Object.defineProperty(obj, prop, {
    value,
    enumerable: true,
    configurable: true,
    writable: false
  });
  return value;
}

const BaseException = function BaseExceptionClosure() {
  function BaseException(message, name) {
    if (this.constructor === BaseException) {
      unreachable("Cannot initialize BaseException.");
    }

    this.message = message;
    this.name = name;
  }

  BaseException.prototype = new Error();
  BaseException.constructor = BaseException;
  return BaseException;
}();

exports.BaseException = BaseException;

class PasswordException extends BaseException {
  constructor(msg, code) {
    super(msg, "PasswordException");
    this.code = code;
  }

}

exports.PasswordException = PasswordException;

class UnknownErrorException extends BaseException {
  constructor(msg, details) {
    super(msg, "UnknownErrorException");
    this.details = details;
  }

}

exports.UnknownErrorException = UnknownErrorException;

class InvalidPDFException extends BaseException {
  constructor(msg) {
    super(msg, "InvalidPDFException");
  }

}

exports.InvalidPDFException = InvalidPDFException;

class MissingPDFException extends BaseException {
  constructor(msg) {
    super(msg, "MissingPDFException");
  }

}

exports.MissingPDFException = MissingPDFException;

class UnexpectedResponseException extends BaseException {
  constructor(msg, status) {
    super(msg, "UnexpectedResponseException");
    this.status = status;
  }

}

exports.UnexpectedResponseException = UnexpectedResponseException;

class FormatError extends BaseException {
  constructor(msg) {
    super(msg, "FormatError");
  }

}

exports.FormatError = FormatError;

class AbortException extends BaseException {
  constructor(msg) {
    super(msg, "AbortException");
  }

}

exports.AbortException = AbortException;

function bytesToString(bytes) {
  if (typeof bytes !== "object" || bytes === null || bytes.length === undefined) {
    unreachable("Invalid argument for bytesToString");
  }

  const length = bytes.length;
  const MAX_ARGUMENT_COUNT = 8192;

  if (length < MAX_ARGUMENT_COUNT) {
    return String.fromCharCode.apply(null, bytes);
  }

  const strBuf = [];

  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {
    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);
    const chunk = bytes.subarray(i, chunkEnd);
    strBuf.push(String.fromCharCode.apply(null, chunk));
  }

  return strBuf.join("");
}

function stringToBytes(str) {
  if (typeof str !== "string") {
    unreachable("Invalid argument for stringToBytes");
  }

  const length = str.length;
  const bytes = new Uint8Array(length);

  for (let i = 0; i < length; ++i) {
    bytes[i] = str.charCodeAt(i) & 0xff;
  }

  return bytes;
}

function arrayByteLength(arr) {
  if (arr.length !== undefined) {
    return arr.length;
  }

  if (arr.byteLength !== undefined) {
    return arr.byteLength;
  }

  unreachable("Invalid argument for arrayByteLength");
}

function arraysToBytes(arr) {
  const length = arr.length;

  if (length === 1 && arr[0] instanceof Uint8Array) {
    return arr[0];
  }

  let resultLength = 0;

  for (let i = 0; i < length; i++) {
    resultLength += arrayByteLength(arr[i]);
  }

  let pos = 0;
  const data = new Uint8Array(resultLength);

  for (let i = 0; i < length; i++) {
    let item = arr[i];

    if (!(item instanceof Uint8Array)) {
      if (typeof item === "string") {
        item = stringToBytes(item);
      } else {
        item = new Uint8Array(item);
      }
    }

    const itemLength = item.byteLength;
    data.set(item, pos);
    pos += itemLength;
  }

  return data;
}

function string32(value) {
  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);
}

function objectSize(obj) {
  return Object.keys(obj).length;
}

function objectFromMap(map) {
  const obj = Object.create(null);

  for (const [key, value] of map) {
    obj[key] = value;
  }

  return obj;
}

function isLittleEndian() {
  const buffer8 = new Uint8Array(4);
  buffer8[0] = 1;
  const view32 = new Uint32Array(buffer8.buffer, 0, 1);
  return view32[0] === 1;
}

function isEvalSupported() {
  try {
    new Function("");
    return true;
  } catch (e) {
    return false;
  }
}

class FeatureTest {
  static get isLittleEndian() {
    return shadow(this, "isLittleEndian", isLittleEndian());
  }

  static get isEvalSupported() {
    return shadow(this, "isEvalSupported", isEvalSupported());
  }

  static get isOffscreenCanvasSupported() {
    return shadow(this, "isOffscreenCanvasSupported", typeof OffscreenCanvas !== "undefined");
  }

}

exports.FeatureTest = FeatureTest;
const hexNumbers = [...Array(256).keys()].map(n => n.toString(16).padStart(2, "0"));

class Util {
  static makeHexColor(r, g, b) {
    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;
  }

  static scaleMinMax(transform, minMax) {
    let temp;

    if (transform[0]) {
      if (transform[0] < 0) {
        temp = minMax[0];
        minMax[0] = minMax[1];
        minMax[1] = temp;
      }

      minMax[0] *= transform[0];
      minMax[1] *= transform[0];

      if (transform[3] < 0) {
        temp = minMax[2];
        minMax[2] = minMax[3];
        minMax[3] = temp;
      }

      minMax[2] *= transform[3];
      minMax[3] *= transform[3];
    } else {
      temp = minMax[0];
      minMax[0] = minMax[2];
      minMax[2] = temp;
      temp = minMax[1];
      minMax[1] = minMax[3];
      minMax[3] = temp;

      if (transform[1] < 0) {
        temp = minMax[2];
        minMax[2] = minMax[3];
        minMax[3] = temp;
      }

      minMax[2] *= transform[1];
      minMax[3] *= transform[1];

      if (transform[2] < 0) {
        temp = minMax[0];
        minMax[0] = minMax[1];
        minMax[1] = temp;
      }

      minMax[0] *= transform[2];
      minMax[1] *= transform[2];
    }

    minMax[0] += transform[4];
    minMax[1] += transform[4];
    minMax[2] += transform[5];
    minMax[3] += transform[5];
  }

  static transform(m1, m2) {
    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];
  }

  static applyTransform(p, m) {
    const xt = p[0] * m[0] + p[1] * m[2] + m[4];
    const yt = p[0] * m[1] + p[1] * m[3] + m[5];
    return [xt, yt];
  }

  static applyInverseTransform(p, m) {
    const d = m[0] * m[3] - m[1] * m[2];
    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;
    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;
    return [xt, yt];
  }

  static getAxialAlignedBoundingBox(r, m) {
    const p1 = Util.applyTransform(r, m);
    const p2 = Util.applyTransform(r.slice(2, 4), m);
    const p3 = Util.applyTransform([r[0], r[3]], m);
    const p4 = Util.applyTransform([r[2], r[1]], m);
    return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];
  }

  static inverseTransform(m) {
    const d = m[0] * m[3] - m[1] * m[2];
    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];
  }

  static apply3dTransform(m, v) {
    return [m[0] * v[0] + m[1] * v[1] + m[2] * v[2], m[3] * v[0] + m[4] * v[1] + m[5] * v[2], m[6] * v[0] + m[7] * v[1] + m[8] * v[2]];
  }

  static singularValueDecompose2dScale(m) {
    const transpose = [m[0], m[2], m[1], m[3]];
    const a = m[0] * transpose[0] + m[1] * transpose[2];
    const b = m[0] * transpose[1] + m[1] * transpose[3];
    const c = m[2] * transpose[0] + m[3] * transpose[2];
    const d = m[2] * transpose[1] + m[3] * transpose[3];
    const first = (a + d) / 2;
    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;
    const sx = first + second || 1;
    const sy = first - second || 1;
    return [Math.sqrt(sx), Math.sqrt(sy)];
  }

  static normalizeRect(rect) {
    const r = rect.slice(0);

    if (rect[0] > rect[2]) {
      r[0] = rect[2];
      r[2] = rect[0];
    }

    if (rect[1] > rect[3]) {
      r[1] = rect[3];
      r[3] = rect[1];
    }

    return r;
  }

  static intersect(rect1, rect2) {
    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));
    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));

    if (xLow > xHigh) {
      return null;
    }

    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));
    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));

    if (yLow > yHigh) {
      return null;
    }

    return [xLow, yLow, xHigh, yHigh];
  }

  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3) {
    const tvalues = [],
          bounds = [[], []];
    let a, b, c, t, t1, t2, b2ac, sqrtb2ac;

    for (let i = 0; i < 2; ++i) {
      if (i === 0) {
        b = 6 * x0 - 12 * x1 + 6 * x2;
        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;
        c = 3 * x1 - 3 * x0;
      } else {
        b = 6 * y0 - 12 * y1 + 6 * y2;
        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;
        c = 3 * y1 - 3 * y0;
      }

      if (Math.abs(a) < 1e-12) {
        if (Math.abs(b) < 1e-12) {
          continue;
        }

        t = -c / b;

        if (0 < t && t < 1) {
          tvalues.push(t);
        }

        continue;
      }

      b2ac = b * b - 4 * c * a;
      sqrtb2ac = Math.sqrt(b2ac);

      if (b2ac < 0) {
        continue;
      }

      t1 = (-b + sqrtb2ac) / (2 * a);

      if (0 < t1 && t1 < 1) {
        tvalues.push(t1);
      }

      t2 = (-b - sqrtb2ac) / (2 * a);

      if (0 < t2 && t2 < 1) {
        tvalues.push(t2);
      }
    }

    let j = tvalues.length,
        mt;
    const jlen = j;

    while (j--) {
      t = tvalues[j];
      mt = 1 - t;
      bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;
      bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;
    }

    bounds[0][jlen] = x0;
    bounds[1][jlen] = y0;
    bounds[0][jlen + 1] = x3;
    bounds[1][jlen + 1] = y3;
    bounds[0].length = bounds[1].length = jlen + 2;
    return [Math.min(...bounds[0]), Math.min(...bounds[1]), Math.max(...bounds[0]), Math.max(...bounds[1])];
  }

}

exports.Util = Util;
const PDFStringTranslateTable = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac];

function stringToPDFString(str) {
  if (str[0] >= "\xEF") {
    let encoding;

    if (str[0] === "\xFE" && str[1] === "\xFF") {
      encoding = "utf-16be";
    } else if (str[0] === "\xFF" && str[1] === "\xFE") {
      encoding = "utf-16le";
    } else if (str[0] === "\xEF" && str[1] === "\xBB" && str[2] === "\xBF") {
      encoding = "utf-8";
    }

    if (encoding) {
      try {
        const decoder = new TextDecoder(encoding, {
          fatal: true
        });
        const buffer = stringToBytes(str);
        return decoder.decode(buffer);
      } catch (ex) {
        warn(`stringToPDFString: "${ex}".`);
      }
    }
  }

  const strBuf = [];

  for (let i = 0, ii = str.length; i < ii; i++) {
    const code = PDFStringTranslateTable[str.charCodeAt(i)];
    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));
  }

  return strBuf.join("");
}

function escapeString(str) {
  return str.replace(/([()\\\n\r])/g, match => {
    if (match === "\n") {
      return "\\n";
    } else if (match === "\r") {
      return "\\r";
    }

    return `\\${match}`;
  });
}

function isAscii(str) {
  return /^[\x00-\x7F]*$/.test(str);
}

function stringToUTF16BEString(str) {
  const buf = ["\xFE\xFF"];

  for (let i = 0, ii = str.length; i < ii; i++) {
    const char = str.charCodeAt(i);
    buf.push(String.fromCharCode(char >> 8 & 0xff), String.fromCharCode(char & 0xff));
  }

  return buf.join("");
}

function stringToUTF8String(str) {
  return decodeURIComponent(escape(str));
}

function utf8StringToString(str) {
  return unescape(encodeURIComponent(str));
}

function isArrayBuffer(v) {
  return typeof v === "object" && v !== null && v.byteLength !== undefined;
}

function isArrayEqual(arr1, arr2) {
  if (arr1.length !== arr2.length) {
    return false;
  }

  for (let i = 0, ii = arr1.length; i < ii; i++) {
    if (arr1[i] !== arr2[i]) {
      return false;
    }
  }

  return true;
}

function getModificationDate(date = new Date()) {
  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, "0"), date.getUTCDate().toString().padStart(2, "0"), date.getUTCHours().toString().padStart(2, "0"), date.getUTCMinutes().toString().padStart(2, "0"), date.getUTCSeconds().toString().padStart(2, "0")];
  return buffer.join("");
}

function createPromiseCapability() {
  const capability = Object.create(null);
  let isSettled = false;
  Object.defineProperty(capability, "settled", {
    get() {
      return isSettled;
    }

  });
  capability.promise = new Promise(function (resolve, reject) {
    capability.resolve = function (data) {
      isSettled = true;
      resolve(data);
    };

    capability.reject = function (reason) {
      isSettled = true;
      reject(reason);
    };
  });
  return capability;
}

/***/ }),
/* 2 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {



var _is_node = __w_pdfjs_require__(3);

;

/***/ }),
/* 3 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.isNodeJS = void 0;
const isNodeJS = typeof process === "object" && process + "" === "[object process]" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== "browser");
exports.isNodeJS = isNodeJS;

/***/ }),
/* 4 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.build = exports.RenderTask = exports.PDFWorkerUtil = exports.PDFWorker = exports.PDFPageProxy = exports.PDFDocumentProxy = exports.PDFDocumentLoadingTask = exports.PDFDataRangeTransport = exports.LoopbackPort = exports.DefaultStandardFontDataFactory = exports.DefaultCanvasFactory = exports.DefaultCMapReaderFactory = void 0;
exports.getDocument = getDocument;
exports.setPDFNetworkStreamFactory = setPDFNetworkStreamFactory;
exports.version = void 0;

var _util = __w_pdfjs_require__(1);

var _display_utils = __w_pdfjs_require__(5);

var _font_loader = __w_pdfjs_require__(7);

var _annotation_storage = __w_pdfjs_require__(8);

var _canvas = __w_pdfjs_require__(10);

var _worker_options = __w_pdfjs_require__(13);

var _is_node = __w_pdfjs_require__(3);

var _message_handler = __w_pdfjs_require__(14);

var _metadata = __w_pdfjs_require__(15);

var _optional_content_config = __w_pdfjs_require__(16);

var _transport_stream = __w_pdfjs_require__(17);

var _xfa_text = __w_pdfjs_require__(18);

const DEFAULT_RANGE_CHUNK_SIZE = 65536;
const RENDERING_CANCELLED_TIMEOUT = 100;
let DefaultCanvasFactory = _display_utils.DOMCanvasFactory;
exports.DefaultCanvasFactory = DefaultCanvasFactory;
let DefaultCMapReaderFactory = _display_utils.DOMCMapReaderFactory;
exports.DefaultCMapReaderFactory = DefaultCMapReaderFactory;
let DefaultStandardFontDataFactory = _display_utils.DOMStandardFontDataFactory;
exports.DefaultStandardFontDataFactory = DefaultStandardFontDataFactory;

if (_is_node.isNodeJS) {
  const {
    NodeCanvasFactory,
    NodeCMapReaderFactory,
    NodeStandardFontDataFactory
  } = __w_pdfjs_require__(19);

  exports.DefaultCanvasFactory = DefaultCanvasFactory = NodeCanvasFactory;
  exports.DefaultCMapReaderFactory = DefaultCMapReaderFactory = NodeCMapReaderFactory;
  exports.DefaultStandardFontDataFactory = DefaultStandardFontDataFactory = NodeStandardFontDataFactory;
}

let createPDFNetworkStream;

function setPDFNetworkStreamFactory(pdfNetworkStreamFactory) {
  createPDFNetworkStream = pdfNetworkStreamFactory;
}

function getDocument(src) {
  const task = new PDFDocumentLoadingTask();
  let source;

  if (typeof src === "string" || src instanceof URL) {
    source = {
      url: src
    };
  } else if ((0, _util.isArrayBuffer)(src)) {
    source = {
      data: src
    };
  } else if (src instanceof PDFDataRangeTransport) {
    source = {
      range: src
    };
  } else {
    if (typeof src !== "object") {
      throw new Error("Invalid parameter in getDocument, " + "need either string, URL, Uint8Array, or parameter object.");
    }

    if (!src.url && !src.data && !src.range) {
      throw new Error("Invalid parameter object: need either .data, .range or .url");
    }

    source = src;
  }

  const params = Object.create(null);
  let rangeTransport = null,
      worker = null;

  for (const key in source) {
    const value = source[key];

    switch (key) {
      case "url":
        if (typeof window !== "undefined") {
          try {
            params[key] = new URL(value, window.location).href;
            continue;
          } catch (ex) {
            (0, _util.warn)(`Cannot create valid URL: "${ex}".`);
          }
        } else if (typeof value === "string" || value instanceof URL) {
          params[key] = value.toString();
          continue;
        }

        throw new Error("Invalid PDF url data: " + "either string or URL-object is expected in the url property.");

      case "range":
        rangeTransport = value;
        continue;

      case "worker":
        worker = value;
        continue;

      case "data":
        if (_is_node.isNodeJS && typeof Buffer !== "undefined" && value instanceof Buffer) {
          params[key] = new Uint8Array(value);
        } else if (value instanceof Uint8Array) {
          break;
        } else if (typeof value === "string") {
          params[key] = (0, _util.stringToBytes)(value);
        } else if (typeof value === "object" && value !== null && !isNaN(value.length)) {
          params[key] = new Uint8Array(value);
        } else if ((0, _util.isArrayBuffer)(value)) {
          params[key] = new Uint8Array(value);
        } else {
          throw new Error("Invalid PDF binary data: either typed array, " + "string, or array-like object is expected in the data property.");
        }

        continue;
    }

    params[key] = value;
  }

  params.CMapReaderFactory = params.CMapReaderFactory || DefaultCMapReaderFactory;
  params.StandardFontDataFactory = params.StandardFontDataFactory || DefaultStandardFontDataFactory;
  params.ignoreErrors = params.stopAtErrors !== true;
  params.fontExtraProperties = params.fontExtraProperties === true;
  params.pdfBug = params.pdfBug === true;
  params.enableXfa = params.enableXfa === true;

  if (!Number.isInteger(params.rangeChunkSize) || params.rangeChunkSize < 1) {
    params.rangeChunkSize = DEFAULT_RANGE_CHUNK_SIZE;
  }

  if (typeof params.docBaseUrl !== "string" || (0, _display_utils.isDataScheme)(params.docBaseUrl)) {
    params.docBaseUrl = null;
  }

  if (!Number.isInteger(params.maxImageSize) || params.maxImageSize < -1) {
    params.maxImageSize = -1;
  }

  if (typeof params.cMapUrl !== "string") {
    params.cMapUrl = null;
  }

  if (typeof params.standardFontDataUrl !== "string") {
    params.standardFontDataUrl = null;
  }

  if (typeof params.useWorkerFetch !== "boolean") {
    params.useWorkerFetch = params.CMapReaderFactory === _display_utils.DOMCMapReaderFactory && params.StandardFontDataFactory === _display_utils.DOMStandardFontDataFactory;
  }

  if (typeof params.isEvalSupported !== "boolean") {
    params.isEvalSupported = true;
  }

  if (typeof params.disableFontFace !== "boolean") {
    params.disableFontFace = _is_node.isNodeJS;
  }

  if (typeof params.useSystemFonts !== "boolean") {
    params.useSystemFonts = !_is_node.isNodeJS && !params.disableFontFace;
  }

  if (typeof params.ownerDocument !== "object" || params.ownerDocument === null) {
    params.ownerDocument = globalThis.document;
  }

  if (typeof params.disableRange !== "boolean") {
    params.disableRange = false;
  }

  if (typeof params.disableStream !== "boolean") {
    params.disableStream = false;
  }

  if (typeof params.disableAutoFetch !== "boolean") {
    params.disableAutoFetch = false;
  }

  (0, _util.setVerbosityLevel)(params.verbosity);

  if (!worker) {
    const workerParams = {
      verbosity: params.verbosity,
      port: _worker_options.GlobalWorkerOptions.workerPort
    };
    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);
    task._worker = worker;
  }

  const docId = task.docId;
  worker.promise.then(function () {
    if (task.destroyed) {
      throw new Error("Loading aborted");
    }

    const workerIdPromise = _fetchDocument(worker, params, rangeTransport, docId);

    const networkStreamPromise = new Promise(function (resolve) {
      let networkStream;

      if (rangeTransport) {
        networkStream = new _transport_stream.PDFDataTransportStream({
          length: params.length,
          initialData: params.initialData,
          progressiveDone: params.progressiveDone,
          contentDispositionFilename: params.contentDispositionFilename,
          disableRange: params.disableRange,
          disableStream: params.disableStream
        }, rangeTransport);
      } else if (!params.data) {
        networkStream = createPDFNetworkStream({
          url: params.url,
          length: params.length,
          httpHeaders: params.httpHeaders,
          withCredentials: params.withCredentials,
          rangeChunkSize: params.rangeChunkSize,
          disableRange: params.disableRange,
          disableStream: params.disableStream
        });
      }

      resolve(networkStream);
    });
    return Promise.all([workerIdPromise, networkStreamPromise]).then(function ([workerId, networkStream]) {
      if (task.destroyed) {
        throw new Error("Loading aborted");
      }

      const messageHandler = new _message_handler.MessageHandler(docId, workerId, worker.port);
      const transport = new WorkerTransport(messageHandler, task, networkStream, params);
      task._transport = transport;
      messageHandler.send("Ready", null);
    });
  }).catch(task._capability.reject);
  return task;
}

async function _fetchDocument(worker, source, pdfDataRangeTransport, docId) {
  if (worker.destroyed) {
    throw new Error("Worker was destroyed");
  }

  if (pdfDataRangeTransport) {
    source.length = pdfDataRangeTransport.length;
    source.initialData = pdfDataRangeTransport.initialData;
    source.progressiveDone = pdfDataRangeTransport.progressiveDone;
    source.contentDispositionFilename = pdfDataRangeTransport.contentDispositionFilename;
  }

  const workerId = await worker.messageHandler.sendWithPromise("GetDocRequest", {
    docId,
    apiVersion: '2.14.305',
    source: {
      data: source.data,
      url: source.url,
      password: source.password,
      disableAutoFetch: source.disableAutoFetch,
      rangeChunkSize: source.rangeChunkSize,
      length: source.length
    },
    maxImageSize: source.maxImageSize,
    disableFontFace: source.disableFontFace,
    docBaseUrl: source.docBaseUrl,
    ignoreErrors: source.ignoreErrors,
    isEvalSupported: source.isEvalSupported,
    fontExtraProperties: source.fontExtraProperties,
    enableXfa: source.enableXfa,
    useSystemFonts: source.useSystemFonts,
    cMapUrl: source.useWorkerFetch ? source.cMapUrl : null,
    standardFontDataUrl: source.useWorkerFetch ? source.standardFontDataUrl : null
  });

  if (worker.destroyed) {
    throw new Error("Worker was destroyed");
  }

  return workerId;
}

class PDFDocumentLoadingTask {
  static #docId = 0;

  constructor() {
    this._capability = (0, _util.createPromiseCapability)();
    this._transport = null;
    this._worker = null;
    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;
    this.destroyed = false;
    this.onPassword = null;
    this.onProgress = null;
    this.onUnsupportedFeature = null;
  }

  get promise() {
    return this._capability.promise;
  }

  async destroy() {
    this.destroyed = true;
    await this._transport?.destroy();
    this._transport = null;

    if (this._worker) {
      this._worker.destroy();

      this._worker = null;
    }
  }

}

exports.PDFDocumentLoadingTask = PDFDocumentLoadingTask;

class PDFDataRangeTransport {
  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {
    this.length = length;
    this.initialData = initialData;
    this.progressiveDone = progressiveDone;
    this.contentDispositionFilename = contentDispositionFilename;
    this._rangeListeners = [];
    this._progressListeners = [];
    this._progressiveReadListeners = [];
    this._progressiveDoneListeners = [];
    this._readyCapability = (0, _util.createPromiseCapability)();
  }

  addRangeListener(listener) {
    this._rangeListeners.push(listener);
  }

  addProgressListener(listener) {
    this._progressListeners.push(listener);
  }

  addProgressiveReadListener(listener) {
    this._progressiveReadListeners.push(listener);
  }

  addProgressiveDoneListener(listener) {
    this._progressiveDoneListeners.push(listener);
  }

  onDataRange(begin, chunk) {
    for (const listener of this._rangeListeners) {
      listener(begin, chunk);
    }
  }

  onDataProgress(loaded, total) {
    this._readyCapability.promise.then(() => {
      for (const listener of this._progressListeners) {
        listener(loaded, total);
      }
    });
  }

  onDataProgressiveRead(chunk) {
    this._readyCapability.promise.then(() => {
      for (const listener of this._progressiveReadListeners) {
        listener(chunk);
      }
    });
  }

  onDataProgressiveDone() {
    this._readyCapability.promise.then(() => {
      for (const listener of this._progressiveDoneListeners) {
        listener();
      }
    });
  }

  transportReady() {
    this._readyCapability.resolve();
  }

  requestDataRange(begin, end) {
    (0, _util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange");
  }

  abort() {}

}

exports.PDFDataRangeTransport = PDFDataRangeTransport;

class PDFDocumentProxy {
  constructor(pdfInfo, transport) {
    this._pdfInfo = pdfInfo;
    this._transport = transport;
    Object.defineProperty(this, "fingerprint", {
      get() {
        (0, _display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, " + "please use `PDFDocumentProxy.fingerprints` instead.");
        return this.fingerprints[0];
      }

    });
    Object.defineProperty(this, "getStats", {
      value: async () => {
        (0, _display_utils.deprecated)("`PDFDocumentProxy.getStats`, " + "please use the `PDFDocumentProxy.stats`-getter instead.");
        return this.stats || {
          streamTypes: {},
          fontTypes: {}
        };
      }
    });
  }

  get annotationStorage() {
    return this._transport.annotationStorage;
  }

  get numPages() {
    return this._pdfInfo.numPages;
  }

  get fingerprints() {
    return this._pdfInfo.fingerprints;
  }

  get stats() {
    return this._transport.stats;
  }

  get isPureXfa() {
    return !!this._transport._htmlForXfa;
  }

  get allXfaHtml() {
    return this._transport._htmlForXfa;
  }

  getPage(pageNumber) {
    return this._transport.getPage(pageNumber);
  }

  getPageIndex(ref) {
    return this._transport.getPageIndex(ref);
  }

  getDestinations() {
    return this._transport.getDestinations();
  }

  getDestination(id) {
    return this._transport.getDestination(id);
  }

  getPageLabels() {
    return this._transport.getPageLabels();
  }

  getPageLayout() {
    return this._transport.getPageLayout();
  }

  getPageMode() {
    return this._transport.getPageMode();
  }

  getViewerPreferences() {
    return this._transport.getViewerPreferences();
  }

  getOpenAction() {
    return this._transport.getOpenAction();
  }

  getAttachments() {
    return this._transport.getAttachments();
  }

  getJavaScript() {
    return this._transport.getJavaScript();
  }

  getJSActions() {
    return this._transport.getDocJSActions();
  }

  getOutline() {
    return this._transport.getOutline();
  }

  getOptionalContentConfig() {
    return this._transport.getOptionalContentConfig();
  }

  getPermissions() {
    return this._transport.getPermissions();
  }

  getMetadata() {
    return this._transport.getMetadata();
  }

  getMarkInfo() {
    return this._transport.getMarkInfo();
  }

  getData() {
    return this._transport.getData();
  }

  getDownloadInfo() {
    return this._transport.downloadInfoCapability.promise;
  }

  cleanup(keepLoadedFonts = false) {
    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);
  }

  destroy() {
    return this.loadingTask.destroy();
  }

  get loadingParams() {
    return this._transport.loadingParams;
  }

  get loadingTask() {
    return this._transport.loadingTask;
  }

  saveDocument() {
    if (this._transport.annotationStorage.size <= 0) {
      (0, _display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, " + "please use the getData-method instead.");
    }

    return this._transport.saveDocument();
  }

  getFieldObjects() {
    return this._transport.getFieldObjects();
  }

  hasJSActions() {
    return this._transport.hasJSActions();
  }

  getCalculationOrderIds() {
    return this._transport.getCalculationOrderIds();
  }

}

exports.PDFDocumentProxy = PDFDocumentProxy;

class PDFPageProxy {
  constructor(pageIndex, pageInfo, transport, ownerDocument, pdfBug = false) {
    this._pageIndex = pageIndex;
    this._pageInfo = pageInfo;
    this._ownerDocument = ownerDocument;
    this._transport = transport;
    this._stats = pdfBug ? new _display_utils.StatTimer() : null;
    this._pdfBug = pdfBug;
    this.commonObjs = transport.commonObjs;
    this.objs = new PDFObjects();
    this._bitmaps = new Set();
    this.cleanupAfterRender = false;
    this.pendingCleanup = false;
    this._intentStates = new Map();
    this._annotationPromises = new Map();
    this.destroyed = false;
  }

  get pageNumber() {
    return this._pageIndex + 1;
  }

  get rotate() {
    return this._pageInfo.rotate;
  }

  get ref() {
    return this._pageInfo.ref;
  }

  get userUnit() {
    return this._pageInfo.userUnit;
  }

  get view() {
    return this._pageInfo.view;
  }

  getViewport({
    scale,
    rotation = this.rotate,
    offsetX = 0,
    offsetY = 0,
    dontFlip = false
  } = {}) {
    return new _display_utils.PageViewport({
      viewBox: this.view,
      scale,
      rotation,
      offsetX,
      offsetY,
      dontFlip
    });
  }

  getAnnotations({
    intent = "display"
  } = {}) {
    const intentArgs = this._transport.getRenderingIntent(intent);

    let promise = this._annotationPromises.get(intentArgs.cacheKey);

    if (!promise) {
      promise = this._transport.getAnnotations(this._pageIndex, intentArgs.renderingIntent);

      this._annotationPromises.set(intentArgs.cacheKey, promise);

      promise = promise.then(annotations => {
        for (const annotation of annotations) {
          if (annotation.titleObj !== undefined) {
            Object.defineProperty(annotation, "title", {
              get() {
                (0, _display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead.");
                return annotation.titleObj.str;
              }

            });
          }

          if (annotation.contentsObj !== undefined) {
            Object.defineProperty(annotation, "contents", {
              get() {
                (0, _display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead.");
                return annotation.contentsObj.str;
              }

            });
          }
        }

        return annotations;
      });
    }

    return promise;
  }

  getJSActions() {
    return this._jsActionsPromise ||= this._transport.getPageJSActions(this._pageIndex);
  }

  async getXfa() {
    return this._transport._htmlForXfa?.children[this._pageIndex] || null;
  }

  render({
    canvasContext,
    viewport,
    intent = "display",
    annotationMode = _util.AnnotationMode.ENABLE,
    transform = null,
    imageLayer = null,
    canvasFactory = null,
    background = null,
    optionalContentConfigPromise = null,
    annotationCanvasMap = null,
    pageColors = null
  }) {
    if (arguments[0]?.renderInteractiveForms !== undefined) {
      (0, _display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, " + "please use the `annotationMode`-option instead.");

      if (arguments[0].renderInteractiveForms === true && annotationMode === _util.AnnotationMode.ENABLE) {
        annotationMode = _util.AnnotationMode.ENABLE_FORMS;
      }
    }

    if (arguments[0]?.includeAnnotationStorage !== undefined) {
      (0, _display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, " + "please use the `annotationMode`-option instead.");

      if (arguments[0].includeAnnotationStorage === true && annotationMode === _util.AnnotationMode.ENABLE) {
        annotationMode = _util.AnnotationMode.ENABLE_STORAGE;
      }
    }

    if (this._stats) {
      this._stats.time("Overall");
    }

    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode);

    this.pendingCleanup = false;

    if (!optionalContentConfigPromise) {
      optionalContentConfigPromise = this._transport.getOptionalContentConfig();
    }

    let intentState = this._intentStates.get(intentArgs.cacheKey);

    if (!intentState) {
      intentState = Object.create(null);

      this._intentStates.set(intentArgs.cacheKey, intentState);
    }

    if (intentState.streamReaderCancelTimeout) {
      clearTimeout(intentState.streamReaderCancelTimeout);
      intentState.streamReaderCancelTimeout = null;
    }

    const canvasFactoryInstance = canvasFactory || new DefaultCanvasFactory({
      ownerDocument: this._ownerDocument
    });
    const intentPrint = !!(intentArgs.renderingIntent & _util.RenderingIntentFlag.PRINT);

    if (!intentState.displayReadyCapability) {
      intentState.displayReadyCapability = (0, _util.createPromiseCapability)();
      intentState.operatorList = {
        fnArray: [],
        argsArray: [],
        lastChunk: false
      };

      if (this._stats) {
        this._stats.time("Page Request");
      }

      this._pumpOperatorList(intentArgs);
    }

    const complete = error => {
      intentState.renderTasks.delete(internalRenderTask);

      if (this.cleanupAfterRender || intentPrint) {
        this.pendingCleanup = true;
      }

      this._tryCleanup();

      if (error) {
        internalRenderTask.capability.reject(error);

        this._abortOperatorList({
          intentState,
          reason: error instanceof Error ? error : new Error(error)
        });
      } else {
        internalRenderTask.capability.resolve();
      }

      if (this._stats) {
        this._stats.timeEnd("Rendering");

        this._stats.timeEnd("Overall");
      }
    };

    const internalRenderTask = new InternalRenderTask({
      callback: complete,
      params: {
        canvasContext,
        viewport,
        transform,
        imageLayer,
        background
      },
      objs: this.objs,
      commonObjs: this.commonObjs,
      annotationCanvasMap,
      operatorList: intentState.operatorList,
      pageIndex: this._pageIndex,
      canvasFactory: canvasFactoryInstance,
      useRequestAnimationFrame: !intentPrint,
      pdfBug: this._pdfBug,
      pageColors
    });
    (intentState.renderTasks ||= new Set()).add(internalRenderTask);
    const renderTask = internalRenderTask.task;
    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {
      if (this.pendingCleanup) {
        complete();
        return;
      }

      if (this._stats) {
        this._stats.time("Rendering");
      }

      internalRenderTask.initializeGraphics({
        transparency,
        optionalContentConfig
      });
      internalRenderTask.operatorListChanged();
    }).catch(complete);
    return renderTask;
  }

  getOperatorList({
    intent = "display",
    annotationMode = _util.AnnotationMode.ENABLE
  } = {}) {
    function operatorListChanged() {
      if (intentState.operatorList.lastChunk) {
        intentState.opListReadCapability.resolve(intentState.operatorList);
        intentState.renderTasks.delete(opListTask);
      }
    }

    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, true);

    let intentState = this._intentStates.get(intentArgs.cacheKey);

    if (!intentState) {
      intentState = Object.create(null);

      this._intentStates.set(intentArgs.cacheKey, intentState);
    }

    let opListTask;

    if (!intentState.opListReadCapability) {
      opListTask = Object.create(null);
      opListTask.operatorListChanged = operatorListChanged;
      intentState.opListReadCapability = (0, _util.createPromiseCapability)();
      (intentState.renderTasks ||= new Set()).add(opListTask);
      intentState.operatorList = {
        fnArray: [],
        argsArray: [],
        lastChunk: false
      };

      if (this._stats) {
        this._stats.time("Page Request");
      }

      this._pumpOperatorList(intentArgs);
    }

    return intentState.opListReadCapability.promise;
  }

  streamTextContent({
    disableCombineTextItems = false,
    includeMarkedContent = false
  } = {}) {
    const TEXT_CONTENT_CHUNK_SIZE = 100;
    return this._transport.messageHandler.sendWithStream("GetTextContent", {
      pageIndex: this._pageIndex,
      combineTextItems: disableCombineTextItems !== true,
      includeMarkedContent: includeMarkedContent === true
    }, {
      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,

      size(textContent) {
        return textContent.items.length;
      }

    });
  }

  getTextContent(params = {}) {
    if (this._transport._htmlForXfa) {
      return this.getXfa().then(xfa => {
        return _xfa_text.XfaText.textContent(xfa);
      });
    }

    const readableStream = this.streamTextContent(params);
    return new Promise(function (resolve, reject) {
      function pump() {
        reader.read().then(function ({
          value,
          done
        }) {
          if (done) {
            resolve(textContent);
            return;
          }

          Object.assign(textContent.styles, value.styles);
          textContent.items.push(...value.items);
          pump();
        }, reject);
      }

      const reader = readableStream.getReader();
      const textContent = {
        items: [],
        styles: Object.create(null)
      };
      pump();
    });
  }

  getStructTree() {
    return this._structTreePromise ||= this._transport.getStructTree(this._pageIndex);
  }

  _destroy() {
    this.destroyed = true;
    const waitOn = [];

    for (const intentState of this._intentStates.values()) {
      this._abortOperatorList({
        intentState,
        reason: new Error("Page was destroyed."),
        force: true
      });

      if (intentState.opListReadCapability) {
        continue;
      }

      for (const internalRenderTask of intentState.renderTasks) {
        waitOn.push(internalRenderTask.completed);
        internalRenderTask.cancel();
      }
    }

    this.objs.clear();

    for (const bitmap of this._bitmaps) {
      bitmap.close();
    }

    this._bitmaps.clear();

    this._annotationPromises.clear();

    this._jsActionsPromise = null;
    this._structTreePromise = null;
    this.pendingCleanup = false;
    return Promise.all(waitOn);
  }

  cleanup(resetStats = false) {
    this.pendingCleanup = true;
    return this._tryCleanup(resetStats);
  }

  _tryCleanup(resetStats = false) {
    if (!this.pendingCleanup) {
      return false;
    }

    for (const {
      renderTasks,
      operatorList
    } of this._intentStates.values()) {
      if (renderTasks.size > 0 || !operatorList.lastChunk) {
        return false;
      }
    }

    this._intentStates.clear();

    this.objs.clear();

    this._annotationPromises.clear();

    this._jsActionsPromise = null;
    this._structTreePromise = null;

    if (resetStats && this._stats) {
      this._stats = new _display_utils.StatTimer();
    }

    for (const bitmap of this._bitmaps) {
      bitmap.close();
    }

    this._bitmaps.clear();

    this.pendingCleanup = false;
    return true;
  }

  _startRenderPage(transparency, cacheKey) {
    const intentState = this._intentStates.get(cacheKey);

    if (!intentState) {
      return;
    }

    if (this._stats) {
      this._stats.timeEnd("Page Request");
    }

    if (intentState.displayReadyCapability) {
      intentState.displayReadyCapability.resolve(transparency);
    }
  }

  _renderPageChunk(operatorListChunk, intentState) {
    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {
      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);
      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);
    }

    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;

    for (const internalRenderTask of intentState.renderTasks) {
      internalRenderTask.operatorListChanged();
    }

    if (operatorListChunk.lastChunk) {
      this._tryCleanup();
    }
  }

  _pumpOperatorList({
    renderingIntent,
    cacheKey
  }) {
    const readableStream = this._transport.messageHandler.sendWithStream("GetOperatorList", {
      pageIndex: this._pageIndex,
      intent: renderingIntent,
      cacheKey,
      annotationStorage: renderingIntent & _util.RenderingIntentFlag.ANNOTATIONS_STORAGE ? this._transport.annotationStorage.serializable : null
    });

    const reader = readableStream.getReader();

    const intentState = this._intentStates.get(cacheKey);

    intentState.streamReader = reader;

    const pump = () => {
      reader.read().then(({
        value,
        done
      }) => {
        if (done) {
          intentState.streamReader = null;
          return;
        }

        if (this._transport.destroyed) {
          return;
        }

        this._renderPageChunk(value, intentState);

        pump();
      }, reason => {
        intentState.streamReader = null;

        if (this._transport.destroyed) {
          return;
        }

        if (intentState.operatorList) {
          intentState.operatorList.lastChunk = true;

          for (const internalRenderTask of intentState.renderTasks) {
            internalRenderTask.operatorListChanged();
          }

          this._tryCleanup();
        }

        if (intentState.displayReadyCapability) {
          intentState.displayReadyCapability.reject(reason);
        } else if (intentState.opListReadCapability) {
          intentState.opListReadCapability.reject(reason);
        } else {
          throw reason;
        }
      });
    };

    pump();
  }

  _abortOperatorList({
    intentState,
    reason,
    force = false
  }) {
    if (!intentState.streamReader) {
      return;
    }

    if (!force) {
      if (intentState.renderTasks.size > 0) {
        return;
      }

      if (reason instanceof _display_utils.RenderingCancelledException) {
        intentState.streamReaderCancelTimeout = setTimeout(() => {
          this._abortOperatorList({
            intentState,
            reason,
            force: true
          });

          intentState.streamReaderCancelTimeout = null;
        }, RENDERING_CANCELLED_TIMEOUT);
        return;
      }
    }

    intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(() => {});
    intentState.streamReader = null;

    if (this._transport.destroyed) {
      return;
    }

    for (const [curCacheKey, curIntentState] of this._intentStates) {
      if (curIntentState === intentState) {
        this._intentStates.delete(curCacheKey);

        break;
      }
    }

    this.cleanup();
  }

  get stats() {
    return this._stats;
  }

}

exports.PDFPageProxy = PDFPageProxy;

class LoopbackPort {
  constructor() {
    this._listeners = [];
    this._deferred = Promise.resolve();
  }

  postMessage(obj, transfers) {
    const event = {
      data: structuredClone(obj, transfers)
    };

    this._deferred.then(() => {
      for (const listener of this._listeners) {
        listener.call(this, event);
      }
    });
  }

  addEventListener(name, listener) {
    this._listeners.push(listener);
  }

  removeEventListener(name, listener) {
    const i = this._listeners.indexOf(listener);

    this._listeners.splice(i, 1);
  }

  terminate() {
    this._listeners.length = 0;
  }

}

exports.LoopbackPort = LoopbackPort;
const PDFWorkerUtil = {
  isWorkerDisabled: false,
  fallbackWorkerSrc: null,
  fakeWorkerId: 0
};
exports.PDFWorkerUtil = PDFWorkerUtil;
{
  if (_is_node.isNodeJS && "function" === "function") {
    PDFWorkerUtil.isWorkerDisabled = true;
    PDFWorkerUtil.fallbackWorkerSrc = "./pdf.worker.js";
  } else if (typeof document === "object") {
    const pdfjsFilePath = document?.currentScript?.src;

    if (pdfjsFilePath) {
      PDFWorkerUtil.fallbackWorkerSrc = pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i, ".worker$1$2");
    }
  }

  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {
    let base;

    try {
      base = new URL(baseUrl);

      if (!base.origin || base.origin === "null") {
        return false;
      }
    } catch (e) {
      return false;
    }

    const other = new URL(otherUrl, base);
    return base.origin === other.origin;
  };

  PDFWorkerUtil.createCDNWrapper = function (url) {
    const wrapper = `importScripts("${url}");`;
    return URL.createObjectURL(new Blob([wrapper]));
  };
}

class PDFWorker {
  static #workerPorts = new WeakMap();

  constructor({
    name = null,
    port = null,
    verbosity = (0, _util.getVerbosityLevel)()
  } = {}) {
    if (port && PDFWorker.#workerPorts.has(port)) {
      throw new Error("Cannot use more than one PDFWorker per port.");
    }

    this.name = name;
    this.destroyed = false;
    this.verbosity = verbosity;
    this._readyCapability = (0, _util.createPromiseCapability)();
    this._port = null;
    this._webWorker = null;
    this._messageHandler = null;

    if (port) {
      PDFWorker.#workerPorts.set(port, this);

      this._initializeFromPort(port);

      return;
    }

    this._initialize();
  }

  get promise() {
    return this._readyCapability.promise;
  }

  get port() {
    return this._port;
  }

  get messageHandler() {
    return this._messageHandler;
  }

  _initializeFromPort(port) {
    this._port = port;
    this._messageHandler = new _message_handler.MessageHandler("main", "worker", port);

    this._messageHandler.on("ready", function () {});

    this._readyCapability.resolve();
  }

  _initialize() {
    if (typeof Worker !== "undefined" && !PDFWorkerUtil.isWorkerDisabled && !PDFWorker._mainThreadWorkerMessageHandler) {
      let workerSrc = PDFWorker.workerSrc;

      try {
        if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {
          workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);
        }

        const worker = new Worker(workerSrc);
        const messageHandler = new _message_handler.MessageHandler("main", "worker", worker);

        const terminateEarly = () => {
          worker.removeEventListener("error", onWorkerError);
          messageHandler.destroy();
          worker.terminate();

          if (this.destroyed) {
            this._readyCapability.reject(new Error("Worker was destroyed"));
          } else {
            this._setupFakeWorker();
          }
        };

        const onWorkerError = () => {
          if (!this._webWorker) {
            terminateEarly();
          }
        };

        worker.addEventListener("error", onWorkerError);
        messageHandler.on("test", data => {
          worker.removeEventListener("error", onWorkerError);

          if (this.destroyed) {
            terminateEarly();
            return;
          }

          if (data) {
            this._messageHandler = messageHandler;
            this._port = worker;
            this._webWorker = worker;

            this._readyCapability.resolve();

            messageHandler.send("configure", {
              verbosity: this.verbosity
            });
          } else {
            this._setupFakeWorker();

            messageHandler.destroy();
            worker.terminate();
          }
        });
        messageHandler.on("ready", data => {
          worker.removeEventListener("error", onWorkerError);

          if (this.destroyed) {
            terminateEarly();
            return;
          }

          try {
            sendTest();
          } catch (e) {
            this._setupFakeWorker();
          }
        });

        const sendTest = () => {
          const testObj = new Uint8Array();
          messageHandler.send("test", testObj, [testObj.buffer]);
        };

        sendTest();
        return;
      } catch (e) {
        (0, _util.info)("The worker has been disabled.");
      }
    }

    this._setupFakeWorker();
  }

  _setupFakeWorker() {
    if (!PDFWorkerUtil.isWorkerDisabled) {
      (0, _util.warn)("Setting up fake worker.");
      PDFWorkerUtil.isWorkerDisabled = true;
    }

    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {
      if (this.destroyed) {
        this._readyCapability.reject(new Error("Worker was destroyed"));

        return;
      }

      const port = new LoopbackPort();
      this._port = port;
      const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;
      const workerHandler = new _message_handler.MessageHandler(id + "_worker", id, port);
      WorkerMessageHandler.setup(workerHandler, port);
      const messageHandler = new _message_handler.MessageHandler(id, id + "_worker", port);
      this._messageHandler = messageHandler;

      this._readyCapability.resolve();

      messageHandler.send("configure", {
        verbosity: this.verbosity
      });
    }).catch(reason => {
      this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`));
    });
  }

  destroy() {
    this.destroyed = true;

    if (this._webWorker) {
      this._webWorker.terminate();

      this._webWorker = null;
    }

    PDFWorker.#workerPorts.delete(this._port);
    this._port = null;

    if (this._messageHandler) {
      this._messageHandler.destroy();

      this._messageHandler = null;
    }
  }

  static fromPort(params) {
    if (!params?.port) {
      throw new Error("PDFWorker.fromPort - invalid method signature.");
    }

    if (this.#workerPorts.has(params.port)) {
      return this.#workerPorts.get(params.port);
    }

    return new PDFWorker(params);
  }

  static get workerSrc() {
    if (_worker_options.GlobalWorkerOptions.workerSrc) {
      return _worker_options.GlobalWorkerOptions.workerSrc;
    }

    if (PDFWorkerUtil.fallbackWorkerSrc !== null) {
      if (!_is_node.isNodeJS) {
        (0, _display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.');
      }

      return PDFWorkerUtil.fallbackWorkerSrc;
    }

    throw new Error('No "GlobalWorkerOptions.workerSrc" specified.');
  }

  static get _mainThreadWorkerMessageHandler() {
    try {
      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;
    } catch (ex) {
      return null;
    }
  }

  static get _setupFakeWorkerGlobal() {
    const loader = async () => {
      const mainWorkerMessageHandler = this._mainThreadWorkerMessageHandler;

      if (mainWorkerMessageHandler) {
        return mainWorkerMessageHandler;
      }

      if (_is_node.isNodeJS && "function" === "function") {
        const worker = eval("require")(this.workerSrc);
        return worker.WorkerMessageHandler;
      }

      await (0, _display_utils.loadScript)(this.workerSrc);
      return window.pdfjsWorker.WorkerMessageHandler;
    };

    return (0, _util.shadow)(this, "_setupFakeWorkerGlobal", loader());
  }

}

exports.PDFWorker = PDFWorker;
{
  PDFWorker.getWorkerSrc = function () {
    (0, _display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.");
    return this.workerSrc;
  };
}

class WorkerTransport {
  #docStats = null;
  #pageCache = new Map();
  #pagePromises = new Map();
  #metadataPromise = null;

  constructor(messageHandler, loadingTask, networkStream, params) {
    this.messageHandler = messageHandler;
    this.loadingTask = loadingTask;
    this.commonObjs = new PDFObjects();
    this.fontLoader = new _font_loader.FontLoader({
      docId: loadingTask.docId,
      onUnsupportedFeature: this._onUnsupportedFeature.bind(this),
      ownerDocument: params.ownerDocument,
      styleElement: params.styleElement
    });
    this._params = params;

    if (!params.useWorkerFetch) {
      this.CMapReaderFactory = new params.CMapReaderFactory({
        baseUrl: params.cMapUrl,
        isCompressed: params.cMapPacked
      });
      this.StandardFontDataFactory = new params.StandardFontDataFactory({
        baseUrl: params.standardFontDataUrl
      });
    }

    this.destroyed = false;
    this.destroyCapability = null;
    this._passwordCapability = null;
    this._networkStream = networkStream;
    this._fullReader = null;
    this._lastProgress = null;
    this.downloadInfoCapability = (0, _util.createPromiseCapability)();
    this.setupMessageHandler();
  }

  get annotationStorage() {
    return (0, _util.shadow)(this, "annotationStorage", new _annotation_storage.AnnotationStorage());
  }

  get stats() {
    return this.#docStats;
  }

  getRenderingIntent(intent, annotationMode = _util.AnnotationMode.ENABLE, isOpList = false) {
    let renderingIntent = _util.RenderingIntentFlag.DISPLAY;
    let annotationHash = "";

    switch (intent) {
      case "any":
        renderingIntent = _util.RenderingIntentFlag.ANY;
        break;

      case "display":
        break;

      case "print":
        renderingIntent = _util.RenderingIntentFlag.PRINT;
        break;

      default:
        (0, _util.warn)(`getRenderingIntent - invalid intent: ${intent}`);
    }

    switch (annotationMode) {
      case _util.AnnotationMode.DISABLE:
        renderingIntent += _util.RenderingIntentFlag.ANNOTATIONS_DISABLE;
        break;

      case _util.AnnotationMode.ENABLE:
        break;

      case _util.AnnotationMode.ENABLE_FORMS:
        renderingIntent += _util.RenderingIntentFlag.ANNOTATIONS_FORMS;
        break;

      case _util.AnnotationMode.ENABLE_STORAGE:
        renderingIntent += _util.RenderingIntentFlag.ANNOTATIONS_STORAGE;
        annotationHash = this.annotationStorage.hash;
        break;

      default:
        (0, _util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);
    }

    if (isOpList) {
      renderingIntent += _util.RenderingIntentFlag.OPLIST;
    }

    return {
      renderingIntent,
      cacheKey: `${renderingIntent}_${annotationHash}`
    };
  }

  destroy() {
    if (this.destroyCapability) {
      return this.destroyCapability.promise;
    }

    this.destroyed = true;
    this.destroyCapability = (0, _util.createPromiseCapability)();

    if (this._passwordCapability) {
      this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));
    }

    const waitOn = [];

    for (const page of this.#pageCache.values()) {
      waitOn.push(page._destroy());
    }

    this.#pageCache.clear();
    this.#pagePromises.clear();

    if (this.hasOwnProperty("annotationStorage")) {
      this.annotationStorage.resetModified();
    }

    const terminated = this.messageHandler.sendWithPromise("Terminate", null);
    waitOn.push(terminated);
    Promise.all(waitOn).then(() => {
      this.commonObjs.clear();
      this.fontLoader.clear();
      this.#metadataPromise = null;
      this._getFieldObjectsPromise = null;
      this._hasJSActionsPromise = null;

      if (this._networkStream) {
        this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));
      }

      if (this.messageHandler) {
        this.messageHandler.destroy();
        this.messageHandler = null;
      }

      this.destroyCapability.resolve();
    }, this.destroyCapability.reject);
    return this.destroyCapability.promise;
  }

  setupMessageHandler() {
    const {
      messageHandler,
      loadingTask
    } = this;
    messageHandler.on("GetReader", (data, sink) => {
      (0, _util.assert)(this._networkStream, "GetReader - no `IPDFStream` instance available.");
      this._fullReader = this._networkStream.getFullReader();

      this._fullReader.onProgress = evt => {
        this._lastProgress = {
          loaded: evt.loaded,
          total: evt.total
        };
      };

      sink.onPull = () => {
        this._fullReader.read().then(function ({
          value,
          done
        }) {
          if (done) {
            sink.close();
            return;
          }

          (0, _util.assert)((0, _util.isArrayBuffer)(value), "GetReader - expected an ArrayBuffer.");
          sink.enqueue(new Uint8Array(value), 1, [value]);
        }).catch(reason => {
          sink.error(reason);
        });
      };

      sink.onCancel = reason => {
        this._fullReader.cancel(reason);

        sink.ready.catch(readyReason => {
          if (this.destroyed) {
            return;
          }

          throw readyReason;
        });
      };
    });
    messageHandler.on("ReaderHeadersReady", data => {
      const headersCapability = (0, _util.createPromiseCapability)();
      const fullReader = this._fullReader;
      fullReader.headersReady.then(() => {
        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {
          if (this._lastProgress) {
            loadingTask.onProgress?.(this._lastProgress);
          }

          fullReader.onProgress = evt => {
            loadingTask.onProgress?.({
              loaded: evt.loaded,
              total: evt.total
            });
          };
        }

        headersCapability.resolve({
          isStreamingSupported: fullReader.isStreamingSupported,
          isRangeSupported: fullReader.isRangeSupported,
          contentLength: fullReader.contentLength
        });
      }, headersCapability.reject);
      return headersCapability.promise;
    });
    messageHandler.on("GetRangeReader", (data, sink) => {
      (0, _util.assert)(this._networkStream, "GetRangeReader - no `IPDFStream` instance available.");

      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);

      if (!rangeReader) {
        sink.close();
        return;
      }

      sink.onPull = () => {
        rangeReader.read().then(function ({
          value,
          done
        }) {
          if (done) {
            sink.close();
            return;
          }

          (0, _util.assert)((0, _util.isArrayBuffer)(value), "GetRangeReader - expected an ArrayBuffer.");
          sink.enqueue(new Uint8Array(value), 1, [value]);
        }).catch(reason => {
          sink.error(reason);
        });
      };

      sink.onCancel = reason => {
        rangeReader.cancel(reason);
        sink.ready.catch(readyReason => {
          if (this.destroyed) {
            return;
          }

          throw readyReason;
        });
      };
    });
    messageHandler.on("GetDoc", ({
      pdfInfo
    }) => {
      this._numPages = pdfInfo.numPages;
      this._htmlForXfa = pdfInfo.htmlForXfa;
      delete pdfInfo.htmlForXfa;

      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));
    });
    messageHandler.on("DocException", function (ex) {
      let reason;

      switch (ex.name) {
        case "PasswordException":
          reason = new _util.PasswordException(ex.message, ex.code);
          break;

        case "InvalidPDFException":
          reason = new _util.InvalidPDFException(ex.message);
          break;

        case "MissingPDFException":
          reason = new _util.MissingPDFException(ex.message);
          break;

        case "UnexpectedResponseException":
          reason = new _util.UnexpectedResponseException(ex.message, ex.status);
          break;

        case "UnknownErrorException":
          reason = new _util.UnknownErrorException(ex.message, ex.details);
          break;

        default:
          (0, _util.unreachable)("DocException - expected a valid Error.");
      }

      loadingTask._capability.reject(reason);
    });
    messageHandler.on("PasswordRequest", exception => {
      this._passwordCapability = (0, _util.createPromiseCapability)();

      if (loadingTask.onPassword) {
        const updatePassword = password => {
          if (password instanceof Error) {
            this._passwordCapability.reject(password);
          } else {
            this._passwordCapability.resolve({
              password
            });
          }
        };

        try {
          loadingTask.onPassword(updatePassword, exception.code);
        } catch (ex) {
          this._passwordCapability.reject(ex);
        }
      } else {
        this._passwordCapability.reject(new _util.PasswordException(exception.message, exception.code));
      }

      return this._passwordCapability.promise;
    });
    messageHandler.on("DataLoaded", data => {
      loadingTask.onProgress?.({
        loaded: data.length,
        total: data.length
      });
      this.downloadInfoCapability.resolve(data);
    });
    messageHandler.on("StartRenderPage", data => {
      if (this.destroyed) {
        return;
      }

      const page = this.#pageCache.get(data.pageIndex);

      page._startRenderPage(data.transparency, data.cacheKey);
    });
    messageHandler.on("commonobj", ([id, type, exportedData]) => {
      if (this.destroyed) {
        return;
      }

      if (this.commonObjs.has(id)) {
        return;
      }

      switch (type) {
        case "Font":
          const params = this._params;

          if ("error" in exportedData) {
            const exportedError = exportedData.error;
            (0, _util.warn)(`Error during font loading: ${exportedError}`);
            this.commonObjs.resolve(id, exportedError);
            break;
          }

          let fontRegistry = null;

          if (params.pdfBug && globalThis.FontInspector?.enabled) {
            fontRegistry = {
              registerFont(font, url) {
                globalThis.FontInspector.fontAdded(font, url);
              }

            };
          }

          const font = new _font_loader.FontFaceObject(exportedData, {
            isEvalSupported: params.isEvalSupported,
            disableFontFace: params.disableFontFace,
            ignoreErrors: params.ignoreErrors,
            onUnsupportedFeature: this._onUnsupportedFeature.bind(this),
            fontRegistry
          });
          this.fontLoader.bind(font).catch(reason => {
            return messageHandler.sendWithPromise("FontFallback", {
              id
            });
          }).finally(() => {
            if (!params.fontExtraProperties && font.data) {
              font.data = null;
            }

            this.commonObjs.resolve(id, font);
          });
          break;

        case "FontPath":
        case "Image":
          this.commonObjs.resolve(id, exportedData);
          break;

        default:
          throw new Error(`Got unknown common object type ${type}`);
      }
    });
    messageHandler.on("obj", ([id, pageIndex, type, imageData]) => {
      if (this.destroyed) {
        return;
      }

      const pageProxy = this.#pageCache.get(pageIndex);

      if (pageProxy.objs.has(id)) {
        return;
      }

      switch (type) {
        case "Image":
          pageProxy.objs.resolve(id, imageData);
          const MAX_IMAGE_SIZE_TO_STORE = 8000000;

          if (imageData) {
            let length;

            if (imageData.bitmap) {
              const {
                bitmap,
                width,
                height
              } = imageData;
              length = width * height * 4;

              pageProxy._bitmaps.add(bitmap);
            } else {
              length = imageData.data?.length || 0;
            }

            if (length > MAX_IMAGE_SIZE_TO_STORE) {
              pageProxy.cleanupAfterRender = true;
            }
          }

          break;

        case "Pattern":
          pageProxy.objs.resolve(id, imageData);
          break;

        default:
          throw new Error(`Got unknown object type ${type}`);
      }
    });
    messageHandler.on("DocProgress", data => {
      if (this.destroyed) {
        return;
      }

      loadingTask.onProgress?.({
        loaded: data.loaded,
        total: data.total
      });
    });
    messageHandler.on("DocStats", data => {
      if (this.destroyed) {
        return;
      }

      this.#docStats = Object.freeze({
        streamTypes: Object.freeze(data.streamTypes),
        fontTypes: Object.freeze(data.fontTypes)
      });
    });
    messageHandler.on("UnsupportedFeature", this._onUnsupportedFeature.bind(this));
    messageHandler.on("FetchBuiltInCMap", data => {
      if (this.destroyed) {
        return Promise.reject(new Error("Worker was destroyed."));
      }

      if (!this.CMapReaderFactory) {
        return Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."));
      }

      return this.CMapReaderFactory.fetch(data);
    });
    messageHandler.on("FetchStandardFontData", data => {
      if (this.destroyed) {
        return Promise.reject(new Error("Worker was destroyed."));
      }

      if (!this.StandardFontDataFactory) {
        return Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."));
      }

      return this.StandardFontDataFactory.fetch(data);
    });
  }

  _onUnsupportedFeature({
    featureId
  }) {
    if (this.destroyed) {
      return;
    }

    this.loadingTask.onUnsupportedFeature?.(featureId);
  }

  getData() {
    return this.messageHandler.sendWithPromise("GetData", null);
  }

  getPage(pageNumber) {
    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {
      return Promise.reject(new Error("Invalid page request."));
    }

    const pageIndex = pageNumber - 1,
          cachedPromise = this.#pagePromises.get(pageIndex);

    if (cachedPromise) {
      return cachedPromise;
    }

    const promise = this.messageHandler.sendWithPromise("GetPage", {
      pageIndex
    }).then(pageInfo => {
      if (this.destroyed) {
        throw new Error("Transport destroyed");
      }

      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.ownerDocument, this._params.pdfBug);
      this.#pageCache.set(pageIndex, page);
      return page;
    });
    this.#pagePromises.set(pageIndex, promise);
    return promise;
  }

  getPageIndex(ref) {
    if (typeof ref !== "object" || ref === null || !Number.isInteger(ref.num) || ref.num < 0 || !Number.isInteger(ref.gen) || ref.gen < 0) {
      return Promise.reject(new Error("Invalid pageIndex request."));
    }

    return this.messageHandler.sendWithPromise("GetPageIndex", {
      num: ref.num,
      gen: ref.gen
    });
  }

  getAnnotations(pageIndex, intent) {
    return this.messageHandler.sendWithPromise("GetAnnotations", {
      pageIndex,
      intent
    });
  }

  saveDocument() {
    return this.messageHandler.sendWithPromise("SaveDocument", {
      isPureXfa: !!this._htmlForXfa,
      numPages: this._numPages,
      annotationStorage: this.annotationStorage.serializable,
      filename: this._fullReader?.filename ?? null
    }).finally(() => {
      this.annotationStorage.resetModified();
    });
  }

  getFieldObjects() {
    return this._getFieldObjectsPromise ||= this.messageHandler.sendWithPromise("GetFieldObjects", null);
  }

  hasJSActions() {
    return this._hasJSActionsPromise ||= this.messageHandler.sendWithPromise("HasJSActions", null);
  }

  getCalculationOrderIds() {
    return this.messageHandler.sendWithPromise("GetCalculationOrderIds", null);
  }

  getDestinations() {
    return this.messageHandler.sendWithPromise("GetDestinations", null);
  }

  getDestination(id) {
    if (typeof id !== "string") {
      return Promise.reject(new Error("Invalid destination request."));
    }

    return this.messageHandler.sendWithPromise("GetDestination", {
      id
    });
  }

  getPageLabels() {
    return this.messageHandler.sendWithPromise("GetPageLabels", null);
  }

  getPageLayout() {
    return this.messageHandler.sendWithPromise("GetPageLayout", null);
  }

  getPageMode() {
    return this.messageHandler.sendWithPromise("GetPageMode", null);
  }

  getViewerPreferences() {
    return this.messageHandler.sendWithPromise("GetViewerPreferences", null);
  }

  getOpenAction() {
    return this.messageHandler.sendWithPromise("GetOpenAction", null);
  }

  getAttachments() {
    return this.messageHandler.sendWithPromise("GetAttachments", null);
  }

  getJavaScript() {
    return this.messageHandler.sendWithPromise("GetJavaScript", null);
  }

  getDocJSActions() {
    return this.messageHandler.sendWithPromise("GetDocJSActions", null);
  }

  getPageJSActions(pageIndex) {
    return this.messageHandler.sendWithPromise("GetPageJSActions", {
      pageIndex
    });
  }

  getStructTree(pageIndex) {
    return this.messageHandler.sendWithPromise("GetStructTree", {
      pageIndex
    });
  }

  getOutline() {
    return this.messageHandler.sendWithPromise("GetOutline", null);
  }

  getOptionalContentConfig() {
    return this.messageHandler.sendWithPromise("GetOptionalContentConfig", null).then(results => {
      return new _optional_content_config.OptionalContentConfig(results);
    });
  }

  getPermissions() {
    return this.messageHandler.sendWithPromise("GetPermissions", null);
  }

  getMetadata() {
    return this.#metadataPromise ||= this.messageHandler.sendWithPromise("GetMetadata", null).then(results => {
      return {
        info: results[0],
        metadata: results[1] ? new _metadata.Metadata(results[1]) : null,
        contentDispositionFilename: this._fullReader?.filename ?? null,
        contentLength: this._fullReader?.contentLength ?? null
      };
    });
  }

  getMarkInfo() {
    return this.messageHandler.sendWithPromise("GetMarkInfo", null);
  }

  async startCleanup(keepLoadedFonts = false) {
    await this.messageHandler.sendWithPromise("Cleanup", null);

    if (this.destroyed) {
      return;
    }

    for (const page of this.#pageCache.values()) {
      const cleanupSuccessful = page.cleanup();

      if (!cleanupSuccessful) {
        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);
      }
    }

    this.commonObjs.clear();

    if (!keepLoadedFonts) {
      this.fontLoader.clear();
    }

    this.#metadataPromise = null;
    this._getFieldObjectsPromise = null;
    this._hasJSActionsPromise = null;
  }

  get loadingParams() {
    const params = this._params;
    return (0, _util.shadow)(this, "loadingParams", {
      disableAutoFetch: params.disableAutoFetch,
      enableXfa: params.enableXfa
    });
  }

}

class PDFObjects {
  #objs = Object.create(null);

  #ensureObj(objId) {
    const obj = this.#objs[objId];

    if (obj) {
      return obj;
    }

    return this.#objs[objId] = {
      capability: (0, _util.createPromiseCapability)(),
      data: null
    };
  }

  get(objId, callback = null) {
    if (callback) {
      const obj = this.#ensureObj(objId);
      obj.capability.promise.then(() => callback(obj.data));
      return null;
    }

    const obj = this.#objs[objId];

    if (!obj?.capability.settled) {
      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);
    }

    return obj.data;
  }

  has(objId) {
    const obj = this.#objs[objId];
    return obj?.capability.settled || false;
  }

  resolve(objId, data = null) {
    const obj = this.#ensureObj(objId);
    obj.data = data;
    obj.capability.resolve();
  }

  clear() {
    this.#objs = Object.create(null);
  }

}

class RenderTask {
  constructor(internalRenderTask) {
    this._internalRenderTask = internalRenderTask;
    this.onContinue = null;
  }

  get promise() {
    return this._internalRenderTask.capability.promise;
  }

  cancel() {
    this._internalRenderTask.cancel();
  }

}

exports.RenderTask = RenderTask;

class InternalRenderTask {
  static #canvasInUse = new WeakSet();

  constructor({
    callback,
    params,
    objs,
    commonObjs,
    annotationCanvasMap,
    operatorList,
    pageIndex,
    canvasFactory,
    useRequestAnimationFrame = false,
    pdfBug = false,
    pageColors = null
  }) {
    this.callback = callback;
    this.params = params;
    this.objs = objs;
    this.commonObjs = commonObjs;
    this.annotationCanvasMap = annotationCanvasMap;
    this.operatorListIdx = null;
    this.operatorList = operatorList;
    this._pageIndex = pageIndex;
    this.canvasFactory = canvasFactory;
    this._pdfBug = pdfBug;
    this.pageColors = pageColors;
    this.running = false;
    this.graphicsReadyCallback = null;
    this.graphicsReady = false;
    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== "undefined";
    this.cancelled = false;
    this.capability = (0, _util.createPromiseCapability)();
    this.task = new RenderTask(this);
    this._cancelBound = this.cancel.bind(this);
    this._continueBound = this._continue.bind(this);
    this._scheduleNextBound = this._scheduleNext.bind(this);
    this._nextBound = this._next.bind(this);
    this._canvas = params.canvasContext.canvas;
  }

  get completed() {
    return this.capability.promise.catch(function () {});
  }

  initializeGraphics({
    transparency = false,
    optionalContentConfig
  }) {
    if (this.cancelled) {
      return;
    }

    if (this._canvas) {
      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {
        throw new Error("Cannot use the same canvas during multiple render() operations. " + "Use different canvas or ensure previous operations were " + "cancelled or completed.");
      }

      InternalRenderTask.#canvasInUse.add(this._canvas);
    }

    if (this._pdfBug && globalThis.StepperManager?.enabled) {
      this.stepper = globalThis.StepperManager.create(this._pageIndex);
      this.stepper.init(this.operatorList);
      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();
    }

    const {
      canvasContext,
      viewport,
      transform,
      imageLayer,
      background
    } = this.params;
    this.gfx = new _canvas.CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, imageLayer, optionalContentConfig, this.annotationCanvasMap, this.pageColors);
    this.gfx.beginDrawing({
      transform,
      viewport,
      transparency,
      background
    });
    this.operatorListIdx = 0;
    this.graphicsReady = true;

    if (this.graphicsReadyCallback) {
      this.graphicsReadyCallback();
    }
  }

  cancel(error = null) {
    this.running = false;
    this.cancelled = true;

    if (this.gfx) {
      this.gfx.endDrawing();
    }

    if (this._canvas) {
      InternalRenderTask.#canvasInUse.delete(this._canvas);
    }

    this.callback(error || new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, "canvas"));
  }

  operatorListChanged() {
    if (!this.graphicsReady) {
      if (!this.graphicsReadyCallback) {
        this.graphicsReadyCallback = this._continueBound;
      }

      return;
    }

    if (this.stepper) {
      this.stepper.updateOperatorList(this.operatorList);
    }

    if (this.running) {
      return;
    }

    this._continue();
  }

  _continue() {
    this.running = true;

    if (this.cancelled) {
      return;
    }

    if (this.task.onContinue) {
      this.task.onContinue(this._scheduleNextBound);
    } else {
      this._scheduleNext();
    }
  }

  _scheduleNext() {
    if (this._useRequestAnimationFrame) {
      window.requestAnimationFrame(() => {
        this._nextBound().catch(this._cancelBound);
      });
    } else {
      Promise.resolve().then(this._nextBound).catch(this._cancelBound);
    }
  }

  async _next() {
    if (this.cancelled) {
      return;
    }

    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);

    if (this.operatorListIdx === this.operatorList.argsArray.length) {
      this.running = false;

      if (this.operatorList.lastChunk) {
        this.gfx.endDrawing();

        if (this._canvas) {
          InternalRenderTask.#canvasInUse.delete(this._canvas);
        }

        this.callback();
      }
    }
  }

}

const version = '2.14.305';
exports.version = version;
const build = 'eaaa8b4ad';
exports.build = build;

/***/ }),
/* 5 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StatTimer = exports.RenderingCancelledException = exports.PixelsPerInch = exports.PageViewport = exports.PDFDateString = exports.DOMStandardFontDataFactory = exports.DOMSVGFactory = exports.DOMCanvasFactory = exports.DOMCMapReaderFactory = void 0;
exports.deprecated = deprecated;
exports.getFilenameFromUrl = getFilenameFromUrl;
exports.getPdfFilenameFromUrl = getPdfFilenameFromUrl;
exports.getXfaPageViewport = getXfaPageViewport;
exports.isDataScheme = isDataScheme;
exports.isPdfFile = isPdfFile;
exports.isValidFetchUrl = isValidFetchUrl;
exports.loadScript = loadScript;

var _base_factory = __w_pdfjs_require__(6);

var _util = __w_pdfjs_require__(1);

const SVG_NS = "http://www.w3.org/2000/svg";

class PixelsPerInch {
  static CSS = 96.0;
  static PDF = 72.0;
  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;
}

exports.PixelsPerInch = PixelsPerInch;

class DOMCanvasFactory extends _base_factory.BaseCanvasFactory {
  constructor({
    ownerDocument = globalThis.document
  } = {}) {
    super();
    this._document = ownerDocument;
  }

  _createCanvas(width, height) {
    const canvas = this._document.createElement("canvas");

    canvas.width = width;
    canvas.height = height;
    return canvas;
  }

}

exports.DOMCanvasFactory = DOMCanvasFactory;

async function fetchData(url, asTypedArray = false) {
  if (isValidFetchUrl(url, document.baseURI)) {
    const response = await fetch(url);

    if (!response.ok) {
      throw new Error(response.statusText);
    }

    return asTypedArray ? new Uint8Array(await response.arrayBuffer()) : (0, _util.stringToBytes)(await response.text());
  }

  return new Promise((resolve, reject) => {
    const request = new XMLHttpRequest();
    request.open("GET", url, true);

    if (asTypedArray) {
      request.responseType = "arraybuffer";
    }

    request.onreadystatechange = () => {
      if (request.readyState !== XMLHttpRequest.DONE) {
        return;
      }

      if (request.status === 200 || request.status === 0) {
        let data;

        if (asTypedArray && request.response) {
          data = new Uint8Array(request.response);
        } else if (!asTypedArray && request.responseText) {
          data = (0, _util.stringToBytes)(request.responseText);
        }

        if (data) {
          resolve(data);
          return;
        }
      }

      reject(new Error(request.statusText));
    };

    request.send(null);
  });
}

class DOMCMapReaderFactory extends _base_factory.BaseCMapReaderFactory {
  _fetchData(url, compressionType) {
    return fetchData(url, this.isCompressed).then(data => {
      return {
        cMapData: data,
        compressionType
      };
    });
  }

}

exports.DOMCMapReaderFactory = DOMCMapReaderFactory;

class DOMStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory {
  _fetchData(url) {
    return fetchData(url, true);
  }

}

exports.DOMStandardFontDataFactory = DOMStandardFontDataFactory;

class DOMSVGFactory extends _base_factory.BaseSVGFactory {
  _createSVG(type) {
    return document.createElementNS(SVG_NS, type);
  }

}

exports.DOMSVGFactory = DOMSVGFactory;

class PageViewport {
  constructor({
    viewBox,
    scale,
    rotation,
    offsetX = 0,
    offsetY = 0,
    dontFlip = false
  }) {
    this.viewBox = viewBox;
    this.scale = scale;
    this.rotation = rotation;
    this.offsetX = offsetX;
    this.offsetY = offsetY;
    const centerX = (viewBox[2] + viewBox[0]) / 2;
    const centerY = (viewBox[3] + viewBox[1]) / 2;
    let rotateA, rotateB, rotateC, rotateD;
    rotation %= 360;

    if (rotation < 0) {
      rotation += 360;
    }

    switch (rotation) {
      case 180:
        rotateA = -1;
        rotateB = 0;
        rotateC = 0;
        rotateD = 1;
        break;

      case 90:
        rotateA = 0;
        rotateB = 1;
        rotateC = 1;
        rotateD = 0;
        break;

      case 270:
        rotateA = 0;
        rotateB = -1;
        rotateC = -1;
        rotateD = 0;
        break;

      case 0:
        rotateA = 1;
        rotateB = 0;
        rotateC = 0;
        rotateD = -1;
        break;

      default:
        throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.");
    }

    if (dontFlip) {
      rotateC = -rotateC;
      rotateD = -rotateD;
    }

    let offsetCanvasX, offsetCanvasY;
    let width, height;

    if (rotateA === 0) {
      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;
      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;
      width = Math.abs(viewBox[3] - viewBox[1]) * scale;
      height = Math.abs(viewBox[2] - viewBox[0]) * scale;
    } else {
      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;
      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;
      width = Math.abs(viewBox[2] - viewBox[0]) * scale;
      height = Math.abs(viewBox[3] - viewBox[1]) * scale;
    }

    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];
    this.width = width;
    this.height = height;
  }

  clone({
    scale = this.scale,
    rotation = this.rotation,
    offsetX = this.offsetX,
    offsetY = this.offsetY,
    dontFlip = false
  } = {}) {
    return new PageViewport({
      viewBox: this.viewBox.slice(),
      scale,
      rotation,
      offsetX,
      offsetY,
      dontFlip
    });
  }

  convertToViewportPoint(x, y) {
    return _util.Util.applyTransform([x, y], this.transform);
  }

  convertToViewportRectangle(rect) {
    const topLeft = _util.Util.applyTransform([rect[0], rect[1]], this.transform);

    const bottomRight = _util.Util.applyTransform([rect[2], rect[3]], this.transform);

    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];
  }

  convertToPdfPoint(x, y) {
    return _util.Util.applyInverseTransform([x, y], this.transform);
  }

}

exports.PageViewport = PageViewport;

class RenderingCancelledException extends _util.BaseException {
  constructor(msg, type) {
    super(msg, "RenderingCancelledException");
    this.type = type;
  }

}

exports.RenderingCancelledException = RenderingCancelledException;

function isDataScheme(url) {
  const ii = url.length;
  let i = 0;

  while (i < ii && url[i].trim() === "") {
    i++;
  }

  return url.substring(i, i + 5).toLowerCase() === "data:";
}

function isPdfFile(filename) {
  return typeof filename === "string" && /\.pdf$/i.test(filename);
}

function getFilenameFromUrl(url) {
  const anchor = url.indexOf("#");
  const query = url.indexOf("?");
  const end = Math.min(anchor > 0 ? anchor : url.length, query > 0 ? query : url.length);
  return url.substring(url.lastIndexOf("/", end) + 1, end);
}

function getPdfFilenameFromUrl(url, defaultFilename = "document.pdf") {
  if (typeof url !== "string") {
    return defaultFilename;
  }

  if (isDataScheme(url)) {
    (0, _util.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');
    return defaultFilename;
  }

  const reURI = /^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;
  const reFilename = /[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;
  const splitURI = reURI.exec(url);
  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);

  if (suggestedFilename) {
    suggestedFilename = suggestedFilename[0];

    if (suggestedFilename.includes("%")) {
      try {
        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];
      } catch (ex) {}
    }
  }

  return suggestedFilename || defaultFilename;
}

class StatTimer {
  constructor() {
    this.started = Object.create(null);
    this.times = [];
  }

  time(name) {
    if (name in this.started) {
      (0, _util.warn)(`Timer is already running for ${name}`);
    }

    this.started[name] = Date.now();
  }

  timeEnd(name) {
    if (!(name in this.started)) {
      (0, _util.warn)(`Timer has not been started for ${name}`);
    }

    this.times.push({
      name,
      start: this.started[name],
      end: Date.now()
    });
    delete this.started[name];
  }

  toString() {
    const outBuf = [];
    let longest = 0;

    for (const time of this.times) {
      const name = time.name;

      if (name.length > longest) {
        longest = name.length;
      }
    }

    for (const time of this.times) {
      const duration = time.end - time.start;
      outBuf.push(`${time.name.padEnd(longest)} ${duration}ms\n`);
    }

    return outBuf.join("");
  }

}

exports.StatTimer = StatTimer;

function isValidFetchUrl(url, baseUrl) {
  try {
    const {
      protocol
    } = baseUrl ? new URL(url, baseUrl) : new URL(url);
    return protocol === "http:" || protocol === "https:";
  } catch (ex) {
    return false;
  }
}

function loadScript(src, removeScriptElement = false) {
  return new Promise((resolve, reject) => {
    const script = document.createElement("script");
    script.src = src;

    script.onload = function (evt) {
      if (removeScriptElement) {
        script.remove();
      }

      resolve(evt);
    };

    script.onerror = function () {
      reject(new Error(`Cannot load script at: ${script.src}`));
    };

    (document.head || document.documentElement).appendChild(script);
  });
}

function deprecated(details) {
  console.log("Deprecated API usage: " + details);
}

let pdfDateStringRegex;

class PDFDateString {
  static toDateObject(input) {
    if (!input || typeof input !== "string") {
      return null;
    }

    if (!pdfDateStringRegex) {
      pdfDateStringRegex = new RegExp("^D:" + "(\\d{4})" + "(\\d{2})?" + "(\\d{2})?" + "(\\d{2})?" + "(\\d{2})?" + "(\\d{2})?" + "([Z|+|-])?" + "(\\d{2})?" + "'?" + "(\\d{2})?" + "'?");
    }

    const matches = pdfDateStringRegex.exec(input);

    if (!matches) {
      return null;
    }

    const year = parseInt(matches[1], 10);
    let month = parseInt(matches[2], 10);
    month = month >= 1 && month <= 12 ? month - 1 : 0;
    let day = parseInt(matches[3], 10);
    day = day >= 1 && day <= 31 ? day : 1;
    let hour = parseInt(matches[4], 10);
    hour = hour >= 0 && hour <= 23 ? hour : 0;
    let minute = parseInt(matches[5], 10);
    minute = minute >= 0 && minute <= 59 ? minute : 0;
    let second = parseInt(matches[6], 10);
    second = second >= 0 && second <= 59 ? second : 0;
    const universalTimeRelation = matches[7] || "Z";
    let offsetHour = parseInt(matches[8], 10);
    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;
    let offsetMinute = parseInt(matches[9], 10) || 0;
    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;

    if (universalTimeRelation === "-") {
      hour += offsetHour;
      minute += offsetMinute;
    } else if (universalTimeRelation === "+") {
      hour -= offsetHour;
      minute -= offsetMinute;
    }

    return new Date(Date.UTC(year, month, day, hour, minute, second));
  }

}

exports.PDFDateString = PDFDateString;

function getXfaPageViewport(xfaPage, {
  scale = 1,
  rotation = 0
}) {
  const {
    width,
    height
  } = xfaPage.attributes.style;
  const viewBox = [0, 0, parseInt(width), parseInt(height)];
  return new PageViewport({
    viewBox,
    scale,
    rotation
  });
}

/***/ }),
/* 6 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BaseStandardFontDataFactory = exports.BaseSVGFactory = exports.BaseCanvasFactory = exports.BaseCMapReaderFactory = void 0;

var _util = __w_pdfjs_require__(1);

class BaseCanvasFactory {
  constructor() {
    if (this.constructor === BaseCanvasFactory) {
      (0, _util.unreachable)("Cannot initialize BaseCanvasFactory.");
    }
  }

  create(width, height) {
    if (width <= 0 || height <= 0) {
      throw new Error("Invalid canvas size");
    }

    const canvas = this._createCanvas(width, height);

    return {
      canvas,
      context: canvas.getContext("2d")
    };
  }

  reset(canvasAndContext, width, height) {
    if (!canvasAndContext.canvas) {
      throw new Error("Canvas is not specified");
    }

    if (width <= 0 || height <= 0) {
      throw new Error("Invalid canvas size");
    }

    canvasAndContext.canvas.width = width;
    canvasAndContext.canvas.height = height;
  }

  destroy(canvasAndContext) {
    if (!canvasAndContext.canvas) {
      throw new Error("Canvas is not specified");
    }

    canvasAndContext.canvas.width = 0;
    canvasAndContext.canvas.height = 0;
    canvasAndContext.canvas = null;
    canvasAndContext.context = null;
  }

  _createCanvas(width, height) {
    (0, _util.unreachable)("Abstract method `_createCanvas` called.");
  }

}

exports.BaseCanvasFactory = BaseCanvasFactory;

class BaseCMapReaderFactory {
  constructor({
    baseUrl = null,
    isCompressed = false
  }) {
    if (this.constructor === BaseCMapReaderFactory) {
      (0, _util.unreachable)("Cannot initialize BaseCMapReaderFactory.");
    }

    this.baseUrl = baseUrl;
    this.isCompressed = isCompressed;
  }

  async fetch({
    name
  }) {
    if (!this.baseUrl) {
      throw new Error('The CMap "baseUrl" parameter must be specified, ensure that ' + 'the "cMapUrl" and "cMapPacked" API parameters are provided.');
    }

    if (!name) {
      throw new Error("CMap name must be specified.");
    }

    const url = this.baseUrl + name + (this.isCompressed ? ".bcmap" : "");
    const compressionType = this.isCompressed ? _util.CMapCompressionType.BINARY : _util.CMapCompressionType.NONE;
    return this._fetchData(url, compressionType).catch(reason => {
      throw new Error(`Unable to load ${this.isCompressed ? "binary " : ""}CMap at: ${url}`);
    });
  }

  _fetchData(url, compressionType) {
    (0, _util.unreachable)("Abstract method `_fetchData` called.");
  }

}

exports.BaseCMapReaderFactory = BaseCMapReaderFactory;

class BaseStandardFontDataFactory {
  constructor({
    baseUrl = null
  }) {
    if (this.constructor === BaseStandardFontDataFactory) {
      (0, _util.unreachable)("Cannot initialize BaseStandardFontDataFactory.");
    }

    this.baseUrl = baseUrl;
  }

  async fetch({
    filename
  }) {
    if (!this.baseUrl) {
      throw new Error('The standard font "baseUrl" parameter must be specified, ensure that ' + 'the "standardFontDataUrl" API parameter is provided.');
    }

    if (!filename) {
      throw new Error("Font filename must be specified.");
    }

    const url = `${this.baseUrl}${filename}`;
    return this._fetchData(url).catch(reason => {
      throw new Error(`Unable to load font data at: ${url}`);
    });
  }

  _fetchData(url) {
    (0, _util.unreachable)("Abstract method `_fetchData` called.");
  }

}

exports.BaseStandardFontDataFactory = BaseStandardFontDataFactory;

class BaseSVGFactory {
  constructor() {
    if (this.constructor === BaseSVGFactory) {
      (0, _util.unreachable)("Cannot initialize BaseSVGFactory.");
    }
  }

  create(width, height) {
    if (width <= 0 || height <= 0) {
      throw new Error("Invalid SVG dimensions");
    }

    const svg = this._createSVG("svg:svg");

    svg.setAttribute("version", "1.1");
    svg.setAttribute("width", `${width}px`);
    svg.setAttribute("height", `${height}px`);
    svg.setAttribute("preserveAspectRatio", "none");
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    return svg;
  }

  createElement(type) {
    if (typeof type !== "string") {
      throw new Error("Invalid SVG element type");
    }

    return this._createSVG(type);
  }

  _createSVG(type) {
    (0, _util.unreachable)("Abstract method `_createSVG` called.");
  }

}

exports.BaseSVGFactory = BaseSVGFactory;

/***/ }),
/* 7 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FontLoader = exports.FontFaceObject = void 0;

var _util = __w_pdfjs_require__(1);

class BaseFontLoader {
  constructor({
    docId,
    onUnsupportedFeature,
    ownerDocument = globalThis.document,
    styleElement = null
  }) {
    if (this.constructor === BaseFontLoader) {
      (0, _util.unreachable)("Cannot initialize BaseFontLoader.");
    }

    this.docId = docId;
    this._onUnsupportedFeature = onUnsupportedFeature;
    this._document = ownerDocument;
    this.nativeFontFaces = [];
    this.styleElement = null;
  }

  addNativeFontFace(nativeFontFace) {
    this.nativeFontFaces.push(nativeFontFace);

    this._document.fonts.add(nativeFontFace);
  }

  insertRule(rule) {
    let styleElement = this.styleElement;

    if (!styleElement) {
      styleElement = this.styleElement = this._document.createElement("style");
      styleElement.id = `PDFJS_FONT_STYLE_TAG_${this.docId}`;

      this._document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement);
    }

    const styleSheet = styleElement.sheet;
    styleSheet.insertRule(rule, styleSheet.cssRules.length);
  }

  clear() {
    for (const nativeFontFace of this.nativeFontFaces) {
      this._document.fonts.delete(nativeFontFace);
    }

    this.nativeFontFaces.length = 0;

    if (this.styleElement) {
      this.styleElement.remove();
      this.styleElement = null;
    }
  }

  async bind(font) {
    if (font.attached || font.missingFile) {
      return;
    }

    font.attached = true;

    if (this.isFontLoadingAPISupported) {
      const nativeFontFace = font.createNativeFontFace();

      if (nativeFontFace) {
        this.addNativeFontFace(nativeFontFace);

        try {
          await nativeFontFace.loaded;
        } catch (ex) {
          this._onUnsupportedFeature({
            featureId: _util.UNSUPPORTED_FEATURES.errorFontLoadNative
          });

          (0, _util.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);
          font.disableFontFace = true;
          throw ex;
        }
      }

      return;
    }

    const rule = font.createFontFaceRule();

    if (rule) {
      this.insertRule(rule);

      if (this.isSyncFontLoadingSupported) {
        return;
      }

      await new Promise(resolve => {
        const request = this._queueLoadingCallback(resolve);

        this._prepareFontLoadEvent([rule], [font], request);
      });
    }
  }

  _queueLoadingCallback(callback) {
    (0, _util.unreachable)("Abstract method `_queueLoadingCallback`.");
  }

  get isFontLoadingAPISupported() {
    const hasFonts = !!this._document?.fonts;
    return (0, _util.shadow)(this, "isFontLoadingAPISupported", hasFonts);
  }

  get isSyncFontLoadingSupported() {
    (0, _util.unreachable)("Abstract method `isSyncFontLoadingSupported`.");
  }

  get _loadTestFont() {
    (0, _util.unreachable)("Abstract method `_loadTestFont`.");
  }

  _prepareFontLoadEvent(rules, fontsToLoad, request) {
    (0, _util.unreachable)("Abstract method `_prepareFontLoadEvent`.");
  }

}

let FontLoader;
exports.FontLoader = FontLoader;
{
  exports.FontLoader = FontLoader = class GenericFontLoader extends BaseFontLoader {
    constructor(params) {
      super(params);
      this.loadingContext = {
        requests: [],
        nextRequestId: 0
      };
      this.loadTestFontId = 0;
    }

    get isSyncFontLoadingSupported() {
      let supported = false;

      if (typeof navigator === "undefined") {
        supported = true;
      } else {
        const m = /Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);

        if (m?.[1] >= 14) {
          supported = true;
        }
      }

      return (0, _util.shadow)(this, "isSyncFontLoadingSupported", supported);
    }

    _queueLoadingCallback(callback) {
      function completeRequest() {
        (0, _util.assert)(!request.done, "completeRequest() cannot be called twice.");
        request.done = true;

        while (context.requests.length > 0 && context.requests[0].done) {
          const otherRequest = context.requests.shift();
          setTimeout(otherRequest.callback, 0);
        }
      }

      const context = this.loadingContext;
      const request = {
        id: `pdfjs-font-loading-${context.nextRequestId++}`,
        done: false,
        complete: completeRequest,
        callback
      };
      context.requests.push(request);
      return request;
    }

    get _loadTestFont() {
      const getLoadTestFont = function () {
        return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA" + "FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA" + "ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA" + "AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1" + "AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD" + "6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM" + "AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D" + "IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA" + "AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA" + "AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB" + "AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY" + "AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA" + "AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" + "AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" + "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" + "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" + "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" + "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA" + "AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC" + "AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3" + "Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj" + "FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");
      };

      return (0, _util.shadow)(this, "_loadTestFont", getLoadTestFont());
    }

    _prepareFontLoadEvent(rules, fonts, request) {
      function int32(data, offset) {
        return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;
      }

      function spliceString(s, offset, remove, insert) {
        const chunk1 = s.substring(0, offset);
        const chunk2 = s.substring(offset + remove);
        return chunk1 + insert + chunk2;
      }

      let i, ii;

      const canvas = this._document.createElement("canvas");

      canvas.width = 1;
      canvas.height = 1;
      const ctx = canvas.getContext("2d");
      let called = 0;

      function isFontReady(name, callback) {
        called++;

        if (called > 30) {
          (0, _util.warn)("Load test font never loaded.");
          callback();
          return;
        }

        ctx.font = "30px " + name;
        ctx.fillText(".", 0, 20);
        const imageData = ctx.getImageData(0, 0, 1, 1);

        if (imageData.data[3] > 0) {
          callback();
          return;
        }

        setTimeout(isFontReady.bind(null, name, callback));
      }

      const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;
      let data = this._loadTestFont;
      const COMMENT_OFFSET = 976;
      data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);
      const CFF_CHECKSUM_OFFSET = 16;
      const XXXX_VALUE = 0x58585858;
      let checksum = int32(data, CFF_CHECKSUM_OFFSET);

      for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {
        checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;
      }

      if (i < loadTestFontId.length) {
        checksum = checksum - XXXX_VALUE + int32(loadTestFontId + "XXX", i) | 0;
      }

      data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, (0, _util.string32)(checksum));
      const url = `url(data:font/opentype;base64,${btoa(data)});`;
      const rule = `@font-face {font-family:"${loadTestFontId}";src:${url}}`;
      this.insertRule(rule);
      const names = [];

      for (const font of fonts) {
        names.push(font.loadedName);
      }

      names.push(loadTestFontId);

      const div = this._document.createElement("div");

      div.style.visibility = "hidden";
      div.style.width = div.style.height = "10px";
      div.style.position = "absolute";
      div.style.top = div.style.left = "0px";

      for (const name of names) {
        const span = this._document.createElement("span");

        span.textContent = "Hi";
        span.style.fontFamily = name;
        div.appendChild(span);
      }

      this._document.body.appendChild(div);

      isFontReady(loadTestFontId, () => {
        div.remove();
        request.complete();
      });
    }

  };
}

class FontFaceObject {
  constructor(translatedData, {
    isEvalSupported = true,
    disableFontFace = false,
    ignoreErrors = false,
    onUnsupportedFeature,
    fontRegistry = null
  }) {
    this.compiledGlyphs = Object.create(null);

    for (const i in translatedData) {
      this[i] = translatedData[i];
    }

    this.isEvalSupported = isEvalSupported !== false;
    this.disableFontFace = disableFontFace === true;
    this.ignoreErrors = ignoreErrors === true;
    this._onUnsupportedFeature = onUnsupportedFeature;
    this.fontRegistry = fontRegistry;
  }

  createNativeFontFace() {
    if (!this.data || this.disableFontFace) {
      return null;
    }

    let nativeFontFace;

    if (!this.cssFontInfo) {
      nativeFontFace = new FontFace(this.loadedName, this.data, {});
    } else {
      const css = {
        weight: this.cssFontInfo.fontWeight
      };

      if (this.cssFontInfo.italicAngle) {
        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;
      }

      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);
    }

    if (this.fontRegistry) {
      this.fontRegistry.registerFont(this);
    }

    return nativeFontFace;
  }

  createFontFaceRule() {
    if (!this.data || this.disableFontFace) {
      return null;
    }

    const data = (0, _util.bytesToString)(this.data);
    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;
    let rule;

    if (!this.cssFontInfo) {
      rule = `@font-face {font-family:"${this.loadedName}";src:${url}}`;
    } else {
      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;

      if (this.cssFontInfo.italicAngle) {
        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;
      }

      rule = `@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`;
    }

    if (this.fontRegistry) {
      this.fontRegistry.registerFont(this, url);
    }

    return rule;
  }

  getPathGenerator(objs, character) {
    if (this.compiledGlyphs[character] !== undefined) {
      return this.compiledGlyphs[character];
    }

    let cmds;

    try {
      cmds = objs.get(this.loadedName + "_path_" + character);
    } catch (ex) {
      if (!this.ignoreErrors) {
        throw ex;
      }

      this._onUnsupportedFeature({
        featureId: _util.UNSUPPORTED_FEATURES.errorFontGetPath
      });

      (0, _util.warn)(`getPathGenerator - ignoring character: "${ex}".`);
      return this.compiledGlyphs[character] = function (c, size) {};
    }

    if (this.isEvalSupported && _util.FeatureTest.isEvalSupported) {
      const jsBuf = [];

      for (const current of cmds) {
        const args = current.args !== undefined ? current.args.join(",") : "";
        jsBuf.push("c.", current.cmd, "(", args, ");\n");
      }

      return this.compiledGlyphs[character] = new Function("c", "size", jsBuf.join(""));
    }

    return this.compiledGlyphs[character] = function (c, size) {
      for (const current of cmds) {
        if (current.cmd === "scale") {
          current.args = [size, -size];
        }

        c[current.cmd].apply(c, current.args);
      }
    };
  }

}

exports.FontFaceObject = FontFaceObject;

/***/ }),
/* 8 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AnnotationStorage = void 0;

var _murmurhash = __w_pdfjs_require__(9);

var _util = __w_pdfjs_require__(1);

class AnnotationStorage {
  constructor() {
    this._storage = new Map();
    this._modified = false;
    this.onSetModified = null;
    this.onResetModified = null;
  }

  getValue(key, defaultValue) {
    const value = this._storage.get(key);

    if (value === undefined) {
      return defaultValue;
    }

    return Object.assign(defaultValue, value);
  }

  getRawValue(key) {
    return this._storage.get(key);
  }

  setValue(key, value) {
    const obj = this._storage.get(key);

    let modified = false;

    if (obj !== undefined) {
      for (const [entry, val] of Object.entries(value)) {
        if (obj[entry] !== val) {
          modified = true;
          obj[entry] = val;
        }
      }
    } else {
      modified = true;

      this._storage.set(key, value);
    }

    if (modified) {
      this._setModified();
    }
  }

  getAll() {
    return this._storage.size > 0 ? (0, _util.objectFromMap)(this._storage) : null;
  }

  get size() {
    return this._storage.size;
  }

  _setModified() {
    if (!this._modified) {
      this._modified = true;

      if (typeof this.onSetModified === "function") {
        this.onSetModified();
      }
    }
  }

  resetModified() {
    if (this._modified) {
      this._modified = false;

      if (typeof this.onResetModified === "function") {
        this.onResetModified();
      }
    }
  }

  get serializable() {
    return this._storage.size > 0 ? this._storage : null;
  }

  get hash() {
    const hash = new _murmurhash.MurmurHash3_64();

    for (const [key, value] of this._storage) {
      hash.update(`${key}:${JSON.stringify(value)}`);
    }

    return hash.hexdigest();
  }

}

exports.AnnotationStorage = AnnotationStorage;

/***/ }),
/* 9 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MurmurHash3_64 = void 0;

var _util = __w_pdfjs_require__(1);

const SEED = 0xc3d2e1f0;
const MASK_HIGH = 0xffff0000;
const MASK_LOW = 0xffff;

class MurmurHash3_64 {
  constructor(seed) {
    this.h1 = seed ? seed & 0xffffffff : SEED;
    this.h2 = seed ? seed & 0xffffffff : SEED;
  }

  update(input) {
    let data, length;

    if (typeof input === "string") {
      data = new Uint8Array(input.length * 2);
      length = 0;

      for (let i = 0, ii = input.length; i < ii; i++) {
        const code = input.charCodeAt(i);

        if (code <= 0xff) {
          data[length++] = code;
        } else {
          data[length++] = code >>> 8;
          data[length++] = code & 0xff;
        }
      }
    } else if ((0, _util.isArrayBuffer)(input)) {
      data = input.slice();
      length = data.byteLength;
    } else {
      throw new Error("Wrong data format in MurmurHash3_64_update. " + "Input must be a string or array.");
    }

    const blockCounts = length >> 2;
    const tailLength = length - blockCounts * 4;
    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);
    let k1 = 0,
        k2 = 0;
    let h1 = this.h1,
        h2 = this.h2;
    const C1 = 0xcc9e2d51,
          C2 = 0x1b873593;
    const C1_LOW = C1 & MASK_LOW,
          C2_LOW = C2 & MASK_LOW;

    for (let i = 0; i < blockCounts; i++) {
      if (i & 1) {
        k1 = dataUint32[i];
        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;
        k1 = k1 << 15 | k1 >>> 17;
        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;
        h1 ^= k1;
        h1 = h1 << 13 | h1 >>> 19;
        h1 = h1 * 5 + 0xe6546b64;
      } else {
        k2 = dataUint32[i];
        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;
        k2 = k2 << 15 | k2 >>> 17;
        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;
        h2 ^= k2;
        h2 = h2 << 13 | h2 >>> 19;
        h2 = h2 * 5 + 0xe6546b64;
      }
    }

    k1 = 0;

    switch (tailLength) {
      case 3:
        k1 ^= data[blockCounts * 4 + 2] << 16;

      case 2:
        k1 ^= data[blockCounts * 4 + 1] << 8;

      case 1:
        k1 ^= data[blockCounts * 4];
        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;
        k1 = k1 << 15 | k1 >>> 17;
        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;

        if (blockCounts & 1) {
          h1 ^= k1;
        } else {
          h2 ^= k1;
        }

    }

    this.h1 = h1;
    this.h2 = h2;
  }

  hexdigest() {
    let h1 = this.h1,
        h2 = this.h2;
    h1 ^= h2 >>> 1;
    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;
    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;
    h1 ^= h2 >>> 1;
    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;
    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;
    h1 ^= h2 >>> 1;
    const hex1 = (h1 >>> 0).toString(16),
          hex2 = (h2 >>> 0).toString(16);
    return hex1.padStart(8, "0") + hex2.padStart(8, "0");
  }

}

exports.MurmurHash3_64 = MurmurHash3_64;

/***/ }),
/* 10 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CanvasGraphics = void 0;

var _util = __w_pdfjs_require__(1);

var _pattern_helper = __w_pdfjs_require__(11);

var _image_utils = __w_pdfjs_require__(12);

var _is_node = __w_pdfjs_require__(3);

var _display_utils = __w_pdfjs_require__(5);

const MIN_FONT_SIZE = 16;
const MAX_FONT_SIZE = 100;
const MAX_GROUP_SIZE = 4096;
const EXECUTION_TIME = 15;
const EXECUTION_STEPS = 10;
const COMPILE_TYPE3_GLYPHS = true;
const MAX_SIZE_TO_COMPILE = 1000;
const FULL_CHUNK_HEIGHT = 16;
const LINEWIDTH_SCALE_FACTOR = 1.000001;

function mirrorContextOperations(ctx, destCtx) {
  if (ctx._removeMirroring) {
    throw new Error("Context is already forwarding operations.");
  }

  ctx.__originalSave = ctx.save;
  ctx.__originalRestore = ctx.restore;
  ctx.__originalRotate = ctx.rotate;
  ctx.__originalScale = ctx.scale;
  ctx.__originalTranslate = ctx.translate;
  ctx.__originalTransform = ctx.transform;
  ctx.__originalSetTransform = ctx.setTransform;
  ctx.__originalResetTransform = ctx.resetTransform;
  ctx.__originalClip = ctx.clip;
  ctx.__originalMoveTo = ctx.moveTo;
  ctx.__originalLineTo = ctx.lineTo;
  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;
  ctx.__originalRect = ctx.rect;
  ctx.__originalClosePath = ctx.closePath;
  ctx.__originalBeginPath = ctx.beginPath;

  ctx._removeMirroring = () => {
    ctx.save = ctx.__originalSave;
    ctx.restore = ctx.__originalRestore;
    ctx.rotate = ctx.__originalRotate;
    ctx.scale = ctx.__originalScale;
    ctx.translate = ctx.__originalTranslate;
    ctx.transform = ctx.__originalTransform;
    ctx.setTransform = ctx.__originalSetTransform;
    ctx.resetTransform = ctx.__originalResetTransform;
    ctx.clip = ctx.__originalClip;
    ctx.moveTo = ctx.__originalMoveTo;
    ctx.lineTo = ctx.__originalLineTo;
    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;
    ctx.rect = ctx.__originalRect;
    ctx.closePath = ctx.__originalClosePath;
    ctx.beginPath = ctx.__originalBeginPath;
    delete ctx._removeMirroring;
  };

  ctx.save = function ctxSave() {
    destCtx.save();

    this.__originalSave();
  };

  ctx.restore = function ctxRestore() {
    destCtx.restore();

    this.__originalRestore();
  };

  ctx.translate = function ctxTranslate(x, y) {
    destCtx.translate(x, y);

    this.__originalTranslate(x, y);
  };

  ctx.scale = function ctxScale(x, y) {
    destCtx.scale(x, y);

    this.__originalScale(x, y);
  };

  ctx.transform = function ctxTransform(a, b, c, d, e, f) {
    destCtx.transform(a, b, c, d, e, f);

    this.__originalTransform(a, b, c, d, e, f);
  };

  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {
    destCtx.setTransform(a, b, c, d, e, f);

    this.__originalSetTransform(a, b, c, d, e, f);
  };

  ctx.resetTransform = function ctxResetTransform() {
    destCtx.resetTransform();

    this.__originalResetTransform();
  };

  ctx.rotate = function ctxRotate(angle) {
    destCtx.rotate(angle);

    this.__originalRotate(angle);
  };

  ctx.clip = function ctxRotate(rule) {
    destCtx.clip(rule);

    this.__originalClip(rule);
  };

  ctx.moveTo = function (x, y) {
    destCtx.moveTo(x, y);

    this.__originalMoveTo(x, y);
  };

  ctx.lineTo = function (x, y) {
    destCtx.lineTo(x, y);

    this.__originalLineTo(x, y);
  };

  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {
    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);

    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
  };

  ctx.rect = function (x, y, width, height) {
    destCtx.rect(x, y, width, height);

    this.__originalRect(x, y, width, height);
  };

  ctx.closePath = function () {
    destCtx.closePath();

    this.__originalClosePath();
  };

  ctx.beginPath = function () {
    destCtx.beginPath();

    this.__originalBeginPath();
  };
}

function addContextCurrentTransform(ctx) {
  if (ctx._transformStack) {
    ctx._transformStack = [];
  }

  if (ctx.mozCurrentTransform) {
    return;
  }

  ctx._originalSave = ctx.save;
  ctx._originalRestore = ctx.restore;
  ctx._originalRotate = ctx.rotate;
  ctx._originalScale = ctx.scale;
  ctx._originalTranslate = ctx.translate;
  ctx._originalTransform = ctx.transform;
  ctx._originalSetTransform = ctx.setTransform;
  ctx._originalResetTransform = ctx.resetTransform;
  ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];
  ctx._transformStack = [];

  try {
    const desc = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(ctx), "lineWidth");
    ctx._setLineWidth = desc.set;
    ctx._getLineWidth = desc.get;
    Object.defineProperty(ctx, "lineWidth", {
      set: function setLineWidth(width) {
        this._setLineWidth(width * LINEWIDTH_SCALE_FACTOR);
      },
      get: function getLineWidth() {
        return this._getLineWidth();
      }
    });
  } catch (_) {}

  Object.defineProperty(ctx, "mozCurrentTransform", {
    get: function getCurrentTransform() {
      return this._transformMatrix;
    }
  });
  Object.defineProperty(ctx, "mozCurrentTransformInverse", {
    get: function getCurrentTransformInverse() {
      const [a, b, c, d, e, f] = this._transformMatrix;
      const ad_bc = a * d - b * c;
      const bc_ad = b * c - a * d;
      return [d / ad_bc, b / bc_ad, c / bc_ad, a / ad_bc, (d * e - c * f) / bc_ad, (b * e - a * f) / ad_bc];
    }
  });

  ctx.save = function ctxSave() {
    const old = this._transformMatrix;

    this._transformStack.push(old);

    this._transformMatrix = old.slice(0, 6);

    this._originalSave();
  };

  ctx.restore = function ctxRestore() {
    if (this._transformStack.length === 0) {
      (0, _util.warn)("Tried to restore a ctx when the stack was already empty.");
    }

    const prev = this._transformStack.pop();

    if (prev) {
      this._transformMatrix = prev;

      this._originalRestore();
    }
  };

  ctx.translate = function ctxTranslate(x, y) {
    const m = this._transformMatrix;
    m[4] = m[0] * x + m[2] * y + m[4];
    m[5] = m[1] * x + m[3] * y + m[5];

    this._originalTranslate(x, y);
  };

  ctx.scale = function ctxScale(x, y) {
    const m = this._transformMatrix;
    m[0] *= x;
    m[1] *= x;
    m[2] *= y;
    m[3] *= y;

    this._originalScale(x, y);
  };

  ctx.transform = function ctxTransform(a, b, c, d, e, f) {
    const m = this._transformMatrix;
    this._transformMatrix = [m[0] * a + m[2] * b, m[1] * a + m[3] * b, m[0] * c + m[2] * d, m[1] * c + m[3] * d, m[0] * e + m[2] * f + m[4], m[1] * e + m[3] * f + m[5]];

    ctx._originalTransform(a, b, c, d, e, f);
  };

  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {
    this._transformMatrix = [a, b, c, d, e, f];

    ctx._originalSetTransform(a, b, c, d, e, f);
  };

  ctx.resetTransform = function ctxResetTransform() {
    this._transformMatrix = [1, 0, 0, 1, 0, 0];

    ctx._originalResetTransform();
  };

  ctx.rotate = function ctxRotate(angle) {
    const cosValue = Math.cos(angle);
    const sinValue = Math.sin(angle);
    const m = this._transformMatrix;
    this._transformMatrix = [m[0] * cosValue + m[2] * sinValue, m[1] * cosValue + m[3] * sinValue, m[0] * -sinValue + m[2] * cosValue, m[1] * -sinValue + m[3] * cosValue, m[4], m[5]];

    this._originalRotate(angle);
  };
}

class CachedCanvases {
  constructor(canvasFactory) {
    this.canvasFactory = canvasFactory;
    this.cache = Object.create(null);
  }

  getCanvas(id, width, height, trackTransform) {
    let canvasEntry;

    if (this.cache[id] !== undefined) {
      canvasEntry = this.cache[id];
      this.canvasFactory.reset(canvasEntry, width, height);
      canvasEntry.context.setTransform(1, 0, 0, 1, 0, 0);
    } else {
      canvasEntry = this.canvasFactory.create(width, height);
      this.cache[id] = canvasEntry;
    }

    if (trackTransform) {
      addContextCurrentTransform(canvasEntry.context);
    }

    return canvasEntry;
  }

  delete(id) {
    delete this.cache[id];
  }

  clear() {
    for (const id in this.cache) {
      const canvasEntry = this.cache[id];
      this.canvasFactory.destroy(canvasEntry);
      delete this.cache[id];
    }
  }

}

function drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {
  const [a, b, c, d, tx, ty] = ctx.mozCurrentTransform;

  if (b === 0 && c === 0) {
    const tlX = destX * a + tx;
    const rTlX = Math.round(tlX);
    const tlY = destY * d + ty;
    const rTlY = Math.round(tlY);
    const brX = (destX + destW) * a + tx;
    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;
    const brY = (destY + destH) * d + ty;
    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;
    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);
    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);
    ctx.setTransform(a, b, c, d, tx, ty);
    return [rWidth, rHeight];
  }

  if (a === 0 && d === 0) {
    const tlX = destY * c + tx;
    const rTlX = Math.round(tlX);
    const tlY = destX * b + ty;
    const rTlY = Math.round(tlY);
    const brX = (destY + destH) * c + tx;
    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;
    const brY = (destX + destW) * b + ty;
    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;
    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);
    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);
    ctx.setTransform(a, b, c, d, tx, ty);
    return [rHeight, rWidth];
  }

  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);
  const scaleX = Math.hypot(a, b);
  const scaleY = Math.hypot(c, d);
  return [scaleX * destW, scaleY * destH];
}

function compileType3Glyph(imgData) {
  const {
    width,
    height
  } = imgData;

  if (!COMPILE_TYPE3_GLYPHS || width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {
    return null;
  }

  const POINT_TO_PROCESS_LIMIT = 1000;
  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);
  const width1 = width + 1;
  let points = new Uint8Array(width1 * (height + 1));
  let i, j, j0;
  const lineSize = width + 7 & ~7;
  let data = new Uint8Array(lineSize * height),
      pos = 0;

  for (const elem of imgData.data) {
    let mask = 128;

    while (mask > 0) {
      data[pos++] = elem & mask ? 0 : 255;
      mask >>= 1;
    }
  }

  let count = 0;
  pos = 0;

  if (data[pos] !== 0) {
    points[0] = 1;
    ++count;
  }

  for (j = 1; j < width; j++) {
    if (data[pos] !== data[pos + 1]) {
      points[j] = data[pos] ? 2 : 1;
      ++count;
    }

    pos++;
  }

  if (data[pos] !== 0) {
    points[j] = 2;
    ++count;
  }

  for (i = 1; i < height; i++) {
    pos = i * lineSize;
    j0 = i * width1;

    if (data[pos - lineSize] !== data[pos]) {
      points[j0] = data[pos] ? 1 : 8;
      ++count;
    }

    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);

    for (j = 1; j < width; j++) {
      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);

      if (POINT_TYPES[sum]) {
        points[j0 + j] = POINT_TYPES[sum];
        ++count;
      }

      pos++;
    }

    if (data[pos - lineSize] !== data[pos]) {
      points[j0 + j] = data[pos] ? 2 : 4;
      ++count;
    }

    if (count > POINT_TO_PROCESS_LIMIT) {
      return null;
    }
  }

  pos = lineSize * (height - 1);
  j0 = i * width1;

  if (data[pos] !== 0) {
    points[j0] = 8;
    ++count;
  }

  for (j = 1; j < width; j++) {
    if (data[pos] !== data[pos + 1]) {
      points[j0 + j] = data[pos] ? 4 : 8;
      ++count;
    }

    pos++;
  }

  if (data[pos] !== 0) {
    points[j0 + j] = 4;
    ++count;
  }

  if (count > POINT_TO_PROCESS_LIMIT) {
    return null;
  }

  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);
  let path, outlines, coords;

  if (!_is_node.isNodeJS) {
    path = new Path2D();
  } else {
    outlines = [];
  }

  for (i = 0; count && i <= height; i++) {
    let p = i * width1;
    const end = p + width;

    while (p < end && !points[p]) {
      p++;
    }

    if (p === end) {
      continue;
    }

    if (path) {
      path.moveTo(p % width1, i);
    } else {
      coords = [p % width1, i];
    }

    const p0 = p;
    let type = points[p];

    do {
      const step = steps[type];

      do {
        p += step;
      } while (!points[p]);

      const pp = points[p];

      if (pp !== 5 && pp !== 10) {
        type = pp;
        points[p] = 0;
      } else {
        type = pp & 0x33 * type >> 4;
        points[p] &= type >> 2 | type << 2;
      }

      if (path) {
        path.lineTo(p % width1, p / width1 | 0);
      } else {
        coords.push(p % width1, p / width1 | 0);
      }

      if (!points[p]) {
        --count;
      }
    } while (p0 !== p);

    if (!path) {
      outlines.push(coords);
    }

    --i;
  }

  data = null;
  points = null;

  const drawOutline = function (c) {
    c.save();
    c.scale(1 / width, -1 / height);
    c.translate(0, -height);

    if (path) {
      c.fill(path);
    } else {
      c.beginPath();

      for (const o of outlines) {
        c.moveTo(o[0], o[1]);

        for (let l = 2, ll = o.length; l < ll; l += 2) {
          c.lineTo(o[l], o[l + 1]);
        }
      }

      c.fill();
    }

    c.beginPath();
    c.restore();
  };

  return drawOutline;
}

class CanvasExtraState {
  constructor(width, height) {
    this.alphaIsShape = false;
    this.fontSize = 0;
    this.fontSizeScale = 1;
    this.textMatrix = _util.IDENTITY_MATRIX;
    this.textMatrixScale = 1;
    this.fontMatrix = _util.FONT_IDENTITY_MATRIX;
    this.leading = 0;
    this.x = 0;
    this.y = 0;
    this.lineX = 0;
    this.lineY = 0;
    this.charSpacing = 0;
    this.wordSpacing = 0;
    this.textHScale = 1;
    this.textRenderingMode = _util.TextRenderingMode.FILL;
    this.textRise = 0;
    this.fillColor = "#000000";
    this.strokeColor = "#000000";
    this.patternFill = false;
    this.fillAlpha = 1;
    this.strokeAlpha = 1;
    this.lineWidth = 1;
    this.activeSMask = null;
    this.transferMaps = null;
    this.startNewPathAndClipBox([0, 0, width, height]);
  }

  clone() {
    const clone = Object.create(this);
    clone.clipBox = this.clipBox.slice();
    return clone;
  }

  setCurrentPoint(x, y) {
    this.x = x;
    this.y = y;
  }

  updatePathMinMax(transform, x, y) {
    [x, y] = _util.Util.applyTransform([x, y], transform);
    this.minX = Math.min(this.minX, x);
    this.minY = Math.min(this.minY, y);
    this.maxX = Math.max(this.maxX, x);
    this.maxY = Math.max(this.maxY, y);
  }

  updateRectMinMax(transform, rect) {
    const p1 = _util.Util.applyTransform(rect, transform);

    const p2 = _util.Util.applyTransform(rect.slice(2), transform);

    this.minX = Math.min(this.minX, p1[0], p2[0]);
    this.minY = Math.min(this.minY, p1[1], p2[1]);
    this.maxX = Math.max(this.maxX, p1[0], p2[0]);
    this.maxY = Math.max(this.maxY, p1[1], p2[1]);
  }

  updateScalingPathMinMax(transform, minMax) {
    _util.Util.scaleMinMax(transform, minMax);

    this.minX = Math.min(this.minX, minMax[0]);
    this.maxX = Math.max(this.maxX, minMax[1]);
    this.minY = Math.min(this.minY, minMax[2]);
    this.maxY = Math.max(this.maxY, minMax[3]);
  }

  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {
    const box = _util.Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3);

    if (minMax) {
      minMax[0] = Math.min(minMax[0], box[0], box[2]);
      minMax[1] = Math.max(minMax[1], box[0], box[2]);
      minMax[2] = Math.min(minMax[2], box[1], box[3]);
      minMax[3] = Math.max(minMax[3], box[1], box[3]);
      return;
    }

    this.updateRectMinMax(transform, box);
  }

  getPathBoundingBox(pathType = _pattern_helper.PathType.FILL, transform = null) {
    const box = [this.minX, this.minY, this.maxX, this.maxY];

    if (pathType === _pattern_helper.PathType.STROKE) {
      if (!transform) {
        (0, _util.unreachable)("Stroke bounding box must include transform.");
      }

      const scale = _util.Util.singularValueDecompose2dScale(transform);

      const xStrokePad = scale[0] * this.lineWidth / 2;
      const yStrokePad = scale[1] * this.lineWidth / 2;
      box[0] -= xStrokePad;
      box[1] -= yStrokePad;
      box[2] += xStrokePad;
      box[3] += yStrokePad;
    }

    return box;
  }

  updateClipFromPath() {
    const intersect = _util.Util.intersect(this.clipBox, this.getPathBoundingBox());

    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);
  }

  isEmptyClip() {
    return this.minX === Infinity;
  }

  startNewPathAndClipBox(box) {
    this.clipBox = box;
    this.minX = Infinity;
    this.minY = Infinity;
    this.maxX = 0;
    this.maxY = 0;
  }

  getClippedPathBoundingBox(pathType = _pattern_helper.PathType.FILL, transform = null) {
    return _util.Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));
  }

}

function putBinaryImageData(ctx, imgData, transferMaps = null) {
  if (typeof ImageData !== "undefined" && imgData instanceof ImageData) {
    ctx.putImageData(imgData, 0, 0);
    return;
  }

  const height = imgData.height,
        width = imgData.width;
  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;
  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;
  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;
  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);
  let srcPos = 0,
      destPos;
  const src = imgData.data;
  const dest = chunkImgData.data;
  let i, j, thisChunkHeight, elemsInThisChunk;
  let transferMapRed, transferMapGreen, transferMapBlue, transferMapGray;

  if (transferMaps) {
    switch (transferMaps.length) {
      case 1:
        transferMapRed = transferMaps[0];
        transferMapGreen = transferMaps[0];
        transferMapBlue = transferMaps[0];
        transferMapGray = transferMaps[0];
        break;

      case 4:
        transferMapRed = transferMaps[0];
        transferMapGreen = transferMaps[1];
        transferMapBlue = transferMaps[2];
        transferMapGray = transferMaps[3];
        break;
    }
  }

  if (imgData.kind === _util.ImageKind.GRAYSCALE_1BPP) {
    const srcLength = src.byteLength;
    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);
    const dest32DataLength = dest32.length;
    const fullSrcDiff = width + 7 >> 3;
    let white = 0xffffffff;
    let black = _util.FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;

    if (transferMapGray) {
      if (transferMapGray[0] === 0xff && transferMapGray[0xff] === 0) {
        [white, black] = [black, white];
      }
    }

    for (i = 0; i < totalChunks; i++) {
      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;
      destPos = 0;

      for (j = 0; j < thisChunkHeight; j++) {
        const srcDiff = srcLength - srcPos;
        let k = 0;
        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;
        const kEndUnrolled = kEnd & ~7;
        let mask = 0;
        let srcByte = 0;

        for (; k < kEndUnrolled; k += 8) {
          srcByte = src[srcPos++];
          dest32[destPos++] = srcByte & 128 ? white : black;
          dest32[destPos++] = srcByte & 64 ? white : black;
          dest32[destPos++] = srcByte & 32 ? white : black;
          dest32[destPos++] = srcByte & 16 ? white : black;
          dest32[destPos++] = srcByte & 8 ? white : black;
          dest32[destPos++] = srcByte & 4 ? white : black;
          dest32[destPos++] = srcByte & 2 ? white : black;
          dest32[destPos++] = srcByte & 1 ? white : black;
        }

        for (; k < kEnd; k++) {
          if (mask === 0) {
            srcByte = src[srcPos++];
            mask = 128;
          }

          dest32[destPos++] = srcByte & mask ? white : black;
          mask >>= 1;
        }
      }

      while (destPos < dest32DataLength) {
        dest32[destPos++] = 0;
      }

      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);
    }
  } else if (imgData.kind === _util.ImageKind.RGBA_32BPP) {
    const hasTransferMaps = !!(transferMapRed || transferMapGreen || transferMapBlue);
    j = 0;
    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;

    for (i = 0; i < fullChunks; i++) {
      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));
      srcPos += elemsInThisChunk;

      if (hasTransferMaps) {
        for (let k = 0; k < elemsInThisChunk; k += 4) {
          if (transferMapRed) {
            dest[k + 0] = transferMapRed[dest[k + 0]];
          }

          if (transferMapGreen) {
            dest[k + 1] = transferMapGreen[dest[k + 1]];
          }

          if (transferMapBlue) {
            dest[k + 2] = transferMapBlue[dest[k + 2]];
          }
        }
      }

      ctx.putImageData(chunkImgData, 0, j);
      j += FULL_CHUNK_HEIGHT;
    }

    if (i < totalChunks) {
      elemsInThisChunk = width * partialChunkHeight * 4;
      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));

      if (hasTransferMaps) {
        for (let k = 0; k < elemsInThisChunk; k += 4) {
          if (transferMapRed) {
            dest[k + 0] = transferMapRed[dest[k + 0]];
          }

          if (transferMapGreen) {
            dest[k + 1] = transferMapGreen[dest[k + 1]];
          }

          if (transferMapBlue) {
            dest[k + 2] = transferMapBlue[dest[k + 2]];
          }
        }
      }

      ctx.putImageData(chunkImgData, 0, j);
    }
  } else if (imgData.kind === _util.ImageKind.RGB_24BPP) {
    const hasTransferMaps = !!(transferMapRed || transferMapGreen || transferMapBlue);
    thisChunkHeight = FULL_CHUNK_HEIGHT;
    elemsInThisChunk = width * thisChunkHeight;

    for (i = 0; i < totalChunks; i++) {
      if (i >= fullChunks) {
        thisChunkHeight = partialChunkHeight;
        elemsInThisChunk = width * thisChunkHeight;
      }

      destPos = 0;

      for (j = elemsInThisChunk; j--;) {
        dest[destPos++] = src[srcPos++];
        dest[destPos++] = src[srcPos++];
        dest[destPos++] = src[srcPos++];
        dest[destPos++] = 255;
      }

      if (hasTransferMaps) {
        for (let k = 0; k < destPos; k += 4) {
          if (transferMapRed) {
            dest[k + 0] = transferMapRed[dest[k + 0]];
          }

          if (transferMapGreen) {
            dest[k + 1] = transferMapGreen[dest[k + 1]];
          }

          if (transferMapBlue) {
            dest[k + 2] = transferMapBlue[dest[k + 2]];
          }
        }
      }

      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);
    }
  } else {
    throw new Error(`bad image kind: ${imgData.kind}`);
  }
}

function putBinaryImageMask(ctx, imgData) {
  if (imgData.bitmap) {
    ctx.drawImage(imgData.bitmap, 0, 0);
    return;
  }

  const height = imgData.height,
        width = imgData.width;
  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;
  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;
  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;
  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);
  let srcPos = 0;
  const src = imgData.data;
  const dest = chunkImgData.data;

  for (let i = 0; i < totalChunks; i++) {
    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;
    ({
      srcPos
    } = (0, _image_utils.applyMaskImageData)({
      src,
      srcPos,
      dest,
      width,
      height: thisChunkHeight
    }));
    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);
  }
}

function copyCtxState(sourceCtx, destCtx) {
  const properties = ["strokeStyle", "fillStyle", "fillRule", "globalAlpha", "lineWidth", "lineCap", "lineJoin", "miterLimit", "globalCompositeOperation", "font"];

  for (let i = 0, ii = properties.length; i < ii; i++) {
    const property = properties[i];

    if (sourceCtx[property] !== undefined) {
      destCtx[property] = sourceCtx[property];
    }
  }

  if (sourceCtx.setLineDash !== undefined) {
    destCtx.setLineDash(sourceCtx.getLineDash());
    destCtx.lineDashOffset = sourceCtx.lineDashOffset;
  }
}

function resetCtxToDefault(ctx, foregroundColor) {
  ctx.strokeStyle = ctx.fillStyle = foregroundColor || "#000000";
  ctx.fillRule = "nonzero";
  ctx.globalAlpha = 1;
  ctx.lineWidth = 1;
  ctx.lineCap = "butt";
  ctx.lineJoin = "miter";
  ctx.miterLimit = 10;
  ctx.globalCompositeOperation = "source-over";
  ctx.font = "10px sans-serif";

  if (ctx.setLineDash !== undefined) {
    ctx.setLineDash([]);
    ctx.lineDashOffset = 0;
  }
}

function composeSMaskBackdrop(bytes, r0, g0, b0) {
  const length = bytes.length;

  for (let i = 3; i < length; i += 4) {
    const alpha = bytes[i];

    if (alpha === 0) {
      bytes[i - 3] = r0;
      bytes[i - 2] = g0;
      bytes[i - 1] = b0;
    } else if (alpha < 255) {
      const alpha_ = 255 - alpha;
      bytes[i - 3] = bytes[i - 3] * alpha + r0 * alpha_ >> 8;
      bytes[i - 2] = bytes[i - 2] * alpha + g0 * alpha_ >> 8;
      bytes[i - 1] = bytes[i - 1] * alpha + b0 * alpha_ >> 8;
    }
  }
}

function composeSMaskAlpha(maskData, layerData, transferMap) {
  const length = maskData.length;
  const scale = 1 / 255;

  for (let i = 3; i < length; i += 4) {
    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];
    layerData[i] = layerData[i] * alpha * scale | 0;
  }
}

function composeSMaskLuminosity(maskData, layerData, transferMap) {
  const length = maskData.length;

  for (let i = 3; i < length; i += 4) {
    const y = maskData[i - 3] * 77 + maskData[i - 2] * 152 + maskData[i - 1] * 28;
    layerData[i] = transferMap ? layerData[i] * transferMap[y >> 8] >> 8 : layerData[i] * y >> 16;
  }
}

function genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {
  const hasBackdrop = !!backdrop;
  const r0 = hasBackdrop ? backdrop[0] : 0;
  const g0 = hasBackdrop ? backdrop[1] : 0;
  const b0 = hasBackdrop ? backdrop[2] : 0;
  let composeFn;

  if (subtype === "Luminosity") {
    composeFn = composeSMaskLuminosity;
  } else {
    composeFn = composeSMaskAlpha;
  }

  const PIXELS_TO_PROCESS = 1048576;
  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));

  for (let row = 0; row < height; row += chunkSize) {
    const chunkHeight = Math.min(chunkSize, height - row);
    const maskData = maskCtx.getImageData(layerOffsetX - maskOffsetX, row + (layerOffsetY - maskOffsetY), width, chunkHeight);
    const layerData = layerCtx.getImageData(layerOffsetX, row + layerOffsetY, width, chunkHeight);

    if (hasBackdrop) {
      composeSMaskBackdrop(maskData.data, r0, g0, b0);
    }

    composeFn(maskData.data, layerData.data, transferMap);
    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);
  }
}

function composeSMask(ctx, smask, layerCtx, layerBox) {
  const layerOffsetX = layerBox[0];
  const layerOffsetY = layerBox[1];
  const layerWidth = layerBox[2] - layerOffsetX;
  const layerHeight = layerBox[3] - layerOffsetY;

  if (layerWidth === 0 || layerHeight === 0) {
    return;
  }

  genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);
  ctx.save();
  ctx.globalAlpha = 1;
  ctx.globalCompositeOperation = "source-over";
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  ctx.drawImage(layerCtx.canvas, 0, 0);
  ctx.restore();
}

function getImageSmoothingEnabled(transform, interpolate) {
  const scale = _util.Util.singularValueDecompose2dScale(transform);

  scale[0] = Math.fround(scale[0]);
  scale[1] = Math.fround(scale[1]);
  const actualScale = Math.fround((globalThis.devicePixelRatio || 1) * _display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);

  if (interpolate !== undefined) {
    return interpolate;
  } else if (scale[0] <= actualScale || scale[1] <= actualScale) {
    return true;
  }

  return false;
}

const LINE_CAP_STYLES = ["butt", "round", "square"];
const LINE_JOIN_STYLES = ["miter", "round", "bevel"];
const NORMAL_CLIP = {};
const EO_CLIP = {};

class CanvasGraphics {
  constructor(canvasCtx, commonObjs, objs, canvasFactory, imageLayer, optionalContentConfig, annotationCanvasMap, pageColors) {
    this.ctx = canvasCtx;
    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);
    this.stateStack = [];
    this.pendingClip = null;
    this.pendingEOFill = false;
    this.res = null;
    this.xobjs = null;
    this.commonObjs = commonObjs;
    this.objs = objs;
    this.canvasFactory = canvasFactory;
    this.imageLayer = imageLayer;
    this.groupStack = [];
    this.processingType3 = null;
    this.baseTransform = null;
    this.baseTransformStack = [];
    this.groupLevel = 0;
    this.smaskStack = [];
    this.smaskCounter = 0;
    this.tempSMask = null;
    this.suspendedCtx = null;
    this.contentVisible = true;
    this.markedContentStack = [];
    this.optionalContentConfig = optionalContentConfig;
    this.cachedCanvases = new CachedCanvases(this.canvasFactory);
    this.cachedPatterns = new Map();
    this.annotationCanvasMap = annotationCanvasMap;
    this.viewportScale = 1;
    this.outputScaleX = 1;
    this.outputScaleY = 1;
    this.backgroundColor = pageColors?.background || null;
    this.foregroundColor = pageColors?.foreground || null;

    if (canvasCtx) {
      addContextCurrentTransform(canvasCtx);
    }

    this._cachedScaleForStroking = null;
    this._cachedGetSinglePixelWidth = null;
    this._cachedBitmapsMap = new Map();
  }

  getObject(data, fallback = null) {
    if (typeof data === "string") {
      return data.startsWith("g_") ? this.commonObjs.get(data) : this.objs.get(data);
    }

    return fallback;
  }

  beginDrawing({
    transform,
    viewport,
    transparency = false,
    background = null
  }) {
    const width = this.ctx.canvas.width;
    const height = this.ctx.canvas.height;
    const defaultBackgroundColor = background || "#ffffff";
    this.ctx.save();

    if (this.foregroundColor && this.backgroundColor) {
      this.ctx.fillStyle = this.foregroundColor;
      const fg = this.foregroundColor = this.ctx.fillStyle;
      this.ctx.fillStyle = this.backgroundColor;
      const bg = this.backgroundColor = this.ctx.fillStyle;
      let isValidDefaultBg = true;
      let defaultBg = defaultBackgroundColor;
      this.ctx.fillStyle = defaultBackgroundColor;
      defaultBg = this.ctx.fillStyle;
      isValidDefaultBg = typeof defaultBg === "string" && /^#[0-9A-Fa-f]{6}$/.test(defaultBg);

      if (fg === "#000000" && bg === "#ffffff" || fg === bg || !isValidDefaultBg) {
        this.foregroundColor = this.backgroundColor = null;
      } else {
        const cB = parseInt(defaultBg.slice(1), 16);
        const rB = (cB && 0xff0000) >> 16;
        const gB = (cB && 0x00ff00) >> 8;
        const bB = cB && 0x0000ff;

        const newComp = x => {
          x /= 255;
          return x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;
        };

        const lumB = Math.round(0.2126 * newComp(rB) + 0.7152 * newComp(gB) + 0.0722 * newComp(bB));

        this.selectColor = (r, g, b) => {
          const lumC = 0.2126 * newComp(r) + 0.7152 * newComp(g) + 0.0722 * newComp(b);
          return Math.round(lumC) === lumB ? bg : fg;
        };
      }
    }

    this.ctx.fillStyle = this.backgroundColor || defaultBackgroundColor;
    this.ctx.fillRect(0, 0, width, height);
    this.ctx.restore();

    if (transparency) {
      const transparentCanvas = this.cachedCanvases.getCanvas("transparent", width, height, true);
      this.compositeCtx = this.ctx;
      this.transparentCanvas = transparentCanvas.canvas;
      this.ctx = transparentCanvas.context;
      this.ctx.save();
      this.ctx.transform.apply(this.ctx, this.compositeCtx.mozCurrentTransform);
    }

    this.ctx.save();
    resetCtxToDefault(this.ctx, this.foregroundColor);

    if (transform) {
      this.ctx.transform.apply(this.ctx, transform);
      this.outputScaleX = transform[0];
      this.outputScaleY = transform[0];
    }

    this.ctx.transform.apply(this.ctx, viewport.transform);
    this.viewportScale = viewport.scale;
    this.baseTransform = this.ctx.mozCurrentTransform.slice();

    if (this.imageLayer) {
      this.imageLayer.beginLayout();
    }
  }

  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {
    const argsArray = operatorList.argsArray;
    const fnArray = operatorList.fnArray;
    let i = executionStartIdx || 0;
    const argsArrayLen = argsArray.length;

    if (argsArrayLen === i) {
      return i;
    }

    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === "function";
    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;
    let steps = 0;
    const commonObjs = this.commonObjs;
    const objs = this.objs;
    let fnId;

    while (true) {
      if (stepper !== undefined && i === stepper.nextBreakPoint) {
        stepper.breakIt(i, continueCallback);
        return i;
      }

      fnId = fnArray[i];

      if (fnId !== _util.OPS.dependency) {
        this[fnId].apply(this, argsArray[i]);
      } else {
        for (const depObjId of argsArray[i]) {
          const objsPool = depObjId.startsWith("g_") ? commonObjs : objs;

          if (!objsPool.has(depObjId)) {
            objsPool.get(depObjId, continueCallback);
            return i;
          }
        }
      }

      i++;

      if (i === argsArrayLen) {
        return i;
      }

      if (chunkOperations && ++steps > EXECUTION_STEPS) {
        if (Date.now() > endTime) {
          continueCallback();
          return i;
        }

        steps = 0;
      }
    }
  }

  endDrawing() {
    while (this.stateStack.length || this.inSMaskMode) {
      this.restore();
    }

    this.ctx.restore();

    if (this.transparentCanvas) {
      this.ctx = this.compositeCtx;
      this.ctx.save();
      this.ctx.setTransform(1, 0, 0, 1, 0, 0);
      this.ctx.drawImage(this.transparentCanvas, 0, 0);
      this.ctx.restore();
      this.transparentCanvas = null;
    }

    this.cachedCanvases.clear();
    this.cachedPatterns.clear();

    for (const cache of this._cachedBitmapsMap.values()) {
      for (const canvas of cache.values()) {
        if (typeof HTMLCanvasElement !== "undefined" && canvas instanceof HTMLCanvasElement) {
          canvas.width = canvas.height = 0;
        }
      }

      cache.clear();
    }

    this._cachedBitmapsMap.clear();

    if (this.imageLayer) {
      this.imageLayer.endLayout();
    }
  }

  _scaleImage(img, inverseTransform) {
    const width = img.width;
    const height = img.height;
    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);
    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);
    let paintWidth = width,
        paintHeight = height;
    let tmpCanvasId = "prescale1";
    let tmpCanvas, tmpCtx;

    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {
      let newWidth = paintWidth,
          newHeight = paintHeight;

      if (widthScale > 2 && paintWidth > 1) {
        newWidth = Math.ceil(paintWidth / 2);
        widthScale /= paintWidth / newWidth;
      }

      if (heightScale > 2 && paintHeight > 1) {
        newHeight = Math.ceil(paintHeight / 2);
        heightScale /= paintHeight / newHeight;
      }

      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight, false);
      tmpCtx = tmpCanvas.context;
      tmpCtx.clearRect(0, 0, newWidth, newHeight);
      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);
      img = tmpCanvas.canvas;
      paintWidth = newWidth;
      paintHeight = newHeight;
      tmpCanvasId = tmpCanvasId === "prescale1" ? "prescale2" : "prescale1";
    }

    return {
      img,
      paintWidth,
      paintHeight
    };
  }

  _createMaskCanvas(img) {
    const ctx = this.ctx;
    const {
      width,
      height
    } = img;
    const fillColor = this.current.fillColor;
    const isPatternFill = this.current.patternFill;
    const currentTransform = ctx.mozCurrentTransform;
    let cache, cacheKey, scaled, maskCanvas;

    if ((img.bitmap || img.data) && img.count > 1) {
      const mainKey = img.bitmap || img.data.buffer;
      const withoutTranslation = currentTransform.slice(0, 4);
      cacheKey = JSON.stringify(isPatternFill ? withoutTranslation : [withoutTranslation, fillColor]);
      cache = this._cachedBitmapsMap.get(mainKey);

      if (!cache) {
        cache = new Map();

        this._cachedBitmapsMap.set(mainKey, cache);
      }

      const cachedImage = cache.get(cacheKey);

      if (cachedImage && !isPatternFill) {
        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);
        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);
        return {
          canvas: cachedImage,
          offsetX,
          offsetY
        };
      }

      scaled = cachedImage;
    }

    if (!scaled) {
      maskCanvas = this.cachedCanvases.getCanvas("maskCanvas", width, height, false);
      putBinaryImageMask(maskCanvas.context, img);
    }

    let maskToCanvas = _util.Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);

    maskToCanvas = _util.Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);

    const cord1 = _util.Util.applyTransform([0, 0], maskToCanvas);

    const cord2 = _util.Util.applyTransform([width, height], maskToCanvas);

    const rect = _util.Util.normalizeRect([cord1[0], cord1[1], cord2[0], cord2[1]]);

    const drawnWidth = Math.round(rect[2] - rect[0]) || 1;
    const drawnHeight = Math.round(rect[3] - rect[1]) || 1;
    const fillCanvas = this.cachedCanvases.getCanvas("fillCanvas", drawnWidth, drawnHeight, true);
    const fillCtx = fillCanvas.context;
    const offsetX = Math.min(cord1[0], cord2[0]);
    const offsetY = Math.min(cord1[1], cord2[1]);
    fillCtx.translate(-offsetX, -offsetY);
    fillCtx.transform.apply(fillCtx, maskToCanvas);

    if (!scaled) {
      scaled = this._scaleImage(maskCanvas.canvas, fillCtx.mozCurrentTransformInverse);
      scaled = scaled.img;

      if (cache && isPatternFill) {
        cache.set(cacheKey, scaled);
      }
    }

    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(fillCtx.mozCurrentTransform, img.interpolate);
    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);
    fillCtx.globalCompositeOperation = "source-in";

    const inverse = _util.Util.transform(fillCtx.mozCurrentTransformInverse, [1, 0, 0, 1, -offsetX, -offsetY]);

    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, _pattern_helper.PathType.FILL) : fillColor;
    fillCtx.fillRect(0, 0, width, height);

    if (cache && !isPatternFill) {
      this.cachedCanvases.delete("fillCanvas");
      cache.set(cacheKey, fillCanvas.canvas);
    }

    return {
      canvas: fillCanvas.canvas,
      offsetX: Math.round(offsetX),
      offsetY: Math.round(offsetY)
    };
  }

  setLineWidth(width) {
    if (width !== this.current.lineWidth) {
      this._cachedScaleForStroking = null;
    }

    this.current.lineWidth = width;
    this.ctx.lineWidth = width;
  }

  setLineCap(style) {
    this.ctx.lineCap = LINE_CAP_STYLES[style];
  }

  setLineJoin(style) {
    this.ctx.lineJoin = LINE_JOIN_STYLES[style];
  }

  setMiterLimit(limit) {
    this.ctx.miterLimit = limit;
  }

  setDash(dashArray, dashPhase) {
    const ctx = this.ctx;

    if (ctx.setLineDash !== undefined) {
      ctx.setLineDash(dashArray);
      ctx.lineDashOffset = dashPhase;
    }
  }

  setRenderingIntent(intent) {}

  setFlatness(flatness) {}

  setGState(states) {
    for (let i = 0, ii = states.length; i < ii; i++) {
      const state = states[i];
      const key = state[0];
      const value = state[1];

      switch (key) {
        case "LW":
          this.setLineWidth(value);
          break;

        case "LC":
          this.setLineCap(value);
          break;

        case "LJ":
          this.setLineJoin(value);
          break;

        case "ML":
          this.setMiterLimit(value);
          break;

        case "D":
          this.setDash(value[0], value[1]);
          break;

        case "RI":
          this.setRenderingIntent(value);
          break;

        case "FL":
          this.setFlatness(value);
          break;

        case "Font":
          this.setFont(value[0], value[1]);
          break;

        case "CA":
          this.current.strokeAlpha = state[1];
          break;

        case "ca":
          this.current.fillAlpha = state[1];
          this.ctx.globalAlpha = state[1];
          break;

        case "BM":
          this.ctx.globalCompositeOperation = value;
          break;

        case "SMask":
          this.current.activeSMask = value ? this.tempSMask : null;
          this.tempSMask = null;
          this.checkSMaskState();
          break;

        case "TR":
          this.current.transferMaps = value;
      }
    }
  }

  get inSMaskMode() {
    return !!this.suspendedCtx;
  }

  checkSMaskState() {
    const inSMaskMode = this.inSMaskMode;

    if (this.current.activeSMask && !inSMaskMode) {
      this.beginSMaskMode();
    } else if (!this.current.activeSMask && inSMaskMode) {
      this.endSMaskMode();
    }
  }

  beginSMaskMode() {
    if (this.inSMaskMode) {
      throw new Error("beginSMaskMode called while already in smask mode");
    }

    const drawnWidth = this.ctx.canvas.width;
    const drawnHeight = this.ctx.canvas.height;
    const cacheId = "smaskGroupAt" + this.groupLevel;
    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight, true);
    this.suspendedCtx = this.ctx;
    this.ctx = scratchCanvas.context;
    const ctx = this.ctx;
    ctx.setTransform.apply(ctx, this.suspendedCtx.mozCurrentTransform);
    copyCtxState(this.suspendedCtx, ctx);
    mirrorContextOperations(ctx, this.suspendedCtx);
    this.setGState([["BM", "source-over"], ["ca", 1], ["CA", 1]]);
  }

  endSMaskMode() {
    if (!this.inSMaskMode) {
      throw new Error("endSMaskMode called while not in smask mode");
    }

    this.ctx._removeMirroring();

    copyCtxState(this.ctx, this.suspendedCtx);
    this.ctx = this.suspendedCtx;
    this.suspendedCtx = null;
  }

  compose(dirtyBox) {
    if (!this.current.activeSMask) {
      return;
    }

    if (!dirtyBox) {
      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];
    } else {
      dirtyBox[0] = Math.floor(dirtyBox[0]);
      dirtyBox[1] = Math.floor(dirtyBox[1]);
      dirtyBox[2] = Math.ceil(dirtyBox[2]);
      dirtyBox[3] = Math.ceil(dirtyBox[3]);
    }

    const smask = this.current.activeSMask;
    const suspendedCtx = this.suspendedCtx;
    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);
    this.ctx.save();
    this.ctx.setTransform(1, 0, 0, 1, 0, 0);
    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);
    this.ctx.restore();
  }

  save() {
    if (this.inSMaskMode) {
      copyCtxState(this.ctx, this.suspendedCtx);
      this.suspendedCtx.save();
    } else {
      this.ctx.save();
    }

    const old = this.current;
    this.stateStack.push(old);
    this.current = old.clone();
  }

  restore() {
    if (this.stateStack.length === 0 && this.inSMaskMode) {
      this.endSMaskMode();
    }

    if (this.stateStack.length !== 0) {
      this.current = this.stateStack.pop();

      if (this.inSMaskMode) {
        this.suspendedCtx.restore();
        copyCtxState(this.suspendedCtx, this.ctx);
      } else {
        this.ctx.restore();
      }

      this.checkSMaskState();
      this.pendingClip = null;
      this._cachedScaleForStroking = null;
      this._cachedGetSinglePixelWidth = null;
    }
  }

  transform(a, b, c, d, e, f) {
    this.ctx.transform(a, b, c, d, e, f);
    this._cachedScaleForStroking = null;
    this._cachedGetSinglePixelWidth = null;
  }

  constructPath(ops, args, minMax) {
    const ctx = this.ctx;
    const current = this.current;
    let x = current.x,
        y = current.y;
    let startX, startY;
    const currentTransform = ctx.mozCurrentTransform;
    const isScalingMatrix = currentTransform[0] === 0 && currentTransform[3] === 0 || currentTransform[1] === 0 && currentTransform[2] === 0;
    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;

    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {
      switch (ops[i] | 0) {
        case _util.OPS.rectangle:
          x = args[j++];
          y = args[j++];
          const width = args[j++];
          const height = args[j++];
          const xw = x + width;
          const yh = y + height;
          ctx.moveTo(x, y);

          if (width === 0 || height === 0) {
            ctx.lineTo(xw, yh);
          } else {
            ctx.lineTo(xw, y);
            ctx.lineTo(xw, yh);
            ctx.lineTo(x, yh);
          }

          if (!isScalingMatrix) {
            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);
          }

          ctx.closePath();
          break;

        case _util.OPS.moveTo:
          x = args[j++];
          y = args[j++];
          ctx.moveTo(x, y);

          if (!isScalingMatrix) {
            current.updatePathMinMax(currentTransform, x, y);
          }

          break;

        case _util.OPS.lineTo:
          x = args[j++];
          y = args[j++];
          ctx.lineTo(x, y);

          if (!isScalingMatrix) {
            current.updatePathMinMax(currentTransform, x, y);
          }

          break;

        case _util.OPS.curveTo:
          startX = x;
          startY = y;
          x = args[j + 4];
          y = args[j + 5];
          ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);
          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], args[j + 2], args[j + 3], x, y, minMaxForBezier);
          j += 6;
          break;

        case _util.OPS.curveTo2:
          startX = x;
          startY = y;
          ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);
          current.updateCurvePathMinMax(currentTransform, startX, startY, x, y, args[j], args[j + 1], args[j + 2], args[j + 3], minMaxForBezier);
          x = args[j + 2];
          y = args[j + 3];
          j += 4;
          break;

        case _util.OPS.curveTo3:
          startX = x;
          startY = y;
          x = args[j + 2];
          y = args[j + 3];
          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);
          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], x, y, x, y, minMaxForBezier);
          j += 4;
          break;

        case _util.OPS.closePath:
          ctx.closePath();
          break;
      }
    }

    if (isScalingMatrix) {
      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);
    }

    current.setCurrentPoint(x, y);
  }

  closePath() {
    this.ctx.closePath();
  }

  stroke(consumePath) {
    consumePath = typeof consumePath !== "undefined" ? consumePath : true;
    const ctx = this.ctx;
    const strokeColor = this.current.strokeColor;
    ctx.globalAlpha = this.current.strokeAlpha;

    if (this.contentVisible) {
      if (typeof strokeColor === "object" && strokeColor?.getPattern) {
        ctx.save();
        ctx.strokeStyle = strokeColor.getPattern(ctx, this, ctx.mozCurrentTransformInverse, _pattern_helper.PathType.STROKE);
        this.rescaleAndStroke(false);
        ctx.restore();
      } else {
        this.rescaleAndStroke(true);
      }
    }

    if (consumePath) {
      this.consumePath(this.current.getClippedPathBoundingBox());
    }

    ctx.globalAlpha = this.current.fillAlpha;
  }

  closeStroke() {
    this.closePath();
    this.stroke();
  }

  fill(consumePath) {
    consumePath = typeof consumePath !== "undefined" ? consumePath : true;
    const ctx = this.ctx;
    const fillColor = this.current.fillColor;
    const isPatternFill = this.current.patternFill;
    let needRestore = false;

    if (isPatternFill) {
      ctx.save();
      ctx.fillStyle = fillColor.getPattern(ctx, this, ctx.mozCurrentTransformInverse, _pattern_helper.PathType.FILL);
      needRestore = true;
    }

    const intersect = this.current.getClippedPathBoundingBox();

    if (this.contentVisible && intersect !== null) {
      if (this.pendingEOFill) {
        ctx.fill("evenodd");
        this.pendingEOFill = false;
      } else {
        ctx.fill();
      }
    }

    if (needRestore) {
      ctx.restore();
    }

    if (consumePath) {
      this.consumePath(intersect);
    }
  }

  eoFill() {
    this.pendingEOFill = true;
    this.fill();
  }

  fillStroke() {
    this.fill(false);
    this.stroke(false);
    this.consumePath();
  }

  eoFillStroke() {
    this.pendingEOFill = true;
    this.fillStroke();
  }

  closeFillStroke() {
    this.closePath();
    this.fillStroke();
  }

  closeEOFillStroke() {
    this.pendingEOFill = true;
    this.closePath();
    this.fillStroke();
  }

  endPath() {
    this.consumePath();
  }

  clip() {
    this.pendingClip = NORMAL_CLIP;
  }

  eoClip() {
    this.pendingClip = EO_CLIP;
  }

  beginText() {
    this.current.textMatrix = _util.IDENTITY_MATRIX;
    this.current.textMatrixScale = 1;
    this.current.x = this.current.lineX = 0;
    this.current.y = this.current.lineY = 0;
  }

  endText() {
    const paths = this.pendingTextPaths;
    const ctx = this.ctx;

    if (paths === undefined) {
      ctx.beginPath();
      return;
    }

    ctx.save();
    ctx.beginPath();

    for (let i = 0; i < paths.length; i++) {
      const path = paths[i];
      ctx.setTransform.apply(ctx, path.transform);
      ctx.translate(path.x, path.y);
      path.addToPath(ctx, path.fontSize);
    }

    ctx.restore();
    ctx.clip();
    ctx.beginPath();
    delete this.pendingTextPaths;
  }

  setCharSpacing(spacing) {
    this.current.charSpacing = spacing;
  }

  setWordSpacing(spacing) {
    this.current.wordSpacing = spacing;
  }

  setHScale(scale) {
    this.current.textHScale = scale / 100;
  }

  setLeading(leading) {
    this.current.leading = -leading;
  }

  setFont(fontRefName, size) {
    const fontObj = this.commonObjs.get(fontRefName);
    const current = this.current;

    if (!fontObj) {
      throw new Error(`Can't find font for ${fontRefName}`);
    }

    current.fontMatrix = fontObj.fontMatrix || _util.FONT_IDENTITY_MATRIX;

    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {
      (0, _util.warn)("Invalid font matrix for font " + fontRefName);
    }

    if (size < 0) {
      size = -size;
      current.fontDirection = -1;
    } else {
      current.fontDirection = 1;
    }

    this.current.font = fontObj;
    this.current.fontSize = size;

    if (fontObj.isType3Font) {
      return;
    }

    const name = fontObj.loadedName || "sans-serif";
    let bold = "normal";

    if (fontObj.black) {
      bold = "900";
    } else if (fontObj.bold) {
      bold = "bold";
    }

    const italic = fontObj.italic ? "italic" : "normal";
    const typeface = `"${name}", ${fontObj.fallbackName}`;
    let browserFontSize = size;

    if (size < MIN_FONT_SIZE) {
      browserFontSize = MIN_FONT_SIZE;
    } else if (size > MAX_FONT_SIZE) {
      browserFontSize = MAX_FONT_SIZE;
    }

    this.current.fontSizeScale = size / browserFontSize;
    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;
  }

  setTextRenderingMode(mode) {
    this.current.textRenderingMode = mode;
  }

  setTextRise(rise) {
    this.current.textRise = rise;
  }

  moveText(x, y) {
    this.current.x = this.current.lineX += x;
    this.current.y = this.current.lineY += y;
  }

  setLeadingMoveText(x, y) {
    this.setLeading(-y);
    this.moveText(x, y);
  }

  setTextMatrix(a, b, c, d, e, f) {
    this.current.textMatrix = [a, b, c, d, e, f];
    this.current.textMatrixScale = Math.hypot(a, b);
    this.current.x = this.current.lineX = 0;
    this.current.y = this.current.lineY = 0;
  }

  nextLine() {
    this.moveText(0, this.current.leading);
  }

  paintChar(character, x, y, patternTransform) {
    const ctx = this.ctx;
    const current = this.current;
    const font = current.font;
    const textRenderingMode = current.textRenderingMode;
    const fontSize = current.fontSize / current.fontSizeScale;
    const fillStrokeMode = textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;
    const isAddToPathSet = !!(textRenderingMode & _util.TextRenderingMode.ADD_TO_PATH_FLAG);
    const patternFill = current.patternFill && !font.missingFile;
    let addToPath;

    if (font.disableFontFace || isAddToPathSet || patternFill) {
      addToPath = font.getPathGenerator(this.commonObjs, character);
    }

    if (font.disableFontFace || patternFill) {
      ctx.save();
      ctx.translate(x, y);
      ctx.beginPath();
      addToPath(ctx, fontSize);

      if (patternTransform) {
        ctx.setTransform.apply(ctx, patternTransform);
      }

      if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        ctx.fill();
      }

      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        ctx.stroke();
      }

      ctx.restore();
    } else {
      if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        ctx.fillText(character, x, y);
      }

      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        ctx.strokeText(character, x, y);
      }
    }

    if (isAddToPathSet) {
      const paths = this.pendingTextPaths || (this.pendingTextPaths = []);
      paths.push({
        transform: ctx.mozCurrentTransform,
        x,
        y,
        fontSize,
        addToPath
      });
    }
  }

  get isFontSubpixelAAEnabled() {
    const {
      context: ctx
    } = this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled", 10, 10, false);
    ctx.scale(1.5, 1);
    ctx.fillText("I", 0, 10);
    const data = ctx.getImageData(0, 0, 10, 10).data;
    let enabled = false;

    for (let i = 3; i < data.length; i += 4) {
      if (data[i] > 0 && data[i] < 255) {
        enabled = true;
        break;
      }
    }

    return (0, _util.shadow)(this, "isFontSubpixelAAEnabled", enabled);
  }

  showText(glyphs) {
    const current = this.current;
    const font = current.font;

    if (font.isType3Font) {
      return this.showType3Text(glyphs);
    }

    const fontSize = current.fontSize;

    if (fontSize === 0) {
      return undefined;
    }

    const ctx = this.ctx;
    const fontSizeScale = current.fontSizeScale;
    const charSpacing = current.charSpacing;
    const wordSpacing = current.wordSpacing;
    const fontDirection = current.fontDirection;
    const textHScale = current.textHScale * fontDirection;
    const glyphsLength = glyphs.length;
    const vertical = font.vertical;
    const spacingDir = vertical ? 1 : -1;
    const defaultVMetrics = font.defaultVMetrics;
    const widthAdvanceScale = fontSize * current.fontMatrix[0];
    const simpleFillText = current.textRenderingMode === _util.TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;
    ctx.save();
    ctx.transform.apply(ctx, current.textMatrix);
    ctx.translate(current.x, current.y + current.textRise);

    if (fontDirection > 0) {
      ctx.scale(textHScale, -1);
    } else {
      ctx.scale(textHScale, 1);
    }

    let patternTransform;

    if (current.patternFill) {
      ctx.save();
      const pattern = current.fillColor.getPattern(ctx, this, ctx.mozCurrentTransformInverse, _pattern_helper.PathType.FILL);
      patternTransform = ctx.mozCurrentTransform;
      ctx.restore();
      ctx.fillStyle = pattern;
    }

    let lineWidth = current.lineWidth;
    const scale = current.textMatrixScale;

    if (scale === 0 || lineWidth === 0) {
      const fillStrokeMode = current.textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;

      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        lineWidth = this.getSinglePixelWidth();
      }
    } else {
      lineWidth /= scale;
    }

    if (fontSizeScale !== 1.0) {
      ctx.scale(fontSizeScale, fontSizeScale);
      lineWidth /= fontSizeScale;
    }

    ctx.lineWidth = lineWidth;
    let x = 0,
        i;

    for (i = 0; i < glyphsLength; ++i) {
      const glyph = glyphs[i];

      if (typeof glyph === "number") {
        x += spacingDir * glyph * fontSize / 1000;
        continue;
      }

      let restoreNeeded = false;
      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;
      const character = glyph.fontChar;
      const accent = glyph.accent;
      let scaledX, scaledY;
      let width = glyph.width;

      if (vertical) {
        const vmetric = glyph.vmetric || defaultVMetrics;
        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;
        const vy = vmetric[2] * widthAdvanceScale;
        width = vmetric ? -vmetric[0] : width;
        scaledX = vx / fontSizeScale;
        scaledY = (x + vy) / fontSizeScale;
      } else {
        scaledX = x / fontSizeScale;
        scaledY = 0;
      }

      if (font.remeasure && width > 0) {
        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;

        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {
          const characterScaleX = width / measuredWidth;
          restoreNeeded = true;
          ctx.save();
          ctx.scale(characterScaleX, 1);
          scaledX /= characterScaleX;
        } else if (width !== measuredWidth) {
          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;
        }
      }

      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {
        if (simpleFillText && !accent) {
          ctx.fillText(character, scaledX, scaledY);
        } else {
          this.paintChar(character, scaledX, scaledY, patternTransform);

          if (accent) {
            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;
            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;
            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);
          }
        }
      }

      let charWidth;

      if (vertical) {
        charWidth = width * widthAdvanceScale - spacing * fontDirection;
      } else {
        charWidth = width * widthAdvanceScale + spacing * fontDirection;
      }

      x += charWidth;

      if (restoreNeeded) {
        ctx.restore();
      }
    }

    if (vertical) {
      current.y -= x;
    } else {
      current.x += x * textHScale;
    }

    ctx.restore();
    this.compose();
    return undefined;
  }

  showType3Text(glyphs) {
    const ctx = this.ctx;
    const current = this.current;
    const font = current.font;
    const fontSize = current.fontSize;
    const fontDirection = current.fontDirection;
    const spacingDir = font.vertical ? 1 : -1;
    const charSpacing = current.charSpacing;
    const wordSpacing = current.wordSpacing;
    const textHScale = current.textHScale * fontDirection;
    const fontMatrix = current.fontMatrix || _util.FONT_IDENTITY_MATRIX;
    const glyphsLength = glyphs.length;
    const isTextInvisible = current.textRenderingMode === _util.TextRenderingMode.INVISIBLE;
    let i, glyph, width, spacingLength;

    if (isTextInvisible || fontSize === 0) {
      return;
    }

    this._cachedScaleForStroking = null;
    this._cachedGetSinglePixelWidth = null;
    ctx.save();
    ctx.transform.apply(ctx, current.textMatrix);
    ctx.translate(current.x, current.y);
    ctx.scale(textHScale, fontDirection);

    for (i = 0; i < glyphsLength; ++i) {
      glyph = glyphs[i];

      if (typeof glyph === "number") {
        spacingLength = spacingDir * glyph * fontSize / 1000;
        this.ctx.translate(spacingLength, 0);
        current.x += spacingLength * textHScale;
        continue;
      }

      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;
      const operatorList = font.charProcOperatorList[glyph.operatorListId];

      if (!operatorList) {
        (0, _util.warn)(`Type3 character "${glyph.operatorListId}" is not available.`);
        continue;
      }

      if (this.contentVisible) {
        this.processingType3 = glyph;
        this.save();
        ctx.scale(fontSize, fontSize);
        ctx.transform.apply(ctx, fontMatrix);
        this.executeOperatorList(operatorList);
        this.restore();
      }

      const transformed = _util.Util.applyTransform([glyph.width, 0], fontMatrix);

      width = transformed[0] * fontSize + spacing;
      ctx.translate(width, 0);
      current.x += width * textHScale;
    }

    ctx.restore();
    this.processingType3 = null;
  }

  setCharWidth(xWidth, yWidth) {}

  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {
    this.ctx.rect(llx, lly, urx - llx, ury - lly);
    this.ctx.clip();
    this.endPath();
  }

  getColorN_Pattern(IR) {
    let pattern;

    if (IR[0] === "TilingPattern") {
      const color = IR[1];
      const baseTransform = this.baseTransform || this.ctx.mozCurrentTransform.slice();
      const canvasGraphicsFactory = {
        createCanvasGraphics: ctx => {
          return new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory);
        }
      };
      pattern = new _pattern_helper.TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);
    } else {
      pattern = this._getPattern(IR[1], IR[2]);
    }

    return pattern;
  }

  setStrokeColorN() {
    this.current.strokeColor = this.getColorN_Pattern(arguments);
  }

  setFillColorN() {
    this.current.fillColor = this.getColorN_Pattern(arguments);
    this.current.patternFill = true;
  }

  setStrokeRGBColor(r, g, b) {
    const color = this.selectColor?.(r, g, b) || _util.Util.makeHexColor(r, g, b);

    this.ctx.strokeStyle = color;
    this.current.strokeColor = color;
  }

  setFillRGBColor(r, g, b) {
    const color = this.selectColor?.(r, g, b) || _util.Util.makeHexColor(r, g, b);

    this.ctx.fillStyle = color;
    this.current.fillColor = color;
    this.current.patternFill = false;
  }

  _getPattern(objId, matrix = null) {
    let pattern;

    if (this.cachedPatterns.has(objId)) {
      pattern = this.cachedPatterns.get(objId);
    } else {
      pattern = (0, _pattern_helper.getShadingPattern)(this.objs.get(objId));
      this.cachedPatterns.set(objId, pattern);
    }

    if (matrix) {
      pattern.matrix = matrix;
    }

    return pattern;
  }

  shadingFill(objId) {
    if (!this.contentVisible) {
      return;
    }

    const ctx = this.ctx;
    this.save();

    const pattern = this._getPattern(objId);

    ctx.fillStyle = pattern.getPattern(ctx, this, ctx.mozCurrentTransformInverse, _pattern_helper.PathType.SHADING);
    const inv = ctx.mozCurrentTransformInverse;

    if (inv) {
      const canvas = ctx.canvas;
      const width = canvas.width;
      const height = canvas.height;

      const bl = _util.Util.applyTransform([0, 0], inv);

      const br = _util.Util.applyTransform([0, height], inv);

      const ul = _util.Util.applyTransform([width, 0], inv);

      const ur = _util.Util.applyTransform([width, height], inv);

      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);
      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);
      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);
      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);
      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);
    } else {
      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);
    }

    this.compose(this.current.getClippedPathBoundingBox());
    this.restore();
  }

  beginInlineImage() {
    (0, _util.unreachable)("Should not call beginInlineImage");
  }

  beginImageData() {
    (0, _util.unreachable)("Should not call beginImageData");
  }

  paintFormXObjectBegin(matrix, bbox) {
    if (!this.contentVisible) {
      return;
    }

    this.save();
    this.baseTransformStack.push(this.baseTransform);

    if (Array.isArray(matrix) && matrix.length === 6) {
      this.transform.apply(this, matrix);
    }

    this.baseTransform = this.ctx.mozCurrentTransform;

    if (bbox) {
      const width = bbox[2] - bbox[0];
      const height = bbox[3] - bbox[1];
      this.ctx.rect(bbox[0], bbox[1], width, height);
      this.current.updateRectMinMax(this.ctx.mozCurrentTransform, bbox);
      this.clip();
      this.endPath();
    }
  }

  paintFormXObjectEnd() {
    if (!this.contentVisible) {
      return;
    }

    this.restore();
    this.baseTransform = this.baseTransformStack.pop();
  }

  beginGroup(group) {
    if (!this.contentVisible) {
      return;
    }

    this.save();

    if (this.inSMaskMode) {
      this.endSMaskMode();
      this.current.activeSMask = null;
    }

    const currentCtx = this.ctx;

    if (!group.isolated) {
      (0, _util.info)("TODO: Support non-isolated groups.");
    }

    if (group.knockout) {
      (0, _util.warn)("Knockout groups not supported.");
    }

    const currentTransform = currentCtx.mozCurrentTransform;

    if (group.matrix) {
      currentCtx.transform.apply(currentCtx, group.matrix);
    }

    if (!group.bbox) {
      throw new Error("Bounding box is required.");
    }

    let bounds = _util.Util.getAxialAlignedBoundingBox(group.bbox, currentCtx.mozCurrentTransform);

    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];
    bounds = _util.Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];
    const offsetX = Math.floor(bounds[0]);
    const offsetY = Math.floor(bounds[1]);
    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);
    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);
    let scaleX = 1,
        scaleY = 1;

    if (drawnWidth > MAX_GROUP_SIZE) {
      scaleX = drawnWidth / MAX_GROUP_SIZE;
      drawnWidth = MAX_GROUP_SIZE;
    }

    if (drawnHeight > MAX_GROUP_SIZE) {
      scaleY = drawnHeight / MAX_GROUP_SIZE;
      drawnHeight = MAX_GROUP_SIZE;
    }

    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);
    let cacheId = "groupAt" + this.groupLevel;

    if (group.smask) {
      cacheId += "_smask_" + this.smaskCounter++ % 2;
    }

    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight, true);
    const groupCtx = scratchCanvas.context;
    groupCtx.scale(1 / scaleX, 1 / scaleY);
    groupCtx.translate(-offsetX, -offsetY);
    groupCtx.transform.apply(groupCtx, currentTransform);

    if (group.smask) {
      this.smaskStack.push({
        canvas: scratchCanvas.canvas,
        context: groupCtx,
        offsetX,
        offsetY,
        scaleX,
        scaleY,
        subtype: group.smask.subtype,
        backdrop: group.smask.backdrop,
        transferMap: group.smask.transferMap || null,
        startTransformInverse: null
      });
    } else {
      currentCtx.setTransform(1, 0, 0, 1, 0, 0);
      currentCtx.translate(offsetX, offsetY);
      currentCtx.scale(scaleX, scaleY);
      currentCtx.save();
    }

    copyCtxState(currentCtx, groupCtx);
    this.ctx = groupCtx;
    this.setGState([["BM", "source-over"], ["ca", 1], ["CA", 1]]);
    this.groupStack.push(currentCtx);
    this.groupLevel++;
  }

  endGroup(group) {
    if (!this.contentVisible) {
      return;
    }

    this.groupLevel--;
    const groupCtx = this.ctx;
    const ctx = this.groupStack.pop();
    this.ctx = ctx;
    this.ctx.imageSmoothingEnabled = false;

    if (group.smask) {
      this.tempSMask = this.smaskStack.pop();
      this.restore();
    } else {
      this.ctx.restore();
      const currentMtx = this.ctx.mozCurrentTransform;
      this.restore();
      this.ctx.save();
      this.ctx.setTransform.apply(this.ctx, currentMtx);

      const dirtyBox = _util.Util.getAxialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx);

      this.ctx.drawImage(groupCtx.canvas, 0, 0);
      this.ctx.restore();
      this.compose(dirtyBox);
    }
  }

  beginAnnotations() {
    this.save();

    if (this.baseTransform) {
      this.ctx.setTransform.apply(this.ctx, this.baseTransform);
    }
  }

  endAnnotations() {
    this.restore();
  }

  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {
    this.save();

    if (Array.isArray(rect) && rect.length === 4) {
      const width = rect[2] - rect[0];
      const height = rect[3] - rect[1];

      if (hasOwnCanvas && this.annotationCanvasMap) {
        transform = transform.slice();
        transform[4] -= rect[0];
        transform[5] -= rect[1];
        rect = rect.slice();
        rect[0] = rect[1] = 0;
        rect[2] = width;
        rect[3] = height;

        const [scaleX, scaleY] = _util.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform);

        const {
          viewportScale
        } = this;
        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);
        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);
        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);
        const {
          canvas,
          context
        } = this.annotationCanvas;
        const viewportScaleFactorStr = `var(--zoom-factor) * ${_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS}`;
        canvas.style.width = `calc(${width}px * ${viewportScaleFactorStr})`;
        canvas.style.height = `calc(${height}px * ${viewportScaleFactorStr})`;
        this.annotationCanvasMap.set(id, canvas);
        this.annotationCanvas.savedCtx = this.ctx;
        this.ctx = context;
        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);
        addContextCurrentTransform(this.ctx);
        resetCtxToDefault(this.ctx, this.foregroundColor);
      } else {
        resetCtxToDefault(this.ctx, this.foregroundColor);
        this.ctx.rect(rect[0], rect[1], width, height);
        this.ctx.clip();
        this.endPath();
      }
    }

    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);
    this.transform.apply(this, transform);
    this.transform.apply(this, matrix);
  }

  endAnnotation() {
    if (this.annotationCanvas) {
      this.ctx = this.annotationCanvas.savedCtx;
      delete this.annotationCanvas.savedCtx;
      delete this.annotationCanvas;
    }

    this.restore();
  }

  paintImageMaskXObject(img) {
    if (!this.contentVisible) {
      return;
    }

    const count = img.count;
    img = this.getObject(img.data, img);
    img.count = count;
    const ctx = this.ctx;
    const glyph = this.processingType3;

    if (glyph) {
      if (glyph.compiled === undefined) {
        glyph.compiled = compileType3Glyph(img);
      }

      if (glyph.compiled) {
        glyph.compiled(ctx);
        return;
      }
    }

    const mask = this._createMaskCanvas(img);

    const maskCanvas = mask.canvas;
    ctx.save();
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);
    ctx.restore();
    this.compose();
  }

  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {
    if (!this.contentVisible) {
      return;
    }

    img = this.getObject(img.data, img);
    const ctx = this.ctx;
    ctx.save();
    const currentTransform = ctx.mozCurrentTransform;
    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);

    const mask = this._createMaskCanvas(img);

    ctx.setTransform(1, 0, 0, 1, 0, 0);

    for (let i = 0, ii = positions.length; i < ii; i += 2) {
      const trans = _util.Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);

      const [x, y] = _util.Util.applyTransform([0, 0], trans);

      ctx.drawImage(mask.canvas, x, y);
    }

    ctx.restore();
    this.compose();
  }

  paintImageMaskXObjectGroup(images) {
    if (!this.contentVisible) {
      return;
    }

    const ctx = this.ctx;
    const fillColor = this.current.fillColor;
    const isPatternFill = this.current.patternFill;

    for (let i = 0, ii = images.length; i < ii; i++) {
      const image = images[i];
      const width = image.width,
            height = image.height;
      const maskCanvas = this.cachedCanvases.getCanvas("maskCanvas", width, height, false);
      const maskCtx = maskCanvas.context;
      maskCtx.save();
      putBinaryImageMask(maskCtx, image);
      maskCtx.globalCompositeOperation = "source-in";
      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, ctx.mozCurrentTransformInverse, _pattern_helper.PathType.FILL) : fillColor;
      maskCtx.fillRect(0, 0, width, height);
      maskCtx.restore();
      ctx.save();
      ctx.transform.apply(ctx, image.transform);
      ctx.scale(1, -1);
      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);
      ctx.restore();
    }

    this.compose();
  }

  paintImageXObject(objId) {
    if (!this.contentVisible) {
      return;
    }

    const imgData = this.getObject(objId);

    if (!imgData) {
      (0, _util.warn)("Dependent image isn't ready yet");
      return;
    }

    this.paintInlineImageXObject(imgData);
  }

  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {
    if (!this.contentVisible) {
      return;
    }

    const imgData = this.getObject(objId);

    if (!imgData) {
      (0, _util.warn)("Dependent image isn't ready yet");
      return;
    }

    const width = imgData.width;
    const height = imgData.height;
    const map = [];

    for (let i = 0, ii = positions.length; i < ii; i += 2) {
      map.push({
        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],
        x: 0,
        y: 0,
        w: width,
        h: height
      });
    }

    this.paintInlineImageXObjectGroup(imgData, map);
  }

  paintInlineImageXObject(imgData) {
    if (!this.contentVisible) {
      return;
    }

    const width = imgData.width;
    const height = imgData.height;
    const ctx = this.ctx;
    this.save();
    ctx.scale(1 / width, -1 / height);
    let imgToPaint;

    if (typeof HTMLElement === "function" && imgData instanceof HTMLElement || !imgData.data) {
      imgToPaint = imgData;
    } else {
      const tmpCanvas = this.cachedCanvases.getCanvas("inlineImage", width, height, false);
      const tmpCtx = tmpCanvas.context;
      putBinaryImageData(tmpCtx, imgData, this.current.transferMaps);
      imgToPaint = tmpCanvas.canvas;
    }

    const scaled = this._scaleImage(imgToPaint, ctx.mozCurrentTransformInverse);

    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(ctx.mozCurrentTransform, imgData.interpolate);
    const [rWidth, rHeight] = drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);

    if (this.imageLayer) {
      const position = this.getCanvasPosition(0, -height);
      this.imageLayer.appendImage({
        imgData,
        left: position[0],
        top: position[1],
        width: rWidth,
        height: rHeight
      });
    }

    this.compose();
    this.restore();
  }

  paintInlineImageXObjectGroup(imgData, map) {
    if (!this.contentVisible) {
      return;
    }

    const ctx = this.ctx;
    const w = imgData.width;
    const h = imgData.height;
    const tmpCanvas = this.cachedCanvases.getCanvas("inlineImage", w, h, false);
    const tmpCtx = tmpCanvas.context;
    putBinaryImageData(tmpCtx, imgData, this.current.transferMaps);

    for (let i = 0, ii = map.length; i < ii; i++) {
      const entry = map[i];
      ctx.save();
      ctx.transform.apply(ctx, entry.transform);
      ctx.scale(1, -1);
      drawImageAtIntegerCoords(ctx, tmpCanvas.canvas, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);

      if (this.imageLayer) {
        const position = this.getCanvasPosition(entry.x, entry.y);
        this.imageLayer.appendImage({
          imgData,
          left: position[0],
          top: position[1],
          width: w,
          height: h
        });
      }

      ctx.restore();
    }

    this.compose();
  }

  paintSolidColorImageMask() {
    if (!this.contentVisible) {
      return;
    }

    this.ctx.fillRect(0, 0, 1, 1);
    this.compose();
  }

  markPoint(tag) {}

  markPointProps(tag, properties) {}

  beginMarkedContent(tag) {
    this.markedContentStack.push({
      visible: true
    });
  }

  beginMarkedContentProps(tag, properties) {
    if (tag === "OC") {
      this.markedContentStack.push({
        visible: this.optionalContentConfig.isVisible(properties)
      });
    } else {
      this.markedContentStack.push({
        visible: true
      });
    }

    this.contentVisible = this.isContentVisible();
  }

  endMarkedContent() {
    this.markedContentStack.pop();
    this.contentVisible = this.isContentVisible();
  }

  beginCompat() {}

  endCompat() {}

  consumePath(clipBox) {
    const isEmpty = this.current.isEmptyClip();

    if (this.pendingClip) {
      this.current.updateClipFromPath();
    }

    if (!this.pendingClip) {
      this.compose(clipBox);
    }

    const ctx = this.ctx;

    if (this.pendingClip) {
      if (!isEmpty) {
        if (this.pendingClip === EO_CLIP) {
          ctx.clip("evenodd");
        } else {
          ctx.clip();
        }
      }

      this.pendingClip = null;
    }

    this.current.startNewPathAndClipBox(this.current.clipBox);
    ctx.beginPath();
  }

  getSinglePixelWidth() {
    if (!this._cachedGetSinglePixelWidth) {
      const m = this.ctx.mozCurrentTransform;

      if (m[1] === 0 && m[2] === 0) {
        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));
      } else {
        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);
        const normX = Math.hypot(m[0], m[2]);
        const normY = Math.hypot(m[1], m[3]);
        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;
      }
    }

    return this._cachedGetSinglePixelWidth;
  }

  getScaleForStroking() {
    if (!this._cachedScaleForStroking) {
      const {
        lineWidth
      } = this.current;
      const m = this.ctx.mozCurrentTransform;
      let scaleX, scaleY;

      if (m[1] === 0 && m[2] === 0) {
        const normX = Math.abs(m[0]);
        const normY = Math.abs(m[3]);

        if (lineWidth === 0) {
          scaleX = 1 / normX;
          scaleY = 1 / normY;
        } else {
          const scaledXLineWidth = normX * lineWidth;
          const scaledYLineWidth = normY * lineWidth;
          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;
          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;
        }
      } else {
        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);
        const normX = Math.hypot(m[0], m[1]);
        const normY = Math.hypot(m[2], m[3]);

        if (lineWidth === 0) {
          scaleX = normY / absDet;
          scaleY = normX / absDet;
        } else {
          const baseArea = lineWidth * absDet;
          scaleX = normY > baseArea ? normY / baseArea : 1;
          scaleY = normX > baseArea ? normX / baseArea : 1;
        }
      }

      this._cachedScaleForStroking = [scaleX, scaleY];
    }

    return this._cachedScaleForStroking;
  }

  rescaleAndStroke(saveRestore) {
    const {
      ctx
    } = this;
    const {
      lineWidth
    } = this.current;
    const [scaleX, scaleY] = this.getScaleForStroking();
    ctx.lineWidth = lineWidth || 1;

    if (scaleX === 1 && scaleY === 1) {
      ctx.stroke();
      return;
    }

    let savedMatrix, savedDashes, savedDashOffset;

    if (saveRestore) {
      savedMatrix = ctx.mozCurrentTransform.slice();
      savedDashes = ctx.getLineDash().slice();
      savedDashOffset = ctx.lineDashOffset;
    }

    ctx.scale(scaleX, scaleY);
    const scale = Math.max(scaleX, scaleY);
    ctx.setLineDash(ctx.getLineDash().map(x => x / scale));
    ctx.lineDashOffset /= scale;
    ctx.stroke();

    if (saveRestore) {
      ctx.setTransform(...savedMatrix);
      ctx.setLineDash(savedDashes);
      ctx.lineDashOffset = savedDashOffset;
    }
  }

  getCanvasPosition(x, y) {
    const transform = this.ctx.mozCurrentTransform;
    return [transform[0] * x + transform[2] * y + transform[4], transform[1] * x + transform[3] * y + transform[5]];
  }

  isContentVisible() {
    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {
      if (!this.markedContentStack[i].visible) {
        return false;
      }
    }

    return true;
  }

}

exports.CanvasGraphics = CanvasGraphics;

for (const op in _util.OPS) {
  if (CanvasGraphics.prototype[op] !== undefined) {
    CanvasGraphics.prototype[_util.OPS[op]] = CanvasGraphics.prototype[op];
  }
}

/***/ }),
/* 11 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.TilingPattern = exports.PathType = void 0;
exports.getShadingPattern = getShadingPattern;

var _util = __w_pdfjs_require__(1);

var _is_node = __w_pdfjs_require__(3);

const PathType = {
  FILL: "Fill",
  STROKE: "Stroke",
  SHADING: "Shading"
};
exports.PathType = PathType;

function applyBoundingBox(ctx, bbox) {
  if (!bbox || _is_node.isNodeJS) {
    return;
  }

  const width = bbox[2] - bbox[0];
  const height = bbox[3] - bbox[1];
  const region = new Path2D();
  region.rect(bbox[0], bbox[1], width, height);
  ctx.clip(region);
}

class BaseShadingPattern {
  constructor() {
    if (this.constructor === BaseShadingPattern) {
      (0, _util.unreachable)("Cannot initialize BaseShadingPattern.");
    }
  }

  getPattern() {
    (0, _util.unreachable)("Abstract method `getPattern` called.");
  }

}

class RadialAxialShadingPattern extends BaseShadingPattern {
  constructor(IR) {
    super();
    this._type = IR[1];
    this._bbox = IR[2];
    this._colorStops = IR[3];
    this._p0 = IR[4];
    this._p1 = IR[5];
    this._r0 = IR[6];
    this._r1 = IR[7];
    this.matrix = null;
  }

  _createGradient(ctx) {
    let grad;

    if (this._type === "axial") {
      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);
    } else if (this._type === "radial") {
      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);
    }

    for (const colorStop of this._colorStops) {
      grad.addColorStop(colorStop[0], colorStop[1]);
    }

    return grad;
  }

  getPattern(ctx, owner, inverse, pathType) {
    let pattern;

    if (pathType === PathType.STROKE || pathType === PathType.FILL) {
      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, ctx.mozCurrentTransform) || [0, 0, 0, 0];
      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;
      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;
      const tmpCanvas = owner.cachedCanvases.getCanvas("pattern", width, height, true);
      const tmpCtx = tmpCanvas.context;
      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);
      tmpCtx.beginPath();
      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);
      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);
      inverse = _util.Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);
      tmpCtx.transform.apply(tmpCtx, owner.baseTransform);

      if (this.matrix) {
        tmpCtx.transform.apply(tmpCtx, this.matrix);
      }

      applyBoundingBox(tmpCtx, this._bbox);
      tmpCtx.fillStyle = this._createGradient(tmpCtx);
      tmpCtx.fill();
      pattern = ctx.createPattern(tmpCanvas.canvas, "no-repeat");
      const domMatrix = new DOMMatrix(inverse);

      try {
        pattern.setTransform(domMatrix);
      } catch (ex) {
        (0, _util.warn)(`RadialAxialShadingPattern.getPattern: "${ex?.message}".`);
      }
    } else {
      applyBoundingBox(ctx, this._bbox);
      pattern = this._createGradient(ctx);
    }

    return pattern;
  }

}

function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {
  const coords = context.coords,
        colors = context.colors;
  const bytes = data.data,
        rowSize = data.width * 4;
  let tmp;

  if (coords[p1 + 1] > coords[p2 + 1]) {
    tmp = p1;
    p1 = p2;
    p2 = tmp;
    tmp = c1;
    c1 = c2;
    c2 = tmp;
  }

  if (coords[p2 + 1] > coords[p3 + 1]) {
    tmp = p2;
    p2 = p3;
    p3 = tmp;
    tmp = c2;
    c2 = c3;
    c3 = tmp;
  }

  if (coords[p1 + 1] > coords[p2 + 1]) {
    tmp = p1;
    p1 = p2;
    p2 = tmp;
    tmp = c1;
    c1 = c2;
    c2 = tmp;
  }

  const x1 = (coords[p1] + context.offsetX) * context.scaleX;
  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;
  const x2 = (coords[p2] + context.offsetX) * context.scaleX;
  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;
  const x3 = (coords[p3] + context.offsetX) * context.scaleX;
  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;

  if (y1 >= y3) {
    return;
  }

  const c1r = colors[c1],
        c1g = colors[c1 + 1],
        c1b = colors[c1 + 2];
  const c2r = colors[c2],
        c2g = colors[c2 + 1],
        c2b = colors[c2 + 2];
  const c3r = colors[c3],
        c3g = colors[c3 + 1],
        c3b = colors[c3 + 2];
  const minY = Math.round(y1),
        maxY = Math.round(y3);
  let xa, car, cag, cab;
  let xb, cbr, cbg, cbb;

  for (let y = minY; y <= maxY; y++) {
    if (y < y2) {
      let k;

      if (y < y1) {
        k = 0;
      } else {
        k = (y1 - y) / (y1 - y2);
      }

      xa = x1 - (x1 - x2) * k;
      car = c1r - (c1r - c2r) * k;
      cag = c1g - (c1g - c2g) * k;
      cab = c1b - (c1b - c2b) * k;
    } else {
      let k;

      if (y > y3) {
        k = 1;
      } else if (y2 === y3) {
        k = 0;
      } else {
        k = (y2 - y) / (y2 - y3);
      }

      xa = x2 - (x2 - x3) * k;
      car = c2r - (c2r - c3r) * k;
      cag = c2g - (c2g - c3g) * k;
      cab = c2b - (c2b - c3b) * k;
    }

    let k;

    if (y < y1) {
      k = 0;
    } else if (y > y3) {
      k = 1;
    } else {
      k = (y1 - y) / (y1 - y3);
    }

    xb = x1 - (x1 - x3) * k;
    cbr = c1r - (c1r - c3r) * k;
    cbg = c1g - (c1g - c3g) * k;
    cbb = c1b - (c1b - c3b) * k;
    const x1_ = Math.round(Math.min(xa, xb));
    const x2_ = Math.round(Math.max(xa, xb));
    let j = rowSize * y + x1_ * 4;

    for (let x = x1_; x <= x2_; x++) {
      k = (xa - x) / (xa - xb);

      if (k < 0) {
        k = 0;
      } else if (k > 1) {
        k = 1;
      }

      bytes[j++] = car - (car - cbr) * k | 0;
      bytes[j++] = cag - (cag - cbg) * k | 0;
      bytes[j++] = cab - (cab - cbb) * k | 0;
      bytes[j++] = 255;
    }
  }
}

function drawFigure(data, figure, context) {
  const ps = figure.coords;
  const cs = figure.colors;
  let i, ii;

  switch (figure.type) {
    case "lattice":
      const verticesPerRow = figure.verticesPerRow;
      const rows = Math.floor(ps.length / verticesPerRow) - 1;
      const cols = verticesPerRow - 1;

      for (i = 0; i < rows; i++) {
        let q = i * verticesPerRow;

        for (let j = 0; j < cols; j++, q++) {
          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);
          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);
        }
      }

      break;

    case "triangles":
      for (i = 0, ii = ps.length; i < ii; i += 3) {
        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);
      }

      break;

    default:
      throw new Error("illegal figure");
  }
}

class MeshShadingPattern extends BaseShadingPattern {
  constructor(IR) {
    super();
    this._coords = IR[2];
    this._colors = IR[3];
    this._figures = IR[4];
    this._bounds = IR[5];
    this._bbox = IR[7];
    this._background = IR[8];
    this.matrix = null;
  }

  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {
    const EXPECTED_SCALE = 1.1;
    const MAX_PATTERN_SIZE = 3000;
    const BORDER_SIZE = 2;
    const offsetX = Math.floor(this._bounds[0]);
    const offsetY = Math.floor(this._bounds[1]);
    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;
    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;
    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);
    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);
    const scaleX = boundsWidth / width;
    const scaleY = boundsHeight / height;
    const context = {
      coords: this._coords,
      colors: this._colors,
      offsetX: -offsetX,
      offsetY: -offsetY,
      scaleX: 1 / scaleX,
      scaleY: 1 / scaleY
    };
    const paddedWidth = width + BORDER_SIZE * 2;
    const paddedHeight = height + BORDER_SIZE * 2;
    const tmpCanvas = cachedCanvases.getCanvas("mesh", paddedWidth, paddedHeight, false);
    const tmpCtx = tmpCanvas.context;
    const data = tmpCtx.createImageData(width, height);

    if (backgroundColor) {
      const bytes = data.data;

      for (let i = 0, ii = bytes.length; i < ii; i += 4) {
        bytes[i] = backgroundColor[0];
        bytes[i + 1] = backgroundColor[1];
        bytes[i + 2] = backgroundColor[2];
        bytes[i + 3] = 255;
      }
    }

    for (const figure of this._figures) {
      drawFigure(data, figure, context);
    }

    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);
    const canvas = tmpCanvas.canvas;
    return {
      canvas,
      offsetX: offsetX - BORDER_SIZE * scaleX,
      offsetY: offsetY - BORDER_SIZE * scaleY,
      scaleX,
      scaleY
    };
  }

  getPattern(ctx, owner, inverse, pathType) {
    applyBoundingBox(ctx, this._bbox);
    let scale;

    if (pathType === PathType.SHADING) {
      scale = _util.Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);
    } else {
      scale = _util.Util.singularValueDecompose2dScale(owner.baseTransform);

      if (this.matrix) {
        const matrixScale = _util.Util.singularValueDecompose2dScale(this.matrix);

        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];
      }
    }

    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);

    if (pathType !== PathType.SHADING) {
      ctx.setTransform.apply(ctx, owner.baseTransform);

      if (this.matrix) {
        ctx.transform.apply(ctx, this.matrix);
      }
    }

    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);
    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);
    return ctx.createPattern(temporaryPatternCanvas.canvas, "no-repeat");
  }

}

class DummyShadingPattern extends BaseShadingPattern {
  getPattern() {
    return "hotpink";
  }

}

function getShadingPattern(IR) {
  switch (IR[0]) {
    case "RadialAxial":
      return new RadialAxialShadingPattern(IR);

    case "Mesh":
      return new MeshShadingPattern(IR);

    case "Dummy":
      return new DummyShadingPattern();
  }

  throw new Error(`Unknown IR type: ${IR[0]}`);
}

const PaintType = {
  COLORED: 1,
  UNCOLORED: 2
};

class TilingPattern {
  static get MAX_PATTERN_SIZE() {
    return (0, _util.shadow)(this, "MAX_PATTERN_SIZE", 3000);
  }

  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {
    this.operatorList = IR[2];
    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];
    this.bbox = IR[4];
    this.xstep = IR[5];
    this.ystep = IR[6];
    this.paintType = IR[7];
    this.tilingType = IR[8];
    this.color = color;
    this.ctx = ctx;
    this.canvasGraphicsFactory = canvasGraphicsFactory;
    this.baseTransform = baseTransform;
  }

  createPatternCanvas(owner) {
    const operatorList = this.operatorList;
    const bbox = this.bbox;
    const xstep = this.xstep;
    const ystep = this.ystep;
    const paintType = this.paintType;
    const tilingType = this.tilingType;
    const color = this.color;
    const canvasGraphicsFactory = this.canvasGraphicsFactory;
    (0, _util.info)("TilingType: " + tilingType);
    const x0 = bbox[0],
          y0 = bbox[1],
          x1 = bbox[2],
          y1 = bbox[3];

    const matrixScale = _util.Util.singularValueDecompose2dScale(this.matrix);

    const curMatrixScale = _util.Util.singularValueDecompose2dScale(this.baseTransform);

    const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];
    const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);
    const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);
    const tmpCanvas = owner.cachedCanvases.getCanvas("pattern", dimx.size, dimy.size, true);
    const tmpCtx = tmpCanvas.context;
    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);
    graphics.groupLevel = owner.groupLevel;
    this.setFillAndStrokeStyleToContext(graphics, paintType, color);
    let adjustedX0 = x0;
    let adjustedY0 = y0;
    let adjustedX1 = x1;
    let adjustedY1 = y1;

    if (x0 < 0) {
      adjustedX0 = 0;
      adjustedX1 += Math.abs(x0);
    }

    if (y0 < 0) {
      adjustedY0 = 0;
      adjustedY1 += Math.abs(y0);
    }

    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));
    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);
    tmpCtx.save();
    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);
    graphics.baseTransform = graphics.ctx.mozCurrentTransform.slice();
    graphics.executeOperatorList(operatorList);
    graphics.endDrawing();
    return {
      canvas: tmpCanvas.canvas,
      scaleX: dimx.scale,
      scaleY: dimy.scale,
      offsetX: adjustedX0,
      offsetY: adjustedY0
    };
  }

  getSizeAndScale(step, realOutputSize, scale) {
    step = Math.abs(step);
    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);
    let size = Math.ceil(step * scale);

    if (size >= maxSize) {
      size = maxSize;
    } else {
      scale = size / step;
    }

    return {
      scale,
      size
    };
  }

  clipBbox(graphics, x0, y0, x1, y1) {
    const bboxWidth = x1 - x0;
    const bboxHeight = y1 - y0;
    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);
    graphics.current.updateRectMinMax(graphics.ctx.mozCurrentTransform, [x0, y0, x1, y1]);
    graphics.clip();
    graphics.endPath();
  }

  setFillAndStrokeStyleToContext(graphics, paintType, color) {
    const context = graphics.ctx,
          current = graphics.current;

    switch (paintType) {
      case PaintType.COLORED:
        const ctx = this.ctx;
        context.fillStyle = ctx.fillStyle;
        context.strokeStyle = ctx.strokeStyle;
        current.fillColor = ctx.fillStyle;
        current.strokeColor = ctx.strokeStyle;
        break;

      case PaintType.UNCOLORED:
        const cssColor = _util.Util.makeHexColor(color[0], color[1], color[2]);

        context.fillStyle = cssColor;
        context.strokeStyle = cssColor;
        current.fillColor = cssColor;
        current.strokeColor = cssColor;
        break;

      default:
        throw new _util.FormatError(`Unsupported paint type: ${paintType}`);
    }
  }

  getPattern(ctx, owner, inverse, pathType) {
    let matrix = inverse;

    if (pathType !== PathType.SHADING) {
      matrix = _util.Util.transform(matrix, owner.baseTransform);

      if (this.matrix) {
        matrix = _util.Util.transform(matrix, this.matrix);
      }
    }

    const temporaryPatternCanvas = this.createPatternCanvas(owner);
    let domMatrix = new DOMMatrix(matrix);
    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);
    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);
    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, "repeat");

    try {
      pattern.setTransform(domMatrix);
    } catch (ex) {
      (0, _util.warn)(`TilingPattern.getPattern: "${ex?.message}".`);
    }

    return pattern;
  }

}

exports.TilingPattern = TilingPattern;

/***/ }),
/* 12 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.applyMaskImageData = applyMaskImageData;

var _util = __w_pdfjs_require__(1);

function applyMaskImageData({
  src,
  srcPos = 0,
  dest,
  destPos = 0,
  width,
  height,
  inverseDecode = false
}) {
  const opaque = _util.FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;
  const [zeroMapping, oneMapping] = !inverseDecode ? [opaque, 0] : [0, opaque];
  const widthInSource = width >> 3;
  const widthRemainder = width & 7;
  const srcLength = src.length;
  dest = new Uint32Array(dest.buffer);

  for (let i = 0; i < height; i++) {
    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {
      const elem = srcPos < srcLength ? src[srcPos] : 255;
      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;
      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;
    }

    if (widthRemainder === 0) {
      continue;
    }

    const elem = srcPos < srcLength ? src[srcPos++] : 255;

    for (let j = 0; j < widthRemainder; j++) {
      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;
    }
  }

  return {
    srcPos,
    destPos
  };
}

/***/ }),
/* 13 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GlobalWorkerOptions = void 0;
const GlobalWorkerOptions = Object.create(null);
exports.GlobalWorkerOptions = GlobalWorkerOptions;
GlobalWorkerOptions.workerPort = GlobalWorkerOptions.workerPort === undefined ? null : GlobalWorkerOptions.workerPort;
GlobalWorkerOptions.workerSrc = GlobalWorkerOptions.workerSrc === undefined ? "" : GlobalWorkerOptions.workerSrc;

/***/ }),
/* 14 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MessageHandler = void 0;

var _util = __w_pdfjs_require__(1);

const CallbackKind = {
  UNKNOWN: 0,
  DATA: 1,
  ERROR: 2
};
const StreamKind = {
  UNKNOWN: 0,
  CANCEL: 1,
  CANCEL_COMPLETE: 2,
  CLOSE: 3,
  ENQUEUE: 4,
  ERROR: 5,
  PULL: 6,
  PULL_COMPLETE: 7,
  START_COMPLETE: 8
};

function wrapReason(reason) {
  if (!(reason instanceof Error || typeof reason === "object" && reason !== null)) {
    (0, _util.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.');
  }

  switch (reason.name) {
    case "AbortException":
      return new _util.AbortException(reason.message);

    case "MissingPDFException":
      return new _util.MissingPDFException(reason.message);

    case "PasswordException":
      return new _util.PasswordException(reason.message, reason.code);

    case "UnexpectedResponseException":
      return new _util.UnexpectedResponseException(reason.message, reason.status);

    case "UnknownErrorException":
      return new _util.UnknownErrorException(reason.message, reason.details);

    default:
      return new _util.UnknownErrorException(reason.message, reason.toString());
  }
}

class MessageHandler {
  constructor(sourceName, targetName, comObj) {
    this.sourceName = sourceName;
    this.targetName = targetName;
    this.comObj = comObj;
    this.callbackId = 1;
    this.streamId = 1;
    this.streamSinks = Object.create(null);
    this.streamControllers = Object.create(null);
    this.callbackCapabilities = Object.create(null);
    this.actionHandler = Object.create(null);

    this._onComObjOnMessage = event => {
      const data = event.data;

      if (data.targetName !== this.sourceName) {
        return;
      }

      if (data.stream) {
        this._processStreamMessage(data);

        return;
      }

      if (data.callback) {
        const callbackId = data.callbackId;
        const capability = this.callbackCapabilities[callbackId];

        if (!capability) {
          throw new Error(`Cannot resolve callback ${callbackId}`);
        }

        delete this.callbackCapabilities[callbackId];

        if (data.callback === CallbackKind.DATA) {
          capability.resolve(data.data);
        } else if (data.callback === CallbackKind.ERROR) {
          capability.reject(wrapReason(data.reason));
        } else {
          throw new Error("Unexpected callback case");
        }

        return;
      }

      const action = this.actionHandler[data.action];

      if (!action) {
        throw new Error(`Unknown action from worker: ${data.action}`);
      }

      if (data.callbackId) {
        const cbSourceName = this.sourceName;
        const cbTargetName = data.sourceName;
        new Promise(function (resolve) {
          resolve(action(data.data));
        }).then(function (result) {
          comObj.postMessage({
            sourceName: cbSourceName,
            targetName: cbTargetName,
            callback: CallbackKind.DATA,
            callbackId: data.callbackId,
            data: result
          });
        }, function (reason) {
          comObj.postMessage({
            sourceName: cbSourceName,
            targetName: cbTargetName,
            callback: CallbackKind.ERROR,
            callbackId: data.callbackId,
            reason: wrapReason(reason)
          });
        });
        return;
      }

      if (data.streamId) {
        this._createStreamSink(data);

        return;
      }

      action(data.data);
    };

    comObj.addEventListener("message", this._onComObjOnMessage);
  }

  on(actionName, handler) {
    const ah = this.actionHandler;

    if (ah[actionName]) {
      throw new Error(`There is already an actionName called "${actionName}"`);
    }

    ah[actionName] = handler;
  }

  send(actionName, data, transfers) {
    this.comObj.postMessage({
      sourceName: this.sourceName,
      targetName: this.targetName,
      action: actionName,
      data
    }, transfers);
  }

  sendWithPromise(actionName, data, transfers) {
    const callbackId = this.callbackId++;
    const capability = (0, _util.createPromiseCapability)();
    this.callbackCapabilities[callbackId] = capability;

    try {
      this.comObj.postMessage({
        sourceName: this.sourceName,
        targetName: this.targetName,
        action: actionName,
        callbackId,
        data
      }, transfers);
    } catch (ex) {
      capability.reject(ex);
    }

    return capability.promise;
  }

  sendWithStream(actionName, data, queueingStrategy, transfers) {
    const streamId = this.streamId++,
          sourceName = this.sourceName,
          targetName = this.targetName,
          comObj = this.comObj;
    return new ReadableStream({
      start: controller => {
        const startCapability = (0, _util.createPromiseCapability)();
        this.streamControllers[streamId] = {
          controller,
          startCall: startCapability,
          pullCall: null,
          cancelCall: null,
          isClosed: false
        };
        comObj.postMessage({
          sourceName,
          targetName,
          action: actionName,
          streamId,
          data,
          desiredSize: controller.desiredSize
        }, transfers);
        return startCapability.promise;
      },
      pull: controller => {
        const pullCapability = (0, _util.createPromiseCapability)();
        this.streamControllers[streamId].pullCall = pullCapability;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.PULL,
          streamId,
          desiredSize: controller.desiredSize
        });
        return pullCapability.promise;
      },
      cancel: reason => {
        (0, _util.assert)(reason instanceof Error, "cancel must have a valid reason");
        const cancelCapability = (0, _util.createPromiseCapability)();
        this.streamControllers[streamId].cancelCall = cancelCapability;
        this.streamControllers[streamId].isClosed = true;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.CANCEL,
          streamId,
          reason: wrapReason(reason)
        });
        return cancelCapability.promise;
      }
    }, queueingStrategy);
  }

  _createStreamSink(data) {
    const streamId = data.streamId,
          sourceName = this.sourceName,
          targetName = data.sourceName,
          comObj = this.comObj;
    const self = this,
          action = this.actionHandler[data.action];
    const streamSink = {
      enqueue(chunk, size = 1, transfers) {
        if (this.isCancelled) {
          return;
        }

        const lastDesiredSize = this.desiredSize;
        this.desiredSize -= size;

        if (lastDesiredSize > 0 && this.desiredSize <= 0) {
          this.sinkCapability = (0, _util.createPromiseCapability)();
          this.ready = this.sinkCapability.promise;
        }

        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.ENQUEUE,
          streamId,
          chunk
        }, transfers);
      },

      close() {
        if (this.isCancelled) {
          return;
        }

        this.isCancelled = true;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.CLOSE,
          streamId
        });
        delete self.streamSinks[streamId];
      },

      error(reason) {
        (0, _util.assert)(reason instanceof Error, "error must have a valid reason");

        if (this.isCancelled) {
          return;
        }

        this.isCancelled = true;
        comObj.postMessage({
          sourceName,
          targetName,
          stream: StreamKind.ERROR,
          streamId,
          reason: wrapReason(reason)
        });
      },

      sinkCapability: (0, _util.createPromiseCapability)(),
      onPull: null,
      onCancel: null,
      isCancelled: false,
      desiredSize: data.desiredSize,
      ready: null
    };
    streamSink.sinkCapability.resolve();
    streamSink.ready = streamSink.sinkCapability.promise;
    this.streamSinks[streamId] = streamSink;
    new Promise(function (resolve) {
      resolve(action(data.data, streamSink));
    }).then(function () {
      comObj.postMessage({
        sourceName,
        targetName,
        stream: StreamKind.START_COMPLETE,
        streamId,
        success: true
      });
    }, function (reason) {
      comObj.postMessage({
        sourceName,
        targetName,
        stream: StreamKind.START_COMPLETE,
        streamId,
        reason: wrapReason(reason)
      });
    });
  }

  _processStreamMessage(data) {
    const streamId = data.streamId,
          sourceName = this.sourceName,
          targetName = data.sourceName,
          comObj = this.comObj;
    const streamController = this.streamControllers[streamId],
          streamSink = this.streamSinks[streamId];

    switch (data.stream) {
      case StreamKind.START_COMPLETE:
        if (data.success) {
          streamController.startCall.resolve();
        } else {
          streamController.startCall.reject(wrapReason(data.reason));
        }

        break;

      case StreamKind.PULL_COMPLETE:
        if (data.success) {
          streamController.pullCall.resolve();
        } else {
          streamController.pullCall.reject(wrapReason(data.reason));
        }

        break;

      case StreamKind.PULL:
        if (!streamSink) {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.PULL_COMPLETE,
            streamId,
            success: true
          });
          break;
        }

        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {
          streamSink.sinkCapability.resolve();
        }

        streamSink.desiredSize = data.desiredSize;
        new Promise(function (resolve) {
          resolve(streamSink.onPull && streamSink.onPull());
        }).then(function () {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.PULL_COMPLETE,
            streamId,
            success: true
          });
        }, function (reason) {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.PULL_COMPLETE,
            streamId,
            reason: wrapReason(reason)
          });
        });
        break;

      case StreamKind.ENQUEUE:
        (0, _util.assert)(streamController, "enqueue should have stream controller");

        if (streamController.isClosed) {
          break;
        }

        streamController.controller.enqueue(data.chunk);
        break;

      case StreamKind.CLOSE:
        (0, _util.assert)(streamController, "close should have stream controller");

        if (streamController.isClosed) {
          break;
        }

        streamController.isClosed = true;
        streamController.controller.close();

        this._deleteStreamController(streamController, streamId);

        break;

      case StreamKind.ERROR:
        (0, _util.assert)(streamController, "error should have stream controller");
        streamController.controller.error(wrapReason(data.reason));

        this._deleteStreamController(streamController, streamId);

        break;

      case StreamKind.CANCEL_COMPLETE:
        if (data.success) {
          streamController.cancelCall.resolve();
        } else {
          streamController.cancelCall.reject(wrapReason(data.reason));
        }

        this._deleteStreamController(streamController, streamId);

        break;

      case StreamKind.CANCEL:
        if (!streamSink) {
          break;
        }

        new Promise(function (resolve) {
          resolve(streamSink.onCancel && streamSink.onCancel(wrapReason(data.reason)));
        }).then(function () {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.CANCEL_COMPLETE,
            streamId,
            success: true
          });
        }, function (reason) {
          comObj.postMessage({
            sourceName,
            targetName,
            stream: StreamKind.CANCEL_COMPLETE,
            streamId,
            reason: wrapReason(reason)
          });
        });
        streamSink.sinkCapability.reject(wrapReason(data.reason));
        streamSink.isCancelled = true;
        delete this.streamSinks[streamId];
        break;

      default:
        throw new Error("Unexpected stream case");
    }
  }

  async _deleteStreamController(streamController, streamId) {
    await Promise.allSettled([streamController.startCall && streamController.startCall.promise, streamController.pullCall && streamController.pullCall.promise, streamController.cancelCall && streamController.cancelCall.promise]);
    delete this.streamControllers[streamId];
  }

  destroy() {
    this.comObj.removeEventListener("message", this._onComObjOnMessage);
  }

}

exports.MessageHandler = MessageHandler;

/***/ }),
/* 15 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Metadata = void 0;

var _util = __w_pdfjs_require__(1);

class Metadata {
  #metadataMap;
  #data;

  constructor({
    parsedData,
    rawData
  }) {
    this.#metadataMap = parsedData;
    this.#data = rawData;
  }

  getRaw() {
    return this.#data;
  }

  get(name) {
    return this.#metadataMap.get(name) ?? null;
  }

  getAll() {
    return (0, _util.objectFromMap)(this.#metadataMap);
  }

  has(name) {
    return this.#metadataMap.has(name);
  }

}

exports.Metadata = Metadata;

/***/ }),
/* 16 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.OptionalContentConfig = void 0;

var _util = __w_pdfjs_require__(1);

class OptionalContentGroup {
  constructor(name, intent) {
    this.visible = true;
    this.name = name;
    this.intent = intent;
  }

}

class OptionalContentConfig {
  constructor(data) {
    this.name = null;
    this.creator = null;
    this._order = null;
    this._groups = new Map();

    if (data === null) {
      return;
    }

    this.name = data.name;
    this.creator = data.creator;
    this._order = data.order;

    for (const group of data.groups) {
      this._groups.set(group.id, new OptionalContentGroup(group.name, group.intent));
    }

    if (data.baseState === "OFF") {
      for (const group of this._groups) {
        group.visible = false;
      }
    }

    for (const on of data.on) {
      this._groups.get(on).visible = true;
    }

    for (const off of data.off) {
      this._groups.get(off).visible = false;
    }
  }

  _evaluateVisibilityExpression(array) {
    const length = array.length;

    if (length < 2) {
      return true;
    }

    const operator = array[0];

    for (let i = 1; i < length; i++) {
      const element = array[i];
      let state;

      if (Array.isArray(element)) {
        state = this._evaluateVisibilityExpression(element);
      } else if (this._groups.has(element)) {
        state = this._groups.get(element).visible;
      } else {
        (0, _util.warn)(`Optional content group not found: ${element}`);
        return true;
      }

      switch (operator) {
        case "And":
          if (!state) {
            return false;
          }

          break;

        case "Or":
          if (state) {
            return true;
          }

          break;

        case "Not":
          return !state;

        default:
          return true;
      }
    }

    return operator === "And";
  }

  isVisible(group) {
    if (this._groups.size === 0) {
      return true;
    }

    if (!group) {
      (0, _util.warn)("Optional content group not defined.");
      return true;
    }

    if (group.type === "OCG") {
      if (!this._groups.has(group.id)) {
        (0, _util.warn)(`Optional content group not found: ${group.id}`);
        return true;
      }

      return this._groups.get(group.id).visible;
    } else if (group.type === "OCMD") {
      if (group.expression) {
        return this._evaluateVisibilityExpression(group.expression);
      }

      if (!group.policy || group.policy === "AnyOn") {
        for (const id of group.ids) {
          if (!this._groups.has(id)) {
            (0, _util.warn)(`Optional content group not found: ${id}`);
            return true;
          }

          if (this._groups.get(id).visible) {
            return true;
          }
        }

        return false;
      } else if (group.policy === "AllOn") {
        for (const id of group.ids) {
          if (!this._groups.has(id)) {
            (0, _util.warn)(`Optional content group not found: ${id}`);
            return true;
          }

          if (!this._groups.get(id).visible) {
            return false;
          }
        }

        return true;
      } else if (group.policy === "AnyOff") {
        for (const id of group.ids) {
          if (!this._groups.has(id)) {
            (0, _util.warn)(`Optional content group not found: ${id}`);
            return true;
          }

          if (!this._groups.get(id).visible) {
            return true;
          }
        }

        return false;
      } else if (group.policy === "AllOff") {
        for (const id of group.ids) {
          if (!this._groups.has(id)) {
            (0, _util.warn)(`Optional content group not found: ${id}`);
            return true;
          }

          if (this._groups.get(id).visible) {
            return false;
          }
        }

        return true;
      }

      (0, _util.warn)(`Unknown optional content policy ${group.policy}.`);
      return true;
    }

    (0, _util.warn)(`Unknown group type ${group.type}.`);
    return true;
  }

  setVisibility(id, visible = true) {
    if (!this._groups.has(id)) {
      (0, _util.warn)(`Optional content group not found: ${id}`);
      return;
    }

    this._groups.get(id).visible = !!visible;
  }

  getOrder() {
    if (!this._groups.size) {
      return null;
    }

    if (this._order) {
      return this._order.slice();
    }

    return Array.from(this._groups.keys());
  }

  getGroups() {
    return this._groups.size > 0 ? (0, _util.objectFromMap)(this._groups) : null;
  }

  getGroup(id) {
    return this._groups.get(id) || null;
  }

}

exports.OptionalContentConfig = OptionalContentConfig;

/***/ }),
/* 17 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFDataTransportStream = void 0;

var _util = __w_pdfjs_require__(1);

var _display_utils = __w_pdfjs_require__(5);

class PDFDataTransportStream {
  constructor(params, pdfDataRangeTransport) {
    (0, _util.assert)(pdfDataRangeTransport, 'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');
    this._queuedChunks = [];
    this._progressiveDone = params.progressiveDone || false;
    this._contentDispositionFilename = params.contentDispositionFilename || null;
    const initialData = params.initialData;

    if (initialData?.length > 0) {
      const buffer = new Uint8Array(initialData).buffer;

      this._queuedChunks.push(buffer);
    }

    this._pdfDataRangeTransport = pdfDataRangeTransport;
    this._isStreamingSupported = !params.disableStream;
    this._isRangeSupported = !params.disableRange;
    this._contentLength = params.length;
    this._fullRequestReader = null;
    this._rangeReaders = [];

    this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {
      this._onReceiveData({
        begin,
        chunk
      });
    });

    this._pdfDataRangeTransport.addProgressListener((loaded, total) => {
      this._onProgress({
        loaded,
        total
      });
    });

    this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {
      this._onReceiveData({
        chunk
      });
    });

    this._pdfDataRangeTransport.addProgressiveDoneListener(() => {
      this._onProgressiveDone();
    });

    this._pdfDataRangeTransport.transportReady();
  }

  _onReceiveData(args) {
    const buffer = new Uint8Array(args.chunk).buffer;

    if (args.begin === undefined) {
      if (this._fullRequestReader) {
        this._fullRequestReader._enqueue(buffer);
      } else {
        this._queuedChunks.push(buffer);
      }
    } else {
      const found = this._rangeReaders.some(function (rangeReader) {
        if (rangeReader._begin !== args.begin) {
          return false;
        }

        rangeReader._enqueue(buffer);

        return true;
      });

      (0, _util.assert)(found, "_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.");
    }
  }

  get _progressiveDataLength() {
    return this._fullRequestReader?._loaded ?? 0;
  }

  _onProgress(evt) {
    if (evt.total === undefined) {
      const firstReader = this._rangeReaders[0];

      if (firstReader?.onProgress) {
        firstReader.onProgress({
          loaded: evt.loaded
        });
      }
    } else {
      const fullReader = this._fullRequestReader;

      if (fullReader?.onProgress) {
        fullReader.onProgress({
          loaded: evt.loaded,
          total: evt.total
        });
      }
    }
  }

  _onProgressiveDone() {
    if (this._fullRequestReader) {
      this._fullRequestReader.progressiveDone();
    }

    this._progressiveDone = true;
  }

  _removeRangeReader(reader) {
    const i = this._rangeReaders.indexOf(reader);

    if (i >= 0) {
      this._rangeReaders.splice(i, 1);
    }
  }

  getFullReader() {
    (0, _util.assert)(!this._fullRequestReader, "PDFDataTransportStream.getFullReader can only be called once.");
    const queuedChunks = this._queuedChunks;
    this._queuedChunks = null;
    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);
  }

  getRangeReader(begin, end) {
    if (end <= this._progressiveDataLength) {
      return null;
    }

    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);

    this._pdfDataRangeTransport.requestDataRange(begin, end);

    this._rangeReaders.push(reader);

    return reader;
  }

  cancelAllRequests(reason) {
    if (this._fullRequestReader) {
      this._fullRequestReader.cancel(reason);
    }

    for (const reader of this._rangeReaders.slice(0)) {
      reader.cancel(reason);
    }

    this._pdfDataRangeTransport.abort();
  }

}

exports.PDFDataTransportStream = PDFDataTransportStream;

class PDFDataTransportStreamReader {
  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {
    this._stream = stream;
    this._done = progressiveDone || false;
    this._filename = (0, _display_utils.isPdfFile)(contentDispositionFilename) ? contentDispositionFilename : null;
    this._queuedChunks = queuedChunks || [];
    this._loaded = 0;

    for (const chunk of this._queuedChunks) {
      this._loaded += chunk.byteLength;
    }

    this._requests = [];
    this._headersReady = Promise.resolve();
    stream._fullRequestReader = this;
    this.onProgress = null;
  }

  _enqueue(chunk) {
    if (this._done) {
      return;
    }

    if (this._requests.length > 0) {
      const requestCapability = this._requests.shift();

      requestCapability.resolve({
        value: chunk,
        done: false
      });
    } else {
      this._queuedChunks.push(chunk);
    }

    this._loaded += chunk.byteLength;
  }

  get headersReady() {
    return this._headersReady;
  }

  get filename() {
    return this._filename;
  }

  get isRangeSupported() {
    return this._stream._isRangeSupported;
  }

  get isStreamingSupported() {
    return this._stream._isStreamingSupported;
  }

  get contentLength() {
    return this._stream._contentLength;
  }

  async read() {
    if (this._queuedChunks.length > 0) {
      const chunk = this._queuedChunks.shift();

      return {
        value: chunk,
        done: false
      };
    }

    if (this._done) {
      return {
        value: undefined,
        done: true
      };
    }

    const requestCapability = (0, _util.createPromiseCapability)();

    this._requests.push(requestCapability);

    return requestCapability.promise;
  }

  cancel(reason) {
    this._done = true;

    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: undefined,
        done: true
      });
    }

    this._requests.length = 0;
  }

  progressiveDone() {
    if (this._done) {
      return;
    }

    this._done = true;
  }

}

class PDFDataTransportStreamRangeReader {
  constructor(stream, begin, end) {
    this._stream = stream;
    this._begin = begin;
    this._end = end;
    this._queuedChunk = null;
    this._requests = [];
    this._done = false;
    this.onProgress = null;
  }

  _enqueue(chunk) {
    if (this._done) {
      return;
    }

    if (this._requests.length === 0) {
      this._queuedChunk = chunk;
    } else {
      const requestsCapability = this._requests.shift();

      requestsCapability.resolve({
        value: chunk,
        done: false
      });

      for (const requestCapability of this._requests) {
        requestCapability.resolve({
          value: undefined,
          done: true
        });
      }

      this._requests.length = 0;
    }

    this._done = true;

    this._stream._removeRangeReader(this);
  }

  get isStreamingSupported() {
    return false;
  }

  async read() {
    if (this._queuedChunk) {
      const chunk = this._queuedChunk;
      this._queuedChunk = null;
      return {
        value: chunk,
        done: false
      };
    }

    if (this._done) {
      return {
        value: undefined,
        done: true
      };
    }

    const requestCapability = (0, _util.createPromiseCapability)();

    this._requests.push(requestCapability);

    return requestCapability.promise;
  }

  cancel(reason) {
    this._done = true;

    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: undefined,
        done: true
      });
    }

    this._requests.length = 0;

    this._stream._removeRangeReader(this);
  }

}

/***/ }),
/* 18 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.XfaText = void 0;

class XfaText {
  static textContent(xfa) {
    const items = [];
    const output = {
      items,
      styles: Object.create(null)
    };

    function walk(node) {
      if (!node) {
        return;
      }

      let str = null;
      const name = node.name;

      if (name === "#text") {
        str = node.value;
      } else if (!XfaText.shouldBuildText(name)) {
        return;
      } else if (node?.attributes?.textContent) {
        str = node.attributes.textContent;
      } else if (node.value) {
        str = node.value;
      }

      if (str !== null) {
        items.push({
          str
        });
      }

      if (!node.children) {
        return;
      }

      for (const child of node.children) {
        walk(child);
      }
    }

    walk(xfa);
    return output;
  }

  static shouldBuildText(name) {
    return !(name === "textarea" || name === "input" || name === "option" || name === "select");
  }

}

exports.XfaText = XfaText;

/***/ }),
/* 19 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.NodeStandardFontDataFactory = exports.NodeCanvasFactory = exports.NodeCMapReaderFactory = void 0;

var _base_factory = __w_pdfjs_require__(6);

;

const fetchData = function (url) {
  return new Promise((resolve, reject) => {
    const fs = __webpack_require__(/*! fs */ "?fe90");

    fs.readFile(url, (error, data) => {
      if (error || !data) {
        reject(new Error(error));
        return;
      }

      resolve(new Uint8Array(data));
    });
  });
};

class NodeCanvasFactory extends _base_factory.BaseCanvasFactory {
  _createCanvas(width, height) {
    const Canvas = __webpack_require__(/*! canvas */ "?4a14");

    return Canvas.createCanvas(width, height);
  }

}

exports.NodeCanvasFactory = NodeCanvasFactory;

class NodeCMapReaderFactory extends _base_factory.BaseCMapReaderFactory {
  _fetchData(url, compressionType) {
    return fetchData(url).then(data => {
      return {
        cMapData: data,
        compressionType
      };
    });
  }

}

exports.NodeCMapReaderFactory = NodeCMapReaderFactory;

class NodeStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory {
  _fetchData(url) {
    return fetchData(url);
  }

}

exports.NodeStandardFontDataFactory = NodeStandardFontDataFactory;

/***/ }),
/* 20 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AnnotationLayer = void 0;

var _util = __w_pdfjs_require__(1);

var _display_utils = __w_pdfjs_require__(5);

var _annotation_storage = __w_pdfjs_require__(8);

var _scripting_utils = __w_pdfjs_require__(21);

var _xfa_layer = __w_pdfjs_require__(22);

const DEFAULT_TAB_INDEX = 1000;
const GetElementsByNameSet = new WeakSet();

function getRectDims(rect) {
  return {
    width: rect[2] - rect[0],
    height: rect[3] - rect[1]
  };
}

class AnnotationElementFactory {
  static create(parameters) {
    const subtype = parameters.data.annotationType;

    switch (subtype) {
      case _util.AnnotationType.LINK:
        return new LinkAnnotationElement(parameters);

      case _util.AnnotationType.TEXT:
        return new TextAnnotationElement(parameters);

      case _util.AnnotationType.WIDGET:
        const fieldType = parameters.data.fieldType;

        switch (fieldType) {
          case "Tx":
            return new TextWidgetAnnotationElement(parameters);

          case "Btn":
            if (parameters.data.radioButton) {
              return new RadioButtonWidgetAnnotationElement(parameters);
            } else if (parameters.data.checkBox) {
              return new CheckboxWidgetAnnotationElement(parameters);
            }

            return new PushButtonWidgetAnnotationElement(parameters);

          case "Ch":
            return new ChoiceWidgetAnnotationElement(parameters);
        }

        return new WidgetAnnotationElement(parameters);

      case _util.AnnotationType.POPUP:
        return new PopupAnnotationElement(parameters);

      case _util.AnnotationType.FREETEXT:
        return new FreeTextAnnotationElement(parameters);

      case _util.AnnotationType.LINE:
        return new LineAnnotationElement(parameters);

      case _util.AnnotationType.SQUARE:
        return new SquareAnnotationElement(parameters);

      case _util.AnnotationType.CIRCLE:
        return new CircleAnnotationElement(parameters);

      case _util.AnnotationType.POLYLINE:
        return new PolylineAnnotationElement(parameters);

      case _util.AnnotationType.CARET:
        return new CaretAnnotationElement(parameters);

      case _util.AnnotationType.INK:
        return new InkAnnotationElement(parameters);

      case _util.AnnotationType.POLYGON:
        return new PolygonAnnotationElement(parameters);

      case _util.AnnotationType.HIGHLIGHT:
        return new HighlightAnnotationElement(parameters);

      case _util.AnnotationType.UNDERLINE:
        return new UnderlineAnnotationElement(parameters);

      case _util.AnnotationType.SQUIGGLY:
        return new SquigglyAnnotationElement(parameters);

      case _util.AnnotationType.STRIKEOUT:
        return new StrikeOutAnnotationElement(parameters);

      case _util.AnnotationType.STAMP:
        return new StampAnnotationElement(parameters);

      case _util.AnnotationType.FILEATTACHMENT:
        return new FileAttachmentAnnotationElement(parameters);

      default:
        return new AnnotationElement(parameters);
    }
  }

}

class AnnotationElement {
  constructor(parameters, {
    isRenderable = false,
    ignoreBorder = false,
    createQuadrilaterals = false
  } = {}) {
    this.isRenderable = isRenderable;
    this.data = parameters.data;
    this.layer = parameters.layer;
    this.page = parameters.page;
    this.viewport = parameters.viewport;
    this.linkService = parameters.linkService;
    this.downloadManager = parameters.downloadManager;
    this.imageResourcesPath = parameters.imageResourcesPath;
    this.renderForms = parameters.renderForms;
    this.svgFactory = parameters.svgFactory;
    this.annotationStorage = parameters.annotationStorage;
    this.enableScripting = parameters.enableScripting;
    this.hasJSActions = parameters.hasJSActions;
    this._fieldObjects = parameters.fieldObjects;
    this._mouseState = parameters.mouseState;

    if (isRenderable) {
      this.container = this._createContainer(ignoreBorder);
    }

    if (createQuadrilaterals) {
      this.quadrilaterals = this._createQuadrilaterals(ignoreBorder);
    }
  }

  _createContainer(ignoreBorder = false) {
    const data = this.data,
          page = this.page,
          viewport = this.viewport;
    const container = document.createElement("section");
    let {
      width,
      height
    } = getRectDims(data.rect);
    container.setAttribute("data-annotation-id", data.id);

    const rect = _util.Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);

    if (data.hasOwnCanvas) {
      const transform = viewport.transform.slice();

      const [scaleX, scaleY] = _util.Util.singularValueDecompose2dScale(transform);

      width = Math.ceil(width * scaleX);
      height = Math.ceil(height * scaleY);
      rect[0] *= scaleX;
      rect[1] *= scaleY;

      for (let i = 0; i < 4; i++) {
        transform[i] = Math.sign(transform[i]);
      }

      container.style.transform = `matrix(${transform.join(",")})`;
    } else {
      container.style.transform = `matrix(${viewport.transform.join(",")})`;
    }

    container.style.transformOrigin = `${-rect[0]}px ${-rect[1]}px`;

    if (!ignoreBorder && data.borderStyle.width > 0) {
      container.style.borderWidth = `${data.borderStyle.width}px`;

      if (data.borderStyle.style !== _util.AnnotationBorderStyleType.UNDERLINE) {
        width -= 2 * data.borderStyle.width;
        height -= 2 * data.borderStyle.width;
      }

      const horizontalRadius = data.borderStyle.horizontalCornerRadius;
      const verticalRadius = data.borderStyle.verticalCornerRadius;

      if (horizontalRadius > 0 || verticalRadius > 0) {
        const radius = `${horizontalRadius}px / ${verticalRadius}px`;
        container.style.borderRadius = radius;
      }

      switch (data.borderStyle.style) {
        case _util.AnnotationBorderStyleType.SOLID:
          container.style.borderStyle = "solid";
          break;

        case _util.AnnotationBorderStyleType.DASHED:
          container.style.borderStyle = "dashed";
          break;

        case _util.AnnotationBorderStyleType.BEVELED:
          (0, _util.warn)("Unimplemented border style: beveled");
          break;

        case _util.AnnotationBorderStyleType.INSET:
          (0, _util.warn)("Unimplemented border style: inset");
          break;

        case _util.AnnotationBorderStyleType.UNDERLINE:
          container.style.borderBottomStyle = "solid";
          break;

        default:
          break;
      }

      const borderColor = data.borderColor || data.color || null;

      if (borderColor) {
        container.style.borderColor = _util.Util.makeHexColor(data.color[0] | 0, data.color[1] | 0, data.color[2] | 0);
      } else {
        container.style.borderWidth = 0;
      }
    }

    container.style.left = `${rect[0]}px`;
    container.style.top = `${rect[1]}px`;

    if (data.hasOwnCanvas) {
      container.style.width = container.style.height = "auto";
    } else {
      container.style.width = `${width}px`;
      container.style.height = `${height}px`;
    }

    return container;
  }

  get _commonActions() {
    const setColor = (jsName, styleName, event) => {
      const color = event.detail[jsName];
      event.target.style[styleName] = _scripting_utils.ColorConverters[`${color[0]}_HTML`](color.slice(1));
    };

    return (0, _util.shadow)(this, "_commonActions", {
      display: event => {
        const hidden = event.detail.display % 2 === 1;
        event.target.style.visibility = hidden ? "hidden" : "visible";
        this.annotationStorage.setValue(this.data.id, {
          hidden,
          print: event.detail.display === 0 || event.detail.display === 3
        });
      },
      print: event => {
        this.annotationStorage.setValue(this.data.id, {
          print: event.detail.print
        });
      },
      hidden: event => {
        event.target.style.visibility = event.detail.hidden ? "hidden" : "visible";
        this.annotationStorage.setValue(this.data.id, {
          hidden: event.detail.hidden
        });
      },
      focus: event => {
        setTimeout(() => event.target.focus({
          preventScroll: false
        }), 0);
      },
      userName: event => {
        event.target.title = event.detail.userName;
      },
      readonly: event => {
        if (event.detail.readonly) {
          event.target.setAttribute("readonly", "");
        } else {
          event.target.removeAttribute("readonly");
        }
      },
      required: event => {
        if (event.detail.required) {
          event.target.setAttribute("required", "");
        } else {
          event.target.removeAttribute("required");
        }
      },
      bgColor: event => {
        setColor("bgColor", "backgroundColor", event);
      },
      fillColor: event => {
        setColor("fillColor", "backgroundColor", event);
      },
      fgColor: event => {
        setColor("fgColor", "color", event);
      },
      textColor: event => {
        setColor("textColor", "color", event);
      },
      borderColor: event => {
        setColor("borderColor", "borderColor", event);
      },
      strokeColor: event => {
        setColor("strokeColor", "borderColor", event);
      }
    });
  }

  _dispatchEventFromSandbox(actions, jsEvent) {
    const commonActions = this._commonActions;

    for (const name of Object.keys(jsEvent.detail)) {
      const action = actions[name] || commonActions[name];

      if (action) {
        action(jsEvent);
      }
    }
  }

  _setDefaultPropertiesFromJS(element) {
    if (!this.enableScripting) {
      return;
    }

    const storedData = this.annotationStorage.getRawValue(this.data.id);

    if (!storedData) {
      return;
    }

    const commonActions = this._commonActions;

    for (const [actionName, detail] of Object.entries(storedData)) {
      const action = commonActions[actionName];

      if (action) {
        action({
          detail,
          target: element
        });
        delete storedData[actionName];
      }
    }
  }

  _createQuadrilaterals(ignoreBorder = false) {
    if (!this.data.quadPoints) {
      return null;
    }

    const quadrilaterals = [];
    const savedRect = this.data.rect;

    for (const quadPoint of this.data.quadPoints) {
      this.data.rect = [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y];
      quadrilaterals.push(this._createContainer(ignoreBorder));
    }

    this.data.rect = savedRect;
    return quadrilaterals;
  }

  _createPopup(trigger, data) {
    let container = this.container;

    if (this.quadrilaterals) {
      trigger = trigger || this.quadrilaterals;
      container = this.quadrilaterals[0];
    }

    if (!trigger) {
      trigger = document.createElement("div");
      trigger.style.height = container.style.height;
      trigger.style.width = container.style.width;
      container.appendChild(trigger);
    }

    const popupElement = new PopupElement({
      container,
      trigger,
      color: data.color,
      titleObj: data.titleObj,
      modificationDate: data.modificationDate,
      contentsObj: data.contentsObj,
      richText: data.richText,
      hideWrapper: true
    });
    const popup = popupElement.render();
    popup.style.left = container.style.width;
    container.appendChild(popup);
  }

  _renderQuadrilaterals(className) {
    for (const quadrilateral of this.quadrilaterals) {
      quadrilateral.className = className;
    }

    return this.quadrilaterals;
  }

  render() {
    (0, _util.unreachable)("Abstract method `AnnotationElement.render` called");
  }

  _getElementsByName(name, skipId = null) {
    const fields = [];

    if (this._fieldObjects) {
      const fieldObj = this._fieldObjects[name];

      if (fieldObj) {
        for (const {
          page,
          id,
          exportValues
        } of fieldObj) {
          if (page === -1) {
            continue;
          }

          if (id === skipId) {
            continue;
          }

          const exportValue = typeof exportValues === "string" ? exportValues : null;
          const domElement = document.getElementById(id);

          if (domElement && !GetElementsByNameSet.has(domElement)) {
            (0, _util.warn)(`_getElementsByName - element not allowed: ${id}`);
            continue;
          }

          fields.push({
            id,
            exportValue,
            domElement
          });
        }
      }

      return fields;
    }

    for (const domElement of document.getElementsByName(name)) {
      const {
        id,
        exportValue
      } = domElement;

      if (id === skipId) {
        continue;
      }

      if (!GetElementsByNameSet.has(domElement)) {
        continue;
      }

      fields.push({
        id,
        exportValue,
        domElement
      });
    }

    return fields;
  }

  static get platform() {
    const platform = typeof navigator !== "undefined" ? navigator.platform : "";
    return (0, _util.shadow)(this, "platform", {
      isWin: platform.includes("Win"),
      isMac: platform.includes("Mac")
    });
  }

}

class LinkAnnotationElement extends AnnotationElement {
  constructor(parameters, options = null) {
    const isRenderable = !!(parameters.data.url || parameters.data.dest || parameters.data.action || parameters.data.isTooltipOnly || parameters.data.resetForm || parameters.data.actions && (parameters.data.actions.Action || parameters.data.actions["Mouse Up"] || parameters.data.actions["Mouse Down"]));
    super(parameters, {
      isRenderable,
      ignoreBorder: !!options?.ignoreBorder,
      createQuadrilaterals: true
    });
  }

  render() {
    const {
      data,
      linkService
    } = this;
    const link = document.createElement("a");

    if (data.url) {
      linkService.addLinkAttributes(link, data.url, data.newWindow);
    } else if (data.action) {
      this._bindNamedAction(link, data.action);
    } else if (data.dest) {
      this._bindLink(link, data.dest);
    } else {
      let hasClickAction = false;

      if (data.actions && (data.actions.Action || data.actions["Mouse Up"] || data.actions["Mouse Down"]) && this.enableScripting && this.hasJSActions) {
        hasClickAction = true;

        this._bindJSAction(link, data);
      }

      if (data.resetForm) {
        this._bindResetFormAction(link, data.resetForm);
      } else if (!hasClickAction) {
        this._bindLink(link, "");
      }
    }

    if (this.quadrilaterals) {
      return this._renderQuadrilaterals("linkAnnotation").map((quadrilateral, index) => {
        const linkElement = index === 0 ? link : link.cloneNode();
        quadrilateral.appendChild(linkElement);
        return quadrilateral;
      });
    }

    this.container.className = "linkAnnotation";
    this.container.appendChild(link);
    return this.container;
  }

  _bindLink(link, destination) {
    link.href = this.linkService.getDestinationHash(destination);

    link.onclick = () => {
      if (destination) {
        this.linkService.goToDestination(destination);
      }

      return false;
    };

    if (destination || destination === "") {
      link.className = "internalLink";
    }
  }

  _bindNamedAction(link, action) {
    link.href = this.linkService.getAnchorUrl("");

    link.onclick = () => {
      this.linkService.executeNamedAction(action);
      return false;
    };

    link.className = "internalLink";
  }

  _bindJSAction(link, data) {
    link.href = this.linkService.getAnchorUrl("");
    const map = new Map([["Action", "onclick"], ["Mouse Up", "onmouseup"], ["Mouse Down", "onmousedown"]]);

    for (const name of Object.keys(data.actions)) {
      const jsName = map.get(name);

      if (!jsName) {
        continue;
      }

      link[jsName] = () => {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: data.id,
            name
          }
        });
        return false;
      };
    }

    if (!link.onclick) {
      link.onclick = () => false;
    }

    link.className = "internalLink";
  }

  _bindResetFormAction(link, resetForm) {
    const otherClickAction = link.onclick;

    if (!otherClickAction) {
      link.href = this.linkService.getAnchorUrl("");
    }

    link.className = "internalLink";

    if (!this._fieldObjects) {
      (0, _util.warn)(`_bindResetFormAction - "resetForm" action not supported, ` + "ensure that the `fieldObjects` parameter is provided.");

      if (!otherClickAction) {
        link.onclick = () => false;
      }

      return;
    }

    link.onclick = () => {
      if (otherClickAction) {
        otherClickAction();
      }

      const {
        fields: resetFormFields,
        refs: resetFormRefs,
        include
      } = resetForm;
      const allFields = [];

      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {
        const fieldIds = new Set(resetFormRefs);

        for (const fieldName of resetFormFields) {
          const fields = this._fieldObjects[fieldName] || [];

          for (const {
            id
          } of fields) {
            fieldIds.add(id);
          }
        }

        for (const fields of Object.values(this._fieldObjects)) {
          for (const field of fields) {
            if (fieldIds.has(field.id) === include) {
              allFields.push(field);
            }
          }
        }
      } else {
        for (const fields of Object.values(this._fieldObjects)) {
          allFields.push(...fields);
        }
      }

      const storage = this.annotationStorage;
      const allIds = [];

      for (const field of allFields) {
        const {
          id
        } = field;
        allIds.push(id);

        switch (field.type) {
          case "text":
            {
              const value = field.defaultValue || "";
              storage.setValue(id, {
                value
              });
              break;
            }

          case "checkbox":
          case "radiobutton":
            {
              const value = field.defaultValue === field.exportValues;
              storage.setValue(id, {
                value
              });
              break;
            }

          case "combobox":
          case "listbox":
            {
              const value = field.defaultValue || "";
              storage.setValue(id, {
                value
              });
              break;
            }

          default:
            continue;
        }

        const domElement = document.getElementById(id);

        if (!domElement || !GetElementsByNameSet.has(domElement)) {
          continue;
        }

        domElement.dispatchEvent(new Event("resetform"));
      }

      if (this.enableScripting) {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: "app",
            ids: allIds,
            name: "ResetForm"
          }
        });
      }

      return false;
    };
  }

}

class TextAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable
    });
  }

  render() {
    this.container.className = "textAnnotation";
    const image = document.createElement("img");
    image.style.height = this.container.style.height;
    image.style.width = this.container.style.width;
    image.src = this.imageResourcesPath + "annotation-" + this.data.name.toLowerCase() + ".svg";
    image.alt = "[{{type}} Annotation]";
    image.dataset.l10nId = "text_annotation_type";
    image.dataset.l10nArgs = JSON.stringify({
      type: this.data.name
    });

    if (!this.data.hasPopup) {
      this._createPopup(image, this.data);
    }

    this.container.appendChild(image);
    return this.container;
  }

}

class WidgetAnnotationElement extends AnnotationElement {
  render() {
    if (this.data.alternativeText) {
      this.container.title = this.data.alternativeText;
    }

    return this.container;
  }

  _getKeyModifier(event) {
    const {
      isWin,
      isMac
    } = AnnotationElement.platform;
    return isWin && event.ctrlKey || isMac && event.metaKey;
  }

  _setEventListener(element, baseName, eventName, valueGetter) {
    if (baseName.includes("mouse")) {
      element.addEventListener(baseName, event => {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: this.data.id,
            name: eventName,
            value: valueGetter(event),
            shift: event.shiftKey,
            modifier: this._getKeyModifier(event)
          }
        });
      });
    } else {
      element.addEventListener(baseName, event => {
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id: this.data.id,
            name: eventName,
            value: valueGetter(event)
          }
        });
      });
    }
  }

  _setEventListeners(element, names, getter) {
    for (const [baseName, eventName] of names) {
      if (eventName === "Action" || this.data.actions?.[eventName]) {
        this._setEventListener(element, baseName, eventName, getter);
      }
    }
  }

  _setBackgroundColor(element) {
    const color = this.data.backgroundColor || null;
    element.style.backgroundColor = color === null ? "transparent" : _util.Util.makeHexColor(color[0], color[1], color[2]);
  }

}

class TextWidgetAnnotationElement extends WidgetAnnotationElement {
  constructor(parameters) {
    const isRenderable = parameters.renderForms || !parameters.data.hasAppearance && !!parameters.data.fieldValue;
    super(parameters, {
      isRenderable
    });
  }

  setPropertyOnSiblings(base, key, value, keyInStorage) {
    const storage = this.annotationStorage;

    for (const element of this._getElementsByName(base.name, base.id)) {
      if (element.domElement) {
        element.domElement[key] = value;
      }

      storage.setValue(element.id, {
        [keyInStorage]: value
      });
    }
  }

  render() {
    const storage = this.annotationStorage;
    const id = this.data.id;
    this.container.className = "textWidgetAnnotation";
    let element = null;

    if (this.renderForms) {
      const storedData = storage.getValue(id, {
        value: this.data.fieldValue
      });
      const textContent = storedData.formattedValue || storedData.value || "";
      const elementData = {
        userValue: null,
        formattedValue: null,
        valueOnFocus: ""
      };

      if (this.data.multiLine) {
        element = document.createElement("textarea");
        element.textContent = textContent;
      } else {
        element = document.createElement("input");
        element.type = "text";
        element.setAttribute("value", textContent);
      }

      GetElementsByNameSet.add(element);
      element.disabled = this.data.readOnly;
      element.name = this.data.fieldName;
      element.tabIndex = DEFAULT_TAB_INDEX;
      elementData.userValue = textContent;
      element.setAttribute("id", id);
      element.addEventListener("input", event => {
        storage.setValue(id, {
          value: event.target.value
        });
        this.setPropertyOnSiblings(element, "value", event.target.value, "value");
      });
      element.addEventListener("resetform", event => {
        const defaultValue = this.data.defaultFieldValue ?? "";
        element.value = elementData.userValue = defaultValue;
        elementData.formattedValue = null;
      });

      let blurListener = event => {
        const {
          formattedValue
        } = elementData;

        if (formattedValue !== null && formattedValue !== undefined) {
          event.target.value = formattedValue;
        }

        event.target.scrollLeft = 0;
      };

      if (this.enableScripting && this.hasJSActions) {
        element.addEventListener("focus", event => {
          if (elementData.userValue) {
            event.target.value = elementData.userValue;
          }

          elementData.valueOnFocus = event.target.value;
        });
        element.addEventListener("updatefromsandbox", jsEvent => {
          const actions = {
            value(event) {
              elementData.userValue = event.detail.value ?? "";
              storage.setValue(id, {
                value: elementData.userValue.toString()
              });
              event.target.value = elementData.userValue;
            },

            formattedValue(event) {
              const {
                formattedValue
              } = event.detail;
              elementData.formattedValue = formattedValue;

              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {
                event.target.value = formattedValue;
              }

              storage.setValue(id, {
                formattedValue
              });
            },

            selRange(event) {
              event.target.setSelectionRange(...event.detail.selRange);
            }

          };

          this._dispatchEventFromSandbox(actions, jsEvent);
        });
        element.addEventListener("keydown", event => {
          let commitKey = -1;

          if (event.key === "Escape") {
            commitKey = 0;
          } else if (event.key === "Enter") {
            commitKey = 2;
          } else if (event.key === "Tab") {
            commitKey = 3;
          }

          if (commitKey === -1) {
            return;
          }

          const {
            value
          } = event.target;

          if (elementData.valueOnFocus === value) {
            return;
          }

          elementData.userValue = value;
          this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
            source: this,
            detail: {
              id,
              name: "Keystroke",
              value,
              willCommit: true,
              commitKey,
              selStart: event.target.selectionStart,
              selEnd: event.target.selectionEnd
            }
          });
        });
        const _blurListener = blurListener;
        blurListener = null;
        element.addEventListener("blur", event => {
          const {
            value
          } = event.target;
          elementData.userValue = value;

          if (this._mouseState.isDown && elementData.valueOnFocus !== value) {
            this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
              source: this,
              detail: {
                id,
                name: "Keystroke",
                value,
                willCommit: true,
                commitKey: 1,
                selStart: event.target.selectionStart,
                selEnd: event.target.selectionEnd
              }
            });
          }

          _blurListener(event);
        });

        if (this.data.actions?.Keystroke) {
          element.addEventListener("beforeinput", event => {
            const {
              data,
              target
            } = event;
            const {
              value,
              selectionStart,
              selectionEnd
            } = target;
            let selStart = selectionStart,
                selEnd = selectionEnd;

            switch (event.inputType) {
              case "deleteWordBackward":
                {
                  const match = value.substring(0, selectionStart).match(/\w*[^\w]*$/);

                  if (match) {
                    selStart -= match[0].length;
                  }

                  break;
                }

              case "deleteWordForward":
                {
                  const match = value.substring(selectionStart).match(/^[^\w]*\w*/);

                  if (match) {
                    selEnd += match[0].length;
                  }

                  break;
                }

              case "deleteContentBackward":
                if (selectionStart === selectionEnd) {
                  selStart -= 1;
                }

                break;

              case "deleteContentForward":
                if (selectionStart === selectionEnd) {
                  selEnd += 1;
                }

                break;
            }

            event.preventDefault();
            this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
              source: this,
              detail: {
                id,
                name: "Keystroke",
                value,
                change: data || "",
                willCommit: false,
                selStart,
                selEnd
              }
            });
          });
        }

        this._setEventListeners(element, [["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"]], event => event.target.value);
      }

      if (blurListener) {
        element.addEventListener("blur", blurListener);
      }

      if (this.data.maxLen !== null) {
        element.maxLength = this.data.maxLen;
      }

      if (this.data.comb) {
        const fieldWidth = this.data.rect[2] - this.data.rect[0];
        const combWidth = fieldWidth / this.data.maxLen;
        element.classList.add("comb");
        element.style.letterSpacing = `calc(${combWidth}px - 1ch)`;
      }
    } else {
      element = document.createElement("div");
      element.textContent = this.data.fieldValue;
      element.style.verticalAlign = "middle";
      element.style.display = "table-cell";
    }

    this._setTextStyle(element);

    this._setBackgroundColor(element);

    this._setDefaultPropertiesFromJS(element);

    this.container.appendChild(element);
    return this.container;
  }

  _setTextStyle(element) {
    const TEXT_ALIGNMENT = ["left", "center", "right"];
    const {
      fontSize,
      fontColor
    } = this.data.defaultAppearanceData;
    const style = element.style;

    if (fontSize) {
      style.fontSize = `${fontSize}px`;
    }

    style.color = _util.Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);

    if (this.data.textAlignment !== null) {
      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];
    }
  }

}

class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: parameters.renderForms
    });
  }

  render() {
    const storage = this.annotationStorage;
    const data = this.data;
    const id = data.id;
    let value = storage.getValue(id, {
      value: data.exportValue === data.fieldValue
    }).value;

    if (typeof value === "string") {
      value = value !== "Off";
      storage.setValue(id, {
        value
      });
    }

    this.container.className = "buttonWidgetAnnotation checkBox";
    const element = document.createElement("input");
    GetElementsByNameSet.add(element);
    element.disabled = data.readOnly;
    element.type = "checkbox";
    element.name = data.fieldName;

    if (value) {
      element.setAttribute("checked", true);
    }

    element.setAttribute("id", id);
    element.setAttribute("exportValue", data.exportValue);
    element.tabIndex = DEFAULT_TAB_INDEX;
    element.addEventListener("change", event => {
      const {
        name,
        checked
      } = event.target;

      for (const checkbox of this._getElementsByName(name, id)) {
        const curChecked = checked && checkbox.exportValue === data.exportValue;

        if (checkbox.domElement) {
          checkbox.domElement.checked = curChecked;
        }

        storage.setValue(checkbox.id, {
          value: curChecked
        });
      }

      storage.setValue(id, {
        value: checked
      });
    });
    element.addEventListener("resetform", event => {
      const defaultValue = data.defaultFieldValue || "Off";
      event.target.checked = defaultValue === data.exportValue;
    });

    if (this.enableScripting && this.hasJSActions) {
      element.addEventListener("updatefromsandbox", jsEvent => {
        const actions = {
          value(event) {
            event.target.checked = event.detail.value !== "Off";
            storage.setValue(id, {
              value: event.target.checked
            });
          }

        };

        this._dispatchEventFromSandbox(actions, jsEvent);
      });

      this._setEventListeners(element, [["change", "Validate"], ["change", "Action"], ["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"]], event => event.target.checked);
    }

    this._setBackgroundColor(element);

    this._setDefaultPropertiesFromJS(element);

    this.container.appendChild(element);
    return this.container;
  }

}

class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: parameters.renderForms
    });
  }

  render() {
    this.container.className = "buttonWidgetAnnotation radioButton";
    const storage = this.annotationStorage;
    const data = this.data;
    const id = data.id;
    let value = storage.getValue(id, {
      value: data.fieldValue === data.buttonValue
    }).value;

    if (typeof value === "string") {
      value = value !== data.buttonValue;
      storage.setValue(id, {
        value
      });
    }

    const element = document.createElement("input");
    GetElementsByNameSet.add(element);
    element.disabled = data.readOnly;
    element.type = "radio";
    element.name = data.fieldName;

    if (value) {
      element.setAttribute("checked", true);
    }

    element.setAttribute("id", id);
    element.tabIndex = DEFAULT_TAB_INDEX;
    element.addEventListener("change", event => {
      const {
        name,
        checked
      } = event.target;

      for (const radio of this._getElementsByName(name, id)) {
        storage.setValue(radio.id, {
          value: false
        });
      }

      storage.setValue(id, {
        value: checked
      });
    });
    element.addEventListener("resetform", event => {
      const defaultValue = data.defaultFieldValue;
      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;
    });

    if (this.enableScripting && this.hasJSActions) {
      const pdfButtonValue = data.buttonValue;
      element.addEventListener("updatefromsandbox", jsEvent => {
        const actions = {
          value: event => {
            const checked = pdfButtonValue === event.detail.value;

            for (const radio of this._getElementsByName(event.target.name)) {
              const curChecked = checked && radio.id === id;

              if (radio.domElement) {
                radio.domElement.checked = curChecked;
              }

              storage.setValue(radio.id, {
                value: curChecked
              });
            }
          }
        };

        this._dispatchEventFromSandbox(actions, jsEvent);
      });

      this._setEventListeners(element, [["change", "Validate"], ["change", "Action"], ["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"]], event => event.target.checked);
    }

    this._setBackgroundColor(element);

    this._setDefaultPropertiesFromJS(element);

    this.container.appendChild(element);
    return this.container;
  }

}

class PushButtonWidgetAnnotationElement extends LinkAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      ignoreBorder: parameters.data.hasAppearance
    });
  }

  render() {
    const container = super.render();
    container.className = "buttonWidgetAnnotation pushButton";

    if (this.data.alternativeText) {
      container.title = this.data.alternativeText;
    }

    this._setDefaultPropertiesFromJS(container);

    return container;
  }

}

class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: parameters.renderForms
    });
  }

  render() {
    this.container.className = "choiceWidgetAnnotation";
    const storage = this.annotationStorage;
    const id = this.data.id;
    const storedData = storage.getValue(id, {
      value: this.data.fieldValue
    });
    let {
      fontSize
    } = this.data.defaultAppearanceData;

    if (!fontSize) {
      fontSize = 9;
    }

    const fontSizeStyle = `calc(${fontSize}px * var(--zoom-factor))`;
    const selectElement = document.createElement("select");
    GetElementsByNameSet.add(selectElement);
    selectElement.disabled = this.data.readOnly;
    selectElement.name = this.data.fieldName;
    selectElement.setAttribute("id", id);
    selectElement.tabIndex = DEFAULT_TAB_INDEX;
    selectElement.style.fontSize = `${fontSize}px`;

    if (!this.data.combo) {
      selectElement.size = this.data.options.length;

      if (this.data.multiSelect) {
        selectElement.multiple = true;
      }
    }

    selectElement.addEventListener("resetform", event => {
      const defaultValue = this.data.defaultFieldValue;

      for (const option of selectElement.options) {
        option.selected = option.value === defaultValue;
      }
    });

    for (const option of this.data.options) {
      const optionElement = document.createElement("option");
      optionElement.textContent = option.displayValue;
      optionElement.value = option.exportValue;

      if (this.data.combo) {
        optionElement.style.fontSize = fontSizeStyle;
      }

      if (storedData.value.includes(option.exportValue)) {
        optionElement.setAttribute("selected", true);
      }

      selectElement.appendChild(optionElement);
    }

    const getValue = (event, isExport) => {
      const name = isExport ? "value" : "textContent";
      const options = event.target.options;

      if (!event.target.multiple) {
        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];
      }

      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);
    };

    const getItems = event => {
      const options = event.target.options;
      return Array.prototype.map.call(options, option => {
        return {
          displayValue: option.textContent,
          exportValue: option.value
        };
      });
    };

    if (this.enableScripting && this.hasJSActions) {
      selectElement.addEventListener("updatefromsandbox", jsEvent => {
        const actions = {
          value(event) {
            const value = event.detail.value;
            const values = new Set(Array.isArray(value) ? value : [value]);

            for (const option of selectElement.options) {
              option.selected = values.has(option.value);
            }

            storage.setValue(id, {
              value: getValue(event, true)
            });
          },

          multipleSelection(event) {
            selectElement.multiple = true;
          },

          remove(event) {
            const options = selectElement.options;
            const index = event.detail.remove;
            options[index].selected = false;
            selectElement.remove(index);

            if (options.length > 0) {
              const i = Array.prototype.findIndex.call(options, option => option.selected);

              if (i === -1) {
                options[0].selected = true;
              }
            }

            storage.setValue(id, {
              value: getValue(event, true),
              items: getItems(event)
            });
          },

          clear(event) {
            while (selectElement.length !== 0) {
              selectElement.remove(0);
            }

            storage.setValue(id, {
              value: null,
              items: []
            });
          },

          insert(event) {
            const {
              index,
              displayValue,
              exportValue
            } = event.detail.insert;
            const optionElement = document.createElement("option");
            optionElement.textContent = displayValue;
            optionElement.value = exportValue;
            selectElement.insertBefore(optionElement, selectElement.children[index]);
            storage.setValue(id, {
              value: getValue(event, true),
              items: getItems(event)
            });
          },

          items(event) {
            const {
              items
            } = event.detail;

            while (selectElement.length !== 0) {
              selectElement.remove(0);
            }

            for (const item of items) {
              const {
                displayValue,
                exportValue
              } = item;
              const optionElement = document.createElement("option");
              optionElement.textContent = displayValue;
              optionElement.value = exportValue;
              selectElement.appendChild(optionElement);
            }

            if (selectElement.options.length > 0) {
              selectElement.options[0].selected = true;
            }

            storage.setValue(id, {
              value: getValue(event, true),
              items: getItems(event)
            });
          },

          indices(event) {
            const indices = new Set(event.detail.indices);

            for (const option of event.target.options) {
              option.selected = indices.has(option.index);
            }

            storage.setValue(id, {
              value: getValue(event, true)
            });
          },

          editable(event) {
            event.target.disabled = !event.detail.editable;
          }

        };

        this._dispatchEventFromSandbox(actions, jsEvent);
      });
      selectElement.addEventListener("input", event => {
        const exportValue = getValue(event, true);
        const value = getValue(event, false);
        storage.setValue(id, {
          value: exportValue
        });
        this.linkService.eventBus?.dispatch("dispatcheventinsandbox", {
          source: this,
          detail: {
            id,
            name: "Keystroke",
            value,
            changeEx: exportValue,
            willCommit: true,
            commitKey: 1,
            keyDown: false
          }
        });
      });

      this._setEventListeners(selectElement, [["focus", "Focus"], ["blur", "Blur"], ["mousedown", "Mouse Down"], ["mouseenter", "Mouse Enter"], ["mouseleave", "Mouse Exit"], ["mouseup", "Mouse Up"], ["input", "Action"]], event => event.target.checked);
    } else {
      selectElement.addEventListener("input", function (event) {
        storage.setValue(id, {
          value: getValue(event, true)
        });
      });
    }

    this._setBackgroundColor(selectElement);

    this._setDefaultPropertiesFromJS(selectElement);

    this.container.appendChild(selectElement);
    return this.container;
  }

}

class PopupAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable
    });
  }

  render() {
    const IGNORE_TYPES = ["Line", "Square", "Circle", "PolyLine", "Polygon", "Ink"];
    this.container.className = "popupAnnotation";

    if (IGNORE_TYPES.includes(this.data.parentType)) {
      return this.container;
    }

    const selector = `[data-annotation-id="${this.data.parentId}"]`;
    const parentElements = this.layer.querySelectorAll(selector);

    if (parentElements.length === 0) {
      return this.container;
    }

    const popup = new PopupElement({
      container: this.container,
      trigger: Array.from(parentElements),
      color: this.data.color,
      titleObj: this.data.titleObj,
      modificationDate: this.data.modificationDate,
      contentsObj: this.data.contentsObj,
      richText: this.data.richText
    });
    const page = this.page;

    const rect = _util.Util.normalizeRect([this.data.parentRect[0], page.view[3] - this.data.parentRect[1] + page.view[1], this.data.parentRect[2], page.view[3] - this.data.parentRect[3] + page.view[1]]);

    const popupLeft = rect[0] + this.data.parentRect[2] - this.data.parentRect[0];
    const popupTop = rect[1];
    this.container.style.transformOrigin = `${-popupLeft}px ${-popupTop}px`;
    this.container.style.left = `${popupLeft}px`;
    this.container.style.top = `${popupTop}px`;
    this.container.appendChild(popup.render());
    return this.container;
  }

}

class PopupElement {
  constructor(parameters) {
    this.container = parameters.container;
    this.trigger = parameters.trigger;
    this.color = parameters.color;
    this.titleObj = parameters.titleObj;
    this.modificationDate = parameters.modificationDate;
    this.contentsObj = parameters.contentsObj;
    this.richText = parameters.richText;
    this.hideWrapper = parameters.hideWrapper || false;
    this.pinned = false;
  }

  render() {
    const BACKGROUND_ENLIGHT = 0.7;
    const wrapper = document.createElement("div");
    wrapper.className = "popupWrapper";
    this.hideElement = this.hideWrapper ? wrapper : this.container;
    this.hideElement.hidden = true;
    const popup = document.createElement("div");
    popup.className = "popup";
    const color = this.color;

    if (color) {
      const r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];
      const g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];
      const b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];
      popup.style.backgroundColor = _util.Util.makeHexColor(r | 0, g | 0, b | 0);
    }

    const title = document.createElement("h1");
    title.dir = this.titleObj.dir;
    title.textContent = this.titleObj.str;
    popup.appendChild(title);

    const dateObject = _display_utils.PDFDateString.toDateObject(this.modificationDate);

    if (dateObject) {
      const modificationDate = document.createElement("span");
      modificationDate.className = "popupDate";
      modificationDate.textContent = "{{date}}, {{time}}";
      modificationDate.dataset.l10nId = "annotation_date_string";
      modificationDate.dataset.l10nArgs = JSON.stringify({
        date: dateObject.toLocaleDateString(),
        time: dateObject.toLocaleTimeString()
      });
      popup.appendChild(modificationDate);
    }

    if (this.richText?.str && (!this.contentsObj?.str || this.contentsObj.str === this.richText.str)) {
      _xfa_layer.XfaLayer.render({
        xfaHtml: this.richText.html,
        intent: "richText",
        div: popup
      });

      popup.lastChild.className = "richText popupContent";
    } else {
      const contents = this._formatContents(this.contentsObj);

      popup.appendChild(contents);
    }

    if (!Array.isArray(this.trigger)) {
      this.trigger = [this.trigger];
    }

    for (const element of this.trigger) {
      element.addEventListener("click", this._toggle.bind(this));
      element.addEventListener("mouseover", this._show.bind(this, false));
      element.addEventListener("mouseout", this._hide.bind(this, false));
    }

    popup.addEventListener("click", this._hide.bind(this, true));
    wrapper.appendChild(popup);
    return wrapper;
  }

  _formatContents({
    str,
    dir
  }) {
    const p = document.createElement("p");
    p.className = "popupContent";
    p.dir = dir;
    const lines = str.split(/(?:\r\n?|\n)/);

    for (let i = 0, ii = lines.length; i < ii; ++i) {
      const line = lines[i];
      p.appendChild(document.createTextNode(line));

      if (i < ii - 1) {
        p.appendChild(document.createElement("br"));
      }
    }

    return p;
  }

  _toggle() {
    if (this.pinned) {
      this._hide(true);
    } else {
      this._show(true);
    }
  }

  _show(pin = false) {
    if (pin) {
      this.pinned = true;
    }

    if (this.hideElement.hidden) {
      this.hideElement.hidden = false;
      this.container.style.zIndex += 1;
    }
  }

  _hide(unpin = true) {
    if (unpin) {
      this.pinned = false;
    }

    if (!this.hideElement.hidden && !this.pinned) {
      this.hideElement.hidden = true;
      this.container.style.zIndex -= 1;
    }
  }

}

class FreeTextAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
  }

  render() {
    this.container.className = "freeTextAnnotation";

    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    return this.container;
  }

}

class LineAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
  }

  render() {
    this.container.className = "lineAnnotation";
    const data = this.data;
    const {
      width,
      height
    } = getRectDims(data.rect);
    const svg = this.svgFactory.create(width, height);
    const line = this.svgFactory.createElement("svg:line");
    line.setAttribute("x1", data.rect[2] - data.lineCoordinates[0]);
    line.setAttribute("y1", data.rect[3] - data.lineCoordinates[1]);
    line.setAttribute("x2", data.rect[2] - data.lineCoordinates[2]);
    line.setAttribute("y2", data.rect[3] - data.lineCoordinates[3]);
    line.setAttribute("stroke-width", data.borderStyle.width || 1);
    line.setAttribute("stroke", "transparent");
    line.setAttribute("fill", "transparent");
    svg.appendChild(line);
    this.container.append(svg);

    this._createPopup(line, data);

    return this.container;
  }

}

class SquareAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
  }

  render() {
    this.container.className = "squareAnnotation";
    const data = this.data;
    const {
      width,
      height
    } = getRectDims(data.rect);
    const svg = this.svgFactory.create(width, height);
    const borderWidth = data.borderStyle.width;
    const square = this.svgFactory.createElement("svg:rect");
    square.setAttribute("x", borderWidth / 2);
    square.setAttribute("y", borderWidth / 2);
    square.setAttribute("width", width - borderWidth);
    square.setAttribute("height", height - borderWidth);
    square.setAttribute("stroke-width", borderWidth || 1);
    square.setAttribute("stroke", "transparent");
    square.setAttribute("fill", "transparent");
    svg.appendChild(square);
    this.container.append(svg);

    this._createPopup(square, data);

    return this.container;
  }

}

class CircleAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
  }

  render() {
    this.container.className = "circleAnnotation";
    const data = this.data;
    const {
      width,
      height
    } = getRectDims(data.rect);
    const svg = this.svgFactory.create(width, height);
    const borderWidth = data.borderStyle.width;
    const circle = this.svgFactory.createElement("svg:ellipse");
    circle.setAttribute("cx", width / 2);
    circle.setAttribute("cy", height / 2);
    circle.setAttribute("rx", width / 2 - borderWidth / 2);
    circle.setAttribute("ry", height / 2 - borderWidth / 2);
    circle.setAttribute("stroke-width", borderWidth || 1);
    circle.setAttribute("stroke", "transparent");
    circle.setAttribute("fill", "transparent");
    svg.appendChild(circle);
    this.container.append(svg);

    this._createPopup(circle, data);

    return this.container;
  }

}

class PolylineAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
    this.containerClassName = "polylineAnnotation";
    this.svgElementName = "svg:polyline";
  }

  render() {
    this.container.className = this.containerClassName;
    const data = this.data;
    const {
      width,
      height
    } = getRectDims(data.rect);
    const svg = this.svgFactory.create(width, height);
    let points = [];

    for (const coordinate of data.vertices) {
      const x = coordinate.x - data.rect[0];
      const y = data.rect[3] - coordinate.y;
      points.push(x + "," + y);
    }

    points = points.join(" ");
    const polyline = this.svgFactory.createElement(this.svgElementName);
    polyline.setAttribute("points", points);
    polyline.setAttribute("stroke-width", data.borderStyle.width || 1);
    polyline.setAttribute("stroke", "transparent");
    polyline.setAttribute("fill", "transparent");
    svg.appendChild(polyline);
    this.container.append(svg);

    this._createPopup(polyline, data);

    return this.container;
  }

}

class PolygonAnnotationElement extends PolylineAnnotationElement {
  constructor(parameters) {
    super(parameters);
    this.containerClassName = "polygonAnnotation";
    this.svgElementName = "svg:polygon";
  }

}

class CaretAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
  }

  render() {
    this.container.className = "caretAnnotation";

    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    return this.container;
  }

}

class InkAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
    this.containerClassName = "inkAnnotation";
    this.svgElementName = "svg:polyline";
  }

  render() {
    this.container.className = this.containerClassName;
    const data = this.data;
    const {
      width,
      height
    } = getRectDims(data.rect);
    const svg = this.svgFactory.create(width, height);

    for (const inkList of data.inkLists) {
      let points = [];

      for (const coordinate of inkList) {
        const x = coordinate.x - data.rect[0];
        const y = data.rect[3] - coordinate.y;
        points.push(`${x},${y}`);
      }

      points = points.join(" ");
      const polyline = this.svgFactory.createElement(this.svgElementName);
      polyline.setAttribute("points", points);
      polyline.setAttribute("stroke-width", data.borderStyle.width || 1);
      polyline.setAttribute("stroke", "transparent");
      polyline.setAttribute("fill", "transparent");

      this._createPopup(polyline, data);

      svg.appendChild(polyline);
    }

    this.container.append(svg);
    return this.container;
  }

}

class HighlightAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }

  render() {
    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    if (this.quadrilaterals) {
      return this._renderQuadrilaterals("highlightAnnotation");
    }

    this.container.className = "highlightAnnotation";
    return this.container;
  }

}

class UnderlineAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }

  render() {
    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    if (this.quadrilaterals) {
      return this._renderQuadrilaterals("underlineAnnotation");
    }

    this.container.className = "underlineAnnotation";
    return this.container;
  }

}

class SquigglyAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }

  render() {
    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    if (this.quadrilaterals) {
      return this._renderQuadrilaterals("squigglyAnnotation");
    }

    this.container.className = "squigglyAnnotation";
    return this.container;
  }

}

class StrikeOutAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true,
      createQuadrilaterals: true
    });
  }

  render() {
    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    if (this.quadrilaterals) {
      return this._renderQuadrilaterals("strikeoutAnnotation");
    }

    this.container.className = "strikeoutAnnotation";
    return this.container;
  }

}

class StampAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    const isRenderable = !!(parameters.data.hasPopup || parameters.data.titleObj?.str || parameters.data.contentsObj?.str || parameters.data.richText?.str);
    super(parameters, {
      isRenderable,
      ignoreBorder: true
    });
  }

  render() {
    this.container.className = "stampAnnotation";

    if (!this.data.hasPopup) {
      this._createPopup(null, this.data);
    }

    return this.container;
  }

}

class FileAttachmentAnnotationElement extends AnnotationElement {
  constructor(parameters) {
    super(parameters, {
      isRenderable: true
    });
    const {
      filename,
      content
    } = this.data.file;
    this.filename = (0, _display_utils.getFilenameFromUrl)(filename);
    this.content = content;
    this.linkService.eventBus?.dispatch("fileattachmentannotation", {
      source: this,
      filename,
      content
    });
  }

  render() {
    this.container.className = "fileAttachmentAnnotation";
    const trigger = document.createElement("div");
    trigger.style.height = this.container.style.height;
    trigger.style.width = this.container.style.width;
    trigger.addEventListener("dblclick", this._download.bind(this));

    if (!this.data.hasPopup && (this.data.titleObj?.str || this.data.contentsObj?.str || this.data.richText)) {
      this._createPopup(trigger, this.data);
    }

    this.container.appendChild(trigger);
    return this.container;
  }

  _download() {
    this.downloadManager?.openOrDownloadData(this.container, this.content, this.filename);
  }

}

class AnnotationLayer {
  static render(parameters) {
    const sortedAnnotations = [],
          popupAnnotations = [];

    for (const data of parameters.annotations) {
      if (!data) {
        continue;
      }

      const {
        width,
        height
      } = getRectDims(data.rect);

      if (width <= 0 || height <= 0) {
        continue;
      }

      if (data.annotationType === _util.AnnotationType.POPUP) {
        popupAnnotations.push(data);
        continue;
      }

      sortedAnnotations.push(data);
    }

    if (popupAnnotations.length) {
      sortedAnnotations.push(...popupAnnotations);
    }

    const div = parameters.div;

    for (const data of sortedAnnotations) {
      const element = AnnotationElementFactory.create({
        data,
        layer: div,
        page: parameters.page,
        viewport: parameters.viewport,
        linkService: parameters.linkService,
        downloadManager: parameters.downloadManager,
        imageResourcesPath: parameters.imageResourcesPath || "",
        renderForms: parameters.renderForms !== false,
        svgFactory: new _display_utils.DOMSVGFactory(),
        annotationStorage: parameters.annotationStorage || new _annotation_storage.AnnotationStorage(),
        enableScripting: parameters.enableScripting,
        hasJSActions: parameters.hasJSActions,
        fieldObjects: parameters.fieldObjects,
        mouseState: parameters.mouseState || {
          isDown: false
        }
      });

      if (element.isRenderable) {
        const rendered = element.render();

        if (data.hidden) {
          rendered.style.visibility = "hidden";
        }

        if (Array.isArray(rendered)) {
          for (const renderedElement of rendered) {
            div.appendChild(renderedElement);
          }
        } else {
          if (element instanceof PopupAnnotationElement) {
            div.prepend(rendered);
          } else {
            div.appendChild(rendered);
          }
        }
      }
    }

    this.#setAnnotationCanvasMap(div, parameters.annotationCanvasMap);
  }

  static update(parameters) {
    const {
      page,
      viewport,
      annotations,
      annotationCanvasMap,
      div
    } = parameters;
    const transform = viewport.transform;
    const matrix = `matrix(${transform.join(",")})`;
    let scale, ownMatrix;

    for (const data of annotations) {
      const elements = div.querySelectorAll(`[data-annotation-id="${data.id}"]`);

      if (elements) {
        for (const element of elements) {
          if (data.hasOwnCanvas) {
            const rect = _util.Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);

            if (!ownMatrix) {
              scale = Math.abs(transform[0] || transform[1]);
              const ownTransform = transform.slice();

              for (let i = 0; i < 4; i++) {
                ownTransform[i] = Math.sign(ownTransform[i]);
              }

              ownMatrix = `matrix(${ownTransform.join(",")})`;
            }

            const left = rect[0] * scale;
            const top = rect[1] * scale;
            element.style.left = `${left}px`;
            element.style.top = `${top}px`;
            element.style.transformOrigin = `${-left}px ${-top}px`;
            element.style.transform = ownMatrix;
          } else {
            element.style.transform = matrix;
          }
        }
      }
    }

    this.#setAnnotationCanvasMap(div, annotationCanvasMap);
    div.hidden = false;
  }

  static #setAnnotationCanvasMap(div, annotationCanvasMap) {
    if (!annotationCanvasMap) {
      return;
    }

    for (const [id, canvas] of annotationCanvasMap) {
      const element = div.querySelector(`[data-annotation-id="${id}"]`);

      if (!element) {
        continue;
      }

      const {
        firstChild
      } = element;

      if (firstChild.nodeName === "CANVAS") {
        element.replaceChild(canvas, firstChild);
      } else {
        element.insertBefore(canvas, firstChild);
      }
    }

    annotationCanvasMap.clear();
  }

}

exports.AnnotationLayer = AnnotationLayer;

/***/ }),
/* 21 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ColorConverters = void 0;

function makeColorComp(n) {
  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, "0");
}

class ColorConverters {
  static CMYK_G([c, y, m, k]) {
    return ["G", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];
  }

  static G_CMYK([g]) {
    return ["CMYK", 0, 0, 0, 1 - g];
  }

  static G_RGB([g]) {
    return ["RGB", g, g, g];
  }

  static G_HTML([g]) {
    const G = makeColorComp(g);
    return `#${G}${G}${G}`;
  }

  static RGB_G([r, g, b]) {
    return ["G", 0.3 * r + 0.59 * g + 0.11 * b];
  }

  static RGB_HTML([r, g, b]) {
    const R = makeColorComp(r);
    const G = makeColorComp(g);
    const B = makeColorComp(b);
    return `#${R}${G}${B}`;
  }

  static T_HTML() {
    return "#00000000";
  }

  static CMYK_RGB([c, y, m, k]) {
    return ["RGB", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];
  }

  static CMYK_HTML(components) {
    return this.RGB_HTML(this.CMYK_RGB(components));
  }

  static RGB_CMYK([r, g, b]) {
    const c = 1 - r;
    const m = 1 - g;
    const y = 1 - b;
    const k = Math.min(c, m, y);
    return ["CMYK", c, m, y, k];
  }

}

exports.ColorConverters = ColorConverters;

/***/ }),
/* 22 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.XfaLayer = void 0;

var _xfa_text = __w_pdfjs_require__(18);

class XfaLayer {
  static setupStorage(html, id, element, storage, intent) {
    const storedData = storage.getValue(id, {
      value: null
    });

    switch (element.name) {
      case "textarea":
        if (storedData.value !== null) {
          html.textContent = storedData.value;
        }

        if (intent === "print") {
          break;
        }

        html.addEventListener("input", event => {
          storage.setValue(id, {
            value: event.target.value
          });
        });
        break;

      case "input":
        if (element.attributes.type === "radio" || element.attributes.type === "checkbox") {
          if (storedData.value === element.attributes.xfaOn) {
            html.setAttribute("checked", true);
          } else if (storedData.value === element.attributes.xfaOff) {
            html.removeAttribute("checked");
          }

          if (intent === "print") {
            break;
          }

          html.addEventListener("change", event => {
            storage.setValue(id, {
              value: event.target.checked ? event.target.getAttribute("xfaOn") : event.target.getAttribute("xfaOff")
            });
          });
        } else {
          if (storedData.value !== null) {
            html.setAttribute("value", storedData.value);
          }

          if (intent === "print") {
            break;
          }

          html.addEventListener("input", event => {
            storage.setValue(id, {
              value: event.target.value
            });
          });
        }

        break;

      case "select":
        if (storedData.value !== null) {
          for (const option of element.children) {
            if (option.attributes.value === storedData.value) {
              option.attributes.selected = true;
            }
          }
        }

        html.addEventListener("input", event => {
          const options = event.target.options;
          const value = options.selectedIndex === -1 ? "" : options[options.selectedIndex].value;
          storage.setValue(id, {
            value
          });
        });
        break;
    }
  }

  static setAttributes({
    html,
    element,
    storage = null,
    intent,
    linkService
  }) {
    const {
      attributes
    } = element;
    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;

    if (attributes.type === "radio") {
      attributes.name = `${attributes.name}-${intent}`;
    }

    for (const [key, value] of Object.entries(attributes)) {
      if (value === null || value === undefined || key === "dataId") {
        continue;
      }

      if (key !== "style") {
        if (key === "textContent") {
          html.textContent = value;
        } else if (key === "class") {
          if (value.length) {
            html.setAttribute(key, value.join(" "));
          }
        } else {
          if (isHTMLAnchorElement && (key === "href" || key === "newWindow")) {
            continue;
          }

          html.setAttribute(key, value);
        }
      } else {
        Object.assign(html.style, value);
      }
    }

    if (isHTMLAnchorElement) {
      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);
    }

    if (storage && attributes.dataId) {
      this.setupStorage(html, attributes.dataId, element, storage);
    }
  }

  static render(parameters) {
    const storage = parameters.annotationStorage;
    const linkService = parameters.linkService;
    const root = parameters.xfaHtml;
    const intent = parameters.intent || "display";
    const rootHtml = document.createElement(root.name);

    if (root.attributes) {
      this.setAttributes({
        html: rootHtml,
        element: root,
        intent,
        linkService
      });
    }

    const stack = [[root, -1, rootHtml]];
    const rootDiv = parameters.div;
    rootDiv.appendChild(rootHtml);

    if (parameters.viewport) {
      const transform = `matrix(${parameters.viewport.transform.join(",")})`;
      rootDiv.style.transform = transform;
    }

    if (intent !== "richText") {
      rootDiv.setAttribute("class", "xfaLayer xfaFont");
    }

    const textDivs = [];

    while (stack.length > 0) {
      const [parent, i, html] = stack[stack.length - 1];

      if (i + 1 === parent.children.length) {
        stack.pop();
        continue;
      }

      const child = parent.children[++stack[stack.length - 1][1]];

      if (child === null) {
        continue;
      }

      const {
        name
      } = child;

      if (name === "#text") {
        const node = document.createTextNode(child.value);
        textDivs.push(node);
        html.appendChild(node);
        continue;
      }

      let childHtml;

      if (child?.attributes?.xmlns) {
        childHtml = document.createElementNS(child.attributes.xmlns, name);
      } else {
        childHtml = document.createElement(name);
      }

      html.appendChild(childHtml);

      if (child.attributes) {
        this.setAttributes({
          html: childHtml,
          element: child,
          storage,
          intent,
          linkService
        });
      }

      if (child.children && child.children.length > 0) {
        stack.push([child, -1, childHtml]);
      } else if (child.value) {
        const node = document.createTextNode(child.value);

        if (_xfa_text.XfaText.shouldBuildText(name)) {
          textDivs.push(node);
        }

        childHtml.appendChild(node);
      }
    }

    for (const el of rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")) {
      el.setAttribute("readOnly", true);
    }

    return {
      textDivs
    };
  }

  static update(parameters) {
    const transform = `matrix(${parameters.viewport.transform.join(",")})`;
    parameters.div.style.transform = transform;
    parameters.div.hidden = false;
  }

}

exports.XfaLayer = XfaLayer;

/***/ }),
/* 23 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.renderTextLayer = renderTextLayer;

var _util = __w_pdfjs_require__(1);

const MAX_TEXT_DIVS_TO_RENDER = 100000;
const DEFAULT_FONT_SIZE = 30;
const DEFAULT_FONT_ASCENT = 0.8;
const ascentCache = new Map();
const AllWhitespaceRegexp = /^\s+$/g;

function getAscent(fontFamily, ctx) {
  const cachedAscent = ascentCache.get(fontFamily);

  if (cachedAscent) {
    return cachedAscent;
  }

  ctx.save();
  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;
  const metrics = ctx.measureText("");
  let ascent = metrics.fontBoundingBoxAscent;
  let descent = Math.abs(metrics.fontBoundingBoxDescent);

  if (ascent) {
    ctx.restore();
    const ratio = ascent / (ascent + descent);
    ascentCache.set(fontFamily, ratio);
    return ratio;
  }

  ctx.strokeStyle = "red";
  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);
  ctx.strokeText("g", 0, 0);
  let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;
  descent = 0;

  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {
    if (pixels[i] > 0) {
      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);
      break;
    }
  }

  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);
  ctx.strokeText("A", 0, DEFAULT_FONT_SIZE);
  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;
  ascent = 0;

  for (let i = 0, ii = pixels.length; i < ii; i += 4) {
    if (pixels[i] > 0) {
      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);
      break;
    }
  }

  ctx.restore();

  if (ascent) {
    const ratio = ascent / (ascent + descent);
    ascentCache.set(fontFamily, ratio);
    return ratio;
  }

  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);
  return DEFAULT_FONT_ASCENT;
}

function appendText(task, geom, styles, ctx) {
  const textDiv = document.createElement("span");
  const textDivProperties = task._enhanceTextSelection ? {
    angle: 0,
    canvasWidth: 0,
    hasText: geom.str !== "",
    hasEOL: geom.hasEOL,
    originalTransform: null,
    paddingBottom: 0,
    paddingLeft: 0,
    paddingRight: 0,
    paddingTop: 0,
    scale: 1
  } : {
    angle: 0,
    canvasWidth: 0,
    hasText: geom.str !== "",
    hasEOL: geom.hasEOL
  };

  task._textDivs.push(textDiv);

  const tx = _util.Util.transform(task._viewport.transform, geom.transform);

  let angle = Math.atan2(tx[1], tx[0]);
  const style = styles[geom.fontName];

  if (style.vertical) {
    angle += Math.PI / 2;
  }

  const fontHeight = Math.hypot(tx[2], tx[3]);
  const fontAscent = fontHeight * getAscent(style.fontFamily, ctx);
  let left, top;

  if (angle === 0) {
    left = tx[4];
    top = tx[5] - fontAscent;
  } else {
    left = tx[4] + fontAscent * Math.sin(angle);
    top = tx[5] - fontAscent * Math.cos(angle);
  }

  textDiv.style.left = `${left}px`;
  textDiv.style.top = `${top}px`;
  textDiv.style.fontSize = `${fontHeight}px`;
  textDiv.style.fontFamily = style.fontFamily;
  textDiv.setAttribute("role", "presentation");
  textDiv.textContent = geom.str;
  textDiv.dir = geom.dir;

  if (task._fontInspectorEnabled) {
    textDiv.dataset.fontName = geom.fontName;
  }

  if (angle !== 0) {
    textDivProperties.angle = angle * (180 / Math.PI);
  }

  let shouldScaleText = false;

  if (geom.str.length > 1 || task._enhanceTextSelection && AllWhitespaceRegexp.test(geom.str)) {
    shouldScaleText = true;
  } else if (geom.str !== " " && geom.transform[0] !== geom.transform[3]) {
    const absScaleX = Math.abs(geom.transform[0]),
          absScaleY = Math.abs(geom.transform[3]);

    if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {
      shouldScaleText = true;
    }
  }

  if (shouldScaleText) {
    if (style.vertical) {
      textDivProperties.canvasWidth = geom.height * task._viewport.scale;
    } else {
      textDivProperties.canvasWidth = geom.width * task._viewport.scale;
    }
  }

  task._textDivProperties.set(textDiv, textDivProperties);

  if (task._textContentStream) {
    task._layoutText(textDiv);
  }

  if (task._enhanceTextSelection && textDivProperties.hasText) {
    let angleCos = 1,
        angleSin = 0;

    if (angle !== 0) {
      angleCos = Math.cos(angle);
      angleSin = Math.sin(angle);
    }

    const divWidth = (style.vertical ? geom.height : geom.width) * task._viewport.scale;
    const divHeight = fontHeight;
    let m, b;

    if (angle !== 0) {
      m = [angleCos, angleSin, -angleSin, angleCos, left, top];
      b = _util.Util.getAxialAlignedBoundingBox([0, 0, divWidth, divHeight], m);
    } else {
      b = [left, top, left + divWidth, top + divHeight];
    }

    task._bounds.push({
      left: b[0],
      top: b[1],
      right: b[2],
      bottom: b[3],
      div: textDiv,
      size: [divWidth, divHeight],
      m
    });
  }
}

function render(task) {
  if (task._canceled) {
    return;
  }

  const textDivs = task._textDivs;
  const capability = task._capability;
  const textDivsLength = textDivs.length;

  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {
    task._renderingDone = true;
    capability.resolve();
    return;
  }

  if (!task._textContentStream) {
    for (let i = 0; i < textDivsLength; i++) {
      task._layoutText(textDivs[i]);
    }
  }

  task._renderingDone = true;
  capability.resolve();
}

function findPositiveMin(ts, offset, count) {
  let result = 0;

  for (let i = 0; i < count; i++) {
    const t = ts[offset++];

    if (t > 0) {
      result = result ? Math.min(t, result) : t;
    }
  }

  return result;
}

function expand(task) {
  const bounds = task._bounds;
  const viewport = task._viewport;
  const expanded = expandBounds(viewport.width, viewport.height, bounds);

  for (let i = 0; i < expanded.length; i++) {
    const div = bounds[i].div;

    const divProperties = task._textDivProperties.get(div);

    if (divProperties.angle === 0) {
      divProperties.paddingLeft = bounds[i].left - expanded[i].left;
      divProperties.paddingTop = bounds[i].top - expanded[i].top;
      divProperties.paddingRight = expanded[i].right - bounds[i].right;
      divProperties.paddingBottom = expanded[i].bottom - bounds[i].bottom;

      task._textDivProperties.set(div, divProperties);

      continue;
    }

    const e = expanded[i],
          b = bounds[i];
    const m = b.m,
          c = m[0],
          s = m[1];
    const points = [[0, 0], [0, b.size[1]], [b.size[0], 0], b.size];
    const ts = new Float64Array(64);

    for (let j = 0, jj = points.length; j < jj; j++) {
      const t = _util.Util.applyTransform(points[j], m);

      ts[j + 0] = c && (e.left - t[0]) / c;
      ts[j + 4] = s && (e.top - t[1]) / s;
      ts[j + 8] = c && (e.right - t[0]) / c;
      ts[j + 12] = s && (e.bottom - t[1]) / s;
      ts[j + 16] = s && (e.left - t[0]) / -s;
      ts[j + 20] = c && (e.top - t[1]) / c;
      ts[j + 24] = s && (e.right - t[0]) / -s;
      ts[j + 28] = c && (e.bottom - t[1]) / c;
      ts[j + 32] = c && (e.left - t[0]) / -c;
      ts[j + 36] = s && (e.top - t[1]) / -s;
      ts[j + 40] = c && (e.right - t[0]) / -c;
      ts[j + 44] = s && (e.bottom - t[1]) / -s;
      ts[j + 48] = s && (e.left - t[0]) / s;
      ts[j + 52] = c && (e.top - t[1]) / -c;
      ts[j + 56] = s && (e.right - t[0]) / s;
      ts[j + 60] = c && (e.bottom - t[1]) / -c;
    }

    const boxScale = 1 + Math.min(Math.abs(c), Math.abs(s));
    divProperties.paddingLeft = findPositiveMin(ts, 32, 16) / boxScale;
    divProperties.paddingTop = findPositiveMin(ts, 48, 16) / boxScale;
    divProperties.paddingRight = findPositiveMin(ts, 0, 16) / boxScale;
    divProperties.paddingBottom = findPositiveMin(ts, 16, 16) / boxScale;

    task._textDivProperties.set(div, divProperties);
  }
}

function expandBounds(width, height, boxes) {
  const bounds = boxes.map(function (box, i) {
    return {
      x1: box.left,
      y1: box.top,
      x2: box.right,
      y2: box.bottom,
      index: i,
      x1New: undefined,
      x2New: undefined
    };
  });
  expandBoundsLTR(width, bounds);
  const expanded = new Array(boxes.length);

  for (const b of bounds) {
    const i = b.index;
    expanded[i] = {
      left: b.x1New,
      top: 0,
      right: b.x2New,
      bottom: 0
    };
  }

  boxes.map(function (box, i) {
    const e = expanded[i],
          b = bounds[i];
    b.x1 = box.top;
    b.y1 = width - e.right;
    b.x2 = box.bottom;
    b.y2 = width - e.left;
    b.index = i;
    b.x1New = undefined;
    b.x2New = undefined;
  });
  expandBoundsLTR(height, bounds);

  for (const b of bounds) {
    const i = b.index;
    expanded[i].top = b.x1New;
    expanded[i].bottom = b.x2New;
  }

  return expanded;
}

function expandBoundsLTR(width, bounds) {
  bounds.sort(function (a, b) {
    return a.x1 - b.x1 || a.index - b.index;
  });
  const fakeBoundary = {
    x1: -Infinity,
    y1: -Infinity,
    x2: 0,
    y2: Infinity,
    index: -1,
    x1New: 0,
    x2New: 0
  };
  const horizon = [{
    start: -Infinity,
    end: Infinity,
    boundary: fakeBoundary
  }];

  for (const boundary of bounds) {
    let i = 0;

    while (i < horizon.length && horizon[i].end <= boundary.y1) {
      i++;
    }

    let j = horizon.length - 1;

    while (j >= 0 && horizon[j].start >= boundary.y2) {
      j--;
    }

    let horizonPart, affectedBoundary;
    let q,
        k,
        maxXNew = -Infinity;

    for (q = i; q <= j; q++) {
      horizonPart = horizon[q];
      affectedBoundary = horizonPart.boundary;
      let xNew;

      if (affectedBoundary.x2 > boundary.x1) {
        xNew = affectedBoundary.index > boundary.index ? affectedBoundary.x1New : boundary.x1;
      } else if (affectedBoundary.x2New === undefined) {
        xNew = (affectedBoundary.x2 + boundary.x1) / 2;
      } else {
        xNew = affectedBoundary.x2New;
      }

      if (xNew > maxXNew) {
        maxXNew = xNew;
      }
    }

    boundary.x1New = maxXNew;

    for (q = i; q <= j; q++) {
      horizonPart = horizon[q];
      affectedBoundary = horizonPart.boundary;

      if (affectedBoundary.x2New === undefined) {
        if (affectedBoundary.x2 > boundary.x1) {
          if (affectedBoundary.index > boundary.index) {
            affectedBoundary.x2New = affectedBoundary.x2;
          }
        } else {
          affectedBoundary.x2New = maxXNew;
        }
      } else if (affectedBoundary.x2New > maxXNew) {
        affectedBoundary.x2New = Math.max(maxXNew, affectedBoundary.x2);
      }
    }

    const changedHorizon = [];
    let lastBoundary = null;

    for (q = i; q <= j; q++) {
      horizonPart = horizon[q];
      affectedBoundary = horizonPart.boundary;
      const useBoundary = affectedBoundary.x2 > boundary.x2 ? affectedBoundary : boundary;

      if (lastBoundary === useBoundary) {
        changedHorizon[changedHorizon.length - 1].end = horizonPart.end;
      } else {
        changedHorizon.push({
          start: horizonPart.start,
          end: horizonPart.end,
          boundary: useBoundary
        });
        lastBoundary = useBoundary;
      }
    }

    if (horizon[i].start < boundary.y1) {
      changedHorizon[0].start = boundary.y1;
      changedHorizon.unshift({
        start: horizon[i].start,
        end: boundary.y1,
        boundary: horizon[i].boundary
      });
    }

    if (boundary.y2 < horizon[j].end) {
      changedHorizon[changedHorizon.length - 1].end = boundary.y2;
      changedHorizon.push({
        start: boundary.y2,
        end: horizon[j].end,
        boundary: horizon[j].boundary
      });
    }

    for (q = i; q <= j; q++) {
      horizonPart = horizon[q];
      affectedBoundary = horizonPart.boundary;

      if (affectedBoundary.x2New !== undefined) {
        continue;
      }

      let used = false;

      for (k = i - 1; !used && k >= 0 && horizon[k].start >= affectedBoundary.y1; k--) {
        used = horizon[k].boundary === affectedBoundary;
      }

      for (k = j + 1; !used && k < horizon.length && horizon[k].end <= affectedBoundary.y2; k++) {
        used = horizon[k].boundary === affectedBoundary;
      }

      for (k = 0; !used && k < changedHorizon.length; k++) {
        used = changedHorizon[k].boundary === affectedBoundary;
      }

      if (!used) {
        affectedBoundary.x2New = maxXNew;
      }
    }

    Array.prototype.splice.apply(horizon, [i, j - i + 1].concat(changedHorizon));
  }

  for (const horizonPart of horizon) {
    const affectedBoundary = horizonPart.boundary;

    if (affectedBoundary.x2New === undefined) {
      affectedBoundary.x2New = Math.max(width, affectedBoundary.x2);
    }
  }
}

class TextLayerRenderTask {
  constructor({
    textContent,
    textContentStream,
    container,
    viewport,
    textDivs,
    textContentItemsStr,
    enhanceTextSelection
  }) {
    this._textContent = textContent;
    this._textContentStream = textContentStream;
    this._container = container;
    this._document = container.ownerDocument;
    this._viewport = viewport;
    this._textDivs = textDivs || [];
    this._textContentItemsStr = textContentItemsStr || [];
    this._enhanceTextSelection = !!enhanceTextSelection;
    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;
    this._reader = null;
    this._layoutTextLastFontSize = null;
    this._layoutTextLastFontFamily = null;
    this._layoutTextCtx = null;
    this._textDivProperties = new WeakMap();
    this._renderingDone = false;
    this._canceled = false;
    this._capability = (0, _util.createPromiseCapability)();
    this._renderTimer = null;
    this._bounds = [];

    this._capability.promise.finally(() => {
      if (!this._enhanceTextSelection) {
        this._textDivProperties = null;
      }

      if (this._layoutTextCtx) {
        this._layoutTextCtx.canvas.width = 0;
        this._layoutTextCtx.canvas.height = 0;
        this._layoutTextCtx = null;
      }
    }).catch(() => {});
  }

  get promise() {
    return this._capability.promise;
  }

  cancel() {
    this._canceled = true;

    if (this._reader) {
      this._reader.cancel(new _util.AbortException("TextLayer task cancelled.")).catch(() => {});

      this._reader = null;
    }

    if (this._renderTimer !== null) {
      clearTimeout(this._renderTimer);
      this._renderTimer = null;
    }

    this._capability.reject(new Error("TextLayer task cancelled."));
  }

  _processItems(items, styleCache) {
    for (let i = 0, len = items.length; i < len; i++) {
      if (items[i].str === undefined) {
        if (items[i].type === "beginMarkedContentProps" || items[i].type === "beginMarkedContent") {
          const parent = this._container;
          this._container = document.createElement("span");

          this._container.classList.add("markedContent");

          if (items[i].id !== null) {
            this._container.setAttribute("id", `${items[i].id}`);
          }

          parent.appendChild(this._container);
        } else if (items[i].type === "endMarkedContent") {
          this._container = this._container.parentNode;
        }

        continue;
      }

      this._textContentItemsStr.push(items[i].str);

      appendText(this, items[i], styleCache, this._layoutTextCtx);
    }
  }

  _layoutText(textDiv) {
    const textDivProperties = this._textDivProperties.get(textDiv);

    let transform = "";

    if (textDivProperties.canvasWidth !== 0 && textDivProperties.hasText) {
      const {
        fontSize,
        fontFamily
      } = textDiv.style;

      if (fontSize !== this._layoutTextLastFontSize || fontFamily !== this._layoutTextLastFontFamily) {
        this._layoutTextCtx.font = `${fontSize} ${fontFamily}`;
        this._layoutTextLastFontSize = fontSize;
        this._layoutTextLastFontFamily = fontFamily;
      }

      const {
        width
      } = this._layoutTextCtx.measureText(textDiv.textContent);

      if (width > 0) {
        const scale = textDivProperties.canvasWidth / width;

        if (this._enhanceTextSelection) {
          textDivProperties.scale = scale;
        }

        transform = `scaleX(${scale})`;
      }
    }

    if (textDivProperties.angle !== 0) {
      transform = `rotate(${textDivProperties.angle}deg) ${transform}`;
    }

    if (transform.length > 0) {
      if (this._enhanceTextSelection) {
        textDivProperties.originalTransform = transform;
      }

      textDiv.style.transform = transform;
    }

    if (textDivProperties.hasText) {
      this._container.appendChild(textDiv);
    }

    if (textDivProperties.hasEOL) {
      const br = document.createElement("br");
      br.setAttribute("role", "presentation");

      this._container.appendChild(br);
    }
  }

  _render(timeout = 0) {
    const capability = (0, _util.createPromiseCapability)();
    let styleCache = Object.create(null);

    const canvas = this._document.createElement("canvas");

    canvas.height = canvas.width = DEFAULT_FONT_SIZE;
    this._layoutTextCtx = canvas.getContext("2d", {
      alpha: false
    });

    if (this._textContent) {
      const textItems = this._textContent.items;
      const textStyles = this._textContent.styles;

      this._processItems(textItems, textStyles);

      capability.resolve();
    } else if (this._textContentStream) {
      const pump = () => {
        this._reader.read().then(({
          value,
          done
        }) => {
          if (done) {
            capability.resolve();
            return;
          }

          Object.assign(styleCache, value.styles);

          this._processItems(value.items, styleCache);

          pump();
        }, capability.reject);
      };

      this._reader = this._textContentStream.getReader();
      pump();
    } else {
      throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');
    }

    capability.promise.then(() => {
      styleCache = null;

      if (!timeout) {
        render(this);
      } else {
        this._renderTimer = setTimeout(() => {
          render(this);
          this._renderTimer = null;
        }, timeout);
      }
    }, this._capability.reject);
  }

  expandTextDivs(expandDivs = false) {
    if (!this._enhanceTextSelection || !this._renderingDone) {
      return;
    }

    if (this._bounds !== null) {
      expand(this);
      this._bounds = null;
    }

    const transformBuf = [],
          paddingBuf = [];

    for (let i = 0, ii = this._textDivs.length; i < ii; i++) {
      const div = this._textDivs[i];

      const divProps = this._textDivProperties.get(div);

      if (!divProps.hasText) {
        continue;
      }

      if (expandDivs) {
        transformBuf.length = 0;
        paddingBuf.length = 0;

        if (divProps.originalTransform) {
          transformBuf.push(divProps.originalTransform);
        }

        if (divProps.paddingTop > 0) {
          paddingBuf.push(`${divProps.paddingTop}px`);
          transformBuf.push(`translateY(${-divProps.paddingTop}px)`);
        } else {
          paddingBuf.push(0);
        }

        if (divProps.paddingRight > 0) {
          paddingBuf.push(`${divProps.paddingRight / divProps.scale}px`);
        } else {
          paddingBuf.push(0);
        }

        if (divProps.paddingBottom > 0) {
          paddingBuf.push(`${divProps.paddingBottom}px`);
        } else {
          paddingBuf.push(0);
        }

        if (divProps.paddingLeft > 0) {
          paddingBuf.push(`${divProps.paddingLeft / divProps.scale}px`);
          transformBuf.push(`translateX(${-divProps.paddingLeft / divProps.scale}px)`);
        } else {
          paddingBuf.push(0);
        }

        div.style.padding = paddingBuf.join(" ");

        if (transformBuf.length) {
          div.style.transform = transformBuf.join(" ");
        }
      } else {
        div.style.padding = null;
        div.style.transform = divProps.originalTransform;
      }
    }
  }

}

function renderTextLayer(renderParameters) {
  const task = new TextLayerRenderTask({
    textContent: renderParameters.textContent,
    textContentStream: renderParameters.textContentStream,
    container: renderParameters.container,
    viewport: renderParameters.viewport,
    textDivs: renderParameters.textDivs,
    textContentItemsStr: renderParameters.textContentItemsStr,
    enhanceTextSelection: renderParameters.enhanceTextSelection
  });

  task._render(renderParameters.timeout);

  return task;
}

/***/ }),
/* 24 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SVGGraphics = void 0;

var _util = __w_pdfjs_require__(1);

var _display_utils = __w_pdfjs_require__(5);

var _is_node = __w_pdfjs_require__(3);

let SVGGraphics = class {
  constructor() {
    (0, _util.unreachable)("Not implemented: SVGGraphics");
  }

};
exports.SVGGraphics = SVGGraphics;
{
  const SVG_DEFAULTS = {
    fontStyle: "normal",
    fontWeight: "normal",
    fillColor: "#000000"
  };
  const XML_NS = "http://www.w3.org/XML/1998/namespace";
  const XLINK_NS = "http://www.w3.org/1999/xlink";
  const LINE_CAP_STYLES = ["butt", "round", "square"];
  const LINE_JOIN_STYLES = ["miter", "round", "bevel"];

  const createObjectURL = function (data, contentType = "", forceDataSchema = false) {
    if (URL.createObjectURL && typeof Blob !== "undefined" && !forceDataSchema) {
      return URL.createObjectURL(new Blob([data], {
        type: contentType
      }));
    }

    const digits = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    let buffer = `data:${contentType};base64,`;

    for (let i = 0, ii = data.length; i < ii; i += 3) {
      const b1 = data[i] & 0xff;
      const b2 = data[i + 1] & 0xff;
      const b3 = data[i + 2] & 0xff;
      const d1 = b1 >> 2,
            d2 = (b1 & 3) << 4 | b2 >> 4;
      const d3 = i + 1 < ii ? (b2 & 0xf) << 2 | b3 >> 6 : 64;
      const d4 = i + 2 < ii ? b3 & 0x3f : 64;
      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];
    }

    return buffer;
  };

  const convertImgDataToPng = function () {
    const PNG_HEADER = new Uint8Array([0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a]);
    const CHUNK_WRAPPER_SIZE = 12;
    const crcTable = new Int32Array(256);

    for (let i = 0; i < 256; i++) {
      let c = i;

      for (let h = 0; h < 8; h++) {
        if (c & 1) {
          c = 0xedb88320 ^ c >> 1 & 0x7fffffff;
        } else {
          c = c >> 1 & 0x7fffffff;
        }
      }

      crcTable[i] = c;
    }

    function crc32(data, start, end) {
      let crc = -1;

      for (let i = start; i < end; i++) {
        const a = (crc ^ data[i]) & 0xff;
        const b = crcTable[a];
        crc = crc >>> 8 ^ b;
      }

      return crc ^ -1;
    }

    function writePngChunk(type, body, data, offset) {
      let p = offset;
      const len = body.length;
      data[p] = len >> 24 & 0xff;
      data[p + 1] = len >> 16 & 0xff;
      data[p + 2] = len >> 8 & 0xff;
      data[p + 3] = len & 0xff;
      p += 4;
      data[p] = type.charCodeAt(0) & 0xff;
      data[p + 1] = type.charCodeAt(1) & 0xff;
      data[p + 2] = type.charCodeAt(2) & 0xff;
      data[p + 3] = type.charCodeAt(3) & 0xff;
      p += 4;
      data.set(body, p);
      p += body.length;
      const crc = crc32(data, offset + 4, p);
      data[p] = crc >> 24 & 0xff;
      data[p + 1] = crc >> 16 & 0xff;
      data[p + 2] = crc >> 8 & 0xff;
      data[p + 3] = crc & 0xff;
    }

    function adler32(data, start, end) {
      let a = 1;
      let b = 0;

      for (let i = start; i < end; ++i) {
        a = (a + (data[i] & 0xff)) % 65521;
        b = (b + a) % 65521;
      }

      return b << 16 | a;
    }

    function deflateSync(literals) {
      if (!_is_node.isNodeJS) {
        return deflateSyncUncompressed(literals);
      }

      try {
        let input;

        if (parseInt(process.versions.node) >= 8) {
          input = literals;
        } else {
          input = Buffer.from(literals);
        }

        const output = (__webpack_require__(/*! zlib */ "?afbb").deflateSync)(input, {
          level: 9
        });

        return output instanceof Uint8Array ? output : new Uint8Array(output);
      } catch (e) {
        (0, _util.warn)("Not compressing PNG because zlib.deflateSync is unavailable: " + e);
      }

      return deflateSyncUncompressed(literals);
    }

    function deflateSyncUncompressed(literals) {
      let len = literals.length;
      const maxBlockLength = 0xffff;
      const deflateBlocks = Math.ceil(len / maxBlockLength);
      const idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);
      let pi = 0;
      idat[pi++] = 0x78;
      idat[pi++] = 0x9c;
      let pos = 0;

      while (len > maxBlockLength) {
        idat[pi++] = 0x00;
        idat[pi++] = 0xff;
        idat[pi++] = 0xff;
        idat[pi++] = 0x00;
        idat[pi++] = 0x00;
        idat.set(literals.subarray(pos, pos + maxBlockLength), pi);
        pi += maxBlockLength;
        pos += maxBlockLength;
        len -= maxBlockLength;
      }

      idat[pi++] = 0x01;
      idat[pi++] = len & 0xff;
      idat[pi++] = len >> 8 & 0xff;
      idat[pi++] = ~len & 0xffff & 0xff;
      idat[pi++] = (~len & 0xffff) >> 8 & 0xff;
      idat.set(literals.subarray(pos), pi);
      pi += literals.length - pos;
      const adler = adler32(literals, 0, literals.length);
      idat[pi++] = adler >> 24 & 0xff;
      idat[pi++] = adler >> 16 & 0xff;
      idat[pi++] = adler >> 8 & 0xff;
      idat[pi++] = adler & 0xff;
      return idat;
    }

    function encode(imgData, kind, forceDataSchema, isMask) {
      const width = imgData.width;
      const height = imgData.height;
      let bitDepth, colorType, lineSize;
      const bytes = imgData.data;

      switch (kind) {
        case _util.ImageKind.GRAYSCALE_1BPP:
          colorType = 0;
          bitDepth = 1;
          lineSize = width + 7 >> 3;
          break;

        case _util.ImageKind.RGB_24BPP:
          colorType = 2;
          bitDepth = 8;
          lineSize = width * 3;
          break;

        case _util.ImageKind.RGBA_32BPP:
          colorType = 6;
          bitDepth = 8;
          lineSize = width * 4;
          break;

        default:
          throw new Error("invalid format");
      }

      const literals = new Uint8Array((1 + lineSize) * height);
      let offsetLiterals = 0,
          offsetBytes = 0;

      for (let y = 0; y < height; ++y) {
        literals[offsetLiterals++] = 0;
        literals.set(bytes.subarray(offsetBytes, offsetBytes + lineSize), offsetLiterals);
        offsetBytes += lineSize;
        offsetLiterals += lineSize;
      }

      if (kind === _util.ImageKind.GRAYSCALE_1BPP && isMask) {
        offsetLiterals = 0;

        for (let y = 0; y < height; y++) {
          offsetLiterals++;

          for (let i = 0; i < lineSize; i++) {
            literals[offsetLiterals++] ^= 0xff;
          }
        }
      }

      const ihdr = new Uint8Array([width >> 24 & 0xff, width >> 16 & 0xff, width >> 8 & 0xff, width & 0xff, height >> 24 & 0xff, height >> 16 & 0xff, height >> 8 & 0xff, height & 0xff, bitDepth, colorType, 0x00, 0x00, 0x00]);
      const idat = deflateSync(literals);
      const pngLength = PNG_HEADER.length + CHUNK_WRAPPER_SIZE * 3 + ihdr.length + idat.length;
      const data = new Uint8Array(pngLength);
      let offset = 0;
      data.set(PNG_HEADER, offset);
      offset += PNG_HEADER.length;
      writePngChunk("IHDR", ihdr, data, offset);
      offset += CHUNK_WRAPPER_SIZE + ihdr.length;
      writePngChunk("IDATA", idat, data, offset);
      offset += CHUNK_WRAPPER_SIZE + idat.length;
      writePngChunk("IEND", new Uint8Array(0), data, offset);
      return createObjectURL(data, "image/png", forceDataSchema);
    }

    return function convertImgDataToPng(imgData, forceDataSchema, isMask) {
      const kind = imgData.kind === undefined ? _util.ImageKind.GRAYSCALE_1BPP : imgData.kind;
      return encode(imgData, kind, forceDataSchema, isMask);
    };
  }();

  class SVGExtraState {
    constructor() {
      this.fontSizeScale = 1;
      this.fontWeight = SVG_DEFAULTS.fontWeight;
      this.fontSize = 0;
      this.textMatrix = _util.IDENTITY_MATRIX;
      this.fontMatrix = _util.FONT_IDENTITY_MATRIX;
      this.leading = 0;
      this.textRenderingMode = _util.TextRenderingMode.FILL;
      this.textMatrixScale = 1;
      this.x = 0;
      this.y = 0;
      this.lineX = 0;
      this.lineY = 0;
      this.charSpacing = 0;
      this.wordSpacing = 0;
      this.textHScale = 1;
      this.textRise = 0;
      this.fillColor = SVG_DEFAULTS.fillColor;
      this.strokeColor = "#000000";
      this.fillAlpha = 1;
      this.strokeAlpha = 1;
      this.lineWidth = 1;
      this.lineJoin = "";
      this.lineCap = "";
      this.miterLimit = 0;
      this.dashArray = [];
      this.dashPhase = 0;
      this.dependencies = [];
      this.activeClipUrl = null;
      this.clipGroup = null;
      this.maskId = "";
    }

    clone() {
      return Object.create(this);
    }

    setCurrentPoint(x, y) {
      this.x = x;
      this.y = y;
    }

  }

  function opListToTree(opList) {
    let opTree = [];
    const tmp = [];

    for (const opListElement of opList) {
      if (opListElement.fn === "save") {
        opTree.push({
          fnId: 92,
          fn: "group",
          items: []
        });
        tmp.push(opTree);
        opTree = opTree[opTree.length - 1].items;
        continue;
      }

      if (opListElement.fn === "restore") {
        opTree = tmp.pop();
      } else {
        opTree.push(opListElement);
      }
    }

    return opTree;
  }

  function pf(value) {
    if (Number.isInteger(value)) {
      return value.toString();
    }

    const s = value.toFixed(10);
    let i = s.length - 1;

    if (s[i] !== "0") {
      return s;
    }

    do {
      i--;
    } while (s[i] === "0");

    return s.substring(0, s[i] === "." ? i : i + 1);
  }

  function pm(m) {
    if (m[4] === 0 && m[5] === 0) {
      if (m[1] === 0 && m[2] === 0) {
        if (m[0] === 1 && m[3] === 1) {
          return "";
        }

        return `scale(${pf(m[0])} ${pf(m[3])})`;
      }

      if (m[0] === m[3] && m[1] === -m[2]) {
        const a = Math.acos(m[0]) * 180 / Math.PI;
        return `rotate(${pf(a)})`;
      }
    } else {
      if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {
        return `translate(${pf(m[4])} ${pf(m[5])})`;
      }
    }

    return `matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ` + `${pf(m[5])})`;
  }

  let clipCount = 0;
  let maskCount = 0;
  let shadingCount = 0;
  exports.SVGGraphics = SVGGraphics = class {
    constructor(commonObjs, objs, forceDataSchema = false) {
      this.svgFactory = new _display_utils.DOMSVGFactory();
      this.current = new SVGExtraState();
      this.transformMatrix = _util.IDENTITY_MATRIX;
      this.transformStack = [];
      this.extraStack = [];
      this.commonObjs = commonObjs;
      this.objs = objs;
      this.pendingClip = null;
      this.pendingEOFill = false;
      this.embedFonts = false;
      this.embeddedFonts = Object.create(null);
      this.cssStyle = null;
      this.forceDataSchema = !!forceDataSchema;
      this._operatorIdMapping = [];

      for (const op in _util.OPS) {
        this._operatorIdMapping[_util.OPS[op]] = op;
      }
    }

    save() {
      this.transformStack.push(this.transformMatrix);
      const old = this.current;
      this.extraStack.push(old);
      this.current = old.clone();
    }

    restore() {
      this.transformMatrix = this.transformStack.pop();
      this.current = this.extraStack.pop();
      this.pendingClip = null;
      this.tgrp = null;
    }

    group(items) {
      this.save();
      this.executeOpTree(items);
      this.restore();
    }

    loadDependencies(operatorList) {
      const fnArray = operatorList.fnArray;
      const argsArray = operatorList.argsArray;

      for (let i = 0, ii = fnArray.length; i < ii; i++) {
        if (fnArray[i] !== _util.OPS.dependency) {
          continue;
        }

        for (const obj of argsArray[i]) {
          const objsPool = obj.startsWith("g_") ? this.commonObjs : this.objs;
          const promise = new Promise(resolve => {
            objsPool.get(obj, resolve);
          });
          this.current.dependencies.push(promise);
        }
      }

      return Promise.all(this.current.dependencies);
    }

    transform(a, b, c, d, e, f) {
      const transformMatrix = [a, b, c, d, e, f];
      this.transformMatrix = _util.Util.transform(this.transformMatrix, transformMatrix);
      this.tgrp = null;
    }

    getSVG(operatorList, viewport) {
      this.viewport = viewport;

      const svgElement = this._initialize(viewport);

      return this.loadDependencies(operatorList).then(() => {
        this.transformMatrix = _util.IDENTITY_MATRIX;
        this.executeOpTree(this.convertOpList(operatorList));
        return svgElement;
      });
    }

    convertOpList(operatorList) {
      const operatorIdMapping = this._operatorIdMapping;
      const argsArray = operatorList.argsArray;
      const fnArray = operatorList.fnArray;
      const opList = [];

      for (let i = 0, ii = fnArray.length; i < ii; i++) {
        const fnId = fnArray[i];
        opList.push({
          fnId,
          fn: operatorIdMapping[fnId],
          args: argsArray[i]
        });
      }

      return opListToTree(opList);
    }

    executeOpTree(opTree) {
      for (const opTreeElement of opTree) {
        const fn = opTreeElement.fn;
        const fnId = opTreeElement.fnId;
        const args = opTreeElement.args;

        switch (fnId | 0) {
          case _util.OPS.beginText:
            this.beginText();
            break;

          case _util.OPS.dependency:
            break;

          case _util.OPS.setLeading:
            this.setLeading(args);
            break;

          case _util.OPS.setLeadingMoveText:
            this.setLeadingMoveText(args[0], args[1]);
            break;

          case _util.OPS.setFont:
            this.setFont(args);
            break;

          case _util.OPS.showText:
            this.showText(args[0]);
            break;

          case _util.OPS.showSpacedText:
            this.showText(args[0]);
            break;

          case _util.OPS.endText:
            this.endText();
            break;

          case _util.OPS.moveText:
            this.moveText(args[0], args[1]);
            break;

          case _util.OPS.setCharSpacing:
            this.setCharSpacing(args[0]);
            break;

          case _util.OPS.setWordSpacing:
            this.setWordSpacing(args[0]);
            break;

          case _util.OPS.setHScale:
            this.setHScale(args[0]);
            break;

          case _util.OPS.setTextMatrix:
            this.setTextMatrix(args[0], args[1], args[2], args[3], args[4], args[5]);
            break;

          case _util.OPS.setTextRise:
            this.setTextRise(args[0]);
            break;

          case _util.OPS.setTextRenderingMode:
            this.setTextRenderingMode(args[0]);
            break;

          case _util.OPS.setLineWidth:
            this.setLineWidth(args[0]);
            break;

          case _util.OPS.setLineJoin:
            this.setLineJoin(args[0]);
            break;

          case _util.OPS.setLineCap:
            this.setLineCap(args[0]);
            break;

          case _util.OPS.setMiterLimit:
            this.setMiterLimit(args[0]);
            break;

          case _util.OPS.setFillRGBColor:
            this.setFillRGBColor(args[0], args[1], args[2]);
            break;

          case _util.OPS.setStrokeRGBColor:
            this.setStrokeRGBColor(args[0], args[1], args[2]);
            break;

          case _util.OPS.setStrokeColorN:
            this.setStrokeColorN(args);
            break;

          case _util.OPS.setFillColorN:
            this.setFillColorN(args);
            break;

          case _util.OPS.shadingFill:
            this.shadingFill(args[0]);
            break;

          case _util.OPS.setDash:
            this.setDash(args[0], args[1]);
            break;

          case _util.OPS.setRenderingIntent:
            this.setRenderingIntent(args[0]);
            break;

          case _util.OPS.setFlatness:
            this.setFlatness(args[0]);
            break;

          case _util.OPS.setGState:
            this.setGState(args[0]);
            break;

          case _util.OPS.fill:
            this.fill();
            break;

          case _util.OPS.eoFill:
            this.eoFill();
            break;

          case _util.OPS.stroke:
            this.stroke();
            break;

          case _util.OPS.fillStroke:
            this.fillStroke();
            break;

          case _util.OPS.eoFillStroke:
            this.eoFillStroke();
            break;

          case _util.OPS.clip:
            this.clip("nonzero");
            break;

          case _util.OPS.eoClip:
            this.clip("evenodd");
            break;

          case _util.OPS.paintSolidColorImageMask:
            this.paintSolidColorImageMask();
            break;

          case _util.OPS.paintImageXObject:
            this.paintImageXObject(args[0]);
            break;

          case _util.OPS.paintInlineImageXObject:
            this.paintInlineImageXObject(args[0]);
            break;

          case _util.OPS.paintImageMaskXObject:
            this.paintImageMaskXObject(args[0]);
            break;

          case _util.OPS.paintFormXObjectBegin:
            this.paintFormXObjectBegin(args[0], args[1]);
            break;

          case _util.OPS.paintFormXObjectEnd:
            this.paintFormXObjectEnd();
            break;

          case _util.OPS.closePath:
            this.closePath();
            break;

          case _util.OPS.closeStroke:
            this.closeStroke();
            break;

          case _util.OPS.closeFillStroke:
            this.closeFillStroke();
            break;

          case _util.OPS.closeEOFillStroke:
            this.closeEOFillStroke();
            break;

          case _util.OPS.nextLine:
            this.nextLine();
            break;

          case _util.OPS.transform:
            this.transform(args[0], args[1], args[2], args[3], args[4], args[5]);
            break;

          case _util.OPS.constructPath:
            this.constructPath(args[0], args[1]);
            break;

          case _util.OPS.endPath:
            this.endPath();
            break;

          case 92:
            this.group(opTreeElement.items);
            break;

          default:
            (0, _util.warn)(`Unimplemented operator ${fn}`);
            break;
        }
      }
    }

    setWordSpacing(wordSpacing) {
      this.current.wordSpacing = wordSpacing;
    }

    setCharSpacing(charSpacing) {
      this.current.charSpacing = charSpacing;
    }

    nextLine() {
      this.moveText(0, this.current.leading);
    }

    setTextMatrix(a, b, c, d, e, f) {
      const current = this.current;
      current.textMatrix = current.lineMatrix = [a, b, c, d, e, f];
      current.textMatrixScale = Math.hypot(a, b);
      current.x = current.lineX = 0;
      current.y = current.lineY = 0;
      current.xcoords = [];
      current.ycoords = [];
      current.tspan = this.svgFactory.createElement("svg:tspan");
      current.tspan.setAttributeNS(null, "font-family", current.fontFamily);
      current.tspan.setAttributeNS(null, "font-size", `${pf(current.fontSize)}px`);
      current.tspan.setAttributeNS(null, "y", pf(-current.y));
      current.txtElement = this.svgFactory.createElement("svg:text");
      current.txtElement.appendChild(current.tspan);
    }

    beginText() {
      const current = this.current;
      current.x = current.lineX = 0;
      current.y = current.lineY = 0;
      current.textMatrix = _util.IDENTITY_MATRIX;
      current.lineMatrix = _util.IDENTITY_MATRIX;
      current.textMatrixScale = 1;
      current.tspan = this.svgFactory.createElement("svg:tspan");
      current.txtElement = this.svgFactory.createElement("svg:text");
      current.txtgrp = this.svgFactory.createElement("svg:g");
      current.xcoords = [];
      current.ycoords = [];
    }

    moveText(x, y) {
      const current = this.current;
      current.x = current.lineX += x;
      current.y = current.lineY += y;
      current.xcoords = [];
      current.ycoords = [];
      current.tspan = this.svgFactory.createElement("svg:tspan");
      current.tspan.setAttributeNS(null, "font-family", current.fontFamily);
      current.tspan.setAttributeNS(null, "font-size", `${pf(current.fontSize)}px`);
      current.tspan.setAttributeNS(null, "y", pf(-current.y));
    }

    showText(glyphs) {
      const current = this.current;
      const font = current.font;
      const fontSize = current.fontSize;

      if (fontSize === 0) {
        return;
      }

      const fontSizeScale = current.fontSizeScale;
      const charSpacing = current.charSpacing;
      const wordSpacing = current.wordSpacing;
      const fontDirection = current.fontDirection;
      const textHScale = current.textHScale * fontDirection;
      const vertical = font.vertical;
      const spacingDir = vertical ? 1 : -1;
      const defaultVMetrics = font.defaultVMetrics;
      const widthAdvanceScale = fontSize * current.fontMatrix[0];
      let x = 0;

      for (const glyph of glyphs) {
        if (glyph === null) {
          x += fontDirection * wordSpacing;
          continue;
        } else if (typeof glyph === "number") {
          x += spacingDir * glyph * fontSize / 1000;
          continue;
        }

        const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;
        const character = glyph.fontChar;
        let scaledX, scaledY;
        let width = glyph.width;

        if (vertical) {
          let vx;
          const vmetric = glyph.vmetric || defaultVMetrics;
          vx = glyph.vmetric ? vmetric[1] : width * 0.5;
          vx = -vx * widthAdvanceScale;
          const vy = vmetric[2] * widthAdvanceScale;
          width = vmetric ? -vmetric[0] : width;
          scaledX = vx / fontSizeScale;
          scaledY = (x + vy) / fontSizeScale;
        } else {
          scaledX = x / fontSizeScale;
          scaledY = 0;
        }

        if (glyph.isInFont || font.missingFile) {
          current.xcoords.push(current.x + scaledX);

          if (vertical) {
            current.ycoords.push(-current.y + scaledY);
          }

          current.tspan.textContent += character;
        } else {}

        let charWidth;

        if (vertical) {
          charWidth = width * widthAdvanceScale - spacing * fontDirection;
        } else {
          charWidth = width * widthAdvanceScale + spacing * fontDirection;
        }

        x += charWidth;
      }

      current.tspan.setAttributeNS(null, "x", current.xcoords.map(pf).join(" "));

      if (vertical) {
        current.tspan.setAttributeNS(null, "y", current.ycoords.map(pf).join(" "));
      } else {
        current.tspan.setAttributeNS(null, "y", pf(-current.y));
      }

      if (vertical) {
        current.y -= x;
      } else {
        current.x += x * textHScale;
      }

      current.tspan.setAttributeNS(null, "font-family", current.fontFamily);
      current.tspan.setAttributeNS(null, "font-size", `${pf(current.fontSize)}px`);

      if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {
        current.tspan.setAttributeNS(null, "font-style", current.fontStyle);
      }

      if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {
        current.tspan.setAttributeNS(null, "font-weight", current.fontWeight);
      }

      const fillStrokeMode = current.textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;

      if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        if (current.fillColor !== SVG_DEFAULTS.fillColor) {
          current.tspan.setAttributeNS(null, "fill", current.fillColor);
        }

        if (current.fillAlpha < 1) {
          current.tspan.setAttributeNS(null, "fill-opacity", current.fillAlpha);
        }
      } else if (current.textRenderingMode === _util.TextRenderingMode.ADD_TO_PATH) {
        current.tspan.setAttributeNS(null, "fill", "transparent");
      } else {
        current.tspan.setAttributeNS(null, "fill", "none");
      }

      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {
        const lineWidthScale = 1 / (current.textMatrixScale || 1);

        this._setStrokeAttributes(current.tspan, lineWidthScale);
      }

      let textMatrix = current.textMatrix;

      if (current.textRise !== 0) {
        textMatrix = textMatrix.slice();
        textMatrix[5] += current.textRise;
      }

      current.txtElement.setAttributeNS(null, "transform", `${pm(textMatrix)} scale(${pf(textHScale)}, -1)`);
      current.txtElement.setAttributeNS(XML_NS, "xml:space", "preserve");
      current.txtElement.appendChild(current.tspan);
      current.txtgrp.appendChild(current.txtElement);

      this._ensureTransformGroup().appendChild(current.txtElement);
    }

    setLeadingMoveText(x, y) {
      this.setLeading(-y);
      this.moveText(x, y);
    }

    addFontStyle(fontObj) {
      if (!fontObj.data) {
        throw new Error("addFontStyle: No font data available, " + 'ensure that the "fontExtraProperties" API parameter is set.');
      }

      if (!this.cssStyle) {
        this.cssStyle = this.svgFactory.createElement("svg:style");
        this.cssStyle.setAttributeNS(null, "type", "text/css");
        this.defs.appendChild(this.cssStyle);
      }

      const url = createObjectURL(fontObj.data, fontObj.mimetype, this.forceDataSchema);
      this.cssStyle.textContent += `@font-face { font-family: "${fontObj.loadedName}";` + ` src: url(${url}); }\n`;
    }

    setFont(details) {
      const current = this.current;
      const fontObj = this.commonObjs.get(details[0]);
      let size = details[1];
      current.font = fontObj;

      if (this.embedFonts && !fontObj.missingFile && !this.embeddedFonts[fontObj.loadedName]) {
        this.addFontStyle(fontObj);
        this.embeddedFonts[fontObj.loadedName] = fontObj;
      }

      current.fontMatrix = fontObj.fontMatrix || _util.FONT_IDENTITY_MATRIX;
      let bold = "normal";

      if (fontObj.black) {
        bold = "900";
      } else if (fontObj.bold) {
        bold = "bold";
      }

      const italic = fontObj.italic ? "italic" : "normal";

      if (size < 0) {
        size = -size;
        current.fontDirection = -1;
      } else {
        current.fontDirection = 1;
      }

      current.fontSize = size;
      current.fontFamily = fontObj.loadedName;
      current.fontWeight = bold;
      current.fontStyle = italic;
      current.tspan = this.svgFactory.createElement("svg:tspan");
      current.tspan.setAttributeNS(null, "y", pf(-current.y));
      current.xcoords = [];
      current.ycoords = [];
    }

    endText() {
      const current = this.current;

      if (current.textRenderingMode & _util.TextRenderingMode.ADD_TO_PATH_FLAG && current.txtElement?.hasChildNodes()) {
        current.element = current.txtElement;
        this.clip("nonzero");
        this.endPath();
      }
    }

    setLineWidth(width) {
      if (width > 0) {
        this.current.lineWidth = width;
      }
    }

    setLineCap(style) {
      this.current.lineCap = LINE_CAP_STYLES[style];
    }

    setLineJoin(style) {
      this.current.lineJoin = LINE_JOIN_STYLES[style];
    }

    setMiterLimit(limit) {
      this.current.miterLimit = limit;
    }

    setStrokeAlpha(strokeAlpha) {
      this.current.strokeAlpha = strokeAlpha;
    }

    setStrokeRGBColor(r, g, b) {
      this.current.strokeColor = _util.Util.makeHexColor(r, g, b);
    }

    setFillAlpha(fillAlpha) {
      this.current.fillAlpha = fillAlpha;
    }

    setFillRGBColor(r, g, b) {
      this.current.fillColor = _util.Util.makeHexColor(r, g, b);
      this.current.tspan = this.svgFactory.createElement("svg:tspan");
      this.current.xcoords = [];
      this.current.ycoords = [];
    }

    setStrokeColorN(args) {
      this.current.strokeColor = this._makeColorN_Pattern(args);
    }

    setFillColorN(args) {
      this.current.fillColor = this._makeColorN_Pattern(args);
    }

    shadingFill(args) {
      const width = this.viewport.width;
      const height = this.viewport.height;

      const inv = _util.Util.inverseTransform(this.transformMatrix);

      const bl = _util.Util.applyTransform([0, 0], inv);

      const br = _util.Util.applyTransform([0, height], inv);

      const ul = _util.Util.applyTransform([width, 0], inv);

      const ur = _util.Util.applyTransform([width, height], inv);

      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);
      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);
      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);
      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);
      const rect = this.svgFactory.createElement("svg:rect");
      rect.setAttributeNS(null, "x", x0);
      rect.setAttributeNS(null, "y", y0);
      rect.setAttributeNS(null, "width", x1 - x0);
      rect.setAttributeNS(null, "height", y1 - y0);
      rect.setAttributeNS(null, "fill", this._makeShadingPattern(args));

      if (this.current.fillAlpha < 1) {
        rect.setAttributeNS(null, "fill-opacity", this.current.fillAlpha);
      }

      this._ensureTransformGroup().appendChild(rect);
    }

    _makeColorN_Pattern(args) {
      if (args[0] === "TilingPattern") {
        return this._makeTilingPattern(args);
      }

      return this._makeShadingPattern(args);
    }

    _makeTilingPattern(args) {
      const color = args[1];
      const operatorList = args[2];
      const matrix = args[3] || _util.IDENTITY_MATRIX;
      const [x0, y0, x1, y1] = args[4];
      const xstep = args[5];
      const ystep = args[6];
      const paintType = args[7];
      const tilingId = `shading${shadingCount++}`;

      const [tx0, ty0, tx1, ty1] = _util.Util.normalizeRect([..._util.Util.applyTransform([x0, y0], matrix), ..._util.Util.applyTransform([x1, y1], matrix)]);

      const [xscale, yscale] = _util.Util.singularValueDecompose2dScale(matrix);

      const txstep = xstep * xscale;
      const tystep = ystep * yscale;
      const tiling = this.svgFactory.createElement("svg:pattern");
      tiling.setAttributeNS(null, "id", tilingId);
      tiling.setAttributeNS(null, "patternUnits", "userSpaceOnUse");
      tiling.setAttributeNS(null, "width", txstep);
      tiling.setAttributeNS(null, "height", tystep);
      tiling.setAttributeNS(null, "x", `${tx0}`);
      tiling.setAttributeNS(null, "y", `${ty0}`);
      const svg = this.svg;
      const transformMatrix = this.transformMatrix;
      const fillColor = this.current.fillColor;
      const strokeColor = this.current.strokeColor;
      const bbox = this.svgFactory.create(tx1 - tx0, ty1 - ty0);
      this.svg = bbox;
      this.transformMatrix = matrix;

      if (paintType === 2) {
        const cssColor = _util.Util.makeHexColor(...color);

        this.current.fillColor = cssColor;
        this.current.strokeColor = cssColor;
      }

      this.executeOpTree(this.convertOpList(operatorList));
      this.svg = svg;
      this.transformMatrix = transformMatrix;
      this.current.fillColor = fillColor;
      this.current.strokeColor = strokeColor;
      tiling.appendChild(bbox.childNodes[0]);
      this.defs.appendChild(tiling);
      return `url(#${tilingId})`;
    }

    _makeShadingPattern(args) {
      if (typeof args === "string") {
        args = this.objs.get(args);
      }

      switch (args[0]) {
        case "RadialAxial":
          const shadingId = `shading${shadingCount++}`;
          const colorStops = args[3];
          let gradient;

          switch (args[1]) {
            case "axial":
              const point0 = args[4];
              const point1 = args[5];
              gradient = this.svgFactory.createElement("svg:linearGradient");
              gradient.setAttributeNS(null, "id", shadingId);
              gradient.setAttributeNS(null, "gradientUnits", "userSpaceOnUse");
              gradient.setAttributeNS(null, "x1", point0[0]);
              gradient.setAttributeNS(null, "y1", point0[1]);
              gradient.setAttributeNS(null, "x2", point1[0]);
              gradient.setAttributeNS(null, "y2", point1[1]);
              break;

            case "radial":
              const focalPoint = args[4];
              const circlePoint = args[5];
              const focalRadius = args[6];
              const circleRadius = args[7];
              gradient = this.svgFactory.createElement("svg:radialGradient");
              gradient.setAttributeNS(null, "id", shadingId);
              gradient.setAttributeNS(null, "gradientUnits", "userSpaceOnUse");
              gradient.setAttributeNS(null, "cx", circlePoint[0]);
              gradient.setAttributeNS(null, "cy", circlePoint[1]);
              gradient.setAttributeNS(null, "r", circleRadius);
              gradient.setAttributeNS(null, "fx", focalPoint[0]);
              gradient.setAttributeNS(null, "fy", focalPoint[1]);
              gradient.setAttributeNS(null, "fr", focalRadius);
              break;

            default:
              throw new Error(`Unknown RadialAxial type: ${args[1]}`);
          }

          for (const colorStop of colorStops) {
            const stop = this.svgFactory.createElement("svg:stop");
            stop.setAttributeNS(null, "offset", colorStop[0]);
            stop.setAttributeNS(null, "stop-color", colorStop[1]);
            gradient.appendChild(stop);
          }

          this.defs.appendChild(gradient);
          return `url(#${shadingId})`;

        case "Mesh":
          (0, _util.warn)("Unimplemented pattern Mesh");
          return null;

        case "Dummy":
          return "hotpink";

        default:
          throw new Error(`Unknown IR type: ${args[0]}`);
      }
    }

    setDash(dashArray, dashPhase) {
      this.current.dashArray = dashArray;
      this.current.dashPhase = dashPhase;
    }

    constructPath(ops, args) {
      const current = this.current;
      let x = current.x,
          y = current.y;
      let d = [];
      let j = 0;

      for (const op of ops) {
        switch (op | 0) {
          case _util.OPS.rectangle:
            x = args[j++];
            y = args[j++];
            const width = args[j++];
            const height = args[j++];
            const xw = x + width;
            const yh = y + height;
            d.push("M", pf(x), pf(y), "L", pf(xw), pf(y), "L", pf(xw), pf(yh), "L", pf(x), pf(yh), "Z");
            break;

          case _util.OPS.moveTo:
            x = args[j++];
            y = args[j++];
            d.push("M", pf(x), pf(y));
            break;

          case _util.OPS.lineTo:
            x = args[j++];
            y = args[j++];
            d.push("L", pf(x), pf(y));
            break;

          case _util.OPS.curveTo:
            x = args[j + 4];
            y = args[j + 5];
            d.push("C", pf(args[j]), pf(args[j + 1]), pf(args[j + 2]), pf(args[j + 3]), pf(x), pf(y));
            j += 6;
            break;

          case _util.OPS.curveTo2:
            d.push("C", pf(x), pf(y), pf(args[j]), pf(args[j + 1]), pf(args[j + 2]), pf(args[j + 3]));
            x = args[j + 2];
            y = args[j + 3];
            j += 4;
            break;

          case _util.OPS.curveTo3:
            x = args[j + 2];
            y = args[j + 3];
            d.push("C", pf(args[j]), pf(args[j + 1]), pf(x), pf(y), pf(x), pf(y));
            j += 4;
            break;

          case _util.OPS.closePath:
            d.push("Z");
            break;
        }
      }

      d = d.join(" ");

      if (current.path && ops.length > 0 && ops[0] !== _util.OPS.rectangle && ops[0] !== _util.OPS.moveTo) {
        d = current.path.getAttributeNS(null, "d") + d;
      } else {
        current.path = this.svgFactory.createElement("svg:path");

        this._ensureTransformGroup().appendChild(current.path);
      }

      current.path.setAttributeNS(null, "d", d);
      current.path.setAttributeNS(null, "fill", "none");
      current.element = current.path;
      current.setCurrentPoint(x, y);
    }

    endPath() {
      const current = this.current;
      current.path = null;

      if (!this.pendingClip) {
        return;
      }

      if (!current.element) {
        this.pendingClip = null;
        return;
      }

      const clipId = `clippath${clipCount++}`;
      const clipPath = this.svgFactory.createElement("svg:clipPath");
      clipPath.setAttributeNS(null, "id", clipId);
      clipPath.setAttributeNS(null, "transform", pm(this.transformMatrix));
      const clipElement = current.element.cloneNode(true);

      if (this.pendingClip === "evenodd") {
        clipElement.setAttributeNS(null, "clip-rule", "evenodd");
      } else {
        clipElement.setAttributeNS(null, "clip-rule", "nonzero");
      }

      this.pendingClip = null;
      clipPath.appendChild(clipElement);
      this.defs.appendChild(clipPath);

      if (current.activeClipUrl) {
        current.clipGroup = null;

        for (const prev of this.extraStack) {
          prev.clipGroup = null;
        }

        clipPath.setAttributeNS(null, "clip-path", current.activeClipUrl);
      }

      current.activeClipUrl = `url(#${clipId})`;
      this.tgrp = null;
    }

    clip(type) {
      this.pendingClip = type;
    }

    closePath() {
      const current = this.current;

      if (current.path) {
        const d = `${current.path.getAttributeNS(null, "d")}Z`;
        current.path.setAttributeNS(null, "d", d);
      }
    }

    setLeading(leading) {
      this.current.leading = -leading;
    }

    setTextRise(textRise) {
      this.current.textRise = textRise;
    }

    setTextRenderingMode(textRenderingMode) {
      this.current.textRenderingMode = textRenderingMode;
    }

    setHScale(scale) {
      this.current.textHScale = scale / 100;
    }

    setRenderingIntent(intent) {}

    setFlatness(flatness) {}

    setGState(states) {
      for (const [key, value] of states) {
        switch (key) {
          case "LW":
            this.setLineWidth(value);
            break;

          case "LC":
            this.setLineCap(value);
            break;

          case "LJ":
            this.setLineJoin(value);
            break;

          case "ML":
            this.setMiterLimit(value);
            break;

          case "D":
            this.setDash(value[0], value[1]);
            break;

          case "RI":
            this.setRenderingIntent(value);
            break;

          case "FL":
            this.setFlatness(value);
            break;

          case "Font":
            this.setFont(value);
            break;

          case "CA":
            this.setStrokeAlpha(value);
            break;

          case "ca":
            this.setFillAlpha(value);
            break;

          default:
            (0, _util.warn)(`Unimplemented graphic state operator ${key}`);
            break;
        }
      }
    }

    fill() {
      const current = this.current;

      if (current.element) {
        current.element.setAttributeNS(null, "fill", current.fillColor);
        current.element.setAttributeNS(null, "fill-opacity", current.fillAlpha);
        this.endPath();
      }
    }

    stroke() {
      const current = this.current;

      if (current.element) {
        this._setStrokeAttributes(current.element);

        current.element.setAttributeNS(null, "fill", "none");
        this.endPath();
      }
    }

    _setStrokeAttributes(element, lineWidthScale = 1) {
      const current = this.current;
      let dashArray = current.dashArray;

      if (lineWidthScale !== 1 && dashArray.length > 0) {
        dashArray = dashArray.map(function (value) {
          return lineWidthScale * value;
        });
      }

      element.setAttributeNS(null, "stroke", current.strokeColor);
      element.setAttributeNS(null, "stroke-opacity", current.strokeAlpha);
      element.setAttributeNS(null, "stroke-miterlimit", pf(current.miterLimit));
      element.setAttributeNS(null, "stroke-linecap", current.lineCap);
      element.setAttributeNS(null, "stroke-linejoin", current.lineJoin);
      element.setAttributeNS(null, "stroke-width", pf(lineWidthScale * current.lineWidth) + "px");
      element.setAttributeNS(null, "stroke-dasharray", dashArray.map(pf).join(" "));
      element.setAttributeNS(null, "stroke-dashoffset", pf(lineWidthScale * current.dashPhase) + "px");
    }

    eoFill() {
      if (this.current.element) {
        this.current.element.setAttributeNS(null, "fill-rule", "evenodd");
      }

      this.fill();
    }

    fillStroke() {
      this.stroke();
      this.fill();
    }

    eoFillStroke() {
      if (this.current.element) {
        this.current.element.setAttributeNS(null, "fill-rule", "evenodd");
      }

      this.fillStroke();
    }

    closeStroke() {
      this.closePath();
      this.stroke();
    }

    closeFillStroke() {
      this.closePath();
      this.fillStroke();
    }

    closeEOFillStroke() {
      this.closePath();
      this.eoFillStroke();
    }

    paintSolidColorImageMask() {
      const rect = this.svgFactory.createElement("svg:rect");
      rect.setAttributeNS(null, "x", "0");
      rect.setAttributeNS(null, "y", "0");
      rect.setAttributeNS(null, "width", "1px");
      rect.setAttributeNS(null, "height", "1px");
      rect.setAttributeNS(null, "fill", this.current.fillColor);

      this._ensureTransformGroup().appendChild(rect);
    }

    paintImageXObject(objId) {
      const imgData = objId.startsWith("g_") ? this.commonObjs.get(objId) : this.objs.get(objId);

      if (!imgData) {
        (0, _util.warn)(`Dependent image with object ID ${objId} is not ready yet`);
        return;
      }

      this.paintInlineImageXObject(imgData);
    }

    paintInlineImageXObject(imgData, mask) {
      const width = imgData.width;
      const height = imgData.height;
      const imgSrc = convertImgDataToPng(imgData, this.forceDataSchema, !!mask);
      const cliprect = this.svgFactory.createElement("svg:rect");
      cliprect.setAttributeNS(null, "x", "0");
      cliprect.setAttributeNS(null, "y", "0");
      cliprect.setAttributeNS(null, "width", pf(width));
      cliprect.setAttributeNS(null, "height", pf(height));
      this.current.element = cliprect;
      this.clip("nonzero");
      const imgEl = this.svgFactory.createElement("svg:image");
      imgEl.setAttributeNS(XLINK_NS, "xlink:href", imgSrc);
      imgEl.setAttributeNS(null, "x", "0");
      imgEl.setAttributeNS(null, "y", pf(-height));
      imgEl.setAttributeNS(null, "width", pf(width) + "px");
      imgEl.setAttributeNS(null, "height", pf(height) + "px");
      imgEl.setAttributeNS(null, "transform", `scale(${pf(1 / width)} ${pf(-1 / height)})`);

      if (mask) {
        mask.appendChild(imgEl);
      } else {
        this._ensureTransformGroup().appendChild(imgEl);
      }
    }

    paintImageMaskXObject(imgData) {
      const current = this.current;
      const width = imgData.width;
      const height = imgData.height;
      const fillColor = current.fillColor;
      current.maskId = `mask${maskCount++}`;
      const mask = this.svgFactory.createElement("svg:mask");
      mask.setAttributeNS(null, "id", current.maskId);
      const rect = this.svgFactory.createElement("svg:rect");
      rect.setAttributeNS(null, "x", "0");
      rect.setAttributeNS(null, "y", "0");
      rect.setAttributeNS(null, "width", pf(width));
      rect.setAttributeNS(null, "height", pf(height));
      rect.setAttributeNS(null, "fill", fillColor);
      rect.setAttributeNS(null, "mask", `url(#${current.maskId})`);
      this.defs.appendChild(mask);

      this._ensureTransformGroup().appendChild(rect);

      this.paintInlineImageXObject(imgData, mask);
    }

    paintFormXObjectBegin(matrix, bbox) {
      if (Array.isArray(matrix) && matrix.length === 6) {
        this.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);
      }

      if (bbox) {
        const width = bbox[2] - bbox[0];
        const height = bbox[3] - bbox[1];
        const cliprect = this.svgFactory.createElement("svg:rect");
        cliprect.setAttributeNS(null, "x", bbox[0]);
        cliprect.setAttributeNS(null, "y", bbox[1]);
        cliprect.setAttributeNS(null, "width", pf(width));
        cliprect.setAttributeNS(null, "height", pf(height));
        this.current.element = cliprect;
        this.clip("nonzero");
        this.endPath();
      }
    }

    paintFormXObjectEnd() {}

    _initialize(viewport) {
      const svg = this.svgFactory.create(viewport.width, viewport.height);
      const definitions = this.svgFactory.createElement("svg:defs");
      svg.appendChild(definitions);
      this.defs = definitions;
      const rootGroup = this.svgFactory.createElement("svg:g");
      rootGroup.setAttributeNS(null, "transform", pm(viewport.transform));
      svg.appendChild(rootGroup);
      this.svg = rootGroup;
      return svg;
    }

    _ensureClipGroup() {
      if (!this.current.clipGroup) {
        const clipGroup = this.svgFactory.createElement("svg:g");
        clipGroup.setAttributeNS(null, "clip-path", this.current.activeClipUrl);
        this.svg.appendChild(clipGroup);
        this.current.clipGroup = clipGroup;
      }

      return this.current.clipGroup;
    }

    _ensureTransformGroup() {
      if (!this.tgrp) {
        this.tgrp = this.svgFactory.createElement("svg:g");
        this.tgrp.setAttributeNS(null, "transform", pm(this.transformMatrix));

        if (this.current.activeClipUrl) {
          this._ensureClipGroup().appendChild(this.tgrp);
        } else {
          this.svg.appendChild(this.tgrp);
        }
      }

      return this.tgrp;
    }

  };
}

/***/ }),
/* 25 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFNodeStream = void 0;

var _util = __w_pdfjs_require__(1);

var _network_utils = __w_pdfjs_require__(26);

;

const fs = __webpack_require__(/*! fs */ "?fe90");

const http = __webpack_require__(/*! http */ "?d446");

const https = __webpack_require__(/*! https */ "?4c38");

const url = __webpack_require__(/*! url */ "?9f5f");

const fileUriRegex = /^file:\/\/\/[a-zA-Z]:\//;

function parseUrl(sourceUrl) {
  const parsedUrl = url.parse(sourceUrl);

  if (parsedUrl.protocol === "file:" || parsedUrl.host) {
    return parsedUrl;
  }

  if (/^[a-z]:[/\\]/i.test(sourceUrl)) {
    return url.parse(`file:///${sourceUrl}`);
  }

  if (!parsedUrl.host) {
    parsedUrl.protocol = "file:";
  }

  return parsedUrl;
}

class PDFNodeStream {
  constructor(source) {
    this.source = source;
    this.url = parseUrl(source.url);
    this.isHttp = this.url.protocol === "http:" || this.url.protocol === "https:";
    this.isFsUrl = this.url.protocol === "file:";
    this.httpHeaders = this.isHttp && source.httpHeaders || {};
    this._fullRequestReader = null;
    this._rangeRequestReaders = [];
  }

  get _progressiveDataLength() {
    return this._fullRequestReader?._loaded ?? 0;
  }

  getFullReader() {
    (0, _util.assert)(!this._fullRequestReader, "PDFNodeStream.getFullReader can only be called once.");
    this._fullRequestReader = this.isFsUrl ? new PDFNodeStreamFsFullReader(this) : new PDFNodeStreamFullReader(this);
    return this._fullRequestReader;
  }

  getRangeReader(start, end) {
    if (end <= this._progressiveDataLength) {
      return null;
    }

    const rangeReader = this.isFsUrl ? new PDFNodeStreamFsRangeReader(this, start, end) : new PDFNodeStreamRangeReader(this, start, end);

    this._rangeRequestReaders.push(rangeReader);

    return rangeReader;
  }

  cancelAllRequests(reason) {
    if (this._fullRequestReader) {
      this._fullRequestReader.cancel(reason);
    }

    for (const reader of this._rangeRequestReaders.slice(0)) {
      reader.cancel(reason);
    }
  }

}

exports.PDFNodeStream = PDFNodeStream;

class BaseFullReader {
  constructor(stream) {
    this._url = stream.url;
    this._done = false;
    this._storedError = null;
    this.onProgress = null;
    const source = stream.source;
    this._contentLength = source.length;
    this._loaded = 0;
    this._filename = null;
    this._disableRange = source.disableRange || false;
    this._rangeChunkSize = source.rangeChunkSize;

    if (!this._rangeChunkSize && !this._disableRange) {
      this._disableRange = true;
    }

    this._isStreamingSupported = !source.disableStream;
    this._isRangeSupported = !source.disableRange;
    this._readableStream = null;
    this._readCapability = (0, _util.createPromiseCapability)();
    this._headersCapability = (0, _util.createPromiseCapability)();
  }

  get headersReady() {
    return this._headersCapability.promise;
  }

  get filename() {
    return this._filename;
  }

  get contentLength() {
    return this._contentLength;
  }

  get isRangeSupported() {
    return this._isRangeSupported;
  }

  get isStreamingSupported() {
    return this._isStreamingSupported;
  }

  async read() {
    await this._readCapability.promise;

    if (this._done) {
      return {
        value: undefined,
        done: true
      };
    }

    if (this._storedError) {
      throw this._storedError;
    }

    const chunk = this._readableStream.read();

    if (chunk === null) {
      this._readCapability = (0, _util.createPromiseCapability)();
      return this.read();
    }

    this._loaded += chunk.length;

    if (this.onProgress) {
      this.onProgress({
        loaded: this._loaded,
        total: this._contentLength
      });
    }

    const buffer = new Uint8Array(chunk).buffer;
    return {
      value: buffer,
      done: false
    };
  }

  cancel(reason) {
    if (!this._readableStream) {
      this._error(reason);

      return;
    }

    this._readableStream.destroy(reason);
  }

  _error(reason) {
    this._storedError = reason;

    this._readCapability.resolve();
  }

  _setReadableStream(readableStream) {
    this._readableStream = readableStream;
    readableStream.on("readable", () => {
      this._readCapability.resolve();
    });
    readableStream.on("end", () => {
      readableStream.destroy();
      this._done = true;

      this._readCapability.resolve();
    });
    readableStream.on("error", reason => {
      this._error(reason);
    });

    if (!this._isStreamingSupported && this._isRangeSupported) {
      this._error(new _util.AbortException("streaming is disabled"));
    }

    if (this._storedError) {
      this._readableStream.destroy(this._storedError);
    }
  }

}

class BaseRangeReader {
  constructor(stream) {
    this._url = stream.url;
    this._done = false;
    this._storedError = null;
    this.onProgress = null;
    this._loaded = 0;
    this._readableStream = null;
    this._readCapability = (0, _util.createPromiseCapability)();
    const source = stream.source;
    this._isStreamingSupported = !source.disableStream;
  }

  get isStreamingSupported() {
    return this._isStreamingSupported;
  }

  async read() {
    await this._readCapability.promise;

    if (this._done) {
      return {
        value: undefined,
        done: true
      };
    }

    if (this._storedError) {
      throw this._storedError;
    }

    const chunk = this._readableStream.read();

    if (chunk === null) {
      this._readCapability = (0, _util.createPromiseCapability)();
      return this.read();
    }

    this._loaded += chunk.length;

    if (this.onProgress) {
      this.onProgress({
        loaded: this._loaded
      });
    }

    const buffer = new Uint8Array(chunk).buffer;
    return {
      value: buffer,
      done: false
    };
  }

  cancel(reason) {
    if (!this._readableStream) {
      this._error(reason);

      return;
    }

    this._readableStream.destroy(reason);
  }

  _error(reason) {
    this._storedError = reason;

    this._readCapability.resolve();
  }

  _setReadableStream(readableStream) {
    this._readableStream = readableStream;
    readableStream.on("readable", () => {
      this._readCapability.resolve();
    });
    readableStream.on("end", () => {
      readableStream.destroy();
      this._done = true;

      this._readCapability.resolve();
    });
    readableStream.on("error", reason => {
      this._error(reason);
    });

    if (this._storedError) {
      this._readableStream.destroy(this._storedError);
    }
  }

}

function createRequestOptions(parsedUrl, headers) {
  return {
    protocol: parsedUrl.protocol,
    auth: parsedUrl.auth,
    host: parsedUrl.hostname,
    port: parsedUrl.port,
    path: parsedUrl.path,
    method: "GET",
    headers
  };
}

class PDFNodeStreamFullReader extends BaseFullReader {
  constructor(stream) {
    super(stream);

    const handleResponse = response => {
      if (response.statusCode === 404) {
        const error = new _util.MissingPDFException(`Missing PDF "${this._url}".`);
        this._storedError = error;

        this._headersCapability.reject(error);

        return;
      }

      this._headersCapability.resolve();

      this._setReadableStream(response);

      const getResponseHeader = name => {
        return this._readableStream.headers[name.toLowerCase()];
      };

      const {
        allowRangeRequests,
        suggestedLength
      } = (0, _network_utils.validateRangeRequestCapabilities)({
        getResponseHeader,
        isHttp: stream.isHttp,
        rangeChunkSize: this._rangeChunkSize,
        disableRange: this._disableRange
      });
      this._isRangeSupported = allowRangeRequests;
      this._contentLength = suggestedLength || this._contentLength;
      this._filename = (0, _network_utils.extractFilenameFromHeader)(getResponseHeader);
    };

    this._request = null;

    if (this._url.protocol === "http:") {
      this._request = http.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);
    } else {
      this._request = https.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);
    }

    this._request.on("error", reason => {
      this._storedError = reason;

      this._headersCapability.reject(reason);
    });

    this._request.end();
  }

}

class PDFNodeStreamRangeReader extends BaseRangeReader {
  constructor(stream, start, end) {
    super(stream);
    this._httpHeaders = {};

    for (const property in stream.httpHeaders) {
      const value = stream.httpHeaders[property];

      if (typeof value === "undefined") {
        continue;
      }

      this._httpHeaders[property] = value;
    }

    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;

    const handleResponse = response => {
      if (response.statusCode === 404) {
        const error = new _util.MissingPDFException(`Missing PDF "${this._url}".`);
        this._storedError = error;
        return;
      }

      this._setReadableStream(response);
    };

    this._request = null;

    if (this._url.protocol === "http:") {
      this._request = http.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);
    } else {
      this._request = https.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);
    }

    this._request.on("error", reason => {
      this._storedError = reason;
    });

    this._request.end();
  }

}

class PDFNodeStreamFsFullReader extends BaseFullReader {
  constructor(stream) {
    super(stream);
    let path = decodeURIComponent(this._url.path);

    if (fileUriRegex.test(this._url.href)) {
      path = path.replace(/^\//, "");
    }

    fs.lstat(path, (error, stat) => {
      if (error) {
        if (error.code === "ENOENT") {
          error = new _util.MissingPDFException(`Missing PDF "${path}".`);
        }

        this._storedError = error;

        this._headersCapability.reject(error);

        return;
      }

      this._contentLength = stat.size;

      this._setReadableStream(fs.createReadStream(path));

      this._headersCapability.resolve();
    });
  }

}

class PDFNodeStreamFsRangeReader extends BaseRangeReader {
  constructor(stream, start, end) {
    super(stream);
    let path = decodeURIComponent(this._url.path);

    if (fileUriRegex.test(this._url.href)) {
      path = path.replace(/^\//, "");
    }

    this._setReadableStream(fs.createReadStream(path, {
      start,
      end: end - 1
    }));
  }

}

/***/ }),
/* 26 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createResponseStatusError = createResponseStatusError;
exports.extractFilenameFromHeader = extractFilenameFromHeader;
exports.validateRangeRequestCapabilities = validateRangeRequestCapabilities;
exports.validateResponseStatus = validateResponseStatus;

var _util = __w_pdfjs_require__(1);

var _content_disposition = __w_pdfjs_require__(27);

var _display_utils = __w_pdfjs_require__(5);

function validateRangeRequestCapabilities({
  getResponseHeader,
  isHttp,
  rangeChunkSize,
  disableRange
}) {
  const returnValues = {
    allowRangeRequests: false,
    suggestedLength: undefined
  };
  const length = parseInt(getResponseHeader("Content-Length"), 10);

  if (!Number.isInteger(length)) {
    return returnValues;
  }

  returnValues.suggestedLength = length;

  if (length <= 2 * rangeChunkSize) {
    return returnValues;
  }

  if (disableRange || !isHttp) {
    return returnValues;
  }

  if (getResponseHeader("Accept-Ranges") !== "bytes") {
    return returnValues;
  }

  const contentEncoding = getResponseHeader("Content-Encoding") || "identity";

  if (contentEncoding !== "identity") {
    return returnValues;
  }

  returnValues.allowRangeRequests = true;
  return returnValues;
}

function extractFilenameFromHeader(getResponseHeader) {
  const contentDisposition = getResponseHeader("Content-Disposition");

  if (contentDisposition) {
    let filename = (0, _content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);

    if (filename.includes("%")) {
      try {
        filename = decodeURIComponent(filename);
      } catch (ex) {}
    }

    if ((0, _display_utils.isPdfFile)(filename)) {
      return filename;
    }
  }

  return null;
}

function createResponseStatusError(status, url) {
  if (status === 404 || status === 0 && url.startsWith("file:")) {
    return new _util.MissingPDFException('Missing PDF "' + url + '".');
  }

  return new _util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`, status);
}

function validateResponseStatus(status) {
  return status === 200 || status === 206;
}

/***/ }),
/* 27 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.getFilenameFromContentDispositionHeader = getFilenameFromContentDispositionHeader;

var _util = __w_pdfjs_require__(1);

function getFilenameFromContentDispositionHeader(contentDisposition) {
  let needsEncodingFixup = true;
  let tmp = toParamRegExp("filename\\*", "i").exec(contentDisposition);

  if (tmp) {
    tmp = tmp[1];
    let filename = rfc2616unquote(tmp);
    filename = unescape(filename);
    filename = rfc5987decode(filename);
    filename = rfc2047decode(filename);
    return fixupEncoding(filename);
  }

  tmp = rfc2231getparam(contentDisposition);

  if (tmp) {
    const filename = rfc2047decode(tmp);
    return fixupEncoding(filename);
  }

  tmp = toParamRegExp("filename", "i").exec(contentDisposition);

  if (tmp) {
    tmp = tmp[1];
    let filename = rfc2616unquote(tmp);
    filename = rfc2047decode(filename);
    return fixupEncoding(filename);
  }

  function toParamRegExp(attributePattern, flags) {
    return new RegExp("(?:^|;)\\s*" + attributePattern + "\\s*=\\s*" + "(" + '[^";\\s][^;\\s]*' + "|" + '"(?:[^"\\\\]|\\\\"?)+"?' + ")", flags);
  }

  function textdecode(encoding, value) {
    if (encoding) {
      if (!/^[\x00-\xFF]+$/.test(value)) {
        return value;
      }

      try {
        const decoder = new TextDecoder(encoding, {
          fatal: true
        });
        const buffer = (0, _util.stringToBytes)(value);
        value = decoder.decode(buffer);
        needsEncodingFixup = false;
      } catch (e) {}
    }

    return value;
  }

  function fixupEncoding(value) {
    if (needsEncodingFixup && /[\x80-\xff]/.test(value)) {
      value = textdecode("utf-8", value);

      if (needsEncodingFixup) {
        value = textdecode("iso-8859-1", value);
      }
    }

    return value;
  }

  function rfc2231getparam(contentDispositionStr) {
    const matches = [];
    let match;
    const iter = toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)", "ig");

    while ((match = iter.exec(contentDispositionStr)) !== null) {
      let [, n, quot, part] = match;
      n = parseInt(n, 10);

      if (n in matches) {
        if (n === 0) {
          break;
        }

        continue;
      }

      matches[n] = [quot, part];
    }

    const parts = [];

    for (let n = 0; n < matches.length; ++n) {
      if (!(n in matches)) {
        break;
      }

      let [quot, part] = matches[n];
      part = rfc2616unquote(part);

      if (quot) {
        part = unescape(part);

        if (n === 0) {
          part = rfc5987decode(part);
        }
      }

      parts.push(part);
    }

    return parts.join("");
  }

  function rfc2616unquote(value) {
    if (value.startsWith('"')) {
      const parts = value.slice(1).split('\\"');

      for (let i = 0; i < parts.length; ++i) {
        const quotindex = parts[i].indexOf('"');

        if (quotindex !== -1) {
          parts[i] = parts[i].slice(0, quotindex);
          parts.length = i + 1;
        }

        parts[i] = parts[i].replace(/\\(.)/g, "$1");
      }

      value = parts.join('"');
    }

    return value;
  }

  function rfc5987decode(extvalue) {
    const encodingend = extvalue.indexOf("'");

    if (encodingend === -1) {
      return extvalue;
    }

    const encoding = extvalue.slice(0, encodingend);
    const langvalue = extvalue.slice(encodingend + 1);
    const value = langvalue.replace(/^[^']*'/, "");
    return textdecode(encoding, value);
  }

  function rfc2047decode(value) {
    if (!value.startsWith("=?") || /[\x00-\x19\x80-\xff]/.test(value)) {
      return value;
    }

    return value.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g, function (matches, charset, encoding, text) {
      if (encoding === "q" || encoding === "Q") {
        text = text.replace(/_/g, " ");
        text = text.replace(/=([0-9a-fA-F]{2})/g, function (match, hex) {
          return String.fromCharCode(parseInt(hex, 16));
        });
        return textdecode(charset, text);
      }

      try {
        text = atob(text);
      } catch (e) {}

      return textdecode(charset, text);
    });
  }

  return "";
}

/***/ }),
/* 28 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFNetworkStream = void 0;

var _util = __w_pdfjs_require__(1);

var _network_utils = __w_pdfjs_require__(26);

;
const OK_RESPONSE = 200;
const PARTIAL_CONTENT_RESPONSE = 206;

function getArrayBuffer(xhr) {
  const data = xhr.response;

  if (typeof data !== "string") {
    return data;
  }

  const array = (0, _util.stringToBytes)(data);
  return array.buffer;
}

class NetworkManager {
  constructor(url, args = {}) {
    this.url = url;
    this.isHttp = /^https?:/i.test(url);
    this.httpHeaders = this.isHttp && args.httpHeaders || Object.create(null);
    this.withCredentials = args.withCredentials || false;

    this.getXhr = args.getXhr || function NetworkManager_getXhr() {
      return new XMLHttpRequest();
    };

    this.currXhrId = 0;
    this.pendingRequests = Object.create(null);
  }

  requestRange(begin, end, listeners) {
    const args = {
      begin,
      end
    };

    for (const prop in listeners) {
      args[prop] = listeners[prop];
    }

    return this.request(args);
  }

  requestFull(listeners) {
    return this.request(listeners);
  }

  request(args) {
    const xhr = this.getXhr();
    const xhrId = this.currXhrId++;
    const pendingRequest = this.pendingRequests[xhrId] = {
      xhr
    };
    xhr.open("GET", this.url);
    xhr.withCredentials = this.withCredentials;

    for (const property in this.httpHeaders) {
      const value = this.httpHeaders[property];

      if (typeof value === "undefined") {
        continue;
      }

      xhr.setRequestHeader(property, value);
    }

    if (this.isHttp && "begin" in args && "end" in args) {
      xhr.setRequestHeader("Range", `bytes=${args.begin}-${args.end - 1}`);
      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;
    } else {
      pendingRequest.expectedStatus = OK_RESPONSE;
    }

    xhr.responseType = "arraybuffer";

    if (args.onError) {
      xhr.onerror = function (evt) {
        args.onError(xhr.status);
      };
    }

    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);
    xhr.onprogress = this.onProgress.bind(this, xhrId);
    pendingRequest.onHeadersReceived = args.onHeadersReceived;
    pendingRequest.onDone = args.onDone;
    pendingRequest.onError = args.onError;
    pendingRequest.onProgress = args.onProgress;
    xhr.send(null);
    return xhrId;
  }

  onProgress(xhrId, evt) {
    const pendingRequest = this.pendingRequests[xhrId];

    if (!pendingRequest) {
      return;
    }

    pendingRequest.onProgress?.(evt);
  }

  onStateChange(xhrId, evt) {
    const pendingRequest = this.pendingRequests[xhrId];

    if (!pendingRequest) {
      return;
    }

    const xhr = pendingRequest.xhr;

    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {
      pendingRequest.onHeadersReceived();
      delete pendingRequest.onHeadersReceived;
    }

    if (xhr.readyState !== 4) {
      return;
    }

    if (!(xhrId in this.pendingRequests)) {
      return;
    }

    delete this.pendingRequests[xhrId];

    if (xhr.status === 0 && this.isHttp) {
      pendingRequest.onError?.(xhr.status);
      return;
    }

    const xhrStatus = xhr.status || OK_RESPONSE;
    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;

    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {
      pendingRequest.onError?.(xhr.status);
      return;
    }

    const chunk = getArrayBuffer(xhr);

    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {
      const rangeHeader = xhr.getResponseHeader("Content-Range");
      const matches = /bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);
      pendingRequest.onDone({
        begin: parseInt(matches[1], 10),
        chunk
      });
    } else if (chunk) {
      pendingRequest.onDone({
        begin: 0,
        chunk
      });
    } else {
      pendingRequest.onError?.(xhr.status);
    }
  }

  getRequestXhr(xhrId) {
    return this.pendingRequests[xhrId].xhr;
  }

  isPendingRequest(xhrId) {
    return xhrId in this.pendingRequests;
  }

  abortRequest(xhrId) {
    const xhr = this.pendingRequests[xhrId].xhr;
    delete this.pendingRequests[xhrId];
    xhr.abort();
  }

}

class PDFNetworkStream {
  constructor(source) {
    this._source = source;
    this._manager = new NetworkManager(source.url, {
      httpHeaders: source.httpHeaders,
      withCredentials: source.withCredentials
    });
    this._rangeChunkSize = source.rangeChunkSize;
    this._fullRequestReader = null;
    this._rangeRequestReaders = [];
  }

  _onRangeRequestReaderClosed(reader) {
    const i = this._rangeRequestReaders.indexOf(reader);

    if (i >= 0) {
      this._rangeRequestReaders.splice(i, 1);
    }
  }

  getFullReader() {
    (0, _util.assert)(!this._fullRequestReader, "PDFNetworkStream.getFullReader can only be called once.");
    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);
    return this._fullRequestReader;
  }

  getRangeReader(begin, end) {
    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);
    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);

    this._rangeRequestReaders.push(reader);

    return reader;
  }

  cancelAllRequests(reason) {
    this._fullRequestReader?.cancel(reason);

    for (const reader of this._rangeRequestReaders.slice(0)) {
      reader.cancel(reason);
    }
  }

}

exports.PDFNetworkStream = PDFNetworkStream;

class PDFNetworkStreamFullRequestReader {
  constructor(manager, source) {
    this._manager = manager;
    const args = {
      onHeadersReceived: this._onHeadersReceived.bind(this),
      onDone: this._onDone.bind(this),
      onError: this._onError.bind(this),
      onProgress: this._onProgress.bind(this)
    };
    this._url = source.url;
    this._fullRequestId = manager.requestFull(args);
    this._headersReceivedCapability = (0, _util.createPromiseCapability)();
    this._disableRange = source.disableRange || false;
    this._contentLength = source.length;
    this._rangeChunkSize = source.rangeChunkSize;

    if (!this._rangeChunkSize && !this._disableRange) {
      this._disableRange = true;
    }

    this._isStreamingSupported = false;
    this._isRangeSupported = false;
    this._cachedChunks = [];
    this._requests = [];
    this._done = false;
    this._storedError = undefined;
    this._filename = null;
    this.onProgress = null;
  }

  _onHeadersReceived() {
    const fullRequestXhrId = this._fullRequestId;

    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);

    const getResponseHeader = name => {
      return fullRequestXhr.getResponseHeader(name);
    };

    const {
      allowRangeRequests,
      suggestedLength
    } = (0, _network_utils.validateRangeRequestCapabilities)({
      getResponseHeader,
      isHttp: this._manager.isHttp,
      rangeChunkSize: this._rangeChunkSize,
      disableRange: this._disableRange
    });

    if (allowRangeRequests) {
      this._isRangeSupported = true;
    }

    this._contentLength = suggestedLength || this._contentLength;
    this._filename = (0, _network_utils.extractFilenameFromHeader)(getResponseHeader);

    if (this._isRangeSupported) {
      this._manager.abortRequest(fullRequestXhrId);
    }

    this._headersReceivedCapability.resolve();
  }

  _onDone(data) {
    if (data) {
      if (this._requests.length > 0) {
        const requestCapability = this._requests.shift();

        requestCapability.resolve({
          value: data.chunk,
          done: false
        });
      } else {
        this._cachedChunks.push(data.chunk);
      }
    }

    this._done = true;

    if (this._cachedChunks.length > 0) {
      return;
    }

    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: undefined,
        done: true
      });
    }

    this._requests.length = 0;
  }

  _onError(status) {
    this._storedError = (0, _network_utils.createResponseStatusError)(status, this._url);

    this._headersReceivedCapability.reject(this._storedError);

    for (const requestCapability of this._requests) {
      requestCapability.reject(this._storedError);
    }

    this._requests.length = 0;
    this._cachedChunks.length = 0;
  }

  _onProgress(evt) {
    this.onProgress?.({
      loaded: evt.loaded,
      total: evt.lengthComputable ? evt.total : this._contentLength
    });
  }

  get filename() {
    return this._filename;
  }

  get isRangeSupported() {
    return this._isRangeSupported;
  }

  get isStreamingSupported() {
    return this._isStreamingSupported;
  }

  get contentLength() {
    return this._contentLength;
  }

  get headersReady() {
    return this._headersReceivedCapability.promise;
  }

  async read() {
    if (this._storedError) {
      throw this._storedError;
    }

    if (this._cachedChunks.length > 0) {
      const chunk = this._cachedChunks.shift();

      return {
        value: chunk,
        done: false
      };
    }

    if (this._done) {
      return {
        value: undefined,
        done: true
      };
    }

    const requestCapability = (0, _util.createPromiseCapability)();

    this._requests.push(requestCapability);

    return requestCapability.promise;
  }

  cancel(reason) {
    this._done = true;

    this._headersReceivedCapability.reject(reason);

    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: undefined,
        done: true
      });
    }

    this._requests.length = 0;

    if (this._manager.isPendingRequest(this._fullRequestId)) {
      this._manager.abortRequest(this._fullRequestId);
    }

    this._fullRequestReader = null;
  }

}

class PDFNetworkStreamRangeRequestReader {
  constructor(manager, begin, end) {
    this._manager = manager;
    const args = {
      onDone: this._onDone.bind(this),
      onError: this._onError.bind(this),
      onProgress: this._onProgress.bind(this)
    };
    this._url = manager.url;
    this._requestId = manager.requestRange(begin, end, args);
    this._requests = [];
    this._queuedChunk = null;
    this._done = false;
    this._storedError = undefined;
    this.onProgress = null;
    this.onClosed = null;
  }

  _close() {
    this.onClosed?.(this);
  }

  _onDone(data) {
    const chunk = data.chunk;

    if (this._requests.length > 0) {
      const requestCapability = this._requests.shift();

      requestCapability.resolve({
        value: chunk,
        done: false
      });
    } else {
      this._queuedChunk = chunk;
    }

    this._done = true;

    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: undefined,
        done: true
      });
    }

    this._requests.length = 0;

    this._close();
  }

  _onError(status) {
    this._storedError = (0, _network_utils.createResponseStatusError)(status, this._url);

    for (const requestCapability of this._requests) {
      requestCapability.reject(this._storedError);
    }

    this._requests.length = 0;
    this._queuedChunk = null;
  }

  _onProgress(evt) {
    if (!this.isStreamingSupported) {
      this.onProgress?.({
        loaded: evt.loaded
      });
    }
  }

  get isStreamingSupported() {
    return false;
  }

  async read() {
    if (this._storedError) {
      throw this._storedError;
    }

    if (this._queuedChunk !== null) {
      const chunk = this._queuedChunk;
      this._queuedChunk = null;
      return {
        value: chunk,
        done: false
      };
    }

    if (this._done) {
      return {
        value: undefined,
        done: true
      };
    }

    const requestCapability = (0, _util.createPromiseCapability)();

    this._requests.push(requestCapability);

    return requestCapability.promise;
  }

  cancel(reason) {
    this._done = true;

    for (const requestCapability of this._requests) {
      requestCapability.resolve({
        value: undefined,
        done: true
      });
    }

    this._requests.length = 0;

    if (this._manager.isPendingRequest(this._requestId)) {
      this._manager.abortRequest(this._requestId);
    }

    this._close();
  }

}

/***/ }),
/* 29 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFFetchStream = void 0;

var _util = __w_pdfjs_require__(1);

var _network_utils = __w_pdfjs_require__(26);

;

function createFetchOptions(headers, withCredentials, abortController) {
  return {
    method: "GET",
    headers,
    signal: abortController?.signal,
    mode: "cors",
    credentials: withCredentials ? "include" : "same-origin",
    redirect: "follow"
  };
}

function createHeaders(httpHeaders) {
  const headers = new Headers();

  for (const property in httpHeaders) {
    const value = httpHeaders[property];

    if (typeof value === "undefined") {
      continue;
    }

    headers.append(property, value);
  }

  return headers;
}

class PDFFetchStream {
  constructor(source) {
    this.source = source;
    this.isHttp = /^https?:/i.test(source.url);
    this.httpHeaders = this.isHttp && source.httpHeaders || {};
    this._fullRequestReader = null;
    this._rangeRequestReaders = [];
  }

  get _progressiveDataLength() {
    return this._fullRequestReader?._loaded ?? 0;
  }

  getFullReader() {
    (0, _util.assert)(!this._fullRequestReader, "PDFFetchStream.getFullReader can only be called once.");
    this._fullRequestReader = new PDFFetchStreamReader(this);
    return this._fullRequestReader;
  }

  getRangeReader(begin, end) {
    if (end <= this._progressiveDataLength) {
      return null;
    }

    const reader = new PDFFetchStreamRangeReader(this, begin, end);

    this._rangeRequestReaders.push(reader);

    return reader;
  }

  cancelAllRequests(reason) {
    if (this._fullRequestReader) {
      this._fullRequestReader.cancel(reason);
    }

    for (const reader of this._rangeRequestReaders.slice(0)) {
      reader.cancel(reason);
    }
  }

}

exports.PDFFetchStream = PDFFetchStream;

class PDFFetchStreamReader {
  constructor(stream) {
    this._stream = stream;
    this._reader = null;
    this._loaded = 0;
    this._filename = null;
    const source = stream.source;
    this._withCredentials = source.withCredentials || false;
    this._contentLength = source.length;
    this._headersCapability = (0, _util.createPromiseCapability)();
    this._disableRange = source.disableRange || false;
    this._rangeChunkSize = source.rangeChunkSize;

    if (!this._rangeChunkSize && !this._disableRange) {
      this._disableRange = true;
    }

    if (typeof AbortController !== "undefined") {
      this._abortController = new AbortController();
    }

    this._isStreamingSupported = !source.disableStream;
    this._isRangeSupported = !source.disableRange;
    this._headers = createHeaders(this._stream.httpHeaders);
    const url = source.url;
    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {
      if (!(0, _network_utils.validateResponseStatus)(response.status)) {
        throw (0, _network_utils.createResponseStatusError)(response.status, url);
      }

      this._reader = response.body.getReader();

      this._headersCapability.resolve();

      const getResponseHeader = name => {
        return response.headers.get(name);
      };

      const {
        allowRangeRequests,
        suggestedLength
      } = (0, _network_utils.validateRangeRequestCapabilities)({
        getResponseHeader,
        isHttp: this._stream.isHttp,
        rangeChunkSize: this._rangeChunkSize,
        disableRange: this._disableRange
      });
      this._isRangeSupported = allowRangeRequests;
      this._contentLength = suggestedLength || this._contentLength;
      this._filename = (0, _network_utils.extractFilenameFromHeader)(getResponseHeader);

      if (!this._isStreamingSupported && this._isRangeSupported) {
        this.cancel(new _util.AbortException("Streaming is disabled."));
      }
    }).catch(this._headersCapability.reject);
    this.onProgress = null;
  }

  get headersReady() {
    return this._headersCapability.promise;
  }

  get filename() {
    return this._filename;
  }

  get contentLength() {
    return this._contentLength;
  }

  get isRangeSupported() {
    return this._isRangeSupported;
  }

  get isStreamingSupported() {
    return this._isStreamingSupported;
  }

  async read() {
    await this._headersCapability.promise;
    const {
      value,
      done
    } = await this._reader.read();

    if (done) {
      return {
        value,
        done
      };
    }

    this._loaded += value.byteLength;

    if (this.onProgress) {
      this.onProgress({
        loaded: this._loaded,
        total: this._contentLength
      });
    }

    const buffer = new Uint8Array(value).buffer;
    return {
      value: buffer,
      done: false
    };
  }

  cancel(reason) {
    if (this._reader) {
      this._reader.cancel(reason);
    }

    if (this._abortController) {
      this._abortController.abort();
    }
  }

}

class PDFFetchStreamRangeReader {
  constructor(stream, begin, end) {
    this._stream = stream;
    this._reader = null;
    this._loaded = 0;
    const source = stream.source;
    this._withCredentials = source.withCredentials || false;
    this._readCapability = (0, _util.createPromiseCapability)();
    this._isStreamingSupported = !source.disableStream;

    if (typeof AbortController !== "undefined") {
      this._abortController = new AbortController();
    }

    this._headers = createHeaders(this._stream.httpHeaders);

    this._headers.append("Range", `bytes=${begin}-${end - 1}`);

    const url = source.url;
    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {
      if (!(0, _network_utils.validateResponseStatus)(response.status)) {
        throw (0, _network_utils.createResponseStatusError)(response.status, url);
      }

      this._readCapability.resolve();

      this._reader = response.body.getReader();
    }).catch(this._readCapability.reject);
    this.onProgress = null;
  }

  get isStreamingSupported() {
    return this._isStreamingSupported;
  }

  async read() {
    await this._readCapability.promise;
    const {
      value,
      done
    } = await this._reader.read();

    if (done) {
      return {
        value,
        done
      };
    }

    this._loaded += value.byteLength;

    if (this.onProgress) {
      this.onProgress({
        loaded: this._loaded
      });
    }

    const buffer = new Uint8Array(value).buffer;
    return {
      value: buffer,
      done: false
    };
  }

  cancel(reason) {
    if (this._reader) {
      this._reader.cancel(reason);
    }

    if (this._abortController) {
      this._abortController.abort();
    }
  }

}

/***/ })
/******/ 	]);
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __w_pdfjs_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
Object.defineProperty(exports, "AnnotationLayer", ({
  enumerable: true,
  get: function () {
    return _annotation_layer.AnnotationLayer;
  }
}));
Object.defineProperty(exports, "AnnotationMode", ({
  enumerable: true,
  get: function () {
    return _util.AnnotationMode;
  }
}));
Object.defineProperty(exports, "CMapCompressionType", ({
  enumerable: true,
  get: function () {
    return _util.CMapCompressionType;
  }
}));
Object.defineProperty(exports, "GlobalWorkerOptions", ({
  enumerable: true,
  get: function () {
    return _worker_options.GlobalWorkerOptions;
  }
}));
Object.defineProperty(exports, "InvalidPDFException", ({
  enumerable: true,
  get: function () {
    return _util.InvalidPDFException;
  }
}));
Object.defineProperty(exports, "LoopbackPort", ({
  enumerable: true,
  get: function () {
    return _api.LoopbackPort;
  }
}));
Object.defineProperty(exports, "MissingPDFException", ({
  enumerable: true,
  get: function () {
    return _util.MissingPDFException;
  }
}));
Object.defineProperty(exports, "OPS", ({
  enumerable: true,
  get: function () {
    return _util.OPS;
  }
}));
Object.defineProperty(exports, "PDFDataRangeTransport", ({
  enumerable: true,
  get: function () {
    return _api.PDFDataRangeTransport;
  }
}));
Object.defineProperty(exports, "PDFDateString", ({
  enumerable: true,
  get: function () {
    return _display_utils.PDFDateString;
  }
}));
Object.defineProperty(exports, "PDFWorker", ({
  enumerable: true,
  get: function () {
    return _api.PDFWorker;
  }
}));
Object.defineProperty(exports, "PasswordResponses", ({
  enumerable: true,
  get: function () {
    return _util.PasswordResponses;
  }
}));
Object.defineProperty(exports, "PermissionFlag", ({
  enumerable: true,
  get: function () {
    return _util.PermissionFlag;
  }
}));
Object.defineProperty(exports, "PixelsPerInch", ({
  enumerable: true,
  get: function () {
    return _display_utils.PixelsPerInch;
  }
}));
Object.defineProperty(exports, "RenderingCancelledException", ({
  enumerable: true,
  get: function () {
    return _display_utils.RenderingCancelledException;
  }
}));
Object.defineProperty(exports, "SVGGraphics", ({
  enumerable: true,
  get: function () {
    return _svg.SVGGraphics;
  }
}));
Object.defineProperty(exports, "UNSUPPORTED_FEATURES", ({
  enumerable: true,
  get: function () {
    return _util.UNSUPPORTED_FEATURES;
  }
}));
Object.defineProperty(exports, "UnexpectedResponseException", ({
  enumerable: true,
  get: function () {
    return _util.UnexpectedResponseException;
  }
}));
Object.defineProperty(exports, "Util", ({
  enumerable: true,
  get: function () {
    return _util.Util;
  }
}));
Object.defineProperty(exports, "VerbosityLevel", ({
  enumerable: true,
  get: function () {
    return _util.VerbosityLevel;
  }
}));
Object.defineProperty(exports, "XfaLayer", ({
  enumerable: true,
  get: function () {
    return _xfa_layer.XfaLayer;
  }
}));
Object.defineProperty(exports, "build", ({
  enumerable: true,
  get: function () {
    return _api.build;
  }
}));
Object.defineProperty(exports, "createPromiseCapability", ({
  enumerable: true,
  get: function () {
    return _util.createPromiseCapability;
  }
}));
Object.defineProperty(exports, "createValidAbsoluteUrl", ({
  enumerable: true,
  get: function () {
    return _util.createValidAbsoluteUrl;
  }
}));
Object.defineProperty(exports, "getDocument", ({
  enumerable: true,
  get: function () {
    return _api.getDocument;
  }
}));
Object.defineProperty(exports, "getFilenameFromUrl", ({
  enumerable: true,
  get: function () {
    return _display_utils.getFilenameFromUrl;
  }
}));
Object.defineProperty(exports, "getPdfFilenameFromUrl", ({
  enumerable: true,
  get: function () {
    return _display_utils.getPdfFilenameFromUrl;
  }
}));
Object.defineProperty(exports, "getXfaPageViewport", ({
  enumerable: true,
  get: function () {
    return _display_utils.getXfaPageViewport;
  }
}));
Object.defineProperty(exports, "isPdfFile", ({
  enumerable: true,
  get: function () {
    return _display_utils.isPdfFile;
  }
}));
Object.defineProperty(exports, "loadScript", ({
  enumerable: true,
  get: function () {
    return _display_utils.loadScript;
  }
}));
Object.defineProperty(exports, "renderTextLayer", ({
  enumerable: true,
  get: function () {
    return _text_layer.renderTextLayer;
  }
}));
Object.defineProperty(exports, "shadow", ({
  enumerable: true,
  get: function () {
    return _util.shadow;
  }
}));
Object.defineProperty(exports, "version", ({
  enumerable: true,
  get: function () {
    return _api.version;
  }
}));

var _util = __w_pdfjs_require__(1);

var _api = __w_pdfjs_require__(4);

var _display_utils = __w_pdfjs_require__(5);

var _annotation_layer = __w_pdfjs_require__(20);

var _worker_options = __w_pdfjs_require__(13);

var _is_node = __w_pdfjs_require__(3);

var _text_layer = __w_pdfjs_require__(23);

var _svg = __w_pdfjs_require__(24);

var _xfa_layer = __w_pdfjs_require__(22);

const pdfjsVersion = '2.14.305';
const pdfjsBuild = 'eaaa8b4ad';
{
  if (_is_node.isNodeJS) {
    const {
      PDFNodeStream
    } = __w_pdfjs_require__(25);

    (0, _api.setPDFNetworkStreamFactory)(params => {
      return new PDFNodeStream(params);
    });
  } else {
    const {
      PDFNetworkStream
    } = __w_pdfjs_require__(28);

    const {
      PDFFetchStream
    } = __w_pdfjs_require__(29);

    (0, _api.setPDFNetworkStreamFactory)(params => {
      if ((0, _display_utils.isValidFetchUrl)(params.url)) {
        return new PDFFetchStream(params);
      }

      return new PDFNetworkStream(params);
    });
  }
}
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=pdf.js.map

/***/ }),

/***/ "./node_modules/pdfjs-dist/web/pdf_viewer.js":
/*!***************************************************!*\
  !*** ./node_modules/pdfjs-dist/web/pdf_viewer.js ***!
  \***************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ([
/* 0 */,
/* 1 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DefaultXfaLayerFactory = exports.DefaultTextLayerFactory = exports.DefaultStructTreeLayerFactory = exports.DefaultAnnotationLayerFactory = void 0;

var _annotation_layer_builder = __w_pdfjs_require__(2);

var _l10n_utils = __w_pdfjs_require__(4);

var _pdf_link_service = __w_pdfjs_require__(5);

var _struct_tree_layer_builder = __w_pdfjs_require__(7);

var _text_layer_builder = __w_pdfjs_require__(8);

var _xfa_layer_builder = __w_pdfjs_require__(9);

class DefaultAnnotationLayerFactory {
  createAnnotationLayerBuilder(pageDiv, pdfPage, annotationStorage = null, imageResourcesPath = "", renderForms = true, l10n = _l10n_utils.NullL10n, enableScripting = false, hasJSActionsPromise = null, mouseState = null, fieldObjectsPromise = null, annotationCanvasMap = null) {
    return new _annotation_layer_builder.AnnotationLayerBuilder({
      pageDiv,
      pdfPage,
      imageResourcesPath,
      renderForms,
      linkService: new _pdf_link_service.SimpleLinkService(),
      l10n,
      annotationStorage,
      enableScripting,
      hasJSActionsPromise,
      fieldObjectsPromise,
      mouseState,
      annotationCanvasMap
    });
  }

}

exports.DefaultAnnotationLayerFactory = DefaultAnnotationLayerFactory;

class DefaultStructTreeLayerFactory {
  createStructTreeLayerBuilder(pdfPage) {
    return new _struct_tree_layer_builder.StructTreeLayerBuilder({
      pdfPage
    });
  }

}

exports.DefaultStructTreeLayerFactory = DefaultStructTreeLayerFactory;

class DefaultTextLayerFactory {
  createTextLayerBuilder(textLayerDiv, pageIndex, viewport, enhanceTextSelection = false, eventBus, highlighter) {
    return new _text_layer_builder.TextLayerBuilder({
      textLayerDiv,
      pageIndex,
      viewport,
      enhanceTextSelection,
      eventBus,
      highlighter
    });
  }

}

exports.DefaultTextLayerFactory = DefaultTextLayerFactory;

class DefaultXfaLayerFactory {
  createXfaLayerBuilder(pageDiv, pdfPage, annotationStorage = null, xfaHtml = null) {
    return new _xfa_layer_builder.XfaLayerBuilder({
      pageDiv,
      pdfPage,
      annotationStorage,
      linkService: new _pdf_link_service.SimpleLinkService(),
      xfaHtml
    });
  }

}

exports.DefaultXfaLayerFactory = DefaultXfaLayerFactory;

/***/ }),
/* 2 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AnnotationLayerBuilder = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

var _l10n_utils = __w_pdfjs_require__(4);

class AnnotationLayerBuilder {
  constructor({
    pageDiv,
    pdfPage,
    linkService,
    downloadManager,
    annotationStorage = null,
    imageResourcesPath = "",
    renderForms = true,
    l10n = _l10n_utils.NullL10n,
    enableScripting = false,
    hasJSActionsPromise = null,
    fieldObjectsPromise = null,
    mouseState = null,
    annotationCanvasMap = null
  }) {
    this.pageDiv = pageDiv;
    this.pdfPage = pdfPage;
    this.linkService = linkService;
    this.downloadManager = downloadManager;
    this.imageResourcesPath = imageResourcesPath;
    this.renderForms = renderForms;
    this.l10n = l10n;
    this.annotationStorage = annotationStorage;
    this.enableScripting = enableScripting;
    this._hasJSActionsPromise = hasJSActionsPromise;
    this._fieldObjectsPromise = fieldObjectsPromise;
    this._mouseState = mouseState;
    this._annotationCanvasMap = annotationCanvasMap;
    this.div = null;
    this._cancelled = false;
  }

  async render(viewport, intent = "display") {
    const [annotations, hasJSActions = false, fieldObjects = null] = await Promise.all([this.pdfPage.getAnnotations({
      intent
    }), this._hasJSActionsPromise, this._fieldObjectsPromise]);

    if (this._cancelled || annotations.length === 0) {
      return;
    }

    const parameters = {
      viewport: viewport.clone({
        dontFlip: true
      }),
      div: this.div,
      annotations,
      page: this.pdfPage,
      imageResourcesPath: this.imageResourcesPath,
      renderForms: this.renderForms,
      linkService: this.linkService,
      downloadManager: this.downloadManager,
      annotationStorage: this.annotationStorage,
      enableScripting: this.enableScripting,
      hasJSActions,
      fieldObjects,
      mouseState: this._mouseState,
      annotationCanvasMap: this._annotationCanvasMap
    };

    if (this.div) {
      _pdfjsLib.AnnotationLayer.update(parameters);
    } else {
      this.div = document.createElement("div");
      this.div.className = "annotationLayer";
      this.pageDiv.appendChild(this.div);
      parameters.div = this.div;

      _pdfjsLib.AnnotationLayer.render(parameters);

      this.l10n.translate(this.div);
    }
  }

  cancel() {
    this._cancelled = true;
  }

  hide() {
    if (!this.div) {
      return;
    }

    this.div.hidden = true;
  }

}

exports.AnnotationLayerBuilder = AnnotationLayerBuilder;

/***/ }),
/* 3 */
/***/ ((module) => {



let pdfjsLib;

if (typeof window !== "undefined" && window["pdfjs-dist/build/pdf"]) {
  pdfjsLib = window["pdfjs-dist/build/pdf"];
} else {
  pdfjsLib = __webpack_require__(/*! ../build/pdf.js */ "./node_modules/pdfjs-dist/build/pdf.js");
}

module.exports = pdfjsLib;

/***/ }),
/* 4 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.NullL10n = void 0;
exports.fixupLangCode = fixupLangCode;
exports.getL10nFallback = getL10nFallback;
const DEFAULT_L10N_STRINGS = {
  of_pages: "of {{pagesCount}}",
  page_of_pages: "({{pageNumber}} of {{pagesCount}})",
  document_properties_kb: "{{size_kb}} KB ({{size_b}} bytes)",
  document_properties_mb: "{{size_mb}} MB ({{size_b}} bytes)",
  document_properties_date_string: "{{date}}, {{time}}",
  document_properties_page_size_unit_inches: "in",
  document_properties_page_size_unit_millimeters: "mm",
  document_properties_page_size_orientation_portrait: "portrait",
  document_properties_page_size_orientation_landscape: "landscape",
  document_properties_page_size_name_a3: "A3",
  document_properties_page_size_name_a4: "A4",
  document_properties_page_size_name_letter: "Letter",
  document_properties_page_size_name_legal: "Legal",
  document_properties_page_size_dimension_string: "{{width}}  {{height}} {{unit}} ({{orientation}})",
  document_properties_page_size_dimension_name_string: "{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",
  document_properties_linearized_yes: "Yes",
  document_properties_linearized_no: "No",
  print_progress_percent: "{{progress}}%",
  "toggle_sidebar.title": "Toggle Sidebar",
  "toggle_sidebar_notification2.title": "Toggle Sidebar (document contains outline/attachments/layers)",
  additional_layers: "Additional Layers",
  page_landmark: "Page {{page}}",
  thumb_page_title: "Page {{page}}",
  thumb_page_canvas: "Thumbnail of Page {{page}}",
  find_reached_top: "Reached top of document, continued from bottom",
  find_reached_bottom: "Reached end of document, continued from top",
  "find_match_count[one]": "{{current}} of {{total}} match",
  "find_match_count[other]": "{{current}} of {{total}} matches",
  "find_match_count_limit[one]": "More than {{limit}} match",
  "find_match_count_limit[other]": "More than {{limit}} matches",
  find_not_found: "Phrase not found",
  error_version_info: "PDF.js v{{version}} (build: {{build}})",
  error_message: "Message: {{message}}",
  error_stack: "Stack: {{stack}}",
  error_file: "File: {{file}}",
  error_line: "Line: {{line}}",
  rendering_error: "An error occurred while rendering the page.",
  page_scale_width: "Page Width",
  page_scale_fit: "Page Fit",
  page_scale_auto: "Automatic Zoom",
  page_scale_actual: "Actual Size",
  page_scale_percent: "{{scale}}%",
  loading: "Loading",
  loading_error: "An error occurred while loading the PDF.",
  invalid_file_error: "Invalid or corrupted PDF file.",
  missing_file_error: "Missing PDF file.",
  unexpected_response_error: "Unexpected server response.",
  printing_not_supported: "Warning: Printing is not fully supported by this browser.",
  printing_not_ready: "Warning: The PDF is not fully loaded for printing.",
  web_fonts_disabled: "Web fonts are disabled: unable to use embedded PDF fonts."
};

function getL10nFallback(key, args) {
  switch (key) {
    case "find_match_count":
      key = `find_match_count[${args.total === 1 ? "one" : "other"}]`;
      break;

    case "find_match_count_limit":
      key = `find_match_count_limit[${args.limit === 1 ? "one" : "other"}]`;
      break;
  }

  return DEFAULT_L10N_STRINGS[key] || "";
}

const PARTIAL_LANG_CODES = {
  en: "en-US",
  es: "es-ES",
  fy: "fy-NL",
  ga: "ga-IE",
  gu: "gu-IN",
  hi: "hi-IN",
  hy: "hy-AM",
  nb: "nb-NO",
  ne: "ne-NP",
  nn: "nn-NO",
  pa: "pa-IN",
  pt: "pt-PT",
  sv: "sv-SE",
  zh: "zh-CN"
};

function fixupLangCode(langCode) {
  return PARTIAL_LANG_CODES[langCode?.toLowerCase()] || langCode;
}

function formatL10nValue(text, args) {
  if (!args) {
    return text;
  }

  return text.replace(/\{\{\s*(\w+)\s*\}\}/g, (all, name) => {
    return name in args ? args[name] : "{{" + name + "}}";
  });
}

const NullL10n = {
  async getLanguage() {
    return "en-us";
  },

  async getDirection() {
    return "ltr";
  },

  async get(key, args = null, fallback = getL10nFallback(key, args)) {
    return formatL10nValue(fallback, args);
  },

  async translate(element) {}

};
exports.NullL10n = NullL10n;

/***/ }),
/* 5 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SimpleLinkService = exports.PDFLinkService = exports.LinkTarget = void 0;

var _ui_utils = __w_pdfjs_require__(6);

const DEFAULT_LINK_REL = "noopener noreferrer nofollow";
const LinkTarget = {
  NONE: 0,
  SELF: 1,
  BLANK: 2,
  PARENT: 3,
  TOP: 4
};
exports.LinkTarget = LinkTarget;

function addLinkAttributes(link, {
  url,
  target,
  rel,
  enabled = true
} = {}) {
  if (!url || typeof url !== "string") {
    throw new Error('A valid "url" parameter must provided.');
  }

  const urlNullRemoved = (0, _ui_utils.removeNullCharacters)(url);

  if (enabled) {
    link.href = link.title = urlNullRemoved;
  } else {
    link.href = "";
    link.title = `Disabled: ${urlNullRemoved}`;

    link.onclick = () => {
      return false;
    };
  }

  let targetStr = "";

  switch (target) {
    case LinkTarget.NONE:
      break;

    case LinkTarget.SELF:
      targetStr = "_self";
      break;

    case LinkTarget.BLANK:
      targetStr = "_blank";
      break;

    case LinkTarget.PARENT:
      targetStr = "_parent";
      break;

    case LinkTarget.TOP:
      targetStr = "_top";
      break;
  }

  link.target = targetStr;
  link.rel = typeof rel === "string" ? rel : DEFAULT_LINK_REL;
}

class PDFLinkService {
  #pagesRefCache = new Map();

  constructor({
    eventBus,
    externalLinkTarget = null,
    externalLinkRel = null,
    ignoreDestinationZoom = false
  } = {}) {
    this.eventBus = eventBus;
    this.externalLinkTarget = externalLinkTarget;
    this.externalLinkRel = externalLinkRel;
    this.externalLinkEnabled = true;
    this._ignoreDestinationZoom = ignoreDestinationZoom;
    this.baseUrl = null;
    this.pdfDocument = null;
    this.pdfViewer = null;
    this.pdfHistory = null;
  }

  setDocument(pdfDocument, baseUrl = null) {
    this.baseUrl = baseUrl;
    this.pdfDocument = pdfDocument;
    this.#pagesRefCache.clear();
  }

  setViewer(pdfViewer) {
    this.pdfViewer = pdfViewer;
  }

  setHistory(pdfHistory) {
    this.pdfHistory = pdfHistory;
  }

  get pagesCount() {
    return this.pdfDocument ? this.pdfDocument.numPages : 0;
  }

  get page() {
    return this.pdfViewer.currentPageNumber;
  }

  set page(value) {
    this.pdfViewer.currentPageNumber = value;
  }

  get rotation() {
    return this.pdfViewer.pagesRotation;
  }

  set rotation(value) {
    this.pdfViewer.pagesRotation = value;
  }

  #goToDestinationHelper(rawDest, namedDest = null, explicitDest) {
    const destRef = explicitDest[0];
    let pageNumber;

    if (typeof destRef === "object" && destRef !== null) {
      pageNumber = this._cachedPageNumber(destRef);

      if (!pageNumber) {
        this.pdfDocument.getPageIndex(destRef).then(pageIndex => {
          this.cachePageRef(pageIndex + 1, destRef);
          this.#goToDestinationHelper(rawDest, namedDest, explicitDest);
        }).catch(() => {
          console.error(`PDFLinkService.#goToDestinationHelper: "${destRef}" is not ` + `a valid page reference, for dest="${rawDest}".`);
        });
        return;
      }
    } else if (Number.isInteger(destRef)) {
      pageNumber = destRef + 1;
    } else {
      console.error(`PDFLinkService.#goToDestinationHelper: "${destRef}" is not ` + `a valid destination reference, for dest="${rawDest}".`);
      return;
    }

    if (!pageNumber || pageNumber < 1 || pageNumber > this.pagesCount) {
      console.error(`PDFLinkService.#goToDestinationHelper: "${pageNumber}" is not ` + `a valid page number, for dest="${rawDest}".`);
      return;
    }

    if (this.pdfHistory) {
      this.pdfHistory.pushCurrentPosition();
      this.pdfHistory.push({
        namedDest,
        explicitDest,
        pageNumber
      });
    }

    this.pdfViewer.scrollPageIntoView({
      pageNumber,
      destArray: explicitDest,
      ignoreDestinationZoom: this._ignoreDestinationZoom
    });
  }

  async goToDestination(dest) {
    if (!this.pdfDocument) {
      return;
    }

    let namedDest, explicitDest;

    if (typeof dest === "string") {
      namedDest = dest;
      explicitDest = await this.pdfDocument.getDestination(dest);
    } else {
      namedDest = null;
      explicitDest = await dest;
    }

    if (!Array.isArray(explicitDest)) {
      console.error(`PDFLinkService.goToDestination: "${explicitDest}" is not ` + `a valid destination array, for dest="${dest}".`);
      return;
    }

    this.#goToDestinationHelper(dest, namedDest, explicitDest);
  }

  goToPage(val) {
    if (!this.pdfDocument) {
      return;
    }

    const pageNumber = typeof val === "string" && this.pdfViewer.pageLabelToPageNumber(val) || val | 0;

    if (!(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.pagesCount)) {
      console.error(`PDFLinkService.goToPage: "${val}" is not a valid page.`);
      return;
    }

    if (this.pdfHistory) {
      this.pdfHistory.pushCurrentPosition();
      this.pdfHistory.pushPage(pageNumber);
    }

    this.pdfViewer.scrollPageIntoView({
      pageNumber
    });
  }

  addLinkAttributes(link, url, newWindow = false) {
    addLinkAttributes(link, {
      url,
      target: newWindow ? LinkTarget.BLANK : this.externalLinkTarget,
      rel: this.externalLinkRel,
      enabled: this.externalLinkEnabled
    });
  }

  getDestinationHash(dest) {
    if (typeof dest === "string") {
      if (dest.length > 0) {
        return this.getAnchorUrl("#" + escape(dest));
      }
    } else if (Array.isArray(dest)) {
      const str = JSON.stringify(dest);

      if (str.length > 0) {
        return this.getAnchorUrl("#" + escape(str));
      }
    }

    return this.getAnchorUrl("");
  }

  getAnchorUrl(anchor) {
    return (this.baseUrl || "") + anchor;
  }

  setHash(hash) {
    if (!this.pdfDocument) {
      return;
    }

    let pageNumber, dest;

    if (hash.includes("=")) {
      const params = (0, _ui_utils.parseQueryString)(hash);

      if (params.has("search")) {
        this.eventBus.dispatch("findfromurlhash", {
          source: this,
          query: params.get("search").replace(/"/g, ""),
          phraseSearch: params.get("phrase") === "true"
        });
      }

      if (params.has("page")) {
        pageNumber = params.get("page") | 0 || 1;
      }

      if (params.has("zoom")) {
        const zoomArgs = params.get("zoom").split(",");
        const zoomArg = zoomArgs[0];
        const zoomArgNumber = parseFloat(zoomArg);

        if (!zoomArg.includes("Fit")) {
          dest = [null, {
            name: "XYZ"
          }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];
        } else {
          if (zoomArg === "Fit" || zoomArg === "FitB") {
            dest = [null, {
              name: zoomArg
            }];
          } else if (zoomArg === "FitH" || zoomArg === "FitBH" || zoomArg === "FitV" || zoomArg === "FitBV") {
            dest = [null, {
              name: zoomArg
            }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];
          } else if (zoomArg === "FitR") {
            if (zoomArgs.length !== 5) {
              console.error('PDFLinkService.setHash: Not enough parameters for "FitR".');
            } else {
              dest = [null, {
                name: zoomArg
              }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];
            }
          } else {
            console.error(`PDFLinkService.setHash: "${zoomArg}" is not a valid zoom value.`);
          }
        }
      }

      if (dest) {
        this.pdfViewer.scrollPageIntoView({
          pageNumber: pageNumber || this.page,
          destArray: dest,
          allowNegativeOffset: true
        });
      } else if (pageNumber) {
        this.page = pageNumber;
      }

      if (params.has("pagemode")) {
        this.eventBus.dispatch("pagemode", {
          source: this,
          mode: params.get("pagemode")
        });
      }

      if (params.has("nameddest")) {
        this.goToDestination(params.get("nameddest"));
      }
    } else {
      dest = unescape(hash);

      try {
        dest = JSON.parse(dest);

        if (!Array.isArray(dest)) {
          dest = dest.toString();
        }
      } catch (ex) {}

      if (typeof dest === "string" || PDFLinkService.#isValidExplicitDestination(dest)) {
        this.goToDestination(dest);
        return;
      }

      console.error(`PDFLinkService.setHash: "${unescape(hash)}" is not a valid destination.`);
    }
  }

  executeNamedAction(action) {
    switch (action) {
      case "GoBack":
        this.pdfHistory?.back();
        break;

      case "GoForward":
        this.pdfHistory?.forward();
        break;

      case "NextPage":
        this.pdfViewer.nextPage();
        break;

      case "PrevPage":
        this.pdfViewer.previousPage();
        break;

      case "LastPage":
        this.page = this.pagesCount;
        break;

      case "FirstPage":
        this.page = 1;
        break;

      default:
        break;
    }

    this.eventBus.dispatch("namedaction", {
      source: this,
      action
    });
  }

  cachePageRef(pageNum, pageRef) {
    if (!pageRef) {
      return;
    }

    const refStr = pageRef.gen === 0 ? `${pageRef.num}R` : `${pageRef.num}R${pageRef.gen}`;
    this.#pagesRefCache.set(refStr, pageNum);
  }

  _cachedPageNumber(pageRef) {
    if (!pageRef) {
      return null;
    }

    const refStr = pageRef.gen === 0 ? `${pageRef.num}R` : `${pageRef.num}R${pageRef.gen}`;
    return this.#pagesRefCache.get(refStr) || null;
  }

  isPageVisible(pageNumber) {
    return this.pdfViewer.isPageVisible(pageNumber);
  }

  isPageCached(pageNumber) {
    return this.pdfViewer.isPageCached(pageNumber);
  }

  static #isValidExplicitDestination(dest) {
    if (!Array.isArray(dest)) {
      return false;
    }

    const destLength = dest.length;

    if (destLength < 2) {
      return false;
    }

    const page = dest[0];

    if (!(typeof page === "object" && Number.isInteger(page.num) && Number.isInteger(page.gen)) && !(Number.isInteger(page) && page >= 0)) {
      return false;
    }

    const zoom = dest[1];

    if (!(typeof zoom === "object" && typeof zoom.name === "string")) {
      return false;
    }

    let allowNull = true;

    switch (zoom.name) {
      case "XYZ":
        if (destLength !== 5) {
          return false;
        }

        break;

      case "Fit":
      case "FitB":
        return destLength === 2;

      case "FitH":
      case "FitBH":
      case "FitV":
      case "FitBV":
        if (destLength !== 3) {
          return false;
        }

        break;

      case "FitR":
        if (destLength !== 6) {
          return false;
        }

        allowNull = false;
        break;

      default:
        return false;
    }

    for (let i = 2; i < destLength; i++) {
      const param = dest[i];

      if (!(typeof param === "number" || allowNull && param === null)) {
        return false;
      }
    }

    return true;
  }

}

exports.PDFLinkService = PDFLinkService;

class SimpleLinkService {
  constructor() {
    this.externalLinkEnabled = true;
  }

  get pagesCount() {
    return 0;
  }

  get page() {
    return 0;
  }

  set page(value) {}

  get rotation() {
    return 0;
  }

  set rotation(value) {}

  async goToDestination(dest) {}

  goToPage(val) {}

  addLinkAttributes(link, url, newWindow = false) {
    addLinkAttributes(link, {
      url,
      enabled: this.externalLinkEnabled
    });
  }

  getDestinationHash(dest) {
    return "#";
  }

  getAnchorUrl(hash) {
    return "#";
  }

  setHash(hash) {}

  executeNamedAction(action) {}

  cachePageRef(pageNum, pageRef) {}

  isPageVisible(pageNumber) {
    return true;
  }

  isPageCached(pageNumber) {
    return true;
  }

}

exports.SimpleLinkService = SimpleLinkService;

/***/ }),
/* 6 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.animationStarted = exports.VERTICAL_PADDING = exports.UNKNOWN_SCALE = exports.TextLayerMode = exports.SpreadMode = exports.SidebarView = exports.ScrollMode = exports.SCROLLBAR_PADDING = exports.RenderingStates = exports.RendererType = exports.ProgressBar = exports.PresentationModeState = exports.OutputScale = exports.MIN_SCALE = exports.MAX_SCALE = exports.MAX_AUTO_SCALE = exports.DEFAULT_SCALE_VALUE = exports.DEFAULT_SCALE_DELTA = exports.DEFAULT_SCALE = exports.AutoPrintRegExp = void 0;
exports.apiPageLayoutToViewerModes = apiPageLayoutToViewerModes;
exports.apiPageModeToSidebarView = apiPageModeToSidebarView;
exports.approximateFraction = approximateFraction;
exports.backtrackBeforeAllVisibleElements = backtrackBeforeAllVisibleElements;
exports.binarySearchFirstItem = binarySearchFirstItem;
exports.getActiveOrFocusedElement = getActiveOrFocusedElement;
exports.getPageSizeInches = getPageSizeInches;
exports.getVisibleElements = getVisibleElements;
exports.isPortraitOrientation = isPortraitOrientation;
exports.isValidRotation = isValidRotation;
exports.isValidScrollMode = isValidScrollMode;
exports.isValidSpreadMode = isValidSpreadMode;
exports.noContextMenuHandler = noContextMenuHandler;
exports.normalizeWheelEventDelta = normalizeWheelEventDelta;
exports.normalizeWheelEventDirection = normalizeWheelEventDirection;
exports.parseQueryString = parseQueryString;
exports.removeNullCharacters = removeNullCharacters;
exports.roundToDivide = roundToDivide;
exports.scrollIntoView = scrollIntoView;
exports.watchScroll = watchScroll;
const DEFAULT_SCALE_VALUE = "auto";
exports.DEFAULT_SCALE_VALUE = DEFAULT_SCALE_VALUE;
const DEFAULT_SCALE = 1.0;
exports.DEFAULT_SCALE = DEFAULT_SCALE;
const DEFAULT_SCALE_DELTA = 1.1;
exports.DEFAULT_SCALE_DELTA = DEFAULT_SCALE_DELTA;
const MIN_SCALE = 0.1;
exports.MIN_SCALE = MIN_SCALE;
const MAX_SCALE = 10.0;
exports.MAX_SCALE = MAX_SCALE;
const UNKNOWN_SCALE = 0;
exports.UNKNOWN_SCALE = UNKNOWN_SCALE;
const MAX_AUTO_SCALE = 1.25;
exports.MAX_AUTO_SCALE = MAX_AUTO_SCALE;
const SCROLLBAR_PADDING = 40;
exports.SCROLLBAR_PADDING = SCROLLBAR_PADDING;
const VERTICAL_PADDING = 5;
exports.VERTICAL_PADDING = VERTICAL_PADDING;
const RenderingStates = {
  INITIAL: 0,
  RUNNING: 1,
  PAUSED: 2,
  FINISHED: 3
};
exports.RenderingStates = RenderingStates;
const PresentationModeState = {
  UNKNOWN: 0,
  NORMAL: 1,
  CHANGING: 2,
  FULLSCREEN: 3
};
exports.PresentationModeState = PresentationModeState;
const SidebarView = {
  UNKNOWN: -1,
  NONE: 0,
  THUMBS: 1,
  OUTLINE: 2,
  ATTACHMENTS: 3,
  LAYERS: 4
};
exports.SidebarView = SidebarView;
const RendererType = {
  CANVAS: "canvas",
  SVG: "svg"
};
exports.RendererType = RendererType;
const TextLayerMode = {
  DISABLE: 0,
  ENABLE: 1,
  ENABLE_ENHANCE: 2
};
exports.TextLayerMode = TextLayerMode;
const ScrollMode = {
  UNKNOWN: -1,
  VERTICAL: 0,
  HORIZONTAL: 1,
  WRAPPED: 2,
  PAGE: 3
};
exports.ScrollMode = ScrollMode;
const SpreadMode = {
  UNKNOWN: -1,
  NONE: 0,
  ODD: 1,
  EVEN: 2
};
exports.SpreadMode = SpreadMode;
const AutoPrintRegExp = /\bprint\s*\(/;
exports.AutoPrintRegExp = AutoPrintRegExp;

class OutputScale {
  constructor() {
    const pixelRatio = window.devicePixelRatio || 1;
    this.sx = pixelRatio;
    this.sy = pixelRatio;
  }

  get scaled() {
    return this.sx !== 1 || this.sy !== 1;
  }

}

exports.OutputScale = OutputScale;

function scrollIntoView(element, spot, scrollMatches = false) {
  let parent = element.offsetParent;

  if (!parent) {
    console.error("offsetParent is not set -- cannot scroll");
    return;
  }

  let offsetY = element.offsetTop + element.clientTop;
  let offsetX = element.offsetLeft + element.clientLeft;

  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || scrollMatches && (parent.classList.contains("markedContent") || getComputedStyle(parent).overflow === "hidden")) {
    offsetY += parent.offsetTop;
    offsetX += parent.offsetLeft;
    parent = parent.offsetParent;

    if (!parent) {
      return;
    }
  }

  if (spot) {
    if (spot.top !== undefined) {
      offsetY += spot.top;
    }

    if (spot.left !== undefined) {
      offsetX += spot.left;
      parent.scrollLeft = offsetX;
    }
  }

  parent.scrollTop = offsetY;
}

function watchScroll(viewAreaElement, callback) {
  const debounceScroll = function (evt) {
    if (rAF) {
      return;
    }

    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {
      rAF = null;
      const currentX = viewAreaElement.scrollLeft;
      const lastX = state.lastX;

      if (currentX !== lastX) {
        state.right = currentX > lastX;
      }

      state.lastX = currentX;
      const currentY = viewAreaElement.scrollTop;
      const lastY = state.lastY;

      if (currentY !== lastY) {
        state.down = currentY > lastY;
      }

      state.lastY = currentY;
      callback(state);
    });
  };

  const state = {
    right: true,
    down: true,
    lastX: viewAreaElement.scrollLeft,
    lastY: viewAreaElement.scrollTop,
    _eventHandler: debounceScroll
  };
  let rAF = null;
  viewAreaElement.addEventListener("scroll", debounceScroll, true);
  return state;
}

function parseQueryString(query) {
  const params = new Map();

  for (const [key, value] of new URLSearchParams(query)) {
    params.set(key.toLowerCase(), value);
  }

  return params;
}

const NullCharactersRegExp = /\x00/g;
const InvisibleCharactersRegExp = /[\x01-\x1F]/g;

function removeNullCharacters(str, replaceInvisible = false) {
  if (typeof str !== "string") {
    console.error(`The argument must be a string.`);
    return str;
  }

  if (replaceInvisible) {
    str = str.replace(InvisibleCharactersRegExp, " ");
  }

  return str.replace(NullCharactersRegExp, "");
}

function binarySearchFirstItem(items, condition, start = 0) {
  let minIndex = start;
  let maxIndex = items.length - 1;

  if (maxIndex < 0 || !condition(items[maxIndex])) {
    return items.length;
  }

  if (condition(items[minIndex])) {
    return minIndex;
  }

  while (minIndex < maxIndex) {
    const currentIndex = minIndex + maxIndex >> 1;
    const currentItem = items[currentIndex];

    if (condition(currentItem)) {
      maxIndex = currentIndex;
    } else {
      minIndex = currentIndex + 1;
    }
  }

  return minIndex;
}

function approximateFraction(x) {
  if (Math.floor(x) === x) {
    return [x, 1];
  }

  const xinv = 1 / x;
  const limit = 8;

  if (xinv > limit) {
    return [1, limit];
  } else if (Math.floor(xinv) === xinv) {
    return [1, xinv];
  }

  const x_ = x > 1 ? xinv : x;
  let a = 0,
      b = 1,
      c = 1,
      d = 1;

  while (true) {
    const p = a + c,
          q = b + d;

    if (q > limit) {
      break;
    }

    if (x_ <= p / q) {
      c = p;
      d = q;
    } else {
      a = p;
      b = q;
    }
  }

  let result;

  if (x_ - a / b < c / d - x_) {
    result = x_ === x ? [a, b] : [b, a];
  } else {
    result = x_ === x ? [c, d] : [d, c];
  }

  return result;
}

function roundToDivide(x, div) {
  const r = x % div;
  return r === 0 ? x : Math.round(x - r + div);
}

function getPageSizeInches({
  view,
  userUnit,
  rotate
}) {
  const [x1, y1, x2, y2] = view;
  const changeOrientation = rotate % 180 !== 0;
  const width = (x2 - x1) / 72 * userUnit;
  const height = (y2 - y1) / 72 * userUnit;
  return {
    width: changeOrientation ? height : width,
    height: changeOrientation ? width : height
  };
}

function backtrackBeforeAllVisibleElements(index, views, top) {
  if (index < 2) {
    return index;
  }

  let elt = views[index].div;
  let pageTop = elt.offsetTop + elt.clientTop;

  if (pageTop >= top) {
    elt = views[index - 1].div;
    pageTop = elt.offsetTop + elt.clientTop;
  }

  for (let i = index - 2; i >= 0; --i) {
    elt = views[i].div;

    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {
      break;
    }

    index = i;
  }

  return index;
}

function getVisibleElements({
  scrollEl,
  views,
  sortByVisibility = false,
  horizontal = false,
  rtl = false
}) {
  const top = scrollEl.scrollTop,
        bottom = top + scrollEl.clientHeight;
  const left = scrollEl.scrollLeft,
        right = left + scrollEl.clientWidth;

  function isElementBottomAfterViewTop(view) {
    const element = view.div;
    const elementBottom = element.offsetTop + element.clientTop + element.clientHeight;
    return elementBottom > top;
  }

  function isElementNextAfterViewHorizontally(view) {
    const element = view.div;
    const elementLeft = element.offsetLeft + element.clientLeft;
    const elementRight = elementLeft + element.clientWidth;
    return rtl ? elementLeft < right : elementRight > left;
  }

  const visible = [],
        ids = new Set(),
        numViews = views.length;
  let firstVisibleElementInd = binarySearchFirstItem(views, horizontal ? isElementNextAfterViewHorizontally : isElementBottomAfterViewTop);

  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {
    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);
  }

  let lastEdge = horizontal ? right : -1;

  for (let i = firstVisibleElementInd; i < numViews; i++) {
    const view = views[i],
          element = view.div;
    const currentWidth = element.offsetLeft + element.clientLeft;
    const currentHeight = element.offsetTop + element.clientTop;
    const viewWidth = element.clientWidth,
          viewHeight = element.clientHeight;
    const viewRight = currentWidth + viewWidth;
    const viewBottom = currentHeight + viewHeight;

    if (lastEdge === -1) {
      if (viewBottom >= bottom) {
        lastEdge = viewBottom;
      }
    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {
      break;
    }

    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {
      continue;
    }

    const hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);
    const hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);
    const fractionHeight = (viewHeight - hiddenHeight) / viewHeight,
          fractionWidth = (viewWidth - hiddenWidth) / viewWidth;
    const percent = fractionHeight * fractionWidth * 100 | 0;
    visible.push({
      id: view.id,
      x: currentWidth,
      y: currentHeight,
      view,
      percent,
      widthPercent: fractionWidth * 100 | 0
    });
    ids.add(view.id);
  }

  const first = visible[0],
        last = visible[visible.length - 1];

  if (sortByVisibility) {
    visible.sort(function (a, b) {
      const pc = a.percent - b.percent;

      if (Math.abs(pc) > 0.001) {
        return -pc;
      }

      return a.id - b.id;
    });
  }

  return {
    first,
    last,
    views: visible,
    ids
  };
}

function noContextMenuHandler(evt) {
  evt.preventDefault();
}

function normalizeWheelEventDirection(evt) {
  let delta = Math.hypot(evt.deltaX, evt.deltaY);
  const angle = Math.atan2(evt.deltaY, evt.deltaX);

  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {
    delta = -delta;
  }

  return delta;
}

function normalizeWheelEventDelta(evt) {
  let delta = normalizeWheelEventDirection(evt);
  const MOUSE_DOM_DELTA_PIXEL_MODE = 0;
  const MOUSE_DOM_DELTA_LINE_MODE = 1;
  const MOUSE_PIXELS_PER_LINE = 30;
  const MOUSE_LINES_PER_PAGE = 30;

  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {
    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;
  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {
    delta /= MOUSE_LINES_PER_PAGE;
  }

  return delta;
}

function isValidRotation(angle) {
  return Number.isInteger(angle) && angle % 90 === 0;
}

function isValidScrollMode(mode) {
  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;
}

function isValidSpreadMode(mode) {
  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;
}

function isPortraitOrientation(size) {
  return size.width <= size.height;
}

const animationStarted = new Promise(function (resolve) {
  window.requestAnimationFrame(resolve);
});
exports.animationStarted = animationStarted;

function clamp(v, min, max) {
  return Math.min(Math.max(v, min), max);
}

class ProgressBar {
  constructor(id) {
    if (arguments.length > 1) {
      throw new Error("ProgressBar no longer accepts any additional options, " + "please use CSS rules to modify its appearance instead.");
    }

    this.visible = true;
    this.div = document.querySelector(id + " .progress");
    this.bar = this.div.parentNode;
    this.percent = 0;
  }

  #updateBar() {
    if (this._indeterminate) {
      this.div.classList.add("indeterminate");
      return;
    }

    this.div.classList.remove("indeterminate");
    const doc = document.documentElement;
    doc.style.setProperty("--progressBar-percent", `${this._percent}%`);
  }

  get percent() {
    return this._percent;
  }

  set percent(val) {
    this._indeterminate = isNaN(val);
    this._percent = clamp(val, 0, 100);
    this.#updateBar();
  }

  setWidth(viewer) {
    if (!viewer) {
      return;
    }

    const container = viewer.parentNode;
    const scrollbarWidth = container.offsetWidth - viewer.offsetWidth;

    if (scrollbarWidth > 0) {
      const doc = document.documentElement;
      doc.style.setProperty("--progressBar-end-offset", `${scrollbarWidth}px`);
    }
  }

  hide() {
    if (!this.visible) {
      return;
    }

    this.visible = false;
    this.bar.classList.add("hidden");
  }

  show() {
    if (this.visible) {
      return;
    }

    this.visible = true;
    this.bar.classList.remove("hidden");
  }

}

exports.ProgressBar = ProgressBar;

function getActiveOrFocusedElement() {
  let curRoot = document;
  let curActiveOrFocused = curRoot.activeElement || curRoot.querySelector(":focus");

  while (curActiveOrFocused?.shadowRoot) {
    curRoot = curActiveOrFocused.shadowRoot;
    curActiveOrFocused = curRoot.activeElement || curRoot.querySelector(":focus");
  }

  return curActiveOrFocused;
}

function apiPageLayoutToViewerModes(layout) {
  let scrollMode = ScrollMode.VERTICAL,
      spreadMode = SpreadMode.NONE;

  switch (layout) {
    case "SinglePage":
      scrollMode = ScrollMode.PAGE;
      break;

    case "OneColumn":
      break;

    case "TwoPageLeft":
      scrollMode = ScrollMode.PAGE;

    case "TwoColumnLeft":
      spreadMode = SpreadMode.ODD;
      break;

    case "TwoPageRight":
      scrollMode = ScrollMode.PAGE;

    case "TwoColumnRight":
      spreadMode = SpreadMode.EVEN;
      break;
  }

  return {
    scrollMode,
    spreadMode
  };
}

function apiPageModeToSidebarView(mode) {
  switch (mode) {
    case "UseNone":
      return SidebarView.NONE;

    case "UseThumbs":
      return SidebarView.THUMBS;

    case "UseOutlines":
      return SidebarView.OUTLINE;

    case "UseAttachments":
      return SidebarView.ATTACHMENTS;

    case "UseOC":
      return SidebarView.LAYERS;
  }

  return SidebarView.NONE;
}

/***/ }),
/* 7 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StructTreeLayerBuilder = void 0;
const PDF_ROLE_TO_HTML_ROLE = {
  Document: null,
  DocumentFragment: null,
  Part: "group",
  Sect: "group",
  Div: "group",
  Aside: "note",
  NonStruct: "none",
  P: null,
  H: "heading",
  Title: null,
  FENote: "note",
  Sub: "group",
  Lbl: null,
  Span: null,
  Em: null,
  Strong: null,
  Link: "link",
  Annot: "note",
  Form: "form",
  Ruby: null,
  RB: null,
  RT: null,
  RP: null,
  Warichu: null,
  WT: null,
  WP: null,
  L: "list",
  LI: "listitem",
  LBody: null,
  Table: "table",
  TR: "row",
  TH: "columnheader",
  TD: "cell",
  THead: "columnheader",
  TBody: null,
  TFoot: null,
  Caption: null,
  Figure: "figure",
  Formula: null,
  Artifact: null
};
const HEADING_PATTERN = /^H(\d+)$/;

class StructTreeLayerBuilder {
  constructor({
    pdfPage
  }) {
    this.pdfPage = pdfPage;
  }

  render(structTree) {
    return this._walk(structTree);
  }

  _setAttributes(structElement, htmlElement) {
    if (structElement.alt !== undefined) {
      htmlElement.setAttribute("aria-label", structElement.alt);
    }

    if (structElement.id !== undefined) {
      htmlElement.setAttribute("aria-owns", structElement.id);
    }

    if (structElement.lang !== undefined) {
      htmlElement.setAttribute("lang", structElement.lang);
    }
  }

  _walk(node) {
    if (!node) {
      return null;
    }

    const element = document.createElement("span");

    if ("role" in node) {
      const {
        role
      } = node;
      const match = role.match(HEADING_PATTERN);

      if (match) {
        element.setAttribute("role", "heading");
        element.setAttribute("aria-level", match[1]);
      } else if (PDF_ROLE_TO_HTML_ROLE[role]) {
        element.setAttribute("role", PDF_ROLE_TO_HTML_ROLE[role]);
      }
    }

    this._setAttributes(node, element);

    if (node.children) {
      if (node.children.length === 1 && "id" in node.children[0]) {
        this._setAttributes(node.children[0], element);
      } else {
        for (const kid of node.children) {
          element.appendChild(this._walk(kid));
        }
      }
    }

    return element;
  }

}

exports.StructTreeLayerBuilder = StructTreeLayerBuilder;

/***/ }),
/* 8 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.TextLayerBuilder = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

const EXPAND_DIVS_TIMEOUT = 300;

class TextLayerBuilder {
  constructor({
    textLayerDiv,
    eventBus,
    pageIndex,
    viewport,
    highlighter = null,
    enhanceTextSelection = false
  }) {
    this.textLayerDiv = textLayerDiv;
    this.eventBus = eventBus;
    this.textContent = null;
    this.textContentItemsStr = [];
    this.textContentStream = null;
    this.renderingDone = false;
    this.pageNumber = pageIndex + 1;
    this.viewport = viewport;
    this.textDivs = [];
    this.textLayerRenderTask = null;
    this.highlighter = highlighter;
    this.enhanceTextSelection = enhanceTextSelection;

    this._bindMouse();
  }

  _finishRendering() {
    this.renderingDone = true;

    if (!this.enhanceTextSelection) {
      const endOfContent = document.createElement("div");
      endOfContent.className = "endOfContent";
      this.textLayerDiv.appendChild(endOfContent);
    }

    this.eventBus.dispatch("textlayerrendered", {
      source: this,
      pageNumber: this.pageNumber,
      numTextDivs: this.textDivs.length
    });
  }

  render(timeout = 0) {
    if (!(this.textContent || this.textContentStream) || this.renderingDone) {
      return;
    }

    this.cancel();
    this.textDivs.length = 0;
    this.highlighter?.setTextMapping(this.textDivs, this.textContentItemsStr);
    const textLayerFrag = document.createDocumentFragment();
    this.textLayerRenderTask = (0, _pdfjsLib.renderTextLayer)({
      textContent: this.textContent,
      textContentStream: this.textContentStream,
      container: textLayerFrag,
      viewport: this.viewport,
      textDivs: this.textDivs,
      textContentItemsStr: this.textContentItemsStr,
      timeout,
      enhanceTextSelection: this.enhanceTextSelection
    });
    this.textLayerRenderTask.promise.then(() => {
      this.textLayerDiv.appendChild(textLayerFrag);

      this._finishRendering();

      this.highlighter?.enable();
    }, function (reason) {});
  }

  cancel() {
    if (this.textLayerRenderTask) {
      this.textLayerRenderTask.cancel();
      this.textLayerRenderTask = null;
    }

    this.highlighter?.disable();
  }

  setTextContentStream(readableStream) {
    this.cancel();
    this.textContentStream = readableStream;
  }

  setTextContent(textContent) {
    this.cancel();
    this.textContent = textContent;
  }

  _bindMouse() {
    const div = this.textLayerDiv;
    let expandDivsTimer = null;
    div.addEventListener("mousedown", evt => {
      if (this.enhanceTextSelection && this.textLayerRenderTask) {
        this.textLayerRenderTask.expandTextDivs(true);

        if (expandDivsTimer) {
          clearTimeout(expandDivsTimer);
          expandDivsTimer = null;
        }

        return;
      }

      const end = div.querySelector(".endOfContent");

      if (!end) {
        return;
      }

      let adjustTop = evt.target !== div;
      adjustTop = adjustTop && window.getComputedStyle(end).getPropertyValue("-moz-user-select") !== "none";

      if (adjustTop) {
        const divBounds = div.getBoundingClientRect();
        const r = Math.max(0, (evt.pageY - divBounds.top) / divBounds.height);
        end.style.top = (r * 100).toFixed(2) + "%";
      }

      end.classList.add("active");
    });
    div.addEventListener("mouseup", () => {
      if (this.enhanceTextSelection && this.textLayerRenderTask) {
        expandDivsTimer = setTimeout(() => {
          if (this.textLayerRenderTask) {
            this.textLayerRenderTask.expandTextDivs(false);
          }

          expandDivsTimer = null;
        }, EXPAND_DIVS_TIMEOUT);
        return;
      }

      const end = div.querySelector(".endOfContent");

      if (!end) {
        return;
      }

      end.style.top = "";
      end.classList.remove("active");
    });
  }

}

exports.TextLayerBuilder = TextLayerBuilder;

/***/ }),
/* 9 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.XfaLayerBuilder = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

class XfaLayerBuilder {
  constructor({
    pageDiv,
    pdfPage,
    annotationStorage = null,
    linkService,
    xfaHtml = null
  }) {
    this.pageDiv = pageDiv;
    this.pdfPage = pdfPage;
    this.annotationStorage = annotationStorage;
    this.linkService = linkService;
    this.xfaHtml = xfaHtml;
    this.div = null;
    this._cancelled = false;
  }

  render(viewport, intent = "display") {
    if (intent === "print") {
      const parameters = {
        viewport: viewport.clone({
          dontFlip: true
        }),
        div: this.div,
        xfaHtml: this.xfaHtml,
        annotationStorage: this.annotationStorage,
        linkService: this.linkService,
        intent
      };
      const div = document.createElement("div");
      this.pageDiv.appendChild(div);
      parameters.div = div;

      const result = _pdfjsLib.XfaLayer.render(parameters);

      return Promise.resolve(result);
    }

    return this.pdfPage.getXfa().then(xfaHtml => {
      if (this._cancelled || !xfaHtml) {
        return {
          textDivs: []
        };
      }

      const parameters = {
        viewport: viewport.clone({
          dontFlip: true
        }),
        div: this.div,
        xfaHtml,
        annotationStorage: this.annotationStorage,
        linkService: this.linkService,
        intent
      };

      if (this.div) {
        return _pdfjsLib.XfaLayer.update(parameters);
      }

      this.div = document.createElement("div");
      this.pageDiv.appendChild(this.div);
      parameters.div = this.div;
      return _pdfjsLib.XfaLayer.render(parameters);
    }).catch(error => {
      console.error(error);
    });
  }

  cancel() {
    this._cancelled = true;
  }

  hide() {
    if (!this.div) {
      return;
    }

    this.div.hidden = true;
  }

}

exports.XfaLayerBuilder = XfaLayerBuilder;

/***/ }),
/* 10 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFViewer = exports.PDFSinglePageViewer = void 0;

var _ui_utils = __w_pdfjs_require__(6);

var _base_viewer = __w_pdfjs_require__(11);

class PDFViewer extends _base_viewer.BaseViewer {}

exports.PDFViewer = PDFViewer;

class PDFSinglePageViewer extends _base_viewer.BaseViewer {
  _resetView() {
    super._resetView();

    this._scrollMode = _ui_utils.ScrollMode.PAGE;
    this._spreadMode = _ui_utils.SpreadMode.NONE;
  }

  set scrollMode(mode) {}

  _updateScrollMode() {}

  set spreadMode(mode) {}

  _updateSpreadMode() {}

}

exports.PDFSinglePageViewer = PDFSinglePageViewer;

/***/ }),
/* 11 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PagesCountLimit = exports.PDFPageViewBuffer = exports.BaseViewer = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

var _ui_utils = __w_pdfjs_require__(6);

var _annotation_layer_builder = __w_pdfjs_require__(2);

var _l10n_utils = __w_pdfjs_require__(4);

var _pdf_page_view = __w_pdfjs_require__(12);

var _pdf_rendering_queue = __w_pdfjs_require__(14);

var _pdf_link_service = __w_pdfjs_require__(5);

var _struct_tree_layer_builder = __w_pdfjs_require__(7);

var _text_highlighter = __w_pdfjs_require__(15);

var _text_layer_builder = __w_pdfjs_require__(8);

var _xfa_layer_builder = __w_pdfjs_require__(9);

const DEFAULT_CACHE_SIZE = 10;
const ENABLE_PERMISSIONS_CLASS = "enablePermissions";
const PagesCountLimit = {
  FORCE_SCROLL_MODE_PAGE: 15000,
  FORCE_LAZY_PAGE_INIT: 7500,
  PAUSE_EAGER_PAGE_INIT: 250
};
exports.PagesCountLimit = PagesCountLimit;

class PDFPageViewBuffer {
  #buf = new Set();
  #size = 0;

  constructor(size) {
    this.#size = size;
  }

  push(view) {
    const buf = this.#buf;

    if (buf.has(view)) {
      buf.delete(view);
    }

    buf.add(view);

    if (buf.size > this.#size) {
      this.#destroyFirstView();
    }
  }

  resize(newSize, idsToKeep = null) {
    this.#size = newSize;
    const buf = this.#buf;

    if (idsToKeep) {
      const ii = buf.size;
      let i = 1;

      for (const view of buf) {
        if (idsToKeep.has(view.id)) {
          buf.delete(view);
          buf.add(view);
        }

        if (++i > ii) {
          break;
        }
      }
    }

    while (buf.size > this.#size) {
      this.#destroyFirstView();
    }
  }

  has(view) {
    return this.#buf.has(view);
  }

  [Symbol.iterator]() {
    return this.#buf.keys();
  }

  #destroyFirstView() {
    const firstView = this.#buf.keys().next().value;
    firstView?.destroy();
    this.#buf.delete(firstView);
  }

}

exports.PDFPageViewBuffer = PDFPageViewBuffer;

class BaseViewer {
  #buffer = null;
  #annotationMode = _pdfjsLib.AnnotationMode.ENABLE_FORMS;
  #previousAnnotationMode = null;
  #enablePermissions = false;
  #previousContainerHeight = 0;
  #scrollModePageState = null;
  #onVisibilityChange = null;

  constructor(options) {
    if (this.constructor === BaseViewer) {
      throw new Error("Cannot initialize BaseViewer.");
    }

    const viewerVersion = '2.14.305';

    if (_pdfjsLib.version !== viewerVersion) {
      throw new Error(`The API version "${_pdfjsLib.version}" does not match the Viewer version "${viewerVersion}".`);
    }

    this.container = options.container;
    this.viewer = options.viewer || options.container.firstElementChild;

    if (!(this.container?.tagName.toUpperCase() === "DIV" && this.viewer?.tagName.toUpperCase() === "DIV")) {
      throw new Error("Invalid `container` and/or `viewer` option.");
    }

    if (this.container.offsetParent && getComputedStyle(this.container).position !== "absolute") {
      throw new Error("The `container` must be absolutely positioned.");
    }

    this.eventBus = options.eventBus;
    this.linkService = options.linkService || new _pdf_link_service.SimpleLinkService();
    this.downloadManager = options.downloadManager || null;
    this.findController = options.findController || null;
    this._scriptingManager = options.scriptingManager || null;
    this.removePageBorders = options.removePageBorders || false;
    this.textLayerMode = options.textLayerMode ?? _ui_utils.TextLayerMode.ENABLE;
    this.#annotationMode = options.annotationMode ?? _pdfjsLib.AnnotationMode.ENABLE_FORMS;
    this.imageResourcesPath = options.imageResourcesPath || "";
    this.enablePrintAutoRotate = options.enablePrintAutoRotate || false;
    this.renderer = options.renderer || _ui_utils.RendererType.CANVAS;
    this.useOnlyCssZoom = options.useOnlyCssZoom || false;
    this.maxCanvasPixels = options.maxCanvasPixels;
    this.l10n = options.l10n || _l10n_utils.NullL10n;
    this.#enablePermissions = options.enablePermissions || false;
    this.pageColors = options.pageColors || null;

    if (options.pageColors && (!CSS.supports("color", options.pageColors.background) || !CSS.supports("color", options.pageColors.foreground))) {
      if (options.pageColors.background || options.pageColors.foreground) {
        console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used.");
      }

      this.pageColors = null;
    }

    this.defaultRenderingQueue = !options.renderingQueue;

    if (this.defaultRenderingQueue) {
      this.renderingQueue = new _pdf_rendering_queue.PDFRenderingQueue();
      this.renderingQueue.setViewer(this);
    } else {
      this.renderingQueue = options.renderingQueue;
    }

    this._doc = document.documentElement;
    this.scroll = (0, _ui_utils.watchScroll)(this.container, this._scrollUpdate.bind(this));
    this.presentationModeState = _ui_utils.PresentationModeState.UNKNOWN;
    this._onBeforeDraw = this._onAfterDraw = null;

    this._resetView();

    if (this.removePageBorders) {
      this.viewer.classList.add("removePageBorders");
    }

    this.updateContainerHeightCss();
    Promise.resolve().then(() => {
      this.eventBus.dispatch("baseviewerinit", {
        source: this
      });
    });
  }

  get pagesCount() {
    return this._pages.length;
  }

  getPageView(index) {
    return this._pages[index];
  }

  get pageViewsReady() {
    if (!this._pagesCapability.settled) {
      return false;
    }

    return this._pages.every(function (pageView) {
      return pageView?.pdfPage;
    });
  }

  get renderForms() {
    return this.#annotationMode === _pdfjsLib.AnnotationMode.ENABLE_FORMS;
  }

  get enableScripting() {
    return !!this._scriptingManager;
  }

  get currentPageNumber() {
    return this._currentPageNumber;
  }

  set currentPageNumber(val) {
    if (!Number.isInteger(val)) {
      throw new Error("Invalid page number.");
    }

    if (!this.pdfDocument) {
      return;
    }

    if (!this._setCurrentPageNumber(val, true)) {
      console.error(`currentPageNumber: "${val}" is not a valid page.`);
    }
  }

  _setCurrentPageNumber(val, resetCurrentPageView = false) {
    if (this._currentPageNumber === val) {
      if (resetCurrentPageView) {
        this.#resetCurrentPageView();
      }

      return true;
    }

    if (!(0 < val && val <= this.pagesCount)) {
      return false;
    }

    const previous = this._currentPageNumber;
    this._currentPageNumber = val;
    this.eventBus.dispatch("pagechanging", {
      source: this,
      pageNumber: val,
      pageLabel: this._pageLabels?.[val - 1] ?? null,
      previous
    });

    if (resetCurrentPageView) {
      this.#resetCurrentPageView();
    }

    return true;
  }

  get currentPageLabel() {
    return this._pageLabels?.[this._currentPageNumber - 1] ?? null;
  }

  set currentPageLabel(val) {
    if (!this.pdfDocument) {
      return;
    }

    let page = val | 0;

    if (this._pageLabels) {
      const i = this._pageLabels.indexOf(val);

      if (i >= 0) {
        page = i + 1;
      }
    }

    if (!this._setCurrentPageNumber(page, true)) {
      console.error(`currentPageLabel: "${val}" is not a valid page.`);
    }
  }

  get currentScale() {
    return this._currentScale !== _ui_utils.UNKNOWN_SCALE ? this._currentScale : _ui_utils.DEFAULT_SCALE;
  }

  set currentScale(val) {
    if (isNaN(val)) {
      throw new Error("Invalid numeric scale.");
    }

    if (!this.pdfDocument) {
      return;
    }

    this._setScale(val, false);
  }

  get currentScaleValue() {
    return this._currentScaleValue;
  }

  set currentScaleValue(val) {
    if (!this.pdfDocument) {
      return;
    }

    this._setScale(val, false);
  }

  get pagesRotation() {
    return this._pagesRotation;
  }

  set pagesRotation(rotation) {
    if (!(0, _ui_utils.isValidRotation)(rotation)) {
      throw new Error("Invalid pages rotation angle.");
    }

    if (!this.pdfDocument) {
      return;
    }

    rotation %= 360;

    if (rotation < 0) {
      rotation += 360;
    }

    if (this._pagesRotation === rotation) {
      return;
    }

    this._pagesRotation = rotation;
    const pageNumber = this._currentPageNumber;
    const updateArgs = {
      rotation
    };

    for (const pageView of this._pages) {
      pageView.update(updateArgs);
    }

    if (this._currentScaleValue) {
      this._setScale(this._currentScaleValue, true);
    }

    this.eventBus.dispatch("rotationchanging", {
      source: this,
      pagesRotation: rotation,
      pageNumber
    });

    if (this.defaultRenderingQueue) {
      this.update();
    }
  }

  get firstPagePromise() {
    return this.pdfDocument ? this._firstPageCapability.promise : null;
  }

  get onePageRendered() {
    return this.pdfDocument ? this._onePageRenderedCapability.promise : null;
  }

  get pagesPromise() {
    return this.pdfDocument ? this._pagesCapability.promise : null;
  }

  #initializePermissions(permissions) {
    if (!permissions) {
      return;
    }

    if (!permissions.includes(_pdfjsLib.PermissionFlag.COPY)) {
      this.viewer.classList.add(ENABLE_PERMISSIONS_CLASS);
    }

    if (!permissions.includes(_pdfjsLib.PermissionFlag.MODIFY_ANNOTATIONS) && !permissions.includes(_pdfjsLib.PermissionFlag.FILL_INTERACTIVE_FORMS)) {
      if (this.#annotationMode === _pdfjsLib.AnnotationMode.ENABLE_FORMS) {
        this.#previousAnnotationMode = this.#annotationMode;
        this.#annotationMode = _pdfjsLib.AnnotationMode.ENABLE;
      }
    }
  }

  #onePageRenderedOrForceFetch() {
    if (document.visibilityState === "hidden" || !this.container.offsetParent || this._getVisiblePages().views.length === 0) {
      return Promise.resolve();
    }

    const visibilityChangePromise = new Promise(resolve => {
      this.#onVisibilityChange = () => {
        if (document.visibilityState !== "hidden") {
          return;
        }

        resolve();
        document.removeEventListener("visibilitychange", this.#onVisibilityChange);
        this.#onVisibilityChange = null;
      };

      document.addEventListener("visibilitychange", this.#onVisibilityChange);
    });
    return Promise.race([this._onePageRenderedCapability.promise, visibilityChangePromise]);
  }

  setDocument(pdfDocument) {
    if (this.pdfDocument) {
      this.eventBus.dispatch("pagesdestroy", {
        source: this
      });

      this._cancelRendering();

      this._resetView();

      if (this.findController) {
        this.findController.setDocument(null);
      }

      if (this._scriptingManager) {
        this._scriptingManager.setDocument(null);
      }
    }

    this.pdfDocument = pdfDocument;

    if (!pdfDocument) {
      return;
    }

    const isPureXfa = pdfDocument.isPureXfa;
    const pagesCount = pdfDocument.numPages;
    const firstPagePromise = pdfDocument.getPage(1);
    const optionalContentConfigPromise = pdfDocument.getOptionalContentConfig();
    const permissionsPromise = this.#enablePermissions ? pdfDocument.getPermissions() : Promise.resolve();

    if (pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {
      console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");
      const mode = this._scrollMode = _ui_utils.ScrollMode.PAGE;
      this.eventBus.dispatch("scrollmodechanged", {
        source: this,
        mode
      });
    }

    this._pagesCapability.promise.then(() => {
      this.eventBus.dispatch("pagesloaded", {
        source: this,
        pagesCount
      });
    }, () => {});

    this._onBeforeDraw = evt => {
      const pageView = this._pages[evt.pageNumber - 1];

      if (!pageView) {
        return;
      }

      this.#buffer.push(pageView);
    };

    this.eventBus._on("pagerender", this._onBeforeDraw);

    this._onAfterDraw = evt => {
      if (evt.cssTransform || this._onePageRenderedCapability.settled) {
        return;
      }

      this._onePageRenderedCapability.resolve({
        timestamp: evt.timestamp
      });

      this.eventBus._off("pagerendered", this._onAfterDraw);

      this._onAfterDraw = null;

      if (this.#onVisibilityChange) {
        document.removeEventListener("visibilitychange", this.#onVisibilityChange);
        this.#onVisibilityChange = null;
      }
    };

    this.eventBus._on("pagerendered", this._onAfterDraw);

    Promise.all([firstPagePromise, permissionsPromise]).then(([firstPdfPage, permissions]) => {
      if (pdfDocument !== this.pdfDocument) {
        return;
      }

      this._firstPageCapability.resolve(firstPdfPage);

      this._optionalContentConfigPromise = optionalContentConfigPromise;
      this.#initializePermissions(permissions);
      const viewerElement = this._scrollMode === _ui_utils.ScrollMode.PAGE ? null : this.viewer;
      const scale = this.currentScale;
      const viewport = firstPdfPage.getViewport({
        scale: scale * _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS
      });
      const textLayerFactory = this.textLayerMode !== _ui_utils.TextLayerMode.DISABLE && !isPureXfa ? this : null;
      const annotationLayerFactory = this.#annotationMode !== _pdfjsLib.AnnotationMode.DISABLE ? this : null;
      const xfaLayerFactory = isPureXfa ? this : null;

      for (let pageNum = 1; pageNum <= pagesCount; ++pageNum) {
        const pageView = new _pdf_page_view.PDFPageView({
          container: viewerElement,
          eventBus: this.eventBus,
          id: pageNum,
          scale,
          defaultViewport: viewport.clone(),
          optionalContentConfigPromise,
          renderingQueue: this.renderingQueue,
          textLayerFactory,
          textLayerMode: this.textLayerMode,
          annotationLayerFactory,
          annotationMode: this.#annotationMode,
          xfaLayerFactory,
          textHighlighterFactory: this,
          structTreeLayerFactory: this,
          imageResourcesPath: this.imageResourcesPath,
          renderer: this.renderer,
          useOnlyCssZoom: this.useOnlyCssZoom,
          maxCanvasPixels: this.maxCanvasPixels,
          pageColors: this.pageColors,
          l10n: this.l10n
        });

        this._pages.push(pageView);
      }

      const firstPageView = this._pages[0];

      if (firstPageView) {
        firstPageView.setPdfPage(firstPdfPage);
        this.linkService.cachePageRef(1, firstPdfPage.ref);
      }

      if (this._scrollMode === _ui_utils.ScrollMode.PAGE) {
        this.#ensurePageViewVisible();
      } else if (this._spreadMode !== _ui_utils.SpreadMode.NONE) {
        this._updateSpreadMode();
      }

      this.#onePageRenderedOrForceFetch().then(async () => {
        if (this.findController) {
          this.findController.setDocument(pdfDocument);
        }

        if (this._scriptingManager) {
          this._scriptingManager.setDocument(pdfDocument);
        }

        if (pdfDocument.loadingParams.disableAutoFetch || pagesCount > PagesCountLimit.FORCE_LAZY_PAGE_INIT) {
          this._pagesCapability.resolve();

          return;
        }

        let getPagesLeft = pagesCount - 1;

        if (getPagesLeft <= 0) {
          this._pagesCapability.resolve();

          return;
        }

        for (let pageNum = 2; pageNum <= pagesCount; ++pageNum) {
          const promise = pdfDocument.getPage(pageNum).then(pdfPage => {
            const pageView = this._pages[pageNum - 1];

            if (!pageView.pdfPage) {
              pageView.setPdfPage(pdfPage);
            }

            this.linkService.cachePageRef(pageNum, pdfPage.ref);

            if (--getPagesLeft === 0) {
              this._pagesCapability.resolve();
            }
          }, reason => {
            console.error(`Unable to get page ${pageNum} to initialize viewer`, reason);

            if (--getPagesLeft === 0) {
              this._pagesCapability.resolve();
            }
          });

          if (pageNum % PagesCountLimit.PAUSE_EAGER_PAGE_INIT === 0) {
            await promise;
          }
        }
      });
      this.eventBus.dispatch("pagesinit", {
        source: this
      });
      pdfDocument.getMetadata().then(({
        info
      }) => {
        if (pdfDocument !== this.pdfDocument) {
          return;
        }

        if (info.Language) {
          this.viewer.lang = info.Language;
        }
      });

      if (this.defaultRenderingQueue) {
        this.update();
      }
    }).catch(reason => {
      console.error("Unable to initialize viewer", reason);

      this._pagesCapability.reject(reason);
    });
  }

  setPageLabels(labels) {
    if (!this.pdfDocument) {
      return;
    }

    if (!labels) {
      this._pageLabels = null;
    } else if (!(Array.isArray(labels) && this.pdfDocument.numPages === labels.length)) {
      this._pageLabels = null;
      console.error(`setPageLabels: Invalid page labels.`);
    } else {
      this._pageLabels = labels;
    }

    for (let i = 0, ii = this._pages.length; i < ii; i++) {
      this._pages[i].setPageLabel(this._pageLabels?.[i] ?? null);
    }
  }

  _resetView() {
    this._pages = [];
    this._currentPageNumber = 1;
    this._currentScale = _ui_utils.UNKNOWN_SCALE;
    this._currentScaleValue = null;
    this._pageLabels = null;
    this.#buffer = new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);
    this._location = null;
    this._pagesRotation = 0;
    this._optionalContentConfigPromise = null;
    this._firstPageCapability = (0, _pdfjsLib.createPromiseCapability)();
    this._onePageRenderedCapability = (0, _pdfjsLib.createPromiseCapability)();
    this._pagesCapability = (0, _pdfjsLib.createPromiseCapability)();
    this._scrollMode = _ui_utils.ScrollMode.VERTICAL;
    this._previousScrollMode = _ui_utils.ScrollMode.UNKNOWN;
    this._spreadMode = _ui_utils.SpreadMode.NONE;
    this.#scrollModePageState = {
      previousPageNumber: 1,
      scrollDown: true,
      pages: []
    };

    if (this._onBeforeDraw) {
      this.eventBus._off("pagerender", this._onBeforeDraw);

      this._onBeforeDraw = null;
    }

    if (this._onAfterDraw) {
      this.eventBus._off("pagerendered", this._onAfterDraw);

      this._onAfterDraw = null;
    }

    if (this.#onVisibilityChange) {
      document.removeEventListener("visibilitychange", this.#onVisibilityChange);
      this.#onVisibilityChange = null;
    }

    this.viewer.textContent = "";

    this._updateScrollMode();

    this.viewer.removeAttribute("lang");
    this.viewer.classList.remove(ENABLE_PERMISSIONS_CLASS);

    if (this.#previousAnnotationMode !== null) {
      this.#annotationMode = this.#previousAnnotationMode;
      this.#previousAnnotationMode = null;
    }
  }

  #ensurePageViewVisible() {
    if (this._scrollMode !== _ui_utils.ScrollMode.PAGE) {
      throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");
    }

    const pageNumber = this._currentPageNumber,
          state = this.#scrollModePageState,
          viewer = this.viewer;
    viewer.textContent = "";
    state.pages.length = 0;

    if (this._spreadMode === _ui_utils.SpreadMode.NONE && !this.isInPresentationMode) {
      const pageView = this._pages[pageNumber - 1];
      viewer.appendChild(pageView.div);
      state.pages.push(pageView);
    } else {
      const pageIndexSet = new Set(),
            parity = this._spreadMode - 1;

      if (parity === -1) {
        pageIndexSet.add(pageNumber - 1);
      } else if (pageNumber % 2 !== parity) {
        pageIndexSet.add(pageNumber - 1);
        pageIndexSet.add(pageNumber);
      } else {
        pageIndexSet.add(pageNumber - 2);
        pageIndexSet.add(pageNumber - 1);
      }

      const spread = document.createElement("div");
      spread.className = "spread";

      if (this.isInPresentationMode) {
        const dummyPage = document.createElement("div");
        dummyPage.className = "dummyPage";
        spread.appendChild(dummyPage);
      }

      for (const i of pageIndexSet) {
        const pageView = this._pages[i];

        if (!pageView) {
          continue;
        }

        spread.appendChild(pageView.div);
        state.pages.push(pageView);
      }

      viewer.appendChild(spread);
    }

    state.scrollDown = pageNumber >= state.previousPageNumber;
    state.previousPageNumber = pageNumber;
  }

  _scrollUpdate() {
    if (this.pagesCount === 0) {
      return;
    }

    this.update();
  }

  #scrollIntoView(pageView, pageSpot = null) {
    const {
      div,
      id
    } = pageView;

    if (this._scrollMode === _ui_utils.ScrollMode.PAGE) {
      this._setCurrentPageNumber(id);

      this.#ensurePageViewVisible();
      this.update();
    }

    if (!pageSpot && !this.isInPresentationMode) {
      const left = div.offsetLeft + div.clientLeft,
            right = left + div.clientWidth;
      const {
        scrollLeft,
        clientWidth
      } = this.container;

      if (this._scrollMode === _ui_utils.ScrollMode.HORIZONTAL || left < scrollLeft || right > scrollLeft + clientWidth) {
        pageSpot = {
          left: 0,
          top: 0
        };
      }
    }

    (0, _ui_utils.scrollIntoView)(div, pageSpot);
  }

  #isSameScale(newScale) {
    return newScale === this._currentScale || Math.abs(newScale - this._currentScale) < 1e-15;
  }

  _setScaleUpdatePages(newScale, newValue, noScroll = false, preset = false) {
    this._currentScaleValue = newValue.toString();

    if (this.#isSameScale(newScale)) {
      if (preset) {
        this.eventBus.dispatch("scalechanging", {
          source: this,
          scale: newScale,
          presetValue: newValue
        });
      }

      return;
    }

    this._doc.style.setProperty("--zoom-factor", newScale);

    const updateArgs = {
      scale: newScale
    };

    for (const pageView of this._pages) {
      pageView.update(updateArgs);
    }

    this._currentScale = newScale;

    if (!noScroll) {
      let page = this._currentPageNumber,
          dest;

      if (this._location && !(this.isInPresentationMode || this.isChangingPresentationMode)) {
        page = this._location.pageNumber;
        dest = [null, {
          name: "XYZ"
        }, this._location.left, this._location.top, null];
      }

      this.scrollPageIntoView({
        pageNumber: page,
        destArray: dest,
        allowNegativeOffset: true
      });
    }

    this.eventBus.dispatch("scalechanging", {
      source: this,
      scale: newScale,
      presetValue: preset ? newValue : undefined
    });

    if (this.defaultRenderingQueue) {
      this.update();
    }

    this.updateContainerHeightCss();
  }

  get _pageWidthScaleFactor() {
    if (this._spreadMode !== _ui_utils.SpreadMode.NONE && this._scrollMode !== _ui_utils.ScrollMode.HORIZONTAL) {
      return 2;
    }

    return 1;
  }

  _setScale(value, noScroll = false) {
    let scale = parseFloat(value);

    if (scale > 0) {
      this._setScaleUpdatePages(scale, value, noScroll, false);
    } else {
      const currentPage = this._pages[this._currentPageNumber - 1];

      if (!currentPage) {
        return;
      }

      let hPadding = _ui_utils.SCROLLBAR_PADDING,
          vPadding = _ui_utils.VERTICAL_PADDING;

      if (this.isInPresentationMode) {
        hPadding = vPadding = 4;
      } else if (this.removePageBorders) {
        hPadding = vPadding = 0;
      } else if (this._scrollMode === _ui_utils.ScrollMode.HORIZONTAL) {
        [hPadding, vPadding] = [vPadding, hPadding];
      }

      const pageWidthScale = (this.container.clientWidth - hPadding) / currentPage.width * currentPage.scale / this._pageWidthScaleFactor;
      const pageHeightScale = (this.container.clientHeight - vPadding) / currentPage.height * currentPage.scale;

      switch (value) {
        case "page-actual":
          scale = 1;
          break;

        case "page-width":
          scale = pageWidthScale;
          break;

        case "page-height":
          scale = pageHeightScale;
          break;

        case "page-fit":
          scale = Math.min(pageWidthScale, pageHeightScale);
          break;

        case "auto":
          const horizontalScale = (0, _ui_utils.isPortraitOrientation)(currentPage) ? pageWidthScale : Math.min(pageHeightScale, pageWidthScale);
          scale = Math.min(_ui_utils.MAX_AUTO_SCALE, horizontalScale);
          break;

        default:
          console.error(`_setScale: "${value}" is an unknown zoom value.`);
          return;
      }

      this._setScaleUpdatePages(scale, value, noScroll, true);
    }
  }

  #resetCurrentPageView() {
    const pageView = this._pages[this._currentPageNumber - 1];

    if (this.isInPresentationMode) {
      this._setScale(this._currentScaleValue, true);
    }

    this.#scrollIntoView(pageView);
  }

  pageLabelToPageNumber(label) {
    if (!this._pageLabels) {
      return null;
    }

    const i = this._pageLabels.indexOf(label);

    if (i < 0) {
      return null;
    }

    return i + 1;
  }

  scrollPageIntoView({
    pageNumber,
    destArray = null,
    allowNegativeOffset = false,
    ignoreDestinationZoom = false
  }) {
    if (!this.pdfDocument) {
      return;
    }

    const pageView = Number.isInteger(pageNumber) && this._pages[pageNumber - 1];

    if (!pageView) {
      console.error(`scrollPageIntoView: "${pageNumber}" is not a valid pageNumber parameter.`);
      return;
    }

    if (this.isInPresentationMode || !destArray) {
      this._setCurrentPageNumber(pageNumber, true);

      return;
    }

    let x = 0,
        y = 0;
    let width = 0,
        height = 0,
        widthScale,
        heightScale;
    const changeOrientation = pageView.rotation % 180 !== 0;
    const pageWidth = (changeOrientation ? pageView.height : pageView.width) / pageView.scale / _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;
    const pageHeight = (changeOrientation ? pageView.width : pageView.height) / pageView.scale / _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;
    let scale = 0;

    switch (destArray[1].name) {
      case "XYZ":
        x = destArray[2];
        y = destArray[3];
        scale = destArray[4];
        x = x !== null ? x : 0;
        y = y !== null ? y : pageHeight;
        break;

      case "Fit":
      case "FitB":
        scale = "page-fit";
        break;

      case "FitH":
      case "FitBH":
        y = destArray[2];
        scale = "page-width";

        if (y === null && this._location) {
          x = this._location.left;
          y = this._location.top;
        } else if (typeof y !== "number" || y < 0) {
          y = pageHeight;
        }

        break;

      case "FitV":
      case "FitBV":
        x = destArray[2];
        width = pageWidth;
        height = pageHeight;
        scale = "page-height";
        break;

      case "FitR":
        x = destArray[2];
        y = destArray[3];
        width = destArray[4] - x;
        height = destArray[5] - y;
        const hPadding = this.removePageBorders ? 0 : _ui_utils.SCROLLBAR_PADDING;
        const vPadding = this.removePageBorders ? 0 : _ui_utils.VERTICAL_PADDING;
        widthScale = (this.container.clientWidth - hPadding) / width / _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;
        heightScale = (this.container.clientHeight - vPadding) / height / _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;
        scale = Math.min(Math.abs(widthScale), Math.abs(heightScale));
        break;

      default:
        console.error(`scrollPageIntoView: "${destArray[1].name}" is not a valid destination type.`);
        return;
    }

    if (!ignoreDestinationZoom) {
      if (scale && scale !== this._currentScale) {
        this.currentScaleValue = scale;
      } else if (this._currentScale === _ui_utils.UNKNOWN_SCALE) {
        this.currentScaleValue = _ui_utils.DEFAULT_SCALE_VALUE;
      }
    }

    if (scale === "page-fit" && !destArray[4]) {
      this.#scrollIntoView(pageView);
      return;
    }

    const boundingRect = [pageView.viewport.convertToViewportPoint(x, y), pageView.viewport.convertToViewportPoint(x + width, y + height)];
    let left = Math.min(boundingRect[0][0], boundingRect[1][0]);
    let top = Math.min(boundingRect[0][1], boundingRect[1][1]);

    if (!allowNegativeOffset) {
      left = Math.max(left, 0);
      top = Math.max(top, 0);
    }

    this.#scrollIntoView(pageView, {
      left,
      top
    });
  }

  _updateLocation(firstPage) {
    const currentScale = this._currentScale;
    const currentScaleValue = this._currentScaleValue;
    const normalizedScaleValue = parseFloat(currentScaleValue) === currentScale ? Math.round(currentScale * 10000) / 100 : currentScaleValue;
    const pageNumber = firstPage.id;
    const currentPageView = this._pages[pageNumber - 1];
    const container = this.container;
    const topLeft = currentPageView.getPagePoint(container.scrollLeft - firstPage.x, container.scrollTop - firstPage.y);
    const intLeft = Math.round(topLeft[0]);
    const intTop = Math.round(topLeft[1]);
    let pdfOpenParams = `#page=${pageNumber}`;

    if (!this.isInPresentationMode) {
      pdfOpenParams += `&zoom=${normalizedScaleValue},${intLeft},${intTop}`;
    }

    this._location = {
      pageNumber,
      scale: normalizedScaleValue,
      top: intTop,
      left: intLeft,
      rotation: this._pagesRotation,
      pdfOpenParams
    };
  }

  update() {
    const visible = this._getVisiblePages();

    const visiblePages = visible.views,
          numVisiblePages = visiblePages.length;

    if (numVisiblePages === 0) {
      return;
    }

    const newCacheSize = Math.max(DEFAULT_CACHE_SIZE, 2 * numVisiblePages + 1);
    this.#buffer.resize(newCacheSize, visible.ids);
    this.renderingQueue.renderHighestPriority(visible);
    const isSimpleLayout = this._spreadMode === _ui_utils.SpreadMode.NONE && (this._scrollMode === _ui_utils.ScrollMode.PAGE || this._scrollMode === _ui_utils.ScrollMode.VERTICAL);
    const currentId = this._currentPageNumber;
    let stillFullyVisible = false;

    for (const page of visiblePages) {
      if (page.percent < 100) {
        break;
      }

      if (page.id === currentId && isSimpleLayout) {
        stillFullyVisible = true;
        break;
      }
    }

    this._setCurrentPageNumber(stillFullyVisible ? currentId : visiblePages[0].id);

    this._updateLocation(visible.first);

    this.eventBus.dispatch("updateviewarea", {
      source: this,
      location: this._location
    });
  }

  containsElement(element) {
    return this.container.contains(element);
  }

  focus() {
    this.container.focus();
  }

  get _isContainerRtl() {
    return getComputedStyle(this.container).direction === "rtl";
  }

  get isInPresentationMode() {
    return this.presentationModeState === _ui_utils.PresentationModeState.FULLSCREEN;
  }

  get isChangingPresentationMode() {
    return this.presentationModeState === _ui_utils.PresentationModeState.CHANGING;
  }

  get isHorizontalScrollbarEnabled() {
    return this.isInPresentationMode ? false : this.container.scrollWidth > this.container.clientWidth;
  }

  get isVerticalScrollbarEnabled() {
    return this.isInPresentationMode ? false : this.container.scrollHeight > this.container.clientHeight;
  }

  _getVisiblePages() {
    const views = this._scrollMode === _ui_utils.ScrollMode.PAGE ? this.#scrollModePageState.pages : this._pages,
          horizontal = this._scrollMode === _ui_utils.ScrollMode.HORIZONTAL,
          rtl = horizontal && this._isContainerRtl;
    return (0, _ui_utils.getVisibleElements)({
      scrollEl: this.container,
      views,
      sortByVisibility: true,
      horizontal,
      rtl
    });
  }

  isPageVisible(pageNumber) {
    if (!this.pdfDocument) {
      return false;
    }

    if (!(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.pagesCount)) {
      console.error(`isPageVisible: "${pageNumber}" is not a valid page.`);
      return false;
    }

    return this._getVisiblePages().ids.has(pageNumber);
  }

  isPageCached(pageNumber) {
    if (!this.pdfDocument) {
      return false;
    }

    if (!(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.pagesCount)) {
      console.error(`isPageCached: "${pageNumber}" is not a valid page.`);
      return false;
    }

    const pageView = this._pages[pageNumber - 1];
    return this.#buffer.has(pageView);
  }

  cleanup() {
    for (const pageView of this._pages) {
      if (pageView.renderingState !== _ui_utils.RenderingStates.FINISHED) {
        pageView.reset();
      }
    }
  }

  _cancelRendering() {
    for (const pageView of this._pages) {
      pageView.cancelRendering();
    }
  }

  async #ensurePdfPageLoaded(pageView) {
    if (pageView.pdfPage) {
      return pageView.pdfPage;
    }

    try {
      const pdfPage = await this.pdfDocument.getPage(pageView.id);

      if (!pageView.pdfPage) {
        pageView.setPdfPage(pdfPage);
      }

      if (!this.linkService._cachedPageNumber?.(pdfPage.ref)) {
        this.linkService.cachePageRef(pageView.id, pdfPage.ref);
      }

      return pdfPage;
    } catch (reason) {
      console.error("Unable to get page for page view", reason);
      return null;
    }
  }

  #getScrollAhead(visible) {
    if (visible.first?.id === 1) {
      return true;
    } else if (visible.last?.id === this.pagesCount) {
      return false;
    }

    switch (this._scrollMode) {
      case _ui_utils.ScrollMode.PAGE:
        return this.#scrollModePageState.scrollDown;

      case _ui_utils.ScrollMode.HORIZONTAL:
        return this.scroll.right;
    }

    return this.scroll.down;
  }

  #toggleLoadingIconSpinner(visibleIds) {
    for (const id of visibleIds) {
      const pageView = this._pages[id - 1];
      pageView?.toggleLoadingIconSpinner(true);
    }

    for (const pageView of this.#buffer) {
      if (visibleIds.has(pageView.id)) {
        continue;
      }

      pageView.toggleLoadingIconSpinner(false);
    }
  }

  forceRendering(currentlyVisiblePages) {
    const visiblePages = currentlyVisiblePages || this._getVisiblePages();

    const scrollAhead = this.#getScrollAhead(visiblePages);
    const preRenderExtra = this._spreadMode !== _ui_utils.SpreadMode.NONE && this._scrollMode !== _ui_utils.ScrollMode.HORIZONTAL;
    const pageView = this.renderingQueue.getHighestPriority(visiblePages, this._pages, scrollAhead, preRenderExtra);
    this.#toggleLoadingIconSpinner(visiblePages.ids);

    if (pageView) {
      this.#ensurePdfPageLoaded(pageView).then(() => {
        this.renderingQueue.renderView(pageView);
      });
      return true;
    }

    return false;
  }

  createTextLayerBuilder(textLayerDiv, pageIndex, viewport, enhanceTextSelection = false, eventBus, highlighter) {
    return new _text_layer_builder.TextLayerBuilder({
      textLayerDiv,
      eventBus,
      pageIndex,
      viewport,
      enhanceTextSelection: this.isInPresentationMode ? false : enhanceTextSelection,
      highlighter
    });
  }

  createTextHighlighter(pageIndex, eventBus) {
    return new _text_highlighter.TextHighlighter({
      eventBus,
      pageIndex,
      findController: this.isInPresentationMode ? null : this.findController
    });
  }

  createAnnotationLayerBuilder(pageDiv, pdfPage, annotationStorage = null, imageResourcesPath = "", renderForms = true, l10n = _l10n_utils.NullL10n, enableScripting = null, hasJSActionsPromise = null, mouseState = null, fieldObjectsPromise = null, annotationCanvasMap = null) {
    return new _annotation_layer_builder.AnnotationLayerBuilder({
      pageDiv,
      pdfPage,
      annotationStorage: annotationStorage || this.pdfDocument?.annotationStorage,
      imageResourcesPath,
      renderForms,
      linkService: this.linkService,
      downloadManager: this.downloadManager,
      l10n,
      enableScripting: enableScripting ?? this.enableScripting,
      hasJSActionsPromise: hasJSActionsPromise || this.pdfDocument?.hasJSActions(),
      fieldObjectsPromise: fieldObjectsPromise || this.pdfDocument?.getFieldObjects(),
      mouseState: mouseState || this._scriptingManager?.mouseState,
      annotationCanvasMap
    });
  }

  createXfaLayerBuilder(pageDiv, pdfPage, annotationStorage = null) {
    return new _xfa_layer_builder.XfaLayerBuilder({
      pageDiv,
      pdfPage,
      annotationStorage: annotationStorage || this.pdfDocument?.annotationStorage,
      linkService: this.linkService
    });
  }

  createStructTreeLayerBuilder(pdfPage) {
    return new _struct_tree_layer_builder.StructTreeLayerBuilder({
      pdfPage
    });
  }

  get hasEqualPageSizes() {
    const firstPageView = this._pages[0];

    for (let i = 1, ii = this._pages.length; i < ii; ++i) {
      const pageView = this._pages[i];

      if (pageView.width !== firstPageView.width || pageView.height !== firstPageView.height) {
        return false;
      }
    }

    return true;
  }

  getPagesOverview() {
    return this._pages.map(pageView => {
      const viewport = pageView.pdfPage.getViewport({
        scale: 1
      });

      if (!this.enablePrintAutoRotate || (0, _ui_utils.isPortraitOrientation)(viewport)) {
        return {
          width: viewport.width,
          height: viewport.height,
          rotation: viewport.rotation
        };
      }

      return {
        width: viewport.height,
        height: viewport.width,
        rotation: (viewport.rotation - 90) % 360
      };
    });
  }

  get optionalContentConfigPromise() {
    if (!this.pdfDocument) {
      return Promise.resolve(null);
    }

    if (!this._optionalContentConfigPromise) {
      return this.pdfDocument.getOptionalContentConfig();
    }

    return this._optionalContentConfigPromise;
  }

  set optionalContentConfigPromise(promise) {
    if (!(promise instanceof Promise)) {
      throw new Error(`Invalid optionalContentConfigPromise: ${promise}`);
    }

    if (!this.pdfDocument) {
      return;
    }

    if (!this._optionalContentConfigPromise) {
      return;
    }

    this._optionalContentConfigPromise = promise;
    const updateArgs = {
      optionalContentConfigPromise: promise
    };

    for (const pageView of this._pages) {
      pageView.update(updateArgs);
    }

    this.update();
    this.eventBus.dispatch("optionalcontentconfigchanged", {
      source: this,
      promise
    });
  }

  get scrollMode() {
    return this._scrollMode;
  }

  set scrollMode(mode) {
    if (this._scrollMode === mode) {
      return;
    }

    if (!(0, _ui_utils.isValidScrollMode)(mode)) {
      throw new Error(`Invalid scroll mode: ${mode}`);
    }

    if (this.pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {
      return;
    }

    this._previousScrollMode = this._scrollMode;
    this._scrollMode = mode;
    this.eventBus.dispatch("scrollmodechanged", {
      source: this,
      mode
    });

    this._updateScrollMode(this._currentPageNumber);
  }

  _updateScrollMode(pageNumber = null) {
    const scrollMode = this._scrollMode,
          viewer = this.viewer;
    viewer.classList.toggle("scrollHorizontal", scrollMode === _ui_utils.ScrollMode.HORIZONTAL);
    viewer.classList.toggle("scrollWrapped", scrollMode === _ui_utils.ScrollMode.WRAPPED);

    if (!this.pdfDocument || !pageNumber) {
      return;
    }

    if (scrollMode === _ui_utils.ScrollMode.PAGE) {
      this.#ensurePageViewVisible();
    } else if (this._previousScrollMode === _ui_utils.ScrollMode.PAGE) {
      this._updateSpreadMode();
    }

    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {
      this._setScale(this._currentScaleValue, true);
    }

    this._setCurrentPageNumber(pageNumber, true);

    this.update();
  }

  get spreadMode() {
    return this._spreadMode;
  }

  set spreadMode(mode) {
    if (this._spreadMode === mode) {
      return;
    }

    if (!(0, _ui_utils.isValidSpreadMode)(mode)) {
      throw new Error(`Invalid spread mode: ${mode}`);
    }

    this._spreadMode = mode;
    this.eventBus.dispatch("spreadmodechanged", {
      source: this,
      mode
    });

    this._updateSpreadMode(this._currentPageNumber);
  }

  _updateSpreadMode(pageNumber = null) {
    if (!this.pdfDocument) {
      return;
    }

    const viewer = this.viewer,
          pages = this._pages;

    if (this._scrollMode === _ui_utils.ScrollMode.PAGE) {
      this.#ensurePageViewVisible();
    } else {
      viewer.textContent = "";

      if (this._spreadMode === _ui_utils.SpreadMode.NONE) {
        for (const pageView of this._pages) {
          viewer.appendChild(pageView.div);
        }
      } else {
        const parity = this._spreadMode - 1;
        let spread = null;

        for (let i = 0, ii = pages.length; i < ii; ++i) {
          if (spread === null) {
            spread = document.createElement("div");
            spread.className = "spread";
            viewer.appendChild(spread);
          } else if (i % 2 === parity) {
            spread = spread.cloneNode(false);
            viewer.appendChild(spread);
          }

          spread.appendChild(pages[i].div);
        }
      }
    }

    if (!pageNumber) {
      return;
    }

    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {
      this._setScale(this._currentScaleValue, true);
    }

    this._setCurrentPageNumber(pageNumber, true);

    this.update();
  }

  _getPageAdvance(currentPageNumber, previous = false) {
    switch (this._scrollMode) {
      case _ui_utils.ScrollMode.WRAPPED:
        {
          const {
            views
          } = this._getVisiblePages(),
                pageLayout = new Map();

          for (const {
            id,
            y,
            percent,
            widthPercent
          } of views) {
            if (percent === 0 || widthPercent < 100) {
              continue;
            }

            let yArray = pageLayout.get(y);

            if (!yArray) {
              pageLayout.set(y, yArray ||= []);
            }

            yArray.push(id);
          }

          for (const yArray of pageLayout.values()) {
            const currentIndex = yArray.indexOf(currentPageNumber);

            if (currentIndex === -1) {
              continue;
            }

            const numPages = yArray.length;

            if (numPages === 1) {
              break;
            }

            if (previous) {
              for (let i = currentIndex - 1, ii = 0; i >= ii; i--) {
                const currentId = yArray[i],
                      expectedId = yArray[i + 1] - 1;

                if (currentId < expectedId) {
                  return currentPageNumber - expectedId;
                }
              }
            } else {
              for (let i = currentIndex + 1, ii = numPages; i < ii; i++) {
                const currentId = yArray[i],
                      expectedId = yArray[i - 1] + 1;

                if (currentId > expectedId) {
                  return expectedId - currentPageNumber;
                }
              }
            }

            if (previous) {
              const firstId = yArray[0];

              if (firstId < currentPageNumber) {
                return currentPageNumber - firstId + 1;
              }
            } else {
              const lastId = yArray[numPages - 1];

              if (lastId > currentPageNumber) {
                return lastId - currentPageNumber + 1;
              }
            }

            break;
          }

          break;
        }

      case _ui_utils.ScrollMode.HORIZONTAL:
        {
          break;
        }

      case _ui_utils.ScrollMode.PAGE:
      case _ui_utils.ScrollMode.VERTICAL:
        {
          if (this._spreadMode === _ui_utils.SpreadMode.NONE) {
            break;
          }

          const parity = this._spreadMode - 1;

          if (previous && currentPageNumber % 2 !== parity) {
            break;
          } else if (!previous && currentPageNumber % 2 === parity) {
            break;
          }

          const {
            views
          } = this._getVisiblePages(),
                expectedId = previous ? currentPageNumber - 1 : currentPageNumber + 1;

          for (const {
            id,
            percent,
            widthPercent
          } of views) {
            if (id !== expectedId) {
              continue;
            }

            if (percent > 0 && widthPercent === 100) {
              return 2;
            }

            break;
          }

          break;
        }
    }

    return 1;
  }

  nextPage() {
    const currentPageNumber = this._currentPageNumber,
          pagesCount = this.pagesCount;

    if (currentPageNumber >= pagesCount) {
      return false;
    }

    const advance = this._getPageAdvance(currentPageNumber, false) || 1;
    this.currentPageNumber = Math.min(currentPageNumber + advance, pagesCount);
    return true;
  }

  previousPage() {
    const currentPageNumber = this._currentPageNumber;

    if (currentPageNumber <= 1) {
      return false;
    }

    const advance = this._getPageAdvance(currentPageNumber, true) || 1;
    this.currentPageNumber = Math.max(currentPageNumber - advance, 1);
    return true;
  }

  increaseScale(steps = 1) {
    let newScale = this._currentScale;

    do {
      newScale = (newScale * _ui_utils.DEFAULT_SCALE_DELTA).toFixed(2);
      newScale = Math.ceil(newScale * 10) / 10;
      newScale = Math.min(_ui_utils.MAX_SCALE, newScale);
    } while (--steps > 0 && newScale < _ui_utils.MAX_SCALE);

    this.currentScaleValue = newScale;
  }

  decreaseScale(steps = 1) {
    let newScale = this._currentScale;

    do {
      newScale = (newScale / _ui_utils.DEFAULT_SCALE_DELTA).toFixed(2);
      newScale = Math.floor(newScale * 10) / 10;
      newScale = Math.max(_ui_utils.MIN_SCALE, newScale);
    } while (--steps > 0 && newScale > _ui_utils.MIN_SCALE);

    this.currentScaleValue = newScale;
  }

  updateContainerHeightCss() {
    const height = this.container.clientHeight;

    if (height !== this.#previousContainerHeight) {
      this.#previousContainerHeight = height;

      this._doc.style.setProperty("--viewer-container-height", `${height}px`);
    }
  }

}

exports.BaseViewer = BaseViewer;

/***/ }),
/* 12 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFPageView = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

var _ui_utils = __w_pdfjs_require__(6);

var _app_options = __w_pdfjs_require__(13);

var _l10n_utils = __w_pdfjs_require__(4);

const MAX_CANVAS_PIXELS = _app_options.compatibilityParams.maxCanvasPixels || 16777216;

class PDFPageView {
  #annotationMode = _pdfjsLib.AnnotationMode.ENABLE_FORMS;

  constructor(options) {
    const container = options.container;
    const defaultViewport = options.defaultViewport;
    this.id = options.id;
    this.renderingId = "page" + this.id;
    this.pdfPage = null;
    this.pageLabel = null;
    this.rotation = 0;
    this.scale = options.scale || _ui_utils.DEFAULT_SCALE;
    this.viewport = defaultViewport;
    this.pdfPageRotate = defaultViewport.rotation;
    this._optionalContentConfigPromise = options.optionalContentConfigPromise || null;
    this.hasRestrictedScaling = false;
    this.textLayerMode = options.textLayerMode ?? _ui_utils.TextLayerMode.ENABLE;
    this.#annotationMode = options.annotationMode ?? _pdfjsLib.AnnotationMode.ENABLE_FORMS;
    this.imageResourcesPath = options.imageResourcesPath || "";
    this.useOnlyCssZoom = options.useOnlyCssZoom || false;
    this.maxCanvasPixels = options.maxCanvasPixels || MAX_CANVAS_PIXELS;
    this.pageColors = options.pageColors || null;
    this.eventBus = options.eventBus;
    this.renderingQueue = options.renderingQueue;
    this.textLayerFactory = options.textLayerFactory;
    this.annotationLayerFactory = options.annotationLayerFactory;
    this.xfaLayerFactory = options.xfaLayerFactory;
    this.textHighlighter = options.textHighlighterFactory?.createTextHighlighter(this.id - 1, this.eventBus);
    this.structTreeLayerFactory = options.structTreeLayerFactory;
    this.renderer = options.renderer || _ui_utils.RendererType.CANVAS;
    this.l10n = options.l10n || _l10n_utils.NullL10n;
    this.paintTask = null;
    this.paintedViewportMap = new WeakMap();
    this.renderingState = _ui_utils.RenderingStates.INITIAL;
    this.resume = null;
    this._renderError = null;
    this._isStandalone = !this.renderingQueue?.hasViewer();
    this._annotationCanvasMap = null;
    this.annotationLayer = null;
    this.textLayer = null;
    this.zoomLayer = null;
    this.xfaLayer = null;
    this.structTreeLayer = null;
    const div = document.createElement("div");
    div.className = "page";
    div.style.width = Math.floor(this.viewport.width) + "px";
    div.style.height = Math.floor(this.viewport.height) + "px";
    div.setAttribute("data-page-number", this.id);
    div.setAttribute("role", "region");
    this.l10n.get("page_landmark", {
      page: this.id
    }).then(msg => {
      div.setAttribute("aria-label", msg);
    });
    this.div = div;
    container?.appendChild(div);
  }

  setPdfPage(pdfPage) {
    this.pdfPage = pdfPage;
    this.pdfPageRotate = pdfPage.rotate;
    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;
    this.viewport = pdfPage.getViewport({
      scale: this.scale * _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,
      rotation: totalRotation
    });
    this.reset();
  }

  destroy() {
    this.reset();

    if (this.pdfPage) {
      this.pdfPage.cleanup();
    }
  }

  async _renderAnnotationLayer() {
    let error = null;

    try {
      await this.annotationLayer.render(this.viewport, "display");
    } catch (ex) {
      error = ex;
    } finally {
      this.eventBus.dispatch("annotationlayerrendered", {
        source: this,
        pageNumber: this.id,
        error
      });
    }
  }

  async _renderXfaLayer() {
    let error = null;

    try {
      const result = await this.xfaLayer.render(this.viewport, "display");

      if (this.textHighlighter) {
        this._buildXfaTextContentItems(result.textDivs);
      }
    } catch (ex) {
      error = ex;
    } finally {
      this.eventBus.dispatch("xfalayerrendered", {
        source: this,
        pageNumber: this.id,
        error
      });
    }
  }

  async _buildXfaTextContentItems(textDivs) {
    const text = await this.pdfPage.getTextContent();
    const items = [];

    for (const item of text.items) {
      items.push(item.str);
    }

    this.textHighlighter.setTextMapping(textDivs, items);
    this.textHighlighter.enable();
  }

  _resetZoomLayer(removeFromDOM = false) {
    if (!this.zoomLayer) {
      return;
    }

    const zoomLayerCanvas = this.zoomLayer.firstChild;
    this.paintedViewportMap.delete(zoomLayerCanvas);
    zoomLayerCanvas.width = 0;
    zoomLayerCanvas.height = 0;

    if (removeFromDOM) {
      this.zoomLayer.remove();
    }

    this.zoomLayer = null;
  }

  reset({
    keepZoomLayer = false,
    keepAnnotationLayer = false,
    keepXfaLayer = false
  } = {}) {
    this.cancelRendering({
      keepAnnotationLayer,
      keepXfaLayer
    });
    this.renderingState = _ui_utils.RenderingStates.INITIAL;
    const div = this.div;
    div.style.width = Math.floor(this.viewport.width) + "px";
    div.style.height = Math.floor(this.viewport.height) + "px";
    const childNodes = div.childNodes,
          zoomLayerNode = keepZoomLayer && this.zoomLayer || null,
          annotationLayerNode = keepAnnotationLayer && this.annotationLayer?.div || null,
          xfaLayerNode = keepXfaLayer && this.xfaLayer?.div || null;

    for (let i = childNodes.length - 1; i >= 0; i--) {
      const node = childNodes[i];

      switch (node) {
        case zoomLayerNode:
        case annotationLayerNode:
        case xfaLayerNode:
          continue;
      }

      node.remove();
    }

    div.removeAttribute("data-loaded");

    if (annotationLayerNode) {
      this.annotationLayer.hide();
    }

    if (xfaLayerNode) {
      this.xfaLayer.hide();
    }

    if (!zoomLayerNode) {
      if (this.canvas) {
        this.paintedViewportMap.delete(this.canvas);
        this.canvas.width = 0;
        this.canvas.height = 0;
        delete this.canvas;
      }

      this._resetZoomLayer();
    }

    if (this.svg) {
      this.paintedViewportMap.delete(this.svg);
      delete this.svg;
    }

    this.loadingIconDiv = document.createElement("div");
    this.loadingIconDiv.className = "loadingIcon notVisible";

    if (this._isStandalone) {
      this.toggleLoadingIconSpinner(true);
    }

    this.loadingIconDiv.setAttribute("role", "img");
    this.l10n.get("loading").then(msg => {
      this.loadingIconDiv?.setAttribute("aria-label", msg);
    });
    div.appendChild(this.loadingIconDiv);
  }

  update({
    scale = 0,
    rotation = null,
    optionalContentConfigPromise = null
  }) {
    this.scale = scale || this.scale;

    if (typeof rotation === "number") {
      this.rotation = rotation;
    }

    if (optionalContentConfigPromise instanceof Promise) {
      this._optionalContentConfigPromise = optionalContentConfigPromise;
    }

    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;
    this.viewport = this.viewport.clone({
      scale: this.scale * _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,
      rotation: totalRotation
    });

    if (this._isStandalone) {
      const {
        style
      } = document.documentElement;
      style.setProperty("--zoom-factor", this.scale);
    }

    if (this.svg) {
      this.cssTransform({
        target: this.svg,
        redrawAnnotationLayer: true,
        redrawXfaLayer: true
      });
      this.eventBus.dispatch("pagerendered", {
        source: this,
        pageNumber: this.id,
        cssTransform: true,
        timestamp: performance.now(),
        error: this._renderError
      });
      return;
    }

    let isScalingRestricted = false;

    if (this.canvas && this.maxCanvasPixels > 0) {
      const outputScale = this.outputScale;

      if ((Math.floor(this.viewport.width) * outputScale.sx | 0) * (Math.floor(this.viewport.height) * outputScale.sy | 0) > this.maxCanvasPixels) {
        isScalingRestricted = true;
      }
    }

    if (this.canvas) {
      if (this.useOnlyCssZoom || this.hasRestrictedScaling && isScalingRestricted) {
        this.cssTransform({
          target: this.canvas,
          redrawAnnotationLayer: true,
          redrawXfaLayer: true
        });
        this.eventBus.dispatch("pagerendered", {
          source: this,
          pageNumber: this.id,
          cssTransform: true,
          timestamp: performance.now(),
          error: this._renderError
        });
        return;
      }

      if (!this.zoomLayer && !this.canvas.hidden) {
        this.zoomLayer = this.canvas.parentNode;
        this.zoomLayer.style.position = "absolute";
      }
    }

    if (this.zoomLayer) {
      this.cssTransform({
        target: this.zoomLayer.firstChild
      });
    }

    this.reset({
      keepZoomLayer: true,
      keepAnnotationLayer: true,
      keepXfaLayer: true
    });
  }

  cancelRendering({
    keepAnnotationLayer = false,
    keepXfaLayer = false
  } = {}) {
    if (this.paintTask) {
      this.paintTask.cancel();
      this.paintTask = null;
    }

    this.resume = null;

    if (this.textLayer) {
      this.textLayer.cancel();
      this.textLayer = null;
    }

    if (this.annotationLayer && (!keepAnnotationLayer || !this.annotationLayer.div)) {
      this.annotationLayer.cancel();
      this.annotationLayer = null;
      this._annotationCanvasMap = null;
    }

    if (this.xfaLayer && (!keepXfaLayer || !this.xfaLayer.div)) {
      this.xfaLayer.cancel();
      this.xfaLayer = null;
      this.textHighlighter?.disable();
    }

    if (this._onTextLayerRendered) {
      this.eventBus._off("textlayerrendered", this._onTextLayerRendered);

      this._onTextLayerRendered = null;
    }
  }

  cssTransform({
    target,
    redrawAnnotationLayer = false,
    redrawXfaLayer = false
  }) {
    const width = this.viewport.width;
    const height = this.viewport.height;
    const div = this.div;
    target.style.width = target.parentNode.style.width = div.style.width = Math.floor(width) + "px";
    target.style.height = target.parentNode.style.height = div.style.height = Math.floor(height) + "px";
    const relativeRotation = this.viewport.rotation - this.paintedViewportMap.get(target).rotation;
    const absRotation = Math.abs(relativeRotation);
    let scaleX = 1,
        scaleY = 1;

    if (absRotation === 90 || absRotation === 270) {
      scaleX = height / width;
      scaleY = width / height;
    }

    target.style.transform = `rotate(${relativeRotation}deg) scale(${scaleX}, ${scaleY})`;

    if (this.textLayer) {
      const textLayerViewport = this.textLayer.viewport;
      const textRelativeRotation = this.viewport.rotation - textLayerViewport.rotation;
      const textAbsRotation = Math.abs(textRelativeRotation);
      let scale = width / textLayerViewport.width;

      if (textAbsRotation === 90 || textAbsRotation === 270) {
        scale = width / textLayerViewport.height;
      }

      const textLayerDiv = this.textLayer.textLayerDiv;
      let transX, transY;

      switch (textAbsRotation) {
        case 0:
          transX = transY = 0;
          break;

        case 90:
          transX = 0;
          transY = "-" + textLayerDiv.style.height;
          break;

        case 180:
          transX = "-" + textLayerDiv.style.width;
          transY = "-" + textLayerDiv.style.height;
          break;

        case 270:
          transX = "-" + textLayerDiv.style.width;
          transY = 0;
          break;

        default:
          console.error("Bad rotation value.");
          break;
      }

      textLayerDiv.style.transform = `rotate(${textAbsRotation}deg) ` + `scale(${scale}) ` + `translate(${transX}, ${transY})`;
      textLayerDiv.style.transformOrigin = "0% 0%";
    }

    if (redrawAnnotationLayer && this.annotationLayer) {
      this._renderAnnotationLayer();
    }

    if (redrawXfaLayer && this.xfaLayer) {
      this._renderXfaLayer();
    }
  }

  get width() {
    return this.viewport.width;
  }

  get height() {
    return this.viewport.height;
  }

  getPagePoint(x, y) {
    return this.viewport.convertToPdfPoint(x, y);
  }

  toggleLoadingIconSpinner(viewVisible = false) {
    this.loadingIconDiv?.classList.toggle("notVisible", !viewVisible);
  }

  draw() {
    if (this.renderingState !== _ui_utils.RenderingStates.INITIAL) {
      console.error("Must be in new state before drawing");
      this.reset();
    }

    const {
      div,
      pdfPage
    } = this;

    if (!pdfPage) {
      this.renderingState = _ui_utils.RenderingStates.FINISHED;

      if (this.loadingIconDiv) {
        this.loadingIconDiv.remove();
        delete this.loadingIconDiv;
      }

      return Promise.reject(new Error("pdfPage is not loaded"));
    }

    this.renderingState = _ui_utils.RenderingStates.RUNNING;
    const canvasWrapper = document.createElement("div");
    canvasWrapper.style.width = div.style.width;
    canvasWrapper.style.height = div.style.height;
    canvasWrapper.classList.add("canvasWrapper");

    if (this.annotationLayer?.div) {
      div.insertBefore(canvasWrapper, this.annotationLayer.div);
    } else {
      div.appendChild(canvasWrapper);
    }

    let textLayer = null;

    if (this.textLayerMode !== _ui_utils.TextLayerMode.DISABLE && this.textLayerFactory) {
      const textLayerDiv = document.createElement("div");
      textLayerDiv.className = "textLayer";
      textLayerDiv.style.width = canvasWrapper.style.width;
      textLayerDiv.style.height = canvasWrapper.style.height;

      if (this.annotationLayer?.div) {
        div.insertBefore(textLayerDiv, this.annotationLayer.div);
      } else {
        div.appendChild(textLayerDiv);
      }

      textLayer = this.textLayerFactory.createTextLayerBuilder(textLayerDiv, this.id - 1, this.viewport, this.textLayerMode === _ui_utils.TextLayerMode.ENABLE_ENHANCE, this.eventBus, this.textHighlighter);
    }

    this.textLayer = textLayer;

    if (this.#annotationMode !== _pdfjsLib.AnnotationMode.DISABLE && this.annotationLayerFactory) {
      this._annotationCanvasMap ||= new Map();
      this.annotationLayer ||= this.annotationLayerFactory.createAnnotationLayerBuilder(div, pdfPage, null, this.imageResourcesPath, this.#annotationMode === _pdfjsLib.AnnotationMode.ENABLE_FORMS, this.l10n, null, null, null, null, this._annotationCanvasMap);
    }

    if (this.xfaLayer?.div) {
      div.appendChild(this.xfaLayer.div);
    }

    let renderContinueCallback = null;

    if (this.renderingQueue) {
      renderContinueCallback = cont => {
        if (!this.renderingQueue.isHighestPriority(this)) {
          this.renderingState = _ui_utils.RenderingStates.PAUSED;

          this.resume = () => {
            this.renderingState = _ui_utils.RenderingStates.RUNNING;
            cont();
          };

          return;
        }

        cont();
      };
    }

    const finishPaintTask = async (error = null) => {
      if (paintTask === this.paintTask) {
        this.paintTask = null;
      }

      if (error instanceof _pdfjsLib.RenderingCancelledException) {
        this._renderError = null;
        return;
      }

      this._renderError = error;
      this.renderingState = _ui_utils.RenderingStates.FINISHED;

      if (this.loadingIconDiv) {
        this.loadingIconDiv.remove();
        delete this.loadingIconDiv;
      }

      this._resetZoomLayer(true);

      this.eventBus.dispatch("pagerendered", {
        source: this,
        pageNumber: this.id,
        cssTransform: false,
        timestamp: performance.now(),
        error: this._renderError
      });

      if (error) {
        throw error;
      }
    };

    const paintTask = this.renderer === _ui_utils.RendererType.SVG ? this.paintOnSvg(canvasWrapper) : this.paintOnCanvas(canvasWrapper);
    paintTask.onRenderContinue = renderContinueCallback;
    this.paintTask = paintTask;
    const resultPromise = paintTask.promise.then(() => {
      return finishPaintTask(null).then(() => {
        if (textLayer) {
          const readableStream = pdfPage.streamTextContent({
            includeMarkedContent: true
          });
          textLayer.setTextContentStream(readableStream);
          textLayer.render();
        }

        if (this.annotationLayer) {
          this._renderAnnotationLayer();
        }
      });
    }, function (reason) {
      return finishPaintTask(reason);
    });

    if (this.xfaLayerFactory) {
      if (!this.xfaLayer) {
        this.xfaLayer = this.xfaLayerFactory.createXfaLayerBuilder(div, pdfPage, null);
      }

      this._renderXfaLayer();
    }

    if (this.structTreeLayerFactory && this.textLayer && this.canvas) {
      this._onTextLayerRendered = event => {
        if (event.pageNumber !== this.id) {
          return;
        }

        this.eventBus._off("textlayerrendered", this._onTextLayerRendered);

        this._onTextLayerRendered = null;

        if (!this.canvas) {
          return;
        }

        this.pdfPage.getStructTree().then(tree => {
          if (!tree) {
            return;
          }

          if (!this.canvas) {
            return;
          }

          const treeDom = this.structTreeLayer.render(tree);
          treeDom.classList.add("structTree");
          this.canvas.appendChild(treeDom);
        });
      };

      this.eventBus._on("textlayerrendered", this._onTextLayerRendered);

      this.structTreeLayer = this.structTreeLayerFactory.createStructTreeLayerBuilder(pdfPage);
    }

    div.setAttribute("data-loaded", true);
    this.eventBus.dispatch("pagerender", {
      source: this,
      pageNumber: this.id
    });
    return resultPromise;
  }

  paintOnCanvas(canvasWrapper) {
    const renderCapability = (0, _pdfjsLib.createPromiseCapability)();
    const result = {
      promise: renderCapability.promise,

      onRenderContinue(cont) {
        cont();
      },

      cancel() {
        renderTask.cancel();
      }

    };
    const viewport = this.viewport;
    const canvas = document.createElement("canvas");
    canvas.hidden = true;
    let isCanvasHidden = true;

    const showCanvas = function () {
      if (isCanvasHidden) {
        canvas.hidden = false;
        isCanvasHidden = false;
      }
    };

    canvasWrapper.appendChild(canvas);
    this.canvas = canvas;
    const ctx = canvas.getContext("2d", {
      alpha: false
    });
    const outputScale = this.outputScale = new _ui_utils.OutputScale();

    if (this.useOnlyCssZoom) {
      const actualSizeViewport = viewport.clone({
        scale: _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS
      });
      outputScale.sx *= actualSizeViewport.width / viewport.width;
      outputScale.sy *= actualSizeViewport.height / viewport.height;
    }

    if (this.maxCanvasPixels > 0) {
      const pixelsInViewport = viewport.width * viewport.height;
      const maxScale = Math.sqrt(this.maxCanvasPixels / pixelsInViewport);

      if (outputScale.sx > maxScale || outputScale.sy > maxScale) {
        outputScale.sx = maxScale;
        outputScale.sy = maxScale;
        this.hasRestrictedScaling = true;
      } else {
        this.hasRestrictedScaling = false;
      }
    }

    const sfx = (0, _ui_utils.approximateFraction)(outputScale.sx);
    const sfy = (0, _ui_utils.approximateFraction)(outputScale.sy);
    canvas.width = (0, _ui_utils.roundToDivide)(viewport.width * outputScale.sx, sfx[0]);
    canvas.height = (0, _ui_utils.roundToDivide)(viewport.height * outputScale.sy, sfy[0]);
    canvas.style.width = (0, _ui_utils.roundToDivide)(viewport.width, sfx[1]) + "px";
    canvas.style.height = (0, _ui_utils.roundToDivide)(viewport.height, sfy[1]) + "px";
    this.paintedViewportMap.set(canvas, viewport);
    const transform = outputScale.scaled ? [outputScale.sx, 0, 0, outputScale.sy, 0, 0] : null;
    const renderContext = {
      canvasContext: ctx,
      transform,
      viewport: this.viewport,
      annotationMode: this.#annotationMode,
      optionalContentConfigPromise: this._optionalContentConfigPromise,
      annotationCanvasMap: this._annotationCanvasMap,
      pageColors: this.pageColors
    };
    const renderTask = this.pdfPage.render(renderContext);

    renderTask.onContinue = function (cont) {
      showCanvas();

      if (result.onRenderContinue) {
        result.onRenderContinue(cont);
      } else {
        cont();
      }
    };

    renderTask.promise.then(function () {
      showCanvas();
      renderCapability.resolve();
    }, function (error) {
      showCanvas();
      renderCapability.reject(error);
    });
    return result;
  }

  paintOnSvg(wrapper) {
    let cancelled = false;

    const ensureNotCancelled = () => {
      if (cancelled) {
        throw new _pdfjsLib.RenderingCancelledException(`Rendering cancelled, page ${this.id}`, "svg");
      }
    };

    const pdfPage = this.pdfPage;
    const actualSizeViewport = this.viewport.clone({
      scale: _pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS
    });
    const promise = pdfPage.getOperatorList({
      annotationMode: this.#annotationMode
    }).then(opList => {
      ensureNotCancelled();
      const svgGfx = new _pdfjsLib.SVGGraphics(pdfPage.commonObjs, pdfPage.objs);
      return svgGfx.getSVG(opList, actualSizeViewport).then(svg => {
        ensureNotCancelled();
        this.svg = svg;
        this.paintedViewportMap.set(svg, actualSizeViewport);
        svg.style.width = wrapper.style.width;
        svg.style.height = wrapper.style.height;
        this.renderingState = _ui_utils.RenderingStates.FINISHED;
        wrapper.appendChild(svg);
      });
    });
    return {
      promise,

      onRenderContinue(cont) {
        cont();
      },

      cancel() {
        cancelled = true;
      }

    };
  }

  setPageLabel(label) {
    this.pageLabel = typeof label === "string" ? label : null;

    if (this.pageLabel !== null) {
      this.div.setAttribute("data-page-label", this.pageLabel);
    } else {
      this.div.removeAttribute("data-page-label");
    }
  }

}

exports.PDFPageView = PDFPageView;

/***/ }),
/* 13 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.compatibilityParams = exports.OptionKind = exports.AppOptions = void 0;
const compatibilityParams = Object.create(null);
exports.compatibilityParams = compatibilityParams;
{
  const userAgent = navigator.userAgent || "";
  const platform = navigator.platform || "";
  const maxTouchPoints = navigator.maxTouchPoints || 1;
  const isAndroid = /Android/.test(userAgent);
  const isIOS = /\b(iPad|iPhone|iPod)(?=;)/.test(userAgent) || platform === "MacIntel" && maxTouchPoints > 1;

  (function checkCanvasSizeLimitation() {
    if (isIOS || isAndroid) {
      compatibilityParams.maxCanvasPixels = 5242880;
    }
  })();
}
const OptionKind = {
  VIEWER: 0x02,
  API: 0x04,
  WORKER: 0x08,
  PREFERENCE: 0x80
};
exports.OptionKind = OptionKind;
const defaultOptions = {
  annotationMode: {
    value: 2,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  cursorToolOnLoad: {
    value: 0,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  defaultUrl: {
    value: "compressed.tracemonkey-pldi-09.pdf",
    kind: OptionKind.VIEWER
  },
  defaultZoomValue: {
    value: "",
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  disableHistory: {
    value: false,
    kind: OptionKind.VIEWER
  },
  disablePageLabels: {
    value: false,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  enablePermissions: {
    value: false,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  enablePrintAutoRotate: {
    value: true,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  enableScripting: {
    value: true,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  externalLinkRel: {
    value: "noopener noreferrer nofollow",
    kind: OptionKind.VIEWER
  },
  externalLinkTarget: {
    value: 0,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  historyUpdateUrl: {
    value: false,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  ignoreDestinationZoom: {
    value: false,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  imageResourcesPath: {
    value: "./images/",
    kind: OptionKind.VIEWER
  },
  maxCanvasPixels: {
    value: 16777216,
    compatibility: compatibilityParams.maxCanvasPixels,
    kind: OptionKind.VIEWER
  },
  pageColorsBackground: {
    value: "Canvas",
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  pageColorsForeground: {
    value: "CanvasText",
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  pdfBugEnabled: {
    value: false,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  printResolution: {
    value: 150,
    kind: OptionKind.VIEWER
  },
  renderer: {
    value: "canvas",
    kind: OptionKind.VIEWER
  },
  sidebarViewOnLoad: {
    value: -1,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  scrollModeOnLoad: {
    value: -1,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  spreadModeOnLoad: {
    value: -1,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  textLayerMode: {
    value: 1,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  useOnlyCssZoom: {
    value: false,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  viewerCssTheme: {
    value: 0,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  viewOnLoad: {
    value: 0,
    kind: OptionKind.VIEWER + OptionKind.PREFERENCE
  },
  cMapPacked: {
    value: true,
    kind: OptionKind.API
  },
  cMapUrl: {
    value: "../web/cmaps/",
    kind: OptionKind.API
  },
  disableAutoFetch: {
    value: false,
    kind: OptionKind.API + OptionKind.PREFERENCE
  },
  disableFontFace: {
    value: false,
    kind: OptionKind.API + OptionKind.PREFERENCE
  },
  disableRange: {
    value: false,
    kind: OptionKind.API + OptionKind.PREFERENCE
  },
  disableStream: {
    value: false,
    kind: OptionKind.API + OptionKind.PREFERENCE
  },
  docBaseUrl: {
    value: "",
    kind: OptionKind.API
  },
  enableXfa: {
    value: true,
    kind: OptionKind.API + OptionKind.PREFERENCE
  },
  fontExtraProperties: {
    value: false,
    kind: OptionKind.API
  },
  isEvalSupported: {
    value: true,
    kind: OptionKind.API
  },
  maxImageSize: {
    value: -1,
    kind: OptionKind.API
  },
  pdfBug: {
    value: false,
    kind: OptionKind.API
  },
  standardFontDataUrl: {
    value: "../web/standard_fonts/",
    kind: OptionKind.API
  },
  verbosity: {
    value: 1,
    kind: OptionKind.API
  },
  workerPort: {
    value: null,
    kind: OptionKind.WORKER
  },
  workerSrc: {
    value: "../build/pdf.worker.js",
    kind: OptionKind.WORKER
  }
};
{
  defaultOptions.disablePreferences = {
    value: false,
    kind: OptionKind.VIEWER
  };
  defaultOptions.locale = {
    value: navigator.language || "en-US",
    kind: OptionKind.VIEWER
  };
  defaultOptions.sandboxBundleSrc = {
    value: "../build/pdf.sandbox.js",
    kind: OptionKind.VIEWER
  };
  defaultOptions.renderer.kind += OptionKind.PREFERENCE;
}
const userOptions = Object.create(null);

class AppOptions {
  constructor() {
    throw new Error("Cannot initialize AppOptions.");
  }

  static get(name) {
    const userOption = userOptions[name];

    if (userOption !== undefined) {
      return userOption;
    }

    const defaultOption = defaultOptions[name];

    if (defaultOption !== undefined) {
      return defaultOption.compatibility ?? defaultOption.value;
    }

    return undefined;
  }

  static getAll(kind = null) {
    const options = Object.create(null);

    for (const name in defaultOptions) {
      const defaultOption = defaultOptions[name];

      if (kind) {
        if ((kind & defaultOption.kind) === 0) {
          continue;
        }

        if (kind === OptionKind.PREFERENCE) {
          const value = defaultOption.value,
                valueType = typeof value;

          if (valueType === "boolean" || valueType === "string" || valueType === "number" && Number.isInteger(value)) {
            options[name] = value;
            continue;
          }

          throw new Error(`Invalid type for preference: ${name}`);
        }
      }

      const userOption = userOptions[name];
      options[name] = userOption !== undefined ? userOption : defaultOption.compatibility ?? defaultOption.value;
    }

    return options;
  }

  static set(name, value) {
    userOptions[name] = value;
  }

  static setAll(options) {
    for (const name in options) {
      userOptions[name] = options[name];
    }
  }

  static remove(name) {
    delete userOptions[name];
  }

  static _hasUserOptions() {
    return Object.keys(userOptions).length > 0;
  }

}

exports.AppOptions = AppOptions;

/***/ }),
/* 14 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFRenderingQueue = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

var _ui_utils = __w_pdfjs_require__(6);

const CLEANUP_TIMEOUT = 30000;

class PDFRenderingQueue {
  constructor() {
    this.pdfViewer = null;
    this.pdfThumbnailViewer = null;
    this.onIdle = null;
    this.highestPriorityPage = null;
    this.idleTimeout = null;
    this.printing = false;
    this.isThumbnailViewEnabled = false;
  }

  setViewer(pdfViewer) {
    this.pdfViewer = pdfViewer;
  }

  setThumbnailViewer(pdfThumbnailViewer) {
    this.pdfThumbnailViewer = pdfThumbnailViewer;
  }

  isHighestPriority(view) {
    return this.highestPriorityPage === view.renderingId;
  }

  hasViewer() {
    return !!this.pdfViewer;
  }

  renderHighestPriority(currentlyVisiblePages) {
    if (this.idleTimeout) {
      clearTimeout(this.idleTimeout);
      this.idleTimeout = null;
    }

    if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {
      return;
    }

    if (this.isThumbnailViewEnabled && this.pdfThumbnailViewer?.forceRendering()) {
      return;
    }

    if (this.printing) {
      return;
    }

    if (this.onIdle) {
      this.idleTimeout = setTimeout(this.onIdle.bind(this), CLEANUP_TIMEOUT);
    }
  }

  getHighestPriority(visible, views, scrolledDown, preRenderExtra = false) {
    const visibleViews = visible.views,
          numVisible = visibleViews.length;

    if (numVisible === 0) {
      return null;
    }

    for (let i = 0; i < numVisible; i++) {
      const view = visibleViews[i].view;

      if (!this.isViewFinished(view)) {
        return view;
      }
    }

    const firstId = visible.first.id,
          lastId = visible.last.id;

    if (lastId - firstId + 1 > numVisible) {
      const visibleIds = visible.ids;

      for (let i = 1, ii = lastId - firstId; i < ii; i++) {
        const holeId = scrolledDown ? firstId + i : lastId - i;

        if (visibleIds.has(holeId)) {
          continue;
        }

        const holeView = views[holeId - 1];

        if (!this.isViewFinished(holeView)) {
          return holeView;
        }
      }
    }

    let preRenderIndex = scrolledDown ? lastId : firstId - 2;
    let preRenderView = views[preRenderIndex];

    if (preRenderView && !this.isViewFinished(preRenderView)) {
      return preRenderView;
    }

    if (preRenderExtra) {
      preRenderIndex += scrolledDown ? 1 : -1;
      preRenderView = views[preRenderIndex];

      if (preRenderView && !this.isViewFinished(preRenderView)) {
        return preRenderView;
      }
    }

    return null;
  }

  isViewFinished(view) {
    return view.renderingState === _ui_utils.RenderingStates.FINISHED;
  }

  renderView(view) {
    switch (view.renderingState) {
      case _ui_utils.RenderingStates.FINISHED:
        return false;

      case _ui_utils.RenderingStates.PAUSED:
        this.highestPriorityPage = view.renderingId;
        view.resume();
        break;

      case _ui_utils.RenderingStates.RUNNING:
        this.highestPriorityPage = view.renderingId;
        break;

      case _ui_utils.RenderingStates.INITIAL:
        this.highestPriorityPage = view.renderingId;
        view.draw().finally(() => {
          this.renderHighestPriority();
        }).catch(reason => {
          if (reason instanceof _pdfjsLib.RenderingCancelledException) {
            return;
          }

          console.error(`renderView: "${reason}"`);
        });
        break;
    }

    return true;
  }

}

exports.PDFRenderingQueue = PDFRenderingQueue;

/***/ }),
/* 15 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.TextHighlighter = void 0;

class TextHighlighter {
  constructor({
    findController,
    eventBus,
    pageIndex
  }) {
    this.findController = findController;
    this.matches = [];
    this.eventBus = eventBus;
    this.pageIdx = pageIndex;
    this._onUpdateTextLayerMatches = null;
    this.textDivs = null;
    this.textContentItemsStr = null;
    this.enabled = false;
  }

  setTextMapping(divs, texts) {
    this.textDivs = divs;
    this.textContentItemsStr = texts;
  }

  enable() {
    if (!this.textDivs || !this.textContentItemsStr) {
      throw new Error("Text divs and strings have not been set.");
    }

    if (this.enabled) {
      throw new Error("TextHighlighter is already enabled.");
    }

    this.enabled = true;

    if (!this._onUpdateTextLayerMatches) {
      this._onUpdateTextLayerMatches = evt => {
        if (evt.pageIndex === this.pageIdx || evt.pageIndex === -1) {
          this._updateMatches();
        }
      };

      this.eventBus._on("updatetextlayermatches", this._onUpdateTextLayerMatches);
    }

    this._updateMatches();
  }

  disable() {
    if (!this.enabled) {
      return;
    }

    this.enabled = false;

    if (this._onUpdateTextLayerMatches) {
      this.eventBus._off("updatetextlayermatches", this._onUpdateTextLayerMatches);

      this._onUpdateTextLayerMatches = null;
    }
  }

  _convertMatches(matches, matchesLength) {
    if (!matches) {
      return [];
    }

    const {
      textContentItemsStr
    } = this;
    let i = 0,
        iIndex = 0;
    const end = textContentItemsStr.length - 1;
    const result = [];

    for (let m = 0, mm = matches.length; m < mm; m++) {
      let matchIdx = matches[m];

      while (i !== end && matchIdx >= iIndex + textContentItemsStr[i].length) {
        iIndex += textContentItemsStr[i].length;
        i++;
      }

      if (i === textContentItemsStr.length) {
        console.error("Could not find a matching mapping");
      }

      const match = {
        begin: {
          divIdx: i,
          offset: matchIdx - iIndex
        }
      };
      matchIdx += matchesLength[m];

      while (i !== end && matchIdx > iIndex + textContentItemsStr[i].length) {
        iIndex += textContentItemsStr[i].length;
        i++;
      }

      match.end = {
        divIdx: i,
        offset: matchIdx - iIndex
      };
      result.push(match);
    }

    return result;
  }

  _renderMatches(matches) {
    if (matches.length === 0) {
      return;
    }

    const {
      findController,
      pageIdx
    } = this;
    const {
      textContentItemsStr,
      textDivs
    } = this;
    const isSelectedPage = pageIdx === findController.selected.pageIdx;
    const selectedMatchIdx = findController.selected.matchIdx;
    const highlightAll = findController.state.highlightAll;
    let prevEnd = null;
    const infinity = {
      divIdx: -1,
      offset: undefined
    };

    function beginText(begin, className) {
      const divIdx = begin.divIdx;
      textDivs[divIdx].textContent = "";
      return appendTextToDiv(divIdx, 0, begin.offset, className);
    }

    function appendTextToDiv(divIdx, fromOffset, toOffset, className) {
      let div = textDivs[divIdx];

      if (div.nodeType === Node.TEXT_NODE) {
        const span = document.createElement("span");
        div.parentNode.insertBefore(span, div);
        span.appendChild(div);
        textDivs[divIdx] = span;
        div = span;
      }

      const content = textContentItemsStr[divIdx].substring(fromOffset, toOffset);
      const node = document.createTextNode(content);

      if (className) {
        const span = document.createElement("span");
        span.className = `${className} appended`;
        span.appendChild(node);
        div.appendChild(span);
        return className.includes("selected") ? span.offsetLeft : 0;
      }

      div.appendChild(node);
      return 0;
    }

    let i0 = selectedMatchIdx,
        i1 = i0 + 1;

    if (highlightAll) {
      i0 = 0;
      i1 = matches.length;
    } else if (!isSelectedPage) {
      return;
    }

    for (let i = i0; i < i1; i++) {
      const match = matches[i];
      const begin = match.begin;
      const end = match.end;
      const isSelected = isSelectedPage && i === selectedMatchIdx;
      const highlightSuffix = isSelected ? " selected" : "";
      let selectedLeft = 0;

      if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {
        if (prevEnd !== null) {
          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);
        }

        beginText(begin);
      } else {
        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);
      }

      if (begin.divIdx === end.divIdx) {
        selectedLeft = appendTextToDiv(begin.divIdx, begin.offset, end.offset, "highlight" + highlightSuffix);
      } else {
        selectedLeft = appendTextToDiv(begin.divIdx, begin.offset, infinity.offset, "highlight begin" + highlightSuffix);

        for (let n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {
          textDivs[n0].className = "highlight middle" + highlightSuffix;
        }

        beginText(end, "highlight end" + highlightSuffix);
      }

      prevEnd = end;

      if (isSelected) {
        findController.scrollMatchIntoView({
          element: textDivs[begin.divIdx],
          selectedLeft,
          pageIndex: pageIdx,
          matchIndex: selectedMatchIdx
        });
      }
    }

    if (prevEnd) {
      appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);
    }
  }

  _updateMatches() {
    if (!this.enabled) {
      return;
    }

    const {
      findController,
      matches,
      pageIdx
    } = this;
    const {
      textContentItemsStr,
      textDivs
    } = this;
    let clearedUntilDivIdx = -1;

    for (let i = 0, ii = matches.length; i < ii; i++) {
      const match = matches[i];
      const begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);

      for (let n = begin, end = match.end.divIdx; n <= end; n++) {
        const div = textDivs[n];
        div.textContent = textContentItemsStr[n];
        div.className = "";
      }

      clearedUntilDivIdx = match.end.divIdx + 1;
    }

    if (!findController?.highlightMatches) {
      return;
    }

    const pageMatches = findController.pageMatches[pageIdx] || null;
    const pageMatchesLength = findController.pageMatchesLength[pageIdx] || null;
    this.matches = this._convertMatches(pageMatches, pageMatchesLength);

    this._renderMatches(this.matches);
  }

}

exports.TextHighlighter = TextHighlighter;

/***/ }),
/* 16 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DownloadManager = void 0;

var _pdfjsLib = __w_pdfjs_require__(3);

;

function download(blobUrl, filename) {
  const a = document.createElement("a");

  if (!a.click) {
    throw new Error('DownloadManager: "a.click()" is not supported.');
  }

  a.href = blobUrl;
  a.target = "_parent";

  if ("download" in a) {
    a.download = filename;
  }

  (document.body || document.documentElement).appendChild(a);
  a.click();
  a.remove();
}

class DownloadManager {
  constructor() {
    this._openBlobUrls = new WeakMap();
  }

  downloadUrl(url, filename) {
    if (!(0, _pdfjsLib.createValidAbsoluteUrl)(url, "http://example.com")) {
      console.error(`downloadUrl - not a valid URL: ${url}`);
      return;
    }

    download(url + "#pdfjs.action=download", filename);
  }

  downloadData(data, filename, contentType) {
    const blobUrl = URL.createObjectURL(new Blob([data], {
      type: contentType
    }));
    download(blobUrl, filename);
  }

  openOrDownloadData(element, data, filename) {
    const isPdfData = (0, _pdfjsLib.isPdfFile)(filename);
    const contentType = isPdfData ? "application/pdf" : "";

    if (isPdfData) {
      let blobUrl = this._openBlobUrls.get(element);

      if (!blobUrl) {
        blobUrl = URL.createObjectURL(new Blob([data], {
          type: contentType
        }));

        this._openBlobUrls.set(element, blobUrl);
      }

      let viewerUrl;
      viewerUrl = "?file=" + encodeURIComponent(blobUrl + "#" + filename);

      try {
        window.open(viewerUrl);
        return true;
      } catch (ex) {
        console.error(`openOrDownloadData: ${ex}`);
        URL.revokeObjectURL(blobUrl);

        this._openBlobUrls.delete(element);
      }
    }

    this.downloadData(data, filename, contentType);
    return false;
  }

  download(blob, url, filename, sourceEventType = "download") {
    const blobUrl = URL.createObjectURL(blob);
    download(blobUrl, filename);
  }

}

exports.DownloadManager = DownloadManager;

/***/ }),
/* 17 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.WaitOnType = exports.EventBus = exports.AutomationEventBus = void 0;
exports.waitOnEventOrTimeout = waitOnEventOrTimeout;
const WaitOnType = {
  EVENT: "event",
  TIMEOUT: "timeout"
};
exports.WaitOnType = WaitOnType;

function waitOnEventOrTimeout({
  target,
  name,
  delay = 0
}) {
  return new Promise(function (resolve, reject) {
    if (typeof target !== "object" || !(name && typeof name === "string") || !(Number.isInteger(delay) && delay >= 0)) {
      throw new Error("waitOnEventOrTimeout - invalid parameters.");
    }

    function handler(type) {
      if (target instanceof EventBus) {
        target._off(name, eventHandler);
      } else {
        target.removeEventListener(name, eventHandler);
      }

      if (timeout) {
        clearTimeout(timeout);
      }

      resolve(type);
    }

    const eventHandler = handler.bind(null, WaitOnType.EVENT);

    if (target instanceof EventBus) {
      target._on(name, eventHandler);
    } else {
      target.addEventListener(name, eventHandler);
    }

    const timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);
    const timeout = setTimeout(timeoutHandler, delay);
  });
}

class EventBus {
  constructor() {
    this._listeners = Object.create(null);
  }

  on(eventName, listener, options = null) {
    this._on(eventName, listener, {
      external: true,
      once: options?.once
    });
  }

  off(eventName, listener, options = null) {
    this._off(eventName, listener, {
      external: true,
      once: options?.once
    });
  }

  dispatch(eventName, data) {
    const eventListeners = this._listeners[eventName];

    if (!eventListeners || eventListeners.length === 0) {
      return;
    }

    let externalListeners;

    for (const {
      listener,
      external,
      once
    } of eventListeners.slice(0)) {
      if (once) {
        this._off(eventName, listener);
      }

      if (external) {
        (externalListeners ||= []).push(listener);
        continue;
      }

      listener(data);
    }

    if (externalListeners) {
      for (const listener of externalListeners) {
        listener(data);
      }

      externalListeners = null;
    }
  }

  _on(eventName, listener, options = null) {
    const eventListeners = this._listeners[eventName] ||= [];
    eventListeners.push({
      listener,
      external: options?.external === true,
      once: options?.once === true
    });
  }

  _off(eventName, listener, options = null) {
    const eventListeners = this._listeners[eventName];

    if (!eventListeners) {
      return;
    }

    for (let i = 0, ii = eventListeners.length; i < ii; i++) {
      if (eventListeners[i].listener === listener) {
        eventListeners.splice(i, 1);
        return;
      }
    }
  }

}

exports.EventBus = EventBus;

class AutomationEventBus extends EventBus {
  dispatch(eventName, data) {
    throw new Error("Not implemented: AutomationEventBus.dispatch");
  }

}

exports.AutomationEventBus = AutomationEventBus;

/***/ }),
/* 18 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GenericL10n = void 0;

__w_pdfjs_require__(19);

var _l10n_utils = __w_pdfjs_require__(4);

const webL10n = document.webL10n;

class GenericL10n {
  constructor(lang) {
    this._lang = lang;
    this._ready = new Promise((resolve, reject) => {
      webL10n.setLanguage((0, _l10n_utils.fixupLangCode)(lang), () => {
        resolve(webL10n);
      });
    });
  }

  async getLanguage() {
    const l10n = await this._ready;
    return l10n.getLanguage();
  }

  async getDirection() {
    const l10n = await this._ready;
    return l10n.getDirection();
  }

  async get(key, args = null, fallback = (0, _l10n_utils.getL10nFallback)(key, args)) {
    const l10n = await this._ready;
    return l10n.get(key, args, fallback);
  }

  async translate(element) {
    const l10n = await this._ready;
    return l10n.translate(element);
  }

}

exports.GenericL10n = GenericL10n;

/***/ }),
/* 19 */
/***/ (() => {



document.webL10n = function (window, document, undefined) {
  var gL10nData = {};
  var gTextData = '';
  var gTextProp = 'textContent';
  var gLanguage = '';
  var gMacros = {};
  var gReadyState = 'loading';
  var gAsyncResourceLoading = true;

  function getL10nResourceLinks() {
    return document.querySelectorAll('link[type="application/l10n"]');
  }

  function getL10nDictionary() {
    var script = document.querySelector('script[type="application/l10n"]');
    return script ? JSON.parse(script.innerHTML) : null;
  }

  function getTranslatableChildren(element) {
    return element ? element.querySelectorAll('*[data-l10n-id]') : [];
  }

  function getL10nAttributes(element) {
    if (!element) return {};
    var l10nId = element.getAttribute('data-l10n-id');
    var l10nArgs = element.getAttribute('data-l10n-args');
    var args = {};

    if (l10nArgs) {
      try {
        args = JSON.parse(l10nArgs);
      } catch (e) {
        console.warn('could not parse arguments for #' + l10nId);
      }
    }

    return {
      id: l10nId,
      args: args
    };
  }

  function xhrLoadText(url, onSuccess, onFailure) {
    onSuccess = onSuccess || function _onSuccess(data) {};

    onFailure = onFailure || function _onFailure() {};

    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, gAsyncResourceLoading);

    if (xhr.overrideMimeType) {
      xhr.overrideMimeType('text/plain; charset=utf-8');
    }

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4) {
        if (xhr.status == 200 || xhr.status === 0) {
          onSuccess(xhr.responseText);
        } else {
          onFailure();
        }
      }
    };

    xhr.onerror = onFailure;
    xhr.ontimeout = onFailure;

    try {
      xhr.send(null);
    } catch (e) {
      onFailure();
    }
  }

  function parseResource(href, lang, successCallback, failureCallback) {
    var baseURL = href.replace(/[^\/]*$/, '') || './';

    function evalString(text) {
      if (text.lastIndexOf('\\') < 0) return text;
      return text.replace(/\\\\/g, '\\').replace(/\\n/g, '\n').replace(/\\r/g, '\r').replace(/\\t/g, '\t').replace(/\\b/g, '\b').replace(/\\f/g, '\f').replace(/\\{/g, '{').replace(/\\}/g, '}').replace(/\\"/g, '"').replace(/\\'/g, "'");
    }

    function parseProperties(text, parsedPropertiesCallback) {
      var dictionary = {};
      var reBlank = /^\s*|\s*$/;
      var reComment = /^\s*#|^\s*$/;
      var reSection = /^\s*\[(.*)\]\s*$/;
      var reImport = /^\s*@import\s+url\((.*)\)\s*$/i;
      var reSplit = /^([^=\s]*)\s*=\s*(.+)$/;

      function parseRawLines(rawText, extendedSyntax, parsedRawLinesCallback) {
        var entries = rawText.replace(reBlank, '').split(/[\r\n]+/);
        var currentLang = '*';
        var genericLang = lang.split('-', 1)[0];
        var skipLang = false;
        var match = '';

        function nextEntry() {
          while (true) {
            if (!entries.length) {
              parsedRawLinesCallback();
              return;
            }

            var line = entries.shift();
            if (reComment.test(line)) continue;

            if (extendedSyntax) {
              match = reSection.exec(line);

              if (match) {
                currentLang = match[1].toLowerCase();
                skipLang = currentLang !== '*' && currentLang !== lang && currentLang !== genericLang;
                continue;
              } else if (skipLang) {
                continue;
              }

              match = reImport.exec(line);

              if (match) {
                loadImport(baseURL + match[1], nextEntry);
                return;
              }
            }

            var tmp = line.match(reSplit);

            if (tmp && tmp.length == 3) {
              dictionary[tmp[1]] = evalString(tmp[2]);
            }
          }
        }

        nextEntry();
      }

      function loadImport(url, callback) {
        xhrLoadText(url, function (content) {
          parseRawLines(content, false, callback);
        }, function () {
          console.warn(url + ' not found.');
          callback();
        });
      }

      parseRawLines(text, true, function () {
        parsedPropertiesCallback(dictionary);
      });
    }

    xhrLoadText(href, function (response) {
      gTextData += response;
      parseProperties(response, function (data) {
        for (var key in data) {
          var id,
              prop,
              index = key.lastIndexOf('.');

          if (index > 0) {
            id = key.substring(0, index);
            prop = key.substring(index + 1);
          } else {
            id = key;
            prop = gTextProp;
          }

          if (!gL10nData[id]) {
            gL10nData[id] = {};
          }

          gL10nData[id][prop] = data[key];
        }

        if (successCallback) {
          successCallback();
        }
      });
    }, failureCallback);
  }

  function loadLocale(lang, callback) {
    if (lang) {
      lang = lang.toLowerCase();
    }

    callback = callback || function _callback() {};

    clear();
    gLanguage = lang;
    var langLinks = getL10nResourceLinks();
    var langCount = langLinks.length;

    if (langCount === 0) {
      var dict = getL10nDictionary();

      if (dict && dict.locales && dict.default_locale) {
        console.log('using the embedded JSON directory, early way out');
        gL10nData = dict.locales[lang];

        if (!gL10nData) {
          var defaultLocale = dict.default_locale.toLowerCase();

          for (var anyCaseLang in dict.locales) {
            anyCaseLang = anyCaseLang.toLowerCase();

            if (anyCaseLang === lang) {
              gL10nData = dict.locales[lang];
              break;
            } else if (anyCaseLang === defaultLocale) {
              gL10nData = dict.locales[defaultLocale];
            }
          }
        }

        callback();
      } else {
        console.log('no resource to load, early way out');
      }

      gReadyState = 'complete';
      return;
    }

    var onResourceLoaded = null;
    var gResourceCount = 0;

    onResourceLoaded = function () {
      gResourceCount++;

      if (gResourceCount >= langCount) {
        callback();
        gReadyState = 'complete';
      }
    };

    function L10nResourceLink(link) {
      var href = link.href;

      this.load = function (lang, callback) {
        parseResource(href, lang, callback, function () {
          console.warn(href + ' not found.');
          console.warn('"' + lang + '" resource not found');
          gLanguage = '';
          callback();
        });
      };
    }

    for (var i = 0; i < langCount; i++) {
      var resource = new L10nResourceLink(langLinks[i]);
      resource.load(lang, onResourceLoaded);
    }
  }

  function clear() {
    gL10nData = {};
    gTextData = '';
    gLanguage = '';
  }

  function getPluralRules(lang) {
    var locales2rules = {
      'af': 3,
      'ak': 4,
      'am': 4,
      'ar': 1,
      'asa': 3,
      'az': 0,
      'be': 11,
      'bem': 3,
      'bez': 3,
      'bg': 3,
      'bh': 4,
      'bm': 0,
      'bn': 3,
      'bo': 0,
      'br': 20,
      'brx': 3,
      'bs': 11,
      'ca': 3,
      'cgg': 3,
      'chr': 3,
      'cs': 12,
      'cy': 17,
      'da': 3,
      'de': 3,
      'dv': 3,
      'dz': 0,
      'ee': 3,
      'el': 3,
      'en': 3,
      'eo': 3,
      'es': 3,
      'et': 3,
      'eu': 3,
      'fa': 0,
      'ff': 5,
      'fi': 3,
      'fil': 4,
      'fo': 3,
      'fr': 5,
      'fur': 3,
      'fy': 3,
      'ga': 8,
      'gd': 24,
      'gl': 3,
      'gsw': 3,
      'gu': 3,
      'guw': 4,
      'gv': 23,
      'ha': 3,
      'haw': 3,
      'he': 2,
      'hi': 4,
      'hr': 11,
      'hu': 0,
      'id': 0,
      'ig': 0,
      'ii': 0,
      'is': 3,
      'it': 3,
      'iu': 7,
      'ja': 0,
      'jmc': 3,
      'jv': 0,
      'ka': 0,
      'kab': 5,
      'kaj': 3,
      'kcg': 3,
      'kde': 0,
      'kea': 0,
      'kk': 3,
      'kl': 3,
      'km': 0,
      'kn': 0,
      'ko': 0,
      'ksb': 3,
      'ksh': 21,
      'ku': 3,
      'kw': 7,
      'lag': 18,
      'lb': 3,
      'lg': 3,
      'ln': 4,
      'lo': 0,
      'lt': 10,
      'lv': 6,
      'mas': 3,
      'mg': 4,
      'mk': 16,
      'ml': 3,
      'mn': 3,
      'mo': 9,
      'mr': 3,
      'ms': 0,
      'mt': 15,
      'my': 0,
      'nah': 3,
      'naq': 7,
      'nb': 3,
      'nd': 3,
      'ne': 3,
      'nl': 3,
      'nn': 3,
      'no': 3,
      'nr': 3,
      'nso': 4,
      'ny': 3,
      'nyn': 3,
      'om': 3,
      'or': 3,
      'pa': 3,
      'pap': 3,
      'pl': 13,
      'ps': 3,
      'pt': 3,
      'rm': 3,
      'ro': 9,
      'rof': 3,
      'ru': 11,
      'rwk': 3,
      'sah': 0,
      'saq': 3,
      'se': 7,
      'seh': 3,
      'ses': 0,
      'sg': 0,
      'sh': 11,
      'shi': 19,
      'sk': 12,
      'sl': 14,
      'sma': 7,
      'smi': 7,
      'smj': 7,
      'smn': 7,
      'sms': 7,
      'sn': 3,
      'so': 3,
      'sq': 3,
      'sr': 11,
      'ss': 3,
      'ssy': 3,
      'st': 3,
      'sv': 3,
      'sw': 3,
      'syr': 3,
      'ta': 3,
      'te': 3,
      'teo': 3,
      'th': 0,
      'ti': 4,
      'tig': 3,
      'tk': 3,
      'tl': 4,
      'tn': 3,
      'to': 0,
      'tr': 0,
      'ts': 3,
      'tzm': 22,
      'uk': 11,
      'ur': 3,
      've': 3,
      'vi': 0,
      'vun': 3,
      'wa': 4,
      'wae': 3,
      'wo': 0,
      'xh': 3,
      'xog': 3,
      'yo': 0,
      'zh': 0,
      'zu': 3
    };

    function isIn(n, list) {
      return list.indexOf(n) !== -1;
    }

    function isBetween(n, start, end) {
      return start <= n && n <= end;
    }

    var pluralRules = {
      '0': function (n) {
        return 'other';
      },
      '1': function (n) {
        if (isBetween(n % 100, 3, 10)) return 'few';
        if (n === 0) return 'zero';
        if (isBetween(n % 100, 11, 99)) return 'many';
        if (n == 2) return 'two';
        if (n == 1) return 'one';
        return 'other';
      },
      '2': function (n) {
        if (n !== 0 && n % 10 === 0) return 'many';
        if (n == 2) return 'two';
        if (n == 1) return 'one';
        return 'other';
      },
      '3': function (n) {
        if (n == 1) return 'one';
        return 'other';
      },
      '4': function (n) {
        if (isBetween(n, 0, 1)) return 'one';
        return 'other';
      },
      '5': function (n) {
        if (isBetween(n, 0, 2) && n != 2) return 'one';
        return 'other';
      },
      '6': function (n) {
        if (n === 0) return 'zero';
        if (n % 10 == 1 && n % 100 != 11) return 'one';
        return 'other';
      },
      '7': function (n) {
        if (n == 2) return 'two';
        if (n == 1) return 'one';
        return 'other';
      },
      '8': function (n) {
        if (isBetween(n, 3, 6)) return 'few';
        if (isBetween(n, 7, 10)) return 'many';
        if (n == 2) return 'two';
        if (n == 1) return 'one';
        return 'other';
      },
      '9': function (n) {
        if (n === 0 || n != 1 && isBetween(n % 100, 1, 19)) return 'few';
        if (n == 1) return 'one';
        return 'other';
      },
      '10': function (n) {
        if (isBetween(n % 10, 2, 9) && !isBetween(n % 100, 11, 19)) return 'few';
        if (n % 10 == 1 && !isBetween(n % 100, 11, 19)) return 'one';
        return 'other';
      },
      '11': function (n) {
        if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14)) return 'few';
        if (n % 10 === 0 || isBetween(n % 10, 5, 9) || isBetween(n % 100, 11, 14)) return 'many';
        if (n % 10 == 1 && n % 100 != 11) return 'one';
        return 'other';
      },
      '12': function (n) {
        if (isBetween(n, 2, 4)) return 'few';
        if (n == 1) return 'one';
        return 'other';
      },
      '13': function (n) {
        if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14)) return 'few';
        if (n != 1 && isBetween(n % 10, 0, 1) || isBetween(n % 10, 5, 9) || isBetween(n % 100, 12, 14)) return 'many';
        if (n == 1) return 'one';
        return 'other';
      },
      '14': function (n) {
        if (isBetween(n % 100, 3, 4)) return 'few';
        if (n % 100 == 2) return 'two';
        if (n % 100 == 1) return 'one';
        return 'other';
      },
      '15': function (n) {
        if (n === 0 || isBetween(n % 100, 2, 10)) return 'few';
        if (isBetween(n % 100, 11, 19)) return 'many';
        if (n == 1) return 'one';
        return 'other';
      },
      '16': function (n) {
        if (n % 10 == 1 && n != 11) return 'one';
        return 'other';
      },
      '17': function (n) {
        if (n == 3) return 'few';
        if (n === 0) return 'zero';
        if (n == 6) return 'many';
        if (n == 2) return 'two';
        if (n == 1) return 'one';
        return 'other';
      },
      '18': function (n) {
        if (n === 0) return 'zero';
        if (isBetween(n, 0, 2) && n !== 0 && n != 2) return 'one';
        return 'other';
      },
      '19': function (n) {
        if (isBetween(n, 2, 10)) return 'few';
        if (isBetween(n, 0, 1)) return 'one';
        return 'other';
      },
      '20': function (n) {
        if ((isBetween(n % 10, 3, 4) || n % 10 == 9) && !(isBetween(n % 100, 10, 19) || isBetween(n % 100, 70, 79) || isBetween(n % 100, 90, 99))) return 'few';
        if (n % 1000000 === 0 && n !== 0) return 'many';
        if (n % 10 == 2 && !isIn(n % 100, [12, 72, 92])) return 'two';
        if (n % 10 == 1 && !isIn(n % 100, [11, 71, 91])) return 'one';
        return 'other';
      },
      '21': function (n) {
        if (n === 0) return 'zero';
        if (n == 1) return 'one';
        return 'other';
      },
      '22': function (n) {
        if (isBetween(n, 0, 1) || isBetween(n, 11, 99)) return 'one';
        return 'other';
      },
      '23': function (n) {
        if (isBetween(n % 10, 1, 2) || n % 20 === 0) return 'one';
        return 'other';
      },
      '24': function (n) {
        if (isBetween(n, 3, 10) || isBetween(n, 13, 19)) return 'few';
        if (isIn(n, [2, 12])) return 'two';
        if (isIn(n, [1, 11])) return 'one';
        return 'other';
      }
    };
    var index = locales2rules[lang.replace(/-.*$/, '')];

    if (!(index in pluralRules)) {
      console.warn('plural form unknown for [' + lang + ']');
      return function () {
        return 'other';
      };
    }

    return pluralRules[index];
  }

  gMacros.plural = function (str, param, key, prop) {
    var n = parseFloat(param);
    if (isNaN(n)) return str;
    if (prop != gTextProp) return str;

    if (!gMacros._pluralRules) {
      gMacros._pluralRules = getPluralRules(gLanguage);
    }

    var index = '[' + gMacros._pluralRules(n) + ']';

    if (n === 0 && key + '[zero]' in gL10nData) {
      str = gL10nData[key + '[zero]'][prop];
    } else if (n == 1 && key + '[one]' in gL10nData) {
      str = gL10nData[key + '[one]'][prop];
    } else if (n == 2 && key + '[two]' in gL10nData) {
      str = gL10nData[key + '[two]'][prop];
    } else if (key + index in gL10nData) {
      str = gL10nData[key + index][prop];
    } else if (key + '[other]' in gL10nData) {
      str = gL10nData[key + '[other]'][prop];
    }

    return str;
  };

  function getL10nData(key, args, fallback) {
    var data = gL10nData[key];

    if (!data) {
      console.warn('#' + key + ' is undefined.');

      if (!fallback) {
        return null;
      }

      data = fallback;
    }

    var rv = {};

    for (var prop in data) {
      var str = data[prop];
      str = substIndexes(str, args, key, prop);
      str = substArguments(str, args, key);
      rv[prop] = str;
    }

    return rv;
  }

  function substIndexes(str, args, key, prop) {
    var reIndex = /\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/;
    var reMatch = reIndex.exec(str);
    if (!reMatch || !reMatch.length) return str;
    var macroName = reMatch[1];
    var paramName = reMatch[2];
    var param;

    if (args && paramName in args) {
      param = args[paramName];
    } else if (paramName in gL10nData) {
      param = gL10nData[paramName];
    }

    if (macroName in gMacros) {
      var macro = gMacros[macroName];
      str = macro(str, param, key, prop);
    }

    return str;
  }

  function substArguments(str, args, key) {
    var reArgs = /\{\{\s*(.+?)\s*\}\}/g;
    return str.replace(reArgs, function (matched_text, arg) {
      if (args && arg in args) {
        return args[arg];
      }

      if (arg in gL10nData) {
        return gL10nData[arg];
      }

      console.log('argument {{' + arg + '}} for #' + key + ' is undefined.');
      return matched_text;
    });
  }

  function translateElement(element) {
    var l10n = getL10nAttributes(element);
    if (!l10n.id) return;
    var data = getL10nData(l10n.id, l10n.args);

    if (!data) {
      console.warn('#' + l10n.id + ' is undefined.');
      return;
    }

    if (data[gTextProp]) {
      if (getChildElementCount(element) === 0) {
        element[gTextProp] = data[gTextProp];
      } else {
        var children = element.childNodes;
        var found = false;

        for (var i = 0, l = children.length; i < l; i++) {
          if (children[i].nodeType === 3 && /\S/.test(children[i].nodeValue)) {
            if (found) {
              children[i].nodeValue = '';
            } else {
              children[i].nodeValue = data[gTextProp];
              found = true;
            }
          }
        }

        if (!found) {
          var textNode = document.createTextNode(data[gTextProp]);
          element.insertBefore(textNode, element.firstChild);
        }
      }

      delete data[gTextProp];
    }

    for (var k in data) {
      element[k] = data[k];
    }
  }

  function getChildElementCount(element) {
    if (element.children) {
      return element.children.length;
    }

    if (typeof element.childElementCount !== 'undefined') {
      return element.childElementCount;
    }

    var count = 0;

    for (var i = 0; i < element.childNodes.length; i++) {
      count += element.nodeType === 1 ? 1 : 0;
    }

    return count;
  }

  function translateFragment(element) {
    element = element || document.documentElement;
    var children = getTranslatableChildren(element);
    var elementCount = children.length;

    for (var i = 0; i < elementCount; i++) {
      translateElement(children[i]);
    }

    translateElement(element);
  }

  return {
    get: function (key, args, fallbackString) {
      var index = key.lastIndexOf('.');
      var prop = gTextProp;

      if (index > 0) {
        prop = key.substring(index + 1);
        key = key.substring(0, index);
      }

      var fallback;

      if (fallbackString) {
        fallback = {};
        fallback[prop] = fallbackString;
      }

      var data = getL10nData(key, args, fallback);

      if (data && prop in data) {
        return data[prop];
      }

      return '{{' + key + '}}';
    },
    getData: function () {
      return gL10nData;
    },
    getText: function () {
      return gTextData;
    },
    getLanguage: function () {
      return gLanguage;
    },
    setLanguage: function (lang, callback) {
      loadLocale(lang, function () {
        if (callback) callback();
      });
    },
    getDirection: function () {
      var rtlList = ['ar', 'he', 'fa', 'ps', 'ur'];
      var shortCode = gLanguage.split('-', 1)[0];
      return rtlList.indexOf(shortCode) >= 0 ? 'rtl' : 'ltr';
    },
    translate: translateFragment,
    getReadyState: function () {
      return gReadyState;
    },
    ready: function (callback) {
      if (!callback) {
        return;
      } else if (gReadyState == 'complete' || gReadyState == 'interactive') {
        window.setTimeout(function () {
          callback();
        });
      } else if (document.addEventListener) {
        document.addEventListener('localized', function once() {
          document.removeEventListener('localized', once);
          callback();
        });
      }
    }
  };
}(window, document);

/***/ }),
/* 20 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFFindController = exports.FindState = void 0;

var _ui_utils = __w_pdfjs_require__(6);

var _pdfjsLib = __w_pdfjs_require__(3);

var _pdf_find_utils = __w_pdfjs_require__(21);

const FindState = {
  FOUND: 0,
  NOT_FOUND: 1,
  WRAPPED: 2,
  PENDING: 3
};
exports.FindState = FindState;
const FIND_TIMEOUT = 250;
const MATCH_SCROLL_OFFSET_TOP = -50;
const MATCH_SCROLL_OFFSET_LEFT = -400;
const CHARACTERS_TO_NORMALIZE = {
  "\u2010": "-",
  "\u2018": "'",
  "\u2019": "'",
  "\u201A": "'",
  "\u201B": "'",
  "\u201C": '"',
  "\u201D": '"',
  "\u201E": '"',
  "\u201F": '"',
  "\u00BC": "1/4",
  "\u00BD": "1/2",
  "\u00BE": "3/4"
};
const DIACRITICS_EXCEPTION = new Set([0x3099, 0x309a, 0x094d, 0x09cd, 0x0a4d, 0x0acd, 0x0b4d, 0x0bcd, 0x0c4d, 0x0ccd, 0x0d3b, 0x0d3c, 0x0d4d, 0x0dca, 0x0e3a, 0x0eba, 0x0f84, 0x1039, 0x103a, 0x1714, 0x1734, 0x17d2, 0x1a60, 0x1b44, 0x1baa, 0x1bab, 0x1bf2, 0x1bf3, 0x2d7f, 0xa806, 0xa82c, 0xa8c4, 0xa953, 0xa9c0, 0xaaf6, 0xabed, 0x0c56, 0x0f71, 0x0f72, 0x0f7a, 0x0f7b, 0x0f7c, 0x0f7d, 0x0f80, 0x0f74]);
const DIACRITICS_EXCEPTION_STR = [...DIACRITICS_EXCEPTION.values()].map(x => String.fromCharCode(x)).join("");
const DIACRITICS_REG_EXP = /\p{M}+/gu;
const SPECIAL_CHARS_REG_EXP = /([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu;
const NOT_DIACRITIC_FROM_END_REG_EXP = /([^\p{M}])\p{M}*$/u;
const NOT_DIACRITIC_FROM_START_REG_EXP = /^\p{M}*([^\p{M}])/u;
let normalizationRegex = null;

function normalize(text) {
  if (!normalizationRegex) {
    const replace = Object.keys(CHARACTERS_TO_NORMALIZE).join("");
    normalizationRegex = new RegExp(`([${replace}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`, "gum");
  }

  const rawDiacriticsPositions = [];
  let m;

  while ((m = DIACRITICS_REG_EXP.exec(text)) !== null) {
    rawDiacriticsPositions.push([m[0].length, m.index]);
  }

  let normalized = text.normalize("NFD");
  const positions = [[0, 0]];
  let k = 0;
  let shift = 0;
  let shiftOrigin = 0;
  let eol = 0;
  let hasDiacritics = false;
  normalized = normalized.replace(normalizationRegex, (match, p1, p2, p3, p4, i) => {
    i -= shiftOrigin;

    if (p1) {
      const replacement = CHARACTERS_TO_NORMALIZE[match];
      const jj = replacement.length;

      for (let j = 1; j < jj; j++) {
        positions.push([i - shift + j, shift - j]);
      }

      shift -= jj - 1;
      return replacement;
    }

    if (p2) {
      const hasTrailingDashEOL = p2.endsWith("\n");
      const len = hasTrailingDashEOL ? p2.length - 2 : p2.length;
      hasDiacritics = true;
      let jj = len;

      if (i + eol === rawDiacriticsPositions[k]?.[1]) {
        jj -= rawDiacriticsPositions[k][0];
        ++k;
      }

      for (let j = 1; j < jj + 1; j++) {
        positions.push([i - 1 - shift + j, shift - j]);
      }

      shift -= jj;
      shiftOrigin += jj;

      if (hasTrailingDashEOL) {
        i += len - 1;
        positions.push([i - shift + 1, 1 + shift]);
        shift += 1;
        shiftOrigin += 1;
        eol += 1;
        return p2.slice(0, len);
      }

      return p2;
    }

    if (p3) {
      positions.push([i - shift + 1, 1 + shift]);
      shift += 1;
      shiftOrigin += 1;
      eol += 1;
      return p3.charAt(0);
    }

    positions.push([i - shift + 1, shift - 1]);
    shift -= 1;
    shiftOrigin += 1;
    eol += 1;
    return " ";
  });
  positions.push([normalized.length, shift]);
  return [normalized, positions, hasDiacritics];
}

function getOriginalIndex(diffs, pos, len) {
  if (!diffs) {
    return [pos, len];
  }

  const start = pos;
  const end = pos + len;
  let i = (0, _ui_utils.binarySearchFirstItem)(diffs, x => x[0] >= start);

  if (diffs[i][0] > start) {
    --i;
  }

  let j = (0, _ui_utils.binarySearchFirstItem)(diffs, x => x[0] >= end, i);

  if (diffs[j][0] > end) {
    --j;
  }

  return [start + diffs[i][1], len + diffs[j][1] - diffs[i][1]];
}

class PDFFindController {
  constructor({
    linkService,
    eventBus
  }) {
    this._linkService = linkService;
    this._eventBus = eventBus;
    this.#reset();

    eventBus._on("find", this.#onFind.bind(this));

    eventBus._on("findbarclose", this.#onFindBarClose.bind(this));
  }

  get highlightMatches() {
    return this._highlightMatches;
  }

  get pageMatches() {
    return this._pageMatches;
  }

  get pageMatchesLength() {
    return this._pageMatchesLength;
  }

  get selected() {
    return this._selected;
  }

  get state() {
    return this._state;
  }

  setDocument(pdfDocument) {
    if (this._pdfDocument) {
      this.#reset();
    }

    if (!pdfDocument) {
      return;
    }

    this._pdfDocument = pdfDocument;

    this._firstPageCapability.resolve();
  }

  #onFind(state) {
    if (!state) {
      return;
    }

    const pdfDocument = this._pdfDocument;
    const {
      type
    } = state;

    if (this._state === null || this.#shouldDirtyMatch(state)) {
      this._dirtyMatch = true;
    }

    this._state = state;

    if (type !== "highlightallchange") {
      this.#updateUIState(FindState.PENDING);
    }

    this._firstPageCapability.promise.then(() => {
      if (!this._pdfDocument || pdfDocument && this._pdfDocument !== pdfDocument) {
        return;
      }

      this.#extractText();
      const findbarClosed = !this._highlightMatches;
      const pendingTimeout = !!this._findTimeout;

      if (this._findTimeout) {
        clearTimeout(this._findTimeout);
        this._findTimeout = null;
      }

      if (!type) {
        this._findTimeout = setTimeout(() => {
          this.#nextMatch();
          this._findTimeout = null;
        }, FIND_TIMEOUT);
      } else if (this._dirtyMatch) {
        this.#nextMatch();
      } else if (type === "again") {
        this.#nextMatch();

        if (findbarClosed && this._state.highlightAll) {
          this.#updateAllPages();
        }
      } else if (type === "highlightallchange") {
        if (pendingTimeout) {
          this.#nextMatch();
        } else {
          this._highlightMatches = true;
        }

        this.#updateAllPages();
      } else {
        this.#nextMatch();
      }
    });
  }

  scrollMatchIntoView({
    element = null,
    selectedLeft = 0,
    pageIndex = -1,
    matchIndex = -1
  }) {
    if (!this._scrollMatches || !element) {
      return;
    } else if (matchIndex === -1 || matchIndex !== this._selected.matchIdx) {
      return;
    } else if (pageIndex === -1 || pageIndex !== this._selected.pageIdx) {
      return;
    }

    this._scrollMatches = false;
    const spot = {
      top: MATCH_SCROLL_OFFSET_TOP,
      left: selectedLeft + MATCH_SCROLL_OFFSET_LEFT
    };
    (0, _ui_utils.scrollIntoView)(element, spot, true);
  }

  #reset() {
    this._highlightMatches = false;
    this._scrollMatches = false;
    this._pdfDocument = null;
    this._pageMatches = [];
    this._pageMatchesLength = [];
    this._state = null;
    this._selected = {
      pageIdx: -1,
      matchIdx: -1
    };
    this._offset = {
      pageIdx: null,
      matchIdx: null,
      wrapped: false
    };
    this._extractTextPromises = [];
    this._pageContents = [];
    this._pageDiffs = [];
    this._hasDiacritics = [];
    this._matchesCountTotal = 0;
    this._pagesToSearch = null;
    this._pendingFindMatches = new Set();
    this._resumePageIdx = null;
    this._dirtyMatch = false;
    clearTimeout(this._findTimeout);
    this._findTimeout = null;
    this._firstPageCapability = (0, _pdfjsLib.createPromiseCapability)();
  }

  get #query() {
    if (this._state.query !== this._rawQuery) {
      this._rawQuery = this._state.query;
      [this._normalizedQuery] = normalize(this._state.query);
    }

    return this._normalizedQuery;
  }

  #shouldDirtyMatch(state) {
    if (state.query !== this._state.query) {
      return true;
    }

    switch (state.type) {
      case "again":
        const pageNumber = this._selected.pageIdx + 1;
        const linkService = this._linkService;

        if (pageNumber >= 1 && pageNumber <= linkService.pagesCount && pageNumber !== linkService.page && !linkService.isPageVisible(pageNumber)) {
          return true;
        }

        return false;

      case "highlightallchange":
        return false;
    }

    return true;
  }

  #isEntireWord(content, startIdx, length) {
    let match = content.slice(0, startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);

    if (match) {
      const first = content.charCodeAt(startIdx);
      const limit = match[1].charCodeAt(0);

      if ((0, _pdf_find_utils.getCharacterType)(first) === (0, _pdf_find_utils.getCharacterType)(limit)) {
        return false;
      }
    }

    match = content.slice(startIdx + length).match(NOT_DIACRITIC_FROM_START_REG_EXP);

    if (match) {
      const last = content.charCodeAt(startIdx + length - 1);
      const limit = match[1].charCodeAt(0);

      if ((0, _pdf_find_utils.getCharacterType)(last) === (0, _pdf_find_utils.getCharacterType)(limit)) {
        return false;
      }
    }

    return true;
  }

  #calculateRegExpMatch(query, entireWord, pageIndex, pageContent) {
    const matches = [],
          matchesLength = [];
    const diffs = this._pageDiffs[pageIndex];
    let match;

    while ((match = query.exec(pageContent)) !== null) {
      if (entireWord && !this.#isEntireWord(pageContent, match.index, match[0].length)) {
        continue;
      }

      const [matchPos, matchLen] = getOriginalIndex(diffs, match.index, match[0].length);

      if (matchLen) {
        matches.push(matchPos);
        matchesLength.push(matchLen);
      }
    }

    this._pageMatches[pageIndex] = matches;
    this._pageMatchesLength[pageIndex] = matchesLength;
  }

  #convertToRegExpString(query, hasDiacritics) {
    const {
      matchDiacritics
    } = this._state;
    let isUnicode = false;
    query = query.replace(SPECIAL_CHARS_REG_EXP, (match, p1, p2, p3, p4, p5) => {
      if (p1) {
        return `[ ]*\\${p1}[ ]*`;
      }

      if (p2) {
        return `[ ]*${p2}[ ]*`;
      }

      if (p3) {
        return "[ ]+";
      }

      if (matchDiacritics) {
        return p4 || p5;
      }

      if (p4) {
        return DIACRITICS_EXCEPTION.has(p4.charCodeAt(0)) ? p4 : "";
      }

      if (hasDiacritics) {
        isUnicode = true;
        return `${p5}\\p{M}*`;
      }

      return p5;
    });
    const trailingSpaces = "[ ]*";

    if (query.endsWith(trailingSpaces)) {
      query = query.slice(0, query.length - trailingSpaces.length);
    }

    if (matchDiacritics) {
      if (hasDiacritics) {
        isUnicode = true;
        query = `${query}(?=[${DIACRITICS_EXCEPTION_STR}]|[^\\p{M}]|$)`;
      }
    }

    return [isUnicode, query];
  }

  #calculateMatch(pageIndex) {
    let query = this.#query;

    if (query.length === 0) {
      return;
    }

    const {
      caseSensitive,
      entireWord,
      phraseSearch
    } = this._state;
    const pageContent = this._pageContents[pageIndex];
    const hasDiacritics = this._hasDiacritics[pageIndex];
    let isUnicode = false;

    if (phraseSearch) {
      [isUnicode, query] = this.#convertToRegExpString(query, hasDiacritics);
    } else {
      const match = query.match(/\S+/g);

      if (match) {
        query = match.sort().reverse().map(q => {
          const [isUnicodePart, queryPart] = this.#convertToRegExpString(q, hasDiacritics);
          isUnicode ||= isUnicodePart;
          return `(${queryPart})`;
        }).join("|");
      }
    }

    const flags = `g${isUnicode ? "u" : ""}${caseSensitive ? "" : "i"}`;
    query = new RegExp(query, flags);
    this.#calculateRegExpMatch(query, entireWord, pageIndex, pageContent);

    if (this._state.highlightAll) {
      this.#updatePage(pageIndex);
    }

    if (this._resumePageIdx === pageIndex) {
      this._resumePageIdx = null;
      this.#nextPageMatch();
    }

    const pageMatchesCount = this._pageMatches[pageIndex].length;

    if (pageMatchesCount > 0) {
      this._matchesCountTotal += pageMatchesCount;
      this.#updateUIResultsCount();
    }
  }

  #extractText() {
    if (this._extractTextPromises.length > 0) {
      return;
    }

    let promise = Promise.resolve();

    for (let i = 0, ii = this._linkService.pagesCount; i < ii; i++) {
      const extractTextCapability = (0, _pdfjsLib.createPromiseCapability)();
      this._extractTextPromises[i] = extractTextCapability.promise;
      promise = promise.then(() => {
        return this._pdfDocument.getPage(i + 1).then(pdfPage => {
          return pdfPage.getTextContent();
        }).then(textContent => {
          const strBuf = [];

          for (const textItem of textContent.items) {
            strBuf.push(textItem.str);

            if (textItem.hasEOL) {
              strBuf.push("\n");
            }
          }

          [this._pageContents[i], this._pageDiffs[i], this._hasDiacritics[i]] = normalize(strBuf.join(""));
          extractTextCapability.resolve();
        }, reason => {
          console.error(`Unable to get text content for page ${i + 1}`, reason);
          this._pageContents[i] = "";
          this._pageDiffs[i] = null;
          this._hasDiacritics[i] = false;
          extractTextCapability.resolve();
        });
      });
    }
  }

  #updatePage(index) {
    if (this._scrollMatches && this._selected.pageIdx === index) {
      this._linkService.page = index + 1;
    }

    this._eventBus.dispatch("updatetextlayermatches", {
      source: this,
      pageIndex: index
    });
  }

  #updateAllPages() {
    this._eventBus.dispatch("updatetextlayermatches", {
      source: this,
      pageIndex: -1
    });
  }

  #nextMatch() {
    const previous = this._state.findPrevious;
    const currentPageIndex = this._linkService.page - 1;
    const numPages = this._linkService.pagesCount;
    this._highlightMatches = true;

    if (this._dirtyMatch) {
      this._dirtyMatch = false;
      this._selected.pageIdx = this._selected.matchIdx = -1;
      this._offset.pageIdx = currentPageIndex;
      this._offset.matchIdx = null;
      this._offset.wrapped = false;
      this._resumePageIdx = null;
      this._pageMatches.length = 0;
      this._pageMatchesLength.length = 0;
      this._matchesCountTotal = 0;
      this.#updateAllPages();

      for (let i = 0; i < numPages; i++) {
        if (this._pendingFindMatches.has(i)) {
          continue;
        }

        this._pendingFindMatches.add(i);

        this._extractTextPromises[i].then(() => {
          this._pendingFindMatches.delete(i);

          this.#calculateMatch(i);
        });
      }
    }

    if (this.#query === "") {
      this.#updateUIState(FindState.FOUND);
      return;
    }

    if (this._resumePageIdx) {
      return;
    }

    const offset = this._offset;
    this._pagesToSearch = numPages;

    if (offset.matchIdx !== null) {
      const numPageMatches = this._pageMatches[offset.pageIdx].length;

      if (!previous && offset.matchIdx + 1 < numPageMatches || previous && offset.matchIdx > 0) {
        offset.matchIdx = previous ? offset.matchIdx - 1 : offset.matchIdx + 1;
        this.#updateMatch(true);
        return;
      }

      this.#advanceOffsetPage(previous);
    }

    this.#nextPageMatch();
  }

  #matchesReady(matches) {
    const offset = this._offset;
    const numMatches = matches.length;
    const previous = this._state.findPrevious;

    if (numMatches) {
      offset.matchIdx = previous ? numMatches - 1 : 0;
      this.#updateMatch(true);
      return true;
    }

    this.#advanceOffsetPage(previous);

    if (offset.wrapped) {
      offset.matchIdx = null;

      if (this._pagesToSearch < 0) {
        this.#updateMatch(false);
        return true;
      }
    }

    return false;
  }

  #nextPageMatch() {
    if (this._resumePageIdx !== null) {
      console.error("There can only be one pending page.");
    }

    let matches = null;

    do {
      const pageIdx = this._offset.pageIdx;
      matches = this._pageMatches[pageIdx];

      if (!matches) {
        this._resumePageIdx = pageIdx;
        break;
      }
    } while (!this.#matchesReady(matches));
  }

  #advanceOffsetPage(previous) {
    const offset = this._offset;
    const numPages = this._linkService.pagesCount;
    offset.pageIdx = previous ? offset.pageIdx - 1 : offset.pageIdx + 1;
    offset.matchIdx = null;
    this._pagesToSearch--;

    if (offset.pageIdx >= numPages || offset.pageIdx < 0) {
      offset.pageIdx = previous ? numPages - 1 : 0;
      offset.wrapped = true;
    }
  }

  #updateMatch(found = false) {
    let state = FindState.NOT_FOUND;
    const wrapped = this._offset.wrapped;
    this._offset.wrapped = false;

    if (found) {
      const previousPage = this._selected.pageIdx;
      this._selected.pageIdx = this._offset.pageIdx;
      this._selected.matchIdx = this._offset.matchIdx;
      state = wrapped ? FindState.WRAPPED : FindState.FOUND;

      if (previousPage !== -1 && previousPage !== this._selected.pageIdx) {
        this.#updatePage(previousPage);
      }
    }

    this.#updateUIState(state, this._state.findPrevious);

    if (this._selected.pageIdx !== -1) {
      this._scrollMatches = true;
      this.#updatePage(this._selected.pageIdx);
    }
  }

  #onFindBarClose(evt) {
    const pdfDocument = this._pdfDocument;

    this._firstPageCapability.promise.then(() => {
      if (!this._pdfDocument || pdfDocument && this._pdfDocument !== pdfDocument) {
        return;
      }

      if (this._findTimeout) {
        clearTimeout(this._findTimeout);
        this._findTimeout = null;
      }

      if (this._resumePageIdx) {
        this._resumePageIdx = null;
        this._dirtyMatch = true;
      }

      this.#updateUIState(FindState.FOUND);
      this._highlightMatches = false;
      this.#updateAllPages();
    });
  }

  #requestMatchesCount() {
    const {
      pageIdx,
      matchIdx
    } = this._selected;
    let current = 0,
        total = this._matchesCountTotal;

    if (matchIdx !== -1) {
      for (let i = 0; i < pageIdx; i++) {
        current += this._pageMatches[i]?.length || 0;
      }

      current += matchIdx + 1;
    }

    if (current < 1 || current > total) {
      current = total = 0;
    }

    return {
      current,
      total
    };
  }

  #updateUIResultsCount() {
    this._eventBus.dispatch("updatefindmatchescount", {
      source: this,
      matchesCount: this.#requestMatchesCount()
    });
  }

  #updateUIState(state, previous = false) {
    this._eventBus.dispatch("updatefindcontrolstate", {
      source: this,
      state,
      previous,
      matchesCount: this.#requestMatchesCount(),
      rawQuery: this._state?.query ?? null
    });
  }

}

exports.PDFFindController = PDFFindController;

/***/ }),
/* 21 */
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CharacterType = void 0;
exports.getCharacterType = getCharacterType;
const CharacterType = {
  SPACE: 0,
  ALPHA_LETTER: 1,
  PUNCT: 2,
  HAN_LETTER: 3,
  KATAKANA_LETTER: 4,
  HIRAGANA_LETTER: 5,
  HALFWIDTH_KATAKANA_LETTER: 6,
  THAI_LETTER: 7
};
exports.CharacterType = CharacterType;

function isAlphabeticalScript(charCode) {
  return charCode < 0x2e80;
}

function isAscii(charCode) {
  return (charCode & 0xff80) === 0;
}

function isAsciiAlpha(charCode) {
  return charCode >= 0x61 && charCode <= 0x7a || charCode >= 0x41 && charCode <= 0x5a;
}

function isAsciiDigit(charCode) {
  return charCode >= 0x30 && charCode <= 0x39;
}

function isAsciiSpace(charCode) {
  return charCode === 0x20 || charCode === 0x09 || charCode === 0x0d || charCode === 0x0a;
}

function isHan(charCode) {
  return charCode >= 0x3400 && charCode <= 0x9fff || charCode >= 0xf900 && charCode <= 0xfaff;
}

function isKatakana(charCode) {
  return charCode >= 0x30a0 && charCode <= 0x30ff;
}

function isHiragana(charCode) {
  return charCode >= 0x3040 && charCode <= 0x309f;
}

function isHalfwidthKatakana(charCode) {
  return charCode >= 0xff60 && charCode <= 0xff9f;
}

function isThai(charCode) {
  return (charCode & 0xff80) === 0x0e00;
}

function getCharacterType(charCode) {
  if (isAlphabeticalScript(charCode)) {
    if (isAscii(charCode)) {
      if (isAsciiSpace(charCode)) {
        return CharacterType.SPACE;
      } else if (isAsciiAlpha(charCode) || isAsciiDigit(charCode) || charCode === 0x5f) {
        return CharacterType.ALPHA_LETTER;
      }

      return CharacterType.PUNCT;
    } else if (isThai(charCode)) {
      return CharacterType.THAI_LETTER;
    } else if (charCode === 0xa0) {
      return CharacterType.SPACE;
    }

    return CharacterType.ALPHA_LETTER;
  }

  if (isHan(charCode)) {
    return CharacterType.HAN_LETTER;
  } else if (isKatakana(charCode)) {
    return CharacterType.KATAKANA_LETTER;
  } else if (isHiragana(charCode)) {
    return CharacterType.HIRAGANA_LETTER;
  } else if (isHalfwidthKatakana(charCode)) {
    return CharacterType.HALFWIDTH_KATAKANA_LETTER;
  }

  return CharacterType.ALPHA_LETTER;
}

/***/ }),
/* 22 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFHistory = void 0;
exports.isDestArraysEqual = isDestArraysEqual;
exports.isDestHashesEqual = isDestHashesEqual;

var _ui_utils = __w_pdfjs_require__(6);

var _event_utils = __w_pdfjs_require__(17);

const HASH_CHANGE_TIMEOUT = 1000;
const POSITION_UPDATED_THRESHOLD = 50;
const UPDATE_VIEWAREA_TIMEOUT = 1000;

function getCurrentHash() {
  return document.location.hash;
}

class PDFHistory {
  constructor({
    linkService,
    eventBus
  }) {
    this.linkService = linkService;
    this.eventBus = eventBus;
    this._initialized = false;
    this._fingerprint = "";
    this.reset();
    this._boundEvents = null;

    this.eventBus._on("pagesinit", () => {
      this._isPagesLoaded = false;

      this.eventBus._on("pagesloaded", evt => {
        this._isPagesLoaded = !!evt.pagesCount;
      }, {
        once: true
      });
    });
  }

  initialize({
    fingerprint,
    resetHistory = false,
    updateUrl = false
  }) {
    if (!fingerprint || typeof fingerprint !== "string") {
      console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');
      return;
    }

    if (this._initialized) {
      this.reset();
    }

    const reInitialized = this._fingerprint !== "" && this._fingerprint !== fingerprint;
    this._fingerprint = fingerprint;
    this._updateUrl = updateUrl === true;
    this._initialized = true;

    this._bindEvents();

    const state = window.history.state;
    this._popStateInProgress = false;
    this._blockHashChange = 0;
    this._currentHash = getCurrentHash();
    this._numPositionUpdates = 0;
    this._uid = this._maxUid = 0;
    this._destination = null;
    this._position = null;

    if (!this._isValidState(state, true) || resetHistory) {
      const {
        hash,
        page,
        rotation
      } = this._parseCurrentHash(true);

      if (!hash || reInitialized || resetHistory) {
        this._pushOrReplaceState(null, true);

        return;
      }

      this._pushOrReplaceState({
        hash,
        page,
        rotation
      }, true);

      return;
    }

    const destination = state.destination;

    this._updateInternalState(destination, state.uid, true);

    if (destination.rotation !== undefined) {
      this._initialRotation = destination.rotation;
    }

    if (destination.dest) {
      this._initialBookmark = JSON.stringify(destination.dest);
      this._destination.page = null;
    } else if (destination.hash) {
      this._initialBookmark = destination.hash;
    } else if (destination.page) {
      this._initialBookmark = `page=${destination.page}`;
    }
  }

  reset() {
    if (this._initialized) {
      this._pageHide();

      this._initialized = false;

      this._unbindEvents();
    }

    if (this._updateViewareaTimeout) {
      clearTimeout(this._updateViewareaTimeout);
      this._updateViewareaTimeout = null;
    }

    this._initialBookmark = null;
    this._initialRotation = null;
  }

  push({
    namedDest = null,
    explicitDest,
    pageNumber
  }) {
    if (!this._initialized) {
      return;
    }

    if (namedDest && typeof namedDest !== "string") {
      console.error("PDFHistory.push: " + `"${namedDest}" is not a valid namedDest parameter.`);
      return;
    } else if (!Array.isArray(explicitDest)) {
      console.error("PDFHistory.push: " + `"${explicitDest}" is not a valid explicitDest parameter.`);
      return;
    } else if (!this._isValidPage(pageNumber)) {
      if (pageNumber !== null || this._destination) {
        console.error("PDFHistory.push: " + `"${pageNumber}" is not a valid pageNumber parameter.`);
        return;
      }
    }

    const hash = namedDest || JSON.stringify(explicitDest);

    if (!hash) {
      return;
    }

    let forceReplace = false;

    if (this._destination && (isDestHashesEqual(this._destination.hash, hash) || isDestArraysEqual(this._destination.dest, explicitDest))) {
      if (this._destination.page) {
        return;
      }

      forceReplace = true;
    }

    if (this._popStateInProgress && !forceReplace) {
      return;
    }

    this._pushOrReplaceState({
      dest: explicitDest,
      hash,
      page: pageNumber,
      rotation: this.linkService.rotation
    }, forceReplace);

    if (!this._popStateInProgress) {
      this._popStateInProgress = true;
      Promise.resolve().then(() => {
        this._popStateInProgress = false;
      });
    }
  }

  pushPage(pageNumber) {
    if (!this._initialized) {
      return;
    }

    if (!this._isValidPage(pageNumber)) {
      console.error(`PDFHistory.pushPage: "${pageNumber}" is not a valid page number.`);
      return;
    }

    if (this._destination?.page === pageNumber) {
      return;
    }

    if (this._popStateInProgress) {
      return;
    }

    this._pushOrReplaceState({
      dest: null,
      hash: `page=${pageNumber}`,
      page: pageNumber,
      rotation: this.linkService.rotation
    });

    if (!this._popStateInProgress) {
      this._popStateInProgress = true;
      Promise.resolve().then(() => {
        this._popStateInProgress = false;
      });
    }
  }

  pushCurrentPosition() {
    if (!this._initialized || this._popStateInProgress) {
      return;
    }

    this._tryPushCurrentPosition();
  }

  back() {
    if (!this._initialized || this._popStateInProgress) {
      return;
    }

    const state = window.history.state;

    if (this._isValidState(state) && state.uid > 0) {
      window.history.back();
    }
  }

  forward() {
    if (!this._initialized || this._popStateInProgress) {
      return;
    }

    const state = window.history.state;

    if (this._isValidState(state) && state.uid < this._maxUid) {
      window.history.forward();
    }
  }

  get popStateInProgress() {
    return this._initialized && (this._popStateInProgress || this._blockHashChange > 0);
  }

  get initialBookmark() {
    return this._initialized ? this._initialBookmark : null;
  }

  get initialRotation() {
    return this._initialized ? this._initialRotation : null;
  }

  _pushOrReplaceState(destination, forceReplace = false) {
    const shouldReplace = forceReplace || !this._destination;
    const newState = {
      fingerprint: this._fingerprint,
      uid: shouldReplace ? this._uid : this._uid + 1,
      destination
    };

    this._updateInternalState(destination, newState.uid);

    let newUrl;

    if (this._updateUrl && destination?.hash) {
      const baseUrl = document.location.href.split("#")[0];

      if (!baseUrl.startsWith("file://")) {
        newUrl = `${baseUrl}#${destination.hash}`;
      }
    }

    if (shouldReplace) {
      window.history.replaceState(newState, "", newUrl);
    } else {
      window.history.pushState(newState, "", newUrl);
    }
  }

  _tryPushCurrentPosition(temporary = false) {
    if (!this._position) {
      return;
    }

    let position = this._position;

    if (temporary) {
      position = Object.assign(Object.create(null), this._position);
      position.temporary = true;
    }

    if (!this._destination) {
      this._pushOrReplaceState(position);

      return;
    }

    if (this._destination.temporary) {
      this._pushOrReplaceState(position, true);

      return;
    }

    if (this._destination.hash === position.hash) {
      return;
    }

    if (!this._destination.page && (POSITION_UPDATED_THRESHOLD <= 0 || this._numPositionUpdates <= POSITION_UPDATED_THRESHOLD)) {
      return;
    }

    let forceReplace = false;

    if (this._destination.page >= position.first && this._destination.page <= position.page) {
      if (this._destination.dest !== undefined || !this._destination.first) {
        return;
      }

      forceReplace = true;
    }

    this._pushOrReplaceState(position, forceReplace);
  }

  _isValidPage(val) {
    return Number.isInteger(val) && val > 0 && val <= this.linkService.pagesCount;
  }

  _isValidState(state, checkReload = false) {
    if (!state) {
      return false;
    }

    if (state.fingerprint !== this._fingerprint) {
      if (checkReload) {
        if (typeof state.fingerprint !== "string" || state.fingerprint.length !== this._fingerprint.length) {
          return false;
        }

        const [perfEntry] = performance.getEntriesByType("navigation");

        if (perfEntry?.type !== "reload") {
          return false;
        }
      } else {
        return false;
      }
    }

    if (!Number.isInteger(state.uid) || state.uid < 0) {
      return false;
    }

    if (state.destination === null || typeof state.destination !== "object") {
      return false;
    }

    return true;
  }

  _updateInternalState(destination, uid, removeTemporary = false) {
    if (this._updateViewareaTimeout) {
      clearTimeout(this._updateViewareaTimeout);
      this._updateViewareaTimeout = null;
    }

    if (removeTemporary && destination?.temporary) {
      delete destination.temporary;
    }

    this._destination = destination;
    this._uid = uid;
    this._maxUid = Math.max(this._maxUid, uid);
    this._numPositionUpdates = 0;
  }

  _parseCurrentHash(checkNameddest = false) {
    const hash = unescape(getCurrentHash()).substring(1);
    const params = (0, _ui_utils.parseQueryString)(hash);
    const nameddest = params.get("nameddest") || "";
    let page = params.get("page") | 0;

    if (!this._isValidPage(page) || checkNameddest && nameddest.length > 0) {
      page = null;
    }

    return {
      hash,
      page,
      rotation: this.linkService.rotation
    };
  }

  _updateViewarea({
    location
  }) {
    if (this._updateViewareaTimeout) {
      clearTimeout(this._updateViewareaTimeout);
      this._updateViewareaTimeout = null;
    }

    this._position = {
      hash: location.pdfOpenParams.substring(1),
      page: this.linkService.page,
      first: location.pageNumber,
      rotation: location.rotation
    };

    if (this._popStateInProgress) {
      return;
    }

    if (POSITION_UPDATED_THRESHOLD > 0 && this._isPagesLoaded && this._destination && !this._destination.page) {
      this._numPositionUpdates++;
    }

    if (UPDATE_VIEWAREA_TIMEOUT > 0) {
      this._updateViewareaTimeout = setTimeout(() => {
        if (!this._popStateInProgress) {
          this._tryPushCurrentPosition(true);
        }

        this._updateViewareaTimeout = null;
      }, UPDATE_VIEWAREA_TIMEOUT);
    }
  }

  _popState({
    state
  }) {
    const newHash = getCurrentHash(),
          hashChanged = this._currentHash !== newHash;
    this._currentHash = newHash;

    if (!state) {
      this._uid++;

      const {
        hash,
        page,
        rotation
      } = this._parseCurrentHash();

      this._pushOrReplaceState({
        hash,
        page,
        rotation
      }, true);

      return;
    }

    if (!this._isValidState(state)) {
      return;
    }

    this._popStateInProgress = true;

    if (hashChanged) {
      this._blockHashChange++;
      (0, _event_utils.waitOnEventOrTimeout)({
        target: window,
        name: "hashchange",
        delay: HASH_CHANGE_TIMEOUT
      }).then(() => {
        this._blockHashChange--;
      });
    }

    const destination = state.destination;

    this._updateInternalState(destination, state.uid, true);

    if ((0, _ui_utils.isValidRotation)(destination.rotation)) {
      this.linkService.rotation = destination.rotation;
    }

    if (destination.dest) {
      this.linkService.goToDestination(destination.dest);
    } else if (destination.hash) {
      this.linkService.setHash(destination.hash);
    } else if (destination.page) {
      this.linkService.page = destination.page;
    }

    Promise.resolve().then(() => {
      this._popStateInProgress = false;
    });
  }

  _pageHide() {
    if (!this._destination || this._destination.temporary) {
      this._tryPushCurrentPosition();
    }
  }

  _bindEvents() {
    if (this._boundEvents) {
      return;
    }

    this._boundEvents = {
      updateViewarea: this._updateViewarea.bind(this),
      popState: this._popState.bind(this),
      pageHide: this._pageHide.bind(this)
    };

    this.eventBus._on("updateviewarea", this._boundEvents.updateViewarea);

    window.addEventListener("popstate", this._boundEvents.popState);
    window.addEventListener("pagehide", this._boundEvents.pageHide);
  }

  _unbindEvents() {
    if (!this._boundEvents) {
      return;
    }

    this.eventBus._off("updateviewarea", this._boundEvents.updateViewarea);

    window.removeEventListener("popstate", this._boundEvents.popState);
    window.removeEventListener("pagehide", this._boundEvents.pageHide);
    this._boundEvents = null;
  }

}

exports.PDFHistory = PDFHistory;

function isDestHashesEqual(destHash, pushHash) {
  if (typeof destHash !== "string" || typeof pushHash !== "string") {
    return false;
  }

  if (destHash === pushHash) {
    return true;
  }

  const nameddest = (0, _ui_utils.parseQueryString)(destHash).get("nameddest");

  if (nameddest === pushHash) {
    return true;
  }

  return false;
}

function isDestArraysEqual(firstDest, secondDest) {
  function isEntryEqual(first, second) {
    if (typeof first !== typeof second) {
      return false;
    }

    if (Array.isArray(first) || Array.isArray(second)) {
      return false;
    }

    if (first !== null && typeof first === "object" && second !== null) {
      if (Object.keys(first).length !== Object.keys(second).length) {
        return false;
      }

      for (const key in first) {
        if (!isEntryEqual(first[key], second[key])) {
          return false;
        }
      }

      return true;
    }

    return first === second || Number.isNaN(first) && Number.isNaN(second);
  }

  if (!(Array.isArray(firstDest) && Array.isArray(secondDest))) {
    return false;
  }

  if (firstDest.length !== secondDest.length) {
    return false;
  }

  for (let i = 0, ii = firstDest.length; i < ii; i++) {
    if (!isEntryEqual(firstDest[i], secondDest[i])) {
      return false;
    }
  }

  return true;
}

/***/ }),
/* 23 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PDFScriptingManager = void 0;

var _ui_utils = __w_pdfjs_require__(6);

var _pdfjsLib = __w_pdfjs_require__(3);

class PDFScriptingManager {
  constructor({
    eventBus,
    sandboxBundleSrc = null,
    scriptingFactory = null,
    docPropertiesLookup = null
  }) {
    this._pdfDocument = null;
    this._pdfViewer = null;
    this._closeCapability = null;
    this._destroyCapability = null;
    this._scripting = null;
    this._mouseState = Object.create(null);
    this._ready = false;
    this._eventBus = eventBus;
    this._sandboxBundleSrc = sandboxBundleSrc;
    this._scriptingFactory = scriptingFactory;
    this._docPropertiesLookup = docPropertiesLookup;

    if (!this._scriptingFactory) {
      window.addEventListener("updatefromsandbox", event => {
        this._eventBus.dispatch("updatefromsandbox", {
          source: window,
          detail: event.detail
        });
      });
    }
  }

  setViewer(pdfViewer) {
    this._pdfViewer = pdfViewer;
  }

  async setDocument(pdfDocument) {
    if (this._pdfDocument) {
      await this._destroyScripting();
    }

    this._pdfDocument = pdfDocument;

    if (!pdfDocument) {
      return;
    }

    const [objects, calculationOrder, docActions] = await Promise.all([pdfDocument.getFieldObjects(), pdfDocument.getCalculationOrderIds(), pdfDocument.getJSActions()]);

    if (!objects && !docActions) {
      await this._destroyScripting();
      return;
    }

    if (pdfDocument !== this._pdfDocument) {
      return;
    }

    try {
      this._scripting = this._createScripting();
    } catch (error) {
      console.error(`PDFScriptingManager.setDocument: "${error?.message}".`);
      await this._destroyScripting();
      return;
    }

    this._internalEvents.set("updatefromsandbox", event => {
      if (event?.source !== window) {
        return;
      }

      this._updateFromSandbox(event.detail);
    });

    this._internalEvents.set("dispatcheventinsandbox", event => {
      this._scripting?.dispatchEventInSandbox(event.detail);
    });

    this._internalEvents.set("pagechanging", ({
      pageNumber,
      previous
    }) => {
      if (pageNumber === previous) {
        return;
      }

      this._dispatchPageClose(previous);

      this._dispatchPageOpen(pageNumber);
    });

    this._internalEvents.set("pagerendered", ({
      pageNumber
    }) => {
      if (!this._pageOpenPending.has(pageNumber)) {
        return;
      }

      if (pageNumber !== this._pdfViewer.currentPageNumber) {
        return;
      }

      this._dispatchPageOpen(pageNumber);
    });

    this._internalEvents.set("pagesdestroy", async event => {
      await this._dispatchPageClose(this._pdfViewer.currentPageNumber);
      await this._scripting?.dispatchEventInSandbox({
        id: "doc",
        name: "WillClose"
      });
      this._closeCapability?.resolve();
    });

    this._domEvents.set("mousedown", event => {
      this._mouseState.isDown = true;
    });

    this._domEvents.set("mouseup", event => {
      this._mouseState.isDown = false;
    });

    for (const [name, listener] of this._internalEvents) {
      this._eventBus._on(name, listener);
    }

    for (const [name, listener] of this._domEvents) {
      window.addEventListener(name, listener, true);
    }

    try {
      const docProperties = await this._getDocProperties();

      if (pdfDocument !== this._pdfDocument) {
        return;
      }

      await this._scripting.createSandbox({
        objects,
        calculationOrder,
        appInfo: {
          platform: navigator.platform,
          language: navigator.language
        },
        docInfo: { ...docProperties,
          actions: docActions
        }
      });

      this._eventBus.dispatch("sandboxcreated", {
        source: this
      });
    } catch (error) {
      console.error(`PDFScriptingManager.setDocument: "${error?.message}".`);
      await this._destroyScripting();
      return;
    }

    await this._scripting?.dispatchEventInSandbox({
      id: "doc",
      name: "Open"
    });
    await this._dispatchPageOpen(this._pdfViewer.currentPageNumber, true);
    Promise.resolve().then(() => {
      if (pdfDocument === this._pdfDocument) {
        this._ready = true;
      }
    });
  }

  async dispatchWillSave(detail) {
    return this._scripting?.dispatchEventInSandbox({
      id: "doc",
      name: "WillSave"
    });
  }

  async dispatchDidSave(detail) {
    return this._scripting?.dispatchEventInSandbox({
      id: "doc",
      name: "DidSave"
    });
  }

  async dispatchWillPrint(detail) {
    return this._scripting?.dispatchEventInSandbox({
      id: "doc",
      name: "WillPrint"
    });
  }

  async dispatchDidPrint(detail) {
    return this._scripting?.dispatchEventInSandbox({
      id: "doc",
      name: "DidPrint"
    });
  }

  get mouseState() {
    return this._mouseState;
  }

  get destroyPromise() {
    return this._destroyCapability?.promise || null;
  }

  get ready() {
    return this._ready;
  }

  get _internalEvents() {
    return (0, _pdfjsLib.shadow)(this, "_internalEvents", new Map());
  }

  get _domEvents() {
    return (0, _pdfjsLib.shadow)(this, "_domEvents", new Map());
  }

  get _pageOpenPending() {
    return (0, _pdfjsLib.shadow)(this, "_pageOpenPending", new Set());
  }

  get _visitedPages() {
    return (0, _pdfjsLib.shadow)(this, "_visitedPages", new Map());
  }

  async _updateFromSandbox(detail) {
    const isInPresentationMode = this._pdfViewer.isInPresentationMode || this._pdfViewer.isChangingPresentationMode;
    const {
      id,
      siblings,
      command,
      value
    } = detail;

    if (!id) {
      switch (command) {
        case "clear":
          console.clear();
          break;

        case "error":
          console.error(value);
          break;

        case "layout":
          if (isInPresentationMode) {
            return;
          }

          const modes = (0, _ui_utils.apiPageLayoutToViewerModes)(value);
          this._pdfViewer.spreadMode = modes.spreadMode;
          break;

        case "page-num":
          this._pdfViewer.currentPageNumber = value + 1;
          break;

        case "print":
          await this._pdfViewer.pagesPromise;

          this._eventBus.dispatch("print", {
            source: this
          });

          break;

        case "println":
          console.log(value);
          break;

        case "zoom":
          if (isInPresentationMode) {
            return;
          }

          this._pdfViewer.currentScaleValue = value;
          break;

        case "SaveAs":
          this._eventBus.dispatch("save", {
            source: this
          });

          break;

        case "FirstPage":
          this._pdfViewer.currentPageNumber = 1;
          break;

        case "LastPage":
          this._pdfViewer.currentPageNumber = this._pdfViewer.pagesCount;
          break;

        case "NextPage":
          this._pdfViewer.nextPage();

          break;

        case "PrevPage":
          this._pdfViewer.previousPage();

          break;

        case "ZoomViewIn":
          if (isInPresentationMode) {
            return;
          }

          this._pdfViewer.increaseScale();

          break;

        case "ZoomViewOut":
          if (isInPresentationMode) {
            return;
          }

          this._pdfViewer.decreaseScale();

          break;
      }

      return;
    }

    if (isInPresentationMode) {
      if (detail.focus) {
        return;
      }
    }

    delete detail.id;
    delete detail.siblings;
    const ids = siblings ? [id, ...siblings] : [id];

    for (const elementId of ids) {
      const element = document.getElementById(elementId);

      if (element) {
        element.dispatchEvent(new CustomEvent("updatefromsandbox", {
          detail
        }));
      } else {
        this._pdfDocument?.annotationStorage.setValue(elementId, detail);
      }
    }
  }

  async _dispatchPageOpen(pageNumber, initialize = false) {
    const pdfDocument = this._pdfDocument,
          visitedPages = this._visitedPages;

    if (initialize) {
      this._closeCapability = (0, _pdfjsLib.createPromiseCapability)();
    }

    if (!this._closeCapability) {
      return;
    }

    const pageView = this._pdfViewer.getPageView(pageNumber - 1);

    if (pageView?.renderingState !== _ui_utils.RenderingStates.FINISHED) {
      this._pageOpenPending.add(pageNumber);

      return;
    }

    this._pageOpenPending.delete(pageNumber);

    const actionsPromise = (async () => {
      const actions = await (!visitedPages.has(pageNumber) ? pageView.pdfPage?.getJSActions() : null);

      if (pdfDocument !== this._pdfDocument) {
        return;
      }

      await this._scripting?.dispatchEventInSandbox({
        id: "page",
        name: "PageOpen",
        pageNumber,
        actions
      });
    })();

    visitedPages.set(pageNumber, actionsPromise);
  }

  async _dispatchPageClose(pageNumber) {
    const pdfDocument = this._pdfDocument,
          visitedPages = this._visitedPages;

    if (!this._closeCapability) {
      return;
    }

    if (this._pageOpenPending.has(pageNumber)) {
      return;
    }

    const actionsPromise = visitedPages.get(pageNumber);

    if (!actionsPromise) {
      return;
    }

    visitedPages.set(pageNumber, null);
    await actionsPromise;

    if (pdfDocument !== this._pdfDocument) {
      return;
    }

    await this._scripting?.dispatchEventInSandbox({
      id: "page",
      name: "PageClose",
      pageNumber
    });
  }

  async _getDocProperties() {
    if (this._docPropertiesLookup) {
      return this._docPropertiesLookup(this._pdfDocument);
    }

    const {
      docPropertiesLookup
    } = __w_pdfjs_require__(24);

    return docPropertiesLookup(this._pdfDocument);
  }

  _createScripting() {
    this._destroyCapability = (0, _pdfjsLib.createPromiseCapability)();

    if (this._scripting) {
      throw new Error("_createScripting: Scripting already exists.");
    }

    if (this._scriptingFactory) {
      return this._scriptingFactory.createScripting({
        sandboxBundleSrc: this._sandboxBundleSrc
      });
    }

    const {
      GenericScripting
    } = __w_pdfjs_require__(24);

    return new GenericScripting(this._sandboxBundleSrc);
  }

  async _destroyScripting() {
    if (!this._scripting) {
      this._pdfDocument = null;
      this._destroyCapability?.resolve();
      return;
    }

    if (this._closeCapability) {
      await Promise.race([this._closeCapability.promise, new Promise(resolve => {
        setTimeout(resolve, 1000);
      })]).catch(reason => {});
      this._closeCapability = null;
    }

    this._pdfDocument = null;

    try {
      await this._scripting.destroySandbox();
    } catch (ex) {}

    for (const [name, listener] of this._internalEvents) {
      this._eventBus._off(name, listener);
    }

    this._internalEvents.clear();

    for (const [name, listener] of this._domEvents) {
      window.removeEventListener(name, listener, true);
    }

    this._domEvents.clear();

    this._pageOpenPending.clear();

    this._visitedPages.clear();

    this._scripting = null;
    delete this._mouseState.isDown;
    this._ready = false;
    this._destroyCapability?.resolve();
  }

}

exports.PDFScriptingManager = PDFScriptingManager;

/***/ }),
/* 24 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GenericScripting = void 0;
exports.docPropertiesLookup = docPropertiesLookup;

var _pdfjsLib = __w_pdfjs_require__(3);

async function docPropertiesLookup(pdfDocument) {
  const url = "",
        baseUrl = url.split("#")[0];
  let {
    info,
    metadata,
    contentDispositionFilename,
    contentLength
  } = await pdfDocument.getMetadata();

  if (!contentLength) {
    const {
      length
    } = await pdfDocument.getDownloadInfo();
    contentLength = length;
  }

  return { ...info,
    baseURL: baseUrl,
    filesize: contentLength,
    filename: contentDispositionFilename || (0, _pdfjsLib.getPdfFilenameFromUrl)(url),
    metadata: metadata?.getRaw(),
    authors: metadata?.get("dc:creator"),
    numPages: pdfDocument.numPages,
    URL: url
  };
}

class GenericScripting {
  constructor(sandboxBundleSrc) {
    this._ready = (0, _pdfjsLib.loadScript)(sandboxBundleSrc, true).then(() => {
      return window.pdfjsSandbox.QuickJSSandbox();
    });
  }

  async createSandbox(data) {
    const sandbox = await this._ready;
    sandbox.create(data);
  }

  async dispatchEventInSandbox(event) {
    const sandbox = await this._ready;
    setTimeout(() => sandbox.dispatchEvent(event), 0);
  }

  async destroySandbox() {
    const sandbox = await this._ready;
    sandbox.nukeSandbox();
  }

}

exports.GenericScripting = GenericScripting;

/***/ })
/******/ 	]);
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __w_pdfjs_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
Object.defineProperty(exports, "AnnotationLayerBuilder", ({
  enumerable: true,
  get: function () {
    return _annotation_layer_builder.AnnotationLayerBuilder;
  }
}));
Object.defineProperty(exports, "DefaultAnnotationLayerFactory", ({
  enumerable: true,
  get: function () {
    return _default_factory.DefaultAnnotationLayerFactory;
  }
}));
Object.defineProperty(exports, "DefaultStructTreeLayerFactory", ({
  enumerable: true,
  get: function () {
    return _default_factory.DefaultStructTreeLayerFactory;
  }
}));
Object.defineProperty(exports, "DefaultTextLayerFactory", ({
  enumerable: true,
  get: function () {
    return _default_factory.DefaultTextLayerFactory;
  }
}));
Object.defineProperty(exports, "DefaultXfaLayerFactory", ({
  enumerable: true,
  get: function () {
    return _default_factory.DefaultXfaLayerFactory;
  }
}));
Object.defineProperty(exports, "DownloadManager", ({
  enumerable: true,
  get: function () {
    return _download_manager.DownloadManager;
  }
}));
Object.defineProperty(exports, "EventBus", ({
  enumerable: true,
  get: function () {
    return _event_utils.EventBus;
  }
}));
Object.defineProperty(exports, "GenericL10n", ({
  enumerable: true,
  get: function () {
    return _genericl10n.GenericL10n;
  }
}));
Object.defineProperty(exports, "LinkTarget", ({
  enumerable: true,
  get: function () {
    return _pdf_link_service.LinkTarget;
  }
}));
Object.defineProperty(exports, "NullL10n", ({
  enumerable: true,
  get: function () {
    return _l10n_utils.NullL10n;
  }
}));
Object.defineProperty(exports, "PDFFindController", ({
  enumerable: true,
  get: function () {
    return _pdf_find_controller.PDFFindController;
  }
}));
Object.defineProperty(exports, "PDFHistory", ({
  enumerable: true,
  get: function () {
    return _pdf_history.PDFHistory;
  }
}));
Object.defineProperty(exports, "PDFLinkService", ({
  enumerable: true,
  get: function () {
    return _pdf_link_service.PDFLinkService;
  }
}));
Object.defineProperty(exports, "PDFPageView", ({
  enumerable: true,
  get: function () {
    return _pdf_page_view.PDFPageView;
  }
}));
Object.defineProperty(exports, "PDFScriptingManager", ({
  enumerable: true,
  get: function () {
    return _pdf_scripting_manager.PDFScriptingManager;
  }
}));
Object.defineProperty(exports, "PDFSinglePageViewer", ({
  enumerable: true,
  get: function () {
    return _pdf_viewer.PDFSinglePageViewer;
  }
}));
Object.defineProperty(exports, "PDFViewer", ({
  enumerable: true,
  get: function () {
    return _pdf_viewer.PDFViewer;
  }
}));
Object.defineProperty(exports, "ProgressBar", ({
  enumerable: true,
  get: function () {
    return _ui_utils.ProgressBar;
  }
}));
Object.defineProperty(exports, "SimpleLinkService", ({
  enumerable: true,
  get: function () {
    return _pdf_link_service.SimpleLinkService;
  }
}));
Object.defineProperty(exports, "StructTreeLayerBuilder", ({
  enumerable: true,
  get: function () {
    return _struct_tree_layer_builder.StructTreeLayerBuilder;
  }
}));
Object.defineProperty(exports, "TextLayerBuilder", ({
  enumerable: true,
  get: function () {
    return _text_layer_builder.TextLayerBuilder;
  }
}));
Object.defineProperty(exports, "XfaLayerBuilder", ({
  enumerable: true,
  get: function () {
    return _xfa_layer_builder.XfaLayerBuilder;
  }
}));
Object.defineProperty(exports, "parseQueryString", ({
  enumerable: true,
  get: function () {
    return _ui_utils.parseQueryString;
  }
}));

var _default_factory = __w_pdfjs_require__(1);

var _pdf_link_service = __w_pdfjs_require__(5);

var _ui_utils = __w_pdfjs_require__(6);

var _pdf_viewer = __w_pdfjs_require__(10);

var _annotation_layer_builder = __w_pdfjs_require__(2);

var _download_manager = __w_pdfjs_require__(16);

var _event_utils = __w_pdfjs_require__(17);

var _genericl10n = __w_pdfjs_require__(18);

var _l10n_utils = __w_pdfjs_require__(4);

var _pdf_find_controller = __w_pdfjs_require__(20);

var _pdf_history = __w_pdfjs_require__(22);

var _pdf_page_view = __w_pdfjs_require__(12);

var _pdf_scripting_manager = __w_pdfjs_require__(23);

var _struct_tree_layer_builder = __w_pdfjs_require__(7);

var _text_layer_builder = __w_pdfjs_require__(8);

var _xfa_layer_builder = __w_pdfjs_require__(9);

const pdfjsVersion = '2.14.305';
const pdfjsBuild = 'eaaa8b4ad';
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=pdf_viewer.js.map

/***/ }),

/***/ "./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/***/ ((module) => {

"use strict";
/* eslint-env node */


// SDP helpers.
const SDPUtils = {};

// Generate an alphanumeric identifier for cname or mids.
// TODO: use UUIDs instead? https://gist.github.com/jed/982883
SDPUtils.generateIdentifier = function() {
  return Math.random().toString(36).substr(2, 10);
};

// The RTCP CNAME used by all peerconnections from the same JS.
SDPUtils.localCName = SDPUtils.generateIdentifier();

// Splits SDP into lines, dealing with both CRLF and LF.
SDPUtils.splitLines = function(blob) {
  return blob.trim().split('\n').map(line => line.trim());
};
// Splits SDP into sessionpart and mediasections. Ensures CRLF.
SDPUtils.splitSections = function(blob) {
  const parts = blob.split('\nm=');
  return parts.map((part, index) => (index > 0 ?
    'm=' + part : part).trim() + '\r\n');
};

// Returns the session description.
SDPUtils.getDescription = function(blob) {
  const sections = SDPUtils.splitSections(blob);
  return sections && sections[0];
};

// Returns the individual media sections.
SDPUtils.getMediaSections = function(blob) {
  const sections = SDPUtils.splitSections(blob);
  sections.shift();
  return sections;
};

// Returns lines that start with a certain prefix.
SDPUtils.matchPrefix = function(blob, prefix) {
  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);
};

// Parses an ICE candidate line. Sample input:
// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8
// rport 55996"
// Input can be prefixed with a=.
SDPUtils.parseCandidate = function(line) {
  let parts;
  // Parse both variants.
  if (line.indexOf('a=candidate:') === 0) {
    parts = line.substring(12).split(' ');
  } else {
    parts = line.substring(10).split(' ');
  }

  const candidate = {
    foundation: parts[0],
    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],
    protocol: parts[2].toLowerCase(),
    priority: parseInt(parts[3], 10),
    ip: parts[4],
    address: parts[4], // address is an alias for ip.
    port: parseInt(parts[5], 10),
    // skip parts[6] == 'typ'
    type: parts[7],
  };

  for (let i = 8; i < parts.length; i += 2) {
    switch (parts[i]) {
      case 'raddr':
        candidate.relatedAddress = parts[i + 1];
        break;
      case 'rport':
        candidate.relatedPort = parseInt(parts[i + 1], 10);
        break;
      case 'tcptype':
        candidate.tcpType = parts[i + 1];
        break;
      case 'ufrag':
        candidate.ufrag = parts[i + 1]; // for backward compatibility.
        candidate.usernameFragment = parts[i + 1];
        break;
      default: // extension handling, in particular ufrag. Don't overwrite.
        if (candidate[parts[i]] === undefined) {
          candidate[parts[i]] = parts[i + 1];
        }
        break;
    }
  }
  return candidate;
};

// Translates a candidate object into SDP candidate attribute.
// This does not include the a= prefix!
SDPUtils.writeCandidate = function(candidate) {
  const sdp = [];
  sdp.push(candidate.foundation);

  const component = candidate.component;
  if (component === 'rtp') {
    sdp.push(1);
  } else if (component === 'rtcp') {
    sdp.push(2);
  } else {
    sdp.push(component);
  }
  sdp.push(candidate.protocol.toUpperCase());
  sdp.push(candidate.priority);
  sdp.push(candidate.address || candidate.ip);
  sdp.push(candidate.port);

  const type = candidate.type;
  sdp.push('typ');
  sdp.push(type);
  if (type !== 'host' && candidate.relatedAddress &&
      candidate.relatedPort) {
    sdp.push('raddr');
    sdp.push(candidate.relatedAddress);
    sdp.push('rport');
    sdp.push(candidate.relatedPort);
  }
  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {
    sdp.push('tcptype');
    sdp.push(candidate.tcpType);
  }
  if (candidate.usernameFragment || candidate.ufrag) {
    sdp.push('ufrag');
    sdp.push(candidate.usernameFragment || candidate.ufrag);
  }
  return 'candidate:' + sdp.join(' ');
};

// Parses an ice-options line, returns an array of option tags.
// Sample input:
// a=ice-options:foo bar
SDPUtils.parseIceOptions = function(line) {
  return line.substr(14).split(' ');
};

// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:
// a=rtpmap:111 opus/48000/2
SDPUtils.parseRtpMap = function(line) {
  let parts = line.substr(9).split(' ');
  const parsed = {
    payloadType: parseInt(parts.shift(), 10), // was: id
  };

  parts = parts[0].split('/');

  parsed.name = parts[0];
  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate
  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;
  // legacy alias, got renamed back to channels in ORTC.
  parsed.numChannels = parsed.channels;
  return parsed;
};

// Generates a rtpmap line from RTCRtpCodecCapability or
// RTCRtpCodecParameters.
SDPUtils.writeRtpMap = function(codec) {
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  const channels = codec.channels || codec.numChannels || 1;
  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +
      (channels !== 1 ? '/' + channels : '') + '\r\n';
};

// Parses a extmap line (headerextension from RFC 5285). Sample input:
// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset
SDPUtils.parseExtmap = function(line) {
  const parts = line.substr(9).split(' ');
  return {
    id: parseInt(parts[0], 10),
    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',
    uri: parts[1],
  };
};

// Generates an extmap line from RTCRtpHeaderExtensionParameters or
// RTCRtpHeaderExtension.
SDPUtils.writeExtmap = function(headerExtension) {
  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +
      (headerExtension.direction && headerExtension.direction !== 'sendrecv'
        ? '/' + headerExtension.direction
        : '') +
      ' ' + headerExtension.uri + '\r\n';
};

// Parses a fmtp line, returns dictionary. Sample input:
// a=fmtp:96 vbr=on;cng=on
// Also deals with vbr=on; cng=on
SDPUtils.parseFmtp = function(line) {
  const parsed = {};
  let kv;
  const parts = line.substr(line.indexOf(' ') + 1).split(';');
  for (let j = 0; j < parts.length; j++) {
    kv = parts[j].trim().split('=');
    parsed[kv[0].trim()] = kv[1];
  }
  return parsed;
};

// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeFmtp = function(codec) {
  let line = '';
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.parameters && Object.keys(codec.parameters).length) {
    const params = [];
    Object.keys(codec.parameters).forEach(param => {
      if (codec.parameters[param] !== undefined) {
        params.push(param + '=' + codec.parameters[param]);
      } else {
        params.push(param);
      }
    });
    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\r\n';
  }
  return line;
};

// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:
// a=rtcp-fb:98 nack rpsi
SDPUtils.parseRtcpFb = function(line) {
  const parts = line.substr(line.indexOf(' ') + 1).split(' ');
  return {
    type: parts.shift(),
    parameter: parts.join(' '),
  };
};

// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeRtcpFb = function(codec) {
  let lines = '';
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {
    // FIXME: special handling for trr-int?
    codec.rtcpFeedback.forEach(fb => {
      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +
      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +
          '\r\n';
    });
  }
  return lines;
};

// Parses a RFC 5576 ssrc media attribute. Sample input:
// a=ssrc:3735928559 cname:something
SDPUtils.parseSsrcMedia = function(line) {
  const sp = line.indexOf(' ');
  const parts = {
    ssrc: parseInt(line.substr(7, sp - 7), 10),
  };
  const colon = line.indexOf(':', sp);
  if (colon > -1) {
    parts.attribute = line.substr(sp + 1, colon - sp - 1);
    parts.value = line.substr(colon + 1);
  } else {
    parts.attribute = line.substr(sp + 1);
  }
  return parts;
};

// Parse a ssrc-group line (see RFC 5576). Sample input:
// a=ssrc-group:semantics 12 34
SDPUtils.parseSsrcGroup = function(line) {
  const parts = line.substr(13).split(' ');
  return {
    semantics: parts.shift(),
    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),
  };
};

// Extracts the MID (RFC 5888) from a media section.
// Returns the MID or undefined if no mid line was found.
SDPUtils.getMid = function(mediaSection) {
  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];
  if (mid) {
    return mid.substr(6);
  }
};

// Parses a fingerprint line for DTLS-SRTP.
SDPUtils.parseFingerprint = function(line) {
  const parts = line.substr(14).split(' ');
  return {
    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.
    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.
  };
};

// Extracts DTLS parameters from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the fingerprint line as input. See also getIceParameters.
SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {
  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=fingerprint:');
  // Note: a=setup line is ignored since we use the 'auto' role in Edge.
  return {
    role: 'auto',
    fingerprints: lines.map(SDPUtils.parseFingerprint),
  };
};

// Serializes DTLS parameters to SDP.
SDPUtils.writeDtlsParameters = function(params, setupType) {
  let sdp = 'a=setup:' + setupType + '\r\n';
  params.fingerprints.forEach(fp => {
    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\r\n';
  });
  return sdp;
};

// Parses a=crypto lines into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members
SDPUtils.parseCryptoLine = function(line) {
  const parts = line.substr(9).split(' ');
  return {
    tag: parseInt(parts[0], 10),
    cryptoSuite: parts[1],
    keyParams: parts[2],
    sessionParams: parts.slice(3),
  };
};

SDPUtils.writeCryptoLine = function(parameters) {
  return 'a=crypto:' + parameters.tag + ' ' +
    parameters.cryptoSuite + ' ' +
    (typeof parameters.keyParams === 'object'
      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)
      : parameters.keyParams) +
    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +
    '\r\n';
};

// Parses the crypto key parameters into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*
SDPUtils.parseCryptoKeyParams = function(keyParams) {
  if (keyParams.indexOf('inline:') !== 0) {
    return null;
  }
  const parts = keyParams.substr(7).split('|');
  return {
    keyMethod: 'inline',
    keySalt: parts[0],
    lifeTime: parts[1],
    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,
    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,
  };
};

SDPUtils.writeCryptoKeyParams = function(keyParams) {
  return keyParams.keyMethod + ':'
    + keyParams.keySalt +
    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +
    (keyParams.mkiValue && keyParams.mkiLength
      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength
      : '');
};

// Extracts all SDES parameters.
SDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {
  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=crypto:');
  return lines.map(SDPUtils.parseCryptoLine);
};

// Parses ICE information from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the ice-ufrag and ice-pwd lines as input.
SDPUtils.getIceParameters = function(mediaSection, sessionpart) {
  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-ufrag:')[0];
  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-pwd:')[0];
  if (!(ufrag && pwd)) {
    return null;
  }
  return {
    usernameFragment: ufrag.substr(12),
    password: pwd.substr(10),
  };
};

// Serializes ICE parameters to SDP.
SDPUtils.writeIceParameters = function(params) {
  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\r\n' +
      'a=ice-pwd:' + params.password + '\r\n';
  if (params.iceLite) {
    sdp += 'a=ice-lite\r\n';
  }
  return sdp;
};

// Parses the SDP media section and returns RTCRtpParameters.
SDPUtils.parseRtpParameters = function(mediaSection) {
  const description = {
    codecs: [],
    headerExtensions: [],
    fecMechanisms: [],
    rtcp: [],
  };
  const lines = SDPUtils.splitLines(mediaSection);
  const mline = lines[0].split(' ');
  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]
    const pt = mline[i];
    const rtpmapline = SDPUtils.matchPrefix(
      mediaSection, 'a=rtpmap:' + pt + ' ')[0];
    if (rtpmapline) {
      const codec = SDPUtils.parseRtpMap(rtpmapline);
      const fmtps = SDPUtils.matchPrefix(
        mediaSection, 'a=fmtp:' + pt + ' ');
      // Only the first a=fmtp:<pt> is considered.
      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};
      codec.rtcpFeedback = SDPUtils.matchPrefix(
        mediaSection, 'a=rtcp-fb:' + pt + ' ')
        .map(SDPUtils.parseRtcpFb);
      description.codecs.push(codec);
      // parse FEC mechanisms from rtpmap lines.
      switch (codec.name.toUpperCase()) {
        case 'RED':
        case 'ULPFEC':
          description.fecMechanisms.push(codec.name.toUpperCase());
          break;
        default: // only RED and ULPFEC are recognized as FEC mechanisms.
          break;
      }
    }
  }
  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {
    description.headerExtensions.push(SDPUtils.parseExtmap(line));
  });
  // FIXME: parse rtcp.
  return description;
};

// Generates parts of the SDP media section describing the capabilities /
// parameters.
SDPUtils.writeRtpDescription = function(kind, caps) {
  let sdp = '';

  // Build the mline.
  sdp += 'm=' + kind + ' ';
  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.
  sdp += ' UDP/TLS/RTP/SAVPF ';
  sdp += caps.codecs.map(codec => {
    if (codec.preferredPayloadType !== undefined) {
      return codec.preferredPayloadType;
    }
    return codec.payloadType;
  }).join(' ') + '\r\n';

  sdp += 'c=IN IP4 0.0.0.0\r\n';
  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\r\n';

  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.
  caps.codecs.forEach(codec => {
    sdp += SDPUtils.writeRtpMap(codec);
    sdp += SDPUtils.writeFmtp(codec);
    sdp += SDPUtils.writeRtcpFb(codec);
  });
  let maxptime = 0;
  caps.codecs.forEach(codec => {
    if (codec.maxptime > maxptime) {
      maxptime = codec.maxptime;
    }
  });
  if (maxptime > 0) {
    sdp += 'a=maxptime:' + maxptime + '\r\n';
  }

  if (caps.headerExtensions) {
    caps.headerExtensions.forEach(extension => {
      sdp += SDPUtils.writeExtmap(extension);
    });
  }
  // FIXME: write fecMechanisms.
  return sdp;
};

// Parses the SDP media section and returns an array of
// RTCRtpEncodingParameters.
SDPUtils.parseRtpEncodingParameters = function(mediaSection) {
  const encodingParameters = [];
  const description = SDPUtils.parseRtpParameters(mediaSection);
  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;
  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;

  // filter a=ssrc:... cname:, ignore PlanB-msid
  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(parts => parts.attribute === 'cname');
  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;
  let secondarySsrc;

  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')
    .map(line => {
      const parts = line.substr(17).split(' ');
      return parts.map(part => parseInt(part, 10));
    });
  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {
    secondarySsrc = flows[0][1];
  }

  description.codecs.forEach(codec => {
    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {
      let encParam = {
        ssrc: primarySsrc,
        codecPayloadType: parseInt(codec.parameters.apt, 10),
      };
      if (primarySsrc && secondarySsrc) {
        encParam.rtx = {ssrc: secondarySsrc};
      }
      encodingParameters.push(encParam);
      if (hasRed) {
        encParam = JSON.parse(JSON.stringify(encParam));
        encParam.fec = {
          ssrc: primarySsrc,
          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',
        };
        encodingParameters.push(encParam);
      }
    }
  });
  if (encodingParameters.length === 0 && primarySsrc) {
    encodingParameters.push({
      ssrc: primarySsrc,
    });
  }

  // we support both b=AS and b=TIAS but interpret AS as TIAS.
  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');
  if (bandwidth.length) {
    if (bandwidth[0].indexOf('b=TIAS:') === 0) {
      bandwidth = parseInt(bandwidth[0].substr(7), 10);
    } else if (bandwidth[0].indexOf('b=AS:') === 0) {
      // use formula from JSEP to convert b=AS to TIAS value.
      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95
          - (50 * 40 * 8);
    } else {
      bandwidth = undefined;
    }
    encodingParameters.forEach(params => {
      params.maxBitrate = bandwidth;
    });
  }
  return encodingParameters;
};

// parses http://draft.ortc.org/#rtcrtcpparameters*
SDPUtils.parseRtcpParameters = function(mediaSection) {
  const rtcpParameters = {};

  // Gets the first SSRC. Note that with RTX there might be multiple
  // SSRCs.
  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(obj => obj.attribute === 'cname')[0];
  if (remoteSsrc) {
    rtcpParameters.cname = remoteSsrc.value;
    rtcpParameters.ssrc = remoteSsrc.ssrc;
  }

  // Edge uses the compound attribute instead of reducedSize
  // compound is !reducedSize
  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');
  rtcpParameters.reducedSize = rsize.length > 0;
  rtcpParameters.compound = rsize.length === 0;

  // parses the rtcp-mux attrbute.
  // Note that Edge does not support unmuxed RTCP.
  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');
  rtcpParameters.mux = mux.length > 0;

  return rtcpParameters;
};

SDPUtils.writeRtcpParameters = function(rtcpParameters) {
  let sdp = '';
  if (rtcpParameters.reducedSize) {
    sdp += 'a=rtcp-rsize\r\n';
  }
  if (rtcpParameters.mux) {
    sdp += 'a=rtcp-mux\r\n';
  }
  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {
    sdp += 'a=ssrc:' + rtcpParameters.ssrc +
      ' cname:' + rtcpParameters.cname + '\r\n';
  }
  return sdp;
};


// parses either a=msid: or a=ssrc:... msid lines and returns
// the id of the MediaStream and MediaStreamTrack.
SDPUtils.parseMsid = function(mediaSection) {
  let parts;
  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');
  if (spec.length === 1) {
    parts = spec[0].substr(7).split(' ');
    return {stream: parts[0], track: parts[1]};
  }
  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(msidParts => msidParts.attribute === 'msid');
  if (planB.length > 0) {
    parts = planB[0].value.split(' ');
    return {stream: parts[0], track: parts[1]};
  }
};

// SCTP
// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back
// to draft-ietf-mmusic-sctp-sdp-05
SDPUtils.parseSctpDescription = function(mediaSection) {
  const mline = SDPUtils.parseMLine(mediaSection);
  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');
  let maxMessageSize;
  if (maxSizeLine.length > 0) {
    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);
  }
  if (isNaN(maxMessageSize)) {
    maxMessageSize = 65536;
  }
  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');
  if (sctpPort.length > 0) {
    return {
      port: parseInt(sctpPort[0].substr(12), 10),
      protocol: mline.fmt,
      maxMessageSize,
    };
  }
  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');
  if (sctpMapLines.length > 0) {
    const parts = sctpMapLines[0]
      .substr(10)
      .split(' ');
    return {
      port: parseInt(parts[0], 10),
      protocol: parts[1],
      maxMessageSize,
    };
  }
};

// SCTP
// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers
// support by now receiving in this format, unless we originally parsed
// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line
// protocol of DTLS/SCTP -- without UDP/ or TCP/)
SDPUtils.writeSctpDescription = function(media, sctp) {
  let output = [];
  if (media.protocol !== 'DTLS/SCTP') {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctp-port:' + sctp.port + '\r\n',
    ];
  } else {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\r\n',
    ];
  }
  if (sctp.maxMessageSize !== undefined) {
    output.push('a=max-message-size:' + sctp.maxMessageSize + '\r\n');
  }
  return output.join('');
};

// Generate a session ID for SDP.
// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1
// recommends using a cryptographically random +ve 64-bit value
// but right now this should be acceptable and within the right range
SDPUtils.generateSessionId = function() {
  return Math.random().toString().substr(2, 21);
};

// Write boiler plate for start of SDP
// sessId argument is optional - if not supplied it will
// be generated randomly
// sessVersion is optional and defaults to 2
// sessUser is optional and defaults to 'thisisadapterortc'
SDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {
  let sessionId;
  const version = sessVer !== undefined ? sessVer : 2;
  if (sessId) {
    sessionId = sessId;
  } else {
    sessionId = SDPUtils.generateSessionId();
  }
  const user = sessUser || 'thisisadapterortc';
  // FIXME: sess-id should be an NTP timestamp.
  return 'v=0\r\n' +
      'o=' + user + ' ' + sessionId + ' ' + version +
        ' IN IP4 127.0.0.1\r\n' +
      's=-\r\n' +
      't=0 0\r\n';
};

// Gets the direction from the mediaSection or the sessionpart.
SDPUtils.getDirection = function(mediaSection, sessionpart) {
  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.
  const lines = SDPUtils.splitLines(mediaSection);
  for (let i = 0; i < lines.length; i++) {
    switch (lines[i]) {
      case 'a=sendrecv':
      case 'a=sendonly':
      case 'a=recvonly':
      case 'a=inactive':
        return lines[i].substr(2);
      default:
        // FIXME: What should happen here?
    }
  }
  if (sessionpart) {
    return SDPUtils.getDirection(sessionpart);
  }
  return 'sendrecv';
};

SDPUtils.getKind = function(mediaSection) {
  const lines = SDPUtils.splitLines(mediaSection);
  const mline = lines[0].split(' ');
  return mline[0].substr(2);
};

SDPUtils.isRejected = function(mediaSection) {
  return mediaSection.split(' ', 2)[1] === '0';
};

SDPUtils.parseMLine = function(mediaSection) {
  const lines = SDPUtils.splitLines(mediaSection);
  const parts = lines[0].substr(2).split(' ');
  return {
    kind: parts[0],
    port: parseInt(parts[1], 10),
    protocol: parts[2],
    fmt: parts.slice(3).join(' '),
  };
};

SDPUtils.parseOLine = function(mediaSection) {
  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];
  const parts = line.substr(2).split(' ');
  return {
    username: parts[0],
    sessionId: parts[1],
    sessionVersion: parseInt(parts[2], 10),
    netType: parts[3],
    addressType: parts[4],
    address: parts[5],
  };
};

// a very naive interpretation of a valid SDP.
SDPUtils.isValidSDP = function(blob) {
  if (typeof blob !== 'string' || blob.length === 0) {
    return false;
  }
  const lines = SDPUtils.splitLines(blob);
  for (let i = 0; i < lines.length; i++) {
    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {
      return false;
    }
    // TODO: check the modifier a bit more.
  }
  return true;
};

// Expose public methods.
if (true) {
  module.exports = SDPUtils;
}


/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js!./style.css */ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./src/style.css");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__["default"], options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_1__["default"].locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_core.js":
/*!************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_core.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter_factory.js */ "./node_modules/webrtc-adapter/src/js/adapter_factory.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */





const adapter =
  (0,_adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__.adapterFactory)({window: typeof window === 'undefined' ? undefined : window});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (adapter);


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_factory.js":
/*!***************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_factory.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "adapterFactory": () => (/* binding */ adapterFactory)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome/chrome_shim */ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js");
/* harmony import */ var _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firefox/firefox_shim */ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js");
/* harmony import */ var _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./safari/safari_shim */ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js");
/* harmony import */ var _common_shim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common_shim */ "./node_modules/webrtc-adapter/src/js/common_shim.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_5__);
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */


  // Browser shims.






// Shimming starts here.
function adapterFactory({window} = {}, options = {
  shimChrome: true,
  shimFirefox: true,
  shimSafari: true,
}) {
  // Utils.
  const logging = _utils__WEBPACK_IMPORTED_MODULE_0__.log;
  const browserDetails = _utils__WEBPACK_IMPORTED_MODULE_0__.detectBrowser(window);

  const adapter = {
    browserDetails,
    commonShim: _common_shim__WEBPACK_IMPORTED_MODULE_4__,
    extractVersion: _utils__WEBPACK_IMPORTED_MODULE_0__.extractVersion,
    disableLog: _utils__WEBPACK_IMPORTED_MODULE_0__.disableLog,
    disableWarnings: _utils__WEBPACK_IMPORTED_MODULE_0__.disableWarnings,
    // Expose sdp as a convenience. For production apps include directly.
    sdp: sdp__WEBPACK_IMPORTED_MODULE_5__,
  };

  // Shim browser if found.
  switch (browserDetails.browser) {
    case 'chrome':
      if (!_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ || !_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection ||
          !options.shimChrome) {
        logging('Chrome shim is not included in this adapter release.');
        return adapter;
      }
      if (browserDetails.version === null) {
        logging('Chrome shim can not determine version, not shimming.');
        return adapter;
      }
      logging('adapter.js shimming chrome.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__;

      // Must be called before shimPeerConnection.
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);

      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimMediaStream(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimOnTrack(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimAddTrackRemoveTrack(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetSendersWithDtmf(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetStats(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimSenderReceiverGetStats(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.fixNegotiationNeeded(window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);
      break;
    case 'firefox':
      if (!_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ || !_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection ||
          !options.shimFirefox) {
        logging('Firefox shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming firefox.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__;

      // Must be called before shimPeerConnection.
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);

      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetUserMedia(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimOnTrack(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRemoveStream(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimSenderGetStats(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimReceiverGetStats(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRTCDataChannel(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimAddTransceiver(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetParameters(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateOffer(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateAnswer(window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);
      break;
    case 'safari':
      if (!_safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ || !options.shimSafari) {
        logging('Safari shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming safari.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__;

      // Must be called before shimCallbackAPI.
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);

      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRTCIceServerUrls(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCreateOfferLegacy(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCallbacksAPI(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimLocalStreamsAPI(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRemoteStreamsAPI(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimTrackEventTransceiver(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimGetUserMedia(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimAudioContext(window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);
      break;
    default:
      logging('Unsupported browser!');
      break;
  }

  return adapter;
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fixNegotiationNeeded": () => (/* binding */ fixNegotiationNeeded),
/* harmony export */   "shimAddTrackRemoveTrack": () => (/* binding */ shimAddTrackRemoveTrack),
/* harmony export */   "shimAddTrackRemoveTrackWithNative": () => (/* binding */ shimAddTrackRemoveTrackWithNative),
/* harmony export */   "shimGetDisplayMedia": () => (/* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia),
/* harmony export */   "shimGetSendersWithDtmf": () => (/* binding */ shimGetSendersWithDtmf),
/* harmony export */   "shimGetStats": () => (/* binding */ shimGetStats),
/* harmony export */   "shimGetUserMedia": () => (/* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia),
/* harmony export */   "shimMediaStream": () => (/* binding */ shimMediaStream),
/* harmony export */   "shimOnTrack": () => (/* binding */ shimOnTrack),
/* harmony export */   "shimPeerConnection": () => (/* binding */ shimPeerConnection),
/* harmony export */   "shimSenderReceiverGetStats": () => (/* binding */ shimSenderReceiverGetStats)
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js");
/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */






function shimMediaStream(window) {
  window.MediaStream = window.MediaStream || window.webkitMediaStream;
}

function shimOnTrack(window) {
  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in
      window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {
      get() {
        return this._ontrack;
      },
      set(f) {
        if (this._ontrack) {
          this.removeEventListener('track', this._ontrack);
        }
        this.addEventListener('track', this._ontrack = f);
      },
      enumerable: true,
      configurable: true
    });
    const origSetRemoteDescription =
        window.RTCPeerConnection.prototype.setRemoteDescription;
    window.RTCPeerConnection.prototype.setRemoteDescription =
      function setRemoteDescription() {
        if (!this._ontrackpoly) {
          this._ontrackpoly = (e) => {
            // onaddstream does not fire when a track is added to an existing
            // stream. But stream.onaddtrack is implemented so we use that.
            e.stream.addEventListener('addtrack', te => {
              let receiver;
              if (window.RTCPeerConnection.prototype.getReceivers) {
                receiver = this.getReceivers()
                  .find(r => r.track && r.track.id === te.track.id);
              } else {
                receiver = {track: te.track};
              }

              const event = new Event('track');
              event.track = te.track;
              event.receiver = receiver;
              event.transceiver = {receiver};
              event.streams = [e.stream];
              this.dispatchEvent(event);
            });
            e.stream.getTracks().forEach(track => {
              let receiver;
              if (window.RTCPeerConnection.prototype.getReceivers) {
                receiver = this.getReceivers()
                  .find(r => r.track && r.track.id === track.id);
              } else {
                receiver = {track};
              }
              const event = new Event('track');
              event.track = track;
              event.receiver = receiver;
              event.transceiver = {receiver};
              event.streams = [e.stream];
              this.dispatchEvent(event);
            });
          };
          this.addEventListener('addstream', this._ontrackpoly);
        }
        return origSetRemoteDescription.apply(this, arguments);
      };
  } else {
    // even if RTCRtpTransceiver is in window, it is only used and
    // emitted in unified-plan. Unfortunately this means we need
    // to unconditionally wrap the event.
    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {
      if (!e.transceiver) {
        Object.defineProperty(e, 'transceiver',
          {value: {receiver: e.receiver}});
      }
      return e;
    });
  }
}

function shimGetSendersWithDtmf(window) {
  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.
  if (typeof window === 'object' && window.RTCPeerConnection &&
      !('getSenders' in window.RTCPeerConnection.prototype) &&
      'createDTMFSender' in window.RTCPeerConnection.prototype) {
    const shimSenderWithDtmf = function(pc, track) {
      return {
        track,
        get dtmf() {
          if (this._dtmf === undefined) {
            if (track.kind === 'audio') {
              this._dtmf = pc.createDTMFSender(track);
            } else {
              this._dtmf = null;
            }
          }
          return this._dtmf;
        },
        _pc: pc
      };
    };

    // augment addTrack when getSenders is not available.
    if (!window.RTCPeerConnection.prototype.getSenders) {
      window.RTCPeerConnection.prototype.getSenders = function getSenders() {
        this._senders = this._senders || [];
        return this._senders.slice(); // return a copy of the internal state.
      };
      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
      window.RTCPeerConnection.prototype.addTrack =
        function addTrack(track, stream) {
          let sender = origAddTrack.apply(this, arguments);
          if (!sender) {
            sender = shimSenderWithDtmf(this, track);
            this._senders.push(sender);
          }
          return sender;
        };

      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;
      window.RTCPeerConnection.prototype.removeTrack =
        function removeTrack(sender) {
          origRemoveTrack.apply(this, arguments);
          const idx = this._senders.indexOf(sender);
          if (idx !== -1) {
            this._senders.splice(idx, 1);
          }
        };
    }
    const origAddStream = window.RTCPeerConnection.prototype.addStream;
    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
      this._senders = this._senders || [];
      origAddStream.apply(this, [stream]);
      stream.getTracks().forEach(track => {
        this._senders.push(shimSenderWithDtmf(this, track));
      });
    };

    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
    window.RTCPeerConnection.prototype.removeStream =
      function removeStream(stream) {
        this._senders = this._senders || [];
        origRemoveStream.apply(this, [stream]);

        stream.getTracks().forEach(track => {
          const sender = this._senders.find(s => s.track === track);
          if (sender) { // remove sender
            this._senders.splice(this._senders.indexOf(sender), 1);
          }
        });
      };
  } else if (typeof window === 'object' && window.RTCPeerConnection &&
             'getSenders' in window.RTCPeerConnection.prototype &&
             'createDTMFSender' in window.RTCPeerConnection.prototype &&
             window.RTCRtpSender &&
             !('dtmf' in window.RTCRtpSender.prototype)) {
    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
    window.RTCPeerConnection.prototype.getSenders = function getSenders() {
      const senders = origGetSenders.apply(this, []);
      senders.forEach(sender => sender._pc = this);
      return senders;
    };

    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {
      get() {
        if (this._dtmf === undefined) {
          if (this.track.kind === 'audio') {
            this._dtmf = this._pc.createDTMFSender(this.track);
          } else {
            this._dtmf = null;
          }
        }
        return this._dtmf;
      }
    });
  }
}

function shimGetStats(window) {
  if (!window.RTCPeerConnection) {
    return;
  }

  const origGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    const [selector, onSucc, onErr] = arguments;

    // If selector is a function then we are in the old style stats so just
    // pass back the original getStats format to avoid breaking old users.
    if (arguments.length > 0 && typeof selector === 'function') {
      return origGetStats.apply(this, arguments);
    }

    // When spec-style getStats is supported, return those when called with
    // either no arguments or the selector argument is null.
    if (origGetStats.length === 0 && (arguments.length === 0 ||
        typeof selector !== 'function')) {
      return origGetStats.apply(this, []);
    }

    const fixChromeStats_ = function(response) {
      const standardReport = {};
      const reports = response.result();
      reports.forEach(report => {
        const standardStats = {
          id: report.id,
          timestamp: report.timestamp,
          type: {
            localcandidate: 'local-candidate',
            remotecandidate: 'remote-candidate'
          }[report.type] || report.type
        };
        report.names().forEach(name => {
          standardStats[name] = report.stat(name);
        });
        standardReport[standardStats.id] = standardStats;
      });

      return standardReport;
    };

    // shim getStats with maplike support
    const makeMapStats = function(stats) {
      return new Map(Object.keys(stats).map(key => [key, stats[key]]));
    };

    if (arguments.length >= 2) {
      const successCallbackWrapper_ = function(response) {
        onSucc(makeMapStats(fixChromeStats_(response)));
      };

      return origGetStats.apply(this, [successCallbackWrapper_,
        selector]);
    }

    // promise-support
    return new Promise((resolve, reject) => {
      origGetStats.apply(this, [
        function(response) {
          resolve(makeMapStats(fixChromeStats_(response)));
        }, reject]);
    }).then(onSucc, onErr);
  };
}

function shimSenderReceiverGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender && window.RTCRtpReceiver)) {
    return;
  }

  // shim sender stats.
  if (!('getStats' in window.RTCRtpSender.prototype)) {
    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
    if (origGetSenders) {
      window.RTCPeerConnection.prototype.getSenders = function getSenders() {
        const senders = origGetSenders.apply(this, []);
        senders.forEach(sender => sender._pc = this);
        return senders;
      };
    }

    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
    if (origAddTrack) {
      window.RTCPeerConnection.prototype.addTrack = function addTrack() {
        const sender = origAddTrack.apply(this, arguments);
        sender._pc = this;
        return sender;
      };
    }
    window.RTCRtpSender.prototype.getStats = function getStats() {
      const sender = this;
      return this._pc.getStats().then(result =>
        /* Note: this will include stats of all senders that
         *   send a track with the same id as sender.track as
         *   it is not possible to identify the RTCRtpSender.
         */
        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, sender.track, true));
    };
  }

  // shim receiver stats.
  if (!('getStats' in window.RTCRtpReceiver.prototype)) {
    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;
    if (origGetReceivers) {
      window.RTCPeerConnection.prototype.getReceivers =
        function getReceivers() {
          const receivers = origGetReceivers.apply(this, []);
          receivers.forEach(receiver => receiver._pc = this);
          return receivers;
        };
    }
    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {
      e.receiver._pc = e.srcElement;
      return e;
    });
    window.RTCRtpReceiver.prototype.getStats = function getStats() {
      const receiver = this;
      return this._pc.getStats().then(result =>
        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, receiver.track, false));
    };
  }

  if (!('getStats' in window.RTCRtpSender.prototype &&
      'getStats' in window.RTCRtpReceiver.prototype)) {
    return;
  }

  // shim RTCPeerConnection.getStats(track).
  const origGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    if (arguments.length > 0 &&
        arguments[0] instanceof window.MediaStreamTrack) {
      const track = arguments[0];
      let sender;
      let receiver;
      let err;
      this.getSenders().forEach(s => {
        if (s.track === track) {
          if (sender) {
            err = true;
          } else {
            sender = s;
          }
        }
      });
      this.getReceivers().forEach(r => {
        if (r.track === track) {
          if (receiver) {
            err = true;
          } else {
            receiver = r;
          }
        }
        return r.track === track;
      });
      if (err || (sender && receiver)) {
        return Promise.reject(new DOMException(
          'There are more than one sender or receiver for the track.',
          'InvalidAccessError'));
      } else if (sender) {
        return sender.getStats();
      } else if (receiver) {
        return receiver.getStats();
      }
      return Promise.reject(new DOMException(
        'There is no sender or receiver for the track.',
        'InvalidAccessError'));
    }
    return origGetStats.apply(this, arguments);
  };
}

function shimAddTrackRemoveTrackWithNative(window) {
  // shim addTrack/removeTrack with native variants in order to make
  // the interactions with legacy getLocalStreams behave as in other browsers.
  // Keeps a mapping stream.id => [stream, rtpsenders...]
  window.RTCPeerConnection.prototype.getLocalStreams =
    function getLocalStreams() {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      return Object.keys(this._shimmedLocalStreams)
        .map(streamId => this._shimmedLocalStreams[streamId][0]);
    };

  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
  window.RTCPeerConnection.prototype.addTrack =
    function addTrack(track, stream) {
      if (!stream) {
        return origAddTrack.apply(this, arguments);
      }
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};

      const sender = origAddTrack.apply(this, arguments);
      if (!this._shimmedLocalStreams[stream.id]) {
        this._shimmedLocalStreams[stream.id] = [stream, sender];
      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {
        this._shimmedLocalStreams[stream.id].push(sender);
      }
      return sender;
    };

  const origAddStream = window.RTCPeerConnection.prototype.addStream;
  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
    this._shimmedLocalStreams = this._shimmedLocalStreams || {};

    stream.getTracks().forEach(track => {
      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }
    });
    const existingSenders = this.getSenders();
    origAddStream.apply(this, arguments);
    const newSenders = this.getSenders()
      .filter(newSender => existingSenders.indexOf(newSender) === -1);
    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);
  };

  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      delete this._shimmedLocalStreams[stream.id];
      return origRemoveStream.apply(this, arguments);
    };

  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;
  window.RTCPeerConnection.prototype.removeTrack =
    function removeTrack(sender) {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      if (sender) {
        Object.keys(this._shimmedLocalStreams).forEach(streamId => {
          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);
          if (idx !== -1) {
            this._shimmedLocalStreams[streamId].splice(idx, 1);
          }
          if (this._shimmedLocalStreams[streamId].length === 1) {
            delete this._shimmedLocalStreams[streamId];
          }
        });
      }
      return origRemoveTrack.apply(this, arguments);
    };
}

function shimAddTrackRemoveTrack(window, browserDetails) {
  if (!window.RTCPeerConnection) {
    return;
  }
  // shim addTrack and removeTrack.
  if (window.RTCPeerConnection.prototype.addTrack &&
      browserDetails.version >= 65) {
    return shimAddTrackRemoveTrackWithNative(window);
  }

  // also shim pc.getLocalStreams when addTrack is shimmed
  // to return the original streams.
  const origGetLocalStreams = window.RTCPeerConnection.prototype
      .getLocalStreams;
  window.RTCPeerConnection.prototype.getLocalStreams =
    function getLocalStreams() {
      const nativeStreams = origGetLocalStreams.apply(this);
      this._reverseStreams = this._reverseStreams || {};
      return nativeStreams.map(stream => this._reverseStreams[stream.id]);
    };

  const origAddStream = window.RTCPeerConnection.prototype.addStream;
  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
    this._streams = this._streams || {};
    this._reverseStreams = this._reverseStreams || {};

    stream.getTracks().forEach(track => {
      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }
    });
    // Add identity mapping for consistency with addTrack.
    // Unless this is being used with a stream from addTrack.
    if (!this._reverseStreams[stream.id]) {
      const newStream = new window.MediaStream(stream.getTracks());
      this._streams[stream.id] = newStream;
      this._reverseStreams[newStream.id] = stream;
      stream = newStream;
    }
    origAddStream.apply(this, [stream]);
  };

  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      this._streams = this._streams || {};
      this._reverseStreams = this._reverseStreams || {};

      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);
      delete this._reverseStreams[(this._streams[stream.id] ?
          this._streams[stream.id].id : stream.id)];
      delete this._streams[stream.id];
    };

  window.RTCPeerConnection.prototype.addTrack =
    function addTrack(track, stream) {
      if (this.signalingState === 'closed') {
        throw new DOMException(
          'The RTCPeerConnection\'s signalingState is \'closed\'.',
          'InvalidStateError');
      }
      const streams = [].slice.call(arguments, 1);
      if (streams.length !== 1 ||
          !streams[0].getTracks().find(t => t === track)) {
        // this is not fully correct but all we can manage without
        // [[associated MediaStreams]] internal slot.
        throw new DOMException(
          'The adapter.js addTrack polyfill only supports a single ' +
          ' stream which is associated with the specified track.',
          'NotSupportedError');
      }

      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }

      this._streams = this._streams || {};
      this._reverseStreams = this._reverseStreams || {};
      const oldStream = this._streams[stream.id];
      if (oldStream) {
        // this is using odd Chrome behaviour, use with caution:
        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815
        // Note: we rely on the high-level addTrack/dtmf shim to
        // create the sender with a dtmf sender.
        oldStream.addTrack(track);

        // Trigger ONN async.
        Promise.resolve().then(() => {
          this.dispatchEvent(new Event('negotiationneeded'));
        });
      } else {
        const newStream = new window.MediaStream([track]);
        this._streams[stream.id] = newStream;
        this._reverseStreams[newStream.id] = stream;
        this.addStream(newStream);
      }
      return this.getSenders().find(s => s.track === track);
    };

  // replace the internal stream id with the external one and
  // vice versa.
  function replaceInternalStreamId(pc, description) {
    let sdp = description.sdp;
    Object.keys(pc._reverseStreams || []).forEach(internalId => {
      const externalStream = pc._reverseStreams[internalId];
      const internalStream = pc._streams[externalStream.id];
      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),
          externalStream.id);
    });
    return new RTCSessionDescription({
      type: description.type,
      sdp
    });
  }
  function replaceExternalStreamId(pc, description) {
    let sdp = description.sdp;
    Object.keys(pc._reverseStreams || []).forEach(internalId => {
      const externalStream = pc._reverseStreams[internalId];
      const internalStream = pc._streams[externalStream.id];
      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),
          internalStream.id);
    });
    return new RTCSessionDescription({
      type: description.type,
      sdp
    });
  }
  ['createOffer', 'createAnswer'].forEach(function(method) {
    const nativeMethod = window.RTCPeerConnection.prototype[method];
    const methodObj = {[method]() {
      const args = arguments;
      const isLegacyCall = arguments.length &&
          typeof arguments[0] === 'function';
      if (isLegacyCall) {
        return nativeMethod.apply(this, [
          (description) => {
            const desc = replaceInternalStreamId(this, description);
            args[0].apply(null, [desc]);
          },
          (err) => {
            if (args[1]) {
              args[1].apply(null, err);
            }
          }, arguments[2]
        ]);
      }
      return nativeMethod.apply(this, arguments)
      .then(description => replaceInternalStreamId(this, description));
    }};
    window.RTCPeerConnection.prototype[method] = methodObj[method];
  });

  const origSetLocalDescription =
      window.RTCPeerConnection.prototype.setLocalDescription;
  window.RTCPeerConnection.prototype.setLocalDescription =
    function setLocalDescription() {
      if (!arguments.length || !arguments[0].type) {
        return origSetLocalDescription.apply(this, arguments);
      }
      arguments[0] = replaceExternalStreamId(this, arguments[0]);
      return origSetLocalDescription.apply(this, arguments);
    };

  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier

  const origLocalDescription = Object.getOwnPropertyDescriptor(
      window.RTCPeerConnection.prototype, 'localDescription');
  Object.defineProperty(window.RTCPeerConnection.prototype,
      'localDescription', {
        get() {
          const description = origLocalDescription.get.apply(this);
          if (description.type === '') {
            return description;
          }
          return replaceInternalStreamId(this, description);
        }
      });

  window.RTCPeerConnection.prototype.removeTrack =
    function removeTrack(sender) {
      if (this.signalingState === 'closed') {
        throw new DOMException(
          'The RTCPeerConnection\'s signalingState is \'closed\'.',
          'InvalidStateError');
      }
      // We can not yet check for sender instanceof RTCRtpSender
      // since we shim RTPSender. So we check if sender._pc is set.
      if (!sender._pc) {
        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +
            'does not implement interface RTCRtpSender.', 'TypeError');
      }
      const isLocal = sender._pc === this;
      if (!isLocal) {
        throw new DOMException('Sender was not created by this connection.',
            'InvalidAccessError');
      }

      // Search for the native stream the senders track belongs to.
      this._streams = this._streams || {};
      let stream;
      Object.keys(this._streams).forEach(streamid => {
        const hasTrack = this._streams[streamid].getTracks()
          .find(track => sender.track === track);
        if (hasTrack) {
          stream = this._streams[streamid];
        }
      });

      if (stream) {
        if (stream.getTracks().length === 1) {
          // if this is the last track of the stream, remove the stream. This
          // takes care of any shimmed _senders.
          this.removeStream(this._reverseStreams[stream.id]);
        } else {
          // relying on the same odd chrome behaviour as above.
          stream.removeTrack(sender.track);
        }
        this.dispatchEvent(new Event('negotiationneeded'));
      }
    };
}

function shimPeerConnection(window, browserDetails) {
  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {
    // very basic support for old versions.
    window.RTCPeerConnection = window.webkitRTCPeerConnection;
  }
  if (!window.RTCPeerConnection) {
    return;
  }

  // shim implicit creation of RTCSessionDescription/RTCIceCandidate
  if (browserDetails.version < 53) {
    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']
        .forEach(function(method) {
          const nativeMethod = window.RTCPeerConnection.prototype[method];
          const methodObj = {[method]() {
            arguments[0] = new ((method === 'addIceCandidate') ?
                window.RTCIceCandidate :
                window.RTCSessionDescription)(arguments[0]);
            return nativeMethod.apply(this, arguments);
          }};
          window.RTCPeerConnection.prototype[method] = methodObj[method];
        });
  }
}

// Attempt to fix ONN in plan-b mode.
function fixNegotiationNeeded(window, browserDetails) {
  _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {
    const pc = e.target;
    if (browserDetails.version < 72 || (pc.getConfiguration &&
        pc.getConfiguration().sdpSemantics === 'plan-b')) {
      if (pc.signalingState !== 'stable') {
        return;
      }
    }
    return e;
  });
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":
/*!**********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetDisplayMedia": () => (/* binding */ shimGetDisplayMedia)
/* harmony export */ });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */

function shimGetDisplayMedia(window, getSourceId) {
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  // getSourceId is a function that returns a promise resolving with
  // the sourceId of the screen/window/tab to be shared.
  if (typeof getSourceId !== 'function') {
    console.error('shimGetDisplayMedia: getSourceId argument is not ' +
        'a function');
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    function getDisplayMedia(constraints) {
      return getSourceId(constraints)
        .then(sourceId => {
          const widthSpecified = constraints.video && constraints.video.width;
          const heightSpecified = constraints.video &&
            constraints.video.height;
          const frameRateSpecified = constraints.video &&
            constraints.video.frameRate;
          constraints.video = {
            mandatory: {
              chromeMediaSource: 'desktop',
              chromeMediaSourceId: sourceId,
              maxFrameRate: frameRateSpecified || 3
            }
          };
          if (widthSpecified) {
            constraints.video.mandatory.maxWidth = widthSpecified;
          }
          if (heightSpecified) {
            constraints.video.mandatory.maxHeight = heightSpecified;
          }
          return window.navigator.mediaDevices.getUserMedia(constraints);
        });
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":
/*!*******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetUserMedia": () => (/* binding */ shimGetUserMedia)
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */


const logging = _utils_js__WEBPACK_IMPORTED_MODULE_0__.log;

function shimGetUserMedia(window, browserDetails) {
  const navigator = window && window.navigator;

  if (!navigator.mediaDevices) {
    return;
  }

  const constraintsToChrome_ = function(c) {
    if (typeof c !== 'object' || c.mandatory || c.optional) {
      return c;
    }
    const cc = {};
    Object.keys(c).forEach(key => {
      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {
        return;
      }
      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};
      if (r.exact !== undefined && typeof r.exact === 'number') {
        r.min = r.max = r.exact;
      }
      const oldname_ = function(prefix, name) {
        if (prefix) {
          return prefix + name.charAt(0).toUpperCase() + name.slice(1);
        }
        return (name === 'deviceId') ? 'sourceId' : name;
      };
      if (r.ideal !== undefined) {
        cc.optional = cc.optional || [];
        let oc = {};
        if (typeof r.ideal === 'number') {
          oc[oldname_('min', key)] = r.ideal;
          cc.optional.push(oc);
          oc = {};
          oc[oldname_('max', key)] = r.ideal;
          cc.optional.push(oc);
        } else {
          oc[oldname_('', key)] = r.ideal;
          cc.optional.push(oc);
        }
      }
      if (r.exact !== undefined && typeof r.exact !== 'number') {
        cc.mandatory = cc.mandatory || {};
        cc.mandatory[oldname_('', key)] = r.exact;
      } else {
        ['min', 'max'].forEach(mix => {
          if (r[mix] !== undefined) {
            cc.mandatory = cc.mandatory || {};
            cc.mandatory[oldname_(mix, key)] = r[mix];
          }
        });
      }
    });
    if (c.advanced) {
      cc.optional = (cc.optional || []).concat(c.advanced);
    }
    return cc;
  };

  const shimConstraints_ = function(constraints, func) {
    if (browserDetails.version >= 61) {
      return func(constraints);
    }
    constraints = JSON.parse(JSON.stringify(constraints));
    if (constraints && typeof constraints.audio === 'object') {
      const remap = function(obj, a, b) {
        if (a in obj && !(b in obj)) {
          obj[b] = obj[a];
          delete obj[a];
        }
      };
      constraints = JSON.parse(JSON.stringify(constraints));
      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');
      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');
      constraints.audio = constraintsToChrome_(constraints.audio);
    }
    if (constraints && typeof constraints.video === 'object') {
      // Shim facingMode for mobile & surface pro.
      let face = constraints.video.facingMode;
      face = face && ((typeof face === 'object') ? face : {ideal: face});
      const getSupportedFacingModeLies = browserDetails.version < 66;

      if ((face && (face.exact === 'user' || face.exact === 'environment' ||
                    face.ideal === 'user' || face.ideal === 'environment')) &&
          !(navigator.mediaDevices.getSupportedConstraints &&
            navigator.mediaDevices.getSupportedConstraints().facingMode &&
            !getSupportedFacingModeLies)) {
        delete constraints.video.facingMode;
        let matches;
        if (face.exact === 'environment' || face.ideal === 'environment') {
          matches = ['back', 'rear'];
        } else if (face.exact === 'user' || face.ideal === 'user') {
          matches = ['front'];
        }
        if (matches) {
          // Look for matches in label, or use last cam for back (typical).
          return navigator.mediaDevices.enumerateDevices()
          .then(devices => {
            devices = devices.filter(d => d.kind === 'videoinput');
            let dev = devices.find(d => matches.some(match =>
              d.label.toLowerCase().includes(match)));
            if (!dev && devices.length && matches.includes('back')) {
              dev = devices[devices.length - 1]; // more likely the back cam
            }
            if (dev) {
              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :
                                                        {ideal: dev.deviceId};
            }
            constraints.video = constraintsToChrome_(constraints.video);
            logging('chrome: ' + JSON.stringify(constraints));
            return func(constraints);
          });
        }
      }
      constraints.video = constraintsToChrome_(constraints.video);
    }
    logging('chrome: ' + JSON.stringify(constraints));
    return func(constraints);
  };

  const shimError_ = function(e) {
    if (browserDetails.version >= 64) {
      return e;
    }
    return {
      name: {
        PermissionDeniedError: 'NotAllowedError',
        PermissionDismissedError: 'NotAllowedError',
        InvalidStateError: 'NotAllowedError',
        DevicesNotFoundError: 'NotFoundError',
        ConstraintNotSatisfiedError: 'OverconstrainedError',
        TrackStartError: 'NotReadableError',
        MediaDeviceFailedDueToShutdown: 'NotAllowedError',
        MediaDeviceKillSwitchOn: 'NotAllowedError',
        TabCaptureError: 'AbortError',
        ScreenCaptureError: 'AbortError',
        DeviceCaptureError: 'AbortError'
      }[e.name] || e.name,
      message: e.message,
      constraint: e.constraint || e.constraintName,
      toString() {
        return this.name + (this.message && ': ') + this.message;
      }
    };
  };

  const getUserMedia_ = function(constraints, onSuccess, onError) {
    shimConstraints_(constraints, c => {
      navigator.webkitGetUserMedia(c, onSuccess, e => {
        if (onError) {
          onError(shimError_(e));
        }
      });
    });
  };
  navigator.getUserMedia = getUserMedia_.bind(navigator);

  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia
  // function which returns a Promise, it does not accept spec-style
  // constraints.
  if (navigator.mediaDevices.getUserMedia) {
    const origGetUserMedia = navigator.mediaDevices.getUserMedia.
        bind(navigator.mediaDevices);
    navigator.mediaDevices.getUserMedia = function(cs) {
      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {
        if (c.audio && !stream.getAudioTracks().length ||
            c.video && !stream.getVideoTracks().length) {
          stream.getTracks().forEach(track => {
            track.stop();
          });
          throw new DOMException('', 'NotFoundError');
        }
        return stream;
      }, e => Promise.reject(shimError_(e))));
    };
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/common_shim.js":
/*!***********************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/common_shim.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "removeExtmapAllowMixed": () => (/* binding */ removeExtmapAllowMixed),
/* harmony export */   "shimAddIceCandidateNullOrEmpty": () => (/* binding */ shimAddIceCandidateNullOrEmpty),
/* harmony export */   "shimConnectionState": () => (/* binding */ shimConnectionState),
/* harmony export */   "shimMaxMessageSize": () => (/* binding */ shimMaxMessageSize),
/* harmony export */   "shimParameterlessSetLocalDescription": () => (/* binding */ shimParameterlessSetLocalDescription),
/* harmony export */   "shimRTCIceCandidate": () => (/* binding */ shimRTCIceCandidate),
/* harmony export */   "shimSendThrowTypeError": () => (/* binding */ shimSendThrowTypeError)
/* harmony export */ });
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */





function shimRTCIceCandidate(window) {
  // foundation is arbitrarily chosen as an indicator for full support for
  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface
  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in
      window.RTCIceCandidate.prototype)) {
    return;
  }

  const NativeRTCIceCandidate = window.RTCIceCandidate;
  window.RTCIceCandidate = function RTCIceCandidate(args) {
    // Remove the a= which shouldn't be part of the candidate string.
    if (typeof args === 'object' && args.candidate &&
        args.candidate.indexOf('a=') === 0) {
      args = JSON.parse(JSON.stringify(args));
      args.candidate = args.candidate.substr(2);
    }

    if (args.candidate && args.candidate.length) {
      // Augment the native candidate with the parsed fields.
      const nativeCandidate = new NativeRTCIceCandidate(args);
      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseCandidate(args.candidate);
      const augmentedCandidate = Object.assign(nativeCandidate,
          parsedCandidate);

      // Add a serializer that does not serialize the extra attributes.
      augmentedCandidate.toJSON = function toJSON() {
        return {
          candidate: augmentedCandidate.candidate,
          sdpMid: augmentedCandidate.sdpMid,
          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,
          usernameFragment: augmentedCandidate.usernameFragment,
        };
      };
      return augmentedCandidate;
    }
    return new NativeRTCIceCandidate(args);
  };
  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;

  // Hook up the augmented candidate in onicecandidate and
  // addEventListener('icecandidate', ...)
  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'icecandidate', e => {
    if (e.candidate) {
      Object.defineProperty(e, 'candidate', {
        value: new window.RTCIceCandidate(e.candidate),
        writable: 'false'
      });
    }
    return e;
  });
}

function shimMaxMessageSize(window, browserDetails) {
  if (!window.RTCPeerConnection) {
    return;
  }

  if (!('sctp' in window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {
      get() {
        return typeof this._sctp === 'undefined' ? null : this._sctp;
      }
    });
  }

  const sctpInDescription = function(description) {
    if (!description || !description.sdp) {
      return false;
    }
    const sections = sdp__WEBPACK_IMPORTED_MODULE_0___default().splitSections(description.sdp);
    sections.shift();
    return sections.some(mediaSection => {
      const mLine = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseMLine(mediaSection);
      return mLine && mLine.kind === 'application'
          && mLine.protocol.indexOf('SCTP') !== -1;
    });
  };

  const getRemoteFirefoxVersion = function(description) {
    // TODO: Is there a better solution for detecting Firefox?
    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
    if (match === null || match.length < 2) {
      return -1;
    }
    const version = parseInt(match[1], 10);
    // Test for NaN (yes, this is ugly)
    return version !== version ? -1 : version;
  };

  const getCanSendMaxMessageSize = function(remoteIsFirefox) {
    // Every implementation we know can send at least 64 KiB.
    // Note: Although Chrome is technically able to send up to 256 KiB, the
    //       data does not reach the other peer reliably.
    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419
    let canSendMaxMessageSize = 65536;
    if (browserDetails.browser === 'firefox') {
      if (browserDetails.version < 57) {
        if (remoteIsFirefox === -1) {
          // FF < 57 will send in 16 KiB chunks using the deprecated PPID
          // fragmentation.
          canSendMaxMessageSize = 16384;
        } else {
          // However, other FF (and RAWRTC) can reassemble PPID-fragmented
          // messages. Thus, supporting ~2 GiB when sending.
          canSendMaxMessageSize = 2147483637;
        }
      } else if (browserDetails.version < 60) {
        // Currently, all FF >= 57 will reset the remote maximum message size
        // to the default value when a data channel is created at a later
        // stage. :(
        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831
        canSendMaxMessageSize =
          browserDetails.version === 57 ? 65535 : 65536;
      } else {
        // FF >= 60 supports sending ~2 GiB
        canSendMaxMessageSize = 2147483637;
      }
    }
    return canSendMaxMessageSize;
  };

  const getMaxMessageSize = function(description, remoteIsFirefox) {
    // Note: 65536 bytes is the default value from the SDP spec. Also,
    //       every implementation we know supports receiving 65536 bytes.
    let maxMessageSize = 65536;

    // FF 57 has a slightly incorrect default remote max message size, so
    // we need to adjust it here to avoid a failure when sending.
    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697
    if (browserDetails.browser === 'firefox'
         && browserDetails.version === 57) {
      maxMessageSize = 65535;
    }

    const match = sdp__WEBPACK_IMPORTED_MODULE_0___default().matchPrefix(description.sdp,
      'a=max-message-size:');
    if (match.length > 0) {
      maxMessageSize = parseInt(match[0].substr(19), 10);
    } else if (browserDetails.browser === 'firefox' &&
                remoteIsFirefox !== -1) {
      // If the maximum message size is not present in the remote SDP and
      // both local and remote are Firefox, the remote peer can receive
      // ~2 GiB.
      maxMessageSize = 2147483637;
    }
    return maxMessageSize;
  };

  const origSetRemoteDescription =
      window.RTCPeerConnection.prototype.setRemoteDescription;
  window.RTCPeerConnection.prototype.setRemoteDescription =
    function setRemoteDescription() {
      this._sctp = null;
      // Chrome decided to not expose .sctp in plan-b mode.
      // As usual, adapter.js has to do an 'ugly worakaround'
      // to cover up the mess.
      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {
        const {sdpSemantics} = this.getConfiguration();
        if (sdpSemantics === 'plan-b') {
          Object.defineProperty(this, 'sctp', {
            get() {
              return typeof this._sctp === 'undefined' ? null : this._sctp;
            },
            enumerable: true,
            configurable: true,
          });
        }
      }

      if (sctpInDescription(arguments[0])) {
        // Check if the remote is FF.
        const isFirefox = getRemoteFirefoxVersion(arguments[0]);

        // Get the maximum message size the local peer is capable of sending
        const canSendMMS = getCanSendMaxMessageSize(isFirefox);

        // Get the maximum message size of the remote peer.
        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);

        // Determine final maximum message size
        let maxMessageSize;
        if (canSendMMS === 0 && remoteMMS === 0) {
          maxMessageSize = Number.POSITIVE_INFINITY;
        } else if (canSendMMS === 0 || remoteMMS === 0) {
          maxMessageSize = Math.max(canSendMMS, remoteMMS);
        } else {
          maxMessageSize = Math.min(canSendMMS, remoteMMS);
        }

        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'
        // attribute.
        const sctp = {};
        Object.defineProperty(sctp, 'maxMessageSize', {
          get() {
            return maxMessageSize;
          }
        });
        this._sctp = sctp;
      }

      return origSetRemoteDescription.apply(this, arguments);
    };
}

function shimSendThrowTypeError(window) {
  if (!(window.RTCPeerConnection &&
      'createDataChannel' in window.RTCPeerConnection.prototype)) {
    return;
  }

  // Note: Although Firefox >= 57 has a native implementation, the maximum
  //       message size can be reset for all data channels at a later stage.
  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831

  function wrapDcSend(dc, pc) {
    const origDataChannelSend = dc.send;
    dc.send = function send() {
      const data = arguments[0];
      const length = data.length || data.size || data.byteLength;
      if (dc.readyState === 'open' &&
          pc.sctp && length > pc.sctp.maxMessageSize) {
        throw new TypeError('Message too large (can send a maximum of ' +
          pc.sctp.maxMessageSize + ' bytes)');
      }
      return origDataChannelSend.apply(dc, arguments);
    };
  }
  const origCreateDataChannel =
    window.RTCPeerConnection.prototype.createDataChannel;
  window.RTCPeerConnection.prototype.createDataChannel =
    function createDataChannel() {
      const dataChannel = origCreateDataChannel.apply(this, arguments);
      wrapDcSend(dataChannel, this);
      return dataChannel;
    };
  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'datachannel', e => {
    wrapDcSend(e.channel, e.target);
    return e;
  });
}


/* shims RTCConnectionState by pretending it is the same as iceConnectionState.
 * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12
 * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect
 * since DTLS failures would be hidden. See
 * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827
 * for the Firefox tracking bug.
 */
function shimConnectionState(window) {
  if (!window.RTCPeerConnection ||
      'connectionState' in window.RTCPeerConnection.prototype) {
    return;
  }
  const proto = window.RTCPeerConnection.prototype;
  Object.defineProperty(proto, 'connectionState', {
    get() {
      return {
        completed: 'connected',
        checking: 'connecting'
      }[this.iceConnectionState] || this.iceConnectionState;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(proto, 'onconnectionstatechange', {
    get() {
      return this._onconnectionstatechange || null;
    },
    set(cb) {
      if (this._onconnectionstatechange) {
        this.removeEventListener('connectionstatechange',
            this._onconnectionstatechange);
        delete this._onconnectionstatechange;
      }
      if (cb) {
        this.addEventListener('connectionstatechange',
            this._onconnectionstatechange = cb);
      }
    },
    enumerable: true,
    configurable: true
  });

  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {
    const origMethod = proto[method];
    proto[method] = function() {
      if (!this._connectionstatechangepoly) {
        this._connectionstatechangepoly = e => {
          const pc = e.target;
          if (pc._lastConnectionState !== pc.connectionState) {
            pc._lastConnectionState = pc.connectionState;
            const newEvent = new Event('connectionstatechange', e);
            pc.dispatchEvent(newEvent);
          }
          return e;
        };
        this.addEventListener('iceconnectionstatechange',
          this._connectionstatechangepoly);
      }
      return origMethod.apply(this, arguments);
    };
  });
}

function removeExtmapAllowMixed(window, browserDetails) {
  /* remove a=extmap-allow-mixed for webrtc.org < M71 */
  if (!window.RTCPeerConnection) {
    return;
  }
  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {
    return;
  }
  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {
    return;
  }
  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;
  window.RTCPeerConnection.prototype.setRemoteDescription =
  function setRemoteDescription(desc) {
    if (desc && desc.sdp && desc.sdp.indexOf('\na=extmap-allow-mixed') !== -1) {
      const sdp = desc.sdp.split('\n').filter((line) => {
        return line.trim() !== 'a=extmap-allow-mixed';
      }).join('\n');
      // Safari enforces read-only-ness of RTCSessionDescription fields.
      if (window.RTCSessionDescription &&
          desc instanceof window.RTCSessionDescription) {
        arguments[0] = new window.RTCSessionDescription({
          type: desc.type,
          sdp,
        });
      } else {
        desc.sdp = sdp;
      }
    }
    return nativeSRD.apply(this, arguments);
  };
}

function shimAddIceCandidateNullOrEmpty(window, browserDetails) {
  // Support for addIceCandidate(null or undefined)
  // as well as addIceCandidate({candidate: "", ...})
  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582
  // Note: must be called before other polyfills which change the signature.
  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {
    return;
  }
  const nativeAddIceCandidate =
      window.RTCPeerConnection.prototype.addIceCandidate;
  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {
    return;
  }
  window.RTCPeerConnection.prototype.addIceCandidate =
    function addIceCandidate() {
      if (!arguments[0]) {
        if (arguments[1]) {
          arguments[1].apply(null);
        }
        return Promise.resolve();
      }
      // Firefox 68+ emits and processes {candidate: "", ...}, ignore
      // in older versions.
      // Native support for ignoring exists for Chrome M77+.
      // Safari ignores as well, exact version unknown but works in the same
      // version that also ignores addIceCandidate(null).
      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)
           || (browserDetails.browser === 'firefox'
               && browserDetails.version < 68)
           || (browserDetails.browser === 'safari'))
          && arguments[0] && arguments[0].candidate === '') {
        return Promise.resolve();
      }
      return nativeAddIceCandidate.apply(this, arguments);
    };
}

// Note: Make sure to call this ahead of APIs that modify
// setLocalDescription.length
function shimParameterlessSetLocalDescription(window, browserDetails) {
  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {
    return;
  }
  const nativeSetLocalDescription =
      window.RTCPeerConnection.prototype.setLocalDescription;
  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {
    return;
  }
  window.RTCPeerConnection.prototype.setLocalDescription =
    function setLocalDescription() {
      let desc = arguments[0] || {};
      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {
        return nativeSetLocalDescription.apply(this, arguments);
      }
      // The remaining steps should technically happen when SLD comes off the
      // RTCPeerConnection's operations chain (not ahead of going on it), but
      // this is too difficult to shim. Instead, this shim only covers the
      // common case where the operations chain is empty. This is imperfect, but
      // should cover many cases. Rationale: Even if we can't reduce the glare
      // window to zero on imperfect implementations, there's value in tapping
      // into the perfect negotiation pattern that several browsers support.
      desc = {type: desc.type, sdp: desc.sdp};
      if (!desc.type) {
        switch (this.signalingState) {
          case 'stable':
          case 'have-local-offer':
          case 'have-remote-pranswer':
            desc.type = 'offer';
            break;
          default:
            desc.type = 'answer';
            break;
        }
      }
      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {
        return nativeSetLocalDescription.apply(this, [desc]);
      }
      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;
      return func.apply(this)
        .then(d => nativeSetLocalDescription.apply(this, [d]));
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimAddTransceiver": () => (/* binding */ shimAddTransceiver),
/* harmony export */   "shimCreateAnswer": () => (/* binding */ shimCreateAnswer),
/* harmony export */   "shimCreateOffer": () => (/* binding */ shimCreateOffer),
/* harmony export */   "shimGetDisplayMedia": () => (/* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia),
/* harmony export */   "shimGetParameters": () => (/* binding */ shimGetParameters),
/* harmony export */   "shimGetUserMedia": () => (/* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia),
/* harmony export */   "shimOnTrack": () => (/* binding */ shimOnTrack),
/* harmony export */   "shimPeerConnection": () => (/* binding */ shimPeerConnection),
/* harmony export */   "shimRTCDataChannel": () => (/* binding */ shimRTCDataChannel),
/* harmony export */   "shimReceiverGetStats": () => (/* binding */ shimReceiverGetStats),
/* harmony export */   "shimRemoveStream": () => (/* binding */ shimRemoveStream),
/* harmony export */   "shimSenderGetStats": () => (/* binding */ shimSenderGetStats)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js");
/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */






function shimOnTrack(window) {
  if (typeof window === 'object' && window.RTCTrackEvent &&
      ('receiver' in window.RTCTrackEvent.prototype) &&
      !('transceiver' in window.RTCTrackEvent.prototype)) {
    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {
      get() {
        return {receiver: this.receiver};
      }
    });
  }
}

function shimPeerConnection(window, browserDetails) {
  if (typeof window !== 'object' ||
      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {
    return; // probably media.peerconnection.enabled=false in about:config
  }
  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {
    // very basic support for old versions.
    window.RTCPeerConnection = window.mozRTCPeerConnection;
  }

  if (browserDetails.version < 53) {
    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.
    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']
        .forEach(function(method) {
          const nativeMethod = window.RTCPeerConnection.prototype[method];
          const methodObj = {[method]() {
            arguments[0] = new ((method === 'addIceCandidate') ?
                window.RTCIceCandidate :
                window.RTCSessionDescription)(arguments[0]);
            return nativeMethod.apply(this, arguments);
          }};
          window.RTCPeerConnection.prototype[method] = methodObj[method];
        });
  }

  const modernStatsTypes = {
    inboundrtp: 'inbound-rtp',
    outboundrtp: 'outbound-rtp',
    candidatepair: 'candidate-pair',
    localcandidate: 'local-candidate',
    remotecandidate: 'remote-candidate'
  };

  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    const [selector, onSucc, onErr] = arguments;
    return nativeGetStats.apply(this, [selector || null])
      .then(stats => {
        if (browserDetails.version < 53 && !onSucc) {
          // Shim only promise getStats with spec-hyphens in type names
          // Leave callback version alone; misc old uses of forEach before Map
          try {
            stats.forEach(stat => {
              stat.type = modernStatsTypes[stat.type] || stat.type;
            });
          } catch (e) {
            if (e.name !== 'TypeError') {
              throw e;
            }
            // Avoid TypeError: "type" is read-only, in old versions. 34-43ish
            stats.forEach((stat, i) => {
              stats.set(i, Object.assign({}, stat, {
                type: modernStatsTypes[stat.type] || stat.type
              }));
            });
          }
        }
        return stats;
      })
      .then(onSucc, onErr);
  };
}

function shimSenderGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender)) {
    return;
  }
  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {
    return;
  }
  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
  if (origGetSenders) {
    window.RTCPeerConnection.prototype.getSenders = function getSenders() {
      const senders = origGetSenders.apply(this, []);
      senders.forEach(sender => sender._pc = this);
      return senders;
    };
  }

  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
  if (origAddTrack) {
    window.RTCPeerConnection.prototype.addTrack = function addTrack() {
      const sender = origAddTrack.apply(this, arguments);
      sender._pc = this;
      return sender;
    };
  }
  window.RTCRtpSender.prototype.getStats = function getStats() {
    return this.track ? this._pc.getStats(this.track) :
        Promise.resolve(new Map());
  };
}

function shimReceiverGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender)) {
    return;
  }
  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {
    return;
  }
  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;
  if (origGetReceivers) {
    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {
      const receivers = origGetReceivers.apply(this, []);
      receivers.forEach(receiver => receiver._pc = this);
      return receivers;
    };
  }
  _utils__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {
    e.receiver._pc = e.srcElement;
    return e;
  });
  window.RTCRtpReceiver.prototype.getStats = function getStats() {
    return this._pc.getStats(this.track);
  };
}

function shimRemoveStream(window) {
  if (!window.RTCPeerConnection ||
      'removeStream' in window.RTCPeerConnection.prototype) {
    return;
  }
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('removeStream', 'removeTrack');
      this.getSenders().forEach(sender => {
        if (sender.track && stream.getTracks().includes(sender.track)) {
          this.removeTrack(sender);
        }
      });
    };
}

function shimRTCDataChannel(window) {
  // rename DataChannel to RTCDataChannel (native fix in FF60):
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851
  if (window.DataChannel && !window.RTCDataChannel) {
    window.RTCDataChannel = window.DataChannel;
  }
}

function shimAddTransceiver(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;
  if (origAddTransceiver) {
    window.RTCPeerConnection.prototype.addTransceiver =
      function addTransceiver() {
        this.setParametersPromises = [];
        const initParameters = arguments[1];
        const shouldPerformCheck = initParameters &&
                                  'sendEncodings' in initParameters;
        if (shouldPerformCheck) {
          // If sendEncodings params are provided, validate grammar
          initParameters.sendEncodings.forEach((encodingParam) => {
            if ('rid' in encodingParam) {
              const ridRegex = /^[a-z0-9]{0,16}$/i;
              if (!ridRegex.test(encodingParam.rid)) {
                throw new TypeError('Invalid RID value provided.');
              }
            }
            if ('scaleResolutionDownBy' in encodingParam) {
              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {
                throw new RangeError('scale_resolution_down_by must be >= 1.0');
              }
            }
            if ('maxFramerate' in encodingParam) {
              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {
                throw new RangeError('max_framerate must be >= 0.0');
              }
            }
          });
        }
        const transceiver = origAddTransceiver.apply(this, arguments);
        if (shouldPerformCheck) {
          // Check if the init options were applied. If not we do this in an
          // asynchronous way and save the promise reference in a global object.
          // This is an ugly hack, but at the same time is way more robust than
          // checking the sender parameters before and after the createOffer
          // Also note that after the createoffer we are not 100% sure that
          // the params were asynchronously applied so we might miss the
          // opportunity to recreate offer.
          const {sender} = transceiver;
          const params = sender.getParameters();
          if (!('encodings' in params) ||
              // Avoid being fooled by patched getParameters() below.
              (params.encodings.length === 1 &&
               Object.keys(params.encodings[0]).length === 0)) {
            params.encodings = initParameters.sendEncodings;
            sender.sendEncodings = initParameters.sendEncodings;
            this.setParametersPromises.push(sender.setParameters(params)
              .then(() => {
                delete sender.sendEncodings;
              }).catch(() => {
                delete sender.sendEncodings;
              })
            );
          }
        }
        return transceiver;
      };
  }
}

function shimGetParameters(window) {
  if (!(typeof window === 'object' && window.RTCRtpSender)) {
    return;
  }
  const origGetParameters = window.RTCRtpSender.prototype.getParameters;
  if (origGetParameters) {
    window.RTCRtpSender.prototype.getParameters =
      function getParameters() {
        const params = origGetParameters.apply(this, arguments);
        if (!('encodings' in params)) {
          params.encodings = [].concat(this.sendEncodings || [{}]);
        }
        return params;
      };
  }
}

function shimCreateOffer(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;
  window.RTCPeerConnection.prototype.createOffer = function createOffer() {
    if (this.setParametersPromises && this.setParametersPromises.length) {
      return Promise.all(this.setParametersPromises)
      .then(() => {
        return origCreateOffer.apply(this, arguments);
      })
      .finally(() => {
        this.setParametersPromises = [];
      });
    }
    return origCreateOffer.apply(this, arguments);
  };
}

function shimCreateAnswer(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;
  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {
    if (this.setParametersPromises && this.setParametersPromises.length) {
      return Promise.all(this.setParametersPromises)
      .then(() => {
        return origCreateAnswer.apply(this, arguments);
      })
      .finally(() => {
        this.setParametersPromises = [];
      });
    }
    return origCreateAnswer.apply(this, arguments);
  };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":
/*!***********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetDisplayMedia": () => (/* binding */ shimGetDisplayMedia)
/* harmony export */ });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */


function shimGetDisplayMedia(window, preferredMediaSource) {
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    function getDisplayMedia(constraints) {
      if (!(constraints && constraints.video)) {
        const err = new DOMException('getDisplayMedia without video ' +
            'constraints is undefined');
        err.name = 'NotFoundError';
        // from https://heycam.github.io/webidl/#idl-DOMException-error-names
        err.code = 8;
        return Promise.reject(err);
      }
      if (constraints.video === true) {
        constraints.video = {mediaSource: preferredMediaSource};
      } else {
        constraints.video.mediaSource = preferredMediaSource;
      }
      return window.navigator.mediaDevices.getUserMedia(constraints);
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetUserMedia": () => (/* binding */ shimGetUserMedia)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */




function shimGetUserMedia(window, browserDetails) {
  const navigator = window && window.navigator;
  const MediaStreamTrack = window && window.MediaStreamTrack;

  navigator.getUserMedia = function(constraints, onSuccess, onError) {
    // Replace Firefox 44+'s deprecation warning with unprefixed version.
    _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('navigator.getUserMedia',
        'navigator.mediaDevices.getUserMedia');
    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);
  };

  if (!(browserDetails.version > 55 &&
      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {
    const remap = function(obj, a, b) {
      if (a in obj && !(b in obj)) {
        obj[b] = obj[a];
        delete obj[a];
      }
    };

    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.
        bind(navigator.mediaDevices);
    navigator.mediaDevices.getUserMedia = function(c) {
      if (typeof c === 'object' && typeof c.audio === 'object') {
        c = JSON.parse(JSON.stringify(c));
        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');
        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');
      }
      return nativeGetUserMedia(c);
    };

    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {
      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;
      MediaStreamTrack.prototype.getSettings = function() {
        const obj = nativeGetSettings.apply(this, arguments);
        remap(obj, 'mozAutoGainControl', 'autoGainControl');
        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');
        return obj;
      };
    }

    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {
      const nativeApplyConstraints =
        MediaStreamTrack.prototype.applyConstraints;
      MediaStreamTrack.prototype.applyConstraints = function(c) {
        if (this.kind === 'audio' && typeof c === 'object') {
          c = JSON.parse(JSON.stringify(c));
          remap(c, 'autoGainControl', 'mozAutoGainControl');
          remap(c, 'noiseSuppression', 'mozNoiseSuppression');
        }
        return nativeApplyConstraints.apply(this, [c]);
      };
    }
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimAudioContext": () => (/* binding */ shimAudioContext),
/* harmony export */   "shimCallbacksAPI": () => (/* binding */ shimCallbacksAPI),
/* harmony export */   "shimConstraints": () => (/* binding */ shimConstraints),
/* harmony export */   "shimCreateOfferLegacy": () => (/* binding */ shimCreateOfferLegacy),
/* harmony export */   "shimGetUserMedia": () => (/* binding */ shimGetUserMedia),
/* harmony export */   "shimLocalStreamsAPI": () => (/* binding */ shimLocalStreamsAPI),
/* harmony export */   "shimRTCIceServerUrls": () => (/* binding */ shimRTCIceServerUrls),
/* harmony export */   "shimRemoteStreamsAPI": () => (/* binding */ shimRemoteStreamsAPI),
/* harmony export */   "shimTrackEventTransceiver": () => (/* binding */ shimTrackEventTransceiver)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */



function shimLocalStreamsAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.getLocalStreams =
      function getLocalStreams() {
        if (!this._localStreams) {
          this._localStreams = [];
        }
        return this._localStreams;
      };
  }
  if (!('addStream' in window.RTCPeerConnection.prototype)) {
    const _addTrack = window.RTCPeerConnection.prototype.addTrack;
    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
      if (!this._localStreams) {
        this._localStreams = [];
      }
      if (!this._localStreams.includes(stream)) {
        this._localStreams.push(stream);
      }
      // Try to emulate Chrome's behaviour of adding in audio-video order.
      // Safari orders by track id.
      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,
        stream));
      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,
        stream));
    };

    window.RTCPeerConnection.prototype.addTrack =
      function addTrack(track, ...streams) {
        if (streams) {
          streams.forEach((stream) => {
            if (!this._localStreams) {
              this._localStreams = [stream];
            } else if (!this._localStreams.includes(stream)) {
              this._localStreams.push(stream);
            }
          });
        }
        return _addTrack.apply(this, arguments);
      };
  }
  if (!('removeStream' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.removeStream =
      function removeStream(stream) {
        if (!this._localStreams) {
          this._localStreams = [];
        }
        const index = this._localStreams.indexOf(stream);
        if (index === -1) {
          return;
        }
        this._localStreams.splice(index, 1);
        const tracks = stream.getTracks();
        this.getSenders().forEach(sender => {
          if (tracks.includes(sender.track)) {
            this.removeTrack(sender);
          }
        });
      };
  }
}

function shimRemoteStreamsAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.getRemoteStreams =
      function getRemoteStreams() {
        return this._remoteStreams ? this._remoteStreams : [];
      };
  }
  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {
      get() {
        return this._onaddstream;
      },
      set(f) {
        if (this._onaddstream) {
          this.removeEventListener('addstream', this._onaddstream);
          this.removeEventListener('track', this._onaddstreampoly);
        }
        this.addEventListener('addstream', this._onaddstream = f);
        this.addEventListener('track', this._onaddstreampoly = (e) => {
          e.streams.forEach(stream => {
            if (!this._remoteStreams) {
              this._remoteStreams = [];
            }
            if (this._remoteStreams.includes(stream)) {
              return;
            }
            this._remoteStreams.push(stream);
            const event = new Event('addstream');
            event.stream = stream;
            this.dispatchEvent(event);
          });
        });
      }
    });
    const origSetRemoteDescription =
      window.RTCPeerConnection.prototype.setRemoteDescription;
    window.RTCPeerConnection.prototype.setRemoteDescription =
      function setRemoteDescription() {
        const pc = this;
        if (!this._onaddstreampoly) {
          this.addEventListener('track', this._onaddstreampoly = function(e) {
            e.streams.forEach(stream => {
              if (!pc._remoteStreams) {
                pc._remoteStreams = [];
              }
              if (pc._remoteStreams.indexOf(stream) >= 0) {
                return;
              }
              pc._remoteStreams.push(stream);
              const event = new Event('addstream');
              event.stream = stream;
              pc.dispatchEvent(event);
            });
          });
        }
        return origSetRemoteDescription.apply(pc, arguments);
      };
  }
}

function shimCallbacksAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  const prototype = window.RTCPeerConnection.prototype;
  const origCreateOffer = prototype.createOffer;
  const origCreateAnswer = prototype.createAnswer;
  const setLocalDescription = prototype.setLocalDescription;
  const setRemoteDescription = prototype.setRemoteDescription;
  const addIceCandidate = prototype.addIceCandidate;

  prototype.createOffer =
    function createOffer(successCallback, failureCallback) {
      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];
      const promise = origCreateOffer.apply(this, [options]);
      if (!failureCallback) {
        return promise;
      }
      promise.then(successCallback, failureCallback);
      return Promise.resolve();
    };

  prototype.createAnswer =
    function createAnswer(successCallback, failureCallback) {
      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];
      const promise = origCreateAnswer.apply(this, [options]);
      if (!failureCallback) {
        return promise;
      }
      promise.then(successCallback, failureCallback);
      return Promise.resolve();
    };

  let withCallback = function(description, successCallback, failureCallback) {
    const promise = setLocalDescription.apply(this, [description]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.setLocalDescription = withCallback;

  withCallback = function(description, successCallback, failureCallback) {
    const promise = setRemoteDescription.apply(this, [description]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.setRemoteDescription = withCallback;

  withCallback = function(candidate, successCallback, failureCallback) {
    const promise = addIceCandidate.apply(this, [candidate]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.addIceCandidate = withCallback;
}

function shimGetUserMedia(window) {
  const navigator = window && window.navigator;

  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // shim not needed in Safari 12.1
    const mediaDevices = navigator.mediaDevices;
    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);
    navigator.mediaDevices.getUserMedia = (constraints) => {
      return _getUserMedia(shimConstraints(constraints));
    };
  }

  if (!navigator.getUserMedia && navigator.mediaDevices &&
    navigator.mediaDevices.getUserMedia) {
    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {
      navigator.mediaDevices.getUserMedia(constraints)
      .then(cb, errcb);
    }.bind(navigator);
  }
}

function shimConstraints(constraints) {
  if (constraints && constraints.video !== undefined) {
    return Object.assign({},
      constraints,
      {video: _utils__WEBPACK_IMPORTED_MODULE_0__.compactObject(constraints.video)}
    );
  }

  return constraints;
}

function shimRTCIceServerUrls(window) {
  if (!window.RTCPeerConnection) {
    return;
  }
  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls
  const OrigPeerConnection = window.RTCPeerConnection;
  window.RTCPeerConnection =
    function RTCPeerConnection(pcConfig, pcConstraints) {
      if (pcConfig && pcConfig.iceServers) {
        const newIceServers = [];
        for (let i = 0; i < pcConfig.iceServers.length; i++) {
          let server = pcConfig.iceServers[i];
          if (!server.hasOwnProperty('urls') &&
              server.hasOwnProperty('url')) {
            _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('RTCIceServer.url', 'RTCIceServer.urls');
            server = JSON.parse(JSON.stringify(server));
            server.urls = server.url;
            delete server.url;
            newIceServers.push(server);
          } else {
            newIceServers.push(pcConfig.iceServers[i]);
          }
        }
        pcConfig.iceServers = newIceServers;
      }
      return new OrigPeerConnection(pcConfig, pcConstraints);
    };
  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;
  // wrap static methods. Currently just generateCertificate.
  if ('generateCertificate' in OrigPeerConnection) {
    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {
      get() {
        return OrigPeerConnection.generateCertificate;
      }
    });
  }
}

function shimTrackEventTransceiver(window) {
  // Add event.transceiver member over deprecated event.receiver
  if (typeof window === 'object' && window.RTCTrackEvent &&
      'receiver' in window.RTCTrackEvent.prototype &&
      !('transceiver' in window.RTCTrackEvent.prototype)) {
    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {
      get() {
        return {receiver: this.receiver};
      }
    });
  }
}

function shimCreateOfferLegacy(window) {
  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;
  window.RTCPeerConnection.prototype.createOffer =
    function createOffer(offerOptions) {
      if (offerOptions) {
        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {
          // support bit values
          offerOptions.offerToReceiveAudio =
            !!offerOptions.offerToReceiveAudio;
        }
        const audioTransceiver = this.getTransceivers().find(transceiver =>
          transceiver.receiver.track.kind === 'audio');
        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {
          if (audioTransceiver.direction === 'sendrecv') {
            if (audioTransceiver.setDirection) {
              audioTransceiver.setDirection('sendonly');
            } else {
              audioTransceiver.direction = 'sendonly';
            }
          } else if (audioTransceiver.direction === 'recvonly') {
            if (audioTransceiver.setDirection) {
              audioTransceiver.setDirection('inactive');
            } else {
              audioTransceiver.direction = 'inactive';
            }
          }
        } else if (offerOptions.offerToReceiveAudio === true &&
            !audioTransceiver) {
          this.addTransceiver('audio', {direction: 'recvonly'});
        }

        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {
          // support bit values
          offerOptions.offerToReceiveVideo =
            !!offerOptions.offerToReceiveVideo;
        }
        const videoTransceiver = this.getTransceivers().find(transceiver =>
          transceiver.receiver.track.kind === 'video');
        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {
          if (videoTransceiver.direction === 'sendrecv') {
            if (videoTransceiver.setDirection) {
              videoTransceiver.setDirection('sendonly');
            } else {
              videoTransceiver.direction = 'sendonly';
            }
          } else if (videoTransceiver.direction === 'recvonly') {
            if (videoTransceiver.setDirection) {
              videoTransceiver.setDirection('inactive');
            } else {
              videoTransceiver.direction = 'inactive';
            }
          }
        } else if (offerOptions.offerToReceiveVideo === true &&
            !videoTransceiver) {
          this.addTransceiver('video', {direction: 'recvonly'});
        }
      }
      return origCreateOffer.apply(this, arguments);
    };
}

function shimAudioContext(window) {
  if (typeof window !== 'object' || window.AudioContext) {
    return;
  }
  window.AudioContext = window.webkitAudioContext;
}



/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/utils.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compactObject": () => (/* binding */ compactObject),
/* harmony export */   "deprecated": () => (/* binding */ deprecated),
/* harmony export */   "detectBrowser": () => (/* binding */ detectBrowser),
/* harmony export */   "disableLog": () => (/* binding */ disableLog),
/* harmony export */   "disableWarnings": () => (/* binding */ disableWarnings),
/* harmony export */   "extractVersion": () => (/* binding */ extractVersion),
/* harmony export */   "filterStats": () => (/* binding */ filterStats),
/* harmony export */   "log": () => (/* binding */ log),
/* harmony export */   "walkStats": () => (/* binding */ walkStats),
/* harmony export */   "wrapPeerConnectionEvent": () => (/* binding */ wrapPeerConnectionEvent)
/* harmony export */ });
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */


let logDisabled_ = true;
let deprecationWarnings_ = true;

/**
 * Extract browser version out of the provided user agent string.
 *
 * @param {!string} uastring userAgent string.
 * @param {!string} expr Regular expression used as match criteria.
 * @param {!number} pos position in the version string to be returned.
 * @return {!number} browser version.
 */
function extractVersion(uastring, expr, pos) {
  const match = uastring.match(expr);
  return match && match.length >= pos && parseInt(match[pos], 10);
}

// Wraps the peerconnection event eventNameToWrap in a function
// which returns the modified event object (or false to prevent
// the event).
function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {
  if (!window.RTCPeerConnection) {
    return;
  }
  const proto = window.RTCPeerConnection.prototype;
  const nativeAddEventListener = proto.addEventListener;
  proto.addEventListener = function(nativeEventName, cb) {
    if (nativeEventName !== eventNameToWrap) {
      return nativeAddEventListener.apply(this, arguments);
    }
    const wrappedCallback = (e) => {
      const modifiedEvent = wrapper(e);
      if (modifiedEvent) {
        if (cb.handleEvent) {
          cb.handleEvent(modifiedEvent);
        } else {
          cb(modifiedEvent);
        }
      }
    };
    this._eventMap = this._eventMap || {};
    if (!this._eventMap[eventNameToWrap]) {
      this._eventMap[eventNameToWrap] = new Map();
    }
    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);
    return nativeAddEventListener.apply(this, [nativeEventName,
      wrappedCallback]);
  };

  const nativeRemoveEventListener = proto.removeEventListener;
  proto.removeEventListener = function(nativeEventName, cb) {
    if (nativeEventName !== eventNameToWrap || !this._eventMap
        || !this._eventMap[eventNameToWrap]) {
      return nativeRemoveEventListener.apply(this, arguments);
    }
    if (!this._eventMap[eventNameToWrap].has(cb)) {
      return nativeRemoveEventListener.apply(this, arguments);
    }
    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);
    this._eventMap[eventNameToWrap].delete(cb);
    if (this._eventMap[eventNameToWrap].size === 0) {
      delete this._eventMap[eventNameToWrap];
    }
    if (Object.keys(this._eventMap).length === 0) {
      delete this._eventMap;
    }
    return nativeRemoveEventListener.apply(this, [nativeEventName,
      unwrappedCb]);
  };

  Object.defineProperty(proto, 'on' + eventNameToWrap, {
    get() {
      return this['_on' + eventNameToWrap];
    },
    set(cb) {
      if (this['_on' + eventNameToWrap]) {
        this.removeEventListener(eventNameToWrap,
            this['_on' + eventNameToWrap]);
        delete this['_on' + eventNameToWrap];
      }
      if (cb) {
        this.addEventListener(eventNameToWrap,
            this['_on' + eventNameToWrap] = cb);
      }
    },
    enumerable: true,
    configurable: true
  });
}

function disableLog(bool) {
  if (typeof bool !== 'boolean') {
    return new Error('Argument type: ' + typeof bool +
        '. Please use a boolean.');
  }
  logDisabled_ = bool;
  return (bool) ? 'adapter.js logging disabled' :
      'adapter.js logging enabled';
}

/**
 * Disable or enable deprecation warnings
 * @param {!boolean} bool set to true to disable warnings.
 */
function disableWarnings(bool) {
  if (typeof bool !== 'boolean') {
    return new Error('Argument type: ' + typeof bool +
        '. Please use a boolean.');
  }
  deprecationWarnings_ = !bool;
  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');
}

function log() {
  if (typeof window === 'object') {
    if (logDisabled_) {
      return;
    }
    if (typeof console !== 'undefined' && typeof console.log === 'function') {
      console.log.apply(console, arguments);
    }
  }
}

/**
 * Shows a deprecation warning suggesting the modern and spec-compatible API.
 */
function deprecated(oldMethod, newMethod) {
  if (!deprecationWarnings_) {
    return;
  }
  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +
      ' instead.');
}

/**
 * Browser detector.
 *
 * @return {object} result containing browser and version
 *     properties.
 */
function detectBrowser(window) {
  // Returned result object.
  const result = {browser: null, version: null};

  // Fail early if it's not a browser
  if (typeof window === 'undefined' || !window.navigator) {
    result.browser = 'Not a browser.';
    return result;
  }

  const {navigator} = window;

  if (navigator.mozGetUserMedia) { // Firefox.
    result.browser = 'firefox';
    result.version = extractVersion(navigator.userAgent,
        /Firefox\/(\d+)\./, 1);
  } else if (navigator.webkitGetUserMedia ||
      (window.isSecureContext === false && window.webkitRTCPeerConnection &&
       !window.RTCIceGatherer)) {
    // Chrome, Chromium, Webview, Opera.
    // Version matches Chrome/WebRTC version.
    // Chrome 74 removed webkitGetUserMedia on http as well so we need the
    // more complicated fallback to webkitRTCPeerConnection.
    result.browser = 'chrome';
    result.version = extractVersion(navigator.userAgent,
        /Chrom(e|ium)\/(\d+)\./, 2);
  } else if (window.RTCPeerConnection &&
      navigator.userAgent.match(/AppleWebKit\/(\d+)\./)) { // Safari.
    result.browser = 'safari';
    result.version = extractVersion(navigator.userAgent,
        /AppleWebKit\/(\d+)\./, 1);
    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&
        'currentDirection' in window.RTCRtpTransceiver.prototype;
  } else { // Default fallthrough: not supported.
    result.browser = 'Not a supported browser.';
    return result;
  }

  return result;
}

/**
 * Checks if something is an object.
 *
 * @param {*} val The something you want to check.
 * @return true if val is an object, false otherwise.
 */
function isObject(val) {
  return Object.prototype.toString.call(val) === '[object Object]';
}

/**
 * Remove all empty objects and undefined values
 * from a nested object -- an enhanced and vanilla version
 * of Lodash's `compact`.
 */
function compactObject(data) {
  if (!isObject(data)) {
    return data;
  }

  return Object.keys(data).reduce(function(accumulator, key) {
    const isObj = isObject(data[key]);
    const value = isObj ? compactObject(data[key]) : data[key];
    const isEmptyObject = isObj && !Object.keys(value).length;
    if (value === undefined || isEmptyObject) {
      return accumulator;
    }
    return Object.assign(accumulator, {[key]: value});
  }, {});
}

/* iterates the stats graph recursively. */
function walkStats(stats, base, resultSet) {
  if (!base || resultSet.has(base.id)) {
    return;
  }
  resultSet.set(base.id, base);
  Object.keys(base).forEach(name => {
    if (name.endsWith('Id')) {
      walkStats(stats, stats.get(base[name]), resultSet);
    } else if (name.endsWith('Ids')) {
      base[name].forEach(id => {
        walkStats(stats, stats.get(id), resultSet);
      });
    }
  });
}

/* filter getStats for a sender/receiver track. */
function filterStats(result, track, outbound) {
  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';
  const filteredResult = new Map();
  if (track === null) {
    return filteredResult;
  }
  const trackStats = [];
  result.forEach(value => {
    if (value.type === 'track' &&
        value.trackIdentifier === track.id) {
      trackStats.push(value);
    }
  });
  trackStats.forEach(trackStat => {
    result.forEach(stats => {
      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {
        walkStats(result, stats, filteredResult);
      }
    });
  });
  return filteredResult;
}



/***/ }),

/***/ "./node_modules/worker-loader/dist/cjs.js?esModule=false&filename=[name].js!./node_modules/pdfjs-dist/build/pdf.worker.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/worker-loader/dist/cjs.js?esModule=false&filename=[name].js!./node_modules/pdfjs-dist/build/pdf.worker.js ***!
  \********************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = function Worker_fn() {
  return new Worker(__webpack_require__.p + "pdf.worker.js");
}


/***/ }),

/***/ "./src/player-icons.ttf":
/*!******************************!*\
  !*** ./src/player-icons.ttf ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = "data:font/ttf;base64,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";

/***/ }),

/***/ "./src/component/player-controls/player-controls.css":
/*!***********************************************************!*\
  !*** ./src/component/player-controls/player-controls.css ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = "player-controls {\r\n\twidth: 100%;\r\n}\r\n\r\n#controlContainer {\r\n\t--seek-before-width: 0%;\r\n\t--volume-before-width: 100%;\r\n\t--buffered-width: 0%;\r\n\twidth: 100%;\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\r\n\tbackground-color: rgba(233, 236, 239, 0.8);\r\n\tborder-radius: 0.333em;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n}\r\n#controlContainer::before {\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\tz-index: -1;\r\n}\r\n#controlContainer path {\r\n    stroke: #007db5;\r\n}\r\n\r\n#controlContainer button {\r\n\tpadding: 0;\r\n\tborder: 0;\r\n\tbackground: transparent;\r\n\tborder-radius: 0.333em;\r\n\tcursor: pointer;\r\n\toutline: none;\r\n\tmin-width: 40px;\r\n\twidth: 40px;\r\n\tmin-height: 40px;\r\n\theight: 40px;\r\n\tfont-size: 1.25em;\r\n}\r\n#controlContainer button:hover {\r\n\tcolor: rgba(0, 125, 181, 1);\r\n\tbackground-color: rgba(222, 226, 230, 0.9);\r\n}\r\n#controlContainer button.selected {\r\n\tbackground-color: rgba(0, 125, 181, 1);\r\n}\r\n#controlContainer button.selected:hover {\r\n\tbackground-color: rgba(0, 125, 181, 0.8);\r\n}\r\n#controlContainer button.active {\r\n\tcolor: rgba(0, 125, 181, 1);\r\n}\r\n#controlContainer button.active:hover {\r\n\tcolor: rgba(0, 125, 181, 0.8);\r\n}\r\n#controlContainer button.selected path {\r\n\tcolor: #F9FAFB;\r\n\tstroke: #F9FAFB;\r\n}\r\n#controlContainer #raiseHandButton button.active {\r\n\tbackground-color: rgba(25, 135, 84, 1);\r\n}\r\n#controlContainer #raiseHandButton button.active:hover {\r\n\tbackground-color: rgba(255, 193, 7, 1);\r\n}\r\n#controlContainer #raiseHandButton button.active path {\r\n\tstroke: #F9FAFB;\r\n}\r\n#controlContainer button svg {\r\n\twidth: 23px;\r\n\theight: 23px;\r\n\tvertical-align: text-bottom;\r\n}\r\n#controlContainer #settingsButton path {\r\n\tstroke: #212529;\r\n}\r\n#controlContainer #playMediaButton {\r\n\tbackground-color: #FECACA;\r\n}\r\n#controlContainer #playMediaButton:hover {\r\n\tbackground-color: #FEE2E2;\r\n}\r\n#controlContainer #showQuizButton {\r\n\tcolor: #15803D;\r\n}\r\n#controlContainer .pulse {\r\n\t--animation-color: #15803D;\r\n\tanimation: button-pulse 2s 5;\r\n\tz-index: 10;\r\n}\r\n#controlContainer .pulse-infinite {\r\n\t--animation-color: #007db5;\r\n\tanimation: button-pulse 2s infinite;\r\n\tz-index: 10;\r\n}\r\n\r\n\r\n\r\n#controlContainer .control-bar {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n}\r\n#controlContainer .control-bar .col {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n#controlContainer .control-bar .nav-left {\r\n\tflex: 1;\r\n\tjustify-content: flex-start;\r\n}\r\n#controlContainer .control-bar .nav-center {\r\n\tflex: 1;\r\n\tjustify-content: center;\r\n}\r\n#controlContainer .control-bar .nav-right {\r\n\tflex: 1;\r\n\tjustify-content: flex-end;\r\n}\r\n\r\n#controlContainer #volumeSlider {\r\n    margin: 10px 2.5%;\r\n    width: 150px;\r\n}\r\n#controlContainer #volumeSlider::-webkit-slider-runnable-track {\r\n    background: rgba(0, 125, 181, 0.6);\r\n}\r\n#controlContainer #volumeSlider::-moz-range-track {\r\n    background: rgba(0, 125, 181, 0.6);\r\n}\r\n#controlContainer #volumeSlider::-ms-fill-upper {\r\n    background: rgba(0, 125, 181, 0.6);\r\n}\r\n#controlContainer #volumeSlider::before {\r\n    width: var(--volume-before-width);\r\n}\r\n#controlContainer #volumeIndicator {\r\n    margin: 0 0;\r\n}\r\n#controlContainer input[type=\"range\"] {\r\n    position: relative;\r\n    -webkit-appearance: none;\r\n    width: 48%;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 19px;\r\n    margin: 30px 2.5% 20px 2.5%;\r\n    float: left;\r\n    outline: none;\r\n\tbackground: transparent;\r\n}\r\n#controlContainer input[type=\"range\"]::-webkit-slider-runnable-track {\r\n    width: 100%;\r\n    height: 3px;\r\n    cursor: pointer;\r\n    background: linear-gradient(to right, rgba(0, 125, 181, 0.6) var(--buffered-width), rgba(0, 125, 181, 0.2) var(--buffered-width));\r\n}\r\n#controlContainer input[type=\"range\"]::before {\r\n    position: absolute;\r\n    content: \"\";\r\n    top: 8px;\r\n    left: 0;\r\n    width: var(--seek-before-width);\r\n    height: 3px;\r\n    background-color: #007db5;\r\n    cursor: pointer;\r\n}\r\n#controlContainer input[type=\"range\"]::-webkit-slider-thumb {\r\n    position: relative;\r\n    -webkit-appearance: none;\r\n    box-sizing: content-box;\r\n    border: 1px solid #007db5;\r\n    height: 15px;\r\n    width: 15px;\r\n    border-radius: 50%;\r\n    background-color: #fff;\r\n    cursor: pointer;\r\n    margin: -7px 0 0 0;\r\n}\r\n#controlContainer input[type=\"range\"]:active::-webkit-slider-thumb {\r\n    transform: scale(1.2);\r\n    background: #007db5;\r\n}\r\n#controlContainer input[type=\"range\"]::-moz-range-track {\r\n    width: 100%;\r\n    height: 3px;\r\n    cursor: pointer;\r\n    background: linear-gradient(to right, rgba(0, 125, 181, 0.6) var(--buffered-width), rgba(0, 125, 181, 0.2) var(--buffered-width));\r\n}\r\n#controlContainer input[type=\"range\"]::-moz-range-progress {\r\n    background-color: #007db5;\r\n}\r\n#controlContainer input[type=\"range\"]::-moz-focus-outer {\r\n    border: 0;\r\n}\r\n#controlContainer input[type=\"range\"]::-moz-range-thumb {\r\n    box-sizing: content-box;\r\n    border: 1px solid #007db5;\r\n    height: 15px;\r\n    width: 15px;\r\n    border-radius: 50%;\r\n    background-color: #fff;\r\n    cursor: pointer;\r\n}\r\n#controlContainer input[type=\"range\"]:active::-moz-range-thumb {\r\n    transform: scale(1.2);\r\n    background: #007db5;\r\n}\r\n#controlContainer input[type=\"range\"]::-ms-track {\r\n    width: 100%;\r\n    height: 3px;\r\n    cursor: pointer;\r\n    background: transparent;\r\n    border: solid transparent;\r\n    color: transparent;\r\n}\r\n#controlContainer input[type=\"range\"]::-ms-fill-lower {\r\n    background-color: #007db5;\r\n}\r\n#controlContainer input[type=\"range\"]::-ms-fill-upper {\r\n    background: linear-gradient(to right, rgba(0, 125, 181, 0.6) var(--buffered-width), rgba(0, 125, 181, 0.2) var(--buffered-width));\r\n}\r\n#controlContainer input[type=\"range\"]::-ms-thumb {\r\n    box-sizing: content-box;\r\n    border: 1px solid #007db5;\r\n    height: 15px;\r\n    width: 15px;\r\n    border-radius: 50%;\r\n    background-color: #fff;\r\n    cursor: pointer;\r\n}\r\n#controlContainer input[type=\"range\"]:active::-ms-thumb {\r\n    transform: scale(1.2);\r\n    background: #007db5;\r\n}\r\n\r\n\r\n@-webkit-keyframes button-pulse {\r\n\t0% {\r\n\t\t-webkit-box-shadow: 0 0 0 0 var(--animation-color);\r\n\t}\r\n\t70% {\r\n\t\t-webkit-box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);\r\n\t}\r\n\t100% {\r\n\t\t-webkit-box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\r\n\t}\r\n}\r\n@keyframes button-pulse {\r\n\t0% {\r\n\t\t-moz-box-shadow: 0 0 0 0 var(--animation-color);\r\n\t\tbox-shadow: 0 0 0 0 var(--animation-color);\r\n\t}\r\n\t70% {\r\n\t\t-moz-box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);\r\n\t\tbox-shadow: 0 0 0 10px rgba(0, 0, 0, 0);\r\n\t}\r\n\t100% {\r\n\t\t-moz-box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\r\n\t\tbox-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\r\n\t}\r\n}";

/***/ }),

/***/ "./src/component/player-controls/player-controls.html":
/*!************************************************************!*\
  !*** ./src/component/player-controls/player-controls.html ***!
  \************************************************************/
/***/ ((module) => {

"use strict";
module.exports = "<div id=\"controlContainer\">\r\n\t<div class=\"control-bar\">\r\n\t\t<div class=\"col nav-left\">\r\n\t\t\t<button id=\"volumeIndicator\"></button>\r\n\t\t\t<input type=\"range\" id=\"volumeSlider\" class=\"d-sm-block d-none\" max=\"100\" value=\"100\">\r\n\t\t\t<span id=\"duration\" class=\"ps-1\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"col nav-center\">\r\n\t\t\t<button id=\"raiseHandButton\">\r\n\t\t\t\t<svg viewBox=\"0 0 512 512\">\r\n\t\t\t\t\t<path d=\"M80 320V144a32 32 0 0132-32h0a32 32 0 0132 32v112M144 256V80a32 32 0 0132-32h0a32 32 0 0132 32v160M272 241V96a32 32 0 0132-32h0a32 32 0 0132 32v224M208 240V48a32 32 0 0132-32h0a32 32 0 0132 32v192\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"/>\r\n\t\t\t\t\t<path d=\"M80 320c0 117.4 64 176 152 176s123.71-39.6 144-88l52.71-144c6.66-18.05 3.64-34.79-11.87-43.6h0c-15.52-8.82-35.91-4.28-44.31 11.68L336 320\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t\t<button class=\"invisible\" id=\"showQuizButton\">\r\n\t\t\t\t<svg stroke-width=\"0.1\" fill=\"currentColor\" stroke=\"currentColor\" viewBox=\"0 0 16 16\">\r\n\t\t\t\t\t<path d=\"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z\" fill=\"currentColor\" stroke=\"currentColor\"/>\r\n\t\t\t\t\t<path d=\"M7 5.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm-1.496-.854a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0zM7 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm-1.496-.854a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z\" fill=\"currentColor\" stroke=\"currentColor\"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class=\"invisible\" id=\"playMediaButton\">\r\n\t\t\t\t<svg viewBox=\"0 0 512 512\">\r\n\t\t\t\t\t<path d=\"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z\" fill=\"none\" stroke=\"currentColor\" stroke-miterlimit=\"10\" stroke-width=\"32\"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"col nav-right\">\r\n\t\t\t<button id=\"chatButton\" class=\"bi bi-chat-text invisible\" data-bs-toggle=\"button\"></button>\r\n\t\t\t<button id=\"settingsButton\" class=\"bi bi-gear\"></button>\r\n\t\t\t<button id=\"fullscreenButton\" class=\"bi bi-fullscreen\"></button>\r\n\t\t</div>\r\n\t</div>\r\n</div>";

/***/ }),

/***/ "./src/view/player-view/player.view.css":
/*!**********************************************!*\
  !*** ./src/view/player-view/player.view.css ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = "player-view {\r\n\tbackground-color: #f8f9fa;\r\n\tdisplay: flex;\r\n\tflex-grow: 1;\r\n\tflex-direction: column;\r\n}\r\nplayer-view > .player-container {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n}\r\nplayer-view .slide-container {\r\n\tdisplay: flex;\r\n\tflex-grow: 1;\r\n\tflex-direction: column;\r\n}\r\nplayer-view .feed-container {\r\n\tdisplay: flex;\r\n\tflex-grow: 0;\r\n\tflex-direction: column;\r\n}\r\nplayer-view .right-container {\r\n\tbackground-color: rgba(233, 236, 239, 0.8);\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tpadding: 0.5em 0.5em;\r\n\tmargin-left: 0.5em;\r\n}\r\nplayer-view slide-view {\r\n\tflex-grow: 1;\r\n}\r\nplayer-view .feed-container video {\r\n\tborder: 2px solid #94A3B8;\r\n\tmax-width: 15em;\r\n\tmax-height: 9em;\r\n}\r\nplayer-view .chat-container > * {\r\n\tmin-width: 15em;\r\n}\r\nplayer-view .invisible {\r\n\tdisplay: none;\r\n}\r\n\r\ntextarea[id=messageTextarea] {\r\n\tresize: none;\r\n\tborder-radius: 0;\r\n}\r\ntextarea[id=messageTextarea]:focus {   \r\n\tborder-color: #86b7fe;\r\n\toutline: 0;\r\n\tbox-shadow: 0 0 0 -0.25rem rgba(13, 110, 253, 0.25);\r\n}\r\n\r\n#chatModal .modal-body {\r\n\tpadding: 0;\r\n}\r\n#chatModal .modal-footer {\r\n\tborder-top: 0;\r\n}\r\n\r\n\r\n@media (max-width: 576px) {\r\n\tplayer-view .feed-container video {\r\n\t\tborder: 2px solid #94A3B8;\r\n\t\tmax-width: 10em;\r\n\t\tmax-height: 5em;\r\n\t}\r\n}";

/***/ }),

/***/ "./src/view/player-view/player.view.html":
/*!***********************************************!*\
  !*** ./src/view/player-view/player.view.html ***!
  \***********************************************/
/***/ ((module) => {

"use strict";
module.exports = "<div class=\"d-flex flex-column flex-sm-row h-100 bg-light p-2\" id=\"playerContainer\">\r\n\t<div class=\"order-sm-0 order-2 d-flex flex-column h-100 w-100\">\r\n\t\t<div class=\"d-flex flex-row h-100 w-100\">\r\n\t\t\t<div class=\"d-flex h-100 w-100 pb-1 px-1\">\r\n\t\t\t\t<div class=\"d-flex h-100 w-100\" id=\"slideContainer\">\r\n\t\t\t\t\t<slide-view class=\"d-flex h-100 w-100\" id=\"slideView\"></slide-view>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"w-100 d-flex align-items-end\">\r\n\t\t\t<player-controls id=\"playerControls\"></player-controls>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"d-flex flex-column bg-white\" id=\"rightContainer\">\r\n\t\t<div class=\"order-sm-2 order-1 d-flex flex-row flex-sm-column\" id=\"videoFeedContainer\">\r\n\t\t\t<div class=\"feed-container invisible\" id=\"localVideoFeedContainer\">\r\n\t\t\t\t<video id=\"localVideoFeed\" autoplay playsinline muted></video>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"feed-container invisible\" id=\"mainVideoFeedContainer\">\r\n\t\t\t\t<video id=\"videoFeed\" autoplay playsinline></video>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"order-sm-last order-last mt-auto d-flex flex-row d-none d-sm-block chat-container\" id=\"chatContainer\">\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class=\"modal fade\" id=\"chatModal\" tabindex=\"-1\" aria-labelledby=\"chatModalLabel\" aria-hidden=\"true\">\r\n\t<div class=\"modal-dialog\">\r\n\t\t<div class=\"modal-content\">\r\n\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t<div class=\"modal-title\" id=\"chatModalLabel\">Chat</div>\r\n\t\t\t\t<button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-body\">\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" data-bs-dismiss=\"modal\">Schlieen</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class=\"modal fade\" id=\"entry-modal\" aria-hidden=\"true\" aria-labelledby=\"entryModalLabel\" tabindex=\"-1\">\r\n\t<div class=\"modal-dialog\">\r\n\t\t<div class=\"modal-content\">\r\n\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t<div class=\"modal-title\" id=\"chatModalLabel\">Medienwiedergabe Starten</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t<label class=\"form-label\" id=\"entry-modal-label\">Um Audio und Video wiederzugeben, klicken Sie auf &#171;Starten&#187;.</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-dismiss=\"modal\">Starten</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>";

/***/ }),

/***/ "./src/view/slide-view/web-slide.view.css":
/*!************************************************!*\
  !*** ./src/view/slide-view/web-slide.view.css ***!
  \************************************************/
/***/ ((module) => {

"use strict";
module.exports = ".slide-view {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tmin-height: 1px;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n\ttext-align: center;\r\n\tbox-sizing: border-box;\r\n\tdisplay: flex !important;\r\n\talign-items: center !important;\r\n\tjustify-content: center !important;\r\n}\r\n.slide-view > canvas {\r\n\tposition: absolute;\r\n\ttransform: translate(-50%, 0);\r\n\tleft: 50%;\r\n\tborder: 1px solid #94A3B8;\r\n\tborder-radius: 0.2em;\r\n}\r\n.slide-view .slide-canvas {\r\n\tvisibility: hidden;\r\n\tz-index: 0;\r\n}\r\n.slide-view .action-canvas {\r\n\tz-index: 1;\r\n}\r\n.slide-view .volatile-canvas {\r\n\tz-index: 2;\r\n}\r\n\r\n.text-layer {\r\n\tposition: absolute;\r\n\ttransform: translate(0, -50%);\r\n\ttop: 50%;\r\n\toverflow: hidden;\r\n\topacity: 0.2;\r\n\tline-height: 1;\r\n\tmargin: 0 auto;\r\n\tz-index: 3;\r\n}\r\n.text-layer > span {\r\n\tcolor: transparent;\r\n\tposition: absolute;\r\n\twhite-space: pre;\r\n\tcursor: text;\r\n\ttransform-origin: 0% 0%;\r\n}\r\n.text-layer .highlight {\r\n\tmargin: -1px;\r\n\tpadding: 1px;\r\n\tbackground-color: rgba(180, 0, 170, 1);\r\n\tborder-radius: 4px;\r\n}\r\n.text-layer .highlight.begin {\r\n\tborder-radius: 4px 0 0 4px;\r\n}\r\n.text-layer .highlight.end {\r\n\tborder-radius: 0 4px 4px 0;\r\n}\r\n.text-layer .highlight.middle {\r\n\tborder-radius: 0;\r\n}\r\n.text-layer .highlight.selected {\r\n\tbackground-color: rgba(0, 100, 0, 1);\r\n}\r\n.text-layer ::-moz-selection {\r\n\tbackground: rgba(0, 0, 255, 1);\r\n}\r\n.text-layer ::selection {\r\n\tbackground: rgba(0, 0, 255, 1);\r\n}\r\n.text-layer .endOfContent {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 100%;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tz-index: -1;\r\n\tcursor: default;\r\n\t-webkit-user-select: none;\r\n\t   -moz-user-select: none;\r\n\t\t-ms-user-select: none;\r\n\t\t\tuser-select: none;\r\n}\r\n.text-layer .endOfContent.active {\r\n\ttop: 0;\r\n}\r\n\r\n.annotationLayer section {\r\n\tposition: absolute;\r\n\tz-index: 4;\r\n}\r\n.annotationLayer .linkAnnotation > a {\r\n\tposition: absolute;\r\n\tfont-size: 1em;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tcursor: pointer;\r\n}\r\n.annotationLayer .linkAnnotation > a:hover {\r\n\tbackground: #ff0;\r\n}";

/***/ }),

/***/ "./src/view/slide-view/web-slide.view.html":
/*!*************************************************!*\
  !*** ./src/view/slide-view/web-slide.view.html ***!
  \*************************************************/
/***/ ((module) => {

"use strict";
module.exports = "<div class=\"slide-view\">\r\n\t<canvas class=\"slide-canvas\"></canvas>\r\n\t<canvas class=\"action-canvas\" scale=\"full\"></canvas>\r\n\t<canvas class=\"volatile-canvas\" scale=\"full\"></canvas>\r\n\t<div class=\"text-layer\"></div>\r\n</div>";

/***/ }),

/***/ "?4a14":
/*!************************!*\
  !*** canvas (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?fe90":
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?d446":
/*!**********************!*\
  !*** http (ignored) ***!
  \**********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?4c38":
/*!***********************!*\
  !*** https (ignored) ***!
  \***********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?9f5f":
/*!*********************!*\
  !*** url (ignored) ***!
  \*********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?afbb":
/*!**********************!*\
  !*** zlib (ignored) ***!
  \**********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _arrayLikeToArray)
/* harmony export */ });
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _arrayWithHoles)
/* harmony export */ });
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _arrayWithoutHoles)
/* harmony export */ });
/* harmony import */ var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayLikeToArray.js */ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(arr);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _assertThisInitialized)
/* harmony export */ });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _asyncToGenerator)
/* harmony export */ });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _classCallCheck)
/* harmony export */ });
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/construct.js":
/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/construct.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _construct)
/* harmony export */ });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");
/* harmony import */ var _isNativeReflectConstruct_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isNativeReflectConstruct.js */ "./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js");


function _construct(Parent, args, Class) {
  if ((0,_isNativeReflectConstruct_js__WEBPACK_IMPORTED_MODULE_1__["default"])()) {
    _construct = Reflect.construct;
  } else {
    _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(instance, Class.prototype);
      return instance;
    };
  }

  return _construct.apply(null, arguments);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/createClass.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/createClass.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _createClass)
/* harmony export */ });
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _defineProperty)
/* harmony export */ });
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/get.js":
/*!********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/get.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _get)
/* harmony export */ });
/* harmony import */ var _superPropBase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./superPropBase.js */ "./node_modules/@babel/runtime/helpers/esm/superPropBase.js");

function _get() {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = (0,_superPropBase_js__WEBPACK_IMPORTED_MODULE_0__["default"])(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(arguments.length < 3 ? target : receiver);
      }

      return desc.value;
    };
  }

  return _get.apply(this, arguments);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _getPrototypeOf)
/* harmony export */ });
function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/inherits.js":
/*!*************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/inherits.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _inherits)
/* harmony export */ });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  Object.defineProperty(subClass, "prototype", {
    writable: false
  });
  if (superClass) (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(subClass, superClass);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _isNativeFunction)
/* harmony export */ });
function _isNativeFunction(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _isNativeReflectConstruct)
/* harmony export */ });
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/iterableToArray.js":
/*!********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/iterableToArray.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _iterableToArray)
/* harmony export */ });
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _iterableToArrayLimit)
/* harmony export */ });
function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];

  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;

  var _s, _e;

  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":
/*!********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _nonIterableRest)
/* harmony export */ });
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _nonIterableSpread)
/* harmony export */ });
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _possibleConstructorReturn)
/* harmony export */ });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assertThisInitialized.js */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");


function _possibleConstructorReturn(self, call) {
  if (call && ((0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return (0,_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_1__["default"])(self);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _setPrototypeOf)
/* harmony export */ });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _slicedToArray)
/* harmony export */ });
/* harmony import */ var _arrayWithHoles_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithHoles.js */ "./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js");
/* harmony import */ var _iterableToArrayLimit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArrayLimit.js */ "./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js");
/* harmony import */ var _unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./unsupportedIterableToArray.js */ "./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");
/* harmony import */ var _nonIterableRest_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nonIterableRest.js */ "./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");




function _slicedToArray(arr, i) {
  return (0,_arrayWithHoles_js__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || (0,_iterableToArrayLimit_js__WEBPACK_IMPORTED_MODULE_1__["default"])(arr, i) || (0,_unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__["default"])(arr, i) || (0,_nonIterableRest_js__WEBPACK_IMPORTED_MODULE_3__["default"])();
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/superPropBase.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/superPropBase.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _superPropBase)
/* harmony export */ });
/* harmony import */ var _getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = (0,_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(object);
    if (object === null) break;
  }

  return object;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _toConsumableArray)
/* harmony export */ });
/* harmony import */ var _arrayWithoutHoles_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithoutHoles.js */ "./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js");
/* harmony import */ var _iterableToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArray.js */ "./node_modules/@babel/runtime/helpers/esm/iterableToArray.js");
/* harmony import */ var _unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./unsupportedIterableToArray.js */ "./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");
/* harmony import */ var _nonIterableSpread_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nonIterableSpread.js */ "./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js");




function _toConsumableArray(arr) {
  return (0,_arrayWithoutHoles_js__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || (0,_iterableToArray_js__WEBPACK_IMPORTED_MODULE_1__["default"])(arr) || (0,_unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__["default"])(arr) || (0,_nonIterableSpread_js__WEBPACK_IMPORTED_MODULE_3__["default"])();
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/typeof.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _typeof)
/* harmony export */ });
function _typeof(obj) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, _typeof(obj);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _unsupportedIterableToArray)
/* harmony export */ });
/* harmony import */ var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayLikeToArray.js */ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o, minLen);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js":
/*!********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _wrapNativeSuper)
/* harmony export */ });
/* harmony import */ var _getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");
/* harmony import */ var _isNativeFunction_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isNativeFunction.js */ "./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js");
/* harmony import */ var _construct_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./construct.js */ "./node_modules/@babel/runtime/helpers/esm/construct.js");




function _wrapNativeSuper(Class) {
  var _cache = typeof Map === "function" ? new Map() : undefined;

  _wrapNativeSuper = function _wrapNativeSuper(Class) {
    if (Class === null || !(0,_isNativeFunction_js__WEBPACK_IMPORTED_MODULE_2__["default"])(Class)) return Class;

    if (typeof Class !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }

    if (typeof _cache !== "undefined") {
      if (_cache.has(Class)) return _cache.get(Class);

      _cache.set(Class, Wrapper);
    }

    function Wrapper() {
      return (0,_construct_js__WEBPACK_IMPORTED_MODULE_3__["default"])(Class, arguments, (0,_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(this).constructor);
    }

    Wrapper.prototype = Object.create(Class.prototype, {
      constructor: {
        value: Wrapper,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    return (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_1__["default"])(Wrapper, Class);
  };

  return _wrapNativeSuper(Class);
}

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LecturePlayer": () => (/* binding */ LecturePlayer),
/* harmony export */   "PlayerView": () => (/* reexport safe */ _view__WEBPACK_IMPORTED_MODULE_6__.PlayerView),
/* harmony export */   "WebPlayerControls": () => (/* reexport safe */ _component__WEBPACK_IMPORTED_MODULE_5__.WebPlayerControls),
/* harmony export */   "WebSlideView": () => (/* reexport safe */ _view__WEBPACK_IMPORTED_MODULE_6__.WebSlideView)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./style.css */ "./src/style.css");
/* harmony import */ var _extension__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./extension */ "./src/extension/index.ts");
/* harmony import */ var _component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component */ "./src/component/index.ts");
/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./view */ "./src/view/index.ts");
/* harmony import */ var _service_course_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./service/course.service */ "./src/service/course.service.ts");
/* harmony import */ var _service_janus_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./service/janus.service */ "./src/service/janus.service.ts");
/* harmony import */ var _action_parser_progressive_data_view__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./action/parser/progressive-data-view */ "./src/action/parser/progressive-data-view.ts");
/* harmony import */ var _action_parser_stream_action_parser__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./action/parser/stream.action.parser */ "./src/action/parser/stream.action.parser.ts");
/* harmony import */ var _action_stream_playback_action__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./action/stream.playback.action */ "./src/action/stream.playback.action.ts");
/* harmony import */ var _action_stream_page_selected_action__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./action/stream.page.selected.action */ "./src/action/stream.page.selected.action.ts");
/* harmony import */ var _action_page_action__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./action/page.action */ "./src/action/page.action.ts");
/* harmony import */ var _service_playback_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./service/playback.service */ "./src/service/playback.service.ts");
/* harmony import */ var _action_stream_document_selected_action__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./action/stream.document.selected.action */ "./src/action/stream.document.selected.action.ts");
/* harmony import */ var _model_playback_model__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./model/playback-model */ "./src/model/playback-model.ts");
/* harmony import */ var _action_stream_speech_published_action__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./action/stream.speech.published.action */ "./src/action/stream.speech.published.action.ts");
/* harmony import */ var _action_stream_document_created_action__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./action/stream.document.created.action */ "./src/action/stream.document.created.action.ts");
/* harmony import */ var _model_whiteboard_document__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./model/whiteboard.document */ "./src/model/whiteboard.document.ts");
/* harmony import */ var _action_stream_document_closed_action__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./action/stream.document.closed.action */ "./src/action/stream.document.closed.action.ts");








var pdfjs = __webpack_require__(/*! pdfjs-dist */ "./node_modules/pdfjs-dist/build/pdf.js");

var PdfjsWorker = __webpack_require__(/*! worker-loader?esModule=false&filename=[name].js!pdfjs-dist/build/pdf.worker.js */ "./node_modules/worker-loader/dist/cjs.js?esModule=false&filename=[name].js!./node_modules/pdfjs-dist/build/pdf.worker.js");

if (typeof window !== "undefined" && "Worker" in window) {
  pdfjs.GlobalWorkerOptions.workerPort = new PdfjsWorker();
}

















var LecturePlayer = /*#__PURE__*/function () {
  function LecturePlayer() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LecturePlayer);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "playbackModel", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "streamActionBuffer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "courseStateService", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "janusService", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "playbackService", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "container", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "onSettingsConsumer", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "roomId", void 0);

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "startTime", void 0);

    this.playbackModel = new _model_playback_model__WEBPACK_IMPORTED_MODULE_16__.PlaybackModel();
    this.courseStateService = new _service_course_service__WEBPACK_IMPORTED_MODULE_7__.CourseStateService("https://" + window.location.host);
    this.janusService = new _service_janus_service__WEBPACK_IMPORTED_MODULE_8__.JanusService("https://" + window.location.hostname + ":8089/janus", this.playbackModel);
    this.playbackService = new _service_playback_service__WEBPACK_IMPORTED_MODULE_14__.PlaybackService(this.playbackModel);
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LecturePlayer, [{
    key: "start",
    value: function start() {
      var _this = this;

      return new Promise(function (resolve, reject) {
        _this.courseStateService.getCourseState(_this.roomId).then(function (courseState) {
          console.log("Course state", courseState); // Load all initially opened documents.

          var promises = [];

          for (var _i = 0, _Object$values = Object.values(courseState.documentMap); _i < _Object$values.length; _i++) {
            var value = _Object$values[_i];

            var promise = _this.courseStateService.getStateDocument(_this.roomId, value);

            promises.push(promise);
          }

          Promise.all(promises).then(function (documents) {
            // console.log(documents);
            try {
              _this.setDocuments(courseState, documents);
            } catch (e) {
              reject(e);
              return;
            }

            resolve();
          })["catch"](function (error) {
            reject(error);
          });
        })["catch"](function (error) {
          reject(error);
        });
      });
    }
  }, {
    key: "addPeer",
    value: function addPeer(peerId) {
      this.janusService.addPeer(peerId);
    }
  }, {
    key: "startSpeech",
    value: function startSpeech(deviceConstraints) {
      this.janusService.startSpeech(deviceConstraints);
    }
  }, {
    key: "stopSpeech",
    value: function stopSpeech() {
      this.janusService.stopSpeech();
      this.setRaiseHand(false);
    }
  }, {
    key: "setDeviceConstraints",
    value: function setDeviceConstraints(deviceConstraints) {
      this.janusService.setDeviceConstraints(deviceConstraints);
    }
  }, {
    key: "setContainer",
    value: function setContainer(container) {
      this.container = container;
    }
  }, {
    key: "setContainerA",
    value: function setContainerA(element) {
      this.playbackModel.elementAProperty.value = element;
    }
  }, {
    key: "setOnError",
    value: function setOnError(consumer) {
      this.janusService.setOnError(consumer);
    }
  }, {
    key: "setOnConnectedState",
    value: function setOnConnectedState(consumer) {
      this.playbackModel.webrtcConnectedProperty.subscribe(consumer);
    }
  }, {
    key: "setOnConnectedSpeechState",
    value: function setOnConnectedSpeechState(consumer) {
      this.playbackModel.webrtcPublisherConnectedProperty.subscribe(consumer);
    }
  }, {
    key: "setOnSettings",
    value: function setOnSettings(consumer) {
      this.onSettingsConsumer = consumer;
    }
  }, {
    key: "setOnRaiseHand",
    value: function setOnRaiseHand(consumer) {
      this.playbackModel.raisedHandProperty.subscribe(consumer);
    }
  }, {
    key: "setOnShowQuiz",
    value: function setOnShowQuiz(consumer) {
      this.playbackModel.showQuizProperty.subscribe(consumer);
    }
  }, {
    key: "setShowQuiz",
    value: function setShowQuiz(show) {
      this.playbackModel.showQuiz = show;
    }
  }, {
    key: "setQuizActive",
    value: function setQuizActive(active) {
      this.playbackModel.showQuizActive = active;
    }
  }, {
    key: "setRaiseHand",
    value: function setRaiseHand(raise) {
      this.playbackModel.raisedHand = raise;
    }
  }, {
    key: "setStartTime",
    value: function setStartTime(startTime) {
      this.startTime = startTime;
    }
  }, {
    key: "setMuted",
    value: function setMuted(muted) {
      this.playbackModel.setMuted(muted);
    }
  }, {
    key: "setUserId",
    value: function setUserId(userId) {
      this.janusService.setUserId(userId);
    }
  }, {
    key: "setRoomId",
    value: function setRoomId(id) {
      this.roomId = id;
      this.janusService.setRoomId(id);
    }
  }, {
    key: "setDocuments",
    value: function setDocuments(courseState, documents) {
      var playerView = new _view__WEBPACK_IMPORTED_MODULE_6__.PlayerView(this.playbackModel);
      this.setView(playerView);
      this.playbackService.initialize(playerView, courseState, documents, this.startTime);
      this.janusService.setPlayerView(playerView);
      this.janusService.setOnData(this.onData.bind(this));
      this.janusService.start();
    }
  }, {
    key: "onData",
    value: function onData(data) {
      var _this2 = this;

      if (data instanceof Blob) {
        // Firefox...
        data.arrayBuffer().then(function (buffer) {
          _this2.processData(buffer);
        });
      } else {
        this.processData(data);
      }
    }
  }, {
    key: "processData",
    value: function processData(data) {
      var _this3 = this;

      var dataView = new _action_parser_progressive_data_view__WEBPACK_IMPORTED_MODULE_9__.ProgressiveDataView(data);
      var length = dataView.getInt32();
      var type = dataView.getInt8();
      var action = _action_parser_stream_action_parser__WEBPACK_IMPORTED_MODULE_10__.StreamActionParser.parse(dataView, type, length);

      if (action instanceof _action_stream_document_selected_action__WEBPACK_IMPORTED_MODULE_15__.StreamDocumentSelectedAction) {
        if (!this.bufferAction(action, action.documentId)) {
          this.playbackService.selectDocument(action.documentId);
        }
      } else if (action instanceof _action_stream_document_created_action__WEBPACK_IMPORTED_MODULE_18__.StreamDocumentCreatedAction) {
        if (action.documentType === 1) {
          var slideDoc = new _model_whiteboard_document__WEBPACK_IMPORTED_MODULE_19__.WhiteboardDocument();
          slideDoc.setDocumentId(action.documentId);
          this.playbackService.addDocument(slideDoc);
        } else {
          this.streamActionBuffer = {
            bufferedActions: [],
            docId: BigInt(action.documentId)
          };
          var stateDoc = {
            activePage: null,
            documentFile: action.documentFile,
            documentId: action.documentId,
            documentName: action.documentTitle,
            pages: null,
            type: "pdf"
          };
          this.courseStateService.getStateDocument(this.roomId, stateDoc).then(function (doc) {
            _this3.playbackService.addDocument(doc);

            _this3.flushActionBuffer(doc.getDocumentId());
          })["catch"](function (error) {
            console.error(error);
          });
        }
      } else if (action instanceof _action_stream_document_closed_action__WEBPACK_IMPORTED_MODULE_20__.StreamDocumentClosedAction) {
        this.playbackService.removeDocument(action.documentId);
      } else if (action instanceof _action_stream_page_selected_action__WEBPACK_IMPORTED_MODULE_12__.StreamPageSelectedAction) {
        if (!this.bufferAction(action, action.documentId)) {
          var pageAction = new _action_page_action__WEBPACK_IMPORTED_MODULE_13__.PageAction(action.pageNumber);
          pageAction.timestamp = 0;
          this.playbackService.addAction(pageAction);
        }
      } else if (action instanceof _action_stream_playback_action__WEBPACK_IMPORTED_MODULE_11__.StreamPagePlaybackAction) {
        if (!this.bufferAction(action, action.documentId)) {
          this.playbackService.addAction(action.action);
        }
      } else if (action instanceof _action_stream_speech_published_action__WEBPACK_IMPORTED_MODULE_17__.StreamSpeechPublishedAction) {
        this.janusService.addPeer(action.publisherId);
      }
    }
  }, {
    key: "setView",
    value: function setView(view) {
      if (!(view instanceof HTMLElement)) {
        throw new Error("View is expected to be of type HTMLElement");
      }

      if (this.container.firstElementChild) {
        this.container.removeChild(this.container.firstElementChild);
      }

      this.container.appendChild(view);

      if (this.onSettingsConsumer) {
        view.setOnSettings(this.onSettingsConsumer);
      }
    }
  }, {
    key: "bufferAction",
    value: function bufferAction(action, docId) {
      if (this.streamActionBuffer && this.streamActionBuffer.docId === BigInt(docId)) {
        this.streamActionBuffer.bufferedActions.push(action);
        return true;
      }

      return false;
    }
  }, {
    key: "flushActionBuffer",
    value: function flushActionBuffer(docId) {
      var _this4 = this;

      if (this.streamActionBuffer && this.streamActionBuffer.docId === BigInt(docId)) {
        this.streamActionBuffer.bufferedActions.forEach(function (action) {
          if (action instanceof _action_stream_document_selected_action__WEBPACK_IMPORTED_MODULE_15__.StreamDocumentSelectedAction) {
            _this4.playbackService.selectDocument(action.documentId);
          } else if (action instanceof _action_stream_page_selected_action__WEBPACK_IMPORTED_MODULE_12__.StreamPageSelectedAction) {
            var pageAction = new _action_page_action__WEBPACK_IMPORTED_MODULE_13__.PageAction(action.pageNumber);
            pageAction.timestamp = 0;

            _this4.playbackService.addAction(pageAction);
          } else if (action instanceof _action_stream_playback_action__WEBPACK_IMPORTED_MODULE_11__.StreamPagePlaybackAction) {
            _this4.playbackService.addAction(action.action);
          }
        });
      }

      this.streamActionBuffer = null;
    }
  }]);

  return LecturePlayer;
}();


})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTzs7Ozs7Ozs7O0FDVkEsY0FBYyxzR0FBaUM7O0FBRS9DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRyxFQUFFLHlCQUF5QixTQUFTLHlCQUF5QjtBQUNoRSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsYUFBYTtBQUNiLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlEQUF5RDtBQUN6RDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0ZBQW9GO0FBQ3BGO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsc0NBQXNDLHlCQUF5QixTQUFTLHlCQUF5Qjs7Ozs7Ozs7OztBQ2pXakc7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRyxFQUFFLHlCQUF5QixTQUFTLHlCQUF5QjtBQUNoRTs7QUFFQSwwQkFBMEIseUJBQXlCLFNBQVMseUJBQXlCOzs7Ozs7Ozs7O0FDVnJGLGlCQUFpQixtQkFBTyxDQUFDLGtHQUErQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQ3hEOztJQUVlQzs7Ozs7RUFLZCxzQkFBWUMsUUFBWixFQUFzQztJQUFBOztJQUFBOztJQUNyQzs7SUFEcUM7O0lBR3JDLE1BQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0lBSHFDO0VBSXJDOzs7RUFUa0NGOzs7Ozs7Ozs7Ozs7Ozs7OztJQ0gvQkc7O1dBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0VBQUFBLFdBQUFBO0dBQUFBLGVBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0VMO0FBRUE7QUFDQTs7SUFJTUk7RUFpQkwsOEJBQVlDLGdCQUFaLEVBQWdEO0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQy9DLEtBQUtBLGdCQUFMLEdBQXdCQSxnQkFBeEI7SUFDQSxLQUFLQyxXQUFMLEdBQW1CLElBQUlMLDJEQUFKLENBQWdCSSxnQkFBaEIsQ0FBbkI7RUFDQTs7OztXQUVELDhCQUFxQkUsUUFBckIsRUFBdUQ7TUFDdEQsS0FBS0MsaUJBQUwsR0FBeUJELFFBQXpCO0lBQ0E7OztXQUVELHFCQUFZRSxRQUFaLEVBQTJDO01BQzFDLEtBQUtILFdBQUwsQ0FBaUJHLFFBQWpCLEdBQTRCQSxRQUE1QjtJQUNBOzs7V0FFRCxpQkFBUUMsSUFBUixFQUE2QjtNQUM1QixLQUFLTCxnQkFBTCxDQUFzQk0sT0FBdEIsQ0FBOEJELElBQTlCO0lBQ0E7OztXQUVELHFCQUFZRSxRQUFaLEVBQXFDO01BQ3BDLEtBQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0lBQ0E7OztXQUVELHVCQUFjQyxVQUFkLEVBQWtDO01BQ2pDLElBQU1DLElBQUksR0FBRyxLQUFLRixRQUFMLENBQWNHLE9BQWQsQ0FBc0JGLFVBQXRCLENBQWI7TUFFQSxLQUFLQSxVQUFMLEdBQWtCQSxVQUFsQjtNQUNBLEtBQUtQLFdBQUwsQ0FBaUJRLElBQWpCLEdBQXdCQSxJQUF4QjtNQUVBLEtBQUtULGdCQUFMLENBQXNCVyxPQUF0QixDQUE4QkYsSUFBOUI7O01BRUEsSUFBSSxLQUFLTixpQkFBVCxFQUE0QjtRQUMzQixLQUFLQSxpQkFBTCxDQUF1QkssVUFBdkI7TUFDQTtJQUNEOzs7V0FFRCxpQkFBUUksSUFBUixFQUEwQjtNQUN6QixJQUFJLENBQUNBLElBQUwsRUFBVztRQUNWLE1BQU0sSUFBSUMsS0FBSixDQUFVLHVCQUFWLENBQU47TUFDQTs7TUFDRCxJQUFJLENBQUMsS0FBS0QsSUFBTixJQUFjLEtBQUtBLElBQUwsS0FBY0EsSUFBaEMsRUFBc0M7UUFDckM7TUFDQTs7TUFFRCxLQUFLRSxlQUFMLENBQXFCLEtBQUtGLElBQTFCO01BRUEsS0FBS0EsSUFBTCxHQUFZQSxJQUFaO0lBQ0E7OztXQUVELDhCQUFxQkEsSUFBckIsRUFBNkM7TUFDNUMsS0FBS0csaUJBQUwsQ0FBdUJILElBQXZCO0lBQ0E7OztXQUVELG1CQUFVSSxLQUFWLEVBQWlDO01BQ2hDLEtBQUtKLElBQUwsQ0FBVUssS0FBVixDQUFnQkQsS0FBSyxDQUFDRSxLQUFOLEVBQWhCLEVBQStCLEtBQUtqQixXQUFwQztJQUNBOzs7V0FFRCxxQkFBWWUsS0FBWixFQUFtQztNQUNsQyxLQUFLSixJQUFMLENBQVVPLE9BQVYsQ0FBa0JILEtBQUssQ0FBQ0UsS0FBTixFQUFsQjtJQUNBOzs7V0FFRCxpQkFBUUYsS0FBUixFQUErQjtNQUM5QixLQUFLSixJQUFMLENBQVVRLEdBQVYsQ0FBY0osS0FBSyxDQUFDRSxLQUFOLEVBQWQ7SUFDQTs7O1dBRUQsMkJBQTBCTixJQUExQixFQUFrRDtNQUNqRCxJQUFNSSxLQUFLLEdBQUduQixvRUFBQSxFQUFkO01BRUEsS0FBS3lCLE9BQUwsQ0FBYVYsSUFBYjtNQUVBLEtBQUtXLFNBQUwsQ0FBZVAsS0FBZjtNQUNBLEtBQUtRLFdBQUwsQ0FBaUJSLEtBQWpCO01BQ0EsS0FBS1MsT0FBTCxDQUFhVCxLQUFiO01BRUEsS0FBS0YsZUFBTCxDQUFxQixLQUFLWSxZQUExQjtJQUNBOzs7V0FFRCx5QkFBd0JkLElBQXhCLEVBQTBDO01BQ3pDLElBQUksQ0FBQ0EsSUFBTCxFQUFXO1FBQ1Y7TUFDQTs7TUFFRCxJQUFJQSxJQUFJLFlBQVlkLHlEQUFwQixFQUFnQztRQUMvQjtRQUNBO01BQ0E7O01BRUQsS0FBSzRCLFlBQUwsR0FBb0JkLElBQXBCO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUM5R2FlOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRGY7QUFDQTs7SUFFTUc7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUXBDLFFBQVIsRUFBd0M7TUFDdkMsSUFBTWtCLElBQUksR0FBRyxJQUFJaUIsdURBQUosRUFBYjtNQUNBakIsSUFBSSxDQUFDbUIsV0FBTCxHQUFtQixLQUFLQSxXQUF4QjtNQUNBbkIsSUFBSSxDQUFDb0IsS0FBTCxHQUFhLEtBQUtBLEtBQWxCO01BRUF0QyxRQUFRLENBQUN1QyxXQUFULENBQXFCLEtBQUs3QixRQUExQjtNQUNBVixRQUFRLENBQUM0QixPQUFULENBQWlCVixJQUFqQjtJQUNBOzs7O0VBVHdCZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKMUI7O0lBR2VBOzs7OztFQU9kLHFCQUFZRyxXQUFaLEVBQWlDQyxLQUFqQyxFQUFnRDtJQUFBOztJQUFBOztJQUMvQzs7SUFEK0M7O0lBQUE7O0lBRy9DLE1BQUtELFdBQUwsR0FBbUJBLFdBQW5CO0lBQ0EsTUFBS0MsS0FBTCxHQUFhQSxLQUFiO0lBSitDO0VBSy9DOzs7RUFaaUNMOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSG5DO0FBRUE7O0lBRU1ROzs7Ozs7Ozs7Ozs7O1dBRUwsaUJBQVF6QyxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUMwQyxvQkFBVCxDQUE4QixJQUFJRixvRUFBSixFQUE5QjtJQUNBOzs7O0VBSjhCUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0poQztBQUVBOztJQUVNVzs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFRNUMsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDdUMsV0FBVCxDQUFxQixLQUFLN0IsUUFBMUI7TUFDQVYsUUFBUSxDQUFDNEIsT0FBVCxDQUFpQixJQUFJZSx1REFBSixFQUFqQjtJQUNBOzs7O0VBTHdCVjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0gxQjtBQUNBOztJQUVNYTs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFROUMsUUFBUixFQUF3QztNQUN2QyxJQUFNa0IsSUFBSSxHQUFHLElBQUkyQiwyREFBSixFQUFiO01BQ0EzQixJQUFJLENBQUNtQixXQUFMLEdBQW1CLEtBQUtBLFdBQXhCO01BQ0FuQixJQUFJLENBQUNvQixLQUFMLEdBQWEsS0FBS0EsS0FBbEI7TUFFQXRDLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzRCLE9BQVQsQ0FBaUJWLElBQWpCO0lBQ0E7Ozs7RUFUMEJnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKNUI7QUFHQTs7SUFFTWM7Ozs7O0VBS0wsMEJBQVlDLElBQVosRUFBNkI7SUFBQTs7SUFBQTs7SUFDNUI7O0lBRDRCOztJQUc1QixNQUFLQSxJQUFMLEdBQVlBLElBQVo7SUFINEI7RUFJNUI7Ozs7V0FFRCxpQkFBUWpELFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzBDLG9CQUFULENBQThCLElBQUlLLGtFQUFKLENBQW1CLEtBQUtFLElBQXhCLENBQTlCO0lBQ0E7Ozs7RUFkNkJoQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ovQjtBQUNBOztJQUVNa0I7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUW5ELFFBQVIsRUFBd0M7TUFDdkMsSUFBTWtCLElBQUksR0FBRyxJQUFJZ0MsbUVBQUosRUFBYjtNQUNBaEMsSUFBSSxDQUFDbUIsV0FBTCxHQUFtQixLQUFLQSxXQUF4QjtNQUNBbkIsSUFBSSxDQUFDb0IsS0FBTCxHQUFhLEtBQUtBLEtBQWxCO01BRUF0QyxRQUFRLENBQUM0QixPQUFULENBQWlCVixJQUFqQjtJQUNBOzs7O0VBUjhCZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0poQzs7SUFHTWtCOzs7Ozs7Ozs7Ozs7O1dBRUwsaUJBQVFwRCxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUN1QyxXQUFULENBQXFCLEtBQUs3QixRQUExQjtJQUNBOzs7O0VBSnNCdUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSHhCO0FBSUE7O0lBRU1xQjs7Ozs7RUFXTCx5QkFBWUMsTUFBWixFQUE0QkMsSUFBNUIsRUFBd0NDLFNBQXhDLEVBQTBEQyxjQUExRCxFQUFnRztJQUFBOztJQUFBOztJQUMvRjs7SUFEK0Y7O0lBQUE7O0lBQUE7O0lBQUE7O0lBRy9GLE1BQUtILE1BQUwsR0FBY0EsTUFBZDtJQUNBLE1BQUtDLElBQUwsR0FBWUEsSUFBWjtJQUNBLE1BQUtDLFNBQUwsR0FBaUJBLFNBQWpCO0lBQ0EsTUFBS0MsY0FBTCxHQUFzQkEsY0FBdEI7SUFOK0Y7RUFPL0Y7Ozs7V0FFRCxpQkFBUTFELFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQzBDLG9CQUFULENBQThCLElBQUlXLGdFQUFKLENBQWtCLEtBQUtFLE1BQXZCLEVBQStCLEtBQUtDLElBQXBDLEVBQTBDLEtBQUtDLFNBQS9DLEVBQTBELEtBQUtDLGNBQS9ELENBQTlCO0lBQ0E7Ozs7RUF0QjRCekI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTjlCO0FBRUE7O0lBRU0yQjs7Ozs7RUFLTCxxQkFBWUwsTUFBWixFQUE0QjtJQUFBOztJQUFBOztJQUMzQjs7SUFEMkI7O0lBRzNCLE1BQUtBLE1BQUwsR0FBY0EsTUFBZDtJQUgyQjtFQUkzQjs7OztXQUVELGlCQUFRdkQsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDdUMsV0FBVCxDQUFxQixLQUFLN0IsUUFBMUI7TUFDQVYsUUFBUSxDQUFDNEIsT0FBVCxDQUFpQixJQUFJK0IsdURBQUosQ0FBYyxLQUFLSixNQUFuQixDQUFqQjtJQUNBOzs7O0VBZHdCdEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIMUI7QUFDQTs7SUFFTTZCOzs7Ozs7Ozs7Ozs7O1dBRUwsaUJBQVE5RCxRQUFSLEVBQXdDO01BQ3ZDLElBQU1rQixJQUFJLEdBQUcsSUFBSTJDLHFEQUFKLEVBQWI7TUFDQTNDLElBQUksQ0FBQ21CLFdBQUwsR0FBbUIsS0FBS0EsV0FBeEI7TUFDQW5CLElBQUksQ0FBQ29CLEtBQUwsR0FBYSxLQUFLQSxLQUFsQjtNQUVBdEMsUUFBUSxDQUFDdUMsV0FBVCxDQUFxQixLQUFLN0IsUUFBMUI7TUFDQVYsUUFBUSxDQUFDNEIsT0FBVCxDQUFpQlYsSUFBakI7SUFDQTs7OztFQVR1QmdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnpCOztJQUdNNkI7Ozs7O0VBS0wsb0JBQVlqRCxVQUFaLEVBQWdDO0lBQUE7O0lBQUE7O0lBQy9COztJQUQrQjs7SUFHL0IsTUFBS0EsVUFBTCxHQUFrQkEsVUFBbEI7SUFIK0I7RUFJL0I7Ozs7V0FFRCxpQkFBUWQsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDZ0UsYUFBVCxDQUF1QixLQUFLbEQsVUFBNUI7SUFDQTs7OztFQWJ1Qm1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSHpCO0FBRUE7O0lBRU1pQzs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFRbEUsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDdUMsV0FBVCxDQUFxQixLQUFLN0IsUUFBMUI7TUFDQVYsUUFBUSxDQUFDNEIsT0FBVCxDQUFpQixJQUFJcUMsbURBQUosRUFBakI7SUFDQTs7OztFQUxzQmhDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNGeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0lBRU0wRDs7Ozs7OztXQUtMLGVBQWFDLFFBQWIsRUFBNENDLElBQTVDLEVBQThEQyxNQUE5RCxFQUFzRjtNQUNyRixJQUFJQyxNQUFjLEdBQUcsSUFBckI7TUFDQSxJQUFNckYsUUFBdUIsR0FBRyxLQUFLc0YsaUJBQUwsQ0FBdUJKLFFBQXZCLENBQWhDO01BQ0FFLE1BQU0sSUFBSSxFQUFWLENBSHFGLENBR3ZFOztNQUVkLFFBQVFELElBQVI7UUFDQyxLQUFLNUYsaUVBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLRyxZQUFMLENBQWtCTixRQUFsQixFQUE0Qm5ELG9FQUE1QixDQUFUO1VBQ0E7O1FBQ0QsS0FBS3hDLHlEQUFMO1VBQ0M4RixNQUFNLEdBQUcsS0FBS0csWUFBTCxDQUFrQk4sUUFBbEIsRUFBNEJqQixxREFBNUIsQ0FBVDtVQUNBOztRQUNELEtBQUsxRSx5REFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtHLFlBQUwsQ0FBa0JOLFFBQWxCLEVBQTRCaEIscURBQTVCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0Usd0RBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLRyxZQUFMLENBQWtCTixRQUFsQixFQUE0QnhDLG1EQUE1QixDQUFUO1VBQ0E7O1FBQ0QsS0FBS25ELHdEQUFMO1VBQ0M4RixNQUFNLEdBQUcsS0FBS1EsZUFBTCxDQUFxQlgsUUFBckIsRUFBK0J6QixrREFBL0IsQ0FBVDtVQUNBOztRQUNELEtBQUtsRSxnRUFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtRLGVBQUwsQ0FBcUJYLFFBQXJCLEVBQStCekMsa0VBQS9CLENBQVQ7VUFDQTs7UUFDRCxLQUFLbEQsNERBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLUSxlQUFMLENBQXFCWCxRQUFyQixFQUErQnRCLDBEQUEvQixDQUFUO1VBQ0E7O1FBQ0QsS0FBS3JFLDBEQUFMO1VBQ0M4RixNQUFNLEdBQUcsS0FBS1EsZUFBTCxDQUFxQlgsUUFBckIsRUFBK0J4RCx1REFBL0IsQ0FBVDtVQUNBOztRQUNELEtBQUtuQyx5REFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtRLGVBQUwsQ0FBcUJYLFFBQXJCLEVBQStCOUIscURBQS9CLENBQVQ7VUFDQTs7UUFDRCxLQUFLN0QsOERBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLUSxlQUFMLENBQXFCWCxRQUFyQixFQUErQnJCLCtEQUEvQixDQUFUO1VBQ0E7O1FBQ0QsS0FBS3RFLDREQUFMO1VBQ0M4RixNQUFNLEdBQUcsS0FBS1EsZUFBTCxDQUFxQlgsUUFBckIsRUFBK0I5QywyREFBL0IsQ0FBVDtVQUNBOztRQUNELEtBQUs3QywwREFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtHLFlBQUwsQ0FBa0JOLFFBQWxCLEVBQTRCaEQsdURBQTVCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0MsMkRBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLRyxZQUFMLENBQWtCTixRQUFsQixFQUE0QmYseURBQTVCLENBQVQ7VUFDQTs7UUFDRCxLQUFLNUUsaUVBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLRyxZQUFMLENBQWtCTixRQUFsQixFQUE0QmQsb0VBQTVCLENBQVQ7VUFDQTs7UUFDRCxLQUFLN0UsMERBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLbUIsVUFBTCxDQUFnQnRCLFFBQWhCLEVBQTBCaEMsdURBQTFCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0Qsc0VBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLcUIsZUFBTCxDQUFxQnhCLFFBQXJCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0YseURBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLbUIsVUFBTCxDQUFnQnRCLFFBQWhCLEVBQTBCVCxxREFBMUIsQ0FBVDtVQUNBOztRQUNELEtBQUtsRixnRUFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUt3QixnQkFBTCxDQUFzQjNCLFFBQXRCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0YscUVBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLMEIsY0FBTCxDQUFvQjdCLFFBQXBCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0YseUVBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLNEIsY0FBTCxDQUFvQi9CLFFBQXBCLENBQVQ7VUFDQTs7UUFDRCxLQUFLM0YsZ0VBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLOEIsZ0JBQUwsQ0FBc0JqQyxRQUF0QixDQUFUO1VBQ0E7O1FBQ0QsS0FBSzNGLHVFQUFMO1VBQ0M4RixNQUFNLEdBQUcsS0FBS2dDLG1CQUFMLENBQXlCbkMsUUFBekIsQ0FBVDtVQUNBOztRQUNELEtBQUszRiwrREFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtrQyxjQUFMLENBQW9CckMsUUFBcEIsRUFBOEJwQixnRUFBOUIsQ0FBVDtVQUNBOztRQUNELEtBQUt2RSxpRUFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtrQyxjQUFMLENBQW9CckMsUUFBcEIsRUFBOEJuQixvRUFBOUIsQ0FBVDtVQUNBOztRQUNELEtBQUt4RSw2REFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtrQyxjQUFMLENBQW9CckMsUUFBcEIsRUFBOEJsQiw0REFBOUIsQ0FBVDtVQUNBOztRQUNELEtBQUt6RSw0REFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtHLFlBQUwsQ0FBa0JOLFFBQWxCLEVBQTRCMUIsbURBQTVCLENBQVQ7VUFDQTs7UUFDRCxLQUFLakUsZ0VBQUw7VUFDQzhGLE1BQU0sR0FBRyxLQUFLdUMsZ0JBQUwsQ0FBc0IxQyxRQUF0QixDQUFUO1VBQ0E7O1FBQ0QsS0FBSzNGLHlEQUFMO1VBQ0MsSUFBSTZGLE1BQU0sR0FBRyxDQUFiLEVBQWdCO1lBQ2ZDLE1BQU0sR0FBRyxLQUFLRyxZQUFMLENBQWtCTixRQUFsQixFQUE0QloscURBQTVCLENBQVQ7VUFDQSxDQUZELE1BR0s7WUFDSmUsTUFBTSxHQUFHLEtBQUtRLGVBQUwsQ0FBcUJYLFFBQXJCLEVBQStCWixxREFBL0IsQ0FBVDtVQUNBOztVQUNEOztRQUNELEtBQUsvRSw2REFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUtHLFlBQUwsQ0FBa0JOLFFBQWxCLEVBQTRCWCw0REFBNUIsQ0FBVDtVQUNBOztRQUNELEtBQUtoRiwrREFBTDtVQUNDOEYsTUFBTSxHQUFHLEtBQUsyQyxZQUFMLENBQWtCOUMsUUFBbEIsQ0FBVDtVQUNBO01BL0ZGOztNQWtHQSxJQUFJRyxNQUFKLEVBQVk7UUFDWEEsTUFBTSxDQUFDckYsUUFBUCxHQUFrQkEsUUFBbEI7TUFDQTs7TUFFRCxPQUFPcUYsTUFBUDtJQUNBOzs7V0FFRCwyQkFBaUNILFFBQWpDLEVBQStFO01BQzlFLElBQU0rQyxNQUFNLEdBQUcvQyxRQUFRLENBQUNnRCxRQUFULEVBQWY7TUFDQSxJQUFJbEksUUFBdUIsR0FBRyxJQUE5Qjs7TUFFQSxJQUFJLENBQUNpSSxNQUFNLEdBQUcsS0FBS0UsY0FBZixLQUFrQyxLQUFLQSxjQUEzQyxFQUEyRDtRQUMxRG5JLFFBQVEsR0FBRyxLQUFLb0ksYUFBTCxDQUFtQmxELFFBQW5CLENBQVg7TUFDQTs7TUFFRCxPQUFPbEYsUUFBUDtJQUNBOzs7V0FFRCx1QkFBNkJrRixRQUE3QixFQUEyRTtNQUMxRSxJQUFNbUQsT0FBTyxHQUFHbkQsUUFBUSxDQUFDZ0QsUUFBVCxFQUFoQjtNQUNBLElBQU1JLFNBQVMsR0FBR3BELFFBQVEsQ0FBQ2dELFFBQVQsRUFBbEI7TUFDQSxJQUFNSyxVQUFVLEdBQUdyRCxRQUFRLENBQUNzRCxPQUFULEVBQW5CO01BQ0EsSUFBSUMsT0FBSjs7TUFFQSxRQUFRRixVQUFSO1FBQ0MsS0FBSyxDQUFMO1VBQ0NFLE9BQU8sR0FBRyxTQUFWO1VBQ0E7O1FBQ0QsS0FBSyxDQUFMO1VBQ0NBLE9BQU8sR0FBRyxPQUFWO1VBQ0E7O1FBQ0QsS0FBSyxDQUFMO1VBQ0NBLE9BQU8sR0FBRyxVQUFWO1VBQ0E7O1FBQ0Q7VUFDQyxNQUFNLElBQUloSSxLQUFKLENBQVUsd0JBQVYsQ0FBTjtNQVhGO01BY0E7OztNQUNBLElBQU1pSSxVQUFVLEdBQUcsS0FBSyxDQUF4QjtNQUNBOztNQUNBLElBQU1DLFNBQVMsR0FBRyxLQUFLLENBQXZCO01BQ0E7O01BQ0EsSUFBTUMsUUFBUSxHQUFHLEtBQUssQ0FBdEI7TUFFQSxPQUFPLElBQUlDLGFBQUosQ0FBa0JKLE9BQWxCLEVBQTJCO1FBQ2pDO1FBQ0FLLFFBQVEsRUFBRSxDQUFDUixTQUFTLEdBQUdJLFVBQWIsS0FBNEIsQ0FGTDtRQUdqQ0ssT0FBTyxFQUFFLENBQUNULFNBQVMsR0FBR0ssU0FBYixLQUEyQixDQUhIO1FBSWpDSyxNQUFNLEVBQUUsQ0FBQ1YsU0FBUyxHQUFHTSxRQUFiLEtBQTBCO01BSkQsQ0FBM0IsQ0FBUDtJQU1BOzs7V0FFRCxzQkFBK0IxRCxRQUEvQixFQUE4REMsSUFBOUQsRUFBcUY7TUFDcEYsT0FBTyxJQUFJQSxJQUFKLEVBQVA7SUFDQTs7O1dBRUQseUJBQWtDRCxRQUFsQyxFQUFpRUMsSUFBakUsRUFBeUg7TUFDeEgsSUFBTXhELFdBQVcsR0FBR3VELFFBQVEsQ0FBQ2dELFFBQVQsRUFBcEI7TUFFQSxJQUFNZSxJQUFJLEdBQUcvRCxRQUFRLENBQUNnRCxRQUFULEVBQWI7TUFDQSxJQUFNZ0IsT0FBTyxHQUFHaEUsUUFBUSxDQUFDc0QsT0FBVCxFQUFoQjtNQUNBLElBQU1XLFVBQVUsR0FBR2pFLFFBQVEsQ0FBQ2tFLFVBQVQsRUFBbkI7TUFFQSxJQUFNQyxLQUFLLEdBQUcxRiw2REFBQSxDQUFvQnNGLElBQXBCLENBQWQ7TUFDQSxJQUFNckgsS0FBSyxHQUFHLElBQUk4QiwrQ0FBSixDQUFVMkYsS0FBVixFQUFpQkYsVUFBakIsQ0FBZDtNQUNBLElBQU05RCxNQUFNLEdBQUcsSUFBSUYsSUFBSixDQUFTeEQsV0FBVCxFQUFzQkMsS0FBdEIsQ0FBZjtNQUVBLE9BQU95RCxNQUFQO0lBQ0E7OztXQUVELHNCQUErQkgsUUFBL0IsRUFBNEU7TUFDM0UsSUFBTXZELFdBQVcsR0FBR3VELFFBQVEsQ0FBQ2dELFFBQVQsRUFBcEI7TUFFQSxPQUFPLElBQUkxRCx5REFBSixDQUFpQjdDLFdBQWpCLENBQVA7SUFDQTs7O1dBRUQsd0JBQWlDdUQsUUFBakMsRUFBZ0VDLElBQWhFLEVBQXNHO01BQ3JHLElBQU12RSxLQUFLLEdBQUcsSUFBSW5CLHlEQUFKLENBQWF5RixRQUFRLENBQUNxRSxVQUFULEVBQWIsRUFBb0NyRSxRQUFRLENBQUNxRSxVQUFULEVBQXBDLEVBQTJEckUsUUFBUSxDQUFDcUUsVUFBVCxFQUEzRCxDQUFkO01BQ0EsSUFBTWxFLE1BQU0sR0FBRyxJQUFJRixJQUFKLENBQVN2RSxLQUFULENBQWY7TUFFQSxPQUFPeUUsTUFBUDtJQUNBOzs7V0FFRCwwQkFBZ0NILFFBQWhDLEVBQWlGO01BQ2hGLElBQU1zRSxDQUFDLEdBQUd0RSxRQUFRLENBQUNrRSxVQUFULEVBQVY7TUFDQSxJQUFNSyxDQUFDLEdBQUd2RSxRQUFRLENBQUNrRSxVQUFULEVBQVY7TUFDQSxJQUFNTSxDQUFDLEdBQUd4RSxRQUFRLENBQUNrRSxVQUFULEVBQVY7TUFDQSxJQUFNTyxDQUFDLEdBQUd6RSxRQUFRLENBQUNrRSxVQUFULEVBQVY7TUFFQSxPQUFPLElBQUk5RyxrRUFBSixDQUFxQixJQUFJK0IsMkRBQUosQ0FBY21GLENBQWQsRUFBaUJDLENBQWpCLEVBQW9CQyxDQUFwQixFQUF1QkMsQ0FBdkIsQ0FBckIsQ0FBUDtJQUNBOzs7V0FFRCxvQkFBNkJ6RSxRQUE3QixFQUE0REMsSUFBNUQsRUFBaUc7TUFDaEcsSUFBTXRDLE1BQU0sR0FBR3FDLFFBQVEsQ0FBQ2dELFFBQVQsRUFBZjtNQUNBLElBQU03QyxNQUFNLEdBQUcsSUFBSUYsSUFBSixDQUFTdEMsTUFBVCxDQUFmO01BRUEsT0FBT3dDLE1BQVA7SUFDQTs7O1dBRUQsMEJBQWdDSCxRQUFoQyxFQUFpRjtNQUNoRixJQUFNckMsTUFBTSxHQUFHcUMsUUFBUSxDQUFDZ0QsUUFBVCxFQUFmO01BQ0EsSUFBTTBCLFVBQVUsR0FBRzFFLFFBQVEsQ0FBQ2dELFFBQVQsRUFBbkI7TUFDQSxJQUFNMkIsSUFBSSxHQUFHM0UsUUFBUSxDQUFDNEUsU0FBVCxDQUFtQkYsVUFBbkIsQ0FBYjtNQUVBLE9BQU8sSUFBSWpGLGtFQUFKLENBQXFCOUIsTUFBckIsRUFBNkJnSCxJQUE3QixDQUFQO0lBQ0E7OztXQUVELHdCQUE4QjNFLFFBQTlCLEVBQTZFO01BQzVFLElBQU1yQyxNQUFNLEdBQUdxQyxRQUFRLENBQUNnRCxRQUFULEVBQWY7TUFDQSxJQUFNdEgsS0FBSyxHQUFHLElBQUlpRSxtREFBSixDQUFVSyxRQUFRLENBQUNrRSxVQUFULEVBQVYsRUFBaUNsRSxRQUFRLENBQUNrRSxVQUFULEVBQWpDLENBQWQ7TUFFQSxPQUFPLElBQUl4RSw4REFBSixDQUFtQi9CLE1BQW5CLEVBQTJCakMsS0FBM0IsQ0FBUDtJQUNBOzs7V0FFRCwwQkFBZ0NzRSxRQUFoQyxFQUFpRjtNQUNoRixJQUFNckMsTUFBTSxHQUFHcUMsUUFBUSxDQUFDZ0QsUUFBVCxFQUFmO01BRUEsT0FBTyxJQUFJcEQsa0VBQUosQ0FBcUJqQyxNQUFyQixDQUFQO0lBQ0E7OztXQUVELDZCQUFtQ3FDLFFBQW5DLEVBQXVGO01BQ3RGLElBQU1yQyxNQUFNLEdBQUdxQyxRQUFRLENBQUNnRCxRQUFULEVBQWY7TUFDQSxJQUFNZSxJQUFJLEdBQUcvRCxRQUFRLENBQUNnRCxRQUFULEVBQWI7TUFDQSxJQUFNNkIsS0FBSyxHQUFHN0UsUUFBUSxDQUFDZ0QsUUFBVCxFQUFkO01BRUEsSUFBTW1CLEtBQUssR0FBRzFGLDZEQUFBLENBQW9Cc0YsSUFBcEIsQ0FBZDtNQUNBLElBQU1lLFVBQVUsR0FBRyxJQUFJQyxLQUFKLEVBQW5COztNQUVBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0gsS0FBcEIsRUFBMkJHLENBQUMsRUFBNUIsRUFBZ0M7UUFDL0IsSUFBTVYsQ0FBQyxHQUFHdEUsUUFBUSxDQUFDa0UsVUFBVCxFQUFWO1FBQ0EsSUFBTUssQ0FBQyxHQUFHdkUsUUFBUSxDQUFDa0UsVUFBVCxFQUFWO1FBQ0EsSUFBTU0sQ0FBQyxHQUFHeEUsUUFBUSxDQUFDa0UsVUFBVCxFQUFWO1FBQ0EsSUFBTU8sQ0FBQyxHQUFHekUsUUFBUSxDQUFDa0UsVUFBVCxFQUFWO1FBRUFZLFVBQVUsQ0FBQ0csSUFBWCxDQUFnQixJQUFJOUYsMkRBQUosQ0FBY21GLENBQWQsRUFBaUJDLENBQWpCLEVBQW9CQyxDQUFwQixFQUF1QkMsQ0FBdkIsQ0FBaEI7TUFDQTs7TUFFRCxPQUFPLElBQUkzRSx3RUFBSixDQUF3Qm5DLE1BQXhCLEVBQWdDd0csS0FBaEMsRUFBdUNXLFVBQXZDLENBQVA7SUFDQTs7O1dBRUQsd0JBQThCOUUsUUFBOUIsRUFBNkU7TUFDNUUsSUFBTXJDLE1BQU0sR0FBR3FDLFFBQVEsQ0FBQ2dELFFBQVQsRUFBZjtNQUNBLElBQU1lLElBQUksR0FBRy9ELFFBQVEsQ0FBQ2dELFFBQVQsRUFBYjtNQUNBLElBQU1rQyxnQkFBZ0IsR0FBR2xGLFFBQVEsQ0FBQ2dELFFBQVQsRUFBekI7TUFDQSxJQUFNbUMsVUFBVSxHQUFHbkYsUUFBUSxDQUFDNEUsU0FBVCxDQUFtQk0sZ0JBQW5CLENBQW5CO01BQ0EsSUFBTUUsUUFBUSxHQUFHcEYsUUFBUSxDQUFDa0UsVUFBVCxFQUFqQjtNQUNBLElBQU1tQixPQUFPLEdBQUdyRixRQUFRLENBQUNzRCxPQUFULEVBQWhCO01BQ0EsSUFBTWdDLE1BQU0sR0FBR3RGLFFBQVEsQ0FBQ3NELE9BQVQsRUFBZjtNQUNBLElBQU1pQyxhQUFhLEdBQUd2RixRQUFRLENBQUNzRCxPQUFULEtBQXFCLENBQTNDO01BQ0EsSUFBTWtDLFNBQVMsR0FBR3hGLFFBQVEsQ0FBQ3NELE9BQVQsS0FBcUIsQ0FBdkM7TUFFQSxJQUFJbUMsVUFBVSxHQUFHLENBQUNILE1BQU0sR0FBRyxDQUFWLElBQWUsR0FBaEM7TUFDQSxJQUFJSSxTQUFKOztNQUVBLFFBQVFMLE9BQVI7UUFDQyxLQUFLLENBQUw7VUFDQ0ssU0FBUyxHQUFHLFFBQVo7VUFDQTs7UUFDRCxLQUFLLENBQUw7VUFDQ0EsU0FBUyxHQUFHLFFBQVo7VUFDQTs7UUFDRDtVQUNDQyxPQUFPLENBQUNDLEtBQVIsQ0FBYyx3QkFBZDtVQUNBO01BVEY7O01BWUEsSUFBTXpCLEtBQUssR0FBRzFGLDZEQUFBLENBQW9Cc0YsSUFBcEIsQ0FBZDtNQUNBLElBQU1uRyxJQUFJLEdBQUcsSUFBSWlDLDhDQUFKLENBQVNzRixVQUFULEVBQXFCQyxRQUFyQixFQUErQk0sU0FBL0IsRUFBMENELFVBQVUsQ0FBQ0ksUUFBWCxFQUExQyxDQUFiO01BRUEsSUFBTUMsVUFBVSxHQUFHLElBQUlDLEdBQUosRUFBbkI7TUFDQUQsVUFBVSxDQUFDRSxHQUFYLENBQWUsZUFBZixFQUFnQ1QsYUFBaEM7TUFDQU8sVUFBVSxDQUFDRSxHQUFYLENBQWUsV0FBZixFQUE0QlIsU0FBNUI7TUFFQSxPQUFPLElBQUloRyw4REFBSixDQUFtQjdCLE1BQW5CLEVBQTJCQyxJQUEzQixFQUFpQ3VHLEtBQWpDLEVBQXdDMkIsVUFBeEMsQ0FBUDtJQUNBOzs7V0FFRCx5QkFBK0I5RixRQUEvQixFQUErRTtNQUM5RSxJQUFNckMsTUFBTSxHQUFHcUMsUUFBUSxDQUFDZ0QsUUFBVCxFQUFmO01BQ0EsSUFBTWlELFFBQVEsR0FBR2pHLFFBQVEsQ0FBQ2dELFFBQVQsRUFBakI7TUFDQSxJQUFNb0MsUUFBUSxHQUFHcEYsUUFBUSxDQUFDcUUsVUFBVCxFQUFqQjtNQUNBLElBQU1OLElBQUksR0FBRy9ELFFBQVEsQ0FBQ2dELFFBQVQsRUFBYjtNQUVBLElBQU1tQixLQUFLLEdBQUcxRiw2REFBQSxDQUFvQnNGLElBQXBCLENBQWQ7TUFDQSxJQUFNbkcsSUFBSSxHQUFHLElBQUlpQyw4Q0FBSixDQUFTLE9BQVQsRUFBa0J1RixRQUFsQixDQUFiO01BRUEsSUFBTVUsVUFBVSxHQUFHLElBQUlDLEdBQUosRUFBbkI7TUFFQSxPQUFPLElBQUlySSxnRUFBSixDQUFvQkMsTUFBcEIsRUFBNEJDLElBQTVCLEVBQWtDdUcsS0FBbEMsRUFBeUMyQixVQUF6QyxDQUFQO0lBQ0E7Ozs7OztzRkF6U0kvRixnQ0FFb0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQzFDcENtRztFQU9MLDZCQUFZQyxNQUFaLEVBQWlDQyxVQUFqQyxFQUFzREMsVUFBdEQsRUFBMkU7SUFBQTs7SUFBQTs7SUFBQTs7SUFDMUUsS0FBS3JHLFFBQUwsR0FBZ0IsSUFBSXNHLFFBQUosQ0FBYUgsTUFBYixFQUFxQkMsVUFBckIsRUFBaUNDLFVBQWpDLENBQWhCO0lBQ0EsS0FBS0UsTUFBTCxHQUFjSCxVQUFVLEdBQUdBLFVBQUgsR0FBZ0IsQ0FBeEM7RUFDQTs7OztTQUVELGVBQXlCO01BQ3hCLE9BQU8sS0FBS0csTUFBWjtJQUNBOzs7V0FFRCxjQUFLQyxDQUFMLEVBQXNCO01BQ3JCLElBQUksS0FBS0QsTUFBTCxHQUFjQyxDQUFkLElBQW1CLEtBQUt4RyxRQUFMLENBQWNxRyxVQUFyQyxFQUFpRDtRQUNoRCxNQUFNLElBQUk5SyxLQUFKLHlCQUEyQixLQUFLZ0wsTUFBTCxHQUFjQyxDQUF6Qyw2QkFBNkQsS0FBS3hHLFFBQUwsQ0FBY3FHLFVBQTNFLEVBQU47TUFDQTs7TUFFRCxLQUFLRSxNQUFMLElBQWVDLENBQWY7SUFDQTs7O1dBRUQsbUJBQVV0RyxNQUFWLEVBQWtDO01BQ2pDLElBQUl5RSxJQUFJLEdBQUcsRUFBWDtNQUNBLElBQUk4QixHQUFHLEdBQUcsQ0FBQyxDQUFYOztNQUVBLEtBQUssSUFBSXpCLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUc5RSxNQUFwQixFQUE0QjhFLENBQUMsRUFBN0IsRUFBaUM7UUFDaEN5QixHQUFHLEdBQUcsS0FBS0MsUUFBTCxFQUFOOztRQUVBLElBQUlELEdBQUcsSUFBSSxDQUFYLEVBQWM7VUFDYjtRQUNBOztRQUVEOUIsSUFBSSxJQUFJZ0MsTUFBTSxDQUFDQyxZQUFQLENBQW9CSCxHQUFwQixDQUFSO01BQ0E7O01BRUQsT0FBTzlCLElBQVA7SUFDQTs7O1dBRUQsb0JBQVdrQyxZQUFYLEVBQTJDO01BQzFDLElBQU1DLEtBQUssR0FBRyxLQUFLOUcsUUFBTCxDQUFjcUUsVUFBZCxDQUF5QixLQUFLa0MsTUFBOUIsRUFBc0NNLFlBQXRDLENBQWQ7TUFFQSxLQUFLTixNQUFMLElBQWUsQ0FBZjtNQUVBLE9BQU9PLEtBQVA7SUFDQTs7O1dBRUQsb0JBQVdELFlBQVgsRUFBMkM7TUFDMUMsSUFBTUMsS0FBSyxHQUFHLEtBQUs5RyxRQUFMLENBQWNrRSxVQUFkLENBQXlCLEtBQUtxQyxNQUE5QixFQUFzQ00sWUFBdEMsQ0FBZDtNQUVBLEtBQUtOLE1BQUwsSUFBZSxDQUFmO01BRUEsT0FBT08sS0FBUDtJQUNBOzs7V0FFRCxtQkFBa0I7TUFDakIsSUFBTUEsS0FBSyxHQUFHLEtBQUs5RyxRQUFMLENBQWNzRCxPQUFkLENBQXNCLEtBQUtpRCxNQUEzQixDQUFkO01BRUEsS0FBS0EsTUFBTCxJQUFlLENBQWY7TUFFQSxPQUFPTyxLQUFQO0lBQ0E7OztXQUVELGtCQUFTRCxZQUFULEVBQXlDO01BQ3hDLElBQU1DLEtBQUssR0FBRyxLQUFLOUcsUUFBTCxDQUFjK0csUUFBZCxDQUF1QixLQUFLUixNQUE1QixFQUFvQ00sWUFBcEMsQ0FBZDtNQUVBLEtBQUtOLE1BQUwsSUFBZSxDQUFmO01BRUEsT0FBT08sS0FBUDtJQUNBOzs7V0FFRCxrQkFBU0QsWUFBVCxFQUF5QztNQUN4QyxJQUFNQyxLQUFLLEdBQUcsS0FBSzlHLFFBQUwsQ0FBY2dELFFBQWQsQ0FBdUIsS0FBS3VELE1BQTVCLEVBQW9DTSxZQUFwQyxDQUFkO01BRUEsS0FBS04sTUFBTCxJQUFlLENBQWY7TUFFQSxPQUFPTyxLQUFQO0lBQ0E7OztXQUVELGtCQUFTRCxZQUFULEVBQXlDO01BQ3hDLElBQU1DLEtBQUssR0FBRyxLQUFLOUcsUUFBTCxDQUFjZ0gsV0FBZCxDQUEwQixLQUFLVCxNQUEvQixFQUF1Q00sWUFBdkMsQ0FBZDtNQUVBLEtBQUtOLE1BQUwsSUFBZSxDQUFmO01BRUEsT0FBT08sS0FBUDtJQUNBOzs7V0FFRCxvQkFBbUI7TUFDbEIsSUFBTUEsS0FBSyxHQUFHLEtBQUs5RyxRQUFMLENBQWMwRyxRQUFkLENBQXVCLEtBQUtILE1BQTVCLENBQWQ7TUFFQSxLQUFLQSxNQUFMLElBQWUsQ0FBZjtNQUVBLE9BQU9PLEtBQVA7SUFDQTs7O1dBRUQsbUJBQVVELFlBQVYsRUFBMEM7TUFDekMsSUFBTUMsS0FBSyxHQUFHLEtBQUs5RyxRQUFMLENBQWNpSCxTQUFkLENBQXdCLEtBQUtWLE1BQTdCLEVBQXFDTSxZQUFyQyxDQUFkO01BRUEsS0FBS04sTUFBTCxJQUFlLENBQWY7TUFFQSxPQUFPTyxLQUFQO0lBQ0E7OztXQUVELG1CQUFVRCxZQUFWLEVBQTBDO01BQ3pDLElBQU1DLEtBQUssR0FBRyxLQUFLOUcsUUFBTCxDQUFja0gsU0FBZCxDQUF3QixLQUFLWCxNQUE3QixFQUFxQ00sWUFBckMsQ0FBZDtNQUVBLEtBQUtOLE1BQUwsSUFBZSxDQUFmO01BRUEsT0FBT08sS0FBUDtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5R0Y7QUFDQTs7SUFFTU07Ozs7Ozs7V0FFTCxlQUFNcEgsUUFBTixFQUFtRDtNQUNsRCxJQUFNcUgsWUFBWSxHQUFHLElBQUlGLDhEQUFKLEVBQXJCO01BRUEsSUFBTUcsTUFBTSxHQUFHdEgsUUFBUSxDQUFDZ0QsUUFBVCxFQUFmO01BQ0EsSUFBTXVFLFNBQVMsR0FBR3ZILFFBQVEsQ0FBQ2dELFFBQVQsRUFBbEI7TUFFQXFFLFlBQVksQ0FBQ25NLFVBQWIsR0FBMEJvTSxNQUExQjtNQUNBRCxZQUFZLENBQUNFLFNBQWIsR0FBeUJBLFNBQXpCO01BRUEsSUFBTUMsZ0JBQWdCLEdBQUd4SCxRQUFRLENBQUNnRCxRQUFULEVBQXpCOztNQUVBLElBQUl3RSxnQkFBZ0IsR0FBRyxDQUF2QixFQUEwQjtRQUN6QixJQUFNMUwsR0FBRyxHQUFHa0UsUUFBUSxDQUFDb0csVUFBVCxHQUFzQm9CLGdCQUFsQzs7UUFFQSxPQUFPeEgsUUFBUSxDQUFDb0csVUFBVCxHQUFzQnRLLEdBQTdCLEVBQWtDO1VBQ2pDLElBQU1vRSxNQUFNLEdBQUdGLFFBQVEsQ0FBQ2dELFFBQVQsRUFBZjtVQUNBLElBQU0vQyxJQUFJLEdBQUdELFFBQVEsQ0FBQ3NELE9BQVQsRUFBYjs7VUFDQSxJQUFNaUUsVUFBUyxHQUFHdkgsUUFBUSxDQUFDZ0QsUUFBVCxFQUFsQjs7VUFFQSxJQUFNN0MsTUFBTSxHQUFHSiw4REFBQSxDQUFtQkMsUUFBbkIsRUFBNkJDLElBQTdCLEVBQW1DQyxNQUFuQyxDQUFmO1VBQ0FDLE1BQU0sQ0FBQ29ILFNBQVAsR0FBbUJBLFVBQW5COztVQUVBLElBQUlwSCxNQUFKLEVBQVk7WUFDWGtILFlBQVksQ0FBQ0ssYUFBYixDQUEyQnpDLElBQTNCLENBQWdDOUUsTUFBaEM7VUFDQTtRQUNEO01BQ0Q7O01BRUQsSUFBTXdILGtCQUFrQixHQUFHM0gsUUFBUSxDQUFDZ0QsUUFBVCxFQUEzQjs7TUFDQSxJQUFJMkUsa0JBQWtCLEdBQUcsQ0FBekIsRUFBNEI7UUFDM0IsSUFBTTdMLElBQUcsR0FBR2tFLFFBQVEsQ0FBQ29HLFVBQVQsR0FBc0J1QixrQkFBbEM7O1FBRUEsT0FBTzNILFFBQVEsQ0FBQ29HLFVBQVQsR0FBc0J0SyxJQUE3QixFQUFrQztVQUNqQyxJQUFNb0UsT0FBTSxHQUFHRixRQUFRLENBQUNnRCxRQUFULEVBQWY7O1VBQ0EsSUFBTS9DLEtBQUksR0FBR0QsUUFBUSxDQUFDc0QsT0FBVCxFQUFiOztVQUNBLElBQU1pRSxXQUFTLEdBQUd2SCxRQUFRLENBQUNnRCxRQUFULEVBQWxCOztVQUVBLElBQU03QyxPQUFNLEdBQUdKLDhEQUFBLENBQW1CQyxRQUFuQixFQUE2QkMsS0FBN0IsRUFBbUNDLE9BQW5DLENBQWY7O1VBQ0FDLE9BQU0sQ0FBQ29ILFNBQVAsR0FBbUJBLFdBQW5COztVQUVBLElBQUlwSCxPQUFKLEVBQVk7WUFDWGtILFlBQVksQ0FBQ08sZUFBYixDQUE2QjNDLElBQTdCLENBQWtDOUUsT0FBbEM7VUFDQTtRQUNEO01BQ0Q7O01BRUQsT0FBT2tILFlBQVA7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuREY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFTyxJQUFNbUIsa0JBQWI7RUFBQTtJQUFBO0VBQUE7O0VBQUE7SUFBQTtJQUFBLE9BRUMsZUFBYXhJLFFBQWIsRUFBNENDLElBQTVDLEVBQW9FQyxNQUFwRSxFQUFrRztNQUNqRyxJQUFJQyxNQUFvQixHQUFHLElBQTNCOztNQUVBLFFBQVFGLElBQVI7UUFDQyxLQUFLNEgsNkVBQUw7VUFDQztVQUNBOztRQUNELEtBQUtBLDhFQUFMO1VBQ0MxSCxNQUFNLEdBQUcsS0FBS3dJLFdBQUwsQ0FBaUIzSSxRQUFqQixDQUFUO1VBQ0E7O1FBQ0QsS0FBSzZILG9GQUFMO1VBQ0MxSCxNQUFNLEdBQUcsS0FBSzBJLGNBQUwsQ0FBb0I3SSxRQUFwQixDQUFUO1VBQ0E7O1FBQ0QsS0FBSzZILHFGQUFMO1VBQ0MxSCxNQUFNLEdBQUcsS0FBS3lILGVBQUwsQ0FBcUI1SCxRQUFyQixDQUFUO1VBQ0E7O1FBQ0QsS0FBSzZILHFGQUFMO1VBQ0MxSCxNQUFNLEdBQUcsS0FBSzZJLFVBQUwsQ0FBZ0JoSixRQUFoQixFQUEwQmlJLGdGQUExQixDQUFUO1VBQ0E7O1FBQ0QsS0FBS0oscUZBQUw7VUFDQzFILE1BQU0sR0FBRyxLQUFLNkksVUFBTCxDQUFnQmhKLFFBQWhCLEVBQTBCa0ksZ0ZBQTFCLENBQVQ7VUFDQTs7UUFDRCxLQUFLTCxzRkFBTDtVQUNDMUgsTUFBTSxHQUFHLEtBQUs2SSxVQUFMLENBQWdCaEosUUFBaEIsRUFBMEJtSSxrRkFBMUIsQ0FBVDtVQUNBOztRQUNELEtBQUtOLHlGQUFMO1VBQ0MxSCxNQUFNLEdBQUcsS0FBS2lKLGNBQUwsQ0FBb0JwSixRQUFwQixFQUE4QitILHdGQUE5QixDQUFUO1VBQ0E7O1FBQ0QsS0FBS0Ysd0ZBQUw7VUFDQzFILE1BQU0sR0FBRyxLQUFLaUosY0FBTCxDQUFvQnBKLFFBQXBCLEVBQThCOEgsc0ZBQTlCLENBQVQ7VUFDQTs7UUFDRCxLQUFLRCwwRkFBTDtVQUNDMUgsTUFBTSxHQUFHLEtBQUtpSixjQUFMLENBQW9CcEosUUFBcEIsRUFBOEJnSSwwRkFBOUIsQ0FBVDtVQUNBOztRQUNELEtBQUtILHlGQUFMO1VBQ0MxSCxNQUFNLEdBQUcsS0FBS3FKLFlBQUwsQ0FBa0J4SixRQUFsQixFQUE0QnVJLHlGQUE1QixDQUFUO1VBQ0E7TUFqQ0Y7O01Bb0NBLE9BQU9wSSxNQUFQO0lBQ0E7RUExQ0Y7SUFBQTtJQUFBLE9BNENDLHFCQUEyQkgsUUFBM0IsRUFBNkU7TUFDNUUsSUFBTXlKLFFBQVEsR0FBR3pKLFFBQVEsQ0FBQ2tILFNBQVQsRUFBakI7TUFFQSxPQUFPLElBQUlvQixvRUFBSixDQUFzQm1CLFFBQXRCLENBQVA7SUFDQTtFQWhERjtJQUFBO0lBQUEsT0FrREMsd0JBQThCekosUUFBOUIsRUFBdUY7TUFDdEYsSUFBTTBKLEtBQUssR0FBRzFKLFFBQVEsQ0FBQzJKLFFBQVQsRUFBZDtNQUNBLElBQU16TyxVQUFVLEdBQUc4RSxRQUFRLENBQUNnRCxRQUFULEVBQW5CO01BRUEsSUFBTTlDLE1BQU0sR0FBR0YsUUFBUSxDQUFDZ0QsUUFBVCxFQUFmO01BQ0EsSUFBTS9DLElBQUksR0FBR0QsUUFBUSxDQUFDc0QsT0FBVCxFQUFiO01BQ0EsSUFBTWlFLFNBQVMsR0FBR3ZILFFBQVEsQ0FBQ2dELFFBQVQsRUFBbEI7TUFFQSxJQUFNN0MsTUFBTSxHQUFHSiwrREFBQSxDQUFtQkMsUUFBbkIsRUFBNkJDLElBQTdCLEVBQW1DQyxNQUFuQyxDQUFmO01BQ0FDLE1BQU0sQ0FBQ29ILFNBQVAsR0FBbUJBLFNBQW5CO01BRUEsT0FBTyxJQUFJYSw2RUFBSixDQUE2QnNCLEtBQTdCLEVBQW9DeE8sVUFBcEMsRUFBZ0RpRixNQUFoRCxDQUFQO0lBQ0E7RUE5REY7SUFBQTtJQUFBLE9BZ0VDLHlCQUErQkgsUUFBL0IsRUFBdUY7TUFDdEYsSUFBTTBKLEtBQUssR0FBRzFKLFFBQVEsQ0FBQzJKLFFBQVQsRUFBZDtNQUVBLElBQU1DLFdBQVcsR0FBRzVKLFFBQVEsQ0FBQ2dELFFBQVQsRUFBcEI7TUFDQSxJQUFNNkcsVUFBVSxHQUFHLElBQUl6QyxzRUFBSixFQUFuQjtNQUNBLElBQU1DLFlBQVksR0FBR3dDLFVBQVUsQ0FBQ3BDLEtBQVgsQ0FBaUJ6SCxRQUFqQixDQUFyQjtNQUVBLE9BQU8sSUFBSXFJLDhFQUFKLENBQTRCcUIsS0FBNUIsRUFBbUNyQyxZQUFuQyxDQUFQO0lBQ0E7RUF4RUY7SUFBQTtJQUFBLE9BMEVDLG9CQUE2QnJILFFBQTdCLEVBQTREQyxJQUE1RCxFQUF5SDtNQUN4SCxJQUFNeUosS0FBSyxHQUFHMUosUUFBUSxDQUFDMkosUUFBVCxFQUFkO01BQ0EsSUFBTXpPLFVBQVUsR0FBRzhFLFFBQVEsQ0FBQ2dELFFBQVQsRUFBbkI7TUFFQSxPQUFPLElBQUkvQyxJQUFKLENBQVN5SixLQUFULEVBQWdCeE8sVUFBaEIsQ0FBUDtJQUNBO0VBL0VGO0lBQUE7SUFBQSxPQWlGQyx3QkFBaUM4RSxRQUFqQyxFQUFnRUMsSUFBaEUsRUFBa0w7TUFDakwsSUFBTXlKLEtBQUssR0FBRzFKLFFBQVEsQ0FBQzJKLFFBQVQsRUFBZDtNQUNBLElBQU1HLE9BQU8sR0FBRzlKLFFBQVEsQ0FBQ3NELE9BQVQsRUFBaEI7TUFFQSxJQUFNeUcsV0FBVyxHQUFHL0osUUFBUSxDQUFDZ0QsUUFBVCxFQUFwQjtNQUNBLElBQU1nSCxVQUFVLEdBQUdoSyxRQUFRLENBQUNnRCxRQUFULEVBQW5CO01BQ0EsSUFBTWlILGNBQWMsR0FBR2pLLFFBQVEsQ0FBQ2dELFFBQVQsRUFBdkI7TUFFQSxJQUFNa0gsUUFBUSxHQUFHbEssUUFBUSxDQUFDNEUsU0FBVCxDQUFtQm1GLFdBQW5CLENBQWpCO01BQ0EsSUFBTUksT0FBTyxHQUFHbkssUUFBUSxDQUFDNEUsU0FBVCxDQUFtQm9GLFVBQW5CLENBQWhCO01BQ0EsSUFBTUksV0FBVyxHQUFHcEssUUFBUSxDQUFDNEUsU0FBVCxDQUFtQnFGLGNBQW5CLENBQXBCO01BRUEsT0FBTyxJQUFJaEssSUFBSixDQUFTeUosS0FBVCxFQUFnQkksT0FBaEIsRUFBeUJJLFFBQXpCLEVBQW1DQyxPQUFuQyxDQUFQO0lBQ0E7RUE5RkY7SUFBQTtJQUFBLE9BZ0dDLHNCQUErQm5LLFFBQS9CLEVBQThEQyxJQUE5RCxFQUF3RztNQUN2RyxJQUFNb0ssUUFBUSxHQUFHckssUUFBUSxDQUFDZ0QsUUFBVCxFQUFqQjtNQUNBLElBQU1zSCxLQUFLLEdBQUd0SyxRQUFRLENBQUM0RSxTQUFULENBQW1CeUYsUUFBbkIsQ0FBZDtNQUVBLElBQU1FLFdBQVcsR0FBR0MsTUFBTSxDQUFDRixLQUFELENBQTFCO01BRUEsT0FBTyxJQUFJckssSUFBSixDQUFTc0ssV0FBVCxDQUFQO0lBQ0E7RUF2R0Y7O0VBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFDQTs7SUFFTWhNOzs7Ozs7Ozs7Ozs7O1dBRUwsaUJBQVFuRSxRQUFSLEVBQXdDO01BQ3ZDLElBQU1rQixJQUFJLEdBQUcsSUFBSW1QLG1EQUFKLEVBQWI7TUFDQW5QLElBQUksQ0FBQ21CLFdBQUwsR0FBbUIsS0FBS0EsV0FBeEI7TUFDQW5CLElBQUksQ0FBQ29CLEtBQUwsR0FBYSxLQUFLQSxLQUFsQjtNQUVBdEMsUUFBUSxDQUFDNEIsT0FBVCxDQUFpQlYsSUFBakI7SUFDQTs7OztFQVJzQmdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSHhCO0FBQ0E7O0lBRU1vQzs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFRdEUsUUFBUixFQUF3QztNQUN2QyxJQUFNa0IsSUFBSSxHQUFHLElBQUlvUCwyREFBSixFQUFiO01BQ0FwUCxJQUFJLENBQUNvQixLQUFMLEdBQWEsS0FBS0EsS0FBbEI7TUFFQXRDLFFBQVEsQ0FBQzRCLE9BQVQsQ0FBaUJWLElBQWpCO0lBQ0E7Ozs7RUFQMEJnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0g1QjtBQUNBOztJQUVNcUM7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUXZFLFFBQVIsRUFBd0M7TUFDdkMsSUFBTWtCLElBQUksR0FBRyxJQUFJcVAsK0RBQUosRUFBYjtNQUNBclAsSUFBSSxDQUFDbUIsV0FBTCxHQUFtQixLQUFLQSxXQUF4QjtNQUNBbkIsSUFBSSxDQUFDb0IsS0FBTCxHQUFhLEtBQUtBLEtBQWxCO01BRUF0QyxRQUFRLENBQUN1QyxXQUFULENBQXFCLEtBQUs3QixRQUExQjtNQUNBVixRQUFRLENBQUM0QixPQUFULENBQWlCVixJQUFqQjtJQUNBOzs7O0VBVDRCZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKOUI7QUFFQTs7SUFFTTBDOzs7Ozs7Ozs7Ozs7O1dBRUwsaUJBQVE1RSxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUMwQyxvQkFBVCxDQUE4QixJQUFJOE4scURBQUosRUFBOUI7SUFDQTs7OztFQUp1QnZPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKekI7QUFFQTtBQUNBOztJQUVNaUQ7Ozs7O0VBS0wsc0JBQVk3QyxXQUFaLEVBQWlDO0lBQUE7O0lBQUE7O0lBQ2hDOztJQURnQzs7SUFHaEMsTUFBS0EsV0FBTCxHQUFtQkEsV0FBbkI7SUFIZ0M7RUFJaEM7Ozs7V0FFRCxpQkFBUXJDLFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzRCLE9BQVQsQ0FBaUIsSUFBSTZPLG9FQUFKLENBQW9CLEtBQUtwTyxXQUF6QixDQUFqQjtNQUNBckMsUUFBUSxDQUFDNkIsU0FBVCxDQUFtQixJQUFJMUIseURBQUosQ0FBYSxDQUFiLEVBQWdCLENBQWhCLEVBQW1CLENBQW5CLENBQW5CO0lBQ0E7Ozs7RUFmeUI4Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0wzQjtBQUVBOztJQUVNNkM7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUTlFLFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzRCLE9BQVQsQ0FBaUIsSUFBSThPLG9FQUFKLEVBQWpCO0lBQ0E7Ozs7RUFMOEJ6Tzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0poQztBQUVBOztJQUVNNEM7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUTdFLFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzRCLE9BQVQsQ0FBaUIsSUFBSStPLHlEQUFKLEVBQWpCO0lBQ0E7Ozs7RUFMeUIxTzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIM0I7QUFFQTtBQUNBOztJQUlNMk87RUFhTCw4QkFBWS9QLFFBQVosRUFBcUM7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDcEMsS0FBS0EsUUFBTCxHQUFnQkEsUUFBaEI7SUFDQSxLQUFLTixXQUFMLEdBQW1CLElBQUlMLDJEQUFKLENBQWdCLElBQWhCLENBQW5CO0VBQ0E7Ozs7V0FFRCw4QkFBcUJNLFFBQXJCLEVBQXVELENBRXREOzs7V0FFRCxpQkFBUUcsSUFBUixFQUE2QixDQUU1Qjs7O1dBRUQscUJBQVlELFFBQVosRUFBMkM7TUFDMUMsS0FBS0gsV0FBTCxDQUFpQkcsUUFBakIsR0FBNEJBLFFBQTVCO0lBQ0E7OztXQUVELHFCQUFZRyxRQUFaLEVBQTJDLENBRTFDOzs7V0FFRCx1QkFBY0MsVUFBZCxFQUF3QztNQUN2QyxJQUFJLEtBQUtBLFVBQUwsS0FBb0JBLFVBQXhCLEVBQW9DO1FBQ25DO01BQ0E7O01BRUQsSUFBTUMsSUFBSSxHQUFHLEtBQUtGLFFBQUwsQ0FBY0csT0FBZCxDQUFzQkYsVUFBdEIsQ0FBYjtNQUVBLEtBQUtBLFVBQUwsR0FBa0JBLFVBQWxCO01BQ0EsS0FBS1AsV0FBTCxDQUFpQlEsSUFBakIsR0FBd0JBLElBQXhCO0lBQ0E7OztXQUVELGlCQUFRRyxJQUFSLEVBQTBCO01BQ3pCLElBQUksQ0FBQ0EsSUFBTCxFQUFXO1FBQ1YsTUFBTSxJQUFJQyxLQUFKLENBQVUsdUJBQVYsQ0FBTjtNQUNBOztNQUNELElBQUksQ0FBQyxLQUFLRCxJQUFOLElBQWMsS0FBS0EsSUFBTCxLQUFjQSxJQUFoQyxFQUFzQztRQUNyQztNQUNBOztNQUVELEtBQUtFLGVBQUwsQ0FBcUIsS0FBS0YsSUFBMUI7TUFFQSxLQUFLQSxJQUFMLEdBQVlBLElBQVo7SUFDQTs7O1dBRUQsOEJBQXFCQSxJQUFyQixFQUE2QztNQUM1QyxJQUFNSSxLQUFLLEdBQUduQixvRUFBQSxFQUFkO01BRUEsS0FBS3lCLE9BQUwsQ0FBYVYsSUFBYjtNQUVBLEtBQUtXLFNBQUwsQ0FBZVAsS0FBZjtNQUNBLEtBQUtRLFdBQUwsQ0FBaUJSLEtBQWpCO01BQ0EsS0FBS1MsT0FBTCxDQUFhVCxLQUFiO01BRUEsS0FBS0YsZUFBTCxDQUFxQixLQUFLWSxZQUExQjtJQUNBOzs7V0FFRCxtQkFBVVYsS0FBVixFQUFpQztNQUNoQyxLQUFLSixJQUFMLENBQVVLLEtBQVYsQ0FBZ0JELEtBQUssQ0FBQ0UsS0FBTixFQUFoQixFQUErQixLQUFLakIsV0FBcEM7SUFDQTs7O1dBRUQscUJBQVllLEtBQVosRUFBbUM7TUFDbEMsS0FBS0osSUFBTCxDQUFVTyxPQUFWLENBQWtCSCxLQUFLLENBQUNFLEtBQU4sRUFBbEI7SUFDQTs7O1dBRUQsaUJBQVFGLEtBQVIsRUFBK0I7TUFDOUIsS0FBS0osSUFBTCxDQUFVUSxHQUFWLENBQWNKLEtBQUssQ0FBQ0UsS0FBTixFQUFkO0lBQ0E7OztXQUVELHlCQUF3Qk4sSUFBeEIsRUFBMEM7TUFDekMsSUFBSSxDQUFDQSxJQUFMLEVBQVc7UUFDVjtNQUNBOztNQUVELElBQUlBLElBQUksWUFBWWQseURBQXBCLEVBQWdDO1FBQy9CO1FBQ0E7TUFDQTs7TUFFRCxLQUFLNEIsWUFBTCxHQUFvQmQsSUFBcEI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyR0Y7O0lBTU0yUDs7Ozs7RUFTTCw0QkFBWTdRLFFBQVosRUFBc0M4USxTQUF0QyxFQUE0RDtJQUFBOztJQUFBOztJQUMzRCwwQkFBTTlRLFFBQU47O0lBRDJEOztJQUFBOztJQUFBOztJQUczRCxNQUFLOFEsU0FBTCxHQUFpQkEsU0FBakI7SUFIMkQ7RUFJM0Q7Ozs7V0FFRCxtQkFBVS9LLE1BQVYsRUFBZ0M7TUFDL0IsSUFBSWxGLFFBQVEsQ0FBQ2tRLGVBQVQsS0FBNkIsUUFBakMsRUFBMkM7UUFDMUM7UUFDQTtRQUNBLElBQUk7VUFDSGhMLE1BQU0sQ0FBQ3RFLE9BQVAsQ0FBZSxLQUFLekIsUUFBcEI7UUFDQSxDQUZELENBR0EsT0FBT2dSLEtBQVAsRUFBYztVQUNiekYsT0FBTyxDQUFDQyxLQUFSLENBQWN3RixLQUFkO1FBQ0E7TUFDRCxDQVRELE1BVUs7UUFDSixLQUFLQyxPQUFMLENBQWFwRyxJQUFiLENBQWtCOUUsTUFBbEI7TUFDQTtJQUNEOzs7V0FFRCxxQkFBWWxGLFFBQVosRUFBMkM7TUFDMUMsS0FBS2IsUUFBTCxDQUFja1IsV0FBZCxDQUEwQnJRLFFBQTFCO0lBQ0E7OztXQUVELG9CQUFXc1EsSUFBWCxFQUFpQztNQUNoQyxNQUFNLElBQUloUSxLQUFKLENBQVUseUJBQVYsQ0FBTjtJQUNBOzs7V0FFRCxvQkFBV0wsVUFBWCxFQUF1QztNQUN0QyxNQUFNLElBQUlLLEtBQUosQ0FBVSx5QkFBVixDQUFOO0lBQ0E7OztXQUVELDBCQUFpQztNQUNoQyxJQUFJaVEsV0FBVyxHQUFHLEtBQUtILE9BQUwsQ0FBYW5MLE1BQS9COztNQUVBLE9BQU9zTCxXQUFXLEdBQUcsQ0FBckIsRUFBd0I7UUFDdkI7UUFDQSxJQUFNckwsTUFBTSxHQUFHLEtBQUtrTCxPQUFMLENBQWEsQ0FBYixDQUFmO1FBQ0EsSUFBTUUsSUFBSSxHQUFHLEtBQUtMLFNBQUwsQ0FBZU8sU0FBNUIsQ0FIdUIsQ0FLdkI7UUFDQzs7UUFFQSxJQUFJO1VBQ0h0TCxNQUFNLENBQUN0RSxPQUFQLENBQWUsS0FBS3pCLFFBQXBCO1FBQ0EsQ0FGRCxDQUdBLE9BQU9nUixLQUFQLEVBQWMsQ0FDYjtRQUNBLENBYnFCLENBZXRCOzs7UUFDQSxLQUFLQyxPQUFMLENBQWFLLEtBQWI7UUFFQUYsV0FBVyxHQUFHLEtBQUtILE9BQUwsQ0FBYW5MLE1BQTNCLENBbEJzQixDQW1CdkI7UUFDQTtRQUNBO1FBQ0E7TUFDQTtJQUNEOzs7V0FFRCx3QkFBK0I7TUFDOUIsS0FBS21MLE9BQUwsR0FBZSxFQUFmO0lBQ0E7OztXQUVELHlCQUFnQztNQUMvQixJQUFJO1FBQ0gsS0FBS00sR0FBTDtNQUNBLENBRkQsQ0FHQSxPQUFPQyxDQUFQLEVBQVU7UUFDVGpHLE9BQU8sQ0FBQ0MsS0FBUixDQUFjZ0csQ0FBZDtRQUVBLE1BQU0sSUFBSXJRLEtBQUosQ0FBVSx3QkFBVixDQUFOO01BQ0E7SUFDRDs7O1dBRUQsd0JBQStCO01BQzlCc1Esb0JBQW9CLENBQUMsS0FBS0MsU0FBTixDQUFwQjtJQUNBOzs7V0FFRCwyQkFBa0M7TUFDakNELG9CQUFvQixDQUFDLEtBQUtDLFNBQU4sQ0FBcEI7SUFDQTs7O1dBRUQsMkJBQWtDO01BQ2pDLEtBQUtULE9BQUwsQ0FBYW5MLE1BQWIsR0FBc0IsQ0FBdEI7SUFDQTs7O1dBRUQsZUFBYztNQUNiLEtBQUs2TCxjQUFMO01BRUEsS0FBS0QsU0FBTCxHQUFpQkUscUJBQXFCLENBQUMsS0FBS0wsR0FBTCxDQUFTTSxJQUFULENBQWMsSUFBZCxDQUFELENBQXRDO0lBQ0E7Ozs7RUF2RytCOVI7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDTjVCME47O1dBQUFBO0VBQUFBLGlCQUFBQTtFQUFBQSxpQkFBQUE7RUFBQUEsaUJBQUFBO0VBQUFBLGlCQUFBQTtFQUFBQSxpQkFBQUE7RUFBQUEsaUJBQUFBO0VBQUFBLGlCQUFBQTtFQUFBQSxpQkFBQUE7RUFBQUEsaUJBQUFBO0VBQUFBLGlCQUFBQTtFQUFBQSxpQkFBQUE7R0FBQUEscUJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDQVVxRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQWY7O0lBR01DOzs7OztFQVdMLDhCQUFZQyxVQUFaLEVBQWdDQyxZQUFoQyxFQUE0REMsYUFBNUQsRUFBbUZDLFlBQW5GLEVBQXlHO0lBQUE7O0lBQUE7O0lBQ3hHOztJQUR3Rzs7SUFBQTs7SUFBQTs7SUFBQTs7SUFHeEcsTUFBS0gsVUFBTCxHQUFrQkEsVUFBbEI7SUFDQSxNQUFLQyxZQUFMLEdBQW9CQSxZQUFwQjtJQUNBLE1BQUtDLGFBQUwsR0FBcUJBLGFBQXJCO0lBQ0EsTUFBS0MsWUFBTCxHQUFvQkEsWUFBcEI7SUFOd0c7RUFPeEc7OztFQWxCaUNMOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIbkM7O0lBR01wRTs7Ozs7RUFFTCxvQ0FBWXNFLFVBQVosRUFBZ0NDLFlBQWhDLEVBQTREQyxhQUE1RCxFQUFtRkMsWUFBbkYsRUFBeUc7SUFBQTs7SUFBQSx5QkFDbEdILFVBRGtHLEVBQ3RGQyxZQURzRixFQUN4RUMsYUFEd0UsRUFDekRDLFlBRHlEO0VBRXhHOzs7RUFKdUNKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIekM7O0lBR01wRTs7Ozs7RUFFTCxxQ0FBWXFFLFVBQVosRUFBZ0NDLFlBQWhDLEVBQTREQyxhQUE1RCxFQUFtRkMsWUFBbkYsRUFBeUc7SUFBQTs7SUFBQSx5QkFDbEdILFVBRGtHLEVBQ3RGQyxZQURzRixFQUN4RUMsYUFEd0UsRUFDekRDLFlBRHlEO0VBRXhHOzs7RUFKd0NKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIMUM7O0lBR01uRTs7Ozs7RUFFTCxzQ0FBWW9FLFVBQVosRUFBZ0NDLFlBQWhDLEVBQTREQyxhQUE1RCxFQUFtRkMsWUFBbkYsRUFBeUc7SUFBQTs7SUFBQSx5QkFDbEdILFVBRGtHLEVBQ3RGQyxZQURzRixFQUN4RUMsYUFEd0UsRUFDekRDLFlBRHlEO0VBRXhHOzs7RUFKeUNKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSDNDOztJQUVNSzs7Ozs7RUFPTCwwQkFBWUosVUFBWixFQUFnQ2xSLFVBQWhDLEVBQW9EO0lBQUE7O0lBQUE7O0lBQ25EOztJQURtRDs7SUFBQTs7SUFHbkQsTUFBS2tSLFVBQUwsR0FBa0JBLFVBQWxCO0lBQ0EsTUFBS2xSLFVBQUwsR0FBa0JBLFVBQWxCO0lBSm1EO0VBS25EOzs7RUFaNkJnUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRi9COztJQUVNakU7Ozs7O0VBRUwsaUNBQVltRSxVQUFaLEVBQWdDbFIsVUFBaEMsRUFBb0Q7SUFBQTs7SUFBQSx5QkFDN0NrUixVQUQ2QyxFQUNqQ2xSLFVBRGlDO0VBRW5EOzs7RUFKb0NzUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRnRDOztJQUVNdEU7Ozs7O0VBRUwsaUNBQVlrRSxVQUFaLEVBQWdDbFIsVUFBaEMsRUFBb0Q7SUFBQTs7SUFBQSx5QkFDN0NrUixVQUQ2QyxFQUNqQ2xSLFVBRGlDO0VBRW5EOzs7RUFKb0NzUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRnRDOztJQUVNckU7Ozs7O0VBRUwsa0NBQVlpRSxVQUFaLEVBQWdDbFIsVUFBaEMsRUFBb0Q7SUFBQTs7SUFBQSx5QkFDN0NrUixVQUQ2QyxFQUNqQ2xSLFVBRGlDO0VBRW5EOzs7RUFKcUNzUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0R2Qzs7SUFFTXBFOzs7OztFQUtMLGtDQUFZZ0UsVUFBWixFQUFnQ2xSLFVBQWhDLEVBQW9EaUYsTUFBcEQsRUFBb0U7SUFBQTs7SUFBQTs7SUFDbkUsMEJBQU1pTSxVQUFOLEVBQWtCbFIsVUFBbEI7O0lBRG1FOztJQUduRSxNQUFLaUYsTUFBTCxHQUFjQSxNQUFkO0lBSG1FO0VBSW5FOzs7RUFUcUNxTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0Z2Qzs7SUFFTW5FOzs7OztFQU9MLGlDQUFZK0QsVUFBWixFQUFnQ0ssT0FBaEMsRUFBdUQ7SUFBQTs7SUFBQTs7SUFDdEQ7O0lBRHNEOztJQUFBOztJQUd0RCxNQUFLTCxVQUFMLEdBQWtCQSxVQUFsQjtJQUNBLE1BQUsvRSxZQUFMLEdBQW9Cb0YsT0FBcEI7SUFKc0Q7RUFLdEQ7OztFQVpvQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIdEM7O0lBRU1ROzs7OztFQUtMLDRCQUFZbkMsV0FBWixFQUFpQztJQUFBOztJQUFBOztJQUNoQzs7SUFEZ0M7O0lBR2hDLE1BQUtBLFdBQUwsR0FBbUJBLFdBQW5CO0lBSGdDO0VBSWhDOzs7RUFUK0IyQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRmpDOztJQUVNM0Q7Ozs7O0VBRUwscUNBQVlnQyxXQUFaLEVBQWlDO0lBQUE7O0lBQUEseUJBQzFCQSxXQUQwQjtFQUVoQzs7O0VBSndDbUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNGMUM7O0lBRU1wRTs7Ozs7RUFLTCwyQkFBWW1CLFFBQVosRUFBOEI7SUFBQTs7SUFBQTs7SUFDN0I7O0lBRDZCOztJQUc3QixNQUFLQSxRQUFMLEdBQWdCQSxRQUFoQjtJQUg2QjtFQUk3Qjs7O0VBVDhCeUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRmhDO0FBRUE7O0lBRU16TTs7Ozs7RUFPTCwwQkFBWTlCLE1BQVosRUFBNEJnSCxJQUE1QixFQUEwQztJQUFBOztJQUFBOztJQUN6Qzs7SUFEeUM7O0lBQUE7O0lBR3pDLE1BQUtoSCxNQUFMLEdBQWNBLE1BQWQ7SUFDQSxNQUFLZ0gsSUFBTCxHQUFZQSxJQUFaO0lBSnlDO0VBS3pDOzs7O1dBRUQsaUJBQVF2SyxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUMwQyxvQkFBVCxDQUE4QixJQUFJNlAsa0VBQUosQ0FBbUIsS0FBS2hQLE1BQXhCLEVBQWdDLEtBQUtnSCxJQUFyQyxDQUE5QjtJQUNBOzs7O0VBaEI2QnRJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ovQjtBQUlBOztJQUVNbUQ7Ozs7O0VBV0wsd0JBQVk3QixNQUFaLEVBQTRCQyxJQUE1QixFQUF3Q0MsU0FBeEMsRUFBMERDLGNBQTFELEVBQWdHO0lBQUE7O0lBQUE7O0lBQy9GOztJQUQrRjs7SUFBQTs7SUFBQTs7SUFBQTs7SUFHL0YsTUFBS0gsTUFBTCxHQUFjQSxNQUFkO0lBQ0EsTUFBS0MsSUFBTCxHQUFZQSxJQUFaO0lBQ0EsTUFBS0MsU0FBTCxHQUFpQkEsU0FBakI7SUFDQSxNQUFLQyxjQUFMLEdBQXNCQSxjQUF0QjtJQU4rRjtFQU8vRjs7OztXQUVELGlCQUFRMUQsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDMEMsb0JBQVQsQ0FBOEIsSUFBSThQLDhEQUFKLENBQWlCLEtBQUtqUCxNQUF0QixFQUE4QixLQUFLQyxJQUFuQyxFQUF5QyxLQUFLQyxTQUE5QyxFQUF5RCxLQUFLQyxjQUE5RCxDQUE5QjtJQUNBOzs7O0VBdEIyQnpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNON0I7QUFHQTtBQUVBOztJQUVNeUQ7Ozs7O0VBU0wsNkJBQVlyRCxXQUFaLEVBQWlDMEgsS0FBakMsRUFBK0NXLFVBQS9DLEVBQXdFO0lBQUE7O0lBQUE7O0lBQ3ZFOztJQUR1RTs7SUFBQTs7SUFBQTs7SUFHdkUsTUFBS3JJLFdBQUwsR0FBbUJBLFdBQW5CO0lBQ0EsTUFBSzBILEtBQUwsR0FBYUEsS0FBYjtJQUNBLE1BQUtXLFVBQUwsR0FBa0JBLFVBQWxCO0lBTHVFO0VBTXZFOzs7O1dBRUQsaUJBQVExSyxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUN1QyxXQUFULENBQXFCLEtBQUs3QixRQUExQjtNQUNBVixRQUFRLENBQUM0QixPQUFULENBQWlCLElBQUk2USx3RUFBSixDQUFzQixLQUFLcFEsV0FBM0IsRUFBd0MsS0FBSzBILEtBQTdDLEVBQW9ELEtBQUtXLFVBQXpELENBQWpCO01BQ0ExSyxRQUFRLENBQUM2QixTQUFULENBQW1CLElBQUkxQix5REFBSixDQUFhLENBQWIsRUFBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsQ0FBbkI7SUFDQTs7OztFQXJCZ0M4Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQbEM7QUFHQTs7SUFFTXFEOzs7OztFQU9MLHdCQUFZL0IsTUFBWixFQUE0QmpDLEtBQTVCLEVBQTBDO0lBQUE7O0lBQUE7O0lBQ3pDOztJQUR5Qzs7SUFBQTs7SUFHekMsTUFBS2lDLE1BQUwsR0FBY0EsTUFBZDtJQUNBLE1BQUtqQyxLQUFMLEdBQWFBLEtBQWI7SUFKeUM7RUFLekM7Ozs7V0FFRCxpQkFBUXRCLFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQzBDLG9CQUFULENBQThCLElBQUlnUSw4REFBSixDQUFpQixLQUFLblAsTUFBdEIsRUFBOEIsS0FBS2pDLEtBQW5DLENBQTlCO0lBQ0E7Ozs7RUFoQjJCVzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNMN0I7QUFFQTs7SUFFTXVEOzs7OztFQUtMLDBCQUFZakMsTUFBWixFQUE0QjtJQUFBOztJQUFBOztJQUMzQjs7SUFEMkI7O0lBRzNCLE1BQUtBLE1BQUwsR0FBY0EsTUFBZDtJQUgyQjtFQUkzQjs7OztXQUVELGlCQUFRdkQsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDMEMsb0JBQVQsQ0FBOEIsSUFBSWlRLGtFQUFKLENBQW1CLEtBQUtwUCxNQUF4QixDQUE5QjtJQUNBOzs7O0VBYjZCdEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSi9CO0FBRUE7O0lBRU1rRDs7Ozs7RUFLTCxvQkFBWTVCLE1BQVosRUFBNEI7SUFBQTs7SUFBQTs7SUFDM0I7O0lBRDJCOztJQUczQixNQUFLQSxNQUFMLEdBQWNBLE1BQWQ7SUFIMkI7RUFJM0I7Ozs7V0FFRCxpQkFBUXZELFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzRCLE9BQVQsQ0FBaUIsSUFBSWdSLHFEQUFKLENBQWEsS0FBS3JQLE1BQWxCLENBQWpCO0lBQ0E7Ozs7RUFkdUJ0Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSHpCOztJQUVNdUM7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUXhFLFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQzZCLFNBQVQsQ0FBbUIsS0FBS1AsS0FBeEI7SUFDQTs7OztFQUo0QnVSOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNGOUI7O0lBRU1uTzs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFRMUUsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDK0IsT0FBVCxDQUFpQixLQUFLVCxLQUF0QjtJQUNBOzs7O0VBSjBCdVI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0Y1Qjs7SUFFTXBPOzs7Ozs7Ozs7Ozs7O1dBRUwsaUJBQVF6RSxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUM4QixXQUFULENBQXFCLEtBQUtSLEtBQTFCO0lBQ0E7Ozs7RUFKOEJ1Ujs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0hoQzs7SUFHZUE7Ozs7O0VBS2Qsb0JBQVl2UixLQUFaLEVBQThCO0lBQUE7O0lBQUE7O0lBQzdCOztJQUQ2Qjs7SUFHN0IsTUFBS0EsS0FBTCxHQUFhQSxLQUFiO0lBSDZCO0VBSTdCOzs7RUFUZ0NXOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSGxDO0FBRUE7O0lBRU0wQzs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFRM0UsUUFBUixFQUF3QztNQUN2Q0EsUUFBUSxDQUFDMEMsb0JBQVQsQ0FBOEIsSUFBSW9RLHFEQUFKLEVBQTlCO0lBQ0E7Ozs7RUFKdUI3UTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p6QjtBQUVBOztJQUVNZ0Q7Ozs7Ozs7Ozs7Ozs7V0FFTCxpQkFBUWpGLFFBQVIsRUFBd0M7TUFDdkNBLFFBQVEsQ0FBQ3VDLFdBQVQsQ0FBcUIsS0FBSzdCLFFBQTFCO01BQ0FWLFFBQVEsQ0FBQzBDLG9CQUFULENBQThCLElBQUlxUSw0REFBSixFQUE5QjtJQUNBOzs7O0VBTDBCOVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNINUI7QUFDQTs7SUFHTStDOzs7OztFQUVMLG9CQUFZM0MsV0FBWixFQUFrQ0MsS0FBbEMsRUFBaUQ7SUFBQTs7SUFBQSx5QkFDMUMsQ0FEMEMsRUFDdkNBLEtBRHVDO0VBRWhEOzs7O1dBRUQsaUJBQVF0QyxRQUFSLEVBQXdDO01BQ3ZDQSxRQUFRLENBQUN1QyxXQUFULENBQXFCLEtBQUs3QixRQUExQjtNQUNBVixRQUFRLENBQUM0QixPQUFULENBQWlCLElBQUlvUixxREFBSixFQUFqQjtJQUNBOzs7O0VBVHVCOVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FFTHpCO0FBQ0E7SUFTTWlSLDRCQUxMRiwrREFBVyxDQUFDO0VBQ1pHLFFBQVEsRUFBRSxpQkFERTtFQUVaQyxRQUFRLEVBQUVDLG1CQUFPLENBQUMsb0ZBQUQsQ0FGTDtFQUdaQyxNQUFNLEVBQUUsQ0FBQ0QsbUJBQU8sQ0FBQyxrRkFBRCxDQUFSO0FBSEksQ0FBRDs7Ozs7RUE4QlgsNkJBQWM7SUFBQTs7SUFBQTs7SUFDYjs7SUFEYTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTtFQUViOzs7O1dBRUQsNkJBQW9CO01BQUE7O01BQ25CLEtBQUtFLHFCQUFMLENBQTJCQyxVQUFVLENBQUMsS0FBS0MsWUFBTCxDQUFrQmhILEtBQW5CLENBQVYsR0FBc0MsR0FBakU7TUFDQSxLQUFLaUgsYUFBTCxDQUFtQixLQUFuQjtNQUVBOVMsUUFBUSxDQUFDK1MsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFlBQU07UUFDbkQsTUFBSSxDQUFDRCxhQUFMLENBQW1COVMsUUFBUSxDQUFDZ1QsaUJBQVQsS0FBK0IsSUFBbEQ7TUFDQSxDQUZEO01BSUEsS0FBS0MsZUFBTCxDQUFxQkYsZ0JBQXJCLENBQXNDLE9BQXRDLEVBQStDLFlBQU07UUFDcEQsTUFBSSxDQUFDRyxRQUFMLENBQWMsQ0FBQyxNQUFJLENBQUNELGVBQUwsQ0FBcUJFLFNBQXJCLENBQStCQyxRQUEvQixDQUF3QyxXQUF4QyxDQUFmO01BQ0EsQ0FGRDtNQUdBLEtBQUtQLFlBQUwsQ0FBa0JFLGdCQUFsQixDQUFtQyxPQUFuQyxFQUE0QyxZQUFNO1FBQ2pELElBQU1NLFVBQVUsR0FBRyxNQUFJLENBQUNSLFlBQXhCOztRQUVBLE1BQUksQ0FBQ1MsZ0JBQUwsQ0FBc0JDLEtBQXRCLENBQTRCQyxXQUE1QixDQUF3Qyx1QkFBeEMsRUFBaUVILFVBQVUsQ0FBQ3hILEtBQVgsR0FBbUJ3SCxVQUFVLENBQUNJLEdBQTlCLEdBQW9DLEdBQXBDLEdBQTBDLEdBQTNHO01BQ0EsQ0FKRDtNQUtBLEtBQUtDLGVBQUwsQ0FBcUJYLGdCQUFyQixDQUFzQyxPQUF0QyxFQUErQyxZQUFNO1FBQ3BELE1BQUksQ0FBQ1ksV0FBTCxDQUFpQixNQUFJLENBQUNELGVBQXRCLEVBQXVDLENBQUMsTUFBSSxDQUFDQSxlQUFMLENBQXFCUCxTQUFyQixDQUErQkMsUUFBL0IsQ0FBd0MsVUFBeEMsQ0FBeEM7TUFDQSxDQUZEO01BR0EsS0FBS1EsY0FBTCxDQUFvQmIsZ0JBQXBCLENBQXFDLE9BQXJDLEVBQThDLFlBQU07UUFDbkQsTUFBSSxDQUFDWSxXQUFMLENBQWlCLE1BQUksQ0FBQ0MsY0FBdEIsRUFBc0MsQ0FBQyxNQUFJLENBQUNBLGNBQUwsQ0FBb0JULFNBQXBCLENBQThCQyxRQUE5QixDQUF1QyxVQUF2QyxDQUF2QztNQUNBLENBRkQ7SUFHQTs7O1NBRUQsZUFBdUI7TUFDdEIsT0FBTyxLQUFLUyxZQUFMLENBQWtCLFNBQWxCLENBQVA7SUFDQTtTQUVELGFBQVloSSxLQUFaLEVBQTRCO01BQzNCLElBQUlBLEtBQUosRUFBVztRQUNWLEtBQUtpSSxZQUFMLENBQWtCLFNBQWxCLEVBQTZCLEVBQTdCO01BQ0EsQ0FGRCxNQUdLO1FBQ0osS0FBS0MsZUFBTCxDQUFxQixTQUFyQjtNQUNBO0lBQ0Q7OztXQUVELGdCQUFhO01BQ1osS0FBS0MsT0FBTCxHQUFlLElBQWY7SUFDQTs7O1dBRUQsZ0JBQWE7TUFDWixLQUFLQSxPQUFMLEdBQWUsS0FBZjtJQUNBOzs7V0FFRCxxQkFBWUMsVUFBWixFQUFzQztNQUNyQyxJQUFNQyxJQUFJLEdBQUcsSUFBSUMsSUFBSixDQUFTRixVQUFULENBQWI7TUFDQSxJQUFNRyxLQUFLLEdBQUdGLElBQUksQ0FBQ0csV0FBTCxFQUFkO01BQ0EsSUFBTUMsT0FBTyxHQUFHLE1BQU1KLElBQUksQ0FBQ0ssYUFBTCxFQUF0QjtNQUNBLElBQU1DLE9BQU8sR0FBRyxNQUFNTixJQUFJLENBQUNPLGFBQUwsRUFBdEI7TUFFQSxJQUFNQyxhQUFhLEdBQUdOLEtBQUssR0FBRyxHQUFSLEdBQWNFLE9BQU8sQ0FBQ0ssTUFBUixDQUFlLENBQUMsQ0FBaEIsQ0FBZCxHQUFtQyxHQUFuQyxHQUF5Q0gsT0FBTyxDQUFDRyxNQUFSLENBQWUsQ0FBQyxDQUFoQixDQUEvRDtNQUVBLEtBQUtDLFFBQUwsQ0FBY0MsU0FBZCxHQUEwQkgsYUFBMUI7SUFDQTs7O1dBRUQsbUJBQVVJLE1BQVYsRUFBZ0M7TUFDL0IsS0FBS2pDLFlBQUwsQ0FBa0JoSCxLQUFsQixHQUEwQixDQUFDaUosTUFBTSxHQUFHLEdBQVYsRUFBZWxLLFFBQWYsRUFBMUI7TUFFQSxLQUFLK0gscUJBQUwsQ0FBMkJtQyxNQUEzQjtJQUNBOzs7V0FFRCxrQkFBU0MsS0FBVCxFQUErQjtNQUM5QixJQUFJQSxLQUFKLEVBQVc7UUFDVixLQUFLQyxrQkFBTCxDQUF3QixXQUF4QjtNQUNBLENBRkQsTUFHSztRQUNKLEtBQUtyQyxxQkFBTCxDQUEyQkMsVUFBVSxDQUFDLEtBQUtDLFlBQUwsQ0FBa0JoSCxLQUFuQixDQUFWLEdBQXNDLEdBQWpFO01BQ0E7O01BRUQsSUFBSSxLQUFLb0osWUFBVCxFQUF1QjtRQUN0QixLQUFLQSxZQUFMLENBQWtCRixLQUFsQjtNQUNBO0lBQ0Q7OztXQUVELHVCQUFjRyxVQUFkLEVBQXlDO01BQ3hDLElBQUlBLFVBQUosRUFBZ0I7UUFDZixLQUFLQyxzQkFBTCxDQUE0QixvQkFBNUI7TUFDQSxDQUZELE1BR0s7UUFDSixLQUFLQSxzQkFBTCxDQUE0QixlQUE1QjtNQUNBO0lBQ0Q7OztXQUVELHFCQUFZQyxNQUFaLEVBQXVDQyxRQUF2QyxFQUFnRTtNQUMvRCxJQUFNbEMsU0FBUyxHQUFHaUMsTUFBTSxDQUFDakMsU0FBekI7O01BRUEsSUFBSWtDLFFBQUosRUFBYztRQUNibEMsU0FBUyxDQUFDbUMsR0FBVixDQUFjLFVBQWQ7TUFDQSxDQUZELE1BR0s7UUFDSm5DLFNBQVMsQ0FBQ29DLE1BQVYsQ0FBaUIsVUFBakI7TUFDQTtJQUNEOzs7V0FFRCxtQkFBVUgsTUFBVixFQUFxQ0ksTUFBckMsRUFBNEQ7TUFDM0QsSUFBTXJDLFNBQVMsR0FBR2lDLE1BQU0sQ0FBQ2pDLFNBQXpCOztNQUVBLElBQUlxQyxNQUFKLEVBQVk7UUFDWHJDLFNBQVMsQ0FBQ21DLEdBQVYsQ0FBYyxRQUFkO01BQ0EsQ0FGRCxNQUdLO1FBQ0puQyxTQUFTLENBQUNvQyxNQUFWLENBQWlCLFFBQWpCO01BQ0E7SUFDRDs7O1dBRUQsb0JBQVdILE1BQVgsRUFBc0NwQixPQUF0QyxFQUE4RDtNQUM3RCxJQUFJQSxPQUFKLEVBQWE7UUFDWm9CLE1BQU0sQ0FBQ2pDLFNBQVAsQ0FBaUJvQyxNQUFqQixDQUF3QixXQUF4QjtNQUNBLENBRkQsTUFHSztRQUNKSCxNQUFNLENBQUNqQyxTQUFQLENBQWlCbUMsR0FBakIsQ0FBcUIsV0FBckI7TUFDQTtJQUNEOzs7V0FFRCw2QkFBb0J0QixPQUFwQixFQUE0QztNQUMzQyxLQUFLeUIsVUFBTCxDQUFnQixLQUFLQyxlQUFyQixFQUFzQzFCLE9BQXRDO01BQ0EsS0FBSzJCLFdBQUwsQ0FBaUIsS0FBS0QsZUFBdEIsRUFBdUMxQixPQUF2QyxFQUFnRCxnQkFBaEQ7SUFDQTs7O1dBRUQsd0JBQWVyVSxRQUFmLEVBQStDO01BQzlDLEtBQUsrVixlQUFMLENBQXFCM0MsZ0JBQXJCLENBQXNDLE9BQXRDLEVBQStDLFVBQUM2QyxLQUFELEVBQVc7UUFDekRBLEtBQUssQ0FBQ0MsZUFBTjtRQUNBbFcsUUFBUTtNQUNSLENBSEQsRUFHRyxLQUhIO0lBSUE7OztXQUVELHFCQUFZQSxRQUFaLEVBQThDO01BQUE7O01BQzdDLEtBQUtrVCxZQUFMLENBQWtCRSxnQkFBbEIsQ0FBbUMsT0FBbkMsRUFBNEMsWUFBTTtRQUNqRCxJQUFNK0IsTUFBTSxHQUFHbEMsVUFBVSxDQUFDLE1BQUksQ0FBQ0MsWUFBTCxDQUFrQmhILEtBQW5CLENBQVYsR0FBc0MsR0FBckQ7O1FBRUEsTUFBSSxDQUFDOEcscUJBQUwsQ0FBMkJtQyxNQUEzQjs7UUFFQW5WLFFBQVEsQ0FBQ21WLE1BQUQsQ0FBUjtNQUNBLENBTkQ7SUFPQTs7O1dBRUQsbUJBQVVuVixRQUFWLEVBQTZDO01BQzVDLEtBQUtzVixZQUFMLEdBQW9CdFYsUUFBcEI7SUFDQTs7O1dBRUQsdUJBQWNBLFFBQWQsRUFBaUQ7TUFBQTs7TUFDaEQsS0FBS21XLGNBQUwsQ0FBb0IvQyxnQkFBcEIsQ0FBcUMsT0FBckMsRUFBOEMsVUFBQzZDLEtBQUQsRUFBVztRQUN4REEsS0FBSyxDQUFDQyxlQUFOO1FBQ0EsTUFBSSxDQUFDQyxjQUFMLENBQW9CQyxRQUFwQixHQUErQixJQUEvQjtRQUNBcFcsUUFBUSxDQUFDLElBQUQsQ0FBUjtNQUNBLENBSkQsRUFJRyxLQUpIO0lBS0E7OztXQUVELHlCQUFnQkEsUUFBaEIsRUFBbUQ7TUFDbEQsS0FBS3FXLGdCQUFMLENBQXNCakQsZ0JBQXRCLENBQXVDLE9BQXZDLEVBQWdELFVBQUM2QyxLQUFELEVBQVc7UUFDMURBLEtBQUssQ0FBQ0MsZUFBTjtRQUNBbFcsUUFBUSxDQUFDLENBQUVLLFFBQVEsQ0FBQ2dULGlCQUFaLENBQVI7TUFDQSxDQUhELEVBR0csS0FISDtJQUlBOzs7V0FFRCx3QkFBZWlELFFBQWYsRUFBa0Q7TUFBQTs7TUFDakRBLFFBQVEsQ0FBQ0MsU0FBVCxDQUFtQixVQUFBQyxLQUFLLEVBQUk7UUFDM0IsTUFBSSxDQUFDeEMsV0FBTCxDQUFpQixNQUFJLENBQUNELGVBQXRCLEVBQXVDeUMsS0FBdkM7TUFDQSxDQUZEO01BSUEsS0FBS3pDLGVBQUwsQ0FBcUJYLGdCQUFyQixDQUFzQyxPQUF0QyxFQUErQyxVQUFDNkMsS0FBRCxFQUFXO1FBQ3pEQSxLQUFLLENBQUNDLGVBQU47UUFDQUksUUFBUSxDQUFDcEssS0FBVCxHQUFpQixNQUFJLENBQUM2SCxlQUFMLENBQXFCUCxTQUFyQixDQUErQkMsUUFBL0IsQ0FBd0MsVUFBeEMsQ0FBakI7TUFDQSxDQUhELEVBR0csS0FISDtJQUlBOzs7V0FFRCw4QkFBcUI2QyxRQUFyQixFQUF3RDtNQUFBOztNQUN2REEsUUFBUSxDQUFDQyxTQUFULENBQW1CLFVBQUFWLE1BQU0sRUFBSTtRQUM1QixNQUFJLENBQUNZLFNBQUwsQ0FBZSxNQUFJLENBQUMxQyxlQUFwQixFQUFxQzhCLE1BQXJDO01BQ0EsQ0FGRDtJQUdBOzs7V0FFRCx1QkFBY1MsUUFBZCxFQUFpRDtNQUFBOztNQUNoREEsUUFBUSxDQUFDQyxTQUFULENBQW1CLFVBQUFHLElBQUksRUFBSTtRQUMxQixNQUFJLENBQUMxQyxXQUFMLENBQWlCLE1BQUksQ0FBQ0MsY0FBdEIsRUFBc0N5QyxJQUF0QztNQUNBLENBRkQ7TUFJQSxLQUFLekMsY0FBTCxDQUFvQmIsZ0JBQXBCLENBQXFDLE9BQXJDLEVBQThDLFVBQUM2QyxLQUFELEVBQVc7UUFDeERBLEtBQUssQ0FBQ0MsZUFBTjtRQUNBSSxRQUFRLENBQUNwSyxLQUFULEdBQWlCLE1BQUksQ0FBQytILGNBQUwsQ0FBb0JULFNBQXBCLENBQThCQyxRQUE5QixDQUF1QyxVQUF2QyxDQUFqQjtNQUNBLENBSEQsRUFHRyxLQUhIO0lBSUE7OztXQUVELDZCQUFvQjZDLFFBQXBCLEVBQXVEO01BQUE7O01BQ3RELEtBQUtSLFVBQUwsQ0FBZ0IsS0FBSzdCLGNBQXJCLEVBQXFDcUMsUUFBUSxDQUFDcEssS0FBOUM7TUFDQSxLQUFLOEosV0FBTCxDQUFpQixLQUFLL0IsY0FBdEIsRUFBc0NxQyxRQUFRLENBQUNwSyxLQUEvQyxFQUFzRCxPQUF0RDtNQUVBb0ssUUFBUSxDQUFDQyxTQUFULENBQW1CLFVBQUFWLE1BQU0sRUFBSTtRQUM1QixNQUFJLENBQUNDLFVBQUwsQ0FBZ0IsTUFBSSxDQUFDN0IsY0FBckIsRUFBcUM0QixNQUFyQzs7UUFDQSxNQUFJLENBQUNHLFdBQUwsQ0FBaUIsTUFBSSxDQUFDL0IsY0FBdEIsRUFBc0M0QixNQUF0QyxFQUE4QyxPQUE5QztNQUNBLENBSEQ7SUFJQTs7O1dBRUQsd0JBQWVjLE9BQWYsRUFBdUM7TUFDdEMsS0FBS2IsVUFBTCxDQUFnQixLQUFLYyxVQUFyQixFQUFpQ0QsT0FBakM7SUFDQTs7O1dBRUQseUJBQWdCTCxRQUFoQixFQUFtRDtNQUFBOztNQUNsRCxLQUFLRyxTQUFMLENBQWUsS0FBS0csVUFBcEIsRUFBZ0NOLFFBQVEsQ0FBQ3BLLEtBQXpDO01BRUFvSyxRQUFRLENBQUNDLFNBQVQsQ0FBbUIsVUFBQUcsSUFBSSxFQUFJO1FBQzFCLE1BQUksQ0FBQ0QsU0FBTCxDQUFlLE1BQUksQ0FBQ0csVUFBcEIsRUFBZ0NGLElBQWhDO01BQ0EsQ0FGRDtNQUlBLEtBQUtFLFVBQUwsQ0FBZ0J4RCxnQkFBaEIsQ0FBaUMsT0FBakMsRUFBMEMsVUFBQzZDLEtBQUQsRUFBVztRQUNwREEsS0FBSyxDQUFDQyxlQUFOO1FBQ0FJLFFBQVEsQ0FBQ3BLLEtBQVQsR0FBaUIsTUFBSSxDQUFDMEssVUFBTCxDQUFnQnBELFNBQWhCLENBQTBCQyxRQUExQixDQUFtQyxRQUFuQyxDQUFqQjtNQUNBLENBSEQsRUFHRyxLQUhIO0lBSUE7OztXQUVELHFCQUFvQmdDLE1BQXBCLEVBQXlDRSxHQUF6QyxFQUF1RGtCLElBQXZELEVBQXFFO01BQ3BFLElBQU1yRCxTQUFTLEdBQUdpQyxNQUFNLENBQUNqQyxTQUF6Qjs7TUFFQSxJQUFJbUMsR0FBSixFQUFTO1FBQ1JuQyxTQUFTLENBQUNtQyxHQUFWLENBQWNrQixJQUFkO01BQ0EsQ0FGRCxNQUdLO1FBQ0pyRCxTQUFTLENBQUNvQyxNQUFWLENBQWlCaUIsSUFBakI7TUFDQTtJQUNEOzs7V0FFRCwrQkFBOEIxQixNQUE5QixFQUE4QztNQUM3QyxJQUFJQSxNQUFNLEtBQUssQ0FBZixFQUFrQjtRQUNqQixLQUFLRSxrQkFBTCxDQUF3QixjQUF4QjtNQUNBLENBRkQsTUFHSyxJQUFJRixNQUFNLEdBQUcsSUFBYixFQUFtQjtRQUN2QixLQUFLRSxrQkFBTCxDQUF3QixjQUF4QjtNQUNBLENBRkksTUFHQSxJQUFJRixNQUFNLEdBQUcsSUFBVCxJQUFpQkEsTUFBTSxHQUFHLElBQTlCLEVBQW9DO1FBQ3hDLEtBQUtFLGtCQUFMLENBQXdCLGNBQXhCO01BQ0EsQ0FGSSxNQUdBLElBQUlGLE1BQU0sR0FBRyxJQUFiLEVBQW1CO1FBQ3ZCLEtBQUtFLGtCQUFMLENBQXdCLGNBQXhCO01BQ0E7SUFDRDs7O1dBRUQsZ0NBQStCeUIsYUFBL0IsRUFBNEQ7TUFDM0QsSUFBTXRELFNBQVMsR0FBRyxLQUFLNkMsZ0JBQUwsQ0FBc0I3QyxTQUF4QztNQUVBQSxTQUFTLENBQUNvQyxNQUFWLENBQWlCLGVBQWpCLEVBQWtDLG9CQUFsQztNQUNBcEMsU0FBUyxDQUFDbUMsR0FBVixDQUFjbUIsYUFBZDtJQUNBOzs7V0FFRCw0QkFBMkJBLGFBQTNCLEVBQXdEO01BQ3ZELElBQU10RCxTQUFTLEdBQUcsS0FBS0YsZUFBTCxDQUFxQkUsU0FBdkM7TUFFQUEsU0FBUyxDQUFDb0MsTUFBVixDQUFpQixXQUFqQjs7TUFFQSxLQUFLLElBQUl4TCxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLENBQXBCLEVBQXVCQSxDQUFDLEVBQXhCLEVBQTRCO1FBQzNCb0osU0FBUyxDQUFDb0MsTUFBVixDQUFpQixnQkFBZ0J4TCxDQUFqQztNQUNBOztNQUVEb0osU0FBUyxDQUFDbUMsR0FBVixDQUFjbUIsYUFBZDtJQUNBOzs7O0VBM1I4QnBFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ1IxQnFFO0VBS0wsbUJBQVlDLElBQVosRUFBNkI7SUFBQTs7SUFBQTs7SUFDNUIsS0FBS0MsS0FBTCxHQUFhRCxJQUFiO0VBQ0E7Ozs7U0FFRCxlQUFzQjtNQUNyQixPQUFPLEtBQUtDLEtBQVo7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTEYsSUFBSTlNLEtBQUssQ0FBQytNLFNBQU4sQ0FBZ0JDLE1BQXBCLEVBQTRCO0VBQzNCcE0sT0FBTyxDQUFDcU0sSUFBUixDQUFhLDZDQUFiO0FBQ0E7O0FBRURqTixLQUFLLENBQUMrTSxTQUFOLENBQWdCQyxNQUFoQixHQUF5QixVQUFVRSxLQUFWLEVBQXdCO0VBQ2hELElBQUksQ0FBQ0EsS0FBTCxFQUFZO0lBQ1gsT0FBTyxLQUFQO0VBQ0E7O0VBQ0QsSUFBSSxTQUFTQSxLQUFiLEVBQW9CO0lBQ25CLE9BQU8sSUFBUDtFQUNBOztFQUNELElBQUksS0FBSy9SLE1BQUwsSUFBZStSLEtBQUssQ0FBQy9SLE1BQXpCLEVBQWlDO0lBQ2hDLE9BQU8sS0FBUDtFQUNBOztFQUVELEtBQUssSUFBSThFLENBQUMsR0FBRyxDQUFSLEVBQVdrTixDQUFDLEdBQUcsS0FBS2hTLE1BQXpCLEVBQWlDOEUsQ0FBQyxHQUFHa04sQ0FBckMsRUFBd0NsTixDQUFDLEVBQXpDLEVBQTZDO0lBQzVDLElBQUksS0FBS0EsQ0FBTCxhQUFtQkQsS0FBbkIsSUFBNEJrTixLQUFLLENBQUNqTixDQUFELENBQUwsWUFBb0JELEtBQXBELEVBQTJEO01BQzFELElBQUksQ0FBQyxLQUFLQyxDQUFMLEVBQVErTSxNQUFSLENBQWVFLEtBQUssQ0FBQ2pOLENBQUQsQ0FBcEIsQ0FBTCxFQUErQjtRQUM5QixPQUFPLEtBQVA7TUFDQTtJQUNELENBSkQsTUFLSyxJQUFJLEtBQUtBLENBQUwsS0FBV2lOLEtBQUssQ0FBQ2pOLENBQUQsQ0FBcEIsRUFBeUI7TUFDN0I7TUFDQSxPQUFPLEtBQVA7SUFDQTtFQUNEOztFQUNELE9BQU8sSUFBUDtBQUNBLENBdkJELEVBeUJBOzs7QUFDQW1OLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQnJOLEtBQUssQ0FBQytNLFNBQTVCLEVBQXVDLFFBQXZDLEVBQWlEO0VBQUVPLFVBQVUsRUFBRTtBQUFkLENBQWpEOzs7Ozs7Ozs7Ozs7OztBQ3RDQTtBQWFBLElBQU1FLGFBQWEsR0FBR0Msd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DVyxZQUF6RDs7QUFFQUQsd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DWSxlQUFuQyxHQUFxRCxZQUFZO0VBQ2hFLElBQUlILGFBQUosRUFBbUI7SUFDbEI7SUFDQSxJQUFNSSxDQUFDLEdBQUdKLGFBQWEsQ0FBQ0ssS0FBZCxDQUFvQixJQUFwQixFQUEwQjdOLEtBQUssQ0FBQzhOLElBQU4sQ0FBV0MsU0FBWCxDQUExQixDQUFWOztJQUVBLElBQUksQ0FBQyxLQUFLQyxjQUFWLEVBQTBCO01BQ3pCLEtBQUtBLGNBQUwsR0FBc0IsSUFBSVQsMERBQUosRUFBdEI7SUFDQTs7SUFFRCxLQUFLUyxjQUFMLENBQW9CQyxTQUFwQixDQUE4QkwsQ0FBQyxDQUFDTSxDQUFoQyxFQUFtQ04sQ0FBQyxDQUFDTyxDQUFyQyxFQUF3Q1AsQ0FBQyxDQUFDUSxDQUExQyxFQUE2Q1IsQ0FBQyxDQUFDUyxDQUEvQyxFQUFrRFQsQ0FBQyxDQUFDL0csQ0FBcEQsRUFBdUQrRyxDQUFDLENBQUNVLENBQXpEO0VBQ0E7O0VBRUQsT0FBTyxLQUFLTixjQUFaO0FBQ0EsQ0FiRDs7QUFnQkEsSUFBSSxDQUFDUixhQUFMLEVBQW9CO0VBQ25CLElBQU1lLGVBQWUsR0FBR2Qsd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DeUIsY0FBM0Q7RUFDQSxJQUFNQyxPQUFPLEdBQUdoQix3QkFBd0IsQ0FBQ1YsU0FBekIsQ0FBbUMyQixNQUFuRDtFQUNBLElBQU1DLE1BQU0sR0FBR2xCLHdCQUF3QixDQUFDVixTQUF6QixDQUFtQzZCLEtBQWxEO0VBQ0EsSUFBTUMsYUFBYSxHQUFHcEIsd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DK0IsWUFBekQ7RUFDQSxJQUFNQyxVQUFVLEdBQUd0Qix3QkFBd0IsQ0FBQ1YsU0FBekIsQ0FBbUNpQyxTQUF0RDtFQUNBLElBQU1DLFVBQVUsR0FBR3hCLHdCQUF3QixDQUFDVixTQUF6QixDQUFtQ21DLFNBQXREO0VBQ0EsSUFBTUMsS0FBSyxHQUFHMUIsd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DcUMsSUFBakQ7RUFDQSxJQUFNQyxRQUFRLEdBQUc1Qix3QkFBd0IsQ0FBQ1YsU0FBekIsQ0FBbUN1QyxPQUFwRDs7RUFHQTdCLHdCQUF3QixDQUFDVixTQUF6QixDQUFtQ3lCLGNBQW5DLEdBQW9ELFlBQVk7SUFDL0QsSUFBSUQsZUFBSixFQUFxQjtNQUNwQkEsZUFBZSxDQUFDVixLQUFoQixDQUFzQixJQUF0QixFQUE0QjdOLEtBQUssQ0FBQzhOLElBQU4sQ0FBV0MsU0FBWCxDQUE1QjtJQUNBOztJQUVELElBQUksQ0FBQyxLQUFLQyxjQUFWLEVBQTBCO01BQ3pCLEtBQUtBLGNBQUwsR0FBc0IsSUFBSVQsMERBQUosRUFBdEI7SUFDQTs7SUFFRCxLQUFLUyxjQUFMLENBQW9CdUIsS0FBcEI7RUFDQSxDQVZEOztFQVlBOUIsd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DMkIsTUFBbkMsR0FBNEMsVUFBVWMsS0FBVixFQUF5QjtJQUNwRSxJQUFJZixPQUFKLEVBQWE7TUFDWkEsT0FBTyxDQUFDWixLQUFSLENBQWMsSUFBZCxFQUFvQjdOLEtBQUssQ0FBQzhOLElBQU4sQ0FBV0MsU0FBWCxDQUFwQjtJQUNBOztJQUVELElBQUksQ0FBQyxLQUFLQyxjQUFWLEVBQTBCO01BQ3pCLEtBQUtBLGNBQUwsR0FBc0IsSUFBSVQsMERBQUosRUFBdEI7SUFDQTs7SUFFRCxLQUFLUyxjQUFMLENBQW9CVSxNQUFwQixDQUEyQmMsS0FBM0I7RUFDQSxDQVZEOztFQVlBL0Isd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DNkIsS0FBbkMsR0FBMkMsVUFBVXJQLENBQVYsRUFBcUJDLENBQXJCLEVBQWdDO0lBQzFFLElBQUltUCxNQUFKLEVBQVk7TUFDWEEsTUFBTSxDQUFDZCxLQUFQLENBQWEsSUFBYixFQUFtQjdOLEtBQUssQ0FBQzhOLElBQU4sQ0FBV0MsU0FBWCxDQUFuQjtJQUNBOztJQUVELElBQUksQ0FBQyxLQUFLQyxjQUFWLEVBQTBCO01BQ3pCLEtBQUtBLGNBQUwsR0FBc0IsSUFBSVQsMERBQUosRUFBdEI7SUFDQTs7SUFFRCxLQUFLUyxjQUFMLENBQW9CWSxLQUFwQixDQUEwQnJQLENBQTFCLEVBQTZCQyxDQUE3QjtFQUNBLENBVkQ7O0VBWUFpTyx3QkFBd0IsQ0FBQ1YsU0FBekIsQ0FBbUMrQixZQUFuQyxHQUFrRCxVQUFVWixDQUFWLEVBQXdDQyxDQUF4QyxFQUFvREMsQ0FBcEQsRUFBZ0VDLENBQWhFLEVBQTRFeEgsQ0FBNUUsRUFBd0Z5SCxDQUF4RixFQUFvRztJQUNySixJQUFJTyxhQUFKLEVBQW1CO01BQ2xCQSxhQUFhLENBQUNoQixLQUFkLENBQW9CLElBQXBCLEVBQTBCN04sS0FBSyxDQUFDOE4sSUFBTixDQUFXQyxTQUFYLENBQTFCO0lBQ0E7O0lBRUQsSUFBSUksQ0FBSixFQUFPO01BQ05ELENBQUMsR0FBV0EsQ0FBWjtJQUNBLENBRkQsTUFHSztNQUNKLElBQU11QixTQUFTLEdBQW9CdkIsQ0FBbkM7TUFFQUEsQ0FBQyxHQUFHdUIsU0FBUyxDQUFDdkIsQ0FBZDtNQUNBQyxDQUFDLEdBQUdzQixTQUFTLENBQUN0QixDQUFkO01BQ0FDLENBQUMsR0FBR3FCLFNBQVMsQ0FBQ3JCLENBQWQ7TUFDQUMsQ0FBQyxHQUFHb0IsU0FBUyxDQUFDcEIsQ0FBZDtNQUNBeEgsQ0FBQyxHQUFHNEksU0FBUyxDQUFDNUksQ0FBZDtNQUNBeUgsQ0FBQyxHQUFHbUIsU0FBUyxDQUFDbkIsQ0FBZDtJQUNBOztJQUVELElBQUksQ0FBQyxLQUFLTixjQUFWLEVBQTBCO01BQ3pCLEtBQUtBLGNBQUwsR0FBc0IsSUFBSVQsMERBQUosRUFBdEI7SUFDQTs7SUFFRCxLQUFLUyxjQUFMLENBQW9CQyxTQUFwQixDQUE4QkMsQ0FBOUIsRUFBaUNDLENBQWpDLEVBQW9DQyxDQUFwQyxFQUF1Q0MsQ0FBdkMsRUFBMEN4SCxDQUExQyxFQUE2Q3lILENBQTdDO0VBQ0EsQ0F4QkQ7O0VBMEJBYix3QkFBd0IsQ0FBQ1YsU0FBekIsQ0FBbUNpQyxTQUFuQyxHQUErQyxVQUFVZCxDQUFWLEVBQXFCQyxDQUFyQixFQUFnQ0MsQ0FBaEMsRUFBMkNDLENBQTNDLEVBQXNEeEgsQ0FBdEQsRUFBaUV5SCxDQUFqRSxFQUE0RTtJQUMxSCxJQUFJUyxVQUFKLEVBQWdCO01BQ2ZBLFVBQVUsQ0FBQ2xCLEtBQVgsQ0FBaUIsSUFBakIsRUFBdUI3TixLQUFLLENBQUM4TixJQUFOLENBQVdDLFNBQVgsQ0FBdkI7SUFDQTs7SUFFRCxJQUFJLENBQUMsS0FBS0MsY0FBVixFQUEwQjtNQUN6QixLQUFLQSxjQUFMLEdBQXNCLElBQUlULDBEQUFKLEVBQXRCO0lBQ0E7O0lBRUQsS0FBS1MsY0FBTCxDQUFvQjBCLFFBQXBCLENBQTZCLElBQUluQywwREFBSixDQUFjLENBQUNXLENBQUQsRUFBSUMsQ0FBSixFQUFPQyxDQUFQLEVBQVVDLENBQVYsRUFBYXhILENBQWIsRUFBZ0J5SCxDQUFoQixDQUFkLENBQTdCO0VBQ0EsQ0FWRDs7RUFZQWIsd0JBQXdCLENBQUNWLFNBQXpCLENBQW1DbUMsU0FBbkMsR0FBK0MsVUFBVTNQLENBQVYsRUFBcUJDLENBQXJCLEVBQWdDO0lBQzlFLElBQUl5UCxVQUFKLEVBQWdCO01BQ2ZBLFVBQVUsQ0FBQ3BCLEtBQVgsQ0FBaUIsSUFBakIsRUFBdUI3TixLQUFLLENBQUM4TixJQUFOLENBQVdDLFNBQVgsQ0FBdkI7SUFDQTs7SUFFRCxJQUFJLENBQUMsS0FBS0MsY0FBVixFQUEwQjtNQUN6QixLQUFLQSxjQUFMLEdBQXNCLElBQUlULDBEQUFKLEVBQXRCO0lBQ0E7O0lBRUQsS0FBS1MsY0FBTCxDQUFvQmtCLFNBQXBCLENBQThCM1AsQ0FBOUIsRUFBaUNDLENBQWpDO0VBQ0EsQ0FWRDs7RUFZQWlPLHdCQUF3QixDQUFDVixTQUF6QixDQUFtQ3FDLElBQW5DLEdBQTBDLFlBQVk7SUFDckQsSUFBSUQsS0FBSixFQUFXO01BQ1ZBLEtBQUssQ0FBQ3RCLEtBQU4sQ0FBWSxJQUFaLEVBQWtCN04sS0FBSyxDQUFDOE4sSUFBTixDQUFXQyxTQUFYLENBQWxCO0lBQ0E7O0lBRUQsSUFBSSxDQUFDLEtBQUs0QixvQkFBVixFQUFnQztNQUMvQixLQUFLQSxvQkFBTCxHQUE0QixFQUE1QjtJQUNBOztJQUNELElBQUksQ0FBQyxLQUFLM0IsY0FBVixFQUEwQjtNQUN6QixLQUFLQSxjQUFMLEdBQXNCLElBQUlULDBEQUFKLEVBQXRCO0lBQ0E7O0lBRUQsS0FBS29DLG9CQUFMLENBQTBCelAsSUFBMUIsQ0FBK0IsS0FBSzhOLGNBQUwsQ0FBb0JuWCxLQUFwQixFQUEvQjtFQUNBLENBYkQ7O0VBZUE0Vyx3QkFBd0IsQ0FBQ1YsU0FBekIsQ0FBbUN1QyxPQUFuQyxHQUE2QyxZQUFZO0lBQ3hELElBQUlELFFBQUosRUFBYztNQUNiQSxRQUFRLENBQUN4QixLQUFULENBQWUsSUFBZixFQUFxQjdOLEtBQUssQ0FBQzhOLElBQU4sQ0FBV0MsU0FBWCxDQUFyQjtJQUNBOztJQUVELElBQUksQ0FBQyxLQUFLNEIsb0JBQVYsRUFBZ0M7TUFDL0IsS0FBS0Esb0JBQUwsR0FBNEIsRUFBNUI7SUFDQTs7SUFFRCxLQUFLM0IsY0FBTCxHQUFzQixLQUFLMkIsb0JBQUwsQ0FBMEJDLEdBQTFCLEVBQXRCOztJQUVBLElBQUksQ0FBQyxLQUFLNUIsY0FBVixFQUEwQjtNQUN6QixLQUFLQSxjQUFMLEdBQXNCLElBQUlULDBEQUFKLEVBQXRCO0lBQ0E7RUFDRCxDQWREO0FBZUE7Ozs7Ozs7Ozs7Ozs7O0FDOUpELElBQU1zQyxRQUFRLEdBQUc7RUFDaEJDLGlCQUFpQixFQUFFLENBREg7RUFFaEI1RyxpQkFBaUIsRUFBRSxDQUZIO0VBR2hCNkcsaUJBQWlCLEVBQUUsQ0FISDtFQUloQkMsY0FBYyxFQUFFLENBSkE7RUFLaEJDLGdCQUFnQixFQUFFLENBTEY7RUFNaEJDLGVBQWUsRUFBRTtBQU5ELENBQWpCO0FBU0EsSUFBTUMsTUFBTSxHQUFHLENBQ2QseUJBRGMsRUFFZCx5QkFGYyxFQUdkLHlCQUhjLEVBSWQsc0JBSmMsRUFLZCx3QkFMYyxFQU1kLHVCQU5jLENBQWY7QUFTQSxJQUFNQyxHQUFHLEdBQUcsQ0FDWCxzQkFEVyxFQUVYLHNCQUZXLEVBR1gsc0JBSFcsRUFJWCxxQkFKVyxFQUtYLHFCQUxXLEVBTVgsb0JBTlcsQ0FBWjtBQVNBLElBQU1DLEVBQUUsR0FBRyxDQUNWLHFCQURVLEVBRVYscUJBRlUsRUFHVixxQkFIVSxFQUlWLGtCQUpVLEVBS1Ysb0JBTFUsRUFNVixtQkFOVSxDQUFYO0FBU0EsSUFBTUMsSUFBSSxHQUFHbEQsTUFBTSxDQUFDbUQsSUFBUCxDQUFZVixRQUFaLENBQWI7QUFDQSxJQUFJVyxNQUFnQixHQUFHLElBQXZCOztBQUVBLHdCQUFjLENBQUNGLElBQUQsRUFBT0gsTUFBUCxFQUFlQyxHQUFmLEVBQW9CQyxFQUFwQixDQUFkLDBCQUF1QztFQUFsQyxJQUFJSSxDQUFDLFdBQUw7O0VBQ0osSUFBSUEsQ0FBQyxDQUFDWixRQUFRLENBQUNDLGlCQUFWLENBQUQsSUFBaUM1WixRQUFyQyxFQUErQztJQUM5Q3NhLE1BQU0sR0FBR0MsQ0FBVDtJQUNBO0VBQ0E7QUFDRDs7QUFFRCxJQUFJRCxNQUFKLEVBQVk7RUFDWCxJQUFJRSxLQUFVLEdBQUdDLE9BQU8sQ0FBQzVELFNBQXpCO0VBQ0EyRCxLQUFLLENBQUNYLGlCQUFOLEdBQTBCVyxLQUFLLENBQUNGLE1BQU0sQ0FBQ1gsUUFBUSxDQUFDRSxpQkFBVixDQUFQLENBQS9CO0VBRUFXLEtBQUssR0FBR0UsUUFBUSxDQUFDN0QsU0FBakI7RUFDQTJELEtBQUssQ0FBQ1YsY0FBTixHQUF1QlUsS0FBSyxDQUFDRixNQUFNLENBQUNYLFFBQVEsQ0FBQ0csY0FBVixDQUFQLENBQTVCO0VBRUEsSUFBTTlHLGlCQUFpQixHQUFHb0gsSUFBSSxDQUFDVCxRQUFRLENBQUMzRyxpQkFBVixDQUE5QjtFQUNBLElBQU00RyxpQkFBaUIsR0FBR1EsSUFBSSxDQUFDVCxRQUFRLENBQUNDLGlCQUFWLENBQTlCOztFQUVBLElBQUksRUFBRTVHLGlCQUFpQixJQUFJaFQsUUFBdkIsQ0FBSixFQUFzQztJQUNyQ2tYLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQm5YLFFBQXRCLEVBQWdDZ1QsaUJBQWhDLEVBQW1EO01BQ2xEMkgsR0FBRyxFQUFFLGVBQVk7UUFDaEIsT0FBUTNhLFFBQUQsQ0FBa0JzYSxNQUFNLENBQUNYLFFBQVEsQ0FBQzNHLGlCQUFWLENBQXhCLENBQVA7TUFDQTtJQUhpRCxDQUFuRDtJQUtBa0UsTUFBTSxDQUFDQyxjQUFQLENBQXNCblgsUUFBdEIsRUFBZ0M0WixpQkFBaEMsRUFBbUQ7TUFDbERlLEdBQUcsRUFBRSxlQUFZO1FBQ2hCLE9BQVEzYSxRQUFELENBQWtCc2EsTUFBTSxDQUFDWCxRQUFRLENBQUNDLGlCQUFWLENBQXhCLENBQVA7TUFDQTtJQUhpRCxDQUFuRDtFQUtBOztFQUVELElBQUlRLElBQUksS0FBS0UsTUFBYixFQUFxQjtJQUNwQixJQUFNTSxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLENBQUNoRixLQUFELEVBQWtCO01BQ3ZDLElBQUl4TixVQUFVLEdBQUd3TixLQUFLLENBQUM1USxJQUFOLENBQVc2VixPQUFYLENBQW1CLGtCQUFuQixFQUF1QyxFQUF2QyxFQUEyQ0MsV0FBM0MsRUFBakI7TUFDQSxJQUFJQyxRQUFKOztNQUVBLElBQUksT0FBUUMsS0FBUixLQUFtQixVQUF2QixFQUFtQztRQUNsQ0QsUUFBUSxHQUFHLElBQUlDLEtBQUosQ0FBVTVTLFVBQVYsRUFBc0J3TixLQUF0QixDQUFYO01BQ0EsQ0FGRCxNQUdLO1FBQ0ptRixRQUFRLEdBQUcvYSxRQUFRLENBQUNpYixXQUFULENBQXFCLE9BQXJCLENBQVg7UUFDQUYsUUFBUSxDQUFDRyxTQUFULENBQW1COVMsVUFBbkIsRUFBK0J3TixLQUFLLENBQUN1RixPQUFyQyxFQUE4Q3ZGLEtBQUssQ0FBQ3dGLFVBQXBEO01BQ0E7O01BRUR4RixLQUFLLENBQUN5RixNQUFOLENBQWFDLGFBQWIsQ0FBMkJQLFFBQTNCO0lBQ0EsQ0FiRDs7SUFlQS9hLFFBQVEsQ0FBQytTLGdCQUFULENBQTBCdUgsTUFBTSxDQUFDWCxRQUFRLENBQUNJLGdCQUFWLENBQWhDLEVBQTZEYSxhQUE3RDtJQUNBNWEsUUFBUSxDQUFDK1MsZ0JBQVQsQ0FBMEJ1SCxNQUFNLENBQUNYLFFBQVEsQ0FBQ0ssZUFBVixDQUFoQyxFQUE0RFksYUFBNUQ7RUFDQTtBQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4RkQ7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FDTUFsUCxNQUFNLENBQUM2UCxNQUFQLEdBQWdCLFVBQVVDLEdBQVYsRUFBc0M7RUFBQSxrQ0FBWkMsR0FBWTtJQUFaQSxHQUFZO0VBQUE7O0VBQ3JELElBQUkxUixDQUFDLEdBQUcsQ0FBQyxDQUFUOztFQUVBLFNBQVMyUixRQUFULENBQWtCQyxHQUFsQixFQUE0QkMsRUFBNUIsRUFBcUNDLEVBQXJDLEVBQThDQyxFQUE5QyxFQUF1REMsRUFBdkQsRUFBZ0VDLEVBQWhFLEVBQXlFO0lBQ3hFLElBQUlMLEdBQUcsSUFBSSxJQUFYLEVBQWlCLE9BQU8sR0FBUDtJQUNqQixJQUFJRixHQUFHLENBQUMsRUFBRTFSLENBQUgsQ0FBSCxLQUFha1MsU0FBakIsRUFBNEIsT0FBT0EsU0FBUDtJQUU1Qk4sR0FBRyxHQUFHRyxFQUFFLEdBQUdJLFFBQVEsQ0FBQ0osRUFBRSxDQUFDbkgsTUFBSCxDQUFVLENBQVYsQ0FBRCxDQUFYLEdBQTRCc0gsU0FBcEM7SUFFQSxJQUFJRSxJQUFJLEdBQUdKLEVBQUUsR0FBR0csUUFBUSxDQUFDSCxFQUFFLENBQUNwSCxNQUFILENBQVUsQ0FBVixDQUFELENBQVgsR0FBNEJzSCxTQUF6QztJQUNBLElBQUl6USxHQUFKOztJQUVBLFFBQVF3USxFQUFSO01BQ0MsS0FBSyxHQUFMO1FBQVV4USxHQUFHLEdBQUdpUSxHQUFHLENBQUMxUixDQUFELENBQVQ7UUFBYzs7TUFDeEIsS0FBSyxHQUFMO1FBQVV5QixHQUFHLEdBQUdpUSxHQUFHLENBQUMxUixDQUFELENBQUgsQ0FBTyxDQUFQLENBQU47UUFBaUI7O01BQzNCLEtBQUssR0FBTDtRQUFVeUIsR0FBRyxHQUFHb0gsVUFBVSxDQUFDNkksR0FBRyxDQUFDMVIsQ0FBRCxDQUFKLENBQVYsQ0FBbUJxUyxPQUFuQixDQUEyQlQsR0FBM0IsQ0FBTjtRQUF1Qzs7TUFDakQsS0FBSyxHQUFMO1FBQVVuUSxHQUFHLEdBQUdvSCxVQUFVLENBQUM2SSxHQUFHLENBQUMxUixDQUFELENBQUosQ0FBVixDQUFtQnNTLFdBQW5CLENBQStCVixHQUEvQixDQUFOO1FBQTJDOztNQUNyRCxLQUFLLEdBQUw7UUFBVW5RLEdBQUcsR0FBR29ILFVBQVUsQ0FBQzZJLEdBQUcsQ0FBQzFSLENBQUQsQ0FBSixDQUFWLENBQW1CdVMsYUFBbkIsQ0FBaUNYLEdBQWpDLENBQU47UUFBNkM7O01BQ3ZELEtBQUssR0FBTDtRQUFVblEsR0FBRyxHQUFHMFEsUUFBUSxDQUFDVCxHQUFHLENBQUMxUixDQUFELENBQUosQ0FBUixDQUFpQmEsUUFBakIsQ0FBMEJ1UixJQUFJLEdBQUdBLElBQUgsR0FBVSxFQUF4QyxDQUFOO1FBQW1EOztNQUM3RCxLQUFLLEdBQUw7UUFBVTNRLEdBQUcsR0FBR29ILFVBQVUsQ0FBQ3NKLFFBQVEsQ0FBQ1QsR0FBRyxDQUFDMVIsQ0FBRCxDQUFKLEVBQVNvUyxJQUFJLEdBQUdBLElBQUgsR0FBVSxFQUF2QixDQUFSLENBQW1DRSxXQUFuQyxDQUErQ1YsR0FBL0MsQ0FBRCxDQUFWLENBQWdFUyxPQUFoRSxDQUF3RSxDQUF4RSxDQUFOO1FBQWtGO0lBUDdGOztJQVVBNVEsR0FBRyxHQUFHLDhFQUFRQSxHQUFSLEtBQWdCLFFBQWhCLEdBQTJCK1EsSUFBSSxDQUFDQyxTQUFMLENBQWVoUixHQUFmLENBQTNCLEdBQWlEQSxHQUFHLENBQUNaLFFBQUosQ0FBYXVSLElBQWIsQ0FBdkQ7SUFDQSxJQUFJTSxFQUFFLEdBQUdQLFFBQVEsQ0FBQ0wsRUFBRCxDQUFqQjtJQUF1Qjs7SUFDdkIsSUFBSWEsRUFBRSxHQUFHYixFQUFFLElBQUlBLEVBQUUsQ0FBQyxDQUFELENBQUYsSUFBUyxHQUFmLEdBQXFCLEdBQXJCLEdBQTJCLEdBQXBDO0lBQXlDOztJQUV6QyxPQUFPclEsR0FBRyxDQUFDdkcsTUFBSixHQUFhd1gsRUFBcEI7TUFBd0JqUixHQUFHLEdBQUdvUSxFQUFFLEtBQUtLLFNBQVAsR0FBbUJ6USxHQUFHLEdBQUdrUixFQUF6QixHQUE4QkEsRUFBRSxHQUFHbFIsR0FBekM7SUFBeEI7SUFBc0U7OztJQUV0RSxPQUFPQSxHQUFQO0VBQ0E7O0VBRUQsSUFBSW1SLEtBQUssR0FBRyx1REFBWjtFQUVBLE9BQU9uQixHQUFHLENBQUNYLE9BQUosQ0FBWThCLEtBQVosRUFBbUJqQixRQUFuQixDQUFQO0FBQ0EsQ0FsQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1JBO0FBQ0E7QUFDQTtJQUNNa0I7RUFFTDs7RUFHQTs7RUFJQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDQyxtQkFBWUMsS0FBWixFQUEyQkMsTUFBM0IsRUFBMkM7SUFBQTs7SUFBQTs7SUFBQTs7SUFDMUMsS0FBS0QsS0FBTCxHQUFhQSxLQUFiO0lBQ0EsS0FBS0MsTUFBTCxHQUFjQSxNQUFkO0VBQ0E7RUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7V0FDQyxnQkFBTzlGLEtBQVAsRUFBa0M7TUFDakMsSUFBSSxDQUFDQSxLQUFMLEVBQVk7UUFDWCxPQUFPLEtBQVA7TUFDQTs7TUFFRCxPQUFPLEtBQUs2RixLQUFMLEtBQWU3RixLQUFLLENBQUM4RixNQUFyQixJQUErQixLQUFLQSxNQUFMLEtBQWdCOUYsS0FBSyxDQUFDOEYsTUFBNUQ7SUFDQTtJQUVEO0FBQ0Q7QUFDQTs7OztXQUNDLG9CQUFtQjtNQUNsQixrQkFBVyxLQUFLQSxNQUFoQixlQUEyQixLQUFLRCxLQUFoQztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDM0NJRTtFQUVMOztFQUdBOztFQUdBOztFQUdBOztFQUdBOztFQUdBOztFQUdBOztFQUdBOztFQUlBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDQyxpQkFBWTFULENBQVosRUFBdUJDLENBQXZCLEVBQWtDdVQsS0FBbEMsRUFBaURDLE1BQWpELEVBQWlFO0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQ2hFLEtBQUt6VCxDQUFMLEdBQVNBLENBQVQ7SUFDQSxLQUFLQyxDQUFMLEdBQVNBLENBQVQ7SUFDQSxLQUFLdVQsS0FBTCxHQUFhQSxLQUFiO0lBQ0EsS0FBS0MsTUFBTCxHQUFjQSxNQUFkO0lBQ0EsS0FBS0UsT0FBTCxHQUFlSCxLQUFLLEdBQUcsR0FBdkI7SUFDQSxLQUFLSSxPQUFMLEdBQWVILE1BQU0sR0FBRyxHQUF4QjtJQUNBLEtBQUtJLE9BQUwsR0FBZTdULENBQUMsR0FBRyxLQUFLMlQsT0FBeEI7SUFDQSxLQUFLRyxPQUFMLEdBQWU3VCxDQUFDLEdBQUcsS0FBSzJULE9BQXhCO0VBQ0E7RUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O1dBQ0MsdUJBQWM1VCxDQUFkLEVBQXlCQyxDQUF6QixFQUE2QztNQUM1QyxJQUFNQyxDQUFDLEdBQUcsS0FBS3NULEtBQWY7O01BQ0EsSUFBSXRULENBQUMsSUFBSSxHQUFULEVBQWM7UUFDYixPQUFPLEtBQVA7TUFDQTs7TUFFRCxJQUFNQyxDQUFDLEdBQUcsS0FBS3NULE1BQWY7O01BQ0EsSUFBSXRULENBQUMsSUFBSSxHQUFULEVBQWM7UUFDYixPQUFPLEtBQVA7TUFDQTs7TUFFRCxJQUFNNFQsS0FBSyxHQUFHLENBQUMvVCxDQUFDLEdBQUcsS0FBS0EsQ0FBVixJQUFlRSxDQUFmLEdBQW1CLEdBQWpDO01BQ0EsSUFBTThULEtBQUssR0FBRyxDQUFDL1QsQ0FBQyxHQUFHLEtBQUtBLENBQVYsSUFBZUUsQ0FBZixHQUFtQixHQUFqQztNQUVBLE9BQVE0VCxLQUFLLEdBQUdBLEtBQVIsR0FBZ0JDLEtBQUssR0FBR0EsS0FBekIsR0FBa0MsSUFBekM7SUFDQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxzQkFBYWhVLENBQWIsRUFBd0JDLENBQXhCLEVBQW1DdVQsS0FBbkMsRUFBa0RDLE1BQWxELEVBQTJFO01BQzFFLE9BQVEsS0FBS1EsYUFBTCxDQUFtQmpVLENBQW5CLEVBQXNCQyxDQUF0QixLQUNQLEtBQUtnVSxhQUFMLENBQW1CalUsQ0FBQyxHQUFHd1QsS0FBdkIsRUFBOEJ2VCxDQUE5QixDQURPLElBRVAsS0FBS2dVLGFBQUwsQ0FBbUJqVSxDQUFuQixFQUFzQkMsQ0FBQyxHQUFHd1QsTUFBMUIsQ0FGTyxJQUdQLEtBQUtRLGFBQUwsQ0FBbUJqVSxDQUFDLEdBQUd3VCxLQUF2QixFQUE4QnZULENBQUMsR0FBR3dULE1BQWxDLENBSEQ7SUFJQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyx3QkFBZXpULENBQWYsRUFBMEJDLENBQTFCLEVBQXFDdVQsS0FBckMsRUFBb0RDLE1BQXBELEVBQTZFO01BQzVFLElBQUlELEtBQUssSUFBSSxHQUFULElBQWdCQyxNQUFNLElBQUksR0FBOUIsRUFBbUM7UUFDbEMsT0FBTyxLQUFQO01BQ0E7O01BQ0QsSUFBSSxLQUFLRCxLQUFMLElBQWMsR0FBZCxJQUFxQixLQUFLQyxNQUFMLElBQWUsR0FBeEMsRUFBNkM7UUFDNUMsT0FBTyxLQUFQO01BQ0EsQ0FOMkUsQ0FRNUU7OztNQUNBLElBQUksS0FBS0ksT0FBTCxJQUFnQjdULENBQWhCLElBQXFCLEtBQUs4VCxPQUFMLElBQWdCN1QsQ0FBckMsSUFBMEMsS0FBSzRULE9BQUwsSUFBZ0I3VCxDQUFDLEdBQUd3VCxLQUE5RCxJQUF1RSxLQUFLTSxPQUFMLElBQWdCN1QsQ0FBQyxHQUFHd1QsTUFBL0YsRUFBdUc7UUFDdEcsT0FBTyxJQUFQO01BQ0E7O01BRUQsT0FBTyxLQUFLUyxjQUFMLENBQW9CbFUsQ0FBcEIsRUFBdUJDLENBQXZCLEVBQTBCRCxDQUFDLEdBQUd3VCxLQUE5QixFQUFxQ3ZULENBQXJDLEtBQ04sS0FBS2lVLGNBQUwsQ0FBb0JsVSxDQUFwQixFQUF1QkMsQ0FBQyxHQUFHd1QsTUFBM0IsRUFBbUN6VCxDQUFDLEdBQUd3VCxLQUF2QyxFQUE4Q3ZULENBQUMsR0FBR3dULE1BQWxELENBRE0sSUFFTixLQUFLUyxjQUFMLENBQW9CbFUsQ0FBcEIsRUFBdUJDLENBQXZCLEVBQTBCRCxDQUExQixFQUE2QkMsQ0FBQyxHQUFHd1QsTUFBakMsQ0FGTSxJQUdOLEtBQUtTLGNBQUwsQ0FBb0JsVSxDQUFDLEdBQUd3VCxLQUF4QixFQUErQnZULENBQS9CLEVBQWtDRCxDQUFDLEdBQUd3VCxLQUF0QyxFQUE2Q3ZULENBQUMsR0FBR3dULE1BQWpELENBSEQ7SUFJQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyx3QkFBZVUsRUFBZixFQUEyQkMsRUFBM0IsRUFBdUNDLEVBQXZDLEVBQW1EQyxFQUFuRCxFQUF3RTtNQUN2RSxJQUFJLEtBQUtkLEtBQUwsSUFBYyxHQUFkLElBQXFCLEtBQUtDLE1BQUwsSUFBZSxHQUF4QyxFQUE2QztRQUM1QyxPQUFPLEtBQVA7TUFDQTs7TUFFRFUsRUFBRSxJQUFJLEtBQUtOLE9BQVg7TUFDQVEsRUFBRSxJQUFJLEtBQUtSLE9BQVg7TUFDQU8sRUFBRSxJQUFJLEtBQUtOLE9BQVg7TUFDQVEsRUFBRSxJQUFJLEtBQUtSLE9BQVg7TUFFQSxJQUFNUyxJQUFJLEdBQUcsS0FBS1osT0FBTCxHQUFlLEtBQUtBLE9BQWpDO01BQ0EsSUFBTWEsSUFBSSxHQUFHLEtBQUtaLE9BQUwsR0FBZSxLQUFLQSxPQUFqQztNQUVBLElBQU1hLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxHQUFMLENBQVNOLEVBQUUsR0FBR0YsRUFBZCxFQUFrQixDQUFsQixJQUF1QkksSUFBdkIsR0FBOEJHLElBQUksQ0FBQ0MsR0FBTCxDQUFTTCxFQUFFLEdBQUdGLEVBQWQsRUFBa0IsQ0FBbEIsSUFBdUJJLElBQS9EO01BQ0EsSUFBTUksQ0FBQyxHQUFHLElBQUlULEVBQUosSUFBVUUsRUFBRSxHQUFHRixFQUFmLElBQXFCSSxJQUFyQixHQUE0QixJQUFJSCxFQUFKLElBQVVFLEVBQUUsR0FBR0YsRUFBZixJQUFxQkksSUFBM0Q7TUFDQSxJQUFNSyxDQUFDLEdBQUdWLEVBQUUsR0FBR0EsRUFBTCxHQUFVSSxJQUFWLEdBQWlCSCxFQUFFLEdBQUdBLEVBQUwsR0FBVUksSUFBM0IsR0FBa0MsQ0FBNUM7TUFDQSxJQUFNTSxDQUFDLEdBQUdGLENBQUMsR0FBR0EsQ0FBSixHQUFRLElBQUlILENBQUosR0FBUUksQ0FBMUI7O01BRUEsSUFBSUMsQ0FBQyxLQUFLLENBQVYsRUFBYTtRQUNaLElBQU1DLENBQUMsR0FBRyxDQUFDSCxDQUFELEdBQUssQ0FBTCxHQUFTSCxDQUFuQjtRQUVBLE9BQU9NLENBQUMsSUFBSSxDQUFMLElBQVVBLENBQUMsSUFBSSxDQUF0QjtNQUNBLENBSkQsTUFLSyxJQUFJRCxDQUFDLEdBQUcsQ0FBUixFQUFXO1FBQ2YsSUFBTUUsSUFBSSxHQUFHTixJQUFJLENBQUNNLElBQUwsQ0FBVUYsQ0FBVixDQUFiO1FBQ0EsSUFBTUcsRUFBRSxHQUFHLENBQUMsQ0FBQ0wsQ0FBRCxHQUFLSSxJQUFOLElBQWMsQ0FBZCxHQUFrQlAsQ0FBN0I7UUFDQSxJQUFNUyxFQUFFLEdBQUcsQ0FBQyxDQUFDTixDQUFELEdBQUtJLElBQU4sSUFBYyxDQUFkLEdBQWtCUCxDQUE3QjtRQUVBLE9BQVFRLEVBQUUsSUFBSSxDQUFOLElBQVdBLEVBQUUsSUFBSSxDQUFsQixJQUF5QkMsRUFBRSxJQUFJLENBQU4sSUFBV0EsRUFBRSxJQUFJLENBQWpEO01BQ0E7O01BRUQsT0FBTyxLQUFQO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuS0Y7O0lBRU1DO0VBRUw7O0VBR0E7O0VBR0E7O0VBR0E7O0VBSUE7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNDLGNBQVloQixFQUFaLEVBQXdCQyxFQUF4QixFQUFvQ0MsRUFBcEMsRUFBZ0RDLEVBQWhELEVBQTREO0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQzNELEtBQUs1UyxHQUFMLENBQVN5UyxFQUFULEVBQWFDLEVBQWIsRUFBaUJDLEVBQWpCLEVBQXFCQyxFQUFyQjtFQUNBO0VBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztXQUNDLGFBQUlILEVBQUosRUFBZ0JDLEVBQWhCLEVBQTRCQyxFQUE1QixFQUF3Q0MsRUFBeEMsRUFBMEQ7TUFDekQsS0FBS0gsRUFBTCxHQUFVQSxFQUFWO01BQ0EsS0FBS0MsRUFBTCxHQUFVQSxFQUFWO01BQ0EsS0FBS0MsRUFBTCxHQUFVQSxFQUFWO01BQ0EsS0FBS0MsRUFBTCxHQUFVQSxFQUFWO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0MseUJBQXVCO01BQ3RCLE9BQU8sSUFBSWpaLHlDQUFKLENBQVUsS0FBSzhZLEVBQWYsRUFBbUIsS0FBS0MsRUFBeEIsQ0FBUDtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7OztXQUNDLHVCQUFxQjtNQUNwQixPQUFPLElBQUkvWSx5Q0FBSixDQUFVLEtBQUtnWixFQUFmLEVBQW1CLEtBQUtDLEVBQXhCLENBQVA7SUFDQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxrQkFBU3RVLENBQVQsRUFBb0JDLENBQXBCLEVBQXVDO01BQ3RDLElBQU1tVixFQUFFLEdBQUcsS0FBS2YsRUFBTCxHQUFVLEtBQUtGLEVBQTFCO01BQ0EsSUFBTWtCLEVBQUUsR0FBRyxLQUFLZixFQUFMLEdBQVUsS0FBS0YsRUFBMUI7TUFDQSxJQUFNeFksTUFBTSxHQUFHOFksSUFBSSxDQUFDTSxJQUFMLENBQVVJLEVBQUUsR0FBR0EsRUFBTCxHQUFVQyxFQUFFLEdBQUdBLEVBQXpCLENBQWY7TUFFQSxPQUFPWCxJQUFJLENBQUNZLEdBQUwsQ0FBUyxDQUFDLENBQUMsS0FBS2xCLEVBQUwsR0FBVSxLQUFLRSxFQUFoQixJQUFzQnRVLENBQXRCLEdBQTBCb1YsRUFBRSxHQUFHblYsQ0FBL0IsSUFBb0MsS0FBS2tVLEVBQUwsR0FBVSxLQUFLRyxFQUFmLEdBQW9CLEtBQUtELEVBQUwsR0FBVSxLQUFLRCxFQUF2RSxDQUFELElBQStFeFksTUFBeEYsQ0FBUDtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxvQkFBVzJaLElBQVgsRUFBZ0M7TUFDL0IsT0FBT0osSUFBSSxDQUFDSyxVQUFMLENBQWdCLEtBQUtyQixFQUFyQixFQUF5QixLQUFLQyxFQUE5QixFQUFrQyxLQUFLQyxFQUF2QyxFQUEyQyxLQUFLQyxFQUFoRCxFQUFvRGlCLElBQUksQ0FBQ3BCLEVBQXpELEVBQTZEb0IsSUFBSSxDQUFDbkIsRUFBbEUsRUFBc0VtQixJQUFJLENBQUNsQixFQUEzRSxFQUErRWtCLElBQUksQ0FBQ2pCLEVBQXBGLENBQVA7SUFDQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNDLDhCQUFxQm1CLEVBQXJCLEVBQWlDQyxFQUFqQyxFQUE2Q0MsRUFBN0MsRUFBeURDLEVBQXpELEVBQTRFO01BQzNFLElBQU05RyxDQUFDLEdBQUcsQ0FBQzhHLEVBQUUsR0FBR0YsRUFBTixLQUFhLEtBQUtyQixFQUFMLEdBQVUsS0FBS0YsRUFBNUIsSUFBa0MsQ0FBQ3dCLEVBQUUsR0FBR0YsRUFBTixLQUFhLEtBQUtuQixFQUFMLEdBQVUsS0FBS0YsRUFBNUIsQ0FBNUMsQ0FEMkUsQ0FHM0U7O01BQ0EsSUFBSU0sSUFBSSxDQUFDWSxHQUFMLENBQVN4RyxDQUFULElBQWMsSUFBbEIsRUFBd0I7UUFDdkIsT0FBTyxJQUFQO01BQ0EsQ0FOMEUsQ0FRM0U7OztNQUNBLElBQU1ILENBQUMsR0FBRyxDQUFDZ0gsRUFBRSxHQUFHRixFQUFOLEtBQWEsS0FBS3JCLEVBQUwsR0FBVXNCLEVBQXZCLElBQTZCLENBQUNFLEVBQUUsR0FBR0YsRUFBTixLQUFhLEtBQUt2QixFQUFMLEdBQVVzQixFQUF2QixDQUF2QztNQUNBLElBQU03RyxDQUFDLEdBQUcsQ0FBQyxLQUFLeUYsRUFBTCxHQUFVLEtBQUtGLEVBQWhCLEtBQXVCLEtBQUtDLEVBQUwsR0FBVXNCLEVBQWpDLElBQXVDLENBQUMsS0FBS3BCLEVBQUwsR0FBVSxLQUFLRixFQUFoQixLQUF1QixLQUFLRCxFQUFMLEdBQVVzQixFQUFqQyxDQUFqRDtNQUNBLElBQU1JLEVBQUUsR0FBR2xILENBQUMsR0FBR0csQ0FBZjtNQUNBLElBQU1nSCxFQUFFLEdBQUdsSCxDQUFDLEdBQUdFLENBQWYsQ0FaMkUsQ0FjM0U7O01BQ0EsSUFBSStHLEVBQUUsSUFBSSxHQUFOLElBQWFBLEVBQUUsSUFBSSxHQUFuQixJQUEwQkMsRUFBRSxJQUFJLEdBQWhDLElBQXVDQSxFQUFFLElBQUksR0FBakQsRUFBc0Q7UUFDckQsSUFBTUMsRUFBRSxHQUFHLEtBQUt6QixFQUFMLEdBQVUsS0FBS0YsRUFBMUI7UUFDQSxJQUFNNEIsRUFBRSxHQUFHLEtBQUs3QixFQUFMLEdBQVUsS0FBS0UsRUFBMUI7UUFDQSxJQUFNNEIsRUFBRSxHQUFHRixFQUFFLEdBQUcsS0FBSzVCLEVBQVYsR0FBZTZCLEVBQUUsR0FBRyxLQUFLNUIsRUFBcEM7UUFDQSxJQUFNOEIsRUFBRSxHQUFHTixFQUFFLEdBQUdGLEVBQWhCO1FBQ0EsSUFBTVMsRUFBRSxHQUFHVixFQUFFLEdBQUdFLEVBQWhCO1FBQ0EsSUFBTVMsRUFBRSxHQUFHRixFQUFFLEdBQUdULEVBQUwsR0FBVVUsRUFBRSxHQUFHVCxFQUExQjtRQUVBLE9BQU8sSUFBSXJhLHlDQUFKLENBQVUsQ0FBQzhhLEVBQUUsR0FBR0YsRUFBTCxHQUFVRCxFQUFFLEdBQUdJLEVBQWhCLElBQXNCdEgsQ0FBaEMsRUFBbUMsQ0FBQ2lILEVBQUUsR0FBR0ssRUFBTCxHQUFVRixFQUFFLEdBQUdELEVBQWhCLElBQXNCbkgsQ0FBekQsQ0FBUDtNQUNBOztNQUVELE9BQU8sSUFBUDtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0Msb0JBQWtCcUYsRUFBbEIsRUFBOEJDLEVBQTlCLEVBQTBDQyxFQUExQyxFQUFzREMsRUFBdEQsRUFBa0VtQixFQUFsRSxFQUE4RUMsRUFBOUUsRUFBMEZDLEVBQTFGLEVBQXNHQyxFQUF0RyxFQUEySDtNQUMxSCxJQUFNOUcsQ0FBQyxHQUFHLENBQUM4RyxFQUFFLEdBQUdGLEVBQU4sS0FBYXJCLEVBQUUsR0FBR0YsRUFBbEIsSUFBd0IsQ0FBQ3dCLEVBQUUsR0FBR0YsRUFBTixLQUFhbkIsRUFBRSxHQUFHRixFQUFsQixDQUFsQyxDQUQwSCxDQUcxSDs7TUFDQSxJQUFJdEYsQ0FBQyxJQUFJLENBQVQsRUFBWTtRQUNYLE9BQU8sS0FBUDtNQUNBLENBTnlILENBUTFIOzs7TUFDQSxJQUFNSCxDQUFDLEdBQUcsQ0FBQ2dILEVBQUUsR0FBR0YsRUFBTixLQUFhckIsRUFBRSxHQUFHc0IsRUFBbEIsSUFBd0IsQ0FBQ0UsRUFBRSxHQUFHRixFQUFOLEtBQWF2QixFQUFFLEdBQUdzQixFQUFsQixDQUFsQztNQUNBLElBQU03RyxDQUFDLEdBQUcsQ0FBQ3lGLEVBQUUsR0FBR0YsRUFBTixLQUFhQyxFQUFFLEdBQUdzQixFQUFsQixJQUF3QixDQUFDcEIsRUFBRSxHQUFHRixFQUFOLEtBQWFELEVBQUUsR0FBR3NCLEVBQWxCLENBQWxDO01BQ0EsSUFBTUksRUFBRSxHQUFHbEgsQ0FBQyxHQUFHRyxDQUFmO01BQ0EsSUFBTWdILEVBQUUsR0FBR2xILENBQUMsR0FBR0UsQ0FBZixDQVowSCxDQWMxSDs7TUFDQSxJQUFJK0csRUFBRSxJQUFJLEdBQU4sSUFBYUEsRUFBRSxJQUFJLEdBQW5CLElBQTBCQyxFQUFFLElBQUksR0FBaEMsSUFBdUNBLEVBQUUsSUFBSSxHQUFqRCxFQUFzRDtRQUNyRCxPQUFPLElBQVA7TUFDQTs7TUFFRCxPQUFPLEtBQVA7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuS0Y7O0lBRU03Zjs7Ozs7RUFFTDtFQUlBLGtCQUFZK0osQ0FBWixFQUF1QkMsQ0FBdkIsRUFBa0NvVyxDQUFsQyxFQUE2QztJQUFBOztJQUFBOztJQUM1QywwQkFBTXJXLENBQU4sRUFBU0MsQ0FBVDs7SUFENEM7O0lBRzVDLE1BQUtvVyxDQUFMLEdBQVNBLENBQVQ7SUFINEM7RUFJNUM7Ozs7V0FFRCxpQkFBa0I7TUFDakIsT0FBTyxJQUFJcGdCLFFBQUosQ0FBYSxLQUFLK0osQ0FBbEIsRUFBcUIsS0FBS0MsQ0FBMUIsRUFBNkIsS0FBS29XLENBQWxDLENBQVA7SUFDQTs7O1dBRUQsZ0JBQU8xSSxLQUFQLEVBQWlDO01BQ2hDLElBQUksQ0FBQ0EsS0FBTCxFQUFZO1FBQ1gsT0FBTyxLQUFQO01BQ0E7O01BQ0QsT0FBTyxLQUFLM04sQ0FBTCxLQUFXMk4sS0FBSyxDQUFDM04sQ0FBakIsSUFBc0IsS0FBS0MsQ0FBTCxLQUFXME4sS0FBSyxDQUFDMU4sQ0FBdkMsSUFBNEMsS0FBS29XLENBQUwsS0FBVzFJLEtBQUssQ0FBQzBJLENBQXBFO0lBQ0E7OztXQUVELHNCQUE4QjtNQUM3QixPQUFPLElBQUlwZ0IsUUFBSixDQUFhLENBQWIsRUFBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsQ0FBUDtJQUNBOzs7O0VBekJxQm9GOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0Z2QjtBQUNBO0FBQ0E7O0lBR01pYjtFQUVMOztFQVNBOztFQUdBOztFQUdBOztFQUdBO0VBSUEsbUJBQVlDLFdBQVosRUFBaUM7SUFBQTs7SUFBQSxzR0FyQlAsSUFBSWxiLHlDQUFKLENBQVUsQ0FBVixFQUFhLENBQWIsQ0FxQk87O0lBQUEsc0dBcEJQLElBQUlBLHlDQUFKLENBQVUsQ0FBVixFQUFhLENBQWIsQ0FvQk87O0lBQUEscUdBbkJSLElBQUlBLHlDQUFKLENBQVUsQ0FBVixFQUFhLENBQWIsQ0FtQlE7O0lBQUEsdUdBbEJOLElBQUlBLHlDQUFKLENBQVUsQ0FBVixFQUFhLENBQWIsQ0FrQk07O0lBQUEsdUdBakJOLElBQUlBLHlDQUFKLENBQVUsQ0FBVixFQUFhLENBQWIsQ0FpQk07O0lBQUEsMkdBaEJGLElBQUk4Wix1Q0FBSixDQUFTLENBQVQsRUFBWSxDQUFaLEVBQWUsQ0FBZixFQUFrQixDQUFsQixDQWdCRTs7SUFBQSw4R0FmQyxJQUFJQSx1Q0FBSixDQUFTLENBQVQsRUFBWSxDQUFaLEVBQWUsQ0FBZixFQUFrQixDQUFsQixDQWVEOztJQUFBLGlHQVpyQixJQUFJMVUsS0FBSixFQVlxQjs7SUFBQSxpR0FUckIsSUFBSUEsS0FBSixFQVNxQjs7SUFBQSxzR0FOaEIsSUFBSUEsS0FBSixFQU1nQjs7SUFBQTs7SUFDaEMsS0FBSzhWLFdBQUwsR0FBbUJBLFdBQW5CO0VBQ0E7Ozs7V0FFRCx5QkFBaUM7TUFDaEMsSUFBSSxLQUFLQyxNQUFMLENBQVk1YSxNQUFaLEtBQXVCLENBQTNCLEVBQThCO1FBQzdCLE9BQU8sSUFBUDtNQUNBOztNQUVELElBQU02YSxNQUFNLEdBQUcsSUFBSWhXLEtBQUosRUFBZixDQUxnQyxDQU9oQzs7TUFDQSxJQUFJLEtBQUsrVixNQUFMLENBQVk1YSxNQUFaLElBQXNCLENBQTFCLEVBQTZCO1FBQzVCLEtBQUs4YSxXQUFMLENBQWlCRCxNQUFqQixFQUF5QixLQUFLRCxNQUFMLENBQVksQ0FBWixDQUF6QixFQUF5QyxLQUFLRCxXQUE5QztRQUVBLE9BQU9FLE1BQVA7TUFDQSxDQVorQixDQWNoQzs7O01BQ0FBLE1BQU0sQ0FBQzlWLElBQVAsT0FBQThWLE1BQU0sMkZBQVMsS0FBS2hDLENBQWQsRUFBTixDQWZnQyxDQWlCaEM7O01BQ0EsS0FBS2tDLFdBQUwsQ0FBaUJGLE1BQWpCLEVBQXlCLEtBQUtELE1BQUwsQ0FBWSxDQUFaLENBQXpCLEVBQXlDLEtBQUtBLE1BQUwsQ0FBWSxDQUFaLENBQXpDLEVBQXlELEtBQXpELEVBbEJnQyxDQW9CaEM7O01BQ0FDLE1BQU0sQ0FBQzlWLElBQVAsT0FBQThWLE1BQU0sMkZBQVMsS0FBSzdCLENBQWQsRUFBTjtNQUVBLE9BQU82QixNQUFQO0lBQ0E7OztXQUVELGtCQUFTcmYsS0FBVCxFQUFnQztNQUMvQixLQUFLb2YsTUFBTCxDQUFZN1YsSUFBWixDQUFpQnZKLEtBQUssQ0FBQ0UsS0FBTixFQUFqQjtNQUVBLElBQU1zZixLQUFLLEdBQUcsS0FBS0osTUFBTCxDQUFZNWEsTUFBMUI7O01BRUEsSUFBSWdiLEtBQUssR0FBRyxDQUFaLEVBQWU7UUFDZCxJQUFJQSxLQUFLLEdBQUcsQ0FBWixFQUFlO1VBQ2Q7VUFDQSxLQUFLSixNQUFMLENBQVlwUCxLQUFaO1FBQ0E7O1FBRUQsSUFBTW1MLEVBQUUsR0FBRyxLQUFLaUUsTUFBTCxDQUFZLENBQVosQ0FBWDs7UUFFQSxJQUFJLEtBQUsvQixDQUFMLENBQU83WSxNQUFQLEtBQWtCLENBQWxCLElBQXVCLEtBQUtnWixDQUFMLENBQU9oWixNQUFQLEtBQWtCLENBQTdDLEVBQWdEO1VBQy9DO1VBQ0EsS0FBSythLFdBQUwsQ0FBaUIsS0FBS2xDLENBQXRCLEVBQXlCbEMsRUFBekIsRUFBNkJuYixLQUE3QixFQUFvQyxLQUFwQztVQUNBLEtBQUt5ZixTQUFMLENBQWV0RSxFQUFmLEVBQW1CbmIsS0FBbkI7UUFDQSxDQUpELE1BS0s7VUFDSixLQUFLMGYsT0FBTCxDQUFhdkUsRUFBYixFQUFpQm5iLEtBQWpCO1FBQ0E7TUFDRDtJQUNEOzs7V0FFRCxvQkFBVzJCLElBQVgsRUFBcUM7TUFDcEM7TUFDQSxJQUFJLEtBQUt5ZCxNQUFMLENBQVk1YSxNQUFaLEtBQXVCLENBQTNCLEVBQThCO1FBQzdCLE9BQU8sS0FBUDtNQUNBLENBRkQsTUFHSyxJQUFJLEtBQUs0YSxNQUFMLENBQVk1YSxNQUFaLEtBQXVCLENBQTNCLEVBQThCO1FBQ2xDLE9BQU83QyxJQUFJLENBQUNrYixhQUFMLENBQW1CLEtBQUt1QyxNQUFMLENBQVksQ0FBWixDQUFuQixDQUFQO01BQ0E7O01BRUQsSUFBSSxLQUFLTyxjQUFMLENBQW9CLEtBQUt0QyxDQUF6QixFQUE0QjFiLElBQTVCLENBQUosRUFBdUM7UUFDdEMsT0FBTyxJQUFQO01BQ0E7O01BQ0QsSUFBSSxLQUFLZ2UsY0FBTCxDQUFvQixLQUFLbkMsQ0FBekIsRUFBNEI3YixJQUE1QixDQUFKLEVBQXVDO1FBQ3RDLE9BQU8sSUFBUDtNQUNBOztNQUVELE9BQU8sS0FBUDtJQUNBOzs7V0FFRCxxQkFBWWllLEtBQVosRUFBZ0M7TUFBQSwyQ0FDYixLQUFLdkMsQ0FEUTtNQUFBOztNQUFBO1FBQy9CLG9EQUEwQjtVQUFBLElBQWpCcmQsS0FBaUI7VUFDekJBLEtBQUssQ0FBQzZmLFFBQU4sQ0FBZUQsS0FBZjtRQUNBO01BSDhCO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BQUEsNENBSWIsS0FBS3BDLENBSlE7TUFBQTs7TUFBQTtRQUkvQix1REFBMEI7VUFBQSxJQUFqQnhkLE1BQWlCOztVQUN6QkEsTUFBSyxDQUFDNmYsUUFBTixDQUFlRCxLQUFmO1FBQ0E7TUFOOEI7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFBQSw0Q0FPYixLQUFLUixNQVBRO01BQUE7O01BQUE7UUFPL0IsdURBQStCO1VBQUEsSUFBdEJwZixPQUFzQjs7VUFDOUJBLE9BQUssQ0FBQzZmLFFBQU4sQ0FBZUQsS0FBZjtRQUNBO01BVDhCO1FBQUE7TUFBQTtRQUFBO01BQUE7SUFVL0I7OztXQUVELGlCQUFtQjtNQUNsQixJQUFNUCxNQUFNLEdBQUcsSUFBSUgsU0FBSixDQUFjLEtBQUtDLFdBQW5CLENBQWY7O01BRGtCLDRDQUdBLEtBQUs5QixDQUhMO01BQUE7O01BQUE7UUFHbEIsdURBQTBCO1VBQUEsSUFBakJyZCxLQUFpQjtVQUN6QnFmLE1BQU0sQ0FBQ2hDLENBQVAsQ0FBUzlULElBQVQsQ0FBY3ZKLEtBQUssQ0FBQ0UsS0FBTixFQUFkO1FBQ0E7TUFMaUI7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFBQSw0Q0FNQSxLQUFLc2QsQ0FOTDtNQUFBOztNQUFBO1FBTWxCLHVEQUEwQjtVQUFBLElBQWpCeGQsT0FBaUI7VUFDekJxZixNQUFNLENBQUM3QixDQUFQLENBQVNqVSxJQUFULENBQWN2SixPQUFLLENBQUNFLEtBQU4sRUFBZDtRQUNBO01BUmlCO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BQUEsNENBU0EsS0FBS2tmLE1BVEw7TUFBQTs7TUFBQTtRQVNsQix1REFBK0I7VUFBQSxJQUF0QnBmLE9BQXNCO1VBQzlCcWYsTUFBTSxDQUFDRCxNQUFQLENBQWM3VixJQUFkLENBQW1CdkosT0FBSyxDQUFDRSxLQUFOLEVBQW5CO1FBQ0E7TUFYaUI7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFhbEIsT0FBT21mLE1BQVA7SUFDQTs7O1dBRUQsaUJBQWdCbEUsRUFBaEIsRUFBOEJDLEVBQTlCLEVBQWtEO01BQ2pELEtBQUswRSxXQUFMLENBQWlCLEtBQUt6QyxDQUF0QixFQUF5QmxDLEVBQXpCLEVBQTZCQyxFQUE3QixFQUFpQyxLQUFqQztNQUNBLEtBQUswRSxXQUFMLENBQWlCLEtBQUt0QyxDQUF0QixFQUF5QnJDLEVBQXpCLEVBQTZCQyxFQUE3QixFQUFpQyxJQUFqQztJQUNBOzs7V0FFRCxxQkFBb0JSLE1BQXBCLEVBQTZDTyxFQUE3QyxFQUEyREMsRUFBM0QsRUFBeUUyRSxPQUF6RSxFQUFpRztNQUNoRyxLQUFLQyxNQUFMLENBQVkxVixHQUFaLENBQWdCOFEsRUFBRSxDQUFDeFMsQ0FBbkIsRUFBc0J3UyxFQUFFLENBQUN2UyxDQUF6QixFQUE0QmdYLFFBQTVCLENBQXFDMUUsRUFBckMsRUFBeUM4RSxTQUF6QztNQUNBLEtBQUtDLE1BQUwsQ0FBWTVWLEdBQVosQ0FBZ0IsQ0FBQyxLQUFLMFYsTUFBTCxDQUFZblgsQ0FBN0IsRUFBZ0MsS0FBS21YLE1BQUwsQ0FBWXBYLENBQTVDLEVBQStDcVgsU0FBL0M7TUFFQSxLQUFLRSxLQUFMLENBQVc3VixHQUFYLENBQWUsS0FBSzRWLE1BQUwsQ0FBWXRYLENBQTNCLEVBQThCLEtBQUtzWCxNQUFMLENBQVlyWCxDQUExQyxFQUE2Q2tRLFFBQTdDLENBQXNELEtBQUtvRyxXQUFMLEdBQW1CLEtBQUtpQixVQUFMLENBQWdCakYsRUFBaEIsQ0FBbkIsR0FBeUMsQ0FBL0Y7TUFDQSxLQUFLa0YsT0FBTCxDQUFhL1YsR0FBYixDQUFpQjZRLEVBQUUsQ0FBQ3ZTLENBQXBCLEVBQXVCdVMsRUFBRSxDQUFDdFMsQ0FBMUI7TUFFQSxLQUFLZ0MsTUFBTCxDQUFZLEtBQUt3VixPQUFqQixFQUEwQixLQUFLRixLQUEvQixFQUFzQ0osT0FBdEM7TUFFQSxLQUFLSSxLQUFMLENBQVc3VixHQUFYLENBQWUsS0FBSzRWLE1BQUwsQ0FBWXRYLENBQTNCLEVBQThCLEtBQUtzWCxNQUFMLENBQVlyWCxDQUExQyxFQUE2Q2tRLFFBQTdDLENBQXNELEtBQUtvRyxXQUFMLEdBQW1CLEtBQUtpQixVQUFMLENBQWdCaEYsRUFBaEIsQ0FBbkIsR0FBeUMsQ0FBL0Y7TUFDQSxLQUFLa0YsT0FBTCxDQUFhaFcsR0FBYixDQUFpQjhRLEVBQUUsQ0FBQ3hTLENBQXBCLEVBQXVCd1MsRUFBRSxDQUFDdlMsQ0FBMUI7TUFFQSxLQUFLZ0MsTUFBTCxDQUFZLEtBQUt5VixPQUFqQixFQUEwQixLQUFLSCxLQUEvQixFQUFzQ0osT0FBdEM7TUFFQSxJQUFNNUIsSUFBSSxHQUFHLElBQUlKLHVDQUFKLENBQVMsS0FBS3NDLE9BQUwsQ0FBYXpYLENBQXRCLEVBQXlCLEtBQUt5WCxPQUFMLENBQWF4WCxDQUF0QyxFQUF5QyxLQUFLeVgsT0FBTCxDQUFhMVgsQ0FBdEQsRUFBeUQsS0FBSzBYLE9BQUwsQ0FBYXpYLENBQXRFLENBQWI7TUFDQSxJQUFNMFgsUUFBUSxHQUFHUixPQUFPLEdBQUcsS0FBS1MsV0FBUixHQUFzQixLQUFLQyxjQUFuRDtNQUVBLElBQU1DLEtBQUssR0FBR0gsUUFBUSxDQUFDSSxvQkFBVCxDQUE4QnhDLElBQUksQ0FBQ3BCLEVBQW5DLEVBQXVDb0IsSUFBSSxDQUFDbkIsRUFBNUMsRUFBZ0RtQixJQUFJLENBQUNsQixFQUFyRCxFQUF5RGtCLElBQUksQ0FBQ2pCLEVBQTlELENBQWQ7O01BRUEsSUFBSXdELEtBQUssSUFBSSxJQUFiLEVBQW1CO1FBQ2xCLEtBQUtFLFNBQUwsQ0FBZWhHLE1BQWYsRUFBdUI4RixLQUF2QixFQUE4QlgsT0FBOUI7TUFDQSxDQUZELE1BR0s7UUFDSixJQUFNeEksQ0FBQyxHQUFHZ0osUUFBUSxDQUFDTSxXQUFULEVBQVY7UUFDQSxJQUFNckosQ0FBQyxHQUFHMkcsSUFBSSxDQUFDMkMsYUFBTCxFQUFWO1FBRUEsSUFBSUMsQ0FBQyxHQUFHLEtBQUtDLFNBQUwsQ0FBZXpKLENBQWYsRUFBa0I0RCxFQUFsQixDQUFSO1FBQ0EsSUFBSWpMLENBQUMsR0FBRyxLQUFLOFEsU0FBTCxDQUFleEosQ0FBZixFQUFrQjJELEVBQWxCLENBQVI7UUFFQSxJQUFNekQsQ0FBQyxHQUFHNEYsSUFBSSxDQUFDWSxHQUFMLENBQVM2QyxDQUFDLEdBQUc3USxDQUFiLENBQVY7O1FBRUEsSUFBSXdILENBQUMsR0FBRyxHQUFSLEVBQWE7VUFDWnFKLENBQUMsSUFBSSxHQUFMO1VBQ0E3USxDQUFDLElBQUksR0FBTDtRQUNBOztRQUVELEtBQUsrUSxHQUFMLENBQVNyRyxNQUFULEVBQWlCTyxFQUFqQixFQUFxQjRGLENBQXJCLEVBQXdCN1EsQ0FBeEIsRUFBMkIsS0FBS2lQLFdBQUwsR0FBbUIsS0FBS2lCLFVBQUwsQ0FBZ0JqRixFQUFoQixDQUFuQixHQUF5QyxDQUFwRSxFQUF1RSxDQUF2RSxFQUEwRTRFLE9BQTFFO01BQ0E7O01BRURRLFFBQVEsQ0FBQ2pXLEdBQVQsQ0FBYTZULElBQUksQ0FBQ3BCLEVBQWxCLEVBQXNCb0IsSUFBSSxDQUFDbkIsRUFBM0IsRUFBK0JtQixJQUFJLENBQUNsQixFQUFwQyxFQUF3Q2tCLElBQUksQ0FBQ2pCLEVBQTdDO0lBQ0E7OztXQUVELG1CQUFrQi9CLEVBQWxCLEVBQWdDQyxFQUFoQyxFQUFvRDtNQUNuRCxLQUFLNEUsTUFBTCxDQUFZMVYsR0FBWixDQUFnQjhRLEVBQUUsQ0FBQ3hTLENBQW5CLEVBQXNCd1MsRUFBRSxDQUFDdlMsQ0FBekIsRUFBNEJnWCxRQUE1QixDQUFxQzFFLEVBQXJDLEVBQXlDOEUsU0FBekM7TUFDQSxLQUFLQyxNQUFMLENBQVk1VixHQUFaLENBQWdCLENBQUMsS0FBSzBWLE1BQUwsQ0FBWW5YLENBQTdCLEVBQWdDLEtBQUttWCxNQUFMLENBQVlwWCxDQUE1QyxFQUErQ3FYLFNBQS9DLEdBRm1ELENBSW5EOztNQUNBLEtBQUtFLEtBQUwsQ0FBVzdWLEdBQVgsQ0FBZSxLQUFLNFYsTUFBTCxDQUFZdFgsQ0FBM0IsRUFBOEIsS0FBS3NYLE1BQUwsQ0FBWXJYLENBQTFDLEVBQTZDa1EsUUFBN0MsQ0FBc0QsS0FBS29HLFdBQUwsR0FBbUIsS0FBS2lCLFVBQUwsQ0FBZ0JqRixFQUFoQixDQUFuQixHQUF5QyxDQUEvRjtNQUNBLEtBQUtrRixPQUFMLENBQWEvVixHQUFiLENBQWlCNlEsRUFBRSxDQUFDdlMsQ0FBcEIsRUFBdUJ1UyxFQUFFLENBQUN0UyxDQUExQixFQUE2QmdNLEdBQTdCLENBQWlDLEtBQUtzTCxLQUF0QztNQUVBLEtBQUtBLEtBQUwsQ0FBVzdWLEdBQVgsQ0FBZSxLQUFLNFYsTUFBTCxDQUFZdFgsQ0FBM0IsRUFBOEIsS0FBS3NYLE1BQUwsQ0FBWXJYLENBQTFDLEVBQTZDa1EsUUFBN0MsQ0FBc0QsS0FBS29HLFdBQUwsR0FBbUIsS0FBS2lCLFVBQUwsQ0FBZ0JoRixFQUFoQixDQUFuQixHQUF5QyxDQUEvRjtNQUNBLEtBQUtrRixPQUFMLENBQWFoVyxHQUFiLENBQWlCOFEsRUFBRSxDQUFDeFMsQ0FBcEIsRUFBdUJ3UyxFQUFFLENBQUN2UyxDQUExQixFQUE2QmdNLEdBQTdCLENBQWlDLEtBQUtzTCxLQUF0QztNQUVBLEtBQUtlLFlBQUwsQ0FBa0IsS0FBSzdELENBQXZCLEVBQTBCLEtBQUtpRCxPQUFMLENBQWExWCxDQUF2QyxFQUEwQyxLQUFLMFgsT0FBTCxDQUFhelgsQ0FBdkQsRUFBMEQsS0FBMUQ7TUFFQSxLQUFLNFgsY0FBTCxDQUFvQm5XLEdBQXBCLENBQXdCLEtBQUsrVixPQUFMLENBQWF6WCxDQUFyQyxFQUF3QyxLQUFLeVgsT0FBTCxDQUFheFgsQ0FBckQsRUFBd0QsS0FBS3lYLE9BQUwsQ0FBYTFYLENBQXJFLEVBQXdFLEtBQUswWCxPQUFMLENBQWF6WCxDQUFyRixFQWJtRCxDQWVuRDs7TUFDQSxLQUFLc1gsS0FBTCxDQUFXN1YsR0FBWCxDQUFlLEtBQUs0VixNQUFMLENBQVl0WCxDQUEzQixFQUE4QixLQUFLc1gsTUFBTCxDQUFZclgsQ0FBMUMsRUFBNkNrUSxRQUE3QyxDQUFzRCxLQUFLb0csV0FBTCxHQUFtQixLQUFLaUIsVUFBTCxDQUFnQmpGLEVBQWhCLENBQW5CLEdBQXlDLENBQS9GO01BQ0EsS0FBS2tGLE9BQUwsQ0FBYS9WLEdBQWIsQ0FBaUI2USxFQUFFLENBQUN2UyxDQUFwQixFQUF1QnVTLEVBQUUsQ0FBQ3RTLENBQTFCLEVBQTZCZ1gsUUFBN0IsQ0FBc0MsS0FBS00sS0FBM0M7TUFFQSxLQUFLQSxLQUFMLENBQVc3VixHQUFYLENBQWUsS0FBSzRWLE1BQUwsQ0FBWXRYLENBQTNCLEVBQThCLEtBQUtzWCxNQUFMLENBQVlyWCxDQUExQyxFQUE2Q2tRLFFBQTdDLENBQXNELEtBQUtvRyxXQUFMLEdBQW1CLEtBQUtpQixVQUFMLENBQWdCaEYsRUFBaEIsQ0FBbkIsR0FBeUMsQ0FBL0Y7TUFDQSxLQUFLa0YsT0FBTCxDQUFhaFcsR0FBYixDQUFpQjhRLEVBQUUsQ0FBQ3hTLENBQXBCLEVBQXVCd1MsRUFBRSxDQUFDdlMsQ0FBMUIsRUFBNkJnWCxRQUE3QixDQUFzQyxLQUFLTSxLQUEzQztNQUVBLEtBQUtlLFlBQUwsQ0FBa0IsS0FBSzFELENBQXZCLEVBQTBCLEtBQUs2QyxPQUFMLENBQWF6WCxDQUF2QyxFQUEwQyxLQUFLeVgsT0FBTCxDQUFheFgsQ0FBdkQsRUFBMEQsSUFBMUQ7TUFDQSxLQUFLcVksWUFBTCxDQUFrQixLQUFLMUQsQ0FBdkIsRUFBMEIsS0FBSzhDLE9BQUwsQ0FBYTFYLENBQXZDLEVBQTBDLEtBQUswWCxPQUFMLENBQWF6WCxDQUF2RCxFQUEwRCxJQUExRDtNQUVBLEtBQUsyWCxXQUFMLENBQWlCbFcsR0FBakIsQ0FBcUIsS0FBSytWLE9BQUwsQ0FBYXpYLENBQWxDLEVBQXFDLEtBQUt5WCxPQUFMLENBQWF4WCxDQUFsRCxFQUFxRCxLQUFLeVgsT0FBTCxDQUFhMVgsQ0FBbEUsRUFBcUUsS0FBSzBYLE9BQUwsQ0FBYXpYLENBQWxGO0lBQ0E7OztXQUVELGFBQVkrUixNQUFaLEVBQXFDdUcsTUFBckMsRUFBdURDLEtBQXZELEVBQXNFaGhCLEdBQXRFLEVBQW1GaWhCLE1BQW5GLEVBQW1HQyxJQUFuRyxFQUFpSHZCLE9BQWpILEVBQXlJO01BQ3hJLElBQUlxQixLQUFLLEdBQUdoaEIsR0FBWixFQUFpQjtRQUNoQixLQUFLLElBQUl5WSxLQUFLLEdBQUd1SSxLQUFqQixFQUF3QnZJLEtBQUssSUFBSXpZLEdBQWpDLEVBQXNDeVksS0FBSyxJQUFJeUksSUFBL0MsRUFBcUQ7VUFDcEQsSUFBTUMsR0FBRyxHQUFHakUsSUFBSSxDQUFDa0UsRUFBTCxHQUFVM0ksS0FBVixHQUFrQixHQUE5QjtVQUVBLElBQU1qUSxDQUFDLEdBQUd1WSxNQUFNLENBQUN2WSxDQUFQLEdBQVd5WSxNQUFNLEdBQUcvRCxJQUFJLENBQUNtRSxHQUFMLENBQVNGLEdBQVQsQ0FBOUI7VUFDQSxJQUFNMVksQ0FBQyxHQUFHc1ksTUFBTSxDQUFDdFksQ0FBUCxHQUFXd1ksTUFBTSxHQUFHL0QsSUFBSSxDQUFDb0UsR0FBTCxDQUFTSCxHQUFULENBQTlCO1VBRUEsS0FBS0wsWUFBTCxDQUFrQnRHLE1BQWxCLEVBQTBCaFMsQ0FBMUIsRUFBNkJDLENBQTdCLEVBQWdDa1gsT0FBaEM7UUFDQTtNQUNELENBVEQsTUFVSztRQUNKLEtBQUssSUFBSWxILE1BQUssR0FBR3VJLEtBQWpCLEVBQXdCdkksTUFBSyxJQUFJelksR0FBakMsRUFBc0N5WSxNQUFLLElBQUl5SSxJQUEvQyxFQUFxRDtVQUNwRCxJQUFNQyxJQUFHLEdBQUdqRSxJQUFJLENBQUNrRSxFQUFMLEdBQVUzSSxNQUFWLEdBQWtCLEdBQTlCOztVQUVBLElBQU1qUSxFQUFDLEdBQUd1WSxNQUFNLENBQUN2WSxDQUFQLEdBQVd5WSxNQUFNLEdBQUcvRCxJQUFJLENBQUNtRSxHQUFMLENBQVNGLElBQVQsQ0FBOUI7O1VBQ0EsSUFBTTFZLEVBQUMsR0FBR3NZLE1BQU0sQ0FBQ3RZLENBQVAsR0FBV3dZLE1BQU0sR0FBRy9ELElBQUksQ0FBQ29FLEdBQUwsQ0FBU0gsSUFBVCxDQUE5Qjs7VUFFQSxLQUFLTCxZQUFMLENBQWtCdEcsTUFBbEIsRUFBMEJoUyxFQUExQixFQUE2QkMsRUFBN0IsRUFBZ0NrWCxPQUFoQztRQUNBO01BQ0Q7SUFDRDs7O1dBRUQscUJBQW9CbkYsTUFBcEIsRUFBNkN1RyxNQUE3QyxFQUErRGhDLFdBQS9ELEVBQTBGO01BQ3pGLEtBQUsrQixZQUFMLENBQWtCdEcsTUFBbEIsRUFBMEJ1RyxNQUFNLENBQUN2WSxDQUFQLEdBQVd1VyxXQUFXLEdBQUcsS0FBS2lCLFVBQUwsQ0FBZ0JlLE1BQWhCLENBQWQsR0FBd0MsQ0FBN0UsRUFBZ0ZBLE1BQU0sQ0FBQ3RZLENBQXZGLEVBQTBGLEtBQTFGO01BRUEsS0FBS29ZLEdBQUwsQ0FBU3JHLE1BQVQsRUFBaUJ1RyxNQUFqQixFQUF5QixDQUF6QixFQUE0QixHQUE1QixFQUFpQ2hDLFdBQVcsR0FBRyxLQUFLaUIsVUFBTCxDQUFnQmUsTUFBaEIsQ0FBZCxHQUF3QyxDQUF6RSxFQUE0RSxDQUE1RSxFQUErRSxLQUEvRTtJQUNBOzs7V0FFRCxxQkFBb0J2RyxNQUFwQixFQUE2Q08sRUFBN0MsRUFBMkRDLEVBQTNELEVBQXlFMkUsT0FBekUsRUFBMkY7TUFDMUYsS0FBS0MsTUFBTCxDQUFZMVYsR0FBWixDQUFnQjhRLEVBQUUsQ0FBQ3hTLENBQW5CLEVBQXNCd1MsRUFBRSxDQUFDdlMsQ0FBekIsRUFBNEJnWCxRQUE1QixDQUFxQzFFLEVBQXJDLEVBQXlDOEUsU0FBekM7TUFDQSxLQUFLQyxNQUFMLENBQVk1VixHQUFaLENBQWdCLENBQUMsS0FBSzBWLE1BQUwsQ0FBWW5YLENBQTdCLEVBQWdDLEtBQUttWCxNQUFMLENBQVlwWCxDQUE1QyxFQUErQ3FYLFNBQS9DO01BQ0EsS0FBS0UsS0FBTCxDQUFXN1YsR0FBWCxDQUFlLEtBQUs0VixNQUFMLENBQVl0WCxDQUEzQixFQUE4QixLQUFLc1gsTUFBTCxDQUFZclgsQ0FBMUMsRUFBNkNrUSxRQUE3QyxDQUFzRCxLQUFLb0csV0FBTCxHQUFtQixLQUFLaUIsVUFBTCxDQUFnQmpGLEVBQWhCLENBQW5CLEdBQXlDLENBQS9GO01BRUEsS0FBS2tGLE9BQUwsQ0FBYS9WLEdBQWIsQ0FBaUI2USxFQUFFLENBQUN2UyxDQUFwQixFQUF1QnVTLEVBQUUsQ0FBQ3RTLENBQTFCLEVBQTZCZ00sR0FBN0IsQ0FBaUMsS0FBS3NMLEtBQXRDO01BQ0EsS0FBS0csT0FBTCxDQUFhaFcsR0FBYixDQUFpQjZRLEVBQUUsQ0FBQ3ZTLENBQXBCLEVBQXVCdVMsRUFBRSxDQUFDdFMsQ0FBMUIsRUFBNkJnWCxRQUE3QixDQUFzQyxLQUFLTSxLQUEzQyxFQU4wRixDQVExRjs7TUFDQSxLQUFLZSxZQUFMLENBQWtCdEcsTUFBbEIsRUFBMEIsS0FBSzBGLE9BQUwsQ0FBYTFYLENBQXZDLEVBQTBDLEtBQUswWCxPQUFMLENBQWF6WCxDQUF2RCxFQUEwRGtYLE9BQTFELEVBVDBGLENBVzFGOztNQUNBLElBQU1nQixDQUFDLEdBQUcsS0FBS0MsU0FBTCxDQUFlLEtBQUtWLE9BQXBCLEVBQTZCLEtBQUtELE9BQWxDLENBQVY7TUFDQSxJQUFNblEsQ0FBQyxHQUFHNlEsQ0FBQyxHQUFHLEdBQWQ7TUFFQSxLQUFLRSxHQUFMLENBQVNyRyxNQUFULEVBQWlCTyxFQUFqQixFQUFxQjRGLENBQXJCLEVBQXdCN1EsQ0FBeEIsRUFBMkIsS0FBS2lQLFdBQUwsR0FBbUIsS0FBS2lCLFVBQUwsQ0FBZ0JqRixFQUFoQixDQUFuQixHQUF5QyxDQUFwRSxFQUF1RSxDQUF2RSxFQUEwRTRFLE9BQTFFO0lBQ0E7OztXQUVELHNCQUFxQm5GLE1BQXJCLEVBQThDaFMsQ0FBOUMsRUFBeURDLENBQXpELEVBQW9Fa1gsT0FBcEUsRUFBNEY7TUFDM0YsSUFBSUEsT0FBSixFQUFhO1FBQ1puRixNQUFNLENBQUMrRyxPQUFQLENBQWUsSUFBSTlpQixnREFBSixDQUFhK0osQ0FBYixFQUFnQkMsQ0FBaEIsRUFBbUIsQ0FBbkIsQ0FBZjtNQUNBLENBRkQsTUFHSztRQUNKK1IsTUFBTSxDQUFDclIsSUFBUCxDQUFZLElBQUkxSyxnREFBSixDQUFhK0osQ0FBYixFQUFnQkMsQ0FBaEIsRUFBbUIsQ0FBbkIsQ0FBWjtNQUNBO0lBQ0Q7OztXQUVELG1CQUFrQitSLE1BQWxCLEVBQTJDOEYsS0FBM0MsRUFBeURYLE9BQXpELEVBQWlGO01BQ2hGLElBQUlBLE9BQUosRUFBYTtRQUNabkYsTUFBTSxDQUFDLENBQUQsQ0FBTixDQUFVdFEsR0FBVixDQUFjb1csS0FBSyxDQUFDOVgsQ0FBcEIsRUFBdUI4WCxLQUFLLENBQUM3WCxDQUE3QjtNQUNBLENBRkQsTUFHSztRQUNKK1IsTUFBTSxDQUFDQSxNQUFNLENBQUNwVyxNQUFQLEdBQWdCLENBQWpCLENBQU4sQ0FBMEI4RixHQUExQixDQUE4Qm9XLEtBQUssQ0FBQzlYLENBQXBDLEVBQXVDOFgsS0FBSyxDQUFDN1gsQ0FBN0M7TUFDQTtJQUNEOzs7V0FFRCxnQkFBZXNZLE1BQWYsRUFBOEJoQixLQUE5QixFQUE0Q0osT0FBNUMsRUFBb0U7TUFDbkUsSUFBSUEsT0FBSixFQUFhO1FBQ1pvQixNQUFNLENBQUN0QixRQUFQLENBQWdCTSxLQUFoQjtNQUNBLENBRkQsTUFHSztRQUNKZ0IsTUFBTSxDQUFDdE0sR0FBUCxDQUFXc0wsS0FBWDtNQUNBO0lBQ0Q7OztXQUVELG9CQUFtQm5nQixLQUFuQixFQUE0QztNQUMzQyxPQUFPc2QsSUFBSSxDQUFDc0UsR0FBTCxDQUFTLEdBQVQsRUFBY3RFLElBQUksQ0FBQ00sSUFBTCxDQUFVNWQsS0FBSyxDQUFDaWYsQ0FBTixHQUFVLEdBQXBCLENBQWQsQ0FBUDtJQUNBOzs7V0FFRCxtQkFBa0I3RCxFQUFsQixFQUE2QkMsRUFBN0IsRUFBZ0Q7TUFDL0MsSUFBTXdHLE9BQU8sR0FBR3ZFLElBQUksQ0FBQ3dFLEtBQUwsQ0FBVzFHLEVBQUUsQ0FBQ3ZTLENBQUgsR0FBT3dTLEVBQUUsQ0FBQ3hTLENBQXJCLEVBQXdCdVMsRUFBRSxDQUFDeFMsQ0FBSCxHQUFPeVMsRUFBRSxDQUFDelMsQ0FBbEMsQ0FBaEI7TUFFQSxPQUFPLENBQUMsSUFBSTBVLElBQUksQ0FBQ2tFLEVBQVQsR0FBY0ssT0FBZixJQUEwQixHQUExQixHQUFnQ3ZFLElBQUksQ0FBQ2tFLEVBQTVDO0lBQ0E7OztXQUVELHdCQUF1Qk8sSUFBdkIsRUFBOENwZ0IsSUFBOUMsRUFBd0U7TUFDdkUsSUFBSXFnQixLQUFLLEdBQUcsQ0FBWjtNQUNBLElBQUk1RyxFQUFFLEdBQUcyRyxJQUFJLENBQUNDLEtBQUssRUFBTixDQUFiO01BQ0EsSUFBSTNHLEVBQUUsR0FBRyxJQUFUOztNQUVBLE9BQU8yRyxLQUFLLEdBQUdELElBQUksQ0FBQ3ZkLE1BQXBCLEVBQTRCO1FBQzNCNlcsRUFBRSxHQUFHMEcsSUFBSSxDQUFDQyxLQUFLLEVBQU4sQ0FBVDs7UUFFQSxJQUFJcmdCLElBQUksQ0FBQ21iLGNBQUwsQ0FBb0IxQixFQUFFLENBQUN4UyxDQUF2QixFQUEwQndTLEVBQUUsQ0FBQ3ZTLENBQTdCLEVBQWdDd1MsRUFBRSxDQUFDelMsQ0FBbkMsRUFBc0N5UyxFQUFFLENBQUN4UyxDQUF6QyxDQUFKLEVBQWlEO1VBQ2hELE9BQU8sSUFBUDtRQUNBOztRQUVEdVMsRUFBRSxHQUFHQyxFQUFMO01BQ0E7O01BRUQsT0FBTyxLQUFQO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqVEY7QUFDQTtBQUNBO0FBQ0E7SUFDTXBYO0VBRUw7O0VBR0E7O0VBSUE7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0MsZUFBWTJFLENBQVosRUFBdUJDLENBQXZCLEVBQWtDO0lBQUE7O0lBQUE7O0lBQUE7O0lBQ2pDLEtBQUtELENBQUwsR0FBU0EsQ0FBVDtJQUNBLEtBQUtDLENBQUwsR0FBU0EsQ0FBVDtFQUNBOzs7O1dBRUQsYUFBSUQsQ0FBSixFQUFlQyxDQUFmLEVBQWlDO01BQ2hDLEtBQUtELENBQUwsR0FBU0EsQ0FBVDtNQUNBLEtBQUtDLENBQUwsR0FBU0EsQ0FBVDtNQUVBLE9BQU8sSUFBUDtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxrQkFBUzdJLEtBQVQsRUFBK0I7TUFDOUIsSUFBTWdlLEVBQUUsR0FBR2hlLEtBQUssQ0FBQzRJLENBQU4sR0FBVSxLQUFLQSxDQUExQjtNQUNBLElBQU1xVixFQUFFLEdBQUdqZSxLQUFLLENBQUM2SSxDQUFOLEdBQVUsS0FBS0EsQ0FBMUI7TUFFQSxPQUFPeVUsSUFBSSxDQUFDTSxJQUFMLENBQVVJLEVBQUUsR0FBR0EsRUFBTCxHQUFVQyxFQUFFLEdBQUdBLEVBQXpCLENBQVA7SUFDQTs7O1dBRUQsYUFBSWplLEtBQUosRUFBeUI7TUFDeEIsS0FBSzRJLENBQUwsSUFBVTVJLEtBQUssQ0FBQzRJLENBQWhCO01BQ0EsS0FBS0MsQ0FBTCxJQUFVN0ksS0FBSyxDQUFDNkksQ0FBaEI7TUFFQSxPQUFPLElBQVA7SUFDQTs7O1dBRUQsa0JBQVM3SSxLQUFULEVBQThCO01BQzdCLEtBQUs0SSxDQUFMLElBQVU1SSxLQUFLLENBQUM0SSxDQUFoQjtNQUNBLEtBQUtDLENBQUwsSUFBVTdJLEtBQUssQ0FBQzZJLENBQWhCO01BRUEsT0FBTyxJQUFQO0lBQ0E7OztXQUVELGtCQUFTb1osTUFBVCxFQUFnQztNQUMvQixLQUFLclosQ0FBTCxJQUFVcVosTUFBVjtNQUNBLEtBQUtwWixDQUFMLElBQVVvWixNQUFWO01BRUEsT0FBTyxJQUFQO0lBQ0E7OztXQUVELHFCQUFtQjtNQUNsQixJQUFNemQsTUFBTSxHQUFHOFksSUFBSSxDQUFDTSxJQUFMLENBQVUsS0FBS2hWLENBQUwsR0FBUyxLQUFLQSxDQUFkLEdBQWtCLEtBQUtDLENBQUwsR0FBUyxLQUFLQSxDQUExQyxDQUFmO01BRUEsS0FBS0QsQ0FBTCxJQUFVcEUsTUFBVjtNQUNBLEtBQUtxRSxDQUFMLElBQVVyRSxNQUFWO01BRUEsT0FBTyxJQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNDLGdCQUFPK1IsS0FBUCxFQUE4QjtNQUM3QixJQUFJLENBQUNBLEtBQUwsRUFBWTtRQUNYLE9BQU8sS0FBUDtNQUNBOztNQUNELE9BQU8sS0FBSzNOLENBQUwsS0FBVzJOLEtBQUssQ0FBQzNOLENBQWpCLElBQXNCLEtBQUtDLENBQUwsS0FBVzBOLEtBQUssQ0FBQzFOLENBQTlDO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JGRixJQUFNcVosTUFBTSxHQUFHLENBQWY7QUFDQSxJQUFNQyxJQUFJLEdBQUcsQ0FBYjtBQUNBLElBQU1DLEtBQUssR0FBRyxDQUFkO0FBQ0EsSUFBTUMsTUFBTSxHQUFHLENBQWY7QUFDQSxJQUFNQyxHQUFHLEdBQUcsQ0FBWjtBQUVBO0FBQ0E7QUFDQTtBQUNBOztJQUNNN2U7RUFFTDs7RUFHQTs7RUFHQTs7RUFHQTs7RUFJQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0MsbUJBQVltRixDQUFaLEVBQXVCQyxDQUF2QixFQUFrQ3VULEtBQWxDLEVBQWlEQyxNQUFqRCxFQUFpRTtJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUNoRSxLQUFLL1IsR0FBTCxDQUFTMUIsQ0FBVCxFQUFZQyxDQUFaLEVBQWV1VCxLQUFmLEVBQXNCQyxNQUF0QjtFQUNBO0VBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7V0FDQyxhQUFJelQsQ0FBSixFQUFlQyxDQUFmLEVBQTBCdVQsS0FBMUIsRUFBeUNDLE1BQXpDLEVBQStEO01BQzlELEtBQUt6VCxDQUFMLEdBQVNBLENBQVQ7TUFDQSxLQUFLQyxDQUFMLEdBQVNBLENBQVQ7TUFDQSxLQUFLdVQsS0FBTCxHQUFhQSxLQUFiO01BQ0EsS0FBS0MsTUFBTCxHQUFjQSxNQUFkO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0MsbUJBQW1CO01BQ2xCLE9BQVEsS0FBS0QsS0FBTCxJQUFjLEdBQWYsSUFBd0IsS0FBS0MsTUFBTCxJQUFlLEdBQTlDO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNDLHVCQUFjcmMsS0FBZCxFQUFxQztNQUNwQyxJQUFNdWlCLEVBQUUsR0FBR3ZpQixLQUFLLENBQUM0SSxDQUFqQjtNQUNBLElBQU00WixFQUFFLEdBQUd4aUIsS0FBSyxDQUFDNkksQ0FBakI7TUFFQSxPQUFRMFosRUFBRSxJQUFJLEtBQUszWixDQUFYLElBQWdCNFosRUFBRSxJQUFJLEtBQUszWixDQUEzQixJQUFnQzBaLEVBQUUsR0FBRyxLQUFLM1osQ0FBTCxHQUFTLEtBQUt3VCxLQUFuRCxJQUE0RG9HLEVBQUUsR0FBRyxLQUFLM1osQ0FBTCxHQUFTLEtBQUt3VCxNQUF2RjtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0Msc0JBQWExYSxJQUFiLEVBQXVDO01BQ3RDLElBQUksS0FBSzhnQixPQUFMLE1BQWtCOWdCLElBQUksQ0FBQzhnQixPQUFMLEVBQXRCLEVBQXNDO1FBQ3JDLE9BQU8sS0FBUDtNQUNBOztNQUVELElBQU03WixDQUFDLEdBQUdqSCxJQUFJLENBQUNpSCxDQUFmO01BQ0EsSUFBTUMsQ0FBQyxHQUFHbEgsSUFBSSxDQUFDa0gsQ0FBZjtNQUNBLElBQU1DLENBQUMsR0FBR25ILElBQUksQ0FBQ3lhLEtBQWY7TUFDQSxJQUFNclQsQ0FBQyxHQUFHcEgsSUFBSSxDQUFDMGEsTUFBZjtNQUNBLElBQU1xRyxFQUFFLEdBQUcsS0FBSzlaLENBQWhCO01BQ0EsSUFBTStaLEVBQUUsR0FBRyxLQUFLOVosQ0FBaEI7TUFFQSxPQUFRRCxDQUFDLElBQUk4WixFQUFMLElBQVc3WixDQUFDLElBQUk4WixFQUFoQixJQUF1Qi9aLENBQUMsR0FBR0UsQ0FBTCxJQUFXNFosRUFBRSxHQUFHLEtBQUt0RyxLQUEzQyxJQUFxRHZULENBQUMsR0FBR0UsQ0FBTCxJQUFXNFosRUFBRSxHQUFHLEtBQUt0RyxNQUFqRjtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyx3QkFBZVUsRUFBZixFQUEyQkMsRUFBM0IsRUFBdUNDLEVBQXZDLEVBQW1EQyxFQUFuRCxFQUF3RTtNQUN2RSxJQUFNMEYsSUFBSSxHQUFHLEtBQUtoYSxDQUFsQjtNQUNBLElBQU1pYSxJQUFJLEdBQUcsS0FBS2phLENBQUwsR0FBUyxLQUFLd1QsS0FBM0I7TUFDQSxJQUFNMEcsSUFBSSxHQUFHLEtBQUtqYSxDQUFsQjtNQUNBLElBQU1rYSxJQUFJLEdBQUcsS0FBS2xhLENBQUwsR0FBUyxLQUFLd1QsTUFBM0I7TUFFQSxJQUFJMkcsUUFBUSxHQUFHLEtBQUtDLFdBQUwsQ0FBaUJsRyxFQUFqQixFQUFxQkMsRUFBckIsRUFBeUI0RixJQUF6QixFQUErQkMsSUFBL0IsRUFBcUNDLElBQXJDLEVBQTJDQyxJQUEzQyxDQUFmO01BQ0EsSUFBSUcsUUFBUSxHQUFHLEtBQUtELFdBQUwsQ0FBaUJoRyxFQUFqQixFQUFxQkMsRUFBckIsRUFBeUIwRixJQUF6QixFQUErQkMsSUFBL0IsRUFBcUNDLElBQXJDLEVBQTJDQyxJQUEzQyxDQUFmOztNQUVBLE9BQU8sSUFBUCxFQUFhO1FBQ1osSUFBSSxFQUFFQyxRQUFRLEdBQUdFLFFBQWIsQ0FBSixFQUE0QjtVQUMzQixPQUFPLElBQVA7UUFDQSxDQUZELE1BR0ssSUFBSUYsUUFBUSxHQUFHRSxRQUFmLEVBQXlCO1VBQzdCLE9BQU8sS0FBUDtRQUNBLENBRkksTUFHQTtVQUNKLElBQUlDLFVBQVUsR0FBR0gsUUFBUSxHQUFHQSxRQUFILEdBQWNFLFFBQXZDO1VBQ0EsSUFBSXRhLENBQUMsU0FBTDtVQUFBLElBQU9DLENBQUMsU0FBUjs7VUFFQSxJQUFJc2EsVUFBVSxHQUFHYixHQUFqQixFQUFzQjtZQUNyQjFaLENBQUMsR0FBR21VLEVBQUUsR0FBRyxDQUFDRSxFQUFFLEdBQUdGLEVBQU4sS0FBYWdHLElBQUksR0FBRy9GLEVBQXBCLEtBQTJCRSxFQUFFLEdBQUdGLEVBQWhDLENBQVQ7WUFDQW5VLENBQUMsR0FBR2thLElBQUo7VUFDQSxDQUhELE1BSUssSUFBSUksVUFBVSxHQUFHZCxNQUFqQixFQUF5QjtZQUM3QnpaLENBQUMsR0FBR21VLEVBQUUsR0FBRyxDQUFDRSxFQUFFLEdBQUdGLEVBQU4sS0FBYStGLElBQUksR0FBRzlGLEVBQXBCLEtBQTJCRSxFQUFFLEdBQUdGLEVBQWhDLENBQVQ7WUFDQW5VLENBQUMsR0FBR2lhLElBQUo7VUFDQSxDQUhJLE1BSUEsSUFBSUssVUFBVSxHQUFHZixLQUFqQixFQUF3QjtZQUM1QnZaLENBQUMsR0FBR21VLEVBQUUsR0FBRyxDQUFDRSxFQUFFLEdBQUdGLEVBQU4sS0FBYTZGLElBQUksR0FBRzlGLEVBQXBCLEtBQTJCRSxFQUFFLEdBQUdGLEVBQWhDLENBQVQ7WUFDQW5VLENBQUMsR0FBR2lhLElBQUo7VUFDQSxDQUhJLE1BSUEsSUFBSU0sVUFBVSxHQUFHaEIsSUFBakIsRUFBdUI7WUFDM0J0WixDQUFDLEdBQUdtVSxFQUFFLEdBQUcsQ0FBQ0UsRUFBRSxHQUFHRixFQUFOLEtBQWE0RixJQUFJLEdBQUc3RixFQUFwQixLQUEyQkUsRUFBRSxHQUFHRixFQUFoQyxDQUFUO1lBQ0FuVSxDQUFDLEdBQUdnYSxJQUFKO1VBQ0E7O1VBRUQsSUFBSU8sVUFBVSxJQUFJSCxRQUFsQixFQUE0QjtZQUMzQmpHLEVBQUUsR0FBR25VLENBQUw7WUFDQW9VLEVBQUUsR0FBR25VLENBQUw7WUFDQW1hLFFBQVEsR0FBRyxLQUFLQyxXQUFMLENBQWlCbEcsRUFBakIsRUFBcUJDLEVBQXJCLEVBQXlCNEYsSUFBekIsRUFBK0JDLElBQS9CLEVBQXFDQyxJQUFyQyxFQUEyQ0MsSUFBM0MsQ0FBWDtVQUNBLENBSkQsTUFLSztZQUNKOUYsRUFBRSxHQUFHclUsQ0FBTDtZQUNBc1UsRUFBRSxHQUFHclUsQ0FBTDtZQUNBcWEsUUFBUSxHQUFHLEtBQUtELFdBQUwsQ0FBaUJoRyxFQUFqQixFQUFxQkMsRUFBckIsRUFBeUIwRixJQUF6QixFQUErQkMsSUFBL0IsRUFBcUNDLElBQXJDLEVBQTJDQyxJQUEzQyxDQUFYO1VBQ0E7UUFDRDtNQUNEO0lBQ0Q7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxzQkFBYXBoQixJQUFiLEVBQXlDO01BQ3hDLElBQU15aEIsRUFBRSxHQUFHOUYsSUFBSSxDQUFDdEssR0FBTCxDQUFTLEtBQUtwSyxDQUFkLEVBQWlCakgsSUFBSSxDQUFDaUgsQ0FBdEIsQ0FBWDtNQUNBLElBQU15YSxFQUFFLEdBQUcvRixJQUFJLENBQUN0SyxHQUFMLENBQVMsS0FBS25LLENBQWQsRUFBaUJsSCxJQUFJLENBQUNrSCxDQUF0QixDQUFYO01BQ0EsSUFBTXlhLEVBQUUsR0FBR2hHLElBQUksQ0FBQ3NFLEdBQUwsQ0FBUyxLQUFLaFosQ0FBTCxHQUFTLEtBQUt3VCxLQUF2QixFQUE4QnphLElBQUksQ0FBQ2lILENBQUwsR0FBU2pILElBQUksQ0FBQ3lhLEtBQTVDLElBQXFEZ0gsRUFBaEU7TUFDQSxJQUFNRyxFQUFFLEdBQUdqRyxJQUFJLENBQUNzRSxHQUFMLENBQVMsS0FBSy9ZLENBQUwsR0FBUyxLQUFLd1QsTUFBdkIsRUFBK0IxYSxJQUFJLENBQUNrSCxDQUFMLEdBQVNsSCxJQUFJLENBQUMwYSxNQUE3QyxJQUF1RGdILEVBQWxFOztNQUVBLElBQUlDLEVBQUUsSUFBSSxDQUFWLEVBQWE7UUFDWixPQUFPLElBQVA7TUFDQTs7TUFDRCxJQUFJQyxFQUFFLElBQUksQ0FBVixFQUFhO1FBQ1osT0FBTyxJQUFQO01BQ0E7O01BRUQsT0FBTyxJQUFJOWYsU0FBSixDQUFjMmYsRUFBZCxFQUFrQkMsRUFBbEIsRUFBc0JDLEVBQXRCLEVBQTBCQyxFQUExQixDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxlQUFNNWhCLElBQU4sRUFBNkI7TUFDNUIsSUFBTW9iLEVBQUUsR0FBR08sSUFBSSxDQUFDc0UsR0FBTCxDQUFTLEtBQUtoWixDQUFkLEVBQWlCakgsSUFBSSxDQUFDaUgsQ0FBdEIsQ0FBWDtNQUNBLElBQU1vVSxFQUFFLEdBQUdNLElBQUksQ0FBQ3NFLEdBQUwsQ0FBUyxLQUFLL1ksQ0FBZCxFQUFpQmxILElBQUksQ0FBQ2tILENBQXRCLENBQVg7TUFDQSxJQUFNb1UsRUFBRSxHQUFHSyxJQUFJLENBQUN0SyxHQUFMLENBQVMsS0FBS3BLLENBQUwsR0FBUyxLQUFLd1QsS0FBdkIsRUFBOEJ6YSxJQUFJLENBQUNpSCxDQUFMLEdBQVNqSCxJQUFJLENBQUN5YSxLQUE1QyxDQUFYO01BQ0EsSUFBTWMsRUFBRSxHQUFHSSxJQUFJLENBQUN0SyxHQUFMLENBQVMsS0FBS25LLENBQUwsR0FBUyxLQUFLd1QsTUFBdkIsRUFBK0IxYSxJQUFJLENBQUNrSCxDQUFMLEdBQVNsSCxJQUFJLENBQUMwYSxNQUE3QyxDQUFYO01BRUEsS0FBSy9SLEdBQUwsQ0FBU3lTLEVBQVQsRUFBYUMsRUFBYixFQUFpQkMsRUFBRSxHQUFHRixFQUF0QixFQUEwQkcsRUFBRSxHQUFHRixFQUEvQjtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxnQkFBT3pHLEtBQVAsRUFBa0M7TUFDakMsSUFBSSxDQUFDQSxLQUFMLEVBQVk7UUFDWCxPQUFPLEtBQVA7TUFDQTs7TUFFRCxPQUFPLEtBQUszTixDQUFMLEtBQVcyTixLQUFLLENBQUMzTixDQUFqQixJQUFzQixLQUFLQyxDQUFMLEtBQVcwTixLQUFLLENBQUMxTixDQUF2QyxJQUE0QyxLQUFLdVQsS0FBTCxLQUFlN0YsS0FBSyxDQUFDNkYsS0FBakUsSUFBMEUsS0FBS0MsTUFBTCxLQUFnQjlGLEtBQUssQ0FBQzhGLE1BQXZHO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyxvQkFBbUI7TUFDbEIsa0JBQVcsS0FBS3pULENBQWhCLGVBQXNCLEtBQUtDLENBQTNCLGVBQWlDLEtBQUt3VCxNQUF0QyxlQUFpRCxLQUFLRCxLQUF0RDtJQUNBO0lBRUQ7QUFDRDtBQUNBOzs7O1dBS0MscUJBQW9CeFQsQ0FBcEIsRUFBK0JDLENBQS9CLEVBQTBDK1osSUFBMUMsRUFBd0RDLElBQXhELEVBQXNFQyxJQUF0RSxFQUFvRkMsSUFBcEYsRUFBMEc7TUFDekcsSUFBSVMsSUFBSSxHQUFHdEIsTUFBWDs7TUFFQSxJQUFJdFosQ0FBQyxHQUFHZ2EsSUFBUixFQUFjO1FBQ2JZLElBQUksSUFBSXJCLElBQVI7TUFDQSxDQUZELE1BR0ssSUFBSXZaLENBQUMsR0FBR2lhLElBQVIsRUFBYztRQUNsQlcsSUFBSSxJQUFJcEIsS0FBUjtNQUNBOztNQUVELElBQUl2WixDQUFDLEdBQUdpYSxJQUFSLEVBQWM7UUFDYlUsSUFBSSxJQUFJbkIsTUFBUjtNQUNBLENBRkQsTUFHSyxJQUFJeFosQ0FBQyxHQUFHa2EsSUFBUixFQUFjO1FBQ2xCUyxJQUFJLElBQUlsQixHQUFSO01BQ0E7O01BRUQsT0FBT2tCLElBQVA7SUFDQTs7O1dBdEJELGlCQUEwQjtNQUN6QixPQUFPLElBQUkvZixTQUFKLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUF1QixDQUF2QixDQUFQO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyT0Y7O0lBRU1tVDtFQUVMOztFQUlBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDQyxtQkFBWUssQ0FBWixFQUEwQjtJQUFBOztJQUFBOztJQUN6QixLQUFLQSxDQUFMLEdBQVNBLENBQUMsR0FBR0EsQ0FBQyxDQUFDd00sS0FBRixDQUFRLENBQVIsRUFBVyxDQUFYLENBQUgsR0FBbUIsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQixDQUFoQixDQUE3QjtFQUNBO0VBRUQ7QUFDRDtBQUNBOzs7OztXQUNDLHFCQUFvQjtNQUNuQixPQUFPLEtBQUt4TSxDQUFMLENBQU8sQ0FBUCxDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyxxQkFBb0I7TUFDbkIsT0FBTyxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyxxQkFBb0I7TUFDbkIsT0FBTyxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyxxQkFBb0I7TUFDbkIsT0FBTyxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyx5QkFBd0I7TUFDdkIsT0FBTyxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyx5QkFBd0I7TUFDdkIsT0FBTyxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0MsaUJBQW1CO01BQ2xCLE9BQU8sSUFBSUwsU0FBSixDQUFjLEtBQUtLLENBQW5CLENBQVA7SUFDQTtJQUVEO0FBQ0Q7QUFDQTs7OztXQUNDLGlCQUFjO01BQ2IsS0FBS0ssU0FBTCxDQUFlLENBQWYsRUFBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsRUFBMkIsQ0FBM0IsRUFBOEIsQ0FBOUI7SUFDQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNDLHNCQUFhZSxTQUFiLEVBQXlDO01BQ3hDLEtBQUtwQixDQUFMLENBQU8sQ0FBUCxJQUFZb0IsU0FBUyxDQUFDcUwsU0FBVixFQUFaO01BQ0EsS0FBS3pNLENBQUwsQ0FBTyxDQUFQLElBQVlvQixTQUFTLENBQUNzTCxTQUFWLEVBQVo7TUFDQSxLQUFLMU0sQ0FBTCxDQUFPLENBQVAsSUFBWW9CLFNBQVMsQ0FBQ3VMLFNBQVYsRUFBWjtNQUNBLEtBQUszTSxDQUFMLENBQU8sQ0FBUCxJQUFZb0IsU0FBUyxDQUFDd0wsU0FBVixFQUFaO01BQ0EsS0FBSzVNLENBQUwsQ0FBTyxDQUFQLElBQVlvQixTQUFTLENBQUN5TCxhQUFWLEVBQVo7TUFDQSxLQUFLN00sQ0FBTCxDQUFPLENBQVAsSUFBWW9CLFNBQVMsQ0FBQzBMLGFBQVYsRUFBWjtJQUNBO0lBRUQ7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxtQkFBVXhNLENBQVYsRUFBcUJDLENBQXJCLEVBQWdDQyxDQUFoQyxFQUEyQ0MsQ0FBM0MsRUFBc0R4SCxDQUF0RCxFQUFpRXlILENBQWpFLEVBQWtGO01BQ2pGLEtBQUtWLENBQUwsQ0FBTyxDQUFQLElBQVlNLENBQVo7TUFDQSxLQUFLTixDQUFMLENBQU8sQ0FBUCxJQUFZTyxDQUFaO01BQ0EsS0FBS1AsQ0FBTCxDQUFPLENBQVAsSUFBWVEsQ0FBWjtNQUNBLEtBQUtSLENBQUwsQ0FBTyxDQUFQLElBQVlTLENBQVo7TUFDQSxLQUFLVCxDQUFMLENBQU8sQ0FBUCxJQUFZL0csQ0FBWjtNQUNBLEtBQUsrRyxDQUFMLENBQU8sQ0FBUCxJQUFZVSxDQUFaO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyxrQkFBZTtNQUNkLElBQU1ELENBQUMsR0FBRyxLQUFLLEtBQUtULENBQUwsQ0FBTyxDQUFQLElBQVksS0FBS0EsQ0FBTCxDQUFPLENBQVAsQ0FBWixHQUF3QixLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLENBQXpDLENBQVY7TUFFQSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlTLENBQXhCO01BQ0EsS0FBS1QsQ0FBTCxDQUFPLENBQVAsSUFBWSxDQUFDLEtBQUtBLENBQUwsQ0FBTyxDQUFQLENBQUQsR0FBYVMsQ0FBekI7TUFDQSxLQUFLVCxDQUFMLENBQU8sQ0FBUCxJQUFZLENBQUMsS0FBS0EsQ0FBTCxDQUFPLENBQVAsQ0FBRCxHQUFhUyxDQUF6QjtNQUNBLEtBQUtULENBQUwsQ0FBTyxDQUFQLElBQVksS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWVMsQ0FBeEI7TUFDQSxLQUFLVCxDQUFMLENBQU8sQ0FBUCxJQUFZUyxDQUFDLElBQUksS0FBS1QsQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUFaLEdBQXdCLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVksS0FBS0EsQ0FBTCxDQUFPLENBQVAsQ0FBeEMsQ0FBYjtNQUNBLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlTLENBQUMsSUFBSSxLQUFLVCxDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLENBQVosR0FBd0IsS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxDQUF4QyxDQUFiO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0Msa0JBQVNvQixTQUFULEVBQXFDO01BQ3BDLEtBQUtwQixDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlvQixTQUFTLENBQUNwQixDQUFWLENBQVksQ0FBWixDQUFaLEdBQTZCLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlvQixTQUFTLENBQUNwQixDQUFWLENBQVksQ0FBWixDQUFyRDtNQUNBLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVksS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWW9CLFNBQVMsQ0FBQ3BCLENBQVYsQ0FBWSxDQUFaLENBQVosR0FBNkIsS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWW9CLFNBQVMsQ0FBQ3BCLENBQVYsQ0FBWSxDQUFaLENBQXJEO01BQ0EsS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZb0IsU0FBUyxDQUFDcEIsQ0FBVixDQUFZLENBQVosQ0FBWixHQUE2QixLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZb0IsU0FBUyxDQUFDcEIsQ0FBVixDQUFZLENBQVosQ0FBckQ7TUFDQSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlvQixTQUFTLENBQUNwQixDQUFWLENBQVksQ0FBWixDQUFaLEdBQTZCLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlvQixTQUFTLENBQUNwQixDQUFWLENBQVksQ0FBWixDQUFyRDtNQUNBLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVksS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWW9CLFNBQVMsQ0FBQ3BCLENBQVYsQ0FBWSxDQUFaLENBQVosR0FBNkIsS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWW9CLFNBQVMsQ0FBQ3BCLENBQVYsQ0FBWSxDQUFaLENBQXpDLEdBQTBELEtBQUtBLENBQUwsQ0FBTyxDQUFQLENBQXRFO01BQ0EsS0FBS0EsQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZb0IsU0FBUyxDQUFDcEIsQ0FBVixDQUFZLENBQVosQ0FBWixHQUE2QixLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZb0IsU0FBUyxDQUFDcEIsQ0FBVixDQUFZLENBQVosQ0FBekMsR0FBMEQsS0FBS0EsQ0FBTCxDQUFPLENBQVAsQ0FBdEU7SUFDQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxnQkFBTzRCLEtBQVAsRUFBNEI7TUFDM0IsSUFBTXBCLENBQUMsR0FBRzZGLElBQUksQ0FBQ21FLEdBQUwsQ0FBUzVJLEtBQVQsQ0FBVjtNQUNBLElBQU1rSSxDQUFDLEdBQUd6RCxJQUFJLENBQUNvRSxHQUFMLENBQVM3SSxLQUFULENBQVY7TUFFQSxLQUFLNUIsQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZUSxDQUFaLEdBQWdCLEtBQUtSLENBQUwsQ0FBTyxDQUFQLElBQVk4SixDQUF4QztNQUNBLEtBQUs5SixDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVksQ0FBQzhKLENBQWIsR0FBaUIsS0FBSzlKLENBQUwsQ0FBTyxDQUFQLElBQVlRLENBQXpDO01BQ0EsS0FBS1IsQ0FBTCxDQUFPLENBQVAsSUFBWSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZUSxDQUFaLEdBQWdCLEtBQUtSLENBQUwsQ0FBTyxDQUFQLElBQVk4SixDQUF4QztNQUNBLEtBQUs5SixDQUFMLENBQU8sQ0FBUCxJQUFZLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVksQ0FBQzhKLENBQWIsR0FBaUIsS0FBSzlKLENBQUwsQ0FBTyxDQUFQLElBQVlRLENBQXpDO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxlQUFNdU0sRUFBTixFQUFrQkMsRUFBbEIsRUFBb0M7TUFDbkMsS0FBS2hOLENBQUwsQ0FBTyxDQUFQLEtBQWErTSxFQUFiO01BQ0EsS0FBSy9NLENBQUwsQ0FBTyxDQUFQLEtBQWErTSxFQUFiO01BQ0EsS0FBSy9NLENBQUwsQ0FBTyxDQUFQLEtBQWFnTixFQUFiO01BQ0EsS0FBS2hOLENBQUwsQ0FBTyxDQUFQLEtBQWFnTixFQUFiO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDQyxtQkFBVXJiLENBQVYsRUFBcUJDLENBQXJCLEVBQXNDO01BQ3JDLEtBQUtvTyxDQUFMLENBQU8sQ0FBUCxLQUFhLEtBQUtBLENBQUwsQ0FBTyxDQUFQLElBQVlyTyxDQUFaLEdBQWdCLEtBQUtxTyxDQUFMLENBQU8sQ0FBUCxJQUFZcE8sQ0FBekM7TUFDQSxLQUFLb08sQ0FBTCxDQUFPLENBQVAsS0FBYSxLQUFLQSxDQUFMLENBQU8sQ0FBUCxJQUFZck8sQ0FBWixHQUFnQixLQUFLcU8sQ0FBTCxDQUFPLENBQVAsSUFBWXBPLENBQXpDO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0Msd0JBQWUwWixFQUFmLEVBQTJCQyxFQUEzQixFQUE4QztNQUM3QyxJQUFNNVosQ0FBQyxHQUFHMlosRUFBVjtNQUNBLElBQU0xWixDQUFDLEdBQUcyWixFQUFWO01BRUFELEVBQUUsR0FBRzNaLENBQUMsR0FBRyxLQUFLcU8sQ0FBTCxDQUFPLENBQVAsQ0FBSixHQUFnQnBPLENBQUMsR0FBRyxLQUFLb08sQ0FBTCxDQUFPLENBQVAsQ0FBcEIsR0FBZ0MsS0FBS0EsQ0FBTCxDQUFPLENBQVAsQ0FBckM7TUFDQXVMLEVBQUUsR0FBRzVaLENBQUMsR0FBRyxLQUFLcU8sQ0FBTCxDQUFPLENBQVAsQ0FBSixHQUFnQnBPLENBQUMsR0FBRyxLQUFLb08sQ0FBTCxDQUFPLENBQVAsQ0FBcEIsR0FBZ0MsS0FBS0EsQ0FBTCxDQUFPLENBQVAsQ0FBckM7TUFFQSxPQUFPLElBQUloVCx5Q0FBSixDQUFVc2UsRUFBVixFQUFjQyxFQUFkLENBQVA7SUFDQTtJQUVEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O1dBQ0MsZ0JBQU9qTSxLQUFQLEVBQWtDO01BQ2pDLElBQUksQ0FBQ0EsS0FBTCxFQUFZO1FBQ1gsT0FBTyxLQUFQO01BQ0E7O01BRUQsT0FBTyxLQUFLVSxDQUFMLENBQU9aLE1BQVAsQ0FBY0UsS0FBSyxDQUFDVSxDQUFwQixDQUFQO0lBQ0E7SUFFRDtBQUNEO0FBQ0E7Ozs7V0FDQyxvQkFBbUI7TUFDbEIsT0FBTyxNQUFNLEtBQUtBLENBQUwsQ0FBT2lOLElBQVAsQ0FBWSxJQUFaLENBQU4sR0FBMEIsR0FBakM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ2xPSUM7RUFLTCxxQkFBWUMsS0FBWixFQUFxQztJQUFBOztJQUFBOztJQUNwQyxLQUFLQSxLQUFMLEdBQWFBLEtBQWI7RUFDQTs7OztTQUVELGFBQVdDLE1BQVgsRUFBMkI7TUFDMUIsS0FBS0QsS0FBTCxDQUFXRSxHQUFYLEdBQWlCRCxNQUFqQjtJQUNBOzs7U0FFRCxlQUF1QjtNQUN0QixPQUFPLEtBQUtELEtBQUwsQ0FBV2pRLFFBQWxCO0lBQ0E7OztTQU1ELGVBQW1CO01BQ2xCLE9BQU8sS0FBS2lRLEtBQUwsQ0FBV0csV0FBbEI7SUFDQTtTQU5ELGFBQVMxVSxJQUFULEVBQXVCO01BQ3RCLEtBQUt1VSxLQUFMLENBQVdHLFdBQVgsR0FBeUIxVSxJQUF6QjtJQUNBOzs7U0FVRCxlQUFxQjtNQUNwQixPQUFPLEtBQUt1VSxLQUFMLENBQVc5UCxLQUFsQjtJQUNBO1NBTkQsYUFBVUEsS0FBVixFQUEwQjtNQUN6QixLQUFLOFAsS0FBTCxDQUFXOVAsS0FBWCxHQUFtQkEsS0FBbkI7SUFDQTs7O1NBVUQsZUFBcUI7TUFDcEIsT0FBTyxLQUFLOFAsS0FBTCxDQUFXL1AsTUFBbEI7SUFDQTtTQU5ELGFBQVdBLE1BQVgsRUFBMkI7TUFDMUIsS0FBSytQLEtBQUwsQ0FBVy9QLE1BQVgsR0FBb0JBLE1BQXBCO0lBQ0E7OztXQU1ELGlCQUFjO01BQ2IsS0FBSytQLEtBQUwsQ0FBV0ksSUFBWDtJQUNBOzs7V0FFRCxnQkFBYTtNQUNaLEtBQUtKLEtBQUwsQ0FBV0ssS0FBWDtJQUNBOzs7V0FFRCw2QkFBb0JDLFFBQXBCLEVBQWdFO01BQUE7O01BQy9ELEtBQUtOLEtBQUwsQ0FBVzlSLGdCQUFYLENBQTRCLGdCQUE1QixFQUE4QyxZQUFNO1FBQ25Eb1MsUUFBUSxDQUFDLEtBQUksQ0FBQ04sS0FBTCxDQUFXalEsUUFBWixDQUFSO01BQ0EsQ0FGRCxFQUVHLEtBRkg7SUFHQTs7O1dBRUQseUJBQWdCdVEsUUFBaEIsRUFBd0Q7TUFBQTs7TUFDdkQsS0FBS04sS0FBTCxDQUFXOVIsZ0JBQVgsQ0FBNEIsWUFBNUIsRUFBMEMsWUFBTTtRQUMvQ29TLFFBQVEsQ0FBQyxNQUFJLENBQUNOLEtBQUwsQ0FBV0csV0FBWixDQUFSO01BQ0EsQ0FGRCxFQUVHLEtBRkg7SUFHQTs7O1dBRUQsMkJBQWtCRyxRQUFsQixFQUE0RDtNQUFBOztNQUMzRCxLQUFLTixLQUFMLENBQVc5UixnQkFBWCxDQUE0QixjQUE1QixFQUE0QyxZQUFNO1FBQ2pEb1MsUUFBUSxDQUFDLE1BQUksQ0FBQ04sS0FBTCxDQUFXL1AsTUFBWixDQUFSO01BQ0EsQ0FGRCxFQUVHLEtBRkg7SUFHQTs7O1dBRUQsMEJBQWlCcVEsUUFBakIsRUFBMkQ7TUFBQTs7TUFDMUQsS0FBS04sS0FBTCxDQUFXOVIsZ0JBQVgsQ0FBNEIsY0FBNUIsRUFBNEMsWUFBTTtRQUNqRG9TLFFBQVEsQ0FBQyxNQUFJLENBQUNOLEtBQUwsQ0FBVzlQLEtBQVosQ0FBUjtNQUNBLENBRkQsRUFFRyxLQUZIO0lBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNyRUlxUTtFQVNMLHVCQUFZQyxLQUFaLEVBQXNCO0lBQUE7O0lBQUEsMkdBUGEsRUFPYjs7SUFBQSwyR0FMYSxFQUtiOztJQUFBOztJQUNyQixLQUFLQSxLQUFMLEdBQWFBLEtBQWI7RUFDQTs7OztXQUVELHVCQUFjbmdCLE1BQWQsRUFBdUM7TUFDdEMsS0FBS29nQixXQUFMLENBQWlCdGIsSUFBakIsQ0FBc0I5RSxNQUF0QjtNQUNBLEtBQUtxZ0IsV0FBTCxDQUFpQnRnQixNQUFqQixHQUEwQixDQUExQjtNQUVBQyxNQUFNLENBQUN0RSxPQUFQLENBQWUsS0FBS3lrQixLQUFwQjtJQUNBOzs7V0FFRCxnQkFBYTtNQUNaLElBQUksS0FBS0MsV0FBTCxDQUFpQnJnQixNQUFqQixHQUEwQixDQUE5QixFQUFpQztRQUNoQztNQUNBOztNQUVELElBQU1DLE1BQU0sR0FBRyxLQUFLb2dCLFdBQUwsQ0FBaUI1TCxHQUFqQixFQUFmO01BQ0EsS0FBSzZMLFdBQUwsQ0FBaUJ2YixJQUFqQixDQUFzQjlFLE1BQXRCO01BQ0FBLE1BQU0sQ0FBQ3NnQixJQUFQLENBQVksS0FBS0gsS0FBakI7SUFDQTs7O1dBRUQsZ0JBQWE7TUFDWixJQUFJLEtBQUtFLFdBQUwsQ0FBaUJ0Z0IsTUFBakIsR0FBMEIsQ0FBOUIsRUFBaUM7UUFDaEM7TUFDQTs7TUFFRCxJQUFNQyxNQUFNLEdBQUcsS0FBS3FnQixXQUFMLENBQWlCN0wsR0FBakIsRUFBZjtNQUNBLEtBQUs0TCxXQUFMLENBQWlCdGIsSUFBakIsQ0FBc0I5RSxNQUF0QjtNQUNBQSxNQUFNLENBQUN1Z0IsSUFBUCxDQUFZLEtBQUtKLEtBQWpCO0lBQ0E7OztXQUVELGlCQUFjO01BQ2IsS0FBS0MsV0FBTCxDQUFpQnJnQixNQUFqQixHQUEwQixDQUExQjtNQUNBLEtBQUtzZ0IsV0FBTCxDQUFpQnRnQixNQUFqQixHQUEwQixDQUExQjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0NGOztJQUlNMGdCOzs7OztFQUVMLHdCQUFZQyxNQUFaLEVBQTZCO0lBQUE7O0lBQUEseUJBQ3RCQSxNQURzQjtFQUU1Qjs7OztXQUVELGlCQUFRMWxCLElBQVIsRUFBMEI7TUFBQSwyQ0FDUCxLQUFLMGxCLE1BREU7TUFBQTs7TUFBQTtRQUN6QixvREFBK0I7VUFBQSxJQUF0QkMsS0FBc0I7VUFDOUIzbEIsSUFBSSxDQUFDNGxCLFFBQUwsQ0FBY0QsS0FBZDtRQUNBO01BSHdCO1FBQUE7TUFBQTtRQUFBO01BQUE7SUFJekI7OztXQUVELGNBQUszbEIsSUFBTCxFQUF1QjtNQUFBLDRDQUNKLEtBQUswbEIsTUFERDtNQUFBOztNQUFBO1FBQ3RCLHVEQUErQjtVQUFBLElBQXRCQyxLQUFzQjtVQUM5QjNsQixJQUFJLENBQUM2bEIsV0FBTCxDQUFpQkYsS0FBakI7UUFDQTtNQUhxQjtRQUFBO01BQUE7UUFBQTtNQUFBO0lBSXRCOzs7V0FFRCxjQUFLM2xCLElBQUwsRUFBdUI7TUFDdEIsS0FBS1UsT0FBTCxDQUFhVixJQUFiO0lBQ0E7Ozs7RUFwQjJCd2xCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKN0I7O0lBSU1NOzs7OztFQUVMLDJCQUFZSixNQUFaLEVBQTZCO0lBQUE7O0lBQUEseUJBQ3RCQSxNQURzQjtFQUU1Qjs7OztXQUVELGlCQUFRMWxCLElBQVIsRUFBMEI7TUFBQSwyQ0FDUCxLQUFLMGxCLE1BREU7TUFBQTs7TUFBQTtRQUN6QixvREFBK0I7VUFBQSxJQUF0QkMsS0FBc0I7VUFDOUIzbEIsSUFBSSxDQUFDNmxCLFdBQUwsQ0FBaUJGLEtBQWpCO1FBQ0E7TUFId0I7UUFBQTtNQUFBO1FBQUE7TUFBQTtJQUl6Qjs7O1dBRUQsY0FBSzNsQixJQUFMLEVBQXVCO01BQUEsNENBQ0osS0FBSzBsQixNQUREO01BQUE7O01BQUE7UUFDdEIsdURBQStCO1VBQUEsSUFBdEJDLEtBQXNCO1VBQzlCM2xCLElBQUksQ0FBQzRsQixRQUFMLENBQWNELEtBQWQ7UUFDQTtNQUhxQjtRQUFBO01BQUE7UUFBQTtNQUFBO0lBSXRCOzs7V0FFRCxjQUFLM2xCLElBQUwsRUFBdUI7TUFDdEIsS0FBS1UsT0FBTCxDQUFhVixJQUFiO0lBQ0E7Ozs7RUFwQjhCd2xCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNBakJBLDhHQUtkLHFCQUFZRSxNQUFaLEVBQTZCO0VBQUE7O0VBQUE7O0VBQzVCLEtBQUtBLE1BQUwsR0FBY0EsTUFBZDtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNQYUs7RUFjZCx5QkFBYztJQUFBOztJQUFBOztJQUFBO0VBRWI7Ozs7V0FFRCx5QkFBd0I7TUFDdkIsT0FBTyxLQUFLOVUsVUFBWjtJQUNBOzs7V0FFRCx1QkFBYytVLEVBQWQsRUFBZ0M7TUFDL0IsS0FBSy9VLFVBQUwsR0FBa0IrVSxFQUFsQjtJQUNBOzs7V0FFRCx3QkFBdUI7TUFDdEIsT0FBTyxLQUFLQyxLQUFMLENBQVdsaEIsTUFBbEI7SUFDQTs7O1dBRUQsaUJBQVFoRixVQUFSLEVBQWtDO01BQ2pDLElBQUlBLFVBQVUsR0FBRyxDQUFiLElBQWtCQSxVQUFVLEdBQUcsS0FBS2ttQixLQUFMLENBQVdsaEIsTUFBWCxHQUFvQixDQUF2RCxFQUEwRDtRQUN6RCxNQUFNLElBQUkzRSxLQUFKLHVCQUF5QkwsVUFBekIscUJBQU47TUFDQTs7TUFDRCxPQUFPLEtBQUtrbUIsS0FBTCxDQUFXbG1CLFVBQVgsQ0FBUDtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ25DSW1tQjtFQVdMLG1CQUFZbG1CLElBQVosRUFBd0JtbUIsVUFBeEIsRUFBb0RSLEtBQXBELEVBQW1FUyxXQUFuRSxFQUE0RjtJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUMzRixLQUFLQyxLQUFMLEdBQWFybUIsSUFBYjtJQUNBLEtBQUtzbUIsV0FBTCxHQUFtQkgsVUFBbkI7SUFDQSxLQUFLSSxNQUFMLEdBQWNaLEtBQWQ7SUFDQSxLQUFLYSxZQUFMLEdBQW9CSixXQUFwQjtFQUNBOzs7O1NBRUQsZUFBaUM7TUFDaEMsT0FBTyxLQUFLRSxXQUFaO0lBQ0E7OztTQUVELGVBQWlCO01BQ2hCLE9BQU8sS0FBS0QsS0FBWjtJQUNBOzs7U0FFRCxlQUFtQjtNQUNsQixPQUFPLEtBQUtFLE1BQVo7SUFDQTs7O1NBRUQsZUFBNkI7TUFDNUIsT0FBTyxLQUFLQyxZQUFaO0lBQ0E7Ozs7OztJQUdHQzs7V0FBQUE7RUFBQUE7RUFBQUE7RUFBQUE7RUFBQUE7RUFBQUE7R0FBQUEsbUJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2Q0w7QUFHQTtBQUVBO0FBQ0E7O0lBS01HO0VBaUJMLGNBQVk5bUIsUUFBWixFQUFxQ0MsVUFBckMsRUFBeUQ7SUFBQTs7SUFBQTs7SUFBQSw2R0FieEIsSUFBSW1sQixpRUFBSixDQUF3QixJQUF4QixDQWF3Qjs7SUFBQSwyR0FYMUIsSUFBSXdCLDZEQUFKLEVBVzBCOztJQUFBLHNHQVR0QixFQVNzQjs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDeEQsS0FBSzVtQixRQUFMLEdBQWdCQSxRQUFoQjtJQUNBLEtBQUtDLFVBQUwsR0FBa0JBLFVBQWxCO0lBQ0EsS0FBSzhtQixVQUFMLEdBQWtCLElBQUlGLDBEQUFKLENBQWUsSUFBZixDQUFsQjtJQUNBLEtBQUtFLFVBQUwsQ0FBZ0JDLGlCQUFoQixDQUFrQyxLQUFLQyxnQkFBTCxDQUFzQmpXLElBQXRCLENBQTJCLElBQTNCLENBQWxDO0lBRUEsS0FBS2tXLG1CQUFMLEdBQTJCLEtBQUtDLGVBQUwsQ0FBcUJuVyxJQUFyQixDQUEwQixJQUExQixDQUEzQjtFQUNBOzs7O1dBRUQsZ0JBQU9vVyxPQUFQLEVBQTBDQyxRQUExQyxFQUErRGYsV0FBL0QsRUFBbUg7TUFDbEgsT0FBTyxLQUFLdG1CLFFBQUwsQ0FBY3NuQixVQUFkLENBQXlCLEtBQUtybkIsVUFBOUIsRUFBMENtbkIsT0FBMUMsRUFBbURDLFFBQW5ELEVBQTZEZixXQUE3RCxDQUFQO0lBQ0E7OztXQUVELG9CQUFXaUIsSUFBWCxFQUE4QjVRLElBQTlCLEVBQStDO01BQzlDLEtBQUszVyxRQUFMLENBQWN3bkIsY0FBZCxDQUE2QixLQUFLdm5CLFVBQWxDLEVBQThDc25CLElBQTlDLEVBQW9ENVEsSUFBcEQsRUFBMEQsS0FBSzhRLGFBQUwsR0FBcUJDLE1BQS9FO0lBQ0E7OztXQUVELDJCQUFrQnZDLFFBQWxCLEVBQTZEO01BQzVELE9BQU8sS0FBS3dDLFdBQUwsQ0FBaUJ6UixTQUFqQixDQUEyQmlQLFFBQTNCLENBQVA7SUFDQTs7O1dBRUQsOEJBQXFCQSxRQUFyQixFQUEwRDtNQUN6RCxLQUFLd0MsV0FBTCxDQUFpQkMsV0FBakIsQ0FBNkJ6QyxRQUE3QjtJQUNBOzs7V0FFRCxrQkFBU1UsS0FBVCxFQUF1QjtNQUN0QixJQUFNZ0MsU0FBUyxHQUFHLEtBQUtqQyxNQUFMLENBQVkzZ0IsTUFBOUI7O01BRUEsSUFBSSxLQUFLMmdCLE1BQUwsQ0FBWTViLElBQVosQ0FBaUI2YixLQUFqQixJQUEwQmdDLFNBQTlCLEVBQXlDO1FBQ3hDaEMsS0FBSyxDQUFDbUIsaUJBQU4sQ0FBd0IsS0FBS0UsbUJBQTdCO1FBRUEsS0FBS1ksYUFBTCxDQUFtQixJQUFJMUIsa0RBQUosQ0FBYyxJQUFkLEVBQW9CTyxrRUFBcEIsRUFBK0NkLEtBQS9DLENBQW5CO01BQ0E7SUFDRDs7O1dBRUQscUJBQVlBLEtBQVosRUFBMEI7TUFDekIsSUFBTW1DLFVBQVUsR0FBRyxLQUFLcEMsTUFBTCxDQUFZcUMsT0FBWixDQUFvQnBDLEtBQXBCLENBQW5COztNQUVBLElBQUltQyxVQUFVLEdBQUcsQ0FBQyxDQUFsQixFQUFxQjtRQUNwQixJQUFNRSxPQUFPLEdBQUcsS0FBS3RDLE1BQUwsQ0FBWXVDLE1BQVosQ0FBbUJILFVBQW5CLEVBQStCLENBQS9CLENBQWhCOztRQUVBLElBQUlFLE9BQU8sQ0FBQ2pqQixNQUFSLEdBQWlCLENBQXJCLEVBQXdCO1VBQ3ZCNGdCLEtBQUssQ0FBQ3VDLG9CQUFOLENBQTJCLEtBQUtsQixtQkFBaEM7VUFFQSxLQUFLWSxhQUFMLENBQW1CLElBQUkxQixrREFBSixDQUFjLElBQWQsRUFBb0JPLG9FQUFwQixFQUFpRGQsS0FBakQsQ0FBbkI7UUFDQTtNQUNEO0lBQ0Q7OztXQUVELHlCQUF3QjtNQUN2QixPQUFPLEtBQUs1bEIsVUFBWjtJQUNBOzs7V0FFRCx5QkFBNEI7TUFDM0IsT0FBTyxLQUFLOG1CLFVBQVo7SUFDQTs7O1dBRUQscUJBQXFCO01BQ3BCLE9BQU8sS0FBS25CLE1BQVo7SUFDQTs7O1dBRUQscUJBQXFCO01BQ3BCLE9BQU8sS0FBS0EsTUFBTCxDQUFZM2dCLE1BQVosR0FBcUIsQ0FBNUI7SUFDQTs7O1dBRUQsbUJBQVVDLE1BQVYsRUFBZ0M7TUFDL0IsS0FBS29qQixhQUFMLENBQW1CQyxhQUFuQixDQUFpQ3JqQixNQUFqQztJQUNBOzs7V0FFRCxnQkFBYTtNQUNaLEtBQUtvakIsYUFBTCxDQUFtQjlDLElBQW5CO0lBQ0E7OztXQUVELGdCQUFhO01BQ1osS0FBSzhDLGFBQUwsQ0FBbUI3QyxJQUFuQjtJQUNBOzs7V0FFRCxpQkFBYztNQUNiLEtBQUs2QyxhQUFMLENBQW1CRSxLQUFuQjtNQUNBLEtBQUs1QyxNQUFMLENBQVkzZ0IsTUFBWixHQUFxQixDQUFyQjtNQUVBLEtBQUs2aUIsYUFBTCxDQUFtQixJQUFJMUIsa0RBQUosQ0FBYyxJQUFkLEVBQW9CTyw2REFBcEIsRUFBMEMsSUFBMUMsQ0FBbkI7SUFDQTs7O1dBRUQsMEJBQXlCL1EsS0FBekIsRUFBa0Q7TUFDakQsS0FBS2tTLGFBQUwsQ0FBbUIsSUFBSTFCLGtEQUFKLENBQWMsSUFBZCxFQUFvQk8scUVBQXBCLEVBQWtEL1EsS0FBSyxDQUFDaVEsS0FBeEQsRUFBK0RqUSxLQUFLLENBQUMwUSxXQUFyRSxDQUFuQjtJQUNBOzs7V0FFRCx5QkFBd0IxUSxLQUF4QixFQUFpRDtNQUNoRCxLQUFLa1MsYUFBTCxDQUFtQixJQUFJMUIsa0RBQUosQ0FBYyxJQUFkLEVBQW9CTyxxRUFBcEIsRUFBa0QvUSxLQUFLLENBQUNpUSxLQUF4RCxFQUErRGpRLEtBQUssQ0FBQzBRLFdBQXJFLENBQW5CO0lBQ0E7OztXQUVELHVCQUFzQjFRLEtBQXRCLEVBQThDO01BQzdDLEtBQUsrUixXQUFMLENBQWlCaUIsT0FBakIsQ0FBeUJoVCxLQUF6QjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUhGO0FBQ0E7QUFHQTtBQUNBOztJQUdNbVQ7Ozs7O0VBU0wsdUJBQVkvb0IsUUFBWixFQUF3QztJQUFBOztJQUFBOztJQUN2Qzs7SUFEdUM7O0lBQUE7O0lBQUE7O0lBR3ZDLE1BQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0lBQ0EsTUFBS2dwQixRQUFMLEdBQWdCLElBQUlILDhEQUFKLEVBQWhCO0lBQ0EsTUFBS0ksWUFBTCxHQUFvQixJQUFJSCx1RUFBSixFQUFwQjs7SUFFQSxNQUFLSSxTQUFMLENBQWVscEIsUUFBZjs7SUFQdUM7RUFRdkM7Ozs7O3NNQUVELGlCQUFrQkMsVUFBbEI7UUFBQTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUFBLE9BQ29CLEtBQUtELFFBQUwsQ0FBY0csT0FBZCxDQUFzQkYsVUFBVSxHQUFHLENBQW5DLENBRHBCOztjQUFBO2dCQUNPQyxJQURQO2dCQUFBO2dCQUFBLE9BRXVCQSxJQUFJLENBQUNpcEIsY0FBTCxFQUZ2Qjs7Y0FBQTtnQkFFT0MsT0FGUDtnQkFBQSxpQ0FJUUEsT0FBTyxDQUFDQyxLQUFSLENBQWNDLEdBQWQsQ0FBa0IsVUFBVTlILENBQVYsRUFBdUI7a0JBQUUsT0FBT0EsQ0FBQyxDQUFDaEcsR0FBVDtnQkFBZSxDQUExRCxFQUE0RG1KLElBQTVELENBQWlFLEdBQWpFLENBSlI7O2NBQUE7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBOzs7Ozs7Ozs7OztxTUFPQSxrQkFBaUIxa0IsVUFBakIsRUFBcUNtbkIsT0FBckMsRUFBd0VDLFFBQXhFLEVBQTZGZixXQUE3RjtRQUFBO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUE7Z0JBQUEsT0FDdUMsS0FBS2lELFVBQUwsQ0FBZ0J0cEIsVUFBaEIsQ0FEdkM7O2NBQUE7Z0JBQ091cEIsU0FEUDtnQkFBQSxrQ0FHUSxLQUFLUixRQUFMLENBQWNTLE1BQWQsQ0FBcUJELFNBQXJCLEVBQWdDcEMsT0FBaEMsRUFBeUNDLFFBQXpDLEVBQW1EZixXQUFuRCxDQUhSOztjQUFBO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQTs7Ozs7Ozs7Ozs7eU1BTUEsa0JBQXFCcm1CLFVBQXJCLEVBQXlDc25CLElBQXpDLEVBQTRENVEsSUFBNUQsRUFBNkUwUSxRQUE3RTtRQUFBO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUE7Z0JBQUEsT0FDdUMsS0FBS2tDLFVBQUwsQ0FBZ0J0cEIsVUFBaEIsQ0FEdkM7O2NBQUE7Z0JBQ091cEIsU0FEUDtnQkFHQyxLQUFLUCxZQUFMLENBQWtCUSxNQUFsQixDQUF5QkQsU0FBekIsRUFBb0NqQyxJQUFwQyxFQUEwQzVRLElBQTFDLEVBQWdEMFEsUUFBaEQ7O2NBSEQ7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBOzs7Ozs7Ozs7O1dBTUEsb0JBQW1CcG5CLFVBQW5CLEVBQThEO01BQzdELE9BQU8sS0FBS0QsUUFBTCxDQUFjRyxPQUFkLENBQXNCRixVQUFVLEdBQUcsQ0FBbkMsQ0FBUDtJQUNBOzs7V0FFRCxtQkFBa0JELFFBQWxCLEVBQW9EO01BQ25ELEtBQUttbUIsS0FBTCxHQUFhLEVBQWI7O01BRUEsS0FBSyxJQUFJcGMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRy9KLFFBQVEsQ0FBQzBwQixRQUE3QixFQUF1QzNmLENBQUMsRUFBeEMsRUFBNEM7UUFDM0MsS0FBS29jLEtBQUwsQ0FBV25jLElBQVgsQ0FBZ0IsSUFBSThjLHVDQUFKLENBQVMsSUFBVCxFQUFlL2MsQ0FBZixDQUFoQjtNQUNBO0lBQ0Q7Ozs7RUFoRDBCa2M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1I1Qjs7SUFHTTJEOzs7OzZHQUV3QixJQUFJRCxxREFBSjs7MEdBRUgsSUFBSUEscURBQUo7OytHQUVLLElBQUlBLHFEQUFKOzs2R0FFRixJQUFJQSxxREFBSjs7NkdBRUEsSUFBSUEscURBQUo7O21IQUVNLElBQUlBLHFEQUFKOztvSEFFQyxJQUFJQSxxREFBSjs7NkhBRVMsSUFBSUEscURBQUo7O21IQUVWLElBQUlBLHFEQUFKOzt1SEFFSSxJQUFJQSxxREFBSjs7d0hBRUMsSUFBSUEscURBQUo7O3NIQUVGLElBQUlBLHFEQUFKOzs2R0FFVCxJQUFJQSxxREFBSjs7eUdBRUosSUFBSUEscURBQUo7OzJHQUVFLElBQUlBLHFEQUFKOzswR0FFRCxJQUFJQSxxREFBSjs7Ozs7U0FHMUIsZUFBdUI7TUFDdEIsT0FBTyxLQUFLRSxTQUFaO0lBQ0E7OztTQUVELGVBQWdDO01BQy9CLE9BQU8sS0FBS0Msa0JBQVo7SUFDQTs7O1NBRUQsZUFBd0I7TUFDdkIsT0FBTyxLQUFLQSxrQkFBTCxDQUF3QmplLEtBQS9CO0lBQ0E7U0FFRCxhQUFzQjRXLEtBQXRCLEVBQXFDO01BQ3BDLEtBQUtxSCxrQkFBTCxDQUF3QmplLEtBQXhCLEdBQWdDNFcsS0FBaEM7SUFDQTs7O1NBRUQsZUFBb0I7TUFDbkIsT0FBTyxLQUFLc0gsTUFBWjtJQUNBOzs7U0FFRCxlQUF5QjtNQUN4QixPQUFPLEtBQUtDLFdBQVo7SUFDQTs7O1NBRUQsYUFBZUMsTUFBZixFQUFnQztNQUMvQixLQUFLRCxXQUFMLENBQWlCbmUsS0FBakIsR0FBeUJvZSxNQUF6QjtJQUNBOzs7U0FFRCxlQUF1QjtNQUN0QixPQUFPLEtBQUtDLFNBQVo7SUFDQTs7O1NBRUQsZUFBZTtNQUNkLE9BQU8sS0FBS0EsU0FBTCxDQUFlcmUsS0FBdEI7SUFDQTtTQUVELGFBQWF3SyxJQUFiLEVBQTRCO01BQzNCLEtBQUs2VCxTQUFMLENBQWVyZSxLQUFmLEdBQXVCd0ssSUFBdkI7SUFDQTs7O1NBRUQsZUFBdUI7TUFDdEIsT0FBTyxLQUFLOFQsU0FBWjtJQUNBOzs7U0FFRCxhQUFhOVQsSUFBYixFQUE0QjtNQUMzQixLQUFLOFQsU0FBTCxDQUFldGUsS0FBZixHQUF1QndLLElBQXZCO0lBQ0E7OztTQUVELGVBQTZCO01BQzVCLE9BQU8sS0FBSytULGVBQVo7SUFDQTs7O1NBRUQsYUFBbUI1VSxNQUFuQixFQUFvQztNQUNuQyxLQUFLNFUsZUFBTCxDQUFxQnZlLEtBQXJCLEdBQTZCMkosTUFBN0I7SUFDQTs7O1NBRUQsZUFBOEI7TUFDN0IsT0FBTyxLQUFLNlUsZ0JBQVo7SUFDQTs7O1NBRUQsYUFBb0JDLFNBQXBCLEVBQXdDO01BQ3ZDLEtBQUtELGdCQUFMLENBQXNCeGUsS0FBdEIsR0FBOEJ5ZSxTQUE5QjtJQUNBOzs7U0FFRCxlQUF1QztNQUN0QyxPQUFPLEtBQUtDLHlCQUFaO0lBQ0E7OztTQUVELGFBQTZCRCxTQUE3QixFQUFpRDtNQUNoRCxLQUFLQyx5QkFBTCxDQUErQjFlLEtBQS9CLEdBQXVDeWUsU0FBdkM7SUFDQTs7O1NBRUQsZUFBNkI7TUFDNUIsT0FBTyxLQUFLRSxlQUFaO0lBQ0E7OztTQUVELGVBQXFCO01BQ3BCLE9BQU8sS0FBS0EsZUFBTCxDQUFxQjNlLEtBQTVCO0lBQ0E7U0FFRCxhQUFtQjRlLFNBQW5CLEVBQXVDO01BQ3RDLEtBQUtELGVBQUwsQ0FBcUIzZSxLQUFyQixHQUE2QjRlLFNBQTdCO0lBQ0E7OztTQUVELGVBQWlDO01BQ2hDLE9BQU8sS0FBS0MsbUJBQVo7SUFDQTs7O1NBRUQsZUFBeUI7TUFDeEIsT0FBTyxLQUFLQSxtQkFBTCxDQUF5QjdlLEtBQWhDO0lBQ0E7U0FFRCxhQUF1QjRlLFNBQXZCLEVBQTJDO01BQzFDLEtBQUtDLG1CQUFMLENBQXlCN2UsS0FBekIsR0FBaUM0ZSxTQUFqQztJQUNBOzs7U0FFRCxlQUFrQztNQUNqQyxPQUFPLEtBQUtFLG9CQUFaO0lBQ0E7OztTQUVELGVBQTBCO01BQ3pCLE9BQU8sS0FBS0Esb0JBQUwsQ0FBMEI5ZSxLQUFqQztJQUNBO1NBRUQsYUFBd0I0ZSxTQUF4QixFQUE0QztNQUMzQyxLQUFLRSxvQkFBTCxDQUEwQjllLEtBQTFCLEdBQWtDNGUsU0FBbEM7SUFDQTs7O1dBRUQsb0JBQTRCO01BQzNCLE9BQU8sS0FBS1YsTUFBTCxDQUFZbGUsS0FBbkI7SUFDQTs7O1dBRUQsa0JBQVMrZSxLQUFULEVBQXVDO01BQ3RDLEtBQUtiLE1BQUwsQ0FBWWxlLEtBQVosR0FBb0IrZSxLQUFwQjtJQUNBOzs7U0FFRCxlQUF1QjtNQUN0QixPQUFPLEtBQUtDLFNBQVo7SUFDQTs7O1dBRUQsdUJBQXNCO01BQ3JCLE9BQU8sS0FBS0EsU0FBTCxDQUFlaGYsS0FBdEI7SUFDQTs7O1dBRUQscUJBQVkrSSxRQUFaLEVBQW9DO01BQ25DLEtBQUtpVyxTQUFMLENBQWVoZixLQUFmLEdBQXVCK0ksUUFBdkI7SUFDQTs7O1NBRUQsZUFBbUI7TUFDbEIsT0FBTyxLQUFLa1csS0FBWjtJQUNBOzs7V0FFRCxtQkFBa0I7TUFDakIsT0FBTyxLQUFLQSxLQUFMLENBQVdqZixLQUFsQjtJQUNBOzs7V0FFRCxpQkFBUXlFLElBQVIsRUFBNEI7TUFDM0IsS0FBS3dhLEtBQUwsQ0FBV2pmLEtBQVgsR0FBbUJ5RSxJQUFuQjtJQUNBOzs7U0FFRCxlQUFxQjtNQUNwQixPQUFPLEtBQUt5YSxPQUFaO0lBQ0E7OztXQUVELHFCQUFvQjtNQUNuQixPQUFPLEtBQUtBLE9BQUwsQ0FBYWxmLEtBQXBCO0lBQ0E7OztXQUVELG1CQUFVaUosTUFBVixFQUFnQztNQUMvQixLQUFLaVcsT0FBTCxDQUFhbGYsS0FBYixHQUFxQmlKLE1BQXJCO0lBQ0E7OztTQUVELGVBQW9CO01BQ25CLE9BQU8sS0FBS2tXLE1BQVo7SUFDQTs7O1dBRUQsb0JBQW9CO01BQ25CLE9BQU8sS0FBS0EsTUFBTCxDQUFZbmYsS0FBbkI7SUFDQTs7O1dBRUQsa0JBQVNrSixLQUFULEVBQStCO01BQzlCLEtBQUtpVyxNQUFMLENBQVluZixLQUFaLEdBQW9Ca0osS0FBcEI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ3RNSTdJOzs7K0dBRXFCOztpSEFFRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNON0I7O0lBRU1nZjs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFvQjtNQUNuQixJQUFNckYsS0FBSyxHQUFHLElBQUlxRixVQUFKLENBQWUsS0FBS3hvQixNQUFwQixFQUE0QixLQUFLakIsS0FBTCxDQUFXZCxLQUFYLEVBQTVCLENBQWQ7TUFDQWtsQixLQUFLLENBQUM2QixNQUFOLENBQWEzYyxHQUFiLENBQWlCLEtBQUsyYyxNQUFMLENBQVlyZSxDQUE3QixFQUFnQyxLQUFLcWUsTUFBTCxDQUFZcGUsQ0FBNUMsRUFBK0MsS0FBS29lLE1BQUwsQ0FBWTdLLEtBQTNELEVBQWtFLEtBQUs2SyxNQUFMLENBQVk1SyxNQUE5RTtNQUNBK0ksS0FBSyxDQUFDbmtCLFdBQU4sQ0FBa0IsS0FBS3lwQixXQUFMLEVBQWxCO01BQ0F0RixLQUFLLENBQUNsUyxXQUFOLENBQWtCLEtBQUt5WCxVQUFMLEVBQWxCOztNQUptQiwyQ0FNRCxLQUFLdkwsTUFOSjtNQUFBOztNQUFBO1FBTW5CLG9EQUErQjtVQUFBLElBQXRCcGYsS0FBc0I7VUFDOUJvbEIsS0FBSyxDQUFDaEcsTUFBTixDQUFhN1YsSUFBYixDQUFrQnZKLEtBQUssQ0FBQ0UsS0FBTixFQUFsQjtRQUNBO01BUmtCO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BVW5CLE9BQU9rbEIsS0FBUDtJQUNBOzs7O0VBYnVCb0Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNGekI7QUFFQTs7SUFHTUk7Ozs7Ozs7Ozs7Ozs7V0FFTCxrQkFBUzVxQixLQUFULEVBQWdDO01BQy9CLElBQUksS0FBS29mLE1BQUwsQ0FBWTVhLE1BQVosR0FBcUIsQ0FBekIsRUFBNEI7UUFDM0IsT0FBTyxLQUFQO01BQ0E7O01BRUQsSUFBTXFtQixPQUFPLEdBQUcsSUFBSXZPLHNEQUFKLENBQVksS0FBSzJLLE1BQUwsQ0FBWXJlLENBQXhCLEVBQTJCLEtBQUtxZSxNQUFMLENBQVlwZSxDQUF2QyxFQUEwQyxLQUFLb2UsTUFBTCxDQUFZN0ssS0FBdEQsRUFBNkQsS0FBSzZLLE1BQUwsQ0FBWTVLLE1BQXpFLENBQWhCOztNQUVBLElBQUksS0FBS3lPLElBQUwsRUFBSixFQUFpQjtRQUNoQixPQUFPRCxPQUFPLENBQUNoTyxhQUFSLENBQXNCN2MsS0FBSyxDQUFDNEksQ0FBNUIsRUFBK0I1SSxLQUFLLENBQUM2SSxDQUFyQyxDQUFQO01BQ0E7O01BRUQsT0FBT2dpQixPQUFPLENBQUMvTixjQUFSLENBQXVCOWMsS0FBSyxDQUFDNEksQ0FBN0IsRUFBZ0M1SSxLQUFLLENBQUM2SSxDQUF0QyxFQUF5QzdJLEtBQUssQ0FBQzRJLENBQU4sR0FBVSxLQUFLNUgsS0FBTCxDQUFXb2IsS0FBOUQsRUFBcUVwYyxLQUFLLENBQUM2SSxDQUFOLEdBQVUsS0FBSzdILEtBQUwsQ0FBV29iLEtBQTFGLENBQVA7SUFDQTs7O1dBRUQsb0JBQVd6YSxJQUFYLEVBQXFDO01BQ3BDLElBQUksS0FBS3lkLE1BQUwsQ0FBWTVhLE1BQVosR0FBcUIsQ0FBekIsRUFBNEI7UUFDM0IsT0FBTyxLQUFQO01BQ0E7O01BRUQsSUFBTXFtQixPQUFPLEdBQUcsSUFBSXZPLHNEQUFKLENBQVksS0FBSzJLLE1BQUwsQ0FBWXJlLENBQXhCLEVBQTJCLEtBQUtxZSxNQUFMLENBQVlwZSxDQUF2QyxFQUEwQyxLQUFLb2UsTUFBTCxDQUFZN0ssS0FBdEQsRUFBNkQsS0FBSzZLLE1BQUwsQ0FBWTVLLE1BQXpFLENBQWhCO01BRUEsT0FBT3dPLE9BQU8sQ0FBQ2xMLGNBQVIsQ0FBdUJoZSxJQUFJLENBQUNpSCxDQUE1QixFQUErQmpILElBQUksQ0FBQ2tILENBQXBDLEVBQXVDbEgsSUFBSSxDQUFDeWEsS0FBNUMsRUFBbUR6YSxJQUFJLENBQUMwYSxNQUF4RCxDQUFQO0lBQ0E7OztXQUVELGlCQUFzQjtNQUNyQixJQUFNK0ksS0FBSyxHQUFHLElBQUl3RixZQUFKLENBQWlCLEtBQUszb0IsTUFBdEIsRUFBOEIsS0FBS2pCLEtBQUwsQ0FBV2QsS0FBWCxFQUE5QixDQUFkO01BQ0FrbEIsS0FBSyxDQUFDNkIsTUFBTixDQUFhM2MsR0FBYixDQUFpQixLQUFLMmMsTUFBTCxDQUFZcmUsQ0FBN0IsRUFBZ0MsS0FBS3FlLE1BQUwsQ0FBWXBlLENBQTVDLEVBQStDLEtBQUtvZSxNQUFMLENBQVk3SyxLQUEzRCxFQUFrRSxLQUFLNkssTUFBTCxDQUFZNUssTUFBOUU7TUFDQStJLEtBQUssQ0FBQ25rQixXQUFOLENBQWtCLEtBQUt5cEIsV0FBTCxFQUFsQjtNQUNBdEYsS0FBSyxDQUFDbFMsV0FBTixDQUFrQixLQUFLeVgsVUFBTCxFQUFsQjs7TUFKcUIsMkNBTUgsS0FBS3ZMLE1BTkY7TUFBQTs7TUFBQTtRQU1yQixvREFBK0I7VUFBQSxJQUF0QnBmLEtBQXNCO1VBQzlCb2xCLEtBQUssQ0FBQ2hHLE1BQU4sQ0FBYTdWLElBQWIsQ0FBa0J2SixLQUFLLENBQUNFLEtBQU4sRUFBbEI7UUFDQTtNQVJvQjtRQUFBO01BQUE7UUFBQTtNQUFBOztNQVVyQixPQUFPa2xCLEtBQVA7SUFDQTs7OztFQXJDeUJvRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0wzQjtBQUVBOztJQUVNQTs7Ozs7Ozs7Ozs7OztXQUVMLGVBQU14cUIsS0FBTixFQUFnQztNQUMvQixJQUFJLEtBQUtvZixNQUFMLENBQVk1YSxNQUFaLEdBQXFCLENBQXpCLEVBQTRCO1FBQzNCLElBQUl5bUIsSUFBSSxHQUFHLEtBQUs3TCxNQUFMLENBQVksQ0FBWixDQUFYOztRQUVBLElBQUlwZixLQUFLLENBQUNxVyxNQUFOLENBQWE0VSxJQUFiLENBQUosRUFBd0I7VUFDdkIsT0FBTyxLQUFQO1FBQ0E7O1FBRUQsS0FBSzdMLE1BQUwsQ0FBWSxDQUFaLElBQWlCcGYsS0FBakI7TUFDQSxDQVJELE1BU0s7UUFDSixLQUFLb2YsTUFBTCxDQUFZN1YsSUFBWixDQUFpQnZKLEtBQWpCO01BQ0E7O01BRUQsT0FBTyxJQUFQO0lBQ0E7OztXQUVELGVBQU1BLEtBQU4sRUFBZ0M7TUFDL0IsSUFBSSxLQUFLb2YsTUFBTCxDQUFZNWEsTUFBWixHQUFxQixDQUF6QixFQUE0QjtRQUMzQixJQUFJeW1CLElBQUksR0FBRyxLQUFLN0wsTUFBTCxDQUFZLENBQVosQ0FBWDs7UUFFQSxJQUFJcGYsS0FBSyxDQUFDcVcsTUFBTixDQUFhNFUsSUFBYixDQUFKLEVBQXdCO1VBQ3ZCLE9BQU8sS0FBUDtRQUNBOztRQUVELEtBQUs3TCxNQUFMLENBQVksQ0FBWixJQUFpQnBmLEtBQWpCO01BQ0EsQ0FSRCxNQVNLO1FBQ0osS0FBS29mLE1BQUwsQ0FBWTdWLElBQVosQ0FBaUJ2SixLQUFqQjtNQUNBOztNQUVELEtBQUtrckIsWUFBTDtNQUNBLEtBQUtDLGNBQUwsQ0FBb0IsSUFBSUgsb0RBQUosQ0FBZSxJQUFmLEVBQXFCLEtBQUsvRCxNQUExQixDQUFwQjtNQUVBLE9BQU8sSUFBUDtJQUNBOzs7V0FFRCx3QkFBK0I7TUFDOUIsSUFBSSxLQUFLN0gsTUFBTCxDQUFZNWEsTUFBWixHQUFxQixDQUF6QixFQUE0QjtRQUMzQjtNQUNBOztNQUVELElBQU0yVyxFQUFFLEdBQUcsS0FBS2lFLE1BQUwsQ0FBWSxDQUFaLENBQVg7TUFDQSxJQUFNaEUsRUFBRSxHQUFHLEtBQUtnRSxNQUFMLENBQVksQ0FBWixDQUFYOztNQUVBLElBQUloRSxFQUFFLENBQUN4UyxDQUFILEdBQU91UyxFQUFFLENBQUN2UyxDQUFkLEVBQWlCO1FBQ2hCLEtBQUtxZSxNQUFMLENBQVlyZSxDQUFaLEdBQWdCd1MsRUFBRSxDQUFDeFMsQ0FBbkI7UUFDQSxLQUFLcWUsTUFBTCxDQUFZN0ssS0FBWixHQUFvQmpCLEVBQUUsQ0FBQ3ZTLENBQUgsR0FBT3dTLEVBQUUsQ0FBQ3hTLENBQTlCO01BQ0EsQ0FIRCxNQUlLO1FBQ0osS0FBS3FlLE1BQUwsQ0FBWXJlLENBQVosR0FBZ0J1UyxFQUFFLENBQUN2UyxDQUFuQjtRQUNBLEtBQUtxZSxNQUFMLENBQVk3SyxLQUFaLEdBQW9CaEIsRUFBRSxDQUFDeFMsQ0FBSCxHQUFPdVMsRUFBRSxDQUFDdlMsQ0FBOUI7TUFDQTs7TUFDRCxJQUFJd1MsRUFBRSxDQUFDdlMsQ0FBSCxHQUFPc1MsRUFBRSxDQUFDdFMsQ0FBZCxFQUFpQjtRQUNoQixLQUFLb2UsTUFBTCxDQUFZcGUsQ0FBWixHQUFnQnVTLEVBQUUsQ0FBQ3ZTLENBQW5CO1FBQ0EsS0FBS29lLE1BQUwsQ0FBWTVLLE1BQVosR0FBcUJsQixFQUFFLENBQUN0UyxDQUFILEdBQU91UyxFQUFFLENBQUN2UyxDQUEvQjtNQUNBLENBSEQsTUFJSztRQUNKLEtBQUtvZSxNQUFMLENBQVlwZSxDQUFaLEdBQWdCc1MsRUFBRSxDQUFDdFMsQ0FBbkI7UUFDQSxLQUFLb2UsTUFBTCxDQUFZNUssTUFBWixHQUFxQmpCLEVBQUUsQ0FBQ3ZTLENBQUgsR0FBT3NTLEVBQUUsQ0FBQ3RTLENBQS9CO01BQ0E7SUFDRDtJQUVEO0FBQ0Q7QUFDQTs7OztXQUNDLGdCQUEwQjtNQUN6QixJQUFNekosUUFBUSxHQUFHLEtBQUtzckIsV0FBTCxFQUFqQjtNQUVBLE9BQU90ckIsUUFBUSxJQUFJLElBQVosSUFBb0JBLFFBQVEsQ0FBQ2dKLE1BQXBDO0lBQ0E7Ozs7RUF4RXNCMmlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKeEI7QUFDQTtBQUVBOztJQUVNTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0FLTCxpQkFBUW5wQixJQUFSLEVBQTBCO01BQ3pCLElBQUksS0FBS0EsSUFBTCxJQUFhLEtBQUtBLElBQUwsQ0FBVW1VLE1BQVYsQ0FBaUJuVSxJQUFqQixDQUFqQixFQUF5QztRQUN4QztNQUNBOztNQUVELEtBQUtBLElBQUwsR0FBWUEsSUFBWjtNQUVBLEtBQUtpcEIsY0FBTCxDQUFvQixJQUFJSCxvREFBSixDQUFlLElBQWYsRUFBcUIsS0FBSy9ELE1BQTFCLENBQXBCO0lBQ0E7OztXQUVELG1CQUFnQjtNQUNmLE9BQU8sS0FBSy9rQixJQUFaO0lBQ0E7OztXQUVELGlCQUFvQjtNQUNuQixJQUFNa2pCLEtBQUssR0FBRyxJQUFJaUcsVUFBSixDQUFlLEtBQUtwcEIsTUFBcEIsQ0FBZDtNQUNBbWpCLEtBQUssQ0FBQ2tHLFdBQU4sQ0FBa0IsSUFBSXJuQixrREFBSixDQUFVLEtBQUtnakIsTUFBTCxDQUFZcmUsQ0FBdEIsRUFBeUIsS0FBS3FlLE1BQUwsQ0FBWXBlLENBQXJDLENBQWxCO01BQ0F1YyxLQUFLLENBQUNtRyxPQUFOLENBQWMsS0FBS3JwQixJQUFuQjtNQUNBa2pCLEtBQUssQ0FBQ29HLFlBQU4sQ0FBbUIsS0FBS0MsWUFBTCxFQUFuQjtNQUNBckcsS0FBSyxDQUFDc0csaUJBQU4sQ0FBd0IsSUFBSXJoQixHQUFKLENBQVEsS0FBS3NoQixpQkFBTCxFQUFSLENBQXhCO01BRUEsT0FBT3ZHLEtBQVA7SUFDQTs7OztFQTNCdUJnRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTHpCOztJQUVNUTs7Ozs7Ozs7Ozs7OztXQUVMLGlCQUFtQjtNQUNsQixJQUFNeEcsS0FBSyxHQUFHLElBQUl3RyxTQUFKLENBQWMsS0FBSzNwQixNQUFuQixFQUEyQixLQUFLakIsS0FBTCxDQUFXZCxLQUFYLEVBQTNCLENBQWQ7TUFDQWtsQixLQUFLLENBQUM2QixNQUFOLENBQWEzYyxHQUFiLENBQWlCLEtBQUsyYyxNQUFMLENBQVlyZSxDQUE3QixFQUFnQyxLQUFLcWUsTUFBTCxDQUFZcGUsQ0FBNUMsRUFBK0MsS0FBS29lLE1BQUwsQ0FBWTdLLEtBQTNELEVBQWtFLEtBQUs2SyxNQUFMLENBQVk1SyxNQUE5RTtNQUNBK0ksS0FBSyxDQUFDbmtCLFdBQU4sQ0FBa0IsS0FBS3lwQixXQUFMLEVBQWxCO01BQ0F0RixLQUFLLENBQUNsUyxXQUFOLENBQWtCLEtBQUt5WCxVQUFMLEVBQWxCOztNQUprQiwyQ0FNQSxLQUFLdkwsTUFOTDtNQUFBOztNQUFBO1FBTWxCLG9EQUErQjtVQUFBLElBQXRCcGYsS0FBc0I7VUFDOUJvbEIsS0FBSyxDQUFDaEcsTUFBTixDQUFhN1YsSUFBYixDQUFrQnZKLEtBQUssQ0FBQ0UsS0FBTixFQUFsQjtRQUNBO01BUmlCO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BVWxCLE9BQU9rbEIsS0FBUDtJQUNBOzs7O0VBYnNCb0Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNGeEI7QUFDQTtBQUdBO0FBRUE7O0lBRU1xQjs7Ozs7RUFLTCxrQkFBWTlxQixXQUFaLEVBQWlDQyxLQUFqQyxFQUErQztJQUFBOztJQUFBOztJQUM5QywwQkFBTUQsV0FBTixFQUFtQkMsS0FBbkI7O0lBRDhDOztJQUc5QyxNQUFLcWUsTUFBTCxHQUFjLElBQUlILDJEQUFKLENBQWNsZSxLQUFLLENBQUNvYixLQUFwQixDQUFkO0lBSDhDO0VBSTlDOzs7O1dBRUQsa0JBQVNwYyxLQUFULEVBQW1DO01BQ2xDO01BQ0EsSUFBSSxLQUFLb2YsTUFBTCxDQUFZNWEsTUFBWixHQUFxQixDQUF6QixFQUE0QjtRQUMzQixJQUFNeW1CLElBQUksR0FBRyxLQUFLN0wsTUFBTCxDQUFZLENBQVosQ0FBYjs7UUFFQSxJQUFJcGYsS0FBSyxDQUFDcVcsTUFBTixDQUFhNFUsSUFBYixDQUFKLEVBQXdCO1VBQ3ZCLE9BQU8sS0FBUDtRQUNBOztRQUVELEtBQUs3TCxNQUFMLENBQVksQ0FBWixJQUFpQnBmLEtBQWpCO01BQ0EsQ0FSRCxNQVNLO1FBQ0osS0FBS29mLE1BQUwsQ0FBWTdWLElBQVosQ0FBaUJ2SixLQUFqQjtNQUNBOztNQUVELEtBQUtxZixNQUFMLENBQVl5TSxRQUFaLENBQXFCOXJCLEtBQXJCO01BRUEsS0FBS2tyQixZQUFMO01BQ0EsS0FBS0MsY0FBTCxDQUFvQixJQUFJSCxvREFBSixDQUFlLElBQWYsRUFBcUIsS0FBSy9ELE1BQTFCLENBQXBCO01BRUEsT0FBTyxJQUFQO0lBQ0E7OztXQUVELGtCQUFTam5CLEtBQVQsRUFBbUM7TUFDbEMsT0FBTyxLQUFLcWYsTUFBTCxDQUFZakIsVUFBWixDQUF1QixJQUFJM2EsMkRBQUosQ0FBY3pELEtBQUssQ0FBQzRJLENBQXBCLEVBQXVCNUksS0FBSyxDQUFDNkksQ0FBN0IsRUFBZ0M3SSxLQUFLLENBQUM0SSxDQUF0QyxFQUF5QzVJLEtBQUssQ0FBQzZJLENBQS9DLENBQXZCLENBQVA7SUFDQTs7O1dBRUQsb0JBQVdsSCxJQUFYLEVBQXFDO01BQ3BDLE9BQU8sS0FBSzBkLE1BQUwsQ0FBWWpCLFVBQVosQ0FBdUJ6YyxJQUF2QixDQUFQO0lBQ0E7OztXQUVELHdCQUEwQjtNQUN6QixPQUFPLEtBQUswZCxNQUFaO0lBQ0E7OztXQUVELHFCQUFZTyxLQUFaLEVBQWdDO01BQy9CLEtBQUtQLE1BQUwsQ0FBWTBNLFdBQVosQ0FBd0JuTSxLQUF4QjtNQUVBLEtBQUtvTSxtQkFBTCxDQUF5QnBNLEtBQXpCO01BRUEsS0FBS3VMLGNBQUwsQ0FBb0IsSUFBSUgsb0RBQUosQ0FBZSxJQUFmLEVBQXFCLEtBQUsvRCxNQUExQixDQUFwQjtJQUNBOzs7V0FFRCxpQkFBa0I7TUFDakIsSUFBTTdCLEtBQUssR0FBRyxJQUFJeUcsUUFBSixDQUFhLEtBQUs1cEIsTUFBbEIsRUFBMEIsS0FBS2pCLEtBQUwsQ0FBV2QsS0FBWCxFQUExQixDQUFkO01BQ0FrbEIsS0FBSyxDQUFDL0YsTUFBTixHQUFlLEtBQUtBLE1BQUwsQ0FBWW5mLEtBQVosRUFBZjtNQUNBa2xCLEtBQUssQ0FBQzZCLE1BQU4sQ0FBYTNjLEdBQWIsQ0FBaUIsS0FBSzJjLE1BQUwsQ0FBWXJlLENBQTdCLEVBQWdDLEtBQUtxZSxNQUFMLENBQVlwZSxDQUE1QyxFQUErQyxLQUFLb2UsTUFBTCxDQUFZN0ssS0FBM0QsRUFBa0UsS0FBSzZLLE1BQUwsQ0FBWTVLLE1BQTlFO01BQ0ErSSxLQUFLLENBQUNua0IsV0FBTixDQUFrQixLQUFLeXBCLFdBQUwsRUFBbEI7TUFDQXRGLEtBQUssQ0FBQ2xTLFdBQU4sQ0FBa0IsS0FBS3lYLFVBQUwsRUFBbEI7TUFFQSxPQUFPdkYsS0FBUDtJQUNBOzs7O0VBOURxQjJGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUHZCO0FBQ0E7O0lBRU1rQjs7Ozs7Ozs7Ozs7OztXQUVMLGtCQUFTanNCLEtBQVQsRUFBbUM7TUFDbEM7TUFDQSxJQUFJLEtBQUtvZixNQUFMLENBQVk1YSxNQUFaLEdBQXFCLENBQXpCLEVBQTRCO1FBQzNCLElBQUl5bUIsSUFBSSxHQUFHLEtBQUs3TCxNQUFMLENBQVksQ0FBWixDQUFYOztRQUVBLElBQUlwZixLQUFLLENBQUNxVyxNQUFOLENBQWE0VSxJQUFiLENBQUosRUFBd0I7VUFDdkIsT0FBTyxLQUFQO1FBQ0E7O1FBRUQsS0FBSzdMLE1BQUwsQ0FBWSxDQUFaLElBQWlCcGYsS0FBakI7TUFDQSxDQVJELE1BU0s7UUFDSixLQUFLb2YsTUFBTCxDQUFZN1YsSUFBWixDQUFpQnZKLEtBQWpCO01BQ0E7O01BRUQsS0FBS2tyQixZQUFMO01BQ0EsS0FBS0MsY0FBTCxDQUFvQixJQUFJSCxvREFBSixDQUFlLElBQWYsRUFBcUIsS0FBSy9ELE1BQTFCLENBQXBCO01BRUEsT0FBTyxJQUFQO0lBQ0E7OztXQUVELHdCQUErQjtNQUM5QixJQUFNOUwsRUFBRSxHQUFHLEtBQUtpRSxNQUFMLENBQVksQ0FBWixDQUFYO01BQ0EsSUFBTTFILENBQUMsR0FBRyxLQUFLMVcsS0FBTCxDQUFXb2IsS0FBckI7TUFFQSxLQUFLNkssTUFBTCxDQUFZM2MsR0FBWixDQUFnQjZRLEVBQUUsQ0FBQ3ZTLENBQUgsR0FBTzhPLENBQXZCLEVBQTBCeUQsRUFBRSxDQUFDdFMsQ0FBSCxHQUFPNk8sQ0FBakMsRUFBb0N5RCxFQUFFLENBQUN2UyxDQUFILEdBQU84TyxDQUFDLEdBQUcsQ0FBL0MsRUFBa0R5RCxFQUFFLENBQUN0UyxDQUFILEdBQU82TyxDQUFDLEdBQUcsQ0FBN0Q7SUFDQTs7OztFQTVCeUJxVDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ozQjtBQUdBOztJQUVNbUI7Ozs7Ozs7Ozs7Ozs7V0FFTCxrQkFBU2xzQixLQUFULEVBQWdDO01BQy9CO01BQ0EsSUFBSSxLQUFLb2YsTUFBTCxDQUFZNWEsTUFBWixHQUFxQixDQUF6QixFQUE0QjtRQUMzQixPQUFPLEtBQVA7TUFDQTs7TUFFRCxJQUFJLEtBQUtzbUIsSUFBTCxFQUFKLEVBQWlCO1FBQ2hCLE9BQU8sS0FBSzdELE1BQUwsQ0FBWXBLLGFBQVosQ0FBMEI3YyxLQUExQixDQUFQO01BQ0E7O01BRUQsSUFBTTRmLEtBQUssR0FBRyxLQUFLNWUsS0FBTCxDQUFXb2IsS0FBekI7TUFFQSxJQUFJVyxFQUFFLEdBQUcsS0FBS2tLLE1BQUwsQ0FBWXJlLENBQXJCO01BQ0EsSUFBSW9VLEVBQUUsR0FBRyxLQUFLaUssTUFBTCxDQUFZcGUsQ0FBckI7TUFDQSxJQUFJb1UsRUFBRSxHQUFHLEtBQUtnSyxNQUFMLENBQVlyZSxDQUFaLEdBQWdCLEtBQUtxZSxNQUFMLENBQVk3SyxLQUFyQztNQUNBLElBQUljLEVBQUUsR0FBRyxLQUFLK0osTUFBTCxDQUFZcGUsQ0FBckI7O01BRUEsSUFBSSxLQUFLc2pCLGlCQUFMLENBQXVCdk0sS0FBdkIsRUFBOEI3QyxFQUE5QixFQUFrQ0MsRUFBbEMsRUFBc0NDLEVBQXRDLEVBQTBDQyxFQUExQyxFQUE4Q2xkLEtBQTlDLENBQUosRUFBMEQ7UUFDekQsT0FBTyxJQUFQO01BQ0E7O01BRUQrYyxFQUFFLEdBQUcsS0FBS2tLLE1BQUwsQ0FBWXJlLENBQVosR0FBZ0IsS0FBS3FlLE1BQUwsQ0FBWTdLLEtBQWpDO01BQ0FZLEVBQUUsR0FBRyxLQUFLaUssTUFBTCxDQUFZcGUsQ0FBakI7TUFDQW9VLEVBQUUsR0FBRyxLQUFLZ0ssTUFBTCxDQUFZcmUsQ0FBWixHQUFnQixLQUFLcWUsTUFBTCxDQUFZN0ssS0FBakM7TUFDQWMsRUFBRSxHQUFHLEtBQUsrSixNQUFMLENBQVlwZSxDQUFaLEdBQWdCLEtBQUtvZSxNQUFMLENBQVk1SyxNQUFqQzs7TUFFQSxJQUFJLEtBQUs4UCxpQkFBTCxDQUF1QnZNLEtBQXZCLEVBQThCN0MsRUFBOUIsRUFBa0NDLEVBQWxDLEVBQXNDQyxFQUF0QyxFQUEwQ0MsRUFBMUMsRUFBOENsZCxLQUE5QyxDQUFKLEVBQTBEO1FBQ3pELE9BQU8sSUFBUDtNQUNBOztNQUVEK2MsRUFBRSxHQUFHLEtBQUtrSyxNQUFMLENBQVlyZSxDQUFaLEdBQWdCLEtBQUtxZSxNQUFMLENBQVk3SyxLQUFqQztNQUNBWSxFQUFFLEdBQUcsS0FBS2lLLE1BQUwsQ0FBWXBlLENBQVosR0FBZ0IsS0FBS29lLE1BQUwsQ0FBWTVLLE1BQWpDO01BQ0FZLEVBQUUsR0FBRyxLQUFLZ0ssTUFBTCxDQUFZcmUsQ0FBakI7TUFDQXNVLEVBQUUsR0FBRyxLQUFLK0osTUFBTCxDQUFZcGUsQ0FBWixHQUFnQixLQUFLb2UsTUFBTCxDQUFZNUssTUFBakM7O01BRUEsSUFBSSxLQUFLOFAsaUJBQUwsQ0FBdUJ2TSxLQUF2QixFQUE4QjdDLEVBQTlCLEVBQWtDQyxFQUFsQyxFQUFzQ0MsRUFBdEMsRUFBMENDLEVBQTFDLEVBQThDbGQsS0FBOUMsQ0FBSixFQUEwRDtRQUN6RCxPQUFPLElBQVA7TUFDQTs7TUFFRCtjLEVBQUUsR0FBRyxLQUFLa0ssTUFBTCxDQUFZcmUsQ0FBakI7TUFDQW9VLEVBQUUsR0FBRyxLQUFLaUssTUFBTCxDQUFZcGUsQ0FBakI7TUFDQW9VLEVBQUUsR0FBRyxLQUFLZ0ssTUFBTCxDQUFZcmUsQ0FBakI7TUFDQXNVLEVBQUUsR0FBRyxLQUFLK0osTUFBTCxDQUFZcGUsQ0FBWixHQUFnQixLQUFLb2UsTUFBTCxDQUFZNUssTUFBakM7O01BRUEsSUFBSSxLQUFLOFAsaUJBQUwsQ0FBdUJ2TSxLQUF2QixFQUE4QjdDLEVBQTlCLEVBQWtDQyxFQUFsQyxFQUFzQ0MsRUFBdEMsRUFBMENDLEVBQTFDLEVBQThDbGQsS0FBOUMsQ0FBSixFQUEwRDtRQUN6RCxPQUFPLElBQVA7TUFDQTs7TUFFRCxPQUFPLEtBQVA7SUFDQTs7O1dBRUQsb0JBQVcyQixJQUFYLEVBQXFDO01BQ3BDLE9BQU8sS0FBS3NsQixNQUFMLENBQVltRixZQUFaLENBQXlCenFCLElBQXpCLEtBQWtDLElBQXpDO0lBQ0E7OztXQUVELGlCQUF3QjtNQUN2QixJQUFNeWpCLEtBQUssR0FBRyxJQUFJOEcsY0FBSixDQUFtQixLQUFLanFCLE1BQXhCLEVBQWdDLEtBQUtqQixLQUFMLENBQVdkLEtBQVgsRUFBaEMsQ0FBZDtNQUNBa2xCLEtBQUssQ0FBQzZCLE1BQU4sQ0FBYTNjLEdBQWIsQ0FBaUIsS0FBSzJjLE1BQUwsQ0FBWXJlLENBQTdCLEVBQWdDLEtBQUtxZSxNQUFMLENBQVlwZSxDQUE1QyxFQUErQyxLQUFLb2UsTUFBTCxDQUFZN0ssS0FBM0QsRUFBa0UsS0FBSzZLLE1BQUwsQ0FBWTVLLE1BQTlFO01BQ0ErSSxLQUFLLENBQUNua0IsV0FBTixDQUFrQixLQUFLeXBCLFdBQUwsRUFBbEI7TUFDQXRGLEtBQUssQ0FBQ2xTLFdBQU4sQ0FBa0IsS0FBS3lYLFVBQUwsRUFBbEI7O01BSnVCLDJDQU1MLEtBQUt2TCxNQU5BO01BQUE7O01BQUE7UUFNdkIsb0RBQStCO1VBQUEsSUFBdEJwZixLQUFzQjtVQUM5Qm9sQixLQUFLLENBQUNoRyxNQUFOLENBQWE3VixJQUFiLENBQWtCdkosS0FBSyxDQUFDRSxLQUFOLEVBQWxCO1FBQ0E7TUFSc0I7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFVdkIsT0FBT2tsQixLQUFQO0lBQ0E7OztXQUVELDJCQUEwQnhGLEtBQTFCLEVBQXlDN0MsRUFBekMsRUFBcURDLEVBQXJELEVBQWlFQyxFQUFqRSxFQUE2RUMsRUFBN0UsRUFBeUYrQixDQUF6RixFQUE0RztNQUMzRyxJQUFJWixFQUFFLEdBQUdZLENBQUMsQ0FBQ3JXLENBQUYsR0FBTWdYLEtBQWY7TUFDQSxJQUFJdEIsRUFBRSxHQUFHVyxDQUFDLENBQUNwVyxDQUFGLEdBQU0rVyxLQUFmO01BQ0EsSUFBSXJCLEVBQUUsR0FBR1UsQ0FBQyxDQUFDclcsQ0FBRixHQUFNZ1gsS0FBZjtNQUNBLElBQUlwQixFQUFFLEdBQUdTLENBQUMsQ0FBQ3BXLENBQUYsR0FBTStXLEtBQWY7O01BRUEsSUFBSTdCLDJEQUFBLENBQWdCaEIsRUFBaEIsRUFBb0JDLEVBQXBCLEVBQXdCQyxFQUF4QixFQUE0QkMsRUFBNUIsRUFBZ0NtQixFQUFoQyxFQUFvQ0MsRUFBcEMsRUFBd0NDLEVBQXhDLEVBQTRDQyxFQUE1QyxDQUFKLEVBQXFEO1FBQ3BELE9BQU8sSUFBUDtNQUNBOztNQUVESCxFQUFFLEdBQUdZLENBQUMsQ0FBQ3JXLENBQUYsR0FBTWdYLEtBQVg7TUFDQXRCLEVBQUUsR0FBR1csQ0FBQyxDQUFDcFcsQ0FBRixHQUFNK1csS0FBWDtNQUNBckIsRUFBRSxHQUFHVSxDQUFDLENBQUNyVyxDQUFGLEdBQU1nWCxLQUFYO01BQ0FwQixFQUFFLEdBQUdTLENBQUMsQ0FBQ3BXLENBQUYsR0FBTStXLEtBQVg7O01BRUEsSUFBSTdCLDJEQUFBLENBQWdCaEIsRUFBaEIsRUFBb0JDLEVBQXBCLEVBQXdCQyxFQUF4QixFQUE0QkMsRUFBNUIsRUFBZ0NtQixFQUFoQyxFQUFvQ0MsRUFBcEMsRUFBd0NDLEVBQXhDLEVBQTRDQyxFQUE1QyxDQUFKLEVBQXFEO1FBQ3BELE9BQU8sSUFBUDtNQUNBOztNQUVELE9BQU8sS0FBUDtJQUNBOzs7O0VBMUYyQmdNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNMN0I7O0lBRU02Qjs7Ozs7RUFFTCx1QkFBYztJQUFBOztJQUFBLHlCQUNQLENBRE8sRUFDSixJQURJO0VBRWI7OztFQUp3QjdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNDcEJRO0VBT0wsb0JBQVk1RixLQUFaLEVBQTBCUyxXQUExQixFQUFrRDtJQUFBOztJQUFBOztJQUFBOztJQUNqRCxLQUFLRyxNQUFMLEdBQWNaLEtBQWQ7SUFDQSxLQUFLYSxZQUFMLEdBQW9CSixXQUFwQjtFQUNBOzs7O1NBRUQsZUFBbUI7TUFDbEIsT0FBTyxLQUFLRyxNQUFaO0lBQ0E7OztTQUVELGVBQTZCO01BQzVCLE9BQU8sS0FBS0MsWUFBWjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckJGO0FBRUE7QUFDQTs7SUFHZXFHO0VBa0JkLGVBQVlycUIsTUFBWixFQUE0QjtJQUFBOztJQUFBOztJQUFBLHVHQWRXLEVBY1g7O0lBQUEsdUdBWlV3QixnRUFBQSxFQVlWOztJQUFBLDJHQVZHLElBQUkwaUIsNkRBQUosRUFVSDs7SUFBQTs7SUFBQTs7SUFDM0IsS0FBS3FHLE9BQUwsR0FBZXZxQixNQUFmO0VBQ0E7Ozs7U0FFRCxlQUFxQjtNQUNwQixPQUFPLEtBQUt1cUIsT0FBWjtJQUNBOzs7V0FFRCxrQkFBU3hzQixLQUFULEVBQW1DO01BQ2xDLElBQU1tSixLQUFLLEdBQUcsS0FBS3NqQixPQUFMLENBQWFqb0IsTUFBM0I7TUFDQSxJQUFJa29CLElBQUksR0FBRyxJQUFYOztNQUVBLElBQUl2akIsS0FBSyxHQUFHLENBQVosRUFBZTtRQUNkdWpCLElBQUksR0FBRyxLQUFLRCxPQUFMLENBQWF0akIsS0FBSyxHQUFHLENBQXJCLENBQVA7TUFDQTs7TUFDRCxJQUFJbkosS0FBSyxDQUFDcVcsTUFBTixDQUFhcVcsSUFBYixDQUFKLEVBQXdCO1FBQ3ZCLE9BQU8sS0FBUDtNQUNBOztNQUVELEtBQUtELE9BQUwsQ0FBYWxqQixJQUFiLENBQWtCdkosS0FBbEI7O01BRUEsT0FBTyxJQUFQO0lBQ0E7OztTQUVELGVBQXlCO01BQ3hCLE9BQU8sS0FBS3lzQixPQUFaO0lBQ0E7OztXQUVELGtCQUFTenNCLEtBQVQsRUFBbUM7TUFDbEMsT0FBTyxLQUFLMnNCLE9BQUwsQ0FBYTlQLGFBQWIsQ0FBMkI3YyxLQUEzQixDQUFQO0lBQ0E7OztXQUVELG9CQUFXMkIsSUFBWCxFQUFxQztNQUNwQyxPQUFPLEtBQUtnckIsT0FBTCxDQUFhUCxZQUFiLENBQTBCenFCLElBQTFCLEtBQW1DLElBQTFDO0lBQ0E7OztTQUVELGVBQXdCO01BQ3ZCLE9BQU8sS0FBS2dyQixPQUFaO0lBQ0E7OztXQUVELHVCQUE2QjtNQUM1QixPQUFPLEtBQUt2dEIsUUFBWjtJQUNBOzs7V0FFRCxxQkFBWStWLEtBQVosRUFBd0M7TUFDdkMsS0FBSy9WLFFBQUwsR0FBZ0IrVixLQUFoQjtJQUNBOzs7V0FFRCxzQkFBc0I7TUFDckIsT0FBTyxLQUFLUCxRQUFaO0lBQ0E7OztXQUVELHFCQUFZQSxRQUFaLEVBQXFDO01BQ3BDLElBQUksS0FBS0EsUUFBTCxJQUFpQkEsUUFBckIsRUFBK0I7UUFDOUI7TUFDQTs7TUFFRCxLQUFLQSxRQUFMLEdBQWdCQSxRQUFoQjtNQUVBLEtBQUt1VyxjQUFMLENBQW9CLElBQUlILG9EQUFKLENBQWUsSUFBZixFQUFxQixLQUFLL0QsTUFBMUIsQ0FBcEI7SUFDQTs7O1dBRUQscUJBQVlySCxLQUFaLEVBQWdDO01BQUEsMkNBQ2IsS0FBSzZNLE9BRFE7TUFBQTs7TUFBQTtRQUMvQixvREFBZ0M7VUFBQSxJQUF2QnpzQixLQUF1QjtVQUMvQkEsS0FBSyxDQUFDNmYsUUFBTixDQUFlRCxLQUFmO1FBQ0E7TUFIOEI7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFLL0IsS0FBS29NLG1CQUFMLENBQXlCcE0sS0FBekI7TUFFQSxLQUFLdUwsY0FBTCxDQUFvQixJQUFJSCxvREFBSixDQUFlLElBQWYsRUFBcUIsS0FBSy9ELE1BQTFCLENBQXBCO0lBQ0E7OztXQUVELGlCQUFlO01BQ2QsT0FBT3hRLE1BQU0sQ0FBQ21XLE1BQVAsQ0FBYyxJQUFkLENBQVA7SUFDQTs7O1dBRUQsMkJBQWtCbEksUUFBbEIsRUFBOEQ7TUFDN0QsT0FBTyxLQUFLd0MsV0FBTCxDQUFpQnpSLFNBQWpCLENBQTJCaVAsUUFBM0IsQ0FBUDtJQUNBOzs7V0FFRCw4QkFBcUJBLFFBQXJCLEVBQTJEO01BQzFELEtBQUt3QyxXQUFMLENBQWlCQyxXQUFqQixDQUE2QnpDLFFBQTdCO0lBQ0E7OztXQUVELDZCQUE4QjlFLEtBQTlCLEVBQWtEO01BQ2pELEtBQUtxSCxNQUFMLENBQVlyZSxDQUFaLElBQWlCZ1gsS0FBSyxDQUFDaFgsQ0FBdkI7TUFDQSxLQUFLcWUsTUFBTCxDQUFZcGUsQ0FBWixJQUFpQitXLEtBQUssQ0FBQy9XLENBQXZCO0lBQ0E7OztXQUVELHdCQUF5QnNNLEtBQXpCLEVBQWtEO01BQ2pELEtBQUsrUixXQUFMLENBQWlCaUIsT0FBakIsQ0FBeUJoVCxLQUF6QjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsSEY7QUFFQTs7SUFFTWlSOzs7OztFQUtMLG9CQUFZM21CLElBQVosRUFBd0I7SUFBQTs7SUFBQTs7SUFDdkIsMEJBQU0sQ0FBTjs7SUFEdUI7O0lBR3ZCLE1BQUtBLElBQUwsR0FBWUEsSUFBWjs7SUFFQSxNQUFLeXJCLFlBQUw7O0lBTHVCO0VBTXZCOzs7O1dBRUQsbUJBQWdCO01BQ2YsT0FBTyxLQUFLenJCLElBQVo7SUFDQTs7O1dBRUQscUJBQVlrQyxJQUFaLEVBQW1DO01BQ2xDLElBQUksS0FBS3NsQixNQUFMLENBQVk1USxNQUFaLENBQW1CMVUsSUFBbkIsQ0FBSixFQUE4QjtRQUM3QjtNQUNBOztNQUVELEtBQUtzbEIsTUFBTCxDQUFZM2MsR0FBWixDQUFnQjNJLElBQUksQ0FBQ2lILENBQXJCLEVBQXdCakgsSUFBSSxDQUFDa0gsQ0FBN0IsRUFBZ0NsSCxJQUFJLENBQUN5YSxLQUFyQyxFQUE0Q3phLElBQUksQ0FBQzBhLE1BQWpEO01BRUEsS0FBSzhPLGNBQUwsQ0FBb0IsSUFBSUgsb0RBQUosQ0FBZSxJQUFmLEVBQXFCLEtBQUsvRCxNQUExQixDQUFwQjtJQUNBOzs7V0FFRCx3QkFBK0I7TUFDOUIsS0FBS0EsTUFBTCxDQUFZM2MsR0FBWixDQUFnQixDQUFoQixFQUFtQixDQUFuQixFQUFzQixDQUF0QixFQUF5QixDQUF6QjtJQUNBOzs7O0VBN0J1QmdpQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTHpCO0FBQ0E7QUFHQTtBQUVBOztJQUVNdkI7Ozs7O0VBU0wscUJBQVlocUIsV0FBWixFQUFpQ0MsS0FBakMsRUFBK0M7SUFBQTs7SUFBQTs7SUFDOUMsMEJBQU1ELFdBQU47O0lBRDhDOztJQUFBLHVNQUw1QixJQUFJa0QsbURBQUosQ0FBVSxDQUFWLEVBQWEsQ0FBYixDQUs0Qjs7SUFBQSx1TUFINUIsSUFBSUEsbURBQUosQ0FBVSxDQUFWLEVBQWEsQ0FBYixDQUc0Qjs7SUFHOUMsTUFBSzRvQixNQUFMLEdBQWM3ckIsS0FBZDtJQUg4QztFQUk5Qzs7OztTQUVELGVBQW1CO01BQ2xCLE9BQU8sS0FBSzZyQixNQUFaO0lBQ0E7OztXQUVELGtCQUFTN3NCLEtBQVQsRUFBbUM7TUFDbEMsSUFBTThzQixLQUFLLEdBQUcsc05BQWU5c0IsS0FBbEIsQ0FBWDs7TUFFQSxJQUFJOHNCLEtBQUosRUFBVztRQUNWLEtBQUtDLFFBQUwsQ0FBY25rQixDQUFkLEdBQWtCMFUsSUFBSSxDQUFDc0UsR0FBTCxDQUFTLEtBQUttTCxRQUFMLENBQWNua0IsQ0FBdkIsRUFBMEI1SSxLQUFLLENBQUM0SSxDQUFoQyxDQUFsQjtRQUNBLEtBQUtta0IsUUFBTCxDQUFjbGtCLENBQWQsR0FBa0J5VSxJQUFJLENBQUNzRSxHQUFMLENBQVMsS0FBS21MLFFBQUwsQ0FBY2xrQixDQUF2QixFQUEwQjdJLEtBQUssQ0FBQzZJLENBQWhDLENBQWxCO1FBQ0EsS0FBS21rQixRQUFMLENBQWNwa0IsQ0FBZCxHQUFrQjBVLElBQUksQ0FBQ3RLLEdBQUwsQ0FBUyxLQUFLZ2EsUUFBTCxDQUFjcGtCLENBQXZCLEVBQTBCNUksS0FBSyxDQUFDNEksQ0FBaEMsQ0FBbEI7UUFDQSxLQUFLb2tCLFFBQUwsQ0FBY25rQixDQUFkLEdBQWtCeVUsSUFBSSxDQUFDdEssR0FBTCxDQUFTLEtBQUtnYSxRQUFMLENBQWNua0IsQ0FBdkIsRUFBMEI3SSxLQUFLLENBQUM2SSxDQUFoQyxDQUFsQjtRQUVBLEtBQUtxaUIsWUFBTDtRQUNBLEtBQUtDLGNBQUwsQ0FBb0IsSUFBSUgsb0RBQUosQ0FBZSxJQUFmLEVBQXFCLEtBQUsvRCxNQUExQixDQUFwQjtNQUNBOztNQUVELE9BQU82RixLQUFQO0lBQ0E7OztXQUVELGtCQUFTOXNCLEtBQVQsRUFBbUM7TUFDbEMsSUFBTTRmLEtBQUssR0FBRyxLQUFLNWUsS0FBTCxDQUFXb2IsS0FBWCxHQUFtQixDQUFqQyxDQURrQyxDQUdsQzs7TUFDQSxJQUFJLEtBQUtnRCxNQUFMLENBQVk1YSxNQUFaLEtBQXVCLENBQTNCLEVBQThCO1FBQzdCLE9BQU8sS0FBUDtNQUNBLENBRkQsTUFHSyxJQUFJLEtBQUs0YSxNQUFMLENBQVk1YSxNQUFaLEtBQXVCLENBQTNCLEVBQThCO1FBQ2xDLE9BQU8sS0FBSzRhLE1BQUwsQ0FBWSxDQUFaLEVBQWU2TixRQUFmLENBQXdCanRCLEtBQXhCLEtBQWtDNGYsS0FBekM7TUFDQSxDQVRpQyxDQVdsQzs7O01BQ0EsSUFBTXNOLEVBQUUsR0FBRyxJQUFJblAsaURBQUosQ0FBUy9kLEtBQUssQ0FBQzRJLENBQU4sR0FBVWdYLEtBQW5CLEVBQTBCNWYsS0FBSyxDQUFDNkksQ0FBTixHQUFVK1csS0FBcEMsRUFBMkM1ZixLQUFLLENBQUM0SSxDQUFOLEdBQVVnWCxLQUFyRCxFQUE0RDVmLEtBQUssQ0FBQzZJLENBQU4sR0FBVStXLEtBQXRFLENBQVg7TUFDQSxJQUFNdU4sRUFBRSxHQUFHLElBQUlwUCxpREFBSixDQUFTL2QsS0FBSyxDQUFDNEksQ0FBTixHQUFVZ1gsS0FBbkIsRUFBMEI1ZixLQUFLLENBQUM2SSxDQUFOLEdBQVUrVyxLQUFwQyxFQUEyQzVmLEtBQUssQ0FBQzRJLENBQU4sR0FBVWdYLEtBQXJELEVBQTRENWYsS0FBSyxDQUFDNkksQ0FBTixHQUFVK1csS0FBdEUsQ0FBWDtNQUVBLElBQUlvQyxLQUFLLEdBQUcsQ0FBWjtNQUNBLElBQUk1RyxFQUFFLEdBQUcsS0FBS2dFLE1BQUwsQ0FBWTRDLEtBQUssRUFBakIsQ0FBVDtNQUNBLElBQUkzRyxFQUFFLEdBQUcsSUFBVDtNQUNBLElBQUkrUixPQUFPLEdBQUcsSUFBZDs7TUFFQSxPQUFPcEwsS0FBSyxHQUFHLEtBQUs1QyxNQUFMLENBQVk1YSxNQUEzQixFQUFtQztRQUNsQzZXLEVBQUUsR0FBRyxLQUFLK0QsTUFBTCxDQUFZNEMsS0FBSyxFQUFqQixDQUFMO1FBQ0FvTCxPQUFPLEdBQUcsSUFBSXJQLGlEQUFKLENBQVMzQyxFQUFFLENBQUN4UyxDQUFaLEVBQWV3UyxFQUFFLENBQUN2UyxDQUFsQixFQUFxQndTLEVBQUUsQ0FBQ3pTLENBQXhCLEVBQTJCeVMsRUFBRSxDQUFDeFMsQ0FBOUIsQ0FBVjs7UUFFQSxJQUFJdWtCLE9BQU8sQ0FBQ2hQLFVBQVIsQ0FBbUI4TyxFQUFuQixDQUFKLEVBQTRCO1VBQzNCLE9BQU8sSUFBUDtRQUNBOztRQUNELElBQUlFLE9BQU8sQ0FBQ2hQLFVBQVIsQ0FBbUIrTyxFQUFuQixDQUFKLEVBQTRCO1VBQzNCLE9BQU8sSUFBUDtRQUNBOztRQUVEL1IsRUFBRSxHQUFHQyxFQUFMO01BQ0E7O01BRUQsT0FBTyxLQUFQO0lBQ0E7OztXQUVELG9CQUFXMVosSUFBWCxFQUFxQztNQUNwQztNQUNBLElBQUksS0FBS3lkLE1BQUwsQ0FBWTVhLE1BQVosS0FBdUIsQ0FBM0IsRUFBOEI7UUFDN0IsT0FBTyxLQUFQO01BQ0EsQ0FGRCxNQUdLLElBQUksS0FBSzRhLE1BQUwsQ0FBWTVhLE1BQVosS0FBdUIsQ0FBM0IsRUFBOEI7UUFDbEMsT0FBTzdDLElBQUksQ0FBQ2tiLGFBQUwsQ0FBbUIsS0FBS3VDLE1BQUwsQ0FBWSxDQUFaLENBQW5CLENBQVA7TUFDQTs7TUFFRCxJQUFJNEMsS0FBSyxHQUFHLENBQVo7TUFDQSxJQUFJNUcsRUFBRSxHQUFHLEtBQUtnRSxNQUFMLENBQVk0QyxLQUFLLEVBQWpCLENBQVQ7TUFDQSxJQUFJM0csRUFBRSxHQUFHLElBQVQ7O01BRUEsT0FBTzJHLEtBQUssR0FBRyxLQUFLNUMsTUFBTCxDQUFZNWEsTUFBM0IsRUFBbUM7UUFDbEM2VyxFQUFFLEdBQUcsS0FBSytELE1BQUwsQ0FBWTRDLEtBQUssRUFBakIsQ0FBTDs7UUFFQSxJQUFJcmdCLElBQUksQ0FBQ21iLGNBQUwsQ0FBb0IxQixFQUFFLENBQUN4UyxDQUF2QixFQUEwQndTLEVBQUUsQ0FBQ3ZTLENBQTdCLEVBQWdDd1MsRUFBRSxDQUFDelMsQ0FBbkMsRUFBc0N5UyxFQUFFLENBQUN4UyxDQUF6QyxDQUFKLEVBQWlEO1VBQ2hELE9BQU8sSUFBUDtRQUNBOztRQUVEdVMsRUFBRSxHQUFHQyxFQUFMO01BQ0E7O01BRUQsT0FBTyxLQUFQO0lBQ0E7OztXQUVELHdCQUErQjtNQUM5QixJQUFNelMsQ0FBQyxHQUFHLEtBQUtta0IsUUFBTCxDQUFjbmtCLENBQXhCO01BQ0EsSUFBTUMsQ0FBQyxHQUFHLEtBQUtra0IsUUFBTCxDQUFjbGtCLENBQXhCO01BQ0EsSUFBTXVULEtBQUssR0FBRyxLQUFLNFEsUUFBTCxDQUFjcGtCLENBQWQsR0FBa0IsS0FBS21rQixRQUFMLENBQWNua0IsQ0FBOUM7TUFDQSxJQUFNeVQsTUFBTSxHQUFHLEtBQUsyUSxRQUFMLENBQWNua0IsQ0FBZCxHQUFrQixLQUFLa2tCLFFBQUwsQ0FBY2xrQixDQUEvQztNQUVBLEtBQUtvZSxNQUFMLENBQVkzYyxHQUFaLENBQWdCMUIsQ0FBaEIsRUFBbUJDLENBQW5CLEVBQXNCdVQsS0FBdEIsRUFBNkJDLE1BQTdCO0lBQ0E7OztXQUVELGlCQUFxQjtNQUNwQixJQUFNK0ksS0FBSyxHQUFHLElBQUkyRixXQUFKLENBQWdCLEtBQUs5b0IsTUFBckIsRUFBNkIsS0FBS2pCLEtBQUwsQ0FBV2QsS0FBWCxFQUE3QixDQUFkO01BQ0FrbEIsS0FBSyxDQUFDNkIsTUFBTixDQUFhM2MsR0FBYixDQUFpQixLQUFLMmMsTUFBTCxDQUFZcmUsQ0FBN0IsRUFBZ0MsS0FBS3FlLE1BQUwsQ0FBWXBlLENBQTVDLEVBQStDLEtBQUtvZSxNQUFMLENBQVk3SyxLQUEzRCxFQUFrRSxLQUFLNkssTUFBTCxDQUFZNUssTUFBOUU7TUFDQStJLEtBQUssQ0FBQ25rQixXQUFOLENBQWtCLEtBQUt5cEIsV0FBTCxFQUFsQjtNQUNBdEYsS0FBSyxDQUFDbFMsV0FBTixDQUFrQixLQUFLeVgsVUFBTCxFQUFsQjs7TUFKb0IsMkNBTUYsS0FBS3ZMLE1BTkg7TUFBQTs7TUFBQTtRQU1wQixvREFBK0I7VUFBQSxJQUF0QnBmLEtBQXNCO1VBQzlCb2xCLEtBQUssQ0FBQ2hHLE1BQU4sQ0FBYTdWLElBQWIsQ0FBa0J2SixLQUFLLENBQUNFLEtBQU4sRUFBbEI7UUFDQTtNQVJtQjtRQUFBO01BQUE7UUFBQTtNQUFBOztNQVVwQixPQUFPa2xCLEtBQVA7SUFDQTs7OztFQXRId0JrSDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNSMUI7QUFJQTs7SUFFTWU7Ozs7O0VBS0wsNEJBQVl0c0IsV0FBWixFQUFpQzBILEtBQWpDLEVBQStDO0lBQUE7O0lBQUE7O0lBQzlDLDBCQUFNMUgsV0FBTjs7SUFEOEM7O0lBRzlDLE1BQUswSCxLQUFMLEdBQWFBLEtBQWI7SUFIOEM7RUFJOUM7Ozs7V0FFRCx1QkFBYzlHLElBQWQsRUFBcUM7TUFDcEMsSUFBSSxLQUFLc2xCLE1BQUwsQ0FBWXhFLE9BQVosRUFBSixFQUEyQjtRQUMxQixLQUFLd0UsTUFBTCxDQUFZM2MsR0FBWixDQUFnQjNJLElBQUksQ0FBQ2lILENBQXJCLEVBQXdCakgsSUFBSSxDQUFDa0gsQ0FBN0IsRUFBZ0NsSCxJQUFJLENBQUN5YSxLQUFyQyxFQUE0Q3phLElBQUksQ0FBQzBhLE1BQWpEO01BQ0EsQ0FGRCxNQUdLO1FBQ0osS0FBSzRLLE1BQUwsQ0FBWXFHLEtBQVosQ0FBa0IzckIsSUFBbEI7TUFDQTs7TUFFRCxLQUFLd3BCLGNBQUwsQ0FBb0IsSUFBSUgsb0RBQUosQ0FBZSxJQUFmLEVBQXFCLEtBQUsvRCxNQUExQixDQUFwQjtJQUNBOzs7V0FFRCxvQkFBa0I7TUFDakIsT0FBTyxLQUFLeGUsS0FBWjtJQUNBOzs7V0FFRCxrQkFBU3pJLEtBQVQsRUFBZ0M7TUFDL0IsT0FBTyxLQUFLaW5CLE1BQUwsQ0FBWXBLLGFBQVosQ0FBMEI3YyxLQUExQixDQUFQO0lBQ0E7OztXQUVELG9CQUFXMkIsSUFBWCxFQUFxQztNQUNwQyxPQUFPLEtBQUtzbEIsTUFBTCxDQUFZbUYsWUFBWixDQUF5QnpxQixJQUF6QixLQUFrQyxJQUF6QztJQUNBOzs7V0FFRCxpQkFBNEI7TUFDM0IsSUFBTXlqQixLQUFLLEdBQUcsSUFBSWlJLGtCQUFKLENBQXVCLEtBQUtwckIsTUFBNUIsRUFBb0MsS0FBS3dHLEtBQXpDLENBQWQ7TUFDQTJjLEtBQUssQ0FBQ25rQixXQUFOLENBQWtCLEtBQUt5cEIsV0FBTCxFQUFsQjtNQUVBLE9BQU90RixLQUFQO0lBQ0E7OztXQUVELHdCQUErQixDQUM5QjtJQUNBOzs7O0VBM0MrQmtIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNOakM7QUFDQTtBQUVBOztJQUVNaUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBS0wsaUJBQVFyckIsSUFBUixFQUEwQjtNQUN6QixJQUFJLEtBQUtBLElBQUwsSUFBYSxLQUFLQSxJQUFMLENBQVVtVSxNQUFWLENBQWlCblUsSUFBakIsQ0FBakIsRUFBeUM7UUFDeEM7TUFDQTs7TUFFRCxLQUFLQSxJQUFMLEdBQVlBLElBQVo7TUFFQSxLQUFLaXBCLGNBQUwsQ0FBb0IsSUFBSUgsb0RBQUosQ0FBZSxJQUFmLEVBQXFCLEtBQUsvRCxNQUExQixDQUFwQjtJQUNBOzs7V0FFRCxtQkFBZ0I7TUFDZixPQUFPLEtBQUsva0IsSUFBWjtJQUNBOzs7V0FFRCxpQkFBbUI7TUFDbEIsSUFBTWtqQixLQUFLLEdBQUcsSUFBSW1JLFNBQUosQ0FBYyxLQUFLdHJCLE1BQW5CLENBQWQ7TUFDQW1qQixLQUFLLENBQUNrRyxXQUFOLENBQWtCLElBQUlybkIsa0RBQUosQ0FBVSxLQUFLZ2pCLE1BQUwsQ0FBWXJlLENBQXRCLEVBQXlCLEtBQUtxZSxNQUFMLENBQVlwZSxDQUFyQyxDQUFsQjtNQUNBdWMsS0FBSyxDQUFDbUcsT0FBTixDQUFjLEtBQUtycEIsSUFBbkI7TUFDQWtqQixLQUFLLENBQUNvRyxZQUFOLENBQW1CLEtBQUtDLFlBQUwsRUFBbkI7TUFDQXJHLEtBQUssQ0FBQ3NHLGlCQUFOLENBQXdCLElBQUlyaEIsR0FBSixDQUFRLEtBQUtzaEIsaUJBQUwsRUFBUixDQUF4QjtNQUVBLE9BQU92RyxLQUFQO0lBQ0E7Ozs7RUEzQnNCZ0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTHhCO0FBRUE7O0lBR2VBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0FTZCxpQkFBUW5pQixJQUFSLEVBQTRCO01BQzNCLElBQUksS0FBS0EsSUFBTCxLQUFjQSxJQUFsQixFQUF3QjtRQUN2QjtNQUNBOztNQUVELEtBQUtBLElBQUwsR0FBWUEsSUFBWjtNQUVBLEtBQUtraUIsY0FBTCxDQUFvQixJQUFJSCxvREFBSixDQUFlLElBQWYsRUFBcUIsS0FBSy9ELE1BQTFCLENBQXBCO0lBQ0E7OztXQUVELG1CQUFrQjtNQUNqQixPQUFPLEtBQUtoZSxJQUFaO0lBQ0E7OztXQUVELHNCQUFhUixLQUFiLEVBQWlDO01BQ2hDLElBQUksS0FBS3RHLFNBQUwsSUFBa0IsS0FBS0EsU0FBTCxDQUFla1UsTUFBZixDQUFzQjVOLEtBQXRCLENBQXRCLEVBQW9EO1FBQ25EO01BQ0E7O01BRUQsS0FBS3RHLFNBQUwsR0FBaUJzRyxLQUFqQjtNQUVBLEtBQUswaUIsY0FBTCxDQUFvQixJQUFJSCxvREFBSixDQUFlLElBQWYsRUFBcUIsS0FBSy9ELE1BQTFCLENBQXBCO0lBQ0E7OztXQUVELHdCQUFzQjtNQUNyQixPQUFPLEtBQUs5a0IsU0FBWjtJQUNBOzs7V0FFRCwyQkFBa0JpSSxVQUFsQixFQUEwRDtNQUN6RDtNQUNBO01BQ0E7TUFFQSxLQUFLaEksY0FBTCxHQUFzQixJQUFJaUksR0FBSixDQUFRRCxVQUFSLENBQXRCO01BRUEsS0FBSytnQixjQUFMLENBQW9CLElBQUlILG9EQUFKLENBQWUsSUFBZixFQUFxQixLQUFLL0QsTUFBMUIsQ0FBcEI7SUFDQTs7O1dBRUQsNkJBQTBDO01BQ3pDLE9BQU8sS0FBSzdrQixjQUFaO0lBQ0E7OztXQUVELHVCQUF1QjtNQUN0QixPQUFPLEtBQUtBLGNBQUwsQ0FBb0I4WCxHQUFwQixDQUF3QixXQUF4QixDQUFQO0lBQ0E7OztXQUVELDJCQUEyQjtNQUMxQixPQUFPLEtBQUs5WCxjQUFMLENBQW9COFgsR0FBcEIsQ0FBd0IsZUFBeEIsQ0FBUDtJQUNBOzs7V0FFRCxxQkFBWWxhLEtBQVosRUFBbUM7TUFDbEMsSUFBSSxLQUFLaW5CLE1BQUwsQ0FBWXJlLENBQVosS0FBa0I1SSxLQUFLLENBQUM0SSxDQUF4QixJQUE2QixLQUFLcWUsTUFBTCxDQUFZcGUsQ0FBWixLQUFrQjdJLEtBQUssQ0FBQzZJLENBQXpELEVBQTREO1FBQzNELE9BQU8sS0FBUDtNQUNBOztNQUVELEtBQUtvZSxNQUFMLENBQVlyZSxDQUFaLEdBQWdCNUksS0FBSyxDQUFDNEksQ0FBdEI7TUFDQSxLQUFLcWUsTUFBTCxDQUFZcGUsQ0FBWixHQUFnQjdJLEtBQUssQ0FBQzZJLENBQXRCO01BRUEsS0FBS3NpQixjQUFMLENBQW9CLElBQUlILG9EQUFKLENBQWUsSUFBZixFQUFxQixLQUFLL0QsTUFBMUIsQ0FBcEI7TUFFQSxPQUFPLElBQVA7SUFDQTs7O1dBRUQsd0JBQStCLENBRTlCOzs7O0VBMUVzQ3FGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0x4Qzs7SUFFTWtCOzs7OztFQUVMLHFCQUFjO0lBQUE7O0lBQUEseUJBQ1AsQ0FETyxFQUNKLElBREk7RUFFYjs7OztXQUVELHdCQUErQjtNQUM5Qix3TkFEOEIsQ0FHOUI7OztNQUNBLElBQU1wUixLQUFLLEdBQUcsS0FBSzZLLE1BQUwsQ0FBWTdLLEtBQTFCO01BQ0EsSUFBTUMsTUFBTSxHQUFHaUIsSUFBSSxDQUFDWSxHQUFMLENBQVM5QixLQUFLLEdBQUcsR0FBUixHQUFjLEdBQXZCLElBQThCa0IsSUFBSSxDQUFDbVEsSUFBTCxDQUFVLEtBQUt4RyxNQUFMLENBQVk1SyxNQUF0QixDQUE3QztNQUVBLEtBQUs0SyxNQUFMLENBQVk1SyxNQUFaLEdBQXFCQSxNQUFyQjtJQUNBOzs7O0VBZHNCbU87Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRnhCO0FBQ0E7QUFDQTs7SUFJTW1EOzs7OztFQUtMLDhCQUFjO0lBQUE7O0lBQUE7O0lBQ2I7O0lBRGE7O0lBR2IsTUFBS3BGLFFBQUwsR0FBZ0IsSUFBSW1GLDRFQUFKLEVBQWhCOztJQUNBLE1BQUtqRixTQUFMOztJQUphO0VBS2I7Ozs7O3NNQUVELGlCQUFrQmpwQixVQUFsQjtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLGlDQUNRb3VCLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQixFQUFoQixDQURSOztjQUFBO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQTs7Ozs7Ozs7OztXQUlBLG9CQUFXcnVCLFVBQVgsRUFBK0JtbkIsT0FBL0IsRUFBa0VDLFFBQWxFLEVBQXVGZixXQUF2RixFQUEySTtNQUMxSSxPQUFPLEtBQUswQyxRQUFMLENBQWNTLE1BQWQsQ0FBcUJyQyxPQUFyQixFQUE4QkMsUUFBOUIsRUFBd0NmLFdBQXhDLENBQVA7SUFDQTs7O1dBRUQsd0JBQWVybUIsVUFBZixFQUFtQ3NuQixJQUFuQyxFQUFzRDVRLElBQXRELEVBQXVFMFEsUUFBdkUsRUFBa0csQ0FDakc7SUFDQTs7O1dBRUQscUJBQTBCO01BQ3pCLEtBQUtsQixLQUFMLEdBQWEsRUFBYjs7TUFFQSxLQUFLLElBQUlwYyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLEdBQXBCLEVBQXlCQSxDQUFDLEVBQTFCLEVBQThCO1FBQzdCLEtBQUtvYyxLQUFMLENBQVduYyxJQUFYLENBQWdCLElBQUk4Yyx1Q0FBSixDQUFTLElBQVQsRUFBZS9jLENBQWYsQ0FBaEI7TUFDQTtJQUNEOzs7O0VBOUIrQmtjOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTmpDOztJQUdNMWlCOzs7OztFQUtMLGVBQVkyRixLQUFaLEVBQTBCMlQsS0FBMUIsRUFBeUM7SUFBQTs7SUFBQTs7SUFDeEMsMEJBQU0zVCxLQUFOOztJQUR3Qzs7SUFHeEMsTUFBSzJULEtBQUwsR0FBYUEsS0FBYjtJQUh3QztFQUl4Qzs7OztXQUVELGlCQUFlO01BQ2QsT0FBTyxJQUFJdFosS0FBSixDQUFVLEtBQUsyRixLQUFmLEVBQXNCLEtBQUsyVCxLQUEzQixDQUFQO0lBQ0E7Ozs7RUFia0IwUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIcEIsSUFBTUMsZUFBZSxHQUFHLDZDQUF4Qjs7SUFFTWhyQjtFQVFMLGVBQVlpckIsQ0FBWixFQUF1QkMsQ0FBdkIsRUFBa0N6VyxDQUFsQyxFQUE2Q0QsQ0FBN0MsRUFBeUQ7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDeEQsS0FBS3lXLENBQUwsR0FBU0EsQ0FBVDtJQUNBLEtBQUtDLENBQUwsR0FBU0EsQ0FBVDtJQUNBLEtBQUt6VyxDQUFMLEdBQVNBLENBQVQ7SUFDQSxLQUFLRCxDQUFMLEdBQVNBLENBQUMsSUFBSSxDQUFkO0VBQ0E7Ozs7V0FFRCxpQkFBZ0I7TUFDZixPQUFPLE1BQU0sS0FBS3lXLENBQUwsQ0FBTzdqQixRQUFQLENBQWdCLEVBQWhCLENBQU4sR0FBNEIsS0FBSzhqQixDQUFMLENBQU85akIsUUFBUCxDQUFnQixFQUFoQixDQUE1QixHQUFrRCxLQUFLcU4sQ0FBTCxDQUFPck4sUUFBUCxDQUFnQixFQUFoQixDQUF6RDtJQUNBOzs7V0FFRCxpQkFBZ0I7TUFDZixxQkFBYyxLQUFLNmpCLENBQW5CLGVBQXlCLEtBQUtDLENBQTlCLGVBQW9DLEtBQUt6VyxDQUF6QztJQUNBOzs7V0FFRCxrQkFBaUI7TUFDaEIsc0JBQWUsS0FBS3dXLENBQXBCLGVBQTBCLEtBQUtDLENBQS9CLGVBQXFDLEtBQUt6VyxDQUExQyxlQUFnRCxLQUFLRCxDQUFyRDtJQUNBOzs7V0FFRCxpQkFBUTJXLEtBQVIsRUFBK0I7TUFDOUIsc0JBQWUsS0FBS0YsQ0FBcEIsZUFBMEIsS0FBS0MsQ0FBL0IsZUFBcUMsS0FBS3pXLENBQTFDLGVBQWdEMFcsS0FBaEQ7SUFDQTs7O1dBRUQsZ0JBQU8zWCxLQUFQLEVBQThCO01BQzdCLE9BQU8sS0FBS2dCLENBQUwsS0FBV2hCLEtBQUssQ0FBQ2dCLENBQWpCLElBQXNCLEtBQUt5VyxDQUFMLEtBQVd6WCxLQUFLLENBQUN5WCxDQUF2QyxJQUE0QyxLQUFLQyxDQUFMLEtBQVcxWCxLQUFLLENBQUMwWCxDQUE3RCxJQUFrRSxLQUFLelcsQ0FBTCxLQUFXakIsS0FBSyxDQUFDaUIsQ0FBMUY7SUFDQTs7O1dBRUQsaUJBQWUyVyxHQUFmLEVBQW1DO01BQ2xDLElBQUlwTixDQUFDLEdBQUdvTixHQUFHLENBQUNDLElBQUosRUFBUjs7TUFFQSxJQUFJck4sQ0FBQyxDQUFDeUcsT0FBRixDQUFVLEdBQVYsTUFBbUIsQ0FBdkIsRUFBMEI7UUFDekIsTUFBTSxJQUFJM25CLEtBQUosQ0FBVSxnQ0FBVixDQUFOO01BQ0E7O01BRURraEIsQ0FBQyxHQUFHQSxDQUFDLENBQUM3TSxNQUFGLENBQVM2TSxDQUFDLENBQUN5RyxPQUFGLENBQVUsR0FBVixJQUFpQixDQUExQixDQUFKO01BRUEsSUFBTXdHLENBQUMsR0FBR3ZTLFFBQVEsQ0FBQ3NGLENBQUMsQ0FBQzdNLE1BQUYsQ0FBUyxDQUFULEVBQVksQ0FBWixDQUFELEVBQWlCLEVBQWpCLENBQWxCO01BQ0EsSUFBTStaLENBQUMsR0FBR3hTLFFBQVEsQ0FBQ3NGLENBQUMsQ0FBQzdNLE1BQUYsQ0FBUyxDQUFULEVBQVksQ0FBWixDQUFELEVBQWlCLEVBQWpCLENBQWxCO01BQ0EsSUFBTXNELENBQUMsR0FBR2lFLFFBQVEsQ0FBQ3NGLENBQUMsQ0FBQzdNLE1BQUYsQ0FBUyxDQUFULEVBQVksQ0FBWixDQUFELEVBQWlCLEVBQWpCLENBQWxCO01BRUEsT0FBTyxJQUFJblIsS0FBSixDQUFVaXJCLENBQVYsRUFBYUMsQ0FBYixFQUFnQnpXLENBQWhCLENBQVA7SUFDQTs7O1dBRUQsdUJBQXFCMlcsR0FBckIsRUFBeUM7TUFDeEMsSUFBSXBOLENBQUMsR0FBR29OLEdBQUcsQ0FBQ0MsSUFBSixFQUFSOztNQUVBLElBQUlyTixDQUFDLENBQUN5RyxPQUFGLENBQVUsS0FBVixNQUFxQixDQUF6QixFQUE0QjtRQUMzQixNQUFNLElBQUkzbkIsS0FBSixDQUFVLGdDQUFWLENBQU47TUFDQTs7TUFFRCxJQUFNd3VCLEdBQUcsR0FBR04sZUFBZSxDQUFDTyxJQUFoQixDQUFxQnZOLENBQXJCLENBQVo7TUFFQSxJQUFNaU4sQ0FBQyxHQUFHdlMsUUFBUSxDQUFDNFMsR0FBRyxDQUFDLENBQUQsQ0FBSixFQUFTLEVBQVQsQ0FBbEI7TUFDQSxJQUFNSixDQUFDLEdBQUd4UyxRQUFRLENBQUM0UyxHQUFHLENBQUMsQ0FBRCxDQUFKLEVBQVMsRUFBVCxDQUFsQjtNQUNBLElBQU03VyxDQUFDLEdBQUdpRSxRQUFRLENBQUM0UyxHQUFHLENBQUMsQ0FBRCxDQUFKLEVBQVMsRUFBVCxDQUFsQjtNQUNBLElBQU05VyxDQUFDLEdBQUc4VyxHQUFHLENBQUMsQ0FBRCxDQUFILEdBQVNsYyxVQUFVLENBQUNrYyxHQUFHLENBQUMsQ0FBRCxDQUFKLENBQW5CLEdBQThCLENBQXhDO01BRUEsT0FBTyxJQUFJdHJCLEtBQUosQ0FBVWlyQixDQUFWLEVBQWFDLENBQWIsRUFBZ0J6VyxDQUFoQixFQUFtQkQsQ0FBbkIsQ0FBUDtJQUNBOzs7V0FFRCx1QkFBcUJsUCxJQUFyQixFQUEwQztNQUN6QyxJQUFNa1AsQ0FBQyxHQUFHLENBQUVsUCxJQUFJLElBQUksRUFBVCxHQUFlLElBQWhCLElBQXdCLElBQWxDO01BQ0EsSUFBTTJsQixDQUFDLEdBQUkzbEIsSUFBSSxJQUFJLEVBQVQsR0FBZSxJQUF6QjtNQUNBLElBQU00bEIsQ0FBQyxHQUFJNWxCLElBQUksSUFBSSxDQUFULEdBQWMsSUFBeEI7TUFDQSxJQUFNbVAsQ0FBQyxHQUFHblAsSUFBSSxHQUFHLElBQWpCO01BRUEsT0FBTyxJQUFJdEYsS0FBSixDQUFVaXJCLENBQVYsRUFBYUMsQ0FBYixFQUFnQnpXLENBQWhCLEVBQW1CRCxDQUFuQixDQUFQO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUM3RUlwVDtFQVdMLGNBQVlvcUIsTUFBWixFQUE0QnJZLElBQTVCLEVBQTBDcEQsS0FBMUMsRUFBMERsSixNQUExRCxFQUEyRTtJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUMxRSxLQUFLMmtCLE1BQUwsR0FBY0EsTUFBZDtJQUNBLEtBQUtyWSxJQUFMLEdBQVlBLElBQVo7SUFDQSxLQUFLcEQsS0FBTCxHQUFhQSxLQUFiO0lBQ0EsS0FBS2xKLE1BQUwsR0FBY0EsTUFBZDtFQUNBOzs7O1dBRUQsZ0JBQU8yTSxLQUFQLEVBQTZCO01BQzVCLElBQUksQ0FBQ0EsS0FBTCxFQUFZO1FBQ1gsT0FBTyxLQUFQO01BQ0E7O01BQ0QsSUFBSSxTQUFTQSxLQUFiLEVBQW9CO1FBQ25CLE9BQU8sSUFBUDtNQUNBOztNQUVELE9BQU8sS0FBS2dZLE1BQUwsS0FBZ0JoWSxLQUFLLENBQUNnWSxNQUF0QixJQUNOLEtBQUtyWSxJQUFMLEtBQWNLLEtBQUssQ0FBQ0wsSUFEZCxJQUVOLEtBQUtwRCxLQUFMLEtBQWV5RCxLQUFLLENBQUN6RCxLQUZmLElBR04sS0FBS2xKLE1BQUwsS0FBZ0IyTSxLQUFLLENBQUMzTSxNQUh2QjtJQUlBOzs7V0FFRCxvQkFBbUI7TUFDbEIsSUFBSW1SLEdBQUcsR0FBRyxLQUFLN0UsSUFBTCxHQUFZLEtBQVosR0FBb0IsS0FBS3FZLE1BQW5DOztNQUVBLElBQUksS0FBSzNrQixNQUFULEVBQWlCO1FBQ2hCbVIsR0FBRyxHQUFHLEtBQUtuUixNQUFMLEdBQWMsR0FBZCxHQUFvQm1SLEdBQTFCO01BQ0E7O01BQ0QsSUFBSSxLQUFLakksS0FBVCxFQUFnQjtRQUNmaUksR0FBRyxHQUFHLEtBQUtqSSxLQUFMLEdBQWEsR0FBYixHQUFtQmlJLEdBQXpCO01BQ0E7O01BRUQsT0FBT0EsR0FBUDtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDekNJK1Msd0dBS0wsZUFBWXJsQixLQUFaLEVBQTBCO0VBQUE7O0VBQUE7O0VBQ3pCLEtBQUtBLEtBQUwsR0FBYUEsS0FBYjtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDSkkrbEI7Ozs7Ozs7V0FFTCxnQkFBTzdILE9BQVAsRUFBMEN2QixLQUExQyxFQUE2RFMsV0FBN0QsRUFBMkY7TUFDMUYsSUFBTTFLLEVBQUUsR0FBR2lLLEtBQUssQ0FBQ2hHLE1BQU4sQ0FBYSxDQUFiLENBQVg7TUFDQSxJQUFNaEUsRUFBRSxHQUFHZ0ssS0FBSyxDQUFDaEcsTUFBTixDQUFhLENBQWIsQ0FBWDs7TUFFQSxJQUFJLENBQUNqRSxFQUFELElBQU8sQ0FBQ0MsRUFBWixFQUFnQjtRQUNmO01BQ0E7O01BRUQsSUFBTWhjLFFBQVEsR0FBR2dtQixLQUFLLENBQUNzRixXQUFOLEVBQWpCO01BQ0EsSUFBTTFwQixLQUFLLEdBQUdva0IsS0FBSyxDQUFDcGtCLEtBQXBCO01BRUEybEIsT0FBTyxDQUFDbE8sSUFBUjtNQUVBLEtBQUtnVyxlQUFMLENBQXFCOUgsT0FBckIsRUFBOEJ2bkIsUUFBOUIsRUFBd0MrYixFQUF4QyxFQUE0Q0MsRUFBNUMsRUFBZ0RwYSxLQUFLLENBQUNvYixLQUF0RDtNQUVBdUssT0FBTyxDQUFDK0gsU0FBUixHQUFvQjF0QixLQUFLLENBQUN5SCxLQUFOLENBQVlrbUIsTUFBWixFQUFwQjtNQUNBaEksT0FBTyxDQUFDbUUsSUFBUjtNQUNBbkUsT0FBTyxDQUFDaE8sT0FBUjs7TUFFQSxJQUFJeU0sS0FBSyxDQUFDdUYsVUFBTixFQUFKLEVBQXdCO1FBQ3ZCLElBQU0xUyxLQUFLLEdBQUcwTyxPQUFPLENBQUMzUCxlQUFSLEdBQTBCME0sU0FBMUIsRUFBZDtRQUVBLEtBQUsrSyxlQUFMLENBQXFCOUgsT0FBckIsRUFBOEJ2bkIsUUFBOUIsRUFBd0MrYixFQUF4QyxFQUE0Q0MsRUFBNUMsRUFBZ0RwYSxLQUFLLENBQUNvYixLQUF0RDtRQUVBdUssT0FBTyxDQUFDaUksV0FBUixHQUFzQixrQkFBdEI7UUFDQWpJLE9BQU8sQ0FBQ2tJLFNBQVIsR0FBb0IsSUFBSTVXLEtBQXhCO1FBQ0EwTyxPQUFPLENBQUNtSSxXQUFSLENBQW9CLENBQUMsSUFBSTdXLEtBQUwsQ0FBcEI7UUFDQTBPLE9BQU8sQ0FBQ3RILE1BQVI7TUFDQTtJQUNEOzs7V0FFRCx5QkFBd0JzSCxPQUF4QixFQUEyRHZuQixRQUEzRCxFQUFvRmdjLEVBQXBGLEVBQWtHQyxFQUFsRyxFQUFnSGUsS0FBaEgsRUFBcUk7TUFDcEksSUFBTTJTLElBQUksR0FBRzN2QixRQUFRLElBQUksSUFBWixJQUFvQkEsUUFBUSxDQUFDZ0osTUFBMUM7TUFDQSxJQUFNNG1CLFFBQVEsR0FBRzV2QixRQUFRLElBQUksSUFBWixJQUFvQkEsUUFBUSxDQUFDOEksUUFBOUM7TUFFQSxJQUFNNlUsRUFBRSxHQUFHM0IsRUFBRSxDQUFDeFMsQ0FBZDtNQUNBLElBQU1vVSxFQUFFLEdBQUc1QixFQUFFLENBQUN2UyxDQUFkO01BQ0EsSUFBTW9VLEVBQUUsR0FBRzVCLEVBQUUsQ0FBQ3pTLENBQWQ7TUFDQSxJQUFNc1UsRUFBRSxHQUFHN0IsRUFBRSxDQUFDeFMsQ0FBZDtNQUNBLElBQU1DLENBQUMsR0FBR2ltQixJQUFJLEdBQUczUyxLQUFLLEdBQUcsQ0FBWCxHQUFlQSxLQUE3QjtNQUNBLElBQU02UyxFQUFFLEdBQUdubUIsQ0FBQyxHQUFHLENBQWY7TUFDQSxJQUFNa1YsRUFBRSxHQUFHZixFQUFFLEdBQUdGLEVBQWhCO01BQ0EsSUFBTWtCLEVBQUUsR0FBR2YsRUFBRSxHQUFHRixFQUFoQjtNQUNBLElBQU1uRSxLQUFLLEdBQUd5RSxJQUFJLENBQUN3RSxLQUFMLENBQVc3RCxFQUFYLEVBQWVELEVBQWYsQ0FBZDtNQUNBLElBQU14WixNQUFNLEdBQUc4WSxJQUFJLENBQUNNLElBQUwsQ0FBVUksRUFBRSxHQUFHQSxFQUFMLEdBQVVDLEVBQUUsR0FBR0EsRUFBekIsQ0FBZjtNQUVBLElBQU1pUixVQUFVLEdBQUcsR0FBbkI7TUFDQSxJQUFNQyxXQUFXLEdBQUdybUIsQ0FBQyxHQUFHLENBQXhCO01BQ0EsSUFBTXNtQixRQUFRLEdBQUcsSUFBakI7TUFDQSxJQUFNQyxJQUFJLEdBQUc3cUIsTUFBTSxHQUFHc0UsQ0FBQyxHQUFHLEdBQUosR0FBVW9tQixVQUFoQztNQUVBLElBQU1JLE1BQU0sR0FBRzlxQixNQUFNLEdBQUcycUIsV0FBVyxHQUFHLEdBQXRDO01BQ0EsSUFBTUksTUFBTSxHQUFHTCxVQUFVLEdBQUdDLFdBQWIsR0FBMkIsR0FBM0IsR0FBaUNDLFFBQWhEO01BQ0EsSUFBTUksVUFBVSxHQUFHTixVQUFVLEdBQUdDLFdBQWhDO01BQ0EsSUFBTXZtQixDQUFDLEdBQUdvbUIsUUFBUSxHQUFHbG1CLENBQUMsR0FBRyxHQUFKLEdBQVVvbUIsVUFBVixHQUF1QkMsV0FBVyxHQUFHLElBQXhDLEdBQStDLENBQWpFO01BRUF4SSxPQUFPLENBQUNwTyxTQUFSLENBQWtCd0UsRUFBbEIsRUFBc0JDLEVBQXRCO01BQ0EySixPQUFPLENBQUM1TyxNQUFSLENBQWVjLEtBQWY7TUFFQThOLE9BQU8sQ0FBQ2xILFNBQVI7TUFDQWtILE9BQU8sQ0FBQzhJLE1BQVIsQ0FBZTdtQixDQUFmLEVBQWtCLENBQUNxbUIsRUFBbkI7TUFDQXRJLE9BQU8sQ0FBQytJLE1BQVIsQ0FBZUwsSUFBSSxHQUFHRixXQUFXLEdBQUcsSUFBcEMsRUFBMEMsQ0FBQ0YsRUFBM0M7TUFDQXRJLE9BQU8sQ0FBQytJLE1BQVIsQ0FBZUwsSUFBSSxHQUFHRixXQUF0QixFQUFtQyxDQUFDSyxVQUFwQztNQUNBN0ksT0FBTyxDQUFDZ0osZ0JBQVIsQ0FBeUJMLE1BQXpCLEVBQWlDLENBQUNDLE1BQWxDLEVBQTBDL3FCLE1BQTFDLEVBQWtELENBQWxEO01BQ0FtaUIsT0FBTyxDQUFDZ0osZ0JBQVIsQ0FBeUJMLE1BQXpCLEVBQWlDQyxNQUFqQyxFQUF5Q0YsSUFBSSxHQUFHRixXQUFoRCxFQUE2REssVUFBN0Q7TUFDQTdJLE9BQU8sQ0FBQytJLE1BQVIsQ0FBZUwsSUFBSSxHQUFHRixXQUFXLEdBQUcsSUFBcEMsRUFBMENGLEVBQTFDO01BQ0F0SSxPQUFPLENBQUMrSSxNQUFSLENBQWU5bUIsQ0FBZixFQUFrQnFtQixFQUFsQjs7TUFFQSxJQUFJRCxRQUFKLEVBQWM7UUFDYixJQUFNTSxPQUFNLEdBQUcxbUIsQ0FBQyxHQUFHdW1CLFdBQVcsR0FBRyxHQUFqQzs7UUFDQSxJQUFNSSxPQUFNLEdBQUdMLFVBQVUsR0FBR0MsV0FBYixHQUEyQixHQUEzQixHQUFpQ0MsUUFBaEQ7O1FBRUF6SSxPQUFPLENBQUMrSSxNQUFSLENBQWU5bUIsQ0FBQyxHQUFHdW1CLFdBQVcsR0FBRyxJQUFqQyxFQUF1Q0ssVUFBdkM7UUFDQTdJLE9BQU8sQ0FBQ2dKLGdCQUFSLENBQXlCTCxPQUF6QixFQUFpQ0MsT0FBakMsRUFBeUMsQ0FBekMsRUFBNEMsQ0FBNUM7UUFDQTVJLE9BQU8sQ0FBQ2dKLGdCQUFSLENBQXlCTCxPQUF6QixFQUFpQyxDQUFDQyxPQUFsQyxFQUEwQzNtQixDQUFDLEdBQUd1bUIsV0FBVyxHQUFHLElBQTVELEVBQWtFLENBQUNLLFVBQW5FO01BQ0E7O01BRUQ3SSxPQUFPLENBQUNpSixTQUFSO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDakZJQzs7Ozs7OztXQUVMLGdCQUFPbEosT0FBUCxFQUEwQ3ZCLEtBQTFDLEVBQStEUyxXQUEvRCxFQUE2RjtNQUM1RixJQUFNMUssRUFBRSxHQUFHaUssS0FBSyxDQUFDaEcsTUFBTixDQUFhLENBQWIsQ0FBWDtNQUNBLElBQU1oRSxFQUFFLEdBQUdnSyxLQUFLLENBQUNoRyxNQUFOLENBQWEsQ0FBYixDQUFYOztNQUVBLElBQUksQ0FBQ2pFLEVBQUQsSUFBTyxDQUFDQyxFQUFaLEVBQWdCO1FBQ2Y7TUFDQTs7TUFFRCxJQUFNaGMsUUFBUSxHQUFHZ21CLEtBQUssQ0FBQ3NGLFdBQU4sRUFBakI7TUFDQSxJQUFNMXBCLEtBQUssR0FBR29rQixLQUFLLENBQUNwa0IsS0FBcEI7TUFDQSxJQUFNeUgsS0FBSyxHQUFHekgsS0FBSyxDQUFDeUgsS0FBTixDQUFZa21CLE1BQVosRUFBZDtNQUNBLElBQU03RCxJQUFJLEdBQUcxckIsUUFBUSxJQUFJQSxRQUFRLENBQUNnSixNQUFsQztNQUVBLElBQU0wbkIsSUFBSSxHQUFHeFMsSUFBSSxDQUFDc0UsR0FBTCxDQUFTekcsRUFBRSxDQUFDdlMsQ0FBWixFQUFld1MsRUFBRSxDQUFDeFMsQ0FBbEIsQ0FBYjtNQUNBLElBQU1tbkIsSUFBSSxHQUFHelMsSUFBSSxDQUFDc0UsR0FBTCxDQUFTekcsRUFBRSxDQUFDdFMsQ0FBWixFQUFldVMsRUFBRSxDQUFDdlMsQ0FBbEIsQ0FBYjtNQUNBLElBQU1tbkIsSUFBSSxHQUFHMVMsSUFBSSxDQUFDdEssR0FBTCxDQUFTbUksRUFBRSxDQUFDdlMsQ0FBWixFQUFld1MsRUFBRSxDQUFDeFMsQ0FBbEIsQ0FBYjtNQUNBLElBQU1xbkIsSUFBSSxHQUFHM1MsSUFBSSxDQUFDdEssR0FBTCxDQUFTbUksRUFBRSxDQUFDdFMsQ0FBWixFQUFldVMsRUFBRSxDQUFDdlMsQ0FBbEIsQ0FBYjtNQUVBLElBQU0wVCxPQUFPLEdBQUdlLElBQUksQ0FBQ1ksR0FBTCxDQUFTOFIsSUFBSSxHQUFHRixJQUFoQixJQUF3QixHQUF4QztNQUNBLElBQU10VCxPQUFPLEdBQUdjLElBQUksQ0FBQ1ksR0FBTCxDQUFTK1IsSUFBSSxHQUFHRixJQUFoQixJQUF3QixHQUF4QztNQUNBLElBQU10VCxPQUFPLEdBQUdxVCxJQUFJLEdBQUd2VCxPQUF2QjtNQUNBLElBQU1HLE9BQU8sR0FBR3FULElBQUksR0FBR3ZULE9BQXZCO01BRUFtSyxPQUFPLENBQUNsSCxTQUFSOztNQUVBLElBQUlxTCxJQUFKLEVBQVU7UUFDVG5FLE9BQU8sQ0FBQytILFNBQVIsR0FBb0JqbUIsS0FBcEI7UUFDQWtlLE9BQU8sQ0FBQ2tFLE9BQVIsQ0FBZ0JwTyxPQUFoQixFQUF5QkMsT0FBekIsRUFBa0NILE9BQWxDLEVBQTJDQyxPQUEzQyxFQUFvRCxDQUFwRCxFQUF1RCxDQUF2RCxFQUEwRGMsSUFBSSxDQUFDa0UsRUFBTCxHQUFVLENBQXBFO1FBQ0FtRixPQUFPLENBQUNtRSxJQUFSO01BQ0EsQ0FKRCxNQUtLO1FBQ0puRSxPQUFPLENBQUNpSSxXQUFSLEdBQXNCbm1CLEtBQXRCO1FBQ0FrZSxPQUFPLENBQUNrSSxTQUFSLEdBQW9CN3RCLEtBQUssQ0FBQ29iLEtBQTFCO1FBQ0F1SyxPQUFPLENBQUNrRSxPQUFSLENBQWdCcE8sT0FBaEIsRUFBeUJDLE9BQXpCLEVBQWtDSCxPQUFsQyxFQUEyQ0MsT0FBM0MsRUFBb0QsQ0FBcEQsRUFBdUQsQ0FBdkQsRUFBMERjLElBQUksQ0FBQ2tFLEVBQUwsR0FBVSxDQUFwRTtRQUNBbUYsT0FBTyxDQUFDdEgsTUFBUjtNQUNBOztNQUVELElBQUkrRixLQUFLLENBQUN1RixVQUFOLEVBQUosRUFBd0I7UUFDdkIsSUFBSTdoQixDQUFDLEdBQUcsQ0FBUjs7UUFFQSxJQUFJZ2lCLElBQUosRUFBVTtVQUNUO1VBQ0FoaUIsQ0FBQyxHQUFHOUgsS0FBSyxDQUFDb2IsS0FBTixHQUFjLENBQWxCO1FBQ0E7O1FBRUR1SyxPQUFPLENBQUNsSCxTQUFSO1FBQ0FrSCxPQUFPLENBQUNpSSxXQUFSLEdBQXNCLGtCQUF0QjtRQUNBakksT0FBTyxDQUFDa0ksU0FBUixHQUFvQjd0QixLQUFLLENBQUNvYixLQUExQjtRQUNBdUssT0FBTyxDQUFDbUksV0FBUixDQUFvQixDQUFDLElBQUluSSxPQUFPLENBQUMzUCxlQUFSLEdBQTBCME0sU0FBMUIsRUFBTCxDQUFwQjtRQUNBaUQsT0FBTyxDQUFDa0UsT0FBUixDQUFnQnBPLE9BQWhCLEVBQXlCQyxPQUF6QixFQUFrQ0gsT0FBTyxHQUFHelQsQ0FBNUMsRUFBK0MwVCxPQUFPLEdBQUcxVCxDQUF6RCxFQUE0RCxDQUE1RCxFQUErRCxDQUEvRCxFQUFrRXdVLElBQUksQ0FBQ2tFLEVBQUwsR0FBVSxDQUE1RTtRQUNBbUYsT0FBTyxDQUFDdEgsTUFBUjtNQUNBO0lBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDckRJNlE7Ozs7Ozs7V0FFTCxnQkFBT3ZKLE9BQVAsRUFBMEN2QixLQUExQyxFQUE4RFMsV0FBOUQsRUFBNEY7TUFDM0YsSUFBTXpHLE1BQU0sR0FBR2dHLEtBQUssQ0FBQ2hHLE1BQXJCO01BQ0EsSUFBTStRLFVBQVUsR0FBRy9RLE1BQU0sQ0FBQzVhLE1BQTFCOztNQUVBLElBQUkyckIsVUFBVSxHQUFHLENBQWpCLEVBQW9CO1FBQ25CO01BQ0E7O01BRUQsSUFBTW52QixLQUFLLEdBQUdva0IsS0FBSyxDQUFDcGtCLEtBQXBCO01BQ0EsSUFBTXlILEtBQUssR0FBRzJjLEtBQUssQ0FBQ3VGLFVBQU4sS0FBcUIsd0JBQXJCLEdBQWdEM3BCLEtBQUssQ0FBQ3lILEtBQU4sQ0FBWWttQixNQUFaLEVBQTlEO01BRUEsSUFBSTNNLEtBQUssR0FBRyxDQUFaO01BQ0EsSUFBSTdHLEVBQUUsR0FBR2lFLE1BQU0sQ0FBQzRDLEtBQUssRUFBTixDQUFmOztNQUVBLElBQUlBLEtBQUssS0FBS21PLFVBQWQsRUFBMEI7UUFDekIsS0FBS0MsVUFBTCxDQUFnQnpKLE9BQWhCLEVBQXlCM2xCLEtBQXpCLEVBQWdDbWEsRUFBRSxDQUFDdlMsQ0FBbkMsRUFBc0N1UyxFQUFFLENBQUN0UyxDQUF6QyxFQUE0Q3NTLEVBQUUsQ0FBQzhELENBQS9DO1FBQ0E7TUFDQTs7TUFFRDBILE9BQU8sQ0FBQ2xILFNBQVI7TUFDQWtILE9BQU8sQ0FBQ2lJLFdBQVIsR0FBc0JubUIsS0FBdEI7TUFDQWtlLE9BQU8sQ0FBQ2tJLFNBQVIsR0FBb0I3dEIsS0FBSyxDQUFDb2IsS0FBMUI7TUFDQXVLLE9BQU8sQ0FBQ3JlLE9BQVIsR0FBa0IsT0FBbEI7TUFDQXFlLE9BQU8sQ0FBQzBKLFFBQVIsR0FBbUIsT0FBbkI7TUFDQTFKLE9BQU8sQ0FBQzJKLFdBQVIsR0FBc0IsQ0FBdEI7TUFDQTNKLE9BQU8sQ0FBQzRKLHdCQUFSLEdBQW1DLFVBQW5DO01BRUE1SixPQUFPLENBQUM4SSxNQUFSLENBQWV0VSxFQUFFLENBQUN2UyxDQUFsQixFQUFxQnVTLEVBQUUsQ0FBQ3RTLENBQXhCOztNQUVBLE9BQU9tWixLQUFLLEdBQUdtTyxVQUFmLEVBQTJCO1FBQzFCaFYsRUFBRSxHQUFHaUUsTUFBTSxDQUFDNEMsS0FBSyxFQUFOLENBQVg7UUFFQTJFLE9BQU8sQ0FBQytJLE1BQVIsQ0FBZXZVLEVBQUUsQ0FBQ3ZTLENBQWxCLEVBQXFCdVMsRUFBRSxDQUFDdFMsQ0FBeEI7TUFDQTs7TUFFRDhkLE9BQU8sQ0FBQ3RILE1BQVI7SUFDQTs7O1dBRUQsb0JBQW1Cc0gsT0FBbkIsRUFBc0QzbEIsS0FBdEQsRUFBb0U0SCxDQUFwRSxFQUErRUMsQ0FBL0UsRUFBMEZvVyxDQUExRixFQUEyRztNQUMxRyxJQUFNblcsQ0FBQyxHQUFHbVcsQ0FBQyxHQUFHamUsS0FBSyxDQUFDb2IsS0FBcEI7TUFDQSxJQUFNMUUsQ0FBQyxHQUFHNU8sQ0FBQyxHQUFHLENBQWQ7TUFFQTZkLE9BQU8sQ0FBQ2xILFNBQVI7TUFDQWtILE9BQU8sQ0FBQytILFNBQVIsR0FBb0IxdEIsS0FBSyxDQUFDeUgsS0FBTixDQUFZa21CLE1BQVosRUFBcEI7TUFDQWhJLE9BQU8sQ0FBQzZKLEdBQVIsQ0FBWTVuQixDQUFaLEVBQWVDLENBQWYsRUFBa0I2TyxDQUFsQixFQUFxQixDQUFyQixFQUF3QixJQUFJNEYsSUFBSSxDQUFDa0UsRUFBakM7TUFDQW1GLE9BQU8sQ0FBQ21FLElBQVI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuREY7O0lBR00yRjs7Ozs7OztXQUVMLGdCQUFPOUosT0FBUCxFQUEwQ3ZCLEtBQTFDLEVBQTZEUyxXQUE3RCxFQUEyRjtNQUMxRixJQUFNNWMsSUFBSSxHQUFHbWMsS0FBSyxDQUFDc0wsT0FBTixFQUFiOztNQUVBLElBQUksQ0FBQ3puQixJQUFELElBQVNBLElBQUksQ0FBQ3pFLE1BQUwsS0FBZ0IsQ0FBN0IsRUFBZ0M7UUFDL0I7TUFDQTs7TUFFRCxJQUFNeWlCLE1BQU0sR0FBRzdCLEtBQUssQ0FBQzZCLE1BQXJCO01BQ0EsSUFBTS9rQixJQUFJLEdBQUdrakIsS0FBSyxDQUFDdUwsT0FBTixFQUFiO01BRUEsSUFBTXRZLFNBQVMsR0FBR3NPLE9BQU8sQ0FBQzNQLGVBQVIsRUFBbEI7TUFDQSxJQUFNaUIsS0FBSyxHQUFHSSxTQUFTLENBQUNxTCxTQUFWLEVBQWQ7TUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBOztNQUNFLElBQU1rTixZQUFZLEdBQUcxdUIsSUFBSSxDQUFDZ1UsSUFBTCxHQUFZK0IsS0FBakM7TUFDQSxJQUFNclAsQ0FBQyxHQUFHeVAsU0FBUyxDQUFDeUwsYUFBVixLQUE0Qm1ELE1BQU0sQ0FBQ3JlLENBQVAsR0FBV3FQLEtBQWpEO01BQ0EsSUFBTXBQLENBQUMsR0FBR3dQLFNBQVMsQ0FBQzBMLGFBQVYsS0FBNEJrRCxNQUFNLENBQUNwZSxDQUFQLEdBQVdvUCxLQUFqRDtNQUVBLElBQU00WSxVQUFVLEdBQUcsSUFBSTFzQiw2Q0FBSixDQUFTakMsSUFBSSxDQUFDcXNCLE1BQWQsRUFBc0JxQyxZQUF0QixFQUFvQzF1QixJQUFJLENBQUM0USxLQUF6QyxFQUFnRDVRLElBQUksQ0FBQzBILE1BQXJELENBQW5CO01BRUErYyxPQUFPLENBQUN4TyxZQUFSLENBQXFCLENBQXJCLEVBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBQThCLENBQTlCLEVBQWlDLENBQWpDLEVBQW9DLENBQXBDO01BQ0F3TyxPQUFPLENBQUN6a0IsSUFBUixHQUFlMnVCLFVBQVUsQ0FBQzFtQixRQUFYLEVBQWY7TUFDQXdjLE9BQU8sQ0FBQytILFNBQVIsR0FBb0J0SixLQUFLLENBQUNxRyxZQUFOLEdBQXFCa0QsTUFBckIsRUFBcEI7TUFDQWhJLE9BQU8sQ0FBQ21LLFFBQVIsQ0FBaUI3bkIsSUFBakIsRUFBdUJMLENBQXZCLEVBQTBCQyxDQUFDLEdBQUcrbkIsWUFBOUI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUMvQklHOzs7Ozs7O1dBRUwsZ0JBQU9wSyxPQUFQLEVBQTBDdkIsS0FBMUMsRUFBNERTLFdBQTVELEVBQTBGO01BQ3pGLElBQU0xSyxFQUFFLEdBQUdpSyxLQUFLLENBQUNoRyxNQUFOLENBQWEsQ0FBYixDQUFYO01BQ0EsSUFBTWhFLEVBQUUsR0FBR2dLLEtBQUssQ0FBQ2hHLE1BQU4sQ0FBYSxDQUFiLENBQVg7O01BRUEsSUFBSSxDQUFDakUsRUFBRCxJQUFPLENBQUNDLEVBQVosRUFBZ0I7UUFDZjtNQUNBOztNQUVELElBQU1oYyxRQUFRLEdBQUdnbUIsS0FBSyxDQUFDc0YsV0FBTixFQUFqQjtNQUNBLElBQU0xcEIsS0FBSyxHQUFHb2tCLEtBQUssQ0FBQ3BrQixLQUFwQjtNQUNBLElBQU0rdEIsSUFBSSxHQUFHM3ZCLFFBQVEsSUFBSSxJQUFaLElBQW9CQSxRQUFRLENBQUNnSixNQUExQztNQUNBLElBQU1nVSxLQUFLLEdBQUcyUyxJQUFJLEdBQUcvdEIsS0FBSyxDQUFDb2IsS0FBTixHQUFjLENBQWpCLEdBQXFCcGIsS0FBSyxDQUFDb2IsS0FBN0M7TUFFQXVLLE9BQU8sQ0FBQ2xILFNBQVI7TUFDQWtILE9BQU8sQ0FBQ2lJLFdBQVIsR0FBc0I1dEIsS0FBSyxDQUFDeUgsS0FBTixDQUFZa21CLE1BQVosRUFBdEI7TUFDQWhJLE9BQU8sQ0FBQ2tJLFNBQVIsR0FBb0J6UyxLQUFwQjtNQUNBdUssT0FBTyxDQUFDcmUsT0FBUixHQUFrQixPQUFsQjtNQUNBcWUsT0FBTyxDQUFDOEksTUFBUixDQUFldFUsRUFBRSxDQUFDdlMsQ0FBbEIsRUFBcUJ1UyxFQUFFLENBQUN0UyxDQUF4QjtNQUNBOGQsT0FBTyxDQUFDK0ksTUFBUixDQUFldFUsRUFBRSxDQUFDeFMsQ0FBbEIsRUFBcUJ3UyxFQUFFLENBQUN2UyxDQUF4QjtNQUNBOGQsT0FBTyxDQUFDdEgsTUFBUjs7TUFFQSxJQUFJK0YsS0FBSyxDQUFDdUYsVUFBTixFQUFKLEVBQXdCO1FBQ3ZCLElBQU0xUyxLQUFLLEdBQUcwTyxPQUFPLENBQUMzUCxlQUFSLEdBQTBCME0sU0FBMUIsRUFBZDtRQUNBLElBQU1zTixTQUFTLEdBQUdqQyxJQUFJLEdBQUcsSUFBSTlXLEtBQVAsR0FBZSxJQUFJQSxLQUF6QztRQUNBLElBQU1nWixRQUFRLEdBQUdsQyxJQUFJLEdBQUcsS0FBSzlXLEtBQVIsR0FBZ0IsS0FBS0EsS0FBMUM7UUFFQTBPLE9BQU8sQ0FBQ2xILFNBQVI7UUFDQWtILE9BQU8sQ0FBQ2lJLFdBQVIsR0FBc0Isa0JBQXRCO1FBQ0FqSSxPQUFPLENBQUNrSSxTQUFSLEdBQW9CelMsS0FBcEI7UUFDQXVLLE9BQU8sQ0FBQ21JLFdBQVIsQ0FBb0IsQ0FBQ2tDLFNBQUQsRUFBWUMsUUFBWixDQUFwQjtRQUNBdEssT0FBTyxDQUFDOEksTUFBUixDQUFldFUsRUFBRSxDQUFDdlMsQ0FBbEIsRUFBcUJ1UyxFQUFFLENBQUN0UyxDQUF4QjtRQUNBOGQsT0FBTyxDQUFDK0ksTUFBUixDQUFldFUsRUFBRSxDQUFDeFMsQ0FBbEIsRUFBcUJ3UyxFQUFFLENBQUN2UyxDQUF4QjtRQUNBOGQsT0FBTyxDQUFDdEgsTUFBUjtNQUNBO0lBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ3JDSStJOzs7OzhHQUV5QjdvQixRQUFRLENBQUMyeEIsYUFBVCxDQUF1QixRQUF2Qjs7Ozs7Ozs7aU1BSzlCLGlCQUFhbkksU0FBYixFQUFzQ3BDLE9BQXRDLEVBQXlFQyxRQUF6RSxFQUE4RmYsV0FBOUY7UUFBQTs7UUFBQTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLEtBQ0ssS0FBS3NMLFVBRFY7a0JBQUE7a0JBQUE7Z0JBQUE7O2dCQUFBLGlDQUVTLElBRlQ7O2NBQUE7Z0JBS09DLE1BTFAsR0FLZ0IsTUFBTXhLLFFBQVEsQ0FBQ3hLLEtBTC9CO2dCQU1PaVYsT0FOUCxHQU1pQnhMLFdBQVcsQ0FBQ3pKLEtBQVosR0FBb0JnVixNQU5yQztnQkFRT0UsRUFSUCxHQVFZMUssUUFBUSxDQUFDaGUsQ0FBVCxHQUFheW9CLE9BUnpCO2dCQVNPRSxFQVRQLEdBU1kzSyxRQUFRLENBQUMvZCxDQUFULEdBQWF3b0IsT0FUekI7Z0JBV09qVixLQVhQLEdBV2UyTSxTQUFTLENBQUN5SSxJQUFWLENBQWUsQ0FBZixJQUFvQnpJLFNBQVMsQ0FBQ3lJLElBQVYsQ0FBZSxDQUFmLENBWG5DO2dCQVlPdlosS0FaUCxHQVllbVosTUFBTSxJQUFJdkwsV0FBVyxDQUFDekosS0FBWixHQUFvQkEsS0FBeEIsQ0FackI7Z0JBYU9xVixRQWJQLEdBYXVCMUksU0FBUyxDQUFDMkksV0FBVixDQUFzQjtrQkFDM0N6WixLQUFLLEVBQUVBLEtBRG9DO2tCQUUzQzBaLFFBQVEsRUFBRTtnQkFGaUMsQ0FBdEIsQ0FidkI7Z0JBa0JDRixRQUFRLENBQUNwWixTQUFULENBQW1CLENBQW5CLEtBQXlCaVosRUFBekI7Z0JBQ0FHLFFBQVEsQ0FBQ3BaLFNBQVQsQ0FBbUIsQ0FBbkIsS0FBeUJrWixFQUF6QjtnQkFFQSxLQUFLSyxVQUFMLENBQWdCeFYsS0FBaEIsR0FBd0J5SixXQUFXLENBQUN6SixLQUFwQztnQkFDQSxLQUFLd1YsVUFBTCxDQUFnQnZWLE1BQWhCLEdBQXlCd0osV0FBVyxDQUFDeEosTUFBckM7Z0JBRUEsS0FBSzhVLFVBQUwsR0FBa0JwSSxTQUFTLENBQUNDLE1BQVYsQ0FBaUI7a0JBQ2xDNkksYUFBYSxFQUFFLEtBQUtELFVBQUwsQ0FBZ0JFLFVBQWhCLENBQTJCLElBQTNCLENBRG1CO2tCQUVsQ0wsUUFBUSxFQUFFQTtnQkFGd0IsQ0FBakIsQ0FBbEI7Z0JBeEJELGlDQTZCUSxLQUFLTixVQUFMLENBQWdCWSxPQUFoQixDQUF3QkMsSUFBeEIsQ0FBNkIsWUFBTTtrQkFDekNyTCxPQUFPLENBQUNzTCxNQUFSLENBQWU3VixLQUFmLEdBQXVCLEtBQUksQ0FBQ3dWLFVBQUwsQ0FBZ0J4VixLQUF2QztrQkFDQXVLLE9BQU8sQ0FBQ3NMLE1BQVIsQ0FBZTVWLE1BQWYsR0FBd0IsS0FBSSxDQUFDdVYsVUFBTCxDQUFnQnZWLE1BQXhDO2tCQUNBc0ssT0FBTyxDQUFDdUwsU0FBUixDQUFrQixLQUFJLENBQUNOLFVBQXZCLEVBQW1DLENBQW5DLEVBQXNDLENBQXRDO2tCQUVBLEtBQUksQ0FBQ1QsVUFBTCxHQUFrQixJQUFsQjtrQkFFQSxPQUFPLEtBQUksQ0FBQ1MsVUFBWjtnQkFDQSxDQVJNLEVBU1AsVUFBQ08sTUFBRCxFQUFvQixDQUNuQjtnQkFDQSxDQVhNLENBN0JSOztjQUFBO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUkQ7O0FBR0EsSUFBTUUsU0FBUyxHQUFHcmdCLG1CQUFPLENBQUMsOEVBQUQsQ0FBekI7O0lBRU1xVzs7Ozs7Ozs7aU1BRUwsaUJBQWFVLFNBQWIsRUFBc0NqQyxJQUF0QyxFQUF5RDVRLElBQXpELEVBQTBFMFEsUUFBMUU7UUFBQTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUFBLE9BQzJCbUMsU0FBUyxDQUFDTCxjQUFWLEVBRDNCOztjQUFBO2dCQUNPNEosV0FEUDtnQkFHT2xCLE1BSFAsR0FHZ0IsTUFBTXhLLFFBQVEsQ0FBQ3hLLEtBSC9CO2dCQUlPaVYsT0FKUCxHQUlpQm5iLElBQUksQ0FBQ2tHLEtBQUwsR0FBYWdWLE1BSjlCO2dCQU1PRSxFQU5QLEdBTVkxSyxRQUFRLENBQUNoZSxDQUFULEdBQWF5b0IsT0FOekI7Z0JBT09FLEVBUFAsR0FPWTNLLFFBQVEsQ0FBQy9kLENBQVQsR0FBYXdvQixPQVB6QjtnQkFTT2pWLEtBVFAsR0FTZTJNLFNBQVMsQ0FBQ3lJLElBQVYsQ0FBZSxDQUFmLElBQW9CekksU0FBUyxDQUFDeUksSUFBVixDQUFlLENBQWYsQ0FUbkM7Z0JBVU92WixLQVZQLEdBVWVtWixNQUFNLElBQUlsYixJQUFJLENBQUNrRyxLQUFMLEdBQWFBLEtBQWpCLENBVnJCO2dCQVdPcVYsUUFYUCxHQVd1QjFJLFNBQVMsQ0FBQzJJLFdBQVYsQ0FBc0I7a0JBQzNDelosS0FBSyxFQUFFQSxLQURvQztrQkFFM0MwWixRQUFRLEVBQUU7Z0JBRmlDLENBQXRCLENBWHZCO2dCQWdCQ0YsUUFBUSxDQUFDcFosU0FBVCxDQUFtQixDQUFuQixLQUF5QmlaLEVBQXpCO2dCQUNBRyxRQUFRLENBQUNwWixTQUFULENBQW1CLENBQW5CLEtBQXlCa1osRUFBekI7Z0JBRUFhLDJEQUFlLENBQUM7a0JBQ2ZFLFdBQVcsRUFBRUEsV0FERTtrQkFFZkMsU0FBUyxFQUFFekwsSUFGSTtrQkFHZjJLLFFBQVEsRUFBRUEsUUFISztrQkFJZmUsb0JBQW9CLEVBQUUsSUFKUDtrQkFLZkMsUUFBUSxFQUFFO2dCQUxLLENBQUQsQ0FBZixDQU9DVixPQVBELFVBT2UsVUFBQ0ksTUFBRCxFQUFpQjtrQkFDL0Jsb0IsT0FBTyxDQUFDQyxLQUFSLENBQWNpb0IsTUFBZDtnQkFDQSxDQVREO2dCQVdNTyxXQTlCUCxHQThCcUIsSUFBSUwsU0FBUyxDQUFDTSxjQUFkLEVBOUJyQixFQStCQzs7Z0JBQ0FELFdBQVcsQ0FBQ0Usa0JBQVosR0FBaUMsQ0FBakM7Z0JBRU1DLGVBbENQLEdBa0N5QixJQUFJUixTQUFTLENBQUNTLHNCQUFkLENBQXFDO2tCQUM1REMsT0FBTyxFQUFFak0sSUFEbUQ7a0JBRTVEa00sT0FBTyxFQUFFakssU0FGbUQ7a0JBRzVEMkosV0FBVyxFQUFFQTtnQkFIK0MsQ0FBckMsQ0FsQ3pCO2dCQXVDQ0csZUFBZSxDQUFDN0osTUFBaEIsQ0FBdUJ5SSxRQUF2Qjs7Y0F2Q0Q7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNMS3dCOzs7Ozs7O1dBRUwsZ0JBQU90TSxPQUFQLEVBQTBDdkIsS0FBMUMsRUFBMkRTLFdBQTNELEVBQXlGO01BQ3hGLElBQU03a0IsS0FBSyxHQUFHb2tCLEtBQUssQ0FBQ3BrQixLQUFwQjtNQUNBLElBQU15SCxLQUFLLEdBQUcyYyxLQUFLLENBQUN1RixVQUFOLEtBQXFCLGtCQUFyQixHQUEwQzNwQixLQUFLLENBQUN5SCxLQUFOLENBQVl5cUIsS0FBWixFQUF4RDtNQUNBLElBQU03VCxNQUFNLEdBQUcrRixLQUFLLENBQUMrTixZQUFOLEVBQWY7TUFDQSxJQUFNL1QsTUFBTSxHQUFHQyxNQUFNLENBQUMrVCxhQUFQLEVBQWY7TUFFQSxJQUFNbGQsSUFBSSxHQUFHa0osTUFBTSxDQUFDNWEsTUFBcEI7TUFDQSxJQUFJd2QsS0FBSyxHQUFHLENBQVo7TUFDQSxJQUFJaGlCLEtBQUssR0FBR29mLE1BQU0sQ0FBQzRDLEtBQUssRUFBTixDQUFsQjtNQUVBMkUsT0FBTyxDQUFDbEgsU0FBUjtNQUNBa0gsT0FBTyxDQUFDK0gsU0FBUixHQUFvQmptQixLQUFwQjtNQUNBa2UsT0FBTyxDQUFDbEgsU0FBUjtNQUNBa0gsT0FBTyxDQUFDOEksTUFBUixDQUFlenZCLEtBQUssQ0FBQzRJLENBQXJCLEVBQXdCNUksS0FBSyxDQUFDNkksQ0FBOUI7O01BRUEsT0FBT21aLEtBQUssR0FBRzlMLElBQWYsR0FBc0I7UUFDckJsVyxLQUFLLEdBQUdvZixNQUFNLENBQUM0QyxLQUFLLEVBQU4sQ0FBZDs7UUFFQSxJQUFJQSxLQUFLLEdBQUc5TCxJQUFaLEVBQWtCO1VBQ2pCeVEsT0FBTyxDQUFDK0ksTUFBUixDQUFlMXZCLEtBQUssQ0FBQzRJLENBQXJCLEVBQXdCNUksS0FBSyxDQUFDNkksQ0FBOUI7UUFDQTtNQUNEOztNQUVEOGQsT0FBTyxDQUFDbUUsSUFBUjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQzFCSXVJOzs7Ozs7O1dBRUwsZ0JBQU8xTSxPQUFQLEVBQTBDdkIsS0FBMUMsRUFBK0RTLFdBQS9ELEVBQTZGO01BQzVGLElBQU03bEIsS0FBSyxHQUFHb2xCLEtBQUssQ0FBQ2hHLE1BQU4sQ0FBYSxDQUFiLENBQWQ7O01BRUEsSUFBSSxDQUFDcGYsS0FBTCxFQUFZO1FBQ1g7TUFDQTs7TUFFRCxJQUFNZ0IsS0FBSyxHQUFHb2tCLEtBQUssQ0FBQ3BrQixLQUFwQjtNQUNBLElBQU04SCxDQUFDLEdBQUc5SCxLQUFLLENBQUNvYixLQUFoQjtNQUNBLElBQU1rWCxFQUFFLEdBQUd4cUIsQ0FBQyxHQUFHLENBQWY7TUFFQTZkLE9BQU8sQ0FBQ2xILFNBQVI7TUFDQWtILE9BQU8sQ0FBQytILFNBQVIsR0FBb0IxdEIsS0FBSyxDQUFDeUgsS0FBTixDQUFZOHFCLE9BQVosQ0FBb0IsR0FBcEIsQ0FBcEI7TUFDQTVNLE9BQU8sQ0FBQzZKLEdBQVIsQ0FBWXh3QixLQUFLLENBQUM0SSxDQUFsQixFQUFxQjVJLEtBQUssQ0FBQzZJLENBQTNCLEVBQThCQyxDQUE5QixFQUFpQyxDQUFqQyxFQUFvQyxJQUFJd1UsSUFBSSxDQUFDa0UsRUFBN0M7TUFDQW1GLE9BQU8sQ0FBQ21FLElBQVIsR0FkNEYsQ0FnQjVGOztNQUNBbkUsT0FBTyxDQUFDbEgsU0FBUjtNQUNBa0gsT0FBTyxDQUFDaUksV0FBUixHQUFzQjV0QixLQUFLLENBQUN5SCxLQUFOLENBQVl5cUIsS0FBWixFQUF0QjtNQUNBdk0sT0FBTyxDQUFDa0ksU0FBUixHQUFvQi9sQixDQUFDLEdBQUcsQ0FBeEI7TUFDQTZkLE9BQU8sQ0FBQzZKLEdBQVIsQ0FBWXh3QixLQUFLLENBQUM0SSxDQUFsQixFQUFxQjVJLEtBQUssQ0FBQzZJLENBQTNCLEVBQThCeXFCLEVBQTlCLEVBQWtDLENBQWxDLEVBQXFDLElBQUloVyxJQUFJLENBQUNrRSxFQUE5QztNQUNBbUYsT0FBTyxDQUFDdEgsTUFBUjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ3hCSW1VOzs7Ozs7O1dBRUwsZ0JBQU83TSxPQUFQLEVBQTBDdkIsS0FBMUMsRUFBaUVTLFdBQWpFLEVBQStGO01BQzlGLElBQU1vQixNQUFNLEdBQUc3QixLQUFLLENBQUM2QixNQUFyQjs7TUFFQSxJQUFJQSxNQUFNLENBQUN4RSxPQUFQLEVBQUosRUFBc0I7UUFDckI7TUFDQTs7TUFFRCxJQUFNcmpCLFFBQVEsR0FBR2dtQixLQUFLLENBQUNzRixXQUFOLEVBQWpCO01BQ0EsSUFBTTFwQixLQUFLLEdBQUdva0IsS0FBSyxDQUFDcGtCLEtBQXBCO01BQ0EsSUFBTXlILEtBQUssR0FBR3pILEtBQUssQ0FBQ3lILEtBQU4sQ0FBWWttQixNQUFaLEVBQWQ7TUFDQSxJQUFNN0QsSUFBSSxHQUFHMXJCLFFBQVEsSUFBSUEsUUFBUSxDQUFDZ0osTUFBbEM7TUFFQSxJQUFJUSxDQUFDLEdBQUdxZSxNQUFNLENBQUNyZSxDQUFmO01BQ0EsSUFBSUMsQ0FBQyxHQUFHb2UsTUFBTSxDQUFDcGUsQ0FBZjtNQUNBLElBQUlDLENBQUMsR0FBR21lLE1BQU0sQ0FBQzdLLEtBQWY7TUFDQSxJQUFJclQsQ0FBQyxHQUFHa2UsTUFBTSxDQUFDNUssTUFBZjtNQUVBc0ssT0FBTyxDQUFDbEgsU0FBUjs7TUFFQSxJQUFJcUwsSUFBSixFQUFVO1FBQ1RuRSxPQUFPLENBQUMrSCxTQUFSLEdBQW9Cam1CLEtBQXBCO1FBQ0FrZSxPQUFPLENBQUNobEIsSUFBUixDQUFhaUgsQ0FBYixFQUFnQkMsQ0FBaEIsRUFBbUJDLENBQW5CLEVBQXNCQyxDQUF0QjtRQUNBNGQsT0FBTyxDQUFDbUUsSUFBUjtNQUNBLENBSkQsTUFLSztRQUNKbkUsT0FBTyxDQUFDaUksV0FBUixHQUFzQm5tQixLQUF0QjtRQUNBa2UsT0FBTyxDQUFDa0ksU0FBUixHQUFvQjd0QixLQUFLLENBQUNvYixLQUExQjtRQUNBdUssT0FBTyxDQUFDaGxCLElBQVIsQ0FBYWlILENBQWIsRUFBZ0JDLENBQWhCLEVBQW1CQyxDQUFuQixFQUFzQkMsQ0FBdEI7UUFDQTRkLE9BQU8sQ0FBQ3RILE1BQVI7TUFDQTs7TUFFRCxJQUFJK0YsS0FBSyxDQUFDdUYsVUFBTixFQUFKLEVBQXdCO1FBQ3ZCLElBQUlHLElBQUosRUFBVTtVQUNUO1VBQ0FsaUIsQ0FBQyxJQUFJNUgsS0FBSyxDQUFDb2IsS0FBTixHQUFjLENBQW5CO1VBQ0F2VCxDQUFDLElBQUk3SCxLQUFLLENBQUNvYixLQUFOLEdBQWMsQ0FBbkI7VUFDQXRULENBQUMsSUFBSTlILEtBQUssQ0FBQ29iLEtBQVg7VUFDQXJULENBQUMsSUFBSS9ILEtBQUssQ0FBQ29iLEtBQVg7UUFDQTs7UUFFRHVLLE9BQU8sQ0FBQ2xILFNBQVI7UUFDQWtILE9BQU8sQ0FBQ2lJLFdBQVIsR0FBc0Isa0JBQXRCO1FBQ0FqSSxPQUFPLENBQUNrSSxTQUFSLEdBQW9CN3RCLEtBQUssQ0FBQ29iLEtBQTFCO1FBQ0F1SyxPQUFPLENBQUNtSSxXQUFSLENBQW9CLENBQUMsSUFBSW5JLE9BQU8sQ0FBQzNQLGVBQVIsR0FBMEIwTSxTQUExQixFQUFMLENBQXBCO1FBQ0FpRCxPQUFPLENBQUNobEIsSUFBUixDQUFhaUgsQ0FBYixFQUFnQkMsQ0FBaEIsRUFBbUJDLENBQW5CLEVBQXNCQyxDQUF0QjtRQUNBNGQsT0FBTyxDQUFDdEgsTUFBUjtNQUNBO0lBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckRGO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0lBRU15VTtFQXFCTCw0QkFBYztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBLG9HQUhVLEtBR1Y7O0lBQ2IsS0FBS0Msa0JBQUwsR0FBMEIsS0FBS0MsV0FBTCxDQUFpQnpqQixJQUFqQixDQUFzQixJQUF0QixDQUExQjtJQUNBLEtBQUswakIsYUFBTCxHQUFxQixJQUFJcmQsMkRBQUosRUFBckI7SUFFQXJYLFFBQVEsQ0FBQytTLGdCQUFULENBQTBCLGtCQUExQixFQUE4QyxZQUFNO01BQ25ELElBQUkvUyxRQUFRLENBQUNrUSxlQUFULEtBQTZCLFNBQWpDLEVBQTRDO1FBQzNDeWtCLFVBQVUsQ0FBQyxZQUFNO1VBQ2hCQyxNQUFNLENBQUN0WixhQUFQLENBQXFCLElBQUlOLEtBQUosQ0FBVSxRQUFWLENBQXJCOztVQUVBLEtBQUksQ0FBQzZaLGVBQUwsQ0FBcUIsS0FBSSxDQUFDMzBCLElBQTFCO1FBQ0EsQ0FKUyxFQUlQLEdBSk8sQ0FBVjtNQUtBO0lBQ0QsQ0FSRDtFQVNBOzs7O1dBRUQsaUJBQVFBLElBQVIsRUFBMEI7TUFDekIsSUFBSSxLQUFLQSxJQUFULEVBQWU7UUFDZDtRQUNBLEtBQUs0MEIsZ0JBQUw7TUFDQTs7TUFFRCxLQUFLNTBCLElBQUwsR0FBWUEsSUFBWjs7TUFFQSxJQUFJLENBQUMsS0FBS0osSUFBVixFQUFnQjtRQUNmLEtBQUtpMUIsZUFBTDtNQUNBOztNQUVELEtBQUtGLGVBQUwsQ0FBcUIzMEIsSUFBckI7SUFDQTs7O1dBRUQsaUJBQVFKLElBQVIsRUFBNkI7TUFDNUIsS0FBS0EsSUFBTCxHQUFZQSxJQUFaOztNQUVBLElBQUlBLElBQUosRUFBVTtRQUNULEtBQUtnMUIsZ0JBQUw7TUFDQSxDQUZELE1BR0s7UUFDSixLQUFLQyxlQUFMLEdBREksQ0FHSjs7UUFDQSxJQUFJLEtBQUtMLGFBQUwsQ0FBbUI1ZCxNQUFuQixDQUEwQixLQUFLa2UsZ0JBQUwsRUFBMUIsQ0FBSixFQUF3RDtVQUN2RDtVQUNBLEtBQUtDLHVCQUFMO1FBQ0EsQ0FIRCxNQUlLO1VBQ0o7VUFDQSxLQUFLSixlQUFMLENBQXFCLEtBQUszMEIsSUFBMUI7UUFDQTtNQUNEO0lBQ0Q7OztXQUVELCtCQUFzQmcxQixhQUF0QixFQUErRDtNQUM5RCxLQUFLQyxrQkFBTCxHQUEwQkQsYUFBMUI7TUFDQSxLQUFLQyxrQkFBTCxDQUF3QkMsZ0JBQXhCLENBQXlDdk8scUVBQXpDLEVBQTBELElBQUlxTiwwREFBSixFQUExRDtNQUNBLEtBQUtpQixrQkFBTCxDQUF3QkUsZUFBeEIsQ0FBd0MsS0FBS0MsNkJBQUwsQ0FBbUN0a0IsSUFBbkMsQ0FBd0MsSUFBeEMsQ0FBeEM7SUFDQTs7O1dBRUQsZ0NBQXVCa2tCLGFBQXZCLEVBQTJEO01BQzFELEtBQUtLLG1CQUFMLEdBQTJCTCxhQUEzQjtNQUNBLEtBQUtLLG1CQUFMLENBQXlCRixlQUF6QixDQUF5QyxLQUFLRyw4QkFBTCxDQUFvQ3hrQixJQUFwQyxDQUF5QyxJQUF6QyxDQUF6QztNQUVBLEtBQUt5a0Isc0JBQUwsQ0FBNEJQLGFBQTVCO0lBQ0E7OztXQUVELGtDQUF5QkEsYUFBekIsRUFBNkQ7TUFDNUQsS0FBS1EscUJBQUwsR0FBNkJSLGFBQTdCO01BRUEsS0FBS08sc0JBQUwsQ0FBNEJQLGFBQTVCO0lBQ0E7OztXQUVELDZCQUFvQlMsZ0JBQXBCLEVBQThEO01BQzdELEtBQUtBLGdCQUFMLEdBQXdCQSxnQkFBeEI7SUFDQTs7O1dBRUQsMkJBQXdCO01BQ3ZCLElBQUksQ0FBQyxLQUFLNzFCLElBQVYsRUFBZ0I7UUFDZixLQUFLZzFCLGdCQUFMO01BQ0E7SUFDRDs7O1dBRUQseUJBQXNCO01BQ3JCLElBQUksQ0FBQyxLQUFLaDFCLElBQVYsRUFBZ0I7UUFDZixLQUFLbTFCLHVCQUFMO1FBQ0EsS0FBS0YsZUFBTDtNQUNBO0lBQ0Q7OztXQUVELDJCQUFnQztNQUMvQixLQUFLNzBCLElBQUwsQ0FBVThtQixpQkFBVixDQUE0QixLQUFLd04sa0JBQWpDO0lBQ0E7OztXQUVELDRCQUFpQztNQUNoQyxLQUFLdDBCLElBQUwsQ0FBVWtvQixvQkFBVixDQUErQixLQUFLb00sa0JBQXBDO0lBQ0E7OztXQUVELHVDQUFzQzVlLEtBQXRDLEVBQThEO01BQzdELEtBQUtpZixlQUFMLENBQXFCLEtBQUszMEIsSUFBMUI7SUFDQTs7O1dBRUQsd0NBQXVDMFYsS0FBdkMsRUFBK0Q7TUFDOUQsS0FBS3FmLHVCQUFMO0lBQ0E7OztXQUVELHFCQUFvQnJmLEtBQXBCLEVBQTRDO01BQzNDLFFBQVFBLEtBQUssQ0FBQ3lRLFVBQWQ7UUFDQyxLQUFLTSwyRUFBTDtVQUNDLEtBQUtrTyxlQUFMLENBQXFCLEtBQUszMEIsSUFBMUI7VUFDQTs7UUFFRCxLQUFLeW1CLG1FQUFMO1VBQ0MsS0FBS2lQLHFCQUFMO1VBQ0E7O1FBRUQsS0FBS2pQLHdFQUFMO1VBQ0MsSUFBSSxLQUFLa1AsU0FBTCxJQUFrQixLQUFLQSxTQUFMLElBQWtCamdCLEtBQUssQ0FBQ2lRLEtBQTlDLEVBQXFEO1lBQ3BELElBQU1sUCxJQUFJLEdBQUcsS0FBSzRlLG1CQUFMLENBQXlCTyxPQUF6QixFQUFiO1lBQ0EsSUFBTXBPLE1BQWlCLEdBQUcsSUFBSXhqQiwwREFBSixDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0J5UyxJQUFJLENBQUNrRyxLQUF6QixFQUFnQ2xHLElBQUksQ0FBQ21HLE1BQXJDLENBQTFCO1lBRUEsS0FBS2laLG9CQUFMLENBQTBCLEtBQUtGLFNBQS9CLEVBQTBDbk8sTUFBMUM7VUFDQTs7VUFFRCxLQUFLc08sbUJBQUwsQ0FBeUJwZ0IsS0FBSyxDQUFDaVEsS0FBL0IsRUFBc0NqUSxLQUFLLENBQUMwUSxXQUE1QztVQUNBOztRQUVELEtBQUtLLDBFQUFMO1VBQ0MsS0FBS3NPLHVCQUFMO1VBQ0E7O1FBRUQsS0FBS3RPLDJFQUFMO1VBQ0MsS0FBS3FQLG1CQUFMLENBQXlCcGdCLEtBQUssQ0FBQ2lRLEtBQS9CLEVBQXNDalEsS0FBSyxDQUFDMFEsV0FBNUM7VUFDQTtNQTFCRjtJQTRCQTs7O1dBRUQsaUNBQXNDO01BQ3JDLEtBQUtvUCxxQkFBTCxDQUEyQmxOLEtBQTNCO01BQ0EsS0FBSytNLG1CQUFMLENBQXlCTCxhQUF6QixDQUF1QyxLQUFLQyxrQkFBNUM7TUFFQSxLQUFLVSxTQUFMLEdBQWlCLElBQWpCO0lBQ0E7OztXQUVELG1DQUF3QztNQUN2QyxJQUFNalEsTUFBTSxHQUFHLEtBQUsxbEIsSUFBTCxDQUFVKzFCLFNBQVYsRUFBZjtNQUNBLElBQU1DLFNBQVMsR0FBR3RRLE1BQU0sQ0FBQzNnQixNQUFQLEdBQWdCLENBQWxDOztNQUVBLElBQUlpeEIsU0FBUyxJQUFJLENBQWpCLEVBQW9CO1FBQ25CO1FBQ0EsS0FBS1gsbUJBQUwsQ0FBeUJMLGFBQXpCLENBQXVDLEtBQUtDLGtCQUE1Qzs7UUFFQSxJQUFJZSxTQUFTLEdBQUcsQ0FBaEIsRUFBbUI7VUFDbEI7VUFDQSxLQUFLWCxtQkFBTCxDQUF5QlksWUFBekIsQ0FBc0N2USxNQUFNLENBQUMxQixLQUFQLENBQWEsQ0FBYixFQUFnQmdTLFNBQWhCLENBQXRDO1FBQ0EsQ0FQa0IsQ0FTbkI7OztRQUNBLElBQU1MLFNBQVMsR0FBR2pRLE1BQU0sQ0FBQ3NRLFNBQUQsQ0FBeEI7UUFDQSxLQUFLRixtQkFBTCxDQUF5QkgsU0FBekIsRUFBb0NBLFNBQVMsQ0FBQ25PLE1BQTlDO01BQ0EsQ0FaRCxNQWFLO1FBQ0o7UUFDQSxLQUFLZ08scUJBQUwsQ0FBMkJsTixLQUEzQjtRQUNBLEtBQUsrTSxtQkFBTCxDQUF5QkwsYUFBekIsQ0FBdUMsS0FBS0Msa0JBQTVDO1FBRUEsS0FBS1UsU0FBTCxHQUFpQixJQUFqQjtNQUNBO0lBQ0Q7OztXQUVELHlCQUF3QjMxQixJQUF4QixFQUEwQztNQUFBOztNQUN6QyxJQUFNc3lCLE9BQU8sR0FBRyxLQUFLNEQsZ0JBQUwsQ0FBc0JsMkIsSUFBdEIsQ0FBaEI7TUFDQXN5QixPQUFPLENBQUNDLElBQVIsQ0FBYSxVQUFDNEQsV0FBRCxFQUFvQztRQUNoRCxJQUFJQSxXQUFKLEVBQWlCO1VBQ2hCLElBQU1DLGFBQWEsR0FBRyxNQUFJLENBQUN0QixnQkFBTCxFQUF0Qjs7VUFFQSxNQUFJLENBQUNOLGFBQUwsQ0FBbUI5YixZQUFuQixDQUFnQzBkLGFBQWhDOztVQUVBLE1BQUksQ0FBQ2YsbUJBQUwsQ0FBeUIzYyxZQUF6QixDQUFzQzBkLGFBQXRDOztVQUNBLE1BQUksQ0FBQ1oscUJBQUwsQ0FBMkI5YyxZQUEzQixDQUF3QzBkLGFBQXhDOztVQUVBLE1BQUksQ0FBQ2YsbUJBQUwsQ0FBeUJnQixpQkFBekIsQ0FBMkNGLFdBQTNDOztVQUNBLE1BQUksQ0FBQ2QsbUJBQUwsQ0FBeUJZLFlBQXpCLENBQXNDajJCLElBQUksQ0FBQysxQixTQUFMLEVBQXRDOztVQUNBLE1BQUksQ0FBQ1AscUJBQUwsQ0FBMkJsTixLQUEzQjs7VUFDQSxNQUFJLENBQUNtTixnQkFBTCxDQUFzQmxNLE1BQXRCLENBQTZCdnBCLElBQTdCOztVQUVBLE1BQUksQ0FBQzIxQixTQUFMLEdBQWlCLElBQWpCOztVQUVBLElBQUksQ0FBQzNlLE1BQU0sQ0FBQ3NmLEVBQVAsQ0FBVXQyQixJQUFWLEVBQWdCLE1BQUksQ0FBQ0EsSUFBckIsQ0FBTCxFQUFpQztZQUNoQztZQUNBLE1BQUksQ0FBQzIwQixlQUFMLENBQXFCLE1BQUksQ0FBQzMwQixJQUExQjtVQUNBO1FBQ0Q7TUFDRCxDQXJCRCxXQXNCTyxVQUFBeUssS0FBSyxFQUFJO1FBQ2ZELE9BQU8sQ0FBQ0MsS0FBUixDQUFjQSxLQUFkO01BQ0EsQ0F4QkQ7SUF5QkE7OztXQUVELDhCQUE2QmtiLEtBQTdCLEVBQTJDUyxXQUEzQyxFQUF5RTtNQUN4RSxLQUFLaVAsbUJBQUwsQ0FBeUJrQixXQUF6QixDQUFxQzVRLEtBQXJDLEVBQTRDUyxXQUE1QztJQUNBOzs7V0FFRCw2QkFBNEJULEtBQTVCLEVBQTBDUyxXQUExQyxFQUF3RTtNQUN2RSxLQUFLb1AscUJBQUwsQ0FBMkJSLGFBQTNCLENBQXlDLEtBQUtLLG1CQUE5QztNQUNBLEtBQUtHLHFCQUFMLENBQTJCZSxXQUEzQixDQUF1QzVRLEtBQXZDLEVBQThDUyxXQUE5QztNQUVBLEtBQUt1UCxTQUFMLEdBQWlCaFEsS0FBakI7SUFDQTs7O1dBRUQsMEJBQXlCM2xCLElBQXpCLEVBQWlFO01BQ2hFLElBQU15VyxJQUFJLEdBQUcsS0FBS3dlLGtCQUFMLENBQXdCVyxPQUF4QixFQUFiOztNQUVBLElBQUksQ0FBQ25mLElBQUwsRUFBVztRQUNWLE9BQU8sS0FBS3dlLGtCQUFMLENBQXdCdUIsZ0JBQXhCLENBQXlDeDJCLElBQUksQ0FBQ3VuQixhQUFMLEVBQXpDLEVBQStELElBQUl2akIsMERBQUosQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBQW9CLENBQXBCLEVBQXVCLENBQXZCLENBQS9ELENBQVA7TUFDQTs7TUFFRCxJQUFNd2pCLE1BQU0sR0FBRyxJQUFJeGpCLDBEQUFKLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQnlTLElBQUksQ0FBQ2tHLEtBQXpCLEVBQWdDbEcsSUFBSSxDQUFDbUcsTUFBckMsQ0FBZjtNQUVBLE9BQU8sS0FBS3FZLGtCQUFMLENBQXdCdUIsZ0JBQXhCLENBQXlDeDJCLElBQUksQ0FBQ3VuQixhQUFMLEVBQXpDLEVBQStEQyxNQUEvRCxDQUFQO0lBQ0E7OztXQUVELDRCQUFzQztNQUNyQyxJQUFNaVAsVUFBVSxHQUFHLEtBQUt6MkIsSUFBTCxDQUFVdW5CLGFBQVYsR0FBMEJDLE1BQTdDO01BRUEsSUFBTTRPLGFBQWEsR0FBRyxJQUFJamYsMkRBQUosRUFBdEI7TUFDQWlmLGFBQWEsQ0FBQ3RkLFNBQWQsQ0FBd0IyZCxVQUFVLENBQUN0dEIsQ0FBbkMsRUFBc0NzdEIsVUFBVSxDQUFDcnRCLENBQWpEO01BQ0FndEIsYUFBYSxDQUFDNWQsS0FBZCxDQUFvQixNQUFNaWUsVUFBVSxDQUFDOVosS0FBckMsRUFBNEMsTUFBTThaLFVBQVUsQ0FBQzdaLE1BQTdEO01BRUEsT0FBT3daLGFBQVA7SUFDQTs7O1dBRUQsZ0NBQStCcEIsYUFBL0IsRUFBbUU7TUFDbEVBLGFBQWEsQ0FBQ0UsZ0JBQWQsQ0FBK0I5SSxrRUFBL0IsRUFBOEMsSUFBSW9ILHVEQUFKLEVBQTlDO01BQ0F3QixhQUFhLENBQUNFLGdCQUFkLENBQStCNUosdUVBQS9CLEVBQWlELElBQUltRixzRUFBSixFQUFqRDtNQUNBdUUsYUFBYSxDQUFDRSxnQkFBZCxDQUErQjFJLDBFQUEvQixFQUFrRCxJQUFJb0gsOERBQUosRUFBbEQ7TUFDQW9CLGFBQWEsQ0FBQ0UsZ0JBQWQsQ0FBK0JsSyxzRUFBL0IsRUFBZ0QsSUFBSStELDJEQUFKLEVBQWhEO01BQ0FpRyxhQUFhLENBQUNFLGdCQUFkLENBQStCekksOEVBQS9CLEVBQW9ELElBQUlzSCxtRUFBSixFQUFwRDtNQUNBaUIsYUFBYSxDQUFDRSxnQkFBZCxDQUErQi9JLG9FQUEvQixFQUErQyxJQUFJbUYseURBQUosRUFBL0M7TUFDQTBELGFBQWEsQ0FBQ0UsZ0JBQWQsQ0FBK0IvSiwwRUFBL0IsRUFBa0QsSUFBSWlGLCtEQUFKLEVBQWxEO01BQ0E0RSxhQUFhLENBQUNFLGdCQUFkLENBQStCdEksd0VBQS9CLEVBQWlELElBQUlxSCw2REFBSixFQUFqRDtNQUNBZSxhQUFhLENBQUNFLGdCQUFkLENBQStCcEgsb0VBQS9CLEVBQStDLElBQUlxRyx5REFBSixFQUEvQztNQUNBYSxhQUFhLENBQUNFLGdCQUFkLENBQStCdEgsdUZBQS9CLEVBQXdELElBQUl3Ryw0RUFBSixFQUF4RDtNQUNBWSxhQUFhLENBQUNFLGdCQUFkLENBQStCdEosc0VBQS9CLEVBQWdELElBQUlvRiwyREFBSixFQUFoRDtNQUNBZ0UsYUFBYSxDQUFDRSxnQkFBZCxDQUErQm5ILG9FQUEvQixFQUErQyxJQUFJbUcseURBQUosRUFBL0M7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6U0Y7QUFFQTtBQUNBO0FBQ0E7O0lBRU13QztFQWVMLHVCQUFZbEUsTUFBWixFQUF1QztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBLHlHQVBWLElBQUk5TCw2REFBSixFQU9VOztJQUFBOztJQUFBOztJQUN0QyxLQUFLOEwsTUFBTCxHQUFjQSxNQUFkO0lBQ0EsS0FBS0osYUFBTCxHQUFxQkksTUFBTSxDQUFDSCxVQUFQLENBQWtCLElBQWxCLENBQXJCO0lBQ0EsS0FBS3NFLFNBQUwsR0FBaUIsSUFBSS9yQixHQUFKLEVBQWpCO0lBQ0EsS0FBS2dPLFNBQUwsR0FBaUIsSUFBSXpCLDBEQUFKLEVBQWpCO0VBQ0E7Ozs7V0FFRCxpQkFBYztNQUNiLEtBQUtpYixhQUFMLENBQW1Cd0UsU0FBbkIsQ0FBNkIsQ0FBN0IsRUFBZ0MsQ0FBaEMsRUFBbUMsS0FBS3BFLE1BQUwsQ0FBWTdWLEtBQS9DLEVBQXNELEtBQUs2VixNQUFMLENBQVk1VixNQUFsRTtJQUNBOzs7V0FFRCwwQkFBaUJpYSxTQUFqQixFQUFvQ3ROLE1BQXBDLEVBQWlFO01BQ2hFLEtBQUtvTixTQUFMLENBQWU5ckIsR0FBZixDQUFtQmdzQixTQUFuQixFQUE4QnROLE1BQTlCO0lBQ0E7OztXQUVELDJCQUFrQmlKLE1BQWxCLEVBQW1EO01BQ2xELEtBQUtKLGFBQUwsQ0FBbUJLLFNBQW5CLENBQTZCRCxNQUE3QixFQUFxQyxDQUFyQyxFQUF3QyxDQUF4QztJQUNBOzs7V0FFRCx1QkFBY3NFLE9BQWQsRUFBNEM7TUFDM0MsSUFBSUEsT0FBTyxDQUFDdEUsTUFBUixDQUFlN1YsS0FBZixLQUF5QixDQUF6QixJQUE4Qm1hLE9BQU8sQ0FBQ3RFLE1BQVIsQ0FBZTVWLE1BQWYsS0FBMEIsQ0FBNUQsRUFBK0Q7UUFDOUQ7TUFDQTs7TUFFRCxLQUFLd1YsYUFBTCxDQUFtQkssU0FBbkIsQ0FBNkJxRSxPQUFPLENBQUN0RSxNQUFyQyxFQUE2QyxDQUE3QyxFQUFnRCxDQUFoRDtJQUNBOzs7V0FFRCxzQkFBYTlNLE1BQWIsRUFBb0M7TUFBQSwyQ0FDakJBLE1BRGlCO01BQUE7O01BQUE7UUFDbkMsb0RBQTBCO1VBQUEsSUFBakJDLEtBQWlCO1VBQ3pCLEtBQUs0USxXQUFMLENBQWlCNVEsS0FBakIsRUFBd0IsSUFBeEI7UUFDQTtNQUhrQztRQUFBO01BQUE7UUFBQTtNQUFBO0lBSW5DOzs7V0FFRCxxQkFBWUEsS0FBWixFQUEwQlMsV0FBMUIsRUFBd0Q7TUFDdkQsSUFBTTBDLFFBQVEsR0FBRyxLQUFLNk4sU0FBTCxDQUFlbGMsR0FBZixDQUFtQmtMLEtBQUssQ0FBQ29SLFdBQU4sQ0FBa0J6Z0IsSUFBckMsQ0FBakI7O01BRUEsSUFBSXdTLFFBQUosRUFBYztRQUNiLElBQU14SCxDQUFDLEdBQUcsS0FBS2tSLE1BQUwsQ0FBWTdWLEtBQVosR0FBb0IsS0FBSy9ELFNBQUwsQ0FBZXFMLFNBQWYsRUFBOUI7UUFDQSxJQUFNNE4sRUFBRSxHQUFHLEtBQUtqWixTQUFMLENBQWV5TCxhQUFmLEVBQVg7UUFDQSxJQUFNeU4sRUFBRSxHQUFHLEtBQUtsWixTQUFMLENBQWUwTCxhQUFmLEVBQVg7UUFFQSxLQUFLOE4sYUFBTCxDQUFtQnBaLElBQW5CO1FBQ0EsS0FBS29aLGFBQUwsQ0FBbUI1WixLQUFuQixDQUF5QjhJLENBQXpCLEVBQTRCQSxDQUE1QjtRQUNBLEtBQUs4USxhQUFMLENBQW1CdFosU0FBbkIsQ0FBNkIsQ0FBQytZLEVBQTlCLEVBQWtDLENBQUNDLEVBQW5DO1FBRUFoSixRQUFRLENBQUNTLE1BQVQsQ0FBZ0IsS0FBSzZJLGFBQXJCLEVBQW9Dek0sS0FBcEMsRUFBMkNTLFdBQTNDO1FBRUEsS0FBS2dNLGFBQUwsQ0FBbUJsWixPQUFuQjtNQUNBO0lBQ0Q7OztXQUVELG1CQUFxQjtNQUNwQixPQUFPLEtBQUt6QyxJQUFaO0lBQ0E7OztXQUVELGlCQUFRa0csS0FBUixFQUF1QkMsTUFBdkIsRUFBNkM7TUFDNUMsSUFBSUQsS0FBSyxHQUFHLENBQVIsSUFBYUMsTUFBTSxHQUFHLENBQTFCLEVBQTZCO1FBQzVCO01BQ0EsQ0FIMkMsQ0FLNUM7OztNQUNBLElBQU1vYSxHQUFHLEdBQUd0QyxNQUFNLENBQUN1QyxnQkFBUCxJQUEyQixDQUF2QztNQUVBLEtBQUt4Z0IsSUFBTCxHQUFZLElBQUlpRywwREFBSixDQUFjQyxLQUFLLEdBQUdxYSxHQUF0QixFQUEyQnBhLE1BQU0sR0FBR29hLEdBQXBDLENBQVo7TUFFQSxLQUFLRSxZQUFMLENBQWtCdmEsS0FBbEIsRUFBeUJDLE1BQXpCLEVBQWlDb2EsR0FBakM7TUFDQSxLQUFLRyxhQUFMLENBQW1CLElBQUkzZ0Isd0RBQUosQ0FBYyxLQUFLQyxJQUFuQixDQUFuQjtJQUNBOzs7V0FFRCxzQkFBYW1DLFNBQWIsRUFBeUM7TUFDeEMsS0FBS0EsU0FBTCxDQUFlRixZQUFmLENBQTRCRSxTQUE1QjtJQUNBOzs7V0FFRCx5QkFBZ0JxTSxRQUFoQixFQUEyRDtNQUMxRCxPQUFPLEtBQUttUyxTQUFMLENBQWVwaEIsU0FBZixDQUF5QmlQLFFBQXpCLENBQVA7SUFDQTs7O1dBRUQsNEJBQW1CQSxRQUFuQixFQUF3RDtNQUN2RCxLQUFLbVMsU0FBTCxDQUFlMVAsV0FBZixDQUEyQnpDLFFBQTNCO0lBQ0E7OztXQUVELHVCQUF3QnZQLEtBQXhCLEVBQWdEO01BQy9DLEtBQUswaEIsU0FBTCxDQUFlMU8sT0FBZixDQUF1QmhULEtBQXZCO0lBQ0E7OztXQUVELHNCQUFxQmlILEtBQXJCLEVBQW9DQyxNQUFwQyxFQUFvRHFhLGdCQUFwRCxFQUFvRjtNQUNuRixJQUFNSSxTQUFTLEdBQUcsS0FBSzdFLE1BQUwsQ0FBWThFLFlBQVosQ0FBeUIsT0FBekIsQ0FBbEI7O01BRUEsSUFBSUQsU0FBUyxJQUFJQSxTQUFTLEtBQUssTUFBL0IsRUFBdUM7UUFDdEMsS0FBSzdFLE1BQUwsQ0FBWTdWLEtBQVosR0FBb0JBLEtBQUssR0FBR3NhLGdCQUE1QjtRQUNBLEtBQUt6RSxNQUFMLENBQVk1VixNQUFaLEdBQXFCQSxNQUFNLEdBQUdxYSxnQkFBOUI7TUFDQTs7TUFFRCxLQUFLekUsTUFBTCxDQUFZbmYsS0FBWixDQUFrQnNKLEtBQWxCLEdBQTBCQSxLQUFLLEdBQUcsSUFBbEM7TUFDQSxLQUFLNlYsTUFBTCxDQUFZbmYsS0FBWixDQUFrQnVKLE1BQWxCLEdBQTJCQSxNQUFNLEdBQUcsSUFBcEM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ2xISXFYOzs7OytHQUUwQjs7Ozs7V0FHL0IsZ0JBQU8vTSxPQUFQLEVBQTBDdkIsS0FBMUMsRUFBOERTLFdBQTlELEVBQTRGO01BQzNGLElBQU0xSyxFQUFFLEdBQUdpSyxLQUFLLENBQUNoRyxNQUFOLENBQWEsQ0FBYixDQUFYO01BQ0EsSUFBTWhFLEVBQUUsR0FBR2dLLEtBQUssQ0FBQ2hHLE1BQU4sQ0FBYSxDQUFiLENBQVg7O01BRUEsSUFBSSxDQUFDakUsRUFBRCxJQUFPLENBQUNDLEVBQVosRUFBZ0I7UUFDZjtNQUNBOztNQUVELElBQU1nQixLQUFLLEdBQUcsSUFBSXVLLE9BQU8sQ0FBQzNQLGVBQVIsR0FBMEIwTSxTQUExQixFQUFsQjtNQUNBLElBQU1zVCxJQUFJLEdBQUcsSUFBSXJRLE9BQU8sQ0FBQzNQLGVBQVIsR0FBMEI2TSxTQUExQixFQUFqQjtNQUVBOEMsT0FBTyxDQUFDbEgsU0FBUjtNQUNBa0gsT0FBTyxDQUFDaUksV0FBUixHQUFzQixLQUFLcUksV0FBM0I7TUFDQXRRLE9BQU8sQ0FBQ2tJLFNBQVIsR0FBb0J6UyxLQUFwQjtNQUNBdUssT0FBTyxDQUFDdVEsY0FBUixHQUF5QixDQUF6QjtNQUNBdlEsT0FBTyxDQUFDbUksV0FBUixDQUFvQixDQUFDa0ksSUFBRCxDQUFwQjtNQUNBclEsT0FBTyxDQUFDcmUsT0FBUixHQUFrQixNQUFsQjtNQUNBcWUsT0FBTyxDQUFDMEosUUFBUixHQUFtQixPQUFuQjtNQUNBMUosT0FBTyxDQUFDaGxCLElBQVIsQ0FBYXdaLEVBQUUsQ0FBQ3ZTLENBQWhCLEVBQW1CdVMsRUFBRSxDQUFDdFMsQ0FBdEIsRUFBeUJ1UyxFQUFFLENBQUN4UyxDQUFILEdBQU91UyxFQUFFLENBQUN2UyxDQUFuQyxFQUFzQ3dTLEVBQUUsQ0FBQ3ZTLENBQUgsR0FBT3NTLEVBQUUsQ0FBQ3RTLENBQWhEO01BQ0E4ZCxPQUFPLENBQUN0SCxNQUFSO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1QkY7O0lBSU04WDs7Ozs7Ozs7Ozs7OztXQUVMLDBCQUFpQi9SLEtBQWpCLEVBQW9DUyxXQUFwQyxFQUF3RjtNQUN2RixJQUFJLENBQUMsS0FBS2dNLGFBQUwsQ0FBbUJJLE1BQW5CLENBQTBCbmYsS0FBMUIsQ0FBZ0NzSixLQUFqQyxJQUEwQyxDQUFDLEtBQUt5VixhQUFMLENBQW1CSSxNQUFuQixDQUEwQm5mLEtBQTFCLENBQWdDdUosTUFBL0UsRUFBdUY7UUFDdEYsT0FBTyxJQUFJdVIsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVXVKLE1BQVYsRUFBcUI7VUFDdkNBLE1BQU07UUFDTixDQUZNLENBQVA7TUFHQTs7TUFFRCxJQUFNN08sUUFBUSxHQUFtQixLQUFLNk4sU0FBTCxDQUFlbGMsR0FBZixDQUFtQmtMLEtBQUssQ0FBQ29SLFdBQU4sQ0FBa0J6Z0IsSUFBckMsQ0FBakM7TUFDQSxJQUFJZ2MsT0FBbUMsR0FBRyxJQUExQzs7TUFFQSxJQUFJeEosUUFBSixFQUFjO1FBQ2IsSUFBTThPLFFBQVEsR0FBR2pTLEtBQUssQ0FBQzZCLE1BQXZCO1FBRUEsSUFBTWpELEVBQUUsR0FBRyxLQUFLaU8sTUFBTCxDQUFZN1YsS0FBWixHQUFvQmliLFFBQVEsQ0FBQ2piLEtBQXhDLENBSGEsQ0FJYjs7UUFFQSxLQUFLeVYsYUFBTCxDQUFtQnBaLElBQW5CO1FBQ0EsS0FBS29aLGFBQUwsQ0FBbUI1WixLQUFuQixDQUF5QitMLEVBQXpCLEVBQTZCQSxFQUE3QjtRQUVBK04sT0FBTyxHQUFHeEosUUFBUSxDQUFDUyxNQUFULENBQWdCLEtBQUs2SSxhQUFyQixFQUFvQ3pNLEtBQXBDLEVBQTJDUyxXQUEzQyxDQUFWO1FBRUEsS0FBS2dNLGFBQUwsQ0FBbUJsWixPQUFuQjtNQUNBOztNQUVELE9BQU9vWixPQUFQO0lBQ0E7Ozs7RUEzQitCb0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ0QzQjFDOzs7Ozs7OztpTUFFTCxpQkFBYTlNLE9BQWIsRUFBZ0R2QixLQUFoRCxFQUFtRVMsV0FBbkU7UUFBQTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUNPcG1CLElBRFAsR0FDYzJsQixLQUFLLENBQUMxbEIsT0FBTixFQURkO2dCQUFBLGlDQUdRRCxJQUFJLENBQUN1cEIsTUFBTCxDQUFZckMsT0FBWixFQUFxQnZCLEtBQUssQ0FBQzZCLE1BQTNCLEVBQW1DcEIsV0FBbkMsQ0FIUjs7Y0FBQTtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ0ZLZ087Ozs7Ozs7V0FFTCxnQkFBT2xOLE9BQVAsRUFBMEN2QixLQUExQyxFQUFxRVMsV0FBckUsRUFBbUc7TUFDbEcsSUFBTW9CLE1BQU0sR0FBRzdCLEtBQUssQ0FBQzZCLE1BQXJCOztNQUVBLElBQUlBLE1BQU0sQ0FBQ3hFLE9BQVAsRUFBSixFQUFzQjtRQUNyQjtNQUNBOztNQUVEa0UsT0FBTyxDQUFDbEgsU0FBUjtNQUNBa0gsT0FBTyxDQUFDMkosV0FBUixHQUFzQixDQUF0QjtNQUNBM0osT0FBTyxDQUFDNEosd0JBQVIsR0FBbUMsVUFBbkM7TUFDQTVKLE9BQU8sQ0FBQytILFNBQVIsR0FBb0J0SixLQUFLLENBQUNrUyxRQUFOLEdBQWlCM0ksTUFBakIsRUFBcEI7TUFDQWhJLE9BQU8sQ0FBQ2hsQixJQUFSLENBQWFzbEIsTUFBTSxDQUFDcmUsQ0FBcEIsRUFBdUJxZSxNQUFNLENBQUNwZSxDQUE5QixFQUFpQ29lLE1BQU0sQ0FBQzdLLEtBQXhDLEVBQStDNkssTUFBTSxDQUFDNUssTUFBdEQ7TUFDQXNLLE9BQU8sQ0FBQ21FLElBQVI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbEJGOztJQUVNeU07RUFPTCwwQkFBWXpRLElBQVosRUFBK0I7SUFBQTs7SUFBQTs7SUFBQTs7SUFDOUIsS0FBS0EsSUFBTCxHQUFZQSxJQUFaO0VBQ0E7Ozs7V0FFRCxpQkFBYztNQUNiLE9BQU8sS0FBS0EsSUFBTCxDQUFVMFEsVUFBakIsRUFBNkI7UUFDNUIsS0FBSzFRLElBQUwsQ0FBVTJRLFdBQVYsQ0FBc0IsS0FBSzNRLElBQUwsQ0FBVTBRLFVBQWhDO01BQ0E7SUFDRDs7OztpTUFFRCxpQkFBYS8zQixJQUFiO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQ0MsS0FBS3NvQixLQUFMO2dCQUVBdG9CLElBQUksQ0FBQ2k0QixVQUFMLENBQWdCLEtBQUs1USxJQUFyQixFQUEyQixLQUFLNVEsSUFBaEM7O2NBSEQ7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBOzs7Ozs7Ozs7O1dBTUEsbUJBQXFCO01BQ3BCLE9BQU8sS0FBS0EsSUFBWjtJQUNBOzs7V0FFRCxpQkFBUWtHLEtBQVIsRUFBdUJDLE1BQXZCLEVBQTZDO01BQzVDLEtBQUtuRyxJQUFMLEdBQVksSUFBSWlHLDBEQUFKLENBQWNDLEtBQWQsRUFBcUJDLE1BQXJCLENBQVo7TUFFQSxLQUFLeUssSUFBTCxDQUFVaFUsS0FBVixDQUFnQnNKLEtBQWhCLEdBQXdCQSxLQUFLLEdBQUcsSUFBaEM7TUFDQSxLQUFLMEssSUFBTCxDQUFVaFUsS0FBVixDQUFnQnVKLE1BQWhCLEdBQXlCQSxNQUFNLEdBQUcsSUFBbEM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQ0Y7O0lBRU11WDs7Ozs7OztXQUVMLGdCQUFPak4sT0FBUCxFQUEwQ3ZCLEtBQTFDLEVBQTREUyxXQUE1RCxFQUEwRjtNQUN6RixJQUFNNWMsSUFBSSxHQUFHbWMsS0FBSyxDQUFDc0wsT0FBTixFQUFiOztNQUVBLElBQUksQ0FBQ3puQixJQUFELElBQVNBLElBQUksQ0FBQ3pFLE1BQUwsS0FBZ0IsQ0FBN0IsRUFBZ0M7UUFDL0I7TUFDQTs7TUFFRCxJQUFNeWlCLE1BQU0sR0FBRzdCLEtBQUssQ0FBQzZCLE1BQXJCO01BQ0EsSUFBTS9rQixJQUFJLEdBQUdrakIsS0FBSyxDQUFDdUwsT0FBTixFQUFiO01BRUEsSUFBTXRZLFNBQVMsR0FBR3NPLE9BQU8sQ0FBQzNQLGVBQVIsRUFBbEI7TUFDQSxJQUFNaUIsS0FBSyxHQUFHSSxTQUFTLENBQUNxTCxTQUFWLEVBQWQ7TUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBOztNQUNFLElBQU1rTixZQUFZLEdBQUcxdUIsSUFBSSxDQUFDZ1UsSUFBTCxHQUFZK0IsS0FBakM7TUFDQSxJQUFNclAsQ0FBQyxHQUFHeVAsU0FBUyxDQUFDeUwsYUFBVixLQUE0Qm1ELE1BQU0sQ0FBQ3JlLENBQVAsR0FBV3FQLEtBQWpEO01BQ0EsSUFBTXBQLENBQUMsR0FBR3dQLFNBQVMsQ0FBQzBMLGFBQVYsS0FBNEJrRCxNQUFNLENBQUNwZSxDQUFQLEdBQVdvUCxLQUFqRDtNQUVBLElBQU00WSxVQUFVLEdBQUcsSUFBSTFzQiw2Q0FBSixDQUFTakMsSUFBSSxDQUFDcXNCLE1BQWQsRUFBc0JxQyxZQUF0QixFQUFvQzF1QixJQUFJLENBQUM0USxLQUF6QyxFQUFnRDVRLElBQUksQ0FBQzBILE1BQXJELENBQW5CO01BRUErYyxPQUFPLENBQUN4TyxZQUFSLENBQXFCLENBQXJCLEVBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBQThCLENBQTlCLEVBQWlDLENBQWpDLEVBQW9DLENBQXBDO01BQ0F3TyxPQUFPLENBQUN6a0IsSUFBUixHQUFlMnVCLFVBQVUsQ0FBQzFtQixRQUFYLEVBQWY7TUFDQXdjLE9BQU8sQ0FBQytILFNBQVIsR0FBb0J0SixLQUFLLENBQUNxRyxZQUFOLEdBQXFCa0QsTUFBckIsRUFBcEI7TUFDQWhJLE9BQU8sQ0FBQ21LLFFBQVIsQ0FBaUI3bkIsSUFBakIsRUFBdUJMLENBQXZCLEVBQTBCQyxDQUFDLEdBQUcrbkIsWUFBOUI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ2pDSWxEOzs7Ozs7OztpTUFFTCxpQkFBYS9HLE9BQWIsRUFBZ0RDLFFBQWhELEVBQXFFZixXQUFyRTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLGlDQUNRLElBQUkrSCxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFhO2tCQUMvQmxILE9BQU8sQ0FBQ3NMLE1BQVIsQ0FBZTdWLEtBQWYsR0FBdUJ5SixXQUFXLENBQUN6SixLQUFuQztrQkFDQXVLLE9BQU8sQ0FBQ3NMLE1BQVIsQ0FBZTVWLE1BQWYsR0FBd0J3SixXQUFXLENBQUN4SixNQUFwQztrQkFDQXNLLE9BQU8sQ0FBQytILFNBQVIsR0FBb0IsT0FBcEI7a0JBQ0EvSCxPQUFPLENBQUNnUixRQUFSLENBQWlCOVIsV0FBVyxDQUFDamQsQ0FBN0IsRUFBZ0NpZCxXQUFXLENBQUNoZCxDQUE1QyxFQUErQ2dkLFdBQVcsQ0FBQ3pKLEtBQTNELEVBQWtFeUosV0FBVyxDQUFDeEosTUFBOUU7a0JBRUF3UixPQUFPLENBQUNsSCxPQUFPLENBQUNzTCxNQUFULENBQVA7Z0JBQ0EsQ0FQTSxDQURSOztjQUFBO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNBSzBCOzs7OzhHQUV5Qjs7K0dBRUM7Ozs7O1dBRy9CLGdCQUFPaE4sT0FBUCxFQUEwQ3ZCLEtBQTFDLEVBQTREUyxXQUE1RCxFQUEwRjtNQUN6RixJQUFNb0IsTUFBTSxHQUFHN0IsS0FBSyxDQUFDNkIsTUFBckI7TUFFQU4sT0FBTyxDQUFDK0gsU0FBUixHQUFvQixLQUFLa0osVUFBekI7TUFDQWpSLE9BQU8sQ0FBQ2dSLFFBQVIsQ0FBaUIxUSxNQUFNLENBQUNyZSxDQUF4QixFQUEyQnFlLE1BQU0sQ0FBQ3BlLENBQWxDLEVBQXFDb2UsTUFBTSxDQUFDN0ssS0FBNUMsRUFBbUQ2SyxNQUFNLENBQUM1SyxNQUExRDtNQUNBc0ssT0FBTyxDQUFDbEgsU0FBUjtNQUNBa0gsT0FBTyxDQUFDaUksV0FBUixHQUFzQixLQUFLcUksV0FBM0I7TUFDQXRRLE9BQU8sQ0FBQ2tJLFNBQVIsR0FBb0IsSUFBSWxJLE9BQU8sQ0FBQzNQLGVBQVIsR0FBMEIwTSxTQUExQixFQUF4QjtNQUNBaUQsT0FBTyxDQUFDaGxCLElBQVIsQ0FBYXNsQixNQUFNLENBQUNyZSxDQUFwQixFQUF1QnFlLE1BQU0sQ0FBQ3BlLENBQTlCLEVBQWlDb2UsTUFBTSxDQUFDN0ssS0FBeEMsRUFBK0M2SyxNQUFNLENBQUM1SyxNQUF0RDtNQUNBc0ssT0FBTyxDQUFDdEgsTUFBUjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckJGO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVPLElBQU0wWSxrQkFBYjtFQU9DLDRCQUFZQyxJQUFaLEVBQTBCO0lBQUE7O0lBQUEsdUdBTEMsZUFLRDs7SUFBQTs7SUFDekIsS0FBS0EsSUFBTCxHQUFZQSxJQUFaO0VBQ0E7O0VBVEY7SUFBQTtJQUFBLE9BV0Msd0JBQWVqcUIsUUFBZixFQUF1RDtNQUN0RCxPQUFPLElBQUk4cEIsNERBQUosR0FBa0IzZCxHQUFsQixDQUFzQixLQUFLK2QsV0FBTCxDQUFpQixNQUFNbHFCLFFBQXZCLENBQXRCLENBQVA7SUFDQTtFQWJGO0lBQUE7SUFBQSxPQWVDLDBCQUFpQkEsUUFBakIsRUFBbUNtcUIsUUFBbkMsRUFBMEY7TUFBQTs7TUFDekYsSUFBSUEsUUFBUSxDQUFDcm5CLFlBQWIsRUFBMkI7UUFDMUIsT0FBTyxJQUFJK2MsT0FBSixDQUEyQixVQUFDQyxPQUFELEVBQVV1SixNQUFWLEVBQXFCO1VBQ3RELElBQUlTLDREQUFKLEdBQWtCTSxlQUFsQixDQUFrQyxhQUFsQyxFQUFpRGplLEdBQWpELENBQWtFZ2UsUUFBUSxDQUFDcm5CLFlBQTNFLEVBQ0VtaEIsSUFERixDQUNPLFVBQUNvRyxVQUFELEVBQTZCO1lBQ2xDLElBQUksQ0FBQ0EsVUFBTCxFQUFpQjtjQUNoQixNQUFNLElBQUl2NEIsS0FBSixDQUFVLGdDQUFWLENBQU47WUFDQTs7WUFFRCxJQUFNdzRCLFVBQVUsR0FBRyxJQUFJQyxVQUFKLENBQWVGLFVBQWYsQ0FBbkI7WUFDQSxJQUFNRyxVQUFVLEdBQUcsSUFBSVQsOERBQUosRUFBbkI7WUFFTixJQUFJVSxJQUFJLEdBQUdqNUIsUUFBUSxDQUFDMnhCLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBWDtZQUNBLElBQU11SCxJQUFJLEdBQUcsSUFBSUMsSUFBSixDQUFTLENBQUNMLFVBQUQsQ0FBVCxFQUFzQjtjQUFDOXpCLElBQUksRUFBQztZQUFOLENBQXRCLENBQWI7O1lBRUEsSUFBSSxjQUFjaTBCLElBQWxCLEVBQXVCO2NBQ3ZCO2NBQ0dBLElBQUksQ0FBQ0csSUFBTCxHQUFZQyxHQUFHLENBQUNDLGVBQUosQ0FBb0JKLElBQXBCLENBQVo7Y0FDQUQsSUFBSSxDQUFDTSxRQUFMLEdBQWdCWixRQUFRLENBQUNhLFlBQVQsR0FBd0IsTUFBeEM7Y0FDQVAsSUFBSSxDQUFDNWQsTUFBTCxHQUFjLFFBQWQsQ0FKb0IsQ0FLdkI7WUFDQzs7WUFFRHJiLFFBQVEsQ0FBQ3k1QixJQUFULENBQWNDLFdBQWQsQ0FBMEJULElBQTFCO1lBR00sT0FBT0QsVUFBVSxDQUFDVyxZQUFYLENBQXdCYixVQUF4QixDQUFQO1VBQ0EsQ0F4QkYsRUF5QkVyRyxJQXpCRixDQXlCTyxVQUFDbUgsUUFBRCxFQUE2QjtZQUNsQ0EsUUFBUSxDQUFDQyxhQUFULENBQXVCbEIsUUFBUSxDQUFDeG5CLFVBQWhDOztZQUVBLEtBQUksQ0FBQzJvQixvQkFBTCxDQUEwQnRyQixRQUExQixFQUFvQ21xQixRQUFwQyxFQUE4Q2lCLFFBQTlDLEVBQ0VuSCxJQURGLENBQ08sWUFBTTtjQUNYbkUsT0FBTyxDQUFDc0wsUUFBRCxDQUFQO1lBQ0EsQ0FIRixXQUlRLFVBQUNqdkIsS0FBRCxFQUFnQjtjQUN0Qmt0QixNQUFNLENBQUNsdEIsS0FBRCxDQUFOO1lBQ0EsQ0FORjtVQU9BLENBbkNGLFdBb0NRLFVBQUNBLEtBQUQsRUFBZ0I7WUFDdEJrdEIsTUFBTSxDQUFDbHRCLEtBQUQsQ0FBTjtVQUNBLENBdENGO1FBdUNBLENBeENNLENBQVA7TUF5Q0E7O01BRUQsT0FBTyxJQUFJMGpCLE9BQUosQ0FBMkIsVUFBQ0MsT0FBRCxFQUFVdUosTUFBVixFQUFxQjtRQUN0RCxJQUFNK0IsUUFBUSxHQUFHLElBQUl4TCwwRUFBSixFQUFqQjtRQUNBd0wsUUFBUSxDQUFDQyxhQUFULENBQXVCbEIsUUFBUSxDQUFDeG5CLFVBQWhDOztRQUVBLEtBQUksQ0FBQzJvQixvQkFBTCxDQUEwQnRyQixRQUExQixFQUFvQ21xQixRQUFwQyxFQUE4Q2lCLFFBQTlDLEVBQ0VuSCxJQURGLENBQ08sWUFBTTtVQUNYbkUsT0FBTyxDQUFDc0wsUUFBRCxDQUFQO1FBQ0EsQ0FIRixXQUlRLFVBQUNqdkIsS0FBRCxFQUFnQjtVQUN0Qmt0QixNQUFNLENBQUNsdEIsS0FBRCxDQUFOO1FBQ0EsQ0FORjtNQU9BLENBWE0sQ0FBUDtJQVlBO0VBeEVGO0lBQUE7SUFBQSxPQTBFQyxpQ0FBZ0M2RCxRQUFoQyxFQUFrRG1xQixRQUFsRCxFQUEwRztNQUFBOztNQUN6RyxPQUFPLElBQUl0SyxPQUFKLENBQTRCLFVBQUNDLE9BQUQsRUFBVXVKLE1BQVYsRUFBcUI7UUFDdkQsT0FBTyxJQUFJUyw0REFBSixHQUFrQk0sZUFBbEIsQ0FBa0MsYUFBbEMsRUFBaURqZSxHQUFqRCxDQUFrRSxNQUFJLENBQUMrZCxXQUFMLENBQWlCLE1BQU1scUIsUUFBTixHQUFpQixTQUFqQixHQUE2Qm1xQixRQUFRLENBQUN4bkIsVUFBdkQsQ0FBbEUsRUFDTHNoQixJQURLLENBQ0EsVUFBQ29HLFVBQUQsRUFBNkI7VUFDbEMsSUFBSSxDQUFDQSxVQUFMLEVBQWlCO1lBQ2hCaEIsTUFBTSxDQUFDLGdDQUFELENBQU47WUFDQTtVQUNBOztVQUVELElBQU05eUIsUUFBUSxHQUFHLElBQUlrRyxxRkFBSixDQUF3QjR0QixVQUF4QixDQUFqQjtVQUNBLElBQU1rQixZQUFZLEdBQUdsQixVQUFVLENBQUN6dEIsVUFBaEM7VUFFQSxJQUFNNHVCLGFBQTZCLEdBQUcsRUFBdEM7O1VBRUEsT0FBT2oxQixRQUFRLENBQUNvRyxVQUFULEdBQXNCNHVCLFlBQTdCLEVBQTJDO1lBQzFDLElBQU1wckIsV0FBVyxHQUFHNUosUUFBUSxDQUFDZ0QsUUFBVCxFQUFwQjtZQUVBLElBQU02RyxVQUFVLEdBQUcsSUFBSXpDLG1GQUFKLEVBQW5CO1lBQ0EsSUFBTUMsWUFBWSxHQUFHd0MsVUFBVSxDQUFDcEMsS0FBWCxDQUFpQnpILFFBQWpCLENBQXJCOztZQUVBLElBQUlxSCxZQUFKLEVBQWtCO2NBQ2pCNHRCLGFBQWEsQ0FBQ2h3QixJQUFkLENBQW1Cb0MsWUFBbkI7WUFDQTtVQUNEOztVQUVEa2lCLE9BQU8sQ0FBQzBMLGFBQUQsQ0FBUDtRQUNBLENBeEJLLFdBeUJDLFVBQUNydkIsS0FBRCxFQUFnQjtVQUN0Qmt0QixNQUFNLENBQUNsdEIsS0FBRCxDQUFOO1FBQ0EsQ0EzQkssQ0FBUDtNQTRCQSxDQTdCTSxDQUFQO0lBOEJBO0VBekdGO0lBQUE7SUFBQSxPQTJHQyw4QkFBNkI2RCxRQUE3QixFQUErQ21xQixRQUEvQyxFQUE4RWlCLFFBQTlFLEVBQXNIO01BQUE7O01BQ3JILE9BQU8sS0FBS0ssdUJBQUwsQ0FBNkJ6ckIsUUFBN0IsRUFBdUNtcUIsUUFBdkMsRUFDTGxHLElBREssQ0FDQSxVQUFDdE0sS0FBRCxFQUEyQjtRQUNoQztRQUNBLElBQU1obkIsUUFBUSxHQUFHLElBQUk0USxnRkFBSixDQUF5QjZwQixRQUF6QixDQUFqQjs7UUFGZ0MsMkNBSWJ6VCxLQUphO1FBQUE7O1FBQUE7VUFJaEMsb0RBQTBCO1lBQUEsSUFBZmptQixJQUFlOztZQUN6QixNQUFJLENBQUNnNkIsV0FBTCxDQUFpQi82QixRQUFqQixFQUEyQmUsSUFBM0I7VUFDQTtRQU4rQjtVQUFBO1FBQUE7VUFBQTtRQUFBO01BT2hDLENBUkssQ0FBUDtJQVNBO0VBckhGO0lBQUE7SUFBQSxPQXVIQyxxQkFBb0JmLFFBQXBCLEVBQW9EcVMsT0FBcEQsRUFBaUY7TUFDaEYsSUFBTXBCLE9BQU8sR0FBR29CLE9BQU8sQ0FBQzdFLGVBQXhCO01BQ0EsSUFBSTRELFdBQVcsR0FBR0gsT0FBTyxDQUFDbkwsTUFBMUI7O01BRUEsSUFBSXNMLFdBQVcsR0FBRyxDQUFsQixFQUFxQjtRQUNwQjtNQUNBLENBTitFLENBUWhGOzs7TUFDQXBSLFFBQVEsQ0FBQ2dFLGFBQVQsQ0FBdUJxTyxPQUFPLENBQUN2UixVQUEvQjs7TUFUZ0YsNENBVzdEbVEsT0FYNkQ7TUFBQTs7TUFBQTtRQVdoRix1REFBNEI7VUFBQSxJQUFuQmxMLE1BQW1COztVQUMzQixJQUFJO1lBQ0hBLE1BQU0sQ0FBQ3RFLE9BQVAsQ0FBZXpCLFFBQWY7VUFDQSxDQUZELENBR0EsT0FBT3dSLENBQVAsRUFBVTtZQUNUakcsT0FBTyxDQUFDQyxLQUFSLENBQWNnRyxDQUFkO1VBQ0E7UUFDRDtNQWxCK0U7UUFBQTtNQUFBO1FBQUE7TUFBQTtJQW1CaEY7RUExSUY7SUFBQTtJQUFBLE9BNElDLHFCQUFvQjZSLElBQXBCLEVBQTBDO01BQ3pDLE9BQU8sS0FBS2lXLElBQUwsR0FBWSxLQUFLMEIsT0FBakIsR0FBMkIzWCxJQUFsQztJQUNBO0VBOUlGOztFQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYQTtBQUVBO0FBR08sSUFBTStWLGVBQWI7RUFBQTtJQUFBO0VBQUE7O0VBQUE7SUFBQTtJQUFBLE9BRUMsc0JBQWF6VCxNQUFiLEVBQXlEO01BQ3hELE9BQU8sSUFBSXVKLE9BQUosQ0FBMkIsVUFBQ0MsT0FBRCxFQUFVdUosTUFBVixFQUFxQjtRQUN0RCxJQUFNd0MsV0FBVyxHQUFHRCx1REFBVyxDQUFDdFYsTUFBRCxDQUEvQjtRQUNBdVYsV0FBVyxDQUFDN0gsT0FBWixDQUNFQyxJQURGLENBQ08sVUFBQzZILEdBQUQsRUFBMkI7VUFDaENoTSxPQUFPLENBQUMsSUFBSXZGLGlFQUFKLENBQWtCdVIsR0FBbEIsQ0FBRCxDQUFQO1FBQ0EsQ0FIRixXQUlRLFVBQUMxSCxNQUFELEVBQW9CO1VBQzFCaUYsTUFBTSxDQUFDakYsTUFBRCxDQUFOO1FBQ0EsQ0FORjtNQU9BLENBVE0sQ0FBUDtJQVVBO0VBYkY7O0VBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTEE7QUFHQTtBQUVPLElBQU02SCxZQUFiO0VBK0JDLHNCQUFZQyxTQUFaLEVBQStCQyxhQUEvQixFQUE2RDtJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUFBOztJQUM1RCxLQUFLRCxTQUFMLEdBQWlCQSxTQUFqQjtJQUNBLEtBQUtDLGFBQUwsR0FBcUJBLGFBQXJCO0lBQ0EsS0FBS0MsS0FBTCxHQUFhLElBQWI7SUFDQSxLQUFLQyxlQUFMLEdBQXVCLElBQXZCO0lBQ0EsS0FBS3ZyQixXQUFMLEdBQW1CLElBQW5CO0lBQ0EsS0FBS3dyQixvQkFBTCxHQUE0QixJQUE1QjtJQUNBLEtBQUtDLFlBQUwsR0FBb0IsSUFBcEI7SUFDQSxLQUFLQyxXQUFMLEdBQW1CLEVBQW5CO0lBRUEsS0FBS0MsUUFBTCxHQUFnQixZQUFZViw2REFBQSxDQUFtQixFQUFuQixDQUE1QjtJQUNBLEtBQUtZLFVBQUwsR0FBa0JaLDZEQUFBLENBQW1CLEVBQW5CLENBQWxCO0VBQ0E7O0VBM0NGO0lBQUE7SUFBQSxPQTZDQyx1QkFBY2EsVUFBZCxFQUE0QztNQUMzQyxLQUFLQSxVQUFMLEdBQWtCQSxVQUFsQjtJQUNBO0VBL0NGO0lBQUE7SUFBQSxPQWlEQyw4QkFBcUJDLGlCQUFyQixFQUFtRDtNQUNsRCxLQUFLQSxpQkFBTCxHQUF5QkEsaUJBQXpCO0lBQ0E7RUFuREY7SUFBQTtJQUFBLE9BcURDLG1CQUFVQyxNQUFWLEVBQTBCO01BQ3pCLEtBQUtMLFFBQUwsR0FBZ0JLLE1BQWhCO0lBQ0E7RUF2REY7SUFBQTtJQUFBLE9BeURDLG1CQUFVQyxNQUFWLEVBQTBCO01BQ3pCLEtBQUtDLE1BQUwsR0FBY0QsTUFBZDtJQUNBO0VBM0RGO0lBQUE7SUFBQSxPQTZEQyxtQkFBVUUsUUFBVixFQUF5QztNQUN4Q2pCLDZEQUFBLENBQW9CaUIsUUFBcEI7TUFFQSxLQUFLVixZQUFMLEdBQW9CVSxRQUFwQjtJQUNBO0VBakVGO0lBQUE7SUFBQSxPQW1FQyxvQkFBV0EsUUFBWCxFQUEwQztNQUN6Q2pCLDZEQUFBLENBQW9CaUIsUUFBcEI7TUFFQSxLQUFLRSxhQUFMLEdBQXFCRixRQUFyQjtJQUNBO0VBdkVGO0lBQUE7SUFBQSxPQXlFQyxpQkFBUTtNQUFBOztNQUNQO01BQ0FsQixxREFBQSxDQUFXO1FBQ1Y7UUFDQTdlLFFBQVEsRUFBRSxvQkFBTTtVQUNmO1VBQ0EsSUFBSSxDQUFDNmUsa0VBQUEsRUFBTCxFQUFnQztZQUMvQjd2QixPQUFPLENBQUNDLEtBQVIsQ0FBYyxzQkFBZDtZQUNBO1VBQ0E7O1VBRUQsS0FBSSxDQUFDbXhCLGFBQUw7UUFDQTtNQVZTLENBQVg7SUFZQTtFQXZGRjtJQUFBO0lBQUEsT0F5RkMsaUJBQVFDLE1BQVIsRUFBd0I7TUFDdkIsSUFBTXpzQixXQUFXLEdBQUcwc0IsTUFBTSxDQUFDRCxNQUFELENBQTFCOztNQUVBLElBQUksS0FBS3pzQixXQUFMLEtBQXFCQSxXQUF6QixFQUFzQztRQUNyQyxLQUFLMnNCLGlCQUFMLENBQXVCO1VBQUUvVixFQUFFLEVBQUU1VztRQUFOLENBQXZCLEVBQTRDLEtBQTVDO01BQ0E7SUFDRDtFQS9GRjtJQUFBO0lBQUEsT0FpR0MscUJBQVkrckIsaUJBQVosRUFBb0M7TUFBQTs7TUFDbkM7TUFDQSxLQUFLVCxLQUFMLENBQVdzQixNQUFYLENBQWtCO1FBQ2pCQyxNQUFNLEVBQUUsd0JBRFM7UUFFakJsQixRQUFRLEVBQUUsS0FBS0EsUUFGRTtRQUdqQm1CLE9BQU8sRUFBRSxpQkFBQ0MsWUFBRCxFQUFnQztVQUN4QzlCLG9EQUFBLENBQVUsdUJBQXVCOEIsWUFBWSxDQUFDRSxTQUFiLEVBQXZCLEdBQWtELE9BQWxELEdBQTRERixZQUFZLENBQUNHLEtBQWIsRUFBNUQsR0FBbUYsR0FBN0Y7VUFFQSxNQUFJLENBQUMzQixlQUFMLEdBQXVCd0IsWUFBdkI7O1VBRUEsTUFBSSxDQUFDSSxlQUFMLENBQXFCLE1BQUksQ0FBQzVCLGVBQTFCO1FBQ0EsQ0FUZ0I7UUFVakJsd0IsS0FBSyxFQUFFLGVBQUN3RixLQUFELEVBQWdCO1VBQ3RCb3FCLHNEQUFBLENBQVksZ0NBQVosRUFBOENwcUIsS0FBOUM7UUFDQSxDQVpnQjtRQWFqQnVzQixhQUFhLEVBQUUsdUJBQUNDLEVBQUQsRUFBaUIsQ0FDL0I7UUFDQSxDQWZnQjtRQWdCakJDLFFBQVEsRUFBRSxrQkFBQ2hTLEtBQUQsRUFBbUM7VUFDNUMyUCxvREFBQSxDQUFVLDBCQUEwQjNQLEtBQXBDO1FBQ0EsQ0FsQmdCO1FBbUJqQmlTLFVBQVUsRUFBRSxvQkFBQ0MsTUFBRCxFQUE0QkMsU0FBNUIsRUFBZ0RDLEdBQWhELEVBQWlFO1VBQzVFekMsb0RBQUEsQ0FBVSxZQUFZd0MsU0FBUyxHQUFHLFNBQUgsR0FBZSxTQUFwQyxJQUFpRCxpQkFBakQsR0FBcUVELE1BQS9FO1FBQ0EsQ0FyQmdCO1FBc0JqQkcsV0FBVyxFQUFFLHFCQUFDQyxXQUFELEVBQTBCO1VBQ3RDM0Msb0RBQUEsQ0FBVSw4Q0FBOEMyQyxXQUFXLEdBQUcsSUFBSCxHQUFVLE1BQW5FLElBQTZFLE1BQXZGO1VBRUEsTUFBSSxDQUFDdkMsYUFBTCxDQUFtQndDLHdCQUFuQixHQUE4Q0QsV0FBOUM7O1VBRUEsSUFBSSxDQUFDQSxXQUFMLEVBQWtCO1lBQ2pCLE1BQUksQ0FBQ3ZDLGFBQUwsQ0FBbUJ5QyxtQkFBbkIsR0FBeUMsS0FBekM7WUFDQSxNQUFJLENBQUN6QyxhQUFMLENBQW1CMEMsVUFBbkIsR0FBZ0MsS0FBaEM7VUFDQTtRQUNELENBL0JnQjtRQWdDakJDLFNBQVMsRUFBRSxtQkFBQ0MsT0FBRCxFQUFlQyxJQUFmLEVBQStCO1VBQ3pDLElBQU01bkIsS0FBSyxHQUFHMm5CLE9BQU8sQ0FBQyxXQUFELENBQXJCOztVQUVBLElBQUlBLE9BQU8sQ0FBQyxPQUFELENBQVgsRUFBc0I7WUFDckJoRCxzREFBQSxDQUFZZ0QsT0FBTyxDQUFDLE9BQUQsQ0FBbkI7WUFDQTtVQUNBOztVQUVELElBQUkzbkIsS0FBSixFQUFXO1lBQ1YsSUFBSUEsS0FBSyxLQUFLLFFBQWQsRUFBd0I7Y0FDdkIsTUFBSSxDQUFDdEcsV0FBTCxHQUFtQml1QixPQUFPLENBQUMsSUFBRCxDQUExQjs7Y0FDQSxNQUFJLENBQUNFLGNBQUwsQ0FBb0IsTUFBSSxDQUFDNUMsZUFBekIsRUFBMENRLGlCQUExQztZQUNBO1VBQ0Q7O1VBRUQsSUFBSW1DLElBQUosRUFBVTtZQUNULE1BQUksQ0FBQzNDLGVBQUwsQ0FBcUI2QyxnQkFBckIsQ0FBc0M7Y0FBRUYsSUFBSSxFQUFFQTtZQUFSLENBQXRDLEVBRFMsQ0FHVDtZQUNBOzs7WUFDQSxJQUFNRyxLQUFLLEdBQUdKLE9BQU8sQ0FBQyxhQUFELENBQXJCO1lBQ0EsSUFBTUssS0FBSyxHQUFHTCxPQUFPLENBQUMsYUFBRCxDQUFyQjs7WUFFQSxJQUFJLE1BQUksQ0FBQ3pDLG9CQUFMLElBQTZCLE1BQUksQ0FBQ0Esb0JBQUwsQ0FBMEIrQyxjQUExQixFQUE3QixJQUEyRSxNQUFJLENBQUMvQyxvQkFBTCxDQUEwQitDLGNBQTFCLEdBQTJDNTRCLE1BQTNDLEdBQW9ELENBQS9ILElBQW9JLENBQUMwNEIsS0FBekksRUFBZ0o7Y0FDL0k7Y0FDQWp6QixPQUFPLENBQUM0eEIsR0FBUixDQUFZLDJEQUFaO1lBQ0E7O1lBRUQsSUFBSSxNQUFJLENBQUN4QixvQkFBTCxJQUE2QixNQUFJLENBQUNBLG9CQUFMLENBQTBCZ0QsY0FBMUIsRUFBN0IsSUFBMkUsTUFBSSxDQUFDaEQsb0JBQUwsQ0FBMEJnRCxjQUExQixHQUEyQzc0QixNQUEzQyxHQUFvRCxDQUEvSCxJQUFvSSxDQUFDMjRCLEtBQXpJLEVBQWdKO2NBQy9JO2NBRUFsekIsT0FBTyxDQUFDNHhCLEdBQVIsQ0FBWSwwREFBWixFQUgrSSxDQUsvSTtZQUVBO1VBQ0Q7UUFDRCxDQXJFZ0I7UUFzRWpCeUIsYUFBYSxFQUFFLHVCQUFDQyxNQUFELEVBQXlCO1VBQ3ZDLE1BQUksQ0FBQ2xELG9CQUFMLEdBQTRCa0QsTUFBNUI7O1VBRUEsSUFBTUMsY0FBYyxHQUFHLE1BQUksQ0FBQ0MsY0FBTCxDQUFvQixnQkFBcEIsQ0FBdkI7O1VBRUEzRCxrRUFBQSxDQUF3QjBELGNBQXhCLEVBQXdDRCxNQUF4QztVQUVBQyxjQUFjLENBQUNscEIsS0FBZixHQUF1QixJQUF2QjtVQUNBLElBQUlxcEIsUUFBUSxHQUFHLEtBQWY7VUFFQSxJQUFNQyxXQUFXLEdBQUc7WUFDbkJ4aEIsS0FBSyxFQUFFO2NBQUV3RixHQUFHLEVBQUUsR0FBUDtjQUFZaWMsS0FBSyxFQUFFLEdBQW5CO2NBQXdCN3FCLEdBQUcsRUFBRTtZQUE3QixDQURZO1lBRW5CcUosTUFBTSxFQUFFO2NBQUV1RixHQUFHLEVBQUUsR0FBUDtjQUFZaWMsS0FBSyxFQUFFO1lBQW5CLENBRlc7WUFHbkJDLFdBQVcsRUFBRTtjQUFFRCxLQUFLLEVBQUU7WUFBVCxDQUhNO1lBSW5CRSxTQUFTLEVBQUU7Y0FBRS9xQixHQUFHLEVBQUU7WUFBUCxDQUpRO1lBS25CZ3JCLFVBQVUsRUFBRTtjQUFFSCxLQUFLLEVBQUU7WUFBVDtVQUxPLENBQXBCOztVQVZ1QywyQ0FrQmROLE1BQU0sQ0FBQ0YsY0FBUCxFQWxCYztVQUFBOztVQUFBO1lBa0J2QyxvREFBa0Q7Y0FBQSxJQUF2Q1ksVUFBdUM7Y0FDakRBLFVBQVUsQ0FBQ0MsZ0JBQVgsQ0FBNEJOLFdBQTVCOztjQUVBLElBQUlLLFVBQVUsQ0FBQzNwQixLQUFYLElBQW9CLEtBQXhCLEVBQStCO2dCQUM5QnFwQixRQUFRLEdBQUcsSUFBWDtnQkFDQTtjQUNBO1lBQ0Q7VUF6QnNDO1lBQUE7VUFBQTtZQUFBO1VBQUE7O1VBMkJ2QyxNQUFJLENBQUN6RCxhQUFMLENBQW1CeUMsbUJBQW5CLEdBQXlDZ0IsUUFBekM7UUFDQSxDQWxHZ0I7UUFtR2pCUSxjQUFjLEVBQUUsd0JBQUNaLE1BQUQsRUFBeUIsQ0FDeEM7UUFDQSxDQXJHZ0I7UUFzR2pCYSxTQUFTLEVBQUUscUJBQU0sQ0FFaEIsQ0F4R2dCO1FBeUdqQkMsUUFBUSxFQUFFLG9CQUFNLENBRWY7TUEzR2dCLENBQWxCO0lBNkdBO0VBaE5GO0lBQUE7SUFBQSxPQWtOQyxzQkFBYTtNQUNaLEtBQUt4dkIsV0FBTCxHQUFtQixJQUFuQjs7TUFFQSxJQUFJLEtBQUt1ckIsZUFBVCxFQUEwQjtRQUN6QixJQUFJa0UsU0FBUyxHQUFHO1VBQUVDLE9BQU8sRUFBRTtRQUFYLENBQWhCO1FBRUEsS0FBS25FLGVBQUwsQ0FBcUJvRSxJQUFyQixDQUEwQjtVQUFFMUIsT0FBTyxFQUFFd0I7UUFBWCxDQUExQjtRQUVBLEtBQUtwRSxhQUFMLENBQW1CeUMsbUJBQW5CLEdBQXlDLEtBQXpDO01BQ0E7SUFDRDtFQTVORjtJQUFBO0lBQUEsT0E4TkMseUJBQXdCO01BQUE7O01BQ3ZCLEtBQUt4QyxLQUFMLEdBQWEsSUFBSUwsZ0RBQUosQ0FBVTtRQUN0QjJFLE1BQU0sRUFBRSxLQUFLeEUsU0FEUztRQUV0QjBCLE9BQU8sRUFBRSxtQkFBTTtVQUNkLE1BQUksQ0FBQ0YsTUFBTDtRQUNBLENBSnFCO1FBS3RCdnhCLEtBQUssRUFBRSxlQUFDd0YsS0FBRCxFQUFnQjtVQUN0Qm9xQixzREFBQSxDQUFZcHFCLEtBQVo7O1VBRUEsSUFBSSxNQUFJLENBQUN3ckIsYUFBVCxFQUF3QjtZQUN2QixNQUFJLENBQUNBLGFBQUwsQ0FBbUJ4ckIsS0FBbkI7VUFDQTtRQUNELENBWHFCO1FBWXRCZ3ZCLFNBQVMsRUFBRSxxQkFBTTtVQUNoQjVFLG9EQUFBLENBQVUsaUJBQVY7UUFDQTtNQWRxQixDQUFWLENBQWI7SUFnQkE7RUEvT0Y7SUFBQTtJQUFBLE9BaVBDLGtCQUFpQjtNQUFBOztNQUNoQixLQUFLSyxLQUFMLENBQVdzQixNQUFYLENBQWtCO1FBQ2pCQyxNQUFNLEVBQUUsd0JBRFM7UUFFakJsQixRQUFRLEVBQUUsS0FBS0EsUUFGRTtRQUdqQm1CLE9BQU8sRUFBRSxpQkFBQ0MsWUFBRCxFQUFnQztVQUN4QzlCLG9EQUFBLENBQVUsdUJBQXVCOEIsWUFBWSxDQUFDRSxTQUFiLEVBQXZCLEdBQWtELE9BQWxELEdBQTRERixZQUFZLENBQUNHLEtBQWIsRUFBNUQsR0FBbUYsR0FBN0Y7O1VBRUEsTUFBSSxDQUFDNEMsZUFBTCxDQUFxQi9DLFlBQXJCO1FBQ0EsQ0FQZ0I7UUFRakJpQixTQUFTLEVBQUUsbUJBQUNDLE9BQUQsRUFBZUMsSUFBZixFQUErQjtVQUN6Qzl5QixPQUFPLENBQUM0eEIsR0FBUixDQUFZLGNBQVosRUFBNEJpQixPQUE1QjtRQUNBLENBVmdCO1FBV2pCNXlCLEtBQUssRUFBRSxlQUFDd0YsS0FBRCxFQUFnQjtVQUN0QnpGLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLGdDQUFkLEVBQWdEd0YsS0FBaEQ7UUFDQSxDQWJnQjtRQWNqQjJ1QixRQUFRLEVBQUUsb0JBQU07VUFDZnAwQixPQUFPLENBQUM0eEIsR0FBUixDQUFZLGtCQUFaO1FBQ0E7TUFoQmdCLENBQWxCO0lBa0JBO0VBcFFGO0lBQUE7SUFBQSxPQXNRQyx5QkFBd0JELFlBQXhCLEVBQW9EO01BQUE7O01BQ25ELElBQU1nRCxJQUFJLEdBQUc7UUFDWkwsT0FBTyxFQUFFLGtCQURHO1FBRVpNLElBQUksRUFBRSxLQUFLOUQ7TUFGQyxDQUFiO01BS0FhLFlBQVksQ0FBQzRDLElBQWIsQ0FBa0I7UUFDakIxQixPQUFPLEVBQUU4QixJQURRO1FBRWpCakQsT0FBTyxFQUFFLGlCQUFDdE4sR0FBRCxFQUFjO1VBQ3RCLElBQU15USxPQUFPLEdBQUd6USxHQUFHLENBQUMwUSxZQUFKLElBQW9CMVEsR0FBRyxDQUFDMFEsWUFBSixDQUFpQnY2QixNQUFqQixHQUEwQixDQUE5RDs7VUFFQSxJQUFJczZCLE9BQUosRUFBYTtZQUNaLEtBQUssSUFBSXgxQixDQUFULElBQWMra0IsR0FBRyxDQUFDMFEsWUFBbEIsRUFBZ0M7Y0FDL0IsSUFBTUMsU0FBUyxHQUFHM1EsR0FBRyxDQUFDMFEsWUFBSixDQUFpQnoxQixDQUFqQixDQUFsQjs7Y0FFQSxNQUFJLENBQUNreUIsaUJBQUwsQ0FBdUJ3RCxTQUF2QixFQUFrQyxDQUFDQSxTQUFTLENBQUNDLE9BQTdDO1lBQ0E7VUFDRCxDQU5ELE1BT0s7WUFDSm5GLHNEQUFBLENBQVkseUNBQVo7VUFDQTs7VUFFRDhCLFlBQVksQ0FBQ3NELE1BQWI7UUFDQTtNQWpCZ0IsQ0FBbEI7SUFtQkE7RUEvUkY7SUFBQTtJQUFBLE9BaVNDLDJCQUEwQkYsU0FBMUIsRUFBMENHLFNBQTFDLEVBQThEO01BQUE7O01BQzdELElBQUlDLFVBQXdCLEdBQUcsSUFBL0I7TUFFQSxLQUFLakYsS0FBTCxDQUFXc0IsTUFBWCxDQUFrQjtRQUNqQkMsTUFBTSxFQUFFLHdCQURTO1FBRWpCbEIsUUFBUSxFQUFFLEtBQUtBLFFBRkU7UUFHakJtQixPQUFPLEVBQUUsaUJBQUNDLFlBQUQsRUFBZ0M7VUFDeEN3RCxVQUFVLEdBQUd4RCxZQUFiO1VBQ0F3RCxVQUFVLENBQUNELFNBQVgsR0FBdUJBLFNBQXZCO1VBQ0FDLFVBQVUsQ0FBQ3pCLFFBQVgsR0FBc0IsS0FBdEI7VUFFQSxJQUFNbG9CLFNBQVMsR0FBRztZQUNqQjhvQixPQUFPLEVBQUUsTUFEUTtZQUVqQk0sSUFBSSxFQUFFLE1BQUksQ0FBQzlELE1BRk07WUFHakJzRSxLQUFLLEVBQUUsWUFIVTtZQUlqQkMsSUFBSSxFQUFFTixTQUFTLENBQUN2WjtVQUpDLENBQWxCO1VBT0EyWixVQUFVLENBQUNaLElBQVgsQ0FBZ0I7WUFBRTFCLE9BQU8sRUFBRXJuQjtVQUFYLENBQWhCO1FBQ0EsQ0FoQmdCO1FBaUJqQnZMLEtBQUssRUFBRSxlQUFDd0YsS0FBRCxFQUFnQjtVQUN0Qm9xQixzREFBQSxDQUFZLGdDQUFaLEVBQThDcHFCLEtBQTlDOztVQUVBLElBQUkwdkIsVUFBVSxDQUFDRCxTQUFmLEVBQTBCO1lBQ3pCLE1BQUksQ0FBQ0ksVUFBTDtVQUNBO1FBQ0QsQ0F2QmdCO1FBd0JqQnBELFFBQVEsRUFBRSxrQkFBQ2hTLEtBQUQsRUFBbUM7VUFDNUMyUCxvREFBQSxDQUFVLDBCQUEwQjNQLEtBQXBDOztVQUVBLElBQUlBLEtBQUssS0FBSyxRQUFWLElBQXNCLE1BQUksQ0FBQytRLGFBQS9CLEVBQThDO1lBQzdDLE1BQUksQ0FBQ0EsYUFBTCxDQUFtQjtjQUNsQnhyQixLQUFLLEVBQUU7WUFEVyxDQUFuQjtVQUdBO1FBQ0QsQ0FoQ2dCO1FBaUNqQjBzQixVQUFVLEVBQUUsb0JBQUNDLE1BQUQsRUFBNEJDLFNBQTVCLEVBQWdEQyxHQUFoRCxFQUFpRTtVQUM1RXpDLG9EQUFBLENBQVUsWUFBWXdDLFNBQVMsR0FBRyxTQUFILEdBQWUsU0FBcEMsSUFBaUQsaUJBQWpELEdBQXFFRCxNQUEvRTtRQUNBLENBbkNnQjtRQW9DakJHLFdBQVcsRUFBRSxxQkFBQ0MsV0FBRCxFQUEwQjtVQUN0QzNDLG9EQUFBLENBQVUsOENBQThDMkMsV0FBVyxHQUFHLElBQUgsR0FBVSxNQUFuRSxJQUE2RSxNQUF2Rjs7VUFFQSxJQUFJMkMsVUFBVSxDQUFDRCxTQUFmLEVBQTBCO1lBQ3pCLE1BQUksQ0FBQ2pGLGFBQUwsQ0FBbUJzRixlQUFuQixHQUFxQy9DLFdBQXJDOztZQUVBLElBQUksQ0FBQ0EsV0FBTCxFQUFrQjtjQUNqQixNQUFJLENBQUM4QyxVQUFMO1lBQ0E7VUFDRDtRQUNELENBOUNnQjtRQStDakIxQyxTQUFTLEVBQUUsbUJBQUNDLE9BQUQsRUFBZUMsSUFBZixFQUErQjtVQUN6QyxJQUFNNW5CLEtBQUssR0FBRzJuQixPQUFPLENBQUMsV0FBRCxDQUFyQjs7VUFFQSxJQUFJQSxPQUFPLENBQUMsT0FBRCxDQUFYLEVBQXNCO1lBQ3JCN3lCLE9BQU8sQ0FBQ0MsS0FBUixDQUFjNHlCLE9BQU8sQ0FBQyxPQUFELENBQXJCO1lBQ0E7VUFDQTs7VUFFRCxJQUFJM25CLEtBQUosRUFBVztZQUNWLElBQUlBLEtBQUssS0FBSyxVQUFkLEVBQTBCO2NBQ3pCO2NBQ0Eya0Isb0RBQUEsQ0FBVSxtQ0FBbUNnRCxPQUFPLENBQUMsSUFBRCxDQUExQyxHQUFtRCxJQUFuRCxHQUEwREEsT0FBTyxDQUFDLFNBQUQsQ0FBakUsR0FBK0UsWUFBL0UsR0FBOEZBLE9BQU8sQ0FBQyxNQUFELENBQS9HO2NBRUFzQyxVQUFVLENBQUNLLElBQVgsR0FBa0IzQyxPQUFPLENBQUMsSUFBRCxDQUF6Qjs7Y0FFQSxNQUFJLENBQUN2QyxXQUFMLENBQWlCaHhCLElBQWpCLENBQXNCNjFCLFVBQXRCO1lBQ0E7VUFDRDs7VUFFRCxJQUFJckMsSUFBSixFQUFVO1lBQ1QsTUFBSSxDQUFDMkMsWUFBTCxDQUFrQk4sVUFBbEIsRUFBOEJyQyxJQUE5QixFQUFvQ3FDLFVBQVUsQ0FBQ0QsU0FBL0M7VUFDQTtRQUNELENBckVnQjtRQXNFakJoQixjQUFjLEVBQUUsd0JBQUNaLE1BQUQsRUFBeUI7VUFDeEMsSUFBSUksUUFBUSxHQUFHLEtBQWY7O1VBRHdDLDRDQUdmSixNQUFNLENBQUNGLGNBQVAsRUFIZTtVQUFBOztVQUFBO1lBR3hDLHVEQUFrRDtjQUFBLElBQXZDWSxVQUF1Qzs7Y0FDakQsSUFBSUEsVUFBVSxDQUFDM3BCLEtBQVgsSUFBb0IsS0FBeEIsRUFBK0I7Z0JBQUE7a0JBQzlCLElBQU1xckIsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQixDQUFDeHFCLEtBQUQsRUFBa0M7b0JBQ3hELE1BQUksQ0FBQ3lxQixtQkFBTCxDQUF5QlIsVUFBekIsRUFBcUNqcUIsS0FBSyxDQUFDMHFCLEtBQTNDOztvQkFFQXRDLE1BQU0sQ0FBQ3VDLG1CQUFQLENBQTJCLGFBQTNCLEVBQTBDSCxjQUExQztrQkFDQSxDQUpEOztrQkFNQXBDLE1BQU0sQ0FBQ2pyQixnQkFBUCxDQUF3QixhQUF4QixFQUF1Q3F0QixjQUF2QztrQkFFQWhDLFFBQVEsR0FBRyxJQUFYO2tCQUNBO2dCQVY4Qjs7Z0JBQUEsc0JBVTlCO2NBQ0E7WUFDRDtVQWhCdUM7WUFBQTtVQUFBO1lBQUE7VUFBQTs7VUFrQnhDeUIsVUFBVSxDQUFDekIsUUFBWCxHQUFzQkEsUUFBdEI7O1VBRUEsSUFBSXlCLFVBQVUsQ0FBQ0QsU0FBZixFQUEwQjtZQUN6QixJQUFNaEMsS0FBSyxHQUFHLE1BQUksQ0FBQ3hDLFVBQUwsQ0FBZ0JvRixlQUFoQixFQUFkOztZQUVBakcsa0VBQUEsQ0FBd0JxRCxLQUF4QixFQUErQkksTUFBL0I7O1lBRUEsTUFBSSxDQUFDeUMsWUFBTCxDQUFrQjdDLEtBQWxCLEVBQXlCLE1BQUksQ0FBQ3ZDLGlCQUFMLENBQXVCcUYsV0FBaEQ7O1lBRUEsTUFBSSxDQUFDL0YsYUFBTCxDQUFtQmdHLGtCQUFuQixHQUF3Q3ZDLFFBQXhDO1VBQ0EsQ0FSRCxNQVNLO1lBQ0osSUFBSVIsTUFBSyxHQUFHLE1BQUksQ0FBQ00sY0FBTCxDQUFvQixlQUFldUIsU0FBUyxDQUFDdlosRUFBN0MsQ0FBWjs7WUFFQSxJQUFJLENBQUMwWCxNQUFMLEVBQVk7Y0FDWEEsTUFBSyxHQUFHNTlCLFFBQVEsQ0FBQzJ4QixhQUFULENBQXVCLE9BQXZCLENBQVI7Y0FDQWlNLE1BQUssQ0FBQzFYLEVBQU4sR0FBVyxlQUFldVosU0FBUyxDQUFDdlosRUFBcEM7Y0FDQTBYLE1BQUssQ0FBQ2dELFFBQU4sR0FBaUIsSUFBakI7Y0FDQWhELE1BQUssQ0FBQ2lELFdBQU4sR0FBb0IsSUFBcEIsQ0FKVyxDQU1YO2NBQ0E7Y0FDQTtjQUVBO2NBRUE7Y0FDQTtjQUNBO2NBRUE7Y0FDQTtjQUNBO2NBQ0E7Y0FDQTs7Y0FFQSxJQUFNQyxHQUFHLEdBQUc5Z0MsUUFBUSxDQUFDMnhCLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBWjtjQUNBbVAsR0FBRyxDQUFDNWEsRUFBSixHQUFTLGtCQUFrQnVaLFNBQVMsQ0FBQ3ZaLEVBQXJDO2NBQ0E0YSxHQUFHLENBQUMzdEIsU0FBSixDQUFjbUMsR0FBZCxDQUFrQixnQkFBbEIsRUFBb0MsV0FBcEM7Y0FDQXdyQixHQUFHLENBQUNwSCxXQUFKLENBQWdCa0UsTUFBaEI7O2NBRUEsSUFBTW1ELGtCQUFrQixHQUFHLE1BQUksQ0FBQzdDLGNBQUwsQ0FBb0Isb0JBQXBCLENBQTNCOztjQUNBNkMsa0JBQWtCLENBQUNySCxXQUFuQixDQUErQm9ILEdBQS9CO1lBQ0E7O1lBRUQsSUFBSTFDLFFBQUosRUFBYztjQUNiLElBQU00QyxZQUFZLEdBQUcsTUFBSSxDQUFDOUMsY0FBTCxDQUFvQixrQkFBa0J1QixTQUFTLENBQUN2WixFQUFoRCxDQUFyQjs7Y0FDQThhLFlBQVksQ0FBQzd0QixTQUFiLENBQXVCb0MsTUFBdkIsQ0FBOEIsV0FBOUI7WUFDQTs7WUFFRGdsQixrRUFBQSxDQUF3QnFELE1BQXhCLEVBQStCSSxNQUEvQjs7WUFFQSxNQUFJLENBQUN5QyxZQUFMLENBQWtCN0MsTUFBbEIsRUFBeUIsTUFBSSxDQUFDdkMsaUJBQUwsQ0FBdUJxRixXQUFoRDtVQUNBOztVQUVELE1BQUksQ0FBQ08sZUFBTDtRQUNBLENBaEpnQjtRQWlKakJDLFVBQVUsRUFBRSxvQkFBQ0MsS0FBRCxFQUFnQkMsUUFBaEIsRUFBcUM7VUFDaEQ3RyxvREFBQSxDQUFVLGtDQUFrQyxLQUFsQyxHQUEwQzRHLEtBQTFDLEdBQWtELEtBQWxELEdBQTBEQyxRQUFwRTtRQUNBLENBbkpnQjtRQW9KakJDLE1BQU0sRUFBRSxnQkFBQ0MsSUFBRCxFQUFlO1VBQ3RCLElBQUl6QixVQUFVLENBQUNELFNBQWYsRUFBMEI7WUFDekIsTUFBSSxDQUFDN0UsWUFBTCxDQUFrQnVHLElBQWxCO1VBQ0E7UUFDRCxDQXhKZ0I7UUF5SmpCekMsU0FBUyxFQUFFLHFCQUFNO1VBQ2hCLElBQUksQ0FBQ2dCLFVBQVUsQ0FBQ0QsU0FBaEIsRUFBMkI7WUFDMUIsSUFBTW1CLGtCQUFrQixHQUFHLE1BQUksQ0FBQzdDLGNBQUwsQ0FBb0Isb0JBQXBCLENBQTNCOztZQUNBLElBQU04QyxZQUFZLEdBQUcsTUFBSSxDQUFDOUMsY0FBTCxDQUFvQixrQkFBa0J1QixTQUFTLENBQUN2WixFQUFoRCxDQUFyQjs7WUFFQTZhLGtCQUFrQixDQUFDN0ksV0FBbkIsQ0FBK0I4SSxZQUEvQjtVQUNBOztVQUVELE1BQUksQ0FBQ2hHLFdBQUwsR0FBbUIsTUFBSSxDQUFDQSxXQUFMLENBQWlCdUcsTUFBakIsQ0FBd0IsVUFBQUMsSUFBSTtZQUFBLE9BQUlBLElBQUksS0FBSzNCLFVBQWI7VUFBQSxDQUE1QixDQUFuQjs7VUFFQSxJQUFJQSxVQUFVLENBQUNELFNBQWYsRUFBMEI7WUFDekIsTUFBSSxDQUFDSSxVQUFMO1VBQ0E7O1VBRUQsTUFBSSxDQUFDaUIsZUFBTDs7VUFFQSxJQUFJcEIsVUFBVSxDQUFDRCxTQUFmLEVBQTBCO1lBQ3pCLE1BQUksQ0FBQ2hGLEtBQUwsQ0FBVzZHLE9BQVg7VUFDQTtRQUNELENBNUtnQjtRQTZLakIzQyxRQUFRLEVBQUUsb0JBQU07VUFDZnZFLG9EQUFBLENBQVUsYUFBVjtRQUNBO01BL0tnQixDQUFsQjtJQWlMQTtFQXJkRjtJQUFBO0lBQUEsT0F1ZEMsc0JBQXFCbUgsT0FBckIsRUFBZ0RDLFNBQWhELEVBQW1FO01BQ2xFLElBQUksRUFBRSxZQUFZQyxnQkFBZ0IsQ0FBQy9xQixTQUEvQixDQUFKLEVBQStDO1FBQzlDO01BQ0E7O01BRUQ2cUIsT0FBTyxDQUFDRyxTQUFSLENBQWtCRixTQUFsQixXQUNRLFVBQUFoM0IsS0FBSyxFQUFJO1FBQ2ZELE9BQU8sQ0FBQ0MsS0FBUixDQUFjQSxLQUFkO01BQ0EsQ0FIRjtJQUlBO0VBaGVGO0lBQUE7SUFBQSxPQWtlQyw2QkFBNEJrMUIsVUFBNUIsRUFBc0RTLEtBQXRELEVBQStFO01BQzlFLEtBQUszRixhQUFMLENBQW1CZ0csa0JBQW5CLEdBQXdDLEtBQXhDO01BQ0FkLFVBQVUsQ0FBQ3pCLFFBQVgsR0FBc0IsS0FBdEI7TUFDQSxLQUFLNkMsZUFBTDtJQUNBO0VBdGVGO0lBQUE7SUFBQSxPQXdlQywyQkFBMEI7TUFDekIsSUFBSTdDLFFBQVEsR0FBRyxLQUFmOztNQUR5Qiw0Q0FHQSxLQUFLcEQsV0FITDtNQUFBOztNQUFBO1FBR3pCLHVEQUEyQztVQUFBLElBQWhDNkUsVUFBZ0M7O1VBQzFDLElBQUlBLFVBQVUsQ0FBQ3pCLFFBQVgsS0FBd0IsSUFBNUIsRUFBa0M7WUFDakNBLFFBQVEsR0FBRyxJQUFYO1lBQ0E7VUFDQTtRQUNEO01BUndCO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BVXpCLEtBQUt6RCxhQUFMLENBQW1CbUgsY0FBbkIsR0FBb0MxRCxRQUFwQztJQUNBO0VBbmZGO0lBQUE7SUFBQSxPQXFmQyx5QkFBd0J5QixVQUF4QixFQUFrRDtNQUNqRCxJQUFNM3BCLFNBQVMsR0FBRztRQUNqQjhvQixPQUFPLEVBQUUsTUFEUTtRQUVqQk0sSUFBSSxFQUFFLEtBQUs5RCxNQUZNO1FBR2pCc0UsS0FBSyxFQUFFLFdBSFU7UUFJakJKLE9BQU8sRUFBRSxLQUFLdkU7TUFKRyxDQUFsQjtNQU9BMEUsVUFBVSxDQUFDWixJQUFYLENBQWdCO1FBQUUxQixPQUFPLEVBQUVybkI7TUFBWCxDQUFoQjtJQUNBO0VBOWZGO0lBQUE7SUFBQSxPQWdnQkMsc0JBQXFCMnBCLFVBQXJCLEVBQStDckMsSUFBL0MsRUFBMkR1RSxRQUEzRCxFQUE4RTtNQUFBOztNQUM3RWxDLFVBQVUsQ0FBQ00sWUFBWCxDQUF3QjtRQUN2QjNDLElBQUksRUFBRUEsSUFEaUI7UUFFdkIzWSxLQUFLLEVBQUU7VUFBRW1kLFNBQVMsRUFBRSxLQUFiO1VBQW9CQyxTQUFTLEVBQUUsS0FBL0I7VUFBc0NYLElBQUksRUFBRVM7UUFBNUMsQ0FGZ0I7UUFFd0M7UUFDL0QzRixPQUFPLEVBQUUsaUJBQUNvQixJQUFELEVBQWdCO1VBQ3hCLElBQU0vRCxJQUFJLEdBQUc7WUFDWnVGLE9BQU8sRUFBRSxPQURHO1lBRVpNLElBQUksRUFBRSxNQUFJLENBQUM5RDtVQUZDLENBQWI7VUFLQXFFLFVBQVUsQ0FBQ1osSUFBWCxDQUFnQjtZQUFFMUIsT0FBTyxFQUFFOUQsSUFBWDtZQUFpQitELElBQUksRUFBRUE7VUFBdkIsQ0FBaEI7UUFDQSxDQVZzQjtRQVd2Qjd5QixLQUFLLEVBQUUsZUFBQ0EsTUFBRCxFQUFnQjtVQUN0QjR2QixzREFBQSxDQUFZLGdCQUFaLEVBQThCNXZCLE1BQTlCO1FBQ0E7TUFic0IsQ0FBeEI7SUFlQTtFQWhoQkY7SUFBQTtJQUFBLE9Ba2hCQyx3QkFBdUJrMUIsVUFBdkIsRUFBaUR4RSxpQkFBakQsRUFBeUU7TUFDeEUsSUFBTTZHLFFBQVEsR0FBRzdHLGlCQUFpQixDQUFDOEcsYUFBbEIsSUFBbUMsSUFBcEQsQ0FEd0UsQ0FHeEU7O01BQ0F0QyxVQUFVLENBQUN1QyxXQUFYLENBQXVCO1FBQ3RCO1FBQ0F2ZCxLQUFLLEVBQUU7VUFDTndkLFNBQVMsRUFBRSxLQURMO1VBRU5DLFNBQVMsRUFBRSxLQUZMO1VBR05OLFNBQVMsRUFBRSxJQUhMO1VBSU5DLFNBQVMsRUFBRUMsUUFKTDtVQUtOdkUsS0FBSyxFQUFFO1lBQ040RSxRQUFRLEVBQUVsSCxpQkFBaUIsQ0FBQ21ILGFBRHRCO1lBRU5DLGdCQUFnQixFQUFFO1VBRlosQ0FMRDtVQVNON0UsS0FBSyxFQUFFO1lBQ04yRSxRQUFRLEVBQUVsSCxpQkFBaUIsQ0FBQzhHLGFBRHRCO1lBRU50bEIsS0FBSyxFQUFFLElBRkQ7WUFHTkMsTUFBTSxFQUFFO1VBSEYsQ0FURDtVQWNONGxCLGFBQWEsRUFBRSxJQWRUO1VBZU5DLGFBQWEsRUFBRTtRQWZULENBRmU7UUFtQnRCdkcsT0FBTyxFQUFFLGlCQUFDb0IsSUFBRCxFQUFnQjtVQUN4QmpELHNEQUFBLENBQVksb0JBQVosRUFBa0NpRCxJQUFsQztVQUVBLElBQUk1VSxPQUFPLEdBQUc7WUFDYm9XLE9BQU8sRUFBRSxXQURJO1lBRWJyQixLQUFLLEVBQUUsSUFGTTtZQUdiQyxLQUFLLEVBQUVzRTtVQUhNLENBQWQsQ0FId0IsQ0FTeEI7VUFDQTtVQUNBO1VBQ0E7O1VBRUFyQyxVQUFVLENBQUNaLElBQVgsQ0FBZ0I7WUFBRTFCLE9BQU8sRUFBRTNVLE9BQVg7WUFBb0I0VSxJQUFJLEVBQUVBO1VBQTFCLENBQWhCO1FBQ0EsQ0FsQ3FCO1FBbUN0Qjd5QixLQUFLLEVBQUUsZUFBVUEsT0FBVixFQUFzQjtVQUM1QjR2QixzREFBQSxDQUFZLGVBQVosRUFBNkI1dkIsT0FBN0I7VUFFQUQsT0FBTyxDQUFDQyxLQUFSLENBQWMsZUFBZCxFQUErQkEsT0FBL0I7VUFFQTB3QixpQkFBaUIsQ0FBQzhHLGFBQWxCLEdBQWtDLElBQWxDO1VBRUEsS0FBSzFFLGNBQUwsQ0FBb0JvQyxVQUFwQixFQUFnQ3hFLGlCQUFoQztRQUNBO01BM0NxQixDQUF2QjtJQTZDQTtFQW5rQkY7SUFBQTtJQUFBLE9BcWtCQyx3QkFBdUJuVixFQUF2QixFQUFtQztNQUNsQyxPQUFPbG1CLFFBQVEsQ0FBQ2srQixjQUFULENBQXdCaFksRUFBeEIsQ0FBUDtJQUNBO0VBdmtCRjs7RUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBR08sSUFBTTRjLGVBQWI7RUFTQyx5QkFBWW5JLGFBQVosRUFBMEM7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDekMsS0FBS0EsYUFBTCxHQUFxQkEsYUFBckI7SUFDQSxLQUFLb0ksU0FBTCxHQUFpQixJQUFJajRCLEdBQUosRUFBakI7RUFDQTs7RUFaRjtJQUFBO0lBQUEsT0FjQyxvQkFBV3N3QixVQUFYLEVBQW1DNEgsV0FBbkMsRUFBNkRELFNBQTdELEVBQXlGRSxTQUF6RixFQUE0RztNQUFBOztNQUMzR0YsU0FBUyxDQUFDRyxPQUFWLENBQWtCLFVBQUNDLEdBQUQsRUFBd0I7UUFDekMsS0FBSSxDQUFDQyxXQUFMLENBQWlCRCxHQUFqQjtNQUNBLENBRkQ7TUFJQSxJQUFNRSxXQUFXLEdBQUdySCxNQUFNLENBQUNpSCxTQUFELENBQTFCO01BRUEsSUFBTUssU0FBUyxHQUFHbEksVUFBVSxDQUFDbUksWUFBWCxFQUFsQjtNQUVBLElBQU1DLFdBQVcsR0FBRyxJQUFJNWUsNERBQUosQ0FBZ0J3VyxVQUFVLENBQUNvRixlQUFYLEVBQWhCLENBQXBCO01BQ0FnRCxXQUFXLENBQUN6dUIsS0FBWixHQUFvQixLQUFLNGxCLGFBQUwsQ0FBbUI4SSxRQUFuQixFQUFwQjtNQUNBRCxXQUFXLENBQUNFLGVBQVosQ0FBNEIsWUFBTTtRQUNqQ3RJLFVBQVUsQ0FBQ3VJLFdBQVgsQ0FBdUJ4dkIsSUFBSSxDQUFDeXZCLEdBQUwsS0FBYVAsV0FBcEM7TUFDQSxDQUZEO01BSUFqSSxVQUFVLENBQUN5SSxTQUFYLENBQXFCLFVBQUNDLElBQUQsRUFBbUI7UUFDdkNOLFdBQVcsQ0FBQ3p1QixLQUFaLEdBQW9CK3VCLElBQXBCO01BQ0EsQ0FGRDtNQUdBMUksVUFBVSxDQUFDMkksV0FBWCxDQUF1QixVQUFDbDRCLEtBQUQsRUFBbUI7UUFDekMyM0IsV0FBVyxDQUFDenVCLEtBQVosR0FBb0IsS0FBcEI7UUFDQXl1QixXQUFXLENBQUMxdUIsTUFBWixHQUFxQmpKLEtBQXJCO01BQ0EsQ0FIRCxFQWxCMkcsQ0F1QjNHOztNQUNBLElBQU1tNEIsY0FBYyxHQUFHaEIsV0FBVyxDQUFDaUIsY0FBbkM7TUFDQSxJQUFJQyxTQUF3QixHQUFHLElBQS9COztNQXpCMkcsMkNBMkJ6Rm5CLFNBM0J5RjtNQUFBOztNQUFBO1FBMkIzRyxvREFBNkI7VUFBQSxJQUFsQkksR0FBa0I7O1VBQzVCLElBQUlBLEdBQUcsQ0FBQ2dCLGFBQUosTUFBdUJILGNBQWMsQ0FBQzd5QixVQUExQyxFQUFzRDtZQUNyRCt5QixTQUFTLEdBQUdmLEdBQVo7WUFDQTtVQUNBO1FBQ0Q7TUFoQzBHO1FBQUE7TUFBQTtRQUFBO01BQUE7O01Ba0MzRyxJQUFNMWpDLGdCQUFnQixHQUFHLElBQUk4MEIsdUVBQUosRUFBekI7TUFDQTkwQixnQkFBZ0IsQ0FBQzJrQyxzQkFBakIsQ0FBd0NkLFNBQVMsQ0FBQ2Usc0JBQVYsRUFBeEM7TUFDQTVrQyxnQkFBZ0IsQ0FBQzZrQyxxQkFBakIsQ0FBdUNoQixTQUFTLENBQUNpQixxQkFBVixFQUF2QztNQUNBOWtDLGdCQUFnQixDQUFDK2tDLHdCQUFqQixDQUEwQ2xCLFNBQVMsQ0FBQ21CLHdCQUFWLEVBQTFDO01BQ0FobEMsZ0JBQWdCLENBQUNpbEMsbUJBQWpCLENBQXFDcEIsU0FBUyxDQUFDcUIsbUJBQVYsRUFBckM7TUFFQSxJQUFNeGxDLFFBQVEsR0FBRyxJQUFJSyx5RUFBSixDQUF5QkMsZ0JBQXpCLENBQWpCO01BQ0FOLFFBQVEsQ0FBQ2tSLFdBQVQsQ0FBcUI2ekIsU0FBckI7TUFDQS9rQyxRQUFRLENBQUNnRSxhQUFULENBQXVCNmdDLGNBQWMsQ0FBQ1ksVUFBZixDQUEwQjNrQyxVQUFqRDtNQUVBLEtBQUs0a0MsWUFBTCxHQUFvQixJQUFJNzBCLDRFQUFKLENBQXVCN1EsUUFBdkIsRUFBaUMsSUFBSTBqQyx3REFBSixDQUFjVyxXQUFkLENBQWpDLENBQXBCO01BQ0EsS0FBS3FCLFlBQUwsQ0FBa0JoakIsS0FBbEI7TUFFQSxLQUFLOFksYUFBTCxDQUFtQm1LLHVCQUFuQixDQUEyQzV1QixTQUEzQyxDQUFxRCxZQUFNO1FBQzFEa2xCLFVBQVUsQ0FBQy9rQixJQUFYO01BQ0EsQ0FGRDtJQUdBO0VBaEVGO0lBQUE7SUFBQSxPQWtFQyxtQkFBVW5SLE1BQVYsRUFBZ0M7TUFDL0IsS0FBSzIvQixZQUFMLENBQWtCRSxTQUFsQixDQUE0QjcvQixNQUE1QjtJQUNBO0VBcEVGO0lBQUE7SUFBQSxPQXNFQyxxQkFBWWxGLFFBQVosRUFBMkM7TUFDMUMsS0FBSytpQyxTQUFMLENBQWVoNEIsR0FBZixDQUFtQndFLE1BQU0sQ0FBQ3ZQLFFBQVEsQ0FBQ21rQyxhQUFULEVBQUQsQ0FBekIsRUFBcURua0MsUUFBckQ7SUFDQTtFQXhFRjtJQUFBO0lBQUEsT0EwRUMsd0JBQWV5TyxLQUFmLEVBQW9DO01BQ25DLEtBQUtzMEIsU0FBTCxXQUFzQnh6QixNQUFNLENBQUNkLEtBQUQsQ0FBNUI7SUFDQTtFQTVFRjtJQUFBO0lBQUEsT0E4RUMsd0JBQWVBLEtBQWYsRUFBb0M7TUFDbkMsSUFBTXpPLFFBQVEsR0FBRyxLQUFLK2lDLFNBQUwsQ0FBZXBvQixHQUFmLENBQW1CcEwsTUFBTSxDQUFDZCxLQUFELENBQXpCLENBQWpCOztNQUVBLElBQUl6TyxRQUFKLEVBQWM7UUFDYixLQUFLNmtDLFlBQUwsQ0FBa0J4MEIsV0FBbEIsQ0FBOEJyUSxRQUE5QjtNQUNBO0lBQ0Q7RUFwRkY7O0VBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1ZBO0FBRUE7QUFDQTs7SUFFTXNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBT0wsZUFBTWIsS0FBTixFQUF1QjJtQixPQUF2QixFQUFtRDtNQUNsRCxLQUFLQSxPQUFMLEdBQWVBLE9BQWY7TUFFQSxLQUFLdkIsS0FBTCxHQUFhLElBQUlxRixnRUFBSixDQUFlLEtBQUsxcEIsV0FBcEIsRUFBaUMsS0FBS0MsS0FBdEMsQ0FBYjtNQUNBLEtBQUtva0IsS0FBTCxDQUFXb2YsS0FBWCxDQUFpQnhrQyxLQUFqQjtNQUVBMm1CLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWE2a0MsU0FBYixDQUF1QixJQUFJcGYsMEVBQUosQ0FBbUIsQ0FBQyxLQUFLRSxLQUFOLENBQW5CLENBQXZCO0lBQ0E7OztXQUVELGlCQUFRcGxCLEtBQVIsRUFBK0I7TUFDOUIsS0FBS29sQixLQUFMLENBQVdua0IsV0FBWCxDQUF1QixLQUFLMGxCLE9BQUwsQ0FBYXZuQixRQUFwQztNQUNBLEtBQUtnbUIsS0FBTCxDQUFXcWYsS0FBWCxDQUFpQnprQyxLQUFqQjtJQUNBOzs7O0VBbkJzQnVrQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ0ZUemxDOzs7Ozs7O1dBS2QsaUJBQVFrQixLQUFSLEVBQTRCLENBQzNCO0lBQ0E7OztXQUVELGFBQUlBLEtBQUosRUFBd0IsQ0FDdkI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNmRjtBQUdBOztJQUdNa0I7Ozs7Ozs7Ozs7Ozs7V0FFTCxlQUFNbEIsS0FBTixFQUFvQjJtQixPQUFwQixFQUFnRDtNQUMvQyxJQUFNeEIsTUFBZSxHQUFHMU8sTUFBTSxDQUFDaXVCLE1BQVAsQ0FBYyxFQUFkLEVBQWtCL2QsT0FBTyxDQUFDbG5CLElBQVIsQ0FBYSsxQixTQUFiLEVBQWxCLENBQXhCO01BRUE3TyxPQUFPLENBQUNsbkIsSUFBUixDQUFhNmtDLFNBQWIsQ0FBdUIsSUFBSS9lLGdGQUFKLENBQXNCSixNQUF0QixDQUF2QjtJQUNBOzs7O0VBTjRCcm1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRjlCOztJQUVNdUM7Ozs7Ozs7Ozs7Ozs7V0FTTCxlQUFNckIsS0FBTixFQUF1QjJtQixPQUF2QixFQUFtRDtNQUNsRCxLQUFLZ2UsV0FBTCxHQUFtQjNrQyxLQUFLLENBQUNFLEtBQU4sRUFBbkI7TUFDQSxLQUFLeW1CLE9BQUwsR0FBZUEsT0FBZjtNQUVBLEtBQUtpZSxpQkFBTDs7TUFFQSxJQUFJLEtBQUtDLGlCQUFMLEVBQUosRUFBOEI7UUFDN0IsSUFBSSxLQUFLQyxXQUFMLENBQWlCOWtDLEtBQWpCLENBQUosRUFBNkI7VUFDNUIsSUFBTStrQyxNQUFNLEdBQUcsSUFBSTE3QixLQUFKLEVBQWY7O1VBRDRCLDJDQUdWLEtBQUsyN0IsY0FISztVQUFBOztVQUFBO1lBRzVCLG9EQUF1QztjQUFBLElBQTlCNWYsS0FBOEI7Y0FDdEMsSUFBTTZmLFdBQVcsR0FBRzdmLEtBQUssQ0FBQ2xsQixLQUFOLEVBQXBCO2NBRUE2a0MsTUFBTSxDQUFDeDdCLElBQVAsQ0FBWTA3QixXQUFaO1lBQ0E7VUFQMkI7WUFBQTtVQUFBO1lBQUE7VUFBQTs7VUFTNUJ0ZSxPQUFPLENBQUNsbkIsSUFBUixDQUFhNmtDLFNBQWIsQ0FBdUIsSUFBSXBmLDBFQUFKLENBQW1CNmYsTUFBbkIsQ0FBdkI7UUFDQSxDQVZELE1BV0s7VUFDSixLQUFLRyxlQUFMO1FBQ0E7TUFDRCxDQWZELE1BZ0JLO1FBQ0osSUFBTUMsYUFBYSxHQUFHLEtBQUtDLGdCQUFMLENBQXNCcGxDLEtBQXRCLENBQXRCOztRQUVBLElBQUltbEMsYUFBYSxJQUFJLElBQXJCLEVBQTJCO1VBQzFCLElBQU1GLFlBQVcsR0FBR0UsYUFBYSxDQUFDamxDLEtBQWQsRUFBcEI7O1VBRUF5bUIsT0FBTyxDQUFDbG5CLElBQVIsQ0FBYTZrQyxTQUFiLENBQXVCLElBQUlwZiwwRUFBSixDQUFtQixDQUFDK2YsWUFBRCxDQUFuQixDQUF2QjtVQUVBLEtBQUtJLFlBQUwsQ0FBa0JKLFlBQWxCO1FBQ0E7TUFDRDtJQUNEOzs7V0FFRCxpQkFBUWpsQyxLQUFSLEVBQStCO01BQzlCLEtBQUsya0MsV0FBTCxDQUFpQjlrQixRQUFqQixDQUEwQjdmLEtBQTFCO01BRUEsS0FBS3NsQyxVQUFMLENBQWdCdGxDLEtBQWhCLEVBQXVCLEtBQUsya0MsV0FBNUI7TUFFQSxLQUFLQSxXQUFMLEdBQW1CM2tDLEtBQUssQ0FBQ0UsS0FBTixFQUFuQjtJQUNBOzs7V0FFRCxhQUFJRixLQUFKLEVBQTJCLENBQzFCO0lBQ0E7OztXQUVELDBCQUF5QkEsS0FBekIsRUFBaUQ7TUFDaEQsSUFBSW9sQixLQUFLLEdBQUcsSUFBWjs7TUFEZ0QsNENBR2xDLEtBQUt1QixPQUFMLENBQWFsbkIsSUFBYixDQUFrQisxQixTQUFsQixFQUhrQztNQUFBOztNQUFBO1FBR2hELHVEQUE2QztVQUFBLElBQXBDelUsQ0FBb0M7O1VBQzVDLElBQUlBLENBQUMsQ0FBQ3BPLFFBQUYsQ0FBVzNTLEtBQVgsQ0FBSixFQUF1QjtZQUN0Qm9sQixLQUFLLEdBQUdyRSxDQUFSO1VBQ0E7UUFDRDtNQVArQztRQUFBO01BQUE7UUFBQTtNQUFBOztNQVFoRCxPQUFPcUUsS0FBUDtJQUNBOzs7V0FFRCw2QkFBa0M7TUFDakMsS0FBSzRmLGNBQUwsR0FBc0IsSUFBSTM3QixLQUFKLEVBQXRCOztNQURpQyw0Q0FHZixLQUFLc2QsT0FBTCxDQUFhbG5CLElBQWIsQ0FBa0IrMUIsU0FBbEIsRUFIZTtNQUFBOztNQUFBO1FBR2pDLHVEQUFpRDtVQUFBLElBQXhDcFEsS0FBd0M7O1VBQ2hELElBQUlBLEtBQUssQ0FBQ3VGLFVBQU4sRUFBSixFQUF3QjtZQUN2QixLQUFLcWEsY0FBTCxDQUFvQno3QixJQUFwQixDQUF5QjZiLEtBQXpCO1VBQ0E7UUFDRDtNQVBnQztRQUFBO01BQUE7UUFBQTtNQUFBO0lBUWpDOzs7V0FFRCxvQkFBbUJwbEIsS0FBbkIsRUFBb0M0ZixLQUFwQyxFQUEyRDtNQUMxRCxJQUFJLENBQUMsS0FBS2lsQixpQkFBTCxFQUFMLEVBQStCO1FBQzlCO01BQ0E7O01BRUQsS0FBS2xlLE9BQUwsQ0FBYTRlLGVBQWI7O01BTDBELDRDQU94QyxLQUFLUCxjQVBtQztNQUFBOztNQUFBO1FBTzFELHVEQUF1QztVQUFBLElBQTlCNWYsS0FBOEI7VUFDdENBLEtBQUssQ0FBQzJHLFdBQU4sQ0FBa0JuTSxLQUFsQjtRQUNBO01BVHlEO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BVzFELEtBQUsrRyxPQUFMLENBQWE2ZSxhQUFiO0lBQ0E7OztXQUVELDZCQUFxQztNQUNwQyxPQUFPLEtBQUtSLGNBQUwsQ0FBb0J4Z0MsTUFBcEIsSUFBOEIsQ0FBckM7SUFDQTs7O1dBRUQsc0JBQXFCNGdCLEtBQXJCLEVBQXlDO01BQ3hDQSxLQUFLLENBQUNsUyxXQUFOLENBQWtCLElBQWxCO01BRUEsS0FBSzh4QixjQUFMLENBQW9CejdCLElBQXBCLENBQXlCNmIsS0FBekI7SUFDQTs7O1dBRUQsMkJBQWdDO01BQy9CLEtBQUt1QixPQUFMLENBQWE0ZSxlQUFiOztNQUQrQiw0Q0FHYixLQUFLUCxjQUhRO01BQUE7O01BQUE7UUFHL0IsdURBQXVDO1VBQUEsSUFBOUI1ZixLQUE4QjtVQUN0Q0EsS0FBSyxDQUFDbFMsV0FBTixDQUFrQixLQUFsQjtRQUNBO01BTDhCO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BTy9CLEtBQUs4eEIsY0FBTCxDQUFvQnhnQyxNQUFwQixHQUE2QixDQUE3QjtNQUVBLEtBQUttaUIsT0FBTCxDQUFhNmUsYUFBYjtJQUNBOzs7V0FFRCxxQkFBb0J4bEMsS0FBcEIsRUFBOEM7TUFBQSw0Q0FDM0IsS0FBS2dsQyxjQURzQjtNQUFBOztNQUFBO1FBQzdDLHVEQUF1QztVQUFBLElBQTlCNWYsS0FBOEI7O1VBQ3RDLElBQUlBLEtBQUssQ0FBQ3pTLFFBQU4sQ0FBZTNTLEtBQWYsQ0FBSixFQUEyQjtZQUMxQixPQUFPLElBQVA7VUFDQTtRQUNEO01BTDRDO1FBQUE7TUFBQTtRQUFBO01BQUE7O01BTzdDLE9BQU8sS0FBUDtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVIRjs7SUFFTW1QO0VBS0wseUJBQVlwTyxXQUFaLEVBQWlDO0lBQUE7O0lBQUE7O0lBQ2hDLEtBQUtBLFdBQUwsR0FBbUJBLFdBQW5CO0VBQ0E7Ozs7V0FFRCxlQUFNZixLQUFOLEVBQXVCMm1CLE9BQXZCLEVBQW1EO01BQUEsMkNBQzlCQSxPQUFPLENBQUNsbkIsSUFBUixDQUFhKzFCLFNBQWIsRUFEOEI7TUFBQTs7TUFBQTtRQUNsRCxvREFBOEM7VUFBQSxJQUFuQ3BRLEtBQW1DOztVQUM3QyxJQUFJQSxLQUFLLENBQUNuakIsTUFBTixLQUFpQixLQUFLbEIsV0FBMUIsRUFBdUM7WUFDdEM0bEIsT0FBTyxDQUFDbG5CLElBQVIsQ0FBYTZrQyxTQUFiLENBQXVCLElBQUkvZSxnRkFBSixDQUFzQixJQUFJbGMsS0FBSixDQUFVK2IsS0FBVixDQUF0QixDQUF2QjtZQUNBO1VBQ0E7UUFDRDtNQU5pRDtRQUFBO01BQUE7UUFBQTtNQUFBO0lBT2xEOzs7V0FFRCxpQkFBUXBsQixLQUFSLEVBQStCLENBQzlCO0lBQ0E7OztXQUVELGFBQUlBLEtBQUosRUFBMkIsQ0FDMUI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVCRjtBQUVBO0FBQ0E7O0lBRU11Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztXQU9MLGVBQU12QixLQUFOLEVBQXVCMm1CLE9BQXZCLEVBQW1EO01BQ2xELEtBQUtBLE9BQUwsR0FBZUEsT0FBZjtNQUVBLEtBQUt2QixLQUFMLEdBQWEsSUFBSXdGLG9FQUFKLENBQWlCLEtBQUs3cEIsV0FBdEIsRUFBbUMsS0FBS0MsS0FBeEMsQ0FBYjtNQUNBLEtBQUtva0IsS0FBTCxDQUFXb2YsS0FBWCxDQUFpQnhrQyxLQUFqQjtNQUVBMm1CLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWE2a0MsU0FBYixDQUF1QixJQUFJcGYsMEVBQUosQ0FBbUIsQ0FBQyxLQUFLRSxLQUFOLENBQW5CLENBQXZCO0lBQ0E7OztXQUVELGlCQUFRcGxCLEtBQVIsRUFBK0I7TUFDOUIsS0FBS29sQixLQUFMLENBQVdua0IsV0FBWCxDQUF1QixLQUFLMGxCLE9BQUwsQ0FBYXZuQixRQUFwQztNQUNBLEtBQUtnbUIsS0FBTCxDQUFXcWYsS0FBWCxDQUFpQnprQyxLQUFqQjtJQUNBOzs7O0VBbkJ3QnVrQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0wxQjs7SUFJTTlpQzs7Ozs7RUFLTCx3QkFBWUUsSUFBWixFQUE2QjtJQUFBOztJQUFBOztJQUM1Qjs7SUFENEI7O0lBRzVCLE1BQUtBLElBQUwsR0FBWUEsSUFBWjtJQUg0QjtFQUk1Qjs7OztXQUVELGVBQU0zQixLQUFOLEVBQW9CMm1CLE9BQXBCLEVBQWdEO01BQy9DQSxPQUFPLENBQUNsbkIsSUFBUixDQUFhdW5CLGFBQWIsR0FBNkJ5ZSxXQUE3QixDQUF5QyxLQUFLOWpDLElBQTlDO0lBQ0E7Ozs7RUFiMkI3Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSjdCO0FBRUE7QUFDQTs7SUFFTThDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztXQUtMLGVBQU01QixLQUFOLEVBQXVCMm1CLE9BQXZCLEVBQW1EO01BQ2xELEtBQUt2QixLQUFMLEdBQWEsSUFBSTJGLGtFQUFKLENBQWdCLEtBQUtocUIsV0FBckIsRUFBa0MsS0FBS0MsS0FBdkMsQ0FBYjtNQUNBLEtBQUtva0IsS0FBTCxDQUFXMEcsUUFBWCxDQUFvQjlyQixLQUFwQjtNQUVBMm1CLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWE2a0MsU0FBYixDQUF1QixJQUFJcGYsMEVBQUosQ0FBbUIsQ0FBQyxLQUFLRSxLQUFOLENBQW5CLENBQXZCO0lBQ0E7OztXQUVELGlCQUFRcGxCLEtBQVIsRUFBK0I7TUFDOUIsS0FBS29sQixLQUFMLENBQVcwRyxRQUFYLENBQW9COXJCLEtBQXBCO0lBQ0E7Ozs7RUFkNEJ1a0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTjlCO0FBS0E7O0lBRU14aUM7Ozs7O0VBV0wsdUJBQVlFLE1BQVosRUFBNEJDLElBQTVCLEVBQXdDQyxTQUF4QyxFQUEwREMsY0FBMUQsRUFBZ0c7SUFBQTs7SUFBQTs7SUFDL0Y7O0lBRCtGOztJQUFBOztJQUFBOztJQUFBOztJQUcvRixNQUFLSCxNQUFMLEdBQWNBLE1BQWQ7SUFDQSxNQUFLQyxJQUFMLEdBQVlBLElBQVo7SUFDQSxNQUFLQyxTQUFMLEdBQWlCQSxTQUFqQjtJQUNBLE1BQUtDLGNBQUwsR0FBc0JBLGNBQXRCO0lBTitGO0VBTy9GOzs7O1dBRUQsZUFBTXBDLEtBQU4sRUFBb0IybUIsT0FBcEIsRUFBZ0Q7TUFDL0MsSUFBTXhCLE1BQU0sR0FBR3dCLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWErMUIsU0FBYixFQUFmOztNQUQrQywyQ0FHN0JyUSxNQUg2QjtNQUFBOztNQUFBO1FBRy9DLG9EQUEwQjtVQUFBLElBQWpCQyxLQUFpQjs7VUFDekIsSUFBSUEsS0FBSyxZQUFZaUcsZ0VBQWpCLElBQStCakcsS0FBSyxDQUFDbmpCLE1BQU4sS0FBaUIsS0FBS0EsTUFBekQsRUFBaUU7WUFDaEVtakIsS0FBSyxDQUFDbUcsT0FBTixDQUFjLEtBQUtycEIsSUFBbkI7WUFDQWtqQixLQUFLLENBQUNvRyxZQUFOLENBQW1CLEtBQUtycEIsU0FBeEI7WUFDQWlqQixLQUFLLENBQUNzRyxpQkFBTixDQUF3QixLQUFLdHBCLGNBQTdCO1lBQ0E7VUFDQTtRQUNEO01BVjhDO1FBQUE7TUFBQTtRQUFBO01BQUE7SUFXL0M7Ozs7RUEvQjBCdEQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0o1Qjs7SUFFTXVEO0VBU0wsbUJBQVlKLE1BQVosRUFBNEI7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDM0IsS0FBS0EsTUFBTCxHQUFjQSxNQUFkO0VBQ0E7Ozs7V0FFRCxlQUFNakMsS0FBTixFQUF1QjJtQixPQUF2QixFQUFtRDtNQUNsRCxLQUFLQSxPQUFMLEdBQWVBLE9BQWY7TUFFQSxLQUFLdkIsS0FBTCxHQUFhLElBQUlpRyxnRUFBSixDQUFlLEtBQUtwcEIsTUFBcEIsQ0FBYjtJQUNBOzs7V0FFRCxpQkFBUWpDLEtBQVIsRUFBK0IsQ0FDOUI7SUFDQTs7O1dBRUQsYUFBSUEsS0FBSixFQUEyQjtNQUMxQixLQUFLb2xCLEtBQUwsQ0FBV2tHLFdBQVgsQ0FBdUJ0ckIsS0FBdkI7TUFFQSxLQUFLMm1CLE9BQUwsQ0FBYWxuQixJQUFiLENBQWtCNGxCLFFBQWxCLENBQTJCLEtBQUtELEtBQWhDO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQkY7QUFFQTtBQUNBOztJQUVNN2lCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBT0wsZUFBTXZDLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS0EsT0FBTCxHQUFlQSxPQUFmO01BRUEsS0FBS3ZCLEtBQUwsR0FBYSxJQUFJd0csOERBQUosQ0FBYyxLQUFLN3FCLFdBQW5CLEVBQWdDLEtBQUtDLEtBQXJDLENBQWI7TUFDQSxLQUFLb2tCLEtBQUwsQ0FBV29mLEtBQVgsQ0FBaUJ4a0MsS0FBakI7TUFFQTJtQixPQUFPLENBQUNsbkIsSUFBUixDQUFhNmtDLFNBQWIsQ0FBdUIsSUFBSXBmLDBFQUFKLENBQW1CLENBQUMsS0FBS0UsS0FBTixDQUFuQixDQUF2QjtJQUNBOzs7V0FFRCxpQkFBUXBsQixLQUFSLEVBQStCO01BQzlCLEtBQUtvbEIsS0FBTCxDQUFXbmtCLFdBQVgsQ0FBdUIsS0FBSzBsQixPQUFMLENBQWF2bkIsUUFBcEM7TUFDQSxLQUFLZ21CLEtBQUwsQ0FBV3FmLEtBQVgsQ0FBaUJ6a0MsS0FBakI7SUFDQTs7OztFQW5CcUJ1a0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ0RSQTs7Ozs7Ozs7Ozs7V0FPZCxlQUFNdmtDLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQsQ0FFbEQ7OztXQUVELGlCQUFRM21CLEtBQVIsRUFBK0IsQ0FFOUI7OztXQUVELGFBQUlBLEtBQUosRUFBMkIsQ0FFMUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuQkY7O0lBRU0yQzs7Ozs7Ozs7Ozs7V0FPTCxlQUFNM0MsS0FBTixFQUFvQjJtQixPQUFwQixFQUFnRDtNQUMvQyxLQUFLQSxPQUFMLEdBQWVBLE9BQWY7TUFDQSxLQUFLK2UsU0FBTCxHQUFpQjFsQyxLQUFqQjtJQUNBOzs7V0FFRCxpQkFBUUEsS0FBUixFQUE0QjtNQUMzQixJQUFNc21CLFVBQVUsR0FBRyxLQUFLSyxPQUFMLENBQWFsbkIsSUFBYixDQUFrQnVuQixhQUFsQixFQUFuQjtNQUNBLElBQU1xUSxRQUFRLEdBQUcvUSxVQUFVLENBQUNXLE1BQTVCO01BRUEsSUFBTXJlLENBQUMsR0FBR3l1QixRQUFRLENBQUN6dUIsQ0FBVCxJQUFjLEtBQUs4OEIsU0FBTCxDQUFlOThCLENBQWYsR0FBbUI1SSxLQUFLLENBQUM0SSxDQUF2QyxDQUFWO01BQ0EsSUFBTUMsQ0FBQyxHQUFHd3VCLFFBQVEsQ0FBQ3h1QixDQUFULElBQWMsS0FBSzY4QixTQUFMLENBQWU3OEIsQ0FBZixHQUFtQjdJLEtBQUssQ0FBQzZJLENBQXZDLENBQVY7TUFFQXlkLFVBQVUsQ0FBQ21mLFdBQVgsQ0FBdUIsSUFBSWhpQywwREFBSixDQUFjbUYsQ0FBZCxFQUFpQkMsQ0FBakIsRUFBb0J3dUIsUUFBUSxDQUFDamIsS0FBN0IsRUFBb0NpYixRQUFRLENBQUNoYixNQUE3QyxDQUF2QjtNQUVBLEtBQUtxcEIsU0FBTCxHQUFpQjFsQyxLQUFqQjtJQUNBOzs7V0FFRCxhQUFJQSxLQUFKLEVBQXdCLENBQ3ZCO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5QkY7QUFFQTtBQUNBOztJQUVNK087Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBS0wsZUFBTS9PLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS3ZCLEtBQUwsR0FBYSxJQUFJeUcsNERBQUosQ0FBYSxLQUFLOXFCLFdBQWxCLEVBQStCLEtBQUtDLEtBQXBDLENBQWI7TUFDQSxLQUFLb2tCLEtBQUwsQ0FBVzBHLFFBQVgsQ0FBb0I5ckIsS0FBcEI7TUFFQTJtQixPQUFPLENBQUNsbkIsSUFBUixDQUFhNmtDLFNBQWIsQ0FBdUIsSUFBSXBmLDBFQUFKLENBQW1CLENBQUMsS0FBS0UsS0FBTixDQUFuQixDQUF2QjtJQUNBOzs7V0FFRCxpQkFBUXBsQixLQUFSLEVBQStCO01BQzlCLEtBQUtvbEIsS0FBTCxDQUFXMEcsUUFBWCxDQUFvQjlyQixLQUFwQjtJQUNBOzs7V0FFRCxhQUFJQSxLQUFKLEVBQTJCLENBQzFCO0lBQ0E7Ozs7RUFsQm9CdWtDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0x0QjtBQUdBOztJQUVNdjFCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBT0wsZUFBTWhQLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS2xuQixJQUFMLEdBQVlrbkIsT0FBTyxDQUFDbG5CLElBQXBCO01BRUEsS0FBSzJsQixLQUFMLEdBQWEsSUFBSTZHLG9FQUFKLENBQWlCLEtBQUtsckIsV0FBdEIsRUFBbUMsS0FBS0MsS0FBeEMsQ0FBYjtNQUNBLEtBQUtva0IsS0FBTCxDQUFXMEcsUUFBWCxDQUFvQjlyQixLQUFwQjtNQUVBLEtBQUtQLElBQUwsQ0FBVTRsQixRQUFWLENBQW1CLEtBQUtELEtBQXhCO0lBQ0E7OztXQUVELGlCQUFRcGxCLEtBQVIsRUFBK0I7TUFDOUIsS0FBS29sQixLQUFMLENBQVcwRyxRQUFYLENBQW9COXJCLEtBQXBCO0lBQ0E7OztXQUVELGFBQUlBLEtBQUosRUFBMkI7TUFDMUIsS0FBS1AsSUFBTCxDQUFVNmxCLFdBQVYsQ0FBc0IsS0FBS0YsS0FBM0I7SUFDQTs7OztFQXRCd0JtZjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTDFCO0FBRUE7QUFDQTs7SUFFTXQxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztXQU9MLGVBQU1qUCxLQUFOLEVBQXVCMm1CLE9BQXZCLEVBQW1EO01BQ2xELEtBQUtBLE9BQUwsR0FBZUEsT0FBZjtNQUVBLEtBQUt2QixLQUFMLEdBQWEsSUFBSThHLHdFQUFKLENBQW1CLEtBQUtuckIsV0FBeEIsRUFBcUMsS0FBS0MsS0FBMUMsQ0FBYjtNQUNBLEtBQUtva0IsS0FBTCxDQUFXb2YsS0FBWCxDQUFpQnhrQyxLQUFqQjtNQUVBMm1CLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWE2a0MsU0FBYixDQUF1QixJQUFJcGYsMEVBQUosQ0FBbUIsQ0FBQyxLQUFLRSxLQUFOLENBQW5CLENBQXZCO0lBQ0E7OztXQUVELGlCQUFRcGxCLEtBQVIsRUFBK0I7TUFDOUIsS0FBS29sQixLQUFMLENBQVdua0IsV0FBWCxDQUF1QixLQUFLMGxCLE9BQUwsQ0FBYXZuQixRQUFwQztNQUNBLEtBQUtnbUIsS0FBTCxDQUFXcWYsS0FBWCxDQUFpQnprQyxLQUFqQjtJQUNBOzs7O0VBbkIwQnVrQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTjVCOztJQUlNcjFCOzs7Ozs7Ozs7Ozs7O1dBRUwsZUFBTWxQLEtBQU4sRUFBb0IybUIsT0FBcEIsRUFBZ0Q7TUFDL0NBLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWF1bEIsSUFBYjtJQUNBOzs7O0VBSnFCbG1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQXZCO0lBR0s2bUM7O1dBQUFBO0VBQUFBLEtBQUFBO0VBQUFBLEtBQUFBO0dBQUFBLFNBQUFBOztJQUVDdjJCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBZUwsZUFBTXBQLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS2dlLFdBQUwsR0FBbUIza0MsS0FBSyxDQUFDRSxLQUFOLEVBQW5CO01BQ0EsS0FBS3ltQixPQUFMLEdBQWVBLE9BQWY7TUFDQSxLQUFLaWYsV0FBTCxHQUFtQixLQUFuQjtNQUVBLEtBQUt4Z0IsS0FBTCxHQUFhLElBQUlpSCxrRUFBSixFQUFiO01BRUEsS0FBSzFGLE9BQUwsQ0FBYWxuQixJQUFiLENBQWtCNGxCLFFBQWxCLENBQTJCLEtBQUtELEtBQWhDO01BRUEsS0FBS3dmLGlCQUFMOztNQUVBLElBQUksS0FBS0MsaUJBQUwsRUFBSixFQUE4QjtRQUM3QixJQUFJLEtBQUtDLFdBQUwsQ0FBaUI5a0MsS0FBakIsQ0FBSixFQUE2QjtVQUM1QixLQUFLNmxDLElBQUwsR0FBWUYsSUFBSSxDQUFDRyxJQUFqQjtRQUNBLENBRkQsTUFHSztVQUNKLEtBQUtuZixPQUFMLENBQWE0ZSxlQUFiO1VBQ0EsS0FBS0wsZUFBTDtVQUNBLEtBQUt2ZSxPQUFMLENBQWE2ZSxhQUFiO1VBRUEsS0FBS0ssSUFBTCxHQUFZRixJQUFJLENBQUNJLE1BQWpCO1FBQ0E7TUFDRCxDQVhELE1BWUs7UUFDSixLQUFLRixJQUFMLEdBQVlGLElBQUksQ0FBQ0ksTUFBakI7TUFDQTtJQUNEOzs7V0FFRCxpQkFBUS9sQyxLQUFSLEVBQStCO01BQzlCLElBQUksS0FBSzZsQyxJQUFMLElBQWFGLElBQUksQ0FBQ0ksTUFBdEIsRUFBOEI7UUFDN0IsSUFBSSxDQUFDLEtBQUtILFdBQVYsRUFBdUI7VUFDdEIsS0FBS3hnQixLQUFMLENBQVdvZixLQUFYLENBQWlCeGtDLEtBQWpCO1VBQ0EsS0FBSzRsQyxXQUFMLEdBQW1CLElBQW5CO1FBQ0E7O1FBRUQsS0FBS3hnQixLQUFMLENBQVcwRyxRQUFYLENBQW9COXJCLEtBQUssQ0FBQ0UsS0FBTixFQUFwQjtRQUNBLEtBQUtrbEIsS0FBTCxDQUFXcWYsS0FBWCxDQUFpQnprQyxLQUFqQjtRQUVBLEtBQUtnbUMsV0FBTCxDQUFpQixLQUFLNWdCLEtBQUwsQ0FBVzZCLE1BQTVCO01BQ0EsQ0FWRCxNQVdLLElBQUksS0FBSzRlLElBQUwsSUFBYUYsSUFBSSxDQUFDRyxJQUF0QixFQUE0QjtRQUNoQyxLQUFLbkIsV0FBTCxDQUFpQjlrQixRQUFqQixDQUEwQjdmLEtBQTFCO1FBRUEsS0FBS3NsQyxVQUFMLENBQWdCLEtBQUtYLFdBQXJCO1FBRUEsS0FBS0EsV0FBTCxHQUFtQjNrQyxLQUFLLENBQUNFLEtBQU4sRUFBbkI7TUFDQTtJQUNEOzs7V0FFRCxhQUFJRixLQUFKLEVBQTJCO01BQzFCLEtBQUsybUIsT0FBTCxDQUFhbG5CLElBQWIsQ0FBa0I2bEIsV0FBbEIsQ0FBOEIsS0FBS0YsS0FBbkM7TUFFQSxLQUFLd2dCLFdBQUwsR0FBbUIsS0FBbkI7SUFDQTs7O1dBRUQscUJBQVlqa0MsSUFBWixFQUFtQztNQUNsQyxLQUFLZ2xCLE9BQUwsQ0FBYTRlLGVBQWI7TUFFQSxLQUFLTCxlQUFMOztNQUhrQywyQ0FLaEIsS0FBS3ZlLE9BQUwsQ0FBYWxuQixJQUFiLENBQWtCKzFCLFNBQWxCLEVBTGdCO01BQUE7O01BQUE7UUFLbEMsb0RBQWlEO1VBQUEsSUFBeENwUSxLQUF3Qzs7VUFDaEQsSUFBSUEsS0FBSyxLQUFLLEtBQUtBLEtBQW5CLEVBQTBCO1lBQ3pCO1VBQ0E7O1VBQ0QsSUFBSUEsS0FBSyxDQUFDaEgsVUFBTixDQUFpQnpjLElBQWpCLENBQUosRUFBNEI7WUFDM0IsS0FBSzBqQyxZQUFMLENBQWtCamdCLEtBQWxCO1VBQ0E7UUFDRDtNQVppQztRQUFBO01BQUE7UUFBQTtNQUFBOztNQWNsQyxLQUFLdUIsT0FBTCxDQUFhNmUsYUFBYjtJQUNBOzs7V0FFRCxzQkFBcUJwZ0IsS0FBckIsRUFBeUM7TUFDeENBLEtBQUssQ0FBQ2xTLFdBQU4sQ0FBa0IsSUFBbEI7TUFFQSxLQUFLOHhCLGNBQUwsQ0FBb0J6N0IsSUFBcEIsQ0FBeUI2YixLQUF6QjtJQUNBOzs7V0FFRCw2QkFBa0M7TUFDakMsS0FBSzRmLGNBQUwsR0FBc0IsSUFBSTM3QixLQUFKLEVBQXRCOztNQURpQyw0Q0FHZixLQUFLc2QsT0FBTCxDQUFhbG5CLElBQWIsQ0FBa0IrMUIsU0FBbEIsRUFIZTtNQUFBOztNQUFBO1FBR2pDLHVEQUFpRDtVQUFBLElBQXhDcFEsS0FBd0M7O1VBQ2hELElBQUlBLEtBQUssQ0FBQ3VGLFVBQU4sRUFBSixFQUF3QjtZQUN2QixLQUFLcWEsY0FBTCxDQUFvQno3QixJQUFwQixDQUF5QjZiLEtBQXpCO1VBQ0E7UUFDRDtNQVBnQztRQUFBO01BQUE7UUFBQTtNQUFBO0lBUWpDOzs7V0FFRCw2QkFBcUM7TUFDcEMsT0FBTyxLQUFLNGYsY0FBTCxDQUFvQnhnQyxNQUFwQixJQUE4QixDQUFyQztJQUNBOzs7V0FFRCxxQkFBb0J4RSxLQUFwQixFQUE4QztNQUFBLDRDQUMzQixLQUFLZ2xDLGNBRHNCO01BQUE7O01BQUE7UUFDN0MsdURBQXVDO1VBQUEsSUFBOUI1ZixLQUE4Qjs7VUFDdEMsSUFBSUEsS0FBSyxDQUFDelMsUUFBTixDQUFlM1MsS0FBZixDQUFKLEVBQTJCO1lBQzFCLE9BQU8sSUFBUDtVQUNBO1FBQ0Q7TUFMNEM7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFPN0MsT0FBTyxLQUFQO0lBQ0E7OztXQUVELDJCQUFnQztNQUFBLDRDQUNiLEtBQUtnbEMsY0FEUTtNQUFBOztNQUFBO1FBQy9CLHVEQUF1QztVQUFBLElBQTlCNWYsS0FBOEI7VUFDdENBLEtBQUssQ0FBQ2xTLFdBQU4sQ0FBa0IsS0FBbEI7UUFDQTtNQUg4QjtRQUFBO01BQUE7UUFBQTtNQUFBOztNQUsvQixLQUFLOHhCLGNBQUwsQ0FBb0J4Z0MsTUFBcEIsR0FBNkIsQ0FBN0I7SUFDQTs7O1dBRUQsb0JBQW1Cb2IsS0FBbkIsRUFBMEM7TUFDekMsSUFBSSxDQUFDLEtBQUtpbEIsaUJBQUwsRUFBTCxFQUErQjtRQUM5QjtNQUNBOztNQUVELEtBQUtsZSxPQUFMLENBQWE0ZSxlQUFiOztNQUx5Qyw0Q0FPdkIsS0FBS1AsY0FQa0I7TUFBQTs7TUFBQTtRQU96Qyx1REFBdUM7VUFBQSxJQUE5QjVmLEtBQThCO1VBQ3RDQSxLQUFLLENBQUMyRyxXQUFOLENBQWtCbk0sS0FBbEI7UUFDQTtNQVR3QztRQUFBO01BQUE7UUFBQTtNQUFBOztNQVd6QyxLQUFLK0csT0FBTCxDQUFhNmUsYUFBYjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDN0lJbjJCOzs7Ozs7Ozs7Ozs7O1dBU0wsZUFBTXJQLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS2dlLFdBQUwsR0FBbUIza0MsS0FBSyxDQUFDRSxLQUFOLEVBQW5CO01BQ0EsS0FBS3ltQixPQUFMLEdBQWVBLE9BQWY7TUFFQSxLQUFLd2UsYUFBTCxHQUFxQixLQUFLQyxnQkFBTCxDQUFzQnBsQyxLQUF0QixDQUFyQjtNQUVBLEtBQUtrbEMsZUFBTDs7TUFFQSxJQUFJLEtBQUtDLGFBQUwsSUFBc0IsSUFBMUIsRUFBZ0M7UUFDL0IsS0FBS0EsYUFBTCxDQUFtQmp5QixXQUFuQixDQUErQixJQUEvQjtNQUNBO0lBQ0Q7OztXQUVELGlCQUFRbFQsS0FBUixFQUErQjtNQUM5QixJQUFJLEtBQUttbEMsYUFBTCxJQUFzQixJQUExQixFQUFnQztRQUMvQixLQUFLUixXQUFMLENBQWlCOWtCLFFBQWpCLENBQTBCN2YsS0FBMUI7UUFFQSxLQUFLMm1CLE9BQUwsQ0FBYTRlLGVBQWI7UUFDQSxLQUFLSixhQUFMLENBQW1CcFosV0FBbkIsQ0FBK0IsS0FBSzRZLFdBQXBDO1FBQ0EsS0FBS2hlLE9BQUwsQ0FBYTZlLGFBQWI7UUFFQSxLQUFLYixXQUFMLEdBQW1CM2tDLEtBQUssQ0FBQ0UsS0FBTixFQUFuQjtNQUNBO0lBQ0Q7OztXQUVELGFBQUlGLEtBQUosRUFBMkI7TUFDMUIsSUFBSSxLQUFLbWxDLGFBQUwsSUFBc0IsSUFBMUIsRUFBZ0M7UUFDL0IsS0FBS3hlLE9BQUwsQ0FBYTRlLGVBQWI7UUFDQSxLQUFLSixhQUFMLENBQW1CanlCLFdBQW5CLENBQStCLEtBQS9CO1FBQ0EsS0FBS3lULE9BQUwsQ0FBYTZlLGFBQWI7TUFDQTtJQUNEOzs7V0FFRCwwQkFBaUJ4bEMsS0FBakIsRUFBa0M7TUFDakMsSUFBSW9sQixLQUFLLEdBQUcsSUFBWjs7TUFEaUMsMkNBR25CLEtBQUt1QixPQUFMLENBQWFsbkIsSUFBYixDQUFrQisxQixTQUFsQixFQUhtQjtNQUFBOztNQUFBO1FBR2pDLG9EQUE2QztVQUFBLElBQXBDelUsQ0FBb0M7O1VBQzVDLElBQUlBLENBQUMsQ0FBQ3BPLFFBQUYsQ0FBVzNTLEtBQVgsQ0FBSixFQUF1QjtZQUN0Qm9sQixLQUFLLEdBQUdyRSxDQUFSO1VBQ0E7UUFDRDtNQVBnQztRQUFBO01BQUE7UUFBQTtNQUFBOztNQVFqQyxPQUFPcUUsS0FBUDtJQUNBOzs7V0FFRCwyQkFBd0I7TUFDdkIsS0FBS3VCLE9BQUwsQ0FBYTRlLGVBQWI7O01BRHVCLDRDQUdMLEtBQUs1ZSxPQUFMLENBQWFsbkIsSUFBYixDQUFrQisxQixTQUFsQixFQUhLO01BQUE7O01BQUE7UUFHdkIsdURBQWlEO1VBQUEsSUFBeENwUSxLQUF3Qzs7VUFDaEQsSUFBSUEsS0FBSyxDQUFDdUYsVUFBTixFQUFKLEVBQXdCO1lBQ3ZCdkYsS0FBSyxDQUFDbFMsV0FBTixDQUFrQixLQUFsQjtVQUNBO1FBQ0Q7TUFQc0I7UUFBQTtNQUFBO1FBQUE7TUFBQTs7TUFTdkIsS0FBS3lULE9BQUwsQ0FBYTZlLGFBQWI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEVGO0FBR0E7O0lBRU12MEI7Ozs7O0VBT0wsd0JBQVloUCxNQUFaLEVBQTRCZ0gsSUFBNUIsRUFBMEM7SUFBQTs7SUFBQTs7SUFDekM7O0lBRHlDOztJQUFBOztJQUd6QyxNQUFLaEgsTUFBTCxHQUFjQSxNQUFkO0lBQ0EsTUFBS2dILElBQUwsR0FBWUEsSUFBWjtJQUp5QztFQUt6Qzs7OztXQUVELGVBQU1qSixLQUFOLEVBQW9CMm1CLE9BQXBCLEVBQWdEO01BQy9DLElBQU14QixNQUFNLEdBQUd3QixPQUFPLENBQUNsbkIsSUFBUixDQUFhKzFCLFNBQWIsRUFBZjs7TUFEK0MsMkNBRzdCclEsTUFINkI7TUFBQTs7TUFBQTtRQUcvQyxvREFBMEI7VUFBQSxJQUFqQkMsS0FBaUI7O1VBQ3pCLElBQUlBLEtBQUssWUFBWWdHLDRFQUFqQixJQUFxQ2hHLEtBQUssQ0FBQ25qQixNQUFOLEtBQWlCLEtBQUtBLE1BQS9ELEVBQXVFO1lBQ3RFbWpCLEtBQUssQ0FBQzZnQixPQUFOLENBQWMsS0FBS2g5QixJQUFuQjtZQUNBO1VBQ0E7UUFDRDtNQVI4QztRQUFBO01BQUE7UUFBQTtNQUFBO0lBUy9DOzs7O0VBdkIyQm5LOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0w3QjtBQUdBOztJQUlNb1M7Ozs7O0VBV0wsc0JBQVlqUCxNQUFaLEVBQTRCQyxJQUE1QixFQUF3Q0MsU0FBeEMsRUFBMERDLGNBQTFELEVBQWdHO0lBQUE7O0lBQUE7O0lBQy9GOztJQUQrRjs7SUFBQTs7SUFBQTs7SUFBQTs7SUFHL0YsTUFBS0gsTUFBTCxHQUFjQSxNQUFkO0lBQ0EsTUFBS0MsSUFBTCxHQUFZQSxJQUFaO0lBQ0EsTUFBS0MsU0FBTCxHQUFpQkEsU0FBakI7SUFDQSxNQUFLQyxjQUFMLEdBQXNCQSxjQUF0QjtJQU4rRjtFQU8vRjs7OztXQUVELGVBQU1wQyxLQUFOLEVBQW9CMm1CLE9BQXBCLEVBQWdEO01BQy9DLElBQU14QixNQUFNLEdBQUd3QixPQUFPLENBQUNsbkIsSUFBUixDQUFhKzFCLFNBQWIsRUFBZjs7TUFEK0MsMkNBRzdCclEsTUFINkI7TUFBQTs7TUFBQTtRQUcvQyxvREFBMEI7VUFBQSxJQUFqQkMsS0FBaUI7O1VBQ3pCLElBQUlBLEtBQUssWUFBWW1JLDhEQUFqQixJQUE4Qm5JLEtBQUssQ0FBQ25qQixNQUFOLEtBQWlCLEtBQUtBLE1BQXhELEVBQWdFO1lBQy9EbWpCLEtBQUssQ0FBQ21HLE9BQU4sQ0FBYyxLQUFLcnBCLElBQW5CO1lBQ0FrakIsS0FBSyxDQUFDb0csWUFBTixDQUFtQixLQUFLcnBCLFNBQXhCO1lBQ0FpakIsS0FBSyxDQUFDc0csaUJBQU4sQ0FBd0IsS0FBS3RwQixjQUE3QjtZQUNBO1VBQ0E7UUFDRDtNQVY4QztRQUFBO01BQUE7UUFBQTtNQUFBO0lBVy9DOzs7O0VBL0J5QnREOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0gzQjtBQUVBOztJQUVNcVM7RUFTTCwyQkFBWXBRLFdBQVosRUFBaUMwSCxLQUFqQyxFQUErQ1csVUFBL0MsRUFBd0U7SUFBQTs7SUFBQTs7SUFBQTs7SUFBQTs7SUFDdkUsS0FBS3JJLFdBQUwsR0FBbUJBLFdBQW5CO0lBQ0EsS0FBSzBILEtBQUwsR0FBYUEsS0FBYjtJQUNBLEtBQUtXLFVBQUwsR0FBa0JBLFVBQWxCO0VBQ0E7Ozs7V0FFRCxlQUFNcEosS0FBTixFQUFvQjJtQixPQUFwQixFQUFnRDtNQUMvQyxJQUFJLEtBQUt2ZCxVQUFMLENBQWdCNUUsTUFBaEIsR0FBeUIsQ0FBN0IsRUFBZ0M7UUFDL0I7TUFDQTs7TUFFRCxJQUFJMGhDLFdBQStCLEdBQUcsSUFBdEM7O01BTCtDLDJDQU8zQnZmLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWErMUIsU0FBYixFQVAyQjtNQUFBOztNQUFBO1FBTy9DLG9EQUE4QztVQUFBLElBQW5DcFEsS0FBbUM7O1VBQzdDLElBQUlBLEtBQUssQ0FBQ25qQixNQUFOLEtBQWlCLEtBQUtsQixXQUExQixFQUF1QztZQUN0Q21sQyxXQUFXLEdBQUc5Z0IsS0FBZDtZQUNBO1VBQ0E7UUFDRDtNQVo4QztRQUFBO01BQUE7UUFBQTtNQUFBOztNQWMvQyxJQUFJLENBQUM4Z0IsV0FBTCxFQUFrQjtRQUNqQkEsV0FBVyxHQUFHLElBQUk3WSxpRkFBSixDQUF1QixLQUFLdHNCLFdBQTVCLEVBQXlDLEtBQUswSCxLQUE5QyxDQUFkO1FBRUFrZSxPQUFPLENBQUNsbkIsSUFBUixDQUFhNmtDLFNBQWIsQ0FBdUIsSUFBSXBmLDBFQUFKLENBQW1CLENBQUNnaEIsV0FBRCxDQUFuQixDQUF2QjtNQUNBOztNQWxCOEMsNENBb0I1QixLQUFLOThCLFVBcEJ1QjtNQUFBOztNQUFBO1FBb0IvQyx1REFBb0M7VUFBQSxJQUF6QnpILElBQXlCO1VBQ25DdWtDLFdBQVcsQ0FBQ0MsYUFBWixDQUEwQnhrQyxJQUExQjtRQUNBO01BdEI4QztRQUFBO01BQUE7UUFBQTtNQUFBO0lBdUIvQzs7O1dBRUQsaUJBQVEzQixLQUFSLEVBQTRCLENBQzNCO0lBQ0E7OztXQUVELGFBQUlBLEtBQUosRUFBd0IsQ0FDdkI7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdERGO0FBR0E7O0lBRU1vUjs7Ozs7RUFPTCxzQkFBWW5QLE1BQVosRUFBNEJqQyxLQUE1QixFQUEwQztJQUFBOztJQUFBOztJQUN6Qzs7SUFEeUM7O0lBQUE7O0lBR3pDLE1BQUtpQyxNQUFMLEdBQWNBLE1BQWQ7SUFDQSxNQUFLakMsS0FBTCxHQUFhQSxLQUFiO0lBSnlDO0VBS3pDOzs7O1dBRUQsZUFBTUEsS0FBTixFQUFvQjJtQixPQUFwQixFQUFnRDtNQUMvQyxJQUFNeEIsTUFBTSxHQUFHd0IsT0FBTyxDQUFDbG5CLElBQVIsQ0FBYSsxQixTQUFiLEVBQWY7O01BRCtDLDJDQUc3QnJRLE1BSDZCO01BQUE7O01BQUE7UUFHL0Msb0RBQTBCO1VBQUEsSUFBakJDLEtBQWlCOztVQUN6QixJQUFJQSxLQUFLLFlBQVlnRyw0RUFBakIsSUFBcUNoRyxLQUFLLENBQUNuakIsTUFBTixLQUFpQixLQUFLQSxNQUEvRCxFQUF1RTtZQUN0RTBrQixPQUFPLENBQUM0ZSxlQUFSO1lBQ0FuZ0IsS0FBSyxDQUFDa0csV0FBTixDQUFrQixLQUFLdHJCLEtBQXZCO1lBQ0EybUIsT0FBTyxDQUFDNmUsYUFBUjtZQUNBO1VBQ0E7UUFDRDtNQVY4QztRQUFBO01BQUE7UUFBQTtNQUFBO0lBVy9DOzs7O0VBekJ5QjFtQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNMM0I7QUFHQTs7SUFFTXVTOzs7OztFQUtMLHdCQUFZcFAsTUFBWixFQUE0QjtJQUFBOztJQUFBOztJQUMzQjs7SUFEMkI7O0lBRzNCLE1BQUtBLE1BQUwsR0FBY0EsTUFBZDtJQUgyQjtFQUkzQjs7OztXQUVELGVBQU1qQyxLQUFOLEVBQW9CMm1CLE9BQXBCLEVBQWdEO01BQy9DLElBQU14QixNQUFNLEdBQUd3QixPQUFPLENBQUNsbkIsSUFBUixDQUFhKzFCLFNBQWIsRUFBZjs7TUFEK0MsMkNBRzdCclEsTUFINkI7TUFBQTs7TUFBQTtRQUcvQyxvREFBMEI7VUFBQSxJQUFqQkMsS0FBaUI7O1VBQ3pCLElBQUlBLEtBQUssWUFBWWdHLDRFQUFqQixJQUFxQ2hHLEtBQUssQ0FBQ25qQixNQUFOLEtBQWlCLEtBQUtBLE1BQS9ELEVBQXVFO1lBQ3RFMGtCLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWE2bEIsV0FBYixDQUF5QkYsS0FBekI7WUFDQTtVQUNBO1FBQ0Q7TUFSOEM7UUFBQTtNQUFBO1FBQUE7TUFBQTtJQVMvQzs7OztFQXBCMkJ0bUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0g3Qjs7SUFHTXdTO0VBU0wsa0JBQVlyUCxNQUFaLEVBQTRCO0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQzNCLEtBQUtBLE1BQUwsR0FBY0EsTUFBZDtFQUNBOzs7O1dBRUQsZUFBTWpDLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS0EsT0FBTCxHQUFlQSxPQUFmO01BRUEsS0FBS3ZCLEtBQUwsR0FBYSxJQUFJbUksOERBQUosQ0FBYyxLQUFLdHJCLE1BQW5CLENBQWI7SUFDQTs7O1dBRUQsaUJBQVFqQyxLQUFSLEVBQStCLENBQzlCO0lBQ0E7OztXQUVELGFBQUlBLEtBQUosRUFBMkI7TUFDMUIsS0FBS29sQixLQUFMLENBQVdrRyxXQUFYLENBQXVCdHJCLEtBQXZCO01BRUEsS0FBSzJtQixPQUFMLENBQWFsbkIsSUFBYixDQUFrQjRsQixRQUFsQixDQUEyQixLQUFLRCxLQUFoQztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDN0JJeG1CO0VBU0wscUJBQVlJLGdCQUFaLEVBQWdEO0lBQUE7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQy9DLEtBQUtBLGdCQUFMLEdBQXdCQSxnQkFBeEI7RUFDQTs7OztXQUVELDJCQUF3QjtNQUN2QixLQUFLQSxnQkFBTCxDQUFzQnVtQyxlQUF0QjtJQUNBOzs7V0FFRCx5QkFBc0I7TUFDckIsS0FBS3ZtQyxnQkFBTCxDQUFzQndtQyxhQUF0QjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJGOztJQUlNaDBCOzs7Ozs7Ozs7Ozs7O1dBRUwsZUFBTXhSLEtBQU4sRUFBb0IybUIsT0FBcEIsRUFBZ0Q7TUFDL0NBLE9BQU8sQ0FBQ2xuQixJQUFSLENBQWFzbEIsSUFBYjtJQUNBOzs7O0VBSnFCam1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnZCO0FBR0E7O0lBRU0yUzs7Ozs7Ozs7Ozs7OztXQUVMLGVBQU16UixLQUFOLEVBQXVCMm1CLE9BQXZCLEVBQW1EO01BQ2xEQSxPQUFPLENBQUNsbkIsSUFBUixDQUFhdW5CLGFBQWIsR0FBNkJ5ZSxXQUE3QixDQUF5QyxJQUFJaGlDLDBEQUFKLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUF1QixDQUF2QixDQUF6QztJQUNBOzs7O0VBSndCM0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0gxQjs7SUFHTTRTOzs7Ozs7Ozs7Ozs7O1dBU0wsZUFBTTFSLEtBQU4sRUFBdUIybUIsT0FBdkIsRUFBbUQ7TUFDbEQsS0FBS0EsT0FBTCxHQUFlQSxPQUFmO01BRUEsS0FBS3ZCLEtBQUwsR0FBYSxJQUFJb0ksOERBQUosRUFBYjtNQUVBLEtBQUs3RyxPQUFMLENBQWFsbkIsSUFBYixDQUFrQjRsQixRQUFsQixDQUEyQixLQUFLRCxLQUFoQztJQUNBOzs7V0FFRCxpQkFBUXBsQixLQUFSLEVBQStCO01BQzlCLElBQUksQ0FBQyxLQUFLNGxDLFdBQVYsRUFBdUI7UUFDdEIsS0FBS3hnQixLQUFMLENBQVdvZixLQUFYLENBQWlCeGtDLEtBQWpCO1FBQ0EsS0FBSzRsQyxXQUFMLEdBQW1CLElBQW5CO01BQ0E7O01BRUQsS0FBS3hnQixLQUFMLENBQVdxZixLQUFYLENBQWlCemtDLEtBQWpCO0lBQ0E7OztXQUVELGFBQUlBLEtBQUosRUFBMkI7TUFDMUIsS0FBSzRsQyxXQUFMLEdBQW1CLEtBQW5CO01BRUEsS0FBS2pmLE9BQUwsQ0FBYWxuQixJQUFiLENBQWtCNmxCLFdBQWxCLENBQThCLEtBQUtGLEtBQW5DO01BRUEsS0FBS3VCLE9BQUwsQ0FBYWxuQixJQUFiLENBQWtCdW5CLGFBQWxCLEdBQWtDeWUsV0FBbEMsQ0FBOEMsS0FBS3JnQixLQUFMLENBQVc2QixNQUF6RDtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6QkssSUFBTWQsVUFBYjtFQUFBO0lBQUE7O0lBQUEseUdBRW9DLEVBRnBDOztJQUFBLDhHQUd5QyxFQUh6QztFQUFBOztFQUFBO0lBQUE7SUFBQSxPQU1DLG1CQUFVekIsUUFBVixFQUE2QztNQUFBOztNQUM1QyxLQUFLMGhCLFNBQUwsQ0FBZTc4QixJQUFmLENBQW9CbWIsUUFBcEI7TUFFQSxPQUFPO1FBQ04yaEIsT0FBTyxFQUFFO1VBQUEsT0FBTSxLQUFJLENBQUNsZixXQUFMLENBQWlCekMsUUFBakIsQ0FBTjtRQUFBO01BREgsQ0FBUDtJQUdBO0VBWkY7SUFBQTtJQUFBLE9BY0MsdUJBQWNBLFFBQWQsRUFBMkM7TUFDMUMsS0FBSzRoQixjQUFMLENBQW9CLzhCLElBQXBCLENBQXlCbWIsUUFBekI7SUFDQTtFQWhCRjtJQUFBO0lBQUEsT0FrQkMscUJBQVlBLFFBQVosRUFBeUM7TUFDeEMsSUFBTTZoQixhQUFhLEdBQUcsS0FBS0gsU0FBTCxDQUFlNWUsT0FBZixDQUF1QjlDLFFBQXZCLENBQXRCOztNQUVBLElBQUk2aEIsYUFBYSxHQUFHLENBQUMsQ0FBckIsRUFBd0I7UUFDdkIsS0FBS0gsU0FBTCxDQUFlMWUsTUFBZixDQUFzQjZlLGFBQXRCLEVBQXFDLENBQXJDO01BQ0E7SUFDRDtFQXhCRjtJQUFBO0lBQUEsT0EwQkMsaUJBQVFweEIsS0FBUixFQUF3QjtNQUN2QixLQUFLaXhCLFNBQUwsQ0FBZTNELE9BQWYsQ0FBdUIsVUFBQy9kLFFBQUQ7UUFBQSxPQUFjQSxRQUFRLENBQUN2UCxLQUFELENBQXRCO01BQUEsQ0FBdkI7TUFFQSxLQUFLbXhCLGNBQUwsQ0FBb0I3RCxPQUFwQixDQUE0QixVQUFDL2QsUUFBRDtRQUFBLE9BQWNBLFFBQVEsQ0FBQ3ZQLEtBQUQsQ0FBdEI7TUFBQSxDQUE1QjtNQUNBLEtBQUtteEIsY0FBTCxHQUFzQixFQUF0QjtJQUNBO0VBL0JGO0lBQUE7SUFBQSxPQWlDQyxjQUFLRSxFQUFMLEVBQW9DO01BQ25DLE9BQU8sS0FBSy93QixTQUFMLENBQWUsVUFBQ3ZGLENBQUQ7UUFBQSxPQUFPczJCLEVBQUUsQ0FBQ3JlLE9BQUgsQ0FBV2pZLENBQVgsQ0FBUDtNQUFBLENBQWYsQ0FBUDtJQUNBO0VBbkNGOztFQUFBO0FBQUEsS0FzQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbERBO0FBQ0E7O0lBRWUxUjs7Ozs7Ozs7Ozs7OztXQUVkLGdCQUFhO01BQ1osS0FBS21vQyxRQUFMLENBQWNELDJFQUFkOztNQUVBLElBQUk7UUFDSCxLQUFLRyxZQUFMO01BQ0EsQ0FGRCxDQUdBLE9BQU8zMkIsQ0FBUCxFQUFVO1FBQ1QsS0FBS3kyQixRQUFMLENBQWNELG9FQUFkO1FBRUEsTUFBTSxJQUFJN21DLEtBQUosMEJBQTRCLEtBQUsyMkIsV0FBTCxDQUFpQnpnQixJQUE3QyxlQUFzRDdGLENBQXRELEVBQU47TUFDQTs7TUFFRCxLQUFLeTJCLFFBQUwsQ0FBY0QsMEVBQWQ7SUFDQTs7O1dBSUQsaUJBQWM7TUFDYixJQUFJLEtBQUtLLE9BQUwsTUFBa0IsS0FBS3JJLFNBQUwsRUFBdEIsRUFBd0M7UUFDdkMsS0FBS3ZELElBQUw7TUFDQTs7TUFFRCxLQUFLd0wsUUFBTCxDQUFjRCx1RUFBZDs7TUFFQSxJQUFJO1FBQ0gsS0FBS08sYUFBTDtNQUNBLENBRkQsQ0FHQSxPQUFPLzJCLENBQVAsRUFBVTtRQUNULEtBQUt5MkIsUUFBTCxDQUFjRCxvRUFBZDtRQUVBLE1BQU0sSUFBSTdtQyxLQUFKLDJCQUE2QixLQUFLMjJCLFdBQUwsQ0FBaUJ6Z0IsSUFBOUMsZUFBdUQ3RixDQUF2RCxFQUFOO01BQ0E7O01BRUQsS0FBS3kyQixRQUFMLENBQWNELHNFQUFkO0lBQ0E7OztXQUlELGdCQUFhO01BQ1osS0FBS0MsUUFBTCxDQUFjRCx1RUFBZDs7TUFFQSxJQUFJO1FBQ0gsS0FBS1UsWUFBTDtNQUNBLENBRkQsQ0FHQSxPQUFPbDNCLENBQVAsRUFBVTtRQUNULEtBQUt5MkIsUUFBTCxDQUFjRCxvRUFBZDtRQUVBLE1BQU0sSUFBSTdtQyxLQUFKLDBCQUE0QixLQUFLMjJCLFdBQUwsQ0FBaUJ6Z0IsSUFBN0MsZUFBc0Q3RixDQUF0RCxFQUFOO01BQ0E7O01BRUQsS0FBS3kyQixRQUFMLENBQWNELHNFQUFkO0lBQ0E7OztXQUlELG1CQUFnQjtNQUNmLEtBQUtDLFFBQUwsQ0FBY0QseUVBQWQ7O01BRUEsSUFBSTtRQUNILEtBQUthLGVBQUw7TUFDQSxDQUZELENBR0EsT0FBT3IzQixDQUFQLEVBQVU7UUFDVCxLQUFLeTJCLFFBQUwsQ0FBY0Qsb0VBQWQ7UUFFQSxNQUFNLElBQUk3bUMsS0FBSiw2QkFBK0IsS0FBSzIyQixXQUFMLENBQWlCemdCLElBQWhELGVBQXlEN0YsQ0FBekQsRUFBTjtNQUNBOztNQUVELEtBQUt5MkIsUUFBTCxDQUFjRCx3RUFBZDtJQUNBOzs7V0FFRCwyQkFBa0MsQ0FFakM7OztXQUVELG1CQUFnQjtNQUNmLElBQUksS0FBS2UsT0FBTCxNQUFrQixLQUFLQyxTQUFMLEVBQXRCLEVBQXdDO1FBQ3ZDQyxJQUFJO01BQ0o7O01BRUQsS0FBS2hCLFFBQUwsQ0FBY0QseUVBQWQ7O01BRUEsSUFBSTtRQUNILEtBQUttQixlQUFMO01BQ0EsQ0FGRCxDQUdBLE9BQU8zM0IsQ0FBUCxFQUFVO1FBQ1QsS0FBS3kyQixRQUFMLENBQWNELG9FQUFkO1FBRUEsTUFBTSxJQUFJN21DLEtBQUosNkJBQStCLEtBQUsyMkIsV0FBTCxDQUFpQnpnQixJQUFoRCxlQUF5RDdGLENBQXpELEVBQU47TUFDQTs7TUFFRCxLQUFLeTJCLFFBQUwsQ0FBY0Qsd0VBQWQ7SUFDQTs7OztFQTdGb0NEOzs7Ozs7Ozs7Ozs7Ozs7OztJQ0hqQ0M7O1dBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0VBQUFBO0dBQUFBLG9CQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FMO0FBQ0E7O0lBRWVEOzs7OzhHQUVrQixJQUFJdGdCLHVEQUFKOzswR0FFSXVnQjs7OEdBRUlBOzs7OztTQWN4QyxlQUE2QjtNQUM1QixPQUFPLEtBQUtwZCxNQUFaO0lBQ0E7OztTQUVELGVBQXFDO01BQ3BDLE9BQU8sS0FBSzBlLFVBQVo7SUFDQTs7O1dBRUQsdUJBQXVCO01BQ3RCLE9BQU8sS0FBSzFlLE1BQUwsS0FBZ0JvZCwwRUFBdkI7SUFDQTs7O1dBRUQsbUJBQW1CO01BQ2xCLE9BQU8sS0FBS3BkLE1BQUwsS0FBZ0JvZCxzRUFBdkI7SUFDQTs7O1dBRUQsbUJBQW1CO01BQ2xCLE9BQU8sS0FBS3BkLE1BQUwsS0FBZ0JvZCxzRUFBdkI7SUFDQTs7O1dBRUQsbUJBQW1CO01BQ2xCLE9BQU8sS0FBS3BkLE1BQUwsS0FBZ0JvZCxzRUFBdkI7SUFDQTs7O1dBRUQscUJBQXFCO01BQ3BCLE9BQU8sS0FBS3BkLE1BQUwsS0FBZ0JvZCx3RUFBdkI7SUFDQTs7O1dBRUQscUJBQXFCO01BQ3BCLE9BQU8sS0FBS3BkLE1BQUwsS0FBZ0JvZCx3RUFBdkI7SUFDQTs7O1dBRUQsaUJBQWlCO01BQ2hCLE9BQU8sS0FBS3BkLE1BQUwsS0FBZ0JvZCxvRUFBdkI7SUFDQTs7O1dBRUQsMEJBQWlCaGlCLFFBQWpCLEVBQWtFO01BQ2pFLE9BQU8sS0FBS3VqQixVQUFMLENBQWdCeHlCLFNBQWhCLENBQTBCaVAsUUFBMUIsQ0FBUDtJQUNBOzs7V0FFRCw2QkFBb0JBLFFBQXBCLEVBQStEO01BQzlELEtBQUt1akIsVUFBTCxDQUFnQjlnQixXQUFoQixDQUE0QnpDLFFBQTVCO0lBQ0E7OztXQUVELDRCQUFtQztNQUNsQyxLQUFLdWpCLFVBQUwsQ0FBZ0I5ZixPQUFoQixDQUF3QixLQUFLbUIsTUFBN0I7SUFDQTs7O1dBRUQsa0JBQW1CYSxLQUFuQixFQUFpRDtNQUNoRDtNQUVBLElBQUksQ0FBQyxLQUFLK2QsaUJBQUwsQ0FBdUIvZCxLQUF2QixDQUFMLEVBQW9DO1FBQ25DLE1BQU0sSUFBSXRxQixLQUFKLHdDQUEwQyxLQUFLMjJCLFdBQUwsQ0FBaUJ6Z0IsSUFBM0QsZ0JBQXFFLEtBQUtvVSxLQUExRSxtQkFBd0ZBLEtBQXhGLFFBQU47TUFDQTs7TUFFRCxLQUFLNmQsVUFBTCxHQUFrQixLQUFLMWUsTUFBdkI7TUFDQSxLQUFLQSxNQUFMLEdBQWNhLEtBQWQ7TUFFQSxLQUFLZ2UsZ0JBQUw7SUFDQTs7O1dBRUQsMkJBQTBCQyxTQUExQixFQUErRDtNQUM5RCxRQUFRLEtBQUs5ZSxNQUFiO1FBQ0MsS0FBS29kLHNFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQiwyRUFETSxFQUVOQSx5RUFGTSxDQUFQOztRQUlELEtBQUtBLDJFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQiwwRUFETSxFQUVOQSxvRUFGTSxDQUFQOztRQUlELEtBQUtBLDBFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQix1RUFETSxFQUVOQSx5RUFGTSxDQUFQOztRQUlELEtBQUtBLHVFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQixzRUFETSxFQUVOQSxvRUFGTSxDQUFQOztRQUlELEtBQUtBLHNFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQix5RUFETSxFQUVOQSx1RUFGTSxFQUdOQSx5RUFITSxFQUlOQSxvRUFKTSxDQUFQOztRQU1ELEtBQUtBLHVFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQixzRUFETSxFQUVOQSxvRUFGTSxDQUFQOztRQUlELEtBQUtBLHNFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQix1RUFETSxFQUVOQSx5RUFGTSxDQUFQOztRQUlELEtBQUtBLHlFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQix3RUFETSxFQUVOQSxvRUFGTSxDQUFQOztRQUlELEtBQUtBLHdFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQix1RUFETSxFQUVOQSx1RUFGTSxFQUdOQSx5RUFITSxDQUFQOztRQUtELEtBQUtBLHlFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQix3RUFETSxFQUVOQSxvRUFGTSxDQUFQOztRQUlELEtBQUtBLHdFQUFMO1VBQ0MsT0FBTyxLQUFLMkIsU0FBTCxDQUFlRCxTQUFmLEVBQ04xQiwyRUFETSxDQUFQOztR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QUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxxQ0FBcUM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUUsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2QkFBNkI7QUFDL0M7QUFDQTtBQUNBLGtDQUFrQyxnQkFBZ0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxrQkFBa0I7QUFDeEQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxzREFBc0Q7QUFDL0QsU0FBUyxrRkFBa0Y7QUFDM0YsU0FBUztBQUNUO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw2QkFBNkI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDZEQUE2RCx1QkFBdUI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsNkRBQTZELHVCQUF1QjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6QixNQUFNLHNEQUFzRDtBQUM1RCxNQUFNLGlGQUFpRjtBQUN2RixNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixPQUFPO0FBQ1AsS0FBSztBQUNMLGNBQWM7QUFDZDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLE9BQU87QUFDUCxLQUFLO0FBQ0wsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUdFOzs7Ozs7Ozs7OztBQy9rSEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxJQUF5RDtBQUM3RDtBQUNBLE1BQU0sRUFLcUQ7QUFDM0QsQ0FBQztBQUNELHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QixJQUFJO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsSUFBSTtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGtCQUFrQixZQUFZO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsY0FBYyxFQUFFLGNBQWMsRUFBRSxjQUFjO0FBQzdEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsUUFBUTtBQUNSLG9DQUFvQyxHQUFHO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBLGdCQUFnQixNQUFNO0FBQ3RCLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0MsUUFBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLHlEQUF5RCxHQUFHO0FBQzVEO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdDQUFnQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMOztBQUVBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtREFBbUQsUUFBUTtBQUMzRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFF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QTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBEQUEwRCxjQUFjO0FBQ3hFO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNERBQTRELEtBQUs7QUFDakU7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFEQUFxRCxLQUFLO0FBQzFEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsOENBQThDLGlCQUFpQjtBQUMvRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxtRUFBbUUsTUFBTTtBQUN6RTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1REFBdUQ7QUFDdkQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVHQUF1RyxvQkFBb0I7QUFDM0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNEQUFzRCxLQUFLO0FBQzNEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdEQUF3RCxLQUFLO0FBQzdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQiwyQkFBMkIsRUFBRSxTQUFTO0FBQzNEOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQsV0FBVztBQUM1RDs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9EQUFvRCxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsMkJBQTJCLEVBQUUsbUJBQW1CLEVBQUU7QUFDN0s7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG1DQUFtQyxXQUFXLElBQUk7QUFDMUYsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixhQUFhLEVBQUUsU0FBUztBQUMzQztBQUNBLHNEQUFzRCxJQUFJO0FBQzFELEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkMsa0NBQWtDLE9BQU87QUFDekM7QUFDQSx1Q0FBdUMsT0FBTyxFQUFFLE9BQU87QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxXQUFXOztBQUUzRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxXQUFXOztBQUVYLGtEQUFrRCxzQkFBc0IsTUFBTSxHQUFHO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDLHdCQUF3QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGtDQUFrQyxXQUFXLEVBQUUsc0JBQXNCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrREFBa0QsUUFBUTtBQUMxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQyxTQUFTLFdBQVcsRUFBRTtBQUNoRSxnQ0FBZ0MsZUFBZSxlQUFlLEVBQUUsTUFBTSxLQUFLO0FBQzNFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGtFQUFrRTtBQUNsRSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLDZCQUE2QjtBQUM1RDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCLGVBQWUsU0FBUyxXQUFXLEVBQUU7QUFDakU7O0FBRUE7QUFDQSwwQkFBMEIsZUFBZSxnQkFBZ0IsRUFBRSxNQUFNLEtBQUs7QUFDdEUsTUFBTTtBQUNOLGdDQUFnQyw2QkFBNkI7O0FBRTdEO0FBQ0Esc0NBQXNDLDZCQUE2QixJQUFJO0FBQ3ZFOztBQUVBLDBCQUEwQixlQUFlLDRCQUE0QixFQUFFLEVBQUUsSUFBSSxNQUFNLEtBQUs7QUFDeEY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVAsaUVBQWlFLEdBQUc7QUFDcEU7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixJQUFJLEdBQUcsc0JBQXNCO0FBQ2xEOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHlDQUF5QyxRQUFRO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxXQUFXO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxZQUFZO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWdCLFdBQVc7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsV0FBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBOztBQUVBLHVDQUF1QyxRQUFRO0FBQy9DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBRUEsa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsRUFBRTs7QUFFM0U7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLHdDQUF3QyxRQUFRO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNENBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsWUFBWTtBQUN6RDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsS0FBSyxLQUFLLHFCQUFxQjtBQUN4RDs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsUUFBUSxFQUFFLE1BQU0sRUFBRSxnQkFBZ0IsS0FBSyxTQUFTO0FBQ3ZFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCLGtCQUFrQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCLGtCQUFrQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDRDQUE0QyxxQkFBcUI7QUFDakU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsK0RBQStELDhDQUE4QztBQUM3RyxxQ0FBcUMsTUFBTSxPQUFPLHVCQUF1QjtBQUN6RSxzQ0FBc0MsT0FBTyxPQUFPLHVCQUF1QjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLDJDQUEyQyxRQUFRO0FBQ25EOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscURBQXFELFFBQVE7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUixrRUFBa0UsWUFBWTtBQUM5RTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsV0FBVztBQUNoQztBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLFVBQVU7QUFDaEM7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLFVBQVU7QUFDNUI7O0FBRUEsd0JBQXdCLFVBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxrQ0FBa0MsUUFBUTtBQUMxQztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsUUFBUTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0NBQXNDLE1BQU07QUFDNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0RBQStELFVBQVU7QUFDekU7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLG9EQUFvRCxZQUFZO0FBQ2hFOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixZQUFZO0FBQzlCLDZDQUE2QyxjQUFjO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxREFBcUQsV0FBVztBQUNoRTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHVEQUF1RCxZQUFZO0FBQ25FOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZ0VBQWdFLFdBQVc7QUFDM0U7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSLDZEQUE2RCxRQUFRO0FBQ3JFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZEQUE2RCxTQUFTO0FBQ3RFO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxHQUFHO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLGlFQUFpRSxHQUFHO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLGlFQUFpRSxHQUFHO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLGlFQUFpRSxHQUFHO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5REFBeUQsYUFBYTtBQUN0RTtBQUNBOztBQUVBLDBDQUEwQyxXQUFXO0FBQ3JEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJEQUEyRCxHQUFHO0FBQzlEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG1CQUFPLENBQUMsaUJBQUk7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsbUJBQU8sQ0FBQyxxQkFBUTs7QUFFbkM7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx5RUFBeUUsR0FBRztBQUM1RTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsVUFBVTs7QUFFVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFVBQVU7QUFDeEQ7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBLDBCQUEwQixTQUFTO0FBQ25DOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBOztBQUVBLGtDQUFrQyxTQUFTO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxTQUFTOztBQUUvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXOztBQUVYO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXOztBQUVYO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsNkNBQTZDLG1CQUFtQjtBQUNoRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsOENBQThDLFdBQVcsS0FBSyxVQUFVO0FBQ3hFLG1DQUFtQyxVQUFVO0FBQzdDLGtDQUFrQyxTQUFTO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsTUFBTSxJQUFJLE1BQU07QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUMsUUFBUTtBQUMvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSw2QkFBNkIsb0JBQW9CO0FBQ2pEOztBQUVBO0FBQ0Esb0VBQW9FLFFBQVE7O0FBRTVFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEIsT0FBTztBQUNyQztBQUNBOztBQUVBLG9DQUFvQyx1QkFBdUI7QUFDM0Q7O0FBRUE7QUFDQTtBQUNBLG9DQUFvQyxLQUFLO0FBQ3pDLG1DQUFtQyxJQUFJO0FBQ3ZDLCtDQUErQyxNQUFNLEtBQUssS0FBSztBQUMvRDtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdFQUFnRSxHQUFHOztBQUVuRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQSwyQkFBMkIsZ0JBQWdCLEdBQUcsT0FBTztBQUNyRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0Msd0NBQXdDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQyx3Q0FBd0M7QUFDeEU7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCLGtCQUFrQixLQUFLLFdBQVc7QUFDbEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDQUFzQyxRQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0NBQXNDLFFBQVE7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixLQUFLO0FBQy9CLHlCQUF5QixJQUFJO0FBQzdCLDhCQUE4QixXQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsa0JBQWtCLFdBQVc7QUFDN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IscUJBQXFCO0FBQ3ZDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0MsUUFBUTtBQUNoRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsc0JBQXNCLDREQUE0RDtBQUNsRjtBQUNBOztBQUVBLHNCQUFzQixzRUFBc0U7QUFDNUY7QUFDQTs7QUFFQSxrQkFBa0Isb0NBQW9DO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGdCQUFnQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLCtGQUErRjs7QUFFL0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esd0NBQXdDLFNBQVM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxrREFBa0QsWUFBWTtBQUM5RDs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0Esc0NBQXNDLFVBQVUsRUFBRSxXQUFXO0FBQzdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEIsTUFBTTtBQUNwQztBQUNBOztBQUVBO0FBQ0EsNEJBQTRCLHdCQUF3QixPQUFPLFVBQVU7QUFDckU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxnREFBZ0QsUUFBUTtBQUN4RDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QixvQkFBb0I7QUFDakQsMENBQTBDLHFCQUFxQjtBQUMvRCxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBLDZCQUE2Qix1Q0FBdUM7QUFDcEUsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BELFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0EsNkJBQTZCLHNDQUFzQztBQUNuRSwwQ0FBMEMsdUNBQXVDO0FBQ2pGLFVBQVU7QUFDVjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0EseUJBQXlCLGFBQWE7O0FBRXRDLHNDQUFzQyxRQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixTQUFTO0FBQzdCOztBQUVBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwwQkFBMEIsU0FBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLFNBQVM7QUFDbkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUEsdUJBQXVCLHNEQUEyQjtBQUNsRDtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLFlBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixZQUFZO0FBQ3BDOztBQUVBLDBCQUEwQixjQUFjO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixVQUFVLEVBQUUsU0FBUztBQUM3Qzs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU07QUFDL0I7QUFDQSxNQUFNO0FBQ047QUFDQSw0QkFBNEIsVUFBVSxFQUFFLFNBQVM7QUFDakQ7QUFDQTs7QUFFQSxxQkFBcUIsVUFBVSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFVBQVUsT0FBTyxTQUFTO0FBQy9GOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzREFBc0QsR0FBRztBQUN6RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxxQkFBcUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxxQkFBcUI7QUFDOUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFVOztBQUVWOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQSx5REFBeUQscUJBQXFCOztBQUU5RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4REFBOEQsZ0JBQWdCLFFBQVEsZUFBZTtBQUNyRztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlELGdCQUFnQixtQkFBbUIsRUFBRSxpQkFBaUIsSUFBSSxJQUFJO0FBQy9HOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxlQUFlOztBQUVoRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxJQUFJO0FBQzlDLDBDQUEwQyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFNBQVM7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNDQUFzQyxlQUFlO0FBQ3JEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJEQUEyRCxRQUFRO0FBQ25FOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QixVQUFVOztBQUVuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0MsWUFBWTtBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsc0NBQXNDLE9BQU87QUFDN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQix1Q0FBdUM7QUFDNUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvRUFBb0UsSUFBSTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDBEQUEwRCxPQUFPO0FBQ2pFO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGVBQWUsRUFBRSxnQkFBZ0I7O0FBRXhGO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsWUFBWTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGVBQWU7QUFDL0Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxXQUFXLG1CQUFPLENBQUMsaUJBQUk7O0FBRXZCLGFBQWEsbUJBQU8sQ0FBQyxtQkFBTTs7QUFFM0IsY0FBYyxtQkFBTyxDQUFDLG9CQUFPOztBQUU3QixZQUFZLG1CQUFPLENBQUMsa0JBQUs7O0FBRXpCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0NBQWdDLFVBQVU7QUFDMUM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0VBQW9FLFVBQVU7QUFDOUU7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsdUNBQXVDLE1BQU0sR0FBRyxRQUFROztBQUV4RDtBQUNBO0FBQ0Esb0VBQW9FLFVBQVU7QUFDOUU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxLQUFLO0FBQ3JFOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4RUFBOEUsT0FBTywwQkFBMEIsSUFBSTtBQUNuSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QixxREFBcUQsT0FBTztBQUN6Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixrQkFBa0I7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsRUFBRTtBQUM3QztBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsV0FBVyxHQUFHLGFBQWE7QUFDeEU7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsMkNBQTJDLE1BQU0sR0FBRyxRQUFROztBQUU1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLFVBQVU7QUFDVjtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7OztBQ3hpZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUksSUFBeUQ7QUFDN0Q7QUFDQSxNQUFNLEVBSzZEO0FBQ25FLENBQUM7QUFDRCx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNB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QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLGdCQUFnQjtBQUNwQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixRQUFRO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx1Q0FBdUMsY0FBYztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNEQUFzRCxjQUFjO0FBQ3BFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJEQUEyRCxlQUFlO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0EsS0FBSyxzQkFBc0I7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDBDQUEwQyxrQkFBa0IsdUNBQXVDLGNBQWM7QUFDakg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLElBQUk7QUFDL0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQyxJQUFJO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSyxVQUFVOztBQUVmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBLDRCQUE0Qix1QkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSw4QkFBOEIsdUJBQXVCO0FBQ3JEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxnREFBZ0QsU0FBUzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLE1BQU07QUFDN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QyxrQkFBa0I7QUFDaEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsV0FBVzs7QUFFNUM7QUFDQSxnQ0FBZ0MscUJBQXFCLEdBQUcsUUFBUSxHQUFHLE9BQU87QUFDMUU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQyxXQUFXO0FBQ2pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUEsNkNBQTZDLFFBQVE7QUFDckQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0RBQStELFFBQVE7QUFDdkU7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOENBQThDLEtBQUs7QUFDbkQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QyxLQUFLO0FBQ25EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFEQUFxRCxTQUFTO0FBQzlEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsNERBQTRELFFBQVE7QUFDcEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxrRUFBa0UsT0FBTztBQUN6RTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxRQUFRO0FBQ2hEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUNBQXVDLGlCQUFpQixhQUFhLE9BQU8sSUFBSSxPQUFPOztBQUV2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtDQUErQyxnQkFBZ0Isa0JBQWtCLE1BQU0sbUJBQW1CLE9BQU8sSUFBSSxPQUFPO0FBQzVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxRkFBcUYsUUFBUTtBQUM3RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMERBQTBELEtBQUs7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixnQkFBZ0I7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDZDQUE2QyxRQUFRO0FBQ3JEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxPQUFPO0FBQy9DLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUNBQXlDLFFBQVE7QUFDakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLFdBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUEscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQSx5REFBeUQsU0FBUztBQUNsRTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBLHlDQUF5QyxRQUFRO0FBQ2pEO0FBQ0E7O0FBRUEsa0RBQWtELFVBQVU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzREFBc0QsSUFBSTtBQUMxRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLDZDQUE2QyxHQUFHO0FBQ2hEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdELFFBQVE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QztBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1LQUFtSyxNQUFNLGVBQWUsTUFBTTtBQUM5TDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQSxvQkFBb0IsZUFBZTtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFP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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsWUFBWTtBQUNsQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0EsUUFBUTtB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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOLHNDQUFzQyxpQkFBaUI7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOENBQThDLFVBQVU7QUFDeEQ7QUFDQSxNQUFNO0FBQ04sOENBQThDLGFBQWE7QUFDM0Q7QUFDQSxNQUFNO0FBQ047QUFDQSxnREFBZ0QsV0FBVztBQUMzRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsV0FBVztBQUN4RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLFFBQVEsR0FBRyxpQkFBaUI7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEseUNBQXlDLFFBQVE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHlEQUF5RCxlQUFlO0FBQ3hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ04seURBQXlELGVBQWU7QUFDeEU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXOztBQUVYOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sc0JBQXNCO0FBQzdCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLE9BQU87QUFDUDtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0IsT0FBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFpQjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDhEQUE2QjtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0RBQWlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FB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OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyREFBNkI7QUFDL0I7QUFDQTtBQUNBLEdBQUc7QUFDSDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0EsaUNBQWlDLG1CQUFtQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVP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QUFJLEtBQUtrb0Msa0JBQUwsSUFBMkIsS0FBS0Esa0JBQUwsQ0FBd0Jsb0MsS0FBeEIsS0FBa0NjLE1BQU0sQ0FBQ2QsS0FBRCxDQUF2RSxFQUFnRjtRQUMvRSxLQUFLa29DLGtCQUFMLENBQXdCQyxlQUF4QixDQUF3QzFULE9BQXhDLENBQWdELFVBQUFoK0IsTUFBTSxFQUFJO1VBQ3pELElBQUlBLE1BQU0sWUFBWTZILGtHQUF0QixFQUFvRDtZQUNuRCxNQUFJLENBQUNpb0MsZUFBTCxDQUFxQjBCLGNBQXJCLENBQW9DeHhDLE1BQU0sQ0FBQ2lNLFVBQTNDO1VBQ0EsQ0FGRCxNQUdLLElBQUlqTSxNQUFNLFlBQVlnSSwwRkFBdEIsRUFBZ0Q7WUFDcEQsSUFBTWEsVUFBVSxHQUFHLElBQUk3Syw0REFBSixDQUFlZ0MsTUFBTSxDQUFDakYsVUFBdEIsQ0FBbkI7WUFDQThOLFVBQVUsQ0FBQ3pCLFNBQVgsR0FBdUIsQ0FBdkI7O1lBRUEsTUFBSSxDQUFDMG9DLGVBQUwsQ0FBcUJqUSxTQUFyQixDQUErQmgzQixVQUEvQjtVQUNBLENBTEksTUFNQSxJQUFJN0ksTUFBTSxZQUFZaUkscUZBQXRCLEVBQWdEO1lBQ3BELE1BQUksQ0FBQzZuQyxlQUFMLENBQXFCalEsU0FBckIsQ0FBK0I3L0IsTUFBTSxDQUFDQSxNQUF0QztVQUNBO1FBQ0QsQ0FiRDtNQWNBOztNQUVELEtBQUt5eEMsa0JBQUwsR0FBMEIsSUFBMUI7SUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlY3Qvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9yZWdlbmVyYXRvclJ1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZi5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL2FjdGlvbi1wbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vYWN0aW9uLXR5cGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vYWN0aW9uLmV4ZWN1dG9yLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL2FjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9hcnJvdy5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vYnJ1c2guYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL2NsZWFyLXNoYXBlcy5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vY2xvbmUuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL2VsbGlwc2UuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL2V4dGVuZC12aWV3LmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9oaWdobGlnaHRlci5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24va2V5LmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9sYXRleC1mb250LmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9sYXRleC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vbGluZS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vcGFnZS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vcGFuLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9wYXJzZXIvYWN0aW9uLnBhcnNlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9wYXJzZXIvcHJvZ3Jlc3NpdmUtZGF0YS12aWV3LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3BhcnNlci9yZWNvcmRlZC1wYWdlLnBhcnNlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9wYXJzZXIvc3RyZWFtLmFjdGlvbi5wYXJzZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vcGVuLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9wb2ludGVyLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9yZWN0YW5nbGUuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3JlZG8uYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3J1YmJlci5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc2VsZWN0LWdyb3VwLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9zZWxlY3QuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3NpbXBsZS1hY3Rpb24tZXhlY3V0b3IudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLWFjdGlvbi1wbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLmFjdGlvbi10eXBlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3N0cmVhbS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLmRvY3VtZW50LmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9zdHJlYW0uZG9jdW1lbnQuY2xvc2VkLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9zdHJlYW0uZG9jdW1lbnQuY3JlYXRlZC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLmRvY3VtZW50LnNlbGVjdGVkLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi9zdHJlYW0ucGFnZS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLnBhZ2UuY3JlYXRlZC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLnBhZ2UuZGVsZXRlZC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLnBhZ2Uuc2VsZWN0ZWQuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3N0cmVhbS5wbGF5YmFjay5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLnBsYXliYWNrcy5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLnNwZWVjaC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vc3RyZWFtLnNwZWVjaC5wdWJsaXNoZWQuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3N0cmVhbS5zdGFydC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vdGV4dC1jaGFuZ2UuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3RleHQtZm9udC5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vdGV4dC1oaWdobGlnaHQuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3RleHQtbW92ZS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9hY3Rpb24vdGV4dC1yZW1vdmUuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3RleHQuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3Rvb2wtYmVnaW4uYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3Rvb2wtZW5kLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi90b29sLWV4ZWN1dGUuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3Rvb2wuYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3VuZG8uYWN0aW9uLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvYWN0aW9uL3pvb20tb3V0LmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2FjdGlvbi96b29tLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2NvbXBvbmVudC9pbmRleC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2NvbXBvbmVudC9wbGF5ZXItY29udHJvbHMvcGxheWVyLWNvbnRyb2xzLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvZXZlbnQvc2l6ZS1ldmVudC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2V4dGVuc2lvbi9hcnJheS5leHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9leHRlbnNpb24vY29udGV4dC0yZC5leHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9leHRlbnNpb24vZnVsbHNjcmVlbi5leHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9leHRlbnNpb24vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9leHRlbnNpb24vc3RyaW5nLmV4dGVuc2lvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2dlb21ldHJ5L2RpbWVuc2lvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2dlb21ldHJ5L2VsbGlwc2UudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9nZW9tZXRyeS9saW5lLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvZ2VvbWV0cnkvcGVuLXBvaW50LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvZ2VvbWV0cnkvcGVuLXN0cm9rZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2dlb21ldHJ5L3BvaW50LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvZ2VvbWV0cnkvcmVjdGFuZ2xlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvZ2VvbWV0cnkvdHJhbnNmb3JtLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbWVkaWEvbWVkaWEtcGxheWVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvYWN0aW9uL2FjdGlvbi1oYW5kbGVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvYWN0aW9uL2FkZC1zaGFwZS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9hY3Rpb24vcmVtb3ZlLXNoYXBlLmFjdGlvbi50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL2FjdGlvbi9zaGFwZS5hY3Rpb24udHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9kb2N1bWVudC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3BhZ2UtZXZlbnQudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9wYWdlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvcGRmLWpzLWRvY3VtZW50LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvcGxheWJhY2stbW9kZWwudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9yZWNvcmRlZC1wYWdlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvc2hhcGUvYXJyb3cuc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS9lbGxpcHNlLnNoYXBlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvc2hhcGUvZm9ybS5zaGFwZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3NoYXBlL2xhdGV4LnNoYXBlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvc2hhcGUvbGluZS5zaGFwZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3NoYXBlL3Blbi5zaGFwZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3NoYXBlL3BvaW50ZXIuc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS9yZWN0YW5nbGUuc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS9zZWxlY3Quc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS9zaGFwZS1ldmVudC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3NoYXBlL3NoYXBlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvbW9kZWwvc2hhcGUvc2xpZGUuc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS9zdHJva2Uuc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS90ZXh0LWhpZ2hsaWdodC5zaGFwZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3NoYXBlL3RleHQuc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC9zaGFwZS90eXBlc2V0dGluZy5zaGFwZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL21vZGVsL3NoYXBlL3pvb20uc2hhcGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9tb2RlbC93aGl0ZWJvYXJkLmRvY3VtZW50LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcGFpbnQvYnJ1c2gudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9wYWludC9jb2xvci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3BhaW50L2ZvbnQudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9wYWludC9wYWludC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci9hcnJvdy5yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci9lbGxpcHNlLnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL2hpZ2hsaWdodGVyLnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL2xhdGV4LnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL2xpbmUucmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9yZW5kZXIvcGRmLnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL3BkZi50ZXh0LnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL3Blbi5yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci9wb2ludGVyLnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL3JlY3RhbmdsZS5yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci9yZW5kZXItY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci9yZW5kZXItc3VyZmFjZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci9zZWxlY3QucmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9yZW5kZXIvc2xpZGUtcmVuZGVyLXN1cmZhY2UudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9yZW5kZXIvc2xpZGUucmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9yZW5kZXIvdGV4dC1oaWdobGlnaHQucmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9yZW5kZXIvdGV4dC1sYXllci1zdXJmYWNlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvcmVuZGVyL3RleHQucmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9yZW5kZXIvd2hpdGVib2FyZC5yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3JlbmRlci96b29tLnJlbmRlcmVyLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvc2VydmljZS9jb3Vyc2Uuc2VydmljZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3NlcnZpY2UvZG9jdW1lbnQuc2VydmljZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3NlcnZpY2UvamFudXMuc2VydmljZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3NlcnZpY2UvcGxheWJhY2suc2VydmljZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvYXJyb3cudG9vbC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvYXRvbWljLnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL2NsZWFyLXNoYXBlcy50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9jbG9uZS50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9kZWxldGUuc2hhcGUudG9vbC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvZWxsaXBzZS50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9leHRlbmQtdmlldy50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9oaWdobGlnaHRlci50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9sYXRleC1mb250LnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL2xhdGV4LnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL2xpbmUudG9vbC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvcGFpbnQudG9vbC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvcGFuLnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL3Blbi50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9wb2ludGVyLnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL3JlY3RhbmdsZS50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9yZWRvLnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL3NlbGVjdC1ncm91cC50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC9zZWxlY3QudG9vbC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvdGV4dC1jaGFuZ2UudG9vbC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvdGV4dC1mb250LnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL3RleHQtaGlnaGxpZ2h0LnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL3RleHQtbW92ZS50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC90ZXh0LXJlbW92ZS50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC90ZXh0LnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy90b29sL3Rvb2wtY29udGV4dC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2wvdW5kby50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC96b29tLW91dC50b29sLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdG9vbC96b29tLnRvb2wudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy91dGlscy9ldmVudC1saXN0ZW5lci50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3V0aWxzL2V4ZWN1dGFibGUtYmFzZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3V0aWxzL2V4ZWN1dGFibGUtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy91dGlscy9leGVjdXRhYmxlLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdXRpbHMvaHR0cC1yZXF1ZXN0LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdXRpbHMvb2JzZXJ2YWJsZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3V0aWxzL3Byb3BlcnR5LnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdXRpbHMvc3luYy1zdGF0ZS50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3V0aWxzL3V0aWxzLnRzIiwid2VicGFjazovL2xlY3QvLi9zcmMvdmlldy9pbmRleC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3ZpZXcvcGxheWVyLXZpZXcvcGxheWVyLnZpZXcudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy92aWV3L3NsaWRlLXZpZXcvd2ViLXNsaWRlLnZpZXcudHMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy92aWV3L3ZpZXctZWxlbWVudC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3ZpZXcvd2ViLXZpZXctZWxlbWVudC50cyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL2ljb25zLmNzcyIsIndlYnBhY2s6Ly9sZWN0Ly4vc3JjL3Rvb2x0aXAuY3NzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL2phbnVzLWdhdGV3YXkvaHRtbC9qYW51cy5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3BkZmpzLWRpc3QvYnVpbGQvcGRmLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvcGRmanMtZGlzdC93ZWIvcGRmX3ZpZXdlci5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3NkcC9zZHAuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9zdHlsZS5jc3M/OTAxMSIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2FkYXB0ZXJfY29yZS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2ZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2Nocm9tZV9zaGltLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9nZXRkaXNwbGF5bWVkaWEuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldHVzZXJtZWRpYS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jb21tb25fc2hpbS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2ZpcmVmb3hfc2hpbS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2dldGRpc3BsYXltZWRpYS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2dldHVzZXJtZWRpYS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9zYWZhcmkvc2FmYXJpX3NoaW0uanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9wZGZqcy1kaXN0L2J1aWxkL3BkZi53b3JrZXIuanMiLCJ3ZWJwYWNrOi8vbGVjdC9pZ25vcmVkfEM6XFxVc2Vyc1xcQWxleFxcRGVza3RvcFxcbGVjdHVyZVBsYXllclxcc3JjXFxtYWluXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxwZGZqcy1kaXN0XFxidWlsZHxjYW52YXMiLCJ3ZWJwYWNrOi8vbGVjdC9pZ25vcmVkfEM6XFxVc2Vyc1xcQWxleFxcRGVza3RvcFxcbGVjdHVyZVBsYXllclxcc3JjXFxtYWluXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxwZGZqcy1kaXN0XFxidWlsZHxmcyIsIndlYnBhY2s6Ly9sZWN0L2lnbm9yZWR8QzpcXFVzZXJzXFxBbGV4XFxEZXNrdG9wXFxsZWN0dXJlUGxheWVyXFxzcmNcXG1haW5cXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXHBkZmpzLWRpc3RcXGJ1aWxkfGh0dHAiLCJ3ZWJwYWNrOi8vbGVjdC9pZ25vcmVkfEM6XFxVc2Vyc1xcQWxleFxcRGVza3RvcFxcbGVjdHVyZVBsYXllclxcc3JjXFxtYWluXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxwZGZqcy1kaXN0XFxidWlsZHxodHRwcyIsIndlYnBhY2s6Ly9sZWN0L2lnbm9yZWR8QzpcXFVzZXJzXFxBbGV4XFxEZXNrdG9wXFxsZWN0dXJlUGxheWVyXFxzcmNcXG1haW5cXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXHBkZmpzLWRpc3RcXGJ1aWxkfHVybCIsIndlYnBhY2s6Ly9sZWN0L2lnbm9yZWR8QzpcXFVzZXJzXFxBbGV4XFxEZXNrdG9wXFxsZWN0dXJlUGxheWVyXFxzcmNcXG1haW5cXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXHBkZmpzLWRpc3RcXGJ1aWxkfHpsaWIiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NvbnN0cnVjdC5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZi5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaXNOYXRpdmVGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vbm9uSXRlcmFibGVSZXN0LmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vbm9uSXRlcmFibGVTcHJlYWQuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2V0UHJvdG90eXBlT2YuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5LmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc3VwZXJQcm9wQmFzZS5qcyIsIndlYnBhY2s6Ly9sZWN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIiwid2VicGFjazovL2xlY3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vbGVjdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS93cmFwTmF0aXZlU3VwZXIuanMiLCJ3ZWJwYWNrOi8vbGVjdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9sZWN0L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2xlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2xlY3Qvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9sZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbGVjdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2xlY3Qvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vbGVjdC93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vbGVjdC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJsZWN0XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImxlY3RcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwidmFyIF90eXBlb2YgPSByZXF1aXJlKFwiLi90eXBlb2YuanNcIilbXCJkZWZhdWx0XCJdO1xuXG5mdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgLyohIHJlZ2VuZXJhdG9yLXJ1bnRpbWUgLS0gQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIC0tIGxpY2Vuc2UgKE1JVCk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vTElDRU5TRSAqL1xuXG4gIG1vZHVsZS5leHBvcnRzID0gX3JlZ2VuZXJhdG9yUnVudGltZSA9IGZ1bmN0aW9uIF9yZWdlbmVyYXRvclJ1bnRpbWUoKSB7XG4gICAgcmV0dXJuIGV4cG9ydHM7XG4gIH0sIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cztcbiAgdmFyIGV4cG9ydHMgPSB7fSxcbiAgICAgIE9wID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgIGhhc093biA9IE9wLmhhc093blByb3BlcnR5LFxuICAgICAgJFN5bWJvbCA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sID8gU3ltYm9sIDoge30sXG4gICAgICBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCIsXG4gICAgICBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsXG4gICAgICB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pLCBvYmpba2V5XTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVmaW5lID0gZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcixcbiAgICAgICAgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpLFxuICAgICAgICBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuICAgIHJldHVybiBnZW5lcmF0b3IuX2ludm9rZSA9IGZ1bmN0aW9uIChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgICB2YXIgc3RhdGUgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKG1ldGhvZCwgYXJnKSB7XG4gICAgICAgIGlmIChcImV4ZWN1dGluZ1wiID09PSBzdGF0ZSkgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcblxuICAgICAgICBpZiAoXCJjb21wbGV0ZWRcIiA9PT0gc3RhdGUpIHtcbiAgICAgICAgICBpZiAoXCJ0aHJvd1wiID09PSBtZXRob2QpIHRocm93IGFyZztcbiAgICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZCwgY29udGV4dC5hcmcgPSBhcmc7Oykge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG5cbiAgICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcIm5leHRcIiA9PT0gY29udGV4dC5tZXRob2QpIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztlbHNlIGlmIChcInRocm93XCIgPT09IGNvbnRleHQubWV0aG9kKSB7XG4gICAgICAgICAgICBpZiAoXCJzdXNwZW5kZWRTdGFydFwiID09PSBzdGF0ZSkgdGhyb3cgc3RhdGUgPSBcImNvbXBsZXRlZFwiLCBjb250ZXh0LmFyZztcbiAgICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuICAgICAgICAgIH0gZWxzZSBcInJldHVyblwiID09PSBjb250ZXh0Lm1ldGhvZCAmJiBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgICAgc3RhdGUgPSBcImV4ZWN1dGluZ1wiO1xuICAgICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChcIm5vcm1hbFwiID09PSByZWNvcmQudHlwZSkge1xuICAgICAgICAgICAgaWYgKHN0YXRlID0gY29udGV4dC5kb25lID8gXCJjb21wbGV0ZWRcIiA6IFwic3VzcGVuZGVkWWllbGRcIiwgcmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIFwidGhyb3dcIiA9PT0gcmVjb3JkLnR5cGUgJiYgKHN0YXRlID0gXCJjb21wbGV0ZWRcIiwgY29udGV4dC5tZXRob2QgPSBcInRocm93XCIsIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfShpbm5lckZuLCBzZWxmLCBjb250ZXh0KSwgZ2VuZXJhdG9yO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwibm9ybWFsXCIsXG4gICAgICAgIGFyZzogZm4uY2FsbChvYmosIGFyZylcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInRocm93XCIsXG4gICAgICAgIGFyZzogZXJyXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cblxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBkZWZpbmUoSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiYgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkgJiYgKEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUpO1xuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgIGRlZmluZShwcm90b3R5cGUsIG1ldGhvZCwgZnVuY3Rpb24gKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuXG4gICAgICBpZiAoXCJ0aHJvd1wiICE9PSByZWNvcmQudHlwZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICByZXR1cm4gdmFsdWUgJiYgXCJvYmplY3RcIiA9PSBfdHlwZW9mKHZhbHVlKSAmJiBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpID8gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pIDogUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodW53cmFwcGVkKSB7XG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkLCByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgdGhpcy5faW52b2tlID0gZnVuY3Rpb24gKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9IHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLCBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZykgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcblxuICAgIGlmICh1bmRlZmluZWQgPT09IG1ldGhvZCkge1xuICAgICAgaWYgKGNvbnRleHQuZGVsZWdhdGUgPSBudWxsLCBcInRocm93XCIgPT09IGNvbnRleHQubWV0aG9kKSB7XG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSAmJiAoY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiLCBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZCwgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCksIFwidGhyb3dcIiA9PT0gY29udGV4dC5tZXRob2QpKSByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCIsIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG4gICAgaWYgKFwidGhyb3dcIiA9PT0gcmVjb3JkLnR5cGUpIHJldHVybiBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIiwgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnLCBjb250ZXh0LmRlbGVnYXRlID0gbnVsbCwgQ29udGludWVTZW50aW5lbDtcbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG4gICAgcmV0dXJuIGluZm8gPyBpbmZvLmRvbmUgPyAoY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWUsIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2MsIFwicmV0dXJuXCIgIT09IGNvbnRleHQubWV0aG9kICYmIChjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiLCBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZCksIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsLCBDb250aW51ZVNlbnRpbmVsKSA6IGluZm8gOiAoY29udGV4dC5tZXRob2QgPSBcInRocm93XCIsIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpLCBjb250ZXh0LmRlbGVnYXRlID0gbnVsbCwgQ29udGludWVTZW50aW5lbCk7XG4gIH1cblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHtcbiAgICAgIHRyeUxvYzogbG9jc1swXVxuICAgIH07XG4gICAgMSBpbiBsb2NzICYmIChlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV0pLCAyIGluIGxvY3MgJiYgKGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdLCBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM10pLCB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiLCBkZWxldGUgcmVjb3JkLmFyZywgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbe1xuICAgICAgdHJ5TG9jOiBcInJvb3RcIlxuICAgIH1dLCB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyksIHRoaXMucmVzZXQoITApO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGl0ZXJhYmxlLm5leHQpIHJldHVybiBpdGVyYWJsZTtcblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsXG4gICAgICAgICAgICBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICBmb3IgKDsgKytpIDwgaXRlcmFibGUubGVuZ3RoOykge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkgcmV0dXJuIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXSwgbmV4dC5kb25lID0gITEsIG5leHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5leHQudmFsdWUgPSB1bmRlZmluZWQsIG5leHQuZG9uZSA9ICEwLCBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBuZXh0OiBkb25lUmVzdWx0XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICBkb25lOiAhMFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZShHcCwgXCJjb25zdHJ1Y3RvclwiLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSksIGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgXCJjb25zdHJ1Y3RvclwiLCBHZW5lcmF0b3JGdW5jdGlvbiksIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKSwgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24gKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBnZW5GdW4gJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiAhIWN0b3IgJiYgKGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8IFwiR2VuZXJhdG9yRnVuY3Rpb25cIiA9PT0gKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSk7XG4gIH0sIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uIChnZW5GdW4pIHtcbiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpIDogKGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIikpLCBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCksIGdlbkZ1bjtcbiAgfSwgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX19hd2FpdDogYXJnXG4gICAgfTtcbiAgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSwgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBhc3luY0l0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yLCBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24gKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIHZvaWQgMCA9PT0gUHJvbWlzZUltcGwgJiYgKFByb21pc2VJbXBsID0gUHJvbWlzZSk7XG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSwgUHJvbWlzZUltcGwpO1xuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbikgPyBpdGVyIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICB9KTtcbiAgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKSwgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JcIiksIGRlZmluZShHcCwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIGRlZmluZShHcCwgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH0pLCBleHBvcnRzLmtleXMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlzLnJldmVyc2UoKSwgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGZvciAoOyBrZXlzLmxlbmd0aDspIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSByZXR1cm4gbmV4dC52YWx1ZSA9IGtleSwgbmV4dC5kb25lID0gITEsIG5leHQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXh0LmRvbmUgPSAhMCwgbmV4dDtcbiAgICB9O1xuICB9LCBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcywgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG4gICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIGlmICh0aGlzLnByZXYgPSAwLCB0aGlzLm5leHQgPSAwLCB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkLCB0aGlzLmRvbmUgPSAhMSwgdGhpcy5kZWxlZ2F0ZSA9IG51bGwsIHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMuYXJnID0gdW5kZWZpbmVkLCB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwgIXNraXBUZW1wUmVzZXQpIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICBcInRcIiA9PT0gbmFtZS5jaGFyQXQoMCkgJiYgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiYgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSAmJiAodGhpc1tuYW1lXSA9IHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzdG9wOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgdGhpcy5kb25lID0gITA7XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO1xuICAgICAgaWYgKFwidGhyb3dcIiA9PT0gcm9vdFJlY29yZC50eXBlKSB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24gZGlzcGF0Y2hFeGNlcHRpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB0aHJvdyBleGNlcHRpb247XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZXR1cm4gcmVjb3JkLnR5cGUgPSBcInRocm93XCIsIHJlY29yZC5hcmcgPSBleGNlcHRpb24sIGNvbnRleHQubmV4dCA9IGxvYywgY2F1Z2h0ICYmIChjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiLCBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZCksICEhY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXSxcbiAgICAgICAgICAgIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgIGlmIChcInJvb3RcIiA9PT0gZW50cnkudHJ5TG9jKSByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIiksXG4gICAgICAgICAgICAgIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgITApO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCAhMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghaGFzRmluYWxseSkgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGFicnVwdDogZnVuY3Rpb24gYWJydXB0KHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJiB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpbmFsbHlFbnRyeSAmJiAoXCJicmVha1wiID09PSB0eXBlIHx8IFwiY29udGludWVcIiA9PT0gdHlwZSkgJiYgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiYgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jICYmIChmaW5hbGx5RW50cnkgPSBudWxsKTtcbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmV0dXJuIHJlY29yZC50eXBlID0gdHlwZSwgcmVjb3JkLmFyZyA9IGFyZywgZmluYWxseUVudHJ5ID8gKHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jLCBDb250aW51ZVNlbnRpbmVsKSA6IHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAoXCJ0aHJvd1wiID09PSByZWNvcmQudHlwZSkgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIHJldHVybiBcImJyZWFrXCIgPT09IHJlY29yZC50eXBlIHx8IFwiY29udGludWVcIiA9PT0gcmVjb3JkLnR5cGUgPyB0aGlzLm5leHQgPSByZWNvcmQuYXJnIDogXCJyZXR1cm5cIiA9PT0gcmVjb3JkLnR5cGUgPyAodGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnLCB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCIsIHRoaXMubmV4dCA9IFwiZW5kXCIpIDogXCJub3JtYWxcIiA9PT0gcmVjb3JkLnR5cGUgJiYgYWZ0ZXJMb2MgJiYgKHRoaXMubmV4dCA9IGFmdGVyTG9jKSwgQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuICAgIGZpbmlzaDogZnVuY3Rpb24gZmluaXNoKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykgcmV0dXJuIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KGVudHJ5KSwgQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24gX2NhdGNoKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgICBpZiAoXCJ0aHJvd1wiID09PSByZWNvcmQudHlwZSkge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uIGRlbGVnYXRlWWllbGQoaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfSwgXCJuZXh0XCIgPT09IHRoaXMubWV0aG9kICYmICh0aGlzLmFyZyA9IHVuZGVmaW5lZCksIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9LCBleHBvcnRzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9yZWdlbmVyYXRvclJ1bnRpbWUsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIChtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgfSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzKSwgX3R5cGVvZihvYmopO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL3JlZ2VuZXJhdG9yUnVudGltZVwiKSgpO1xuIiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgRXhlY3V0YWJsZUJhc2UgfSBmcm9tIFwiLi4vdXRpbHMvZXhlY3V0YWJsZS1iYXNlXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBBY3Rpb25QbGF5ZXIgZXh0ZW5kcyBFeGVjdXRhYmxlQmFzZSB7XHJcblxyXG5cdHByb3RlY3RlZCByZWFkb25seSBleGVjdXRvcjogQWN0aW9uRXhlY3V0b3I7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5leGVjdXRvciA9IGV4ZWN1dG9yO1xyXG5cdH1cclxuXHJcblxyXG5cclxuXHRhYnN0cmFjdCBzZWVrQnlUaW1lKHRpbWU6IG51bWJlcik6IG51bWJlcjtcclxuXHJcblx0YWJzdHJhY3Qgc2Vla0J5UGFnZShwYWdlTnVtYmVyOiBudW1iZXIpOiBudW1iZXI7XHJcblxyXG5cdHByb3RlY3RlZCBhYnN0cmFjdCBleGVjdXRlQWN0aW9ucygpOiB2b2lkO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgQWN0aW9uUGxheWVyIH07IiwiZW51bSBBY3Rpb25UeXBlIHtcclxuXHJcblx0LypcclxuXHQgKiBUb29sIGFjdGlvbnNcclxuXHQgKi9cclxuXHRUT09MX0JFR0lOLFxyXG5cdFRPT0xfRVhFQ1VURSxcclxuXHRUT09MX0VORCxcclxuXHJcblx0LypcclxuXHQgKiBTdHJva2UgYWN0aW9uc1xyXG5cdCAqL1xyXG5cdFBFTiwgSElHSExJR0hURVIsIFBPSU5URVIsXHJcblxyXG5cdC8qXHJcblx0ICogRm9ybSBhY3Rpb25zXHJcblx0ICovXHJcblx0QVJST1csIExJTkUsIFJFQ1RBTkdMRSwgRUxMSVBTRSxcclxuXHJcblx0LypcclxuXHQgKiBUZXh0IGFjdGlvbnNcclxuXHQgKi9cclxuXHRURVhULCBURVhUX0NIQU5HRSwgVEVYVF9GT05UX0NIQU5HRSwgVEVYVF9MT0NBVElPTl9DSEFOR0UsIFRFWFRfUkVNT1ZFLCBURVhUX1NFTEVDVElPTixcclxuXHJcblx0TEFURVgsIExBVEVYX0ZPTlRfQ0hBTkdFLFxyXG5cclxuXHQvKlxyXG5cdCAqIFJlYXJyYW5nZW1lbnQgYWN0aW9uc1xyXG5cdCAqL1xyXG5cdFVORE8sIFJFRE8sIENMT05FLCBTRUxFQ1QsIFNFTEVDVF9HUk9VUCwgUlVCQkVSLCBDTEVBUl9TSEFQRVMsXHJcblxyXG5cdC8qXHJcblx0ICogWm9vbSBhY3Rpb25zXHJcblx0ICovXHJcblx0UEFOTklORywgRVhURU5EX1ZJRVcsIFpPT00sIFpPT01fT1VULFxyXG5cclxuXHQvKlxyXG5cdCAqIEF0b21pYyBhY3Rpb25zXHJcblx0ICovXHJcblx0TkVYVF9QQUdFLCBLRVksXHJcblxyXG5cdFNUQVRJQyxcclxuXHJcblx0UEFHRSxcclxuXHJcblx0UlVCQkVSX0VYVCwgVEVYVF9TRUxFQ1RJT05fRVhUXHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBBY3Rpb25UeXBlIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgVG9vbCB9IGZyb20gXCIuLi90b29sL3Rvb2xcIjtcclxuaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi4vdG9vbC90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgU2xpZGVEb2N1bWVudCB9IGZyb20gXCIuLi9tb2RlbC9kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuLi90b29sL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSBcIi4uL3V0aWxzL29ic2VydmFibGVcIjtcclxuaW1wb3J0IHsgUmVuZGVyQ29udHJvbGxlciB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyLWNvbnRyb2xsZXJcIjtcclxuXHJcbmNsYXNzIFN0cmVhbUFjdGlvbkV4ZWN1dG9yIGltcGxlbWVudHMgQWN0aW9uRXhlY3V0b3Ige1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHJlbmRlckNvbnRyb2xsZXI6IFJlbmRlckNvbnRyb2xsZXI7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgdG9vbENvbnRleHQ6IFRvb2xDb250ZXh0O1xyXG5cclxuXHRwcml2YXRlIGRvY3VtZW50OiBTbGlkZURvY3VtZW50O1xyXG5cclxuXHRwcml2YXRlIHRvb2w6IFRvb2w7XHJcblxyXG5cdHByaXZhdGUgcHJldmlvdXNUb29sOiBUb29sO1xyXG5cclxuXHRwcml2YXRlIHBhZ2VOdW1iZXI6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSBwYWdlSW5kZXhPYnNlcnZlcjogT2JzZXJ2ZXI8bnVtYmVyPjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHJlbmRlckNvbnRyb2xsZXI6IFJlbmRlckNvbnRyb2xsZXIpIHtcclxuXHRcdHRoaXMucmVuZGVyQ29udHJvbGxlciA9IHJlbmRlckNvbnRyb2xsZXI7XHJcblx0XHR0aGlzLnRvb2xDb250ZXh0ID0gbmV3IFRvb2xDb250ZXh0KHJlbmRlckNvbnRyb2xsZXIpO1xyXG5cdH1cclxuXHJcblx0c2V0T25TZWxlY3RQYWdlSW5kZXgob2JzZXJ2ZXI6IE9ic2VydmVyPG51bWJlcj4pOiB2b2lkIHtcclxuXHRcdHRoaXMucGFnZUluZGV4T2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuXHR9XHJcblxyXG5cdHNldEtleUV2ZW50KGtleUV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnRvb2xDb250ZXh0LmtleUV2ZW50ID0ga2V5RXZlbnQ7XHJcblx0fVxyXG5cclxuXHRzZXRTZWVrKHNlZWs6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMucmVuZGVyQ29udHJvbGxlci5zZXRTZWVrKHNlZWspO1xyXG5cdH1cclxuXHJcblx0c2V0RG9jdW1lbnQoZG9jdW1lbnQ6IFNsaWRlRG9jdW1lbnQpIHtcclxuXHRcdHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcclxuXHR9XHJcblxyXG5cdHNldFBhZ2VOdW1iZXIocGFnZU51bWJlcjogbnVtYmVyKSB7XHJcblx0XHRjb25zdCBwYWdlID0gdGhpcy5kb2N1bWVudC5nZXRQYWdlKHBhZ2VOdW1iZXIpO1xyXG5cclxuXHRcdHRoaXMucGFnZU51bWJlciA9IHBhZ2VOdW1iZXI7XHJcblx0XHR0aGlzLnRvb2xDb250ZXh0LnBhZ2UgPSBwYWdlO1xyXG5cclxuXHRcdHRoaXMucmVuZGVyQ29udHJvbGxlci5zZXRQYWdlKHBhZ2UpO1xyXG5cclxuXHRcdGlmICh0aGlzLnBhZ2VJbmRleE9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMucGFnZUluZGV4T2JzZXJ2ZXIocGFnZU51bWJlcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXRUb29sKHRvb2w6IFRvb2wpOiB2b2lkIHtcclxuXHRcdGlmICghdG9vbCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUb29sIG11c3Qgbm90IGJlIG51bGxcIik7XHJcblx0XHR9XHJcblx0XHRpZiAoIXRoaXMudG9vbCAmJiB0aGlzLnRvb2wgPT09IHRvb2wpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2V0UHJldmlvdXNUb29sKHRoaXMudG9vbCk7XHJcblxyXG5cdFx0dGhpcy50b29sID0gdG9vbDtcclxuXHR9XHJcblxyXG5cdHNlbGVjdEFuZEV4ZWN1dGVUb29sKHRvb2w6IEF0b21pY1Rvb2wpOiB2b2lkIHtcclxuXHRcdHRoaXMuZXhlY3V0ZUF0b21pY1Rvb2wodG9vbCk7XHJcblx0fVxyXG5cclxuXHRiZWdpblRvb2wocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnRvb2wuYmVnaW4ocG9pbnQuY2xvbmUoKSwgdGhpcy50b29sQ29udGV4dCk7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlVG9vbChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudG9vbC5leGVjdXRlKHBvaW50LmNsb25lKCkpO1xyXG5cdH1cclxuXHJcblx0ZW5kVG9vbChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudG9vbC5lbmQocG9pbnQuY2xvbmUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGV4ZWN1dGVBdG9taWNUb29sKHRvb2w6IEF0b21pY1Rvb2wpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHBvaW50ID0gUGVuUG9pbnQuY3JlYXRlWmVybygpO1xyXG5cclxuXHRcdHRoaXMuc2V0VG9vbCh0b29sKTtcclxuXHJcblx0XHR0aGlzLmJlZ2luVG9vbChwb2ludCk7XHJcblx0XHR0aGlzLmV4ZWN1dGVUb29sKHBvaW50KTtcclxuXHRcdHRoaXMuZW5kVG9vbChwb2ludCk7XHJcblxyXG5cdFx0dGhpcy5zZXRQcmV2aW91c1Rvb2wodGhpcy5wcmV2aW91c1Rvb2wpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXRQcmV2aW91c1Rvb2wodG9vbDogVG9vbCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0b29sKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodG9vbCBpbnN0YW5jZW9mIEF0b21pY1Rvb2wpIHtcclxuXHRcdFx0Ly8gRG8gbm90IHJlbWVtYmVyIGF0b21pYyB0b29scy5cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucHJldmlvdXNUb29sID0gdG9vbDtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFN0cmVhbUFjdGlvbkV4ZWN1dG9yIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIEFjdGlvbiB7XHJcblxyXG5cdGtleUV2ZW50OiBLZXlib2FyZEV2ZW50O1xyXG5cclxuXHR0aW1lc3RhbXA6IG51bWJlcjtcclxuXHJcblxyXG5cdGFic3RyYWN0IGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZDtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IEFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IEJydXNoQWN0aW9uIH0gZnJvbSBcIi4vYnJ1c2guYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFycm93VG9vbCB9IGZyb20gXCIuLi90b29sL2Fycm93LnRvb2xcIjtcclxuXHJcbmNsYXNzIEFycm93QWN0aW9uIGV4dGVuZHMgQnJ1c2hBY3Rpb24ge1xyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0Y29uc3QgdG9vbCA9IG5ldyBBcnJvd1Rvb2woKTtcclxuXHRcdHRvb2wuc2hhcGVIYW5kbGUgPSB0aGlzLnNoYXBlSGFuZGxlO1xyXG5cdFx0dG9vbC5icnVzaCA9IHRoaXMuYnJ1c2g7XHJcblxyXG5cdFx0ZXhlY3V0b3Iuc2V0S2V5RXZlbnQodGhpcy5rZXlFdmVudCk7XHJcblx0XHRleGVjdXRvci5zZXRUb29sKHRvb2wpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IEFycm93QWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEJydXNoIH0gZnJvbSBcIi4uL3BhaW50L2JydXNoXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBCcnVzaEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdHNoYXBlSGFuZGxlOiBudW1iZXI7XHJcblxyXG5cdGJydXNoOiBCcnVzaDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHNoYXBlSGFuZGxlOiBudW1iZXIsIGJydXNoPzogQnJ1c2gpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5zaGFwZUhhbmRsZSA9IHNoYXBlSGFuZGxlO1xyXG5cdFx0dGhpcy5icnVzaCA9IGJydXNoO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IEJydXNoQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IENsZWFyU2hhcGVzVG9vbCB9IGZyb20gXCIuLi90b29sL2NsZWFyLXNoYXBlcy50b29sXCI7XHJcblxyXG5jbGFzcyBDbGVhclNoYXBlc0FjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZWxlY3RBbmRFeGVjdXRlVG9vbChuZXcgQ2xlYXJTaGFwZXNUb29sKCkpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IENsZWFyU2hhcGVzQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IENsb25lVG9vbCB9IGZyb20gXCIuLi90b29sL2Nsb25lLnRvb2xcIjtcclxuXHJcbmNsYXNzIENsb25lQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNldEtleUV2ZW50KHRoaXMua2V5RXZlbnQpO1xyXG5cdFx0ZXhlY3V0b3Iuc2V0VG9vbChuZXcgQ2xvbmVUb29sKCkpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IENsb25lQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgQnJ1c2hBY3Rpb24gfSBmcm9tIFwiLi9icnVzaC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgRWxsaXBzZVRvb2wgfSBmcm9tIFwiLi4vdG9vbC9lbGxpcHNlLnRvb2xcIjtcclxuXHJcbmNsYXNzIEVsbGlwc2VBY3Rpb24gZXh0ZW5kcyBCcnVzaEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRjb25zdCB0b29sID0gbmV3IEVsbGlwc2VUb29sKCk7XHJcblx0XHR0b29sLnNoYXBlSGFuZGxlID0gdGhpcy5zaGFwZUhhbmRsZTtcclxuXHRcdHRvb2wuYnJ1c2ggPSB0aGlzLmJydXNoO1xyXG5cclxuXHRcdGV4ZWN1dG9yLnNldEtleUV2ZW50KHRoaXMua2V5RXZlbnQpO1xyXG5cdFx0ZXhlY3V0b3Iuc2V0VG9vbCh0b29sKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBFbGxpcHNlQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgRXh0ZW5kVmlld1Rvb2wgfSBmcm9tIFwiLi4vdG9vbC9leHRlbmQtdmlldy50b29sXCI7XHJcblxyXG5jbGFzcyBFeHRlbmRWaWV3QWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSByZWN0OiBSZWN0YW5nbGU7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihyZWN0OiBSZWN0YW5nbGUpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5yZWN0ID0gcmVjdDtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBFeHRlbmRWaWV3VG9vbCh0aGlzLnJlY3QpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBFeHRlbmRWaWV3QWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgQnJ1c2hBY3Rpb24gfSBmcm9tIFwiLi9icnVzaC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgSGlnaGxpZ2h0ZXJUb29sIH0gZnJvbSBcIi4uL3Rvb2wvaGlnaGxpZ2h0ZXIudG9vbFwiO1xyXG5cclxuY2xhc3MgSGlnaGxpZ2h0ZXJBY3Rpb24gZXh0ZW5kcyBCcnVzaEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRjb25zdCB0b29sID0gbmV3IEhpZ2hsaWdodGVyVG9vbCgpO1xyXG5cdFx0dG9vbC5zaGFwZUhhbmRsZSA9IHRoaXMuc2hhcGVIYW5kbGU7XHJcblx0XHR0b29sLmJydXNoID0gdGhpcy5icnVzaDtcclxuXHJcblx0XHRleGVjdXRvci5zZXRUb29sKHRvb2wpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IEhpZ2hsaWdodGVyQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcblxyXG5jbGFzcyBLZXlBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2V0S2V5RXZlbnQodGhpcy5rZXlFdmVudCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgS2V5QWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL3BhaW50L2NvbG9yXCI7XHJcbmltcG9ydCB7IEZvbnQgfSBmcm9tIFwiLi4vcGFpbnQvZm9udFwiO1xyXG5pbXBvcnQgeyBMYXRleEZvbnRUb29sIH0gZnJvbSBcIi4uL3Rvb2wvbGF0ZXgtZm9udC50b29sXCI7XHJcblxyXG5jbGFzcyBMYXRleEZvbnRBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGZvbnQ6IEZvbnQ7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgdGV4dENvbG9yOiBDb2xvcjtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSB0ZXh0QXR0cmlidXRlczogTWFwPHN0cmluZywgYm9vbGVhbj47XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihoYW5kbGU6IG51bWJlciwgZm9udDogRm9udCwgdGV4dENvbG9yOiBDb2xvciwgdGV4dEF0dHJpYnV0ZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlID0gaGFuZGxlO1xyXG5cdFx0dGhpcy5mb250ID0gZm9udDtcclxuXHRcdHRoaXMudGV4dENvbG9yID0gdGV4dENvbG9yO1xyXG5cdFx0dGhpcy50ZXh0QXR0cmlidXRlcyA9IHRleHRBdHRyaWJ1dGVzO1xyXG5cdH1cdFxyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2VsZWN0QW5kRXhlY3V0ZVRvb2wobmV3IExhdGV4Rm9udFRvb2wodGhpcy5oYW5kbGUsIHRoaXMuZm9udCwgdGhpcy50ZXh0Q29sb3IsIHRoaXMudGV4dEF0dHJpYnV0ZXMpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBMYXRleEZvbnRBY3Rpb24gfTsiLCJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcclxuaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgTGF0ZXhUb29sIH0gZnJvbSBcIi4uL3Rvb2wvbGF0ZXgudG9vbFwiO1xyXG5cclxuY2xhc3MgTGF0ZXhBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoaGFuZGxlOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUgPSBoYW5kbGU7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2V0S2V5RXZlbnQodGhpcy5rZXlFdmVudCk7XHJcblx0XHRleGVjdXRvci5zZXRUb29sKG5ldyBMYXRleFRvb2wodGhpcy5oYW5kbGUpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBMYXRleEFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IEJydXNoQWN0aW9uIH0gZnJvbSBcIi4vYnJ1c2guYWN0aW9uXCI7XHJcbmltcG9ydCB7IExpbmVUb29sIH0gZnJvbSBcIi4uL3Rvb2wvbGluZS50b29sXCI7XHJcblxyXG5jbGFzcyBMaW5lQWN0aW9uIGV4dGVuZHMgQnJ1c2hBY3Rpb24ge1xyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0Y29uc3QgdG9vbCA9IG5ldyBMaW5lVG9vbCgpO1xyXG5cdFx0dG9vbC5zaGFwZUhhbmRsZSA9IHRoaXMuc2hhcGVIYW5kbGU7XHJcblx0XHR0b29sLmJydXNoID0gdGhpcy5icnVzaDtcclxuXHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wodG9vbCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgTGluZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5cclxuY2xhc3MgUGFnZUFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgcGFnZU51bWJlcjogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IocGFnZU51bWJlcjogbnVtYmVyKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMucGFnZU51bWJlciA9IHBhZ2VOdW1iZXI7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2V0UGFnZU51bWJlcih0aGlzLnBhZ2VOdW1iZXIpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGFnZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBQYW5Ub29sIH0gZnJvbSBcIi4uL3Rvb2wvcGFuLnRvb2xcIjtcclxuXHJcbmNsYXNzIFBhbkFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wobmV3IFBhblRvb2woKSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUGFuQWN0aW9uIH07IiwiaW1wb3J0IHsgUHJvZ3Jlc3NpdmVEYXRhVmlldyB9IGZyb20gXCIuL3Byb2dyZXNzaXZlLWRhdGEtdmlld1wiO1xyXG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvblR5cGUgfSBmcm9tIFwiLi4vYWN0aW9uLXR5cGVcIjtcclxuaW1wb3J0IHsgUGVuUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGVuLXBvaW50XCI7XHJcbmltcG9ydCB7IFBlbkFjdGlvbiB9IGZyb20gXCIuLi9wZW4uYWN0aW9uXCI7XHJcbmltcG9ydCB7IEJydXNoIH0gZnJvbSBcIi4uLy4uL3BhaW50L2JydXNoXCI7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uLy4uL3BhaW50L2NvbG9yXCI7XHJcbmltcG9ydCB7IEhpZ2hsaWdodGVyQWN0aW9uIH0gZnJvbSBcIi4uL2hpZ2hsaWdodGVyLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBQb2ludGVyQWN0aW9uIH0gZnJvbSBcIi4uL3BvaW50ZXIuYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFycm93QWN0aW9uIH0gZnJvbSBcIi4uL2Fycm93LmFjdGlvblwiO1xyXG5pbXBvcnQgeyBMaW5lQWN0aW9uIH0gZnJvbSBcIi4uL2xpbmUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZUFjdGlvbiB9IGZyb20gXCIuLi9yZWN0YW5nbGUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IEVsbGlwc2VBY3Rpb24gfSBmcm9tIFwiLi4vZWxsaXBzZS5hY3Rpb25cIjtcclxuaW1wb3J0IHsgVG9vbEJlZ2luQWN0aW9uIH0gZnJvbSBcIi4uL3Rvb2wtYmVnaW4uYWN0aW9uXCI7XHJcbmltcG9ydCB7IFRvb2xFeGVjdXRlQWN0aW9uIH0gZnJvbSBcIi4uL3Rvb2wtZXhlY3V0ZS5hY3Rpb25cIjtcclxuaW1wb3J0IHsgVG9vbEVuZEFjdGlvbiB9IGZyb20gXCIuLi90b29sLWVuZC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgVW5kb0FjdGlvbiB9IGZyb20gXCIuLi91bmRvLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBSZWRvQWN0aW9uIH0gZnJvbSBcIi4uL3JlZG8uYWN0aW9uXCI7XHJcbmltcG9ydCB7IENsZWFyU2hhcGVzQWN0aW9uIH0gZnJvbSBcIi4uL2NsZWFyLXNoYXBlcy5hY3Rpb25cIjtcclxuaW1wb3J0IHsgS2V5QWN0aW9uIH0gZnJvbSBcIi4uL2tleS5hY3Rpb25cIjtcclxuaW1wb3J0IHsgQ2xvbmVBY3Rpb24gfSBmcm9tIFwiLi4vY2xvbmUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFNlbGVjdEFjdGlvbiB9IGZyb20gXCIuLi9zZWxlY3QuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFNlbGVjdEdyb3VwQWN0aW9uIH0gZnJvbSBcIi4uL3NlbGVjdC1ncm91cC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgUGFuQWN0aW9uIH0gZnJvbSBcIi4uL3Bhbi5hY3Rpb25cIjtcclxuaW1wb3J0IHsgRXh0ZW5kVmlld0FjdGlvbiB9IGZyb20gXCIuLi9leHRlbmQtdmlldy5hY3Rpb25cIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBab29tQWN0aW9uIH0gZnJvbSBcIi4uL3pvb20uYWN0aW9uXCI7XHJcbmltcG9ydCB7IFpvb21PdXRBY3Rpb24gfSBmcm9tIFwiLi4vem9vbS1vdXQuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFJ1YmJlckFjdGlvbiB9IGZyb20gXCIuLi9ydWJiZXIuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFRleHRBY3Rpb24gfSBmcm9tIFwiLi4vdGV4dC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgVGV4dEZvbnRBY3Rpb24gfSBmcm9tIFwiLi4vdGV4dC1mb250LmFjdGlvblwiO1xyXG5pbXBvcnQgeyBUZXh0Q2hhbmdlQWN0aW9uIH0gZnJvbSBcIi4uL3RleHQtY2hhbmdlLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBUZXh0TW92ZUFjdGlvbiB9IGZyb20gXCIuLi90ZXh0LW1vdmUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRleHRSZW1vdmVBY3Rpb24gfSBmcm9tIFwiLi4vdGV4dC1yZW1vdmUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IEZvbnQgfSBmcm9tIFwiLi4vLi4vcGFpbnQvZm9udFwiO1xyXG5pbXBvcnQgeyBUZXh0SGlnaGxpZ2h0QWN0aW9uIH0gZnJvbSBcIi4uL3RleHQtaGlnaGxpZ2h0LmFjdGlvblwiO1xyXG5pbXBvcnQgeyBMYXRleEFjdGlvbiB9IGZyb20gXCIuLi9sYXRleC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgTGF0ZXhGb250QWN0aW9uIH0gZnJvbSBcIi4uL2xhdGV4LWZvbnQuYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBBY3Rpb25QYXJzZXIge1xyXG5cclxuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBLRVlfRVZFTlRfTUFTSyA9IDE7XHJcblxyXG5cclxuXHRzdGF0aWMgcGFyc2UoZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcsIHR5cGU6IEFjdGlvblR5cGUsIGxlbmd0aDogbnVtYmVyKTogQWN0aW9uIHtcclxuXHRcdGxldCBhY3Rpb246IEFjdGlvbiA9IG51bGw7XHJcblx0XHRjb25zdCBrZXlFdmVudDogS2V5Ym9hcmRFdmVudCA9IHRoaXMucGFyc2VBY3Rpb25IZWFkZXIoZGF0YVZpZXcpO1xyXG5cdFx0bGVuZ3RoIC09IDEzOyAvLyBBY3Rpb24gaGVhZGVyIGhhcyBhIGxlbmd0aCBvZiAxMyBieXRlcy5cclxuXHJcblx0XHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLkNMRUFSX1NIQVBFUzpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgQ2xlYXJTaGFwZXNBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuVU5ETzpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgVW5kb0FjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5SRURPOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMuYXRvbWljQWN0aW9uKGRhdGFWaWV3LCBSZWRvQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLktFWTpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgS2V5QWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlBFTjpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLnRvb2xCcnVzaEFjdGlvbihkYXRhVmlldywgUGVuQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLkhJR0hMSUdIVEVSOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudG9vbEJydXNoQWN0aW9uKGRhdGFWaWV3LCBIaWdobGlnaHRlckFjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5QT0lOVEVSOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudG9vbEJydXNoQWN0aW9uKGRhdGFWaWV3LCBQb2ludGVyQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLkFSUk9XOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudG9vbEJydXNoQWN0aW9uKGRhdGFWaWV3LCBBcnJvd0FjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5MSU5FOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudG9vbEJydXNoQWN0aW9uKGRhdGFWaWV3LCBMaW5lQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlJFQ1RBTkdMRTpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLnRvb2xCcnVzaEFjdGlvbihkYXRhVmlldywgUmVjdGFuZ2xlQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLkVMTElQU0U6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy50b29sQnJ1c2hBY3Rpb24oZGF0YVZpZXcsIEVsbGlwc2VBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuQ0xPTkU6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5hdG9taWNBY3Rpb24oZGF0YVZpZXcsIENsb25lQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlNFTEVDVDpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgU2VsZWN0QWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlNFTEVDVF9HUk9VUDpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgU2VsZWN0R3JvdXBBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuTEFURVg6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy50ZXh0QWN0aW9uKGRhdGFWaWV3LCBMYXRleEFjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5MQVRFWF9GT05UX0NIQU5HRTpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmxhdGV4Rm9udEFjdGlvbihkYXRhVmlldyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5URVhUOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudGV4dEFjdGlvbihkYXRhVmlldywgVGV4dEFjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5URVhUX0NIQU5HRTpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLnRleHRDaGFuZ2VBY3Rpb24oZGF0YVZpZXcpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuVEVYVF9GT05UX0NIQU5HRTpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLnRleHRGb250QWN0aW9uKGRhdGFWaWV3KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRFWFRfTE9DQVRJT05fQ0hBTkdFOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudGV4dE1vdmVBY3Rpb24oZGF0YVZpZXcpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuVEVYVF9SRU1PVkU6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy50ZXh0UmVtb3ZlQWN0aW9uKGRhdGFWaWV3KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRFWFRfU0VMRUNUSU9OX0VYVDpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLnRleHRIaWdobGlnaHRBY3Rpb24oZGF0YVZpZXcpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuVE9PTF9CRUdJTjpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLnRvb2xEcmFnQWN0aW9uKGRhdGFWaWV3LCBUb29sQmVnaW5BY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuVE9PTF9FWEVDVVRFOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudG9vbERyYWdBY3Rpb24oZGF0YVZpZXcsIFRvb2xFeGVjdXRlQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRPT0xfRU5EOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMudG9vbERyYWdBY3Rpb24oZGF0YVZpZXcsIFRvb2xFbmRBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEFjdGlvblR5cGUuUEFOTklORzpcclxuXHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgUGFuQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLkVYVEVORF9WSUVXOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMuZXh0ZW5kVmlld0FjdGlvbihkYXRhVmlldyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5aT09NOlxyXG5cdFx0XHRcdGlmIChsZW5ndGggPCAxKSB7XHJcblx0XHRcdFx0XHRhY3Rpb24gPSB0aGlzLmF0b21pY0FjdGlvbihkYXRhVmlldywgWm9vbUFjdGlvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0YWN0aW9uID0gdGhpcy50b29sQnJ1c2hBY3Rpb24oZGF0YVZpZXcsIFpvb21BY3Rpb24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlpPT01fT1VUOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMuYXRvbWljQWN0aW9uKGRhdGFWaWV3LCBab29tT3V0QWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlJVQkJFUl9FWFQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5ydWJiZXJBY3Rpb24oZGF0YVZpZXcpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChhY3Rpb24pIHtcclxuXHRcdFx0YWN0aW9uLmtleUV2ZW50ID0ga2V5RXZlbnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGFjdGlvbjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHBhcnNlQWN0aW9uSGVhZGVyKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogS2V5Ym9hcmRFdmVudCB7XHJcblx0XHRjb25zdCBoZWFkZXIgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0bGV0IGtleUV2ZW50OiBLZXlib2FyZEV2ZW50ID0gbnVsbDtcclxuXHJcblx0XHRpZiAoKGhlYWRlciAmIHRoaXMuS0VZX0VWRU5UX01BU0spID09IHRoaXMuS0VZX0VWRU5UX01BU0spIHtcclxuXHRcdFx0a2V5RXZlbnQgPSB0aGlzLnBhcnNlS2V5RXZlbnQoZGF0YVZpZXcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBrZXlFdmVudDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHBhcnNlS2V5RXZlbnQoZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcpOiBLZXlib2FyZEV2ZW50IHtcclxuXHRcdGNvbnN0IGtleUNvZGUgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0Y29uc3QgbW9kaWZpZXJzID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IGFjdGlvblR5cGUgPSBkYXRhVmlldy5nZXRJbnQ4KCk7XHJcblx0XHRsZXQgdHlwZUFyZzogc3RyaW5nO1xyXG5cclxuXHRcdHN3aXRjaCAoYWN0aW9uVHlwZSkge1xyXG5cdFx0XHRjYXNlIDA6XHJcblx0XHRcdFx0dHlwZUFyZyA9IFwia2V5ZG93blwiO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6XHJcblx0XHRcdFx0dHlwZUFyZyA9IFwia2V5dXBcIjtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAyOlxyXG5cdFx0XHRcdHR5cGVBcmcgPSBcImtleXByZXNzXCI7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBrZXkgZXZlbnQgdHlwZVwiKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKiogVGhlIFNoaWZ0IGtleSBtb2RpZmllciBjb25zdGFudC4gKi9cclxuXHRcdGNvbnN0IFNISUZUX01BU0sgPSAxIDw8IDE7XHJcblx0XHQvKiogVGhlIENvbnRyb2wga2V5IG1vZGlmaWVyIGNvbnN0YW50LiAqL1xyXG5cdFx0Y29uc3QgQ1RSTF9NQVNLID0gMSA8PCAyO1xyXG5cdFx0LyoqIFRoZSBBbHQga2V5IG1vZGlmaWVyIGNvbnN0YW50LiAqL1xyXG5cdFx0Y29uc3QgQUxUX01BU0sgPSAxIDw8IDM7XHJcblxyXG5cdFx0cmV0dXJuIG5ldyBLZXlib2FyZEV2ZW50KHR5cGVBcmcsIHtcclxuXHRcdFx0Ly9jb2RlOiBrZXlDb2RlLFxyXG5cdFx0XHRzaGlmdEtleTogKG1vZGlmaWVycyAmIFNISUZUX01BU0spICE9IDAsXHJcblx0XHRcdGN0cmxLZXk6IChtb2RpZmllcnMgJiBDVFJMX01BU0spICE9IDAsXHJcblx0XHRcdGFsdEtleTogKG1vZGlmaWVycyAmIEFMVF9NQVNLKSAhPSAwXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIGF0b21pY0FjdGlvbjxUPihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldywgdHlwZTogeyBuZXcoKTogVCB9KTogVCB7XHJcblx0XHRyZXR1cm4gbmV3IHR5cGUoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHRvb2xCcnVzaEFjdGlvbjxUPihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldywgdHlwZTogeyBuZXcoc2hhcGVIYW5kbGU6IG51bWJlciwgYnJ1c2g6IEJydXNoKTogVCB9KTogVCB7XHJcblx0XHRjb25zdCBzaGFwZUhhbmRsZSA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblxyXG5cdFx0Y29uc3QgcmdiYSA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblx0XHRjb25zdCBsaW5lQ2FwID0gZGF0YVZpZXcuZ2V0SW50OCgpO1xyXG5cdFx0Y29uc3QgYnJ1c2hXaWR0aCA9IGRhdGFWaWV3LmdldEZsb2F0NjQoKTtcclxuXHJcblx0XHRjb25zdCBjb2xvciA9IENvbG9yLmZyb21SR0JOdW1iZXIocmdiYSk7XHJcblx0XHRjb25zdCBicnVzaCA9IG5ldyBCcnVzaChjb2xvciwgYnJ1c2hXaWR0aCk7XHJcblx0XHRjb25zdCBhY3Rpb24gPSBuZXcgdHlwZShzaGFwZUhhbmRsZSwgYnJ1c2gpO1xyXG5cclxuXHRcdHJldHVybiBhY3Rpb247XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBydWJiZXJBY3Rpb248VD4oZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcpOiBSdWJiZXJBY3Rpb24ge1xyXG5cdFx0Y29uc3Qgc2hhcGVIYW5kbGUgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cclxuXHRcdHJldHVybiBuZXcgUnViYmVyQWN0aW9uKHNoYXBlSGFuZGxlKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHRvb2xEcmFnQWN0aW9uPFQ+KGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3LCB0eXBlOiB7IG5ldyhwb2ludDogUGVuUG9pbnQpOiBUIH0pOiBUIHtcclxuXHRcdGNvbnN0IHBvaW50ID0gbmV3IFBlblBvaW50KGRhdGFWaWV3LmdldEZsb2F0MzIoKSwgZGF0YVZpZXcuZ2V0RmxvYXQzMigpLCBkYXRhVmlldy5nZXRGbG9hdDMyKCkpO1xyXG5cdFx0Y29uc3QgYWN0aW9uID0gbmV3IHR5cGUocG9pbnQpO1xyXG5cclxuXHRcdHJldHVybiBhY3Rpb247XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBleHRlbmRWaWV3QWN0aW9uKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogRXh0ZW5kVmlld0FjdGlvbiB7XHJcblx0XHRjb25zdCB4ID0gZGF0YVZpZXcuZ2V0RmxvYXQ2NCgpO1xyXG5cdFx0Y29uc3QgeSA9IGRhdGFWaWV3LmdldEZsb2F0NjQoKTtcclxuXHRcdGNvbnN0IHcgPSBkYXRhVmlldy5nZXRGbG9hdDY0KCk7XHJcblx0XHRjb25zdCBoID0gZGF0YVZpZXcuZ2V0RmxvYXQ2NCgpO1xyXG5cclxuXHRcdHJldHVybiBuZXcgRXh0ZW5kVmlld0FjdGlvbihuZXcgUmVjdGFuZ2xlKHgsIHksIHcsIGgpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHRleHRBY3Rpb248VD4oZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcsIHR5cGU6IHsgbmV3KGhhbmRsZTogbnVtYmVyKTogVCB9KTogVCB7XHJcblx0XHRjb25zdCBoYW5kbGUgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0Y29uc3QgYWN0aW9uID0gbmV3IHR5cGUoaGFuZGxlKTtcclxuXHJcblx0XHRyZXR1cm4gYWN0aW9uO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgdGV4dENoYW5nZUFjdGlvbihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldyk6IFRleHRDaGFuZ2VBY3Rpb24ge1xyXG5cdFx0Y29uc3QgaGFuZGxlID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IHRleHRMZW5ndGggPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0Y29uc3QgdGV4dCA9IGRhdGFWaWV3LmdldFN0cmluZyh0ZXh0TGVuZ3RoKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFRleHRDaGFuZ2VBY3Rpb24oaGFuZGxlLCB0ZXh0KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHRleHRNb3ZlQWN0aW9uKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogVGV4dE1vdmVBY3Rpb24ge1xyXG5cdFx0Y29uc3QgaGFuZGxlID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KGRhdGFWaWV3LmdldEZsb2F0NjQoKSwgZGF0YVZpZXcuZ2V0RmxvYXQ2NCgpKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFRleHRNb3ZlQWN0aW9uKGhhbmRsZSwgcG9pbnQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgdGV4dFJlbW92ZUFjdGlvbihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldyk6IFRleHRSZW1vdmVBY3Rpb24ge1xyXG5cdFx0Y29uc3QgaGFuZGxlID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFRleHRSZW1vdmVBY3Rpb24oaGFuZGxlKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHRleHRIaWdobGlnaHRBY3Rpb24oZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcpOiBUZXh0SGlnaGxpZ2h0QWN0aW9uIHtcclxuXHRcdGNvbnN0IGhhbmRsZSA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblx0XHRjb25zdCByZ2JhID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IGNvdW50ID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHJcblx0XHRjb25zdCBjb2xvciA9IENvbG9yLmZyb21SR0JOdW1iZXIocmdiYSk7XHJcblx0XHRjb25zdCB0ZXh0Qm91bmRzID0gbmV3IEFycmF5PFJlY3RhbmdsZT4oKTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuXHRcdFx0Y29uc3QgeCA9IGRhdGFWaWV3LmdldEZsb2F0NjQoKTtcclxuXHRcdFx0Y29uc3QgeSA9IGRhdGFWaWV3LmdldEZsb2F0NjQoKTtcclxuXHRcdFx0Y29uc3QgdyA9IGRhdGFWaWV3LmdldEZsb2F0NjQoKTtcclxuXHRcdFx0Y29uc3QgaCA9IGRhdGFWaWV3LmdldEZsb2F0NjQoKTtcclxuXHJcblx0XHRcdHRleHRCb3VuZHMucHVzaChuZXcgUmVjdGFuZ2xlKHgsIHksIHcsIGgpKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gbmV3IFRleHRIaWdobGlnaHRBY3Rpb24oaGFuZGxlLCBjb2xvciwgdGV4dEJvdW5kcyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyB0ZXh0Rm9udEFjdGlvbihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldyk6IFRleHRGb250QWN0aW9uIHtcclxuXHRcdGNvbnN0IGhhbmRsZSA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblx0XHRjb25zdCByZ2JhID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IGZvbnRGYW1pbHlMZW5ndGggPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0Y29uc3QgZm9udEZhbWlseSA9IGRhdGFWaWV3LmdldFN0cmluZyhmb250RmFtaWx5TGVuZ3RoKTtcclxuXHRcdGNvbnN0IGZvbnRTaXplID0gZGF0YVZpZXcuZ2V0RmxvYXQ2NCgpO1xyXG5cdFx0Y29uc3QgcG9zdHVyZSA9IGRhdGFWaWV3LmdldEludDgoKTtcclxuXHRcdGNvbnN0IHdlaWdodCA9IGRhdGFWaWV3LmdldEludDgoKTtcclxuXHRcdGNvbnN0IHN0cmlrZXRocm91Z2ggPSBkYXRhVmlldy5nZXRJbnQ4KCkgPiAwO1xyXG5cdFx0Y29uc3QgdW5kZXJsaW5lID0gZGF0YVZpZXcuZ2V0SW50OCgpID4gMDtcclxuXHJcblx0XHRsZXQgZm9udFdlaWdodCA9ICh3ZWlnaHQgKyAxKSAqIDEwMDtcclxuXHRcdGxldCBmb250U3R5bGU7XHJcblxyXG5cdFx0c3dpdGNoIChwb3N0dXJlKSB7XHJcblx0XHRcdGNhc2UgMDpcclxuXHRcdFx0XHRmb250U3R5bGUgPSBcIm5vcm1hbFwiO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6XHJcblx0XHRcdFx0Zm9udFN0eWxlID0gXCJpdGFsaWNcIjtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiVW5zdXBwb3J0ZWQgZm9udCBzdHlsZVwiKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBjb2xvciA9IENvbG9yLmZyb21SR0JOdW1iZXIocmdiYSk7XHJcblx0XHRjb25zdCBmb250ID0gbmV3IEZvbnQoZm9udEZhbWlseSwgZm9udFNpemUsIGZvbnRTdHlsZSwgZm9udFdlaWdodC50b1N0cmluZygpKTtcclxuXHJcblx0XHRjb25zdCBhdHRyaWJ1dGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XHJcblx0XHRhdHRyaWJ1dGVzLnNldChcInN0cmlrZXRocm91Z2hcIiwgc3RyaWtldGhyb3VnaCk7XHJcblx0XHRhdHRyaWJ1dGVzLnNldChcInVuZGVybGluZVwiLCB1bmRlcmxpbmUpO1xyXG5cclxuXHRcdHJldHVybiBuZXcgVGV4dEZvbnRBY3Rpb24oaGFuZGxlLCBmb250LCBjb2xvciwgYXR0cmlidXRlcyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBsYXRleEZvbnRBY3Rpb24oZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcpOiBMYXRleEZvbnRBY3Rpb24ge1xyXG5cdFx0Y29uc3QgaGFuZGxlID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IGZvbnRUeXBlID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IGZvbnRTaXplID0gZGF0YVZpZXcuZ2V0RmxvYXQzMigpO1xyXG5cdFx0Y29uc3QgcmdiYSA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblxyXG5cdFx0Y29uc3QgY29sb3IgPSBDb2xvci5mcm9tUkdCTnVtYmVyKHJnYmEpO1xyXG5cdFx0Y29uc3QgZm9udCA9IG5ldyBGb250KFwiQXJpYWxcIiwgZm9udFNpemUpO1xyXG5cclxuXHRcdGNvbnN0IGF0dHJpYnV0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IExhdGV4Rm9udEFjdGlvbihoYW5kbGUsIGZvbnQsIGNvbG9yLCBhdHRyaWJ1dGVzKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEFjdGlvblBhcnNlciB9OyIsImNsYXNzIFByb2dyZXNzaXZlRGF0YVZpZXcge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGRhdGFWaWV3OiBEYXRhVmlldztcclxuXHJcblx0cHJpdmF0ZSBvZmZzZXQ6IG51bWJlcjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIGJ5dGVPZmZzZXQ/OiBudW1iZXIsIGJ5dGVMZW5ndGg/OiBudW1iZXIpIHtcclxuXHRcdHRoaXMuZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcclxuXHRcdHRoaXMub2Zmc2V0ID0gYnl0ZU9mZnNldCA/IGJ5dGVPZmZzZXQgOiAwO1xyXG5cdH1cclxuXHJcblx0Z2V0IGJ5dGVPZmZzZXQoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLm9mZnNldDtcclxuXHR9XHJcblxyXG5cdHNraXAobjogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5vZmZzZXQgKyBuID49IHRoaXMuZGF0YVZpZXcuYnl0ZUxlbmd0aCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYE91dCBvZiBib3VuZHMgJHt0aGlzLm9mZnNldCArIG59IGV4Y2VlZHMgbGVuZ3RoICR7dGhpcy5kYXRhVmlldy5ieXRlTGVuZ3RofWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub2Zmc2V0ICs9IG47XHJcblx0fVxyXG5cclxuXHRnZXRTdHJpbmcobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xyXG5cdFx0bGV0IHRleHQgPSBcIlwiO1xyXG5cdFx0bGV0IHZhbCA9IC0xO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFsID0gdGhpcy5nZXRVaW50OCgpO1xyXG5cclxuXHRcdFx0aWYgKHZhbCA9PSAwKSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh2YWwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0ZXh0O1xyXG5cdH1cclxuXHJcblx0Z2V0RmxvYXQzMihsaXR0bGVFbmRpYW4/OiBib29sZWFuKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhVmlldy5nZXRGbG9hdDMyKHRoaXMub2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0ICs9IDQ7XHJcblxyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0RmxvYXQ2NChsaXR0bGVFbmRpYW4/OiBib29sZWFuKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhVmlldy5nZXRGbG9hdDY0KHRoaXMub2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0ICs9IDg7XHJcblxyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0SW50OCgpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmRhdGFWaWV3LmdldEludDgodGhpcy5vZmZzZXQpO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0ICs9IDE7XHJcblxyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0SW50MTYobGl0dGxlRW5kaWFuPzogYm9vbGVhbik6IG51bWJlciB7XHJcblx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuZGF0YVZpZXcuZ2V0SW50MTYodGhpcy5vZmZzZXQsIGxpdHRsZUVuZGlhbik7XHJcblxyXG5cdFx0dGhpcy5vZmZzZXQgKz0gMjtcclxuXHJcblx0XHRyZXR1cm4gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXRJbnQzMihsaXR0bGVFbmRpYW4/OiBib29sZWFuKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhVmlldy5nZXRJbnQzMih0aGlzLm9mZnNldCwgbGl0dGxlRW5kaWFuKTtcclxuXHJcblx0XHR0aGlzLm9mZnNldCArPSA0O1xyXG5cclxuXHRcdHJldHVybiB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldEludDY0KGxpdHRsZUVuZGlhbj86IGJvb2xlYW4pOiBiaWdpbnQge1xyXG5cdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmRhdGFWaWV3LmdldEJpZ0ludDY0KHRoaXMub2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0ICs9IDg7XHJcblxyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0VWludDgoKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhVmlldy5nZXRVaW50OCh0aGlzLm9mZnNldCk7XHJcblxyXG5cdFx0dGhpcy5vZmZzZXQgKz0gMTtcclxuXHJcblx0XHRyZXR1cm4gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXRVaW50MTYobGl0dGxlRW5kaWFuPzogYm9vbGVhbik6IG51bWJlciB7XHJcblx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuZGF0YVZpZXcuZ2V0VWludDE2KHRoaXMub2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0ICs9IDI7XHJcblxyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0VWludDMyKGxpdHRsZUVuZGlhbj86IGJvb2xlYW4pOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmRhdGFWaWV3LmdldFVpbnQzMih0aGlzLm9mZnNldCwgbGl0dGxlRW5kaWFuKTtcclxuXHJcblx0XHR0aGlzLm9mZnNldCArPSA0O1xyXG5cclxuXHRcdHJldHVybiB2YWx1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFByb2dyZXNzaXZlRGF0YVZpZXcgfTsiLCJpbXBvcnQgeyBQcm9ncmVzc2l2ZURhdGFWaWV3IH0gZnJvbSBcIi4vcHJvZ3Jlc3NpdmUtZGF0YS12aWV3XCI7XHJcbmltcG9ydCB7IEFjdGlvblBhcnNlciB9IGZyb20gXCIuL2FjdGlvbi5wYXJzZXJcIjtcclxuaW1wb3J0IHsgUmVjb3JkZWRQYWdlIH0gZnJvbSBcIi4uLy4uL21vZGVsL3JlY29yZGVkLXBhZ2VcIjtcclxuXHJcbmNsYXNzIFJlY29yZGVkUGFnZVBhcnNlciB7XHJcblxyXG5cdHBhcnNlKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogUmVjb3JkZWRQYWdlIHtcclxuXHRcdGNvbnN0IHJlY29yZGVkUGFnZSA9IG5ldyBSZWNvcmRlZFBhZ2UoKTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgbnVtYmVyID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IHRpbWVzdGFtcCA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblxyXG5cdFx0cmVjb3JkZWRQYWdlLnBhZ2VOdW1iZXIgPSBudW1iZXI7XHJcblx0XHRyZWNvcmRlZFBhZ2UudGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG5cclxuXHRcdGNvbnN0IHN0YXRpY0FjdGlvblNpemUgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cclxuXHRcdGlmIChzdGF0aWNBY3Rpb25TaXplID4gMCkge1xyXG5cdFx0XHRjb25zdCBlbmQgPSBkYXRhVmlldy5ieXRlT2Zmc2V0ICsgc3RhdGljQWN0aW9uU2l6ZTtcclxuXHJcblx0XHRcdHdoaWxlIChkYXRhVmlldy5ieXRlT2Zmc2V0IDwgZW5kKSB7XHJcblx0XHRcdFx0Y29uc3QgbGVuZ3RoID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdFx0XHRjb25zdCB0eXBlID0gZGF0YVZpZXcuZ2V0SW50OCgpO1xyXG5cdFx0XHRcdGNvbnN0IHRpbWVzdGFtcCA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGFjdGlvbiA9IEFjdGlvblBhcnNlci5wYXJzZShkYXRhVmlldywgdHlwZSwgbGVuZ3RoKTtcclxuXHRcdFx0XHRhY3Rpb24udGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG5cclxuXHRcdFx0XHRpZiAoYWN0aW9uKSB7XHJcblx0XHRcdFx0XHRyZWNvcmRlZFBhZ2Uuc3RhdGljQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgcGxheWJhY2tBY3Rpb25TaXplID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGlmIChwbGF5YmFja0FjdGlvblNpemUgPiAwKSB7XHJcblx0XHRcdGNvbnN0IGVuZCA9IGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBwbGF5YmFja0FjdGlvblNpemU7XHJcblxyXG5cdFx0XHR3aGlsZSAoZGF0YVZpZXcuYnl0ZU9mZnNldCA8IGVuZCkge1xyXG5cdFx0XHRcdGNvbnN0IGxlbmd0aCA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblx0XHRcdFx0Y29uc3QgdHlwZSA9IGRhdGFWaWV3LmdldEludDgoKTtcclxuXHRcdFx0XHRjb25zdCB0aW1lc3RhbXAgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBhY3Rpb24gPSBBY3Rpb25QYXJzZXIucGFyc2UoZGF0YVZpZXcsIHR5cGUsIGxlbmd0aCk7XHJcblx0XHRcdFx0YWN0aW9uLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcclxuXHJcblx0XHRcdFx0aWYgKGFjdGlvbikge1xyXG5cdFx0XHRcdFx0cmVjb3JkZWRQYWdlLnBsYXliYWNrQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlY29yZGVkUGFnZTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBSZWNvcmRlZFBhZ2VQYXJzZXIgfTsiLCJpbXBvcnQgeyBEb2N1bWVudFR5cGUgfSBmcm9tIFwiLi4vLi4vbW9kZWwvZG9jdW1lbnQudHlwZVwiO1xyXG5pbXBvcnQgeyBTdHJlYW1BY3Rpb24gfSBmcm9tIFwiLi4vc3RyZWFtLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBTdHJlYW1BY3Rpb25UeXBlIH0gZnJvbSBcIi4uL3N0cmVhbS5hY3Rpb24tdHlwZVwiO1xyXG5pbXBvcnQgeyBTdHJlYW1Eb2N1bWVudENsb3NlZEFjdGlvbiB9IGZyb20gXCIuLi9zdHJlYW0uZG9jdW1lbnQuY2xvc2VkLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBTdHJlYW1Eb2N1bWVudENyZWF0ZWRBY3Rpb24gfSBmcm9tIFwiLi4vc3RyZWFtLmRvY3VtZW50LmNyZWF0ZWQuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFN0cmVhbURvY3VtZW50U2VsZWN0ZWRBY3Rpb24gfSBmcm9tIFwiLi4vc3RyZWFtLmRvY3VtZW50LnNlbGVjdGVkLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBTdHJlYW1QYWdlQ3JlYXRlZEFjdGlvbiB9IGZyb20gXCIuLi9zdHJlYW0ucGFnZS5jcmVhdGVkLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBTdHJlYW1QYWdlRGVsZXRlZEFjdGlvbiB9IGZyb20gXCIuLi9zdHJlYW0ucGFnZS5kZWxldGVkLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBTdHJlYW1QYWdlU2VsZWN0ZWRBY3Rpb24gfSBmcm9tIFwiLi4vc3RyZWFtLnBhZ2Uuc2VsZWN0ZWQuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFN0cmVhbVBhZ2VQbGF5YmFja0FjdGlvbiB9IGZyb20gXCIuLi9zdHJlYW0ucGxheWJhY2suYWN0aW9uXCI7XHJcbmltcG9ydCB7IFN0cmVhbVBhZ2VBY3Rpb25zQWN0aW9uIH0gZnJvbSBcIi4uL3N0cmVhbS5wbGF5YmFja3MuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFN0cmVhbVN0YXJ0QWN0aW9uIH0gZnJvbSBcIi4uL3N0cmVhbS5zdGFydC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgU3RyZWFtU3BlZWNoUHVibGlzaGVkQWN0aW9uIH0gZnJvbSBcIi4uL3N0cmVhbS5zcGVlY2gucHVibGlzaGVkLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25QYXJzZXIgfSBmcm9tIFwiLi9hY3Rpb24ucGFyc2VyXCI7XHJcbmltcG9ydCB7IFByb2dyZXNzaXZlRGF0YVZpZXcgfSBmcm9tIFwiLi9wcm9ncmVzc2l2ZS1kYXRhLXZpZXdcIjtcclxuaW1wb3J0IHsgUmVjb3JkZWRQYWdlUGFyc2VyIH0gZnJvbSBcIi4vcmVjb3JkZWQtcGFnZS5wYXJzZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdHJlYW1BY3Rpb25QYXJzZXIge1xyXG5cclxuXHRzdGF0aWMgcGFyc2UoZGF0YVZpZXc6IFByb2dyZXNzaXZlRGF0YVZpZXcsIHR5cGU6IFN0cmVhbUFjdGlvblR5cGUsIGxlbmd0aDogbnVtYmVyKTogU3RyZWFtQWN0aW9uIHtcclxuXHRcdGxldCBhY3Rpb246IFN0cmVhbUFjdGlvbiA9IG51bGw7XHJcblxyXG5cdFx0c3dpdGNoICh0eXBlKSB7XHJcblx0XHRcdGNhc2UgU3RyZWFtQWN0aW9uVHlwZS5TVFJFQU1fSU5JVDpcclxuXHRcdFx0XHQvL2FjdGlvbiA9IHRoaXMuaW5pdEFjdGlvbihkYXRhVmlldyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgU3RyZWFtQWN0aW9uVHlwZS5TVFJFQU1fU1RBUlQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5zdGFydEFjdGlvbihkYXRhVmlldyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgU3RyZWFtQWN0aW9uVHlwZS5TVFJFQU1fUEFHRV9BQ1RJT046XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5wbGF5YmFja0FjdGlvbihkYXRhVmlldyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgU3RyZWFtQWN0aW9uVHlwZS5TVFJFQU1fUEFHRV9BQ1RJT05TOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMucGxheWJhY2tBY3Rpb25zKGRhdGFWaWV3KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBTdHJlYW1BY3Rpb25UeXBlLlNUUkVBTV9QQUdFX0NSRUFURUQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5wYWdlQWN0aW9uKGRhdGFWaWV3LCBTdHJlYW1QYWdlQ3JlYXRlZEFjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgU3RyZWFtQWN0aW9uVHlwZS5TVFJFQU1fUEFHRV9ERUxFVEVEOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMucGFnZUFjdGlvbihkYXRhVmlldywgU3RyZWFtUGFnZURlbGV0ZWRBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFN0cmVhbUFjdGlvblR5cGUuU1RSRUFNX1BBR0VfU0VMRUNURUQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5wYWdlQWN0aW9uKGRhdGFWaWV3LCBTdHJlYW1QYWdlU2VsZWN0ZWRBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFN0cmVhbUFjdGlvblR5cGUuU1RSRUFNX0RPQ1VNRU5UX0NSRUFURUQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5kb2N1bWVudEFjdGlvbihkYXRhVmlldywgU3RyZWFtRG9jdW1lbnRDcmVhdGVkQWN0aW9uKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBTdHJlYW1BY3Rpb25UeXBlLlNUUkVBTV9ET0NVTUVOVF9DTE9TRUQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5kb2N1bWVudEFjdGlvbihkYXRhVmlldywgU3RyZWFtRG9jdW1lbnRDbG9zZWRBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFN0cmVhbUFjdGlvblR5cGUuU1RSRUFNX0RPQ1VNRU5UX1NFTEVDVEVEOlxyXG5cdFx0XHRcdGFjdGlvbiA9IHRoaXMuZG9jdW1lbnRBY3Rpb24oZGF0YVZpZXcsIFN0cmVhbURvY3VtZW50U2VsZWN0ZWRBY3Rpb24pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFN0cmVhbUFjdGlvblR5cGUuU1RSRUFNX1NQRUVDSF9QVUJMSVNIRUQ6XHJcblx0XHRcdFx0YWN0aW9uID0gdGhpcy5zcGVlY2hBY3Rpb24oZGF0YVZpZXcsIFN0cmVhbVNwZWVjaFB1Ymxpc2hlZEFjdGlvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGFjdGlvbjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHN0YXJ0QWN0aW9uKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogU3RyZWFtU3RhcnRBY3Rpb24ge1xyXG5cdFx0Y29uc3QgY291cnNlSWQgPSBkYXRhVmlldy5nZXRVaW50MzIoKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFN0cmVhbVN0YXJ0QWN0aW9uKGNvdXJzZUlkKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHBsYXliYWNrQWN0aW9uKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogU3RyZWFtUGFnZVBsYXliYWNrQWN0aW9uIHtcclxuXHRcdGNvbnN0IGRvY0lkID0gZGF0YVZpZXcuZ2V0SW50NjQoKTtcclxuXHRcdGNvbnN0IHBhZ2VOdW1iZXIgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cclxuXHRcdGNvbnN0IGxlbmd0aCA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblx0XHRjb25zdCB0eXBlID0gZGF0YVZpZXcuZ2V0SW50OCgpO1xyXG5cdFx0Y29uc3QgdGltZXN0YW1wID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHJcblx0XHRjb25zdCBhY3Rpb24gPSBBY3Rpb25QYXJzZXIucGFyc2UoZGF0YVZpZXcsIHR5cGUsIGxlbmd0aCk7XHJcblx0XHRhY3Rpb24udGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG5cclxuXHRcdHJldHVybiBuZXcgU3RyZWFtUGFnZVBsYXliYWNrQWN0aW9uKGRvY0lkLCBwYWdlTnVtYmVyLCBhY3Rpb24pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgcGxheWJhY2tBY3Rpb25zKGRhdGFWaWV3OiBQcm9ncmVzc2l2ZURhdGFWaWV3KTogU3RyZWFtUGFnZUFjdGlvbnNBY3Rpb24ge1xyXG5cdFx0Y29uc3QgZG9jSWQgPSBkYXRhVmlldy5nZXRJbnQ2NCgpO1xyXG5cclxuXHRcdGNvbnN0IGVudHJ5TGVuZ3RoID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IHBhZ2VQYXJzZXIgPSBuZXcgUmVjb3JkZWRQYWdlUGFyc2VyKCk7XHJcblx0XHRjb25zdCByZWNvcmRlZFBhZ2UgPSBwYWdlUGFyc2VyLnBhcnNlKGRhdGFWaWV3KTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFN0cmVhbVBhZ2VBY3Rpb25zQWN0aW9uKGRvY0lkLCByZWNvcmRlZFBhZ2UpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgcGFnZUFjdGlvbjxUPihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldywgdHlwZTogeyBuZXcoZG9jdW1lbnRJZDogYmlnaW50LCBwYWdlTnVtYmVyOiBudW1iZXIpOiBUIH0pOiBUIHtcclxuXHRcdGNvbnN0IGRvY0lkID0gZGF0YVZpZXcuZ2V0SW50NjQoKTtcclxuXHRcdGNvbnN0IHBhZ2VOdW1iZXIgPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cclxuXHRcdHJldHVybiBuZXcgdHlwZShkb2NJZCwgcGFnZU51bWJlcik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBkb2N1bWVudEFjdGlvbjxUPihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldywgdHlwZTogeyBuZXcoZG9jdW1lbnRJZDogYmlnaW50LCBkb2N1bWVudFR5cGU6IERvY3VtZW50VHlwZSwgZG9jdW1lbnRUaXRsZTogc3RyaW5nLCBkb2N1bWVudEZpbGU6IHN0cmluZyk6IFQgfSk6IFQge1xyXG5cdFx0Y29uc3QgZG9jSWQgPSBkYXRhVmlldy5nZXRJbnQ2NCgpO1xyXG5cdFx0Y29uc3QgZG9jVHlwZSA9IGRhdGFWaWV3LmdldEludDgoKSBhcyBEb2N1bWVudFR5cGU7XHJcblxyXG5cdFx0Y29uc3QgdGl0bGVMZW5ndGggPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0Y29uc3QgbmFtZUxlbmd0aCA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblx0XHRjb25zdCBjaGVja3N1bUxlbmd0aCA9IGRhdGFWaWV3LmdldEludDMyKCk7XHJcblxyXG5cdFx0Y29uc3QgZG9jVGl0bGUgPSBkYXRhVmlldy5nZXRTdHJpbmcodGl0bGVMZW5ndGgpO1xyXG5cdFx0Y29uc3QgZG9jTmFtZSA9IGRhdGFWaWV3LmdldFN0cmluZyhuYW1lTGVuZ3RoKTtcclxuXHRcdGNvbnN0IGRvY0NoZWNrc3VtID0gZGF0YVZpZXcuZ2V0U3RyaW5nKGNoZWNrc3VtTGVuZ3RoKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IHR5cGUoZG9jSWQsIGRvY1R5cGUsIGRvY1RpdGxlLCBkb2NOYW1lKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIHNwZWVjaEFjdGlvbjxUPihkYXRhVmlldzogUHJvZ3Jlc3NpdmVEYXRhVmlldywgdHlwZTogeyBuZXcocHVibGlzaGVySWQ6IGJpZ2ludCk6IFQgfSk6IFQge1xyXG5cdFx0Y29uc3QgaWRMZW5ndGggPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cdFx0Y29uc3QgaWRTdHIgPSBkYXRhVmlldy5nZXRTdHJpbmcoaWRMZW5ndGgpO1xyXG5cclxuXHRcdGNvbnN0IHB1Ymxpc2hlcklkID0gQmlnSW50KGlkU3RyKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IHR5cGUocHVibGlzaGVySWQpO1xyXG5cdH1cclxufSIsImltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IEJydXNoQWN0aW9uIH0gZnJvbSBcIi4vYnJ1c2guYWN0aW9uXCI7XHJcbmltcG9ydCB7IFBlblRvb2wgfSBmcm9tIFwiLi4vdG9vbC9wZW4udG9vbFwiO1xyXG5cclxuY2xhc3MgUGVuQWN0aW9uIGV4dGVuZHMgQnJ1c2hBY3Rpb24ge1xyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0Y29uc3QgdG9vbCA9IG5ldyBQZW5Ub29sKCk7XHJcblx0XHR0b29sLnNoYXBlSGFuZGxlID0gdGhpcy5zaGFwZUhhbmRsZTtcclxuXHRcdHRvb2wuYnJ1c2ggPSB0aGlzLmJydXNoO1xyXG5cclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wodG9vbCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUGVuQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgQnJ1c2hBY3Rpb24gfSBmcm9tIFwiLi9icnVzaC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgUG9pbnRlclRvb2wgfSBmcm9tIFwiLi4vdG9vbC9wb2ludGVyLnRvb2xcIjtcclxuXHJcbmNsYXNzIFBvaW50ZXJBY3Rpb24gZXh0ZW5kcyBCcnVzaEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRjb25zdCB0b29sID0gbmV3IFBvaW50ZXJUb29sKCk7XHJcblx0XHR0b29sLmJydXNoID0gdGhpcy5icnVzaDtcclxuXHJcblx0XHRleGVjdXRvci5zZXRUb29sKHRvb2wpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvaW50ZXJBY3Rpb24gfTsiLCJpbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBCcnVzaEFjdGlvbiB9IGZyb20gXCIuL2JydXNoLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGVUb29sIH0gZnJvbSBcIi4uL3Rvb2wvcmVjdGFuZ2xlLnRvb2xcIjtcclxuXHJcbmNsYXNzIFJlY3RhbmdsZUFjdGlvbiBleHRlbmRzIEJydXNoQWN0aW9uIHtcclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHRvb2wgPSBuZXcgUmVjdGFuZ2xlVG9vbCgpO1xyXG5cdFx0dG9vbC5zaGFwZUhhbmRsZSA9IHRoaXMuc2hhcGVIYW5kbGU7XHJcblx0XHR0b29sLmJydXNoID0gdGhpcy5icnVzaDtcclxuXHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wodG9vbCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUmVjdGFuZ2xlQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFJlZG9Ub29sIH0gZnJvbSBcIi4uL3Rvb2wvcmVkby50b29sXCI7XHJcblxyXG5jbGFzcyBSZWRvQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBSZWRvVG9vbCgpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBSZWRvQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IERlbGV0ZVNoYXBlVG9vbCB9IGZyb20gXCIuLi90b29sL2RlbGV0ZS5zaGFwZS50b29sXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5cclxuY2xhc3MgUnViYmVyQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0cHJpdmF0ZSBzaGFwZUhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3Ioc2hhcGVIYW5kbGU6IG51bWJlcikge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLnNoYXBlSGFuZGxlID0gc2hhcGVIYW5kbGU7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2V0S2V5RXZlbnQodGhpcy5rZXlFdmVudCk7XHJcblx0XHRleGVjdXRvci5zZXRUb29sKG5ldyBEZWxldGVTaGFwZVRvb2wodGhpcy5zaGFwZUhhbmRsZSkpO1xyXG5cdFx0ZXhlY3V0b3IuYmVnaW5Ub29sKG5ldyBQZW5Qb2ludCgwLCAwLCAwKSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUnViYmVyQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFNlbGVjdEdyb3VwVG9vbCB9IGZyb20gXCIuLi90b29sL3NlbGVjdC1ncm91cC50b29sXCI7XHJcblxyXG5jbGFzcyBTZWxlY3RHcm91cEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wobmV3IFNlbGVjdEdyb3VwVG9vbCgpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBTZWxlY3RHcm91cEFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBTZWxlY3RUb29sIH0gZnJvbSBcIi4uL3Rvb2wvc2VsZWN0LnRvb2xcIjtcclxuXHJcbmNsYXNzIFNlbGVjdEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wobmV3IFNlbGVjdFRvb2woKSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgU2VsZWN0QWN0aW9uIH07IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gXCIuLi90b29sL3Rvb2xcIjtcclxuaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi4vdG9vbC90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgU2xpZGVEb2N1bWVudCB9IGZyb20gXCIuLi9tb2RlbC9kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuLi90b29sL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSBcIi4uL3V0aWxzL29ic2VydmFibGVcIjtcclxuXHJcbmNsYXNzIFNpbXBsZUFjdGlvbkV4ZWN1dG9yIGltcGxlbWVudHMgQWN0aW9uRXhlY3V0b3Ige1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGRvY3VtZW50OiBTbGlkZURvY3VtZW50O1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRvb2xDb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHJcblx0cHJpdmF0ZSB0b29sOiBUb29sO1xyXG5cclxuXHRwcml2YXRlIHByZXZpb3VzVG9vbDogVG9vbDtcclxuXHJcblx0cHJpdmF0ZSBwYWdlTnVtYmVyOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3Rvcihkb2N1bWVudDogU2xpZGVEb2N1bWVudCkge1xyXG5cdFx0dGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xyXG5cdFx0dGhpcy50b29sQ29udGV4dCA9IG5ldyBUb29sQ29udGV4dChudWxsKTtcclxuXHR9XHJcblxyXG5cdHNldE9uU2VsZWN0UGFnZUluZGV4KG9ic2VydmVyOiBPYnNlcnZlcjxudW1iZXI+KTogdm9pZCB7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdHNldFNlZWsoc2VlazogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRzZXRLZXlFdmVudChrZXlFdmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy50b29sQ29udGV4dC5rZXlFdmVudCA9IGtleUV2ZW50O1xyXG5cdH1cclxuXHJcblx0c2V0RG9jdW1lbnQoZG9jdW1lbnQ6IFNsaWRlRG9jdW1lbnQpOiB2b2lkIHtcclxuXHJcblx0fVxyXG5cclxuXHRzZXRQYWdlTnVtYmVyKHBhZ2VOdW1iZXI6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMucGFnZU51bWJlciA9PT0gcGFnZU51bWJlcikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgcGFnZSA9IHRoaXMuZG9jdW1lbnQuZ2V0UGFnZShwYWdlTnVtYmVyKTtcclxuXHJcblx0XHR0aGlzLnBhZ2VOdW1iZXIgPSBwYWdlTnVtYmVyO1xyXG5cdFx0dGhpcy50b29sQ29udGV4dC5wYWdlID0gcGFnZTtcclxuXHR9XHJcblxyXG5cdHNldFRvb2wodG9vbDogVG9vbCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0b29sKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRvb2wgbXVzdCBub3QgYmUgbnVsbFwiKTtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy50b29sICYmIHRoaXMudG9vbCA9PT0gdG9vbCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZXRQcmV2aW91c1Rvb2wodGhpcy50b29sKTtcclxuXHJcblx0XHR0aGlzLnRvb2wgPSB0b29sO1xyXG5cdH1cclxuXHJcblx0c2VsZWN0QW5kRXhlY3V0ZVRvb2wodG9vbDogQXRvbWljVG9vbCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcG9pbnQgPSBQZW5Qb2ludC5jcmVhdGVaZXJvKCk7XHJcblxyXG5cdFx0dGhpcy5zZXRUb29sKHRvb2wpO1xyXG5cclxuXHRcdHRoaXMuYmVnaW5Ub29sKHBvaW50KTtcclxuXHRcdHRoaXMuZXhlY3V0ZVRvb2wocG9pbnQpO1xyXG5cdFx0dGhpcy5lbmRUb29sKHBvaW50KTtcclxuXHJcblx0XHR0aGlzLnNldFByZXZpb3VzVG9vbCh0aGlzLnByZXZpb3VzVG9vbCk7XHJcblx0fVxyXG5cclxuXHRiZWdpblRvb2wocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnRvb2wuYmVnaW4ocG9pbnQuY2xvbmUoKSwgdGhpcy50b29sQ29udGV4dCk7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlVG9vbChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudG9vbC5leGVjdXRlKHBvaW50LmNsb25lKCkpO1xyXG5cdH1cclxuXHJcblx0ZW5kVG9vbChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudG9vbC5lbmQocG9pbnQuY2xvbmUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNldFByZXZpb3VzVG9vbCh0b29sOiBUb29sKTogdm9pZCB7XHJcblx0XHRpZiAoIXRvb2wpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0b29sIGluc3RhbmNlb2YgQXRvbWljVG9vbCkge1xyXG5cdFx0XHQvLyBEbyBub3QgcmVtZW1iZXIgYXRvbWljIHRvb2xzLlxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wcmV2aW91c1Rvb2wgPSB0b29sO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2ltcGxlQWN0aW9uRXhlY3V0b3IgfTsiLCJpbXBvcnQgeyBBY3Rpb25QbGF5ZXIgfSBmcm9tIFwiLi9hY3Rpb24tcGxheWVyXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFN5bmNTdGF0ZSB9IGZyb20gXCIuLi91dGlscy9zeW5jLXN0YXRlXCI7XHJcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBTbGlkZURvY3VtZW50IH0gZnJvbSBcIi4uL21vZGVsL2RvY3VtZW50XCI7XHJcblxyXG5jbGFzcyBTdHJlYW1BY3Rpb25QbGF5ZXIgZXh0ZW5kcyBBY3Rpb25QbGF5ZXIge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHN5bmNTdGF0ZTogU3luY1N0YXRlO1xyXG5cclxuXHRwcml2YXRlIGFjdGlvbnM6IEFjdGlvbltdO1xyXG5cclxuXHRwcml2YXRlIHJlcXVlc3RJRDogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yLCBzeW5jU3RhdGU6IFN5bmNTdGF0ZSkge1xyXG5cdFx0c3VwZXIoZXhlY3V0b3IpO1xyXG5cclxuXHRcdHRoaXMuc3luY1N0YXRlID0gc3luY1N0YXRlO1xyXG5cdH1cclxuXHJcblx0YWRkQWN0aW9uKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XHJcblx0XHRpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBcImhpZGRlblwiKSB7XHJcblx0XHRcdC8vIEV4ZWN1dGUgYWN0aW9uIHdpdGggdGhlIGN1cnJlbnQgc3RhdGUuXHJcblx0XHRcdC8vIFNvbWUgYnJvd3NlcnMsIG1vc3RseSBDaHJvbWl1bS1iYXNlZCwgZ2V0IHRoZSBzdGF0ZSBtaXhlZC11cCB3aGVuIHRoZSBwbGF5ZXIgaXMgbm90IHZpc2libGUuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0YWN0aW9uLmV4ZWN1dGUodGhpcy5leGVjdXRvcik7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2F0Y2ggKGNhdXNlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihjYXVzZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFjdGlvbnMucHVzaChhY3Rpb24pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0RG9jdW1lbnQoZG9jdW1lbnQ6IFNsaWRlRG9jdW1lbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuZXhlY3V0b3Iuc2V0RG9jdW1lbnQoZG9jdW1lbnQpO1xyXG5cdH1cclxuXHJcblx0c2Vla0J5VGltZSh0aW1lOiBudW1iZXIpOiBudW1iZXIge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcblx0fVxyXG5cclxuXHRzZWVrQnlQYWdlKHBhZ2VOdW1iZXI6IG51bWJlcik6IG51bWJlciB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBleGVjdXRlQWN0aW9ucygpOiB2b2lkIHtcclxuXHRcdGxldCBhY3Rpb25Db3VudCA9IHRoaXMuYWN0aW9ucy5sZW5ndGg7XHJcblxyXG5cdFx0d2hpbGUgKGFjdGlvbkNvdW50ID4gMCkge1xyXG5cdFx0XHQvLyBHZXQgbmV4dCBhY3Rpb24gZm9yIGV4ZWN1dGlvbi5cclxuXHRcdFx0Y29uc3QgYWN0aW9uID0gdGhpcy5hY3Rpb25zWzBdO1xyXG5cdFx0XHRjb25zdCB0aW1lID0gdGhpcy5zeW5jU3RhdGUuYXVkaW9UaW1lO1xyXG5cclxuXHRcdFx0Ly8gaWYgKHRpbWUgPj0gYWN0aW9uLnRpbWVzdGFtcCkge1xyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coXCJhY3Rpb24gbGF0ZW5jeTogXCIgKyAodGltZSAtIGFjdGlvbi50aW1lc3RhbXApKTtcclxuXHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGFjdGlvbi5leGVjdXRlKHRoaXMuZXhlY3V0b3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjYXRjaCAoY2F1c2UpIHtcclxuXHRcdFx0XHRcdC8vY29uc29sZS5lcnJvcihjYXVzZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgZXhlY3V0ZWQgYWN0aW9uLlxyXG5cdFx0XHRcdHRoaXMuYWN0aW9ucy5zaGlmdCgpO1xyXG5cclxuXHRcdFx0XHRhY3Rpb25Db3VudCA9IHRoaXMuYWN0aW9ucy5sZW5ndGg7XHJcblx0XHRcdC8vIH1cclxuXHRcdFx0Ly8gZWxzZSB7XHJcblx0XHRcdC8vIFx0YnJlYWs7XHJcblx0XHRcdC8vIH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBpbml0SW50ZXJuYWwoKTogdm9pZCB7XHJcblx0XHR0aGlzLmFjdGlvbnMgPSBbXTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBzdGFydEludGVybmFsKCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0dGhpcy5ydW4oKTtcclxuXHRcdH1cclxuXHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XHJcblxyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJFeGVjdXRlIGFjdGlvbiBmYWlsZWQuXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHN0b3BJbnRlcm5hbCgpOiB2b2lkIHtcclxuXHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElEKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBzdXNwZW5kSW50ZXJuYWwoKTogdm9pZCB7XHJcblx0XHRjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJlcXVlc3RJRCk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgZGVzdHJveUludGVybmFsKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5hY3Rpb25zLmxlbmd0aCA9IDA7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJ1bigpIHtcclxuXHRcdHRoaXMuZXhlY3V0ZUFjdGlvbnMoKTtcclxuXHJcblx0XHR0aGlzLnJlcXVlc3RJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJ1bi5iaW5kKHRoaXMpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBTdHJlYW1BY3Rpb25QbGF5ZXIgfTsiLCJlbnVtIFN0cmVhbUFjdGlvblR5cGUge1xyXG5cclxuXHRTVFJFQU1fSU5JVCxcclxuXHRTVFJFQU1fU1RBUlQsXHJcblxyXG5cdFNUUkVBTV9QQUdFX0FDVElPTixcclxuXHRTVFJFQU1fUEFHRV9BQ1RJT05TLFxyXG5cdFNUUkVBTV9QQUdFX0NSRUFURUQsXHJcblx0U1RSRUFNX1BBR0VfREVMRVRFRCxcclxuXHRTVFJFQU1fUEFHRV9TRUxFQ1RFRCxcclxuXHJcblx0U1RSRUFNX0RPQ1VNRU5UX0NSRUFURUQsXHJcblx0U1RSRUFNX0RPQ1VNRU5UX0NMT1NFRCxcclxuXHRTVFJFQU1fRE9DVU1FTlRfU0VMRUNURUQsXHJcblxyXG5cdFNUUkVBTV9TUEVFQ0hfUFVCTElTSEVEXHJcbn1cclxuXHJcbmV4cG9ydCB7IFN0cmVhbUFjdGlvblR5cGUgfTsiLCJhYnN0cmFjdCBjbGFzcyBTdHJlYW1BY3Rpb24ge1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtQWN0aW9uIH07IiwiaW1wb3J0IHsgU3RyZWFtQWN0aW9uIH0gZnJvbSBcIi4vc3RyZWFtLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBEb2N1bWVudFR5cGUgfSBmcm9tIFwiLi4vbW9kZWwvZG9jdW1lbnQudHlwZVwiO1xyXG5cclxuY2xhc3MgU3RyZWFtRG9jdW1lbnRBY3Rpb24gZXh0ZW5kcyBTdHJlYW1BY3Rpb24ge1xyXG5cclxuXHRyZWFkb25seSBkb2N1bWVudElkOiBiaWdpbnQ7XHJcblxyXG5cdHJlYWRvbmx5IGRvY3VtZW50VHlwZTogRG9jdW1lbnRUeXBlO1xyXG5cclxuXHRyZWFkb25seSBkb2N1bWVudFRpdGxlOiBzdHJpbmc7XHJcblxyXG5cdHJlYWRvbmx5IGRvY3VtZW50RmlsZTogc3RyaW5nO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoZG9jdW1lbnRJZDogYmlnaW50LCBkb2N1bWVudFR5cGU6IERvY3VtZW50VHlwZSwgZG9jdW1lbnRUaXRsZTogc3RyaW5nLCBkb2N1bWVudEZpbGU6IHN0cmluZykge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmRvY3VtZW50SWQgPSBkb2N1bWVudElkO1xyXG5cdFx0dGhpcy5kb2N1bWVudFR5cGUgPSBkb2N1bWVudFR5cGU7XHJcblx0XHR0aGlzLmRvY3VtZW50VGl0bGUgPSBkb2N1bWVudFRpdGxlO1xyXG5cdFx0dGhpcy5kb2N1bWVudEZpbGUgPSBkb2N1bWVudEZpbGU7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTdHJlYW1Eb2N1bWVudEFjdGlvbiB9OyIsImltcG9ydCB7IFN0cmVhbURvY3VtZW50QWN0aW9uIH0gZnJvbSBcIi4vc3RyZWFtLmRvY3VtZW50LmFjdGlvblwiO1xyXG5pbXBvcnQgeyBEb2N1bWVudFR5cGUgfSBmcm9tIFwiLi4vbW9kZWwvZG9jdW1lbnQudHlwZVwiO1xyXG5cclxuY2xhc3MgU3RyZWFtRG9jdW1lbnRDbG9zZWRBY3Rpb24gZXh0ZW5kcyBTdHJlYW1Eb2N1bWVudEFjdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGRvY3VtZW50SWQ6IGJpZ2ludCwgZG9jdW1lbnRUeXBlOiBEb2N1bWVudFR5cGUsIGRvY3VtZW50VGl0bGU6IHN0cmluZywgZG9jdW1lbnRGaWxlOiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSwgZG9jdW1lbnRUaXRsZSwgZG9jdW1lbnRGaWxlKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFN0cmVhbURvY3VtZW50Q2xvc2VkQWN0aW9uIH07IiwiaW1wb3J0IHsgU3RyZWFtRG9jdW1lbnRBY3Rpb24gfSBmcm9tIFwiLi9zdHJlYW0uZG9jdW1lbnQuYWN0aW9uXCI7XHJcbmltcG9ydCB7IERvY3VtZW50VHlwZSB9IGZyb20gXCIuLi9tb2RlbC9kb2N1bWVudC50eXBlXCI7XHJcblxyXG5jbGFzcyBTdHJlYW1Eb2N1bWVudENyZWF0ZWRBY3Rpb24gZXh0ZW5kcyBTdHJlYW1Eb2N1bWVudEFjdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGRvY3VtZW50SWQ6IGJpZ2ludCwgZG9jdW1lbnRUeXBlOiBEb2N1bWVudFR5cGUsIGRvY3VtZW50VGl0bGU6IHN0cmluZywgZG9jdW1lbnRGaWxlOiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSwgZG9jdW1lbnRUaXRsZSwgZG9jdW1lbnRGaWxlKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFN0cmVhbURvY3VtZW50Q3JlYXRlZEFjdGlvbiB9OyIsImltcG9ydCB7IFN0cmVhbURvY3VtZW50QWN0aW9uIH0gZnJvbSBcIi4vc3RyZWFtLmRvY3VtZW50LmFjdGlvblwiO1xyXG5pbXBvcnQgeyBEb2N1bWVudFR5cGUgfSBmcm9tIFwiLi4vbW9kZWwvZG9jdW1lbnQudHlwZVwiO1xyXG5cclxuY2xhc3MgU3RyZWFtRG9jdW1lbnRTZWxlY3RlZEFjdGlvbiBleHRlbmRzIFN0cmVhbURvY3VtZW50QWN0aW9uIHtcclxuXHJcblx0Y29uc3RydWN0b3IoZG9jdW1lbnRJZDogYmlnaW50LCBkb2N1bWVudFR5cGU6IERvY3VtZW50VHlwZSwgZG9jdW1lbnRUaXRsZTogc3RyaW5nLCBkb2N1bWVudEZpbGU6IHN0cmluZykge1xyXG5cdFx0c3VwZXIoZG9jdW1lbnRJZCwgZG9jdW1lbnRUeXBlLCBkb2N1bWVudFRpdGxlLCBkb2N1bWVudEZpbGUpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtRG9jdW1lbnRTZWxlY3RlZEFjdGlvbiB9OyIsImltcG9ydCB7IFN0cmVhbUFjdGlvbiB9IGZyb20gXCIuL3N0cmVhbS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIFN0cmVhbVBhZ2VBY3Rpb24gZXh0ZW5kcyBTdHJlYW1BY3Rpb24ge1xyXG5cclxuXHRyZWFkb25seSBkb2N1bWVudElkOiBiaWdpbnQ7XHJcblxyXG5cdHJlYWRvbmx5IHBhZ2VOdW1iZXI6IG51bWJlcjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGRvY3VtZW50SWQ6IGJpZ2ludCwgcGFnZU51bWJlcjogbnVtYmVyKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMuZG9jdW1lbnRJZCA9IGRvY3VtZW50SWQ7XHJcblx0XHR0aGlzLnBhZ2VOdW1iZXIgPSBwYWdlTnVtYmVyO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtUGFnZUFjdGlvbiB9OyIsImltcG9ydCB7IFN0cmVhbVBhZ2VBY3Rpb24gfSBmcm9tIFwiLi9zdHJlYW0ucGFnZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIFN0cmVhbVBhZ2VDcmVhdGVkQWN0aW9uIGV4dGVuZHMgU3RyZWFtUGFnZUFjdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGRvY3VtZW50SWQ6IGJpZ2ludCwgcGFnZU51bWJlcjogbnVtYmVyKSB7XHJcblx0XHRzdXBlcihkb2N1bWVudElkLCBwYWdlTnVtYmVyKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFN0cmVhbVBhZ2VDcmVhdGVkQWN0aW9uIH07IiwiaW1wb3J0IHsgU3RyZWFtUGFnZUFjdGlvbiB9IGZyb20gXCIuL3N0cmVhbS5wYWdlLmFjdGlvblwiO1xyXG5cclxuY2xhc3MgU3RyZWFtUGFnZURlbGV0ZWRBY3Rpb24gZXh0ZW5kcyBTdHJlYW1QYWdlQWN0aW9uIHtcclxuXHJcblx0Y29uc3RydWN0b3IoZG9jdW1lbnRJZDogYmlnaW50LCBwYWdlTnVtYmVyOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKGRvY3VtZW50SWQsIHBhZ2VOdW1iZXIpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtUGFnZURlbGV0ZWRBY3Rpb24gfTsiLCJpbXBvcnQgeyBTdHJlYW1QYWdlQWN0aW9uIH0gZnJvbSBcIi4vc3RyZWFtLnBhZ2UuYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBTdHJlYW1QYWdlU2VsZWN0ZWRBY3Rpb24gZXh0ZW5kcyBTdHJlYW1QYWdlQWN0aW9uIHtcclxuXHJcblx0Y29uc3RydWN0b3IoZG9jdW1lbnRJZDogYmlnaW50LCBwYWdlTnVtYmVyOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKGRvY3VtZW50SWQsIHBhZ2VOdW1iZXIpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtUGFnZVNlbGVjdGVkQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IFN0cmVhbVBhZ2VBY3Rpb24gfSBmcm9tIFwiLi9zdHJlYW0ucGFnZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIFN0cmVhbVBhZ2VQbGF5YmFja0FjdGlvbiBleHRlbmRzIFN0cmVhbVBhZ2VBY3Rpb24ge1xyXG5cclxuXHRyZWFkb25seSBhY3Rpb246IEFjdGlvbjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGRvY3VtZW50SWQ6IGJpZ2ludCwgcGFnZU51bWJlcjogbnVtYmVyLCBhY3Rpb246IEFjdGlvbikge1xyXG5cdFx0c3VwZXIoZG9jdW1lbnRJZCwgcGFnZU51bWJlcik7XHJcblxyXG5cdFx0dGhpcy5hY3Rpb24gPSBhY3Rpb247XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTdHJlYW1QYWdlUGxheWJhY2tBY3Rpb24gfTsiLCJpbXBvcnQgeyBSZWNvcmRlZFBhZ2UgfSBmcm9tIFwiLi4vbW9kZWwvcmVjb3JkZWQtcGFnZVwiO1xyXG5pbXBvcnQgeyBTdHJlYW1BY3Rpb24gfSBmcm9tIFwiLi9zdHJlYW0uYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBTdHJlYW1QYWdlQWN0aW9uc0FjdGlvbiBleHRlbmRzIFN0cmVhbUFjdGlvbiB7XHJcblxyXG5cdHJlYWRvbmx5IGRvY3VtZW50SWQ6IGJpZ2ludDtcclxuXHJcblx0cmVhZG9ubHkgcmVjb3JkZWRQYWdlOiBSZWNvcmRlZFBhZ2U7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3Rvcihkb2N1bWVudElkOiBiaWdpbnQsIHJlY1BhZ2U6IFJlY29yZGVkUGFnZSkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmRvY3VtZW50SWQgPSBkb2N1bWVudElkO1xyXG5cdFx0dGhpcy5yZWNvcmRlZFBhZ2UgPSByZWNQYWdlO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtUGFnZUFjdGlvbnNBY3Rpb24gfTsiLCJpbXBvcnQgeyBTdHJlYW1BY3Rpb24gfSBmcm9tIFwiLi9zdHJlYW0uYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBTdHJlYW1TcGVlY2hBY3Rpb24gZXh0ZW5kcyBTdHJlYW1BY3Rpb24ge1xyXG5cclxuXHRyZWFkb25seSBwdWJsaXNoZXJJZDogYmlnaW50O1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IocHVibGlzaGVySWQ6IGJpZ2ludCkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLnB1Ymxpc2hlcklkID0gcHVibGlzaGVySWQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTdHJlYW1TcGVlY2hBY3Rpb24gfTsiLCJpbXBvcnQgeyBTdHJlYW1TcGVlY2hBY3Rpb24gfSBmcm9tIFwiLi9zdHJlYW0uc3BlZWNoLmFjdGlvblwiO1xyXG5cclxuY2xhc3MgU3RyZWFtU3BlZWNoUHVibGlzaGVkQWN0aW9uIGV4dGVuZHMgU3RyZWFtU3BlZWNoQWN0aW9uIHtcclxuXHJcblx0Y29uc3RydWN0b3IocHVibGlzaGVySWQ6IGJpZ2ludCkge1xyXG5cdFx0c3VwZXIocHVibGlzaGVySWQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RyZWFtU3BlZWNoUHVibGlzaGVkQWN0aW9uIH07IiwiaW1wb3J0IHsgU3RyZWFtQWN0aW9uIH0gZnJvbSBcIi4vc3RyZWFtLmFjdGlvblwiO1xyXG5cclxuY2xhc3MgU3RyZWFtU3RhcnRBY3Rpb24gZXh0ZW5kcyBTdHJlYW1BY3Rpb24ge1xyXG5cclxuXHRyZWFkb25seSBjb3Vyc2VJZDogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoY291cnNlSWQ6IG51bWJlcikge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmNvdXJzZUlkID0gY291cnNlSWQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTdHJlYW1TdGFydEFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBUZXh0Q2hhbmdlVG9vbCB9IGZyb20gXCIuLi90b29sL3RleHQtY2hhbmdlLnRvb2xcIjtcclxuXHJcbmNsYXNzIFRleHRDaGFuZ2VBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRleHQ6IHN0cmluZztcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGhhbmRsZTogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUgPSBoYW5kbGU7XHJcblx0XHR0aGlzLnRleHQgPSB0ZXh0O1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBUZXh0Q2hhbmdlVG9vbCh0aGlzLmhhbmRsZSwgdGhpcy50ZXh0KSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dENoYW5nZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9wYWludC9jb2xvclwiO1xyXG5pbXBvcnQgeyBGb250IH0gZnJvbSBcIi4uL3BhaW50L2ZvbnRcIjtcclxuaW1wb3J0IHsgVGV4dEZvbnRUb29sIH0gZnJvbSBcIi4uL3Rvb2wvdGV4dC1mb250LnRvb2xcIjtcclxuXHJcbmNsYXNzIFRleHRGb250QWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBoYW5kbGU6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBmb250OiBGb250O1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRleHRDb2xvcjogQ29sb3I7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgdGV4dEF0dHJpYnV0ZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+O1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoaGFuZGxlOiBudW1iZXIsIGZvbnQ6IEZvbnQsIHRleHRDb2xvcjogQ29sb3IsIHRleHRBdHRyaWJ1dGVzOiBNYXA8c3RyaW5nLCBib29sZWFuPikge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZSA9IGhhbmRsZTtcclxuXHRcdHRoaXMuZm9udCA9IGZvbnQ7XHJcblx0XHR0aGlzLnRleHRDb2xvciA9IHRleHRDb2xvcjtcclxuXHRcdHRoaXMudGV4dEF0dHJpYnV0ZXMgPSB0ZXh0QXR0cmlidXRlcztcclxuXHR9XHRcclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBUZXh0Rm9udFRvb2wodGhpcy5oYW5kbGUsIHRoaXMuZm9udCwgdGhpcy50ZXh0Q29sb3IsIHRoaXMudGV4dEF0dHJpYnV0ZXMpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBUZXh0Rm9udEFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFRleHRIaWdobGlnaHRUb29sIH0gZnJvbSBcIi4uL3Rvb2wvdGV4dC1oaWdobGlnaHQudG9vbFwiO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9wYWludC9jb2xvclwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuXHJcbmNsYXNzIFRleHRIaWdobGlnaHRBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHNoYXBlSGFuZGxlOiBudW1iZXI7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgY29sb3I6IENvbG9yO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRleHRCb3VuZHM6IFJlY3RhbmdsZVtdO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3Ioc2hhcGVIYW5kbGU6IG51bWJlciwgY29sb3I6IENvbG9yLCB0ZXh0Qm91bmRzOiBSZWN0YW5nbGVbXSkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLnNoYXBlSGFuZGxlID0gc2hhcGVIYW5kbGU7XHJcblx0XHR0aGlzLmNvbG9yID0gY29sb3I7XHJcblx0XHR0aGlzLnRleHRCb3VuZHMgPSB0ZXh0Qm91bmRzO1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNldEtleUV2ZW50KHRoaXMua2V5RXZlbnQpO1xyXG5cdFx0ZXhlY3V0b3Iuc2V0VG9vbChuZXcgVGV4dEhpZ2hsaWdodFRvb2wodGhpcy5zaGFwZUhhbmRsZSwgdGhpcy5jb2xvciwgdGhpcy50ZXh0Qm91bmRzKSk7XHJcblx0XHRleGVjdXRvci5iZWdpblRvb2wobmV3IFBlblBvaW50KDAsIDAsIDApKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRleHRIaWdobGlnaHRBY3Rpb24gfTsiLCJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcclxuaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuaW1wb3J0IHsgVGV4dE1vdmVUb29sIH0gZnJvbSBcIi4uL3Rvb2wvdGV4dC1tb3ZlLnRvb2xcIjtcclxuXHJcbmNsYXNzIFRleHRNb3ZlQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBoYW5kbGU6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBwb2ludDogUG9pbnQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihoYW5kbGU6IG51bWJlciwgcG9pbnQ6IFBvaW50KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlID0gaGFuZGxlO1xyXG5cdFx0dGhpcy5wb2ludCA9IHBvaW50O1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBUZXh0TW92ZVRvb2wodGhpcy5oYW5kbGUsIHRoaXMucG9pbnQpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBUZXh0TW92ZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBUZXh0UmVtb3ZlVG9vbCB9IGZyb20gXCIuLi90b29sL3RleHQtcmVtb3ZlLnRvb2xcIjtcclxuXHJcbmNsYXNzIFRleHRSZW1vdmVBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoaGFuZGxlOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUgPSBoYW5kbGU7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2VsZWN0QW5kRXhlY3V0ZVRvb2wobmV3IFRleHRSZW1vdmVUb29sKHRoaXMuaGFuZGxlKSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dFJlbW92ZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBUZXh0VG9vbCB9IGZyb20gXCIuLi90b29sL3RleHQudG9vbFwiO1xyXG5cclxuY2xhc3MgVGV4dEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihoYW5kbGU6IG51bWJlcikge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZSA9IGhhbmRsZTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNldFRvb2wobmV3IFRleHRUb29sKHRoaXMuaGFuZGxlKSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dEFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFRvb2xBY3Rpb24gfSBmcm9tIFwiLi90b29sLmFjdGlvblwiO1xyXG5cclxuY2xhc3MgVG9vbEJlZ2luQWN0aW9uIGV4dGVuZHMgVG9vbEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5iZWdpblRvb2wodGhpcy5wb2ludCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgVG9vbEJlZ2luQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgVG9vbEFjdGlvbiB9IGZyb20gXCIuL3Rvb2wuYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBUb29sRW5kQWN0aW9uIGV4dGVuZHMgVG9vbEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5lbmRUb29sKHRoaXMucG9pbnQpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFRvb2xFbmRBY3Rpb24gfTsiLCJpbXBvcnQgeyBBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuL2FjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBUb29sQWN0aW9uIH0gZnJvbSBcIi4vdG9vbC5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIFRvb2xFeGVjdXRlQWN0aW9uIGV4dGVuZHMgVG9vbEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5leGVjdXRlVG9vbCh0aGlzLnBvaW50KTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBUb29sRXhlY3V0ZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIFRvb2xBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG5cclxuXHRwb2ludDogUGVuUG9pbnQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3Rvcihwb2ludD86IFBlblBvaW50KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMucG9pbnQgPSBwb2ludDtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBUb29sQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFVuZG9Ub29sIH0gZnJvbSBcIi4uL3Rvb2wvdW5kby50b29sXCI7XHJcblxyXG5jbGFzcyBVbmRvQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuXHJcblx0ZXhlY3V0ZShleGVjdXRvcjogQWN0aW9uRXhlY3V0b3IpOiB2b2lkIHtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBVbmRvVG9vbCgpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBVbmRvQWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vYWN0aW9uLWV4ZWN1dG9yXCI7XHJcbmltcG9ydCB7IFpvb21PdXRUb29sIH0gZnJvbSBcIi4uL3Rvb2wvem9vbS1vdXQudG9vbFwiO1xyXG5cclxuY2xhc3MgWm9vbU91dEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcblxyXG5cdGV4ZWN1dGUoZXhlY3V0b3I6IEFjdGlvbkV4ZWN1dG9yKTogdm9pZCB7XHJcblx0XHRleGVjdXRvci5zZXRLZXlFdmVudCh0aGlzLmtleUV2ZW50KTtcclxuXHRcdGV4ZWN1dG9yLnNlbGVjdEFuZEV4ZWN1dGVUb29sKG5ldyBab29tT3V0VG9vbCgpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBab29tT3V0QWN0aW9uIH07IiwiaW1wb3J0IHsgQWN0aW9uRXhlY3V0b3IgfSBmcm9tIFwiLi9hY3Rpb24tZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgQnJ1c2hBY3Rpb24gfSBmcm9tIFwiLi9icnVzaC5hY3Rpb25cIjtcclxuaW1wb3J0IHsgWm9vbVRvb2wgfSBmcm9tIFwiLi4vdG9vbC96b29tLnRvb2xcIjtcclxuaW1wb3J0IHsgQnJ1c2ggfSBmcm9tIFwiLi4vcGFpbnQvYnJ1c2hcIjtcclxuXHJcbmNsYXNzIFpvb21BY3Rpb24gZXh0ZW5kcyBCcnVzaEFjdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNoYXBlSGFuZGxlPzogbnVtYmVyLCBicnVzaD86IEJydXNoKSB7XHJcblx0XHRzdXBlcigwLCBicnVzaCk7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKGV4ZWN1dG9yOiBBY3Rpb25FeGVjdXRvcik6IHZvaWQge1xyXG5cdFx0ZXhlY3V0b3Iuc2V0S2V5RXZlbnQodGhpcy5rZXlFdmVudCk7XHJcblx0XHRleGVjdXRvci5zZXRUb29sKG5ldyBab29tVG9vbCgpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBab29tQWN0aW9uIH07IiwiZXhwb3J0ICogZnJvbSBcIi4vcGxheWVyLWNvbnRyb2xzL3BsYXllci1jb250cm9sc1wiOyIsImltcG9ydCB7IFZpZXdFbGVtZW50IH0gZnJvbSBcIi4uLy4uL3ZpZXcvdmlldy1lbGVtZW50XCI7XHJcbmltcG9ydCB7IFdlYlZpZXdFbGVtZW50IH0gZnJvbSBcIi4uLy4uL3ZpZXcvd2ViLXZpZXctZWxlbWVudFwiO1xyXG5pbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gXCIuLi8uLi91dGlscy9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSBcIi4uLy4uL3V0aWxzL3Byb3BlcnR5XCI7XHJcblxyXG5AVmlld0VsZW1lbnQoe1xyXG5cdHNlbGVjdG9yOiBcInBsYXllci1jb250cm9sc1wiLFxyXG5cdHRlbXBsYXRlOiByZXF1aXJlKCcuL3BsYXllci1jb250cm9scy5odG1sJyksXHJcblx0c3R5bGVzOiBbcmVxdWlyZSgnLi9wbGF5ZXItY29udHJvbHMuY3NzJyldXHJcbn0pXHJcbmNsYXNzIFdlYlBsYXllckNvbnRyb2xzIGV4dGVuZHMgV2ViVmlld0VsZW1lbnQge1xyXG5cclxuXHRwcml2YXRlIGNvbnRyb2xDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGZ1bGxzY3JlZW5CdXR0b246IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHBsYXlNZWRpYUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgY2hhdEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgc2V0dGluZ3NCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHJhaXNlSGFuZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgc2hvd1F1aXpCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHZvbHVtZVNsaWRlcjogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSB2b2x1bWVJbmRpY2F0b3I6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGR1cmF0aW9uOiBIVE1MU3BhbkVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgbXV0ZU9ic2VydmVyOiBPYnNlcnZlcjxib29sZWFuPjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHR9XHJcblxyXG5cdGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG5cdFx0dGhpcy51cGRhdGVWb2x1bWVJbmRpY2F0b3IocGFyc2VGbG9hdCh0aGlzLnZvbHVtZVNsaWRlci52YWx1ZSkgLyAxMDApO1xyXG5cdFx0dGhpcy5zZXRGdWxsc2NyZWVuKGZhbHNlKTtcclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZVwiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0RnVsbHNjcmVlbihkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCAhPT0gbnVsbCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnZvbHVtZUluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldE11dGVkKCF0aGlzLnZvbHVtZUluZGljYXRvci5jbGFzc0xpc3QuY29udGFpbnMoXCJpY29uLW11dGVcIikpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnZvbHVtZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBpbnB1dFJhbmdlID0gdGhpcy52b2x1bWVTbGlkZXIgYXMgYW55O1xyXG5cclxuXHRcdFx0dGhpcy5jb250cm9sQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KCctLXZvbHVtZS1iZWZvcmUtd2lkdGgnLCBpbnB1dFJhbmdlLnZhbHVlIC8gaW5wdXRSYW5nZS5tYXggKiAxMDAgKyAnJScpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnJhaXNlSGFuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldFNlbGVjdGVkKHRoaXMucmFpc2VIYW5kQnV0dG9uLCAhdGhpcy5yYWlzZUhhbmRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0ZWRcIikpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnNob3dRdWl6QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0U2VsZWN0ZWQodGhpcy5zaG93UXVpekJ1dHRvbiwgIXRoaXMuc2hvd1F1aXpCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0ZWRcIikpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXQgdmlzaWJsZSgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcInZpc2libGVcIik7XHJcblx0fVxyXG5cclxuXHRzZXQgdmlzaWJsZSh2YWx1ZTogYm9vbGVhbikge1xyXG5cdFx0aWYgKHZhbHVlKSB7XHJcblx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCBcIlwiKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInZpc2libGVcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzaG93KCk6IHZvaWQge1xyXG5cdFx0dGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGhpZGUoKTogdm9pZCB7XHJcblx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHNldER1cmF0aW9uKGR1cmF0aW9uTXM6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGR1cmF0aW9uTXMpO1xyXG5cdFx0Y29uc3QgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XHJcblx0XHRjb25zdCBtaW51dGVzID0gXCIwXCIgKyBkYXRlLmdldFVUQ01pbnV0ZXMoKTtcclxuXHRcdGNvbnN0IHNlY29uZHMgPSBcIjBcIiArIGRhdGUuZ2V0VVRDU2Vjb25kcygpO1xyXG5cclxuXHRcdGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBob3VycyArICc6JyArIG1pbnV0ZXMuc3Vic3RyKC0yKSArICc6JyArIHNlY29uZHMuc3Vic3RyKC0yKTtcclxuXHJcblx0XHR0aGlzLmR1cmF0aW9uLmlubmVyVGV4dCA9IGZvcm1hdHRlZFRpbWU7XHJcblx0fVxyXG5cclxuXHRzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMudm9sdW1lU2xpZGVyLnZhbHVlID0gKHZvbHVtZSAqIDEwMCkudG9TdHJpbmcoKTtcclxuXHJcblx0XHR0aGlzLnVwZGF0ZVZvbHVtZUluZGljYXRvcih2b2x1bWUpO1xyXG5cdH1cclxuXHJcblx0c2V0TXV0ZWQobXV0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmIChtdXRlZCkge1xyXG5cdFx0XHR0aGlzLnNldFZvbHVtZUluZGljYXRvcihcImljb24tbXV0ZVwiKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVZvbHVtZUluZGljYXRvcihwYXJzZUZsb2F0KHRoaXMudm9sdW1lU2xpZGVyLnZhbHVlKSAvIDEwMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMubXV0ZU9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMubXV0ZU9ic2VydmVyKG11dGVkKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldEZ1bGxzY3JlZW4oZnVsbHNjcmVlbjogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0aWYgKGZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0dGhpcy5zZXRGdWxsc2NyZWVuSW5kaWNhdG9yKFwiYmktZnVsbHNjcmVlbi1leGl0XCIpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuc2V0RnVsbHNjcmVlbkluZGljYXRvcihcImJpLWZ1bGxzY3JlZW5cIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXRTZWxlY3RlZChidXR0b246IEhUTUxCdXR0b25FbGVtZW50LCBzZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0Y29uc3QgY2xhc3NMaXN0ID0gYnV0dG9uLmNsYXNzTGlzdDtcclxuXHJcblx0XHRpZiAoc2VsZWN0ZWQpIHtcclxuXHRcdFx0Y2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldEFjdGl2ZShidXR0b246IEhUTUxCdXR0b25FbGVtZW50LCBhY3RpdmU6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNsYXNzTGlzdCA9IGJ1dHRvbi5jbGFzc0xpc3Q7XHJcblxyXG5cdFx0aWYgKGFjdGl2ZSkge1xyXG5cdFx0XHRjbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXRWaXNpYmxlKGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsIHZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmICh2aXNpYmxlKSB7XHJcblx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaW52aXNpYmxlXCIpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaW52aXNpYmxlXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0UGxheU1lZGlhVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldFZpc2libGUodGhpcy5wbGF5TWVkaWFCdXR0b24sIHZpc2libGUpO1xyXG5cdFx0dGhpcy50b2dnbGVDbGFzcyh0aGlzLnBsYXlNZWRpYUJ1dHRvbiwgdmlzaWJsZSwgXCJwdWxzZS1pbmZpbml0ZVwiKTtcclxuXHR9XHJcblxyXG5cdHNldE9uUGxheU1lZGlhKG9ic2VydmVyOiBPYnNlcnZlcjx2b2lkPik6IHZvaWQge1xyXG5cdFx0dGhpcy5wbGF5TWVkaWFCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0b2JzZXJ2ZXIoKTtcclxuXHRcdH0sIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdHNldE9uVm9sdW1lKG9ic2VydmVyOiBPYnNlcnZlcjxudW1iZXI+KTogdm9pZCB7XHJcblx0XHR0aGlzLnZvbHVtZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB2b2x1bWUgPSBwYXJzZUZsb2F0KHRoaXMudm9sdW1lU2xpZGVyLnZhbHVlKSAvIDEwMDtcclxuXHJcblx0XHRcdHRoaXMudXBkYXRlVm9sdW1lSW5kaWNhdG9yKHZvbHVtZSk7XHJcblxyXG5cdFx0XHRvYnNlcnZlcih2b2x1bWUpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZXRPbk11dGUob2JzZXJ2ZXI6IE9ic2VydmVyPGJvb2xlYW4+KTogdm9pZCB7XHJcblx0XHR0aGlzLm11dGVPYnNlcnZlciA9IG9ic2VydmVyO1xyXG5cdH1cclxuXHJcblx0c2V0T25TZXR0aW5ncyhvYnNlcnZlcjogT2JzZXJ2ZXI8Ym9vbGVhbj4pOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0dGhpcy5zZXR0aW5nc0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdG9ic2VydmVyKHRydWUpO1xyXG5cdFx0fSwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0c2V0T25GdWxsc2NyZWVuKG9ic2VydmVyOiBPYnNlcnZlcjxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0dGhpcy5mdWxsc2NyZWVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdG9ic2VydmVyKCEoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpKTtcclxuXHRcdH0sIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdHNldE9uUmFpc2VIYW5kKHByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0cHJvcGVydHkuc3Vic2NyaWJlKHJhaXNlID0+IHtcclxuXHRcdFx0dGhpcy5zZXRTZWxlY3RlZCh0aGlzLnJhaXNlSGFuZEJ1dHRvbiwgcmFpc2UpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5yYWlzZUhhbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0cHJvcGVydHkudmFsdWUgPSB0aGlzLnJhaXNlSGFuZEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJzZWxlY3RlZFwiKTtcclxuXHRcdH0sIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdHNldE9uUmFpc2VIYW5kQWN0aXZlKHByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0cHJvcGVydHkuc3Vic2NyaWJlKGFjdGl2ZSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0QWN0aXZlKHRoaXMucmFpc2VIYW5kQnV0dG9uLCBhY3RpdmUpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZXRPblNob3dRdWl6KHByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0cHJvcGVydHkuc3Vic2NyaWJlKHNob3cgPT4ge1xyXG5cdFx0XHR0aGlzLnNldFNlbGVjdGVkKHRoaXMuc2hvd1F1aXpCdXR0b24sIHNob3cpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5zaG93UXVpekJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRwcm9wZXJ0eS52YWx1ZSA9IHRoaXMuc2hvd1F1aXpCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0ZWRcIik7XHJcblx0XHR9LCBmYWxzZSk7XHJcblx0fVxyXG5cclxuXHRzZXRPblNob3dRdWl6QWN0aXZlKHByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXRWaXNpYmxlKHRoaXMuc2hvd1F1aXpCdXR0b24sIHByb3BlcnR5LnZhbHVlKTtcclxuXHRcdHRoaXMudG9nZ2xlQ2xhc3ModGhpcy5zaG93UXVpekJ1dHRvbiwgcHJvcGVydHkudmFsdWUsIFwicHVsc2VcIik7XHJcblxyXG5cdFx0cHJvcGVydHkuc3Vic2NyaWJlKGFjdGl2ZSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0VmlzaWJsZSh0aGlzLnNob3dRdWl6QnV0dG9uLCBhY3RpdmUpO1xyXG5cdFx0XHR0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuc2hvd1F1aXpCdXR0b24sIGFjdGl2ZSwgXCJwdWxzZVwiKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c2V0Q2hhdEVuYWJsZWQoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXRWaXNpYmxlKHRoaXMuY2hhdEJ1dHRvbiwgZW5hYmxlZCk7XHJcblx0fVxyXG5cclxuXHRzZXRPbkNoYXRBY3Rpb24ocHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+KTogdm9pZCB7XHJcblx0XHR0aGlzLnNldEFjdGl2ZSh0aGlzLmNoYXRCdXR0b24sIHByb3BlcnR5LnZhbHVlKTtcclxuXHJcblx0XHRwcm9wZXJ0eS5zdWJzY3JpYmUoc2hvdyA9PiB7XHJcblx0XHRcdHRoaXMuc2V0QWN0aXZlKHRoaXMuY2hhdEJ1dHRvbiwgc2hvdyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmNoYXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0cHJvcGVydHkudmFsdWUgPSB0aGlzLmNoYXRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpO1xyXG5cdFx0fSwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB0b2dnbGVDbGFzcyhidXR0b246IEhUTUxFbGVtZW50LCBhZGQ6IGJvb2xlYW4sIG5hbWU6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgY2xhc3NMaXN0ID0gYnV0dG9uLmNsYXNzTGlzdDtcclxuXHJcblx0XHRpZiAoYWRkKSB7XHJcblx0XHRcdGNsYXNzTGlzdC5hZGQobmFtZSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlVm9sdW1lSW5kaWNhdG9yKHZvbHVtZTogbnVtYmVyKSB7XHJcblx0XHRpZiAodm9sdW1lID09PSAwKSB7XHJcblx0XHRcdHRoaXMuc2V0Vm9sdW1lSW5kaWNhdG9yKFwiaWNvbi12b2x1bWUwXCIpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodm9sdW1lIDwgMC4zMykge1xyXG5cdFx0XHR0aGlzLnNldFZvbHVtZUluZGljYXRvcihcImljb24tdm9sdW1lMVwiKTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKHZvbHVtZSA+IDAuMzMgJiYgdm9sdW1lIDwgMC42Nikge1xyXG5cdFx0XHR0aGlzLnNldFZvbHVtZUluZGljYXRvcihcImljb24tdm9sdW1lMlwiKTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKHZvbHVtZSA+IDAuNjYpIHtcclxuXHRcdFx0dGhpcy5zZXRWb2x1bWVJbmRpY2F0b3IoXCJpY29uLXZvbHVtZTNcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNldEZ1bGxzY3JlZW5JbmRpY2F0b3IoaW5kaWNhdG9yTmFtZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCBjbGFzc0xpc3QgPSB0aGlzLmZ1bGxzY3JlZW5CdXR0b24uY2xhc3NMaXN0O1xyXG5cclxuXHRcdGNsYXNzTGlzdC5yZW1vdmUoXCJiaS1mdWxsc2NyZWVuXCIsIFwiYmktZnVsbHNjcmVlbi1leGl0XCIpO1xyXG5cdFx0Y2xhc3NMaXN0LmFkZChpbmRpY2F0b3JOYW1lKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0Vm9sdW1lSW5kaWNhdG9yKGluZGljYXRvck5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY2xhc3NMaXN0ID0gdGhpcy52b2x1bWVJbmRpY2F0b3IuY2xhc3NMaXN0O1xyXG5cclxuXHRcdGNsYXNzTGlzdC5yZW1vdmUoXCJpY29uLW11dGVcIik7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuXHRcdFx0Y2xhc3NMaXN0LnJlbW92ZShcImljb24tdm9sdW1lXCIgKyBpKTtcclxuXHRcdH1cclxuXHJcblx0XHRjbGFzc0xpc3QuYWRkKGluZGljYXRvck5hbWUpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgV2ViUGxheWVyQ29udHJvbHMgfTsiLCJpbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZGltZW5zaW9uXCI7XHJcblxyXG5jbGFzcyBTaXplRXZlbnQge1xyXG5cclxuXHRwcml2YXRlIF9zaXplOiBEaW1lbnNpb247XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihzaXplOiBEaW1lbnNpb24pIHtcclxuXHRcdHRoaXMuX3NpemUgPSBzaXplO1xyXG5cdH1cclxuXHJcblx0Z2V0IHNpemUoKTogRGltZW5zaW9uIHtcclxuXHRcdHJldHVybiB0aGlzLl9zaXplO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2l6ZUV2ZW50IH07IiwiZGVjbGFyZSBnbG9iYWwge1xyXG5cclxuXHRpbnRlcmZhY2UgQXJyYXk8VD4ge1xyXG5cdFx0ZXF1YWxzKGFycmF5OiBhbnlbXSk6IGJvb2xlYW47XHJcblx0fVxyXG5cclxufVxyXG5cclxuaWYgKEFycmF5LnByb3RvdHlwZS5lcXVhbHMpIHtcclxuXHRjb25zb2xlLndhcm4oXCJPdmVycmlkaW5nIGV4aXN0aW5nIEFycmF5LnByb3RvdHlwZS5lcXVhbHMuXCIpO1xyXG59XHJcblxyXG5BcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyOiBhbnlbXSkge1xyXG5cdGlmICghb3RoZXIpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0aWYgKHRoaXMgPT09IG90aGVyKSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0aWYgKHRoaXMubGVuZ3RoICE9IG90aGVyLmxlbmd0aCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Zm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG5cdFx0aWYgKHRoaXNbaV0gaW5zdGFuY2VvZiBBcnJheSAmJiBvdGhlcltpXSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcblx0XHRcdGlmICghdGhpc1tpXS5lcXVhbHMob3RoZXJbaV0pKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzW2ldICE9IG90aGVyW2ldKSB7XHJcblx0XHRcdC8vIFRPRE8gb3B0aW9uYWw6IGNvbXBhcmUgb2JqZWN0cy5cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gSGlkZSBtZXRob2QgZnJvbSBmb3ItaW4gbG9vcHMuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwiZXF1YWxzXCIsIHsgZW51bWVyYWJsZTogZmFsc2UgfSk7XHJcblxyXG5leHBvcnQgeyB9IiwiaW1wb3J0IHsgVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3RyYW5zZm9ybVwiO1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG5cclxuXHRpbnRlcmZhY2UgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcclxuXHJcblx0XHRnZXRUcmFuc2Zvcm1FeHQoKTogVHJhbnNmb3JtO1xyXG5cclxuXHR9XHJcblxyXG59XHJcblxyXG5cclxuY29uc3QgX2dldFRyYW5zZm9ybSA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtO1xyXG5cclxuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1FeHQgPSBmdW5jdGlvbiAoKSB7XHJcblx0aWYgKF9nZXRUcmFuc2Zvcm0pIHtcclxuXHRcdC8vIFRoaXMgaXMgdGhlIERPTU1hdHJpeC5cclxuXHRcdGNvbnN0IG0gPSBfZ2V0VHJhbnNmb3JtLmFwcGx5KHRoaXMsIEFycmF5LmZyb20oYXJndW1lbnRzKSk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLl90cmFuc2Zvcm1fZXh0KSB7XHJcblx0XHRcdHRoaXMuX3RyYW5zZm9ybV9leHQgPSBuZXcgVHJhbnNmb3JtKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdHJhbnNmb3JtX2V4dC5zZXRWYWx1ZXMobS5hLCBtLmIsIG0uYywgbS5kLCBtLmUsIG0uZik7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdGhpcy5fdHJhbnNmb3JtX2V4dDtcclxufVxyXG5cclxuXHJcbmlmICghX2dldFRyYW5zZm9ybSkge1xyXG5cdGNvbnN0IF9yZXNldFRyYW5zZm9ybSA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUucmVzZXRUcmFuc2Zvcm07XHJcblx0Y29uc3QgX3JvdGF0ZSA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUucm90YXRlO1xyXG5cdGNvbnN0IF9zY2FsZSA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuc2NhbGU7XHJcblx0Y29uc3QgX3NldFRyYW5zZm9ybSA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuc2V0VHJhbnNmb3JtO1xyXG5cdGNvbnN0IF90cmFuc2Zvcm0gPSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnRyYW5zZm9ybTtcclxuXHRjb25zdCBfdHJhbnNsYXRlID0gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS50cmFuc2xhdGU7XHJcblx0Y29uc3QgX3NhdmUgPSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnNhdmU7XHJcblx0Y29uc3QgX3Jlc3RvcmUgPSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnJlc3RvcmU7XHJcblxyXG5cclxuXHRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnJlc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKF9yZXNldFRyYW5zZm9ybSkge1xyXG5cdFx0XHRfcmVzZXRUcmFuc2Zvcm0uYXBwbHkodGhpcywgQXJyYXkuZnJvbShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuX3RyYW5zZm9ybV9leHQpIHtcclxuXHRcdFx0dGhpcy5fdHJhbnNmb3JtX2V4dCA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0LnJlc2V0KCk7XHJcblx0fVxyXG5cclxuXHRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZTogbnVtYmVyKSB7XHJcblx0XHRpZiAoX3JvdGF0ZSkge1xyXG5cdFx0XHRfcm90YXRlLmFwcGx5KHRoaXMsIEFycmF5LmZyb20oYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLl90cmFuc2Zvcm1fZXh0KSB7XHJcblx0XHRcdHRoaXMuX3RyYW5zZm9ybV9leHQgPSBuZXcgVHJhbnNmb3JtKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdHJhbnNmb3JtX2V4dC5yb3RhdGUoYW5nbGUpO1xyXG5cdH1cclxuXHJcblx0Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG5cdFx0aWYgKF9zY2FsZSkge1xyXG5cdFx0XHRfc2NhbGUuYXBwbHkodGhpcywgQXJyYXkuZnJvbShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuX3RyYW5zZm9ybV9leHQpIHtcclxuXHRcdFx0dGhpcy5fdHJhbnNmb3JtX2V4dCA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0LnNjYWxlKHgsIHkpO1xyXG5cdH1cclxuXHJcblx0Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoYT86IG51bWJlciB8IERPTU1hdHJpeDJESW5pdCwgYj86IG51bWJlciwgYz86IG51bWJlciwgZD86IG51bWJlciwgZT86IG51bWJlciwgZj86IG51bWJlcikge1xyXG5cdFx0aWYgKF9zZXRUcmFuc2Zvcm0pIHtcclxuXHRcdFx0X3NldFRyYW5zZm9ybS5hcHBseSh0aGlzLCBBcnJheS5mcm9tKGFyZ3VtZW50cykpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChiKSB7XHJcblx0XHRcdGEgPSA8bnVtYmVyPmE7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc3QgZG9tTWF0cml4ID0gPERPTU1hdHJpeDJESW5pdD5hO1xyXG5cclxuXHRcdFx0YSA9IGRvbU1hdHJpeC5hO1xyXG5cdFx0XHRiID0gZG9tTWF0cml4LmI7XHJcblx0XHRcdGMgPSBkb21NYXRyaXguYztcclxuXHRcdFx0ZCA9IGRvbU1hdHJpeC5kO1xyXG5cdFx0XHRlID0gZG9tTWF0cml4LmU7XHJcblx0XHRcdGYgPSBkb21NYXRyaXguZjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuX3RyYW5zZm9ybV9leHQpIHtcclxuXHRcdFx0dGhpcy5fdHJhbnNmb3JtX2V4dCA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0LnNldFZhbHVlcyhhLCBiLCBjLCBkLCBlLCBmKTtcclxuXHR9XHJcblxyXG5cdENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKGE6IG51bWJlciwgYjogbnVtYmVyLCBjOiBudW1iZXIsIGQ6IG51bWJlciwgZTogbnVtYmVyLCBmOiBudW1iZXIpIHtcclxuXHRcdGlmIChfdHJhbnNmb3JtKSB7XHJcblx0XHRcdF90cmFuc2Zvcm0uYXBwbHkodGhpcywgQXJyYXkuZnJvbShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuX3RyYW5zZm9ybV9leHQpIHtcclxuXHRcdFx0dGhpcy5fdHJhbnNmb3JtX2V4dCA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0Lm11bHRpcGx5KG5ldyBUcmFuc2Zvcm0oW2EsIGIsIGMsIGQsIGUsIGZdKSk7XHJcblx0fVxyXG5cclxuXHRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG5cdFx0aWYgKF90cmFuc2xhdGUpIHtcclxuXHRcdFx0X3RyYW5zbGF0ZS5hcHBseSh0aGlzLCBBcnJheS5mcm9tKGFyZ3VtZW50cykpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5fdHJhbnNmb3JtX2V4dCkge1xyXG5cdFx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0ID0gbmV3IFRyYW5zZm9ybSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3RyYW5zZm9ybV9leHQudHJhbnNsYXRlKHgsIHkpO1xyXG5cdH1cclxuXHJcblx0Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKF9zYXZlKSB7XHJcblx0XHRcdF9zYXZlLmFwcGx5KHRoaXMsIEFycmF5LmZyb20oYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLl90cmFuc2Zvcm1fZXh0X3N0YWNrKSB7XHJcblx0XHRcdHRoaXMuX3RyYW5zZm9ybV9leHRfc3RhY2sgPSBbXTtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy5fdHJhbnNmb3JtX2V4dCkge1xyXG5cdFx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0ID0gbmV3IFRyYW5zZm9ybSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3RyYW5zZm9ybV9leHRfc3RhY2sucHVzaCh0aGlzLl90cmFuc2Zvcm1fZXh0LmNsb25lKCkpO1xyXG5cdH1cclxuXHJcblx0Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKF9yZXN0b3JlKSB7XHJcblx0XHRcdF9yZXN0b3JlLmFwcGx5KHRoaXMsIEFycmF5LmZyb20oYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLl90cmFuc2Zvcm1fZXh0X3N0YWNrKSB7XHJcblx0XHRcdHRoaXMuX3RyYW5zZm9ybV9leHRfc3RhY2sgPSBbXTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90cmFuc2Zvcm1fZXh0ID0gdGhpcy5fdHJhbnNmb3JtX2V4dF9zdGFjay5wb3AoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMuX3RyYW5zZm9ybV9leHQpIHtcclxuXHRcdFx0dGhpcy5fdHJhbnNmb3JtX2V4dCA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IH0iLCJjb25zdCBzcGVjS2V5cyA9IHtcclxuXHRmdWxsc2NyZWVuRW5hYmxlZDogMCxcclxuXHRmdWxsc2NyZWVuRWxlbWVudDogMSxcclxuXHRyZXF1ZXN0RnVsbHNjcmVlbjogMixcclxuXHRleGl0RnVsbHNjcmVlbjogMyxcclxuXHRmdWxsc2NyZWVuY2hhbmdlOiA0LFxyXG5cdGZ1bGxzY3JlZW5lcnJvcjogNSxcclxufTtcclxuXHJcbmNvbnN0IHdlYmtpdCA9IFtcclxuXHQnd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQnLFxyXG5cdCd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsXHJcblx0J3dlYmtpdFJlcXVlc3RGdWxsc2NyZWVuJyxcclxuXHQnd2Via2l0RXhpdEZ1bGxzY3JlZW4nLFxyXG5cdCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcclxuXHQnd2Via2l0ZnVsbHNjcmVlbmVycm9yJyxcclxuXTtcclxuXHJcbmNvbnN0IG1veiA9IFtcclxuXHQnbW96RnVsbFNjcmVlbkVuYWJsZWQnLFxyXG5cdCdtb3pGdWxsU2NyZWVuRWxlbWVudCcsXHJcblx0J21velJlcXVlc3RGdWxsU2NyZWVuJyxcclxuXHQnbW96Q2FuY2VsRnVsbFNjcmVlbicsXHJcblx0J21vemZ1bGxzY3JlZW5jaGFuZ2UnLFxyXG5cdCdtb3pmdWxsc2NyZWVuZXJyb3InLFxyXG5dO1xyXG5cclxuY29uc3QgbXMgPSBbXHJcblx0J21zRnVsbHNjcmVlbkVuYWJsZWQnLFxyXG5cdCdtc0Z1bGxzY3JlZW5FbGVtZW50JyxcclxuXHQnbXNSZXF1ZXN0RnVsbHNjcmVlbicsXHJcblx0J21zRXhpdEZ1bGxzY3JlZW4nLFxyXG5cdCdNU0Z1bGxzY3JlZW5DaGFuZ2UnLFxyXG5cdCdNU0Z1bGxzY3JlZW5FcnJvcicsXHJcbl07XHJcblxyXG5jb25zdCBzcGVjID0gT2JqZWN0LmtleXMoc3BlY0tleXMpO1xyXG5sZXQgdmVuZG9yOiBzdHJpbmdbXSA9IG51bGw7XHJcblxyXG5mb3IgKGxldCB2IG9mIFtzcGVjLCB3ZWJraXQsIG1veiwgbXNdKSB7XHJcblx0aWYgKHZbc3BlY0tleXMuZnVsbHNjcmVlbkVuYWJsZWRdIGluIGRvY3VtZW50KSB7XHJcblx0XHR2ZW5kb3IgPSB2O1xyXG5cdFx0YnJlYWs7XHJcblx0fVxyXG59XHJcblxyXG5pZiAodmVuZG9yKSB7XHJcblx0bGV0IHByb3RvOiBhbnkgPSBFbGVtZW50LnByb3RvdHlwZTtcclxuXHRwcm90by5yZXF1ZXN0RnVsbHNjcmVlbiA9IHByb3RvW3ZlbmRvcltzcGVjS2V5cy5yZXF1ZXN0RnVsbHNjcmVlbl1dO1xyXG5cclxuXHRwcm90byA9IERvY3VtZW50LnByb3RvdHlwZTtcclxuXHRwcm90by5leGl0RnVsbHNjcmVlbiA9IHByb3RvW3ZlbmRvcltzcGVjS2V5cy5leGl0RnVsbHNjcmVlbl1dO1xyXG5cclxuXHRjb25zdCBmdWxsc2NyZWVuRWxlbWVudCA9IHNwZWNbc3BlY0tleXMuZnVsbHNjcmVlbkVsZW1lbnRdO1xyXG5cdGNvbnN0IGZ1bGxzY3JlZW5FbmFibGVkID0gc3BlY1tzcGVjS2V5cy5mdWxsc2NyZWVuRW5hYmxlZF07XHJcblxyXG5cdGlmICghKGZ1bGxzY3JlZW5FbGVtZW50IGluIGRvY3VtZW50KSkge1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCBmdWxsc2NyZWVuRWxlbWVudCwge1xyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRyZXR1cm4gKGRvY3VtZW50IGFzIGFueSlbdmVuZG9yW3NwZWNLZXlzLmZ1bGxzY3JlZW5FbGVtZW50XV07XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCBmdWxsc2NyZWVuRW5hYmxlZCwge1xyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRyZXR1cm4gKGRvY3VtZW50IGFzIGFueSlbdmVuZG9yW3NwZWNLZXlzLmZ1bGxzY3JlZW5FbmFibGVkXV07XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0aWYgKHNwZWMgIT09IHZlbmRvcikge1xyXG5cdFx0Y29uc3QgcHJveHlMaXN0ZW5lciA9IChldmVudDogRXZlbnQpID0+IHtcclxuXHRcdFx0bGV0IGFjdGlvblR5cGUgPSBldmVudC50eXBlLnJlcGxhY2UoL14od2Via2l0fG1venxNUykvLCAnJykudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0bGV0IG5ld0V2ZW50O1xyXG5cclxuXHRcdFx0aWYgKHR5cGVvZiAoRXZlbnQpID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0bmV3RXZlbnQgPSBuZXcgRXZlbnQoYWN0aW9uVHlwZSwgZXZlbnQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdG5ld0V2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XHJcblx0XHRcdFx0bmV3RXZlbnQuaW5pdEV2ZW50KGFjdGlvblR5cGUsIGV2ZW50LmJ1YmJsZXMsIGV2ZW50LmNhbmNlbGFibGUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRldmVudC50YXJnZXQuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodmVuZG9yW3NwZWNLZXlzLmZ1bGxzY3JlZW5jaGFuZ2VdLCBwcm94eUxpc3RlbmVyKTtcclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodmVuZG9yW3NwZWNLZXlzLmZ1bGxzY3JlZW5lcnJvcl0sIHByb3h5TGlzdGVuZXIpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgfSIsImV4cG9ydCAqIGZyb20gXCIuL2FycmF5LmV4dGVuc2lvblwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb250ZXh0LTJkLmV4dGVuc2lvblwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9mdWxsc2NyZWVuLmV4dGVuc2lvblwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9zdHJpbmcuZXh0ZW5zaW9uXCI7IiwiZGVjbGFyZSBnbG9iYWwge1xyXG5cclxuXHRpbnRlcmZhY2UgU3RyaW5nQ29uc3RydWN0b3Ige1xyXG5cdFx0Zm9ybWF0KHN0cjogc3RyaW5nLCAuLi5hcnI6IGFueVtdKTogc3RyaW5nO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcblN0cmluZy5mb3JtYXQgPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcsIC4uLmFycjogYW55W10pIHtcclxuXHR2YXIgaSA9IC0xO1xyXG5cclxuXHRmdW5jdGlvbiBjYWxsYmFjayhleHA6IGFueSwgcDA6IGFueSwgcDE6IGFueSwgcDI6IGFueSwgcDM6IGFueSwgcDQ6IGFueSkge1xyXG5cdFx0aWYgKGV4cCA9PSAnJSUnKSByZXR1cm4gJyUnO1xyXG5cdFx0aWYgKGFyclsrK2ldID09PSB1bmRlZmluZWQpIHJldHVybiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0ZXhwID0gcDIgPyBwYXJzZUludChwMi5zdWJzdHIoMSkpIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdHZhciBiYXNlID0gcDMgPyBwYXJzZUludChwMy5zdWJzdHIoMSkpIDogdW5kZWZpbmVkO1xyXG5cdFx0dmFyIHZhbDtcclxuXHJcblx0XHRzd2l0Y2ggKHA0KSB7XHJcblx0XHRcdGNhc2UgJ3MnOiB2YWwgPSBhcnJbaV07IGJyZWFrO1xyXG5cdFx0XHRjYXNlICdjJzogdmFsID0gYXJyW2ldWzBdOyBicmVhaztcclxuXHRcdFx0Y2FzZSAnZic6IHZhbCA9IHBhcnNlRmxvYXQoYXJyW2ldKS50b0ZpeGVkKGV4cCk7IGJyZWFrO1xyXG5cdFx0XHRjYXNlICdwJzogdmFsID0gcGFyc2VGbG9hdChhcnJbaV0pLnRvUHJlY2lzaW9uKGV4cCk7IGJyZWFrO1xyXG5cdFx0XHRjYXNlICdlJzogdmFsID0gcGFyc2VGbG9hdChhcnJbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsgYnJlYWs7XHJcblx0XHRcdGNhc2UgJ3gnOiB2YWwgPSBwYXJzZUludChhcnJbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOyBicmVhaztcclxuXHRcdFx0Y2FzZSAnZCc6IHZhbCA9IHBhcnNlRmxvYXQocGFyc2VJbnQoYXJyW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOyBicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHR2YWwgPSB0eXBlb2YgKHZhbCkgPT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeSh2YWwpIDogdmFsLnRvU3RyaW5nKGJhc2UpO1xyXG5cdFx0dmFyIHN6ID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi9cclxuXHRcdHZhciBjaCA9IHAxICYmIHAxWzBdID09ICcwJyA/ICcwJyA6ICcgJzsgLyogaXNudWxsPyAqL1xyXG5cclxuXHRcdHdoaWxlICh2YWwubGVuZ3RoIDwgc3opIHZhbCA9IHAwICE9PSB1bmRlZmluZWQgPyB2YWwgKyBjaCA6IGNoICsgdmFsOyAvKiBpc21pbnVzPyAqL1xyXG5cclxuXHRcdHJldHVybiB2YWw7XHJcblx0fVxyXG5cclxuXHR2YXIgcmVnZXggPSAvJSgtKT8oMD9bMC05XSspPyhbLl1bMC05XSspPyhbI11bMC05XSspPyhbc2NmcGV4ZCVdKS9nO1xyXG5cclxuXHRyZXR1cm4gc3RyLnJlcGxhY2UocmVnZXgsIGNhbGxiYWNrKTtcclxufVxyXG5cclxuZXhwb3J0IHsgfSIsIi8qKlxyXG4gKiBBIERpbWVuc2lvbiBzcGVjaWZpZXMgYSBzaXplIHRocm91Z2ggaXRzIHdpZHRoIGFuZCBoZWlnaHQuXHJcbiAqL1xyXG5jbGFzcyBEaW1lbnNpb24ge1xyXG5cclxuXHQvKiogVGhlIHdpZHRoIG9mIHRoZSBkaW1lbnNpb24uICovXHJcblx0d2lkdGg6IG51bWJlcjtcclxuXHJcblx0LyoqIFRoZSBoZWlnaHQgb2YgdGhlIGRpbWVuc2lvbi4gKi9cclxuXHRoZWlnaHQ6IG51bWJlcjtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnN0cnVjdHMgYSBuZXcgRGltZW5zaW9uIHdpdGggdGhlIHNwZWNpZmllZCBzaXplLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHdpZHRoIHRoZSB3aWR0aCBvZiB0aGUgZGltZW5zaW9uLlxyXG5cdCAqIEBwYXJhbSBoZWlnaHQgdGhlIGhlaWdodCBvZiB0aGUgZGltZW5zaW9uLlxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcblx0XHR0aGlzLndpZHRoID0gd2lkdGg7XHJcblx0XHR0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRlc3RzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGRpbWVuc2lvbiBkZXNjcmliZXMgdGhlIHNhbWUgZGltZW5zaW9uLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBvdGhlciB0aGUgZGltZW5zaW9uIHRvIGNvbXBhcmUgdGhpcyBkaW1lbnNpb24gdG8uXHJcblx0ICogXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBkaW1lbnNpb25zIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdGVxdWFscyhvdGhlcjogRGltZW5zaW9uKTogYm9vbGVhbiB7XHJcblx0XHRpZiAoIW90aGVyKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIuaGVpZ2h0ICYmIHRoaXMuaGVpZ2h0ID09PSBvdGhlci5oZWlnaHQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgZGltZW5zaW9uLlxyXG5cdCAqL1xyXG5cdHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYFske3RoaXMuaGVpZ2h0fSwgJHt0aGlzLndpZHRofV1gO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRGltZW5zaW9uIH07IiwiY2xhc3MgRWxsaXBzZSB7XHJcblxyXG5cdC8qKiBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgRWxsaXBzZS4gKi9cclxuXHRyZWFkb25seSB4OiBudW1iZXI7XHJcblxyXG5cdC8qKiBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgRWxsaXBzZS4gKi9cclxuXHRyZWFkb25seSB5OiBudW1iZXI7XHJcblxyXG5cdC8qKiBUaGUgb3ZlcmFsbCB3aWR0aCBvZiB0aGUgRWxsaXBzZS4gKi9cclxuXHRyZWFkb25seSB3aWR0aDogbnVtYmVyO1xyXG5cclxuXHQvKiogVGhlIG92ZXJhbGwgaGVpZ2h0IG9mIHRoZSBFbGxpcHNlLiAqL1xyXG5cdHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xyXG5cclxuXHQvKiogVGhlIG1ham9yLWF4aXMgcmFkaXVzIG9mIHRoZSBFbGxpcHNlLiAqL1xyXG5cdHJlYWRvbmx5IHJhZGl1c1g6IG51bWJlcjtcclxuXHJcblx0LyoqIFRoZSBtaW5vci1heGlzIHJhZGl1cyBvZiB0aGUgRWxsaXBzZS4gKi9cclxuXHRyZWFkb25seSByYWRpdXNZOiBudW1iZXI7XHJcblxyXG5cdC8qKiBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIEVsbGlwc2UuICovXHJcblx0cmVhZG9ubHkgY2VudGVyWDogbnVtYmVyO1xyXG5cclxuXHQvKiogVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBFbGxpcHNlLiAqL1xyXG5cdHJlYWRvbmx5IGNlbnRlclk6IG51bWJlcjtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnN0cnVjdHMgYW4gRWxsaXBzZSBmcm9tIHRoZSBzcGVjaWZpZWQgY29vcmRpbmF0ZXMuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0geCB0aGUgWCBjb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgRWxsaXBzZS5cclxuXHQgKiBAcGFyYW0geSB0aGUgWSBjb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgRWxsaXBzZS5cclxuXHQgKiBAcGFyYW0gd2lkdGggdGhlIHdpZHRoIG9mIHRoZSBFbGxpcHNlLlxyXG5cdCAqIEBwYXJhbSBoZWlnaHQgdGhlIGhlaWdodCBvZiB0aGUgRWxsaXBzZS5cclxuXHQgKi9cclxuXHRjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuXHRcdHRoaXMueCA9IHg7XHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cdFx0dGhpcy53aWR0aCA9IHdpZHRoO1xyXG5cdFx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblx0XHR0aGlzLnJhZGl1c1ggPSB3aWR0aCAqIDAuNTtcclxuXHRcdHRoaXMucmFkaXVzWSA9IGhlaWdodCAqIDAuNTtcclxuXHRcdHRoaXMuY2VudGVyWCA9IHggKyB0aGlzLnJhZGl1c1g7XHJcblx0XHR0aGlzLmNlbnRlclkgPSB5ICsgdGhpcy5yYWRpdXNZO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcyBhcmUgaW5zaWRlIHRoZSBib3VuZGFyeSBvZiB0aGUgRWxsaXBzZS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0geCB0aGUgc3BlY2lmaWVkIFggY29vcmRpbmF0ZSB0byBiZSB0ZXN0ZWQuXHJcblx0ICogQHBhcmFtIHkgdGhlIHNwZWNpZmllZCBZIGNvb3JkaW5hdGUgdG8gYmUgdGVzdGVkLlxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGVzIGFyZSBpbnNpZGUgdGhlIEVsbGlwc2UgYm91bmRhcnksXHJcblx0ICogICAgICAgICBmYWxzZSBvdGhlcndpc2UuXHJcblx0ICovXHJcblx0Y29udGFpbnNQb2ludCh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgdyA9IHRoaXMud2lkdGg7XHJcblx0XHRpZiAodyA8PSAwLjApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGggPSB0aGlzLmhlaWdodDtcclxuXHRcdGlmIChoIDw9IDAuMCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qgbm9ybVggPSAoeCAtIHRoaXMueCkgLyB3IC0gMC41O1xyXG5cdFx0Y29uc3Qgbm9ybVkgPSAoeSAtIHRoaXMueSkgLyBoIC0gMC41O1xyXG5cclxuXHRcdHJldHVybiAobm9ybVggKiBub3JtWCArIG5vcm1ZICogbm9ybVkpIDwgMC4yNTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRlc3RzIGlmIHRoZSBFbGxpcHNlIGVudGlyZWx5IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgcmVjdGFuZ2xlLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHggdGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHNwZWNpZmllZCByZWN0YW5nbGUuXHJcblx0ICogQHBhcmFtIHkgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHNwZWNpZmllZCByZWN0YW5nbGUuXHJcblx0ICogQHBhcmFtIHcgdGhlIHdpZHRoIG9mIHRoZSBzcGVjaWZpZWQgcmVjdGFuZ2xlLlxyXG5cdCAqIEBwYXJhbSBoIHRoZSBoZWlnaHQgb2YgdGhlIHNwZWNpZmllZCByZWN0YW5nbGUuXHJcblx0ICogXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBFbGxpcHNlIGVudGlyZWx5IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgcmVjdGFuZ2xlLFxyXG5cdCAqICAgICAgICAgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdGNvbnRhaW5zUmVjdCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiAodGhpcy5jb250YWluc1BvaW50KHgsIHkpICYmXHJcblx0XHRcdHRoaXMuY29udGFpbnNQb2ludCh4ICsgd2lkdGgsIHkpICYmXHJcblx0XHRcdHRoaXMuY29udGFpbnNQb2ludCh4LCB5ICsgaGVpZ2h0KSAmJlxyXG5cdFx0XHR0aGlzLmNvbnRhaW5zUG9pbnQoeCArIHdpZHRoLCB5ICsgaGVpZ2h0KSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUZXN0cyBpZiB0aGUgRWxsaXBzZSBpbnRlcnNlY3RzIHRoZSBzcGVjaWZpZWQgcmVjdGFuZ2xlLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHggdGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHNwZWNpZmllZCByZWN0YW5nbGUuXHJcblx0ICogQHBhcmFtIHkgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHNwZWNpZmllZCByZWN0YW5nbGUuXHJcblx0ICogQHBhcmFtIHcgdGhlIHdpZHRoIG9mIHRoZSBzcGVjaWZpZWQgcmVjdGFuZ2xlLlxyXG5cdCAqIEBwYXJhbSBoIHRoZSBoZWlnaHQgb2YgdGhlIHNwZWNpZmllZCByZWN0YW5nbGUuXHJcblx0ICogXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBFbGxpcHNlIGFuZCB0aGUgcmVjdGFuZ2xlIGludGVyc2VjdCBlYWNoIG90aGVyLFxyXG5cdCAqICAgICAgICAgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdGludGVyc2VjdHNSZWN0KHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHdpZHRoIDw9IDAuMCB8fCBoZWlnaHQgPD0gMC4wKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLndpZHRoIDw9IDAuMCB8fCB0aGlzLmhlaWdodCA8PSAwLjApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRlc3Qgd2hldGhlciB0aGUgcmVjdGFuZ2xlIGVuY2xvc2VzIHRoZSBlbGxpcHNlIGNlbnRlci5cclxuXHRcdGlmICh0aGlzLmNlbnRlclggPj0geCAmJiB0aGlzLmNlbnRlclkgPj0geSAmJiB0aGlzLmNlbnRlclggPD0geCArIHdpZHRoICYmIHRoaXMuY2VudGVyWSA8PSB5ICsgaGVpZ2h0KSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLmludGVyc2VjdHNMaW5lKHgsIHksIHggKyB3aWR0aCwgeSkgfHxcclxuXHRcdFx0dGhpcy5pbnRlcnNlY3RzTGluZSh4LCB5ICsgaGVpZ2h0LCB4ICsgd2lkdGgsIHkgKyBoZWlnaHQpIHx8XHJcblx0XHRcdHRoaXMuaW50ZXJzZWN0c0xpbmUoeCwgeSwgeCwgeSArIGhlaWdodCkgfHxcclxuXHRcdFx0dGhpcy5pbnRlcnNlY3RzTGluZSh4ICsgd2lkdGgsIHksIHggKyB3aWR0aCwgeSArIGhlaWdodCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUZXN0cyBpZiB0aGUgRWxsaXBzZSBpbnRlcnNlY3RzIHRoZSBsaW5lIHNlZ21lbnQgKHgxLHkxKSB0byAoeDIseTIpLlxyXG5cdCAqXHJcbiAgICAgKiBAcGFyYW0geDEgdGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9pbnQgb2YgdGhlIGxpbmUgc2VnbWVudC5cclxuICAgICAqIEBwYXJhbSB5MSB0aGUgWSBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb2ludCBvZiB0aGUgbGluZSBzZWdtZW50LlxyXG4gICAgICogQHBhcmFtIHgyIHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludCBvZiB0aGUgbGluZSBzZWdtZW50LlxyXG4gICAgICogQHBhcmFtIHkyIHRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludCBvZiB0aGUgbGluZSBzZWdtZW50LlxyXG5cdCAqXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBFbGxpcHNlIGFuZCB0aGUgbGluZSBzZWdtZW50IGludGVyc2VjdCBlYWNoIG90aGVyLFxyXG5cdCAqICAgICAgICAgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdGludGVyc2VjdHNMaW5lKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBib29sZWFuIHtcclxuXHRcdGlmICh0aGlzLndpZHRoIDw9IDAuMCB8fCB0aGlzLmhlaWdodCA8PSAwLjApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHgxIC09IHRoaXMuY2VudGVyWDtcclxuXHRcdHgyIC09IHRoaXMuY2VudGVyWDtcclxuXHRcdHkxIC09IHRoaXMuY2VudGVyWTtcclxuXHRcdHkyIC09IHRoaXMuY2VudGVyWTtcclxuXHJcblx0XHRjb25zdCByeHNxID0gdGhpcy5yYWRpdXNYICogdGhpcy5yYWRpdXNYO1xyXG5cdFx0Y29uc3QgcnlzcSA9IHRoaXMucmFkaXVzWSAqIHRoaXMucmFkaXVzWTtcclxuXHJcblx0XHRjb25zdCBBID0gTWF0aC5wb3coeDIgLSB4MSwgMikgLyByeHNxICsgTWF0aC5wb3coeTIgLSB5MSwgMikgLyByeXNxO1xyXG5cdFx0Y29uc3QgQiA9IDIgKiB4MSAqICh4MiAtIHgxKSAvIHJ4c3EgKyAyICogeTEgKiAoeTIgLSB5MSkgLyByeXNxO1xyXG5cdFx0Y29uc3QgQyA9IHgxICogeDEgLyByeHNxICsgeTEgKiB5MSAvIHJ5c3EgLSAxO1xyXG5cdFx0Y29uc3QgRCA9IEIgKiBCIC0gNCAqIEEgKiBDO1xyXG5cclxuXHRcdGlmIChEID09PSAwKSB7XHJcblx0XHRcdGNvbnN0IHQgPSAtQiAvIDIgLyBBO1xyXG5cclxuXHRcdFx0cmV0dXJuIHQgPj0gMCAmJiB0IDw9IDE7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChEID4gMCkge1xyXG5cdFx0XHRjb25zdCBzcXJ0ID0gTWF0aC5zcXJ0KEQpO1xyXG5cdFx0XHRjb25zdCB0MSA9ICgtQiArIHNxcnQpIC8gMiAvIEE7XHJcblx0XHRcdGNvbnN0IHQyID0gKC1CIC0gc3FydCkgLyAyIC8gQTtcclxuXHJcblx0XHRcdHJldHVybiAodDEgPj0gMCAmJiB0MSA8PSAxKSB8fCAodDIgPj0gMCAmJiB0MiA8PSAxKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBFbGxpcHNlIH07IiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi9wb2ludFwiO1xyXG5cclxuY2xhc3MgTGluZSB7XHJcblxyXG5cdC8qKiBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb2ludC4gKi9cclxuXHR4MTogbnVtYmVyO1xyXG5cclxuXHQvKiogVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9pbnQuICovXHJcblx0eTE6IG51bWJlcjtcclxuXHJcblx0LyoqIFRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludC4gKi9cclxuXHR4MjogbnVtYmVyO1xyXG5cclxuXHQvKiogVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgZW5kIHBvaW50LiAqL1xyXG5cdHkyOiBudW1iZXI7XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBDb25zdHJ1Y3RzIGEgTGluZSBmcm9tIHRoZSBzdGFydCBwb2ludCAoeDEseTEpIHRvIHRoZSBlbmQgcG9pbnQgKHgyLHkyKS5cclxuXHQgKlxyXG4gICAgICogQHBhcmFtIHgxIHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHN0YXJ0IHBvaW50LlxyXG4gICAgICogQHBhcmFtIHkxIHRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHN0YXJ0IHBvaW50LlxyXG4gICAgICogQHBhcmFtIHgyIHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludC5cclxuICAgICAqIEBwYXJhbSB5MiB0aGUgWSBjb29yZGluYXRlIG9mIHRoZSBlbmQgcG9pbnQuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcikge1xyXG5cdFx0dGhpcy5zZXQoeDEsIHkxLCB4MiwgeTIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyBuZXcgc3RhcnQgKHgxLHkxKSBhbmQgZW5kICh4Mix5MikgY29vcmRpbmF0ZXMuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHN0YXJ0IHRoZSBzdGFydCBwb2ludCAoeDEseTEpIG9mIHRoZSBsaW5lLlxyXG5cdCAqIEBwYXJhbSBlbmQgdGhlIGVuZCBwb2ludCAoeDIseTIpIG9mIHRoZSBsaW5lLlxyXG5cdCAqL1xyXG5cdHNldCh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLngxID0geDE7XHJcblx0XHR0aGlzLnkxID0geTE7XHJcblx0XHR0aGlzLngyID0geDI7XHJcblx0XHR0aGlzLnkyID0geTI7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgc3RhcnQgcG9pbnQgKHgxLHkxKSBvZiB0aGUgbGluZSByZXByZXNlbnRlZCBieSB7QGxpbmsgUG9pbnR9LlxyXG5cdCAqXHJcblx0ICogQHJldHVybiB0aGUgc3RhcnQgcG9pbnQgKHgxLHkxKS5cclxuXHQgKi9cclxuXHRnZXRTdGFydFBvaW50KCk6IFBvaW50IHtcclxuXHRcdHJldHVybiBuZXcgUG9pbnQodGhpcy54MSwgdGhpcy55MSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgZW5kIHBvaW50ICh4Mix5Mikgb2YgdGhlIGxpbmUgcmVwcmVzZW50ZWQgYnkge0BsaW5rIFBvaW50fS5cclxuXHQgKlxyXG5cdCAqIEByZXR1cm4gdGhlIGVuZCBwb2ludCAoeDIseTIpLlxyXG5cdCAqL1xyXG5cdGdldEVuZFBvaW50KCk6IFBvaW50IHtcclxuXHRcdHJldHVybiBuZXcgUG9pbnQodGhpcy54MiwgdGhpcy55Mik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBzaG9ydGVzdCBkaXN0YW5jZSBmcm9tIHRoZSBzcGVjaWZpZWQgcG9pbnQgdG8gdGhpcyBsaW5lLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB4IHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxyXG5cdCAqIEBwYXJhbSB5IHRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm4gdGhlIHNob3J0ZXN0IGRpc3RhbmNlIGZyb20gYSBwb2ludCB0byB0aGlzIGxpbmUuXHJcblx0ICovXHJcblx0ZGlzdGFuY2UoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgZHggPSB0aGlzLngyIC0gdGhpcy54MTtcclxuXHRcdGNvbnN0IGR5ID0gdGhpcy55MiAtIHRoaXMueTE7XHJcblx0XHRjb25zdCBsZW5ndGggPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG5cclxuXHRcdHJldHVybiBNYXRoLmFicygoKHRoaXMueTEgLSB0aGlzLnkyKSAqIHggKyBkeCAqIHkgKyAodGhpcy54MSAqIHRoaXMueTIgLSB0aGlzLngyICogdGhpcy55MSkpIC8gbGVuZ3RoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgbGluZSBpbnRlcnNlY3RzIHRoaXMgbGluZS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gbGluZSB0aGUgbGluZSB0byBjaGVjayB0aGUgaW50ZXJzZWN0aW9uIHdpdGguXHJcblx0ICogXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBsaW5lcyBpbnRlcnNlY3QgZWFjaCBvdGhlciwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdGludGVyc2VjdHMobGluZTogTGluZSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIExpbmUuaW50ZXJzZWN0cyh0aGlzLngxLCB0aGlzLnkxLCB0aGlzLngyLCB0aGlzLnkyLCBsaW5lLngxLCBsaW5lLnkxLCBsaW5lLngyLCBsaW5lLnkyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gcG9pbnQgb2YgdGhpcyBsaW5lIHNlZ21lbnQgYW5kIHRoZSBwcm92aWRlZCBsaW5lXHJcblx0ICogc2VnbWVudC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB4MyB0aGUgWCBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb2ludCBvZiB0aGUgc3BlY2lmaWVkIGxpbmUgc2VnbWVudC5cclxuXHQgKiBAcGFyYW0geTMgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9pbnQgb2YgdGhlIHNwZWNpZmllZCBsaW5lIHNlZ21lbnQuXHJcblx0ICogQHBhcmFtIHg0IHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludCBvZiB0aGUgc3BlY2lmaWVkIGxpbmUgc2VnbWVudC5cclxuXHQgKiBAcGFyYW0geTQgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgZW5kIHBvaW50IG9mIHRoZSBzcGVjaWZpZWQgbGluZSBzZWdtZW50LlxyXG5cdCAqXHJcblx0ICogQHJldHVybiB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IG9mIHRoZSB0d28gbGluZSBzZWdtZW50cywgbnVsbCBpZiB0aGUgbGluZVxyXG5cdCAqICAgICAgICAgc2VnbWVudHMgZG8gbm90IGludGVyc2VjdCBlYWNoIG90aGVyLlxyXG5cdCAqL1xyXG5cdGdldEludGVyc2VjdGlvblBvaW50KHgzOiBudW1iZXIsIHkzOiBudW1iZXIsIHg0OiBudW1iZXIsIHk0OiBudW1iZXIpOiBQb2ludCB7XHJcblx0XHRjb25zdCBkID0gKHk0IC0geTMpICogKHRoaXMueDIgLSB0aGlzLngxKSAtICh4NCAtIHgzKSAqICh0aGlzLnkyIC0gdGhpcy55MSk7XHJcblxyXG5cdFx0Ly8gQXJlIHRoZSBsaW5lcyBwYXJhbGxlbC5cclxuXHRcdGlmIChNYXRoLmFicyhkKSA8IDAuMDEpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2FsY3VsYXRlIHRoZSBpbnRlcm1lZGlhdGUgZnJhY3Rpb25hbCBwb2ludC5cclxuXHRcdGNvbnN0IGEgPSAoeDQgLSB4MykgKiAodGhpcy55MSAtIHkzKSAtICh5NCAtIHkzKSAqICh0aGlzLngxIC0geDMpO1xyXG5cdFx0Y29uc3QgYiA9ICh0aGlzLngyIC0gdGhpcy54MSkgKiAodGhpcy55MSAtIHkzKSAtICh0aGlzLnkyIC0gdGhpcy55MSkgKiAodGhpcy54MSAtIHgzKTtcclxuXHRcdGNvbnN0IHVhID0gYSAvIGQ7XHJcblx0XHRjb25zdCB1YiA9IGIgLyBkO1xyXG5cclxuXHRcdC8vIFRlc3QgZm9yIGludGVyc2VjdGlvbiBhbG9uZyB0aGUgdGhlIHNlZ21lbnRzLlxyXG5cdFx0aWYgKHVhID49IDAuMCAmJiB1YSA8PSAxLjAgJiYgdWIgPj0gMC4wICYmIHViIDw9IDEuMCkge1xyXG5cdFx0XHRjb25zdCBBMSA9IHRoaXMueTIgLSB0aGlzLnkxO1xyXG5cdFx0XHRjb25zdCBCMSA9IHRoaXMueDEgLSB0aGlzLngyO1xyXG5cdFx0XHRjb25zdCBDMSA9IEExICogdGhpcy54MSArIEIxICogdGhpcy55MTtcclxuXHRcdFx0Y29uc3QgQTIgPSB5NCAtIHkzO1xyXG5cdFx0XHRjb25zdCBCMiA9IHgzIC0geDQ7XHJcblx0XHRcdGNvbnN0IEMyID0gQTIgKiB4MyArIEIyICogeTM7XHJcblxyXG5cdFx0XHRyZXR1cm4gbmV3IFBvaW50KChCMiAqIEMxIC0gQjEgKiBDMikgLyBkLCAoQTEgKiBDMiAtIEEyICogQzEpIC8gZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUZXN0cyBpZiB0aGUgbGluZSBzZWdtZW50IGZyb20gKHgxLHkxKSB0byAoeDIseTIpIGludGVyc2VjdHMgdGhlIGxpbmUgc2VnbWVudFxyXG5cdCAqIGZyb20gKHgzLHkzKSB0byAoeDQseTQpLlxyXG5cdCAqXHJcbiAgICAgKiBAcGFyYW0geDEgdGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9pbnQgb2YgdGhlIGZpcnN0IHNwZWNpZmllZCBsaW5lIHNlZ21lbnQuXHJcbiAgICAgKiBAcGFyYW0geTEgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9pbnQgb2YgdGhlIGZpcnN0IHNwZWNpZmllZCBsaW5lIHNlZ21lbnQuXHJcbiAgICAgKiBAcGFyYW0geDIgdGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgZW5kIHBvaW50IG9mIHRoZSBmaXJzdCBzcGVjaWZpZWQgbGluZSBzZWdtZW50LlxyXG4gICAgICogQHBhcmFtIHkyIHRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludCBvZiB0aGUgZmlyc3Qgc3BlY2lmaWVkIGxpbmUgc2VnbWVudC5cclxuICAgICAqIEBwYXJhbSB4MyB0aGUgWCBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb2ludCBvZiB0aGUgc2Vjb25kIHNwZWNpZmllZCBsaW5lIHNlZ21lbnQuXHJcbiAgICAgKiBAcGFyYW0geTMgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9pbnQgb2YgdGhlIHNlY29uZCBzcGVjaWZpZWQgbGluZSBzZWdtZW50LlxyXG4gICAgICogQHBhcmFtIHg0IHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBwb2ludCBvZiB0aGUgc2Vjb25kIHNwZWNpZmllZCBsaW5lIHNlZ21lbnQuXHJcbiAgICAgKiBAcGFyYW0geTQgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgZW5kIHBvaW50IG9mIHRoZSBzZWNvbmQgc3BlY2lmaWVkIGxpbmUgc2VnbWVudC5cclxuXHQgKlxyXG5cdCAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgbGluZSBzZWdtZW50cyBpbnRlcnNlY3QgZWFjaCBvdGhlciwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdHN0YXRpYyBpbnRlcnNlY3RzKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIHgzOiBudW1iZXIsIHkzOiBudW1iZXIsIHg0OiBudW1iZXIsIHk0OiBudW1iZXIpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGQgPSAoeTQgLSB5MykgKiAoeDIgLSB4MSkgLSAoeDQgLSB4MykgKiAoeTIgLSB5MSk7XHJcblxyXG5cdFx0Ly8gQXJlIHRoZSBsaW5lcyBwYXJhbGxlbC5cclxuXHRcdGlmIChkID09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgaW50ZXJtZWRpYXRlIGZyYWN0aW9uYWwgcG9pbnQuXHJcblx0XHRjb25zdCBhID0gKHg0IC0geDMpICogKHkxIC0geTMpIC0gKHk0IC0geTMpICogKHgxIC0geDMpO1xyXG5cdFx0Y29uc3QgYiA9ICh4MiAtIHgxKSAqICh5MSAtIHkzKSAtICh5MiAtIHkxKSAqICh4MSAtIHgzKTtcclxuXHRcdGNvbnN0IHVhID0gYSAvIGQ7XHJcblx0XHRjb25zdCB1YiA9IGIgLyBkO1xyXG5cclxuXHRcdC8vIFRlc3QgZm9yIGludGVyc2VjdGlvbiBhbG9uZyB0aGUgdGhlIHNlZ21lbnRzLlxyXG5cdFx0aWYgKHVhID49IDAuMCAmJiB1YSA8PSAxLjAgJiYgdWIgPj0gMC4wICYmIHViIDw9IDEuMCkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBMaW5lIH07IiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi9wb2ludFwiO1xyXG5cclxuY2xhc3MgUGVuUG9pbnQgZXh0ZW5kcyBQb2ludCB7XHJcblxyXG5cdC8qKiBUaGUgcHJlc3N1cmUuICovXHJcblx0cDogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHA6IG51bWJlcikge1xyXG5cdFx0c3VwZXIoeCwgeSk7XHJcblxyXG5cdFx0dGhpcy5wID0gcDtcclxuXHR9XHJcblxyXG5cdGNsb25lKCk6IFBlblBvaW50IHtcclxuXHRcdHJldHVybiBuZXcgUGVuUG9pbnQodGhpcy54LCB0aGlzLnksIHRoaXMucCk7XHJcblx0fVxyXG5cclxuXHRlcXVhbHMob3RoZXI6IFBlblBvaW50KTogYm9vbGVhbiB7XHJcblx0XHRpZiAoIW90aGVyKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLnggPT09IG90aGVyLnggJiYgdGhpcy55ID09PSBvdGhlci55ICYmIHRoaXMucCA9PT0gb3RoZXIucDtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBjcmVhdGVaZXJvKCk6IFBlblBvaW50IHtcclxuXHRcdHJldHVybiBuZXcgUGVuUG9pbnQoMCwgMCwgMCk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQZW5Qb2ludCB9OyIsImltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4vcG9pbnRcIjtcclxuaW1wb3J0IHsgUGVuUG9pbnQgfSBmcm9tIFwiLi9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4vcmVjdGFuZ2xlXCI7XHJcblxyXG5jbGFzcyBQZW5TdHJva2Uge1xyXG5cclxuXHQvKiogVGVtcG9yYXJ5IHdvcmtpbmcgc3BhY2UuICovXHJcblx0cHJpdmF0ZSByZWFkb25seSB2ZWN0b3IgPSBuZXcgUG9pbnQoMCwgMCk7XHJcblx0cHJpdmF0ZSByZWFkb25seSBub3JtYWwgPSBuZXcgUG9pbnQoMCwgMCk7XHJcblx0cHJpdmF0ZSByZWFkb25seSBtaXRlciA9IG5ldyBQb2ludCgwLCAwKTtcclxuXHRwcml2YXRlIHJlYWRvbmx5IG9mZnNldEEgPSBuZXcgUG9pbnQoMCwgMCk7XHJcblx0cHJpdmF0ZSByZWFkb25seSBvZmZzZXRCID0gbmV3IFBvaW50KDAsIDApO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgbGFzdExpbmVUb3AgPSBuZXcgTGluZSgwLCAwLCAwLCAwKTtcclxuXHRwcml2YXRlIHJlYWRvbmx5IGxhc3RMaW5lQm90dG9tID0gbmV3IExpbmUoMCwgMCwgMCwgMCk7XHJcblxyXG5cdC8qKiBCb3R0b20gbGluZSBvZiB0aGUgc3Ryb2tlLiAqL1xyXG5cdHByaXZhdGUgQSA9IG5ldyBBcnJheTxQZW5Qb2ludD4oKTtcclxuXHJcblx0LyoqIFRvcCBsaW5lIG9mIHRoZSBzdHJva2UuICovXHJcblx0cHJpdmF0ZSBCID0gbmV3IEFycmF5PFBlblBvaW50PigpO1xyXG5cclxuXHQvKiogTGFzdCB0d28gaW5zZXJ0ZWQgcG9pbnRzLiAqL1xyXG5cdHByaXZhdGUgcG9pbnRzID0gbmV3IEFycmF5PFBlblBvaW50PigpO1xyXG5cclxuXHQvKiogVGhlIHN0cm9rZSB3aWR0aC4gKi9cclxuXHRwcml2YXRlIHJlYWRvbmx5IHN0cm9rZVdpZHRoOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihzdHJva2VXaWR0aDogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnN0cm9rZVdpZHRoID0gc3Ryb2tlV2lkdGg7XHJcblx0fVxyXG5cclxuXHRnZXRTdHJva2VMaXN0KCk6IEFycmF5PFBlblBvaW50PiB7XHJcblx0XHRpZiAodGhpcy5wb2ludHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHN0cm9rZSA9IG5ldyBBcnJheTxQZW5Qb2ludD4oKTtcclxuXHJcblx0XHQvLyBTcGVjaWFsIGNhc2Ugd2l0aCBvbmx5IG9uZSBwb2ludC5cclxuXHRcdGlmICh0aGlzLnBvaW50cy5sZW5ndGggPT0gMSkge1xyXG5cdFx0XHR0aGlzLmNhcE9uZVBvaW50KHN0cm9rZSwgdGhpcy5wb2ludHNbMF0sIHRoaXMuc3Ryb2tlV2lkdGgpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHN0cm9rZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgYm90dG9tIGxpbmUuXHJcblx0XHRzdHJva2UucHVzaCguLi50aGlzLkEpO1xyXG5cclxuXHRcdC8vIENhcCBsYXN0IHBvaW50LlxyXG5cdFx0dGhpcy5jYXBFbmRwb2ludChzdHJva2UsIHRoaXMucG9pbnRzWzFdLCB0aGlzLnBvaW50c1swXSwgZmFsc2UpO1xyXG5cclxuXHRcdC8vIEdldCB0b3AgbGluZS5cclxuXHRcdHN0cm9rZS5wdXNoKC4uLnRoaXMuQik7XHJcblxyXG5cdFx0cmV0dXJuIHN0cm9rZTtcclxuXHR9XHJcblxyXG5cdGFkZFBvaW50KHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wb2ludHMucHVzaChwb2ludC5jbG9uZSgpKTtcclxuXHJcblx0XHRjb25zdCBwU2l6ZSA9IHRoaXMucG9pbnRzLmxlbmd0aDtcclxuXHJcblx0XHRpZiAocFNpemUgPiAxKSB7XHJcblx0XHRcdGlmIChwU2l6ZSA+IDIpIHtcclxuXHRcdFx0XHQvLyBLZWVwIHRyYWNrIG9ubHkgb2YgdHdvIGxhc3Qgb2JzZXJ2ZWQgcG9pbnRzLlxyXG5cdFx0XHRcdHRoaXMucG9pbnRzLnNoaWZ0KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IHAwID0gdGhpcy5wb2ludHNbMF07XHJcblxyXG5cdFx0XHRpZiAodGhpcy5BLmxlbmd0aCA9PT0gMCB8fCB0aGlzLkIubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0Ly8gQ2FwIGZpcnN0IHBvaW50LlxyXG5cdFx0XHRcdHRoaXMuY2FwRW5kcG9pbnQodGhpcy5BLCBwMCwgcG9pbnQsIGZhbHNlKTtcclxuXHRcdFx0XHR0aGlzLmJlZ2luUGF0aChwMCwgcG9pbnQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuYWR2YW5jZShwMCwgcG9pbnQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpbnRlcnNlY3RzKHJlY3Q6IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gSGFuZGxlIHNpbXBsZSBjYXNlcy5cclxuXHRcdGlmICh0aGlzLnBvaW50cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodGhpcy5wb2ludHMubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdHJldHVybiByZWN0LmNvbnRhaW5zUG9pbnQodGhpcy5wb2ludHNbMF0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmludGVyc2VjdHNSZWN0KHRoaXMuQSwgcmVjdCkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5pbnRlcnNlY3RzUmVjdCh0aGlzLkIsIHJlY3QpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdG1vdmVCeURlbHRhKGRlbHRhOiBQb2ludCk6IHZvaWQge1xyXG5cdFx0Zm9yIChsZXQgcG9pbnQgb2YgdGhpcy5BKSB7XHJcblx0XHRcdHBvaW50LnN1YnRyYWN0KGRlbHRhKTtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IHBvaW50IG9mIHRoaXMuQikge1xyXG5cdFx0XHRwb2ludC5zdWJ0cmFjdChkZWx0YSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cykge1xyXG5cdFx0XHRwb2ludC5zdWJ0cmFjdChkZWx0YSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjbG9uZSgpOiBQZW5TdHJva2Uge1xyXG5cdFx0Y29uc3Qgc3Ryb2tlID0gbmV3IFBlblN0cm9rZSh0aGlzLnN0cm9rZVdpZHRoKTtcclxuXHJcblx0XHRmb3IgKGxldCBwb2ludCBvZiB0aGlzLkEpIHtcclxuXHRcdFx0c3Ryb2tlLkEucHVzaChwb2ludC5jbG9uZSgpKTtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IHBvaW50IG9mIHRoaXMuQikge1xyXG5cdFx0XHRzdHJva2UuQi5wdXNoKHBvaW50LmNsb25lKCkpO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpIHtcclxuXHRcdFx0c3Ryb2tlLnBvaW50cy5wdXNoKHBvaW50LmNsb25lKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzdHJva2U7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkdmFuY2UocDA6IFBlblBvaW50LCBwMTogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWR2YW5jZVBhdGgodGhpcy5BLCBwMCwgcDEsIGZhbHNlKTtcclxuXHRcdHRoaXMuYWR2YW5jZVBhdGgodGhpcy5CLCBwMCwgcDEsIHRydWUpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZHZhbmNlUGF0aCh0YXJnZXQ6IEFycmF5PFBlblBvaW50PiwgcDA6IFBlblBvaW50LCBwMTogUGVuUG9pbnQsIHJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMudmVjdG9yLnNldChwMS54LCBwMS55KS5zdWJ0cmFjdChwMCkubm9ybWFsaXplKCk7XHJcblx0XHR0aGlzLm5vcm1hbC5zZXQoLXRoaXMudmVjdG9yLnksIHRoaXMudmVjdG9yLngpLm5vcm1hbGl6ZSgpO1xyXG5cclxuXHRcdHRoaXMubWl0ZXIuc2V0KHRoaXMubm9ybWFsLngsIHRoaXMubm9ybWFsLnkpLm11bHRpcGx5KHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDApIC8gMik7XHJcblx0XHR0aGlzLm9mZnNldEEuc2V0KHAwLngsIHAwLnkpO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0KHRoaXMub2Zmc2V0QSwgdGhpcy5taXRlciwgcmV2ZXJzZSk7XHJcblxyXG5cdFx0dGhpcy5taXRlci5zZXQodGhpcy5ub3JtYWwueCwgdGhpcy5ub3JtYWwueSkubXVsdGlwbHkodGhpcy5zdHJva2VXaWR0aCAqIHRoaXMudG9QcmVzc3VyZShwMSkgLyAyKTtcclxuXHRcdHRoaXMub2Zmc2V0Qi5zZXQocDEueCwgcDEueSk7XHJcblxyXG5cdFx0dGhpcy5vZmZzZXQodGhpcy5vZmZzZXRCLCB0aGlzLm1pdGVyLCByZXZlcnNlKTtcclxuXHJcblx0XHRjb25zdCBsaW5lID0gbmV3IExpbmUodGhpcy5vZmZzZXRBLngsIHRoaXMub2Zmc2V0QS55LCB0aGlzLm9mZnNldEIueCwgdGhpcy5vZmZzZXRCLnkpO1xyXG5cdFx0Y29uc3QgbGFzdExpbmUgPSByZXZlcnNlID8gdGhpcy5sYXN0TGluZVRvcCA6IHRoaXMubGFzdExpbmVCb3R0b207XHJcblxyXG5cdFx0Y29uc3QgaW50ZXIgPSBsYXN0TGluZS5nZXRJbnRlcnNlY3Rpb25Qb2ludChsaW5lLngxLCBsaW5lLnkxLCBsaW5lLngyLCBsaW5lLnkyKTtcclxuXHJcblx0XHRpZiAoaW50ZXIgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmludGVyc2VjdCh0YXJnZXQsIGludGVyLCByZXZlcnNlKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjb25zdCBhID0gbGFzdExpbmUuZ2V0RW5kUG9pbnQoKTtcclxuXHRcdFx0Y29uc3QgYiA9IGxpbmUuZ2V0U3RhcnRQb2ludCgpO1xyXG5cclxuXHRcdFx0bGV0IHMgPSB0aGlzLnRvRGVncmVlcyhhLCBwMCk7XHJcblx0XHRcdGxldCBlID0gdGhpcy50b0RlZ3JlZXMoYiwgcDApO1xyXG5cclxuXHRcdFx0Y29uc3QgZCA9IE1hdGguYWJzKHMgLSBlKTtcclxuXHJcblx0XHRcdGlmIChkID4gMTgwKSB7XHJcblx0XHRcdFx0cyAlPSAzNjA7XHJcblx0XHRcdFx0ZSAlPSAzNjA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuY2FwKHRhcmdldCwgcDAsIHMsIGUsIHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDApIC8gMiwgMiwgcmV2ZXJzZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGFzdExpbmUuc2V0KGxpbmUueDEsIGxpbmUueTEsIGxpbmUueDIsIGxpbmUueTIpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBiZWdpblBhdGgocDA6IFBlblBvaW50LCBwMTogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudmVjdG9yLnNldChwMS54LCBwMS55KS5zdWJ0cmFjdChwMCkubm9ybWFsaXplKCk7XHJcblx0XHR0aGlzLm5vcm1hbC5zZXQoLXRoaXMudmVjdG9yLnksIHRoaXMudmVjdG9yLngpLm5vcm1hbGl6ZSgpO1xyXG5cclxuXHRcdC8vIEJvdHRvbVxyXG5cdFx0dGhpcy5taXRlci5zZXQodGhpcy5ub3JtYWwueCwgdGhpcy5ub3JtYWwueSkubXVsdGlwbHkodGhpcy5zdHJva2VXaWR0aCAqIHRoaXMudG9QcmVzc3VyZShwMCkgLyAyKTtcclxuXHRcdHRoaXMub2Zmc2V0QS5zZXQocDAueCwgcDAueSkuYWRkKHRoaXMubWl0ZXIpO1xyXG5cclxuXHRcdHRoaXMubWl0ZXIuc2V0KHRoaXMubm9ybWFsLngsIHRoaXMubm9ybWFsLnkpLm11bHRpcGx5KHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDEpIC8gMik7XHJcblx0XHR0aGlzLm9mZnNldEIuc2V0KHAxLngsIHAxLnkpLmFkZCh0aGlzLm1pdGVyKTtcclxuXHJcblx0XHR0aGlzLmFkZFBhdGhQb2ludCh0aGlzLkEsIHRoaXMub2Zmc2V0Qi54LCB0aGlzLm9mZnNldEIueSwgZmFsc2UpO1xyXG5cclxuXHRcdHRoaXMubGFzdExpbmVCb3R0b20uc2V0KHRoaXMub2Zmc2V0QS54LCB0aGlzLm9mZnNldEEueSwgdGhpcy5vZmZzZXRCLngsIHRoaXMub2Zmc2V0Qi55KTtcclxuXHJcblx0XHQvLyBUb3BcclxuXHRcdHRoaXMubWl0ZXIuc2V0KHRoaXMubm9ybWFsLngsIHRoaXMubm9ybWFsLnkpLm11bHRpcGx5KHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDApIC8gMik7XHJcblx0XHR0aGlzLm9mZnNldEEuc2V0KHAwLngsIHAwLnkpLnN1YnRyYWN0KHRoaXMubWl0ZXIpO1xyXG5cclxuXHRcdHRoaXMubWl0ZXIuc2V0KHRoaXMubm9ybWFsLngsIHRoaXMubm9ybWFsLnkpLm11bHRpcGx5KHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDEpIC8gMik7XHJcblx0XHR0aGlzLm9mZnNldEIuc2V0KHAxLngsIHAxLnkpLnN1YnRyYWN0KHRoaXMubWl0ZXIpO1xyXG5cclxuXHRcdHRoaXMuYWRkUGF0aFBvaW50KHRoaXMuQiwgdGhpcy5vZmZzZXRBLngsIHRoaXMub2Zmc2V0QS55LCB0cnVlKTtcclxuXHRcdHRoaXMuYWRkUGF0aFBvaW50KHRoaXMuQiwgdGhpcy5vZmZzZXRCLngsIHRoaXMub2Zmc2V0Qi55LCB0cnVlKTtcclxuXHJcblx0XHR0aGlzLmxhc3RMaW5lVG9wLnNldCh0aGlzLm9mZnNldEEueCwgdGhpcy5vZmZzZXRBLnksIHRoaXMub2Zmc2V0Qi54LCB0aGlzLm9mZnNldEIueSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNhcCh0YXJnZXQ6IEFycmF5PFBlblBvaW50PiwgY2VudGVyOiBQZW5Qb2ludCwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBzdGVwOiBudW1iZXIsIHJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmIChzdGFydCA+IGVuZCkge1xyXG5cdFx0XHRmb3IgKGxldCBhbmdsZSA9IHN0YXJ0OyBhbmdsZSA+PSBlbmQ7IGFuZ2xlIC09IHN0ZXApIHtcclxuXHRcdFx0XHRjb25zdCByYWQgPSBNYXRoLlBJICogYW5nbGUgLyAxODA7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHggPSBjZW50ZXIueCArIHJhZGl1cyAqIE1hdGguY29zKHJhZCk7XHJcblx0XHRcdFx0Y29uc3QgeSA9IGNlbnRlci55ICsgcmFkaXVzICogTWF0aC5zaW4ocmFkKTtcclxuXHJcblx0XHRcdFx0dGhpcy5hZGRQYXRoUG9pbnQodGFyZ2V0LCB4LCB5LCByZXZlcnNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGZvciAobGV0IGFuZ2xlID0gc3RhcnQ7IGFuZ2xlIDw9IGVuZDsgYW5nbGUgKz0gc3RlcCkge1xyXG5cdFx0XHRcdGNvbnN0IHJhZCA9IE1hdGguUEkgKiBhbmdsZSAvIDE4MDtcclxuXHJcblx0XHRcdFx0Y29uc3QgeCA9IGNlbnRlci54ICsgcmFkaXVzICogTWF0aC5jb3MocmFkKTtcclxuXHRcdFx0XHRjb25zdCB5ID0gY2VudGVyLnkgKyByYWRpdXMgKiBNYXRoLnNpbihyYWQpO1xyXG5cclxuXHRcdFx0XHR0aGlzLmFkZFBhdGhQb2ludCh0YXJnZXQsIHgsIHksIHJldmVyc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNhcE9uZVBvaW50KHRhcmdldDogQXJyYXk8UGVuUG9pbnQ+LCBjZW50ZXI6IFBlblBvaW50LCBzdHJva2VXaWR0aDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLmFkZFBhdGhQb2ludCh0YXJnZXQsIGNlbnRlci54ICsgc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUoY2VudGVyKSAvIDIsIGNlbnRlci55LCBmYWxzZSk7XHJcblxyXG5cdFx0dGhpcy5jYXAodGFyZ2V0LCBjZW50ZXIsIDAsIDM2MCwgc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUoY2VudGVyKSAvIDIsIDIsIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2FwRW5kcG9pbnQodGFyZ2V0OiBBcnJheTxQZW5Qb2ludD4sIHAwOiBQZW5Qb2ludCwgcDE6IFBlblBvaW50LCByZXZlcnNlOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLnZlY3Rvci5zZXQocDEueCwgcDEueSkuc3VidHJhY3QocDApLm5vcm1hbGl6ZSgpO1xyXG5cdFx0dGhpcy5ub3JtYWwuc2V0KC10aGlzLnZlY3Rvci55LCB0aGlzLnZlY3Rvci54KS5ub3JtYWxpemUoKTtcclxuXHRcdHRoaXMubWl0ZXIuc2V0KHRoaXMubm9ybWFsLngsIHRoaXMubm9ybWFsLnkpLm11bHRpcGx5KHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDApIC8gMik7XHJcblxyXG5cdFx0dGhpcy5vZmZzZXRBLnNldChwMC54LCBwMC55KS5hZGQodGhpcy5taXRlcik7XHJcblx0XHR0aGlzLm9mZnNldEIuc2V0KHAwLngsIHAwLnkpLnN1YnRyYWN0KHRoaXMubWl0ZXIpO1xyXG5cclxuXHRcdC8vIEZpcnN0L0xhc3QgcG9pbnQgb2Zmc2V0LlxyXG5cdFx0dGhpcy5hZGRQYXRoUG9pbnQodGFyZ2V0LCB0aGlzLm9mZnNldEIueCwgdGhpcy5vZmZzZXRCLnksIHJldmVyc2UpO1xyXG5cclxuXHRcdC8vIENhcCBwb2ludCB3aXRoIDE4MCBkZWdyZWVzLlxyXG5cdFx0Y29uc3QgcyA9IHRoaXMudG9EZWdyZWVzKHRoaXMub2Zmc2V0QiwgdGhpcy5vZmZzZXRBKTtcclxuXHRcdGNvbnN0IGUgPSBzIC0gMTgwO1xyXG5cclxuXHRcdHRoaXMuY2FwKHRhcmdldCwgcDAsIHMsIGUsIHRoaXMuc3Ryb2tlV2lkdGggKiB0aGlzLnRvUHJlc3N1cmUocDApIC8gMiwgMiwgcmV2ZXJzZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFBhdGhQb2ludCh0YXJnZXQ6IEFycmF5PFBlblBvaW50PiwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmIChyZXZlcnNlKSB7XHJcblx0XHRcdHRhcmdldC51bnNoaWZ0KG5ldyBQZW5Qb2ludCh4LCB5LCAxKSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGFyZ2V0LnB1c2gobmV3IFBlblBvaW50KHgsIHksIDEpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaW50ZXJzZWN0KHRhcmdldDogQXJyYXk8UGVuUG9pbnQ+LCBpbnRlcjogUG9pbnQsIHJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmIChyZXZlcnNlKSB7XHJcblx0XHRcdHRhcmdldFswXS5zZXQoaW50ZXIueCwgaW50ZXIueSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGFyZ2V0W3RhcmdldC5sZW5ndGggLSAxXS5zZXQoaW50ZXIueCwgaW50ZXIueSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9mZnNldChjZW50ZXI6IFBvaW50LCBtaXRlcjogUG9pbnQsIHJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmIChyZXZlcnNlKSB7XHJcblx0XHRcdGNlbnRlci5zdWJ0cmFjdChtaXRlcik7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y2VudGVyLmFkZChtaXRlcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHRvUHJlc3N1cmUocG9pbnQ6IFBlblBvaW50KTogbnVtYmVyIHtcclxuXHRcdHJldHVybiBNYXRoLm1pbigxLjAsIE1hdGguc3FydChwb2ludC5wICsgMC4xKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHRvRGVncmVlcyhwMTogUG9pbnQsIHAyOiBQb2ludCk6IG51bWJlciB7XHJcblx0XHRjb25zdCBkZWdyZWVzID0gTWF0aC5hdGFuMihwMS55IC0gcDIueSwgcDEueCAtIHAyLngpO1xyXG5cclxuXHRcdHJldHVybiAoMiAqIE1hdGguUEkgKyBkZWdyZWVzKSAqIDE4MCAvIE1hdGguUEk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGludGVyc2VjdHNSZWN0KHBhdGg6IEFycmF5PFBlblBvaW50PiwgcmVjdDogUmVjdGFuZ2xlKTogYm9vbGVhbiB7XHJcblx0XHRsZXQgaW5kZXggPSAwO1xyXG5cdFx0bGV0IHAxID0gcGF0aFtpbmRleCsrXTtcclxuXHRcdGxldCBwMiA9IG51bGw7XHJcblxyXG5cdFx0d2hpbGUgKGluZGV4IDwgcGF0aC5sZW5ndGgpIHtcclxuXHRcdFx0cDIgPSBwYXRoW2luZGV4KytdO1xyXG5cclxuXHRcdFx0aWYgKHJlY3QuaW50ZXJzZWN0c0xpbmUocDEueCwgcDEueSwgcDIueCwgcDIueSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cDEgPSBwMjtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQZW5TdHJva2UgfTsiLCIvKipcclxuICogQSBQb2ludCBvYmplY3QgZGVzY3JpYmVzIGEgcG9pbnQgaW4gdGhlIHR3byBkaW1lbnNpb25hbCBzcGFjZSB0aHJvdWdoXHJcbiAqIGl0cyAoeCx5KSBwcm9wZXJ0aWVzLlxyXG4gKi9cclxuY2xhc3MgUG9pbnQge1xyXG5cclxuXHQvKiogVGhlIHggY29vcmRpbmF0ZS4gKi9cclxuXHR4OiBudW1iZXI7XHJcblxyXG5cdC8qKiBUaGUgeSBjb29yZGluYXRlLiAqL1xyXG5cdHk6IG51bWJlcjtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgUG9pbnQgd2l0aCBzcGVjaWZpZWQgY29vcmRpbmF0ZXMuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0geCBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludC5cclxuXHQgKiBAcGFyYW0geSBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludC5cclxuXHQgKi9cclxuXHRjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG5cdFx0dGhpcy54ID0geDtcclxuXHRcdHRoaXMueSA9IHk7XHJcblx0fVxyXG5cclxuXHRzZXQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQb2ludCB7XHJcblx0XHR0aGlzLnggPSB4O1xyXG5cdFx0dGhpcy55ID0geTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIGRpc3RhbmNlIGZyb20gdGhpcyBQb2ludCB0byBhIHNwZWNpZmllZCBQb2ludC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBwIFRoZSBwb2ludCB0byB3aGljaCB0aGUgZGlzdGFuY2Ugc2hvdWxkIGJlIG1lYXN1cmVkLlxyXG5cdCAqXHJcblx0ICogQHJldHVybiBUaGUgZGlzdGFuY2UgdG8gdGhlIGdpdmVuIHBvaW50LlxyXG5cdCAqL1xyXG5cdGRpc3RhbmNlKHBvaW50OiBQb2ludCk6IG51bWJlciB7XHJcblx0XHRjb25zdCBkeCA9IHBvaW50LnggLSB0aGlzLng7XHJcblx0XHRjb25zdCBkeSA9IHBvaW50LnkgLSB0aGlzLnk7XHJcblxyXG5cdFx0cmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcblx0fVxyXG5cclxuXHRhZGQocG9pbnQ6IFBvaW50KTogUG9pbnQge1xyXG5cdFx0dGhpcy54ICs9IHBvaW50Lng7XHJcblx0XHR0aGlzLnkgKz0gcG9pbnQueTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdHN1YnRyYWN0KHBvaW50OiBQb2ludCk6IFBvaW50IHtcclxuXHRcdHRoaXMueCAtPSBwb2ludC54O1xyXG5cdFx0dGhpcy55IC09IHBvaW50Lnk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHRtdWx0aXBseShzY2FsYXI6IG51bWJlcik6IFBvaW50IHtcclxuXHRcdHRoaXMueCAqPSBzY2FsYXI7XHJcblx0XHR0aGlzLnkgKj0gc2NhbGFyO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0bm9ybWFsaXplKCk6IFBvaW50IHtcclxuXHRcdGNvbnN0IGxlbmd0aCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xyXG5cclxuXHRcdHRoaXMueCAvPSBsZW5ndGg7XHJcblx0XHR0aGlzLnkgLz0gbGVuZ3RoO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGVzdHMgd2hldGhlciB0aGUgcHJvdmlkZWQgcG9pbnQgZGVzY3JpYmVzIHRoZSBzYW1lIHBvaW50LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIG90aGVyIHRoZSBwb2ludCB0byBjb21wYXJlIHRoaXMgcG9pbnQgdG8uXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHRydWUgaWYgdGhlIHBvaW50cyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuXHQgKi9cclxuXHRlcXVhbHMob3RoZXI6IFBvaW50KTogYm9vbGVhbiB7XHJcblx0XHRpZiAoIW90aGVyKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLnggPT09IG90aGVyLnggJiYgdGhpcy55ID09PSBvdGhlci55O1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9pbnQgfTsiLCJpbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuL3BvaW50XCI7XHJcblxyXG5jb25zdCBJTlNJREUgPSAwO1xyXG5jb25zdCBMRUZUID0gMTtcclxuY29uc3QgUklHSFQgPSAyO1xyXG5jb25zdCBCT1RUT00gPSA0O1xyXG5jb25zdCBUT1AgPSA4O1xyXG5cclxuLyoqXHJcbiAqIEEgUmVjdGFuZ2xlIHNwZWNpZmllcyBhbiBhcmVhIHRoYXQgaXMgZW5jbG9zZWQgYnkgaXQncyB0b3AtbGVmdCBwb2ludCAoeCx5KVxyXG4gKiBhbmQgaXRzIHdpZHRoIGFuZCBoZWlnaHQuXHJcbiAqL1xyXG5jbGFzcyBSZWN0YW5nbGUge1xyXG5cclxuXHQvKiogVGhlIHggY29vcmRpbmF0ZS4gKi9cclxuXHR4OiBudW1iZXI7XHJcblxyXG5cdC8qKiBUaGUgeSBjb29yZGluYXRlLiAqL1xyXG5cdHk6IG51bWJlcjtcclxuXHJcblx0LyoqIFRoZSB3aWR0aC4gKi9cclxuXHR3aWR0aDogbnVtYmVyO1xyXG5cclxuXHQvKiogVGhlIGhlaWdodC4gKi9cclxuXHRoZWlnaHQ6IG51bWJlcjtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgUmVjdGFuZ2xlIHdpdGggc3BlY2lmaWVkIGxvY2F0aW9uIGNvb3JkaW5hdGVzIGFuZCBzaXplLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHggdGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgcmVjdGFuZ2xlLlxyXG5cdCAqIEBwYXJhbSB5IHRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJlY3RhbmdsZS5cclxuXHQgKiBAcGFyYW0gd2lkdGggdGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUuXHJcblx0ICogQHBhcmFtIGhlaWdodCB0aGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnNldCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCBuZXcgbG9jYXRpb24gY29vcmRpbmF0ZXMgYW5kIHNpemUgb2YgdGhpcyByZWN0YW5nbGUuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0geCB0aGUgeCBjb29yZGluYXRlIG9mIHRoZSByZWN0YW5nbGUuXHJcblx0ICogQHBhcmFtIHkgdGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgcmVjdGFuZ2xlLlxyXG5cdCAqIEBwYXJhbSB3aWR0aCB0aGUgd2lkdGggb2YgdGhlIHJlY3RhbmdsZS5cclxuXHQgKiBAcGFyYW0gaGVpZ2h0IHRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZS5cclxuXHQgKi9cclxuXHRzZXQoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLnggPSB4O1xyXG5cdFx0dGhpcy55ID0geTtcclxuXHRcdHRoaXMud2lkdGggPSB3aWR0aDtcclxuXHRcdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSByZWN0YW5nbGUgZW5jbG9zZXMgc29tZSBhcmVhLlxyXG5cdCAqXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSByZWN0YW5nbGUgaXMgZW1wdHksIGZhbHNlIG90aGVyd2lzZS5cclxuXHQgKi9cclxuXHRpc0VtcHR5KCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuICh0aGlzLndpZHRoIDw9IDAuMCkgfHwgKHRoaXMuaGVpZ2h0IDw9IDAuMCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUZXN0cyBpZiB0aGUgc3BlY2lmaWVkIHBvaW50IGlzIGluc2lkZSB0aGUgYm91bmRhcnkgb2YgdGhlIHJlY3RhbmdsZS5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBwb2ludCB0aGUgcG9pbnQgdGhhdCByZXByZXNlbnRzIGEgeCBhbmQgeSBjb29yZGluYXRlIHBhaXIuXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHRydWUgaWYgdGhlIHNwZWNpZmllZCBwb2ludCBpcyBpbnNpZGUgdGhlIGJvdW5kYXJ5LCBmYWxzZSBvdGhlcndpc2UuXHJcblx0ICovXHJcblx0Y29udGFpbnNQb2ludChwb2ludDogUG9pbnQpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IHB4ID0gcG9pbnQueDtcclxuXHRcdGNvbnN0IHB5ID0gcG9pbnQueTtcclxuXHJcblx0XHRyZXR1cm4gKHB4ID49IHRoaXMueCAmJiBweSA+PSB0aGlzLnkgJiYgcHggPCB0aGlzLnggKyB0aGlzLndpZHRoICYmIHB5IDwgdGhpcy55ICsgdGhpcy5oZWlnaHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGVzdHMgaWYgdGhlIGludGVyaW9yIG9mIHRoaXMgcmVjdGFuZ2xlIGVudGlyZWx5IGVuY2xvc2VzIHRoZSBzcGVjaWZpZWRcclxuXHQgKiByZWN0YW5nbGUuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gcmVjdCBUaGUgcmVjdGFuZ2xlIHRvIGNoZWNrLCB3aGV0aGVyIGl0IGlzIGVuY2xvc2VkIGJ5IHRoaXMgcmVjdGFuZ2xlLlxyXG5cdCAqXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBpbnRlcmlvciBvZiB0aGlzIHJlY3RhbmdsZSBlbnRpcmVseSBjb250YWlucyB0aGVcclxuXHQgKiAgICAgICAgIHNwZWNpZmllZCBhcmVhLCBmYWxzZSBvdGhlcndpc2UuXHJcblx0ICovXHJcblx0Y29udGFpbnNSZWN0KHJlY3Q6IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHRoaXMuaXNFbXB0eSgpIHx8IHJlY3QuaXNFbXB0eSgpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB4ID0gcmVjdC54O1xyXG5cdFx0Y29uc3QgeSA9IHJlY3QueTtcclxuXHRcdGNvbnN0IHcgPSByZWN0LndpZHRoO1xyXG5cdFx0Y29uc3QgaCA9IHJlY3QuaGVpZ2h0O1xyXG5cdFx0Y29uc3QgeDAgPSB0aGlzLng7XHJcblx0XHRjb25zdCB5MCA9IHRoaXMueTtcclxuXHJcblx0XHRyZXR1cm4gKHggPj0geDAgJiYgeSA+PSB5MCAmJiAoeCArIHcpIDw9IHgwICsgdGhpcy53aWR0aCAmJiAoeSArIGgpIDw9IHkwICsgdGhpcy5oZWlnaHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGVzdHMgaWYgdGhlIGxpbmUgc2VnbWVudCBmcm9tICh4MSx5MSkgdG8gKHgyLHkyKSBpbnRlcnNlY3RzIHRoaXMgcmVjdGFuZ2xlLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB4MSB0aGUgWCBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb2ludCBvZiB0aGUgbGluZSBzZWdtZW50LlxyXG5cdCAqIEBwYXJhbSB5MSB0aGUgWSBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb2ludCBvZiB0aGUgbGluZSBzZWdtZW50LlxyXG5cdCAqIEBwYXJhbSB4MiB0aGUgWCBjb29yZGluYXRlIG9mIHRoZSBlbmQgcG9pbnQgb2YgdGhlIGxpbmUgc2VnbWVudC5cclxuXHQgKiBAcGFyYW0geTIgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgZW5kIHBvaW50IG9mIHRoZSBsaW5lIHNlZ21lbnQuXHJcblx0ICogXHJcblx0ICogQHJldHVybiB0cnVlIGlmIHRoZSBsaW5lIHNlZ21lbnQgaW50ZXJzZWN0cyB0aGlzIHJlY3RhbmdsZSwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG5cdCAqL1xyXG5cdGludGVyc2VjdHNMaW5lKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IHhtaW4gPSB0aGlzLng7XHJcblx0XHRjb25zdCB4bWF4ID0gdGhpcy54ICsgdGhpcy53aWR0aDtcclxuXHRcdGNvbnN0IHltaW4gPSB0aGlzLnk7XHJcblx0XHRjb25zdCB5bWF4ID0gdGhpcy55ICsgdGhpcy5oZWlnaHQ7XHJcblxyXG5cdFx0bGV0IG91dGNvZGUwID0gdGhpcy5jb21wdXRlQ29kZSh4MSwgeTEsIHhtaW4sIHhtYXgsIHltaW4sIHltYXgpO1xyXG5cdFx0bGV0IG91dGNvZGUxID0gdGhpcy5jb21wdXRlQ29kZSh4MiwgeTIsIHhtaW4sIHhtYXgsIHltaW4sIHltYXgpO1xyXG5cclxuXHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdGlmICghKG91dGNvZGUwIHwgb3V0Y29kZTEpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAob3V0Y29kZTAgJiBvdXRjb2RlMSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRsZXQgb3V0Y29kZU91dCA9IG91dGNvZGUwID8gb3V0Y29kZTAgOiBvdXRjb2RlMTtcclxuXHRcdFx0XHRsZXQgeCwgeTtcclxuXHJcblx0XHRcdFx0aWYgKG91dGNvZGVPdXQgJiBUT1ApIHtcclxuXHRcdFx0XHRcdHggPSB4MSArICh4MiAtIHgxKSAqICh5bWF4IC0geTEpIC8gKHkyIC0geTEpO1xyXG5cdFx0XHRcdFx0eSA9IHltYXg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKG91dGNvZGVPdXQgJiBCT1RUT00pIHtcclxuXHRcdFx0XHRcdHggPSB4MSArICh4MiAtIHgxKSAqICh5bWluIC0geTEpIC8gKHkyIC0geTEpO1xyXG5cdFx0XHRcdFx0eSA9IHltaW47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKG91dGNvZGVPdXQgJiBSSUdIVCkge1xyXG5cdFx0XHRcdFx0eSA9IHkxICsgKHkyIC0geTEpICogKHhtYXggLSB4MSkgLyAoeDIgLSB4MSk7XHJcblx0XHRcdFx0XHR4ID0geG1heDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAob3V0Y29kZU91dCAmIExFRlQpIHtcclxuXHRcdFx0XHRcdHkgPSB5MSArICh5MiAtIHkxKSAqICh4bWluIC0geDEpIC8gKHgyIC0geDEpO1xyXG5cdFx0XHRcdFx0eCA9IHhtaW47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAob3V0Y29kZU91dCA9PSBvdXRjb2RlMCkge1xyXG5cdFx0XHRcdFx0eDEgPSB4O1xyXG5cdFx0XHRcdFx0eTEgPSB5O1xyXG5cdFx0XHRcdFx0b3V0Y29kZTAgPSB0aGlzLmNvbXB1dGVDb2RlKHgxLCB5MSwgeG1pbiwgeG1heCwgeW1pbiwgeW1heCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0eDIgPSB4O1xyXG5cdFx0XHRcdFx0eTIgPSB5O1xyXG5cdFx0XHRcdFx0b3V0Y29kZTEgPSB0aGlzLmNvbXB1dGVDb2RlKHgyLCB5MiwgeG1pbiwgeG1heCwgeW1pbiwgeW1heCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBJbnRlcnNlY3RzIHRoZSBwcm92aWRlZCByZWN0YW5nbGUgd2l0aCB0aGlzIG9uZSBhbmQgcHV0cyB0aGUgcmVzdWx0IGludG8gdGhlXHJcblx0ICogcmV0dXJuZWQgcmVjdGFuZ2xlIG9iamVjdC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSByZWN0IFRoZSByZWN0YW5nbGUgdG8gYmUgaW50ZXJzZWN0ZWQgd2l0aCB0aGlzIG9uZS5cclxuXHQgKlxyXG5cdCAqIEByZXR1cm4gdGhlIGludGVyc2VjdGlvbiByZWN0YW5nbGUsIG9yIG51bGwgaWYgdGhlIHJlY3RhbmdsZXMgZG9uJ3QgaW50ZXJzZWN0XHJcblx0ICogICAgICAgICBlYWNoIG90aGVyLlxyXG5cdCAqL1xyXG5cdGludGVyc2VjdGlvbihyZWN0OiBSZWN0YW5nbGUpOiBSZWN0YW5nbGUge1xyXG5cdFx0Y29uc3QgaVggPSBNYXRoLm1heCh0aGlzLngsIHJlY3QueCk7XHJcblx0XHRjb25zdCBpWSA9IE1hdGgubWF4KHRoaXMueSwgcmVjdC55KTtcclxuXHRcdGNvbnN0IGlXID0gTWF0aC5taW4odGhpcy54ICsgdGhpcy53aWR0aCwgcmVjdC54ICsgcmVjdC53aWR0aCkgLSBpWDtcclxuXHRcdGNvbnN0IGlIID0gTWF0aC5taW4odGhpcy55ICsgdGhpcy5oZWlnaHQsIHJlY3QueSArIHJlY3QuaGVpZ2h0KSAtIGlZO1xyXG5cclxuXHRcdGlmIChpVyA8PSAwKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGlIIDw9IDApIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG5ldyBSZWN0YW5nbGUoaVgsIGlZLCBpVywgaUgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVW5pb25zIHRoZSBwcm92aWRlZCByZWN0YW5nbGUgd2l0aCB0aGlzIG9uZSBhbmQgcHV0cyB0aGUgcmVzdWx0IGludG9cclxuXHQgKiB0aGlzIHJlY3RhbmdsZSBvYmplY3QuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHJlY3QgVGhlIHJlY3RhbmdsZSB0byBiZSBjb21iaW5lZCB3aXRoIHRoaXMgb25lLlxyXG5cdCAqL1xyXG5cdHVuaW9uKHJlY3Q6IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeDEgPSBNYXRoLm1pbih0aGlzLngsIHJlY3QueCk7XHJcblx0XHRjb25zdCB5MSA9IE1hdGgubWluKHRoaXMueSwgcmVjdC55KTtcclxuXHRcdGNvbnN0IHgyID0gTWF0aC5tYXgodGhpcy54ICsgdGhpcy53aWR0aCwgcmVjdC54ICsgcmVjdC53aWR0aCk7XHJcblx0XHRjb25zdCB5MiA9IE1hdGgubWF4KHRoaXMueSArIHRoaXMuaGVpZ2h0LCByZWN0LnkgKyByZWN0LmhlaWdodCk7XHJcblxyXG5cdFx0dGhpcy5zZXQoeDEsIHkxLCB4MiAtIHgxLCB5MiAtIHkxKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRlc3RzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHJlY3RhbmdsZSBkZXNjcmliZXMgdGhlIHNhbWUgcmVjdGFuZ2xlLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIG90aGVyIHRoZSByZWN0YW5nbGUgdG8gY29tcGFyZSB0aGlzIHJlY3RhbmdsZSB0by5cclxuXHQgKlxyXG5cdCAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgcmVjdGFuZ2xlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuXHQgKi9cclxuXHRlcXVhbHMob3RoZXI6IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKCFvdGhlcikge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMueCA9PT0gb3RoZXIueCAmJiB0aGlzLnkgPT09IG90aGVyLnkgJiYgdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEByZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN0YW5nbGUuXHJcblx0ICovXHJcblx0dG9TdHJpbmcoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBgWyR7dGhpcy54fSwgJHt0aGlzLnl9LCAke3RoaXMuaGVpZ2h0fSwgJHt0aGlzLndpZHRofV1gO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHJldHVybiBhIG5ldyBlbXB0eSByZWN0YW5nbGUgd2hpY2ggZW5jbG9zZXMgbm8gYXJlYS5cclxuXHQgKi9cclxuXHRzdGF0aWMgZW1wdHkoKTogUmVjdGFuZ2xlIHtcclxuXHRcdHJldHVybiBuZXcgUmVjdGFuZ2xlKDAsIDAsIDAsIDApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjb21wdXRlQ29kZSh4OiBudW1iZXIsIHk6IG51bWJlciwgeG1pbjogbnVtYmVyLCB4bWF4OiBudW1iZXIsIHltaW46IG51bWJlciwgeW1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdGxldCBjb2RlID0gSU5TSURFO1xyXG5cclxuXHRcdGlmICh4IDwgeG1pbikge1xyXG5cdFx0XHRjb2RlIHw9IExFRlQ7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh4ID4geG1heCkge1xyXG5cdFx0XHRjb2RlIHw9IFJJR0hUO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh5IDwgeW1pbikge1xyXG5cdFx0XHRjb2RlIHw9IEJPVFRPTTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKHkgPiB5bWF4KSB7XHJcblx0XHRcdGNvZGUgfD0gVE9QO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjb2RlO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUmVjdGFuZ2xlIH07IiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi9wb2ludFwiO1xyXG5cclxuY2xhc3MgVHJhbnNmb3JtIHtcclxuXHJcblx0LyoqIFRyYW5zZm9ybWF0aW9uIG1hdHJpeCBlbGVtZW50cyAqL1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgbTogbnVtYmVyW107XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgbmV3IFRyYW5zZm9ybSB3aXRoIGEgdHJhbnNmb3JtYXRpb24gbWF0cml4IHNwZWNpZmllZCBieSBhbiBhcnJheVxyXG5cdCAqIGNvbnNpc3Rpbmcgb2YgW2EsIGIsIGMsIGQsIGUsIGZdIHdoZXJlIHRoZSBlbGVtZW50cyBoYXZlIHRoZSBmb2xsb3dpbmdcclxuXHQgKiByZXByZXNlbnRhdGlvbjpcclxuXHQgKiBcclxuXHQgKiBAdmFsdWUgYTogdGhlIGhvcml6b250YWwgc2NhbGluZyBmYWN0b3JcclxuXHQgKiBAdmFsdWUgYjogdGhlIGhvcml6b250YWwgc2hlYXJpbmcgZmFjdG9yXHJcblx0ICogQHZhbHVlIGM6IHRoZSB2ZXJ0aWNhbCBzaGVhcmluZyBmYWN0b3JcclxuXHQgKiBAdmFsdWUgZDogdGhlIHZlcnRpY2FsIHNjYWxpbmcgZmFjdG9yXHJcblx0ICogQHZhbHVlIGU6IHRoZSBob3Jpem9udGFsIHRyYW5zbGF0aW9uIGZhY3RvclxyXG5cdCAqIEB2YWx1ZSBmOiB0aGUgdmVydGljYWwgdHJhbnNsYXRpb24gZmFjdG9yXHJcblx0ICogXHJcblx0ICogSWYgbm8gdHJhbnNmb3JtYXRpb24gbWF0cml4IGlzIHByb3ZpZGVkLCB0aGUgbmV3IHRyYW5zZm9ybSBpcyBzZXQgdG8gdGhlXHJcblx0ICogaWRlbnRpdHkgdHJhbnNmb3JtLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBtIFRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZWxlbWVudHMuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IobT86IG51bWJlcltdKSB7XHJcblx0XHR0aGlzLm0gPSBtID8gbS5zbGljZSgwLCA2KSA6IFsxLCAwLCAwLCAxLCAwLCAwXTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEByZXR1cm5zIHRoZSBob3Jpem9udGFsIHNjYWxpbmcgZmFjdG9yLlxyXG5cdCAqL1xyXG5cdGdldFNjYWxlWCgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMubVswXTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEByZXR1cm5zIHRoZSB2ZXJ0aWNhbCBzY2FsaW5nIGZhY3Rvci5cclxuXHQgKi9cclxuXHRnZXRTY2FsZVkoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLm1bM107XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcmV0dXJucyB0aGUgaG9yaXpvbnRhbCBzaGVhcmluZyBmYWN0b3IuXHJcblx0ICovXHJcblx0Z2V0U2hlYXJYKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy5tWzFdO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHJldHVybnMgdGhlIHZlcnRpY2FsIHNoZWFyaW5nIGZhY3Rvci5cclxuXHQgKi9cclxuXHRnZXRTaGVhclkoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLm1bMl07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcmV0dXJucyB0aGUgaG9yaXpvbnRhbCB0cmFuc2xhdGlvbiBmYWN0b3IuXHJcblx0ICovXHJcblx0Z2V0VHJhbnNsYXRlWCgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMubVs0XTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEByZXR1cm5zIHRoZSB2ZXJ0aWNhbCB0cmFuc2xhdGlvbiBmYWN0b3IuXHJcblx0ICovXHJcblx0Z2V0VHJhbnNsYXRlWSgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMubVs1XTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgdGhpcyB0cmFuc2Zvcm0uXHJcblx0ICogXHJcblx0ICogQHJldHVybiBhIGNvcHkgb2YgdGhpcyB0cmFuc2Zvcm0uXHJcblx0ICovXHJcblx0Y2xvbmUoKTogVHJhbnNmb3JtIHtcclxuXHRcdHJldHVybiBuZXcgVHJhbnNmb3JtKHRoaXMubSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldHMgdGhpcyB0cmFuc2Zvcm0gdG8gdGhlIGlkZW50aXR5IHRyYW5zZm9ybS5cclxuXHQgKi9cclxuXHRyZXNldCgpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0VmFsdWVzKDEsIDAsIDAsIDEsIDAsIDApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyB0aGUgbWF0cml4IGVsZW1lbnRzIG9mIHRoaXMgdHJhbnNmb3JtIHRvIHRoZSBtYXRyaXggZWxlbWVudHMgcHJvdmlkZWRcclxuXHQgKiBieSB0aGUgc3BlY2lmaWVkIHRyYW5zZm9ybS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm0gdG8gY29weSB0aGUgbWF0cml4IGVsZW1lbnRzIGZyb20uXHJcblx0ICovXHJcblx0c2V0VHJhbnNmb3JtKHRyYW5zZm9ybTogVHJhbnNmb3JtKTogdm9pZCB7XHJcblx0XHR0aGlzLm1bMF0gPSB0cmFuc2Zvcm0uZ2V0U2NhbGVYKCk7XHJcblx0XHR0aGlzLm1bMV0gPSB0cmFuc2Zvcm0uZ2V0U2hlYXJYKCk7XHJcblx0XHR0aGlzLm1bMl0gPSB0cmFuc2Zvcm0uZ2V0U2hlYXJZKCk7XHJcblx0XHR0aGlzLm1bM10gPSB0cmFuc2Zvcm0uZ2V0U2NhbGVZKCk7XHJcblx0XHR0aGlzLm1bNF0gPSB0cmFuc2Zvcm0uZ2V0VHJhbnNsYXRlWCgpO1xyXG5cdFx0dGhpcy5tWzVdID0gdHJhbnNmb3JtLmdldFRyYW5zbGF0ZVkoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIG1hdHJpeCBlbGVtZW50cyBvZiB0aGlzIHRyYW5zZm9ybSB0byB0aGUgcHJvdmlkZWQgMkQgbWF0cml4IGVsZW1lbnRzLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBhIHRoZSBob3Jpem9udGFsIHNjYWxpbmcgZmFjdG9yLlxyXG5cdCAqIEBwYXJhbSBiIHRoZSBob3Jpem9udGFsIHNoZWFyaW5nIGZhY3Rvci5cclxuXHQgKiBAcGFyYW0gYyB0aGUgdmVydGljYWwgc2hlYXJpbmcgZmFjdG9yLlxyXG5cdCAqIEBwYXJhbSBkIHRoZSB2ZXJ0aWNhbCBzY2FsaW5nIGZhY3Rvci5cclxuXHQgKiBAcGFyYW0gZSB0aGUgaG9yaXpvbnRhbCB0cmFuc2xhdGlvbiBmYWN0b3IuXHJcblx0ICogQHBhcmFtIGYgdGhlIHZlcnRpY2FsIHRyYW5zbGF0aW9uIGZhY3Rvci5cclxuXHQgKi9cclxuXHRzZXRWYWx1ZXMoYTogbnVtYmVyLCBiOiBudW1iZXIsIGM6IG51bWJlciwgZDogbnVtYmVyLCBlOiBudW1iZXIsIGY6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5tWzBdID0gYTtcclxuXHRcdHRoaXMubVsxXSA9IGI7XHJcblx0XHR0aGlzLm1bMl0gPSBjO1xyXG5cdFx0dGhpcy5tWzNdID0gZDtcclxuXHRcdHRoaXMubVs0XSA9IGU7XHJcblx0XHR0aGlzLm1bNV0gPSBmO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW52ZXJ0cyB0aGlzIHRyYW5zZm9ybSBpbiBwbGFjZS5cclxuXHQgKi9cclxuXHRpbnZlcnQoKTogdm9pZCB7XHJcblx0XHRjb25zdCBkID0gMSAvICh0aGlzLm1bMF0gKiB0aGlzLm1bM10gLSB0aGlzLm1bMV0gKiB0aGlzLm1bMl0pO1xyXG5cclxuXHRcdHRoaXMubVswXSA9IHRoaXMubVszXSAqIGQ7XHJcblx0XHR0aGlzLm1bMV0gPSAtdGhpcy5tWzFdICogZDtcclxuXHRcdHRoaXMubVsyXSA9IC10aGlzLm1bMl0gKiBkO1xyXG5cdFx0dGhpcy5tWzNdID0gdGhpcy5tWzBdICogZDtcclxuXHRcdHRoaXMubVs0XSA9IGQgKiAodGhpcy5tWzJdICogdGhpcy5tWzVdIC0gdGhpcy5tWzNdICogdGhpcy5tWzRdKTtcclxuXHRcdHRoaXMubVs1XSA9IGQgKiAodGhpcy5tWzFdICogdGhpcy5tWzRdIC0gdGhpcy5tWzBdICogdGhpcy5tWzVdKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE11bHRpcGxpZXMgdGhpcyB0cmFuc2Zvcm0gd2l0aCB0aGUgcHJvdmlkZWQgdHJhbnNmb3JtIGluIHBsYWNlLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSB0byBtdWx0aXBseSB3aXRoLlxyXG5cdCAqL1xyXG5cdG11bHRpcGx5KHRyYW5zZm9ybTogVHJhbnNmb3JtKTogdm9pZCB7XHJcblx0XHR0aGlzLm1bMF0gPSB0aGlzLm1bMF0gKiB0cmFuc2Zvcm0ubVswXSArIHRoaXMubVsyXSAqIHRyYW5zZm9ybS5tWzFdO1xyXG5cdFx0dGhpcy5tWzFdID0gdGhpcy5tWzFdICogdHJhbnNmb3JtLm1bMF0gKyB0aGlzLm1bM10gKiB0cmFuc2Zvcm0ubVsxXTtcclxuXHRcdHRoaXMubVsyXSA9IHRoaXMubVswXSAqIHRyYW5zZm9ybS5tWzJdICsgdGhpcy5tWzJdICogdHJhbnNmb3JtLm1bM107XHJcblx0XHR0aGlzLm1bM10gPSB0aGlzLm1bMV0gKiB0cmFuc2Zvcm0ubVsyXSArIHRoaXMubVszXSAqIHRyYW5zZm9ybS5tWzNdO1xyXG5cdFx0dGhpcy5tWzRdID0gdGhpcy5tWzBdICogdHJhbnNmb3JtLm1bNF0gKyB0aGlzLm1bMl0gKiB0cmFuc2Zvcm0ubVs1XSArIHRoaXMubVs0XTtcclxuXHRcdHRoaXMubVs1XSA9IHRoaXMubVsxXSAqIHRyYW5zZm9ybS5tWzRdICsgdGhpcy5tWzNdICogdHJhbnNmb3JtLm1bNV0gKyB0aGlzLm1bNV07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb25jYXRlbmF0ZXMgdGhpcyB0cmFuc2Zvcm0gd2l0aCBhIHJvdGF0aW9uIHRyYW5zZm9ybWF0aW9uLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBhbmdsZSBUaGUgYW5nbGUgb2Ygcm90YXRpb24gbWVhc3VyZWQgaW4gcmFkaWFucy5cclxuXHQgKi9cclxuXHRyb3RhdGUoYW5nbGU6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Y29uc3QgYyA9IE1hdGguY29zKGFuZ2xlKTtcclxuXHRcdGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSk7XHJcblxyXG5cdFx0dGhpcy5tWzBdID0gdGhpcy5tWzBdICogYyArIHRoaXMubVsxXSAqIHM7XHJcblx0XHR0aGlzLm1bMV0gPSB0aGlzLm1bMF0gKiAtcyArIHRoaXMubVsxXSAqIGM7XHJcblx0XHR0aGlzLm1bMl0gPSB0aGlzLm1bMl0gKiBjICsgdGhpcy5tWzNdICogcztcclxuXHRcdHRoaXMubVszXSA9IHRoaXMubVsyXSAqIC1zICsgdGhpcy5tWzNdICogYztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbmNhdGVuYXRlcyB0aGlzIHRyYW5zZm9ybSB3aXRoIGEgc2NhbGluZyB0cmFuc2Zvcm1hdGlvbi5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gc3ggdGhlIGhvcml6b250YWwgc2NhbGluZyBmYWN0b3IuXHJcblx0ICogQHBhcmFtIHN5IHRoZSB2ZXJ0aWNhbCBzY2FsaW5nIGZhY3Rvci5cclxuXHQgKi9cclxuXHRzY2FsZShzeDogbnVtYmVyLCBzeTogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLm1bMF0gKj0gc3g7XHJcblx0XHR0aGlzLm1bMV0gKj0gc3g7XHJcblx0XHR0aGlzLm1bMl0gKj0gc3k7XHJcblx0XHR0aGlzLm1bM10gKj0gc3k7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb25jYXRlbmF0ZXMgdGhpcyB0cmFuc2Zvcm0gd2l0aCBhIHRyYW5zbGF0ZSB0cmFuc2Zvcm1hdGlvbi5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0geCB0aGUgZGlzdGFuY2UgdG8gdHJhbnNsYXRlIGluIHRoZSB4IGRpcmVjdGlvbi5cclxuXHQgKiBAcGFyYW0geSB0aGUgZGlzdGFuY2UgdG8gdHJhbnNsYXRlIGluIHRoZSB5IGRpcmVjdGlvbi5cclxuXHQgKi9cclxuXHR0cmFuc2xhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMubVs0XSArPSB0aGlzLm1bMF0gKiB4ICsgdGhpcy5tWzJdICogeTtcclxuXHRcdHRoaXMubVs1XSArPSB0aGlzLm1bMV0gKiB4ICsgdGhpcy5tWzNdICogeTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRyYW5zZm9ybXMgYSBwb2ludCByZXByZXNlbnRlZCBieSAoeCx5KSBjb29yZGluYXRlcy5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gcHggdGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgdG8gdHJhbnNmb3JtLlxyXG5cdCAqIEBwYXJhbSBweSB0aGUgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0cmFuc2Zvcm0uXHJcblx0ICogXHJcblx0ICogQHJldHVybiB0aGUgdHJhbnNmb3JtZWQgcG9pbnQuXHJcblx0ICovXHJcblx0dHJhbnNmb3JtUG9pbnQocHg6IG51bWJlciwgcHk6IG51bWJlcik6IFBvaW50IHtcclxuXHRcdGNvbnN0IHggPSBweDtcclxuXHRcdGNvbnN0IHkgPSBweTtcclxuXHJcblx0XHRweCA9IHggKiB0aGlzLm1bMF0gKyB5ICogdGhpcy5tWzJdICsgdGhpcy5tWzRdO1xyXG5cdFx0cHkgPSB4ICogdGhpcy5tWzFdICsgeSAqIHRoaXMubVszXSArIHRoaXMubVs1XTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFBvaW50KHB4LCBweSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUZXN0cyB3aGV0aGVyIHRoZSBwcm92aWRlZCB0cmFuc2Zvcm0gZGVzY3JpYmVzIHRoZSBzYW1lIHRyYW5zZm9ybS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gb3RoZXIgdGhlIHRyYW5zZm9ybSB0byBjb21wYXJlIHRoaXMgdHJhbnNmb3JtIHRvLlxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNmb3JtcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuXHQgKi9cclxuXHRlcXVhbHMob3RoZXI6IFRyYW5zZm9ybSk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKCFvdGhlcikge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubS5lcXVhbHMob3RoZXIubSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdHJhbnNmb3JtLlxyXG5cdCAqL1xyXG5cdHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gXCJbXCIgKyB0aGlzLm0uam9pbihcIiwgXCIpICsgXCJdXCI7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBUcmFuc2Zvcm0gfTsiLCJjbGFzcyBNZWRpYVBsYXllciB7XHJcblxyXG5cdHByaXZhdGUgbWVkaWE6IEhUTUxNZWRpYUVsZW1lbnQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihtZWRpYTogSFRNTE1lZGlhRWxlbWVudCkge1xyXG5cdFx0dGhpcy5tZWRpYSA9IG1lZGlhO1xyXG5cdH1cclxuXHJcblx0c2V0IHNvdXJjZShzb3VyY2U6IHN0cmluZykge1xyXG5cdFx0dGhpcy5tZWRpYS5zcmMgPSBzb3VyY2VcclxuXHR9XHJcblxyXG5cdGdldCBkdXJhdGlvbigpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMubWVkaWEuZHVyYXRpb247XHJcblx0fVxyXG5cclxuXHRzZXQgdGltZSh0aW1lOiBudW1iZXIpIHtcclxuXHRcdHRoaXMubWVkaWEuY3VycmVudFRpbWUgPSB0aW1lO1xyXG5cdH1cclxuXHJcblx0Z2V0IHRpbWUoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLm1lZGlhLmN1cnJlbnRUaW1lO1xyXG5cdH1cclxuXHJcblx0c2V0IG11dGVkKG11dGVkOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLm1lZGlhLm11dGVkID0gbXV0ZWQ7XHJcblx0fVxyXG5cclxuXHRnZXQgbXV0ZWQoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5tZWRpYS5tdXRlZDtcclxuXHR9XHJcblxyXG5cdHNldCB2b2x1bWUodm9sdW1lOiBudW1iZXIpIHtcclxuXHRcdHRoaXMubWVkaWEudm9sdW1lID0gdm9sdW1lO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZvbHVtZSgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMubWVkaWEudm9sdW1lO1xyXG5cdH1cclxuXHJcblx0c3RhcnQoKTogdm9pZCB7XHJcblx0XHR0aGlzLm1lZGlhLnBsYXkoKTtcclxuXHR9XHJcblxyXG5cdHN0b3AoKTogdm9pZCB7XHJcblx0XHR0aGlzLm1lZGlhLnBhdXNlKCk7XHJcblx0fVxyXG5cclxuXHRhZGREdXJhdGlvbkxpc3RlbmVyKGxpc3RlbmVyOiAoZHVyYXRpb246IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xyXG5cdFx0dGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiZHVyYXRpb25jaGFuZ2VcIiwgKCkgPT4ge1xyXG5cdFx0XHRsaXN0ZW5lcih0aGlzLm1lZGlhLmR1cmF0aW9uKTtcclxuXHRcdH0sIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdGFkZFRpbWVMaXN0ZW5lcihsaXN0ZW5lcjogKHRpbWU6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xyXG5cdFx0dGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCAoKSA9PiB7XHJcblx0XHRcdGxpc3RlbmVyKHRoaXMubWVkaWEuY3VycmVudFRpbWUpO1xyXG5cdFx0fSwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0YWRkVm9sdW1lTGlzdGVuZXIobGlzdGVuZXI6ICh2b2x1bWU6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xyXG5cdFx0dGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKFwidm9sdW1lY2hhbmdlXCIsICgpID0+IHtcclxuXHRcdFx0bGlzdGVuZXIodGhpcy5tZWRpYS52b2x1bWUpO1xyXG5cdFx0fSwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0YWRkTXV0ZWRMaXN0ZW5lcihsaXN0ZW5lcjogKG11dGVkOiBib29sZWFuKSA9PiB2b2lkKTogdm9pZCB7XHJcblx0XHR0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoXCJ2b2x1bWVjaGFuZ2VcIiwgKCkgPT4ge1xyXG5cdFx0XHRsaXN0ZW5lcih0aGlzLm1lZGlhLm11dGVkKTtcclxuXHRcdH0sIGZhbHNlKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IE1lZGlhUGxheWVyIH07IiwiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBBY3Rpb25IYW5kbGVyPFQ+IHtcclxuXHJcblx0cHJpdmF0ZSB1bmRvQWN0aW9uczogQWN0aW9uPFQ+W10gPSBbXTtcclxuXHJcblx0cHJpdmF0ZSByZWRvQWN0aW9uczogQWN0aW9uPFQ+W10gPSBbXTtcclxuXHJcblx0cHJpdmF0ZSBtb2RlbDogVDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKG1vZGVsOiBUKSB7XHJcblx0XHR0aGlzLm1vZGVsID0gbW9kZWw7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlQWN0aW9uKGFjdGlvbjogQWN0aW9uPFQ+KTogdm9pZCB7XHJcblx0XHR0aGlzLnVuZG9BY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuXHRcdHRoaXMucmVkb0FjdGlvbnMubGVuZ3RoID0gMDtcclxuXHJcblx0XHRhY3Rpb24uZXhlY3V0ZSh0aGlzLm1vZGVsKTtcclxuXHR9XHJcblxyXG5cdHVuZG8oKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy51bmRvQWN0aW9ucy5sZW5ndGggPCAxKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBhY3Rpb24gPSB0aGlzLnVuZG9BY3Rpb25zLnBvcCgpO1xyXG5cdFx0dGhpcy5yZWRvQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcblx0XHRhY3Rpb24udW5kbyh0aGlzLm1vZGVsKTtcclxuXHR9XHJcblxyXG5cdHJlZG8oKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5yZWRvQWN0aW9ucy5sZW5ndGggPCAxKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBhY3Rpb24gPSB0aGlzLnJlZG9BY3Rpb25zLnBvcCgpO1xyXG5cdFx0dGhpcy51bmRvQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcblx0XHRhY3Rpb24ucmVkbyh0aGlzLm1vZGVsKTtcclxuXHR9XHJcblxyXG5cdGNsZWFyKCk6IHZvaWQge1xyXG5cdFx0dGhpcy51bmRvQWN0aW9ucy5sZW5ndGggPSAwO1xyXG5cdFx0dGhpcy5yZWRvQWN0aW9ucy5sZW5ndGggPSAwO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgQWN0aW9uSGFuZGxlciB9OyIsImltcG9ydCB7IFNoYXBlQWN0aW9uIH0gZnJvbSBcIi4vc2hhcGUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL3NoYXBlL3NoYXBlXCI7XHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi4vcGFnZVwiO1xyXG5cclxuY2xhc3MgQWRkU2hhcGVBY3Rpb24gZXh0ZW5kcyBTaGFwZUFjdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNoYXBlczogU2hhcGVbXSkge1xyXG5cdFx0c3VwZXIoc2hhcGVzKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocGFnZTogUGFnZSk6IHZvaWQge1xyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5zaGFwZXMpIHtcclxuXHRcdFx0cGFnZS5hZGRTaGFwZShzaGFwZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR1bmRvKHBhZ2U6IFBhZ2UpOiB2b2lkIHtcclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHRoaXMuc2hhcGVzKSB7XHJcblx0XHRcdHBhZ2UucmVtb3ZlU2hhcGUoc2hhcGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVkbyhwYWdlOiBQYWdlKTogdm9pZCB7XHJcblx0XHR0aGlzLmV4ZWN1dGUocGFnZSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBBZGRTaGFwZUFjdGlvbiB9OyIsImltcG9ydCB7IFNoYXBlQWN0aW9uIH0gZnJvbSBcIi4vc2hhcGUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL3NoYXBlL3NoYXBlXCI7XHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi4vcGFnZVwiO1xyXG5cclxuY2xhc3MgUmVtb3ZlU2hhcGVBY3Rpb24gZXh0ZW5kcyBTaGFwZUFjdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNoYXBlczogU2hhcGVbXSkge1xyXG5cdFx0c3VwZXIoc2hhcGVzKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocGFnZTogUGFnZSk6IHZvaWQge1xyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5zaGFwZXMpIHtcclxuXHRcdFx0cGFnZS5yZW1vdmVTaGFwZShzaGFwZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR1bmRvKHBhZ2U6IFBhZ2UpOiB2b2lkIHtcclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHRoaXMuc2hhcGVzKSB7XHJcblx0XHRcdHBhZ2UuYWRkU2hhcGUoc2hhcGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVkbyhwYWdlOiBQYWdlKTogdm9pZCB7XHJcblx0XHR0aGlzLmV4ZWN1dGUocGFnZSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBSZW1vdmVTaGFwZUFjdGlvbiB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9zaGFwZS9zaGFwZVwiO1xyXG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcIi4uL3BhZ2VcIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIFNoYXBlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uPFBhZ2U+IHtcclxuXHJcblx0cHJvdGVjdGVkIHNoYXBlczogU2hhcGVbXTtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHNoYXBlczogU2hhcGVbXSkge1xyXG5cdFx0dGhpcy5zaGFwZXMgPSBzaGFwZXM7XHJcblx0fVxyXG5cclxuXHJcblx0YWJzdHJhY3QgZXhlY3V0ZShwYWdlOiBQYWdlKTogdm9pZDtcclxuXHJcblx0YWJzdHJhY3QgdW5kbyhwYWdlOiBQYWdlKTogdm9pZDtcclxuXHJcblx0YWJzdHJhY3QgcmVkbyhwYWdlOiBQYWdlKTogdm9pZDtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFNoYXBlQWN0aW9uIH07IiwiaW1wb3J0IHsgRGltZW5zaW9uIH0gZnJvbSBcIi4uL2dlb21ldHJ5L2RpbWVuc2lvblwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi9wYWdlXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBTbGlkZURvY3VtZW50IHtcclxuXHJcblx0cHJvdGVjdGVkIHBhZ2VzOiBQYWdlW107XHJcblxyXG5cdHByaXZhdGUgZG9jdW1lbnRJZDogYmlnaW50O1xyXG5cclxuXHJcblx0YWJzdHJhY3QgYXN5bmMgZ2V0UGFnZVRleHQocGFnZU51bWJlcjogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+O1xyXG5cclxuXHRhYnN0cmFjdCByZW5kZXJQYWdlKHBhZ2VOdW1iZXI6IG51bWJlciwgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB2aWV3UmVjdDogUmVjdGFuZ2xlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogUHJvbWlzZTxDYW52YXNJbWFnZVNvdXJjZT47XHJcblxyXG5cdGFic3RyYWN0IHJlbmRlclBhZ2VUZXh0KHBhZ2VOdW1iZXI6IG51bWJlciwgcm9vdDogSFRNTEVsZW1lbnQsIHNpemU6IERpbWVuc2lvbiwgdmlld1JlY3Q6IFJlY3RhbmdsZSk6IHZvaWQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0Z2V0RG9jdW1lbnRJZCgpOiBiaWdpbnQge1xyXG5cdFx0cmV0dXJuIHRoaXMuZG9jdW1lbnRJZDtcclxuXHR9XHJcblxyXG5cdHNldERvY3VtZW50SWQoaWQ6IGJpZ2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5kb2N1bWVudElkID0gaWQ7XHJcblx0fVxyXG5cclxuXHRnZXRQYWdlQ291bnQoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLnBhZ2VzLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdGdldFBhZ2UocGFnZU51bWJlcjogbnVtYmVyKTogUGFnZSB7XHJcblx0XHRpZiAocGFnZU51bWJlciA8IDAgfHwgcGFnZU51bWJlciA+IHRoaXMucGFnZXMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFBhZ2UgbnVtYmVyICR7cGFnZU51bWJlcn0gb3V0IG9mIGJvdW5kcy5gKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLnBhZ2VzW3BhZ2VOdW1iZXJdO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2xpZGVEb2N1bWVudCB9OyIsImltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi9wYWdlXCI7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4vc2hhcGUvc2hhcGVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5cclxuY2xhc3MgUGFnZUV2ZW50IHtcclxuXHJcblx0cHJpdmF0ZSBfY2hhbmdlVHlwZTogUGFnZUNoYW5nZVR5cGU7XHJcblxyXG5cdHByaXZhdGUgX3BhZ2U6IFBhZ2U7XHJcblxyXG5cdHByaXZhdGUgX3NoYXBlOiBTaGFwZTtcclxuXHJcblx0cHJpdmF0ZSBfZGlydHlSZWdpb246IFJlY3RhbmdsZTtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHBhZ2U6IFBhZ2UsIGNoYW5nZVR5cGU6IFBhZ2VDaGFuZ2VUeXBlLCBzaGFwZT86IFNoYXBlLCBkaXJ0eVJlZ2lvbj86IFJlY3RhbmdsZSkge1xyXG5cdFx0dGhpcy5fcGFnZSA9IHBhZ2U7XHJcblx0XHR0aGlzLl9jaGFuZ2VUeXBlID0gY2hhbmdlVHlwZTtcclxuXHRcdHRoaXMuX3NoYXBlID0gc2hhcGU7XHJcblx0XHR0aGlzLl9kaXJ0eVJlZ2lvbiA9IGRpcnR5UmVnaW9uO1xyXG5cdH1cclxuXHJcblx0Z2V0IGNoYW5nZVR5cGUoKTogUGFnZUNoYW5nZVR5cGUge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2NoYW5nZVR5cGU7XHJcblx0fVxyXG5cclxuXHRnZXQgcGFnZSgpOiBQYWdlIHtcclxuXHRcdHJldHVybiB0aGlzLl9wYWdlO1xyXG5cdH1cclxuXHJcblx0Z2V0IHNoYXBlKCk6IFNoYXBlIHtcclxuXHRcdHJldHVybiB0aGlzLl9zaGFwZTtcclxuXHR9XHJcblxyXG5cdGdldCBkaXJ0eVJlZ2lvbigpOiBSZWN0YW5nbGUge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2RpcnR5UmVnaW9uO1xyXG5cdH1cclxufVxyXG5cclxuZW51bSBQYWdlQ2hhbmdlVHlwZSB7XHJcblxyXG5cdENsZWFyID0gXCJDbGVhclwiLFxyXG5cdFNoYXBlQWRkZWQgPSBcIlNoYXBlQWRkZWRcIixcclxuXHRTaGFwZVJlbW92ZWQgPSBcIlNoYXBlUmVtb3ZlZFwiLFxyXG5cdFNoYXBlTW9kaWZpZWQgPSBcIlNoYXBlTW9kaWZpZWRcIixcclxuXHRQYWdlVHJhbnNmb3JtID0gXCJQYWdlVHJhbnNmb3JtXCJcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFBhZ2VFdmVudCwgUGFnZUNoYW5nZVR5cGUgfTsiLCJpbXBvcnQgeyBQYWdlRXZlbnQsIFBhZ2VDaGFuZ2VUeXBlIH0gZnJvbSBcIi4vcGFnZS1ldmVudFwiO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuL3NoYXBlL3NoYXBlXCI7XHJcbmltcG9ydCB7IFNoYXBlRXZlbnQgfSBmcm9tIFwiLi9zaGFwZS9zaGFwZS1ldmVudFwiO1xyXG5pbXBvcnQgeyBUeXBlZEV2ZW50LCBMaXN0ZW5lciwgRGlzcG9zYWJsZSB9IGZyb20gXCIuLi91dGlscy9ldmVudC1saXN0ZW5lclwiO1xyXG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb24vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEFjdGlvbkhhbmRsZXIgfSBmcm9tIFwiLi9hY3Rpb24vYWN0aW9uLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgU2xpZGVTaGFwZSB9IGZyb20gXCIuL3NoYXBlL3NsaWRlLnNoYXBlXCI7XHJcbmltcG9ydCB7IFNsaWRlRG9jdW1lbnQgfSBmcm9tIFwiLi9kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IERpbWVuc2lvbiB9IGZyb20gXCIuLi9nZW9tZXRyeS9kaW1lbnNpb25cIjtcclxuXHJcbmNsYXNzIFBhZ2Uge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHNoYXBlQ2hhbmdlTGlzdGVuZXI6IChldmVudDogU2hhcGVFdmVudCkgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBhY3Rpb25IYW5kbGVyID0gbmV3IEFjdGlvbkhhbmRsZXI8UGFnZT4odGhpcyk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgY2hhbmdlRXZlbnQgPSBuZXcgVHlwZWRFdmVudDxQYWdlRXZlbnQ+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2hhcGVzOiBTaGFwZVtdID0gW107XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2xpZGVTaGFwZTogU2xpZGVTaGFwZTtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBkb2N1bWVudDogU2xpZGVEb2N1bWVudDtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBwYWdlTnVtYmVyOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3Rvcihkb2N1bWVudDogU2xpZGVEb2N1bWVudCwgcGFnZU51bWJlcjogbnVtYmVyKSB7XHJcblx0XHR0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XHJcblx0XHR0aGlzLnBhZ2VOdW1iZXIgPSBwYWdlTnVtYmVyO1xyXG5cdFx0dGhpcy5zbGlkZVNoYXBlID0gbmV3IFNsaWRlU2hhcGUodGhpcyk7XHJcblx0XHR0aGlzLnNsaWRlU2hhcGUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblNsaWRlVHJhbnNmb3JtLmJpbmQodGhpcykpO1xyXG5cclxuXHRcdHRoaXMuc2hhcGVDaGFuZ2VMaXN0ZW5lciA9IHRoaXMub25TaGFwZU1vZGlmaWVkLmJpbmQodGhpcyk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB2aWV3UmVjdDogUmVjdGFuZ2xlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogUHJvbWlzZTxDYW52YXNJbWFnZVNvdXJjZT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZG9jdW1lbnQucmVuZGVyUGFnZSh0aGlzLnBhZ2VOdW1iZXIsIGNvbnRleHQsIHZpZXdSZWN0LCBkaXJ0eVJlZ2lvbik7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJUZXh0KHJvb3Q6IEhUTUxFbGVtZW50LCBzaXplOiBEaW1lbnNpb24pIHtcclxuXHRcdHRoaXMuZG9jdW1lbnQucmVuZGVyUGFnZVRleHQodGhpcy5wYWdlTnVtYmVyLCByb290LCBzaXplLCB0aGlzLmdldFNsaWRlU2hhcGUoKS5ib3VuZHMpO1xyXG5cdH1cclxuXHJcblx0YWRkQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXI6IExpc3RlbmVyPFBhZ2VFdmVudD4pOiBEaXNwb3NhYmxlIHtcclxuXHRcdHJldHVybiB0aGlzLmNoYW5nZUV2ZW50LnN1YnNjcmliZShsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcjogTGlzdGVuZXI8UGFnZUV2ZW50Pik6IHZvaWQge1xyXG5cdFx0dGhpcy5jaGFuZ2VFdmVudC51bnN1YnNjcmliZShsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRhZGRTaGFwZShzaGFwZTogU2hhcGUpIHtcclxuXHRcdGNvbnN0IHByZXZDb3VudCA9IHRoaXMuc2hhcGVzLmxlbmd0aDtcclxuXHJcblx0XHRpZiAodGhpcy5zaGFwZXMucHVzaChzaGFwZSkgPiBwcmV2Q291bnQpIHtcclxuXHRcdFx0c2hhcGUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5zaGFwZUNoYW5nZUxpc3RlbmVyKTtcclxuXHJcblx0XHRcdHRoaXMuZmlyZVBhZ2VFdmVudChuZXcgUGFnZUV2ZW50KHRoaXMsIFBhZ2VDaGFuZ2VUeXBlLlNoYXBlQWRkZWQsIHNoYXBlKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZW1vdmVTaGFwZShzaGFwZTogU2hhcGUpIHtcclxuXHRcdGNvbnN0IHNoYXBlSW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTtcclxuXHJcblx0XHRpZiAoc2hhcGVJbmRleCA+IC0xKSB7XHJcblx0XHRcdGNvbnN0IGRlbGV0ZWQgPSB0aGlzLnNoYXBlcy5zcGxpY2Uoc2hhcGVJbmRleCwgMSk7XHJcblxyXG5cdFx0XHRpZiAoZGVsZXRlZC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0c2hhcGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5zaGFwZUNoYW5nZUxpc3RlbmVyKTtcclxuXHJcblx0XHRcdFx0dGhpcy5maXJlUGFnZUV2ZW50KG5ldyBQYWdlRXZlbnQodGhpcywgUGFnZUNoYW5nZVR5cGUuU2hhcGVSZW1vdmVkLCBzaGFwZSkpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRQYWdlTnVtYmVyKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy5wYWdlTnVtYmVyO1xyXG5cdH1cclxuXHJcblx0Z2V0U2xpZGVTaGFwZSgpOiBTbGlkZVNoYXBlIHtcclxuXHRcdHJldHVybiB0aGlzLnNsaWRlU2hhcGU7XHJcblx0fVxyXG5cclxuXHRnZXRTaGFwZXMoKTogU2hhcGVbXSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zaGFwZXM7XHJcblx0fVxyXG5cclxuXHRoYXNTaGFwZXMoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5zaGFwZXMubGVuZ3RoID4gMDtcclxuXHR9XHJcblxyXG5cdGFkZEFjdGlvbihhY3Rpb246IEFjdGlvbjxQYWdlPikge1xyXG5cdFx0dGhpcy5hY3Rpb25IYW5kbGVyLmV4ZWN1dGVBY3Rpb24oYWN0aW9uKTtcclxuXHR9XHJcblxyXG5cdHVuZG8oKTogdm9pZCB7XHJcblx0XHR0aGlzLmFjdGlvbkhhbmRsZXIudW5kbygpO1xyXG5cdH1cclxuXHJcblx0cmVkbygpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWN0aW9uSGFuZGxlci5yZWRvKCk7XHJcblx0fVxyXG5cclxuXHRjbGVhcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWN0aW9uSGFuZGxlci5jbGVhcigpO1xyXG5cdFx0dGhpcy5zaGFwZXMubGVuZ3RoID0gMDtcclxuXHJcblx0XHR0aGlzLmZpcmVQYWdlRXZlbnQobmV3IFBhZ2VFdmVudCh0aGlzLCBQYWdlQ2hhbmdlVHlwZS5DbGVhciwgbnVsbCkpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBvblNsaWRlVHJhbnNmb3JtKGV2ZW50OiBTaGFwZUV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmZpcmVQYWdlRXZlbnQobmV3IFBhZ2VFdmVudCh0aGlzLCBQYWdlQ2hhbmdlVHlwZS5QYWdlVHJhbnNmb3JtLCBldmVudC5zaGFwZSwgZXZlbnQuZGlydHlSZWdpb24pKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25TaGFwZU1vZGlmaWVkKGV2ZW50OiBTaGFwZUV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmZpcmVQYWdlRXZlbnQobmV3IFBhZ2VFdmVudCh0aGlzLCBQYWdlQ2hhbmdlVHlwZS5TaGFwZU1vZGlmaWVkLCBldmVudC5zaGFwZSwgZXZlbnQuZGlydHlSZWdpb24pKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZmlyZVBhZ2VFdmVudChldmVudDogUGFnZUV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmNoYW5nZUV2ZW50LnB1Ymxpc2goZXZlbnQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGFnZSB9OyIsImltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi9wYWdlXCI7XHJcbmltcG9ydCB7IFNsaWRlRG9jdW1lbnQgfSBmcm9tIFwiLi9kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBQREZEb2N1bWVudFByb3h5LCBQREZQYWdlUHJveHksIFRleHRJdGVtIH0gZnJvbSAncGRmanMtZGlzdC90eXBlcy9zcmMvZGlzcGxheS9hcGknO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFBkZlJlbmRlcmVyIH0gZnJvbSBcIi4uL3JlbmRlci9wZGYucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgUGRmVGV4dFJlbmRlcmVyIH0gZnJvbSBcIi4uL3JlbmRlci9wZGYudGV4dC5yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZGltZW5zaW9uXCI7XHJcblxyXG5jbGFzcyBQZGZKc0RvY3VtZW50IGV4dGVuZHMgU2xpZGVEb2N1bWVudCB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgZG9jdW1lbnQ6IFBERkRvY3VtZW50UHJveHk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyZXI6IFBkZlJlbmRlcmVyO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRleHRSZW5kZXJlcjogUGRmVGV4dFJlbmRlcmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoZG9jdW1lbnQ6IFBERkRvY3VtZW50UHJveHkpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xyXG5cdFx0dGhpcy5yZW5kZXJlciA9IG5ldyBQZGZSZW5kZXJlcigpO1xyXG5cdFx0dGhpcy50ZXh0UmVuZGVyZXIgPSBuZXcgUGRmVGV4dFJlbmRlcmVyKCk7XHJcblxyXG5cdFx0dGhpcy5sb2FkUGFnZXMoZG9jdW1lbnQpXHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRQYWdlVGV4dChwYWdlTnVtYmVyOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdFx0Y29uc3QgcGFnZSA9IGF3YWl0IHRoaXMuZG9jdW1lbnQuZ2V0UGFnZShwYWdlTnVtYmVyICsgMSk7XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgcGFnZS5nZXRUZXh0Q29udGVudCgpO1xyXG5cclxuXHRcdHJldHVybiBjb250ZW50Lml0ZW1zLm1hcChmdW5jdGlvbiAoczogVGV4dEl0ZW0pIHsgcmV0dXJuIHMuc3RyOyB9KS5qb2luKCcgJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZW5kZXJQYWdlKHBhZ2VOdW1iZXI6IG51bWJlciwgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB2aWV3UmVjdDogUmVjdGFuZ2xlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogUHJvbWlzZTxDYW52YXNJbWFnZVNvdXJjZT4ge1xyXG5cdFx0Y29uc3QgcGFnZVByb3h5OiBQREZQYWdlUHJveHkgPSBhd2FpdCB0aGlzLmdldFBkZlBhZ2UocGFnZU51bWJlcik7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMucmVuZGVyZXIucmVuZGVyKHBhZ2VQcm94eSwgY29udGV4dCwgdmlld1JlY3QsIGRpcnR5UmVnaW9uKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlbmRlclBhZ2VUZXh0KHBhZ2VOdW1iZXI6IG51bWJlciwgcm9vdDogSFRNTEVsZW1lbnQsIHNpemU6IERpbWVuc2lvbiwgdmlld1JlY3Q6IFJlY3RhbmdsZSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgcGFnZVByb3h5OiBQREZQYWdlUHJveHkgPSBhd2FpdCB0aGlzLmdldFBkZlBhZ2UocGFnZU51bWJlcik7XHJcblxyXG5cdFx0dGhpcy50ZXh0UmVuZGVyZXIucmVuZGVyKHBhZ2VQcm94eSwgcm9vdCwgc2l6ZSwgdmlld1JlY3QpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRQZGZQYWdlKHBhZ2VOdW1iZXI6IG51bWJlcik6IFByb21pc2U8UERGUGFnZVByb3h5PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5kb2N1bWVudC5nZXRQYWdlKHBhZ2VOdW1iZXIgKyAxKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgbG9hZFBhZ2VzKGRvY3VtZW50OiBQREZEb2N1bWVudFByb3h5KTogdm9pZCB7XHJcblx0XHR0aGlzLnBhZ2VzID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5udW1QYWdlczsgaSsrKSB7XHJcblx0XHRcdHRoaXMucGFnZXMucHVzaChuZXcgUGFnZSh0aGlzLCBpKSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQZGZKc0RvY3VtZW50IH07IiwiaW1wb3J0IHsgUHJvcGVydHkgfSBmcm9tIFwiLi4vdXRpbHMvcHJvcGVydHlcIjtcclxuaW1wb3J0IHsgRXhlY3V0YWJsZVN0YXRlIH0gZnJvbSBcIi4uL3V0aWxzL2V4ZWN1dGFibGUtc3RhdGVcIjtcclxuXHJcbmNsYXNzIFBsYXliYWNrTW9kZWwge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF9lbGVtZW50QSA9IG5ldyBQcm9wZXJ0eTxIVE1MRWxlbWVudD4oKTtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBfc3RhdGUgPSBuZXcgUHJvcGVydHk8RXhlY3V0YWJsZVN0YXRlPigpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF9yYWlzZWRIYW5kID0gbmV3IFByb3BlcnR5PGJvb2xlYW4+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3Nob3dRdWl6ID0gbmV3IFByb3BlcnR5PGJvb2xlYW4+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3Nob3dDaGF0ID0gbmV3IFByb3BlcnR5PGJvb2xlYW4+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3Nob3dRdWl6QWN0aXZlID0gbmV3IFByb3BlcnR5PGJvb2xlYW4+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3dlYnJ0Y0Nvbm5lY3RlZCA9IG5ldyBQcm9wZXJ0eTxib29sZWFuPigpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF93ZWJydGNQdWJsaXNoZXJDb25uZWN0ZWQgPSBuZXcgUHJvcGVydHk8Ym9vbGVhbj4oKTtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBfdmlkZW9BdmFpbGFibGUgPSBuZXcgUHJvcGVydHk8Ym9vbGVhbj4oKTtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBfbWFpblZpZGVvQXZhaWxhYmxlID0gbmV3IFByb3BlcnR5PGJvb2xlYW4+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX2xvY2FsVmlkZW9BdmFpbGFibGUgPSBuZXcgUHJvcGVydHk8Ym9vbGVhbj4oKTtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBfc2VsZWN0ZWRQYWdlSW5kZXggPSBuZXcgUHJvcGVydHk8bnVtYmVyPigpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF9kdXJhdGlvbiA9IG5ldyBQcm9wZXJ0eTxudW1iZXI+KCk7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3RpbWUgPSBuZXcgUHJvcGVydHk8bnVtYmVyPigpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF92b2x1bWUgPSBuZXcgUHJvcGVydHk8bnVtYmVyPigpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF9tdXRlZCA9IG5ldyBQcm9wZXJ0eTxib29sZWFuPigpO1xyXG5cclxuXHJcblx0Z2V0IGVsZW1lbnRBUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fZWxlbWVudEE7XHJcblx0fVxyXG5cclxuXHRnZXQgc2VsZWN0ZWRQYWdlSW5kZXhQcm9wZXJ0eSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RlZFBhZ2VJbmRleDtcclxuXHR9XHJcblxyXG5cdGdldCBzZWxlY3RlZFBhZ2VJbmRleCgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RlZFBhZ2VJbmRleC52YWx1ZTtcclxuXHR9XHJcblxyXG5cdHNldCBzZWxlY3RlZFBhZ2VJbmRleChpbmRleDogbnVtYmVyKSB7XHJcblx0XHR0aGlzLl9zZWxlY3RlZFBhZ2VJbmRleC52YWx1ZSA9IGluZGV4O1xyXG5cdH1cclxuXHJcblx0Z2V0IHN0YXRlUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGU7XHJcblx0fVxyXG5cclxuXHRnZXQgcmFpc2VkSGFuZFByb3BlcnR5KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3JhaXNlZEhhbmQ7XHJcblx0fVxyXG5cclxuXHRzZXQgcmFpc2VkSGFuZChyYWlzZWQ6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuX3JhaXNlZEhhbmQudmFsdWUgPSByYWlzZWQ7XHJcblx0fVxyXG5cclxuXHRnZXQgc2hvd0NoYXRQcm9wZXJ0eSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zaG93Q2hhdDtcclxuXHR9XHJcblxyXG5cdGdldCBzaG93Q2hhdCgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zaG93Q2hhdC52YWx1ZTtcclxuXHR9XHJcblxyXG5cdHNldCBzaG93Q2hhdChzaG93OiBib29sZWFuKSB7XHJcblx0XHR0aGlzLl9zaG93Q2hhdC52YWx1ZSA9IHNob3c7XHJcblx0fVxyXG5cclxuXHRnZXQgc2hvd1F1aXpQcm9wZXJ0eSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zaG93UXVpejtcclxuXHR9XHJcblxyXG5cdHNldCBzaG93UXVpeihzaG93OiBib29sZWFuKSB7XHJcblx0XHR0aGlzLl9zaG93UXVpei52YWx1ZSA9IHNob3c7XHJcblx0fVxyXG5cclxuXHRnZXQgc2hvd1F1aXpBY3RpdmVQcm9wZXJ0eSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zaG93UXVpekFjdGl2ZTtcclxuXHR9XHJcblxyXG5cdHNldCBzaG93UXVpekFjdGl2ZShhY3RpdmU6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuX3Nob3dRdWl6QWN0aXZlLnZhbHVlID0gYWN0aXZlO1xyXG5cdH1cclxuXHJcblx0Z2V0IHdlYnJ0Y0Nvbm5lY3RlZFByb3BlcnR5KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3dlYnJ0Y0Nvbm5lY3RlZDtcclxuXHR9XHJcblxyXG5cdHNldCB3ZWJydGNDb25uZWN0ZWQoY29ubmVjdGVkOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLl93ZWJydGNDb25uZWN0ZWQudmFsdWUgPSBjb25uZWN0ZWQ7XHJcblx0fVxyXG5cclxuXHRnZXQgd2VicnRjUHVibGlzaGVyQ29ubmVjdGVkUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fd2VicnRjUHVibGlzaGVyQ29ubmVjdGVkO1xyXG5cdH1cclxuXHJcblx0c2V0IHdlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZChjb25uZWN0ZWQ6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuX3dlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZC52YWx1ZSA9IGNvbm5lY3RlZDtcclxuXHR9XHJcblxyXG5cdGdldCB2aWRlb0F2YWlsYWJsZVByb3BlcnR5KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZpZGVvQXZhaWxhYmxlO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZpZGVvQXZhaWxhYmxlKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZpZGVvQXZhaWxhYmxlLnZhbHVlO1xyXG5cdH1cclxuXHJcblx0c2V0IHZpZGVvQXZhaWxhYmxlKGF2YWlsYWJsZTogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5fdmlkZW9BdmFpbGFibGUudmFsdWUgPSBhdmFpbGFibGU7XHJcblx0fVxyXG5cclxuXHRnZXQgbWFpblZpZGVvQXZhaWxhYmxlUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fbWFpblZpZGVvQXZhaWxhYmxlO1xyXG5cdH1cclxuXHJcblx0Z2V0IG1haW5WaWRlb0F2YWlsYWJsZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9tYWluVmlkZW9BdmFpbGFibGUudmFsdWU7XHJcblx0fVxyXG5cclxuXHRzZXQgbWFpblZpZGVvQXZhaWxhYmxlKGF2YWlsYWJsZTogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5fbWFpblZpZGVvQXZhaWxhYmxlLnZhbHVlID0gYXZhaWxhYmxlO1xyXG5cdH1cclxuXHJcblx0Z2V0IGxvY2FsVmlkZW9BdmFpbGFibGVQcm9wZXJ0eSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9sb2NhbFZpZGVvQXZhaWxhYmxlO1xyXG5cdH1cclxuXHJcblx0Z2V0IGxvY2FsVmlkZW9BdmFpbGFibGUoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fbG9jYWxWaWRlb0F2YWlsYWJsZS52YWx1ZTtcclxuXHR9XHJcblxyXG5cdHNldCBsb2NhbFZpZGVvQXZhaWxhYmxlKGF2YWlsYWJsZTogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5fbG9jYWxWaWRlb0F2YWlsYWJsZS52YWx1ZSA9IGF2YWlsYWJsZTtcclxuXHR9XHJcblxyXG5cdGdldFN0YXRlKCk6IEV4ZWN1dGFibGVTdGF0ZSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGUudmFsdWU7XHJcblx0fVxyXG5cclxuXHRzZXRTdGF0ZShzdGF0ZTogRXhlY3V0YWJsZVN0YXRlKTogdm9pZCB7XHJcblx0XHR0aGlzLl9zdGF0ZS52YWx1ZSA9IHN0YXRlO1xyXG5cdH1cclxuXHJcblx0Z2V0IGR1cmF0aW9uUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fZHVyYXRpb247XHJcblx0fVxyXG5cclxuXHRnZXREdXJhdGlvbigpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2R1cmF0aW9uLnZhbHVlO1xyXG5cdH1cclxuXHJcblx0c2V0RHVyYXRpb24oZHVyYXRpb246IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5fZHVyYXRpb24udmFsdWUgPSBkdXJhdGlvbjtcclxuXHR9XHJcblxyXG5cdGdldCB0aW1lUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fdGltZTtcclxuXHR9XHJcblxyXG5cdGdldFRpbWUoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLl90aW1lLnZhbHVlO1xyXG5cdH1cclxuXHJcblx0c2V0VGltZSh0aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMuX3RpbWUudmFsdWUgPSB0aW1lO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZvbHVtZVByb3BlcnR5KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZvbHVtZTtcclxuXHR9XHJcblxyXG5cdGdldFZvbHVtZSgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZvbHVtZS52YWx1ZTtcclxuXHR9XHJcblxyXG5cdHNldFZvbHVtZSh2b2x1bWU6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5fdm9sdW1lLnZhbHVlID0gdm9sdW1lO1xyXG5cdH1cclxuXHJcblx0Z2V0IG11dGVkUHJvcGVydHkoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fbXV0ZWQ7XHJcblx0fVxyXG5cclxuXHRnZXRNdXRlZCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLl9tdXRlZC52YWx1ZTtcclxuXHR9XHJcblxyXG5cdHNldE11dGVkKG11dGVkOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLl9tdXRlZC52YWx1ZSA9IG11dGVkO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGxheWJhY2tNb2RlbCB9OyIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuLi9hY3Rpb24vYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBSZWNvcmRlZFBhZ2Uge1xyXG5cclxuXHRzdGF0aWNBY3Rpb25zOiBBY3Rpb25bXSA9IFtdO1xyXG5cclxuXHRwbGF5YmFja0FjdGlvbnM6IEFjdGlvbltdID0gW107XHJcblxyXG5cdHBhZ2VOdW1iZXI6IG51bWJlcjtcclxuXHJcblx0dGltZXN0YW1wOiBudW1iZXI7XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBSZWNvcmRlZFBhZ2UgfTsiLCJpbXBvcnQgeyBGb3JtU2hhcGUgfSBmcm9tIFwiLi9mb3JtLnNoYXBlXCI7XHJcblxyXG5jbGFzcyBBcnJvd1NoYXBlIGV4dGVuZHMgRm9ybVNoYXBlIHtcclxuXHJcblx0Y2xvbmUoKTogQXJyb3dTaGFwZSB7XHJcblx0XHRjb25zdCBzaGFwZSA9IG5ldyBBcnJvd1NoYXBlKHRoaXMuaGFuZGxlLCB0aGlzLmJydXNoLmNsb25lKCkpO1xyXG5cdFx0c2hhcGUuYm91bmRzLnNldCh0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55LCB0aGlzLmJvdW5kcy53aWR0aCwgdGhpcy5ib3VuZHMuaGVpZ2h0KTtcclxuXHRcdHNoYXBlLnNldEtleUV2ZW50KHRoaXMuZ2V0S2V5RXZlbnQoKSk7XHJcblx0XHRzaGFwZS5zZXRTZWxlY3RlZCh0aGlzLmlzU2VsZWN0ZWQoKSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpIHtcclxuXHRcdFx0c2hhcGUucG9pbnRzLnB1c2gocG9pbnQuY2xvbmUoKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNoYXBlO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IEFycm93U2hhcGUgfTsiLCJpbXBvcnQgeyBGb3JtU2hhcGUgfSBmcm9tIFwiLi9mb3JtLnNoYXBlXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IEVsbGlwc2UgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvZWxsaXBzZVwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcblxyXG5jbGFzcyBFbGxpcHNlU2hhcGUgZXh0ZW5kcyBGb3JtU2hhcGUge1xyXG5cclxuXHRjb250YWlucyhwb2ludDogUG9pbnQpOiBib29sZWFuIHtcclxuXHRcdGlmICh0aGlzLnBvaW50cy5sZW5ndGggPCAyKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBlbGxpcHNlID0gbmV3IEVsbGlwc2UodGhpcy5ib3VuZHMueCwgdGhpcy5ib3VuZHMueSwgdGhpcy5ib3VuZHMud2lkdGgsIHRoaXMuYm91bmRzLmhlaWdodCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuZmlsbCgpKSB7XHJcblx0XHRcdHJldHVybiBlbGxpcHNlLmNvbnRhaW5zUG9pbnQocG9pbnQueCwgcG9pbnQueSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGVsbGlwc2UuaW50ZXJzZWN0c0xpbmUocG9pbnQueCwgcG9pbnQueSwgcG9pbnQueCArIHRoaXMuYnJ1c2gud2lkdGgsIHBvaW50LnkgKyB0aGlzLmJydXNoLndpZHRoKTtcclxuXHR9XHJcblxyXG5cdGludGVyc2VjdHMocmVjdDogUmVjdGFuZ2xlKTogYm9vbGVhbiB7XHJcblx0XHRpZiAodGhpcy5wb2ludHMubGVuZ3RoIDwgMikge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZWxsaXBzZSA9IG5ldyBFbGxpcHNlKHRoaXMuYm91bmRzLngsIHRoaXMuYm91bmRzLnksIHRoaXMuYm91bmRzLndpZHRoLCB0aGlzLmJvdW5kcy5oZWlnaHQpO1xyXG5cclxuXHRcdHJldHVybiBlbGxpcHNlLmludGVyc2VjdHNSZWN0KHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XHJcblx0fVxyXG5cclxuXHRjbG9uZSgpOiBFbGxpcHNlU2hhcGUge1xyXG5cdFx0Y29uc3Qgc2hhcGUgPSBuZXcgRWxsaXBzZVNoYXBlKHRoaXMuaGFuZGxlLCB0aGlzLmJydXNoLmNsb25lKCkpO1xyXG5cdFx0c2hhcGUuYm91bmRzLnNldCh0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55LCB0aGlzLmJvdW5kcy53aWR0aCwgdGhpcy5ib3VuZHMuaGVpZ2h0KTtcclxuXHRcdHNoYXBlLnNldEtleUV2ZW50KHRoaXMuZ2V0S2V5RXZlbnQoKSk7XHJcblx0XHRzaGFwZS5zZXRTZWxlY3RlZCh0aGlzLmlzU2VsZWN0ZWQoKSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpIHtcclxuXHRcdFx0c2hhcGUucG9pbnRzLnB1c2gocG9pbnQuY2xvbmUoKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNoYXBlO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRWxsaXBzZVNoYXBlIH07IiwiaW1wb3J0IHsgU3Ryb2tlU2hhcGUgfSBmcm9tIFwiLi9zdHJva2Uuc2hhcGVcIjtcclxuaW1wb3J0IHsgUGVuUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGVuLXBvaW50XCI7XHJcbmltcG9ydCB7IFNoYXBlRXZlbnQgfSBmcm9tIFwiLi9zaGFwZS1ldmVudFwiO1xyXG5cclxuY2xhc3MgRm9ybVNoYXBlIGV4dGVuZHMgU3Ryb2tlU2hhcGUge1xyXG5cclxuXHRzZXRQMChwb2ludDogUGVuUG9pbnQpOiBib29sZWFuIHtcclxuXHRcdGlmICh0aGlzLnBvaW50cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGxldCBwcmV2ID0gdGhpcy5wb2ludHNbMF07XHJcblxyXG5cdFx0XHRpZiAocG9pbnQuZXF1YWxzKHByZXYpKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnBvaW50c1swXSA9IHBvaW50O1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMucG9pbnRzLnB1c2gocG9pbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0c2V0UDEocG9pbnQ6IFBlblBvaW50KTogYm9vbGVhbiB7XHJcblx0XHRpZiAodGhpcy5wb2ludHMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRsZXQgcHJldiA9IHRoaXMucG9pbnRzWzFdO1xyXG5cclxuXHRcdFx0aWYgKHBvaW50LmVxdWFscyhwcmV2KSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5wb2ludHNbMV0gPSBwb2ludDtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLnBvaW50cy5wdXNoKHBvaW50KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHVwZGF0ZUJvdW5kcygpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnBvaW50cy5sZW5ndGggPCAyKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBwMCA9IHRoaXMucG9pbnRzWzBdO1xyXG5cdFx0Y29uc3QgcDEgPSB0aGlzLnBvaW50c1sxXTtcclxuXHJcblx0XHRpZiAocDEueCA8IHAwLngpIHtcclxuXHRcdFx0dGhpcy5ib3VuZHMueCA9IHAxLng7XHJcblx0XHRcdHRoaXMuYm91bmRzLndpZHRoID0gcDAueCAtIHAxLng7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5ib3VuZHMueCA9IHAwLng7XHJcblx0XHRcdHRoaXMuYm91bmRzLndpZHRoID0gcDEueCAtIHAwLng7XHJcblx0XHR9XHJcblx0XHRpZiAocDEueSA8IHAwLnkpIHtcclxuXHRcdFx0dGhpcy5ib3VuZHMueSA9IHAxLnk7XHJcblx0XHRcdHRoaXMuYm91bmRzLmhlaWdodCA9IHAwLnkgLSBwMS55O1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuYm91bmRzLnkgPSBwMC55O1xyXG5cdFx0XHR0aGlzLmJvdW5kcy5oZWlnaHQgPSBwMS55IC0gcDAueTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEluZGljYXRlcyB3aGV0aGVyIHRvIGZpbGwgdGhlIGludGVyaW9yIG9mIHRoZSBzaGFwZS5cclxuXHQgKi9cclxuXHRwcm90ZWN0ZWQgZmlsbCgpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGtleUV2ZW50ID0gdGhpcy5nZXRLZXlFdmVudCgpO1xyXG5cclxuXHRcdHJldHVybiBrZXlFdmVudCAhPSBudWxsICYmIGtleUV2ZW50LmFsdEtleTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBGb3JtU2hhcGUgfTsiLCJpbXBvcnQgeyBUeXBlc2V0dGluZ1NoYXBlIH0gZnJvbSBcIi4vdHlwZXNldHRpbmcuc2hhcGVcIjtcclxuaW1wb3J0IHsgU2hhcGVFdmVudCB9IGZyb20gXCIuL3NoYXBlLWV2ZW50XCI7XHJcbmltcG9ydCB7IEZvbnQgfSBmcm9tIFwiLi4vLi4vcGFpbnQvZm9udFwiO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wb2ludFwiO1xyXG5cclxuY2xhc3MgTGF0ZXhTaGFwZSBleHRlbmRzIFR5cGVzZXR0aW5nU2hhcGUge1xyXG5cclxuXHRwcml2YXRlIGZvbnQ6IEZvbnQ7XHJcblxyXG5cclxuXHRzZXRGb250KGZvbnQ6IEZvbnQpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmZvbnQgJiYgdGhpcy5mb250LmVxdWFscyhmb250KSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5mb250ID0gZm9udDtcclxuXHJcblx0XHR0aGlzLmZpcmVTaGFwZUV2ZW50KG5ldyBTaGFwZUV2ZW50KHRoaXMsIHRoaXMuYm91bmRzKSk7XHJcblx0fVxyXG5cclxuXHRnZXRGb250KCk6IEZvbnQge1xyXG5cdFx0cmV0dXJuIHRoaXMuZm9udDtcclxuXHR9XHJcblxyXG5cdGNsb25lKCk6IExhdGV4U2hhcGUge1xyXG5cdFx0Y29uc3Qgc2hhcGUgPSBuZXcgTGF0ZXhTaGFwZSh0aGlzLmhhbmRsZSk7XHJcblx0XHRzaGFwZS5zZXRMb2NhdGlvbihuZXcgUG9pbnQodGhpcy5ib3VuZHMueCwgdGhpcy5ib3VuZHMueSkpO1xyXG5cdFx0c2hhcGUuc2V0Rm9udCh0aGlzLmZvbnQpO1xyXG5cdFx0c2hhcGUuc2V0VGV4dENvbG9yKHRoaXMuZ2V0VGV4dENvbG9yKCkpO1xyXG5cdFx0c2hhcGUuc2V0VGV4dEF0dHJpYnV0ZXMobmV3IE1hcCh0aGlzLmdldFRleHRBdHRyaWJ1dGVzKCkpKTtcclxuXHJcblx0XHRyZXR1cm4gc2hhcGU7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBMYXRleFNoYXBlIH07IiwiaW1wb3J0IHsgRm9ybVNoYXBlIH0gZnJvbSBcIi4vZm9ybS5zaGFwZVwiO1xyXG5cclxuY2xhc3MgTGluZVNoYXBlIGV4dGVuZHMgRm9ybVNoYXBlIHtcclxuXHJcblx0Y2xvbmUoKTogTGluZVNoYXBlIHtcclxuXHRcdGNvbnN0IHNoYXBlID0gbmV3IExpbmVTaGFwZSh0aGlzLmhhbmRsZSwgdGhpcy5icnVzaC5jbG9uZSgpKTtcclxuXHRcdHNoYXBlLmJvdW5kcy5zZXQodGhpcy5ib3VuZHMueCwgdGhpcy5ib3VuZHMueSwgdGhpcy5ib3VuZHMud2lkdGgsIHRoaXMuYm91bmRzLmhlaWdodCk7XHJcblx0XHRzaGFwZS5zZXRLZXlFdmVudCh0aGlzLmdldEtleUV2ZW50KCkpO1xyXG5cdFx0c2hhcGUuc2V0U2VsZWN0ZWQodGhpcy5pc1NlbGVjdGVkKCkpO1xyXG5cclxuXHRcdGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKSB7XHJcblx0XHRcdHNoYXBlLnBvaW50cy5wdXNoKHBvaW50LmNsb25lKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzaGFwZTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBMaW5lU2hhcGUgfTsiLCJpbXBvcnQgeyBTdHJva2VTaGFwZSB9IGZyb20gXCIuL3N0cm9rZS5zaGFwZVwiO1xyXG5pbXBvcnQgeyBQZW5TdHJva2UgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGVuLXN0cm9rZVwiO1xyXG5pbXBvcnQgeyBCcnVzaCB9IGZyb20gXCIuLi8uLi9wYWludC9icnVzaFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgU2hhcGVFdmVudCB9IGZyb20gXCIuL3NoYXBlLWV2ZW50XCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuXHJcbmNsYXNzIFBlblNoYXBlIGV4dGVuZHMgU3Ryb2tlU2hhcGUge1xyXG5cclxuXHRwcml2YXRlIHN0cm9rZTogUGVuU3Ryb2tlO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3Ioc2hhcGVIYW5kbGU6IG51bWJlciwgYnJ1c2g6IEJydXNoKSB7XHJcblx0XHRzdXBlcihzaGFwZUhhbmRsZSwgYnJ1c2gpO1xyXG5cclxuXHRcdHRoaXMuc3Ryb2tlID0gbmV3IFBlblN0cm9rZShicnVzaC53aWR0aCk7XHJcblx0fVxyXG5cclxuXHRhZGRQb2ludChwb2ludDogUGVuUG9pbnQpOiBib29sZWFuIHtcclxuXHRcdC8vIEtlZXAgb25seSBvbmUgcG9pbnQgYXQgYSB0aW1lLlxyXG5cdFx0aWYgKHRoaXMucG9pbnRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgcHJldiA9IHRoaXMucG9pbnRzWzBdO1xyXG5cclxuXHRcdFx0aWYgKHBvaW50LmVxdWFscyhwcmV2KSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5wb2ludHNbMF0gPSBwb2ludDtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLnBvaW50cy5wdXNoKHBvaW50KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnN0cm9rZS5hZGRQb2ludChwb2ludCk7XHJcblxyXG5cdFx0dGhpcy51cGRhdGVCb3VuZHMoKTtcclxuXHRcdHRoaXMuZmlyZVNoYXBlRXZlbnQobmV3IFNoYXBlRXZlbnQodGhpcywgdGhpcy5ib3VuZHMpKTtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGNvbnRhaW5zKHBvaW50OiBQZW5Qb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuc3Ryb2tlLmludGVyc2VjdHMobmV3IFJlY3RhbmdsZShwb2ludC54LCBwb2ludC55LCBwb2ludC54LCBwb2ludC55KSk7XHJcblx0fVxyXG5cclxuXHRpbnRlcnNlY3RzKHJlY3Q6IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuc3Ryb2tlLmludGVyc2VjdHMocmVjdCk7XHJcblx0fVxyXG5cclxuXHRnZXRQZW5TdHJva2UoKTogUGVuU3Ryb2tlIHtcclxuXHRcdHJldHVybiB0aGlzLnN0cm9rZTtcclxuXHR9XHJcblxyXG5cdG1vdmVCeURlbHRhKGRlbHRhOiBQb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zdHJva2UubW92ZUJ5RGVsdGEoZGVsdGEpO1xyXG5cclxuXHRcdHRoaXMudXBkYXRlQm91bmRzQnlEZWx0YShkZWx0YSk7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cdH1cclxuXHJcblx0Y2xvbmUoKTogUGVuU2hhcGUge1xyXG5cdFx0Y29uc3Qgc2hhcGUgPSBuZXcgUGVuU2hhcGUodGhpcy5oYW5kbGUsIHRoaXMuYnJ1c2guY2xvbmUoKSk7XHJcblx0XHRzaGFwZS5zdHJva2UgPSB0aGlzLnN0cm9rZS5jbG9uZSgpO1xyXG5cdFx0c2hhcGUuYm91bmRzLnNldCh0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55LCB0aGlzLmJvdW5kcy53aWR0aCwgdGhpcy5ib3VuZHMuaGVpZ2h0KTtcclxuXHRcdHNoYXBlLnNldEtleUV2ZW50KHRoaXMuZ2V0S2V5RXZlbnQoKSk7XHJcblx0XHRzaGFwZS5zZXRTZWxlY3RlZCh0aGlzLmlzU2VsZWN0ZWQoKSk7XHJcblxyXG5cdFx0cmV0dXJuIHNoYXBlO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGVuU2hhcGUgfTsiLCJpbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgU3Ryb2tlU2hhcGUgfSBmcm9tIFwiLi9zdHJva2Uuc2hhcGVcIjtcclxuaW1wb3J0IHsgU2hhcGVFdmVudCB9IGZyb20gXCIuL3NoYXBlLWV2ZW50XCI7XHJcblxyXG5jbGFzcyBQb2ludGVyU2hhcGUgZXh0ZW5kcyBTdHJva2VTaGFwZSB7XHJcblxyXG5cdGFkZFBvaW50KHBvaW50OiBQZW5Qb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gS2VlcCBvbmx5IG9uZSBwb2ludCBhdCBhIHRpbWUuXHJcblx0XHRpZiAodGhpcy5wb2ludHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRsZXQgcHJldiA9IHRoaXMucG9pbnRzWzBdO1xyXG5cclxuXHRcdFx0aWYgKHBvaW50LmVxdWFscyhwcmV2KSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5wb2ludHNbMF0gPSBwb2ludDtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLnBvaW50cy5wdXNoKHBvaW50KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHVwZGF0ZUJvdW5kcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHAwID0gdGhpcy5wb2ludHNbMF07XHJcblx0XHRjb25zdCBkID0gdGhpcy5icnVzaC53aWR0aDtcclxuXHJcblx0XHR0aGlzLmJvdW5kcy5zZXQocDAueCAtIGQsIHAwLnkgLSBkLCBwMC54ICsgZCAqIDIsIHAwLnkgKyBkICogMik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQb2ludGVyU2hhcGUgfTsiLCJpbXBvcnQgeyBGb3JtU2hhcGUgfSBmcm9tIFwiLi9mb3JtLnNoYXBlXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9saW5lXCI7XHJcblxyXG5jbGFzcyBSZWN0YW5nbGVTaGFwZSBleHRlbmRzIEZvcm1TaGFwZSB7XHJcblxyXG5cdGNvbnRhaW5zKHBvaW50OiBQb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gSGFuZGxlIHNpbXBsZSBjYXNlcy5cclxuXHRcdGlmICh0aGlzLnBvaW50cy5sZW5ndGggPCAyKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5maWxsKCkpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuYm91bmRzLmNvbnRhaW5zUG9pbnQocG9pbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGRlbHRhID0gdGhpcy5icnVzaC53aWR0aDtcclxuXHJcblx0XHRsZXQgeDEgPSB0aGlzLmJvdW5kcy54O1xyXG5cdFx0bGV0IHkxID0gdGhpcy5ib3VuZHMueTtcclxuXHRcdGxldCB4MiA9IHRoaXMuYm91bmRzLnggKyB0aGlzLmJvdW5kcy53aWR0aDtcclxuXHRcdGxldCB5MiA9IHRoaXMuYm91bmRzLnk7XHJcblxyXG5cdFx0aWYgKHRoaXMuaW50ZXJzZWN0c1NlZ21lbnQoZGVsdGEsIHgxLCB5MSwgeDIsIHkyLCBwb2ludCkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0eDEgPSB0aGlzLmJvdW5kcy54ICsgdGhpcy5ib3VuZHMud2lkdGg7XHJcblx0XHR5MSA9IHRoaXMuYm91bmRzLnk7XHJcblx0XHR4MiA9IHRoaXMuYm91bmRzLnggKyB0aGlzLmJvdW5kcy53aWR0aDtcclxuXHRcdHkyID0gdGhpcy5ib3VuZHMueSArIHRoaXMuYm91bmRzLmhlaWdodDtcclxuXHJcblx0XHRpZiAodGhpcy5pbnRlcnNlY3RzU2VnbWVudChkZWx0YSwgeDEsIHkxLCB4MiwgeTIsIHBvaW50KSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHR4MSA9IHRoaXMuYm91bmRzLnggKyB0aGlzLmJvdW5kcy53aWR0aDtcclxuXHRcdHkxID0gdGhpcy5ib3VuZHMueSArIHRoaXMuYm91bmRzLmhlaWdodDtcclxuXHRcdHgyID0gdGhpcy5ib3VuZHMueDtcclxuXHRcdHkyID0gdGhpcy5ib3VuZHMueSArIHRoaXMuYm91bmRzLmhlaWdodDtcclxuXHJcblx0XHRpZiAodGhpcy5pbnRlcnNlY3RzU2VnbWVudChkZWx0YSwgeDEsIHkxLCB4MiwgeTIsIHBvaW50KSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHR4MSA9IHRoaXMuYm91bmRzLng7XHJcblx0XHR5MSA9IHRoaXMuYm91bmRzLnk7XHJcblx0XHR4MiA9IHRoaXMuYm91bmRzLng7XHJcblx0XHR5MiA9IHRoaXMuYm91bmRzLnkgKyB0aGlzLmJvdW5kcy5oZWlnaHQ7XHJcblxyXG5cdFx0aWYgKHRoaXMuaW50ZXJzZWN0c1NlZ21lbnQoZGVsdGEsIHgxLCB5MSwgeDIsIHkyLCBwb2ludCkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0aW50ZXJzZWN0cyhyZWN0OiBSZWN0YW5nbGUpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmJvdW5kcy5pbnRlcnNlY3Rpb24ocmVjdCkgIT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdGNsb25lKCk6IFJlY3RhbmdsZVNoYXBlIHtcclxuXHRcdGNvbnN0IHNoYXBlID0gbmV3IFJlY3RhbmdsZVNoYXBlKHRoaXMuaGFuZGxlLCB0aGlzLmJydXNoLmNsb25lKCkpO1xyXG5cdFx0c2hhcGUuYm91bmRzLnNldCh0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55LCB0aGlzLmJvdW5kcy53aWR0aCwgdGhpcy5ib3VuZHMuaGVpZ2h0KTtcclxuXHRcdHNoYXBlLnNldEtleUV2ZW50KHRoaXMuZ2V0S2V5RXZlbnQoKSk7XHJcblx0XHRzaGFwZS5zZXRTZWxlY3RlZCh0aGlzLmlzU2VsZWN0ZWQoKSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpIHtcclxuXHRcdFx0c2hhcGUucG9pbnRzLnB1c2gocG9pbnQuY2xvbmUoKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHNoYXBlO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBpbnRlcnNlY3RzU2VnbWVudChkZWx0YTogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCBwOiBQb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0bGV0IHgzID0gcC54ICsgZGVsdGE7XHJcblx0XHRsZXQgeTMgPSBwLnkgKyBkZWx0YTtcclxuXHRcdGxldCB4NCA9IHAueCAtIGRlbHRhO1xyXG5cdFx0bGV0IHk0ID0gcC55IC0gZGVsdGE7XHJcblxyXG5cdFx0aWYgKExpbmUuaW50ZXJzZWN0cyh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHgzID0gcC54IC0gZGVsdGE7XHJcblx0XHR5MyA9IHAueSArIGRlbHRhO1xyXG5cdFx0eDQgPSBwLnggKyBkZWx0YTtcclxuXHRcdHk0ID0gcC55IC0gZGVsdGE7XHJcblxyXG5cdFx0aWYgKExpbmUuaW50ZXJzZWN0cyh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFJlY3RhbmdsZVNoYXBlIH07IiwiaW1wb3J0IHsgRm9ybVNoYXBlIH0gZnJvbSBcIi4vZm9ybS5zaGFwZVwiO1xyXG5cclxuY2xhc3MgU2VsZWN0U2hhcGUgZXh0ZW5kcyBGb3JtU2hhcGUge1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHN1cGVyKDAsIG51bGwpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFNlbGVjdFNoYXBlIH07IiwiaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi9zaGFwZVwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcblxyXG5jbGFzcyBTaGFwZUV2ZW50IHtcclxuXHJcblx0cHJpdmF0ZSBfc2hhcGU6IFNoYXBlO1xyXG5cclxuXHRwcml2YXRlIF9kaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3Ioc2hhcGU6IFNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKSB7XHJcblx0XHR0aGlzLl9zaGFwZSA9IHNoYXBlO1xyXG5cdFx0dGhpcy5fZGlydHlSZWdpb24gPSBkaXJ0eVJlZ2lvbjtcclxuXHR9XHJcblxyXG5cdGdldCBzaGFwZSgpOiBTaGFwZSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2hhcGU7XHJcblx0fVxyXG5cclxuXHRnZXQgZGlydHlSZWdpb24oKTogUmVjdGFuZ2xlIHtcclxuXHRcdHJldHVybiB0aGlzLl9kaXJ0eVJlZ2lvbjtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFNoYXBlRXZlbnQgfTsiLCJpbXBvcnQgeyBTaGFwZUV2ZW50IH0gZnJvbSBcIi4vc2hhcGUtZXZlbnRcIjtcclxuaW1wb3J0IHsgUGVuUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGVuLXBvaW50XCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgVHlwZWRFdmVudCwgTGlzdGVuZXIsIERpc3Bvc2FibGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZXZlbnQtbGlzdGVuZXJcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIFNoYXBlIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBfaGFuZGxlOiBudW1iZXI7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3BvaW50czogUGVuUG9pbnRbXSA9IFtdO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF9ib3VuZHM6IFJlY3RhbmdsZSA9IFJlY3RhbmdsZS5lbXB0eSgpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGNoYW5nZUV2ZW50ID0gbmV3IFR5cGVkRXZlbnQ8U2hhcGVFdmVudD4oKTtcclxuXHJcblx0cHJpdmF0ZSBzZWxlY3RlZDogYm9vbGVhbjtcclxuXHJcblx0cHJpdmF0ZSBrZXlFdmVudDogS2V5Ym9hcmRFdmVudDtcclxuXHJcblxyXG5cdHByb3RlY3RlZCBhYnN0cmFjdCB1cGRhdGVCb3VuZHMoKTogdm9pZDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGhhbmRsZTogbnVtYmVyKSB7XHJcblx0XHR0aGlzLl9oYW5kbGUgPSBoYW5kbGU7XHJcblx0fVxyXG5cclxuXHRnZXQgaGFuZGxlKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy5faGFuZGxlO1xyXG5cdH1cclxuXHJcblx0YWRkUG9pbnQocG9pbnQ6IFBlblBvaW50KTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBjb3VudCA9IHRoaXMuX3BvaW50cy5sZW5ndGg7XHJcblx0XHRsZXQgbGFzdCA9IG51bGw7XHJcblxyXG5cdFx0aWYgKGNvdW50ID4gMCkge1xyXG5cdFx0XHRsYXN0ID0gdGhpcy5fcG9pbnRzW2NvdW50IC0gMV07XHJcblx0XHR9XHJcblx0XHRpZiAocG9pbnQuZXF1YWxzKGxhc3QpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9wb2ludHMucHVzaChwb2ludCk7XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRnZXQgcG9pbnRzKCk6IFBlblBvaW50W10ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3BvaW50cztcclxuXHR9XHJcblxyXG5cdGNvbnRhaW5zKHBvaW50OiBQZW5Qb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2JvdW5kcy5jb250YWluc1BvaW50KHBvaW50KTtcclxuXHR9XHJcblxyXG5cdGludGVyc2VjdHMocmVjdDogUmVjdGFuZ2xlKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5fYm91bmRzLmludGVyc2VjdGlvbihyZWN0KSAhPSBudWxsO1xyXG5cdH1cclxuXHJcblx0Z2V0IGJvdW5kcygpOiBSZWN0YW5nbGUge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2JvdW5kcztcclxuXHR9XHJcblxyXG5cdGdldEtleUV2ZW50KCk6IEtleWJvYXJkRXZlbnQge1xyXG5cdFx0cmV0dXJuIHRoaXMua2V5RXZlbnQ7XHJcblx0fVxyXG5cclxuXHRzZXRLZXlFdmVudChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5rZXlFdmVudCA9IGV2ZW50O1xyXG5cdH1cclxuXHJcblx0aXNTZWxlY3RlZCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLnNlbGVjdGVkO1xyXG5cdH1cclxuXHJcblx0c2V0U2VsZWN0ZWQoc2VsZWN0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnNlbGVjdGVkID09IHNlbGVjdGVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cdH1cclxuXHJcblx0bW92ZUJ5RGVsdGEoZGVsdGE6IFBvaW50KTogdm9pZCB7XHJcblx0XHRmb3IgKGxldCBwb2ludCBvZiB0aGlzLl9wb2ludHMpIHtcclxuXHRcdFx0cG9pbnQuc3VidHJhY3QoZGVsdGEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudXBkYXRlQm91bmRzQnlEZWx0YShkZWx0YSk7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cdH1cclxuXHJcblx0Y2xvbmUoKTogU2hhcGUge1xyXG5cdFx0cmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcyk7XHJcblx0fVxyXG5cclxuXHRhZGRDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcjogTGlzdGVuZXI8U2hhcGVFdmVudD4pOiBEaXNwb3NhYmxlIHtcclxuXHRcdHJldHVybiB0aGlzLmNoYW5nZUV2ZW50LnN1YnNjcmliZShsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcjogTGlzdGVuZXI8U2hhcGVFdmVudD4pOiB2b2lkIHtcclxuXHRcdHRoaXMuY2hhbmdlRXZlbnQudW5zdWJzY3JpYmUobGlzdGVuZXIpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHVwZGF0ZUJvdW5kc0J5RGVsdGEoZGVsdGE6IFBvaW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmJvdW5kcy54IC09IGRlbHRhLng7XHJcblx0XHR0aGlzLmJvdW5kcy55IC09IGRlbHRhLnk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgZmlyZVNoYXBlRXZlbnQoZXZlbnQ6IFNoYXBlRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2hhbmdlRXZlbnQucHVibGlzaChldmVudCk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTaGFwZSB9OyIsImltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi4vcGFnZVwiO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuL3NoYXBlXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgU2hhcGVFdmVudCB9IGZyb20gXCIuL3NoYXBlLWV2ZW50XCI7XHJcblxyXG5jbGFzcyBTbGlkZVNoYXBlIGV4dGVuZHMgU2hhcGUge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHBhZ2U6IFBhZ2U7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihwYWdlOiBQYWdlKSB7XHJcblx0XHRzdXBlcigwKTtcclxuXHJcblx0XHR0aGlzLnBhZ2UgPSBwYWdlO1xyXG5cclxuXHRcdHRoaXMudXBkYXRlQm91bmRzKCk7XHJcblx0fVxyXG5cclxuXHRnZXRQYWdlKCk6IFBhZ2Uge1xyXG5cdFx0cmV0dXJuIHRoaXMucGFnZTtcclxuXHR9XHJcblxyXG5cdHNldFBhZ2VSZWN0KHJlY3Q6IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuYm91bmRzLmVxdWFscyhyZWN0KSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5ib3VuZHMuc2V0KHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHVwZGF0ZUJvdW5kcygpOiB2b2lkIHtcclxuXHRcdHRoaXMuYm91bmRzLnNldCgwLCAwLCAxLCAxKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFNsaWRlU2hhcGUgfTsiLCJpbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuL3NoYXBlXCI7XHJcbmltcG9ydCB7IFNoYXBlRXZlbnQgfSBmcm9tIFwiLi9zaGFwZS1ldmVudFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgQnJ1c2ggfSBmcm9tIFwiLi4vLi4vcGFpbnQvYnJ1c2hcIjtcclxuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9saW5lXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuXHJcbmNsYXNzIFN0cm9rZVNoYXBlIGV4dGVuZHMgU2hhcGUge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IF9icnVzaDogQnJ1c2g7XHJcblxyXG5cdHByaXZhdGUgbWluUG9pbnQgPSBuZXcgUG9pbnQoMCwgMCk7XHJcblxyXG5cdHByaXZhdGUgbWF4UG9pbnQgPSBuZXcgUG9pbnQoMCwgMCk7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihzaGFwZUhhbmRsZTogbnVtYmVyLCBicnVzaDogQnJ1c2gpIHtcclxuXHRcdHN1cGVyKHNoYXBlSGFuZGxlKTtcclxuXHJcblx0XHR0aGlzLl9icnVzaCA9IGJydXNoO1xyXG5cdH1cclxuXHJcblx0Z2V0IGJydXNoKCk6IEJydXNoIHtcclxuXHRcdHJldHVybiB0aGlzLl9icnVzaDtcclxuXHR9XHJcblxyXG5cdGFkZFBvaW50KHBvaW50OiBQZW5Qb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgYWRkZWQgPSBzdXBlci5hZGRQb2ludChwb2ludCk7XHJcblxyXG5cdFx0aWYgKGFkZGVkKSB7XHJcblx0XHRcdHRoaXMubWluUG9pbnQueCA9IE1hdGgubWluKHRoaXMubWluUG9pbnQueCwgcG9pbnQueCk7XHJcblx0XHRcdHRoaXMubWluUG9pbnQueSA9IE1hdGgubWluKHRoaXMubWluUG9pbnQueSwgcG9pbnQueSk7XHJcblx0XHRcdHRoaXMubWF4UG9pbnQueCA9IE1hdGgubWF4KHRoaXMubWF4UG9pbnQueCwgcG9pbnQueCk7XHJcblx0XHRcdHRoaXMubWF4UG9pbnQueSA9IE1hdGgubWF4KHRoaXMubWF4UG9pbnQueSwgcG9pbnQueSk7XHJcblxyXG5cdFx0XHR0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG5cdFx0XHR0aGlzLmZpcmVTaGFwZUV2ZW50KG5ldyBTaGFwZUV2ZW50KHRoaXMsIHRoaXMuYm91bmRzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGFkZGVkO1xyXG5cdH1cclxuXHJcblx0Y29udGFpbnMocG9pbnQ6IFBlblBvaW50KTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBkZWx0YSA9IHRoaXMuYnJ1c2gud2lkdGggLyAyO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBzaW1wbGUgY2FzZXMuXHJcblx0XHRpZiAodGhpcy5wb2ludHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKHRoaXMucG9pbnRzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5wb2ludHNbMF0uZGlzdGFuY2UocG9pbnQpIDw9IGRlbHRhO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE9uZSBvZiB0aGVzZSBsaW5lcyBtdXN0IGJlIGNyb3NzZWQgYnkgYSBzZWdtZW50IG9mIG91ciBzdHJva2UuXHJcblx0XHRjb25zdCBsMSA9IG5ldyBMaW5lKHBvaW50LnggKyBkZWx0YSwgcG9pbnQueSArIGRlbHRhLCBwb2ludC54IC0gZGVsdGEsIHBvaW50LnkgLSBkZWx0YSk7XHJcblx0XHRjb25zdCBsMiA9IG5ldyBMaW5lKHBvaW50LnggLSBkZWx0YSwgcG9pbnQueSArIGRlbHRhLCBwb2ludC54ICsgZGVsdGEsIHBvaW50LnkgLSBkZWx0YSk7XHJcblxyXG5cdFx0bGV0IGluZGV4ID0gMDtcclxuXHRcdGxldCBwMSA9IHRoaXMucG9pbnRzW2luZGV4KytdO1xyXG5cdFx0bGV0IHAyID0gbnVsbDtcclxuXHRcdGxldCBzZWdtZW50ID0gbnVsbDtcclxuXHJcblx0XHR3aGlsZSAoaW5kZXggPCB0aGlzLnBvaW50cy5sZW5ndGgpIHtcclxuXHRcdFx0cDIgPSB0aGlzLnBvaW50c1tpbmRleCsrXTtcclxuXHRcdFx0c2VnbWVudCA9IG5ldyBMaW5lKHAxLngsIHAxLnksIHAyLngsIHAyLnkpO1xyXG5cclxuXHRcdFx0aWYgKHNlZ21lbnQuaW50ZXJzZWN0cyhsMSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc2VnbWVudC5pbnRlcnNlY3RzKGwyKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwMSA9IHAyO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGludGVyc2VjdHMocmVjdDogUmVjdGFuZ2xlKTogYm9vbGVhbiB7XHJcblx0XHQvLyBIYW5kbGUgc2ltcGxlIGNhc2VzLlxyXG5cdFx0aWYgKHRoaXMucG9pbnRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLnBvaW50cy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0cmV0dXJuIHJlY3QuY29udGFpbnNQb2ludCh0aGlzLnBvaW50c1swXSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGluZGV4ID0gMDtcclxuXHRcdGxldCBwMSA9IHRoaXMucG9pbnRzW2luZGV4KytdO1xyXG5cdFx0bGV0IHAyID0gbnVsbDtcclxuXHJcblx0XHR3aGlsZSAoaW5kZXggPCB0aGlzLnBvaW50cy5sZW5ndGgpIHtcclxuXHRcdFx0cDIgPSB0aGlzLnBvaW50c1tpbmRleCsrXTtcclxuXHJcblx0XHRcdGlmIChyZWN0LmludGVyc2VjdHNMaW5lKHAxLngsIHAxLnksIHAyLngsIHAyLnkpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHAxID0gcDI7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHVwZGF0ZUJvdW5kcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHggPSB0aGlzLm1pblBvaW50Lng7XHJcblx0XHRjb25zdCB5ID0gdGhpcy5taW5Qb2ludC55O1xyXG5cdFx0Y29uc3Qgd2lkdGggPSB0aGlzLm1heFBvaW50LnggLSB0aGlzLm1pblBvaW50Lng7XHJcblx0XHRjb25zdCBoZWlnaHQgPSB0aGlzLm1heFBvaW50LnkgLSB0aGlzLm1pblBvaW50Lnk7XHJcblxyXG5cdFx0dGhpcy5ib3VuZHMuc2V0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG5cdH1cclxuXHJcblx0Y2xvbmUoKTogU3Ryb2tlU2hhcGUge1xyXG5cdFx0Y29uc3Qgc2hhcGUgPSBuZXcgU3Ryb2tlU2hhcGUodGhpcy5oYW5kbGUsIHRoaXMuYnJ1c2guY2xvbmUoKSk7XHJcblx0XHRzaGFwZS5ib3VuZHMuc2V0KHRoaXMuYm91bmRzLngsIHRoaXMuYm91bmRzLnksIHRoaXMuYm91bmRzLndpZHRoLCB0aGlzLmJvdW5kcy5oZWlnaHQpO1xyXG5cdFx0c2hhcGUuc2V0S2V5RXZlbnQodGhpcy5nZXRLZXlFdmVudCgpKTtcclxuXHRcdHNoYXBlLnNldFNlbGVjdGVkKHRoaXMuaXNTZWxlY3RlZCgpKTtcclxuXHJcblx0XHRmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cykge1xyXG5cdFx0XHRzaGFwZS5wb2ludHMucHVzaChwb2ludC5jbG9uZSgpKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc2hhcGU7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBTdHJva2VTaGFwZSB9OyIsImltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4vc2hhcGVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wb2ludFwiO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi8uLi9wYWludC9jb2xvclwiO1xyXG5pbXBvcnQgeyBTaGFwZUV2ZW50IH0gZnJvbSBcIi4vc2hhcGUtZXZlbnRcIjtcclxuXHJcbmNsYXNzIFRleHRIaWdobGlnaHRTaGFwZSBleHRlbmRzIFNoYXBlIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBjb2xvcjogQ29sb3I7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihzaGFwZUhhbmRsZTogbnVtYmVyLCBjb2xvcjogQ29sb3IpIHtcclxuXHRcdHN1cGVyKHNoYXBlSGFuZGxlKTtcclxuXHJcblx0XHR0aGlzLmNvbG9yID0gY29sb3I7XHJcblx0fVxyXG5cclxuXHRhZGRUZXh0Qm91bmRzKHJlY3Q6IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuYm91bmRzLmlzRW1wdHkoKSkge1xyXG5cdFx0XHR0aGlzLmJvdW5kcy5zZXQocmVjdC54LCByZWN0LnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLmJvdW5kcy51bmlvbihyZWN0KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmZpcmVTaGFwZUV2ZW50KG5ldyBTaGFwZUV2ZW50KHRoaXMsIHRoaXMuYm91bmRzKSk7XHJcblx0fVxyXG5cclxuXHRnZXRDb2xvcigpOiBDb2xvciB7XHJcblx0XHRyZXR1cm4gdGhpcy5jb2xvcjtcclxuXHR9XHJcblxyXG5cdGNvbnRhaW5zKHBvaW50OiBQb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm91bmRzLmNvbnRhaW5zUG9pbnQocG9pbnQpO1xyXG5cdH1cclxuXHJcblx0aW50ZXJzZWN0cyhyZWN0OiBSZWN0YW5nbGUpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmJvdW5kcy5pbnRlcnNlY3Rpb24ocmVjdCkgIT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdGNsb25lKCk6IFRleHRIaWdobGlnaHRTaGFwZSB7XHJcblx0XHRjb25zdCBzaGFwZSA9IG5ldyBUZXh0SGlnaGxpZ2h0U2hhcGUodGhpcy5oYW5kbGUsIHRoaXMuY29sb3IpO1xyXG5cdFx0c2hhcGUuc2V0S2V5RXZlbnQodGhpcy5nZXRLZXlFdmVudCgpKTtcclxuXHJcblx0XHRyZXR1cm4gc2hhcGU7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgdXBkYXRlQm91bmRzKCk6IHZvaWQge1xyXG5cdFx0Ly8gTm8tb3BcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRleHRIaWdobGlnaHRTaGFwZSB9OyIsImltcG9ydCB7IFR5cGVzZXR0aW5nU2hhcGUgfSBmcm9tIFwiLi90eXBlc2V0dGluZy5zaGFwZVwiO1xyXG5pbXBvcnQgeyBTaGFwZUV2ZW50IH0gZnJvbSBcIi4vc2hhcGUtZXZlbnRcIjtcclxuaW1wb3J0IHsgRm9udCB9IGZyb20gXCIuLi8uLi9wYWludC9mb250XCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3BvaW50XCI7XHJcblxyXG5jbGFzcyBUZXh0U2hhcGUgZXh0ZW5kcyBUeXBlc2V0dGluZ1NoYXBlIHtcclxuXHJcblx0cHJpdmF0ZSBmb250OiBGb250O1xyXG5cclxuXHJcblx0c2V0Rm9udChmb250OiBGb250KTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5mb250ICYmIHRoaXMuZm9udC5lcXVhbHMoZm9udCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZm9udCA9IGZvbnQ7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cdH1cclxuXHJcblx0Z2V0Rm9udCgpOiBGb250IHtcclxuXHRcdHJldHVybiB0aGlzLmZvbnQ7XHJcblx0fVxyXG5cclxuXHRjbG9uZSgpOiBUZXh0U2hhcGUge1xyXG5cdFx0Y29uc3Qgc2hhcGUgPSBuZXcgVGV4dFNoYXBlKHRoaXMuaGFuZGxlKTtcclxuXHRcdHNoYXBlLnNldExvY2F0aW9uKG5ldyBQb2ludCh0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55KSk7XHJcblx0XHRzaGFwZS5zZXRGb250KHRoaXMuZm9udCk7XHJcblx0XHRzaGFwZS5zZXRUZXh0Q29sb3IodGhpcy5nZXRUZXh0Q29sb3IoKSk7XHJcblx0XHRzaGFwZS5zZXRUZXh0QXR0cmlidXRlcyhuZXcgTWFwKHRoaXMuZ2V0VGV4dEF0dHJpYnV0ZXMoKSkpO1xyXG5cclxuXHRcdHJldHVybiBzaGFwZTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRleHRTaGFwZSB9OyIsImltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4vc2hhcGVcIjtcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vLi4vcGFpbnQvY29sb3JcIjtcclxuaW1wb3J0IHsgU2hhcGVFdmVudCB9IGZyb20gXCIuL3NoYXBlLWV2ZW50XCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3BvaW50XCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBUeXBlc2V0dGluZ1NoYXBlIGV4dGVuZHMgU2hhcGUge1xyXG5cclxuXHRwcml2YXRlIHRleHRBdHRyaWJ1dGVzOiBNYXA8c3RyaW5nLCBib29sZWFuPjtcclxuXHJcblx0cHJpdmF0ZSB0ZXh0Q29sb3I6IENvbG9yO1xyXG5cclxuXHRwcml2YXRlIHRleHQ6IHN0cmluZztcclxuXHJcblxyXG5cdHNldFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy50ZXh0ID09PSB0ZXh0KSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnRleHQgPSB0ZXh0O1xyXG5cclxuXHRcdHRoaXMuZmlyZVNoYXBlRXZlbnQobmV3IFNoYXBlRXZlbnQodGhpcywgdGhpcy5ib3VuZHMpKTtcclxuXHR9XHJcblxyXG5cdGdldFRleHQoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLnRleHQ7XHJcblx0fVxyXG5cclxuXHRzZXRUZXh0Q29sb3IoY29sb3I6IENvbG9yKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy50ZXh0Q29sb3IgJiYgdGhpcy50ZXh0Q29sb3IuZXF1YWxzKGNvbG9yKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy50ZXh0Q29sb3IgPSBjb2xvcjtcclxuXHJcblx0XHR0aGlzLmZpcmVTaGFwZUV2ZW50KG5ldyBTaGFwZUV2ZW50KHRoaXMsIHRoaXMuYm91bmRzKSk7XHJcblx0fVxyXG5cclxuXHRnZXRUZXh0Q29sb3IoKTogQ29sb3Ige1xyXG5cdFx0cmV0dXJuIHRoaXMudGV4dENvbG9yO1xyXG5cdH1cclxuXHJcblx0c2V0VGV4dEF0dHJpYnV0ZXMoYXR0cmlidXRlczogTWFwPHN0cmluZywgYm9vbGVhbj4pOiB2b2lkIHtcclxuXHRcdC8vaWYgKHRoaXMudGV4dEF0dHJpYnV0ZXMuZXF1YWxzKGF0dHJpYnV0ZXMpKSB7XHJcblx0XHQvL1x0cmV0dXJuO1xyXG5cdFx0Ly99XHJcblxyXG5cdFx0dGhpcy50ZXh0QXR0cmlidXRlcyA9IG5ldyBNYXAoYXR0cmlidXRlcyk7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cdH1cclxuXHJcblx0Z2V0VGV4dEF0dHJpYnV0ZXMoKTogTWFwPHN0cmluZywgYm9vbGVhbj4ge1xyXG5cdFx0cmV0dXJuIHRoaXMudGV4dEF0dHJpYnV0ZXM7XHJcblx0fVxyXG5cclxuXHRpc1VuZGVybGluZSgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLnRleHRBdHRyaWJ1dGVzLmdldChcInVuZGVybGluZVwiKTtcclxuXHR9XHJcblxyXG5cdGlzU3RyaWtldGhyb3VnaCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLnRleHRBdHRyaWJ1dGVzLmdldChcInN0cmlrZXRocm91Z2hcIik7XHJcblx0fVxyXG5cclxuXHRzZXRMb2NhdGlvbihwb2ludDogUG9pbnQpOiBib29sZWFuIHtcclxuXHRcdGlmICh0aGlzLmJvdW5kcy54ID09PSBwb2ludC54ICYmIHRoaXMuYm91bmRzLnkgPT09IHBvaW50LnkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuYm91bmRzLnggPSBwb2ludC54O1xyXG5cdFx0dGhpcy5ib3VuZHMueSA9IHBvaW50Lnk7XHJcblxyXG5cdFx0dGhpcy5maXJlU2hhcGVFdmVudChuZXcgU2hhcGVFdmVudCh0aGlzLCB0aGlzLmJvdW5kcykpO1xyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIHVwZGF0ZUJvdW5kcygpOiB2b2lkIHtcclxuXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBUeXBlc2V0dGluZ1NoYXBlIH07IiwiaW1wb3J0IHsgRm9ybVNoYXBlIH0gZnJvbSBcIi4vZm9ybS5zaGFwZVwiO1xyXG5cclxuY2xhc3MgWm9vbVNoYXBlIGV4dGVuZHMgRm9ybVNoYXBlIHtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcigwLCBudWxsKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCB1cGRhdGVCb3VuZHMoKTogdm9pZCB7XHJcblx0XHRzdXBlci51cGRhdGVCb3VuZHMoKTtcclxuXHJcblx0XHQvLyBLZWVwIGFzcGVjdCByYXRpbyB3aXRoIHdpZHRoIGJpYXMuXHJcblx0XHRjb25zdCB3aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoO1xyXG5cdFx0Y29uc3QgaGVpZ2h0ID0gTWF0aC5hYnMod2lkdGggKiAzLjAgLyA0LjApICogTWF0aC5zaWduKHRoaXMuYm91bmRzLmhlaWdodCk7XHJcblxyXG5cdFx0dGhpcy5ib3VuZHMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFpvb21TaGFwZSB9OyIsImltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi9wYWdlXCI7XHJcbmltcG9ydCB7IFNsaWRlRG9jdW1lbnQgfSBmcm9tIFwiLi9kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBXaGl0ZWJvYXJkUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL3doaXRlYm9hcmQucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZGltZW5zaW9uXCI7XHJcblxyXG5jbGFzcyBXaGl0ZWJvYXJkRG9jdW1lbnQgZXh0ZW5kcyBTbGlkZURvY3VtZW50IHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSByZW5kZXJlcjogV2hpdGVib2FyZFJlbmRlcmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMucmVuZGVyZXIgPSBuZXcgV2hpdGVib2FyZFJlbmRlcmVyKCk7XHJcblx0XHR0aGlzLmxvYWRQYWdlcygpXHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRQYWdlVGV4dChwYWdlTnVtYmVyOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShcIlwiKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclBhZ2UocGFnZU51bWJlcjogbnVtYmVyLCBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHZpZXdSZWN0OiBSZWN0YW5nbGUsIGRpcnR5UmVnaW9uOiBSZWN0YW5nbGUpOiBQcm9taXNlPENhbnZhc0ltYWdlU291cmNlPiB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJlci5yZW5kZXIoY29udGV4dCwgdmlld1JlY3QsIGRpcnR5UmVnaW9uKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclBhZ2VUZXh0KHBhZ2VOdW1iZXI6IG51bWJlciwgcm9vdDogSFRNTEVsZW1lbnQsIHNpemU6IERpbWVuc2lvbiwgdmlld1JlY3Q6IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0Ly8gTm8tb3BcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgbG9hZFBhZ2VzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wYWdlcyA9IFtdO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgMzAwOyBpKyspIHtcclxuXHRcdFx0dGhpcy5wYWdlcy5wdXNoKG5ldyBQYWdlKHRoaXMsIGkpKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFdoaXRlYm9hcmREb2N1bWVudCB9OyIsImltcG9ydCB7IFBhaW50IH0gZnJvbSBcIi4vcGFpbnRcIjtcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9jb2xvclwiO1xyXG5cclxuY2xhc3MgQnJ1c2ggZXh0ZW5kcyBQYWludCB7XHJcblxyXG5cdHdpZHRoOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3Rvcihjb2xvcjogQ29sb3IsIHdpZHRoOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKGNvbG9yKTtcclxuXHJcblx0XHR0aGlzLndpZHRoID0gd2lkdGg7XHJcblx0fVxyXG5cclxuXHRjbG9uZSgpOiBCcnVzaCB7XHJcblx0XHRyZXR1cm4gbmV3IEJydXNoKHRoaXMuY29sb3IsIHRoaXMud2lkdGgpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgQnJ1c2ggfTsiLCJjb25zdCBSR0JfQ09MT1JfUkVHRVggPSAvXFwoKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKSgsXFxzKihcXGQqLlxcZCopKT9cXCkvO1xyXG5cclxuY2xhc3MgQ29sb3Ige1xyXG5cclxuXHRyZWFkb25seSByOiBudW1iZXI7XHJcblx0cmVhZG9ubHkgZzogbnVtYmVyO1xyXG5cdHJlYWRvbmx5IGI6IG51bWJlcjtcclxuXHRyZWFkb25seSBhOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhPzogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnIgPSByO1xyXG5cdFx0dGhpcy5nID0gZztcclxuXHRcdHRoaXMuYiA9IGI7XHJcblx0XHR0aGlzLmEgPSBhIHx8IDE7XHJcblx0fVxyXG5cclxuXHR0b0hleCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuICcjJyArIHRoaXMuci50b1N0cmluZygxNikgKyB0aGlzLmcudG9TdHJpbmcoMTYpICsgdGhpcy5iLnRvU3RyaW5nKDE2KTtcclxuXHR9XHJcblxyXG5cdHRvUmdiKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYHJnYigke3RoaXMucn0sICR7dGhpcy5nfSwgJHt0aGlzLmJ9KWA7XHJcblx0fVxyXG5cclxuXHR0b1JnYmEoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBgcmdiYSgke3RoaXMucn0sICR7dGhpcy5nfSwgJHt0aGlzLmJ9LCAke3RoaXMuYX0pYDtcclxuXHR9XHJcblxyXG5cdHRvQWxwaGEoYWxwaGE6IG51bWJlcik6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYHJnYmEoJHt0aGlzLnJ9LCAke3RoaXMuZ30sICR7dGhpcy5ifSwgJHthbHBoYX0pYDtcclxuXHR9XHJcblxyXG5cdGVxdWFscyhvdGhlcjogQ29sb3IpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmEgPT09IG90aGVyLmEgJiYgdGhpcy5yID09PSBvdGhlci5yICYmIHRoaXMuZyA9PT0gb3RoZXIuZyAmJiB0aGlzLmIgPT09IG90aGVyLmI7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZnJvbUhleChoZXg6IHN0cmluZyk6IENvbG9yIHtcclxuXHRcdGxldCBzID0gaGV4LnRyaW0oKTtcclxuXHJcblx0XHRpZiAocy5pbmRleE9mKCcjJykgIT09IDApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGEgaGV4IGNvbG9yIHJlcHJlc2VudGF0aW9uXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHMgPSBzLnN1YnN0cihzLmluZGV4T2YoJyMnKSArIDEpO1xyXG5cclxuXHRcdGNvbnN0IHIgPSBwYXJzZUludChzLnN1YnN0cigwLCAyKSwgMTYpO1xyXG5cdFx0Y29uc3QgZyA9IHBhcnNlSW50KHMuc3Vic3RyKDIsIDIpLCAxNik7XHJcblx0XHRjb25zdCBiID0gcGFyc2VJbnQocy5zdWJzdHIoNCwgMiksIDE2KTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IENvbG9yKHIsIGcsIGIpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGZyb21SR0JTdHJpbmcoaGV4OiBzdHJpbmcpOiBDb2xvciB7XHJcblx0XHRsZXQgcyA9IGhleC50cmltKCk7XHJcblxyXG5cdFx0aWYgKHMuaW5kZXhPZigncmdiJykgIT09IDApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGEgcmdiIGNvbG9yIHJlcHJlc2VudGF0aW9uXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHJlcyA9IFJHQl9DT0xPUl9SRUdFWC5leGVjKHMpO1xyXG5cclxuXHRcdGNvbnN0IHIgPSBwYXJzZUludChyZXNbMV0sIDEwKTtcclxuXHRcdGNvbnN0IGcgPSBwYXJzZUludChyZXNbMl0sIDEwKTtcclxuXHRcdGNvbnN0IGIgPSBwYXJzZUludChyZXNbM10sIDEwKTtcclxuXHRcdGNvbnN0IGEgPSByZXNbNV0gPyBwYXJzZUZsb2F0KHJlc1s1XSkgOiAxO1xyXG5cclxuXHRcdHJldHVybiBuZXcgQ29sb3IociwgZywgYiwgYSk7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZnJvbVJHQk51bWJlcihyZ2JhOiBudW1iZXIpOiBDb2xvciB7XHJcblx0XHRjb25zdCBhID0gKChyZ2JhID4+IDI0KSAmIDB4RkYpIC8gMHhGRjtcclxuXHRcdGNvbnN0IHIgPSAocmdiYSA+PiAxNikgJiAweEZGO1xyXG5cdFx0Y29uc3QgZyA9IChyZ2JhID4+IDgpICYgMHhGRjtcclxuXHRcdGNvbnN0IGIgPSByZ2JhICYgMHhGRjtcclxuXHJcblx0XHRyZXR1cm4gbmV3IENvbG9yKHIsIGcsIGIsIGEpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ29sb3IgfTsiLCJjbGFzcyBGb250IHtcclxuXHJcblx0cmVhZG9ubHkgZmFtaWx5OiBzdHJpbmc7XHJcblxyXG5cdHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuXHJcblx0cmVhZG9ubHkgc3R5bGU6IHN0cmluZztcclxuXHJcblx0cmVhZG9ubHkgd2VpZ2h0OiBzdHJpbmc7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihmYW1pbHk6IHN0cmluZywgc2l6ZTogbnVtYmVyLCBzdHlsZT86IHN0cmluZywgd2VpZ2h0Pzogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmZhbWlseSA9IGZhbWlseTtcclxuXHRcdHRoaXMuc2l6ZSA9IHNpemU7XHJcblx0XHR0aGlzLnN0eWxlID0gc3R5bGU7XHJcblx0XHR0aGlzLndlaWdodCA9IHdlaWdodDtcclxuXHR9XHJcblxyXG5cdGVxdWFscyhvdGhlcjogRm9udCk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKCFvdGhlcikge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcyA9PT0gb3RoZXIpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZmFtaWx5ID09PSBvdGhlci5mYW1pbHkgJiZcclxuXHRcdFx0dGhpcy5zaXplID09PSBvdGhlci5zaXplICYmXHJcblx0XHRcdHRoaXMuc3R5bGUgPT09IG90aGVyLnN0eWxlICYmXHJcblx0XHRcdHRoaXMud2VpZ2h0ID09PSBvdGhlci53ZWlnaHQ7XHJcblx0fVxyXG5cclxuXHR0b1N0cmluZygpOiBzdHJpbmcge1xyXG5cdFx0bGV0IHN0ciA9IHRoaXMuc2l6ZSArIFwicHggXCIgKyB0aGlzLmZhbWlseTtcclxuXHJcblx0XHRpZiAodGhpcy53ZWlnaHQpIHtcclxuXHRcdFx0c3RyID0gdGhpcy53ZWlnaHQgKyBcIiBcIiArIHN0cjtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnN0eWxlKSB7XHJcblx0XHRcdHN0ciA9IHRoaXMuc3R5bGUgKyBcIiBcIiArIHN0cjtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc3RyO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRm9udCB9OyIsImltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vY29sb3JcIjtcclxuXHJcbmNsYXNzIFBhaW50IHtcclxuXHJcblx0Y29sb3I6IENvbG9yO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoY29sb3I6IENvbG9yKSB7XHJcblx0XHR0aGlzLmNvbG9yID0gY29sb3I7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUGFpbnQgfTsiLCJpbXBvcnQgeyBTaGFwZVJlbmRlcmVyIH0gZnJvbSBcIi4vc2hhcGUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBBcnJvd1NoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2Fycm93LnNoYXBlXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5cclxuY2xhc3MgQXJyb3dSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogQXJyb3dTaGFwZSwgZGlydHlSZWdpb246IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcDAgPSBzaGFwZS5wb2ludHNbMF07XHJcblx0XHRjb25zdCBwMSA9IHNoYXBlLnBvaW50c1sxXTtcclxuXHJcblx0XHRpZiAoIXAwIHx8ICFwMSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qga2V5RXZlbnQgPSBzaGFwZS5nZXRLZXlFdmVudCgpO1xyXG5cdFx0Y29uc3QgYnJ1c2ggPSBzaGFwZS5icnVzaDtcclxuXHJcblx0XHRjb250ZXh0LnNhdmUoKTtcclxuXHJcblx0XHR0aGlzLmNyZWF0ZUFycm93UGF0aChjb250ZXh0LCBrZXlFdmVudCwgcDAsIHAxLCBicnVzaC53aWR0aCk7XHJcblxyXG5cdFx0Y29udGV4dC5maWxsU3R5bGUgPSBicnVzaC5jb2xvci50b1JnYmEoKTtcclxuXHRcdGNvbnRleHQuZmlsbCgpO1xyXG5cdFx0Y29udGV4dC5yZXN0b3JlKCk7XHJcblxyXG5cdFx0aWYgKHNoYXBlLmlzU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHRjb25zdCBzY2FsZSA9IGNvbnRleHQuZ2V0VHJhbnNmb3JtRXh0KCkuZ2V0U2NhbGVYKCk7XHJcblxyXG5cdFx0XHR0aGlzLmNyZWF0ZUFycm93UGF0aChjb250ZXh0LCBrZXlFdmVudCwgcDAsIHAxLCBicnVzaC53aWR0aCk7XHJcblxyXG5cdFx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gXCJyZ2IoMjU1LCAwLCAxMDApXCI7XHJcblx0XHRcdGNvbnRleHQubGluZVdpZHRoID0gMiAvIHNjYWxlO1xyXG5cdFx0XHRjb250ZXh0LnNldExpbmVEYXNoKFs1IC8gc2NhbGVdKTtcclxuXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlQXJyb3dQYXRoKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwga2V5RXZlbnQ6IEtleWJvYXJkRXZlbnQsIHAxOiBQZW5Qb2ludCwgcDI6IFBlblBvaW50LCB3aWR0aDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBib2xkID0ga2V5RXZlbnQgIT0gbnVsbCAmJiBrZXlFdmVudC5hbHRLZXk7XHJcblx0XHRjb25zdCB0d29TaWRlZCA9IGtleUV2ZW50ICE9IG51bGwgJiYga2V5RXZlbnQuc2hpZnRLZXk7XHJcblxyXG5cdFx0Y29uc3QgeDEgPSBwMS54O1xyXG5cdFx0Y29uc3QgeTEgPSBwMS55O1xyXG5cdFx0Y29uc3QgeDIgPSBwMi54O1xyXG5cdFx0Y29uc3QgeTIgPSBwMi55O1xyXG5cdFx0Y29uc3QgdyA9IGJvbGQgPyB3aWR0aCAqIDIgOiB3aWR0aDtcclxuXHRcdGNvbnN0IHdkID0gdyAvIDI7XHJcblx0XHRjb25zdCBkeCA9IHgyIC0geDE7XHJcblx0XHRjb25zdCBkeSA9IHkyIC0geTE7XHJcblx0XHRjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoZHksIGR4KTtcclxuXHRcdGNvbnN0IGxlbmd0aCA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcblxyXG5cdFx0Y29uc3QgYXJyb3dSYXRpbyA9IDAuNTtcclxuXHRcdGNvbnN0IGFycm93TGVuZ3RoID0gdyAqIDU7XHJcblx0XHRjb25zdCB3YWlzdGluZyA9IDAuMzU7XHJcblx0XHRjb25zdCB2ZWVYID0gbGVuZ3RoIC0gdyAqIDAuNSAvIGFycm93UmF0aW87XHJcblxyXG5cdFx0Y29uc3Qgd2Fpc3RYID0gbGVuZ3RoIC0gYXJyb3dMZW5ndGggKiAwLjU7XHJcblx0XHRjb25zdCB3YWlzdFkgPSBhcnJvd1JhdGlvICogYXJyb3dMZW5ndGggKiAwLjUgKiB3YWlzdGluZztcclxuXHRcdGNvbnN0IGFycm93V2lkdGggPSBhcnJvd1JhdGlvICogYXJyb3dMZW5ndGg7XHJcblx0XHRjb25zdCB4ID0gdHdvU2lkZWQgPyB3ICogMC41IC8gYXJyb3dSYXRpbyArIGFycm93TGVuZ3RoICogMC43NSA6IDA7XHJcblxyXG5cdFx0Y29udGV4dC50cmFuc2xhdGUoeDEsIHkxKTtcclxuXHRcdGNvbnRleHQucm90YXRlKGFuZ2xlKTtcclxuXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y29udGV4dC5tb3ZlVG8oeCwgLXdkKTtcclxuXHRcdGNvbnRleHQubGluZVRvKHZlZVggLSBhcnJvd0xlbmd0aCAqIDAuNzUsIC13ZCk7XHJcblx0XHRjb250ZXh0LmxpbmVUbyh2ZWVYIC0gYXJyb3dMZW5ndGgsIC1hcnJvd1dpZHRoKTtcclxuXHRcdGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh3YWlzdFgsIC13YWlzdFksIGxlbmd0aCwgMCk7XHJcblx0XHRjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8od2Fpc3RYLCB3YWlzdFksIHZlZVggLSBhcnJvd0xlbmd0aCwgYXJyb3dXaWR0aCk7XHJcblx0XHRjb250ZXh0LmxpbmVUbyh2ZWVYIC0gYXJyb3dMZW5ndGggKiAwLjc1LCB3ZCk7XHJcblx0XHRjb250ZXh0LmxpbmVUbyh4LCB3ZCk7XHJcblxyXG5cdFx0aWYgKHR3b1NpZGVkKSB7XHJcblx0XHRcdGNvbnN0IHdhaXN0WCA9IHggLSBhcnJvd0xlbmd0aCAqIDAuNTtcclxuXHRcdFx0Y29uc3Qgd2Fpc3RZID0gYXJyb3dSYXRpbyAqIGFycm93TGVuZ3RoICogMC41ICogd2Fpc3Rpbmc7XHJcblxyXG5cdFx0XHRjb250ZXh0LmxpbmVUbyh4ICsgYXJyb3dMZW5ndGggKiAwLjI1LCBhcnJvd1dpZHRoKTtcclxuXHRcdFx0Y29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHdhaXN0WCwgd2Fpc3RZLCAwLCAwKTtcclxuXHRcdFx0Y29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHdhaXN0WCwgLXdhaXN0WSwgeCArIGFycm93TGVuZ3RoICogMC4yNSwgLWFycm93V2lkdGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBBcnJvd1JlbmRlcmVyIH07IiwiaW1wb3J0IHsgU2hhcGVSZW5kZXJlciB9IGZyb20gXCIuL3NoYXBlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgRWxsaXBzZVNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2VsbGlwc2Uuc2hhcGVcIjtcclxuXHJcbmNsYXNzIEVsbGlwc2VSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogRWxsaXBzZVNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogdm9pZCB7XHJcblx0XHRjb25zdCBwMCA9IHNoYXBlLnBvaW50c1swXTtcclxuXHRcdGNvbnN0IHAxID0gc2hhcGUucG9pbnRzWzFdO1xyXG5cclxuXHRcdGlmICghcDAgfHwgIXAxKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBrZXlFdmVudCA9IHNoYXBlLmdldEtleUV2ZW50KCk7XHJcblx0XHRjb25zdCBicnVzaCA9IHNoYXBlLmJydXNoO1xyXG5cdFx0Y29uc3QgY29sb3IgPSBicnVzaC5jb2xvci50b1JnYmEoKTtcclxuXHRcdGNvbnN0IGZpbGwgPSBrZXlFdmVudCAmJiBrZXlFdmVudC5hbHRLZXk7XHJcblxyXG5cdFx0Y29uc3QgbWluWCA9IE1hdGgubWluKHAwLngsIHAxLngpO1xyXG5cdFx0Y29uc3QgbWluWSA9IE1hdGgubWluKHAwLnksIHAxLnkpO1xyXG5cdFx0Y29uc3QgbWF4WCA9IE1hdGgubWF4KHAwLngsIHAxLngpO1xyXG5cdFx0Y29uc3QgbWF4WSA9IE1hdGgubWF4KHAwLnksIHAxLnkpO1xyXG5cclxuXHRcdGNvbnN0IHJhZGl1c1ggPSBNYXRoLmFicyhtYXhYIC0gbWluWCkgKiAwLjU7XHJcblx0XHRjb25zdCByYWRpdXNZID0gTWF0aC5hYnMobWF4WSAtIG1pblkpICogMC41O1xyXG5cdFx0Y29uc3QgY2VudGVyWCA9IG1pblggKyByYWRpdXNYO1xyXG5cdFx0Y29uc3QgY2VudGVyWSA9IG1pblkgKyByYWRpdXNZO1xyXG5cclxuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblxyXG5cdFx0aWYgKGZpbGwpIHtcclxuXHRcdFx0Y29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcclxuXHRcdFx0Y29udGV4dC5lbGxpcHNlKGNlbnRlclgsIGNlbnRlclksIHJhZGl1c1gsIHJhZGl1c1ksIDAsIDAsIE1hdGguUEkgKiAyKTtcclxuXHRcdFx0Y29udGV4dC5maWxsKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG5cdFx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IGJydXNoLndpZHRoO1xyXG5cdFx0XHRjb250ZXh0LmVsbGlwc2UoY2VudGVyWCwgY2VudGVyWSwgcmFkaXVzWCwgcmFkaXVzWSwgMCwgMCwgTWF0aC5QSSAqIDIpO1xyXG5cdFx0XHRjb250ZXh0LnN0cm9rZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChzaGFwZS5pc1NlbGVjdGVkKCkpIHtcclxuXHRcdFx0bGV0IHcgPSAwO1xyXG5cclxuXHRcdFx0aWYgKGZpbGwpIHtcclxuXHRcdFx0XHQvLyBEcmF3IHRoZSBzZWxlY3Rpb24gaW5kaWNhdG9yIGluc2lkZSB0aGUgZWxsaXBzZS5cclxuXHRcdFx0XHR3ID0gYnJ1c2gud2lkdGggLyAyO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gXCJyZ2IoMjU1LCAwLCAxMDApXCI7XHJcblx0XHRcdGNvbnRleHQubGluZVdpZHRoID0gYnJ1c2gud2lkdGg7XHJcblx0XHRcdGNvbnRleHQuc2V0TGluZURhc2goWzUgLyBjb250ZXh0LmdldFRyYW5zZm9ybUV4dCgpLmdldFNjYWxlWCgpXSk7XHJcblx0XHRcdGNvbnRleHQuZWxsaXBzZShjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXNYIC0gdywgcmFkaXVzWSAtIHcsIDAsIDAsIE1hdGguUEkgKiAyKTtcclxuXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBFbGxpcHNlUmVuZGVyZXIgfTsiLCJpbXBvcnQgeyBTaGFwZVJlbmRlcmVyIH0gZnJvbSBcIi4vc2hhcGUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU3Ryb2tlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvc3Ryb2tlLnNoYXBlXCI7XHJcbmltcG9ydCB7IEJydXNoIH0gZnJvbSBcIi4uL3BhaW50L2JydXNoXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuXHJcbmNsYXNzIEhpZ2hsaWdodGVyUmVuZGVyZXIgaW1wbGVtZW50cyBTaGFwZVJlbmRlcmVyIHtcclxuXHJcblx0cmVuZGVyKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2hhcGU6IFN0cm9rZVNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogdm9pZCB7XHJcblx0XHRjb25zdCBwb2ludHMgPSBzaGFwZS5wb2ludHM7XHJcblx0XHRjb25zdCBwb2ludENvdW50ID0gcG9pbnRzLmxlbmd0aDtcclxuXHJcblx0XHRpZiAocG9pbnRDb3VudCA8IDEpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGJydXNoID0gc2hhcGUuYnJ1c2g7XHJcblx0XHRjb25zdCBjb2xvciA9IHNoYXBlLmlzU2VsZWN0ZWQoKSA/IFwicmdiYSgyNTUsIDAsIDEwMCwgMC41KVwiIDogYnJ1c2guY29sb3IudG9SZ2JhKCk7XHJcblxyXG5cdFx0bGV0IGluZGV4ID0gMDtcclxuXHRcdGxldCBwMCA9IHBvaW50c1tpbmRleCsrXTtcclxuXHJcblx0XHRpZiAoaW5kZXggPT09IHBvaW50Q291bnQpIHtcclxuXHRcdFx0dGhpcy5kcmF3Q2lyY2xlKGNvbnRleHQsIGJydXNoLCBwMC54LCBwMC55LCBwMC5wKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IGJydXNoLndpZHRoO1xyXG5cdFx0Y29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG5cdFx0Y29udGV4dC5saW5lSm9pbiA9IFwicm91bmRcIjtcclxuXHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xyXG5cdFx0Y29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcIm11bHRpcGx5XCI7XHJcblxyXG5cdFx0Y29udGV4dC5tb3ZlVG8ocDAueCwgcDAueSk7XHJcblxyXG5cdFx0d2hpbGUgKGluZGV4IDwgcG9pbnRDb3VudCkge1xyXG5cdFx0XHRwMCA9IHBvaW50c1tpbmRleCsrXTtcclxuXHJcblx0XHRcdGNvbnRleHQubGluZVRvKHAwLngsIHAwLnkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRleHQuc3Ryb2tlKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGRyYXdDaXJjbGUoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBicnVzaDogQnJ1c2gsIHg6IG51bWJlciwgeTogbnVtYmVyLCBwOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHcgPSBwICogYnJ1c2gud2lkdGg7XHJcblx0XHRjb25zdCBkID0gdyAvIDI7XHJcblxyXG5cdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRcdGNvbnRleHQuZmlsbFN0eWxlID0gYnJ1c2guY29sb3IudG9SZ2JhKCk7XHJcblx0XHRjb250ZXh0LmFyYyh4LCB5LCBkLCAwLCAyICogTWF0aC5QSSk7XHJcblx0XHRjb250ZXh0LmZpbGwoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEhpZ2hsaWdodGVyUmVuZGVyZXIgfTsiLCJpbXBvcnQgeyBTaGFwZVJlbmRlcmVyIH0gZnJvbSBcIi4vc2hhcGUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBGb250IH0gZnJvbSBcIi4uL3BhaW50L2ZvbnRcIjtcclxuaW1wb3J0IHsgTGF0ZXhTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9sYXRleC5zaGFwZVwiO1xyXG5cclxuY2xhc3MgTGF0ZXhSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogTGF0ZXhTaGFwZSwgZGlydHlSZWdpb246IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0Y29uc3QgdGV4dCA9IHNoYXBlLmdldFRleHQoKTtcclxuXHJcblx0XHRpZiAoIXRleHQgfHwgdGV4dC5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGJvdW5kcyA9IHNoYXBlLmJvdW5kcztcclxuXHRcdGNvbnN0IGZvbnQgPSBzaGFwZS5nZXRGb250KCk7XHJcblxyXG5cdFx0Y29uc3QgdHJhbnNmb3JtID0gY29udGV4dC5nZXRUcmFuc2Zvcm1FeHQoKTtcclxuXHRcdGNvbnN0IHNjYWxlID0gdHJhbnNmb3JtLmdldFNjYWxlWCgpO1xyXG5cclxuXHRcdC8qXHJcblx0XHQgKiBSZW5kZXIgd2l0aCBpZGVudGl0eSB0cmFuc2Zvcm0gYW5kIHNjYWxlZCBmb250LCBzaW5jZSBub3JtYWxpemVkXHJcblx0XHQgKiBmb250IHNpemUgd29uJ3QgZ2l2ZSB1cyB0aGUgZGVzaXJlZCByZXN1bHQgYXMgdGhlIHRleHQgd2lsbCBiZVxyXG5cdFx0ICogbWlzcGxhY2VkIGFuZCBtaXNzaXplZC5cclxuXHRcdCAqL1xyXG5cdFx0Y29uc3Qgc2NhbGVkSGVpZ2h0ID0gZm9udC5zaXplICogc2NhbGU7XHJcblx0XHRjb25zdCB4ID0gdHJhbnNmb3JtLmdldFRyYW5zbGF0ZVgoKSArIGJvdW5kcy54ICogc2NhbGU7XHJcblx0XHRjb25zdCB5ID0gdHJhbnNmb3JtLmdldFRyYW5zbGF0ZVkoKSArIGJvdW5kcy55ICogc2NhbGU7XHJcblxyXG5cdFx0Y29uc3Qgc2NhbGVkRm9udCA9IG5ldyBGb250KGZvbnQuZmFtaWx5LCBzY2FsZWRIZWlnaHQsIGZvbnQuc3R5bGUsIGZvbnQud2VpZ2h0KTtcclxuXHJcblx0XHRjb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcclxuXHRcdGNvbnRleHQuZm9udCA9IHNjYWxlZEZvbnQudG9TdHJpbmcoKTtcclxuXHRcdGNvbnRleHQuZmlsbFN0eWxlID0gc2hhcGUuZ2V0VGV4dENvbG9yKCkudG9SZ2JhKCk7XHJcblx0XHRjb250ZXh0LmZpbGxUZXh0KHRleHQsIHgsIHkgKyBzY2FsZWRIZWlnaHQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgTGF0ZXhSZW5kZXJlciB9OyIsImltcG9ydCB7IFNoYXBlUmVuZGVyZXIgfSBmcm9tIFwiLi9zaGFwZS5yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IExpbmVTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9saW5lLnNoYXBlXCI7XHJcblxyXG5jbGFzcyBMaW5lUmVuZGVyZXIgaW1wbGVtZW50cyBTaGFwZVJlbmRlcmVyIHtcclxuXHJcblx0cmVuZGVyKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2hhcGU6IExpbmVTaGFwZSwgZGlydHlSZWdpb246IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcDAgPSBzaGFwZS5wb2ludHNbMF07XHJcblx0XHRjb25zdCBwMSA9IHNoYXBlLnBvaW50c1sxXTtcclxuXHJcblx0XHRpZiAoIXAwIHx8ICFwMSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qga2V5RXZlbnQgPSBzaGFwZS5nZXRLZXlFdmVudCgpO1xyXG5cdFx0Y29uc3QgYnJ1c2ggPSBzaGFwZS5icnVzaDtcclxuXHRcdGNvbnN0IGJvbGQgPSBrZXlFdmVudCAhPSBudWxsICYmIGtleUV2ZW50LmFsdEtleTtcclxuXHRcdGNvbnN0IHdpZHRoID0gYm9sZCA/IGJydXNoLndpZHRoICogMiA6IGJydXNoLndpZHRoO1xyXG5cclxuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gYnJ1c2guY29sb3IudG9SZ2JhKCk7XHJcblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IHdpZHRoO1xyXG5cdFx0Y29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG5cdFx0Y29udGV4dC5tb3ZlVG8ocDAueCwgcDAueSk7XHJcblx0XHRjb250ZXh0LmxpbmVUbyhwMS54LCBwMS55KTtcclxuXHRcdGNvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG5cdFx0aWYgKHNoYXBlLmlzU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHRjb25zdCBzY2FsZSA9IGNvbnRleHQuZ2V0VHJhbnNmb3JtRXh0KCkuZ2V0U2NhbGVYKCk7XHJcblx0XHRcdGNvbnN0IGRhc2hXaWR0aCA9IGJvbGQgPyA3IC8gc2NhbGUgOiA1IC8gc2NhbGU7XHJcblx0XHRcdGNvbnN0IGRhc2hEaXN0ID0gYm9sZCA/IDE1IC8gc2NhbGUgOiAxMiAvIHNjYWxlO1xyXG5cclxuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRcdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9IFwicmdiKDI1NSwgMCwgMTAwKVwiO1xyXG5cdFx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IHdpZHRoO1xyXG5cdFx0XHRjb250ZXh0LnNldExpbmVEYXNoKFtkYXNoV2lkdGgsIGRhc2hEaXN0XSk7XHJcblx0XHRcdGNvbnRleHQubW92ZVRvKHAwLngsIHAwLnkpO1xyXG5cdFx0XHRjb250ZXh0LmxpbmVUbyhwMS54LCBwMS55KTtcclxuXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IExpbmVSZW5kZXJlciB9OyIsImltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUERGUGFnZVByb3h5IH0gZnJvbSBcInBkZmpzLWRpc3QvdHlwZXMvc3JjL2Rpc3BsYXkvYXBpXCI7XHJcblxyXG5jbGFzcyBQZGZSZW5kZXJlciB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgYmFja0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cclxuXHRwcml2YXRlIHJlbmRlclRhc2s6IGFueTtcclxuXHJcblxyXG5cdGFzeW5jIHJlbmRlcihwYWdlUHJveHk6IFBERlBhZ2VQcm94eSwgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB2aWV3UmVjdDogUmVjdGFuZ2xlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogUHJvbWlzZTxDYW52YXNJbWFnZVNvdXJjZT4ge1xyXG5cdFx0aWYgKHRoaXMucmVuZGVyVGFzaykge1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBzY2FsZVggPSAxLjAgLyB2aWV3UmVjdC53aWR0aDtcclxuXHRcdGNvbnN0IHNjYWxlVHggPSBkaXJ0eVJlZ2lvbi53aWR0aCAqIHNjYWxlWDtcclxuXHJcblx0XHRjb25zdCB0eCA9IHZpZXdSZWN0LnggKiBzY2FsZVR4O1xyXG5cdFx0Y29uc3QgdHkgPSB2aWV3UmVjdC55ICogc2NhbGVUeDtcclxuXHJcblx0XHRjb25zdCB3aWR0aCA9IHBhZ2VQcm94eS52aWV3WzJdIC0gcGFnZVByb3h5LnZpZXdbMF07XHJcblx0XHRjb25zdCBzY2FsZSA9IHNjYWxlWCAqIChkaXJ0eVJlZ2lvbi53aWR0aCAvIHdpZHRoKTtcclxuXHRcdGNvbnN0IHZpZXdwb3J0OiBhbnkgPSBwYWdlUHJveHkuZ2V0Vmlld3BvcnQoe1xyXG5cdFx0XHRzY2FsZTogc2NhbGUsXHJcblx0XHRcdGRvbnRGbGlwOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dmlld3BvcnQudHJhbnNmb3JtWzRdIC09IHR4O1xyXG5cdFx0dmlld3BvcnQudHJhbnNmb3JtWzVdIC09IHR5O1xyXG5cclxuXHRcdHRoaXMuYmFja0NhbnZhcy53aWR0aCA9IGRpcnR5UmVnaW9uLndpZHRoO1xyXG5cdFx0dGhpcy5iYWNrQ2FudmFzLmhlaWdodCA9IGRpcnR5UmVnaW9uLmhlaWdodDtcclxuXHJcblx0XHR0aGlzLnJlbmRlclRhc2sgPSBwYWdlUHJveHkucmVuZGVyKHtcclxuXHRcdFx0Y2FudmFzQ29udGV4dDogdGhpcy5iYWNrQ2FudmFzLmdldENvbnRleHQoJzJkJyksXHJcblx0XHRcdHZpZXdwb3J0OiB2aWV3cG9ydCxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnJlbmRlclRhc2sucHJvbWlzZS50aGVuKCgpID0+IHtcclxuXHRcdFx0Y29udGV4dC5jYW52YXMud2lkdGggPSB0aGlzLmJhY2tDYW52YXMud2lkdGg7XHJcblx0XHRcdGNvbnRleHQuY2FudmFzLmhlaWdodCA9IHRoaXMuYmFja0NhbnZhcy5oZWlnaHQ7XHJcblx0XHRcdGNvbnRleHQuZHJhd0ltYWdlKHRoaXMuYmFja0NhbnZhcywgMCwgMCk7XHJcblxyXG5cdFx0XHR0aGlzLnJlbmRlclRhc2sgPSBudWxsO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuYmFja0NhbnZhcztcclxuXHRcdH0sXHJcblx0XHQocmVhc29uOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0Ly9jb25zb2xlLmVycm9yKHJlYXNvbik7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBkZlJlbmRlcmVyIH07IiwiaW1wb3J0IHsgRGltZW5zaW9uIH0gZnJvbSBcIi4uL2dlb21ldHJ5L2RpbWVuc2lvblwiO1xyXG5pbXBvcnQgeyBQREZQYWdlUHJveHkgfSBmcm9tIFwicGRmanMtZGlzdC90eXBlcy9zcmMvZGlzcGxheS9hcGlcIjtcclxuaW1wb3J0IHsgcmVuZGVyVGV4dExheWVyIH0gZnJvbSBcInBkZmpzLWRpc3RcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5cclxuY29uc3QgcGRmVmlldmVyID0gcmVxdWlyZShcInBkZmpzLWRpc3Qvd2ViL3BkZl92aWV3ZXJcIik7XHJcblxyXG5jbGFzcyBQZGZUZXh0UmVuZGVyZXIge1xyXG5cclxuXHRhc3luYyByZW5kZXIocGFnZVByb3h5OiBQREZQYWdlUHJveHksIHJvb3Q6IEhUTUxFbGVtZW50LCBzaXplOiBEaW1lbnNpb24sIHZpZXdSZWN0OiBSZWN0YW5nbGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHRleHRDb250ZW50ID0gYXdhaXQgcGFnZVByb3h5LmdldFRleHRDb250ZW50KCk7XHJcblxyXG5cdFx0Y29uc3Qgc2NhbGVYID0gMS4wIC8gdmlld1JlY3Qud2lkdGg7XHJcblx0XHRjb25zdCBzY2FsZVR4ID0gc2l6ZS53aWR0aCAqIHNjYWxlWDtcclxuXHJcblx0XHRjb25zdCB0eCA9IHZpZXdSZWN0LnggKiBzY2FsZVR4O1xyXG5cdFx0Y29uc3QgdHkgPSB2aWV3UmVjdC55ICogc2NhbGVUeDtcclxuXHJcblx0XHRjb25zdCB3aWR0aCA9IHBhZ2VQcm94eS52aWV3WzJdIC0gcGFnZVByb3h5LnZpZXdbMF07XHJcblx0XHRjb25zdCBzY2FsZSA9IHNjYWxlWCAqIChzaXplLndpZHRoIC8gd2lkdGgpO1xyXG5cdFx0Y29uc3Qgdmlld3BvcnQ6IGFueSA9IHBhZ2VQcm94eS5nZXRWaWV3cG9ydCh7XHJcblx0XHRcdHNjYWxlOiBzY2FsZSxcclxuXHRcdFx0ZG9udEZsaXA6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHR2aWV3cG9ydC50cmFuc2Zvcm1bNF0gLT0gdHg7XHJcblx0XHR2aWV3cG9ydC50cmFuc2Zvcm1bNV0gLT0gdHk7XHJcblxyXG5cdFx0cmVuZGVyVGV4dExheWVyKHtcclxuXHRcdFx0dGV4dENvbnRlbnQ6IHRleHRDb250ZW50LFxyXG5cdFx0XHRjb250YWluZXI6IHJvb3QsXHJcblx0XHRcdHZpZXdwb3J0OiB2aWV3cG9ydCxcclxuXHRcdFx0ZW5oYW5jZVRleHRTZWxlY3Rpb246IHRydWUsXHJcblx0XHRcdHRleHREaXZzOiBbXVxyXG5cdFx0fSlcclxuXHRcdC5wcm9taXNlLmNhdGNoKChyZWFzb246IGFueSkgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKHJlYXNvbik7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBsaW5rU2VydmljZSA9IG5ldyBwZGZWaWV2ZXIuUERGTGlua1NlcnZpY2UoKTtcclxuXHRcdC8vIE9wZW4gbGlua3MgaW4gbmV3IHRhYi5cclxuXHRcdGxpbmtTZXJ2aWNlLmV4dGVybmFsTGlua1RhcmdldCA9IDI7XHJcblxyXG5cdFx0Y29uc3QgYW5ub3RhdGlvbkxheWVyID0gbmV3IHBkZlZpZXZlci5Bbm5vdGF0aW9uTGF5ZXJCdWlsZGVyKHtcclxuXHRcdFx0cGFnZURpdjogcm9vdCxcclxuXHRcdFx0cGRmUGFnZTogcGFnZVByb3h5LFxyXG5cdFx0XHRsaW5rU2VydmljZTogbGlua1NlcnZpY2VcclxuXHRcdH0pO1xyXG5cdFx0YW5ub3RhdGlvbkxheWVyLnJlbmRlcih2aWV3cG9ydCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUGRmVGV4dFJlbmRlcmVyIH07IiwiaW1wb3J0IHsgU2hhcGVSZW5kZXJlciB9IGZyb20gXCIuL3NoYXBlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUGVuU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvcGVuLnNoYXBlXCI7XHJcblxyXG5jbGFzcyBQZW5SZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogUGVuU2hhcGUsIGRpcnR5UmVnaW9uOiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGJydXNoID0gc2hhcGUuYnJ1c2g7XHJcblx0XHRjb25zdCBjb2xvciA9IHNoYXBlLmlzU2VsZWN0ZWQoKSA/IFwicmdiKDI1NSwgMCwgMTAwKVwiIDogYnJ1c2guY29sb3IudG9SZ2IoKTtcclxuXHRcdGNvbnN0IHN0cm9rZSA9IHNoYXBlLmdldFBlblN0cm9rZSgpO1xyXG5cdFx0Y29uc3QgcG9pbnRzID0gc3Ryb2tlLmdldFN0cm9rZUxpc3QoKTtcclxuXHJcblx0XHRjb25zdCBzaXplID0gcG9pbnRzLmxlbmd0aDtcclxuXHRcdGxldCBpbmRleCA9IDA7XHJcblx0XHRsZXQgcG9pbnQgPSBwb2ludHNbaW5kZXgrK107XHJcblxyXG5cdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y29udGV4dC5tb3ZlVG8ocG9pbnQueCwgcG9pbnQueSk7XHJcblxyXG5cdFx0Zm9yICg7IGluZGV4IDwgc2l6ZTspIHtcclxuXHRcdFx0cG9pbnQgPSBwb2ludHNbaW5kZXgrK107XHJcblxyXG5cdFx0XHRpZiAoaW5kZXggPCBzaXplKSB7XHJcblx0XHRcdFx0Y29udGV4dC5saW5lVG8ocG9pbnQueCwgcG9pbnQueSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRjb250ZXh0LmZpbGwoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBlblJlbmRlcmVyIH07IiwiaW1wb3J0IHsgU2hhcGVSZW5kZXJlciB9IGZyb20gXCIuL3NoYXBlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUG9pbnRlclNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3BvaW50ZXIuc2hhcGVcIjtcclxuXHJcbmNsYXNzIFBvaW50ZXJSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogUG9pbnRlclNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogdm9pZCB7XHJcblx0XHRjb25zdCBwb2ludCA9IHNoYXBlLnBvaW50c1swXTtcclxuXHJcblx0XHRpZiAoIXBvaW50KSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBicnVzaCA9IHNoYXBlLmJydXNoO1xyXG5cdFx0Y29uc3QgdyA9IGJydXNoLndpZHRoO1xyXG5cdFx0Y29uc3QgdzIgPSB3IC8gMjtcclxuXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y29udGV4dC5maWxsU3R5bGUgPSBicnVzaC5jb2xvci50b0FscGhhKDAuNCk7XHJcblx0XHRjb250ZXh0LmFyYyhwb2ludC54LCBwb2ludC55LCB3LCAwLCAyICogTWF0aC5QSSk7XHJcblx0XHRjb250ZXh0LmZpbGwoKTtcclxuXHJcblx0XHQvLyBEcmF3IGlubmVyIHJpbmcuXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9IGJydXNoLmNvbG9yLnRvUmdiKCk7XHJcblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IHcgLyA0O1xyXG5cdFx0Y29udGV4dC5hcmMocG9pbnQueCwgcG9pbnQueSwgdzIsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHRcdGNvbnRleHQuc3Ryb2tlKCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgUG9pbnRlclJlbmRlcmVyIH07IiwiaW1wb3J0IHsgU2hhcGVSZW5kZXJlciB9IGZyb20gXCIuL3NoYXBlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvcmVjdGFuZ2xlLnNoYXBlXCI7XHJcblxyXG5jbGFzcyBSZWN0YW5nbGVSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogUmVjdGFuZ2xlU2hhcGUsIGRpcnR5UmVnaW9uOiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGJvdW5kcyA9IHNoYXBlLmJvdW5kcztcclxuXHJcblx0XHRpZiAoYm91bmRzLmlzRW1wdHkoKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qga2V5RXZlbnQgPSBzaGFwZS5nZXRLZXlFdmVudCgpO1xyXG5cdFx0Y29uc3QgYnJ1c2ggPSBzaGFwZS5icnVzaDtcclxuXHRcdGNvbnN0IGNvbG9yID0gYnJ1c2guY29sb3IudG9SZ2JhKCk7XHJcblx0XHRjb25zdCBmaWxsID0ga2V5RXZlbnQgJiYga2V5RXZlbnQuYWx0S2V5O1xyXG5cclxuXHRcdGxldCB4ID0gYm91bmRzLng7XHJcblx0XHRsZXQgeSA9IGJvdW5kcy55O1xyXG5cdFx0bGV0IHcgPSBib3VuZHMud2lkdGg7XHJcblx0XHRsZXQgaCA9IGJvdW5kcy5oZWlnaHQ7XHJcblxyXG5cdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcblx0XHRpZiAoZmlsbCkge1xyXG5cdFx0XHRjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG5cdFx0XHRjb250ZXh0LnJlY3QoeCwgeSwgdywgaCk7XHJcblx0XHRcdGNvbnRleHQuZmlsbCgpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuXHRcdFx0Y29udGV4dC5saW5lV2lkdGggPSBicnVzaC53aWR0aDtcclxuXHRcdFx0Y29udGV4dC5yZWN0KHgsIHksIHcsIGgpO1xyXG5cdFx0XHRjb250ZXh0LnN0cm9rZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChzaGFwZS5pc1NlbGVjdGVkKCkpIHtcclxuXHRcdFx0aWYgKGZpbGwpIHtcclxuXHRcdFx0XHQvLyBEcmF3IHRoZSBzZWxlY3Rpb24gaW5kaWNhdG9yIGluc2lkZSB0aGUgcmVjdGFuZ2xlLlxyXG5cdFx0XHRcdHggKz0gYnJ1c2gud2lkdGggLyAyO1xyXG5cdFx0XHRcdHkgKz0gYnJ1c2gud2lkdGggLyAyO1xyXG5cdFx0XHRcdHcgLT0gYnJ1c2gud2lkdGg7XHJcblx0XHRcdFx0aCAtPSBicnVzaC53aWR0aDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRcdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9IFwicmdiKDI1NSwgMCwgMTAwKVwiO1xyXG5cdFx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IGJydXNoLndpZHRoO1xyXG5cdFx0XHRjb250ZXh0LnNldExpbmVEYXNoKFs1IC8gY29udGV4dC5nZXRUcmFuc2Zvcm1FeHQoKS5nZXRTY2FsZVgoKV0pO1xyXG5cdFx0XHRjb250ZXh0LnJlY3QoeCwgeSwgdywgaCk7XHJcblx0XHRcdGNvbnRleHQuc3Ryb2tlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBSZWN0YW5nbGVSZW5kZXJlciB9OyIsImltcG9ydCB7IFBhZ2VFdmVudCwgUGFnZUNoYW5nZVR5cGUgfSBmcm9tIFwiLi4vbW9kZWwvcGFnZS1ldmVudFwiO1xyXG5pbXBvcnQgeyBSZW5kZXJTdXJmYWNlIH0gZnJvbSBcIi4vcmVuZGVyLXN1cmZhY2VcIjtcclxuaW1wb3J0IHsgVGV4dExheWVyU3VyZmFjZSB9IGZyb20gXCIuL3RleHQtbGF5ZXItc3VyZmFjZVwiO1xyXG5pbXBvcnQgeyBTdHJva2VTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zdHJva2Uuc2hhcGVcIjtcclxuaW1wb3J0IHsgSGlnaGxpZ2h0ZXJSZW5kZXJlciB9IGZyb20gXCIuL2hpZ2hsaWdodGVyLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNpemVFdmVudCB9IGZyb20gXCIuLi9ldmVudC9zaXplLWV2ZW50XCI7XHJcbmltcG9ydCB7IFNsaWRlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvc2xpZGUuc2hhcGVcIjtcclxuaW1wb3J0IHsgU2xpZGVSZW5kZXJlciB9IGZyb20gXCIuL3NsaWRlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUGFnZSB9IGZyb20gXCIuLi9tb2RlbC9wYWdlXCI7XHJcbmltcG9ydCB7IFBvaW50ZXJSZW5kZXJlciB9IGZyb20gXCIuL3BvaW50ZXIucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgQXJyb3dSZW5kZXJlciB9IGZyb20gXCIuL2Fycm93LnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZVJlbmRlcmVyIH0gZnJvbSBcIi4vcmVjdGFuZ2xlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IExpbmVSZW5kZXJlciB9IGZyb20gXCIuL2xpbmUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgRWxsaXBzZVJlbmRlcmVyIH0gZnJvbSBcIi4vZWxsaXBzZS5yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBQb2ludGVyU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvcG9pbnRlci5zaGFwZVwiO1xyXG5pbXBvcnQgeyBBcnJvd1NoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2Fycm93LnNoYXBlXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZVNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3JlY3RhbmdsZS5zaGFwZVwiO1xyXG5pbXBvcnQgeyBMaW5lU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvbGluZS5zaGFwZVwiO1xyXG5pbXBvcnQgeyBFbGxpcHNlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvZWxsaXBzZS5zaGFwZVwiO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zaGFwZVwiO1xyXG5pbXBvcnQgeyBTZWxlY3RTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zZWxlY3Quc2hhcGVcIjtcclxuaW1wb3J0IHsgU2VsZWN0UmVuZGVyZXIgfSBmcm9tIFwiLi9zZWxlY3QucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgWm9vbVNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3pvb20uc2hhcGVcIjtcclxuaW1wb3J0IHsgWm9vbVJlbmRlcmVyIH0gZnJvbSBcIi4vem9vbS5yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBUZXh0U2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvdGV4dC5zaGFwZVwiO1xyXG5pbXBvcnQgeyBUZXh0UmVuZGVyZXIgfSBmcm9tIFwiLi90ZXh0LnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNsaWRlUmVuZGVyU3VyZmFjZSB9IGZyb20gXCIuL3NsaWRlLXJlbmRlci1zdXJmYWNlXCI7XHJcbmltcG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gXCIuLi9nZW9tZXRyeS90cmFuc2Zvcm1cIjtcclxuaW1wb3J0IHsgVGV4dEhpZ2hsaWdodFNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3RleHQtaGlnaGxpZ2h0LnNoYXBlXCI7XHJcbmltcG9ydCB7IFRleHRIaWdobGlnaHRSZW5kZXJlciB9IGZyb20gXCIuL3RleHQtaGlnaGxpZ2h0LnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IExhdGV4U2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvbGF0ZXguc2hhcGVcIjtcclxuaW1wb3J0IHsgTGF0ZXhSZW5kZXJlciB9IGZyb20gXCIuL2xhdGV4LnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFBlblNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3Blbi5zaGFwZVwiO1xyXG5pbXBvcnQgeyBQZW5SZW5kZXJlciB9IGZyb20gXCIuL3Blbi5yZW5kZXJlclwiO1xyXG5cclxuY2xhc3MgUmVuZGVyQ29udHJvbGxlciB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgcGFnZUNoYW5nZUxpc3RlbmVyOiAoZXZlbnQ6IFBhZ2VFdmVudCkgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSBzbGlkZVJlbmRlclN1cmZhY2U6IFNsaWRlUmVuZGVyU3VyZmFjZTtcclxuXHJcblx0cHJpdmF0ZSBhY3Rpb25SZW5kZXJTdXJmYWNlOiBSZW5kZXJTdXJmYWNlO1xyXG5cclxuXHRwcml2YXRlIHZvbGF0aWxlUmVuZGVyU3VyZmFjZTogUmVuZGVyU3VyZmFjZTtcclxuXHJcblx0cHJpdmF0ZSB0ZXh0TGF5ZXJTdXJmYWNlOiBUZXh0TGF5ZXJTdXJmYWNlO1xyXG5cclxuXHRwcml2YXRlIHBhZ2U6IFBhZ2U7XHJcblxyXG5cdHByaXZhdGUgbGFzdFNoYXBlOiBTaGFwZTtcclxuXHJcblx0cHJpdmF0ZSBsYXN0VHJhbnNmb3JtOiBUcmFuc2Zvcm07XHJcblxyXG5cdHByaXZhdGUgc2VlazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLnBhZ2VDaGFuZ2VMaXN0ZW5lciA9IHRoaXMucGFnZUNoYW5nZWQuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMubGFzdFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCAoKSA9PiB7XHJcblx0XHRcdGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJyZXNpemVcIikpO1xyXG5cdFxyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJBbGxMYXllcnModGhpcy5wYWdlKTtcclxuXHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldFBhZ2UocGFnZTogUGFnZSk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMucGFnZSkge1xyXG5cdFx0XHQvLyBEaXNhYmxlIHJlbmRlcmluZyBmb3IgcHJldmlvdXMgcGFnZS5cclxuXHRcdFx0dGhpcy5kaXNhYmxlUmVuZGVyaW5nKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wYWdlID0gcGFnZTtcclxuXHJcblx0XHRpZiAoIXRoaXMuc2Vlaykge1xyXG5cdFx0XHR0aGlzLmVuYWJsZVJlbmRlcmluZygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucmVuZGVyQWxsTGF5ZXJzKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0c2V0U2VlayhzZWVrOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLnNlZWsgPSBzZWVrO1xyXG5cclxuXHRcdGlmIChzZWVrKSB7XHJcblx0XHRcdHRoaXMuZGlzYWJsZVJlbmRlcmluZygpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuZW5hYmxlUmVuZGVyaW5nKCk7XHJcblxyXG5cdFx0XHQvLyBGaW5pc2hlZCBzZWVraW5nIHN0ZXAuIFJlbmRlciBjdXJyZW50IHN0YXRlLlxyXG5cdFx0XHRpZiAodGhpcy5sYXN0VHJhbnNmb3JtLmVxdWFscyh0aGlzLmdldFBhZ2VUcmFuc2Zvcm0oKSkpIHtcclxuXHRcdFx0XHQvLyBSZW5kZXIgc2xpZGUgYW5kIHRleHQgbGF5ZXIgb25seSBpZiB3ZSBoYXZlIHRvOiBzZWUgcGFnZSB0cmFuc2Zvcm0uXHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoQW5ub3RhdGlvbkxheWVycygpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vIFBhZ2UgdHJhbnNmb3JtIGNoYW5nZWQuIFVwZGF0ZSBhbGwgbGF5ZXJzLlxyXG5cdFx0XHRcdHRoaXMucmVuZGVyQWxsTGF5ZXJzKHRoaXMucGFnZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldFNsaWRlUmVuZGVyU3VyZmFjZShyZW5kZXJTdXJmYWNlOiBTbGlkZVJlbmRlclN1cmZhY2UpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlID0gcmVuZGVyU3VyZmFjZTtcclxuXHRcdHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlLnJlZ2lzdGVyUmVuZGVyZXIoU2xpZGVTaGFwZS5uYW1lLCBuZXcgU2xpZGVSZW5kZXJlcigpKTtcclxuXHRcdHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlLmFkZFNpemVMaXN0ZW5lcih0aGlzLnNsaWRlUmVuZGVyU3VyZmFjZVNpemVDaGFuZ2VkLmJpbmQodGhpcykpO1xyXG5cdH1cclxuXHJcblx0c2V0QWN0aW9uUmVuZGVyU3VyZmFjZShyZW5kZXJTdXJmYWNlOiBSZW5kZXJTdXJmYWNlKTogdm9pZCB7XHJcblx0XHR0aGlzLmFjdGlvblJlbmRlclN1cmZhY2UgPSByZW5kZXJTdXJmYWNlO1xyXG5cdFx0dGhpcy5hY3Rpb25SZW5kZXJTdXJmYWNlLmFkZFNpemVMaXN0ZW5lcih0aGlzLmFjdGlvblJlbmRlclN1cmZhY2VTaXplQ2hhbmdlZC5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyU2hhcGVSZW5kZXJlcnMocmVuZGVyU3VyZmFjZSk7XHJcblx0fVxyXG5cclxuXHRzZXRWb2xhdGlsZVJlbmRlclN1cmZhY2UocmVuZGVyU3VyZmFjZTogUmVuZGVyU3VyZmFjZSk6IHZvaWQge1xyXG5cdFx0dGhpcy52b2xhdGlsZVJlbmRlclN1cmZhY2UgPSByZW5kZXJTdXJmYWNlO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJTaGFwZVJlbmRlcmVycyhyZW5kZXJTdXJmYWNlKTtcclxuXHR9XHJcblxyXG5cdHNldFRleHRMYXllclN1cmZhY2UodGV4dExheWVyU3VyZmFjZTogVGV4dExheWVyU3VyZmFjZSk6IHZvaWQge1xyXG5cdFx0dGhpcy50ZXh0TGF5ZXJTdXJmYWNlID0gdGV4dExheWVyU3VyZmFjZTtcclxuXHR9XHJcblxyXG5cdGJlZ2luQnVsa1JlbmRlcigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5zZWVrKSB7XHJcblx0XHRcdHRoaXMuZGlzYWJsZVJlbmRlcmluZygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZW5kQnVsa1JlbmRlcigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5zZWVrKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaEFubm90YXRpb25MYXllcnMoKTtcclxuXHRcdFx0dGhpcy5lbmFibGVSZW5kZXJpbmcoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZW5hYmxlUmVuZGVyaW5nKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wYWdlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMucGFnZUNoYW5nZUxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZGlzYWJsZVJlbmRlcmluZygpOiB2b2lkIHtcclxuXHRcdHRoaXMucGFnZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLnBhZ2VDaGFuZ2VMaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNsaWRlUmVuZGVyU3VyZmFjZVNpemVDaGFuZ2VkKGV2ZW50OiBTaXplRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVuZGVyQWxsTGF5ZXJzKHRoaXMucGFnZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFjdGlvblJlbmRlclN1cmZhY2VTaXplQ2hhbmdlZChldmVudDogU2l6ZUV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnJlZnJlc2hBbm5vdGF0aW9uTGF5ZXJzKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHBhZ2VDaGFuZ2VkKGV2ZW50OiBQYWdlRXZlbnQpOiB2b2lkIHtcclxuXHRcdHN3aXRjaCAoZXZlbnQuY2hhbmdlVHlwZSkge1xyXG5cdFx0XHRjYXNlIFBhZ2VDaGFuZ2VUeXBlLlBhZ2VUcmFuc2Zvcm06XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJBbGxMYXllcnModGhpcy5wYWdlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdGNhc2UgUGFnZUNoYW5nZVR5cGUuQ2xlYXI6XHJcblx0XHRcdFx0dGhpcy5jbGVhckFubm90YXRpb25MYXllcnMoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdGNhc2UgUGFnZUNoYW5nZVR5cGUuU2hhcGVBZGRlZDpcclxuXHRcdFx0XHRpZiAodGhpcy5sYXN0U2hhcGUgJiYgdGhpcy5sYXN0U2hhcGUgIT0gZXZlbnQuc2hhcGUpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHNpemUgPSB0aGlzLmFjdGlvblJlbmRlclN1cmZhY2UuZ2V0U2l6ZSgpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYm91bmRzOiBSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKDAsIDAsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclBlcm1hbmVudExheWVyKHRoaXMubGFzdFNoYXBlLCBib3VuZHMpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5yZW5kZXJWb2xhdGlsZUxheWVyKGV2ZW50LnNoYXBlLCBldmVudC5kaXJ0eVJlZ2lvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRjYXNlIFBhZ2VDaGFuZ2VUeXBlLlNoYXBlUmVtb3ZlZDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2hBbm5vdGF0aW9uTGF5ZXJzKCk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRjYXNlIFBhZ2VDaGFuZ2VUeXBlLlNoYXBlTW9kaWZpZWQ6XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJWb2xhdGlsZUxheWVyKGV2ZW50LnNoYXBlLCBldmVudC5kaXJ0eVJlZ2lvbik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNsZWFyQW5ub3RhdGlvbkxheWVycygpOiB2b2lkIHtcclxuXHRcdHRoaXMudm9sYXRpbGVSZW5kZXJTdXJmYWNlLmNsZWFyKCk7XHJcblx0XHR0aGlzLmFjdGlvblJlbmRlclN1cmZhY2UucmVuZGVyU3VyZmFjZSh0aGlzLnNsaWRlUmVuZGVyU3VyZmFjZSk7XHJcblxyXG5cdFx0dGhpcy5sYXN0U2hhcGUgPSBudWxsO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZWZyZXNoQW5ub3RhdGlvbkxheWVycygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHNoYXBlcyA9IHRoaXMucGFnZS5nZXRTaGFwZXMoKTtcclxuXHRcdGNvbnN0IGxhc3RJbmRleCA9IHNoYXBlcy5sZW5ndGggLSAxO1xyXG5cclxuXHRcdGlmIChsYXN0SW5kZXggPj0gMCkge1xyXG5cdFx0XHQvLyBUaGUgcGFnZSBjb250YWlucyBhdCBsZWFzdCBvbmUgc2hhcGUuXHJcblx0XHRcdHRoaXMuYWN0aW9uUmVuZGVyU3VyZmFjZS5yZW5kZXJTdXJmYWNlKHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlKTtcclxuXHJcblx0XHRcdGlmIChsYXN0SW5kZXggPiAwKSB7XHJcblx0XHRcdFx0Ly8gUmVuZGVyIGFsbCBzaGFwZXMgZXhjZXB0IHRoZSBsYXN0IG9uZSBvbiB0aGUgcGVybWFuZW50IHN1cmZhY2UuXHJcblx0XHRcdFx0dGhpcy5hY3Rpb25SZW5kZXJTdXJmYWNlLnJlbmRlclNoYXBlcyhzaGFwZXMuc2xpY2UoMCwgbGFzdEluZGV4KSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEFsd2F5cyByZW5kZXIgdGhlIGxhc3Qgc2hhcGUgb24gdGhlIHZvbGF0aWxlIHN1cmZhY2UuXHJcblx0XHRcdGNvbnN0IGxhc3RTaGFwZSA9IHNoYXBlc1tsYXN0SW5kZXhdO1xyXG5cdFx0XHR0aGlzLnJlbmRlclZvbGF0aWxlTGF5ZXIobGFzdFNoYXBlLCBsYXN0U2hhcGUuYm91bmRzKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHQvLyBUaGUgcGFnZSBjb250YWlucyBubyBzaGFwZXMuXHJcblx0XHRcdHRoaXMudm9sYXRpbGVSZW5kZXJTdXJmYWNlLmNsZWFyKCk7XHJcblx0XHRcdHRoaXMuYWN0aW9uUmVuZGVyU3VyZmFjZS5yZW5kZXJTdXJmYWNlKHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlKTtcclxuXHJcblx0XHRcdHRoaXMubGFzdFNoYXBlID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQWxsTGF5ZXJzKHBhZ2U6IFBhZ2UpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHByb21pc2UgPSB0aGlzLnJlbmRlclNsaWRlTGF5ZXIocGFnZSk7XHJcblx0XHRwcm9taXNlLnRoZW4oKGltYWdlU291cmNlOiBDYW52YXNJbWFnZVNvdXJjZSkgPT4ge1xyXG5cdFx0XHRpZiAoaW1hZ2VTb3VyY2UpIHtcclxuXHRcdFx0XHRjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5nZXRQYWdlVHJhbnNmb3JtKCk7XHJcblxyXG5cdFx0XHRcdHRoaXMubGFzdFRyYW5zZm9ybS5zZXRUcmFuc2Zvcm0ocGFnZVRyYW5zZm9ybSk7XHJcblxyXG5cdFx0XHRcdHRoaXMuYWN0aW9uUmVuZGVyU3VyZmFjZS5zZXRUcmFuc2Zvcm0ocGFnZVRyYW5zZm9ybSk7XHJcblx0XHRcdFx0dGhpcy52b2xhdGlsZVJlbmRlclN1cmZhY2Uuc2V0VHJhbnNmb3JtKHBhZ2VUcmFuc2Zvcm0pO1xyXG5cclxuXHRcdFx0XHR0aGlzLmFjdGlvblJlbmRlclN1cmZhY2UucmVuZGVySW1hZ2VTb3VyY2UoaW1hZ2VTb3VyY2UpO1xyXG5cdFx0XHRcdHRoaXMuYWN0aW9uUmVuZGVyU3VyZmFjZS5yZW5kZXJTaGFwZXMocGFnZS5nZXRTaGFwZXMoKSk7XHJcblx0XHRcdFx0dGhpcy52b2xhdGlsZVJlbmRlclN1cmZhY2UuY2xlYXIoKTtcclxuXHRcdFx0XHR0aGlzLnRleHRMYXllclN1cmZhY2UucmVuZGVyKHBhZ2UpO1xyXG5cclxuXHRcdFx0XHR0aGlzLmxhc3RTaGFwZSA9IG51bGw7XHJcblxyXG5cdFx0XHRcdGlmICghT2JqZWN0LmlzKHBhZ2UsIHRoaXMucGFnZSkpIHtcclxuXHRcdFx0XHRcdC8vIEtlZXAgdGhlIHZpZXcgdXAgdG8gZGF0ZS5cclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyQWxsTGF5ZXJzKHRoaXMucGFnZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcilcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJQZXJtYW5lbnRMYXllcihzaGFwZTogU2hhcGUsIGRpcnR5UmVnaW9uOiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWN0aW9uUmVuZGVyU3VyZmFjZS5yZW5kZXJTaGFwZShzaGFwZSwgZGlydHlSZWdpb24pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJWb2xhdGlsZUxheWVyKHNoYXBlOiBTaGFwZSwgZGlydHlSZWdpb246IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0dGhpcy52b2xhdGlsZVJlbmRlclN1cmZhY2UucmVuZGVyU3VyZmFjZSh0aGlzLmFjdGlvblJlbmRlclN1cmZhY2UpO1xyXG5cdFx0dGhpcy52b2xhdGlsZVJlbmRlclN1cmZhY2UucmVuZGVyU2hhcGUoc2hhcGUsIGRpcnR5UmVnaW9uKTtcclxuXHJcblx0XHR0aGlzLmxhc3RTaGFwZSA9IHNoYXBlO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJTbGlkZUxheWVyKHBhZ2U6IFBhZ2UpOiBQcm9taXNlPENhbnZhc0ltYWdlU291cmNlPiB7XHJcblx0XHRjb25zdCBzaXplID0gdGhpcy5zbGlkZVJlbmRlclN1cmZhY2UuZ2V0U2l6ZSgpO1xyXG5cclxuXHRcdGlmICghc2l6ZSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zbGlkZVJlbmRlclN1cmZhY2UucmVuZGVyU2xpZGVTaGFwZShwYWdlLmdldFNsaWRlU2hhcGUoKSwgbmV3IFJlY3RhbmdsZSgwLCAwLCAwLCAwKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYm91bmRzID0gbmV3IFJlY3RhbmdsZSgwLCAwLCBzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlLnJlbmRlclNsaWRlU2hhcGUocGFnZS5nZXRTbGlkZVNoYXBlKCksIGJvdW5kcyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldFBhZ2VUcmFuc2Zvcm0oKTogVHJhbnNmb3JtIHtcclxuXHRcdGNvbnN0IHBhZ2VCb3VuZHMgPSB0aGlzLnBhZ2UuZ2V0U2xpZGVTaGFwZSgpLmJvdW5kcztcclxuXHJcblx0XHRjb25zdCBwYWdlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG5cdFx0cGFnZVRyYW5zZm9ybS50cmFuc2xhdGUocGFnZUJvdW5kcy54LCBwYWdlQm91bmRzLnkpO1xyXG5cdFx0cGFnZVRyYW5zZm9ybS5zY2FsZSgxLjAgLyBwYWdlQm91bmRzLndpZHRoLCAxLjAgLyBwYWdlQm91bmRzLmhlaWdodCk7XHJcblxyXG5cdFx0cmV0dXJuIHBhZ2VUcmFuc2Zvcm07XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlZ2lzdGVyU2hhcGVSZW5kZXJlcnMocmVuZGVyU3VyZmFjZTogUmVuZGVyU3VyZmFjZSk6IHZvaWQge1xyXG5cdFx0cmVuZGVyU3VyZmFjZS5yZWdpc3RlclJlbmRlcmVyKFBlblNoYXBlLm5hbWUsIG5ldyBQZW5SZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihTdHJva2VTaGFwZS5uYW1lLCBuZXcgSGlnaGxpZ2h0ZXJSZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihQb2ludGVyU2hhcGUubmFtZSwgbmV3IFBvaW50ZXJSZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihBcnJvd1NoYXBlLm5hbWUsIG5ldyBBcnJvd1JlbmRlcmVyKCkpO1xyXG5cdFx0cmVuZGVyU3VyZmFjZS5yZWdpc3RlclJlbmRlcmVyKFJlY3RhbmdsZVNoYXBlLm5hbWUsIG5ldyBSZWN0YW5nbGVSZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihMaW5lU2hhcGUubmFtZSwgbmV3IExpbmVSZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihFbGxpcHNlU2hhcGUubmFtZSwgbmV3IEVsbGlwc2VSZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihTZWxlY3RTaGFwZS5uYW1lLCBuZXcgU2VsZWN0UmVuZGVyZXIoKSk7XHJcblx0XHRyZW5kZXJTdXJmYWNlLnJlZ2lzdGVyUmVuZGVyZXIoVGV4dFNoYXBlLm5hbWUsIG5ldyBUZXh0UmVuZGVyZXIoKSk7XHJcblx0XHRyZW5kZXJTdXJmYWNlLnJlZ2lzdGVyUmVuZGVyZXIoVGV4dEhpZ2hsaWdodFNoYXBlLm5hbWUsIG5ldyBUZXh0SGlnaGxpZ2h0UmVuZGVyZXIoKSk7XHJcblx0XHRyZW5kZXJTdXJmYWNlLnJlZ2lzdGVyUmVuZGVyZXIoTGF0ZXhTaGFwZS5uYW1lLCBuZXcgTGF0ZXhSZW5kZXJlcigpKTtcclxuXHRcdHJlbmRlclN1cmZhY2UucmVnaXN0ZXJSZW5kZXJlcihab29tU2hhcGUubmFtZSwgbmV3IFpvb21SZW5kZXJlcigpKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFJlbmRlckNvbnRyb2xsZXIgfTsiLCJpbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zaGFwZVwiO1xyXG5pbXBvcnQgeyBTaGFwZVJlbmRlcmVyIH0gZnJvbSBcIi4vc2hhcGUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgRGltZW5zaW9uIH0gZnJvbSBcIi4uL2dlb21ldHJ5L2RpbWVuc2lvblwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFNpemVFdmVudCB9IGZyb20gXCIuLi9ldmVudC9zaXplLWV2ZW50XCI7XHJcbmltcG9ydCB7IFR5cGVkRXZlbnQsIExpc3RlbmVyLCBEaXNwb3NhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2V2ZW50LWxpc3RlbmVyXCI7XHJcbmltcG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gXCIuLi9nZW9tZXRyeS90cmFuc2Zvcm1cIjtcclxuXHJcbmNsYXNzIFJlbmRlclN1cmZhY2Uge1xyXG5cclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IGNhbnZhc0NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IHJlbmRlcmVyczogTWFwPFN0cmluZywgU2hhcGVSZW5kZXJlcj47XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2l6ZUV2ZW50ID0gbmV3IFR5cGVkRXZlbnQ8U2l6ZUV2ZW50PigpO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRyYW5zZm9ybTogVHJhbnNmb3JtO1xyXG5cclxuXHRwcml2YXRlIHNpemU6IERpbWVuc2lvbjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuXHRcdHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG5cdFx0dGhpcy5jYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHRcdHRoaXMucmVuZGVyZXJzID0gbmV3IE1hcCgpO1xyXG5cdFx0dGhpcy50cmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7XHJcblx0fVxyXG5cclxuXHRjbGVhcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2FudmFzQ29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblx0fVxyXG5cclxuXHRyZWdpc3RlclJlbmRlcmVyKHNoYXBlTmFtZTogU3RyaW5nLCByZW5kZXI6IFNoYXBlUmVuZGVyZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVuZGVyZXJzLnNldChzaGFwZU5hbWUsIHJlbmRlcik7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJJbWFnZVNvdXJjZShjYW52YXM6IENhbnZhc0ltYWdlU291cmNlKTogdm9pZCB7XHJcblx0XHR0aGlzLmNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGNhbnZhcywgMCwgMCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdXJmYWNlKHN1cmZhY2U6IFJlbmRlclN1cmZhY2UpOiB2b2lkIHtcclxuXHRcdGlmIChzdXJmYWNlLmNhbnZhcy53aWR0aCA9PT0gMCB8fCBzdXJmYWNlLmNhbnZhcy5oZWlnaHQgPT09IDApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY2FudmFzQ29udGV4dC5kcmF3SW1hZ2Uoc3VyZmFjZS5jYW52YXMsIDAsIDApO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU2hhcGVzKHNoYXBlczogU2hhcGVbXSk6IHZvaWQge1xyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2Ygc2hhcGVzKSB7XHJcblx0XHRcdHRoaXMucmVuZGVyU2hhcGUoc2hhcGUsIG51bGwpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVuZGVyU2hhcGUoc2hhcGU6IFNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogdm9pZCB7XHJcblx0XHRjb25zdCByZW5kZXJlciA9IHRoaXMucmVuZGVyZXJzLmdldChzaGFwZS5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuXHJcblx0XHRpZiAocmVuZGVyZXIpIHtcclxuXHRcdFx0Y29uc3QgcyA9IHRoaXMuY2FudmFzLndpZHRoICogdGhpcy50cmFuc2Zvcm0uZ2V0U2NhbGVYKCk7XHJcblx0XHRcdGNvbnN0IHR4ID0gdGhpcy50cmFuc2Zvcm0uZ2V0VHJhbnNsYXRlWCgpO1xyXG5cdFx0XHRjb25zdCB0eSA9IHRoaXMudHJhbnNmb3JtLmdldFRyYW5zbGF0ZVkoKTtcclxuXHJcblx0XHRcdHRoaXMuY2FudmFzQ29udGV4dC5zYXZlKCk7XHJcblx0XHRcdHRoaXMuY2FudmFzQ29udGV4dC5zY2FsZShzLCBzKTtcclxuXHRcdFx0dGhpcy5jYW52YXNDb250ZXh0LnRyYW5zbGF0ZSgtdHgsIC10eSk7XHJcblxyXG5cdFx0XHRyZW5kZXJlci5yZW5kZXIodGhpcy5jYW52YXNDb250ZXh0LCBzaGFwZSwgZGlydHlSZWdpb24pO1xyXG5cclxuXHRcdFx0dGhpcy5jYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldFNpemUoKTogRGltZW5zaW9uIHtcclxuXHRcdHJldHVybiB0aGlzLnNpemU7XHJcblx0fVxyXG5cclxuXHRzZXRTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhpRFBJIGhhbmRsaW5nXHJcblx0XHRjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xyXG5cclxuXHRcdHRoaXMuc2l6ZSA9IG5ldyBEaW1lbnNpb24od2lkdGggKiBkcHIsIGhlaWdodCAqIGRwcik7XHJcblxyXG5cdFx0dGhpcy5yZXNpemVDYW52YXMod2lkdGgsIGhlaWdodCwgZHByKTtcclxuXHRcdHRoaXMuZmlyZVNpemVFdmVudChuZXcgU2l6ZUV2ZW50KHRoaXMuc2l6ZSkpO1xyXG5cdH1cclxuXHJcblx0c2V0VHJhbnNmb3JtKHRyYW5zZm9ybTogVHJhbnNmb3JtKTogdm9pZCB7XHJcblx0XHR0aGlzLnRyYW5zZm9ybS5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcclxuXHR9XHJcblxyXG5cdGFkZFNpemVMaXN0ZW5lcihsaXN0ZW5lcjogTGlzdGVuZXI8U2l6ZUV2ZW50Pik6IERpc3Bvc2FibGUge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2l6ZUV2ZW50LnN1YnNjcmliZShsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVTaXplTGlzdGVuZXIobGlzdGVuZXI6IExpc3RlbmVyPFNpemVFdmVudD4pOiB2b2lkIHtcclxuXHRcdHRoaXMuc2l6ZUV2ZW50LnVuc3Vic2NyaWJlKGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBmaXJlU2l6ZUV2ZW50KGV2ZW50OiBTaXplRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2l6ZUV2ZW50LnB1Ymxpc2goZXZlbnQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNpemVDYW52YXMod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGRldmljZVBpeGVsUmF0aW86IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Y29uc3Qgc2NhbGVNb2RlID0gdGhpcy5jYW52YXMuZ2V0QXR0cmlidXRlKFwic2NhbGVcIik7XHJcblxyXG5cdFx0aWYgKHNjYWxlTW9kZSAmJiBzY2FsZU1vZGUgPT09IFwiZnVsbFwiKSB7XHJcblx0XHRcdHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvO1xyXG5cdFx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQgKiBkZXZpY2VQaXhlbFJhdGlvO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcblx0XHR0aGlzLmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBSZW5kZXJTdXJmYWNlIH07IiwiaW1wb3J0IHsgU2hhcGVSZW5kZXJlciB9IGZyb20gXCIuL3NoYXBlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgU2VsZWN0U2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvc2VsZWN0LnNoYXBlXCI7XHJcblxyXG5jbGFzcyBTZWxlY3RSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IEZSQU1FX0NPTE9SID0gXCIjRkYwMDY0XCI7XHJcblxyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogU2VsZWN0U2hhcGUsIGRpcnR5UmVnaW9uOiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHAwID0gc2hhcGUucG9pbnRzWzBdO1xyXG5cdFx0Y29uc3QgcDEgPSBzaGFwZS5wb2ludHNbMV07XHJcblxyXG5cdFx0aWYgKCFwMCB8fCAhcDEpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHdpZHRoID0gMiAvIGNvbnRleHQuZ2V0VHJhbnNmb3JtRXh0KCkuZ2V0U2NhbGVYKCk7XHJcblx0XHRjb25zdCBkYXNoID0gNCAvIGNvbnRleHQuZ2V0VHJhbnNmb3JtRXh0KCkuZ2V0U2NhbGVZKCk7XHJcblxyXG5cdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRcdGNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLkZSQU1FX0NPTE9SO1xyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSB3aWR0aDtcclxuXHRcdGNvbnRleHQubGluZURhc2hPZmZzZXQgPSAwO1xyXG5cdFx0Y29udGV4dC5zZXRMaW5lRGFzaChbZGFzaF0pO1xyXG5cdFx0Y29udGV4dC5saW5lQ2FwID0gXCJidXR0XCI7XHJcblx0XHRjb250ZXh0LmxpbmVKb2luID0gXCJiZXZlbFwiO1xyXG5cdFx0Y29udGV4dC5yZWN0KHAwLngsIHAwLnksIHAxLnggLSBwMC54LCBwMS55IC0gcDAueSk7XHJcblx0XHRjb250ZXh0LnN0cm9rZSgpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFNlbGVjdFJlbmRlcmVyIH07IiwiaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJTdXJmYWNlIH0gZnJvbSBcIi4vcmVuZGVyLXN1cmZhY2VcIjtcclxuaW1wb3J0IHsgU2xpZGVSZW5kZXJlciB9IGZyb20gXCIuL3NsaWRlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNsaWRlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvc2xpZGUuc2hhcGVcIjtcclxuXHJcbmNsYXNzIFNsaWRlUmVuZGVyU3VyZmFjZSBleHRlbmRzIFJlbmRlclN1cmZhY2Uge1xyXG5cclxuXHRyZW5kZXJTbGlkZVNoYXBlKHNoYXBlOiBTbGlkZVNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogUHJvbWlzZTxDYW52YXNJbWFnZVNvdXJjZT4ge1xyXG5cdFx0aWYgKCF0aGlzLmNhbnZhc0NvbnRleHQuY2FudmFzLnN0eWxlLndpZHRoIHx8ICF0aGlzLmNhbnZhc0NvbnRleHQuY2FudmFzLnN0eWxlLmhlaWdodCkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHRcdHJlamVjdCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgcmVuZGVyZXIgPSA8U2xpZGVSZW5kZXJlcj4gdGhpcy5yZW5kZXJlcnMuZ2V0KHNoYXBlLmNvbnN0cnVjdG9yLm5hbWUpO1xyXG5cdFx0bGV0IHByb21pc2U6IFByb21pc2U8Q2FudmFzSW1hZ2VTb3VyY2U+ID0gbnVsbDtcclxuXHJcblx0XHRpZiAocmVuZGVyZXIpIHtcclxuXHRcdFx0Y29uc3QgcGFnZVJlY3QgPSBzaGFwZS5ib3VuZHM7XHJcblxyXG5cdFx0XHRjb25zdCBzeCA9IHRoaXMuY2FudmFzLndpZHRoIC8gcGFnZVJlY3Qud2lkdGg7XHJcblx0XHRcdC8vY29uc3Qgc3kgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyBwYWdlUmVjdC5oZWlnaHQ7XHJcblxyXG5cdFx0XHR0aGlzLmNhbnZhc0NvbnRleHQuc2F2ZSgpO1xyXG5cdFx0XHR0aGlzLmNhbnZhc0NvbnRleHQuc2NhbGUoc3gsIHN4KTtcclxuXHJcblx0XHRcdHByb21pc2UgPSByZW5kZXJlci5yZW5kZXIodGhpcy5jYW52YXNDb250ZXh0LCBzaGFwZSwgZGlydHlSZWdpb24pO1xyXG5cclxuXHRcdFx0dGhpcy5jYW52YXNDb250ZXh0LnJlc3RvcmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFNsaWRlUmVuZGVyU3VyZmFjZSB9OyIsImltcG9ydCB7IFNoYXBlUmVuZGVyZXIgfSBmcm9tIFwiLi9zaGFwZS5yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFNsaWRlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvc2xpZGUuc2hhcGVcIjtcclxuXHJcbmNsYXNzIFNsaWRlUmVuZGVyZXIgaW1wbGVtZW50cyBTaGFwZVJlbmRlcmVyIHtcclxuXHJcblx0YXN5bmMgcmVuZGVyKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2hhcGU6IFNsaWRlU2hhcGUsIGRpcnR5UmVnaW9uOiBSZWN0YW5nbGUpOiBQcm9taXNlPENhbnZhc0ltYWdlU291cmNlPiB7XHJcblx0XHRjb25zdCBwYWdlID0gc2hhcGUuZ2V0UGFnZSgpO1xyXG5cclxuXHRcdHJldHVybiBwYWdlLnJlbmRlcihjb250ZXh0LCBzaGFwZS5ib3VuZHMsIGRpcnR5UmVnaW9uKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFNsaWRlUmVuZGVyZXIgfTsiLCJpbXBvcnQgeyBTaGFwZVJlbmRlcmVyIH0gZnJvbSBcIi4vc2hhcGUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBUZXh0SGlnaGxpZ2h0U2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvdGV4dC1oaWdobGlnaHQuc2hhcGVcIjtcclxuXHJcbmNsYXNzIFRleHRIaWdobGlnaHRSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogVGV4dEhpZ2hsaWdodFNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogdm9pZCB7XHJcblx0XHRjb25zdCBib3VuZHMgPSBzaGFwZS5ib3VuZHM7XHJcblxyXG5cdFx0aWYgKGJvdW5kcy5pc0VtcHR5KCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gMTtcclxuXHRcdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJtdWx0aXBseVwiO1xyXG5cdFx0Y29udGV4dC5maWxsU3R5bGUgPSBzaGFwZS5nZXRDb2xvcigpLnRvUmdiYSgpO1xyXG5cdFx0Y29udGV4dC5yZWN0KGJvdW5kcy54LCBib3VuZHMueSwgYm91bmRzLndpZHRoLCBib3VuZHMuaGVpZ2h0KTtcclxuXHRcdGNvbnRleHQuZmlsbCgpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dEhpZ2hsaWdodFJlbmRlcmVyIH07IiwiaW1wb3J0IHsgUGFnZSB9IGZyb20gXCIuLi9tb2RlbC9wYWdlXCI7XHJcbmltcG9ydCB7IERpbWVuc2lvbiB9IGZyb20gXCIuLi9nZW9tZXRyeS9kaW1lbnNpb25cIjtcclxuXHJcbmNsYXNzIFRleHRMYXllclN1cmZhY2Uge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHJvb3Q6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHNpemU6IERpbWVuc2lvbjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHJvb3Q6IEhUTUxFbGVtZW50KSB7XHJcblx0XHR0aGlzLnJvb3QgPSByb290O1xyXG5cdH1cclxuXHJcblx0Y2xlYXIoKTogdm9pZCB7XHJcblx0XHR3aGlsZSAodGhpcy5yb290LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0dGhpcy5yb290LnJlbW92ZUNoaWxkKHRoaXMucm9vdC5maXJzdENoaWxkKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlbmRlcihwYWdlOiBQYWdlKSB7XHJcblx0XHR0aGlzLmNsZWFyKCk7XHJcblxyXG5cdFx0cGFnZS5yZW5kZXJUZXh0KHRoaXMucm9vdCwgdGhpcy5zaXplKTtcclxuXHR9XHJcblxyXG5cdGdldFNpemUoKTogRGltZW5zaW9uIHtcclxuXHRcdHJldHVybiB0aGlzLnNpemU7XHJcblx0fVxyXG5cclxuXHRzZXRTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLnNpemUgPSBuZXcgRGltZW5zaW9uKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuXHRcdHRoaXMucm9vdC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG5cdFx0dGhpcy5yb290LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRleHRMYXllclN1cmZhY2UgfTsiLCJpbXBvcnQgeyBTaGFwZVJlbmRlcmVyIH0gZnJvbSBcIi4vc2hhcGUucmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgVGV4dFNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3RleHQuc2hhcGVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBGb250IH0gZnJvbSBcIi4uL3BhaW50L2ZvbnRcIjtcclxuXHJcbmNsYXNzIFRleHRSZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRyZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBzaGFwZTogVGV4dFNoYXBlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogdm9pZCB7XHJcblx0XHRjb25zdCB0ZXh0ID0gc2hhcGUuZ2V0VGV4dCgpO1xyXG5cclxuXHRcdGlmICghdGV4dCB8fCB0ZXh0Lmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYm91bmRzID0gc2hhcGUuYm91bmRzO1xyXG5cdFx0Y29uc3QgZm9udCA9IHNoYXBlLmdldEZvbnQoKTtcclxuXHJcblx0XHRjb25zdCB0cmFuc2Zvcm0gPSBjb250ZXh0LmdldFRyYW5zZm9ybUV4dCgpO1xyXG5cdFx0Y29uc3Qgc2NhbGUgPSB0cmFuc2Zvcm0uZ2V0U2NhbGVYKCk7XHJcblxyXG5cdFx0LypcclxuXHRcdCAqIFJlbmRlciB3aXRoIGlkZW50aXR5IHRyYW5zZm9ybSBhbmQgc2NhbGVkIGZvbnQsIHNpbmNlIG5vcm1hbGl6ZWRcclxuXHRcdCAqIGZvbnQgc2l6ZSB3b24ndCBnaXZlIHVzIHRoZSBkZXNpcmVkIHJlc3VsdCBhcyB0aGUgdGV4dCB3aWxsIGJlXHJcblx0XHQgKiBtaXNwbGFjZWQgYW5kIG1pc3NpemVkLlxyXG5cdFx0ICovXHJcblx0XHRjb25zdCBzY2FsZWRIZWlnaHQgPSBmb250LnNpemUgKiBzY2FsZTtcclxuXHRcdGNvbnN0IHggPSB0cmFuc2Zvcm0uZ2V0VHJhbnNsYXRlWCgpICsgYm91bmRzLnggKiBzY2FsZTtcclxuXHRcdGNvbnN0IHkgPSB0cmFuc2Zvcm0uZ2V0VHJhbnNsYXRlWSgpICsgYm91bmRzLnkgKiBzY2FsZTtcclxuXHJcblx0XHRjb25zdCBzY2FsZWRGb250ID0gbmV3IEZvbnQoZm9udC5mYW1pbHksIHNjYWxlZEhlaWdodCwgZm9udC5zdHlsZSwgZm9udC53ZWlnaHQpO1xyXG5cclxuXHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xyXG5cdFx0Y29udGV4dC5mb250ID0gc2NhbGVkRm9udC50b1N0cmluZygpO1xyXG5cdFx0Y29udGV4dC5maWxsU3R5bGUgPSBzaGFwZS5nZXRUZXh0Q29sb3IoKS50b1JnYmEoKTtcclxuXHRcdGNvbnRleHQuZmlsbFRleHQodGV4dCwgeCwgeSArIHNjYWxlZEhlaWdodCk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBUZXh0UmVuZGVyZXIgfTsiLCJpbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcblxyXG5jbGFzcyBXaGl0ZWJvYXJkUmVuZGVyZXIge1xyXG5cclxuXHRhc3luYyByZW5kZXIoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB2aWV3UmVjdDogUmVjdGFuZ2xlLCBkaXJ0eVJlZ2lvbjogUmVjdGFuZ2xlKTogUHJvbWlzZTxDYW52YXNJbWFnZVNvdXJjZT4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdGNvbnRleHQuY2FudmFzLndpZHRoID0gZGlydHlSZWdpb24ud2lkdGg7XHJcblx0XHRcdGNvbnRleHQuY2FudmFzLmhlaWdodCA9IGRpcnR5UmVnaW9uLmhlaWdodDtcclxuXHRcdFx0Y29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcblx0XHRcdGNvbnRleHQuZmlsbFJlY3QoZGlydHlSZWdpb24ueCwgZGlydHlSZWdpb24ueSwgZGlydHlSZWdpb24ud2lkdGgsIGRpcnR5UmVnaW9uLmhlaWdodCk7XHJcblxyXG5cdFx0XHRyZXNvbHZlKGNvbnRleHQuY2FudmFzKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgV2hpdGVib2FyZFJlbmRlcmVyIH07IiwiaW1wb3J0IHsgU2hhcGVSZW5kZXJlciB9IGZyb20gXCIuL3NoYXBlLnJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgWm9vbVNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3pvb20uc2hhcGVcIjtcclxuXHJcbmNsYXNzIFpvb21SZW5kZXJlciBpbXBsZW1lbnRzIFNoYXBlUmVuZGVyZXIge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IEZJTExfQ09MT1IgPSBcInJnYmEoMCwgMTYzLCAyMzIsIDAuNClcIjtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBGUkFNRV9DT0xPUiA9IFwicmdiKDI1NSwgMCwgMTAwKVwiO1xyXG5cclxuXHJcblx0cmVuZGVyKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2hhcGU6IFpvb21TaGFwZSwgZGlydHlSZWdpb246IFJlY3RhbmdsZSk6IHZvaWQge1xyXG5cdFx0Y29uc3QgYm91bmRzID0gc2hhcGUuYm91bmRzO1xyXG5cclxuXHRcdGNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5GSUxMX0NPTE9SO1xyXG5cdFx0Y29udGV4dC5maWxsUmVjdChib3VuZHMueCwgYm91bmRzLnksIGJvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodCk7XHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMuRlJBTUVfQ09MT1I7XHJcblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IDIgLyBjb250ZXh0LmdldFRyYW5zZm9ybUV4dCgpLmdldFNjYWxlWCgpO1xyXG5cdFx0Y29udGV4dC5yZWN0KGJvdW5kcy54LCBib3VuZHMueSwgYm91bmRzLndpZHRoLCBib3VuZHMuaGVpZ2h0KTtcclxuXHRcdGNvbnRleHQuc3Ryb2tlKCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgWm9vbVJlbmRlcmVyIH07IiwiaW1wb3J0IHsgUHJvZ3Jlc3NpdmVEYXRhVmlldyB9IGZyb20gXCIuLi9hY3Rpb24vcGFyc2VyL3Byb2dyZXNzaXZlLWRhdGEtdmlld1wiO1xyXG5pbXBvcnQgeyBSZWNvcmRlZFBhZ2VQYXJzZXIgfSBmcm9tIFwiLi4vYWN0aW9uL3BhcnNlci9yZWNvcmRlZC1wYWdlLnBhcnNlclwiO1xyXG5pbXBvcnQgeyBTaW1wbGVBY3Rpb25FeGVjdXRvciB9IGZyb20gXCIuLi9hY3Rpb24vc2ltcGxlLWFjdGlvbi1leGVjdXRvclwiO1xyXG5pbXBvcnQgeyBDb3Vyc2VTdGF0ZSB9IGZyb20gXCIuLi9tb2RlbC9jb3Vyc2Utc3RhdGVcIjtcclxuaW1wb3J0IHsgQ291cnNlU3RhdGVEb2N1bWVudCB9IGZyb20gXCIuLi9tb2RlbC9jb3Vyc2Utc3RhdGUtZG9jdW1lbnRcIjtcclxuaW1wb3J0IHsgU2xpZGVEb2N1bWVudCB9IGZyb20gXCIuLi9tb2RlbC9kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBSZWNvcmRlZFBhZ2UgfSBmcm9tIFwiLi4vbW9kZWwvcmVjb3JkZWQtcGFnZVwiO1xyXG5pbXBvcnQgeyBXaGl0ZWJvYXJkRG9jdW1lbnQgfSBmcm9tIFwiLi4vbW9kZWwvd2hpdGVib2FyZC5kb2N1bWVudFwiO1xyXG5pbXBvcnQgeyBIdHRwUmVxdWVzdCB9IGZyb20gXCIuLi91dGlscy9odHRwLXJlcXVlc3RcIjtcclxuaW1wb3J0IHsgRG9jdW1lbnRTZXJ2aWNlIH0gZnJvbSBcIi4vZG9jdW1lbnQuc2VydmljZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvdXJzZVN0YXRlU2VydmljZSB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgYXBpUGF0aCA9IFwiL2NvdXJzZS9zdGF0ZVwiO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhvc3Q6IHN0cmluZztcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGhvc3Q6IHN0cmluZykge1xyXG5cdFx0dGhpcy5ob3N0ID0gaG9zdDtcclxuXHR9XHJcblxyXG5cdGdldENvdXJzZVN0YXRlKGNvdXJzZUlkOiBudW1iZXIpOiBQcm9taXNlPENvdXJzZVN0YXRlPiB7XHJcblx0XHRyZXR1cm4gbmV3IEh0dHBSZXF1ZXN0KCkuZ2V0KHRoaXMuZ2V0RnVsbFBhdGgoXCIvXCIgKyBjb3Vyc2VJZCkpO1xyXG5cdH1cclxuXHJcblx0Z2V0U3RhdGVEb2N1bWVudChjb3Vyc2VJZDogbnVtYmVyLCBzdGF0ZURvYzogQ291cnNlU3RhdGVEb2N1bWVudCk6IFByb21pc2U8U2xpZGVEb2N1bWVudD4ge1xyXG5cdFx0aWYgKHN0YXRlRG9jLmRvY3VtZW50RmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2U8U2xpZGVEb2N1bWVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHRcdG5ldyBIdHRwUmVxdWVzdCgpLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLmdldDxBcnJheUJ1ZmZlcj4oc3RhdGVEb2MuZG9jdW1lbnRGaWxlKVxyXG5cdFx0XHRcdFx0LnRoZW4oKGRhdGFCdWZmZXI6IEFycmF5QnVmZmVyKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICghZGF0YUJ1ZmZlcikge1xyXG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlJlY2VpdmVkIGVtcHR5IGNvdXJzZSBkb2N1bWVudFwiKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zdCBieXRlQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZGF0YUJ1ZmZlcik7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGRvY1NlcnZpY2UgPSBuZXcgRG9jdW1lbnRTZXJ2aWNlKCk7XHJcblxyXG5sZXQgYURvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG5jb25zdCBibG9iID0gbmV3IEJsb2IoW2J5dGVCdWZmZXJdLHt0eXBlOidhcHBsaWNhdGlvbi9wZGYnfSk7XHJcblxyXG5pZiAoJ2Rvd25sb2FkJyBpbiBhRG9tKXtcclxuLy8gICAgYURvbS50eXBlID0gJ2Rvd25sb2FkJ1xyXG4gICBhRG9tLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpXHJcbiAgIGFEb20uZG93bmxvYWQgPSBzdGF0ZURvYy5kb2N1bWVudE5hbWUgKyAnLnBkZidcclxuICAgYURvbS50YXJnZXQgPSBcIl9ibGFua1wiO1xyXG4vLyAgICBhRG9tLmNsaWNrKCk7XHJcbn1cclxuXHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYURvbSk7XHJcblxyXG5cdFxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZG9jU2VydmljZS5sb2FkRG9jdW1lbnQoYnl0ZUJ1ZmZlcik7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LnRoZW4oKHNsaWRlRG9jOiBTbGlkZURvY3VtZW50KSA9PiB7XHJcblx0XHRcdFx0XHRcdHNsaWRlRG9jLnNldERvY3VtZW50SWQoc3RhdGVEb2MuZG9jdW1lbnRJZCk7XHJcblxyXG5cdFx0XHRcdFx0XHR0aGlzLnByZWxvYWRTbGlkZURvY3VtZW50KGNvdXJzZUlkLCBzdGF0ZURvYywgc2xpZGVEb2MpXHJcblx0XHRcdFx0XHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShzbGlkZURvYyk7XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0XHQuY2F0Y2goKGVycm9yOiBhbnkpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LmNhdGNoKChlcnJvcjogYW55KSA9PiB7XHJcblx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPFNsaWRlRG9jdW1lbnQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2xpZGVEb2MgPSBuZXcgV2hpdGVib2FyZERvY3VtZW50KCk7XHJcblx0XHRcdHNsaWRlRG9jLnNldERvY3VtZW50SWQoc3RhdGVEb2MuZG9jdW1lbnRJZCk7XHJcblxyXG5cdFx0XHR0aGlzLnByZWxvYWRTbGlkZURvY3VtZW50KGNvdXJzZUlkLCBzdGF0ZURvYywgc2xpZGVEb2MpXHJcblx0XHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShzbGlkZURvYyk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY2F0Y2goKGVycm9yOiBhbnkpID0+IHtcclxuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0U3RhdGVEb2N1bWVudEFjdGlvbnMoY291cnNlSWQ6IG51bWJlciwgc3RhdGVEb2M6IENvdXJzZVN0YXRlRG9jdW1lbnQpOiBQcm9taXNlPFJlY29yZGVkUGFnZVtdPiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8UmVjb3JkZWRQYWdlW10+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0cmV0dXJuIG5ldyBIdHRwUmVxdWVzdCgpLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpLmdldDxBcnJheUJ1ZmZlcj4odGhpcy5nZXRGdWxsUGF0aChcIi9cIiArIGNvdXJzZUlkICsgXCIvcGFnZXMvXCIgKyBzdGF0ZURvYy5kb2N1bWVudElkKSlcclxuXHRcdFx0XHQudGhlbigoZGF0YUJ1ZmZlcjogQXJyYXlCdWZmZXIpID0+IHtcclxuXHRcdFx0XHRcdGlmICghZGF0YUJ1ZmZlcikge1xyXG5cdFx0XHRcdFx0XHRyZWplY3QoXCJSZWNlaXZlZCBlbXB0eSBjb3Vyc2UgZG9jdW1lbnRcIik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRjb25zdCBkYXRhVmlldyA9IG5ldyBQcm9ncmVzc2l2ZURhdGFWaWV3KGRhdGFCdWZmZXIpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYnVmZmVyTGVuZ3RoID0gZGF0YUJ1ZmZlci5ieXRlTGVuZ3RoO1xyXG5cclxuXHRcdFx0XHRcdGNvbnN0IHJlY29yZGVkUGFnZXM6IFJlY29yZGVkUGFnZVtdID0gW107XHJcblxyXG5cdFx0XHRcdFx0d2hpbGUgKGRhdGFWaWV3LmJ5dGVPZmZzZXQgPCBidWZmZXJMZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZW50cnlMZW5ndGggPSBkYXRhVmlldy5nZXRJbnQzMigpO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3QgcGFnZVBhcnNlciA9IG5ldyBSZWNvcmRlZFBhZ2VQYXJzZXIoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcmVjb3JkZWRQYWdlID0gcGFnZVBhcnNlci5wYXJzZShkYXRhVmlldyk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAocmVjb3JkZWRQYWdlKSB7XHJcblx0XHRcdFx0XHRcdFx0cmVjb3JkZWRQYWdlcy5wdXNoKHJlY29yZGVkUGFnZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRyZXNvbHZlKHJlY29yZGVkUGFnZXMpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKChlcnJvcjogYW55KSA9PiB7XHJcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHByZWxvYWRTbGlkZURvY3VtZW50KGNvdXJzZUlkOiBudW1iZXIsIHN0YXRlRG9jOiBDb3Vyc2VTdGF0ZURvY3VtZW50LCBzbGlkZURvYzogU2xpZGVEb2N1bWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0U3RhdGVEb2N1bWVudEFjdGlvbnMoY291cnNlSWQsIHN0YXRlRG9jKVxyXG5cdFx0XHQudGhlbigocGFnZXM6IFJlY29yZGVkUGFnZVtdKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJlLWxvYWQgYWN0aW9ucyBmb3IgYWxsIHBhZ2VzIGluIHRoZSBkb2N1bWVudC5cclxuXHRcdFx0XHRjb25zdCBleGVjdXRvciA9IG5ldyBTaW1wbGVBY3Rpb25FeGVjdXRvcihzbGlkZURvYyk7XHJcblxyXG5cdFx0XHRcdGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xyXG5cdFx0XHRcdFx0dGhpcy5sb2FkQWN0aW9ucyhleGVjdXRvciwgcGFnZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgbG9hZEFjdGlvbnMoZXhlY3V0b3I6IFNpbXBsZUFjdGlvbkV4ZWN1dG9yLCByZWNQYWdlOiBSZWNvcmRlZFBhZ2UpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGFjdGlvbnMgPSByZWNQYWdlLnBsYXliYWNrQWN0aW9ucztcclxuXHRcdGxldCBhY3Rpb25Db3VudCA9IGFjdGlvbnMubGVuZ3RoO1xyXG5cclxuXHRcdGlmIChhY3Rpb25Db3VudCA8IDEpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNlbGVjdCB0aGUgcGFnZSBvbiB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb25zLlxyXG5cdFx0ZXhlY3V0b3Iuc2V0UGFnZU51bWJlcihyZWNQYWdlLnBhZ2VOdW1iZXIpO1xyXG5cclxuXHRcdGZvciAobGV0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0YWN0aW9uLmV4ZWN1dGUoZXhlY3V0b3IpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRGdWxsUGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuaG9zdCArIHRoaXMuYXBpUGF0aCArIHBhdGg7XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgZ2V0RG9jdW1lbnQgfSBmcm9tICdwZGZqcy1kaXN0JztcclxuaW1wb3J0IHsgUERGRG9jdW1lbnRQcm94eSB9IGZyb20gJ3BkZmpzLWRpc3QvdHlwZXMvc3JjL2Rpc3BsYXkvYXBpJztcclxuaW1wb3J0IHsgUGRmSnNEb2N1bWVudCB9IGZyb20gJy4uL21vZGVsL3BkZi1qcy1kb2N1bWVudCc7XHJcbmltcG9ydCB7IFNsaWRlRG9jdW1lbnQgfSBmcm9tICcuLi9tb2RlbC9kb2N1bWVudCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRTZXJ2aWNlIHtcclxuXHJcblx0bG9hZERvY3VtZW50KHNvdXJjZTogVWludDhBcnJheSk6IFByb21pc2U8U2xpZGVEb2N1bWVudD4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPFBkZkpzRG9jdW1lbnQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0Y29uc3QgbG9hZGluZ1Rhc2sgPSBnZXREb2N1bWVudChzb3VyY2UpO1xyXG5cdFx0XHRsb2FkaW5nVGFzay5wcm9taXNlXHJcblx0XHRcdFx0LnRoZW4oKHBkZjogUERGRG9jdW1lbnRQcm94eSkgPT4ge1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShuZXcgUGRmSnNEb2N1bWVudChwZGYpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaCgocmVhc29uOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdHJlamVjdChyZWFzb24pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxufSIsImltcG9ydCB7IEphbnVzIH0gZnJvbSBcImphbnVzLWdhdGV3YXlcIjtcclxuaW1wb3J0IHsgUGxheWVyVmlldyB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBQbGF5YmFja01vZGVsIH0gZnJvbSBcIi4uL21vZGVsL3BsYXliYWNrLW1vZGVsXCI7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSmFudXNTZXJ2aWNlIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBwbGF5YmFja01vZGVsOiBQbGF5YmFja01vZGVsO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHNlcnZlclVybDogc3RyaW5nO1xyXG5cclxuXHRwcml2YXRlIHBsYXllclZpZXc6IFBsYXllclZpZXc7XHJcblxyXG5cdHByaXZhdGUgamFudXM6IEphbnVzO1xyXG5cclxuXHRwcml2YXRlIHB1Ymxpc2hlckxvY2FsU3RyZWFtOiBNZWRpYVN0cmVhbTtcclxuXHJcblx0cHJpdmF0ZSBwdWJsaXNoZXJIYW5kbGU6IEphbnVzLlBsdWdpbkhhbmRsZTtcclxuXHJcblx0cHJpdmF0ZSBwdWJsaXNoZXJJZDogTnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHJlbW90ZUZlZWRzOiBQbHVnaW5IYW5kbGVbXTtcclxuXHJcblx0cHJpdmF0ZSBteXJvb206IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSBvcGFxdWVJZDogc3RyaW5nO1xyXG5cclxuXHRwcml2YXRlIGRldmljZUNvbnN0cmFpbnRzOiBhbnk7XHJcblxyXG5cdHByaXZhdGUgbXl1c2VybmFtZTogc3RyaW5nO1xyXG5cclxuXHRwcml2YXRlIGRhdGFDYWxsYmFjazogKGRhdGE6IGFueSkgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSBlcnJvckNhbGxiYWNrOiAoZGF0YTogYW55KSA9PiB2b2lkO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3Ioc2VydmVyVXJsOiBzdHJpbmcsIHBsYXliYWNrTW9kZWw6IFBsYXliYWNrTW9kZWwpIHtcclxuXHRcdHRoaXMuc2VydmVyVXJsID0gc2VydmVyVXJsO1xyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsID0gcGxheWJhY2tNb2RlbDtcclxuXHRcdHRoaXMuamFudXMgPSBudWxsO1xyXG5cdFx0dGhpcy5wdWJsaXNoZXJIYW5kbGUgPSBudWxsO1xyXG5cdFx0dGhpcy5wdWJsaXNoZXJJZCA9IG51bGw7XHJcblx0XHR0aGlzLnB1Ymxpc2hlckxvY2FsU3RyZWFtID0gbnVsbDtcclxuXHRcdHRoaXMuZGF0YUNhbGxiYWNrID0gbnVsbDtcclxuXHRcdHRoaXMucmVtb3RlRmVlZHMgPSBbXTtcclxuXHJcblx0XHR0aGlzLm9wYXF1ZUlkID0gXCJjb3Vyc2UtXCIgKyBKYW51cy5yYW5kb21TdHJpbmcoMTIpO1xyXG5cdFx0dGhpcy5teXVzZXJuYW1lID0gSmFudXMucmFuZG9tU3RyaW5nKDEyKTtcclxuXHR9XHJcblxyXG5cdHNldFBsYXllclZpZXcocGxheWVyVmlldzogUGxheWVyVmlldyk6IHZvaWQge1xyXG5cdFx0dGhpcy5wbGF5ZXJWaWV3ID0gcGxheWVyVmlldztcclxuXHR9XHJcblxyXG5cdHNldERldmljZUNvbnN0cmFpbnRzKGRldmljZUNvbnN0cmFpbnRzOiBhbnkpOiB2b2lkIHtcclxuXHRcdHRoaXMuZGV2aWNlQ29uc3RyYWludHMgPSBkZXZpY2VDb25zdHJhaW50cztcclxuXHR9XHJcblxyXG5cdHNldFVzZXJJZCh1c2VySWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5vcGFxdWVJZCA9IHVzZXJJZDtcclxuXHR9XHJcblxyXG5cdHNldFJvb21JZChyb29tSWQ6IG51bWJlcikge1xyXG5cdFx0dGhpcy5teXJvb20gPSByb29tSWQ7XHJcblx0fVxyXG5cclxuXHRzZXRPbkRhdGEoY29uc3VtZXI6IChkYXRhOiBhbnkpID0+IHZvaWQpIHtcclxuXHRcdFV0aWxzLmNoZWNrRnVuY3Rpb24oY29uc3VtZXIpO1xyXG5cclxuXHRcdHRoaXMuZGF0YUNhbGxiYWNrID0gY29uc3VtZXI7XHJcblx0fVxyXG5cclxuXHRzZXRPbkVycm9yKGNvbnN1bWVyOiAoZGF0YTogYW55KSA9PiB2b2lkKSB7XHJcblx0XHRVdGlscy5jaGVja0Z1bmN0aW9uKGNvbnN1bWVyKTtcclxuXHJcblx0XHR0aGlzLmVycm9yQ2FsbGJhY2sgPSBjb25zdW1lcjtcclxuXHR9XHJcblxyXG5cdHN0YXJ0KCkge1xyXG5cdFx0Ly8gSW5pdGlhbGl6ZSB0aGUgbGlicmFyeSAoYWxsIGNvbnNvbGUgZGVidWdnZXJzIGVuYWJsZWQpLlxyXG5cdFx0SmFudXMuaW5pdCh7XHJcblx0XHRcdC8vIGRlYnVnOiBcImFsbFwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXHJcblx0XHRcdFx0aWYgKCFKYW51cy5pc1dlYnJ0Y1N1cHBvcnRlZCgpKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiTm8gV2ViUlRDIHN1cHBvcnQuLi5cIik7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmNyZWF0ZVNlc3Npb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhZGRQZWVyKHBlZXJJZDogQmlnSW50KSB7XHJcblx0XHRjb25zdCBwdWJsaXNoZXJJZCA9IE51bWJlcihwZWVySWQpO1xyXG5cclxuXHRcdGlmICh0aGlzLnB1Ymxpc2hlcklkICE9PSBwdWJsaXNoZXJJZCkge1xyXG5cdFx0XHR0aGlzLmF0dGFjaFRvUHVibGlzaGVyKHsgaWQ6IHB1Ymxpc2hlcklkIH0sIGZhbHNlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHN0YXJ0U3BlZWNoKGRldmljZUNvbnN0cmFpbnRzOiBhbnkpIHtcclxuXHRcdC8vIENyZWF0ZSBhIG5ldyBwbHVnaW4gaGFuZGxlIGFuZCBhdHRhY2ggdG8gaXQgYXMgYSBwdWJsaXNoZXIuXHJcblx0XHR0aGlzLmphbnVzLmF0dGFjaCh7XHJcblx0XHRcdHBsdWdpbjogXCJqYW51cy5wbHVnaW4udmlkZW9yb29tXCIsXHJcblx0XHRcdG9wYXF1ZUlkOiB0aGlzLm9wYXF1ZUlkLFxyXG5cdFx0XHRzdWNjZXNzOiAocGx1Z2luSGFuZGxlOiBQbHVnaW5IYW5kbGUpID0+IHtcclxuXHRcdFx0XHRKYW51cy5sb2coXCJQbHVnaW4gYXR0YWNoZWQhIChcIiArIHBsdWdpbkhhbmRsZS5nZXRQbHVnaW4oKSArIFwiLCBpZD1cIiArIHBsdWdpbkhhbmRsZS5nZXRJZCgpICsgXCIpXCIpO1xyXG5cclxuXHRcdFx0XHR0aGlzLnB1Ymxpc2hlckhhbmRsZSA9IHBsdWdpbkhhbmRsZTtcclxuXHJcblx0XHRcdFx0dGhpcy5qb2luQXNQdWJsaXNoZXIodGhpcy5wdWJsaXNoZXJIYW5kbGUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogKGNhdXNlOiBhbnkpID0+IHtcclxuXHRcdFx0XHRKYW51cy5lcnJvcihcIiAgLS0gRXJyb3IgYXR0YWNoaW5nIHBsdWdpbi4uLlwiLCBjYXVzZSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbnNlbnREaWFsb2c6IChvbjogYm9vbGVhbikgPT4ge1xyXG5cdFx0XHRcdC8vIGUuZy4sIGRhcmtlbiB0aGUgc2NyZWVuIGlmIG9uPXRydWUgKGdldFVzZXJNZWRpYSBpbmNvbWluZyksIHJlc3RvcmUgaXQgb3RoZXJ3aXNlXHJcblx0XHRcdH0sXHJcblx0XHRcdGljZVN0YXRlOiAoc3RhdGU6ICdjb25uZWN0ZWQnIHwgJ2ZhaWxlZCcpID0+IHtcclxuXHRcdFx0XHRKYW51cy5sb2coXCJJQ0Ugc3RhdGUgY2hhbmdlZCB0byBcIiArIHN0YXRlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0bWVkaWFTdGF0ZTogKG1lZGl1bTogJ2F1ZGlvJyB8ICd2aWRlbycsIHJlY2VpdmluZzogYm9vbGVhbiwgbWlkPzogbnVtYmVyKSA9PiB7XHJcblx0XHRcdFx0SmFudXMubG9nKFwiSmFudXMgXCIgKyAocmVjZWl2aW5nID8gXCJzdGFydGVkXCIgOiBcInN0b3BwZWRcIikgKyBcIiByZWNlaXZpbmcgb3VyIFwiICsgbWVkaXVtKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0d2VicnRjU3RhdGU6IChpc0Nvbm5lY3RlZDogYm9vbGVhbikgPT4ge1xyXG5cdFx0XHRcdEphbnVzLmxvZyhcIkphbnVzIHNheXMgb3VyIFdlYlJUQyBQZWVyQ29ubmVjdGlvbiBpcyBcIiArIChpc0Nvbm5lY3RlZCA/IFwidXBcIiA6IFwiZG93blwiKSArIFwiIG5vd1wiKTtcclxuXHJcblx0XHRcdFx0dGhpcy5wbGF5YmFja01vZGVsLndlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZCA9IGlzQ29ubmVjdGVkO1xyXG5cclxuXHRcdFx0XHRpZiAoIWlzQ29ubmVjdGVkKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBsYXliYWNrTW9kZWwubG9jYWxWaWRlb0F2YWlsYWJsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5YmFja01vZGVsLnJhaXNlZEhhbmQgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdG9ubWVzc2FnZTogKG1lc3NhZ2U6IGFueSwganNlcD86IEpTRVApID0+IHtcclxuXHRcdFx0XHRjb25zdCBldmVudCA9IG1lc3NhZ2VbXCJ2aWRlb3Jvb21cIl07XHJcblxyXG5cdFx0XHRcdGlmIChtZXNzYWdlW1wiZXJyb3JcIl0pIHtcclxuXHRcdFx0XHRcdEphbnVzLmVycm9yKG1lc3NhZ2VbXCJlcnJvclwiXSk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoZXZlbnQpIHtcclxuXHRcdFx0XHRcdGlmIChldmVudCA9PT0gXCJqb2luZWRcIikge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnB1Ymxpc2hlcklkID0gbWVzc2FnZVtcImlkXCJdO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnB1Ymxpc2hPd25GZWVkKHRoaXMucHVibGlzaGVySGFuZGxlLCBkZXZpY2VDb25zdHJhaW50cyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoanNlcCkge1xyXG5cdFx0XHRcdFx0dGhpcy5wdWJsaXNoZXJIYW5kbGUuaGFuZGxlUmVtb3RlSnNlcCh7IGpzZXA6IGpzZXAgfSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgYW55IG9mIHRoZSBtZWRpYSB3ZSB3YW50ZWQgdG8gcHVibGlzaCBoYXNcclxuXHRcdFx0XHRcdC8vIGJlZW4gcmVqZWN0ZWQgKGUuZy4sIHdyb25nIG9yIHVuc3VwcG9ydGVkIGNvZGVjKVxyXG5cdFx0XHRcdFx0Y29uc3QgYXVkaW8gPSBtZXNzYWdlW1wiYXVkaW9fY29kZWNcIl07XHJcblx0XHRcdFx0XHRjb25zdCB2aWRlbyA9IG1lc3NhZ2VbXCJ2aWRlb19jb2RlY1wiXTtcclxuXHJcblx0XHRcdFx0XHRpZiAodGhpcy5wdWJsaXNoZXJMb2NhbFN0cmVhbSAmJiB0aGlzLnB1Ymxpc2hlckxvY2FsU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkgJiYgdGhpcy5wdWJsaXNoZXJMb2NhbFN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDAgJiYgIWF1ZGlvKSB7XHJcblx0XHRcdFx0XHRcdC8vIEF1ZGlvIGhhcyBiZWVuIHJlamVjdGVkXHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiT3VyIGF1ZGlvIHN0cmVhbSBoYXMgYmVlbiByZWplY3RlZCwgdmlld2VycyB3b24ndCBoZWFyIHVzXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICh0aGlzLnB1Ymxpc2hlckxvY2FsU3RyZWFtICYmIHRoaXMucHVibGlzaGVyTG9jYWxTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKSAmJiB0aGlzLnB1Ymxpc2hlckxvY2FsU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMCAmJiAhdmlkZW8pIHtcclxuXHRcdFx0XHRcdFx0Ly8gVmlkZW8gaGFzIGJlZW4gcmVqZWN0ZWQuXHJcblxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk91ciB2aWRlbyBzdHJlYW0gaGFzIGJlZW4gcmVqZWN0ZWQsIHZpZXdlcnMgd29uJ3Qgc2VlIHVzXCIpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gSGlkZSB0aGUgd2ViY2FtIHZpZGVvXHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0b25sb2NhbHN0cmVhbTogKHN0cmVhbTogTWVkaWFTdHJlYW0pID0+IHtcclxuXHRcdFx0XHR0aGlzLnB1Ymxpc2hlckxvY2FsU3RyZWFtID0gc3RyZWFtO1xyXG5cclxuXHRcdFx0XHRjb25zdCBsb2NhbFZpZGVvRmVlZCA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoXCJsb2NhbFZpZGVvRmVlZFwiKSBhcyBIVE1MTWVkaWFFbGVtZW50O1xyXG5cclxuXHRcdFx0XHRKYW51cy5hdHRhY2hNZWRpYVN0cmVhbShsb2NhbFZpZGVvRmVlZCwgc3RyZWFtKTtcclxuXHJcblx0XHRcdFx0bG9jYWxWaWRlb0ZlZWQubXV0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGxldCBoYXNWaWRlbyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHRjb25zdCBjb25zdHJhaW50cyA9IHtcclxuXHRcdFx0XHRcdHdpZHRoOiB7IG1pbjogNjQwLCBpZGVhbDogNjQwLCBtYXg6IDEyODAgfSxcclxuXHRcdFx0XHRcdGhlaWdodDogeyBtaW46IDM2MCwgaWRlYWw6IDM2MCB9LFxyXG5cdFx0XHRcdFx0YXNwZWN0UmF0aW86IHsgaWRlYWw6IDEuNzc3Nzc3Nzc3OCB9LFxyXG5cdFx0XHRcdFx0ZnJhbWVSYXRlOiB7IG1heDogMzAgfSxcclxuXHRcdFx0XHRcdGZhY2luZ01vZGU6IHsgaWRlYWw6IFwidXNlclwiIH1cclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRmb3IgKGNvbnN0IHZpZGVvVHJhY2sgb2Ygc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkpIHtcclxuXHRcdFx0XHRcdHZpZGVvVHJhY2suYXBwbHlDb25zdHJhaW50cyhjb25zdHJhaW50cyk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHZpZGVvVHJhY2subXV0ZWQgPT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdFx0aGFzVmlkZW8gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMucGxheWJhY2tNb2RlbC5sb2NhbFZpZGVvQXZhaWxhYmxlID0gaGFzVmlkZW87XHJcblx0XHRcdH0sXHJcblx0XHRcdG9ucmVtb3Rlc3RyZWFtOiAoc3RyZWFtOiBNZWRpYVN0cmVhbSkgPT4ge1xyXG5cdFx0XHRcdC8vIFRoZSBwdWJsaXNoZXIgc3RyZWFtIGlzIHNlbmRvbmx5LCB3ZSBkb24ndCBleHBlY3QgYW55dGhpbmcgaGVyZS5cclxuXHRcdFx0fSxcclxuXHRcdFx0b25jbGVhbnVwOiAoKSA9PiB7XHJcblx0XHRcdFx0XHJcblx0XHRcdH0sXHJcblx0XHRcdGRldGFjaGVkOiAoKSA9PiB7XHJcblx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c3RvcFNwZWVjaCgpIHtcclxuXHRcdHRoaXMucHVibGlzaGVySWQgPSBudWxsO1xyXG5cclxuXHRcdGlmICh0aGlzLnB1Ymxpc2hlckhhbmRsZSkge1xyXG5cdFx0XHR2YXIgdW5wdWJsaXNoID0geyByZXF1ZXN0OiBcInVucHVibGlzaFwiIH07XHJcblxyXG5cdFx0XHR0aGlzLnB1Ymxpc2hlckhhbmRsZS5zZW5kKHsgbWVzc2FnZTogdW5wdWJsaXNoIH0pO1xyXG5cclxuXHRcdFx0dGhpcy5wbGF5YmFja01vZGVsLmxvY2FsVmlkZW9BdmFpbGFibGUgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlU2Vzc2lvbigpIHtcclxuXHRcdHRoaXMuamFudXMgPSBuZXcgSmFudXMoe1xyXG5cdFx0XHRzZXJ2ZXI6IHRoaXMuc2VydmVyVXJsLFxyXG5cdFx0XHRzdWNjZXNzOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5hdHRhY2goKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3I6IChjYXVzZTogYW55KSA9PiB7XHJcblx0XHRcdFx0SmFudXMuZXJyb3IoY2F1c2UpO1xyXG5cclxuXHRcdFx0XHRpZiAodGhpcy5lcnJvckNhbGxiYWNrKSB7XHJcblx0XHRcdFx0XHR0aGlzLmVycm9yQ2FsbGJhY2soY2F1c2UpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0ZGVzdHJveWVkOiAoKSA9PiB7XHJcblx0XHRcdFx0SmFudXMubG9nKFwiSmFudXMgZGVzdHJveWVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXR0YWNoKCkge1xyXG5cdFx0dGhpcy5qYW51cy5hdHRhY2goe1xyXG5cdFx0XHRwbHVnaW46IFwiamFudXMucGx1Z2luLnZpZGVvcm9vbVwiLFxyXG5cdFx0XHRvcGFxdWVJZDogdGhpcy5vcGFxdWVJZCxcclxuXHRcdFx0c3VjY2VzczogKHBsdWdpbkhhbmRsZTogUGx1Z2luSGFuZGxlKSA9PiB7XHJcblx0XHRcdFx0SmFudXMubG9nKFwiUGx1Z2luIGF0dGFjaGVkISAoXCIgKyBwbHVnaW5IYW5kbGUuZ2V0UGx1Z2luKCkgKyBcIiwgaWQ9XCIgKyBwbHVnaW5IYW5kbGUuZ2V0SWQoKSArIFwiKVwiKTtcclxuXHJcblx0XHRcdFx0dGhpcy5nZXRQYXJ0aWNpcGFudHMocGx1Z2luSGFuZGxlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0b25tZXNzYWdlOiAobWVzc2FnZTogYW55LCBqc2VwPzogSlNFUCkgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiaW5pdCBoYW5kbGVyXCIsIG1lc3NhZ2UpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogKGNhdXNlOiBhbnkpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiICAtLSBFcnJvciBhdHRhY2hpbmcgcGx1Z2luLi4uXCIsIGNhdXNlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZGV0YWNoZWQ6ICgpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcImRldGFjaGVkIG1haW4uLi5cIik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRQYXJ0aWNpcGFudHMocGx1Z2luSGFuZGxlOiBQbHVnaW5IYW5kbGUpIHtcclxuXHRcdGNvbnN0IGxpc3QgPSB7XHJcblx0XHRcdHJlcXVlc3Q6IFwibGlzdHBhcnRpY2lwYW50c1wiLFxyXG5cdFx0XHRyb29tOiB0aGlzLm15cm9vbSxcclxuXHRcdH07XHJcblxyXG5cdFx0cGx1Z2luSGFuZGxlLnNlbmQoe1xyXG5cdFx0XHRtZXNzYWdlOiBsaXN0LFxyXG5cdFx0XHRzdWNjZXNzOiAocmVzOiBhbnkpID0+IHtcclxuXHRcdFx0XHRjb25zdCBjYW5Kb2luID0gcmVzLnBhcnRpY2lwYW50cyAmJiByZXMucGFydGljaXBhbnRzLmxlbmd0aCA+IDA7XHJcblxyXG5cdFx0XHRcdGlmIChjYW5Kb2luKSB7XHJcblx0XHRcdFx0XHRmb3IgKGxldCBpIGluIHJlcy5wYXJ0aWNpcGFudHMpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcHVibGlzaGVyID0gcmVzLnBhcnRpY2lwYW50c1tpXTtcclxuXHJcblx0XHRcdFx0XHRcdHRoaXMuYXR0YWNoVG9QdWJsaXNoZXIocHVibGlzaGVyLCAhcHVibGlzaGVyLmRpc3BsYXkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdEphbnVzLmVycm9yKFwiUmVxdWVzdGVkIGZlZWQgaXMgbm90IGF2YWlsYWJsZSBhbnltb3JlXCIpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cGx1Z2luSGFuZGxlLmRldGFjaCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXR0YWNoVG9QdWJsaXNoZXIocHVibGlzaGVyOiBhbnksIGlzUHJpbWFyeTogYm9vbGVhbikge1xyXG5cdFx0bGV0IHJlbW90ZUZlZWQ6IFBsdWdpbkhhbmRsZSA9IG51bGw7XHJcblxyXG5cdFx0dGhpcy5qYW51cy5hdHRhY2goe1xyXG5cdFx0XHRwbHVnaW46IFwiamFudXMucGx1Z2luLnZpZGVvcm9vbVwiLFxyXG5cdFx0XHRvcGFxdWVJZDogdGhpcy5vcGFxdWVJZCxcclxuXHRcdFx0c3VjY2VzczogKHBsdWdpbkhhbmRsZTogUGx1Z2luSGFuZGxlKSA9PiB7XHJcblx0XHRcdFx0cmVtb3RlRmVlZCA9IHBsdWdpbkhhbmRsZTtcclxuXHRcdFx0XHRyZW1vdGVGZWVkLmlzUHJpbWFyeSA9IGlzUHJpbWFyeTtcclxuXHRcdFx0XHRyZW1vdGVGZWVkLmhhc1ZpZGVvID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHN1YnNjcmliZSA9IHtcclxuXHRcdFx0XHRcdHJlcXVlc3Q6IFwiam9pblwiLFxyXG5cdFx0XHRcdFx0cm9vbTogdGhpcy5teXJvb20sXHJcblx0XHRcdFx0XHRwdHlwZTogXCJzdWJzY3JpYmVyXCIsXHJcblx0XHRcdFx0XHRmZWVkOiBwdWJsaXNoZXIuaWRcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRyZW1vdGVGZWVkLnNlbmQoeyBtZXNzYWdlOiBzdWJzY3JpYmUgfSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiAoY2F1c2U6IGFueSkgPT4ge1xyXG5cdFx0XHRcdEphbnVzLmVycm9yKFwiICAtLSBFcnJvciBhdHRhY2hpbmcgcGx1Z2luLi4uXCIsIGNhdXNlKTtcclxuXHJcblx0XHRcdFx0aWYgKHJlbW90ZUZlZWQuaXNQcmltYXJ5KSB7XHJcblx0XHRcdFx0XHR0aGlzLnN0b3BTcGVlY2goKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGljZVN0YXRlOiAoc3RhdGU6ICdjb25uZWN0ZWQnIHwgJ2ZhaWxlZCcpID0+IHtcclxuXHRcdFx0XHRKYW51cy5sb2coXCJJQ0Ugc3RhdGUgY2hhbmdlZCB0byBcIiArIHN0YXRlKTtcclxuXHJcblx0XHRcdFx0aWYgKHN0YXRlID09PSBcImZhaWxlZFwiICYmIHRoaXMuZXJyb3JDYWxsYmFjaykge1xyXG5cdFx0XHRcdFx0dGhpcy5lcnJvckNhbGxiYWNrKHtcclxuXHRcdFx0XHRcdFx0Y2F1c2U6IFwiSUNFIGZhaWxlZFwiXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdG1lZGlhU3RhdGU6IChtZWRpdW06ICdhdWRpbycgfCAndmlkZW8nLCByZWNlaXZpbmc6IGJvb2xlYW4sIG1pZD86IG51bWJlcikgPT4ge1xyXG5cdFx0XHRcdEphbnVzLmxvZyhcIkphbnVzIFwiICsgKHJlY2VpdmluZyA/IFwic3RhcnRlZFwiIDogXCJzdG9wcGVkXCIpICsgXCIgcmVjZWl2aW5nIG91ciBcIiArIG1lZGl1bSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHdlYnJ0Y1N0YXRlOiAoaXNDb25uZWN0ZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRKYW51cy5sb2coXCJKYW51cyBzYXlzIG91ciBXZWJSVEMgUGVlckNvbm5lY3Rpb24gaXMgXCIgKyAoaXNDb25uZWN0ZWQgPyBcInVwXCIgOiBcImRvd25cIikgKyBcIiBub3dcIik7XHJcblxyXG5cdFx0XHRcdGlmIChyZW1vdGVGZWVkLmlzUHJpbWFyeSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5YmFja01vZGVsLndlYnJ0Y0Nvbm5lY3RlZCA9IGlzQ29ubmVjdGVkO1xyXG5cclxuXHRcdFx0XHRcdGlmICghaXNDb25uZWN0ZWQpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zdG9wU3BlZWNoKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRvbm1lc3NhZ2U6IChtZXNzYWdlOiBhbnksIGpzZXA/OiBKU0VQKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZXZlbnQgPSBtZXNzYWdlW1widmlkZW9yb29tXCJdO1xyXG5cclxuXHRcdFx0XHRpZiAobWVzc2FnZVtcImVycm9yXCJdKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKG1lc3NhZ2VbXCJlcnJvclwiXSk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoZXZlbnQpIHtcclxuXHRcdFx0XHRcdGlmIChldmVudCA9PT0gXCJhdHRhY2hlZFwiKSB7XHJcblx0XHRcdFx0XHRcdC8vIFN1YnNjcmliZXIgY3JlYXRlZCBhbmQgYXR0YWNoZWQuXHJcblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlN1Y2Nlc3NmdWxseSBhdHRhY2hlZCB0byBmZWVkIFwiICsgbWVzc2FnZVtcImlkXCJdICsgXCIgKFwiICsgbWVzc2FnZVtcImRpc3BsYXlcIl0gKyBcIikgaW4gcm9vbSBcIiArIG1lc3NhZ2VbXCJyb29tXCJdKTtcclxuXHJcblx0XHRcdFx0XHRcdHJlbW90ZUZlZWQucmZpZCA9IG1lc3NhZ2VbXCJpZFwiXTtcclxuXHJcblx0XHRcdFx0XHRcdHRoaXMucmVtb3RlRmVlZHMucHVzaChyZW1vdGVGZWVkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChqc2VwKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUFuc3dlcihyZW1vdGVGZWVkLCBqc2VwLCByZW1vdGVGZWVkLmlzUHJpbWFyeSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRvbnJlbW90ZXN0cmVhbTogKHN0cmVhbTogTWVkaWFTdHJlYW0pID0+IHtcclxuXHRcdFx0XHRsZXQgaGFzVmlkZW8gPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0Zm9yIChjb25zdCB2aWRlb1RyYWNrIG9mIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpKSB7XHJcblx0XHRcdFx0XHRpZiAodmlkZW9UcmFjay5tdXRlZCA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCByZW1vdmVMaXN0ZW5lciA9IChldmVudDogTWVkaWFTdHJlYW1UcmFja0V2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5vblZpZGVvVHJhY2tSZW1vdmVkKHJlbW90ZUZlZWQsIGV2ZW50LnRyYWNrKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0c3RyZWFtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZW1vdmV0cmFja1wiLCByZW1vdmVMaXN0ZW5lcik7XHJcblx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0XHRzdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcInJlbW92ZXRyYWNrXCIsIHJlbW92ZUxpc3RlbmVyKTtcclxuXHJcblx0XHRcdFx0XHRcdGhhc1ZpZGVvID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZW1vdGVGZWVkLmhhc1ZpZGVvID0gaGFzVmlkZW87XHJcblxyXG5cdFx0XHRcdGlmIChyZW1vdGVGZWVkLmlzUHJpbWFyeSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmlkZW8gPSB0aGlzLnBsYXllclZpZXcuZ2V0TWVkaWFFbGVtZW50KCkgYXMgSFRNTFZpZGVvRWxlbWVudDtcclxuXHJcblx0XHRcdFx0XHRKYW51cy5hdHRhY2hNZWRpYVN0cmVhbSh2aWRlbywgc3RyZWFtKTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLnNldEF1ZGlvU2luayh2aWRlbywgdGhpcy5kZXZpY2VDb25zdHJhaW50cy5hdWRpb091dHB1dCk7XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5wbGF5YmFja01vZGVsLm1haW5WaWRlb0F2YWlsYWJsZSA9IGhhc1ZpZGVvO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdGxldCB2aWRlbyA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0ZlZWQtXCIgKyBwdWJsaXNoZXIuaWQpIGFzIEhUTUxWaWRlb0VsZW1lbnQ7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCF2aWRlbykge1xyXG5cdFx0XHRcdFx0XHR2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtcclxuXHRcdFx0XHRcdFx0dmlkZW8uaWQgPSBcInZpZGVvRmVlZC1cIiArIHB1Ymxpc2hlci5pZDtcclxuXHRcdFx0XHRcdFx0dmlkZW8uYXV0b3BsYXkgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR2aWRlby5wbGF5c0lubGluZSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBmb3IgKGNvbnN0IGtleSBpbiB2aWRlbykge1xyXG5cdFx0XHRcdFx0XHQvLyBcdGlmKC9eb24vLnRlc3Qoa2V5KSkge1xyXG5cdFx0XHRcdFx0XHQvLyBcdFx0Y29uc3QgZXZlbnRUeXBlID0ga2V5LnN1YnN0cigyKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcImFkZEV2ZW50TGlzdGVuZXI6IFwiICsgZXZlbnRUeXBlKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFx0XHRpZiAoZXZlbnRUeXBlID09PSBcInRpbWV1cGRhdGVcIikge1xyXG5cdFx0XHRcdFx0XHQvLyBcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0Ly8gXHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFx0XHR2aWRlby5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgKGU6IGFueSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZyhlKTtcclxuXHRcdFx0XHRcdFx0Ly8gXHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQvLyBcdH1cclxuXHRcdFx0XHRcdFx0Ly8gfVxyXG5cdFxyXG5cdFx0XHRcdFx0XHRjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRcdFx0XHRkaXYuaWQgPSBcInZpZGVvRmVlZERpdi1cIiArIHB1Ymxpc2hlci5pZDtcclxuXHRcdFx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoXCJmZWVkLWNvbnRhaW5lclwiLCBcImludmlzaWJsZVwiKTtcclxuXHRcdFx0XHRcdFx0ZGl2LmFwcGVuZENoaWxkKHZpZGVvKTtcclxuXHRcclxuXHRcdFx0XHRcdFx0Y29uc3QgdmlkZW9GZWVkQ29udGFpbmVyID0gdGhpcy5nZXRFbGVtZW50QnlJZChcInZpZGVvRmVlZENvbnRhaW5lclwiKTtcclxuXHRcdFx0XHRcdFx0dmlkZW9GZWVkQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKGhhc1ZpZGVvKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZpZGVvRmVlZERpdiA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0ZlZWREaXYtXCIgKyBwdWJsaXNoZXIuaWQpO1xyXG5cdFx0XHRcdFx0XHR2aWRlb0ZlZWREaXYuY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRKYW51cy5hdHRhY2hNZWRpYVN0cmVhbSh2aWRlbywgc3RyZWFtKTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLnNldEF1ZGlvU2luayh2aWRlbywgdGhpcy5kZXZpY2VDb25zdHJhaW50cy5hdWRpb091dHB1dCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmNoZWNrVmlkZW9Db3VudCgpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRvbmRhdGFvcGVuOiAobGFiZWw6IHN0cmluZywgcHJvdG9jb2w6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdEphbnVzLmxvZyhcIlRoZSBEYXRhQ2hhbm5lbCBpcyBhdmFpbGFibGUhXCIgKyBcIiAtIFwiICsgbGFiZWwgKyBcIiAtIFwiICsgcHJvdG9jb2wpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRvbmRhdGE6IChkYXRhOiBhbnkpID0+IHtcclxuXHRcdFx0XHRpZiAocmVtb3RlRmVlZC5pc1ByaW1hcnkpIHtcclxuXHRcdFx0XHRcdHRoaXMuZGF0YUNhbGxiYWNrKGRhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0b25jbGVhbnVwOiAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKCFyZW1vdGVGZWVkLmlzUHJpbWFyeSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmlkZW9GZWVkQ29udGFpbmVyID0gdGhpcy5nZXRFbGVtZW50QnlJZChcInZpZGVvRmVlZENvbnRhaW5lclwiKTtcclxuXHRcdFx0XHRcdGNvbnN0IHZpZGVvRmVlZERpdiA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0ZlZWREaXYtXCIgKyBwdWJsaXNoZXIuaWQpO1xyXG5cclxuXHRcdFx0XHRcdHZpZGVvRmVlZENvbnRhaW5lci5yZW1vdmVDaGlsZCh2aWRlb0ZlZWREaXYpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5yZW1vdGVGZWVkcyA9IHRoaXMucmVtb3RlRmVlZHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gcmVtb3RlRmVlZCk7XHJcblxyXG5cdFx0XHRcdGlmIChyZW1vdGVGZWVkLmlzUHJpbWFyeSkge1xyXG5cdFx0XHRcdFx0dGhpcy5zdG9wU3BlZWNoKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmNoZWNrVmlkZW9Db3VudCgpO1xyXG5cclxuXHRcdFx0XHRpZiAocmVtb3RlRmVlZC5pc1ByaW1hcnkpIHtcclxuXHRcdFx0XHRcdHRoaXMuamFudXMuZGVzdHJveSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0ZGV0YWNoZWQ6ICgpID0+IHtcclxuXHRcdFx0XHRKYW51cy5sb2coXCJkZXRhY2hlZC4uLlwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNldEF1ZGlvU2luayhlbGVtZW50OiBIVE1MTWVkaWFFbGVtZW50LCBhdWRpb1Npbms6IHN0cmluZykge1xyXG5cdFx0aWYgKCEoJ3NpbmtJZCcgaW4gSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRlbGVtZW50LnNldFNpbmtJZChhdWRpb1NpbmspXHJcblx0XHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBvblZpZGVvVHJhY2tSZW1vdmVkKHJlbW90ZUZlZWQ6IFBsdWdpbkhhbmRsZSwgdHJhY2s6IE1lZGlhU3RyZWFtVHJhY2spIHtcclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbC5tYWluVmlkZW9BdmFpbGFibGUgPSBmYWxzZTtcclxuXHRcdHJlbW90ZUZlZWQuaGFzVmlkZW8gPSBmYWxzZTtcclxuXHRcdHRoaXMuY2hlY2tWaWRlb0NvdW50KCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNoZWNrVmlkZW9Db3VudCgpIHtcclxuXHRcdGxldCBoYXNWaWRlbyA9IGZhbHNlO1xyXG5cclxuXHRcdGZvciAoY29uc3QgcmVtb3RlRmVlZCBvZiB0aGlzLnJlbW90ZUZlZWRzKSB7XHJcblx0XHRcdGlmIChyZW1vdGVGZWVkLmhhc1ZpZGVvID09PSB0cnVlKSB7XHJcblx0XHRcdFx0aGFzVmlkZW8gPSB0cnVlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsLnZpZGVvQXZhaWxhYmxlID0gaGFzVmlkZW87XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGpvaW5Bc1B1Ymxpc2hlcihyZW1vdGVGZWVkOiBQbHVnaW5IYW5kbGUpIHtcclxuXHRcdGNvbnN0IHN1YnNjcmliZSA9IHtcclxuXHRcdFx0cmVxdWVzdDogXCJqb2luXCIsXHJcblx0XHRcdHJvb206IHRoaXMubXlyb29tLFxyXG5cdFx0XHRwdHlwZTogXCJwdWJsaXNoZXJcIixcclxuXHRcdFx0ZGlzcGxheTogdGhpcy5teXVzZXJuYW1lXHJcblx0XHR9O1xyXG5cclxuXHRcdHJlbW90ZUZlZWQuc2VuZCh7IG1lc3NhZ2U6IHN1YnNjcmliZSB9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlQW5zd2VyKHJlbW90ZUZlZWQ6IFBsdWdpbkhhbmRsZSwganNlcDogSlNFUCwgd2FudERhdGE6IGJvb2xlYW4pIHtcclxuXHRcdHJlbW90ZUZlZWQuY3JlYXRlQW5zd2VyKHtcclxuXHRcdFx0anNlcDoganNlcCxcclxuXHRcdFx0bWVkaWE6IHsgYXVkaW9TZW5kOiBmYWxzZSwgdmlkZW9TZW5kOiBmYWxzZSwgZGF0YTogd2FudERhdGEgfSxcdC8vIFdlIHdhbnQgcmVjdm9ubHkgYXVkaW8vdmlkZW8uXHJcblx0XHRcdHN1Y2Nlc3M6IChqc2VwOiBKU0VQKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgYm9keSA9IHtcclxuXHRcdFx0XHRcdHJlcXVlc3Q6IFwic3RhcnRcIixcclxuXHRcdFx0XHRcdHJvb206IHRoaXMubXlyb29tXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0cmVtb3RlRmVlZC5zZW5kKHsgbWVzc2FnZTogYm9keSwganNlcDoganNlcCB9KTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXJyb3I6IChlcnJvcjogYW55KSA9PiB7XHJcblx0XHRcdFx0SmFudXMuZXJyb3IoXCJXZWJSVEMgZXJyb3I6IFwiLCBlcnJvcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBwdWJsaXNoT3duRmVlZChyZW1vdGVGZWVkOiBQbHVnaW5IYW5kbGUsIGRldmljZUNvbnN0cmFpbnRzOiBhbnkpIHtcclxuXHRcdGNvbnN0IHVzZVZpZGVvID0gZGV2aWNlQ29uc3RyYWludHMudmlkZW9EZXZpY2VJZCAhPSBudWxsO1xyXG5cclxuXHRcdC8vIFB1Ymxpc2ggb3VyIHN0cmVhbS5cclxuXHRcdHJlbW90ZUZlZWQuY3JlYXRlT2ZmZXIoe1xyXG5cdFx0XHQvLyBQdWJsaXNoZXJzIGFyZSBzZW5kb25seS5cclxuXHRcdFx0bWVkaWE6IHtcclxuXHRcdFx0XHRhdWRpb1JlY3Y6IGZhbHNlLFxyXG5cdFx0XHRcdHZpZGVvUmVjdjogZmFsc2UsXHJcblx0XHRcdFx0YXVkaW9TZW5kOiB0cnVlLFxyXG5cdFx0XHRcdHZpZGVvU2VuZDogdXNlVmlkZW8sXHJcblx0XHRcdFx0YXVkaW86IHtcclxuXHRcdFx0XHRcdGRldmljZUlkOiBkZXZpY2VDb25zdHJhaW50cy5hdWRpb0RldmljZUlkLFxyXG5cdFx0XHRcdFx0ZWNob0NhbmNlbGxhdGlvbjogdHJ1ZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0dmlkZW86IHtcclxuXHRcdFx0XHRcdGRldmljZUlkOiBkZXZpY2VDb25zdHJhaW50cy52aWRlb0RldmljZUlkLFxyXG5cdFx0XHRcdFx0d2lkdGg6IDEyODAsXHJcblx0XHRcdFx0XHRoZWlnaHQ6IDcyMCxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGZhaWxJZk5vQXVkaW86IHRydWUsXHJcblx0XHRcdFx0ZmFpbElmTm9WaWRlbzogZmFsc2UsXHJcblx0XHRcdH0sXHJcblx0XHRcdHN1Y2Nlc3M6IChqc2VwOiBKU0VQKSA9PiB7XHJcblx0XHRcdFx0SmFudXMuZGVidWcoXCJHb3QgcHVibGlzaGVyIFNEUCFcIiwganNlcCk7XHJcblxyXG5cdFx0XHRcdHZhciBwdWJsaXNoID0ge1xyXG5cdFx0XHRcdFx0cmVxdWVzdDogXCJjb25maWd1cmVcIixcclxuXHRcdFx0XHRcdGF1ZGlvOiB0cnVlLFxyXG5cdFx0XHRcdFx0dmlkZW86IHVzZVZpZGVvXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Ly8gaWYoYWNvZGVjKVxyXG5cdFx0XHRcdC8vIFx0cHVibGlzaFtcImF1ZGlvY29kZWNcIl0gPSBhY29kZWM7XHJcblx0XHRcdFx0Ly8gaWYodmNvZGVjKVxyXG5cdFx0XHRcdC8vIFx0cHVibGlzaFtcInZpZGVvY29kZWNcIl0gPSB2Y29kZWM7XHJcblxyXG5cdFx0XHRcdHJlbW90ZUZlZWQuc2VuZCh7IG1lc3NhZ2U6IHB1Ymxpc2gsIGpzZXA6IGpzZXAgfSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbiAoZXJyb3I6IGFueSkge1xyXG5cdFx0XHRcdEphbnVzLmVycm9yKFwiV2ViUlRDIGVycm9yOlwiLCBlcnJvcik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIldlYlJUQyBlcnJvcjpcIiwgZXJyb3IpO1xyXG5cclxuXHRcdFx0XHRkZXZpY2VDb25zdHJhaW50cy52aWRlb0RldmljZUlkID0gbnVsbDtcclxuXHJcblx0XHRcdFx0dGhpcy5wdWJsaXNoT3duRmVlZChyZW1vdGVGZWVkLCBkZXZpY2VDb25zdHJhaW50cylcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldEVsZW1lbnRCeUlkKGlkOiBzdHJpbmcpIHtcclxuXHRcdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuLi9hY3Rpb24vYWN0aW9uXCI7XHJcbmltcG9ydCB7IFN0cmVhbUFjdGlvbkV4ZWN1dG9yIH0gZnJvbSBcIi4uL2FjdGlvbi9hY3Rpb24uZXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgU3RyZWFtQWN0aW9uUGxheWVyIH0gZnJvbSBcIi4uL2FjdGlvbi9zdHJlYW0tYWN0aW9uLXBsYXllclwiO1xyXG5pbXBvcnQgeyBNZWRpYVBsYXllciB9IGZyb20gXCIuLi9tZWRpYS9tZWRpYS1wbGF5ZXJcIjtcclxuaW1wb3J0IHsgQ291cnNlU3RhdGUgfSBmcm9tIFwiLi4vbW9kZWwvY291cnNlLXN0YXRlXCI7XHJcbmltcG9ydCB7IFNsaWRlRG9jdW1lbnQgfSBmcm9tIFwiLi4vbW9kZWwvZG9jdW1lbnRcIjtcclxuaW1wb3J0IHsgUGxheWJhY2tNb2RlbCB9IGZyb20gXCIuLi9tb2RlbC9wbGF5YmFjay1tb2RlbFwiO1xyXG5pbXBvcnQgeyBSZW5kZXJDb250cm9sbGVyIH0gZnJvbSBcIi4uL3JlbmRlci9yZW5kZXItY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBTeW5jU3RhdGUgfSBmcm9tIFwiLi4vdXRpbHMvc3luYy1zdGF0ZVwiO1xyXG5pbXBvcnQgeyBQbGF5ZXJWaWV3IH0gZnJvbSBcIi4uL3ZpZXdcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5YmFja1NlcnZpY2Uge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHBsYXliYWNrTW9kZWw6IFBsYXliYWNrTW9kZWw7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgZG9jdW1lbnRzOiBNYXA8YmlnaW50LCBTbGlkZURvY3VtZW50PjtcclxuXHJcblx0cHJpdmF0ZSBhY3Rpb25QbGF5ZXI6IFN0cmVhbUFjdGlvblBsYXllcjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsYXliYWNrTW9kZWw6IFBsYXliYWNrTW9kZWwpIHtcclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbCA9IHBsYXliYWNrTW9kZWw7XHJcblx0XHR0aGlzLmRvY3VtZW50cyA9IG5ldyBNYXAoKTtcclxuXHR9XHJcblxyXG5cdGluaXRpYWxpemUocGxheWVyVmlldzogUGxheWVyVmlldywgY291cnNlU3RhdGU6IENvdXJzZVN0YXRlLCBkb2N1bWVudHM6IFNsaWRlRG9jdW1lbnRbXSwgc3RhcnRUaW1lOiBCaWdJbnQpIHtcclxuXHRcdGRvY3VtZW50cy5mb3JFYWNoKChkb2M6IFNsaWRlRG9jdW1lbnQpID0+IHtcclxuXHRcdFx0dGhpcy5hZGREb2N1bWVudChkb2MpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3Qgc3RhcnRUaW1lTXMgPSBOdW1iZXIoc3RhcnRUaW1lKTtcclxuXHJcblx0XHRjb25zdCBzbGlkZVZpZXcgPSBwbGF5ZXJWaWV3LmdldFNsaWRlVmlldygpO1xyXG5cclxuXHRcdGNvbnN0IG1lZGlhUGxheWVyID0gbmV3IE1lZGlhUGxheWVyKHBsYXllclZpZXcuZ2V0TWVkaWFFbGVtZW50KCkpO1xyXG5cdFx0bWVkaWFQbGF5ZXIubXV0ZWQgPSB0aGlzLnBsYXliYWNrTW9kZWwuZ2V0TXV0ZWQoKTtcclxuXHRcdG1lZGlhUGxheWVyLmFkZFRpbWVMaXN0ZW5lcigoKSA9PiB7XHJcblx0XHRcdHBsYXllclZpZXcuc2V0RHVyYXRpb24oRGF0ZS5ub3coKSAtIHN0YXJ0VGltZU1zKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHBsYXllclZpZXcuc2V0T25NdXRlKChtdXRlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdG1lZGlhUGxheWVyLm11dGVkID0gbXV0ZTtcclxuXHRcdH0pO1xyXG5cdFx0cGxheWVyVmlldy5zZXRPblZvbHVtZSgodmFsdWU6IG51bWJlcikgPT4ge1xyXG5cdFx0XHRtZWRpYVBsYXllci5tdXRlZCA9IGZhbHNlO1xyXG5cdFx0XHRtZWRpYVBsYXllci52b2x1bWUgPSB2YWx1ZTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNlbGVjdCBhY3RpdmUgZG9jdW1lbnQuXHJcblx0XHRjb25zdCBhY3RpdmVTdGF0ZURvYyA9IGNvdXJzZVN0YXRlLmF2dGl2ZURvY3VtZW50O1xyXG5cdFx0bGV0IGFjdGl2ZURvYzogU2xpZGVEb2N1bWVudCA9IG51bGw7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XHJcblx0XHRcdGlmIChkb2MuZ2V0RG9jdW1lbnRJZCgpID09IGFjdGl2ZVN0YXRlRG9jLmRvY3VtZW50SWQpIHtcclxuXHRcdFx0XHRhY3RpdmVEb2MgPSBkb2M7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByZW5kZXJDb250cm9sbGVyID0gbmV3IFJlbmRlckNvbnRyb2xsZXIoKTtcclxuXHRcdHJlbmRlckNvbnRyb2xsZXIuc2V0QWN0aW9uUmVuZGVyU3VyZmFjZShzbGlkZVZpZXcuZ2V0QWN0aW9uUmVuZGVyU3VyZmFjZSgpKTtcclxuXHRcdHJlbmRlckNvbnRyb2xsZXIuc2V0U2xpZGVSZW5kZXJTdXJmYWNlKHNsaWRlVmlldy5nZXRTbGlkZVJlbmRlclN1cmZhY2UoKSk7XHJcblx0XHRyZW5kZXJDb250cm9sbGVyLnNldFZvbGF0aWxlUmVuZGVyU3VyZmFjZShzbGlkZVZpZXcuZ2V0Vm9sYXRpbGVSZW5kZXJTdXJmYWNlKCkpO1xyXG5cdFx0cmVuZGVyQ29udHJvbGxlci5zZXRUZXh0TGF5ZXJTdXJmYWNlKHNsaWRlVmlldy5nZXRUZXh0TGF5ZXJTdXJmYWNlKCkpO1xyXG5cclxuXHRcdGNvbnN0IGV4ZWN1dG9yID0gbmV3IFN0cmVhbUFjdGlvbkV4ZWN1dG9yKHJlbmRlckNvbnRyb2xsZXIpO1xyXG5cdFx0ZXhlY3V0b3Iuc2V0RG9jdW1lbnQoYWN0aXZlRG9jKTtcclxuXHRcdGV4ZWN1dG9yLnNldFBhZ2VOdW1iZXIoYWN0aXZlU3RhdGVEb2MuYWN0aXZlUGFnZS5wYWdlTnVtYmVyKTtcclxuXHJcblx0XHR0aGlzLmFjdGlvblBsYXllciA9IG5ldyBTdHJlYW1BY3Rpb25QbGF5ZXIoZXhlY3V0b3IsIG5ldyBTeW5jU3RhdGUobWVkaWFQbGF5ZXIpKTtcclxuXHRcdHRoaXMuYWN0aW9uUGxheWVyLnN0YXJ0KCk7XHJcblxyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsLndlYnJ0Y0Nvbm5lY3RlZFByb3BlcnR5LnN1YnNjcmliZSgoKSA9PiB7XHJcblx0XHRcdHBsYXllclZpZXcuc2hvdygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhZGRBY3Rpb24oYWN0aW9uOiBBY3Rpb24pOiB2b2lkIHtcclxuXHRcdHRoaXMuYWN0aW9uUGxheWVyLmFkZEFjdGlvbihhY3Rpb24pO1xyXG5cdH1cclxuXHJcblx0YWRkRG9jdW1lbnQoZG9jdW1lbnQ6IFNsaWRlRG9jdW1lbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuZG9jdW1lbnRzLnNldChCaWdJbnQoZG9jdW1lbnQuZ2V0RG9jdW1lbnRJZCgpKSwgZG9jdW1lbnQpO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlRG9jdW1lbnQoZG9jSWQ6IGJpZ2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5kb2N1bWVudHMuZGVsZXRlKEJpZ0ludChkb2NJZCkpO1xyXG5cdH1cclxuXHJcblx0c2VsZWN0RG9jdW1lbnQoZG9jSWQ6IGJpZ2ludCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50cy5nZXQoQmlnSW50KGRvY0lkKSk7XHJcblxyXG5cdFx0aWYgKGRvY3VtZW50KSB7XHJcblx0XHRcdHRoaXMuYWN0aW9uUGxheWVyLnNldERvY3VtZW50KGRvY3VtZW50KTtcclxuXHRcdH1cclxuXHR9XHJcbn0iLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBQYWludFRvb2wgfSBmcm9tIFwiLi9wYWludC50b29sXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBBcnJvd1NoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2Fycm93LnNoYXBlXCI7XHJcbmltcG9ydCB7IEFkZFNoYXBlQWN0aW9uIH0gZnJvbSBcIi4uL21vZGVsL2FjdGlvbi9hZGQtc2hhcGUuYWN0aW9uXCI7XHJcblxyXG5jbGFzcyBBcnJvd1Rvb2wgZXh0ZW5kcyBQYWludFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHNoYXBlOiBBcnJvd1NoYXBlO1xyXG5cclxuXHRwcml2YXRlIGNvbnRleHQ6IFRvb2xDb250ZXh0O1xyXG5cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBlblBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcblx0XHR0aGlzLnNoYXBlID0gbmV3IEFycm93U2hhcGUodGhpcy5zaGFwZUhhbmRsZSwgdGhpcy5icnVzaCk7XHJcblx0XHR0aGlzLnNoYXBlLnNldFAwKHBvaW50KTtcclxuXHJcblx0XHRjb250ZXh0LnBhZ2UuYWRkQWN0aW9uKG5ldyBBZGRTaGFwZUFjdGlvbihbdGhpcy5zaGFwZV0pKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnNoYXBlLnNldEtleUV2ZW50KHRoaXMuY29udGV4dC5rZXlFdmVudCk7XHJcblx0XHR0aGlzLnNoYXBlLnNldFAxKHBvaW50KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEFycm93VG9vbCB9OyIsImltcG9ydCB7IFRvb2wgfSBmcm9tIFwiLi90b29sXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBBdG9taWNUb29sIGltcGxlbWVudHMgVG9vbCB7XHJcblxyXG5cdGFic3RyYWN0IGJlZ2luKHBvaW50OiBQb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkO1xyXG5cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUG9pbnQpOiB2b2lkIHtcclxuXHRcdC8vIE5vIGFjdGlvblxyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQb2ludCk6IHZvaWQge1xyXG5cdFx0Ly8gTm8gYWN0aW9uXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBBdG9taWNUb29sIH07IiwiaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IFJlbW92ZVNoYXBlQWN0aW9uIH0gZnJvbSBcIi4uL21vZGVsL2FjdGlvbi9yZW1vdmUtc2hhcGUuYWN0aW9uXCI7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3NoYXBlXCI7XHJcblxyXG5jbGFzcyBDbGVhclNoYXBlc1Rvb2wgZXh0ZW5kcyBBdG9taWNUb29sIHtcclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qgc2hhcGVzOiBTaGFwZVtdID0gT2JqZWN0LmFzc2lnbihbXSwgY29udGV4dC5wYWdlLmdldFNoYXBlcygpKTtcclxuXHJcblx0XHRjb250ZXh0LnBhZ2UuYWRkQWN0aW9uKG5ldyBSZW1vdmVTaGFwZUFjdGlvbihzaGFwZXMpKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBDbGVhclNoYXBlc1Rvb2wgfTsiLCJpbXBvcnQgeyBUb29sIH0gZnJvbSBcIi4vdG9vbFwiO1xyXG5pbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvc2hhcGVcIjtcclxuaW1wb3J0IHsgQWRkU2hhcGVBY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWwvYWN0aW9uL2FkZC1zaGFwZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIENsb25lVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHNvdXJjZVBvaW50OiBQZW5Qb2ludDtcclxuXHJcblx0cHJpdmF0ZSBjb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHJcblx0cHJpdmF0ZSBzZWxlY3RlZFNoYXBlczogU2hhcGVbXTtcclxuXHJcblxyXG5cdGJlZ2luKHBvaW50OiBQZW5Qb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc291cmNlUG9pbnQgPSBwb2ludC5jbG9uZSgpO1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcblx0XHR0aGlzLmdldFNlbGVjdGVkU2hhcGVzKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuaGFzU2VsZWN0ZWRTaGFwZXMoKSkge1xyXG5cdFx0XHRpZiAodGhpcy5oaXRTZWxlY3RlZChwb2ludCkpIHtcclxuXHRcdFx0XHRjb25zdCBjbG9uZWQgPSBuZXcgQXJyYXk8U2hhcGU+KCk7XHJcblxyXG5cdFx0XHRcdGZvciAobGV0IHNoYXBlIG9mIHRoaXMuc2VsZWN0ZWRTaGFwZXMpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGNsb25lZFNoYXBlID0gc2hhcGUuY2xvbmUoKTtcclxuXHJcblx0XHRcdFx0XHRjbG9uZWQucHVzaChjbG9uZWRTaGFwZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb250ZXh0LnBhZ2UuYWRkQWN0aW9uKG5ldyBBZGRTaGFwZUFjdGlvbihjbG9uZWQpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnJlbW92ZVNlbGVjdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRTaGFwZSA9IHRoaXMuZ2V0VG9wTGV2ZWxTaGFwZShwb2ludCk7XHJcblxyXG5cdFx0XHRpZiAoc2VsZWN0ZWRTaGFwZSAhPSBudWxsKSB7XHJcblx0XHRcdFx0Y29uc3QgY2xvbmVkU2hhcGUgPSBzZWxlY3RlZFNoYXBlLmNsb25lKCk7XHJcblxyXG5cdFx0XHRcdGNvbnRleHQucGFnZS5hZGRBY3Rpb24obmV3IEFkZFNoYXBlQWN0aW9uKFtjbG9uZWRTaGFwZV0pKTtcclxuXHJcblx0XHRcdFx0dGhpcy5hZGRTZWxlY3Rpb24oY2xvbmVkU2hhcGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zb3VyY2VQb2ludC5zdWJ0cmFjdChwb2ludCk7XHJcblxyXG5cdFx0dGhpcy5tb3ZlU2hhcGVzKHBvaW50LCB0aGlzLnNvdXJjZVBvaW50KTtcclxuXHJcblx0XHR0aGlzLnNvdXJjZVBvaW50ID0gcG9pbnQuY2xvbmUoKTtcclxuXHR9XHJcblxyXG5cdGVuZChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdC8vIE5vLW9wXHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldFRvcExldmVsU2hhcGUocG9pbnQ6IFBlblBvaW50KTogU2hhcGUge1xyXG5cdFx0bGV0IHNoYXBlID0gbnVsbDtcclxuXHJcblx0XHRmb3IgKGxldCBzIG9mIHRoaXMuY29udGV4dC5wYWdlLmdldFNoYXBlcygpKSB7XHJcblx0XHRcdGlmIChzLmNvbnRhaW5zKHBvaW50KSkge1xyXG5cdFx0XHRcdHNoYXBlID0gcztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHNoYXBlO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRTZWxlY3RlZFNoYXBlcygpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2VsZWN0ZWRTaGFwZXMgPSBuZXcgQXJyYXk8U2hhcGU+KCk7XHJcblxyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5jb250ZXh0LnBhZ2UuZ2V0U2hhcGVzKCkpIHtcclxuXHRcdFx0aWYgKHNoYXBlLmlzU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRTaGFwZXMucHVzaChzaGFwZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgbW92ZVNoYXBlcyhwb2ludDogUGVuUG9pbnQsIGRlbHRhOiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLmhhc1NlbGVjdGVkU2hhcGVzKCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY29udGV4dC5iZWdpbkJ1bGtSZW5kZXIoKTtcclxuXHJcblx0XHRmb3IgKGxldCBzaGFwZSBvZiB0aGlzLnNlbGVjdGVkU2hhcGVzKSB7XHJcblx0XHRcdHNoYXBlLm1vdmVCeURlbHRhKGRlbHRhKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvbnRleHQuZW5kQnVsa1JlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoYXNTZWxlY3RlZFNoYXBlcygpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLnNlbGVjdGVkU2hhcGVzLmxlbmd0aCAhPSAwO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRTZWxlY3Rpb24oc2hhcGU6IFNoYXBlKTogdm9pZCB7XHJcblx0XHRzaGFwZS5zZXRTZWxlY3RlZCh0cnVlKTtcclxuXHJcblx0XHR0aGlzLnNlbGVjdGVkU2hhcGVzLnB1c2goc2hhcGUpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW1vdmVTZWxlY3Rpb24oKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRleHQuYmVnaW5CdWxrUmVuZGVyKCk7XHJcblxyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5zZWxlY3RlZFNoYXBlcykge1xyXG5cdFx0XHRzaGFwZS5zZXRTZWxlY3RlZChmYWxzZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZWxlY3RlZFNoYXBlcy5sZW5ndGggPSAwO1xyXG5cclxuXHRcdHRoaXMuY29udGV4dC5lbmRCdWxrUmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhpdFNlbGVjdGVkKHBvaW50OiBQZW5Qb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5zZWxlY3RlZFNoYXBlcykge1xyXG5cdFx0XHRpZiAoc2hhcGUuY29udGFpbnMocG9pbnQpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBDbG9uZVRvb2wgfTsiLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBUb29sIH0gZnJvbSBcIi4vdG9vbFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgUmVtb3ZlU2hhcGVBY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWwvYWN0aW9uL3JlbW92ZS1zaGFwZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIERlbGV0ZVNoYXBlVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHNoYXBlSGFuZGxlOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihzaGFwZUhhbmRsZTogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnNoYXBlSGFuZGxlID0gc2hhcGVIYW5kbGU7XHJcblx0fVxyXG5cclxuXHRiZWdpbihwb2ludDogUGVuUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IHNoYXBlIG9mIGNvbnRleHQucGFnZS5nZXRTaGFwZXMoKSkge1xyXG5cdFx0XHRpZiAoc2hhcGUuaGFuZGxlID09PSB0aGlzLnNoYXBlSGFuZGxlKSB7XHJcblx0XHRcdFx0Y29udGV4dC5wYWdlLmFkZEFjdGlvbihuZXcgUmVtb3ZlU2hhcGVBY3Rpb24obmV3IEFycmF5KHNoYXBlKSkpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0Ly8gTm8tb3BcclxuXHR9XHJcblxyXG5cdGVuZChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdC8vIE5vLW9wXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBEZWxldGVTaGFwZVRvb2wgfTsiLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBQYWludFRvb2wgfSBmcm9tIFwiLi9wYWludC50b29sXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBFbGxpcHNlU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvZWxsaXBzZS5zaGFwZVwiO1xyXG5pbXBvcnQgeyBBZGRTaGFwZUFjdGlvbiB9IGZyb20gXCIuLi9tb2RlbC9hY3Rpb24vYWRkLXNoYXBlLmFjdGlvblwiO1xyXG5cclxuY2xhc3MgRWxsaXBzZVRvb2wgZXh0ZW5kcyBQYWludFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHNoYXBlOiBFbGxpcHNlU2hhcGU7XHJcblxyXG5cdHByaXZhdGUgY29udGV4dDogVG9vbENvbnRleHQ7XHJcblxyXG5cclxuXHRiZWdpbihwb2ludDogUGVuUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cclxuXHRcdHRoaXMuc2hhcGUgPSBuZXcgRWxsaXBzZVNoYXBlKHRoaXMuc2hhcGVIYW5kbGUsIHRoaXMuYnJ1c2gpO1xyXG5cdFx0dGhpcy5zaGFwZS5zZXRQMChwb2ludCk7XHJcblxyXG5cdFx0Y29udGV4dC5wYWdlLmFkZEFjdGlvbihuZXcgQWRkU2hhcGVBY3Rpb24oW3RoaXMuc2hhcGVdKSk7XHJcblx0fVxyXG5cclxuXHRleGVjdXRlKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zaGFwZS5zZXRLZXlFdmVudCh0aGlzLmNvbnRleHQua2V5RXZlbnQpO1xyXG5cdFx0dGhpcy5zaGFwZS5zZXRQMShwb2ludCk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBFbGxpcHNlVG9vbCB9OyIsImltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcblxyXG5jbGFzcyBFeHRlbmRWaWV3VG9vbCBleHRlbmRzIEF0b21pY1Rvb2wge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHJlY3Q6IFJlY3RhbmdsZTtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHJlY3Q6IFJlY3RhbmdsZSkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLnJlY3QgPSByZWN0O1xyXG5cdH1cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0Y29udGV4dC5wYWdlLmdldFNsaWRlU2hhcGUoKS5zZXRQYWdlUmVjdCh0aGlzLnJlY3QpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRXh0ZW5kVmlld1Rvb2wgfTsiLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBQYWludFRvb2wgfSBmcm9tIFwiLi9wYWludC50b29sXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBTdHJva2VTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zdHJva2Uuc2hhcGVcIjtcclxuaW1wb3J0IHsgQWRkU2hhcGVBY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWwvYWN0aW9uL2FkZC1zaGFwZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIEhpZ2hsaWdodGVyVG9vbCBleHRlbmRzIFBhaW50VG9vbCB7XHJcblxyXG5cdHByaXZhdGUgc2hhcGU6IFN0cm9rZVNoYXBlO1xyXG5cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBlblBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zaGFwZSA9IG5ldyBTdHJva2VTaGFwZSh0aGlzLnNoYXBlSGFuZGxlLCB0aGlzLmJydXNoKTtcclxuXHRcdHRoaXMuc2hhcGUuYWRkUG9pbnQocG9pbnQpO1xyXG5cclxuXHRcdGNvbnRleHQucGFnZS5hZGRBY3Rpb24obmV3IEFkZFNoYXBlQWN0aW9uKFt0aGlzLnNoYXBlXSkpO1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2hhcGUuYWRkUG9pbnQocG9pbnQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgSGlnaGxpZ2h0ZXJUb29sIH07IiwiaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4uL3BhaW50L2NvbG9yXCI7XHJcbmltcG9ydCB7IEZvbnQgfSBmcm9tIFwiLi4vcGFpbnQvZm9udFwiO1xyXG5pbXBvcnQgeyBMYXRleFNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2xhdGV4LnNoYXBlXCI7XHJcblxyXG5jbGFzcyBMYXRleEZvbnRUb29sIGV4dGVuZHMgQXRvbWljVG9vbCB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlOiBudW1iZXI7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgZm9udDogRm9udDtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSB0ZXh0Q29sb3I6IENvbG9yO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRleHRBdHRyaWJ1dGVzOiBNYXA8c3RyaW5nLCBib29sZWFuPjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGhhbmRsZTogbnVtYmVyLCBmb250OiBGb250LCB0ZXh0Q29sb3I6IENvbG9yLCB0ZXh0QXR0cmlidXRlczogTWFwPHN0cmluZywgYm9vbGVhbj4pIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUgPSBoYW5kbGU7XHJcblx0XHR0aGlzLmZvbnQgPSBmb250O1xyXG5cdFx0dGhpcy50ZXh0Q29sb3IgPSB0ZXh0Q29sb3I7XHJcblx0XHR0aGlzLnRleHRBdHRyaWJ1dGVzID0gdGV4dEF0dHJpYnV0ZXM7XHJcblx0fVxyXG5cclxuXHRiZWdpbihwb2ludDogUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHRjb25zdCBzaGFwZXMgPSBjb250ZXh0LnBhZ2UuZ2V0U2hhcGVzKCk7XHJcblxyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2Ygc2hhcGVzKSB7XHJcblx0XHRcdGlmIChzaGFwZSBpbnN0YW5jZW9mIExhdGV4U2hhcGUgJiYgc2hhcGUuaGFuZGxlID09PSB0aGlzLmhhbmRsZSkge1xyXG5cdFx0XHRcdHNoYXBlLnNldEZvbnQodGhpcy5mb250KTtcclxuXHRcdFx0XHRzaGFwZS5zZXRUZXh0Q29sb3IodGhpcy50ZXh0Q29sb3IpO1xyXG5cdFx0XHRcdHNoYXBlLnNldFRleHRBdHRyaWJ1dGVzKHRoaXMudGV4dEF0dHJpYnV0ZXMpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgTGF0ZXhGb250VG9vbCB9OyIsImltcG9ydCB7IFRvb2wgfSBmcm9tIFwiLi90b29sXCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBMYXRleFNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2xhdGV4LnNoYXBlXCI7XHJcblxyXG5jbGFzcyBMYXRleFRvb2wgaW1wbGVtZW50cyBUb29sIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBoYW5kbGU6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSBzaGFwZTogTGF0ZXhTaGFwZTtcclxuXHJcblx0cHJpdmF0ZSBjb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGhhbmRsZTogbnVtYmVyKSB7XHJcblx0XHR0aGlzLmhhbmRsZSA9IGhhbmRsZTtcclxuXHR9XHJcblxyXG5cdGJlZ2luKHBvaW50OiBQZW5Qb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcblxyXG5cdFx0dGhpcy5zaGFwZSA9IG5ldyBMYXRleFNoYXBlKHRoaXMuaGFuZGxlKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHQvLyBOby1vcFxyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zaGFwZS5zZXRMb2NhdGlvbihwb2ludCk7XHJcblxyXG5cdFx0dGhpcy5jb250ZXh0LnBhZ2UuYWRkU2hhcGUodGhpcy5zaGFwZSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgTGF0ZXhUb29sIH07IiwiaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgUGFpbnRUb29sIH0gZnJvbSBcIi4vcGFpbnQudG9vbFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgTGluZVNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL2xpbmUuc2hhcGVcIjtcclxuaW1wb3J0IHsgQWRkU2hhcGVBY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWwvYWN0aW9uL2FkZC1zaGFwZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIExpbmVUb29sIGV4dGVuZHMgUGFpbnRUb29sIHtcclxuXHJcblx0cHJpdmF0ZSBzaGFwZTogTGluZVNoYXBlO1xyXG5cclxuXHRwcml2YXRlIGNvbnRleHQ6IFRvb2xDb250ZXh0O1xyXG5cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBlblBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcblx0XHR0aGlzLnNoYXBlID0gbmV3IExpbmVTaGFwZSh0aGlzLnNoYXBlSGFuZGxlLCB0aGlzLmJydXNoKTtcclxuXHRcdHRoaXMuc2hhcGUuc2V0UDAocG9pbnQpO1xyXG5cclxuXHRcdGNvbnRleHQucGFnZS5hZGRBY3Rpb24obmV3IEFkZFNoYXBlQWN0aW9uKFt0aGlzLnNoYXBlXSkpO1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2hhcGUuc2V0S2V5RXZlbnQodGhpcy5jb250ZXh0LmtleUV2ZW50KTtcclxuXHRcdHRoaXMuc2hhcGUuc2V0UDEocG9pbnQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgTGluZVRvb2wgfTsiLCJpbXBvcnQgeyBUb29sIH0gZnJvbSBcIi4vdG9vbFwiO1xyXG5pbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBCcnVzaCB9IGZyb20gXCIuLi9wYWludC9icnVzaFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIFBhaW50VG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRzaGFwZUhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHRicnVzaDogQnJ1c2g7XHJcblxyXG5cclxuXHRiZWdpbihwb2ludDogUGVuUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGVuZChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdFxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGFpbnRUb29sIH07IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gXCIuL3Rvb2xcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5cclxuY2xhc3MgUGFuVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRwcml2YXRlIGNvbnRleHQ6IFRvb2xDb250ZXh0O1xyXG5cclxuXHRwcml2YXRlIGxhc3RQb2ludDogUG9pbnQ7XHJcblxyXG5cclxuXHRiZWdpbihwb2ludDogUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cdFx0dGhpcy5sYXN0UG9pbnQgPSBwb2ludDtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBvaW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBzbGlkZVNoYXBlID0gdGhpcy5jb250ZXh0LnBhZ2UuZ2V0U2xpZGVTaGFwZSgpO1xyXG5cdFx0Y29uc3QgcGFnZVJlY3QgPSBzbGlkZVNoYXBlLmJvdW5kcztcclxuXHJcblx0XHRjb25zdCB4ID0gcGFnZVJlY3QueCArICh0aGlzLmxhc3RQb2ludC54IC0gcG9pbnQueCk7XHJcblx0XHRjb25zdCB5ID0gcGFnZVJlY3QueSArICh0aGlzLmxhc3RQb2ludC55IC0gcG9pbnQueSk7XHJcblxyXG5cdFx0c2xpZGVTaGFwZS5zZXRQYWdlUmVjdChuZXcgUmVjdGFuZ2xlKHgsIHksIHBhZ2VSZWN0LndpZHRoLCBwYWdlUmVjdC5oZWlnaHQpKTtcclxuXHJcblx0XHR0aGlzLmxhc3RQb2ludCA9IHBvaW50O1xyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQb2ludCk6IHZvaWQge1xyXG5cdFx0Ly8gTm8tb3BcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBhblRvb2wgfTsiLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBQYWludFRvb2wgfSBmcm9tIFwiLi9wYWludC50b29sXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBBZGRTaGFwZUFjdGlvbiB9IGZyb20gXCIuLi9tb2RlbC9hY3Rpb24vYWRkLXNoYXBlLmFjdGlvblwiO1xyXG5pbXBvcnQgeyBQZW5TaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9wZW4uc2hhcGVcIjtcclxuXHJcbmNsYXNzIFBlblRvb2wgZXh0ZW5kcyBQYWludFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHNoYXBlOiBQZW5TaGFwZTtcclxuXHJcblxyXG5cdGJlZ2luKHBvaW50OiBQZW5Qb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2hhcGUgPSBuZXcgUGVuU2hhcGUodGhpcy5zaGFwZUhhbmRsZSwgdGhpcy5icnVzaCk7XHJcblx0XHR0aGlzLnNoYXBlLmFkZFBvaW50KHBvaW50KTtcclxuXHJcblx0XHRjb250ZXh0LnBhZ2UuYWRkQWN0aW9uKG5ldyBBZGRTaGFwZUFjdGlvbihbdGhpcy5zaGFwZV0pKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnNoYXBlLmFkZFBvaW50KHBvaW50KTtcclxuXHR9XHJcblxyXG5cdGVuZChwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdC8vIE5vLW9wXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQZW5Ub29sIH07IiwiaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgUGFpbnRUb29sIH0gZnJvbSBcIi4vcGFpbnQudG9vbFwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuaW1wb3J0IHsgUGFnZSB9IGZyb20gXCIuLi9tb2RlbC9wYWdlXCI7XHJcbmltcG9ydCB7IFBvaW50ZXJTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9wb2ludGVyLnNoYXBlXCI7XHJcblxyXG5jbGFzcyBQb2ludGVyVG9vbCBleHRlbmRzIFBhaW50VG9vbCB7XHJcblxyXG5cdHByaXZhdGUgc2hhcGU6IFBvaW50ZXJTaGFwZTtcclxuXHJcblx0cHJpdmF0ZSBwYWdlOiBQYWdlO1xyXG5cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBlblBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wYWdlID0gY29udGV4dC5wYWdlO1xyXG5cclxuXHRcdHRoaXMuc2hhcGUgPSBuZXcgUG9pbnRlclNoYXBlKHRoaXMuc2hhcGVIYW5kbGUsIHRoaXMuYnJ1c2gpO1xyXG5cdFx0dGhpcy5zaGFwZS5hZGRQb2ludChwb2ludCk7XHJcblxyXG5cdFx0dGhpcy5wYWdlLmFkZFNoYXBlKHRoaXMuc2hhcGUpO1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2hhcGUuYWRkUG9pbnQocG9pbnQpO1xyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wYWdlLnJlbW92ZVNoYXBlKHRoaXMuc2hhcGUpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9pbnRlclRvb2wgfTsiLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBQYWludFRvb2wgfSBmcm9tIFwiLi9wYWludC50b29sXCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGVTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9yZWN0YW5nbGUuc2hhcGVcIjtcclxuaW1wb3J0IHsgQWRkU2hhcGVBY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWwvYWN0aW9uL2FkZC1zaGFwZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIFJlY3RhbmdsZVRvb2wgZXh0ZW5kcyBQYWludFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHNoYXBlOiBSZWN0YW5nbGVTaGFwZTtcclxuXHJcblx0cHJpdmF0ZSBjb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHJcblxyXG5cdGJlZ2luKHBvaW50OiBQZW5Qb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcblxyXG5cdFx0dGhpcy5zaGFwZSA9IG5ldyBSZWN0YW5nbGVTaGFwZSh0aGlzLnNoYXBlSGFuZGxlLCB0aGlzLmJydXNoKTtcclxuXHRcdHRoaXMuc2hhcGUuc2V0UDAocG9pbnQpO1xyXG5cclxuXHRcdGNvbnRleHQucGFnZS5hZGRBY3Rpb24obmV3IEFkZFNoYXBlQWN0aW9uKFt0aGlzLnNoYXBlXSkpO1xyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2hhcGUuc2V0S2V5RXZlbnQodGhpcy5jb250ZXh0LmtleUV2ZW50KTtcclxuXHRcdHRoaXMuc2hhcGUuc2V0UDEocG9pbnQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUmVjdGFuZ2xlVG9vbCB9OyIsImltcG9ydCB7IEF0b21pY1Rvb2wgfSBmcm9tIFwiLi9hdG9taWMudG9vbFwiO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wb2ludFwiO1xyXG5pbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5cclxuY2xhc3MgUmVkb1Rvb2wgZXh0ZW5kcyBBdG9taWNUb29sIHtcclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0Y29udGV4dC5wYWdlLnJlZG8oKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBSZWRvVG9vbCB9OyIsImltcG9ydCB7IFRvb2wgfSBmcm9tIFwiLi90b29sXCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zaGFwZVwiO1xyXG5pbXBvcnQgeyBTZWxlY3RTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zZWxlY3Quc2hhcGVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5cclxuZW51bSBNb2RlIHsgU2VsZWN0LCBNb3ZlIH1cclxuXHJcbmNsYXNzIFNlbGVjdEdyb3VwVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRwcml2YXRlIG1vZGU6IE1vZGU7XHJcblx0XHJcblx0cHJpdmF0ZSBjb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHRcclxuXHRwcml2YXRlIHNoYXBlOiBTZWxlY3RTaGFwZTtcclxuXHRcclxuXHRwcml2YXRlIHNlbGVjdGVkU2hhcGVzOiBTaGFwZVtdO1xyXG5cdFxyXG5cdHByaXZhdGUgc291cmNlUG9pbnQ6IFBlblBvaW50O1xyXG5cdFxyXG5cdHByaXZhdGUgaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XHJcblxyXG5cclxuXHRiZWdpbihwb2ludDogUGVuUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHR0aGlzLnNvdXJjZVBvaW50ID0gcG9pbnQuY2xvbmUoKTtcclxuXHRcdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcblx0XHR0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcblxyXG5cdFx0dGhpcy5zaGFwZSA9IG5ldyBTZWxlY3RTaGFwZSgpO1xyXG5cclxuXHRcdHRoaXMuY29udGV4dC5wYWdlLmFkZFNoYXBlKHRoaXMuc2hhcGUpO1xyXG5cclxuXHRcdHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKTtcclxuXHJcblx0XHRpZiAodGhpcy5oYXNTZWxlY3RlZFNoYXBlcygpKSB7XHJcblx0XHRcdGlmICh0aGlzLmhpdFNlbGVjdGVkKHBvaW50KSkge1xyXG5cdFx0XHRcdHRoaXMubW9kZSA9IE1vZGUuTW92ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmNvbnRleHQuYmVnaW5CdWxrUmVuZGVyKCk7XHJcblx0XHRcdFx0dGhpcy5yZW1vdmVTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR0aGlzLmNvbnRleHQuZW5kQnVsa1JlbmRlcigpO1xyXG5cclxuXHRcdFx0XHR0aGlzLm1vZGUgPSBNb2RlLlNlbGVjdDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMubW9kZSA9IE1vZGUuU2VsZWN0O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLm1vZGUgPT0gTW9kZS5TZWxlY3QpIHtcclxuXHRcdFx0aWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XHJcblx0XHRcdFx0dGhpcy5zaGFwZS5zZXRQMChwb2ludCk7XHJcblx0XHRcdFx0dGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuc2hhcGUuYWRkUG9pbnQocG9pbnQuY2xvbmUoKSk7XHJcblx0XHRcdHRoaXMuc2hhcGUuc2V0UDEocG9pbnQpO1xyXG5cclxuXHRcdFx0dGhpcy5zZWxlY3RHcm91cCh0aGlzLnNoYXBlLmJvdW5kcyk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLm1vZGUgPT0gTW9kZS5Nb3ZlKSB7XHJcblx0XHRcdHRoaXMuc291cmNlUG9pbnQuc3VidHJhY3QocG9pbnQpO1xyXG5cclxuXHRcdFx0dGhpcy5tb3ZlU2hhcGVzKHRoaXMuc291cmNlUG9pbnQpO1xyXG5cclxuXHRcdFx0dGhpcy5zb3VyY2VQb2ludCA9IHBvaW50LmNsb25lKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRlbmQocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRleHQucGFnZS5yZW1vdmVTaGFwZSh0aGlzLnNoYXBlKTtcclxuXHJcblx0XHR0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RHcm91cChyZWN0OiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGV4dC5iZWdpbkJ1bGtSZW5kZXIoKTtcclxuXHJcblx0XHR0aGlzLnJlbW92ZVNlbGVjdGlvbigpO1xyXG5cclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHRoaXMuY29udGV4dC5wYWdlLmdldFNoYXBlcygpKSB7XHJcblx0XHRcdGlmIChzaGFwZSA9PT0gdGhpcy5zaGFwZSkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzaGFwZS5pbnRlcnNlY3RzKHJlY3QpKSB7XHJcblx0XHRcdFx0dGhpcy5hZGRTZWxlY3Rpb24oc2hhcGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5jb250ZXh0LmVuZEJ1bGtSZW5kZXIoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkU2VsZWN0aW9uKHNoYXBlOiBTaGFwZSk6IHZvaWQge1xyXG5cdFx0c2hhcGUuc2V0U2VsZWN0ZWQodHJ1ZSk7XHJcblxyXG5cdFx0dGhpcy5zZWxlY3RlZFNoYXBlcy5wdXNoKHNoYXBlKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0U2VsZWN0ZWRTaGFwZXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLnNlbGVjdGVkU2hhcGVzID0gbmV3IEFycmF5PFNoYXBlPigpO1xyXG5cclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHRoaXMuY29udGV4dC5wYWdlLmdldFNoYXBlcygpKSB7XHJcblx0XHRcdGlmIChzaGFwZS5pc1NlbGVjdGVkKCkpIHtcclxuXHRcdFx0XHR0aGlzLnNlbGVjdGVkU2hhcGVzLnB1c2goc2hhcGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhhc1NlbGVjdGVkU2hhcGVzKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2VsZWN0ZWRTaGFwZXMubGVuZ3RoICE9IDA7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhpdFNlbGVjdGVkKHBvaW50OiBQZW5Qb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5zZWxlY3RlZFNoYXBlcykge1xyXG5cdFx0XHRpZiAoc2hhcGUuY29udGFpbnMocG9pbnQpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZVNlbGVjdGlvbigpOiB2b2lkIHtcclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHRoaXMuc2VsZWN0ZWRTaGFwZXMpIHtcclxuXHRcdFx0c2hhcGUuc2V0U2VsZWN0ZWQoZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2VsZWN0ZWRTaGFwZXMubGVuZ3RoID0gMDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgbW92ZVNoYXBlcyhkZWx0YTogUGVuUG9pbnQpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5oYXNTZWxlY3RlZFNoYXBlcygpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvbnRleHQuYmVnaW5CdWxrUmVuZGVyKCk7XHJcblxyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5zZWxlY3RlZFNoYXBlcykge1xyXG5cdFx0XHRzaGFwZS5tb3ZlQnlEZWx0YShkZWx0YSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5jb250ZXh0LmVuZEJ1bGtSZW5kZXIoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFNlbGVjdEdyb3VwVG9vbCB9OyIsImltcG9ydCB7IFRvb2wgfSBmcm9tIFwiLi90b29sXCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS9zaGFwZVwiO1xyXG5cclxuY2xhc3MgU2VsZWN0VG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHNvdXJjZVBvaW50OiBQZW5Qb2ludDtcclxuXHJcblx0cHJpdmF0ZSBjb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHJcblx0cHJpdmF0ZSBzZWxlY3RlZFNoYXBlOiBTaGFwZTtcclxuXHJcblxyXG5cdGJlZ2luKHBvaW50OiBQZW5Qb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRoaXMuc291cmNlUG9pbnQgPSBwb2ludC5jbG9uZSgpO1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcblx0XHR0aGlzLnNlbGVjdGVkU2hhcGUgPSB0aGlzLmdldFRvcExldmVsU2hhcGUocG9pbnQpO1xyXG5cclxuXHRcdHRoaXMucmVtb3ZlU2VsZWN0aW9uKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRTaGFwZSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMuc2VsZWN0ZWRTaGFwZS5zZXRTZWxlY3RlZCh0cnVlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5zZWxlY3RlZFNoYXBlICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy5zb3VyY2VQb2ludC5zdWJ0cmFjdChwb2ludCk7XHJcblxyXG5cdFx0XHR0aGlzLmNvbnRleHQuYmVnaW5CdWxrUmVuZGVyKCk7XHJcblx0XHRcdHRoaXMuc2VsZWN0ZWRTaGFwZS5tb3ZlQnlEZWx0YSh0aGlzLnNvdXJjZVBvaW50KTtcclxuXHRcdFx0dGhpcy5jb250ZXh0LmVuZEJ1bGtSZW5kZXIoKTtcclxuXHJcblx0XHRcdHRoaXMuc291cmNlUG9pbnQgPSBwb2ludC5jbG9uZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRTaGFwZSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMuY29udGV4dC5iZWdpbkJ1bGtSZW5kZXIoKTtcclxuXHRcdFx0dGhpcy5zZWxlY3RlZFNoYXBlLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuXHRcdFx0dGhpcy5jb250ZXh0LmVuZEJ1bGtSZW5kZXIoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldFRvcExldmVsU2hhcGUocG9pbnQ6IFBlblBvaW50KSB7XHJcblx0XHRsZXQgc2hhcGUgPSBudWxsO1xyXG5cclxuXHRcdGZvciAobGV0IHMgb2YgdGhpcy5jb250ZXh0LnBhZ2UuZ2V0U2hhcGVzKCkpIHtcclxuXHRcdFx0aWYgKHMuY29udGFpbnMocG9pbnQpKSB7XHJcblx0XHRcdFx0c2hhcGUgPSBzO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gc2hhcGU7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVTZWxlY3Rpb24oKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRleHQuYmVnaW5CdWxrUmVuZGVyKCk7XHJcblxyXG5cdFx0Zm9yIChsZXQgc2hhcGUgb2YgdGhpcy5jb250ZXh0LnBhZ2UuZ2V0U2hhcGVzKCkpIHtcclxuXHRcdFx0aWYgKHNoYXBlLmlzU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHRcdHNoYXBlLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY29udGV4dC5lbmRCdWxrUmVuZGVyKCk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgU2VsZWN0VG9vbCB9OyIsImltcG9ydCB7IEF0b21pY1Rvb2wgfSBmcm9tIFwiLi9hdG9taWMudG9vbFwiO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wb2ludFwiO1xyXG5pbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBUeXBlc2V0dGluZ1NoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3R5cGVzZXR0aW5nLnNoYXBlXCI7XHJcblxyXG5jbGFzcyBUZXh0Q2hhbmdlVG9vbCBleHRlbmRzIEF0b21pY1Rvb2wge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHRleHQ6IHN0cmluZztcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGhhbmRsZTogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKCk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUgPSBoYW5kbGU7XHJcblx0XHR0aGlzLnRleHQgPSB0ZXh0O1xyXG5cdH1cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qgc2hhcGVzID0gY29udGV4dC5wYWdlLmdldFNoYXBlcygpO1xyXG5cclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHNoYXBlcykge1xyXG5cdFx0XHRpZiAoc2hhcGUgaW5zdGFuY2VvZiBUeXBlc2V0dGluZ1NoYXBlICYmIHNoYXBlLmhhbmRsZSA9PT0gdGhpcy5oYW5kbGUpIHtcclxuXHRcdFx0XHRzaGFwZS5zZXRUZXh0KHRoaXMudGV4dCk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBUZXh0Q2hhbmdlVG9vbCB9OyIsImltcG9ydCB7IEF0b21pY1Rvb2wgfSBmcm9tIFwiLi9hdG9taWMudG9vbFwiO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wb2ludFwiO1xyXG5pbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBUZXh0U2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvdGV4dC5zaGFwZVwiO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gXCIuLi9wYWludC9jb2xvclwiO1xyXG5pbXBvcnQgeyBGb250IH0gZnJvbSBcIi4uL3BhaW50L2ZvbnRcIjtcclxuXHJcbmNsYXNzIFRleHRGb250VG9vbCBleHRlbmRzIEF0b21pY1Rvb2wge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGZvbnQ6IEZvbnQ7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgdGV4dENvbG9yOiBDb2xvcjtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSB0ZXh0QXR0cmlidXRlczogTWFwPHN0cmluZywgYm9vbGVhbj47XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihoYW5kbGU6IG51bWJlciwgZm9udDogRm9udCwgdGV4dENvbG9yOiBDb2xvciwgdGV4dEF0dHJpYnV0ZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlID0gaGFuZGxlO1xyXG5cdFx0dGhpcy5mb250ID0gZm9udDtcclxuXHRcdHRoaXMudGV4dENvbG9yID0gdGV4dENvbG9yO1xyXG5cdFx0dGhpcy50ZXh0QXR0cmlidXRlcyA9IHRleHRBdHRyaWJ1dGVzO1xyXG5cdH1cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qgc2hhcGVzID0gY29udGV4dC5wYWdlLmdldFNoYXBlcygpO1xyXG5cclxuXHRcdGZvciAobGV0IHNoYXBlIG9mIHNoYXBlcykge1xyXG5cdFx0XHRpZiAoc2hhcGUgaW5zdGFuY2VvZiBUZXh0U2hhcGUgJiYgc2hhcGUuaGFuZGxlID09PSB0aGlzLmhhbmRsZSkge1xyXG5cdFx0XHRcdHNoYXBlLnNldEZvbnQodGhpcy5mb250KTtcclxuXHRcdFx0XHRzaGFwZS5zZXRUZXh0Q29sb3IodGhpcy50ZXh0Q29sb3IpO1xyXG5cdFx0XHRcdHNoYXBlLnNldFRleHRBdHRyaWJ1dGVzKHRoaXMudGV4dEF0dHJpYnV0ZXMpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dEZvbnRUb29sIH07IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gXCIuL3Rvb2xcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBUZXh0SGlnaGxpZ2h0U2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvdGV4dC1oaWdobGlnaHQuc2hhcGVcIjtcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi4vcGFpbnQvY29sb3JcIjtcclxuaW1wb3J0IHsgQWRkU2hhcGVBY3Rpb24gfSBmcm9tIFwiLi4vbW9kZWwvYWN0aW9uL2FkZC1zaGFwZS5hY3Rpb25cIjtcclxuXHJcbmNsYXNzIFRleHRIaWdobGlnaHRUb29sIGltcGxlbWVudHMgVG9vbCB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgc2hhcGVIYW5kbGU6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBjb2xvcjogQ29sb3I7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgdGV4dEJvdW5kczogUmVjdGFuZ2xlW107XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihzaGFwZUhhbmRsZTogbnVtYmVyLCBjb2xvcjogQ29sb3IsIHRleHRCb3VuZHM6IFJlY3RhbmdsZVtdKSB7XHJcblx0XHR0aGlzLnNoYXBlSGFuZGxlID0gc2hhcGVIYW5kbGU7XHJcblx0XHR0aGlzLmNvbG9yID0gY29sb3I7XHJcblx0XHR0aGlzLnRleHRCb3VuZHMgPSB0ZXh0Qm91bmRzO1xyXG5cdH1cclxuXHJcblx0YmVnaW4ocG9pbnQ6IFBvaW50LCBjb250ZXh0OiBUb29sQ29udGV4dCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMudGV4dEJvdW5kcy5sZW5ndGggPCAxKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgc2VsZWN0U2hhcGU6IFRleHRIaWdobGlnaHRTaGFwZSA9IG51bGw7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBzaGFwZSBvZiBjb250ZXh0LnBhZ2UuZ2V0U2hhcGVzKCkpIHtcclxuXHRcdFx0aWYgKHNoYXBlLmhhbmRsZSA9PT0gdGhpcy5zaGFwZUhhbmRsZSkge1xyXG5cdFx0XHRcdHNlbGVjdFNoYXBlID0gc2hhcGUgYXMgVGV4dEhpZ2hsaWdodFNoYXBlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCFzZWxlY3RTaGFwZSkge1xyXG5cdFx0XHRzZWxlY3RTaGFwZSA9IG5ldyBUZXh0SGlnaGxpZ2h0U2hhcGUodGhpcy5zaGFwZUhhbmRsZSwgdGhpcy5jb2xvcik7XHJcblxyXG5cdFx0XHRjb250ZXh0LnBhZ2UuYWRkQWN0aW9uKG5ldyBBZGRTaGFwZUFjdGlvbihbc2VsZWN0U2hhcGVdKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChjb25zdCByZWN0IG9mIHRoaXMudGV4dEJvdW5kcykge1xyXG5cdFx0XHRzZWxlY3RTaGFwZS5hZGRUZXh0Qm91bmRzKHJlY3QpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZXhlY3V0ZShwb2ludDogUG9pbnQpOiB2b2lkIHtcclxuXHRcdC8vIERvIG5vdGhpbmcuXHJcblx0fVxyXG5cclxuXHRlbmQocG9pbnQ6IFBvaW50KTogdm9pZCB7XHJcblx0XHQvLyBEbyBub3RoaW5nLlxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dEhpZ2hsaWdodFRvb2wgfTsiLCJpbXBvcnQgeyBBdG9taWNUb29sIH0gZnJvbSBcIi4vYXRvbWljLnRvb2xcIjtcclxuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcG9pbnRcIjtcclxuaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgVHlwZXNldHRpbmdTaGFwZSB9IGZyb20gXCIuLi9tb2RlbC9zaGFwZS90eXBlc2V0dGluZy5zaGFwZVwiO1xyXG5cclxuY2xhc3MgVGV4dE1vdmVUb29sIGV4dGVuZHMgQXRvbWljVG9vbCB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlOiBudW1iZXI7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgcG9pbnQ6IFBvaW50O1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoaGFuZGxlOiBudW1iZXIsIHBvaW50OiBQb2ludCkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZSA9IGhhbmRsZTtcclxuXHRcdHRoaXMucG9pbnQgPSBwb2ludDtcclxuXHR9XHJcblxyXG5cdGJlZ2luKHBvaW50OiBQb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHNoYXBlcyA9IGNvbnRleHQucGFnZS5nZXRTaGFwZXMoKTtcclxuXHJcblx0XHRmb3IgKGxldCBzaGFwZSBvZiBzaGFwZXMpIHtcclxuXHRcdFx0aWYgKHNoYXBlIGluc3RhbmNlb2YgVHlwZXNldHRpbmdTaGFwZSAmJiBzaGFwZS5oYW5kbGUgPT09IHRoaXMuaGFuZGxlKSB7XHJcblx0XHRcdFx0Y29udGV4dC5iZWdpbkJ1bGtSZW5kZXIoKTtcclxuXHRcdFx0XHRzaGFwZS5zZXRMb2NhdGlvbih0aGlzLnBvaW50KTtcclxuXHRcdFx0XHRjb250ZXh0LmVuZEJ1bGtSZW5kZXIoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dE1vdmVUb29sIH07IiwiaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IFR5cGVzZXR0aW5nU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvdHlwZXNldHRpbmcuc2hhcGVcIjtcclxuXHJcbmNsYXNzIFRleHRSZW1vdmVUb29sIGV4dGVuZHMgQXRvbWljVG9vbCB7XHJcblxyXG5cdHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihoYW5kbGU6IG51bWJlcikge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZSA9IGhhbmRsZTtcclxuXHR9XHJcblxyXG5cdGJlZ2luKHBvaW50OiBQb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHNoYXBlcyA9IGNvbnRleHQucGFnZS5nZXRTaGFwZXMoKTtcclxuXHJcblx0XHRmb3IgKGxldCBzaGFwZSBvZiBzaGFwZXMpIHtcclxuXHRcdFx0aWYgKHNoYXBlIGluc3RhbmNlb2YgVHlwZXNldHRpbmdTaGFwZSAmJiBzaGFwZS5oYW5kbGUgPT09IHRoaXMuaGFuZGxlKSB7XHJcblx0XHRcdFx0Y29udGV4dC5wYWdlLnJlbW92ZVNoYXBlKHNoYXBlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFRleHRSZW1vdmVUb29sIH07IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gXCIuL3Rvb2xcIjtcclxuaW1wb3J0IHsgVG9vbENvbnRleHQgfSBmcm9tIFwiLi90b29sLWNvbnRleHRcIjtcclxuaW1wb3J0IHsgVGV4dFNoYXBlIH0gZnJvbSBcIi4uL21vZGVsL3NoYXBlL3RleHQuc2hhcGVcIjtcclxuaW1wb3J0IHsgUGVuUG9pbnQgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcGVuLXBvaW50XCI7XHJcblxyXG5jbGFzcyBUZXh0VG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZTogbnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHNoYXBlOiBUZXh0U2hhcGU7XHJcblxyXG5cdHByaXZhdGUgY29udGV4dDogVG9vbENvbnRleHQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihoYW5kbGU6IG51bWJlcikge1xyXG5cdFx0dGhpcy5oYW5kbGUgPSBoYW5kbGU7XHJcblx0fVxyXG5cclxuXHRiZWdpbihwb2ludDogUGVuUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cclxuXHRcdHRoaXMuc2hhcGUgPSBuZXcgVGV4dFNoYXBlKHRoaXMuaGFuZGxlKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHQvLyBOby1vcFxyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zaGFwZS5zZXRMb2NhdGlvbihwb2ludCk7XHJcblxyXG5cdFx0dGhpcy5jb250ZXh0LnBhZ2UuYWRkU2hhcGUodGhpcy5zaGFwZSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgVGV4dFRvb2wgfTsiLCJpbXBvcnQgeyBQYWdlIH0gZnJvbSBcIi4uL21vZGVsL3BhZ2VcIjtcclxuaW1wb3J0IHsgUmVuZGVyQ29udHJvbGxlciB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyLWNvbnRyb2xsZXJcIjtcclxuXHJcbmNsYXNzIFRvb2xDb250ZXh0IHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSByZW5kZXJDb250cm9sbGVyOiBSZW5kZXJDb250cm9sbGVyO1xyXG5cclxuXHRwYWdlOiBQYWdlO1xyXG5cclxuXHRrZXlFdmVudDogS2V5Ym9hcmRFdmVudDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKHJlbmRlckNvbnRyb2xsZXI6IFJlbmRlckNvbnRyb2xsZXIpIHtcclxuXHRcdHRoaXMucmVuZGVyQ29udHJvbGxlciA9IHJlbmRlckNvbnRyb2xsZXI7XHJcblx0fVxyXG5cclxuXHRiZWdpbkJ1bGtSZW5kZXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlbmRlckNvbnRyb2xsZXIuYmVnaW5CdWxrUmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHRlbmRCdWxrUmVuZGVyKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZW5kZXJDb250cm9sbGVyLmVuZEJ1bGtSZW5kZXIoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRvb2xDb250ZXh0IH07IiwiaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcblxyXG5jbGFzcyBVbmRvVG9vbCBleHRlbmRzIEF0b21pY1Rvb2wge1xyXG5cclxuXHRiZWdpbihwb2ludDogUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHRjb250ZXh0LnBhZ2UudW5kbygpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFVuZG9Ub29sIH07IiwiaW1wb3J0IHsgQXRvbWljVG9vbCB9IGZyb20gXCIuL2F0b21pYy50b29sXCI7XHJcbmltcG9ydCB7IFRvb2xDb250ZXh0IH0gZnJvbSBcIi4vdG9vbC1jb250ZXh0XCI7XHJcbmltcG9ydCB7IFBlblBvaW50IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3Blbi1wb2ludFwiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcblxyXG5jbGFzcyBab29tT3V0VG9vbCBleHRlbmRzIEF0b21pY1Rvb2wge1xyXG5cclxuXHRiZWdpbihwb2ludDogUGVuUG9pbnQsIGNvbnRleHQ6IFRvb2xDb250ZXh0KTogdm9pZCB7XHJcblx0XHRjb250ZXh0LnBhZ2UuZ2V0U2xpZGVTaGFwZSgpLnNldFBhZ2VSZWN0KG5ldyBSZWN0YW5nbGUoMCwgMCwgMSwgMSkpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgWm9vbU91dFRvb2wgfTsiLCJpbXBvcnQgeyBUb29sQ29udGV4dCB9IGZyb20gXCIuL3Rvb2wtY29udGV4dFwiO1xyXG5pbXBvcnQgeyBUb29sIH0gZnJvbSBcIi4vdG9vbFwiO1xyXG5pbXBvcnQgeyBab29tU2hhcGUgfSBmcm9tIFwiLi4vbW9kZWwvc2hhcGUvem9vbS5zaGFwZVwiO1xyXG5pbXBvcnQgeyBQZW5Qb2ludCB9IGZyb20gXCIuLi9nZW9tZXRyeS9wZW4tcG9pbnRcIjtcclxuXHJcbmNsYXNzIFpvb21Ub29sIGltcGxlbWVudHMgVG9vbCB7XHJcblxyXG5cdHByaXZhdGUgc2hhcGU6IFpvb21TaGFwZTtcclxuXHJcblx0cHJpdmF0ZSBjb250ZXh0OiBUb29sQ29udGV4dDtcclxuXHJcblx0cHJpdmF0ZSBpbml0aWFsaXplZDogYm9vbGVhbjtcclxuXHJcblxyXG5cdGJlZ2luKHBvaW50OiBQZW5Qb2ludCwgY29udGV4dDogVG9vbENvbnRleHQpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcblxyXG5cdFx0dGhpcy5zaGFwZSA9IG5ldyBab29tU2hhcGUoKTtcclxuXHJcblx0XHR0aGlzLmNvbnRleHQucGFnZS5hZGRTaGFwZSh0aGlzLnNoYXBlKTtcclxuXHR9XHJcblxyXG5cdGV4ZWN1dGUocG9pbnQ6IFBlblBvaW50KTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcclxuXHRcdFx0dGhpcy5zaGFwZS5zZXRQMChwb2ludCk7XHJcblx0XHRcdHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2hhcGUuc2V0UDEocG9pbnQpO1xyXG5cdH1cclxuXHJcblx0ZW5kKHBvaW50OiBQZW5Qb2ludCk6IHZvaWQge1xyXG5cdFx0dGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuXHRcdHRoaXMuY29udGV4dC5wYWdlLnJlbW92ZVNoYXBlKHRoaXMuc2hhcGUpO1xyXG5cclxuXHRcdHRoaXMuY29udGV4dC5wYWdlLmdldFNsaWRlU2hhcGUoKS5zZXRQYWdlUmVjdCh0aGlzLnNoYXBlLmJvdW5kcyk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBab29tVG9vbCB9OyIsImV4cG9ydCBpbnRlcmZhY2UgTGlzdGVuZXI8VD4ge1xyXG5cclxuXHQoZXZlbnQ6IFQpOiB2b2lkO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEaXNwb3NhYmxlIHtcclxuXHJcblx0ZGlzcG9zZSgpOiB2b2lkO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFR5cGVkRXZlbnQ8VD4ge1xyXG5cclxuXHRwcml2YXRlIGxpc3RlbmVyczogTGlzdGVuZXI8VD5bXSA9IFtdO1xyXG5cdHByaXZhdGUgbGlzdGVuZXJzT25jZXI6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuXHJcblxyXG5cdHN1YnNjcmliZShsaXN0ZW5lcjogTGlzdGVuZXI8VD4pOiBEaXNwb3NhYmxlIHtcclxuXHRcdHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGRpc3Bvc2U6ICgpID0+IHRoaXMudW5zdWJzY3JpYmUobGlzdGVuZXIpXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0c3Vic2NyaWJlT25jZShsaXN0ZW5lcjogTGlzdGVuZXI8VD4pOiB2b2lkIHtcclxuXHRcdHRoaXMubGlzdGVuZXJzT25jZXIucHVzaChsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHR1bnN1YnNjcmliZShsaXN0ZW5lcjogTGlzdGVuZXI8VD4pOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNhbGxiYWNrSW5kZXggPSB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcclxuXHJcblx0XHRpZiAoY2FsbGJhY2tJbmRleCA+IC0xKSB7XHJcblx0XHRcdHRoaXMubGlzdGVuZXJzLnNwbGljZShjYWxsYmFja0luZGV4LCAxKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1Ymxpc2goZXZlbnQ6IFQpOiB2b2lkIHtcclxuXHRcdHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihldmVudCkpO1xyXG5cclxuXHRcdHRoaXMubGlzdGVuZXJzT25jZXIuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGV2ZW50KSk7XHJcblx0XHR0aGlzLmxpc3RlbmVyc09uY2VyID0gW107XHJcblx0fVxyXG5cclxuXHRwaXBlKHRlOiBUeXBlZEV2ZW50PFQ+KTogRGlzcG9zYWJsZSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zdWJzY3JpYmUoKGUpID0+IHRlLnB1Ymxpc2goZSkpO1xyXG5cdH1cclxufVxyXG5cclxuLy9leHBvcnQgeyBMaXN0ZW5lciwgRGlzcG9zYWJsZSwgVHlwZWRFdmVudCB9OyIsImltcG9ydCB7IEV4ZWN1dGFibGUgfSBmcm9tIFwiLi9leGVjdXRhYmxlXCI7XHJcbmltcG9ydCB7IEV4ZWN1dGFibGVTdGF0ZSB9IGZyb20gXCIuL2V4ZWN1dGFibGUtc3RhdGVcIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIEV4ZWN1dGFibGVCYXNlIGV4dGVuZHMgRXhlY3V0YWJsZSB7XHJcblxyXG5cdGluaXQoKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldFN0YXRlKEV4ZWN1dGFibGVTdGF0ZS5Jbml0aWFsaXppbmcpO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdHRoaXMuaW5pdEludGVybmFsKCk7XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHR0aGlzLnNldFN0YXRlKEV4ZWN1dGFibGVTdGF0ZS5FcnJvcik7XHJcblxyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBpbml0ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfTogJHtlfWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2V0U3RhdGUoRXhlY3V0YWJsZVN0YXRlLkluaXRpYWxpemVkKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBhYnN0cmFjdCBpbml0SW50ZXJuYWwoKTogdm9pZDtcclxuXHRcclxuXHRzdGFydCgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmNyZWF0ZWQoKSB8fCB0aGlzLmRlc3Ryb3llZCgpKSB7XHJcblx0XHRcdHRoaXMuaW5pdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2V0U3RhdGUoRXhlY3V0YWJsZVN0YXRlLlN0YXJ0aW5nKTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHR0aGlzLnN0YXJ0SW50ZXJuYWwoKTtcclxuXHRcdH1cclxuXHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdHRoaXMuc2V0U3RhdGUoRXhlY3V0YWJsZVN0YXRlLkVycm9yKTtcclxuXHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHN0YXJ0ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfTogJHtlfWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2V0U3RhdGUoRXhlY3V0YWJsZVN0YXRlLlN0YXJ0ZWQpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGFic3RyYWN0IHN0YXJ0SW50ZXJuYWwoKTogdm9pZDtcclxuXHRcclxuXHRzdG9wKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZShFeGVjdXRhYmxlU3RhdGUuU3RvcHBpbmcpO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdHRoaXMuc3RvcEludGVybmFsKCk7XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHR0aGlzLnNldFN0YXRlKEV4ZWN1dGFibGVTdGF0ZS5FcnJvcik7XHJcblxyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzdG9wICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfTogJHtlfWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2V0U3RhdGUoRXhlY3V0YWJsZVN0YXRlLlN0b3BwZWQpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGFic3RyYWN0IHN0b3BJbnRlcm5hbCgpOiB2b2lkO1xyXG5cclxuXHRzdXNwZW5kKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZShFeGVjdXRhYmxlU3RhdGUuU3VzcGVuZGluZyk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0dGhpcy5zdXNwZW5kSW50ZXJuYWwoKTtcclxuXHRcdH1cclxuXHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdHRoaXMuc2V0U3RhdGUoRXhlY3V0YWJsZVN0YXRlLkVycm9yKTtcclxuXHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHN1c3BlbmQgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9OiAke2V9YCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZXRTdGF0ZShFeGVjdXRhYmxlU3RhdGUuU3VzcGVuZGVkKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBzdXNwZW5kSW50ZXJuYWwoKTogdm9pZCB7XHJcblxyXG5cdH1cclxuXHJcblx0ZGVzdHJveSgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnN0YXJ0ZWQoKSB8fCB0aGlzLnN1c3BlbmRlZCgpKSB7XHJcblx0XHRcdHN0b3AoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNldFN0YXRlKEV4ZWN1dGFibGVTdGF0ZS5EZXN0cm95aW5nKTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHR0aGlzLmRlc3Ryb3lJbnRlcm5hbCgpO1xyXG5cdFx0fVxyXG5cdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0dGhpcy5zZXRTdGF0ZShFeGVjdXRhYmxlU3RhdGUuRXJyb3IpO1xyXG5cclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZGVzdHJveSAke3RoaXMuY29uc3RydWN0b3IubmFtZX06ICR7ZX1gKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNldFN0YXRlKEV4ZWN1dGFibGVTdGF0ZS5EZXN0cm95ZWQpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGFic3RyYWN0IGRlc3Ryb3lJbnRlcm5hbCgpOiB2b2lkO1xyXG5cdFxyXG59XHJcblxyXG5leHBvcnQgeyBFeGVjdXRhYmxlQmFzZSB9OyIsImVudW0gRXhlY3V0YWJsZVN0YXRlIHtcclxuXHJcblx0Q3JlYXRlZCA9IFwiQ3JlYXRlZFwiLFxyXG5cdEluaXRpYWxpemluZyA9IFwiSW5pdGlhbGl6aW5nXCIsXHJcblx0SW5pdGlhbGl6ZWQgPSBcIkluaXRpYWxpemVkXCIsXHJcblx0U3RhcnRpbmcgPSBcIlN0YXJ0aW5nXCIsXHJcblx0U3RhcnRlZCA9IFwiU3RhcnRlZFwiLFxyXG5cdFN0b3BwaW5nID0gXCJTdG9wcGluZ1wiLFxyXG5cdFN0b3BwZWQgPSBcIlN0b3BwZWRcIixcclxuXHRTdXNwZW5kaW5nID0gXCJTdXNwZW5kaW5nXCIsXHJcblx0U3VzcGVuZGVkID0gXCJTdXNwZW5kZWRcIixcclxuXHREZXN0cm95aW5nID0gXCJEZXN0cm95aW5nXCIsXHJcblx0RGVzdHJveWVkID0gXCJEZXN0cm95ZWRcIixcclxuXHRFcnJvciA9IFwiRXJyb3JcIlxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgRXhlY3V0YWJsZVN0YXRlIH07IiwiaW1wb3J0IHsgRXhlY3V0YWJsZVN0YXRlIH0gZnJvbSBcIi4vZXhlY3V0YWJsZS1zdGF0ZVwiO1xyXG5pbXBvcnQgeyBUeXBlZEV2ZW50LCBMaXN0ZW5lciwgRGlzcG9zYWJsZSB9IGZyb20gXCIuL2V2ZW50LWxpc3RlbmVyXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBFeGVjdXRhYmxlIHtcclxuXHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IHN0YXRlRXZlbnQgPSBuZXcgVHlwZWRFdmVudDxFeGVjdXRhYmxlU3RhdGU+KCk7XHJcblxyXG5cdHByb3RlY3RlZCBfc3RhdGU6IEV4ZWN1dGFibGVTdGF0ZSA9IEV4ZWN1dGFibGVTdGF0ZS5DcmVhdGVkO1xyXG5cclxuXHRwcm90ZWN0ZWQgX3ByZXZTdGF0ZTogRXhlY3V0YWJsZVN0YXRlID0gRXhlY3V0YWJsZVN0YXRlLkNyZWF0ZWQ7XHJcblxyXG5cclxuXHRhYnN0cmFjdCBpbml0KCk6IHZvaWQ7XHJcblxyXG5cdGFic3RyYWN0IHN0YXJ0KCk6IHZvaWQ7XHJcblxyXG5cdGFic3RyYWN0IHN0b3AoKTogdm9pZDtcclxuXHJcblx0YWJzdHJhY3Qgc3VzcGVuZCgpOiB2b2lkO1xyXG5cclxuXHRhYnN0cmFjdCBkZXN0cm95KCk6IHZvaWQ7XHJcblxyXG5cclxuXHRnZXQgc3RhdGUoKTogRXhlY3V0YWJsZVN0YXRlIHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGF0ZVxyXG5cdH1cclxuXHJcblx0Z2V0IHByZXZpb3VzU3RhdGUoKTogRXhlY3V0YWJsZVN0YXRlIHtcclxuXHRcdHJldHVybiB0aGlzLl9wcmV2U3RhdGU7XHJcblx0fVxyXG5cclxuXHRpbml0aWFsaXplZCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGF0ZSA9PT0gRXhlY3V0YWJsZVN0YXRlLkluaXRpYWxpemVkO1xyXG5cdH1cclxuXHJcblx0Y3JlYXRlZCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGF0ZSA9PT0gRXhlY3V0YWJsZVN0YXRlLkNyZWF0ZWQ7XHJcblx0fVxyXG5cclxuXHRzdGFydGVkKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3N0YXRlID09PSBFeGVjdXRhYmxlU3RhdGUuU3RhcnRlZDtcclxuXHR9XHJcblxyXG5cdHN0b3BwZWQoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGUgPT09IEV4ZWN1dGFibGVTdGF0ZS5TdG9wcGVkO1xyXG5cdH1cclxuXHJcblx0c3VzcGVuZGVkKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3N0YXRlID09PSBFeGVjdXRhYmxlU3RhdGUuU3VzcGVuZGVkO1xyXG5cdH1cclxuXHJcblx0ZGVzdHJveWVkKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3N0YXRlID09PSBFeGVjdXRhYmxlU3RhdGUuRGVzdHJveWVkO1xyXG5cdH1cclxuXHJcblx0ZXJyb3IoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGUgPT09IEV4ZWN1dGFibGVTdGF0ZS5FcnJvcjtcclxuXHR9XHJcblxyXG5cdGFkZFN0YXRlTGlzdGVuZXIobGlzdGVuZXI6IExpc3RlbmVyPEV4ZWN1dGFibGVTdGF0ZT4pOiBEaXNwb3NhYmxlIHtcclxuXHRcdHJldHVybiB0aGlzLnN0YXRlRXZlbnQuc3Vic2NyaWJlKGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZVN0YXRlTGlzdGVuZXIobGlzdGVuZXI6IExpc3RlbmVyPEV4ZWN1dGFibGVTdGF0ZT4pOiB2b2lkIHtcclxuXHRcdHRoaXMuc3RhdGVFdmVudC51bnN1YnNjcmliZShsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgZmlyZVN0YXRlQ2hhbmdlZCgpOiB2b2lkIHtcclxuXHRcdHRoaXMuc3RhdGVFdmVudC5wdWJsaXNoKHRoaXMuX3N0YXRlKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBzZXRTdGF0ZShzdGF0ZTogRXhlY3V0YWJsZVN0YXRlKTogdm9pZCB7XHJcblx0XHQvL2NvbnNvbGUubG9nKGBTZXR0aW5nIHN0YXRlIGZvciAke3RoaXMuY29uc3RydWN0b3IubmFtZX0gdG8gJHtzdGF0ZX1gKTtcclxuXHJcblx0XHRpZiAoIXRoaXMudmFsaWRhdGVOZXh0U3RhdGUoc3RhdGUpKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZvciAke3RoaXMuY29uc3RydWN0b3IubmFtZX06IFske3RoaXMuc3RhdGV9XSAtPiBbJHtzdGF0ZX1dLmApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3ByZXZTdGF0ZSA9IHRoaXMuX3N0YXRlO1xyXG5cdFx0dGhpcy5fc3RhdGUgPSBzdGF0ZTtcclxuXHJcblx0XHR0aGlzLmZpcmVTdGF0ZUNoYW5nZWQoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdmFsaWRhdGVOZXh0U3RhdGUobmV4dFN0YXRlOiBFeGVjdXRhYmxlU3RhdGUpOiBib29sZWFuIHtcclxuXHRcdHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcclxuXHRcdFx0Y2FzZSBFeGVjdXRhYmxlU3RhdGUuQ3JlYXRlZDpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLkluaXRpYWxpemluZyxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5EZXN0cm95aW5nKTtcclxuXHJcblx0XHRcdGNhc2UgRXhlY3V0YWJsZVN0YXRlLkluaXRpYWxpemluZzpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLkluaXRpYWxpemVkLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLkVycm9yKTtcclxuXHJcblx0XHRcdGNhc2UgRXhlY3V0YWJsZVN0YXRlLkluaXRpYWxpemVkOlxyXG5cdFx0XHRcdHJldHVybiB0aGlzLmlzQWxsb3dlZChuZXh0U3RhdGUsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuU3RhcnRpbmcsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuRGVzdHJveWluZyk7XHJcblxyXG5cdFx0XHRjYXNlIEV4ZWN1dGFibGVTdGF0ZS5TdGFydGluZzpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN0YXJ0ZWQsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuRXJyb3IpO1xyXG5cclxuXHRcdFx0Y2FzZSBFeGVjdXRhYmxlU3RhdGUuU3RhcnRlZDpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN1c3BlbmRpbmcsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuU3RvcHBpbmcsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuRGVzdHJveWluZyxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5FcnJvcik7XHJcblxyXG5cdFx0XHRjYXNlIEV4ZWN1dGFibGVTdGF0ZS5TdG9wcGluZzpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN0b3BwZWQsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuRXJyb3IpO1xyXG5cclxuXHRcdFx0Y2FzZSBFeGVjdXRhYmxlU3RhdGUuU3RvcHBlZDpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN0YXJ0aW5nLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLkRlc3Ryb3lpbmcpO1xyXG5cclxuXHRcdFx0Y2FzZSBFeGVjdXRhYmxlU3RhdGUuU3VzcGVuZGluZzpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN1c3BlbmRlZCxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5FcnJvcik7XHJcblxyXG5cdFx0XHRjYXNlIEV4ZWN1dGFibGVTdGF0ZS5TdXNwZW5kZWQ6XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuaXNBbGxvd2VkKG5leHRTdGF0ZSxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5TdGFydGluZyxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5TdG9wcGluZyxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5EZXN0cm95aW5nKTtcclxuXHJcblx0XHRcdGNhc2UgRXhlY3V0YWJsZVN0YXRlLkRlc3Ryb3lpbmc6XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuaXNBbGxvd2VkKG5leHRTdGF0ZSxcclxuXHRcdFx0XHRcdEV4ZWN1dGFibGVTdGF0ZS5EZXN0cm95ZWQsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuRXJyb3IpO1xyXG5cclxuXHRcdFx0Y2FzZSBFeGVjdXRhYmxlU3RhdGUuRGVzdHJveWVkOlxyXG5cdFx0XHRcdHJldHVybiB0aGlzLmlzQWxsb3dlZChuZXh0U3RhdGUsXHJcblx0XHRcdFx0XHRFeGVjdXRhYmxlU3RhdGUuSW5pdGlhbGl6aW5nKTtcclxuXHJcblx0XHRcdGNhc2UgRXhlY3V0YWJsZVN0YXRlLkVycm9yOlxyXG5cdFx0XHRcdC8vIEFsbG93IHRvIHJlY292ZXIgZnJvbSBwcmV2aW91cyBvcGVyYXRpb24gZmFpbHVyZS5cclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5pc0FsbG93ZWQobmV4dFN0YXRlLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN0YXJ0aW5nLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLlN0b3BwaW5nLFxyXG5cdFx0XHRcdFx0RXhlY3V0YWJsZVN0YXRlLkRlc3Ryb3lpbmcpO1xyXG5cclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGlzQWxsb3dlZChuZXh0U3RhdGU6IEV4ZWN1dGFibGVTdGF0ZSwgLi4uYWxsb3dlZFN0YXRlczogRXhlY3V0YWJsZVN0YXRlW10pOiBib29sZWFuIHtcclxuXHRcdGlmICghYWxsb3dlZFN0YXRlcykge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyBhbGxvd2VkIHN0YXRlcyBwcm92aWRlZC5cIik7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChsZXQgYWxsb3dlZFN0YXRlIG9mIGFsbG93ZWRTdGF0ZXMpIHtcclxuXHRcdFx0aWYgKG5leHRTdGF0ZSA9PSBhbGxvd2VkU3RhdGUpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEV4ZWN1dGFibGUgfTsiLCJpbXBvcnQgeyBIdHRwUmVzcG9uc2UgfSBmcm9tIFwiLi9odHRwLXJlc3BvbnNlXCI7XHJcblxyXG5leHBvcnQgdHlwZSBIdHRwTWV0aG9kID0gXCJERUxFVEVcIiB8IFwiR0VUXCIgfCBcIkhFQURcIiB8IFwiT1BUSU9OU1wiIHwgXCJQQVRDSFwiIHwgXCJQT1NUXCIgfCBcIlBVVFwiO1xyXG5cclxuZXhwb3J0IHR5cGUgSHR0cFByb2dyZXNzTGlzdGVuZXIgPSAoZXZlbnQ6IFByb2dyZXNzRXZlbnQpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBSZXF1ZXN0T3B0aW9ucyB7XHJcblxyXG5cdHBhcmFtcz86IHN0cmluZyB8IFVSTFNlYXJjaFBhcmFtcztcclxuXHJcblx0aGVhZGVycz86IE1hcDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPjtcclxuXHJcblx0cmV0dXJuVHlwZT86IFwiYm9keVwiIHwgXCJyZXNwb25zZVwiO1xyXG5cclxuXHRyZXNwb25zZVR5cGU/OiBYTUxIdHRwUmVxdWVzdFJlc3BvbnNlVHlwZTtcclxuXHJcblx0d2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcclxuXHJcblx0dGltZW91dD86IG51bWJlcjtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwUmVxdWVzdCB7XHJcblxyXG5cdHByaXZhdGUgcmVxdWVzdE9wdGlvbnM6IEh0dHBSZXF1ZXN0T3B0aW9ucztcclxuXHJcblx0cHJpdmF0ZSBvblByb2dyZXNzOiBIdHRwUHJvZ3Jlc3NMaXN0ZW5lcjtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBIdHRwUmVxdWVzdE9wdGlvbnMpIHtcclxuXHRcdHRoaXMucmVxdWVzdE9wdGlvbnMgPSBvcHRpb25zIHx8IHtcclxuXHRcdFx0cmV0dXJuVHlwZTogXCJib2R5XCIsXHJcblx0XHRcdHJlc3BvbnNlVHlwZTogXCJqc29uXCIsXHJcblx0XHRcdHdpdGhDcmVkZW50aWFsczogZmFsc2UsXHJcblx0XHRcdHRpbWVvdXQ6IDBcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRzZXRIdHRwUGFyYW1zKHBhcmFtczogc3RyaW5nIHwgVVJMU2VhcmNoUGFyYW1zKTogSHR0cFJlcXVlc3Qge1xyXG5cdFx0dGhpcy5yZXF1ZXN0T3B0aW9ucy5wYXJhbXMgPSBwYXJhbXM7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdHNldEh0dHBIZWFkZXJzKGhlYWRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPik6IEh0dHBSZXF1ZXN0IHtcclxuXHRcdHRoaXMucmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IGhlYWRlcnM7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdHNldFJldHVyblR5cGUocmV0dXJuVHlwZTogXCJib2R5XCIgfCBcInJlc3BvbnNlXCIpOiBIdHRwUmVxdWVzdCB7XHJcblx0XHR0aGlzLnJlcXVlc3RPcHRpb25zLnJldHVyblR5cGUgPSByZXR1cm5UeXBlO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHRzZXRSZXNwb25zZVR5cGUocmVzcG9uc2VUeXBlOiBYTUxIdHRwUmVxdWVzdFJlc3BvbnNlVHlwZSk6IEh0dHBSZXF1ZXN0IHtcclxuXHRcdHRoaXMucmVxdWVzdE9wdGlvbnMucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHRzZXRXaXRoQ3JlZGVudGlhbHMod2l0aENyZWRlbnRpYWxzOiBib29sZWFuKTogSHR0cFJlcXVlc3Qge1xyXG5cdFx0dGhpcy5yZXF1ZXN0T3B0aW9ucy53aXRoQ3JlZGVudGlhbHMgPSB3aXRoQ3JlZGVudGlhbHM7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdHNldFRpbWVvdXQodGltZW91dDogbnVtYmVyKTogSHR0cFJlcXVlc3Qge1xyXG5cdFx0dGhpcy5yZXF1ZXN0T3B0aW9ucy50aW1lb3V0ID0gdGltZW91dDtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0c2V0T3B0aW9ucyhvcHRpb25zOiBIdHRwUmVxdWVzdE9wdGlvbnMpOiBIdHRwUmVxdWVzdCB7XHJcblx0XHR0aGlzLnJlcXVlc3RPcHRpb25zID0gb3B0aW9ucztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0c2V0T25Qcm9ncmVzcyhvblByb2dyZXNzOiBIdHRwUHJvZ3Jlc3NMaXN0ZW5lcik6IEh0dHBSZXF1ZXN0IHtcclxuXHRcdHRoaXMub25Qcm9ncmVzcyA9IG9uUHJvZ3Jlc3M7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdGRlbGV0ZSh1cmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCB1cmwpO1xyXG5cdH1cclxuXHJcblx0Z2V0PFQ+KHVybDogc3RyaW5nKTogUHJvbWlzZTxUPiB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXF1ZXN0KFwiR0VUXCIsIHVybCk7XHJcblx0fVxyXG5cclxuXHRoZWFkKHVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xyXG5cdH1cclxuXHJcblx0b3B0aW9ucyh1cmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVxdWVzdChcIk9QVElPTlNcIiwgdXJsKTtcclxuXHR9XHJcblxyXG5cdHBhdGNoPFQ+KHVybDogc3RyaW5nLCBib2R5OiBhbnkpOiBQcm9taXNlPFQ+IHtcclxuXHRcdHJldHVybiB0aGlzLnJlcXVlc3QoXCJQQVRDSFwiLCB1cmwsIGJvZHkpO1xyXG5cdH1cclxuXHJcblx0cG9zdDxUPih1cmw6IHN0cmluZywgYm9keTogYW55KTogUHJvbWlzZTxUPiB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXF1ZXN0KFwiUE9TVFwiLCB1cmwsIGJvZHkpO1xyXG5cdH1cclxuXHJcblx0cHV0PFQ+KHVybDogc3RyaW5nLCBib2R5OiBhbnkpOiBQcm9taXNlPFQ+IHtcclxuXHRcdHJldHVybiB0aGlzLnJlcXVlc3QoXCJQVVRcIiwgdXJsLCBib2R5KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVxdWVzdDxUPihtZXRob2Q6IEh0dHBNZXRob2QsIHVybDogc3RyaW5nLCBib2R5PzogYW55KTogUHJvbWlzZTxUPiB7XHJcblx0XHRjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRyZXF1ZXN0Lm9wZW4obWV0aG9kLCB0aGlzLmNvbXBvc2VVcmwodXJsKSwgdHJ1ZSk7XHJcblx0XHRyZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IHRoaXMucmVxdWVzdE9wdGlvbnMucmVzcG9uc2VUeXBlO1xyXG5cdFx0cmVxdWVzdC50aW1lb3V0ID0gdGhpcy5yZXF1ZXN0T3B0aW9ucy50aW1lb3V0O1xyXG5cdFx0cmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLnJlcXVlc3RPcHRpb25zLndpdGhDcmVkZW50aWFscztcclxuXHJcblx0XHR0aGlzLnNldEhlYWRlcnMoYm9keSwgcmVxdWVzdCk7XHJcblxyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0Y29uc3QgZXJyb3JIYW5kbGVyID0gKCkgPT4ge1xyXG5cdFx0XHRcdHJlamVjdCh0aGlzLmdldFJlc3BvbnNlKHJlcXVlc3QpKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHJlcXVlc3Qub25sb2FkID0gKCkgPT4ge1xyXG5cdFx0XHRcdGlmIChyZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCA0MDApIHtcclxuXHRcdFx0XHRcdGxldCByZXR1cm5WYWx1ZSA9IG51bGw7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucmVxdWVzdE9wdGlvbnMucmV0dXJuVHlwZSA9PT0gXCJyZXNwb25zZVwiKSB7XHJcblx0XHRcdFx0XHRcdHJldHVyblZhbHVlID0gdGhpcy5nZXRSZXNwb25zZShyZXF1ZXN0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm5WYWx1ZSA9IHRoaXMuZGVjb2RlQm9keShyZXF1ZXN0KTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRyZXNvbHZlKHJldHVyblZhbHVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRlcnJvckhhbmRsZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdHJlcXVlc3Qub250aW1lb3V0ID0gZXJyb3JIYW5kbGVyO1xyXG5cdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5vblByb2dyZXNzKSB7XHJcblx0XHRcdFx0aWYgKGJvZHkgJiYgcmVxdWVzdC51cGxvYWQpIHtcclxuXHRcdFx0XHRcdHJlcXVlc3QudXBsb2FkLm9ucHJvZ3Jlc3MgPSB0aGlzLm9uUHJvZ3Jlc3M7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0cmVxdWVzdC5vbnByb2dyZXNzID0gdGhpcy5vblByb2dyZXNzO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmVxdWVzdC5zZW5kKHRoaXMuZW5jb2RlQm9keShib2R5KSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0UmVzcG9uc2U8VD4ocmVxdWVzdDogWE1MSHR0cFJlcXVlc3QpOiBIdHRwUmVzcG9uc2U8VD4ge1xyXG5cdFx0Y29uc3QgcmVzcG9uc2U6IEh0dHBSZXNwb25zZTxUPiA9IHtcclxuXHRcdFx0Ym9keTogdGhpcy5kZWNvZGVCb2R5KHJlcXVlc3QpLFxyXG5cdFx0XHRoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMocmVxdWVzdCksXHJcblx0XHRcdHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXHJcblx0XHRcdHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dFxyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gcmVzcG9uc2U7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNvbXBvc2VVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgcGFyYW1zID0gdGhpcy5yZXF1ZXN0T3B0aW9ucy5wYXJhbXM7XHJcblxyXG5cdFx0aWYgKCFwYXJhbXMpIHtcclxuXHRcdFx0cmV0dXJuIHVybDtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBwYXJhbXNFbmMgPSBwYXJhbXMgPyBwYXJhbXMudG9TdHJpbmcoKSA6IFwiXCI7XHJcblxyXG5cdFx0aWYgKHBhcmFtc0VuYykge1xyXG5cdFx0XHRjb25zdCBxSW5kZXggPSB1cmwuaW5kZXhPZihcIj9cIik7XHJcblx0XHRcdGNvbnN0IHNlcDogc3RyaW5nID0gcUluZGV4ID09PSAtMSA/IFwiP1wiIDogKHFJbmRleCA8IHVybC5sZW5ndGggLSAxID8gXCImXCIgOiBcIlwiKTtcclxuXHJcblx0XHRcdHVybCA9IHVybCArIHNlcCArIHBhcmFtc0VuYztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdXJsO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRDb250ZW50VHlwZShib2R5OiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0aWYgKGJvZHkgPT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYm9keSBpbnN0YW5jZW9mIEJsb2IpIHtcclxuXHRcdFx0cmV0dXJuIGJvZHkudHlwZTtcclxuXHRcdH1cclxuXHRcdC8vIFJlbHkgb24gdGhlIGJyb3dzZXIncyBjb250ZW50IHR5cGUgYXNzaWdubWVudC5cclxuXHRcdGlmIChib2R5IGluc3RhbmNlb2YgRm9ybURhdGEpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIpIHtcclxuXHRcdFx0cmV0dXJuIFwidGV4dC9wbGFpblwiO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJvZHkgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpIHtcclxuXHRcdFx0cmV0dXJuIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCI7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZW9mIGJvZHkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGJvZHkgPT09IFwibnVtYmVyXCIgfHwgQXJyYXkuaXNBcnJheShib2R5KSkge1xyXG5cdFx0XHRyZXR1cm4gXCJhcHBsaWNhdGlvbi9qc29uXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGVuY29kZUJvZHkoYm9keTogYW55KTogYW55IHtcclxuXHRcdGlmIChib2R5ID09IG51bGwpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGJvZHkgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBib2R5IGluc3RhbmNlb2YgQmxvYiB8fCBib2R5IGluc3RhbmNlb2YgRm9ybURhdGEgfHwgdHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIpIHtcclxuXHRcdFx0cmV0dXJuIGJvZHk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHR5cGVvZiBib2R5ID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBib2R5ID09PSBcImJvb2xlYW5cIiB8fCBBcnJheS5pc0FycmF5KGJvZHkpKSB7XHJcblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShib2R5KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gKGJvZHkgYXMgYW55KS50b1N0cmluZygpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBkZWNvZGVCb2R5KHJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0KTogYW55IHtcclxuXHRcdGxldCBib2R5ID0gcmVxdWVzdC5yZXNwb25zZSB8fCBudWxsO1xyXG5cdFx0bGV0IHJlc3BvbnNlVHlwZTogc3RyaW5nID0gcmVxdWVzdC5yZXNwb25zZVR5cGU7XHJcblxyXG5cdFx0aWYgKCFyZXNwb25zZVR5cGUpIHtcclxuXHRcdFx0cmVzcG9uc2VUeXBlID0gcmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtcclxuXHJcblx0XHRcdGNvbnN0IG1hdGNoID0gbmV3IFJlZ0V4cChcIl5cXFxcdytcXC8oXFxcXHcrKTs/XCIpLmV4ZWMocmVzcG9uc2VUeXBlKTtcclxuXHJcblx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdHJlc3BvbnNlVHlwZSA9IG1hdGNoWzFdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHJlc3BvbnNlVHlwZSA9PT0gXCJqc29uXCIgJiYgdHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIpIHtcclxuXHRcdFx0Ym9keSA9IGJvZHkgIT09IFwiXCIgPyBKU09OLnBhcnNlKGJvZHkpIDogbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYm9keTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0SGVhZGVycyhib2R5OiBhbnksIHJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0KTogdm9pZCB7XHJcblx0XHRjb25zdCBoZWFkZXJzID0gdGhpcy5yZXF1ZXN0T3B0aW9ucy5oZWFkZXJzO1xyXG5cclxuXHRcdGlmIChoZWFkZXJzKSB7XHJcblx0XHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGhlYWRlcnMpIHtcclxuXHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgdiBvZiB2YWx1ZSkge1xyXG5cdFx0XHRcdFx0XHRyZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRyZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWx1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAoIWhlYWRlcnMgfHwgIWhlYWRlcnMuaGFzKFwiQ29udGVudC1UeXBlXCIpKSB7XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5nZXRDb250ZW50VHlwZShib2R5KTtcclxuXHJcblx0XHRcdGlmIChjb250ZW50VHlwZSkge1xyXG5cdFx0XHRcdHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBjb250ZW50VHlwZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmICghaGVhZGVycyB8fCAhaGVhZGVycy5oYXMoXCJBY2NlcHRcIikpIHtcclxuXHRcdFx0cmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRIZWFkZXJzKHJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0KTogTWFwPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+IHtcclxuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+KCk7XHJcblx0XHRjb25zdCByZXNwb25zZUhlYWRlcnMgPSByZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpO1xyXG5cclxuXHRcdGlmIChyZXNwb25zZUhlYWRlcnMpIHtcclxuXHRcdFx0Y29uc3QgaGVhZGVyTGlzdCA9IHJlc3BvbnNlSGVhZGVycy50cmltKCkuc3BsaXQoL1tcXHJcXG5dKy8pO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBsaW5lIG9mIGhlYWRlckxpc3QpIHtcclxuXHRcdFx0XHRjb25zdCBpbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xyXG5cclxuXHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRjb25zdCBuYW1lID0gbGluZS5zbGljZSgwLCBpbmRleCk7XHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IGxpbmUuc2xpY2UoaW5kZXggKyAxKS50cmltKCk7XHJcblx0XHRcdFx0XHRjb25zdCBoZWFkZXIgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRjb25zdCBoZWFkZXJWYWx1ZXMgPSBoZWFkZXJzLmdldChoZWFkZXIpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChoZWFkZXJWYWx1ZXMpIHtcclxuXHRcdFx0XHRcdFx0KHR5cGVvZiBoZWFkZXJWYWx1ZXMgPT09IFwic3RyaW5nXCIgPyBbaGVhZGVyVmFsdWVzXSA6IGhlYWRlclZhbHVlcykucHVzaCh2YWx1ZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0aGVhZGVycy5zZXQoaGVhZGVyLCB2YWx1ZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGhlYWRlcnM7XHJcblx0fVxyXG59IiwiZXhwb3J0IHR5cGUgT2JzZXJ2ZXI8VD4gPSAodmFsdWU6IFQpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YWJsZTxUPiB7XHJcblxyXG5cdHByaXZhdGUgb2JzZXJ2ZXJzOiBPYnNlcnZlcjxUPltdO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLm9ic2VydmVycyA9IFtdO1xyXG5cdH1cclxuXHJcblx0c3Vic2NyaWJlKG9ic2VydmVyOiBPYnNlcnZlcjxUPik6IHZvaWQge1xyXG5cdFx0dGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcblx0fVxyXG5cclxuXHR1bnN1YnNjcmliZShvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pOiB2b2lkIHtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnMuZmlsdGVyKHN1YnNjcmliZXIgPT4gc3Vic2NyaWJlciAhPT0gb2JzZXJ2ZXIpO1xyXG5cdH1cclxuXHJcblx0bm90aWZ5KGRhdGE6IFQpOiB2b2lkIHtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIoZGF0YSkpO1xyXG5cdH1cclxufSIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi4vdXRpbHMvb2JzZXJ2YWJsZVwiO1xyXG5cclxuY2xhc3MgUHJvcGVydHk8VD4gZXh0ZW5kcyBPYnNlcnZhYmxlPFQ+IHtcclxuXHJcblx0cHJpdmF0ZSBfdmFsdWU6IFQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihkZWZhdWx0VmFsdWU/OiBUKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMuX3ZhbHVlID0gZGVmYXVsdFZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZhbHVlKCk6IFQge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG5cdH1cclxuXHJcblx0c2V0IHZhbHVlKG5ld1ZhbHVlOiBUKSB7XHJcblx0XHRpZiAodGhpcy5fdmFsdWUgPT09IG5ld1ZhbHVlKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl92YWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuXHRcdHRoaXMubm90aWZ5KHRoaXMuX3ZhbHVlKTtcclxuXHR9XHJcblxyXG5cdG5vdGlmeU9ic2VydmVycygpOiB2b2lkIHtcclxuXHRcdHN1cGVyLm5vdGlmeSh0aGlzLl92YWx1ZSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBQcm9wZXJ0eSB9OyIsImltcG9ydCB7IE1lZGlhUGxheWVyIH0gZnJvbSBcIi4uL21lZGlhL21lZGlhLXBsYXllclwiO1xyXG5cclxuY2xhc3MgU3luY1N0YXRlIHtcclxuXHJcblx0cHJpdmF0ZSBtZWRpYVBsYXllcjogTWVkaWFQbGF5ZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihtZWRpYVBsYXllcjogTWVkaWFQbGF5ZXIpIHtcclxuXHRcdHRoaXMubWVkaWFQbGF5ZXIgPSBtZWRpYVBsYXllcjtcclxuXHR9XHJcblxyXG5cdGdldCBhdWRpb1RpbWUoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLm1lZGlhUGxheWVyLnRpbWUgKiAxMDAwO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IFN5bmNTdGF0ZSB9OyIsImV4cG9ydCBjbGFzcyBVdGlscyB7XHJcblxyXG5cdHN0YXRpYyBpc0Z1bmN0aW9uKGZ1bmM6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHR5cGVvZiBmdW5jID09PSBcImZ1bmN0aW9uXCI7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgY2hlY2tGdW5jdGlvbihmdW5jOiBhbnkpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5pc0Z1bmN0aW9uKGZ1bmMpKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJDb25zdW1lciBpcyBub3QgYSBmdW5jdGlvblwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59IiwiZXhwb3J0ICogZnJvbSBcIi4vc2xpZGUtdmlldy93ZWItc2xpZGUudmlld1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9wbGF5ZXItdmlldy9wbGF5ZXIudmlld1wiOyIsImltcG9ydCB7IFNsaWRlVmlldyB9IGZyb20gXCIuLi8uLi9hcGkvdmlldy9zbGlkZS52aWV3XCI7XHJcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSBcIi4uLy4uL3V0aWxzL29ic2VydmFibGVcIjtcclxuaW1wb3J0IHsgV2ViU2xpZGVWaWV3IH0gZnJvbSBcIi4uL3NsaWRlLXZpZXcvd2ViLXNsaWRlLnZpZXdcIjtcclxuaW1wb3J0IHsgVmlld0VsZW1lbnQgfSBmcm9tIFwiLi4vdmlldy1lbGVtZW50XCI7XHJcbmltcG9ydCB7IFdlYlZpZXdFbGVtZW50IH0gZnJvbSBcIi4uL3dlYi12aWV3LWVsZW1lbnRcIjtcclxuaW1wb3J0IHsgV2ViUGxheWVyQ29udHJvbHMgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3BsYXllci1jb250cm9scy9wbGF5ZXItY29udHJvbHNcIjtcclxuaW1wb3J0IHsgUGxheWJhY2tNb2RlbCB9IGZyb20gXCIuLi8uLi9tb2RlbC9wbGF5YmFjay1tb2RlbFwiO1xyXG5cclxuQFZpZXdFbGVtZW50KHtcclxuXHRzZWxlY3RvcjogXCJwbGF5ZXItdmlld1wiLFxyXG5cdHRlbXBsYXRlOiByZXF1aXJlKCcuL3BsYXllci52aWV3Lmh0bWwnKSxcclxuXHRzdHlsZXM6IFtyZXF1aXJlKCcuL3BsYXllci52aWV3LmNzcycpXVxyXG59KVxyXG5jbGFzcyBQbGF5ZXJWaWV3IGV4dGVuZHMgV2ViVmlld0VsZW1lbnQge1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHBsYXliYWNrTW9kZWw6IFBsYXliYWNrTW9kZWw7XHJcblxyXG5cdHByaXZhdGUgcGxheWVyQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBzbGlkZVZpZXc6IFdlYlNsaWRlVmlldztcclxuXHJcblx0cHJpdmF0ZSBwbGF5ZXJDb250cm9sczogV2ViUGxheWVyQ29udHJvbHM7XHJcblxyXG5cdHByaXZhdGUgdmlkZW9GZWVkOiBIVE1MTWVkaWFFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHZpZGVvRmVlZENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgbWFpblZpZGVvRmVlZENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgbG9jYWxWaWRlb0ZlZWRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGNoYXRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGNoYXRNb2RhbDogYW55O1xyXG5cclxuXHRwcml2YXRlIGNoYXRNb2RhbFN0YXRlOiBib29sZWFuO1xyXG5cclxuXHRwcml2YXRlIGNoYXRDb2xsYXBzZTogYW55O1xyXG5cclxuXHRwcml2YXRlIHJpZ2h0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKG1vZGVsOiBQbGF5YmFja01vZGVsKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbCA9IG1vZGVsO1xyXG5cdFx0dGhpcy5jaGF0Q29sbGFwc2UgPSBudWxsO1xyXG5cdFx0dGhpcy5jaGF0TW9kYWwgPSBudWxsO1xyXG5cdFx0dGhpcy5jaGF0TW9kYWxTdGF0ZSA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Y29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcblx0XHRjb25zdCBlbGVtZW50QSA9IHRoaXMucGxheWJhY2tNb2RlbC5lbGVtZW50QVByb3BlcnR5LnZhbHVlO1xyXG5cclxuXHRcdGlmIChlbGVtZW50QSkge1xyXG5cdFx0XHR0aGlzLnNldENoYXQoZWxlbWVudEEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudmlkZW9GZWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy52aWRlb0ZlZWQucGxheSgpXHJcblx0XHRcdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0XHRcdGlmIChlcnJvci5uYW1lID09IFwiTm90QWxsb3dlZEVycm9yXCIpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jYW5ub3RQbGF5KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMudmlkZW9GZWVkLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5XCIsICgpID0+IHtcclxuXHRcdFx0Ly8gd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicmVzaXplXCIpKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbC5lbGVtZW50QVByb3BlcnR5LnN1YnNjcmliZSh0aGlzLnNldENoYXQuYmluZCh0aGlzKSk7XHJcblx0XHQvLyB0aGlzLnBsYXliYWNrTW9kZWwudmlkZW9BdmFpbGFibGVQcm9wZXJ0eS5zdWJzY3JpYmUodGhpcy5zZXRWaWRlb0F2YWlsYWJsZS5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbC5tYWluVmlkZW9BdmFpbGFibGVQcm9wZXJ0eS5zdWJzY3JpYmUodGhpcy5zZXRNYWluVmlkZW9BdmFpbGFibGUuYmluZCh0aGlzKSk7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwubG9jYWxWaWRlb0F2YWlsYWJsZVByb3BlcnR5LnN1YnNjcmliZSh0aGlzLnNldExvY2FsVmlkZW9BdmFpbGFibGUuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsLnNob3dDaGF0UHJvcGVydHkuc3Vic2NyaWJlKHRoaXMuc2hvd0NoYXQuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5wbGF5ZXJDb250cm9scy5zZXRPblJhaXNlSGFuZCh0aGlzLnBsYXliYWNrTW9kZWwucmFpc2VkSGFuZFByb3BlcnR5KTtcclxuXHRcdHRoaXMucGxheWVyQ29udHJvbHMuc2V0T25SYWlzZUhhbmRBY3RpdmUodGhpcy5wbGF5YmFja01vZGVsLndlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZFByb3BlcnR5KTtcclxuXHRcdHRoaXMucGxheWVyQ29udHJvbHMuc2V0T25TaG93UXVpeih0aGlzLnBsYXliYWNrTW9kZWwuc2hvd1F1aXpQcm9wZXJ0eSk7XHJcblx0XHR0aGlzLnBsYXllckNvbnRyb2xzLnNldE9uU2hvd1F1aXpBY3RpdmUodGhpcy5wbGF5YmFja01vZGVsLnNob3dRdWl6QWN0aXZlUHJvcGVydHkpO1xyXG5cdFx0dGhpcy5wbGF5ZXJDb250cm9scy5zZXRPbkNoYXRBY3Rpb24odGhpcy5wbGF5YmFja01vZGVsLnNob3dDaGF0UHJvcGVydHkpO1xyXG5cdFx0dGhpcy5wbGF5ZXJDb250cm9scy5zZXRPbkZ1bGxzY3JlZW4oKGZ1bGxzY3JlZW46IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0dGhpcy5zZXRGdWxsc2NyZWVuKGZ1bGxzY3JlZW4pO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnBsYXllckNvbnRyb2xzLnNldE9uUGxheU1lZGlhKCgpID0+IHtcclxuXHRcdFx0dGhpcy52aWRlb0ZlZWQucGxheSgpXHJcblx0XHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5ZXJDb250cm9scy5zZXRQbGF5TWVkaWFWaXNpYmxlKGZhbHNlKTtcclxuXHJcblx0XHRcdFx0XHRjb25zdCB2aWRlb3MgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ2aWRlb1wiKTtcclxuXHRcdFx0XHRcdHZpZGVvcy5mb3JFYWNoKGZ1bmN0aW9uICh2aWRlbykge1xyXG5cdFx0XHRcdFx0XHR2aWRlby5wbGF5KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IGNoYXRNb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXRNb2RhbFwiKTtcclxuXHRcdGNoYXRNb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImhpZGRlbi5icy5tb2RhbFwiLCAoZTogYW55KSA9PiB7XHJcblx0XHRcdHRoaXMucGxheWJhY2tNb2RlbC5zaG93Q2hhdCA9IGZhbHNlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5jaGF0TW9kYWwgPSBuZXcgYm9vdHN0cmFwLk1vZGFsKGNoYXRNb2RhbEVsZW1lbnQsIHt9KTtcclxuXHJcblx0XHRjb25zdCBtcWwgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDU3NnB4KVwiKTtcclxuXHRcdG1xbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZTogTWVkaWFRdWVyeUxpc3RFdmVudCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNoYXRNb2RhbFN0YXRlID0gZS5tYXRjaGVzO1xyXG5cdFx0XHR0aGlzLnBsYXliYWNrTW9kZWwuc2hvd0NoYXQgPSAhbXFsLm1hdGNoZXM7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmNoYXRNb2RhbFN0YXRlID0gbXFsLm1hdGNoZXM7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwuc2hvd0NoYXQgPSAhbXFsLm1hdGNoZXM7XHJcblxyXG5cdFx0bmV3IFJlc2l6ZU9ic2VydmVyKHRoaXMuY29tcHV0ZVZpZXdTaXplLmJpbmQodGhpcykpLm9ic2VydmUodGhpcy5wbGF5ZXJDb250YWluZXIpO1xyXG5cclxuXHRcdHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdH1cclxuXHJcblx0aW5pdEVudHJ5TW9kYWwoKSB7XHJcblx0XHRjb25zdCBlbnRyeU1vZGFsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW50cnktbW9kYWxcIik7XHJcblx0XHRjb25zdCBlbnRyeU1vZGFsTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVudHJ5LW1vZGFsLWxhYmVsXCIpO1xyXG5cclxuXHRcdGNvbnN0IGVudHJ5TW9kYWwgPSBib290c3RyYXAuTW9kYWwuZ2V0T3JDcmVhdGVJbnN0YW5jZShlbnRyeU1vZGFsRWxlbWVudCwge1xyXG5cdFx0XHRiYWNrZHJvcDogXCJzdGF0aWNcIixcclxuXHRcdFx0a2V5Ym9hcmQ6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBoaWRkZW5IYW5kbGVyID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnZpZGVvRmVlZC5wbGF5KClcclxuXHRcdFx0XHQudGhlbigoKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB2aWRlb3MgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ2aWRlb1wiKTtcclxuXHRcdFx0XHRcdHZpZGVvcy5mb3JFYWNoKGZ1bmN0aW9uICh2aWRlbykge1xyXG5cdFx0XHRcdFx0XHR2aWRlby5wbGF5KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0ZW50cnlNb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImhpZGRlbi5icy5tb2RhbFwiLCBoaWRkZW5IYW5kbGVyKTtcclxuXHJcblx0XHRlbnRyeU1vZGFsLnNob3coKTtcclxuXHR9XHJcblxyXG5cdHNob3coKSB7XHJcblx0XHR0aGlzLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHR9XHJcblxyXG5cdGdldFNsaWRlVmlldygpOiBTbGlkZVZpZXcge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2xpZGVWaWV3O1xyXG5cdH1cclxuXHJcblx0Z2V0TWVkaWFFbGVtZW50KCk6IEhUTUxNZWRpYUVsZW1lbnQge1xyXG5cdFx0cmV0dXJuIHRoaXMudmlkZW9GZWVkO1xyXG5cdH1cclxuXHJcblx0c2V0RHVyYXRpb24oZHVyYXRpb25NczogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXllckNvbnRyb2xzLnNldER1cmF0aW9uKGR1cmF0aW9uTXMpO1xyXG5cdH1cclxuXHJcblx0c2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXllckNvbnRyb2xzLnNldFZvbHVtZSh2b2x1bWUpO1xyXG5cdH1cclxuXHJcblx0c2V0TXV0ZWQobXV0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMucGxheWVyQ29udHJvbHMuc2V0TXV0ZWQobXV0ZWQpO1xyXG5cdH1cclxuXHJcblx0c2V0RnVsbHNjcmVlbihmdWxsc2NyZWVuOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRpZiAoZnVsbHNjcmVlbikge1xyXG5cdFx0XHRpZiAodGhpcy5yZXF1ZXN0RnVsbHNjcmVlbikge1xyXG5cdFx0XHRcdHRoaXMucmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLm1velJlcXVlc3RGdWxsU2NyZWVuKSB7XHJcblx0XHRcdFx0dGhpcy5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuXHRcdFx0XHR0aGlzLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodGhpcy5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7XHJcblx0XHRcdFx0dGhpcy5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0XHRkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcclxuXHRcdFx0XHRkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0XHRkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0XHRkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvbXB1dGVWaWV3U2l6ZSgpO1xyXG5cdH1cclxuXHJcblx0c2V0T25Wb2x1bWUob2JzZXJ2ZXI6IE9ic2VydmVyPG51bWJlcj4pOiB2b2lkIHtcclxuXHRcdHRoaXMucGxheWVyQ29udHJvbHMuc2V0T25Wb2x1bWUob2JzZXJ2ZXIpO1xyXG5cdH1cclxuXHJcblx0c2V0T25NdXRlKG9ic2VydmVyOiBPYnNlcnZlcjxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0dGhpcy5wbGF5ZXJDb250cm9scy5zZXRPbk11dGUob2JzZXJ2ZXIpO1xyXG5cdH1cclxuXHJcblx0c2V0T25GdWxsc2NyZWVuKG9ic2VydmVyOiBPYnNlcnZlcjxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0dGhpcy5wbGF5ZXJDb250cm9scy5zZXRPbkZ1bGxzY3JlZW4ob2JzZXJ2ZXIpO1xyXG5cdH1cclxuXHJcblx0c2V0T25TZXR0aW5ncyhvYnNlcnZlcjogT2JzZXJ2ZXI8Ym9vbGVhbj4pOiB2b2lkIHtcclxuXHRcdHRoaXMucGxheWVyQ29udHJvbHMuc2V0T25TZXR0aW5ncyhvYnNlcnZlcik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNhbm5vdFBsYXkoKSB7XHJcblx0XHR0aGlzLmluaXRFbnRyeU1vZGFsKCk7XHJcblxyXG5cdFx0Ly90aGlzLnBsYXllckNvbnRyb2xzLnNldFBsYXlNZWRpYVZpc2libGUodHJ1ZSk7XHJcblxyXG5cdFx0Ly8gd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicmVzaXplXCIpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0Q2hhdChlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0aWYgKGVsZW1lbnQpIHtcclxuXHRcdFx0dGhpcy5jaGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG5cclxuXHRcdFx0Y29uc3QgY2hhdENsb3NlQnV0dG9uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NoYXQtY2xvc2UtYnV0dG9uXCIpO1xyXG5cdFx0XHRjaGF0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudG9nZ2xlQ2hhdC5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHRcdGNvbnN0IGNoYXRDb2xsYXBzZUVsZW1lbnQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmx1c2gtY2hhdFwiKTtcclxuXHRcdFx0dGhpcy5jaGF0Q29sbGFwc2UgPSBuZXcgYm9vdHN0cmFwLkNvbGxhcHNlKGNoYXRDb2xsYXBzZUVsZW1lbnQsIHtcclxuXHRcdFx0XHR0b2dnbGU6IGZhbHNlXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgY2xvbmUgPSBlbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0Y29uc3QgbWVzc2FnZUZvcm0gPSBjbG9uZS5xdWVyeVNlbGVjdG9yKFwiI2NvdXJzZS1tZXNzYWdlLWZvcm1cIikgYXMgSFRNTEZvcm1FbGVtZW50O1xyXG5cclxuXHRcdFx0Y29uc3QgY2hhdE1vZGFsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhdE1vZGFsXCIpO1xyXG5cdFx0XHRjb25zdCBjaGF0TW9kYWxDb250ZW50ID0gY2hhdE1vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJvZHlcIik7XHJcblx0XHRcdGNoYXRNb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQobWVzc2FnZUZvcm0pO1xyXG5cclxuXHRcdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gY2hhdE1vZGFsQ29udGVudC5xdWVyeVNlbGVjdG9yKFwiI21lc3NhZ2VTdWJtaXRcIik7XHJcblxyXG5cdFx0XHRjb25zdCBjaGF0TW9kYWxGb290ZXIgPSBjaGF0TW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtZm9vdGVyXCIpO1xyXG5cdFx0XHRjaGF0TW9kYWxGb290ZXIuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcclxuXHJcblx0XHRcdHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0Ly8gRGlzYWJsZSBkZWZhdWx0IGFjdGlvbi5cclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKG1lc3NhZ2VGb3JtKTtcclxuXHRcdFx0XHRjb25zdCB2YWx1ZSA9IE9iamVjdC5mcm9tRW50cmllcyhkYXRhLmVudHJpZXMoKSk7XHJcblxyXG5cdFx0XHRcdGZldGNoKG1lc3NhZ2VGb3JtLmdldEF0dHJpYnV0ZShcImFjdGlvblwiKSwge1xyXG5cdFx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcclxuXHRcdFx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuXHRcdFx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC50aGVuKHJlc3BvbnNlID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHRvYXN0SWQgPSAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApID8gXCJ0b2FzdC1zdWNjZXNzXCIgOiBcInRvYXN0LXdhcm5cIjtcclxuXHRcdFx0XHRcdGNvbnN0IHRvYXN0TWVzc2FnZSA9IChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgPyBcImNvdXJzZS5mZWF0dXJlLm1lc3NhZ2Uuc2VudFwiIDogXCJjb3Vyc2UuZmVhdHVyZS5tZXNzYWdlLnNlbmQuZXJyb3JcIjtcclxuXHRcclxuXHRcdFx0XHRcdHRoaXMuc2hvd1RvYXN0KHRvYXN0SWQsIHRvYXN0TWVzc2FnZSk7XHJcblx0XHJcblx0XHRcdFx0XHRtZXNzYWdlRm9ybS5yZXNldCgpO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMuY2hhdE1vZGFsLmhpZGUoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5wbGF5YmFja01vZGVsLnNob3dDaGF0ID0gIXdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNzY4cHgpXCIpLm1hdGNoZXM7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0d2hpbGUgKHRoaXMuY2hhdENvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCkge1xyXG5cdFx0XHRcdGNvbnN0IGNoYXRDbG9zZUJ1dHRvbiA9IHRoaXMuY2hhdENvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5xdWVyeVNlbGVjdG9yKFwiI2NoYXQtY2xvc2UtYnV0dG9uXCIpO1xyXG5cdFx0XHRcdGNoYXRDbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy50b2dnbGVDaGF0KTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuY2hhdENvbGxhcHNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNoYXRDb2xsYXBzZS5kaXNwb3NlKCk7XHJcblx0XHRcdFx0XHR0aGlzLmNoYXRDb2xsYXBzZSA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zdCBjaGF0TW9kYWxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0TW9kYWxcIik7XHJcblx0XHRcdFx0Y29uc3QgY2hhdE1vZGFsQ29udGVudCA9IGNoYXRNb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib2R5XCIpO1xyXG5cdFx0XHRcdGNvbnN0IGNoYXRNb2RhbEZvb3RlciA9IGNoYXRNb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1mb290ZXJcIik7XHJcblx0XHRcdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gY2hhdE1vZGFsRm9vdGVyLnF1ZXJ5U2VsZWN0b3IoXCIjbWVzc2FnZVN1Ym1pdFwiKTtcclxuXHJcblx0XHRcdFx0Y2hhdE1vZGFsRm9vdGVyLnJlbW92ZUNoaWxkKHN1Ym1pdEJ1dHRvbik7XHJcblxyXG5cdFx0XHRcdHRoaXMucmVtb3ZlQWxsQ2hpbGROb2RlcyhjaGF0TW9kYWxDb250ZW50KTtcclxuXHJcblx0XHRcdFx0dGhpcy5jaGF0Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuY2hhdENvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnBsYXllckNvbnRyb2xzLnNldENoYXRFbmFibGVkKGVsZW1lbnQgIT09IG51bGwpO1xyXG5cclxuXHRcdHRoaXMudXBkYXRlUmlnaHRDb250YWluZXIoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd0NoYXQoc2hvdzogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0Y29uc3QgY2hhdCA9IHRoaXMuY2hhdENvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRWxlbWVudDtcclxuXHJcblx0XHRpZiAoY2hhdCA9PT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoc2hvdyAmJiB0aGlzLmNoYXRNb2RhbFN0YXRlKSB7XHJcblx0XHRcdHRoaXMuY2hhdE1vZGFsLnNob3coKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNldEVsZW1lbnRWaXNpYmxlKGNoYXQsIHNob3cpO1xyXG5cclxuXHRcdGlmIChzaG93KSB7XHJcblx0XHRcdHRoaXMuY2hhdENvbGxhcHNlLnNob3coKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdG9nZ2xlQ2hhdCgpIHtcclxuXHRcdGNvbnN0IGVuYWJsZWQgPSB0aGlzLnBsYXliYWNrTW9kZWwuc2hvd0NoYXQ7XHJcblxyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsLnNob3dDaGF0ID0gIWVuYWJsZWQ7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNob3dUb2FzdCh0b2FzdElkOiBzdHJpbmcsIG1lc3NhZ2VJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCB0b2FzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b2FzdElkKTtcclxuXHRcdGNvbnN0IHRvYXN0Qm9keSA9IHRvYXN0RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidG9hc3QtYm9keVwiKVswXTtcclxuXHRcdHRvYXN0Qm9keS5pbm5lckhUTUwgPSB3aW5kb3cuZGljdFttZXNzYWdlSWRdO1xyXG5cclxuXHRcdGNvbnN0IHRvYXN0ID0gbmV3IGJvb3RzdHJhcC5Ub2FzdCh0b2FzdEVsZW1lbnQpO1xyXG5cdFx0dG9hc3Quc2hvdygpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXRFbGVtZW50VmlzaWJsZShlbGVtZW50OiBIVE1MRWxlbWVudCwgdmlzaWJsZTogYm9vbGVhbikge1xyXG5cdFx0aWYgKHZpc2libGUpIHtcclxuXHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaW52aXNpYmxlXCIpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0VmlkZW9BdmFpbGFibGUoYXZhaWxhYmxlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldEVsZW1lbnRWaXNpYmxlKHRoaXMudmlkZW9GZWVkQ29udGFpbmVyLCBhdmFpbGFibGUpO1xyXG5cdFx0dGhpcy51cGRhdGVSaWdodENvbnRhaW5lcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXRNYWluVmlkZW9BdmFpbGFibGUoYXZhaWxhYmxlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldEVsZW1lbnRWaXNpYmxlKHRoaXMubWFpblZpZGVvRmVlZENvbnRhaW5lciwgYXZhaWxhYmxlKTtcclxuXHRcdHRoaXMudXBkYXRlUmlnaHRDb250YWluZXIoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0TG9jYWxWaWRlb0F2YWlsYWJsZShhdmFpbGFibGU6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0RWxlbWVudFZpc2libGUodGhpcy5sb2NhbFZpZGVvRmVlZENvbnRhaW5lciwgYXZhaWxhYmxlKTtcclxuXHRcdHRoaXMudXBkYXRlUmlnaHRDb250YWluZXIoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlUmlnaHRDb250YWluZXIoKSB7XHJcblx0XHR0aGlzLnNldEVsZW1lbnRWaXNpYmxlKHRoaXMucmlnaHRDb250YWluZXIsIHRoaXMucGxheWJhY2tNb2RlbC52aWRlb0F2YWlsYWJsZVxyXG5cdFx0XHR8fCB0aGlzLnBsYXliYWNrTW9kZWwubG9jYWxWaWRlb0F2YWlsYWJsZSB8fCB0aGlzLmNoYXRDb250YWluZXIuaGFzQ2hpbGROb2RlcygpKTtcclxuXHJcblx0XHR0aGlzLmNvbXB1dGVWaWV3U2l6ZSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjb21wdXRlVmlld1NpemUoKSB7XHJcblx0XHRjb25zdCBzbGlkZVJhdGlvID0gNCAvIDM7XHJcblx0XHRsZXQgd2lkdGggPSB0aGlzLm9mZnNldFdpZHRoIC0gdGhpcy5yaWdodENvbnRhaW5lci5vZmZzZXRXaWR0aDtcclxuXHRcdGxldCBoZWlnaHQgPSB0aGlzLm9mZnNldEhlaWdodDtcclxuXHRcdGNvbnN0IHZpZXdSYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xyXG5cclxuXHRcdGlmICh2aWV3UmF0aW8gPiBzbGlkZVJhdGlvKSB7XHJcblx0XHRcdHdpZHRoID0gaGVpZ2h0ICogc2xpZGVSYXRpbztcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRoZWlnaHQgPSB3aWR0aCAvIHNsaWRlUmF0aW87XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wbGF5ZXJDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gKChoZWlnaHQgKyB0aGlzLnBsYXllckNvbnRyb2xzLm9mZnNldEhlaWdodCkgLyB0aGlzLm9mZnNldEhlaWdodCAqIDEwMCkgKyBcIiVcIjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVtb3ZlQWxsQ2hpbGROb2RlcyhwYXJlbnQ6IEVsZW1lbnQpIHtcclxuXHRcdHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xyXG5cdFx0XHRwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGxheWVyVmlldyB9OyIsImltcG9ydCB7IFNsaWRlVmlldyB9IGZyb20gXCIuLi8uLi9hcGkvdmlldy9zbGlkZS52aWV3XCI7XHJcbmltcG9ydCB7IFNsaWRlUmVuZGVyU3VyZmFjZSB9IGZyb20gXCIuLi8uLi9yZW5kZXIvc2xpZGUtcmVuZGVyLXN1cmZhY2VcIjtcclxuaW1wb3J0IHsgUmVuZGVyU3VyZmFjZSB9IGZyb20gXCIuLi8uLi9yZW5kZXIvcmVuZGVyLXN1cmZhY2VcIjtcclxuaW1wb3J0IHsgVGV4dExheWVyU3VyZmFjZSB9IGZyb20gXCIuLi8uLi9yZW5kZXIvdGV4dC1sYXllci1zdXJmYWNlXCI7XHJcbmltcG9ydCB7IFZpZXdFbGVtZW50IH0gZnJvbSBcIi4uL3ZpZXctZWxlbWVudFwiO1xyXG5pbXBvcnQgeyBXZWJWaWV3RWxlbWVudCB9IGZyb20gXCIuLi93ZWItdmlldy1lbGVtZW50XCI7XHJcblxyXG5AVmlld0VsZW1lbnQoe1xyXG5cdHNlbGVjdG9yOiBcInNsaWRlLXZpZXdcIixcclxuXHR0ZW1wbGF0ZTogcmVxdWlyZSgnLi93ZWItc2xpZGUudmlldy5odG1sJyksXHJcblx0c3R5bGVzOiBbcmVxdWlyZSgnLi93ZWItc2xpZGUudmlldy5jc3MnKV1cclxufSlcclxuY2xhc3MgV2ViU2xpZGVWaWV3IGV4dGVuZHMgV2ViVmlld0VsZW1lbnQgaW1wbGVtZW50cyBTbGlkZVZpZXcge1xyXG5cclxuXHRwcml2YXRlIHNsaWRlUmVuZGVyU3VyZmFjZTogU2xpZGVSZW5kZXJTdXJmYWNlO1xyXG5cclxuXHRwcml2YXRlIGFjdGlvblJlbmRlclN1cmZhY2U6IFJlbmRlclN1cmZhY2U7XHJcblxyXG5cdHByaXZhdGUgdm9sYXRpbGVSZW5kZXJTdXJmYWNlOiBSZW5kZXJTdXJmYWNlO1xyXG5cclxuXHRwcml2YXRlIHRleHRMYXllclN1cmZhY2U6IFRleHRMYXllclN1cmZhY2U7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0fVxyXG5cclxuXHRjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuXHRcdGNvbnN0IHNsaWRlQ2FudmFzID0gdGhpcy5xdWVyeVNlbGVjdG9yPEhUTUxDYW52YXNFbGVtZW50PignLnNsaWRlLWNhbnZhcycpO1xyXG5cdFx0Y29uc3QgYWN0aW9uQ2FudmFzID0gdGhpcy5xdWVyeVNlbGVjdG9yPEhUTUxDYW52YXNFbGVtZW50PignLmFjdGlvbi1jYW52YXMnKTtcclxuXHRcdGNvbnN0IHZvbGF0aWxlQ2FudmFzID0gdGhpcy5xdWVyeVNlbGVjdG9yPEhUTUxDYW52YXNFbGVtZW50PignLnZvbGF0aWxlLWNhbnZhcycpO1xyXG5cdFx0Y29uc3QgdGV4dExheWVyID0gdGhpcy5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PignLnRleHQtbGF5ZXInKTtcclxuXHJcblx0XHR0aGlzLnNsaWRlUmVuZGVyU3VyZmFjZSA9IG5ldyBTbGlkZVJlbmRlclN1cmZhY2Uoc2xpZGVDYW52YXMpO1xyXG5cdFx0dGhpcy5hY3Rpb25SZW5kZXJTdXJmYWNlID0gbmV3IFJlbmRlclN1cmZhY2UoYWN0aW9uQ2FudmFzKTtcclxuXHRcdHRoaXMudm9sYXRpbGVSZW5kZXJTdXJmYWNlID0gbmV3IFJlbmRlclN1cmZhY2Uodm9sYXRpbGVDYW52YXMpO1xyXG5cdFx0dGhpcy50ZXh0TGF5ZXJTdXJmYWNlID0gbmV3IFRleHRMYXllclN1cmZhY2UodGV4dExheWVyKTtcclxuXHJcblx0XHRuZXcgUmVzaXplT2JzZXJ2ZXIodGhpcy5yZXNpemUuYmluZCh0aGlzKSkub2JzZXJ2ZSh0aGlzKTtcclxuXHJcblx0XHR0aGlzLnJlc2l6ZSgpO1xyXG5cdH1cclxuXHJcblx0Z2V0QWN0aW9uUmVuZGVyU3VyZmFjZSgpOiBSZW5kZXJTdXJmYWNlIHtcclxuXHRcdHJldHVybiB0aGlzLmFjdGlvblJlbmRlclN1cmZhY2U7XHJcblx0fVxyXG5cclxuXHRnZXRTbGlkZVJlbmRlclN1cmZhY2UoKTogU2xpZGVSZW5kZXJTdXJmYWNlIHtcclxuXHRcdHJldHVybiB0aGlzLnNsaWRlUmVuZGVyU3VyZmFjZTtcclxuXHR9XHJcblxyXG5cdGdldFZvbGF0aWxlUmVuZGVyU3VyZmFjZSgpOiBSZW5kZXJTdXJmYWNlIHtcclxuXHRcdHJldHVybiB0aGlzLnZvbGF0aWxlUmVuZGVyU3VyZmFjZTtcclxuXHR9XHJcblxyXG5cdGdldFRleHRMYXllclN1cmZhY2UoKTogVGV4dExheWVyU3VyZmFjZSB7XHJcblx0XHRyZXR1cm4gdGhpcy50ZXh0TGF5ZXJTdXJmYWNlO1xyXG5cdH1cclxuXHJcblx0cmVwYWludCgpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVzaXplKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlc2l6ZSgpIHtcclxuXHRcdGNvbnN0IHNsaWRlUmF0aW8gPSA0IC8gMztcclxuXHRcdGxldCB3aWR0aCA9IHRoaXMuY2xpZW50V2lkdGg7XHJcblx0XHRsZXQgaGVpZ2h0ID0gdGhpcy5jbGllbnRIZWlnaHQ7XHJcblx0XHRjb25zdCB2aWV3UmF0aW8gPSB3aWR0aCAvIGhlaWdodDtcclxuXHJcblx0XHRpZiAodmlld1JhdGlvID4gc2xpZGVSYXRpbykge1xyXG5cdFx0XHR3aWR0aCA9IGhlaWdodCAqIHNsaWRlUmF0aW87XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0aGVpZ2h0ID0gd2lkdGggLyBzbGlkZVJhdGlvO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh3aWR0aCA9PT0gMCB8fCBoZWlnaHQgPT09IDApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2xpZGVSZW5kZXJTdXJmYWNlLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcblx0XHR0aGlzLmFjdGlvblJlbmRlclN1cmZhY2Uuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuXHRcdHRoaXMudm9sYXRpbGVSZW5kZXJTdXJmYWNlLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcblx0XHR0aGlzLnRleHRMYXllclN1cmZhY2Uuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFdlYlNsaWRlVmlldyB9OyIsImltcG9ydCB7IFdlYlZpZXdFbGVtZW50IH0gZnJvbSBcIi4vd2ViLXZpZXctZWxlbWVudFwiO1xyXG5cclxuY29uc3QgdmFsaWRhdGVTZWxlY3RvciA9IChzZWxlY3Rvcjogc3RyaW5nKSA9PiB7XHJcblx0aWYgKHNlbGVjdG9yLmluZGV4T2YoXCItXCIpIDw9IDApIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IG9uZSBkYXNoIGlzIHJlcXVpcmVkIGluIHRoZSBjdXN0b20gZWxlbWVudCBuYW1lIVwiKTtcclxuXHR9XHJcbn07XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZpZXdFbGVtZW50Q29uZmlnIHtcclxuXHRzZWxlY3Rvcjogc3RyaW5nO1xyXG5cdHRlbXBsYXRlPzogc3RyaW5nO1xyXG5cdHRlbXBsYXRlVXJsPzogc3RyaW5nO1xyXG5cdHN0eWxlcz86IHN0cmluZztcclxuXHRzdHlsZVVybHM/OiBzdHJpbmdbXTtcclxuXHR1c2VTaGFkb3c/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVmlld0VsZW1lbnQgPSAoY29uZmlnOiBWaWV3RWxlbWVudENvbmZpZykgPT4gPFQgZXh0ZW5kcyBXZWJWaWV3RWxlbWVudD4oY3RvcjogbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gVCkgPT4ge1xyXG5cdHZhbGlkYXRlU2VsZWN0b3IoY29uZmlnLnNlbGVjdG9yKTtcclxuXHJcblx0bGV0IGNvbnRlbnQgPSBcIlwiO1xyXG5cclxuXHRpZiAoY29uZmlnLnN0eWxlcykge1xyXG5cdFx0Y29udGVudCArPSBgPHN0eWxlPlxcbiR7Y29uZmlnLnN0eWxlc31cXG48L3N0eWxlPmA7XHJcblx0fVxyXG5cdGlmIChjb25maWcudGVtcGxhdGUpIHtcclxuXHRcdGNvbnRlbnQgKz0gYFxcbiR7Y29uZmlnLnRlbXBsYXRlfWA7XHJcblx0fVxyXG5cclxuXHRjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuXHR0ZW1wbGF0ZS5pbm5lckhUTUwgPSBjb250ZW50O1xyXG5cclxuXHRjb25zdCBjb25uZWN0ZWRDYWxsYmFjayA9IGN0b3IucHJvdG90eXBlLmNvbm5lY3RlZENhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHsgfTtcclxuXHRjb25zdCBpbml0aWFsaXplZCA9IGN0b3IucHJvdG90eXBlLmluaXRpYWxpemVkIHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlIH07XHJcblxyXG5cdGN0b3IucHJvdG90eXBlLmNvbm5lY3RlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKGluaXRpYWxpemVkLmNhbGwodGhpcykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudGVtcGxhdGUgPSBjb25maWcudGVtcGxhdGU7XHJcblxyXG5cdFx0Ly8gQXR0YWNoIHRoZSB0ZW1wbGF0ZSB0byB0aGUgZWxlbWVudC5cclxuXHRcdGNvbnN0IGNsb25lID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcclxuXHJcblx0XHRpZiAoY29uZmlnLnVzZVNoYWRvdykge1xyXG5cdFx0XHR0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pLmFwcGVuZENoaWxkKGNsb25lKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFwcGVuZENoaWxkKGNsb25lKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByb290ID0gY29uZmlnLnVzZVNoYWRvdyA/IHRoaXMuc2hhZG93Um9vdCA6IHRoaXM7XHJcblxyXG5cdFx0Ly8gQmluZCB2aWV3IGlkJ3MgdG8gY2xhc3MgcHJvcGVydGllcy5cclxuXHRcdGZvciAoY29uc3Qga2V5IG9mIFJlZmxlY3Qub3duS2V5cyh0aGlzKSkge1xyXG5cdFx0XHRjb25zdCBwcm9wTmFtZSA9IGtleS50b1N0cmluZygpO1xyXG5cdFx0XHRjb25zdCBwcm9wID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgcHJvcE5hbWUpO1xyXG5cclxuXHRcdFx0aWYgKHByb3ApIHtcclxuXHRcdFx0XHR0aGlzW3Byb3BOYW1lXSA9IHByb3A7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRjb25uZWN0ZWRDYWxsYmFjay5jYWxsKHRoaXMpO1xyXG5cdH07XHJcblxyXG5cdGN1c3RvbUVsZW1lbnRzLmRlZmluZShjb25maWcuc2VsZWN0b3IsIGN0b3IpO1xyXG59IiwiLy8gaW1wb3J0IE11c3RhY2hlIGZyb20gXCJtdXN0YWNoZVwiO1xyXG4vLyBpbXBvcnQgbW9ycGhkb20gZnJvbSBcIm1vcnBoZG9tXCI7XHJcblxyXG5jbGFzcyBXZWJWaWV3RWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZTogc3RyaW5nO1xyXG5cclxuXHJcblx0aW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgcmVuZGVyKCk6IHZvaWQge1xyXG5cdFx0Ly8gaWYgKHRoaXMudGVtcGxhdGUpIHtcclxuXHRcdC8vIFx0Y29uc3QgdGVtcGxhdGUgPSBNdXN0YWNoZS5yZW5kZXIodGhpcy50ZW1wbGF0ZSwgdGhpcyk7XHJcblxyXG5cdFx0Ly8gXHRtb3JwaGRvbSh0aGlzLmxhc3RFbGVtZW50Q2hpbGQsIHRlbXBsYXRlKTtcclxuXHRcdC8vIH1cclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBXZWJWaWV3RWxlbWVudCB9OyIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMF9fXyBmcm9tIFwiLSEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2ljb25zLmNzc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMV9fXyBmcm9tIFwiLSEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3Rvb2x0aXAuY3NzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMF9fXyk7XG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMV9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIuZnVsbHNjcmVlbiB7XFxyXFxuXFx0ei1pbmRleDogMTAwMDsgXFxyXFxuXFx0d2lkdGg6IDEwMCU7IFxcclxcblxcdGhlaWdodDogMTAwJTsgXFxyXFxuXFx0cG9zaXRpb246IGZpeGVkOyBcXHJcXG5cXHR0b3A6IDA7IFxcclxcblxcdGxlZnQ6IDA7IFxcclxcbn1cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUdBO0NBQ0MsYUFBYTtDQUNiLFdBQVc7Q0FDWCxZQUFZO0NBQ1osZUFBZTtDQUNmLE1BQU07Q0FDTixPQUFPO0FBQ1JcIixcInNvdXJjZXNDb250ZW50XCI6W1wiQGltcG9ydCB1cmwoaWNvbnMuY3NzKTtcXHJcXG5AaW1wb3J0IHVybCh0b29sdGlwLmNzcyk7XFxyXFxuXFxyXFxuLmZ1bGxzY3JlZW4ge1xcclxcblxcdHotaW5kZXg6IDEwMDA7IFxcclxcblxcdHdpZHRoOiAxMDAlOyBcXHJcXG5cXHRoZWlnaHQ6IDEwMCU7IFxcclxcblxcdHBvc2l0aW9uOiBmaXhlZDsgXFxyXFxuXFx0dG9wOiAwOyBcXHJcXG5cXHRsZWZ0OiAwOyBcXHJcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyBmcm9tIFwiLi9wbGF5ZXItaWNvbnMudHRmXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiQGZvbnQtZmFjZSB7XFxyXFxuXFx0Zm9udC1mYW1pbHk6ICdwbGF5ZXItaWNvbnMnO1xcclxcblxcdHNyYzogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyArIFwiKSBmb3JtYXQoJ3RydWV0eXBlJyk7XFxyXFxuXFx0Zm9udC13ZWlnaHQ6IG5vcm1hbDtcXHJcXG5cXHRmb250LXN0eWxlOiBub3JtYWw7XFxyXFxufVxcclxcblxcclxcbltjbGFzc149XFxcImljb24tXFxcIl0sIFtjbGFzcyo9XFxcIiBpY29uLVxcXCJdIHtcXHJcXG5cXHQvKiB1c2UgIWltcG9ydGFudCB0byBwcmV2ZW50IGlzc3VlcyB3aXRoIGJyb3dzZXIgZXh0ZW5zaW9ucyB0aGF0IGNoYW5nZSBmb250cyAqL1xcclxcblxcdGZvbnQtZmFtaWx5OiAncGxheWVyLWljb25zJyAhaW1wb3J0YW50O1xcclxcblxcdHNwZWFrOiBub25lO1xcclxcblxcdGZvbnQtc3R5bGU6IG5vcm1hbDtcXHJcXG5cXHRmb250LXdlaWdodDogbm9ybWFsO1xcclxcblxcdGZvbnQtdmFyaWFudDogbm9ybWFsO1xcclxcblxcdHRleHQtdHJhbnNmb3JtOiBub25lO1xcclxcblxcdGxpbmUtaGVpZ2h0OiAxO1xcclxcblxcclxcblxcdC8qIEJldHRlciBGb250IFJlbmRlcmluZyA9PT09PT09PT09PSAqL1xcclxcblxcdC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xcclxcblxcdC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7XFxyXFxufVxcclxcblxcclxcbi5pY29uLWRvY3VtZW50OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZDQzXFxcIjtcXHJcXG59XFxyXFxuLmljb24tc2lkZWJhci1sZWZ0OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTAwXFxcIjtcXHJcXG59XFxyXFxuLmljb24tc2lkZWJhci1ub25lOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTAxXFxcIjtcXHJcXG59XFxyXFxuLmljb24tc2lkZWJhci1yaWdodDpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZTkwMlxcXCI7XFxyXFxufVxcclxcbi5pY29uLXNlYXJjaDpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZTkwOFxcXCI7XFxyXFxufVxcclxcbi5pY29uLWNvbnRyYWN0OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTA2XFxcIjtcXHJcXG59XFxyXFxuLmljb24tZXhwYW5kOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTA1XFxcIjtcXHJcXG59XFxyXFxuLmljb24tYXJyb3ctZHJvcGRvd246YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGU5MDNcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1hcnJvdy1kcm9wdXA6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGU5MDRcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1jbG9zZS1jaXJjbGUtb3V0bGluZTpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZTkwN1xcXCI7XFxyXFxufVxcclxcbi5pY29uLXByZXZpb3VzOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZDdmXFxcIjtcXHJcXG59XFxyXFxuLmljb24tbmV4dDpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZWQxNlxcXCI7XFxyXFxufVxcclxcbi5pY29uLXBhdXNlOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZDRmXFxcIjtcXHJcXG59XFxyXFxuLmljb24tcGxheTpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZWQ2Y1xcXCI7XFxyXFxufVxcclxcbi5pY29uLXBsYXliYWNrLXJhdGU6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVkNzJcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1tdXRlOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlY2Y5XFxcIjtcXHJcXG59XFxyXFxuLmljb24tdm9sdW1lMDpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZWYwY1xcXCI7XFxyXFxufVxcclxcbi5pY29uLXZvbHVtZTE6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVmMGRcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi12b2x1bWUyOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZjBlXFxcIjtcXHJcXG59XFxyXFxuLmljb24tdm9sdW1lMzpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZWYwZlxcXCI7XFxyXFxufVxcclxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9pY29ucy5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7Q0FDQywyQkFBMkI7Q0FDM0IsK0RBQStDO0NBQy9DLG1CQUFtQjtDQUNuQixrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQywrRUFBK0U7Q0FDL0Usc0NBQXNDO0NBQ3RDLFdBQVc7Q0FDWCxrQkFBa0I7Q0FDbEIsbUJBQW1CO0NBQ25CLG9CQUFvQjtDQUNwQixvQkFBb0I7Q0FDcEIsY0FBYzs7Q0FFZCxzQ0FBc0M7Q0FDdEMsbUNBQW1DO0NBQ25DLGtDQUFrQztBQUNuQzs7QUFFQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIkBmb250LWZhY2Uge1xcclxcblxcdGZvbnQtZmFtaWx5OiAncGxheWVyLWljb25zJztcXHJcXG5cXHRzcmM6IHVybCgncGxheWVyLWljb25zLnR0ZicpIGZvcm1hdCgndHJ1ZXR5cGUnKTtcXHJcXG5cXHRmb250LXdlaWdodDogbm9ybWFsO1xcclxcblxcdGZvbnQtc3R5bGU6IG5vcm1hbDtcXHJcXG59XFxyXFxuXFxyXFxuW2NsYXNzXj1cXFwiaWNvbi1cXFwiXSwgW2NsYXNzKj1cXFwiIGljb24tXFxcIl0ge1xcclxcblxcdC8qIHVzZSAhaW1wb3J0YW50IHRvIHByZXZlbnQgaXNzdWVzIHdpdGggYnJvd3NlciBleHRlbnNpb25zIHRoYXQgY2hhbmdlIGZvbnRzICovXFxyXFxuXFx0Zm9udC1mYW1pbHk6ICdwbGF5ZXItaWNvbnMnICFpbXBvcnRhbnQ7XFxyXFxuXFx0c3BlYWs6IG5vbmU7XFxyXFxuXFx0Zm9udC1zdHlsZTogbm9ybWFsO1xcclxcblxcdGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxyXFxuXFx0Zm9udC12YXJpYW50OiBub3JtYWw7XFxyXFxuXFx0dGV4dC10cmFuc2Zvcm06IG5vbmU7XFxyXFxuXFx0bGluZS1oZWlnaHQ6IDE7XFxyXFxuXFxyXFxuXFx0LyogQmV0dGVyIEZvbnQgUmVuZGVyaW5nID09PT09PT09PT09ICovXFxyXFxuXFx0LXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XFxyXFxuXFx0LW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTtcXHJcXG59XFxyXFxuXFxyXFxuLmljb24tZG9jdW1lbnQ6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVkNDNcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1zaWRlYmFyLWxlZnQ6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGU5MDBcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1zaWRlYmFyLW5vbmU6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGU5MDFcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1zaWRlYmFyLXJpZ2h0OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTAyXFxcIjtcXHJcXG59XFxyXFxuLmljb24tc2VhcmNoOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTA4XFxcIjtcXHJcXG59XFxyXFxuLmljb24tY29udHJhY3Q6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGU5MDZcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1leHBhbmQ6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGU5MDVcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1hcnJvdy1kcm9wZG93bjpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZTkwM1xcXCI7XFxyXFxufVxcclxcbi5pY29uLWFycm93LWRyb3B1cDpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZTkwNFxcXCI7XFxyXFxufVxcclxcbi5pY29uLWNsb3NlLWNpcmNsZS1vdXRsaW5lOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlOTA3XFxcIjtcXHJcXG59XFxyXFxuLmljb24tcHJldmlvdXM6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVkN2ZcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1uZXh0OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZDE2XFxcIjtcXHJcXG59XFxyXFxuLmljb24tcGF1c2U6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVkNGZcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi1wbGF5OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZDZjXFxcIjtcXHJcXG59XFxyXFxuLmljb24tcGxheWJhY2stcmF0ZTpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZWQ3MlxcXCI7XFxyXFxufVxcclxcbi5pY29uLW11dGU6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVjZjlcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi12b2x1bWUwOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZjBjXFxcIjtcXHJcXG59XFxyXFxuLmljb24tdm9sdW1lMTpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcZWYwZFxcXCI7XFxyXFxufVxcclxcbi5pY29uLXZvbHVtZTI6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXGVmMGVcXFwiO1xcclxcbn1cXHJcXG4uaWNvbi12b2x1bWUzOmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxlZjBmXFxcIjtcXHJcXG59XFxyXFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiW3Rvb2x0aXBdLFxcclxcblt0b29sdGlwLWJvdHRvbV0sXFxyXFxuW3Rvb2x0aXAtbGVmdF0sXFxyXFxuW3Rvb2x0aXAtcmlnaHRdIHtcXHJcXG5cXHRwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxufVxcclxcblxcclxcblt0b29sdGlwXTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXBdOmFmdGVyLFxcclxcblt0b29sdGlwLWJvdHRvbV06YmVmb3JlLFxcclxcblt0b29sdGlwLWJvdHRvbV06YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtbGVmdF06YmVmb3JlLFxcclxcblt0b29sdGlwLWxlZnRdOmFmdGVyLFxcclxcblt0b29sdGlwLXJpZ2h0XTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmFmdGVyIHtcXHJcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuXFx0dmlzaWJpbGl0eTogaGlkZGVuO1xcclxcblxcdG9wYWNpdHk6IDA7XFxyXFxuXFx0cG9pbnRlci1ldmVudHM6IG5vbmU7XFxyXFxuXFxyXFxuXFx0LXdlYmtpdC10cmFuc2l0aW9uOlxcclxcblxcdFxcdG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dCxcXHJcXG5cXHRcXHR2aXNpYmlsaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XFxyXFxuXFx0LW1vei10cmFuc2l0aW9uOlxcclxcblxcdFxcdG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dCxcXHJcXG5cXHRcXHR2aXNpYmlsaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XFxyXFxuXFx0dHJhbnNpdGlvbjpcXHJcXG5cXHRcXHRvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQsXFxyXFxuXFx0XFx0dmlzaWJpbGl0eSAwLjJzIGVhc2UtaW4tb3V0O1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcF06aG92ZXI6YmVmb3JlLFxcclxcblt0b29sdGlwXTpob3ZlcjphZnRlcixcXHJcXG5bdG9vbHRpcF06Zm9jdXM6YmVmb3JlLFxcclxcblt0b29sdGlwXTpmb2N1czphZnRlcixcXHJcXG5bdG9vbHRpcC1ib3R0b21dOmhvdmVyOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1ib3R0b21dOmhvdmVyOmFmdGVyLFxcclxcblt0b29sdGlwLWJvdHRvbV06Zm9jdXM6YmVmb3JlLFxcclxcblt0b29sdGlwLWJvdHRvbV06Zm9jdXM6YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtbGVmdF06aG92ZXI6YmVmb3JlLFxcclxcblt0b29sdGlwLWxlZnRdOmhvdmVyOmFmdGVyLFxcclxcblt0b29sdGlwLWxlZnRdOmZvY3VzOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1sZWZ0XTpmb2N1czphZnRlcixcXHJcXG5bdG9vbHRpcC1yaWdodF06aG92ZXI6YmVmb3JlLFxcclxcblt0b29sdGlwLXJpZ2h0XTpob3ZlcjphZnRlcixcXHJcXG5bdG9vbHRpcC1yaWdodF06Zm9jdXM6YmVmb3JlLFxcclxcblt0b29sdGlwLXJpZ2h0XTpmb2N1czphZnRlciB7XFxyXFxuXFx0dmlzaWJpbGl0eTogdmlzaWJsZTtcXHJcXG5cXHRvcGFjaXR5OiAxO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBCYXNlIHN0eWxlcyBmb3IgdGhlIHRvb2x0aXAncyBkaXJlY3Rpb25hbCBhcnJvdyAqL1xcclxcblt0b29sdGlwXTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtbGVmdF06YmVmb3JlLFxcclxcblt0b29sdGlwLXJpZ2h0XTpiZWZvcmUge1xcclxcblxcdHotaW5kZXg6IDEwMDE7XFxyXFxuXFx0Ym9yZGVyOiA2cHggc29saWQgdHJhbnNwYXJlbnQ7XFxyXFxuXFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXCI7XFxyXFxufVxcclxcblxcclxcbi8qIEJhc2Ugc3R5bGVzIGZvciB0aGUgdG9vbHRpcCdzIGNvbnRlbnQgYXJlYSAqL1xcclxcblt0b29sdGlwXTphZnRlcixcXHJcXG5bdG9vbHRpcC1ib3R0b21dOmFmdGVyLFxcclxcblt0b29sdGlwLWxlZnRdOmFmdGVyLFxcclxcblt0b29sdGlwLXJpZ2h0XTphZnRlciB7XFxyXFxuXFx0ei1pbmRleDogMTAwMDtcXHJcXG5cXHRwYWRkaW5nOiA4cHg7XFxyXFxuXFx0bWFyZ2luOiAwO1xcclxcblxcdGJhY2tncm91bmQtY29sb3I6ICMwMDA7XFxyXFxuXFx0YmFja2dyb3VuZC1jb2xvcjogaHNsKDAsIDAlLCAyMCUpO1xcclxcblxcdGNvbG9yOiAjZmZmO1xcclxcblxcdGZvbnQtc2l6ZTogMTRweDtcXHJcXG5cXHRsaW5lLWhlaWdodDogMS4yO1xcclxcblxcdHdoaXRlLXNwYWNlOiBwcmU7XFxyXFxufVxcclxcblxcclxcbi8qIFRvcCAoZGVmYXVsdCkgKi9cXHJcXG5bdG9vbHRpcF06YWZ0ZXIge1xcclxcblxcdG1hcmdpbi1ib3R0b206IDEycHg7XFxyXFxuXFx0Y29udGVudDogYXR0cih0b29sdGlwKTtcXHJcXG59XFxyXFxuXFxyXFxuW3Rvb2x0aXBdOmJlZm9yZSxcXHJcXG5bdG9vbHRpcF06YWZ0ZXIge1xcclxcblxcdGJvdHRvbTogMTAwJTtcXHJcXG5cXHRsZWZ0OiA1MCU7XFxyXFxuXFxyXFxuXFx0LXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XFxyXFxuXFx0dHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcF06YmVmb3JlIHtcXHJcXG5cXHRib3JkZXItdG9wLWNvbG9yOiAjMDAwO1xcclxcblxcdGJvcmRlci10b3AtY29sb3I6IGhzbCgwLCAwJSwgMjAlKTtcXHJcXG59XFxyXFxuXFxyXFxuLyogQm90dG9tICovXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTphZnRlciB7XFxyXFxuXFx0bWFyZ2luLXRvcDogMTJweDtcXHJcXG5cXHRjb250ZW50OiBhdHRyKHRvb2x0aXAtYm90dG9tKTtcXHJcXG59XFxyXFxuXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTphZnRlciB7XFxyXFxuXFx0dG9wOiAxMDAlO1xcclxcblxcdGxlZnQ6IDUwJTtcXHJcXG5cXHJcXG5cXHQtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcXHJcXG5cXHR0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XFxyXFxufVxcclxcblxcclxcblt0b29sdGlwLWJvdHRvbV06YmVmb3JlIHtcXHJcXG5cXHRib3JkZXItYm90dG9tLWNvbG9yOiAjMDAwO1xcclxcblxcdGJvcmRlci1ib3R0b20tY29sb3I6IGhzbCgwLCAwJSwgMjAlKTtcXHJcXG59XFxyXFxuXFxyXFxuLyogTGVmdCAqL1xcclxcblt0b29sdGlwLWxlZnRdOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1sZWZ0XTphZnRlciB7XFxyXFxuXFx0dG9wOiA1MCU7XFxyXFxuXFx0cmlnaHQ6IDEwMCU7XFxyXFxuXFx0LXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XFxyXFxuXFx0dHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcC1sZWZ0XTpiZWZvcmUge1xcclxcblxcdGJvdHRvbTogNTAlO1xcclxcblxcdG1hcmdpbi1ib3R0b206IDA7XFxyXFxuXFx0Ym9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxyXFxuXFx0Ym9yZGVyLWxlZnQtY29sb3I6ICMwMDA7XFxyXFxuXFx0Ym9yZGVyLWxlZnQtY29sb3I6IGhzbCgwLCAwJSwgMjAlKTtcXHJcXG59XFxyXFxuXFxyXFxuW3Rvb2x0aXAtbGVmdF06YWZ0ZXIge1xcclxcblxcdG1hcmdpbi1yaWdodDogMTJweDtcXHJcXG5cXHRjb250ZW50OiBhdHRyKHRvb2x0aXAtbGVmdCk7XFxyXFxufVxcclxcblxcclxcbi8qIFJpZ2h0ICovXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1yaWdodF06YWZ0ZXIge1xcclxcblxcdHRvcDogNTAlO1xcclxcblxcdGxlZnQ6IDEwMCU7XFxyXFxuXFx0LXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XFxyXFxuXFx0dHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcC1yaWdodF06YmVmb3JlIHtcXHJcXG5cXHRib3R0b206IDUwJTtcXHJcXG5cXHRtYXJnaW4tYm90dG9tOiAwO1xcclxcblxcdGJvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50O1xcclxcblxcdGJvcmRlci1yaWdodC1jb2xvcjogIzAwMDtcXHJcXG5cXHRib3JkZXItcmlnaHQtY29sb3I6IGhzbCgwLCAwJSwgMjAlKTtcXHJcXG59XFxyXFxuXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmFmdGVyIHtcXHJcXG5cXHRtYXJnaW4tbGVmdDogMTJweDtcXHJcXG5cXHRjb250ZW50OiBhdHRyKHRvb2x0aXAtcmlnaHQpO1xcclxcbn1cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvdG9vbHRpcC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7Ozs7Q0FJQyxrQkFBa0I7QUFDbkI7O0FBRUE7Ozs7Ozs7O0NBUUMsa0JBQWtCO0NBQ2xCLGtCQUFrQjtDQUNsQixVQUFVO0NBQ1Ysb0JBQW9COztDQUVwQjs7NkJBRTRCO0NBQzVCOzs2QkFFNEI7Q0FDNUI7OzZCQUU0QjtBQUM3Qjs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztDQWdCQyxtQkFBbUI7Q0FDbkIsVUFBVTtBQUNYOztBQUVBLG9EQUFvRDtBQUNwRDs7OztDQUlDLGFBQWE7Q0FDYiw2QkFBNkI7Q0FDN0IsdUJBQXVCO0NBQ3ZCLFdBQVc7QUFDWjs7QUFFQSwrQ0FBK0M7QUFDL0M7Ozs7Q0FJQyxhQUFhO0NBQ2IsWUFBWTtDQUNaLFNBQVM7Q0FDVCxzQkFBc0I7Q0FDdEIsaUNBQWlDO0NBQ2pDLFdBQVc7Q0FDWCxlQUFlO0NBQ2YsZ0JBQWdCO0NBQ2hCLGdCQUFnQjtBQUNqQjs7QUFFQSxrQkFBa0I7QUFDbEI7Q0FDQyxtQkFBbUI7Q0FDbkIsc0JBQXNCO0FBQ3ZCOztBQUVBOztDQUVDLFlBQVk7Q0FDWixTQUFTOztDQUVULG1DQUFtQztDQUNuQywyQkFBMkI7QUFDNUI7O0FBRUE7Q0FDQyxzQkFBc0I7Q0FDdEIsaUNBQWlDO0FBQ2xDOztBQUVBLFdBQVc7QUFDWDtDQUNDLGdCQUFnQjtDQUNoQiw2QkFBNkI7QUFDOUI7O0FBRUE7O0NBRUMsU0FBUztDQUNULFNBQVM7O0NBRVQsbUNBQW1DO0NBQ25DLDJCQUEyQjtBQUM1Qjs7QUFFQTtDQUNDLHlCQUF5QjtDQUN6QixvQ0FBb0M7QUFDckM7O0FBRUEsU0FBUztBQUNUOztDQUVDLFFBQVE7Q0FDUixXQUFXO0NBQ1gsbUNBQW1DO0NBQ25DLDJCQUEyQjtBQUM1Qjs7QUFFQTtDQUNDLFdBQVc7Q0FDWCxnQkFBZ0I7Q0FDaEIsNkJBQTZCO0NBQzdCLHVCQUF1QjtDQUN2QixrQ0FBa0M7QUFDbkM7O0FBRUE7Q0FDQyxrQkFBa0I7Q0FDbEIsMkJBQTJCO0FBQzVCOztBQUVBLFVBQVU7QUFDVjs7Q0FFQyxRQUFRO0NBQ1IsVUFBVTtDQUNWLG1DQUFtQztDQUNuQywyQkFBMkI7QUFDNUI7O0FBRUE7Q0FDQyxXQUFXO0NBQ1gsZ0JBQWdCO0NBQ2hCLDZCQUE2QjtDQUM3Qix3QkFBd0I7Q0FDeEIsbUNBQW1DO0FBQ3BDOztBQUVBO0NBQ0MsaUJBQWlCO0NBQ2pCLDRCQUE0QjtBQUM3QlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJbdG9vbHRpcF0sXFxyXFxuW3Rvb2x0aXAtYm90dG9tXSxcXHJcXG5bdG9vbHRpcC1sZWZ0XSxcXHJcXG5bdG9vbHRpcC1yaWdodF0ge1xcclxcblxcdHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG59XFxyXFxuXFxyXFxuW3Rvb2x0aXBdOmJlZm9yZSxcXHJcXG5bdG9vbHRpcF06YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTphZnRlcixcXHJcXG5bdG9vbHRpcC1sZWZ0XTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtbGVmdF06YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1yaWdodF06YWZ0ZXIge1xcclxcblxcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG5cXHR2aXNpYmlsaXR5OiBoaWRkZW47XFxyXFxuXFx0b3BhY2l0eTogMDtcXHJcXG5cXHRwb2ludGVyLWV2ZW50czogbm9uZTtcXHJcXG5cXHJcXG5cXHQtd2Via2l0LXRyYW5zaXRpb246XFxyXFxuXFx0XFx0b3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0LFxcclxcblxcdFxcdHZpc2liaWxpdHkgMC4ycyBlYXNlLWluLW91dDtcXHJcXG5cXHQtbW96LXRyYW5zaXRpb246XFxyXFxuXFx0XFx0b3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0LFxcclxcblxcdFxcdHZpc2liaWxpdHkgMC4ycyBlYXNlLWluLW91dDtcXHJcXG5cXHR0cmFuc2l0aW9uOlxcclxcblxcdFxcdG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dCxcXHJcXG5cXHRcXHR2aXNpYmlsaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XFxyXFxufVxcclxcblxcclxcblt0b29sdGlwXTpob3ZlcjpiZWZvcmUsXFxyXFxuW3Rvb2x0aXBdOmhvdmVyOmFmdGVyLFxcclxcblt0b29sdGlwXTpmb2N1czpiZWZvcmUsXFxyXFxuW3Rvb2x0aXBdOmZvY3VzOmFmdGVyLFxcclxcblt0b29sdGlwLWJvdHRvbV06aG92ZXI6YmVmb3JlLFxcclxcblt0b29sdGlwLWJvdHRvbV06aG92ZXI6YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTpmb2N1czpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTpmb2N1czphZnRlcixcXHJcXG5bdG9vbHRpcC1sZWZ0XTpob3ZlcjpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtbGVmdF06aG92ZXI6YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtbGVmdF06Zm9jdXM6YmVmb3JlLFxcclxcblt0b29sdGlwLWxlZnRdOmZvY3VzOmFmdGVyLFxcclxcblt0b29sdGlwLXJpZ2h0XTpob3ZlcjpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmhvdmVyOmFmdGVyLFxcclxcblt0b29sdGlwLXJpZ2h0XTpmb2N1czpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmZvY3VzOmFmdGVyIHtcXHJcXG5cXHR2aXNpYmlsaXR5OiB2aXNpYmxlO1xcclxcblxcdG9wYWNpdHk6IDE7XFxyXFxufVxcclxcblxcclxcbi8qIEJhc2Ugc3R5bGVzIGZvciB0aGUgdG9vbHRpcCdzIGRpcmVjdGlvbmFsIGFycm93ICovXFxyXFxuW3Rvb2x0aXBdOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1ib3R0b21dOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1sZWZ0XTpiZWZvcmUsXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmJlZm9yZSB7XFxyXFxuXFx0ei1pbmRleDogMTAwMTtcXHJcXG5cXHRib3JkZXI6IDZweCBzb2xpZCB0cmFuc3BhcmVudDtcXHJcXG5cXHRiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXHJcXG59XFxyXFxuXFxyXFxuLyogQmFzZSBzdHlsZXMgZm9yIHRoZSB0b29sdGlwJ3MgY29udGVudCBhcmVhICovXFxyXFxuW3Rvb2x0aXBdOmFmdGVyLFxcclxcblt0b29sdGlwLWJvdHRvbV06YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtbGVmdF06YWZ0ZXIsXFxyXFxuW3Rvb2x0aXAtcmlnaHRdOmFmdGVyIHtcXHJcXG5cXHR6LWluZGV4OiAxMDAwO1xcclxcblxcdHBhZGRpbmc6IDhweDtcXHJcXG5cXHRtYXJnaW46IDA7XFxyXFxuXFx0YmFja2dyb3VuZC1jb2xvcjogIzAwMDtcXHJcXG5cXHRiYWNrZ3JvdW5kLWNvbG9yOiBoc2woMCwgMCUsIDIwJSk7XFxyXFxuXFx0Y29sb3I6ICNmZmY7XFxyXFxuXFx0Zm9udC1zaXplOiAxNHB4O1xcclxcblxcdGxpbmUtaGVpZ2h0OiAxLjI7XFxyXFxuXFx0d2hpdGUtc3BhY2U6IHByZTtcXHJcXG59XFxyXFxuXFxyXFxuLyogVG9wIChkZWZhdWx0KSAqL1xcclxcblt0b29sdGlwXTphZnRlciB7XFxyXFxuXFx0bWFyZ2luLWJvdHRvbTogMTJweDtcXHJcXG5cXHRjb250ZW50OiBhdHRyKHRvb2x0aXApO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcF06YmVmb3JlLFxcclxcblt0b29sdGlwXTphZnRlciB7XFxyXFxuXFx0Ym90dG9tOiAxMDAlO1xcclxcblxcdGxlZnQ6IDUwJTtcXHJcXG5cXHJcXG5cXHQtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcXHJcXG5cXHR0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XFxyXFxufVxcclxcblxcclxcblt0b29sdGlwXTpiZWZvcmUge1xcclxcblxcdGJvcmRlci10b3AtY29sb3I6ICMwMDA7XFxyXFxuXFx0Ym9yZGVyLXRvcC1jb2xvcjogaHNsKDAsIDAlLCAyMCUpO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBCb3R0b20gKi9cXHJcXG5bdG9vbHRpcC1ib3R0b21dOmFmdGVyIHtcXHJcXG5cXHRtYXJnaW4tdG9wOiAxMnB4O1xcclxcblxcdGNvbnRlbnQ6IGF0dHIodG9vbHRpcC1ib3R0b20pO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcC1ib3R0b21dOmJlZm9yZSxcXHJcXG5bdG9vbHRpcC1ib3R0b21dOmFmdGVyIHtcXHJcXG5cXHR0b3A6IDEwMCU7XFxyXFxuXFx0bGVmdDogNTAlO1xcclxcblxcclxcblxcdC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xcclxcblxcdHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcXHJcXG59XFxyXFxuXFxyXFxuW3Rvb2x0aXAtYm90dG9tXTpiZWZvcmUge1xcclxcblxcdGJvcmRlci1ib3R0b20tY29sb3I6ICMwMDA7XFxyXFxuXFx0Ym9yZGVyLWJvdHRvbS1jb2xvcjogaHNsKDAsIDAlLCAyMCUpO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBMZWZ0ICovXFxyXFxuW3Rvb2x0aXAtbGVmdF06YmVmb3JlLFxcclxcblt0b29sdGlwLWxlZnRdOmFmdGVyIHtcXHJcXG5cXHR0b3A6IDUwJTtcXHJcXG5cXHRyaWdodDogMTAwJTtcXHJcXG5cXHQtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcXHJcXG5cXHR0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XFxyXFxufVxcclxcblxcclxcblt0b29sdGlwLWxlZnRdOmJlZm9yZSB7XFxyXFxuXFx0Ym90dG9tOiA1MCU7XFxyXFxuXFx0bWFyZ2luLWJvdHRvbTogMDtcXHJcXG5cXHRib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudDtcXHJcXG5cXHRib3JkZXItbGVmdC1jb2xvcjogIzAwMDtcXHJcXG5cXHRib3JkZXItbGVmdC1jb2xvcjogaHNsKDAsIDAlLCAyMCUpO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcC1sZWZ0XTphZnRlciB7XFxyXFxuXFx0bWFyZ2luLXJpZ2h0OiAxMnB4O1xcclxcblxcdGNvbnRlbnQ6IGF0dHIodG9vbHRpcC1sZWZ0KTtcXHJcXG59XFxyXFxuXFxyXFxuLyogUmlnaHQgKi9cXHJcXG5bdG9vbHRpcC1yaWdodF06YmVmb3JlLFxcclxcblt0b29sdGlwLXJpZ2h0XTphZnRlciB7XFxyXFxuXFx0dG9wOiA1MCU7XFxyXFxuXFx0bGVmdDogMTAwJTtcXHJcXG5cXHQtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcXHJcXG5cXHR0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XFxyXFxufVxcclxcblxcclxcblt0b29sdGlwLXJpZ2h0XTpiZWZvcmUge1xcclxcblxcdGJvdHRvbTogNTAlO1xcclxcblxcdG1hcmdpbi1ib3R0b206IDA7XFxyXFxuXFx0Ym9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxyXFxuXFx0Ym9yZGVyLXJpZ2h0LWNvbG9yOiAjMDAwO1xcclxcblxcdGJvcmRlci1yaWdodC1jb2xvcjogaHNsKDAsIDAlLCAyMCUpO1xcclxcbn1cXHJcXG5cXHJcXG5bdG9vbHRpcC1yaWdodF06YWZ0ZXIge1xcclxcblxcdG1hcmdpbi1sZWZ0OiAxMnB4O1xcclxcblxcdGNvbnRlbnQ6IGF0dHIodG9vbHRpcC1yaWdodCk7XFxyXFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2kgPSBhcnIgJiYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXSk7IGlmIChfaSA9PSBudWxsKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX3MsIF9lOyB0cnkgeyBmb3IgKF9pID0gX2kuY2FsbChhcnIpOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKSB7XG4gIHZhciBfaXRlbSA9IF9zbGljZWRUb0FycmF5KGl0ZW0sIDQpLFxuICAgICAgY29udGVudCA9IF9pdGVtWzFdLFxuICAgICAgY3NzTWFwcGluZyA9IF9pdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgXCJcIikuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBvcHRpb25zID0ge307XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlLCBuby1wYXJhbS1yZWFzc2lnblxuXG5cbiAgdXJsID0gdXJsICYmIHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmw7XG5cbiAgaWYgKHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9IC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuXG5cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9IC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcblxuXG4gIGlmICgvW1wiJygpIFxcdFxcbl0vLnRlc3QodXJsKSB8fCBvcHRpb25zLm5lZWRRdW90ZXMpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvXFxuL2csIFwiXFxcXG5cIiksIFwiXFxcIlwiKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuXHRUaGUgTUlUIExpY2Vuc2UgKE1JVClcblxuXHRDb3B5cmlnaHQgKGMpIDIwMTYgTWVldGVjaG9cblxuXHRQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcblx0YSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG5cdHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cblx0dGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG5cdGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuXHRTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5cdFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5cdFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0T1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5cdEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMXG5cdFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SXG5cdE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLFxuXHRBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1Jcblx0T1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbi8vIExpc3Qgb2Ygc2Vzc2lvbnNcbkphbnVzLnNlc3Npb25zID0ge307XG5cbkphbnVzLmlzRXh0ZW5zaW9uRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuXHRpZihuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKSB7XG5cdFx0Ly8gTm8gbmVlZCBmb3IgdGhlIGV4dGVuc2lvbiwgZ2V0RGlzcGxheU1lZGlhIGlzIHN1cHBvcnRlZFxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGlmKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdDaHJvbWUnKSkge1xuXHRcdHZhciBjaHJvbWV2ZXIgPSBwYXJzZUludCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKC4qKSAvKVsxXSwgMTApO1xuXHRcdHZhciBtYXh2ZXIgPSAzMztcblx0XHRpZih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgnTGludXgnKSlcblx0XHRcdG1heHZlciA9IDM1O1x0Ly8gXCJrbm93blwiIGNyYXNoIGluIGNocm9tZSAzNCBhbmQgMzUgb24gbGludXhcblx0XHRpZihjaHJvbWV2ZXIgPj0gMjYgJiYgY2hyb21ldmVyIDw9IG1heHZlcikge1xuXHRcdFx0Ly8gT2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGRvbid0IHN1cHBvcnQgdGhpcyBleHRlbnNpb24tYmFzZWQgYXBwcm9hY2gsIHNvIGxpZVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBKYW51cy5leHRlbnNpb24uaXNJbnN0YWxsZWQoKTtcblx0fSBlbHNlIHtcblx0XHQvLyBGaXJlZm94IGFuZCBvdGhlcnMsIG5vIG5lZWQgZm9yIHRoZSBleHRlbnNpb24gKGJ1dCB0aGlzIGRvZXNuJ3QgbWVhbiBpdCB3aWxsIHdvcmspXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn07XG5cbnZhciBkZWZhdWx0RXh0ZW5zaW9uID0ge1xuXHQvLyBTY3JlZW5zaGFyaW5nIENocm9tZSBFeHRlbnNpb24gSURcblx0ZXh0ZW5zaW9uSWQ6ICdoYXBmZ2Zka2xlaWdnampwZnBlbmFqZ2RuZmNranBhaicsXG5cdGlzSW5zdGFsbGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqYW51cy1leHRlbnNpb24taW5zdGFsbGVkJykgIT09IG51bGw7IH0sXG5cdGdldFNjcmVlbjogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0dmFyIHBlbmRpbmcgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ05hdmlnYXRvclVzZXJNZWRpYUVycm9yJyk7XG5cdFx0XHRlcnJvci5uYW1lID0gJ1RoZSByZXF1aXJlZCBDaHJvbWUgZXh0ZW5zaW9uIGlzIG5vdCBpbnN0YWxsZWQ6IGNsaWNrIDxhIGhyZWY9XCIjXCI+aGVyZTwvYT4gdG8gaW5zdGFsbCBpdC4gKE5PVEU6IHRoaXMgd2lsbCBuZWVkIHlvdSB0byByZWZyZXNoIHRoZSBwYWdlKSc7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXHRcdH0sIDEwMDApO1xuXHRcdHRoaXMuY2FjaGVbcGVuZGluZ10gPSBjYWxsYmFjaztcblx0XHR3aW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAnamFudXNHZXRTY3JlZW4nLCBpZDogcGVuZGluZyB9LCAnKicpO1xuXHR9LFxuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGNhY2hlID0ge307XG5cdFx0dGhpcy5jYWNoZSA9IGNhY2hlO1xuXHRcdC8vIFdhaXQgZm9yIGV2ZW50cyBmcm9tIHRoZSBDaHJvbWUgRXh0ZW5zaW9uXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGlmKGV2ZW50Lm9yaWdpbiAhPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHRpZihldmVudC5kYXRhLnR5cGUgPT0gJ2phbnVzR290U2NyZWVuJyAmJiBjYWNoZVtldmVudC5kYXRhLmlkXSkge1xuXHRcdFx0XHR2YXIgY2FsbGJhY2sgPSBjYWNoZVtldmVudC5kYXRhLmlkXTtcblx0XHRcdFx0ZGVsZXRlIGNhY2hlW2V2ZW50LmRhdGEuaWRdO1xuXG5cdFx0XHRcdGlmIChldmVudC5kYXRhLnNvdXJjZUlkID09PSAnJykge1xuXHRcdFx0XHRcdC8vIHVzZXIgY2FuY2VsZWRcblx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ05hdmlnYXRvclVzZXJNZWRpYUVycm9yJyk7XG5cdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdZb3UgY2FuY2VsbGVkIHRoZSByZXF1ZXN0IGZvciBwZXJtaXNzaW9uLCBnaXZpbmcgdXAuLi4nO1xuXHRcdFx0XHRcdGNhbGxiYWNrKGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYWxsYmFjayhudWxsLCBldmVudC5kYXRhLnNvdXJjZUlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChldmVudC5kYXRhLnR5cGUgPT0gJ2phbnVzR2V0U2NyZWVuUGVuZGluZycpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ2NsZWFyaW5nICcsIGV2ZW50LmRhdGEuaWQpO1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KGV2ZW50LmRhdGEuaWQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59O1xuXG5KYW51cy51c2VEZWZhdWx0RGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKGRlcHMpIHtcblx0dmFyIGYgPSAoZGVwcyAmJiBkZXBzLmZldGNoKSB8fCBmZXRjaDtcblx0dmFyIHAgPSAoZGVwcyAmJiBkZXBzLlByb21pc2UpIHx8IFByb21pc2U7XG5cdHZhciBzb2NrZXRDbHMgPSAoZGVwcyAmJiBkZXBzLldlYlNvY2tldCkgfHwgV2ViU29ja2V0O1xuXG5cdHJldHVybiB7XG5cdFx0bmV3V2ViU29ja2V0OiBmdW5jdGlvbihzZXJ2ZXIsIHByb3RvKSB7IHJldHVybiBuZXcgc29ja2V0Q2xzKHNlcnZlciwgcHJvdG8pOyB9LFxuXHRcdGV4dGVuc2lvbjogKGRlcHMgJiYgZGVwcy5leHRlbnNpb24pIHx8IGRlZmF1bHRFeHRlbnNpb24sXG5cdFx0aXNBcnJheTogZnVuY3Rpb24oYXJyKSB7IHJldHVybiBBcnJheS5pc0FycmF5KGFycik7IH0sXG5cdFx0d2ViUlRDQWRhcHRlcjogKGRlcHMgJiYgZGVwcy5hZGFwdGVyKSB8fCBhZGFwdGVyLFxuXHRcdGh0dHBBUElDYWxsOiBmdW5jdGlvbih1cmwsIG9wdGlvbnMpIHtcblx0XHRcdHZhciBmZXRjaE9wdGlvbnMgPSB7XG5cdFx0XHRcdG1ldGhvZDogb3B0aW9ucy52ZXJiLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0J0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNhY2hlOiAnbm8tY2FjaGUnXG5cdFx0XHR9O1xuXHRcdFx0aWYob3B0aW9ucy52ZXJiID09PSBcIlBPU1RcIikge1xuXHRcdFx0XHRmZXRjaE9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cdFx0XHR9XG5cdFx0XHRpZihvcHRpb25zLndpdGhDcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGZldGNoT3B0aW9ucy5jcmVkZW50aWFscyA9IG9wdGlvbnMud2l0aENyZWRlbnRpYWxzID09PSB0cnVlID8gJ2luY2x1ZGUnIDogKG9wdGlvbnMud2l0aENyZWRlbnRpYWxzID8gb3B0aW9ucy53aXRoQ3JlZGVudGlhbHMgOiAnb21pdCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYob3B0aW9ucy5ib2R5KSB7XG5cdFx0XHRcdGZldGNoT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5ib2R5KTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGZldGNoaW5nID0gZih1cmwsIGZldGNoT3B0aW9ucykuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmV0dXJuIHAucmVqZWN0KHttZXNzYWdlOiAnUHJvYmFibHkgYSBuZXR3b3JrIGVycm9yLCBpcyB0aGUgc2VydmVyIGRvd24/JywgZXJyb3I6IGVycm9yfSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Lypcblx0XHRcdCAqIGZldGNoKCkgZG9lcyBub3QgbmF0aXZlbHkgc3VwcG9ydCB0aW1lb3V0cy5cblx0XHRcdCAqIFdvcmsgYXJvdW5kIHRoaXMgYnkgc3RhcnRpbmcgYSB0aW1lb3V0IG1hbnVhbGx5LCBhbmQgcmFjaW5nIGl0IGFnYWlucyB0aGUgZmV0Y2goKSB0byBzZWUgd2hpY2ggdGhpbmcgcmVzb2x2ZXMgZmlyc3QuXG5cdFx0XHQgKi9cblxuXHRcdFx0aWYob3B0aW9ucy50aW1lb3V0KSB7XG5cdFx0XHRcdHZhciB0aW1lb3V0ID0gbmV3IHAoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdFx0dmFyIHRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlamVjdCh7bWVzc2FnZTogJ1JlcXVlc3QgdGltZWQgb3V0JywgdGltZW91dDogb3B0aW9ucy50aW1lb3V0fSk7XG5cdFx0XHRcdFx0fSwgb3B0aW9ucy50aW1lb3V0KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGZldGNoaW5nID0gcC5yYWNlKFtmZXRjaGluZywgdGltZW91dF0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmZXRjaGluZy50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdGlmKHJlc3BvbnNlLm9rKSB7XG5cdFx0XHRcdFx0aWYodHlwZW9mKG9wdGlvbnMuc3VjY2VzcykgPT09IHR5cGVvZihKYW51cy5ub29wKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uKHBhcnNlZCkge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMuc3VjY2VzcyhwYXJzZWQpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0SmFudXMuZXJyb3IoJ1VuaGFuZGxlZCBodHRwQVBJQ2FsbCBzdWNjZXNzIGNhbGxiYWNrIGVycm9yJywgZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcC5yZWplY3Qoe21lc3NhZ2U6ICdGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgYm9keScsIGVycm9yOiBlcnJvciwgcmVzcG9uc2U6IHJlc3BvbnNlfSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHAucmVqZWN0KHttZXNzYWdlOiAnQVBJIGNhbGwgZmFpbGVkJywgcmVzcG9uc2U6IHJlc3BvbnNlfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKHR5cGVvZihvcHRpb25zLmVycm9yKSA9PT0gdHlwZW9mKEphbnVzLm5vb3ApKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy5lcnJvcihlcnJvci5tZXNzYWdlIHx8ICc8PCBpbnRlcm5hbCBlcnJvciA+PicsIGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBmZXRjaGluZztcblx0XHR9XG5cdH1cbn07XG5cbkphbnVzLnVzZU9sZERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uIChkZXBzKSB7XG5cdHZhciBqcSA9IChkZXBzICYmIGRlcHMualF1ZXJ5KSB8fCBqUXVlcnk7XG5cdHZhciBzb2NrZXRDbHMgPSAoZGVwcyAmJiBkZXBzLldlYlNvY2tldCkgfHwgV2ViU29ja2V0O1xuXHRyZXR1cm4ge1xuXHRcdG5ld1dlYlNvY2tldDogZnVuY3Rpb24oc2VydmVyLCBwcm90bykgeyByZXR1cm4gbmV3IHNvY2tldENscyhzZXJ2ZXIsIHByb3RvKTsgfSxcblx0XHRpc0FycmF5OiBmdW5jdGlvbihhcnIpIHsgcmV0dXJuIGpxLmlzQXJyYXkoYXJyKTsgfSxcblx0XHRleHRlbnNpb246IChkZXBzICYmIGRlcHMuZXh0ZW5zaW9uKSB8fCBkZWZhdWx0RXh0ZW5zaW9uLFxuXHRcdHdlYlJUQ0FkYXB0ZXI6IChkZXBzICYmIGRlcHMuYWRhcHRlcikgfHwgYWRhcHRlcixcblx0XHRodHRwQVBJQ2FsbDogZnVuY3Rpb24odXJsLCBvcHRpb25zKSB7XG5cdFx0XHR2YXIgcGF5bG9hZCA9IG9wdGlvbnMuYm9keSAhPT0gdW5kZWZpbmVkID8ge1xuXHRcdFx0XHRjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHkpXG5cdFx0XHR9IDoge307XG5cdFx0XHR2YXIgY3JlZGVudGlhbHMgPSBvcHRpb25zLndpdGhDcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkID8ge3hockZpZWxkczoge3dpdGhDcmVkZW50aWFsczogb3B0aW9ucy53aXRoQ3JlZGVudGlhbHN9fSA6IHt9O1xuXG5cdFx0XHRyZXR1cm4ganEuYWpheChqcS5leHRlbmQocGF5bG9hZCwgY3JlZGVudGlhbHMsIHtcblx0XHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRcdHR5cGU6IG9wdGlvbnMudmVyYixcblx0XHRcdFx0Y2FjaGU6IGZhbHNlLFxuXHRcdFx0XHRkYXRhVHlwZTogJ2pzb24nLFxuXHRcdFx0XHRhc3luYzogb3B0aW9ucy5hc3luYyxcblx0XHRcdFx0dGltZW91dDogb3B0aW9ucy50aW1lb3V0LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdFx0XHRpZih0eXBlb2Yob3B0aW9ucy5zdWNjZXNzKSA9PT0gdHlwZW9mKEphbnVzLm5vb3ApKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25zLnN1Y2Nlc3MocmVzdWx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG5cdFx0XHRcdFx0aWYodHlwZW9mKG9wdGlvbnMuZXJyb3IpID09PSB0eXBlb2YoSmFudXMubm9vcCkpIHtcblx0XHRcdFx0XHRcdG9wdGlvbnMuZXJyb3Ioc3RhdHVzLCBlcnIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcdH1cblx0fTtcbn07XG5cbkphbnVzLm5vb3AgPSBmdW5jdGlvbigpIHt9O1xuXG5KYW51cy5kYXRhQ2hhbkRlZmF1bHRMYWJlbCA9IFwiSmFudXNEYXRhQ2hhbm5lbFwiO1xuXG4vLyBOb3RlOiBpbiB0aGUgZnV0dXJlIHdlIG1heSB3YW50IHRvIGNoYW5nZSB0aGlzLCBlLmcuLCBhcyB3YXNcbi8vIGF0dGVtcHRlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vbWVldGVjaG8vamFudXMtZ2F0ZXdheS9pc3N1ZXMvMTY3MFxuSmFudXMuZW5kT2ZDYW5kaWRhdGVzID0gbnVsbDtcblxuLy8gU3RvcCBhbGwgdHJhY2tzIGZyb20gYSBnaXZlbiBzdHJlYW1cbkphbnVzLnN0b3BBbGxUcmFja3MgPSBmdW5jdGlvbihzdHJlYW0pIHtcblx0dHJ5IHtcblx0XHQvLyBUcnkgYSBNZWRpYVN0cmVhbVRyYWNrLnN0b3AoKSBmb3IgZWFjaCB0cmFja1xuXHRcdHZhciB0cmFja3MgPSBzdHJlYW0uZ2V0VHJhY2tzKCk7XG5cdFx0Zm9yKHZhciBtc3Qgb2YgdHJhY2tzKSB7XG5cdFx0XHRKYW51cy5sb2cobXN0KTtcblx0XHRcdGlmKG1zdCkge1xuXHRcdFx0XHRtc3Quc3RvcCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBjYXRjaChlKSB7XG5cdFx0Ly8gRG8gbm90aGluZyBpZiB0aGlzIGZhaWxzXG5cdH1cbn1cblxuLy8gSW5pdGlhbGl6YXRpb25cbkphbnVzLmluaXQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRvcHRpb25zLmNhbGxiYWNrID0gKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikgPyBvcHRpb25zLmNhbGxiYWNrIDogSmFudXMubm9vcDtcblx0aWYoSmFudXMuaW5pdERvbmUpIHtcblx0XHQvLyBBbHJlYWR5IGluaXRpYWxpemVkXG5cdFx0b3B0aW9ucy5jYWxsYmFjaygpO1xuXHR9IGVsc2Uge1xuXHRcdGlmKHR5cGVvZiBjb25zb2xlLmxvZyA9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRjb25zb2xlLmxvZyA9IGZ1bmN0aW9uKCkge307XG5cdFx0fVxuXHRcdC8vIENvbnNvbGUgbG9nZ2luZyAoYWxsIGRlYnVnZ2luZyBkaXNhYmxlZCBieSBkZWZhdWx0KVxuXHRcdEphbnVzLnRyYWNlID0gSmFudXMubm9vcDtcblx0XHRKYW51cy5kZWJ1ZyA9IEphbnVzLm5vb3A7XG5cdFx0SmFudXMudmRlYnVnID0gSmFudXMubm9vcDtcblx0XHRKYW51cy5sb2cgPSBKYW51cy5ub29wO1xuXHRcdEphbnVzLndhcm4gPSBKYW51cy5ub29wO1xuXHRcdEphbnVzLmVycm9yID0gSmFudXMubm9vcDtcblx0XHRpZihvcHRpb25zLmRlYnVnID09PSB0cnVlIHx8IG9wdGlvbnMuZGVidWcgPT09IFwiYWxsXCIpIHtcblx0XHRcdC8vIEVuYWJsZSBhbGwgZGVidWdnaW5nIGxldmVsc1xuXHRcdFx0SmFudXMudHJhY2UgPSBjb25zb2xlLnRyYWNlLmJpbmQoY29uc29sZSk7XG5cdFx0XHRKYW51cy5kZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKTtcblx0XHRcdEphbnVzLnZkZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKTtcblx0XHRcdEphbnVzLmxvZyA9IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7XG5cdFx0XHRKYW51cy53YXJuID0gY29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7XG5cdFx0XHRKYW51cy5lcnJvciA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtcblx0XHR9IGVsc2UgaWYoQXJyYXkuaXNBcnJheShvcHRpb25zLmRlYnVnKSkge1xuXHRcdFx0Zm9yKHZhciBkIG9mIG9wdGlvbnMuZGVidWcpIHtcblx0XHRcdFx0c3dpdGNoKGQpIHtcblx0XHRcdFx0XHRjYXNlIFwidHJhY2VcIjpcblx0XHRcdFx0XHRcdEphbnVzLnRyYWNlID0gY29uc29sZS50cmFjZS5iaW5kKGNvbnNvbGUpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImRlYnVnXCI6XG5cdFx0XHRcdFx0XHRKYW51cy5kZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJ2ZGVidWdcIjpcblx0XHRcdFx0XHRcdEphbnVzLnZkZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJsb2dcIjpcblx0XHRcdFx0XHRcdEphbnVzLmxvZyA9IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwid2FyblwiOlxuXHRcdFx0XHRcdFx0SmFudXMud2FybiA9IGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImVycm9yXCI6XG5cdFx0XHRcdFx0XHRKYW51cy5lcnJvciA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiVW5rbm93biBkZWJ1Z2dpbmcgb3B0aW9uICdcIiArIGQgKyBcIicgKHN1cHBvcnRlZDogJ3RyYWNlJywgJ2RlYnVnJywgJ3ZkZWJ1ZycsICdsb2cnLCB3YXJuJywgJ2Vycm9yJylcIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRKYW51cy5sb2coXCJJbml0aWFsaXppbmcgbGlicmFyeVwiKTtcblxuXHRcdHZhciB1c2VkRGVwZW5kZW5jaWVzID0gb3B0aW9ucy5kZXBlbmRlbmNpZXMgfHwgSmFudXMudXNlRGVmYXVsdERlcGVuZGVuY2llcygpO1xuXHRcdEphbnVzLmlzQXJyYXkgPSB1c2VkRGVwZW5kZW5jaWVzLmlzQXJyYXk7XG5cdFx0SmFudXMud2ViUlRDQWRhcHRlciA9IHVzZWREZXBlbmRlbmNpZXMud2ViUlRDQWRhcHRlcjtcblx0XHRKYW51cy5odHRwQVBJQ2FsbCA9IHVzZWREZXBlbmRlbmNpZXMuaHR0cEFQSUNhbGw7XG5cdFx0SmFudXMubmV3V2ViU29ja2V0ID0gdXNlZERlcGVuZGVuY2llcy5uZXdXZWJTb2NrZXQ7XG5cdFx0SmFudXMuZXh0ZW5zaW9uID0gdXNlZERlcGVuZGVuY2llcy5leHRlbnNpb247XG5cdFx0SmFudXMuZXh0ZW5zaW9uLmluaXQoKTtcblxuXHRcdC8vIEhlbHBlciBtZXRob2QgdG8gZW51bWVyYXRlIGRldmljZXNcblx0XHRKYW51cy5saXN0RGV2aWNlcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBjb25maWcpIHtcblx0XHRcdGNhbGxiYWNrID0gKHR5cGVvZiBjYWxsYmFjayA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2sgOiBKYW51cy5ub29wO1xuXHRcdFx0aWYgKGNvbmZpZyA9PSBudWxsKSBjb25maWcgPSB7IGF1ZGlvOiB0cnVlLCB2aWRlbzogdHJ1ZSB9O1xuXHRcdFx0aWYoSmFudXMuaXNHZXRVc2VyTWVkaWFBdmFpbGFibGUoKSkge1xuXHRcdFx0XHRuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25maWcpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHN0cmVhbSkge1xuXHRcdFx0XHRcdG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24oZGV2aWNlcykge1xuXHRcdFx0XHRcdFx0SmFudXMuZGVidWcoZGV2aWNlcyk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayhkZXZpY2VzKTtcblx0XHRcdFx0XHRcdC8vIEdldCByaWQgb2YgdGhlIG5vdyB1c2VsZXNzIHN0cmVhbVxuXHRcdFx0XHRcdFx0SmFudXMuc3RvcEFsbFRyYWNrcyhzdHJlYW0pXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0XHRKYW51cy5lcnJvcihlcnIpO1xuXHRcdFx0XHRcdGNhbGxiYWNrKFtdKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRKYW51cy53YXJuKFwibmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB1bmF2YWlsYWJsZVwiKTtcblx0XHRcdFx0Y2FsbGJhY2soW10pO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Ly8gSGVscGVyIG1ldGhvZHMgdG8gYXR0YWNoL3JlYXR0YWNoIGEgc3RyZWFtIHRvIGEgdmlkZW8gZWxlbWVudCAocHJldmlvdXNseSBwYXJ0IG9mIGFkYXB0ZXIuanMpXG5cdFx0SmFudXMuYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbihlbGVtZW50LCBzdHJlYW0pIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGVsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGVsZW1lbnQuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0SmFudXMuZXJyb3IoXCJFcnJvciBhdHRhY2hpbmcgc3RyZWFtIHRvIGVsZW1lbnRcIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdEphbnVzLnJlYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbih0bywgZnJvbSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dG8uc3JjT2JqZWN0ID0gZnJvbS5zcmNPYmplY3Q7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dG8uc3JjID0gZnJvbS5zcmM7XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRKYW51cy5lcnJvcihcIkVycm9yIHJlYXR0YWNoaW5nIHN0cmVhbSB0byBlbGVtZW50XCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvLyBEZXRlY3QgdGFiIGNsb3NlOiBtYWtlIHN1cmUgd2UgZG9uJ3QgbG9vc2UgZXhpc3Rpbmcgb25iZWZvcmV1bmxvYWQgaGFuZGxlcnNcblx0XHQvLyAobm90ZTogZm9yIGlPUyB3ZSBuZWVkIHRvIHN1YnNjcmliZSB0byBhIGRpZmZlcmVudCBldmVudCwgJ3BhZ2VoaWRlJywgc2VlXG5cdFx0Ly8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vdGhlaHVubW9ua2dyb3VwLzZiZWU4OTQxYTQ5Yjg2YmUzMWE3ODdmZThmNGI4Y2ZlKVxuXHRcdHZhciBpT1MgPSBbJ2lQYWQnLCAnaVBob25lJywgJ2lQb2QnXS5pbmRleE9mKG5hdmlnYXRvci5wbGF0Zm9ybSkgPj0gMDtcblx0XHR2YXIgZXZlbnROYW1lID0gaU9TID8gJ3BhZ2VoaWRlJyA6ICdiZWZvcmV1bmxvYWQnO1xuXHRcdHZhciBvbGRPQkYgPSB3aW5kb3dbXCJvblwiICsgZXZlbnROYW1lXTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uKCkge1xuXHRcdFx0SmFudXMubG9nKFwiQ2xvc2luZyB3aW5kb3dcIik7XG5cdFx0XHRmb3IodmFyIHMgaW4gSmFudXMuc2Vzc2lvbnMpIHtcblx0XHRcdFx0aWYoSmFudXMuc2Vzc2lvbnNbc10gJiYgSmFudXMuc2Vzc2lvbnNbc10uZGVzdHJveU9uVW5sb2FkKSB7XG5cdFx0XHRcdFx0SmFudXMubG9nKFwiRGVzdHJveWluZyBzZXNzaW9uIFwiICsgcyk7XG5cdFx0XHRcdFx0SmFudXMuc2Vzc2lvbnNbc10uZGVzdHJveSh7dW5sb2FkOiB0cnVlLCBub3RpZnlEZXN0cm95ZWQ6IGZhbHNlfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKG9sZE9CRiAmJiB0eXBlb2Ygb2xkT0JGID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRvbGRPQkYoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBJZiB0aGlzIGlzIGEgU2FmYXJpIFRlY2hub2xvZ3kgUHJldmlldywgY2hlY2sgaWYgVlA4IGlzIHN1cHBvcnRlZFxuXHRcdEphbnVzLnNhZmFyaVZwOCA9IGZhbHNlO1xuXHRcdGlmKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ3NhZmFyaScgJiZcblx0XHRcdFx0SmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9uID49IDYwNSkge1xuXHRcdFx0Ly8gTGV0J3Mgc2VlIGlmIFJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMoKSBpcyB0aGVyZVxuXHRcdFx0aWYoUlRDUnRwU2VuZGVyICYmIFJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMgJiYgUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhcInZpZGVvXCIpICYmXG5cdFx0XHRcdFx0UlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhcInZpZGVvXCIpLmNvZGVjcyAmJiBSVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKFwidmlkZW9cIikuY29kZWNzLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IodmFyIGNvZGVjIG9mIFJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMoXCJ2aWRlb1wiKS5jb2RlY3MpIHtcblx0XHRcdFx0XHRpZihjb2RlYyAmJiBjb2RlYy5taW1lVHlwZSAmJiBjb2RlYy5taW1lVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInZpZGVvL3ZwOFwiKSB7XG5cdFx0XHRcdFx0XHRKYW51cy5zYWZhcmlWcDggPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKEphbnVzLnNhZmFyaVZwOCkge1xuXHRcdFx0XHRcdEphbnVzLmxvZyhcIlRoaXMgdmVyc2lvbiBvZiBTYWZhcmkgc3VwcG9ydHMgVlA4XCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdEphbnVzLndhcm4oXCJUaGlzIHZlcnNpb24gb2YgU2FmYXJpIGRvZXMgTk9UIHN1cHBvcnQgVlA4OiBpZiB5b3UncmUgdXNpbmcgYSBUZWNobm9sb2d5IFByZXZpZXcsIFwiICtcblx0XHRcdFx0XHRcdFwidHJ5IGVuYWJsaW5nIHRoZSAnV2ViUlRDIFZQOCBjb2RlYycgc2V0dGluZyBpbiB0aGUgJ0V4cGVyaW1lbnRhbCBGZWF0dXJlcycgRGV2ZWxvcCBtZW51XCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBXZSBkbyBpdCBpbiBhIHZlcnkgdWdseSB3YXksIGFzIHRoZXJlJ3Mgbm8gYWx0ZXJuYXRpdmUuLi5cblx0XHRcdFx0Ly8gV2UgY3JlYXRlIGEgUGVlckNvbm5lY3Rpb24gdG8gc2VlIGlmIFZQOCBpcyBpbiBhbiBvZmZlclxuXHRcdFx0XHR2YXIgdGVzdHBjID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHt9KTtcblx0XHRcdFx0dGVzdHBjLmNyZWF0ZU9mZmVyKHtvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlfSkudGhlbihmdW5jdGlvbihvZmZlcikge1xuXHRcdFx0XHRcdEphbnVzLnNhZmFyaVZwOCA9IG9mZmVyLnNkcC5pbmRleE9mKFwiVlA4XCIpICE9PSAtMTtcblx0XHRcdFx0XHRpZihKYW51cy5zYWZhcmlWcDgpIHtcblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlRoaXMgdmVyc2lvbiBvZiBTYWZhcmkgc3VwcG9ydHMgVlA4XCIpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRKYW51cy53YXJuKFwiVGhpcyB2ZXJzaW9uIG9mIFNhZmFyaSBkb2VzIE5PVCBzdXBwb3J0IFZQODogaWYgeW91J3JlIHVzaW5nIGEgVGVjaG5vbG9neSBQcmV2aWV3LCBcIiArXG5cdFx0XHRcdFx0XHRcdFwidHJ5IGVuYWJsaW5nIHRoZSAnV2ViUlRDIFZQOCBjb2RlYycgc2V0dGluZyBpbiB0aGUgJ0V4cGVyaW1lbnRhbCBGZWF0dXJlcycgRGV2ZWxvcCBtZW51XCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0ZXN0cGMuY2xvc2UoKTtcblx0XHRcdFx0XHR0ZXN0cGMgPSBudWxsO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gQ2hlY2sgaWYgdGhpcyBicm93c2VyIHN1cHBvcnRzIFVuaWZpZWQgUGxhbiBhbmQgdHJhbnNjZWl2ZXJzXG5cdFx0Ly8gQmFzZWQgb24gaHR0cHM6Ly9jb2RlcGVuLmlvL2Fub24vcGVuL1pxTHdXVj9lZGl0b3JzPTAwMTBcblx0XHRKYW51cy51bmlmaWVkUGxhbiA9IGZhbHNlO1xuXHRcdGlmKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnICYmXG5cdFx0XHRcdEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA1OSkge1xuXHRcdFx0Ly8gRmlyZWZveCBkZWZpbml0ZWx5IGRvZXMsIHN0YXJ0aW5nIGZyb20gdmVyc2lvbiA1OVxuXHRcdFx0SmFudXMudW5pZmllZFBsYW4gPSB0cnVlO1xuXHRcdH0gZWxzZSBpZihKYW51cy53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmXG5cdFx0XHRcdEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA3Mikge1xuXHRcdFx0Ly8gQ2hyb21lIGRvZXMsIGJ1dCBpdCdzIG9ubHkgdXNhYmxlIGZyb20gdmVyc2lvbiA3MiBvblxuXHRcdFx0SmFudXMudW5pZmllZFBsYW4gPSB0cnVlO1xuXHRcdH0gZWxzZSBpZighd2luZG93LlJUQ1J0cFRyYW5zY2VpdmVyIHx8ICEoJ2N1cnJlbnREaXJlY3Rpb24nIGluIFJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZSkpIHtcblx0XHRcdC8vIFNhZmFyaSBzdXBwb3J0cyBhZGRUcmFuc2NlaXZlcigpIGJ1dCBub3QgVW5pZmllZCBQbGFuIHdoZW5cblx0XHRcdC8vIGN1cnJlbnREaXJlY3Rpb24gaXMgbm90IGRlZmluZWQgKHNlZSBjb2RlcGVuIGFib3ZlKS5cblx0XHRcdEphbnVzLnVuaWZpZWRQbGFuID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIENoZWNrIGlmIGFkZFRyYW5zY2VpdmVyKCkgdGhyb3dzIGFuIGV4Y2VwdGlvblxuXHRcdFx0dmFyIHRlbXBQYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbigpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGVtcFBjLmFkZFRyYW5zY2VpdmVyKCdhdWRpbycpO1xuXHRcdFx0XHRKYW51cy51bmlmaWVkUGxhbiA9IHRydWU7XG5cdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0dGVtcFBjLmNsb3NlKCk7XG5cdFx0fVxuXHRcdEphbnVzLmluaXREb25lID0gdHJ1ZTtcblx0XHRvcHRpb25zLmNhbGxiYWNrKCk7XG5cdH1cbn07XG5cbi8vIEhlbHBlciBtZXRob2QgdG8gY2hlY2sgd2hldGhlciBXZWJSVEMgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclxuSmFudXMuaXNXZWJydGNTdXBwb3J0ZWQgPSBmdW5jdGlvbigpIHtcblx0cmV0dXJuICEhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uO1xufTtcbi8vIEhlbHBlciBtZXRob2QgdG8gY2hlY2sgd2hldGhlciBkZXZpY2VzIGNhbiBiZSBhY2Nlc3NlZCBieSB0aGlzIGJyb3dzZXIgKGUuZy4sIG5vdCBwb3NzaWJsZSB2aWEgcGxhaW4gSFRUUClcbkphbnVzLmlzR2V0VXNlck1lZGlhQXZhaWxhYmxlID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhO1xufTtcblxuLy8gSGVscGVyIG1ldGhvZCB0byBjcmVhdGUgcmFuZG9tIGlkZW50aWZpZXJzIChlLmcuLCB0cmFuc2FjdGlvbilcbkphbnVzLnJhbmRvbVN0cmluZyA9IGZ1bmN0aW9uKGxlbikge1xuXHR2YXIgY2hhclNldCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG5cdHZhciByYW5kb21TdHJpbmcgPSAnJztcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdHZhciByYW5kb21Qb3ogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyU2V0Lmxlbmd0aCk7XG5cdFx0cmFuZG9tU3RyaW5nICs9IGNoYXJTZXQuc3Vic3RyaW5nKHJhbmRvbVBveixyYW5kb21Qb3orMSk7XG5cdH1cblx0cmV0dXJuIHJhbmRvbVN0cmluZztcbn07XG5cbmZ1bmN0aW9uIEphbnVzKGdhdGV3YXlDYWxsYmFja3MpIHtcblx0Z2F0ZXdheUNhbGxiYWNrcyA9IGdhdGV3YXlDYWxsYmFja3MgfHwge307XG5cdGdhdGV3YXlDYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgZ2F0ZXdheUNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBnYXRld2F5Q2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuXHRnYXRld2F5Q2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBnYXRld2F5Q2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBnYXRld2F5Q2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcblx0Z2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQgPSAodHlwZW9mIGdhdGV3YXlDYWxsYmFja3MuZGVzdHJveWVkID09IFwiZnVuY3Rpb25cIikgPyBnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3llZCA6IEphbnVzLm5vb3A7XG5cdGlmKCFKYW51cy5pbml0RG9uZSkge1xuXHRcdGdhdGV3YXlDYWxsYmFja3MuZXJyb3IoXCJMaWJyYXJ5IG5vdCBpbml0aWFsaXplZFwiKTtcblx0XHRyZXR1cm4ge307XG5cdH1cblx0aWYoIUphbnVzLmlzV2VicnRjU3VwcG9ydGVkKCkpIHtcblx0XHRnYXRld2F5Q2FsbGJhY2tzLmVycm9yKFwiV2ViUlRDIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyXCIpO1xuXHRcdHJldHVybiB7fTtcblx0fVxuXHRKYW51cy5sb2coXCJMaWJyYXJ5IGluaXRpYWxpemVkOiBcIiArIEphbnVzLmluaXREb25lKTtcblx0aWYoIWdhdGV3YXlDYWxsYmFja3Muc2VydmVyKSB7XG5cdFx0Z2F0ZXdheUNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgc2VydmVyIHVybFwiKTtcblx0XHRyZXR1cm4ge307XG5cdH1cblx0dmFyIHdlYnNvY2tldHMgPSBmYWxzZTtcblx0dmFyIHdzID0gbnVsbDtcblx0dmFyIHdzSGFuZGxlcnMgPSB7fTtcblx0dmFyIHdzS2VlcGFsaXZlVGltZW91dElkID0gbnVsbDtcblx0dmFyIHNlcnZlcnMgPSBudWxsO1xuXHR2YXIgc2VydmVyc0luZGV4ID0gMDtcblx0dmFyIHNlcnZlciA9IGdhdGV3YXlDYWxsYmFja3Muc2VydmVyO1xuXHRpZihKYW51cy5pc0FycmF5KHNlcnZlcikpIHtcblx0XHRKYW51cy5sb2coXCJNdWx0aXBsZSBzZXJ2ZXJzIHByb3ZpZGVkIChcIiArIHNlcnZlci5sZW5ndGggKyBcIiksIHdpbGwgdXNlIHRoZSBmaXJzdCB0aGF0IHdvcmtzXCIpO1xuXHRcdHNlcnZlciA9IG51bGw7XG5cdFx0c2VydmVycyA9IGdhdGV3YXlDYWxsYmFja3Muc2VydmVyO1xuXHRcdEphbnVzLmRlYnVnKHNlcnZlcnMpO1xuXHR9IGVsc2Uge1xuXHRcdGlmKHNlcnZlci5pbmRleE9mKFwid3NcIikgPT09IDApIHtcblx0XHRcdHdlYnNvY2tldHMgPSB0cnVlO1xuXHRcdFx0SmFudXMubG9nKFwiVXNpbmcgV2ViU29ja2V0cyB0byBjb250YWN0IEphbnVzOiBcIiArIHNlcnZlcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdlYnNvY2tldHMgPSBmYWxzZTtcblx0XHRcdEphbnVzLmxvZyhcIlVzaW5nIFJFU1QgQVBJIHRvIGNvbnRhY3QgSmFudXM6IFwiICsgc2VydmVyKTtcblx0XHR9XG5cdH1cblx0dmFyIGljZVNlcnZlcnMgPSBnYXRld2F5Q2FsbGJhY2tzLmljZVNlcnZlcnMgfHwgW3t1cmxzOiBcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIn1dO1xuXHR2YXIgaWNlVHJhbnNwb3J0UG9saWN5ID0gZ2F0ZXdheUNhbGxiYWNrcy5pY2VUcmFuc3BvcnRQb2xpY3k7XG5cdHZhciBidW5kbGVQb2xpY3kgPSBnYXRld2F5Q2FsbGJhY2tzLmJ1bmRsZVBvbGljeTtcblx0Ly8gV2hldGhlciBJUHY2IGNhbmRpZGF0ZXMgc2hvdWxkIGJlIGdhdGhlcmVkXG5cdHZhciBpcHY2U3VwcG9ydCA9IChnYXRld2F5Q2FsbGJhY2tzLmlwdjYgPT09IHRydWUpO1xuXHQvLyBXaGV0aGVyIHdlIHNob3VsZCBlbmFibGUgdGhlIHdpdGhDcmVkZW50aWFscyBmbGFnIGZvciBYSFIgcmVxdWVzdHNcblx0dmFyIHdpdGhDcmVkZW50aWFscyA9IGZhbHNlO1xuXHRpZihnYXRld2F5Q2FsbGJhY2tzLndpdGhDcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3Mud2l0aENyZWRlbnRpYWxzICE9PSBudWxsKVxuXHRcdHdpdGhDcmVkZW50aWFscyA9IGdhdGV3YXlDYWxsYmFja3Mud2l0aENyZWRlbnRpYWxzID09PSB0cnVlO1xuXHQvLyBPcHRpb25hbCBtYXggZXZlbnRzXG5cdHZhciBtYXhldiA9IDEwO1xuXHRpZihnYXRld2F5Q2FsbGJhY2tzLm1heF9wb2xsX2V2ZW50cyAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3MubWF4X3BvbGxfZXZlbnRzICE9PSBudWxsKVxuXHRcdG1heGV2ID0gZ2F0ZXdheUNhbGxiYWNrcy5tYXhfcG9sbF9ldmVudHM7XG5cdGlmKG1heGV2IDwgMSlcblx0XHRtYXhldiA9IDE7XG5cdC8vIFRva2VuIHRvIHVzZSAob25seSBpZiB0aGUgdG9rZW4gYmFzZWQgYXV0aGVudGljYXRpb24gbWVjaGFuaXNtIGlzIGVuYWJsZWQpXG5cdHZhciB0b2tlbiA9IG51bGw7XG5cdGlmKGdhdGV3YXlDYWxsYmFja3MudG9rZW4gIT09IHVuZGVmaW5lZCAmJiBnYXRld2F5Q2FsbGJhY2tzLnRva2VuICE9PSBudWxsKVxuXHRcdHRva2VuID0gZ2F0ZXdheUNhbGxiYWNrcy50b2tlbjtcblx0Ly8gQVBJIHNlY3JldCB0byB1c2UgKG9ubHkgaWYgdGhlIHNoYXJlZCBBUEkgc2VjcmV0IGlzIGVuYWJsZWQpXG5cdHZhciBhcGlzZWNyZXQgPSBudWxsO1xuXHRpZihnYXRld2F5Q2FsbGJhY2tzLmFwaXNlY3JldCAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3MuYXBpc2VjcmV0ICE9PSBudWxsKVxuXHRcdGFwaXNlY3JldCA9IGdhdGV3YXlDYWxsYmFja3MuYXBpc2VjcmV0O1xuXHQvLyBXaGV0aGVyIHdlIHNob3VsZCBkZXN0cm95IHRoaXMgc2Vzc2lvbiB3aGVuIG9uYmVmb3JldW5sb2FkIGlzIGNhbGxlZFxuXHR0aGlzLmRlc3Ryb3lPblVubG9hZCA9IHRydWU7XG5cdGlmKGdhdGV3YXlDYWxsYmFja3MuZGVzdHJveU9uVW5sb2FkICE9PSB1bmRlZmluZWQgJiYgZ2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95T25VbmxvYWQgIT09IG51bGwpXG5cdFx0dGhpcy5kZXN0cm95T25VbmxvYWQgPSAoZ2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95T25VbmxvYWQgPT09IHRydWUpO1xuXHQvLyBTb21lIHRpbWVvdXQtcmVsYXRlZCB2YWx1ZXNcblx0dmFyIGtlZXBBbGl2ZVBlcmlvZCA9IDI1MDAwO1xuXHRpZihnYXRld2F5Q2FsbGJhY2tzLmtlZXBBbGl2ZVBlcmlvZCAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3Mua2VlcEFsaXZlUGVyaW9kICE9PSBudWxsKVxuXHRcdGtlZXBBbGl2ZVBlcmlvZCA9IGdhdGV3YXlDYWxsYmFja3Mua2VlcEFsaXZlUGVyaW9kO1xuXHRpZihpc05hTihrZWVwQWxpdmVQZXJpb2QpKVxuXHRcdGtlZXBBbGl2ZVBlcmlvZCA9IDI1MDAwO1xuXHR2YXIgbG9uZ1BvbGxUaW1lb3V0ID0gNjAwMDA7XG5cdGlmKGdhdGV3YXlDYWxsYmFja3MubG9uZ1BvbGxUaW1lb3V0ICE9PSB1bmRlZmluZWQgJiYgZ2F0ZXdheUNhbGxiYWNrcy5sb25nUG9sbFRpbWVvdXQgIT09IG51bGwpXG5cdFx0bG9uZ1BvbGxUaW1lb3V0ID0gZ2F0ZXdheUNhbGxiYWNrcy5sb25nUG9sbFRpbWVvdXQ7XG5cdGlmKGlzTmFOKGxvbmdQb2xsVGltZW91dCkpXG5cdFx0bG9uZ1BvbGxUaW1lb3V0ID0gNjAwMDA7XG5cblx0Ly8gb3ZlcnJpZGVzIGZvciBkZWZhdWx0IG1heEJpdHJhdGUgdmFsdWVzIGZvciBzaW11bGNhc3Rpbmdcblx0ZnVuY3Rpb24gZ2V0TWF4Qml0cmF0ZXMoc2ltdWxjYXN0TWF4Qml0cmF0ZXMpIHtcblx0XHR2YXIgbWF4Qml0cmF0ZXMgPSB7XG5cdFx0XHRoaWdoOiA5MDAwMDAsXG5cdFx0XHRtZWRpdW06IDMwMDAwMCxcblx0XHRcdGxvdzogMTAwMDAwLFxuXHRcdH07XG5cblx0XHRpZiAoc2ltdWxjYXN0TWF4Qml0cmF0ZXMgIT09IHVuZGVmaW5lZCAmJiBzaW11bGNhc3RNYXhCaXRyYXRlcyAhPT0gbnVsbCkge1xuXHRcdFx0aWYgKHNpbXVsY2FzdE1heEJpdHJhdGVzLmhpZ2gpXG5cdFx0XHRcdG1heEJpdHJhdGVzLmhpZ2ggPSBzaW11bGNhc3RNYXhCaXRyYXRlcy5oaWdoO1xuXHRcdFx0aWYgKHNpbXVsY2FzdE1heEJpdHJhdGVzLm1lZGl1bSlcblx0XHRcdFx0bWF4Qml0cmF0ZXMubWVkaXVtID0gc2ltdWxjYXN0TWF4Qml0cmF0ZXMubWVkaXVtO1xuXHRcdFx0aWYgKHNpbXVsY2FzdE1heEJpdHJhdGVzLmxvdylcblx0XHRcdFx0bWF4Qml0cmF0ZXMubG93ID0gc2ltdWxjYXN0TWF4Qml0cmF0ZXMubG93O1xuXHRcdH1cblxuXHRcdHJldHVybiBtYXhCaXRyYXRlcztcblx0fVxuXG5cdHZhciBjb25uZWN0ZWQgPSBmYWxzZTtcblx0dmFyIHNlc3Npb25JZCA9IG51bGw7XG5cdHZhciBwbHVnaW5IYW5kbGVzID0ge307XG5cdHZhciB0aGF0ID0gdGhpcztcblx0dmFyIHJldHJpZXMgPSAwO1xuXHR2YXIgdHJhbnNhY3Rpb25zID0ge307XG5cdGNyZWF0ZVNlc3Npb24oZ2F0ZXdheUNhbGxiYWNrcyk7XG5cblx0Ly8gUHVibGljIG1ldGhvZHNcblx0dGhpcy5nZXRTZXJ2ZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHNlcnZlcjsgfTtcblx0dGhpcy5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gY29ubmVjdGVkOyB9O1xuXHR0aGlzLnJlY29ubmVjdCA9IGZ1bmN0aW9uKGNhbGxiYWNrcykge1xuXHRcdGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcblx0XHRjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcblx0XHRjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcblx0XHRjYWxsYmFja3NbXCJyZWNvbm5lY3RcIl0gPSB0cnVlO1xuXHRcdGNyZWF0ZVNlc3Npb24oY2FsbGJhY2tzKTtcblx0fTtcblx0dGhpcy5nZXRTZXNzaW9uSWQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHNlc3Npb25JZDsgfTtcblx0dGhpcy5nZXRJbmZvID0gZnVuY3Rpb24oY2FsbGJhY2tzKSB7IGdldEluZm8oY2FsbGJhY2tzKTsgfTtcblx0dGhpcy5kZXN0cm95ID0gZnVuY3Rpb24oY2FsbGJhY2tzKSB7IGRlc3Ryb3lTZXNzaW9uKGNhbGxiYWNrcyk7IH07XG5cdHRoaXMuYXR0YWNoID0gZnVuY3Rpb24oY2FsbGJhY2tzKSB7IGNyZWF0ZUhhbmRsZShjYWxsYmFja3MpOyB9O1xuXG5cdGZ1bmN0aW9uIGV2ZW50SGFuZGxlcigpIHtcblx0XHRpZihzZXNzaW9uSWQgPT0gbnVsbClcblx0XHRcdHJldHVybjtcblx0XHRKYW51cy5kZWJ1ZygnTG9uZyBwb2xsLi4uJyk7XG5cdFx0aWYoIWNvbm5lY3RlZCkge1xuXHRcdFx0SmFudXMud2FybihcIklzIHRoZSBzZXJ2ZXIgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBsb25ncG9sbCA9IHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkICsgXCI/cmlkPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0aWYobWF4ZXYpXG5cdFx0XHRsb25ncG9sbCA9IGxvbmdwb2xsICsgXCImbWF4ZXY9XCIgKyBtYXhldjtcblx0XHRpZih0b2tlbilcblx0XHRcdGxvbmdwb2xsID0gbG9uZ3BvbGwgKyBcIiZ0b2tlbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0b2tlbik7XG5cdFx0aWYoYXBpc2VjcmV0KVxuXHRcdFx0bG9uZ3BvbGwgPSBsb25ncG9sbCArIFwiJmFwaXNlY3JldD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhcGlzZWNyZXQpO1xuXHRcdEphbnVzLmh0dHBBUElDYWxsKGxvbmdwb2xsLCB7XG5cdFx0XHR2ZXJiOiAnR0VUJyxcblx0XHRcdHdpdGhDcmVkZW50aWFsczogd2l0aENyZWRlbnRpYWxzLFxuXHRcdFx0c3VjY2VzczogaGFuZGxlRXZlbnQsXG5cdFx0XHR0aW1lb3V0OiBsb25nUG9sbFRpbWVvdXQsXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24odGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0SmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOlwiLCBlcnJvclRocm93bik7XG5cdFx0XHRcdHJldHJpZXMrKztcblx0XHRcdFx0aWYocmV0cmllcyA+IDMpIHtcblx0XHRcdFx0XHQvLyBEaWQgd2UganVzdCBsb3NlIHRoZSBzZXJ2ZXI/IDotKFxuXHRcdFx0XHRcdGNvbm5lY3RlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGdhdGV3YXlDYWxsYmFja3MuZXJyb3IoXCJMb3N0IGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciAoaXMgaXQgZG93bj8pXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRldmVudEhhbmRsZXIoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIFByaXZhdGUgZXZlbnQgaGFuZGxlcjogdGhpcyB3aWxsIHRyaWdnZXIgcGx1Z2luIGNhbGxiYWNrcywgaWYgc2V0XG5cdGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGpzb24sIHNraXBUaW1lb3V0KSB7XG5cdFx0cmV0cmllcyA9IDA7XG5cdFx0aWYoIXdlYnNvY2tldHMgJiYgc2Vzc2lvbklkICE9PSB1bmRlZmluZWQgJiYgc2Vzc2lvbklkICE9PSBudWxsICYmIHNraXBUaW1lb3V0ICE9PSB0cnVlKVxuXHRcdFx0ZXZlbnRIYW5kbGVyKCk7XG5cdFx0aWYoIXdlYnNvY2tldHMgJiYgSmFudXMuaXNBcnJheShqc29uKSkge1xuXHRcdFx0Ly8gV2UgZ290IGFuIGFycmF5OiBpdCBtZWFucyB3ZSBwYXNzZWQgYSBtYXhldiA+IDEsIGl0ZXJhdGUgb24gYWxsIG9iamVjdHNcblx0XHRcdGZvcih2YXIgaT0wOyBpPGpzb24ubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aGFuZGxlRXZlbnQoanNvbltpXSwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJrZWVwYWxpdmVcIikge1xuXHRcdFx0Ly8gTm90aGluZyBoYXBwZW5lZFxuXHRcdFx0SmFudXMudmRlYnVnKFwiR290IGEga2VlcGFsaXZlIG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwic2VydmVyX2luZm9cIikge1xuXHRcdFx0Ly8gSnVzdCBpbmZvIG9uIHRoZSBKYW51cyBpbnN0YW5jZVxuXHRcdFx0SmFudXMuZGVidWcoXCJHb3QgaW5mbyBvbiB0aGUgSmFudXMgaW5zdGFuY2VcIik7XG5cdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdGNvbnN0IHRyYW5zYWN0aW9uID0ganNvbltcInRyYW5zYWN0aW9uXCJdO1xuXHRcdFx0aWYodHJhbnNhY3Rpb24pIHtcblx0XHRcdFx0Y29uc3QgcmVwb3J0U3VjY2VzcyA9IHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl07XG5cdFx0XHRcdGlmKHJlcG9ydFN1Y2Nlc3MpXG5cdFx0XHRcdFx0cmVwb3J0U3VjY2Vzcyhqc29uKTtcblx0XHRcdFx0ZGVsZXRlIHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl07XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJhY2tcIikge1xuXHRcdFx0Ly8gSnVzdCBhbiBhY2ssIHdlIGNhbiBwcm9iYWJseSBpZ25vcmVcblx0XHRcdEphbnVzLmRlYnVnKFwiR290IGFuIGFjayBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0Y29uc3QgdHJhbnNhY3Rpb24gPSBqc29uW1widHJhbnNhY3Rpb25cIl07XG5cdFx0XHRpZih0cmFuc2FjdGlvbikge1xuXHRcdFx0XHRjb25zdCByZXBvcnRTdWNjZXNzID0gdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcblx0XHRcdFx0aWYocmVwb3J0U3VjY2Vzcylcblx0XHRcdFx0XHRyZXBvcnRTdWNjZXNzKGpzb24pO1xuXHRcdFx0XHRkZWxldGUgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcInN1Y2Nlc3NcIikge1xuXHRcdFx0Ly8gU3VjY2VzcyFcblx0XHRcdEphbnVzLmRlYnVnKFwiR290IGEgc3VjY2VzcyBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0Y29uc3QgdHJhbnNhY3Rpb24gPSBqc29uW1widHJhbnNhY3Rpb25cIl07XG5cdFx0XHRpZih0cmFuc2FjdGlvbikge1xuXHRcdFx0XHRjb25zdCByZXBvcnRTdWNjZXNzID0gdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcblx0XHRcdFx0aWYocmVwb3J0U3VjY2Vzcylcblx0XHRcdFx0XHRyZXBvcnRTdWNjZXNzKGpzb24pO1xuXHRcdFx0XHRkZWxldGUgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcInRyaWNrbGVcIikge1xuXHRcdFx0Ly8gV2UgZ290IGEgdHJpY2tsZSBjYW5kaWRhdGUgZnJvbSBKYW51c1xuXHRcdFx0Y29uc3Qgc2VuZGVyID0ganNvbltcInNlbmRlclwiXTtcblx0XHRcdGlmKCFzZW5kZXIpIHtcblx0XHRcdFx0SmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG5cdFx0XHRpZighcGx1Z2luSGFuZGxlKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGNhbmRpZGF0ZSA9IGpzb25bXCJjYW5kaWRhdGVcIl07XG5cdFx0XHRKYW51cy5kZWJ1ZyhcIkdvdCBhIHRyaWNrbGVkIGNhbmRpZGF0ZSBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdEphbnVzLmRlYnVnKGNhbmRpZGF0ZSk7XG5cdFx0XHR2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuXHRcdFx0aWYoY29uZmlnLnBjICYmIGNvbmZpZy5yZW1vdGVTZHApIHtcblx0XHRcdFx0Ly8gQWRkIGNhbmRpZGF0ZSByaWdodCBub3dcblx0XHRcdFx0SmFudXMuZGVidWcoXCJBZGRpbmcgcmVtb3RlIGNhbmRpZGF0ZTpcIiwgY2FuZGlkYXRlKTtcblx0XHRcdFx0aWYoIWNhbmRpZGF0ZSB8fCBjYW5kaWRhdGUuY29tcGxldGVkID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0Ly8gZW5kLW9mLWNhbmRpZGF0ZXNcblx0XHRcdFx0XHRjb25maWcucGMuYWRkSWNlQ2FuZGlkYXRlKEphbnVzLmVuZE9mQ2FuZGlkYXRlcyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gTmV3IGNhbmRpZGF0ZVxuXHRcdFx0XHRcdGNvbmZpZy5wYy5hZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gV2UgZGlkbid0IGRvIHNldFJlbW90ZURlc2NyaXB0aW9uICh0cmlja2xlIGdvdCBoZXJlIGJlZm9yZSB0aGUgb2ZmZXI/KVxuXHRcdFx0XHRKYW51cy5kZWJ1ZyhcIldlIGRpZG4ndCBkbyBzZXRSZW1vdGVEZXNjcmlwdGlvbiAodHJpY2tsZSBnb3QgaGVyZSBiZWZvcmUgdGhlIG9mZmVyPyksIGNhY2hpbmcgY2FuZGlkYXRlXCIpO1xuXHRcdFx0XHRpZighY29uZmlnLmNhbmRpZGF0ZXMpXG5cdFx0XHRcdFx0Y29uZmlnLmNhbmRpZGF0ZXMgPSBbXTtcblx0XHRcdFx0Y29uZmlnLmNhbmRpZGF0ZXMucHVzaChjYW5kaWRhdGUpO1xuXHRcdFx0XHRKYW51cy5kZWJ1Zyhjb25maWcuY2FuZGlkYXRlcyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJ3ZWJydGN1cFwiKSB7XG5cdFx0XHQvLyBUaGUgUGVlckNvbm5lY3Rpb24gd2l0aCB0aGUgc2VydmVyIGlzIHVwISBOb3RpZnkgdGhpc1xuXHRcdFx0SmFudXMuZGVidWcoXCJHb3QgYSB3ZWJydGN1cCBldmVudCBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0Y29uc3Qgc2VuZGVyID0ganNvbltcInNlbmRlclwiXTtcblx0XHRcdGlmKCFzZW5kZXIpIHtcblx0XHRcdFx0SmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG5cdFx0XHRpZighcGx1Z2luSGFuZGxlKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0cGx1Z2luSGFuZGxlLndlYnJ0Y1N0YXRlKHRydWUpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwiaGFuZ3VwXCIpIHtcblx0XHRcdC8vIEEgcGx1Z2luIGFza2VkIHRoZSBjb3JlIHRvIGhhbmd1cCBhIFBlZXJDb25uZWN0aW9uIG9uIG9uZSBvZiBvdXIgaGFuZGxlc1xuXHRcdFx0SmFudXMuZGVidWcoXCJHb3QgYSBoYW5ndXAgZXZlbnQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG5cdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdGNvbnN0IHNlbmRlciA9IGpzb25bXCJzZW5kZXJcIl07XG5cdFx0XHRpZighc2VuZGVyKSB7XG5cdFx0XHRcdEphbnVzLndhcm4oXCJNaXNzaW5nIHNlbmRlci4uLlwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1tzZW5kZXJdO1xuXHRcdFx0aWYoIXBsdWdpbkhhbmRsZSkge1xuXHRcdFx0XHRKYW51cy5kZWJ1ZyhcIlRoaXMgaGFuZGxlIGlzIG5vdCBhdHRhY2hlZCB0byB0aGlzIHNlc3Npb25cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHBsdWdpbkhhbmRsZS53ZWJydGNTdGF0ZShmYWxzZSwganNvbltcInJlYXNvblwiXSk7XG5cdFx0XHRwbHVnaW5IYW5kbGUuaGFuZ3VwKCk7XG5cdFx0fSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJkZXRhY2hlZFwiKSB7XG5cdFx0XHQvLyBBIHBsdWdpbiBhc2tlZCB0aGUgY29yZSB0byBkZXRhY2ggb25lIG9mIG91ciBoYW5kbGVzXG5cdFx0XHRKYW51cy5kZWJ1ZyhcIkdvdCBhIGRldGFjaGVkIGV2ZW50IG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuXHRcdFx0SmFudXMuZGVidWcoanNvbik7XG5cdFx0XHRjb25zdCBzZW5kZXIgPSBqc29uW1wic2VuZGVyXCJdO1xuXHRcdFx0aWYoIXNlbmRlcikge1xuXHRcdFx0XHRKYW51cy53YXJuKFwiTWlzc2luZyBzZW5kZXIuLi5cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbc2VuZGVyXTtcblx0XHRcdGlmKCFwbHVnaW5IYW5kbGUpIHtcblx0XHRcdFx0Ly8gRG9uJ3Qgd2FybiBoZXJlIGJlY2F1c2UgZGVzdHJveUhhbmRsZSBjYXVzZXMgdGhpcyBzaXR1YXRpb24uXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHBsdWdpbkhhbmRsZS5vbmRldGFjaGVkKCk7XG5cdFx0XHRwbHVnaW5IYW5kbGUuZGV0YWNoKCk7XG5cdFx0fSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJtZWRpYVwiKSB7XG5cdFx0XHQvLyBNZWRpYSBzdGFydGVkL3N0b3BwZWQgZmxvd2luZ1xuXHRcdFx0SmFudXMuZGVidWcoXCJHb3QgYSBtZWRpYSBldmVudCBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0Y29uc3Qgc2VuZGVyID0ganNvbltcInNlbmRlclwiXTtcblx0XHRcdGlmKCFzZW5kZXIpIHtcblx0XHRcdFx0SmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG5cdFx0XHRpZighcGx1Z2luSGFuZGxlKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0cGx1Z2luSGFuZGxlLm1lZGlhU3RhdGUoanNvbltcInR5cGVcIl0sIGpzb25bXCJyZWNlaXZpbmdcIl0pO1xuXHRcdH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwic2xvd2xpbmtcIikge1xuXHRcdFx0SmFudXMuZGVidWcoXCJHb3QgYSBzbG93bGluayBldmVudCBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0Ly8gVHJvdWJsZSB1cGxpbmsgb3IgZG93bmxpbmtcblx0XHRcdGNvbnN0IHNlbmRlciA9IGpzb25bXCJzZW5kZXJcIl07XG5cdFx0XHRpZighc2VuZGVyKSB7XG5cdFx0XHRcdEphbnVzLndhcm4oXCJNaXNzaW5nIHNlbmRlci4uLlwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1tzZW5kZXJdO1xuXHRcdFx0aWYoIXBsdWdpbkhhbmRsZSkge1xuXHRcdFx0XHRKYW51cy5kZWJ1ZyhcIlRoaXMgaGFuZGxlIGlzIG5vdCBhdHRhY2hlZCB0byB0aGlzIHNlc3Npb25cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHBsdWdpbkhhbmRsZS5zbG93TGluayhqc29uW1widXBsaW5rXCJdLCBqc29uW1wibG9zdFwiXSk7XG5cdFx0fSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJlcnJvclwiKSB7XG5cdFx0XHQvLyBPb3BzLCBzb21ldGhpbmcgd3JvbmcgaGFwcGVuZWRcblx0XHRcdEphbnVzLmVycm9yKFwiT29vcHM6IFwiICsganNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1x0Ly8gRklYTUVcblx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0dmFyIHRyYW5zYWN0aW9uID0ganNvbltcInRyYW5zYWN0aW9uXCJdO1xuXHRcdFx0aWYodHJhbnNhY3Rpb24pIHtcblx0XHRcdFx0dmFyIHJlcG9ydFN1Y2Nlc3MgPSB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25dO1xuXHRcdFx0XHRpZihyZXBvcnRTdWNjZXNzKSB7XG5cdFx0XHRcdFx0cmVwb3J0U3VjY2Vzcyhqc29uKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkZWxldGUgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcImV2ZW50XCIpIHtcblx0XHRcdEphbnVzLmRlYnVnKFwiR290IGEgcGx1Z2luIGV2ZW50IG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuXHRcdFx0SmFudXMuZGVidWcoanNvbik7XG5cdFx0XHRjb25zdCBzZW5kZXIgPSBqc29uW1wic2VuZGVyXCJdO1xuXHRcdFx0aWYoIXNlbmRlcikge1xuXHRcdFx0XHRKYW51cy53YXJuKFwiTWlzc2luZyBzZW5kZXIuLi5cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHZhciBwbHVnaW5kYXRhID0ganNvbltcInBsdWdpbmRhdGFcIl07XG5cdFx0XHRpZighcGx1Z2luZGF0YSkge1xuXHRcdFx0XHRKYW51cy53YXJuKFwiTWlzc2luZyBwbHVnaW5kYXRhLi4uXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRKYW51cy5kZWJ1ZyhcIiAgLS0gRXZlbnQgaXMgY29taW5nIGZyb20gXCIgKyBzZW5kZXIgKyBcIiAoXCIgKyBwbHVnaW5kYXRhW1wicGx1Z2luXCJdICsgXCIpXCIpO1xuXHRcdFx0dmFyIGRhdGEgPSBwbHVnaW5kYXRhW1wiZGF0YVwiXTtcblx0XHRcdEphbnVzLmRlYnVnKGRhdGEpO1xuXHRcdFx0Y29uc3QgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1tzZW5kZXJdO1xuXHRcdFx0aWYoIXBsdWdpbkhhbmRsZSkge1xuXHRcdFx0XHRKYW51cy53YXJuKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGpzZXAgPSBqc29uW1wianNlcFwiXTtcblx0XHRcdGlmKGpzZXApIHtcblx0XHRcdFx0SmFudXMuZGVidWcoXCJIYW5kbGluZyBTRFAgYXMgd2VsbC4uLlwiKTtcblx0XHRcdFx0SmFudXMuZGVidWcoanNlcCk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgY2FsbGJhY2sgPSBwbHVnaW5IYW5kbGUub25tZXNzYWdlO1xuXHRcdFx0aWYoY2FsbGJhY2spIHtcblx0XHRcdFx0SmFudXMuZGVidWcoXCJOb3RpZnlpbmcgYXBwbGljYXRpb24uLi5cIik7XG5cdFx0XHRcdC8vIFNlbmQgdG8gY2FsbGJhY2sgc3BlY2lmaWVkIHdoZW4gYXR0YWNoaW5nIHBsdWdpbiBoYW5kbGVcblx0XHRcdFx0Y2FsbGJhY2soZGF0YSwganNlcCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBTZW5kIHRvIGdlbmVyaWMgY2FsbGJhY2sgKD8pXG5cdFx0XHRcdEphbnVzLmRlYnVnKFwiTm8gcHJvdmlkZWQgbm90aWZpY2F0aW9uIGNhbGxiYWNrXCIpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwidGltZW91dFwiKSB7XG5cdFx0XHRKYW51cy5lcnJvcihcIlRpbWVvdXQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG5cdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdGlmICh3ZWJzb2NrZXRzKSB7XG5cdFx0XHRcdHdzLmNsb3NlKDM1MDQsIFwiR2F0ZXdheSB0aW1lb3V0XCIpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRKYW51cy53YXJuKFwiVW5rbm93biBtZXNzYWdlL2V2ZW50ICAnXCIgKyBqc29uW1wiamFudXNcIl0gKyBcIicgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG5cdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHR9XG5cdH1cblxuXHQvLyBQcml2YXRlIGhlbHBlciB0byBzZW5kIGtlZXAtYWxpdmUgbWVzc2FnZXMgb24gV2ViU29ja2V0c1xuXHRmdW5jdGlvbiBrZWVwQWxpdmUoKSB7XG5cdFx0aWYoIXNlcnZlciB8fCAhd2Vic29ja2V0cyB8fCAhY29ubmVjdGVkKVxuXHRcdFx0cmV0dXJuO1xuXHRcdHdzS2VlcGFsaXZlVGltZW91dElkID0gc2V0VGltZW91dChrZWVwQWxpdmUsIGtlZXBBbGl2ZVBlcmlvZCk7XG5cdFx0dmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJrZWVwYWxpdmVcIiwgXCJzZXNzaW9uX2lkXCI6IHNlc3Npb25JZCwgXCJ0cmFuc2FjdGlvblwiOiBKYW51cy5yYW5kb21TdHJpbmcoMTIpIH07XG5cdFx0aWYodG9rZW4pXG5cdFx0XHRyZXF1ZXN0W1widG9rZW5cIl0gPSB0b2tlbjtcblx0XHRpZihhcGlzZWNyZXQpXG5cdFx0XHRyZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuXHRcdHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxdWVzdCkpO1xuXHR9XG5cblx0Ly8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIGEgc2Vzc2lvblxuXHRmdW5jdGlvbiBjcmVhdGVTZXNzaW9uKGNhbGxiYWNrcykge1xuXHRcdHZhciB0cmFuc2FjdGlvbiA9IEphbnVzLnJhbmRvbVN0cmluZygxMik7XG5cdFx0dmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJjcmVhdGVcIiwgXCJ0cmFuc2FjdGlvblwiOiB0cmFuc2FjdGlvbiB9O1xuXHRcdGlmKGNhbGxiYWNrc1tcInJlY29ubmVjdFwiXSkge1xuXHRcdFx0Ly8gV2UncmUgcmVjb25uZWN0aW5nLCBjbGFpbSB0aGUgc2Vzc2lvblxuXHRcdFx0Y29ubmVjdGVkID0gZmFsc2U7XG5cdFx0XHRyZXF1ZXN0W1wiamFudXNcIl0gPSBcImNsYWltXCI7XG5cdFx0XHRyZXF1ZXN0W1wic2Vzc2lvbl9pZFwiXSA9IHNlc3Npb25JZDtcblx0XHRcdC8vIElmIHdlIHdlcmUgdXNpbmcgd2Vic29ja2V0cywgaWdub3JlIHRoZSBvbGQgY29ubmVjdGlvblxuXHRcdFx0aWYod3MpIHtcblx0XHRcdFx0d3Mub25vcGVuID0gbnVsbDtcblx0XHRcdFx0d3Mub25lcnJvciA9IG51bGw7XG5cdFx0XHRcdHdzLm9uY2xvc2UgPSBudWxsO1xuXHRcdFx0XHRpZih3c0tlZXBhbGl2ZVRpbWVvdXRJZCkge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dCh3c0tlZXBhbGl2ZVRpbWVvdXRJZCk7XG5cdFx0XHRcdFx0d3NLZWVwYWxpdmVUaW1lb3V0SWQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHRva2VuKVxuXHRcdFx0cmVxdWVzdFtcInRva2VuXCJdID0gdG9rZW47XG5cdFx0aWYoYXBpc2VjcmV0KVxuXHRcdFx0cmVxdWVzdFtcImFwaXNlY3JldFwiXSA9IGFwaXNlY3JldDtcblx0XHRpZighc2VydmVyICYmIEphbnVzLmlzQXJyYXkoc2VydmVycykpIHtcblx0XHRcdC8vIFdlIHN0aWxsIG5lZWQgdG8gZmluZCBhIHdvcmtpbmcgc2VydmVyIGZyb20gdGhlIGxpc3Qgd2Ugd2VyZSBnaXZlblxuXHRcdFx0c2VydmVyID0gc2VydmVyc1tzZXJ2ZXJzSW5kZXhdO1xuXHRcdFx0aWYoc2VydmVyLmluZGV4T2YoXCJ3c1wiKSA9PT0gMCkge1xuXHRcdFx0XHR3ZWJzb2NrZXRzID0gdHJ1ZTtcblx0XHRcdFx0SmFudXMubG9nKFwiU2VydmVyICNcIiArIChzZXJ2ZXJzSW5kZXgrMSkgKyBcIjogdHJ5aW5nIFdlYlNvY2tldHMgdG8gY29udGFjdCBKYW51cyAoXCIgKyBzZXJ2ZXIgKyBcIilcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3ZWJzb2NrZXRzID0gZmFsc2U7XG5cdFx0XHRcdEphbnVzLmxvZyhcIlNlcnZlciAjXCIgKyAoc2VydmVyc0luZGV4KzEpICsgXCI6IHRyeWluZyBSRVNUIEFQSSB0byBjb250YWN0IEphbnVzIChcIiArIHNlcnZlciArIFwiKVwiKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYod2Vic29ja2V0cykge1xuXHRcdFx0d3MgPSBKYW51cy5uZXdXZWJTb2NrZXQoc2VydmVyLCAnamFudXMtcHJvdG9jb2wnKTtcblx0XHRcdHdzSGFuZGxlcnMgPSB7XG5cdFx0XHRcdCdlcnJvcic6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdEphbnVzLmVycm9yKFwiRXJyb3IgY29ubmVjdGluZyB0byB0aGUgSmFudXMgV2ViU29ja2V0cyBzZXJ2ZXIuLi4gXCIgKyBzZXJ2ZXIpO1xuXHRcdFx0XHRcdGlmIChKYW51cy5pc0FycmF5KHNlcnZlcnMpICYmICFjYWxsYmFja3NbXCJyZWNvbm5lY3RcIl0pIHtcblx0XHRcdFx0XHRcdHNlcnZlcnNJbmRleCsrO1xuXHRcdFx0XHRcdFx0aWYgKHNlcnZlcnNJbmRleCA9PT0gc2VydmVycy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Ly8gV2UgdHJpZWQgYWxsIHRoZSBzZXJ2ZXJzIHRoZSB1c2VyIGdhdmUgdXMgYW5kIHRoZXkgYWxsIGZhaWxlZFxuXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJFcnJvciBjb25uZWN0aW5nIHRvIGFueSBvZiB0aGUgcHJvdmlkZWQgSmFudXMgc2VydmVyczogSXMgdGhlIHNlcnZlciBkb3duP1wiKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gTGV0J3MgdHJ5IHRoZSBuZXh0IHNlcnZlclxuXHRcdFx0XHRcdFx0c2VydmVyID0gbnVsbDtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGNyZWF0ZVNlc3Npb24oY2FsbGJhY2tzKTtcblx0XHRcdFx0XHRcdH0sIDIwMCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIkVycm9yIGNvbm5lY3RpbmcgdG8gdGhlIEphbnVzIFdlYlNvY2tldHMgc2VydmVyOiBJcyB0aGUgc2VydmVyIGRvd24/XCIpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdvcGVuJzogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Ly8gV2UgbmVlZCB0byBiZSBub3RpZmllZCBhYm91dCB0aGUgc3VjY2Vzc1xuXHRcdFx0XHRcdHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl0gPSBmdW5jdGlvbihqc29uKSB7XG5cdFx0XHRcdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdFx0XHRcdGlmIChqc29uW1wiamFudXNcIl0gIT09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmVycm9yKFwiT29vcHM6IFwiICsganNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1x0Ly8gRklYTUVcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR3c0tlZXBhbGl2ZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoa2VlcEFsaXZlLCBrZWVwQWxpdmVQZXJpb2QpO1xuXHRcdFx0XHRcdFx0Y29ubmVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHNlc3Npb25JZCA9IGpzb25bXCJzZXNzaW9uX2lkXCJdID8ganNvbltcInNlc3Npb25faWRcIl0gOiBqc29uLmRhdGFbXCJpZFwiXTtcblx0XHRcdFx0XHRcdGlmKGNhbGxiYWNrc1tcInJlY29ubmVjdFwiXSkge1xuXHRcdFx0XHRcdFx0XHRKYW51cy5sb2coXCJDbGFpbWVkIHNlc3Npb246IFwiICsgc2Vzc2lvbklkKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIkNyZWF0ZWQgc2Vzc2lvbjogXCIgKyBzZXNzaW9uSWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMuc2Vzc2lvbnNbc2Vzc2lvbklkXSA9IHRoYXQ7XG5cdFx0XHRcdFx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J21lc3NhZ2UnOiBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdGhhbmRsZUV2ZW50KEpTT04ucGFyc2UoZXZlbnQuZGF0YSkpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdjbG9zZSc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICghc2VydmVyIHx8ICFjb25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29ubmVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0Ly8gRklYTUUgV2hhdCBpZiB0aGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBwYWdlIGlzIGNsb3NlZD9cblx0XHRcdFx0XHRnYXRld2F5Q2FsbGJhY2tzLmVycm9yKFwiTG9zdCBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2ZXIgKGlzIGl0IGRvd24/KVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yKHZhciBldmVudE5hbWUgaW4gd3NIYW5kbGVycykge1xuXHRcdFx0XHR3cy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgd3NIYW5kbGVyc1tldmVudE5hbWVdKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRKYW51cy5odHRwQVBJQ2FsbChzZXJ2ZXIsIHtcblx0XHRcdHZlcmI6ICdQT1NUJyxcblx0XHRcdHdpdGhDcmVkZW50aWFsczogd2l0aENyZWRlbnRpYWxzLFxuXHRcdFx0Ym9keTogcmVxdWVzdCxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGpzb24pIHtcblx0XHRcdFx0SmFudXMuZGVidWcoanNvbik7XG5cdFx0XHRcdGlmKGpzb25bXCJqYW51c1wiXSAhPT0gXCJzdWNjZXNzXCIpIHtcblx0XHRcdFx0XHRKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG5cdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25uZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRzZXNzaW9uSWQgPSBqc29uW1wic2Vzc2lvbl9pZFwiXSA/IGpzb25bXCJzZXNzaW9uX2lkXCJdIDoganNvbi5kYXRhW1wiaWRcIl07XG5cdFx0XHRcdGlmKGNhbGxiYWNrc1tcInJlY29ubmVjdFwiXSkge1xuXHRcdFx0XHRcdEphbnVzLmxvZyhcIkNsYWltZWQgc2Vzc2lvbjogXCIgKyBzZXNzaW9uSWQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdEphbnVzLmxvZyhcIkNyZWF0ZWQgc2Vzc2lvbjogXCIgKyBzZXNzaW9uSWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdEphbnVzLnNlc3Npb25zW3Nlc3Npb25JZF0gPSB0aGF0O1xuXHRcdFx0XHRldmVudEhhbmRsZXIoKTtcblx0XHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24odGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0SmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOlwiLCBlcnJvclRocm93bik7XHQvLyBGSVhNRVxuXHRcdFx0XHRpZihKYW51cy5pc0FycmF5KHNlcnZlcnMpICYmICFjYWxsYmFja3NbXCJyZWNvbm5lY3RcIl0pIHtcblx0XHRcdFx0XHRzZXJ2ZXJzSW5kZXgrKztcblx0XHRcdFx0XHRpZihzZXJ2ZXJzSW5kZXggPT09IHNlcnZlcnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQvLyBXZSB0cmllZCBhbGwgdGhlIHNlcnZlcnMgdGhlIHVzZXIgZ2F2ZSB1cyBhbmQgdGhleSBhbGwgZmFpbGVkXG5cdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJFcnJvciBjb25uZWN0aW5nIHRvIGFueSBvZiB0aGUgcHJvdmlkZWQgSmFudXMgc2VydmVyczogSXMgdGhlIHNlcnZlciBkb3duP1wiKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gTGV0J3MgdHJ5IHRoZSBuZXh0IHNlcnZlclxuXHRcdFx0XHRcdHNlcnZlciA9IG51bGw7XG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHsgY3JlYXRlU2Vzc2lvbihjYWxsYmFja3MpOyB9LCAyMDApO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihlcnJvclRocm93biA9PT0gXCJcIilcblx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBJcyB0aGUgc2VydmVyIGRvd24/XCIpO1xuXHRcdFx0XHRlbHNlIGlmIChlcnJvclRocm93biAmJiBlcnJvclRocm93bi5lcnJvcilcblx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBcIiArIGVycm9yVGhyb3duLmVycm9yLm1lc3NhZ2UpO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKHRleHRTdGF0dXMgKyBcIjogXCIgKyBlcnJvclRocm93bik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBQcml2YXRlIG1ldGhvZCB0byBnZXQgaW5mbyBvbiB0aGUgc2VydmVyXG5cdGZ1bmN0aW9uIGdldEluZm8oY2FsbGJhY2tzKSB7XG5cdFx0Y2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuXHRcdC8vIEZJWE1FIFRoaXMgbWV0aG9kIHRyaWdnZXJzIGEgc3VjY2VzcyBldmVuIHdoZW4gd2UgZmFpbFxuXHRcdGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuXHRcdEphbnVzLmxvZyhcIkdldHRpbmcgaW5mbyBvbiBKYW51cyBpbnN0YW5jZVwiKTtcblx0XHRpZighY29ubmVjdGVkKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSXMgdGhlIHNlcnZlciBkb3duPyAoY29ubmVjdGVkPWZhbHNlKVwiKTtcblx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIklzIHRoZSBzZXJ2ZXIgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8vIFdlIGp1c3QgbmVlZCB0byBzZW5kIGFuIFwiaW5mb1wiIHJlcXVlc3Rcblx0XHR2YXIgdHJhbnNhY3Rpb24gPSBKYW51cy5yYW5kb21TdHJpbmcoMTIpO1xuXHRcdHZhciByZXF1ZXN0ID0geyBcImphbnVzXCI6IFwiaW5mb1wiLCBcInRyYW5zYWN0aW9uXCI6IHRyYW5zYWN0aW9uIH07XG5cdFx0aWYodG9rZW4pXG5cdFx0XHRyZXF1ZXN0W1widG9rZW5cIl0gPSB0b2tlbjtcblx0XHRpZihhcGlzZWNyZXQpXG5cdFx0XHRyZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuXHRcdGlmKHdlYnNvY2tldHMpIHtcblx0XHRcdHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl0gPSBmdW5jdGlvbihqc29uKSB7XG5cdFx0XHRcdEphbnVzLmxvZyhcIlNlcnZlciBpbmZvOlwiKTtcblx0XHRcdFx0SmFudXMuZGVidWcoanNvbik7XG5cdFx0XHRcdGlmKGpzb25bXCJqYW51c1wiXSAhPT0gXCJzZXJ2ZXJfaW5mb1wiKSB7XG5cdFx0XHRcdFx0SmFudXMuZXJyb3IoXCJPb29wczogXCIgKyBqc29uW1wiZXJyb3JcIl0uY29kZSArIFwiIFwiICsganNvbltcImVycm9yXCJdLnJlYXNvbik7XHQvLyBGSVhNRVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKGpzb24pO1xuXHRcdFx0fVxuXHRcdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdEphbnVzLmh0dHBBUElDYWxsKHNlcnZlciwge1xuXHRcdFx0dmVyYjogJ1BPU1QnLFxuXHRcdFx0d2l0aENyZWRlbnRpYWxzOiB3aXRoQ3JlZGVudGlhbHMsXG5cdFx0XHRib2R5OiByZXF1ZXN0LFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oanNvbikge1xuXHRcdFx0XHRKYW51cy5sb2coXCJTZXJ2ZXIgaW5mbzpcIik7XG5cdFx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0XHRpZihqc29uW1wiamFudXNcIl0gIT09IFwic2VydmVyX2luZm9cIikge1xuXHRcdFx0XHRcdEphbnVzLmVycm9yKFwiT29vcHM6IFwiICsganNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1x0Ly8gRklYTUVcblx0XHRcdFx0fVxuXHRcdFx0XHRjYWxsYmFja3Muc3VjY2Vzcyhqc29uKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24odGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0SmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOlwiLCBlcnJvclRocm93bik7XHQvLyBGSVhNRVxuXHRcdFx0XHRpZihlcnJvclRocm93biA9PT0gXCJcIilcblx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBJcyB0aGUgc2VydmVyIGRvd24/XCIpO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKHRleHRTdGF0dXMgKyBcIjogXCIgKyBlcnJvclRocm93bik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBQcml2YXRlIG1ldGhvZCB0byBkZXN0cm95IGEgc2Vzc2lvblxuXHRmdW5jdGlvbiBkZXN0cm95U2Vzc2lvbihjYWxsYmFja3MpIHtcblx0XHRjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG5cdFx0Ly8gRklYTUUgVGhpcyBtZXRob2QgdHJpZ2dlcnMgYSBzdWNjZXNzIGV2ZW4gd2hlbiB3ZSBmYWlsXG5cdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG5cdFx0Y2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IEphbnVzLm5vb3A7XG5cdFx0dmFyIHVubG9hZCA9IChjYWxsYmFja3MudW5sb2FkID09PSB0cnVlKTtcblx0XHR2YXIgbm90aWZ5RGVzdHJveWVkID0gdHJ1ZTtcblx0XHRpZihjYWxsYmFja3Mubm90aWZ5RGVzdHJveWVkICE9PSB1bmRlZmluZWQgJiYgY2FsbGJhY2tzLm5vdGlmeURlc3Ryb3llZCAhPT0gbnVsbClcblx0XHRcdG5vdGlmeURlc3Ryb3llZCA9IChjYWxsYmFja3Mubm90aWZ5RGVzdHJveWVkID09PSB0cnVlKTtcblx0XHR2YXIgY2xlYW51cEhhbmRsZXMgPSAoY2FsbGJhY2tzLmNsZWFudXBIYW5kbGVzID09PSB0cnVlKTtcblx0XHRKYW51cy5sb2coXCJEZXN0cm95aW5nIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQgKyBcIiAodW5sb2FkPVwiICsgdW5sb2FkICsgXCIpXCIpO1xuXHRcdGlmKCFzZXNzaW9uSWQpIHtcblx0XHRcdEphbnVzLndhcm4oXCJObyBzZXNzaW9uIHRvIGRlc3Ryb3lcIik7XG5cdFx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHRcdFx0aWYobm90aWZ5RGVzdHJveWVkKVxuXHRcdFx0XHRnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3llZCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZihjbGVhbnVwSGFuZGxlcykge1xuXHRcdFx0Zm9yKHZhciBoYW5kbGVJZCBpbiBwbHVnaW5IYW5kbGVzKVxuXHRcdFx0XHRkZXN0cm95SGFuZGxlKGhhbmRsZUlkLCB7IG5vUmVxdWVzdDogdHJ1ZSB9KTtcblx0XHR9XG5cdFx0aWYoIWNvbm5lY3RlZCkge1xuXHRcdFx0SmFudXMud2FybihcIklzIHRoZSBzZXJ2ZXIgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG5cdFx0XHRzZXNzaW9uSWQgPSBudWxsO1xuXHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gTm8gbmVlZCB0byBkZXN0cm95IGFsbCBoYW5kbGVzIGZpcnN0LCBKYW51cyB3aWxsIGRvIHRoYXQgaXRzZWxmXG5cdFx0dmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJkZXN0cm95XCIsIFwidHJhbnNhY3Rpb25cIjogSmFudXMucmFuZG9tU3RyaW5nKDEyKSB9O1xuXHRcdGlmKHRva2VuKVxuXHRcdFx0cmVxdWVzdFtcInRva2VuXCJdID0gdG9rZW47XG5cdFx0aWYoYXBpc2VjcmV0KVxuXHRcdFx0cmVxdWVzdFtcImFwaXNlY3JldFwiXSA9IGFwaXNlY3JldDtcblx0XHRpZih1bmxvYWQpIHtcblx0XHRcdC8vIFdlJ3JlIHVubG9hZGluZyB0aGUgcGFnZTogdXNlIHNlbmRCZWFjb24gZm9yIEhUVFAgaW5zdGVhZCxcblx0XHRcdC8vIG9yIGp1c3QgY2xvc2UgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIGlmIHdlJ3JlIHVzaW5nIHRoYXRcblx0XHRcdGlmKHdlYnNvY2tldHMpIHtcblx0XHRcdFx0d3Mub25jbG9zZSA9IG51bGw7XG5cdFx0XHRcdHdzLmNsb3NlKCk7XG5cdFx0XHRcdHdzID0gbnVsbDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5hdmlnYXRvci5zZW5kQmVhY29uKHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkLCBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHR9XG5cdFx0XHRKYW51cy5sb2coXCJEZXN0cm95ZWQgc2Vzc2lvbjpcIik7XG5cdFx0XHRzZXNzaW9uSWQgPSBudWxsO1xuXHRcdFx0Y29ubmVjdGVkID0gZmFsc2U7XG5cdFx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHRcdFx0aWYobm90aWZ5RGVzdHJveWVkKVxuXHRcdFx0XHRnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3llZCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZih3ZWJzb2NrZXRzKSB7XG5cdFx0XHRyZXF1ZXN0W1wic2Vzc2lvbl9pZFwiXSA9IHNlc3Npb25JZDtcblxuXHRcdFx0dmFyIHVuYmluZFdlYlNvY2tldCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IodmFyIGV2ZW50TmFtZSBpbiB3c0hhbmRsZXJzKSB7XG5cdFx0XHRcdFx0d3MucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHdzSGFuZGxlcnNbZXZlbnROYW1lXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0d3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uVW5iaW5kTWVzc2FnZSk7XG5cdFx0XHRcdHdzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgb25VbmJpbmRFcnJvcik7XG5cdFx0XHRcdGlmKHdzS2VlcGFsaXZlVGltZW91dElkKSB7XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHdzS2VlcGFsaXZlVGltZW91dElkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR3cy5jbG9zZSgpO1xuXHRcdFx0fTtcblxuXHRcdFx0dmFyIG9uVW5iaW5kTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcdFx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuXHRcdFx0XHRpZihkYXRhLnNlc3Npb25faWQgPT0gcmVxdWVzdC5zZXNzaW9uX2lkICYmIGRhdGEudHJhbnNhY3Rpb24gPT0gcmVxdWVzdC50cmFuc2FjdGlvbikge1xuXHRcdFx0XHRcdHVuYmluZFdlYlNvY2tldCgpO1xuXHRcdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHRcdFx0aWYobm90aWZ5RGVzdHJveWVkKVxuXHRcdFx0XHRcdFx0Z2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHZhciBvblVuYmluZEVycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHVuYmluZFdlYlNvY2tldCgpO1xuXHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJGYWlsZWQgdG8gZGVzdHJveSB0aGUgc2VydmVyOiBJcyB0aGUgc2VydmVyIGRvd24/XCIpO1xuXHRcdFx0XHRpZihub3RpZnlEZXN0cm95ZWQpXG5cdFx0XHRcdFx0Z2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQoKTtcblx0XHRcdH07XG5cblx0XHRcdHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvblVuYmluZE1lc3NhZ2UpO1xuXHRcdFx0d3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvblVuYmluZEVycm9yKTtcblxuXHRcdFx0aWYgKHdzLnJlYWR5U3RhdGUgPT09IDEpIHtcblx0XHRcdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvblVuYmluZEVycm9yKCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0SmFudXMuaHR0cEFQSUNhbGwoc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQsIHtcblx0XHRcdHZlcmI6ICdQT1NUJyxcblx0XHRcdHdpdGhDcmVkZW50aWFsczogd2l0aENyZWRlbnRpYWxzLFxuXHRcdFx0Ym9keTogcmVxdWVzdCxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGpzb24pIHtcblx0XHRcdFx0SmFudXMubG9nKFwiRGVzdHJveWVkIHNlc3Npb246XCIpO1xuXHRcdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdFx0c2Vzc2lvbklkID0gbnVsbDtcblx0XHRcdFx0Y29ubmVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKGpzb25bXCJqYW51c1wiXSAhPT0gXCJzdWNjZXNzXCIpIHtcblx0XHRcdFx0XHRKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG5cdFx0XHRcdH1cblx0XHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdFx0aWYobm90aWZ5RGVzdHJveWVkKVxuXHRcdFx0XHRcdGdhdGV3YXlDYWxsYmFja3MuZGVzdHJveWVkKCk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdFx0XHRcdEphbnVzLmVycm9yKHRleHRTdGF0dXMgKyBcIjpcIiwgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcblx0XHRcdFx0Ly8gUmVzZXQgZXZlcnl0aGluZyBhbnl3YXlcblx0XHRcdFx0c2Vzc2lvbklkID0gbnVsbDtcblx0XHRcdFx0Y29ubmVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHRcdGlmKG5vdGlmeURlc3Ryb3llZClcblx0XHRcdFx0XHRnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3llZCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIGEgcGx1Z2luIGhhbmRsZVxuXHRmdW5jdGlvbiBjcmVhdGVIYW5kbGUoY2FsbGJhY2tzKSB7XG5cdFx0Y2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuXHRcdGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5kYXRhQ2hhbm5lbE9wdGlvbnMgPSBjYWxsYmFja3MuZGF0YUNoYW5uZWxPcHRpb25zIHx8IHsgb3JkZXJlZDogdHJ1ZSB9O1xuXHRcdGNhbGxiYWNrcy5jb25zZW50RGlhbG9nID0gKHR5cGVvZiBjYWxsYmFja3MuY29uc2VudERpYWxvZyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmNvbnNlbnREaWFsb2cgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5pY2VTdGF0ZSA9ICh0eXBlb2YgY2FsbGJhY2tzLmljZVN0YXRlID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuaWNlU3RhdGUgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5tZWRpYVN0YXRlID0gKHR5cGVvZiBjYWxsYmFja3MubWVkaWFTdGF0ZSA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLm1lZGlhU3RhdGUgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy53ZWJydGNTdGF0ZSA9ICh0eXBlb2YgY2FsbGJhY2tzLndlYnJ0Y1N0YXRlID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mud2VicnRjU3RhdGUgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5zbG93TGluayA9ICh0eXBlb2YgY2FsbGJhY2tzLnNsb3dMaW5rID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc2xvd0xpbmsgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbm1lc3NhZ2UgPSAodHlwZW9mIGNhbGxiYWNrcy5vbm1lc3NhZ2UgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5vbm1lc3NhZ2UgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbmxvY2Fsc3RyZWFtID0gKHR5cGVvZiBjYWxsYmFja3Mub25sb2NhbHN0cmVhbSA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLm9ubG9jYWxzdHJlYW0gOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbnJlbW90ZXN0cmVhbSA9ICh0eXBlb2YgY2FsbGJhY2tzLm9ucmVtb3Rlc3RyZWFtID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mub25yZW1vdGVzdHJlYW0gOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbmRhdGEgPSAodHlwZW9mIGNhbGxiYWNrcy5vbmRhdGEgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5vbmRhdGEgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbmRhdGFvcGVuID0gKHR5cGVvZiBjYWxsYmFja3Mub25kYXRhb3BlbiA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLm9uZGF0YW9wZW4gOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbmNsZWFudXAgPSAodHlwZW9mIGNhbGxiYWNrcy5vbmNsZWFudXAgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5vbmNsZWFudXAgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5vbmRldGFjaGVkID0gKHR5cGVvZiBjYWxsYmFja3Mub25kZXRhY2hlZCA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLm9uZGV0YWNoZWQgOiBKYW51cy5ub29wO1xuXHRcdGlmKCFjb25uZWN0ZWQpIHtcblx0XHRcdEphbnVzLndhcm4oXCJJcyB0aGUgc2VydmVyIGRvd24/IChjb25uZWN0ZWQ9ZmFsc2UpXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiSXMgdGhlIHNlcnZlciBkb3duPyAoY29ubmVjdGVkPWZhbHNlKVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIHBsdWdpbiA9IGNhbGxiYWNrcy5wbHVnaW47XG5cdFx0aWYoIXBsdWdpbikge1xuXHRcdFx0SmFudXMuZXJyb3IoXCJJbnZhbGlkIHBsdWdpblwiKTtcblx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgcGx1Z2luXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgb3BhcXVlSWQgPSBjYWxsYmFja3Mub3BhcXVlSWQ7XG5cdFx0dmFyIGxvb3BJbmRleCA9IGNhbGxiYWNrcy5sb29wSW5kZXg7XG5cdFx0dmFyIGhhbmRsZVRva2VuID0gY2FsbGJhY2tzLnRva2VuID8gY2FsbGJhY2tzLnRva2VuIDogdG9rZW47XG5cdFx0dmFyIHRyYW5zYWN0aW9uID0gSmFudXMucmFuZG9tU3RyaW5nKDEyKTtcblx0XHR2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcImF0dGFjaFwiLCBcInBsdWdpblwiOiBwbHVnaW4sIFwib3BhcXVlX2lkXCI6IG9wYXF1ZUlkLCBcImxvb3BfaW5kZXhcIjogbG9vcEluZGV4LCBcInRyYW5zYWN0aW9uXCI6IHRyYW5zYWN0aW9uIH07XG5cdFx0aWYoaGFuZGxlVG9rZW4pXG5cdFx0XHRyZXF1ZXN0W1widG9rZW5cIl0gPSBoYW5kbGVUb2tlbjtcblx0XHRpZihhcGlzZWNyZXQpXG5cdFx0XHRyZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuXHRcdGlmKHdlYnNvY2tldHMpIHtcblx0XHRcdHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl0gPSBmdW5jdGlvbihqc29uKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0XHRpZihqc29uW1wiamFudXNcIl0gIT09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0SmFudXMuZXJyb3IoXCJPb29wczogXCIgKyBqc29uW1wiZXJyb3JcIl0uY29kZSArIFwiIFwiICsganNvbltcImVycm9yXCJdLnJlYXNvbik7XHQvLyBGSVhNRVxuXHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGhhbmRsZUlkID0ganNvbi5kYXRhW1wiaWRcIl07XG5cdFx0XHRcdEphbnVzLmxvZyhcIkNyZWF0ZWQgaGFuZGxlOiBcIiArIGhhbmRsZUlkKTtcblx0XHRcdFx0dmFyIHBsdWdpbkhhbmRsZSA9XG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c2Vzc2lvbiA6IHRoYXQsXG5cdFx0XHRcdFx0XHRwbHVnaW4gOiBwbHVnaW4sXG5cdFx0XHRcdFx0XHRpZCA6IGhhbmRsZUlkLFxuXHRcdFx0XHRcdFx0dG9rZW4gOiBoYW5kbGVUb2tlbixcblx0XHRcdFx0XHRcdGRldGFjaGVkIDogZmFsc2UsXG5cdFx0XHRcdFx0XHR3ZWJydGNTdHVmZiA6IHtcblx0XHRcdFx0XHRcdFx0c3RhcnRlZCA6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRteVN0cmVhbSA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHN0cmVhbUV4dGVybmFsIDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHJlbW90ZVN0cmVhbSA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdG15U2RwIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0bWVkaWFDb25zdHJhaW50cyA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHBjIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0ZGF0YUNoYW5uZWxPcHRpb25zOiBjYWxsYmFja3MuZGF0YUNoYW5uZWxPcHRpb25zLFxuXHRcdFx0XHRcdFx0XHRkYXRhQ2hhbm5lbCA6IHt9LFxuXHRcdFx0XHRcdFx0XHRkdG1mU2VuZGVyIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0dHJpY2tsZSA6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGljZURvbmUgOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0dm9sdW1lIDoge1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lciA6IG51bGxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Yml0cmF0ZSA6IHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0YnNub3cgOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdGJzYmVmb3JlIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHR0c25vdyA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0dHNiZWZvcmUgOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVyIDogbnVsbFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Z2V0SWQgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGhhbmRsZUlkOyB9LFxuXHRcdFx0XHRcdFx0Z2V0UGx1Z2luIDogZnVuY3Rpb24oKSB7IHJldHVybiBwbHVnaW47IH0sXG5cdFx0XHRcdFx0XHRnZXRWb2x1bWUgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFZvbHVtZShoYW5kbGVJZCwgdHJ1ZSk7IH0sXG5cdFx0XHRcdFx0XHRnZXRSZW1vdGVWb2x1bWUgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFZvbHVtZShoYW5kbGVJZCwgdHJ1ZSk7IH0sXG5cdFx0XHRcdFx0XHRnZXRMb2NhbFZvbHVtZSA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Vm9sdW1lKGhhbmRsZUlkLCBmYWxzZSk7IH0sXG5cdFx0XHRcdFx0XHRpc0F1ZGlvTXV0ZWQgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGlzTXV0ZWQoaGFuZGxlSWQsIGZhbHNlKTsgfSxcblx0XHRcdFx0XHRcdG11dGVBdWRpbyA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXV0ZShoYW5kbGVJZCwgZmFsc2UsIHRydWUpOyB9LFxuXHRcdFx0XHRcdFx0dW5tdXRlQXVkaW8gOiBmdW5jdGlvbigpIHsgcmV0dXJuIG11dGUoaGFuZGxlSWQsIGZhbHNlLCBmYWxzZSk7IH0sXG5cdFx0XHRcdFx0XHRpc1ZpZGVvTXV0ZWQgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGlzTXV0ZWQoaGFuZGxlSWQsIHRydWUpOyB9LFxuXHRcdFx0XHRcdFx0bXV0ZVZpZGVvIDogZnVuY3Rpb24oKSB7IHJldHVybiBtdXRlKGhhbmRsZUlkLCB0cnVlLCB0cnVlKTsgfSxcblx0XHRcdFx0XHRcdHVubXV0ZVZpZGVvIDogZnVuY3Rpb24oKSB7IHJldHVybiBtdXRlKGhhbmRsZUlkLCB0cnVlLCBmYWxzZSk7IH0sXG5cdFx0XHRcdFx0XHRnZXRCaXRyYXRlIDogZnVuY3Rpb24oKSB7IHJldHVybiBnZXRCaXRyYXRlKGhhbmRsZUlkKTsgfSxcblx0XHRcdFx0XHRcdHNlbmQgOiBmdW5jdGlvbihjYWxsYmFja3MpIHsgc2VuZE1lc3NhZ2UoaGFuZGxlSWQsIGNhbGxiYWNrcyk7IH0sXG5cdFx0XHRcdFx0XHRkYXRhIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHNlbmREYXRhKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuXHRcdFx0XHRcdFx0ZHRtZiA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBzZW5kRHRtZihoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfSxcblx0XHRcdFx0XHRcdGNvbnNlbnREaWFsb2cgOiBjYWxsYmFja3MuY29uc2VudERpYWxvZyxcblx0XHRcdFx0XHRcdGljZVN0YXRlIDogY2FsbGJhY2tzLmljZVN0YXRlLFxuXHRcdFx0XHRcdFx0bWVkaWFTdGF0ZSA6IGNhbGxiYWNrcy5tZWRpYVN0YXRlLFxuXHRcdFx0XHRcdFx0d2VicnRjU3RhdGUgOiBjYWxsYmFja3Mud2VicnRjU3RhdGUsXG5cdFx0XHRcdFx0XHRzbG93TGluayA6IGNhbGxiYWNrcy5zbG93TGluayxcblx0XHRcdFx0XHRcdG9ubWVzc2FnZSA6IGNhbGxiYWNrcy5vbm1lc3NhZ2UsXG5cdFx0XHRcdFx0XHRjcmVhdGVPZmZlciA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBwcmVwYXJlV2VicnRjKGhhbmRsZUlkLCB0cnVlLCBjYWxsYmFja3MpOyB9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlQW5zd2VyIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHByZXBhcmVXZWJydGMoaGFuZGxlSWQsIGZhbHNlLCBjYWxsYmFja3MpOyB9LFxuXHRcdFx0XHRcdFx0aGFuZGxlUmVtb3RlSnNlcCA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBwcmVwYXJlV2VicnRjUGVlcihoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfSxcblx0XHRcdFx0XHRcdG9ubG9jYWxzdHJlYW0gOiBjYWxsYmFja3Mub25sb2NhbHN0cmVhbSxcblx0XHRcdFx0XHRcdG9ucmVtb3Rlc3RyZWFtIDogY2FsbGJhY2tzLm9ucmVtb3Rlc3RyZWFtLFxuXHRcdFx0XHRcdFx0b25kYXRhIDogY2FsbGJhY2tzLm9uZGF0YSxcblx0XHRcdFx0XHRcdG9uZGF0YW9wZW4gOiBjYWxsYmFja3Mub25kYXRhb3Blbixcblx0XHRcdFx0XHRcdG9uY2xlYW51cCA6IGNhbGxiYWNrcy5vbmNsZWFudXAsXG5cdFx0XHRcdFx0XHRvbmRldGFjaGVkIDogY2FsbGJhY2tzLm9uZGV0YWNoZWQsXG5cdFx0XHRcdFx0XHRoYW5ndXAgOiBmdW5jdGlvbihzZW5kUmVxdWVzdCkgeyBjbGVhbnVwV2VicnRjKGhhbmRsZUlkLCBzZW5kUmVxdWVzdCA9PT0gdHJ1ZSk7IH0sXG5cdFx0XHRcdFx0XHRkZXRhY2ggOiBmdW5jdGlvbihjYWxsYmFja3MpIHsgZGVzdHJveUhhbmRsZShoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdID0gcGx1Z2luSGFuZGxlO1xuXHRcdFx0XHRjYWxsYmFja3Muc3VjY2VzcyhwbHVnaW5IYW5kbGUpO1xuXHRcdFx0fTtcblx0XHRcdHJlcXVlc3RbXCJzZXNzaW9uX2lkXCJdID0gc2Vzc2lvbklkO1xuXHRcdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdEphbnVzLmh0dHBBUElDYWxsKHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkLCB7XG5cdFx0XHR2ZXJiOiAnUE9TVCcsXG5cdFx0XHR3aXRoQ3JlZGVudGlhbHM6IHdpdGhDcmVkZW50aWFscyxcblx0XHRcdGJvZHk6IHJlcXVlc3QsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihqc29uKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0XHRpZihqc29uW1wiamFudXNcIl0gIT09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0SmFudXMuZXJyb3IoXCJPb29wczogXCIgKyBqc29uW1wiZXJyb3JcIl0uY29kZSArIFwiIFwiICsganNvbltcImVycm9yXCJdLnJlYXNvbik7XHQvLyBGSVhNRVxuXHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGhhbmRsZUlkID0ganNvbi5kYXRhW1wiaWRcIl07XG5cdFx0XHRcdEphbnVzLmxvZyhcIkNyZWF0ZWQgaGFuZGxlOiBcIiArIGhhbmRsZUlkKTtcblx0XHRcdFx0dmFyIHBsdWdpbkhhbmRsZSA9XG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c2Vzc2lvbiA6IHRoYXQsXG5cdFx0XHRcdFx0XHRwbHVnaW4gOiBwbHVnaW4sXG5cdFx0XHRcdFx0XHRpZCA6IGhhbmRsZUlkLFxuXHRcdFx0XHRcdFx0dG9rZW4gOiBoYW5kbGVUb2tlbixcblx0XHRcdFx0XHRcdGRldGFjaGVkIDogZmFsc2UsXG5cdFx0XHRcdFx0XHR3ZWJydGNTdHVmZiA6IHtcblx0XHRcdFx0XHRcdFx0c3RhcnRlZCA6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRteVN0cmVhbSA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHN0cmVhbUV4dGVybmFsIDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHJlbW90ZVN0cmVhbSA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdG15U2RwIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0bWVkaWFDb25zdHJhaW50cyA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHBjIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0ZGF0YUNoYW5uZWxPcHRpb25zOiBjYWxsYmFja3MuZGF0YUNoYW5uZWxPcHRpb25zLFxuXHRcdFx0XHRcdFx0XHRkYXRhQ2hhbm5lbCA6IHt9LFxuXHRcdFx0XHRcdFx0XHRkdG1mU2VuZGVyIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0dHJpY2tsZSA6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGljZURvbmUgOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0dm9sdW1lIDoge1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lciA6IG51bGxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Yml0cmF0ZSA6IHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0YnNub3cgOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdGJzYmVmb3JlIDogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHR0c25vdyA6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0dHNiZWZvcmUgOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVyIDogbnVsbFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Z2V0SWQgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGhhbmRsZUlkOyB9LFxuXHRcdFx0XHRcdFx0Z2V0UGx1Z2luIDogZnVuY3Rpb24oKSB7IHJldHVybiBwbHVnaW47IH0sXG5cdFx0XHRcdFx0XHRnZXRWb2x1bWUgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFZvbHVtZShoYW5kbGVJZCwgdHJ1ZSk7IH0sXG5cdFx0XHRcdFx0XHRnZXRSZW1vdGVWb2x1bWUgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFZvbHVtZShoYW5kbGVJZCwgdHJ1ZSk7IH0sXG5cdFx0XHRcdFx0XHRnZXRMb2NhbFZvbHVtZSA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Vm9sdW1lKGhhbmRsZUlkLCBmYWxzZSk7IH0sXG5cdFx0XHRcdFx0XHRpc0F1ZGlvTXV0ZWQgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGlzTXV0ZWQoaGFuZGxlSWQsIGZhbHNlKTsgfSxcblx0XHRcdFx0XHRcdG11dGVBdWRpbyA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXV0ZShoYW5kbGVJZCwgZmFsc2UsIHRydWUpOyB9LFxuXHRcdFx0XHRcdFx0dW5tdXRlQXVkaW8gOiBmdW5jdGlvbigpIHsgcmV0dXJuIG11dGUoaGFuZGxlSWQsIGZhbHNlLCBmYWxzZSk7IH0sXG5cdFx0XHRcdFx0XHRpc1ZpZGVvTXV0ZWQgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGlzTXV0ZWQoaGFuZGxlSWQsIHRydWUpOyB9LFxuXHRcdFx0XHRcdFx0bXV0ZVZpZGVvIDogZnVuY3Rpb24oKSB7IHJldHVybiBtdXRlKGhhbmRsZUlkLCB0cnVlLCB0cnVlKTsgfSxcblx0XHRcdFx0XHRcdHVubXV0ZVZpZGVvIDogZnVuY3Rpb24oKSB7IHJldHVybiBtdXRlKGhhbmRsZUlkLCB0cnVlLCBmYWxzZSk7IH0sXG5cdFx0XHRcdFx0XHRnZXRCaXRyYXRlIDogZnVuY3Rpb24oKSB7IHJldHVybiBnZXRCaXRyYXRlKGhhbmRsZUlkKTsgfSxcblx0XHRcdFx0XHRcdHNlbmQgOiBmdW5jdGlvbihjYWxsYmFja3MpIHsgc2VuZE1lc3NhZ2UoaGFuZGxlSWQsIGNhbGxiYWNrcyk7IH0sXG5cdFx0XHRcdFx0XHRkYXRhIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHNlbmREYXRhKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuXHRcdFx0XHRcdFx0ZHRtZiA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBzZW5kRHRtZihoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfSxcblx0XHRcdFx0XHRcdGNvbnNlbnREaWFsb2cgOiBjYWxsYmFja3MuY29uc2VudERpYWxvZyxcblx0XHRcdFx0XHRcdGljZVN0YXRlIDogY2FsbGJhY2tzLmljZVN0YXRlLFxuXHRcdFx0XHRcdFx0bWVkaWFTdGF0ZSA6IGNhbGxiYWNrcy5tZWRpYVN0YXRlLFxuXHRcdFx0XHRcdFx0d2VicnRjU3RhdGUgOiBjYWxsYmFja3Mud2VicnRjU3RhdGUsXG5cdFx0XHRcdFx0XHRzbG93TGluayA6IGNhbGxiYWNrcy5zbG93TGluayxcblx0XHRcdFx0XHRcdG9ubWVzc2FnZSA6IGNhbGxiYWNrcy5vbm1lc3NhZ2UsXG5cdFx0XHRcdFx0XHRjcmVhdGVPZmZlciA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBwcmVwYXJlV2VicnRjKGhhbmRsZUlkLCB0cnVlLCBjYWxsYmFja3MpOyB9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlQW5zd2VyIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHByZXBhcmVXZWJydGMoaGFuZGxlSWQsIGZhbHNlLCBjYWxsYmFja3MpOyB9LFxuXHRcdFx0XHRcdFx0aGFuZGxlUmVtb3RlSnNlcCA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBwcmVwYXJlV2VicnRjUGVlcihoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfSxcblx0XHRcdFx0XHRcdG9ubG9jYWxzdHJlYW0gOiBjYWxsYmFja3Mub25sb2NhbHN0cmVhbSxcblx0XHRcdFx0XHRcdG9ucmVtb3Rlc3RyZWFtIDogY2FsbGJhY2tzLm9ucmVtb3Rlc3RyZWFtLFxuXHRcdFx0XHRcdFx0b25kYXRhIDogY2FsbGJhY2tzLm9uZGF0YSxcblx0XHRcdFx0XHRcdG9uZGF0YW9wZW4gOiBjYWxsYmFja3Mub25kYXRhb3Blbixcblx0XHRcdFx0XHRcdG9uY2xlYW51cCA6IGNhbGxiYWNrcy5vbmNsZWFudXAsXG5cdFx0XHRcdFx0XHRvbmRldGFjaGVkIDogY2FsbGJhY2tzLm9uZGV0YWNoZWQsXG5cdFx0XHRcdFx0XHRoYW5ndXAgOiBmdW5jdGlvbihzZW5kUmVxdWVzdCkgeyBjbGVhbnVwV2VicnRjKGhhbmRsZUlkLCBzZW5kUmVxdWVzdCA9PT0gdHJ1ZSk7IH0sXG5cdFx0XHRcdFx0XHRkZXRhY2ggOiBmdW5jdGlvbihjYWxsYmFja3MpIHsgZGVzdHJveUhhbmRsZShoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0cGx1Z2luSGFuZGxlc1toYW5kbGVJZF0gPSBwbHVnaW5IYW5kbGU7XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKHBsdWdpbkhhbmRsZSk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdFx0XHRcdEphbnVzLmVycm9yKHRleHRTdGF0dXMgKyBcIjpcIiwgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcblx0XHRcdFx0aWYoZXJyb3JUaHJvd24gPT09IFwiXCIpXG5cdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKHRleHRTdGF0dXMgKyBcIjogSXMgdGhlIHNlcnZlciBkb3duP1wiKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcih0ZXh0U3RhdHVzICsgXCI6IFwiICsgZXJyb3JUaHJvd24pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUHJpdmF0ZSBtZXRob2QgdG8gc2VuZCBhIG1lc3NhZ2Vcblx0ZnVuY3Rpb24gc2VuZE1lc3NhZ2UoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuXHRcdGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcblx0XHRjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcblx0XHRjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcblx0XHRpZighY29ubmVjdGVkKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSXMgdGhlIHNlcnZlciBkb3duPyAoY29ubmVjdGVkPWZhbHNlKVwiKTtcblx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIklzIHRoZSBzZXJ2ZXIgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcblx0XHRpZighcGx1Z2luSGFuZGxlIHx8ICFwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYpIHtcblx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZVwiKTtcblx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgbWVzc2FnZSA9IGNhbGxiYWNrcy5tZXNzYWdlO1xuXHRcdHZhciBqc2VwID0gY2FsbGJhY2tzLmpzZXA7XG5cdFx0dmFyIHRyYW5zYWN0aW9uID0gSmFudXMucmFuZG9tU3RyaW5nKDEyKTtcblx0XHR2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcIm1lc3NhZ2VcIiwgXCJib2R5XCI6IG1lc3NhZ2UsIFwidHJhbnNhY3Rpb25cIjogdHJhbnNhY3Rpb24gfTtcblx0XHRpZihwbHVnaW5IYW5kbGUudG9rZW4pXG5cdFx0XHRyZXF1ZXN0W1widG9rZW5cIl0gPSBwbHVnaW5IYW5kbGUudG9rZW47XG5cdFx0aWYoYXBpc2VjcmV0KVxuXHRcdFx0cmVxdWVzdFtcImFwaXNlY3JldFwiXSA9IGFwaXNlY3JldDtcblx0XHRpZihqc2VwKSB7XG5cdFx0XHRyZXF1ZXN0LmpzZXAgPSB7XG5cdFx0XHRcdHR5cGU6IGpzZXAudHlwZSxcblx0XHRcdFx0c2RwOiBqc2VwLnNkcFxuXHRcdFx0fTtcblx0XHRcdGlmKGpzZXAuZTJlZSlcblx0XHRcdFx0cmVxdWVzdC5qc2VwLmUyZWUgPSB0cnVlO1xuXHRcdFx0aWYoanNlcC5yaWRfb3JkZXIgPT09IFwiaG1sXCIgfHwganNlcC5yaWRfb3JkZXIgPT09IFwibG1oXCIpXG5cdFx0XHRcdHJlcXVlc3QuanNlcC5yaWRfb3JkZXIgPSBqc2VwLnJpZF9vcmRlcjtcblx0XHRcdGlmKGpzZXAuZm9yY2VfcmVsYXkpXG5cdFx0XHRcdHJlcXVlc3QuanNlcC5mb3JjZV9yZWxheSA9IHRydWU7XG5cdFx0fVxuXHRcdEphbnVzLmRlYnVnKFwiU2VuZGluZyBtZXNzYWdlIHRvIHBsdWdpbiAoaGFuZGxlPVwiICsgaGFuZGxlSWQgKyBcIik6XCIpO1xuXHRcdEphbnVzLmRlYnVnKHJlcXVlc3QpO1xuXHRcdGlmKHdlYnNvY2tldHMpIHtcblx0XHRcdHJlcXVlc3RbXCJzZXNzaW9uX2lkXCJdID0gc2Vzc2lvbklkO1xuXHRcdFx0cmVxdWVzdFtcImhhbmRsZV9pZFwiXSA9IGhhbmRsZUlkO1xuXHRcdFx0dHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXSA9IGZ1bmN0aW9uKGpzb24pIHtcblx0XHRcdFx0SmFudXMuZGVidWcoXCJNZXNzYWdlIHNlbnQhXCIpO1xuXHRcdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdFx0aWYoanNvbltcImphbnVzXCJdID09PSBcInN1Y2Nlc3NcIikge1xuXHRcdFx0XHRcdC8vIFdlIGdvdCBhIHN1Y2Nlc3MsIG11c3QgaGF2ZSBiZWVuIGEgc3luY2hyb25vdXMgdHJhbnNhY3Rpb25cblx0XHRcdFx0XHR2YXIgcGx1Z2luZGF0YSA9IGpzb25bXCJwbHVnaW5kYXRhXCJdO1xuXHRcdFx0XHRcdGlmKCFwbHVnaW5kYXRhKSB7XG5cdFx0XHRcdFx0XHRKYW51cy53YXJuKFwiUmVxdWVzdCBzdWNjZWVkZWQsIGJ1dCBtaXNzaW5nIHBsdWdpbmRhdGEuLi5cIik7XG5cdFx0XHRcdFx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRKYW51cy5sb2coXCJTeW5jaHJvbm91cyB0cmFuc2FjdGlvbiBzdWNjZXNzZnVsIChcIiArIHBsdWdpbmRhdGFbXCJwbHVnaW5cIl0gKyBcIilcIik7XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSBwbHVnaW5kYXRhW1wiZGF0YVwiXTtcblx0XHRcdFx0XHRKYW51cy5kZWJ1ZyhkYXRhKTtcblx0XHRcdFx0XHRjYWxsYmFja3Muc3VjY2VzcyhkYXRhKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gIT09IFwiYWNrXCIpIHtcblx0XHRcdFx0XHQvLyBOb3QgYSBzdWNjZXNzIGFuZCBub3QgYW4gYWNrLCBtdXN0IGJlIGFuIGVycm9yXG5cdFx0XHRcdFx0aWYoanNvbltcImVycm9yXCJdKSB7XG5cdFx0XHRcdFx0XHRKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG5cdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoanNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRKYW51cy5lcnJvcihcIlVua25vd24gZXJyb3JcIik7XHQvLyBGSVhNRVxuXHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiVW5rbm93biBlcnJvclwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIElmIHdlIGdvdCBoZXJlLCB0aGUgcGx1Z2luIGRlY2lkZWQgdG8gaGFuZGxlIHRoZSByZXF1ZXN0IGFzeW5jaHJvbm91c2x5XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHR9O1xuXHRcdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdEphbnVzLmh0dHBBUElDYWxsKHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkICsgXCIvXCIgKyBoYW5kbGVJZCwge1xuXHRcdFx0dmVyYjogJ1BPU1QnLFxuXHRcdFx0d2l0aENyZWRlbnRpYWxzOiB3aXRoQ3JlZGVudGlhbHMsXG5cdFx0XHRib2R5OiByZXF1ZXN0LFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oanNvbikge1xuXHRcdFx0XHRKYW51cy5kZWJ1ZyhcIk1lc3NhZ2Ugc2VudCFcIik7XG5cdFx0XHRcdEphbnVzLmRlYnVnKGpzb24pO1xuXHRcdFx0XHRpZihqc29uW1wiamFudXNcIl0gPT09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0Ly8gV2UgZ290IGEgc3VjY2VzcywgbXVzdCBoYXZlIGJlZW4gYSBzeW5jaHJvbm91cyB0cmFuc2FjdGlvblxuXHRcdFx0XHRcdHZhciBwbHVnaW5kYXRhID0ganNvbltcInBsdWdpbmRhdGFcIl07XG5cdFx0XHRcdFx0aWYoIXBsdWdpbmRhdGEpIHtcblx0XHRcdFx0XHRcdEphbnVzLndhcm4oXCJSZXF1ZXN0IHN1Y2NlZWRlZCwgYnV0IG1pc3NpbmcgcGx1Z2luZGF0YS4uLlwiKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdEphbnVzLmxvZyhcIlN5bmNocm9ub3VzIHRyYW5zYWN0aW9uIHN1Y2Nlc3NmdWwgKFwiICsgcGx1Z2luZGF0YVtcInBsdWdpblwiXSArIFwiKVwiKTtcblx0XHRcdFx0XHR2YXIgZGF0YSA9IHBsdWdpbmRhdGFbXCJkYXRhXCJdO1xuXHRcdFx0XHRcdEphbnVzLmRlYnVnKGRhdGEpO1xuXHRcdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKGRhdGEpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSAhPT0gXCJhY2tcIikge1xuXHRcdFx0XHRcdC8vIE5vdCBhIHN1Y2Nlc3MgYW5kIG5vdCBhbiBhY2ssIG11c3QgYmUgYW4gZXJyb3Jcblx0XHRcdFx0XHRpZihqc29uW1wiZXJyb3JcIl0pIHtcblx0XHRcdFx0XHRcdEphbnVzLmVycm9yKFwiT29vcHM6IFwiICsganNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1x0Ly8gRklYTUVcblx0XHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihqc29uW1wiZXJyb3JcIl0uY29kZSArIFwiIFwiICsganNvbltcImVycm9yXCJdLnJlYXNvbik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdEphbnVzLmVycm9yKFwiVW5rbm93biBlcnJvclwiKTtcdC8vIEZJWE1FXG5cdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJVbmtub3duIGVycm9yXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gSWYgd2UgZ290IGhlcmUsIHRoZSBwbHVnaW4gZGVjaWRlZCB0byBoYW5kbGUgdGhlIHJlcXVlc3QgYXN5bmNocm9ub3VzbHlcblx0XHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24odGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0SmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOlwiLCBlcnJvclRocm93bik7XHQvLyBGSVhNRVxuXHRcdFx0XHRjYWxsYmFja3MuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBcIiArIGVycm9yVGhyb3duKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIFByaXZhdGUgbWV0aG9kIHRvIHNlbmQgYSB0cmlja2xlIGNhbmRpZGF0ZVxuXHRmdW5jdGlvbiBzZW5kVHJpY2tsZUNhbmRpZGF0ZShoYW5kbGVJZCwgY2FuZGlkYXRlKSB7XG5cdFx0aWYoIWNvbm5lY3RlZCkge1xuXHRcdFx0SmFudXMud2FybihcIklzIHRoZSBzZXJ2ZXIgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcblx0XHRpZighcGx1Z2luSGFuZGxlIHx8ICFwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYpIHtcblx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJ0cmlja2xlXCIsIFwiY2FuZGlkYXRlXCI6IGNhbmRpZGF0ZSwgXCJ0cmFuc2FjdGlvblwiOiBKYW51cy5yYW5kb21TdHJpbmcoMTIpIH07XG5cdFx0aWYocGx1Z2luSGFuZGxlLnRva2VuKVxuXHRcdFx0cmVxdWVzdFtcInRva2VuXCJdID0gcGx1Z2luSGFuZGxlLnRva2VuO1xuXHRcdGlmKGFwaXNlY3JldClcblx0XHRcdHJlcXVlc3RbXCJhcGlzZWNyZXRcIl0gPSBhcGlzZWNyZXQ7XG5cdFx0SmFudXMudmRlYnVnKFwiU2VuZGluZyB0cmlja2xlIGNhbmRpZGF0ZSAoaGFuZGxlPVwiICsgaGFuZGxlSWQgKyBcIik6XCIpO1xuXHRcdEphbnVzLnZkZWJ1ZyhyZXF1ZXN0KTtcblx0XHRpZih3ZWJzb2NrZXRzKSB7XG5cdFx0XHRyZXF1ZXN0W1wic2Vzc2lvbl9pZFwiXSA9IHNlc3Npb25JZDtcblx0XHRcdHJlcXVlc3RbXCJoYW5kbGVfaWRcIl0gPSBoYW5kbGVJZDtcblx0XHRcdHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxdWVzdCkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRKYW51cy5odHRwQVBJQ2FsbChzZXJ2ZXIgKyBcIi9cIiArIHNlc3Npb25JZCArIFwiL1wiICsgaGFuZGxlSWQsIHtcblx0XHRcdHZlcmI6ICdQT1NUJyxcblx0XHRcdHdpdGhDcmVkZW50aWFsczogd2l0aENyZWRlbnRpYWxzLFxuXHRcdFx0Ym9keTogcmVxdWVzdCxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGpzb24pIHtcblx0XHRcdFx0SmFudXMudmRlYnVnKFwiQ2FuZGlkYXRlIHNlbnQhXCIpO1xuXHRcdFx0XHRKYW51cy52ZGVidWcoanNvbik7XG5cdFx0XHRcdGlmKGpzb25bXCJqYW51c1wiXSAhPT0gXCJhY2tcIikge1xuXHRcdFx0XHRcdEphbnVzLmVycm9yKFwiT29vcHM6IFwiICsganNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1x0Ly8gRklYTUVcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24odGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0SmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOlwiLCBlcnJvclRocm93bik7XHQvLyBGSVhNRVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIGEgZGF0YSBjaGFubmVsXG5cdGZ1bmN0aW9uIGNyZWF0ZURhdGFDaGFubmVsKGhhbmRsZUlkLCBkY2xhYmVsLCBkY3Byb3RvY29sLCBpbmNvbWluZywgcGVuZGluZ0RhdGEpIHtcblx0XHR2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0aWYoIXBsdWdpbkhhbmRsZSB8fCAhcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0aWYoIWNvbmZpZy5wYykge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgUGVlckNvbm5lY3Rpb25cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBvbkRhdGFDaGFubmVsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRKYW51cy5sb2coJ1JlY2VpdmVkIG1lc3NhZ2Ugb24gZGF0YSBjaGFubmVsOicsIGV2ZW50KTtcblx0XHRcdHZhciBsYWJlbCA9IGV2ZW50LnRhcmdldC5sYWJlbDtcblx0XHRcdHBsdWdpbkhhbmRsZS5vbmRhdGEoZXZlbnQuZGF0YSwgbGFiZWwpO1xuXHRcdH07XG5cdFx0dmFyIG9uRGF0YUNoYW5uZWxTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRKYW51cy5sb2coJ1JlY2VpdmVkIHN0YXRlIGNoYW5nZSBvbiBkYXRhIGNoYW5uZWw6JywgZXZlbnQpO1xuXHRcdFx0dmFyIGxhYmVsID0gZXZlbnQudGFyZ2V0LmxhYmVsO1xuXHRcdFx0dmFyIHByb3RvY29sID0gZXZlbnQudGFyZ2V0LnByb3RvY29sO1xuXHRcdFx0dmFyIGRjU3RhdGUgPSBjb25maWcuZGF0YUNoYW5uZWxbbGFiZWxdID8gY29uZmlnLmRhdGFDaGFubmVsW2xhYmVsXS5yZWFkeVN0YXRlIDogXCJudWxsXCI7XG5cdFx0XHRKYW51cy5sb2coJ1N0YXRlIGNoYW5nZSBvbiA8JyArIGxhYmVsICsgJz4gZGF0YSBjaGFubmVsOiAnICsgZGNTdGF0ZSk7XG5cdFx0XHRpZihkY1N0YXRlID09PSAnb3BlbicpIHtcblx0XHRcdFx0Ly8gQW55IHBlbmRpbmcgbWVzc2FnZXMgdG8gc2VuZD9cblx0XHRcdFx0aWYoY29uZmlnLmRhdGFDaGFubmVsW2xhYmVsXS5wZW5kaW5nICYmIGNvbmZpZy5kYXRhQ2hhbm5lbFtsYWJlbF0ucGVuZGluZy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0SmFudXMubG9nKFwiU2VuZGluZyBwZW5kaW5nIG1lc3NhZ2VzIG9uIDxcIiArIGxhYmVsICsgXCI+OlwiLCBjb25maWcuZGF0YUNoYW5uZWxbbGFiZWxdLnBlbmRpbmcubGVuZ3RoKTtcblx0XHRcdFx0XHRmb3IodmFyIGRhdGEgb2YgY29uZmlnLmRhdGFDaGFubmVsW2xhYmVsXS5wZW5kaW5nKSB7XG5cdFx0XHRcdFx0XHRKYW51cy5sb2coXCJTZW5kaW5nIGRhdGEgb24gZGF0YSBjaGFubmVsIDxcIiArIGxhYmVsICsgXCI+XCIpO1xuXHRcdFx0XHRcdFx0SmFudXMuZGVidWcoZGF0YSk7XG5cdFx0XHRcdFx0XHRjb25maWcuZGF0YUNoYW5uZWxbbGFiZWxdLnNlbmQoZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbmZpZy5kYXRhQ2hhbm5lbFtsYWJlbF0ucGVuZGluZyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE5vdGlmeSB0aGUgb3BlbiBkYXRhIGNoYW5uZWxcblx0XHRcdFx0cGx1Z2luSGFuZGxlLm9uZGF0YW9wZW4obGFiZWwsIHByb3RvY29sKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdHZhciBvbkRhdGFDaGFubmVsRXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0SmFudXMuZXJyb3IoJ0dvdCBlcnJvciBvbiBkYXRhIGNoYW5uZWw6JywgZXJyb3IpO1xuXHRcdFx0Ly8gVE9ET1xuXHRcdH07XG5cdFx0aWYoIWluY29taW5nKSB7XG5cdFx0XHQvLyBGSVhNRSBBZGQgb3B0aW9ucyAob3JkZXJlZCwgbWF4UmV0cmFuc21pdHMsIGV0Yy4pXG5cdFx0XHR2YXIgZGNvcHRpb25zID0gY29uZmlnLmRhdGFDaGFubmVsT3B0aW9ucztcblx0XHRcdGlmKGRjcHJvdG9jb2wpXG5cdFx0XHRcdGRjb3B0aW9ucy5wcm90b2NvbCA9IGRjcHJvdG9jb2w7XG5cdFx0XHRjb25maWcuZGF0YUNoYW5uZWxbZGNsYWJlbF0gPSBjb25maWcucGMuY3JlYXRlRGF0YUNoYW5uZWwoZGNsYWJlbCwgZGNvcHRpb25zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVGhlIGNoYW5uZWwgd2FzIGNyZWF0ZWQgYnkgSmFudXNcblx0XHRcdGNvbmZpZy5kYXRhQ2hhbm5lbFtkY2xhYmVsXSA9IGluY29taW5nO1xuXHRcdH1cblx0XHRjb25maWcuZGF0YUNoYW5uZWxbZGNsYWJlbF0ub25tZXNzYWdlID0gb25EYXRhQ2hhbm5lbE1lc3NhZ2U7XG5cdFx0Y29uZmlnLmRhdGFDaGFubmVsW2RjbGFiZWxdLm9ub3BlbiA9IG9uRGF0YUNoYW5uZWxTdGF0ZUNoYW5nZTtcblx0XHRjb25maWcuZGF0YUNoYW5uZWxbZGNsYWJlbF0ub25jbG9zZSA9IG9uRGF0YUNoYW5uZWxTdGF0ZUNoYW5nZTtcblx0XHRjb25maWcuZGF0YUNoYW5uZWxbZGNsYWJlbF0ub25lcnJvciA9IG9uRGF0YUNoYW5uZWxFcnJvcjtcblx0XHRjb25maWcuZGF0YUNoYW5uZWxbZGNsYWJlbF0ucGVuZGluZyA9IFtdO1xuXHRcdGlmKHBlbmRpbmdEYXRhKVxuXHRcdFx0Y29uZmlnLmRhdGFDaGFubmVsW2RjbGFiZWxdLnBlbmRpbmcucHVzaChwZW5kaW5nRGF0YSk7XG5cdH1cblxuXHQvLyBQcml2YXRlIG1ldGhvZCB0byBzZW5kIGEgZGF0YSBjaGFubmVsIG1lc3NhZ2Vcblx0ZnVuY3Rpb24gc2VuZERhdGEoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuXHRcdGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcblx0XHRjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcblx0XHRjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcblx0XHR2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0aWYoIXBsdWdpbkhhbmRsZSB8fCAhcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIGhhbmRsZVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcblx0XHR2YXIgZGF0YSA9IGNhbGxiYWNrcy50ZXh0IHx8IGNhbGxiYWNrcy5kYXRhO1xuXHRcdGlmKCFkYXRhKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBkYXRhXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBkYXRhXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgbGFiZWwgPSBjYWxsYmFja3MubGFiZWwgPyBjYWxsYmFja3MubGFiZWwgOiBKYW51cy5kYXRhQ2hhbkRlZmF1bHRMYWJlbDtcblx0XHRpZighY29uZmlnLmRhdGFDaGFubmVsW2xhYmVsXSkge1xuXHRcdFx0Ly8gQ3JlYXRlIG5ldyBkYXRhIGNoYW5uZWwgYW5kIHdhaXQgZm9yIGl0IHRvIG9wZW5cblx0XHRcdGNyZWF0ZURhdGFDaGFubmVsKGhhbmRsZUlkLCBsYWJlbCwgY2FsbGJhY2tzLnByb3RvY29sLCBmYWxzZSwgZGF0YSwgY2FsbGJhY2tzLnByb3RvY29sKTtcblx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmKGNvbmZpZy5kYXRhQ2hhbm5lbFtsYWJlbF0ucmVhZHlTdGF0ZSAhPT0gXCJvcGVuXCIpIHtcblx0XHRcdGNvbmZpZy5kYXRhQ2hhbm5lbFtsYWJlbF0ucGVuZGluZy5wdXNoKGRhdGEpO1xuXHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0SmFudXMubG9nKFwiU2VuZGluZyBkYXRhIG9uIGRhdGEgY2hhbm5lbCA8XCIgKyBsYWJlbCArIFwiPlwiKTtcblx0XHRKYW51cy5kZWJ1ZyhkYXRhKTtcblx0XHRjb25maWcuZGF0YUNoYW5uZWxbbGFiZWxdLnNlbmQoZGF0YSk7XG5cdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0fVxuXG5cdC8vIFByaXZhdGUgbWV0aG9kIHRvIHNlbmQgYSBEVE1GIHRvbmVcblx0ZnVuY3Rpb24gc2VuZER0bWYoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuXHRcdGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcblx0XHRjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcblx0XHRjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcblx0XHR2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0aWYoIXBsdWdpbkhhbmRsZSB8fCAhcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIGhhbmRsZVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcblx0XHRpZighY29uZmlnLmR0bWZTZW5kZXIpIHtcblx0XHRcdC8vIENyZWF0ZSB0aGUgRFRNRiBzZW5kZXIgdGhlIHByb3BlciB3YXksIGlmIHBvc3NpYmxlXG5cdFx0XHRpZihjb25maWcucGMpIHtcblx0XHRcdFx0dmFyIHNlbmRlcnMgPSBjb25maWcucGMuZ2V0U2VuZGVycygpO1xuXHRcdFx0XHR2YXIgYXVkaW9TZW5kZXIgPSBzZW5kZXJzLmZpbmQoZnVuY3Rpb24oc2VuZGVyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHNlbmRlci50cmFjayAmJiBzZW5kZXIudHJhY2sua2luZCA9PT0gJ2F1ZGlvJztcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmKCFhdWRpb1NlbmRlcikge1xuXHRcdFx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIERUTUYgY29uZmlndXJhdGlvbiAobm8gYXVkaW8gdHJhY2spXCIpO1xuXHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgRFRNRiBjb25maWd1cmF0aW9uIChubyBhdWRpbyB0cmFjaylcIik7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbmZpZy5kdG1mU2VuZGVyID0gYXVkaW9TZW5kZXIuZHRtZjtcblx0XHRcdFx0aWYoY29uZmlnLmR0bWZTZW5kZXIpIHtcblx0XHRcdFx0XHRKYW51cy5sb2coXCJDcmVhdGVkIERUTUYgU2VuZGVyXCIpO1xuXHRcdFx0XHRcdGNvbmZpZy5kdG1mU2VuZGVyLm9udG9uZWNoYW5nZSA9IGZ1bmN0aW9uKHRvbmUpIHsgSmFudXMuZGVidWcoXCJTZW50IERUTUYgdG9uZTogXCIgKyB0b25lLnRvbmUpOyB9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZighY29uZmlnLmR0bWZTZW5kZXIpIHtcblx0XHRcdFx0SmFudXMud2FybihcIkludmFsaWQgRFRNRiBjb25maWd1cmF0aW9uXCIpO1xuXHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIERUTUYgY29uZmlndXJhdGlvblwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR2YXIgZHRtZiA9IGNhbGxiYWNrcy5kdG1mO1xuXHRcdGlmKCFkdG1mKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBEVE1GIHBhcmFtZXRlcnNcIik7XG5cdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIERUTUYgcGFyYW1ldGVyc1wiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIHRvbmVzID0gZHRtZi50b25lcztcblx0XHRpZighdG9uZXMpIHtcblx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIERUTUYgc3RyaW5nXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBEVE1GIHN0cmluZ1wiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIGR1cmF0aW9uID0gKHR5cGVvZiBkdG1mLmR1cmF0aW9uID09PSAnbnVtYmVyJykgPyBkdG1mLmR1cmF0aW9uIDogNTAwOyAvLyBXZSBjaG9vc2UgNTAwbXMgYXMgdGhlIGRlZmF1bHQgZHVyYXRpb24gZm9yIGEgdG9uZVxuXHRcdHZhciBnYXAgPSAodHlwZW9mIGR0bWYuZ2FwID09PSAnbnVtYmVyJykgPyBkdG1mLmdhcCA6IDUwOyAvLyBXZSBjaG9vc2UgNTBtcyBhcyB0aGUgZGVmYXVsdCBnYXAgYmV0d2VlbiB0b25lc1xuXHRcdEphbnVzLmRlYnVnKFwiU2VuZGluZyBEVE1GIHN0cmluZyBcIiArIHRvbmVzICsgXCIgKGR1cmF0aW9uIFwiICsgZHVyYXRpb24gKyBcIm1zLCBnYXAgXCIgKyBnYXAgKyBcIm1zKVwiKTtcblx0XHRjb25maWcuZHRtZlNlbmRlci5pbnNlcnREVE1GKHRvbmVzLCBkdXJhdGlvbiwgZ2FwKTtcblx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHR9XG5cblx0Ly8gUHJpdmF0ZSBtZXRob2QgdG8gZGVzdHJveSBhIHBsdWdpbiBoYW5kbGVcblx0ZnVuY3Rpb24gZGVzdHJveUhhbmRsZShoYW5kbGVJZCwgY2FsbGJhY2tzKSB7XG5cdFx0Y2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuXHRcdGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuXHRcdHZhciBub1JlcXVlc3QgPSAoY2FsbGJhY2tzLm5vUmVxdWVzdCA9PT0gdHJ1ZSk7XG5cdFx0SmFudXMubG9nKFwiRGVzdHJveWluZyBoYW5kbGUgXCIgKyBoYW5kbGVJZCArIFwiIChvbmx5LWxvY2FsbHk9XCIgKyBub1JlcXVlc3QgKyBcIilcIik7XG5cdFx0Y2xlYW51cFdlYnJ0YyhoYW5kbGVJZCk7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgcGx1Z2luSGFuZGxlLmRldGFjaGVkKSB7XG5cdFx0XHQvLyBQbHVnaW4gd2FzIGFscmVhZHkgZGV0YWNoZWQgYnkgSmFudXMsIGNhbGxpbmcgZGV0YWNoIGFnYWluIHdpbGwgcmV0dXJuIGEgaGFuZGxlIG5vdCBmb3VuZCBlcnJvciwgc28ganVzdCBleGl0IGhlcmVcblx0XHRcdGRlbGV0ZSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcblx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHBsdWdpbkhhbmRsZS5kZXRhY2hlZCA9IHRydWU7XG5cdFx0aWYobm9SZXF1ZXN0KSB7XG5cdFx0XHQvLyBXZSdyZSBvbmx5IHJlbW92aW5nIHRoZSBoYW5kbGUgbG9jYWxseVxuXHRcdFx0ZGVsZXRlIHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYoIWNvbm5lY3RlZCkge1xuXHRcdFx0SmFudXMud2FybihcIklzIHRoZSBzZXJ2ZXIgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG5cdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJcyB0aGUgc2VydmVyIGRvd24/IChjb25uZWN0ZWQ9ZmFsc2UpXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcImRldGFjaFwiLCBcInRyYW5zYWN0aW9uXCI6IEphbnVzLnJhbmRvbVN0cmluZygxMikgfTtcblx0XHRpZihwbHVnaW5IYW5kbGUudG9rZW4pXG5cdFx0XHRyZXF1ZXN0W1widG9rZW5cIl0gPSBwbHVnaW5IYW5kbGUudG9rZW47XG5cdFx0aWYoYXBpc2VjcmV0KVxuXHRcdFx0cmVxdWVzdFtcImFwaXNlY3JldFwiXSA9IGFwaXNlY3JldDtcblx0XHRpZih3ZWJzb2NrZXRzKSB7XG5cdFx0XHRyZXF1ZXN0W1wic2Vzc2lvbl9pZFwiXSA9IHNlc3Npb25JZDtcblx0XHRcdHJlcXVlc3RbXCJoYW5kbGVfaWRcIl0gPSBoYW5kbGVJZDtcblx0XHRcdHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxdWVzdCkpO1xuXHRcdFx0ZGVsZXRlIHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0SmFudXMuaHR0cEFQSUNhbGwoc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQgKyBcIi9cIiArIGhhbmRsZUlkLCB7XG5cdFx0XHR2ZXJiOiAnUE9TVCcsXG5cdFx0XHR3aXRoQ3JlZGVudGlhbHM6IHdpdGhDcmVkZW50aWFscyxcblx0XHRcdGJvZHk6IHJlcXVlc3QsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihqc29uKSB7XG5cdFx0XHRcdEphbnVzLmxvZyhcIkRlc3Ryb3llZCBoYW5kbGU6XCIpO1xuXHRcdFx0XHRKYW51cy5kZWJ1Zyhqc29uKTtcblx0XHRcdFx0aWYoanNvbltcImphbnVzXCJdICE9PSBcInN1Y2Nlc3NcIikge1xuXHRcdFx0XHRcdEphbnVzLmVycm9yKFwiT29vcHM6IFwiICsganNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1x0Ly8gRklYTUVcblx0XHRcdFx0fVxuXHRcdFx0XHRkZWxldGUgcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKCk7XG5cdFx0XHR9LFxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdFx0XHRcdEphbnVzLmVycm9yKHRleHRTdGF0dXMgKyBcIjpcIiwgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcblx0XHRcdFx0Ly8gV2UgY2xlYW51cCBhbnl3YXlcblx0XHRcdFx0ZGVsZXRlIHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdFx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gV2ViUlRDIHN0dWZmXG5cdGZ1bmN0aW9uIHN0cmVhbXNEb25lKGhhbmRsZUlkLCBqc2VwLCBtZWRpYSwgY2FsbGJhY2tzLCBzdHJlYW0pIHtcblx0XHR2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0aWYoIXBsdWdpbkhhbmRsZSB8fCAhcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHQvLyBDbG9zZSBhbGwgdHJhY2tzIGlmIHRoZSBnaXZlbiBzdHJlYW0gaGFzIGJlZW4gY3JlYXRlZCBpbnRlcm5hbGx5XG5cdFx0XHRpZighY2FsbGJhY2tzLnN0cmVhbSkge1xuXHRcdFx0XHRKYW51cy5zdG9wQWxsVHJhY2tzKHN0cmVhbSk7XG5cdFx0XHR9XG5cdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIGhhbmRsZVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcblx0XHRKYW51cy5kZWJ1ZyhcInN0cmVhbXNEb25lOlwiLCBzdHJlYW0pO1xuXHRcdGlmKHN0cmVhbSkge1xuXHRcdFx0SmFudXMuZGVidWcoXCIgIC0tIEF1ZGlvIHRyYWNrczpcIiwgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkpO1xuXHRcdFx0SmFudXMuZGVidWcoXCIgIC0tIFZpZGVvIHRyYWNrczpcIiwgc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkpO1xuXHRcdH1cblx0XHQvLyBXZSdyZSBub3cgY2FwdHVyaW5nIHRoZSBuZXcgc3RyZWFtOiBjaGVjayBpZiB3ZSdyZSB1cGRhdGluZyBvciBpZiBpdCdzIGEgbmV3IHRoaW5nXG5cdFx0dmFyIGFkZFRyYWNrcyA9IGZhbHNlO1xuXHRcdGlmKCFjb25maWcubXlTdHJlYW0gfHwgIW1lZGlhLnVwZGF0ZSB8fCAoY29uZmlnLnN0cmVhbUV4dGVybmFsICYmICFtZWRpYS5yZXBsYWNlQXVkaW8gJiYgIW1lZGlhLnJlcGxhY2VWaWRlbykpIHtcblx0XHRcdGNvbmZpZy5teVN0cmVhbSA9IHN0cmVhbTtcblx0XHRcdGFkZFRyYWNrcyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFdlIG9ubHkgbmVlZCB0byB1cGRhdGUgdGhlIGV4aXN0aW5nIHN0cmVhbVxuXHRcdFx0aWYoKCghbWVkaWEudXBkYXRlICYmIGlzQXVkaW9TZW5kRW5hYmxlZChtZWRpYSkpIHx8IChtZWRpYS51cGRhdGUgJiYgKG1lZGlhLmFkZEF1ZGlvIHx8IG1lZGlhLnJlcGxhY2VBdWRpbykpKSAmJlxuXHRcdFx0XHRcdHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpICYmIHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCkge1xuXHRcdFx0XHRjb25maWcubXlTdHJlYW0uYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuXHRcdFx0XHRpZihKYW51cy51bmlmaWVkUGxhbikge1xuXHRcdFx0XHRcdC8vIFVzZSBUcmFuc2NlaXZlcnNcblx0XHRcdFx0XHRKYW51cy5sb2coKG1lZGlhLnJlcGxhY2VBdWRpbyA/IFwiUmVwbGFjaW5nXCIgOiBcIkFkZGluZ1wiKSArIFwiIGF1ZGlvIHRyYWNrOlwiLCBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSk7XG5cdFx0XHRcdFx0dmFyIGF1ZGlvVHJhbnNjZWl2ZXIgPSBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IHRyYW5zY2VpdmVycyA9IGNvbmZpZy5wYy5nZXRUcmFuc2NlaXZlcnMoKTtcblx0XHRcdFx0XHRpZih0cmFuc2NlaXZlcnMgJiYgdHJhbnNjZWl2ZXJzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGZvcihjb25zdCB0IG9mIHRyYW5zY2VpdmVycykge1xuXHRcdFx0XHRcdFx0XHRpZigodC5zZW5kZXIgJiYgdC5zZW5kZXIudHJhY2sgJiYgdC5zZW5kZXIudHJhY2sua2luZCA9PT0gXCJhdWRpb1wiKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KHQucmVjZWl2ZXIgJiYgdC5yZWNlaXZlci50cmFjayAmJiB0LnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIikpIHtcblx0XHRcdFx0XHRcdFx0XHRhdWRpb1RyYW5zY2VpdmVyID0gdDtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihhdWRpb1RyYW5zY2VpdmVyICYmIGF1ZGlvVHJhbnNjZWl2ZXIuc2VuZGVyKSB7XG5cdFx0XHRcdFx0XHRhdWRpb1RyYW5zY2VpdmVyLnNlbmRlci5yZXBsYWNlVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25maWcucGMuYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0sIHN0cmVhbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdEphbnVzLmxvZygobWVkaWEucmVwbGFjZUF1ZGlvID8gXCJSZXBsYWNpbmdcIiA6IFwiQWRkaW5nXCIpICsgXCIgYXVkaW8gdHJhY2s6XCIsIHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcblx0XHRcdFx0XHRjb25maWcucGMuYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0sIHN0cmVhbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKCgoIW1lZGlhLnVwZGF0ZSAmJiBpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpKSB8fCAobWVkaWEudXBkYXRlICYmIChtZWRpYS5hZGRWaWRlbyB8fCBtZWRpYS5yZXBsYWNlVmlkZW8pKSkgJiZcblx0XHRcdFx0XHRzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKSAmJiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHtcblx0XHRcdFx0Y29uZmlnLm15U3RyZWFtLmFkZFRyYWNrKHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKTtcblx0XHRcdFx0aWYoSmFudXMudW5pZmllZFBsYW4pIHtcblx0XHRcdFx0XHQvLyBVc2UgVHJhbnNjZWl2ZXJzXG5cdFx0XHRcdFx0SmFudXMubG9nKChtZWRpYS5yZXBsYWNlVmlkZW8gPyBcIlJlcGxhY2luZ1wiIDogXCJBZGRpbmdcIikgKyBcIiB2aWRlbyB0cmFjazpcIiwgc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pO1xuXHRcdFx0XHRcdHZhciB2aWRlb1RyYW5zY2VpdmVyID0gbnVsbDtcblx0XHRcdFx0XHRjb25zdCB0cmFuc2NlaXZlcnMgPSBjb25maWcucGMuZ2V0VHJhbnNjZWl2ZXJzKCk7XG5cdFx0XHRcdFx0aWYodHJhbnNjZWl2ZXJzICYmIHRyYW5zY2VpdmVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRmb3IoY29uc3QgdCBvZiB0cmFuc2NlaXZlcnMpIHtcblx0XHRcdFx0XHRcdFx0aWYoKHQuc2VuZGVyICYmIHQuc2VuZGVyLnRyYWNrICYmIHQuc2VuZGVyLnRyYWNrLmtpbmQgPT09IFwidmlkZW9cIikgfHxcblx0XHRcdFx0XHRcdFx0XHRcdCh0LnJlY2VpdmVyICYmIHQucmVjZWl2ZXIudHJhY2sgJiYgdC5yZWNlaXZlci50cmFjay5raW5kID09PSBcInZpZGVvXCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlciA9IHQ7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYodmlkZW9UcmFuc2NlaXZlciAmJiB2aWRlb1RyYW5zY2VpdmVyLnNlbmRlcikge1xuXHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5zZW5kZXIucmVwbGFjZVRyYWNrKHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uZmlnLnBjLmFkZFRyYWNrKHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLCBzdHJlYW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRKYW51cy5sb2coKG1lZGlhLnJlcGxhY2VWaWRlbyA/IFwiUmVwbGFjaW5nXCIgOiBcIkFkZGluZ1wiKSArIFwiIHZpZGVvIHRyYWNrOlwiLCBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSk7XG5cdFx0XHRcdFx0Y29uZmlnLnBjLmFkZFRyYWNrKHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLCBzdHJlYW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIElmIHdlIHN0aWxsIG5lZWQgdG8gY3JlYXRlIGEgUGVlckNvbm5lY3Rpb24sIGxldCdzIGRvIHRoYXRcblx0XHRpZighY29uZmlnLnBjKSB7XG5cdFx0XHR2YXIgcGNfY29uZmlnID0ge1wiaWNlU2VydmVyc1wiOiBpY2VTZXJ2ZXJzLCBcImljZVRyYW5zcG9ydFBvbGljeVwiOiBpY2VUcmFuc3BvcnRQb2xpY3ksIFwiYnVuZGxlUG9saWN5XCI6IGJ1bmRsZVBvbGljeX07XG5cdFx0XHRpZihKYW51cy53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09IFwiY2hyb21lXCIpIHtcblx0XHRcdFx0Ly8gRm9yIENocm9tZSB2ZXJzaW9ucyBiZWZvcmUgNzIsIHdlIGZvcmNlIGEgcGxhbi1iIHNlbWFudGljLCBhbmQgdW5pZmllZC1wbGFuIG90aGVyd2lzZVxuXHRcdFx0XHRwY19jb25maWdbXCJzZHBTZW1hbnRpY3NcIl0gPSAoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNzIpID8gXCJwbGFuLWJcIiA6IFwidW5pZmllZC1wbGFuXCI7XG5cdFx0XHR9XG5cdFx0XHR2YXIgcGNfY29uc3RyYWludHMgPSB7XG5cdFx0XHRcdFwib3B0aW9uYWxcIjogW3tcIkR0bHNTcnRwS2V5QWdyZWVtZW50XCI6IHRydWV9XVxuXHRcdFx0fTtcblx0XHRcdGlmKGlwdjZTdXBwb3J0KSB7XG5cdFx0XHRcdHBjX2NvbnN0cmFpbnRzLm9wdGlvbmFsLnB1c2goe1wiZ29vZ0lQdjZcIjp0cnVlfSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBBbnkgY3VzdG9tIGNvbnN0cmFpbnQgdG8gYWRkP1xuXHRcdFx0aWYoY2FsbGJhY2tzLnJ0Y0NvbnN0cmFpbnRzICYmIHR5cGVvZiBjYWxsYmFja3MucnRjQ29uc3RyYWludHMgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKFwiQWRkaW5nIGN1c3RvbSBQZWVyQ29ubmVjdGlvbiBjb25zdHJhaW50czpcIiwgY2FsbGJhY2tzLnJ0Y0NvbnN0cmFpbnRzKTtcblx0XHRcdFx0Zm9yKHZhciBpIGluIGNhbGxiYWNrcy5ydGNDb25zdHJhaW50cykge1xuXHRcdFx0XHRcdHBjX2NvbnN0cmFpbnRzLm9wdGlvbmFsLnB1c2goY2FsbGJhY2tzLnJ0Y0NvbnN0cmFpbnRzW2ldKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImVkZ2VcIikge1xuXHRcdFx0XHQvLyBUaGlzIGlzIEVkZ2UsIGVuYWJsZSBCVU5ETEUgZXhwbGljaXRseVxuXHRcdFx0XHRwY19jb25maWcuYnVuZGxlUG9saWN5ID0gXCJtYXgtYnVuZGxlXCI7XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBpZiBhIHNlbmRlciBvciByZWNlaXZlciB0cmFuc2Zvcm0gaGFzIGJlZW4gcHJvdmlkZWRcblx0XHRcdGlmKFJUQ1J0cFNlbmRlciAmJiAoUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5jcmVhdGVFbmNvZGVkU3RyZWFtcyB8fFxuXHRcdFx0XHRcdChSVENSdHBTZW5kZXIucHJvdG90eXBlLmNyZWF0ZUVuY29kZWRBdWRpb1N0cmVhbXMgJiZcblx0XHRcdFx0XHRSVENSdHBTZW5kZXIucHJvdG90eXBlLmNyZWF0ZUVuY29kZWRWaWRlb1N0cmVhbXMpKSAmJlxuXHRcdFx0XHRcdChjYWxsYmFja3Muc2VuZGVyVHJhbnNmb3JtcyB8fCBjYWxsYmFja3MucmVjZWl2ZXJUcmFuc2Zvcm1zKSkge1xuXHRcdFx0XHRjb25maWcuc2VuZGVyVHJhbnNmb3JtcyA9IGNhbGxiYWNrcy5zZW5kZXJUcmFuc2Zvcm1zO1xuXHRcdFx0XHRjb25maWcucmVjZWl2ZXJUcmFuc2Zvcm1zID0gY2FsbGJhY2tzLnJlY2VpdmVyVHJhbnNmb3Jtcztcblx0XHRcdFx0cGNfY29uZmlnW1wiZm9yY2VFbmNvZGVkQXVkaW9JbnNlcnRhYmxlU3RyZWFtc1wiXSA9IHRydWU7XG5cdFx0XHRcdHBjX2NvbmZpZ1tcImZvcmNlRW5jb2RlZFZpZGVvSW5zZXJ0YWJsZVN0cmVhbXNcIl0gPSB0cnVlO1xuXHRcdFx0XHRwY19jb25maWdbXCJlbmNvZGVkSW5zZXJ0YWJsZVN0cmVhbXNcIl0gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0SmFudXMubG9nKFwiQ3JlYXRpbmcgUGVlckNvbm5lY3Rpb25cIik7XG5cdFx0XHRKYW51cy5kZWJ1ZyhwY19jb25zdHJhaW50cyk7XG5cdFx0XHRjb25maWcucGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24ocGNfY29uZmlnLCBwY19jb25zdHJhaW50cyk7XG5cdFx0XHRKYW51cy5kZWJ1Zyhjb25maWcucGMpO1xuXHRcdFx0aWYoY29uZmlnLnBjLmdldFN0YXRzKSB7XHQvLyBGSVhNRVxuXHRcdFx0XHRjb25maWcudm9sdW1lID0ge307XG5cdFx0XHRcdGNvbmZpZy5iaXRyYXRlLnZhbHVlID0gXCIwIGtiaXRzL3NlY1wiO1xuXHRcdFx0fVxuXHRcdFx0SmFudXMubG9nKFwiUHJlcGFyaW5nIGxvY2FsIFNEUCBhbmQgZ2F0aGVyaW5nIGNhbmRpZGF0ZXMgKHRyaWNrbGU9XCIgKyBjb25maWcudHJpY2tsZSArIFwiKVwiKTtcblx0XHRcdGNvbmZpZy5wYy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZihjb25maWcucGMpXG5cdFx0XHRcdFx0cGx1Z2luSGFuZGxlLmljZVN0YXRlKGNvbmZpZy5wYy5pY2VDb25uZWN0aW9uU3RhdGUpO1xuXHRcdFx0fTtcblx0XHRcdGNvbmZpZy5wYy5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdGlmICghZXZlbnQuY2FuZGlkYXRlIHx8XG5cdFx0XHRcdFx0XHQoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZWRnZScgJiYgZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZS5pbmRleE9mKCdlbmRPZkNhbmRpZGF0ZXMnKSA+IDApKSB7XG5cdFx0XHRcdFx0SmFudXMubG9nKFwiRW5kIG9mIGNhbmRpZGF0ZXMuXCIpO1xuXHRcdFx0XHRcdGNvbmZpZy5pY2VEb25lID0gdHJ1ZTtcblx0XHRcdFx0XHRpZihjb25maWcudHJpY2tsZSA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0Ly8gTm90aWZ5IGVuZCBvZiBjYW5kaWRhdGVzXG5cdFx0XHRcdFx0XHRzZW5kVHJpY2tsZUNhbmRpZGF0ZShoYW5kbGVJZCwge1wiY29tcGxldGVkXCI6IHRydWV9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gTm8gdHJpY2tsZSwgdGltZSB0byBzZW5kIHRoZSBjb21wbGV0ZSBTRFAgKGluY2x1ZGluZyBhbGwgY2FuZGlkYXRlcylcblx0XHRcdFx0XHRcdHNlbmRTRFAoaGFuZGxlSWQsIGNhbGxiYWNrcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEpTT04uc3RyaW5naWZ5IGRvZXNuJ3Qgd29yayBvbiBzb21lIFdlYlJUQyBvYmplY3RzIGFueW1vcmVcblx0XHRcdFx0XHQvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ2NzM2NlxuXHRcdFx0XHRcdHZhciBjYW5kaWRhdGUgPSB7XG5cdFx0XHRcdFx0XHRcImNhbmRpZGF0ZVwiOiBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlLFxuXHRcdFx0XHRcdFx0XCJzZHBNaWRcIjogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCxcblx0XHRcdFx0XHRcdFwic2RwTUxpbmVJbmRleFwiOiBldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0aWYoY29uZmlnLnRyaWNrbGUgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdC8vIFNlbmQgY2FuZGlkYXRlXG5cdFx0XHRcdFx0XHRzZW5kVHJpY2tsZUNhbmRpZGF0ZShoYW5kbGVJZCwgY2FuZGlkYXRlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRjb25maWcucGMub250cmFjayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdEphbnVzLmxvZyhcIkhhbmRsaW5nIFJlbW90ZSBUcmFja1wiKTtcblx0XHRcdFx0SmFudXMuZGVidWcoZXZlbnQpO1xuXHRcdFx0XHRpZighZXZlbnQuc3RyZWFtcylcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdGNvbmZpZy5yZW1vdGVTdHJlYW0gPSBldmVudC5zdHJlYW1zWzBdO1xuXHRcdFx0XHRwbHVnaW5IYW5kbGUub25yZW1vdGVzdHJlYW0oY29uZmlnLnJlbW90ZVN0cmVhbSk7XG5cdFx0XHRcdGlmKGV2ZW50LnRyYWNrLm9uZW5kZWQpXG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRpZihjb25maWcucmVjZWl2ZXJUcmFuc2Zvcm1zKSB7XG5cdFx0XHRcdFx0dmFyIHJlY2VpdmVyU3RyZWFtcyA9IG51bGw7XG5cdFx0XHRcdFx0aWYoUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5jcmVhdGVFbmNvZGVkU3RyZWFtcykge1xuXHRcdFx0XHRcdFx0cmVjZWl2ZXJTdHJlYW1zID0gZXZlbnQucmVjZWl2ZXIuY3JlYXRlRW5jb2RlZFN0cmVhbXMoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5jcmVhdGVBdWRpb0VuY29kZWRTdHJlYW1zIHx8IFJUQ1J0cFNlbmRlci5wcm90b3R5cGUuY3JlYXRlRW5jb2RlZFZpZGVvU3RyZWFtcykge1xuXHRcdFx0XHRcdFx0aWYoZXZlbnQudHJhY2sua2luZCA9PT0gXCJhdWRpb1wiICYmIGNvbmZpZy5yZWNlaXZlclRyYW5zZm9ybXNbXCJhdWRpb1wiXSkge1xuXHRcdFx0XHRcdFx0XHRyZWNlaXZlclN0cmVhbXMgPSBldmVudC5yZWNlaXZlci5jcmVhdGVFbmNvZGVkQXVkaW9TdHJlYW1zKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoZXZlbnQudHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiICYmIGNvbmZpZy5yZWNlaXZlclRyYW5zZm9ybXNbXCJ2aWRlb1wiXSkge1xuXHRcdFx0XHRcdFx0XHRyZWNlaXZlclN0cmVhbXMgPSBldmVudC5yZWNlaXZlci5jcmVhdGVFbmNvZGVkVmlkZW9TdHJlYW1zKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHJlY2VpdmVyU3RyZWFtcykge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2cocmVjZWl2ZXJTdHJlYW1zKTtcblx0XHRcdFx0XHRcdGlmKHJlY2VpdmVyU3RyZWFtcy5yZWFkYWJsZVN0cmVhbSAmJiByZWNlaXZlclN0cmVhbXMud3JpdGFibGVTdHJlYW0pIHtcblx0XHRcdFx0XHRcdFx0cmVjZWl2ZXJTdHJlYW1zLnJlYWRhYmxlU3RyZWFtXG5cdFx0XHRcdFx0XHRcdFx0LnBpcGVUaHJvdWdoKGNvbmZpZy5yZWNlaXZlclRyYW5zZm9ybXNbZXZlbnQudHJhY2sua2luZF0pXG5cdFx0XHRcdFx0XHRcdFx0LnBpcGVUbyhyZWNlaXZlclN0cmVhbXMud3JpdGFibGVTdHJlYW0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKHJlY2VpdmVyU3RyZWFtcy5yZWFkYWJsZSAmJiByZWNlaXZlclN0cmVhbXMud3JpdGFibGUpIHtcblx0XHRcdFx0XHRcdFx0cmVjZWl2ZXJTdHJlYW1zLnJlYWRhYmxlXG5cdFx0XHRcdFx0XHRcdFx0LnBpcGVUaHJvdWdoKGNvbmZpZy5yZWNlaXZlclRyYW5zZm9ybXNbZXZlbnQudHJhY2sua2luZF0pXG5cdFx0XHRcdFx0XHRcdFx0LnBpcGVUbyhyZWNlaXZlclN0cmVhbXMud3JpdGFibGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgdHJhY2tNdXRlZFRpbWVvdXRJZCA9IG51bGw7XG5cdFx0XHRcdEphbnVzLmxvZyhcIkFkZGluZyBvbmVuZGVkIGNhbGxiYWNrIHRvIHRyYWNrOlwiLCBldmVudC50cmFjayk7XG5cdFx0XHRcdGV2ZW50LnRyYWNrLm9uZW5kZWQgPSBmdW5jdGlvbihldikge1xuXHRcdFx0XHRcdEphbnVzLmxvZyhcIlJlbW90ZSB0cmFjayByZW1vdmVkOlwiLCBldik7XG5cdFx0XHRcdFx0aWYoY29uZmlnLnJlbW90ZVN0cmVhbSkge1xuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRyYWNrTXV0ZWRUaW1lb3V0SWQpO1xuXHRcdFx0XHRcdFx0Y29uZmlnLnJlbW90ZVN0cmVhbS5yZW1vdmVUcmFjayhldi50YXJnZXQpO1xuXHRcdFx0XHRcdFx0cGx1Z2luSGFuZGxlLm9ucmVtb3Rlc3RyZWFtKGNvbmZpZy5yZW1vdGVTdHJlYW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0ZXZlbnQudHJhY2sub25tdXRlID0gZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHRKYW51cy5sb2coXCJSZW1vdGUgdHJhY2sgbXV0ZWQ6XCIsIGV2KTtcblx0XHRcdFx0XHRpZihjb25maWcucmVtb3RlU3RyZWFtICYmIHRyYWNrTXV0ZWRUaW1lb3V0SWQgPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0dHJhY2tNdXRlZFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlJlbW92aW5nIHJlbW90ZSB0cmFja1wiKTtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpZy5yZW1vdGVTdHJlYW0pIHtcblx0XHRcdFx0XHRcdFx0XHRjb25maWcucmVtb3RlU3RyZWFtLnJlbW92ZVRyYWNrKGV2LnRhcmdldCk7XG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luSGFuZGxlLm9ucmVtb3Rlc3RyZWFtKGNvbmZpZy5yZW1vdGVTdHJlYW0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHRyYWNrTXV0ZWRUaW1lb3V0SWQgPSBudWxsO1xuXHRcdFx0XHRcdFx0Ly8gQ2hyb21lIHNlZW1zIHRvIHJhaXNlIG11dGUgZXZlbnRzIG9ubHkgYXQgbXVsdGlwbGVzIG9mIDgzNG1zO1xuXHRcdFx0XHRcdFx0Ly8gd2Ugc2V0IHRoZSB0aW1lb3V0IHRvIHRocmVlIHRpbWVzIHRoaXMgdmFsdWUgKHJvdW5kZWQgdG8gODQwbXMpXG5cdFx0XHRcdFx0XHR9LCAzICogODQwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGV2ZW50LnRyYWNrLm9udW5tdXRlID0gZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHRKYW51cy5sb2coXCJSZW1vdGUgdHJhY2sgZmxvd2luZyBhZ2FpbjpcIiwgZXYpO1xuXHRcdFx0XHRcdGlmKHRyYWNrTXV0ZWRUaW1lb3V0SWQgIT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRyYWNrTXV0ZWRUaW1lb3V0SWQpO1xuXHRcdFx0XHRcdFx0dHJhY2tNdXRlZFRpbWVvdXRJZCA9IG51bGw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvbmZpZy5yZW1vdGVTdHJlYW0uYWRkVHJhY2soZXYudGFyZ2V0KTtcblx0XHRcdFx0XHRcdFx0cGx1Z2luSGFuZGxlLm9ucmVtb3Rlc3RyZWFtKGNvbmZpZy5yZW1vdGVTdHJlYW0pO1xuXHRcdFx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmVycm9yKGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdGlmKGFkZFRyYWNrcyAmJiBzdHJlYW0pIHtcblx0XHRcdEphbnVzLmxvZygnQWRkaW5nIGxvY2FsIHN0cmVhbScpO1xuXHRcdFx0dmFyIHNpbXVsY2FzdCA9IChjYWxsYmFja3Muc2ltdWxjYXN0ID09PSB0cnVlIHx8IGNhbGxiYWNrcy5zaW11bGNhc3QyID09PSB0cnVlKSAmJiBKYW51cy51bmlmaWVkUGxhbjtcblx0XHRcdHZhciBzdmMgPSBjYWxsYmFja3Muc3ZjO1xuXHRcdFx0c3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcblx0XHRcdFx0SmFudXMubG9nKCdBZGRpbmcgbG9jYWwgdHJhY2s6JywgdHJhY2spO1xuXHRcdFx0XHR2YXIgc2VuZGVyID0gbnVsbDtcblx0XHRcdFx0aWYoKCFzaW11bGNhc3QgJiYgIXN2YykgfHwgdHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuXHRcdFx0XHRcdHNlbmRlciA9IGNvbmZpZy5wYy5hZGRUcmFjayh0cmFjaywgc3RyZWFtKTtcblx0XHRcdFx0fSBlbHNlIGlmKHNpbXVsY2FzdCkge1xuXHRcdFx0XHRcdEphbnVzLmxvZygnRW5hYmxpbmcgcmlkLWJhc2VkIHNpbXVsY2FzdGluZzonLCB0cmFjayk7XG5cdFx0XHRcdFx0bGV0IG1heEJpdHJhdGVzID0gZ2V0TWF4Qml0cmF0ZXMoY2FsbGJhY2tzLnNpbXVsY2FzdE1heEJpdHJhdGVzKTtcblx0XHRcdFx0XHRsZXQgdHIgPSBjb25maWcucGMuYWRkVHJhbnNjZWl2ZXIodHJhY2ssIHtcblx0XHRcdFx0XHRcdGRpcmVjdGlvbjogXCJzZW5kcmVjdlwiLFxuXHRcdFx0XHRcdFx0c3RyZWFtczogW3N0cmVhbV0sXG5cdFx0XHRcdFx0XHRzZW5kRW5jb2RpbmdzOiBjYWxsYmFja3Muc2VuZEVuY29kaW5ncyB8fCBbXG5cdFx0XHRcdFx0XHRcdHsgcmlkOiBcImhcIiwgYWN0aXZlOiB0cnVlLCBtYXhCaXRyYXRlOiBtYXhCaXRyYXRlcy5oaWdoIH0sXG5cdFx0XHRcdFx0XHRcdHsgcmlkOiBcIm1cIiwgYWN0aXZlOiB0cnVlLCBtYXhCaXRyYXRlOiBtYXhCaXRyYXRlcy5tZWRpdW0sIHNjYWxlUmVzb2x1dGlvbkRvd25CeTogMiB9LFxuXHRcdFx0XHRcdFx0XHR7IHJpZDogXCJsXCIsIGFjdGl2ZTogdHJ1ZSwgbWF4Qml0cmF0ZTogbWF4Qml0cmF0ZXMubG93LCBzY2FsZVJlc29sdXRpb25Eb3duQnk6IDQgfVxuXHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmKHRyKVxuXHRcdFx0XHRcdFx0c2VuZGVyID0gdHIuc2VuZGVyO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdEphbnVzLmxvZygnRW5hYmxpbmcgU1ZDICgnICsgc3ZjICsgJyk6JywgdHJhY2spO1xuXHRcdFx0XHRcdGxldCB0ciA9IGNvbmZpZy5wYy5hZGRUcmFuc2NlaXZlcih0cmFjaywge1xuXHRcdFx0XHRcdFx0ZGlyZWN0aW9uOiBcInNlbmRyZWN2XCIsXG5cdFx0XHRcdFx0XHRzdHJlYW1zOiBbc3RyZWFtXSxcblx0XHRcdFx0XHRcdHNlbmRFbmNvZGluZ3M6IFtcblx0XHRcdFx0XHRcdFx0eyBzY2FsYWJpbGl0eU1vZGU6IHN2YyB9XG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYodHIpXG5cdFx0XHRcdFx0XHRzZW5kZXIgPSB0ci5zZW5kZXI7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaW5zZXJ0YWJsZSBzdHJlYW1zIGFyZSBpbnZvbHZlZFxuXHRcdFx0XHRpZihzZW5kZXIgJiYgY29uZmlnLnNlbmRlclRyYW5zZm9ybXMpIHtcblx0XHRcdFx0XHR2YXIgc2VuZGVyU3RyZWFtcyA9IG51bGw7XG5cdFx0XHRcdFx0aWYoUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5jcmVhdGVFbmNvZGVkU3RyZWFtcykge1xuXHRcdFx0XHRcdFx0c2VuZGVyU3RyZWFtcyA9IHNlbmRlci5jcmVhdGVFbmNvZGVkU3RyZWFtcygpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihSVENSdHBTZW5kZXIucHJvdG90eXBlLmNyZWF0ZUF1ZGlvRW5jb2RlZFN0cmVhbXMgfHwgUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5jcmVhdGVFbmNvZGVkVmlkZW9TdHJlYW1zKSB7XG5cdFx0XHRcdFx0XHRpZihzZW5kZXIudHJhY2sua2luZCA9PT0gXCJhdWRpb1wiICYmIGNvbmZpZy5zZW5kZXJUcmFuc2Zvcm1zW1wiYXVkaW9cIl0pIHtcblx0XHRcdFx0XHRcdFx0c2VuZGVyU3RyZWFtcyA9IHNlbmRlci5jcmVhdGVFbmNvZGVkQXVkaW9TdHJlYW1zKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoc2VuZGVyLnRyYWNrLmtpbmQgPT09IFwidmlkZW9cIiAmJiBjb25maWcuc2VuZGVyVHJhbnNmb3Jtc1tcInZpZGVvXCJdKSB7XG5cdFx0XHRcdFx0XHRcdHNlbmRlclN0cmVhbXMgPSBzZW5kZXIuY3JlYXRlRW5jb2RlZFZpZGVvU3RyZWFtcygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihzZW5kZXJTdHJlYW1zKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhzZW5kZXJTdHJlYW1zKTtcblx0XHRcdFx0XHRcdGlmKHNlbmRlclN0cmVhbXMucmVhZGFibGVTdHJlYW0gJiYgc2VuZGVyU3RyZWFtcy53cml0YWJsZVN0cmVhbSkge1xuXHRcdFx0XHRcdFx0XHRzZW5kZXJTdHJlYW1zLnJlYWRhYmxlU3RyZWFtXG5cdFx0XHRcdFx0XHRcdFx0LnBpcGVUaHJvdWdoKGNvbmZpZy5zZW5kZXJUcmFuc2Zvcm1zW3NlbmRlci50cmFjay5raW5kXSlcblx0XHRcdFx0XHRcdFx0XHQucGlwZVRvKHNlbmRlclN0cmVhbXMud3JpdGFibGVTdHJlYW0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKHNlbmRlclN0cmVhbXMucmVhZGFibGUgJiYgc2VuZGVyU3RyZWFtcy53cml0YWJsZSkge1xuXHRcdFx0XHRcdFx0XHRzZW5kZXJTdHJlYW1zLnJlYWRhYmxlXG5cdFx0XHRcdFx0XHRcdFx0LnBpcGVUaHJvdWdoKGNvbmZpZy5zZW5kZXJUcmFuc2Zvcm1zW3NlbmRlci50cmFjay5raW5kXSlcblx0XHRcdFx0XHRcdFx0XHQucGlwZVRvKHNlbmRlclN0cmVhbXMud3JpdGFibGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIEFueSBkYXRhIGNoYW5uZWwgdG8gY3JlYXRlP1xuXHRcdGlmKGlzRGF0YUVuYWJsZWQobWVkaWEpICYmICFjb25maWcuZGF0YUNoYW5uZWxbSmFudXMuZGF0YUNoYW5EZWZhdWx0TGFiZWxdKSB7XG5cdFx0XHRKYW51cy5sb2coXCJDcmVhdGluZyBkZWZhdWx0IGRhdGEgY2hhbm5lbFwiKTtcblx0XHRcdGNyZWF0ZURhdGFDaGFubmVsKGhhbmRsZUlkLCBKYW51cy5kYXRhQ2hhbkRlZmF1bHRMYWJlbCwgbnVsbCwgZmFsc2UpO1xuXHRcdFx0Y29uZmlnLnBjLm9uZGF0YWNoYW5uZWwgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRKYW51cy5sb2coXCJEYXRhIGNoYW5uZWwgY3JlYXRlZCBieSBKYW51czpcIiwgZXZlbnQpO1xuXHRcdFx0XHRjcmVhdGVEYXRhQ2hhbm5lbChoYW5kbGVJZCwgZXZlbnQuY2hhbm5lbC5sYWJlbCwgZXZlbnQuY2hhbm5lbC5wcm90b2NvbCwgZXZlbnQuY2hhbm5lbCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHQvLyBJZiB0aGVyZSdzIGEgbmV3IGxvY2FsIHN0cmVhbSwgbGV0J3Mgbm90aWZ5IHRoZSBhcHBsaWNhdGlvblxuXHRcdGlmKGNvbmZpZy5teVN0cmVhbSkge1xuXHRcdFx0cGx1Z2luSGFuZGxlLm9ubG9jYWxzdHJlYW0oY29uZmlnLm15U3RyZWFtKTtcblx0XHR9XG5cdFx0Ly8gQ3JlYXRlIG9mZmVyL2Fuc3dlciBub3dcblx0XHRpZighanNlcCkge1xuXHRcdFx0Y3JlYXRlT2ZmZXIoaGFuZGxlSWQsIG1lZGlhLCBjYWxsYmFja3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25maWcucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oanNlcClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0SmFudXMubG9nKFwiUmVtb3RlIGRlc2NyaXB0aW9uIGFjY2VwdGVkIVwiKTtcblx0XHRcdFx0XHRjb25maWcucmVtb3RlU2RwID0ganNlcC5zZHA7XG5cdFx0XHRcdFx0Ly8gQW55IHRyaWNrbGUgY2FuZGlkYXRlIHdlIGNhY2hlZD9cblx0XHRcdFx0XHRpZihjb25maWcuY2FuZGlkYXRlcyAmJiBjb25maWcuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpPCBjb25maWcuY2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHR2YXIgY2FuZGlkYXRlID0gY29uZmlnLmNhbmRpZGF0ZXNbaV07XG5cdFx0XHRcdFx0XHRcdEphbnVzLmRlYnVnKFwiQWRkaW5nIHJlbW90ZSBjYW5kaWRhdGU6XCIsIGNhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHRcdGlmKCFjYW5kaWRhdGUgfHwgY2FuZGlkYXRlLmNvbXBsZXRlZCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVuZC1vZi1jYW5kaWRhdGVzXG5cdFx0XHRcdFx0XHRcdFx0Y29uZmlnLnBjLmFkZEljZUNhbmRpZGF0ZShKYW51cy5lbmRPZkNhbmRpZGF0ZXMpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE5ldyBjYW5kaWRhdGVcblx0XHRcdFx0XHRcdFx0XHRjb25maWcucGMuYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbmZpZy5jYW5kaWRhdGVzID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIENyZWF0ZSB0aGUgYW5zd2VyIG5vd1xuXHRcdFx0XHRcdGNyZWF0ZUFuc3dlcihoYW5kbGVJZCwgbWVkaWEsIGNhbGxiYWNrcyk7XG5cdFx0XHRcdH0sIGNhbGxiYWNrcy5lcnJvcik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gcHJlcGFyZVdlYnJ0YyhoYW5kbGVJZCwgb2ZmZXIsIGNhbGxiYWNrcykge1xuXHRcdGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcblx0XHRjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcblx0XHRjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogd2VicnRjRXJyb3I7XG5cdFx0dmFyIGpzZXAgPSBjYWxsYmFja3MuanNlcDtcblx0XHRpZihvZmZlciAmJiBqc2VwKSB7XG5cdFx0XHRKYW51cy5lcnJvcihcIlByb3ZpZGVkIGEgSlNFUCB0byBhIGNyZWF0ZU9mZmVyXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiUHJvdmlkZWQgYSBKU0VQIHRvIGEgY3JlYXRlT2ZmZXJcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIGlmKCFvZmZlciAmJiAoIWpzZXAgfHwgIWpzZXAudHlwZSB8fCAhanNlcC5zZHApKSB7XG5cdFx0XHRKYW51cy5lcnJvcihcIkEgdmFsaWQgSlNFUCBpcyByZXF1aXJlZCBmb3IgY3JlYXRlQW5zd2VyXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiQSB2YWxpZCBKU0VQIGlzIHJlcXVpcmVkIGZvciBjcmVhdGVBbnN3ZXJcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8qIENoZWNrIHRoYXQgY2FsbGJhY2tzLm1lZGlhIGlzIGEgKG5vdCBudWxsKSBPYmplY3QgKi9cblx0XHRjYWxsYmFja3MubWVkaWEgPSAodHlwZW9mIGNhbGxiYWNrcy5tZWRpYSA9PT0gJ29iamVjdCcgJiYgY2FsbGJhY2tzLm1lZGlhKSA/IGNhbGxiYWNrcy5tZWRpYSA6IHsgYXVkaW86IHRydWUsIHZpZGVvOiB0cnVlIH07XG5cdFx0dmFyIG1lZGlhID0gY2FsbGJhY2tzLm1lZGlhO1xuXHRcdHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcblx0XHRpZighcGx1Z2luSGFuZGxlIHx8ICFwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYpIHtcblx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZVwiKTtcblx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuXHRcdGNvbmZpZy50cmlja2xlID0gaXNUcmlja2xlRW5hYmxlZChjYWxsYmFja3MudHJpY2tsZSk7XG5cdFx0Ly8gQXJlIHdlIHVwZGF0aW5nIGEgc2Vzc2lvbj9cblx0XHRpZighY29uZmlnLnBjKSB7XG5cdFx0XHQvLyBOb3BlLCBuZXcgUGVlckNvbm5lY3Rpb25cblx0XHRcdG1lZGlhLnVwZGF0ZSA9IGZhbHNlO1xuXHRcdFx0bWVkaWEua2VlcEF1ZGlvID0gZmFsc2U7XG5cdFx0XHRtZWRpYS5rZWVwVmlkZW8gPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0SmFudXMubG9nKFwiVXBkYXRpbmcgZXhpc3RpbmcgbWVkaWEgc2Vzc2lvblwiKTtcblx0XHRcdG1lZGlhLnVwZGF0ZSA9IHRydWU7XG5cdFx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGFueXRoaW5nIHRvIGFkZC9yZW1vdmUvcmVwbGFjZSwgb3IgaWYgd2Vcblx0XHRcdC8vIGNhbiBnbyBkaXJlY3RseSB0byBwcmVwYXJpbmcgdGhlIG5ldyBTRFAgb2ZmZXIgb3IgYW5zd2VyXG5cdFx0XHRpZihjYWxsYmFja3Muc3RyZWFtKSB7XG5cdFx0XHRcdC8vIEV4dGVybmFsIHN0cmVhbTogaXMgdGhpcyB0aGUgc2FtZSBhcyB0aGUgb25lIHdlIHdlcmUgdXNpbmcgYmVmb3JlP1xuXHRcdFx0XHRpZihjYWxsYmFja3Muc3RyZWFtICE9PSBjb25maWcubXlTdHJlYW0pIHtcblx0XHRcdFx0XHRKYW51cy5sb2coXCJSZW5lZ290aWF0aW9uIGludm9sdmVzIGEgbmV3IGV4dGVybmFsIHN0cmVhbVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgYXJlIGNoYW5nZXMgb24gYXVkaW9cblx0XHRcdFx0aWYobWVkaWEuYWRkQXVkaW8pIHtcblx0XHRcdFx0XHRtZWRpYS5rZWVwQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5yZXBsYWNlQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5yZW1vdmVBdWRpbyA9IGZhbHNlO1xuXHRcdFx0XHRcdG1lZGlhLmF1ZGlvU2VuZCA9IHRydWU7XG5cdFx0XHRcdFx0aWYoY29uZmlnLm15U3RyZWFtICYmIGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpICYmIGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0SmFudXMuZXJyb3IoXCJDYW4ndCBhZGQgYXVkaW8gc3RyZWFtLCB0aGVyZSBhbHJlYWR5IGlzIG9uZVwiKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIkNhbid0IGFkZCBhdWRpbyBzdHJlYW0sIHRoZXJlIGFscmVhZHkgaXMgb25lXCIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhLnJlbW92ZUF1ZGlvKSB7XG5cdFx0XHRcdFx0bWVkaWEua2VlcEF1ZGlvID0gZmFsc2U7XG5cdFx0XHRcdFx0bWVkaWEucmVwbGFjZUF1ZGlvID0gZmFsc2U7XG5cdFx0XHRcdFx0bWVkaWEuYWRkQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5hdWRpb1NlbmQgPSBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhLnJlcGxhY2VBdWRpbykge1xuXHRcdFx0XHRcdG1lZGlhLmtlZXBBdWRpbyA9IGZhbHNlO1xuXHRcdFx0XHRcdG1lZGlhLmFkZEF1ZGlvID0gZmFsc2U7XG5cdFx0XHRcdFx0bWVkaWEucmVtb3ZlQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5hdWRpb1NlbmQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCFjb25maWcubXlTdHJlYW0pIHtcblx0XHRcdFx0XHQvLyBObyBtZWRpYSBzdHJlYW06IGlmIHdlIHdlcmUgYXNrZWQgdG8gcmVwbGFjZSwgaXQncyBhY3R1YWxseSBhbiBcImFkZFwiXG5cdFx0XHRcdFx0aWYobWVkaWEucmVwbGFjZUF1ZGlvKSB7XG5cdFx0XHRcdFx0XHRtZWRpYS5rZWVwQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRcdG1lZGlhLnJlcGxhY2VBdWRpbyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0bWVkaWEuYWRkQXVkaW8gPSB0cnVlO1xuXHRcdFx0XHRcdFx0bWVkaWEuYXVkaW9TZW5kID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYoaXNBdWRpb1NlbmRFbmFibGVkKG1lZGlhKSkge1xuXHRcdFx0XHRcdFx0bWVkaWEua2VlcEF1ZGlvID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRtZWRpYS5hZGRBdWRpbyA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmKCFjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSB8fCBjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdC8vIE5vIGF1ZGlvIHRyYWNrOiBpZiB3ZSB3ZXJlIGFza2VkIHRvIHJlcGxhY2UsIGl0J3MgYWN0dWFsbHkgYW4gXCJhZGRcIlxuXHRcdFx0XHRcdFx0aWYobWVkaWEucmVwbGFjZUF1ZGlvKSB7XG5cdFx0XHRcdFx0XHRcdG1lZGlhLmtlZXBBdWRpbyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRtZWRpYS5yZXBsYWNlQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0bWVkaWEuYWRkQXVkaW8gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRtZWRpYS5hdWRpb1NlbmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoaXNBdWRpb1NlbmRFbmFibGVkKG1lZGlhKSkge1xuXHRcdFx0XHRcdFx0XHRtZWRpYS5rZWVwQXVkaW8gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0bWVkaWEuYWRkQXVkaW8gPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBXZSBoYXZlIGFuIGF1ZGlvIHRyYWNrOiBzaG91bGQgd2Uga2VlcCBpdCBhcyBpdCBpcz9cblx0XHRcdFx0XHRcdGlmKGlzQXVkaW9TZW5kRW5hYmxlZChtZWRpYSkgJiZcblx0XHRcdFx0XHRcdFx0XHQhbWVkaWEucmVtb3ZlQXVkaW8gJiYgIW1lZGlhLnJlcGxhY2VBdWRpbykge1xuXHRcdFx0XHRcdFx0XHRtZWRpYS5rZWVwQXVkaW8gPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGVyZSBhcmUgY2hhbmdlcyBvbiB2aWRlb1xuXHRcdFx0XHRpZihtZWRpYS5hZGRWaWRlbykge1xuXHRcdFx0XHRcdG1lZGlhLmtlZXBWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdG1lZGlhLnJlcGxhY2VWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdG1lZGlhLnJlbW92ZVZpZGVvID0gZmFsc2U7XG5cdFx0XHRcdFx0bWVkaWEudmlkZW9TZW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRpZihjb25maWcubXlTdHJlYW0gJiYgY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkgJiYgY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRKYW51cy5lcnJvcihcIkNhbid0IGFkZCB2aWRlbyBzdHJlYW0sIHRoZXJlIGFscmVhZHkgaXMgb25lXCIpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiQ2FuJ3QgYWRkIHZpZGVvIHN0cmVhbSwgdGhlcmUgYWxyZWFkeSBpcyBvbmVcIik7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWEucmVtb3ZlVmlkZW8pIHtcblx0XHRcdFx0XHRtZWRpYS5rZWVwVmlkZW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5yZXBsYWNlVmlkZW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5hZGRWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdG1lZGlhLnZpZGVvU2VuZCA9IGZhbHNlO1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWEucmVwbGFjZVZpZGVvKSB7XG5cdFx0XHRcdFx0bWVkaWEua2VlcFZpZGVvID0gZmFsc2U7XG5cdFx0XHRcdFx0bWVkaWEuYWRkVmlkZW8gPSBmYWxzZTtcblx0XHRcdFx0XHRtZWRpYS5yZW1vdmVWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdG1lZGlhLnZpZGVvU2VuZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIWNvbmZpZy5teVN0cmVhbSkge1xuXHRcdFx0XHRcdC8vIE5vIG1lZGlhIHN0cmVhbTogaWYgd2Ugd2VyZSBhc2tlZCB0byByZXBsYWNlLCBpdCdzIGFjdHVhbGx5IGFuIFwiYWRkXCJcblx0XHRcdFx0XHRpZihtZWRpYS5yZXBsYWNlVmlkZW8pIHtcblx0XHRcdFx0XHRcdG1lZGlhLmtlZXBWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0bWVkaWEucmVwbGFjZVZpZGVvID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRtZWRpYS5hZGRWaWRlbyA9IHRydWU7XG5cdFx0XHRcdFx0XHRtZWRpYS52aWRlb1NlbmQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpKSB7XG5cdFx0XHRcdFx0XHRtZWRpYS5rZWVwVmlkZW8gPSBmYWxzZTtcblx0XHRcdFx0XHRcdG1lZGlhLmFkZFZpZGVvID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYoIWNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpIHx8IGNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0Ly8gTm8gdmlkZW8gdHJhY2s6IGlmIHdlIHdlcmUgYXNrZWQgdG8gcmVwbGFjZSwgaXQncyBhY3R1YWxseSBhbiBcImFkZFwiXG5cdFx0XHRcdFx0XHRpZihtZWRpYS5yZXBsYWNlVmlkZW8pIHtcblx0XHRcdFx0XHRcdFx0bWVkaWEua2VlcFZpZGVvID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdG1lZGlhLnJlcGxhY2VWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRtZWRpYS5hZGRWaWRlbyA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdG1lZGlhLnZpZGVvU2VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpKSB7XG5cdFx0XHRcdFx0XHRcdG1lZGlhLmtlZXBWaWRlbyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRtZWRpYS5hZGRWaWRlbyA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIFdlIGhhdmUgYSB2aWRlbyB0cmFjazogc2hvdWxkIHdlIGtlZXAgaXQgYXMgaXQgaXM/XG5cdFx0XHRcdFx0XHRpZihpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpICYmICFtZWRpYS5yZW1vdmVWaWRlbyAmJiAhbWVkaWEucmVwbGFjZVZpZGVvKSB7XG5cdFx0XHRcdFx0XHRcdG1lZGlhLmtlZXBWaWRlbyA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIERhdGEgY2hhbm5lbHMgY2FuIG9ubHkgYmUgYWRkZWRcblx0XHRcdFx0aWYobWVkaWEuYWRkRGF0YSkge1xuXHRcdFx0XHRcdG1lZGlhLmRhdGEgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBJZiB3ZSdyZSB1cGRhdGluZyBhbmQga2VlcGluZyBhbGwgdHJhY2tzLCBsZXQncyBza2lwIHRoZSBnZXRVc2VyTWVkaWEgcGFydFxuXHRcdFx0aWYoKGlzQXVkaW9TZW5kRW5hYmxlZChtZWRpYSkgJiYgbWVkaWEua2VlcEF1ZGlvKSAmJlxuXHRcdFx0XHRcdChpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpICYmIG1lZGlhLmtlZXBWaWRlbykpIHtcblx0XHRcdFx0cGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpO1xuXHRcdFx0XHRzdHJlYW1zRG9uZShoYW5kbGVJZCwganNlcCwgbWVkaWEsIGNhbGxiYWNrcywgY29uZmlnLm15U3RyZWFtKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBJZiB3ZSdyZSB1cGRhdGluZywgY2hlY2sgaWYgd2UgbmVlZCB0byByZW1vdmUvcmVwbGFjZSBvbmUgb2YgdGhlIHRyYWNrc1xuXHRcdGlmKG1lZGlhLnVwZGF0ZSAmJiAoIWNvbmZpZy5zdHJlYW1FeHRlcm5hbCB8fCAoY29uZmlnLnN0cmVhbUV4dGVybmFsICYmIChtZWRpYS5yZXBsYWNlQXVkaW8gfHwgbWVkaWEucmVwbGFjZVZpZGVvKSkpKSB7XG5cdFx0XHRpZihtZWRpYS5yZW1vdmVBdWRpbyB8fCBtZWRpYS5yZXBsYWNlQXVkaW8pIHtcblx0XHRcdFx0aWYoY29uZmlnLm15U3RyZWFtICYmIGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpICYmIGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCkge1xuXHRcdFx0XHRcdHZhciBhdCA9IGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdO1xuXHRcdFx0XHRcdEphbnVzLmxvZyhcIlJlbW92aW5nIGF1ZGlvIHRyYWNrOlwiLCBhdCk7XG5cdFx0XHRcdFx0Y29uZmlnLm15U3RyZWFtLnJlbW92ZVRyYWNrKGF0KTtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXQuc3RvcCgpO1xuXHRcdFx0XHRcdH0gY2F0Y2goZSkge31cblx0XHRcdFx0fVxuXHRcdFx0XHRpZihjb25maWcucGMuZ2V0U2VuZGVycygpICYmIGNvbmZpZy5wYy5nZXRTZW5kZXJzKCkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dmFyIHJhID0gdHJ1ZTtcblx0XHRcdFx0XHRpZihtZWRpYS5yZXBsYWNlQXVkaW8gJiYgSmFudXMudW5pZmllZFBsYW4pIHtcblx0XHRcdFx0XHRcdC8vIFdlIGNhbiB1c2UgcmVwbGFjZVRyYWNrXG5cdFx0XHRcdFx0XHRyYSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihyYSkge1xuXHRcdFx0XHRcdFx0Zm9yKHZhciBhc25kIG9mIGNvbmZpZy5wYy5nZXRTZW5kZXJzKCkpIHtcblx0XHRcdFx0XHRcdFx0aWYoYXNuZCAmJiBhc25kLnRyYWNrICYmIGFzbmQudHJhY2sua2luZCA9PT0gXCJhdWRpb1wiKSB7XG5cdFx0XHRcdFx0XHRcdFx0SmFudXMubG9nKFwiUmVtb3ZpbmcgYXVkaW8gc2VuZGVyOlwiLCBhc25kKTtcblx0XHRcdFx0XHRcdFx0XHRjb25maWcucGMucmVtb3ZlVHJhY2soYXNuZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKG1lZGlhLnJlbW92ZVZpZGVvIHx8IG1lZGlhLnJlcGxhY2VWaWRlbykge1xuXHRcdFx0XHRpZihjb25maWcubXlTdHJlYW0gJiYgY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkgJiYgY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dmFyIHZ0ID0gY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XG5cdFx0XHRcdFx0SmFudXMubG9nKFwiUmVtb3ZpbmcgdmlkZW8gdHJhY2s6XCIsIHZ0KTtcblx0XHRcdFx0XHRjb25maWcubXlTdHJlYW0ucmVtb3ZlVHJhY2sodnQpO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHR2dC5zdG9wKCk7XG5cdFx0XHRcdFx0fSBjYXRjaChlKSB7fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGNvbmZpZy5wYy5nZXRTZW5kZXJzKCkgJiYgY29uZmlnLnBjLmdldFNlbmRlcnMoKS5sZW5ndGgpIHtcblx0XHRcdFx0XHR2YXIgcnYgPSB0cnVlO1xuXHRcdFx0XHRcdGlmKG1lZGlhLnJlcGxhY2VWaWRlbyAmJiBKYW51cy51bmlmaWVkUGxhbikge1xuXHRcdFx0XHRcdFx0Ly8gV2UgY2FuIHVzZSByZXBsYWNlVHJhY2tcblx0XHRcdFx0XHRcdHJ2ID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHJ2KSB7XG5cdFx0XHRcdFx0XHRmb3IodmFyIHZzbmQgb2YgY29uZmlnLnBjLmdldFNlbmRlcnMoKSkge1xuXHRcdFx0XHRcdFx0XHRpZih2c25kICYmIHZzbmQudHJhY2sgJiYgdnNuZC50cmFjay5raW5kID09PSBcInZpZGVvXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRKYW51cy5sb2coXCJSZW1vdmluZyB2aWRlbyBzZW5kZXI6XCIsIHZzbmQpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbmZpZy5wYy5yZW1vdmVUcmFjayh2c25kKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBXYXMgYSBNZWRpYVN0cmVhbSBvYmplY3QgcGFzc2VkLCBvciBkbyB3ZSBuZWVkIHRvIHRha2UgY2FyZSBvZiB0aGF0P1xuXHRcdGlmKGNhbGxiYWNrcy5zdHJlYW0pIHtcblx0XHRcdHZhciBzdHJlYW0gPSBjYWxsYmFja3Muc3RyZWFtO1xuXHRcdFx0SmFudXMubG9nKFwiTWVkaWFTdHJlYW0gcHJvdmlkZWQgYnkgdGhlIGFwcGxpY2F0aW9uXCIpO1xuXHRcdFx0SmFudXMuZGVidWcoc3RyZWFtKTtcblx0XHRcdC8vIElmIHRoaXMgaXMgYW4gdXBkYXRlLCBsZXQncyBjaGVjayBpZiB3ZSBuZWVkIHRvIHJlbGVhc2UgdGhlIHByZXZpb3VzIHN0cmVhbVxuXHRcdFx0aWYobWVkaWEudXBkYXRlICYmIGNvbmZpZy5teVN0cmVhbSAmJiBjb25maWcubXlTdHJlYW0gIT09IGNhbGxiYWNrcy5zdHJlYW0gJiYgIWNvbmZpZy5zdHJlYW1FeHRlcm5hbCAmJiAhbWVkaWEucmVwbGFjZUF1ZGlvICYmICFtZWRpYS5yZXBsYWNlVmlkZW8pIHtcblx0XHRcdFx0Ly8gV2UncmUgcmVwbGFjaW5nIGEgc3RyZWFtIHdlIGNhcHR1cmVkIG91cnNlbHZlcyB3aXRoIGFuIGV4dGVybmFsIG9uZVxuXHRcdFx0XHRKYW51cy5zdG9wQWxsVHJhY2tzKGNvbmZpZy5teVN0cmVhbSk7XG5cdFx0XHRcdGNvbmZpZy5teVN0cmVhbSA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHQvLyBTa2lwIHRoZSBnZXRVc2VyTWVkaWEgcGFydFxuXHRcdFx0Y29uZmlnLnN0cmVhbUV4dGVybmFsID0gdHJ1ZTtcblx0XHRcdHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcblx0XHRcdHN0cmVhbXNEb25lKGhhbmRsZUlkLCBqc2VwLCBtZWRpYSwgY2FsbGJhY2tzLCBzdHJlYW0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZihpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpIHx8IGlzVmlkZW9TZW5kRW5hYmxlZChtZWRpYSkpIHtcblx0XHRcdGlmKCFKYW51cy5pc0dldFVzZXJNZWRpYUF2YWlsYWJsZSgpKSB7XG5cdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcImdldFVzZXJNZWRpYSBub3QgYXZhaWxhYmxlXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR2YXIgY29uc3RyYWludHMgPSB7IG1hbmRhdG9yeToge30sIG9wdGlvbmFsOiBbXX07XG5cdFx0XHRwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyh0cnVlKTtcblx0XHRcdHZhciBhdWRpb1N1cHBvcnQgPSBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpO1xuXHRcdFx0aWYoYXVkaW9TdXBwb3J0ICYmIG1lZGlhICYmIHR5cGVvZiBtZWRpYS5hdWRpbyA9PT0gJ29iamVjdCcpXG5cdFx0XHRcdGF1ZGlvU3VwcG9ydCA9IG1lZGlhLmF1ZGlvO1xuXHRcdFx0dmFyIHZpZGVvU3VwcG9ydCA9IGlzVmlkZW9TZW5kRW5hYmxlZChtZWRpYSk7XG5cdFx0XHRpZih2aWRlb1N1cHBvcnQgJiYgbWVkaWEpIHtcblx0XHRcdFx0dmFyIHNpbXVsY2FzdCA9IChjYWxsYmFja3Muc2ltdWxjYXN0ID09PSB0cnVlIHx8IGNhbGxiYWNrcy5zaW11bGNhc3QyID09PSB0cnVlKTtcblx0XHRcdFx0dmFyIHN2YyA9IGNhbGxiYWNrcy5zdmM7XG5cdFx0XHRcdGlmKChzaW11bGNhc3QgfHwgc3ZjKSAmJiAhanNlcCAmJiAhbWVkaWEudmlkZW8pXG5cdFx0XHRcdFx0bWVkaWEudmlkZW8gPSBcImhpcmVzXCI7XG5cdFx0XHRcdGlmKG1lZGlhLnZpZGVvICYmIG1lZGlhLnZpZGVvICE9ICdzY3JlZW4nICYmIG1lZGlhLnZpZGVvICE9ICd3aW5kb3cnKSB7XG5cdFx0XHRcdFx0aWYodHlwZW9mIG1lZGlhLnZpZGVvID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdFx0dmlkZW9TdXBwb3J0ID0gbWVkaWEudmlkZW87XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciB3aWR0aCA9IDA7XG5cdFx0XHRcdFx0XHR2YXIgaGVpZ2h0ID0gMDtcblx0XHRcdFx0XHRcdGlmKG1lZGlhLnZpZGVvID09PSAnbG93cmVzJykge1xuXHRcdFx0XHRcdFx0XHQvLyBTbWFsbCByZXNvbHV0aW9uLCA0OjNcblx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gMjQwO1xuXHRcdFx0XHRcdFx0XHR3aWR0aCA9IDMyMDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihtZWRpYS52aWRlbyA9PT0gJ2xvd3Jlcy0xNjo5Jykge1xuXHRcdFx0XHRcdFx0XHQvLyBTbWFsbCByZXNvbHV0aW9uLCAxNjo5XG5cdFx0XHRcdFx0XHRcdGhlaWdodCA9IDE4MDtcblx0XHRcdFx0XHRcdFx0d2lkdGggPSAzMjA7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYobWVkaWEudmlkZW8gPT09ICdoaXJlcycgfHwgbWVkaWEudmlkZW8gPT09ICdoaXJlcy0xNjo5JyB8fCBtZWRpYS52aWRlbyA9PT0gJ2hkcmVzJykge1xuXHRcdFx0XHRcdFx0XHQvLyBIaWdoKEhEKSByZXNvbHV0aW9uIGlzIG9ubHkgMTY6OVxuXHRcdFx0XHRcdFx0XHRoZWlnaHQgPSA3MjA7XG5cdFx0XHRcdFx0XHRcdHdpZHRoID0gMTI4MDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihtZWRpYS52aWRlbyA9PT0gJ2ZoZHJlcycpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRnVsbCBIRCByZXNvbHV0aW9uIGlzIG9ubHkgMTY6OVxuXHRcdFx0XHRcdFx0XHRoZWlnaHQgPSAxMDgwO1xuXHRcdFx0XHRcdFx0XHR3aWR0aCA9IDE5MjA7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYobWVkaWEudmlkZW8gPT09ICc0a3JlcycpIHtcblx0XHRcdFx0XHRcdFx0Ly8gNEsgcmVzb2x1dGlvbiBpcyBvbmx5IDE2Ojlcblx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gMjE2MDtcblx0XHRcdFx0XHRcdFx0d2lkdGggPSAzODQwO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhLnZpZGVvID09PSAnc3RkcmVzJykge1xuXHRcdFx0XHRcdFx0XHQvLyBOb3JtYWwgcmVzb2x1dGlvbiwgNDozXG5cdFx0XHRcdFx0XHRcdGhlaWdodCA9IDQ4MDtcblx0XHRcdFx0XHRcdFx0d2lkdGggPSA2NDA7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYobWVkaWEudmlkZW8gPT09ICdzdGRyZXMtMTY6OScpIHtcblx0XHRcdFx0XHRcdFx0Ly8gTm9ybWFsIHJlc29sdXRpb24sIDE2Ojlcblx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gMzYwO1xuXHRcdFx0XHRcdFx0XHR3aWR0aCA9IDY0MDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIkRlZmF1bHQgdmlkZW8gc2V0dGluZyBpcyBzdGRyZXMgNDozXCIpO1xuXHRcdFx0XHRcdFx0XHRoZWlnaHQgPSA0ODA7XG5cdFx0XHRcdFx0XHRcdHdpZHRoID0gNjQwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiQWRkaW5nIG1lZGlhIGNvbnN0cmFpbnQ6XCIsIG1lZGlhLnZpZGVvKTtcblx0XHRcdFx0XHRcdHZpZGVvU3VwcG9ydCA9IHtcblx0XHRcdFx0XHRcdFx0J2hlaWdodCc6IHsnaWRlYWwnOiBoZWlnaHR9LFxuXHRcdFx0XHRcdFx0XHQnd2lkdGgnOiB7J2lkZWFsJzogd2lkdGh9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiQWRkaW5nIHZpZGVvIGNvbnN0cmFpbnQ6XCIsIHZpZGVvU3VwcG9ydCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWEudmlkZW8gPT09ICdzY3JlZW4nIHx8IG1lZGlhLnZpZGVvID09PSAnd2luZG93Jykge1xuXHRcdFx0XHRcdGlmKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEpIHtcblx0XHRcdFx0XHRcdC8vIFRoZSBuZXcgZXhwZXJpbWVudGFsIGdldERpc3BsYXlNZWRpYSBBUEkgaXMgYXZhaWxhYmxlLCBsZXQncyB1c2UgdGhhdFxuXHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9ncm91cHMuZ29vZ2xlLmNvbS9mb3J1bS8jIXRvcGljL2Rpc2N1c3Mtd2VicnRjL1VmMFNyUjR1eHprXG5cdFx0XHRcdFx0XHQvLyBodHRwczovL3dlYnJ0Y2hhY2tzLmNvbS9jaHJvbWUtc2NyZWVuc2hhcmluZy1nZXRkaXNwbGF5bWVkaWEvXG5cdFx0XHRcdFx0XHRjb25zdHJhaW50cy52aWRlbyA9IHt9O1xuXHRcdFx0XHRcdFx0aWYobWVkaWEuc2NyZWVuc2hhcmVGcmFtZVJhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3RyYWludHMudmlkZW8uZnJhbWVSYXRlID0gbWVkaWEuc2NyZWVuc2hhcmVGcmFtZVJhdGU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihtZWRpYS5zY3JlZW5zaGFyZUhlaWdodCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdHJhaW50cy52aWRlby5oZWlnaHQgPSBtZWRpYS5zY3JlZW5zaGFyZUhlaWdodDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKG1lZGlhLnNjcmVlbnNoYXJlV2lkdGgpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3RyYWludHMudmlkZW8ud2lkdGggPSBtZWRpYS5zY3JlZW5zaGFyZVdpZHRoO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29uc3RyYWludHMuYXVkaW8gPSBtZWRpYS5jYXB0dXJlRGVza3RvcEF1ZGlvO1xuXHRcdFx0XHRcdFx0bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEoY29uc3RyYWludHMpXG5cdFx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHN0cmVhbSkge1xuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHRpZihpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpICYmICFtZWRpYS5rZWVwQXVkaW8pIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUsIHZpZGVvOiBmYWxzZSB9KVxuXHRcdFx0XHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKGF1ZGlvU3RyZWFtKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmVhbS5hZGRUcmFjayhhdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyZWFtc0RvbmUoaGFuZGxlSWQsIGpzZXAsIG1lZGlhLCBjYWxsYmFja3MsIHN0cmVhbSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzdHJlYW1zRG9uZShoYW5kbGVJZCwganNlcCwgbWVkaWEsIGNhbGxiYWNrcywgc3RyZWFtKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gV2UncmUgZ29pbmcgdG8gdHJ5IGFuZCB1c2UgdGhlIGV4dGVuc2lvbiBmb3IgQ2hyb21lIDM0KywgdGhlIG9sZCBhcHByb2FjaFxuXHRcdFx0XHRcdC8vIGZvciBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUsIG9yIHRoZSBleHBlcmltZW50YWwgc3VwcG9ydCBpbiBGaXJlZm94IDMzK1xuXHRcdFx0XHRcdGNvbnN0IGNhbGxiYWNrVXNlck1lZGlhID0gZnVuY3Rpb24oZXJyb3IsIHN0cmVhbSkge1xuXHRcdFx0XHRcdFx0cGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpO1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHN0cmVhbXNEb25lKGhhbmRsZUlkLCBqc2VwLCBtZWRpYSwgY2FsbGJhY2tzLCBzdHJlYW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBnZXRTY3JlZW5NZWRpYSA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBnc21DYWxsYmFjaywgdXNlQXVkaW8pIHtcblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIkFkZGluZyBtZWRpYSBjb25zdHJhaW50IChzY3JlZW4gY2FwdHVyZSlcIik7XG5cdFx0XHRcdFx0XHRKYW51cy5kZWJ1Zyhjb25zdHJhaW50cyk7XG5cdFx0XHRcdFx0XHRuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cylcblx0XHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYodXNlQXVkaW8pIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUsIHZpZGVvOiBmYWxzZSB9KVxuXHRcdFx0XHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKGF1ZGlvU3RyZWFtKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmVhbS5hZGRUcmFjayhhdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Z3NtQ2FsbGJhY2sobnVsbCwgc3RyZWFtKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGdzbUNhbGxiYWNrKG51bGwsIHN0cmVhbSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsgcGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpOyBnc21DYWxsYmFjayhlcnJvcik7IH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihKYW51cy53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnKSB7XG5cdFx0XHRcdFx0XHR2YXIgY2hyb21ldmVyID0gSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9uO1xuXHRcdFx0XHRcdFx0dmFyIG1heHZlciA9IDMzO1xuXHRcdFx0XHRcdFx0aWYod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goJ0xpbnV4JykpXG5cdFx0XHRcdFx0XHRcdG1heHZlciA9IDM1O1x0Ly8gXCJrbm93blwiIGNyYXNoIGluIGNocm9tZSAzNCBhbmQgMzUgb24gbGludXhcblx0XHRcdFx0XHRcdGlmKGNocm9tZXZlciA+PSAyNiAmJiBjaHJvbWV2ZXIgPD0gbWF4dmVyKSB7XG5cdFx0XHRcdFx0XHRcdC8vIENocm9tZSAyNi0+MzMgcmVxdWlyZXMgc29tZSBhd2t3YXJkIGNocm9tZTovL2ZsYWdzIG1hbmlwdWxhdGlvblxuXHRcdFx0XHRcdFx0XHRjb25zdHJhaW50cyA9IHtcblx0XHRcdFx0XHRcdFx0XHR2aWRlbzoge1xuXHRcdFx0XHRcdFx0XHRcdFx0bWFuZGF0b3J5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGdvb2dMZWFreUJ1Y2tldDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWF4V2lkdGg6IHdpbmRvdy5zY3JlZW4ud2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1heEhlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1pbkZyYW1lUmF0ZTogbWVkaWEuc2NyZWVuc2hhcmVGcmFtZVJhdGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1heEZyYW1lUmF0ZTogbWVkaWEuc2NyZWVuc2hhcmVGcmFtZVJhdGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNocm9tZU1lZGlhU291cmNlOiAnc2NyZWVuJ1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0YXVkaW86IGlzQXVkaW9TZW5kRW5hYmxlZChtZWRpYSkgJiYgIW1lZGlhLmtlZXBBdWRpb1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRnZXRTY3JlZW5NZWRpYShjb25zdHJhaW50cywgY2FsbGJhY2tVc2VyTWVkaWEpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gQ2hyb21lIDM0KyByZXF1aXJlcyBhbiBleHRlbnNpb25cblx0XHRcdFx0XHRcdFx0SmFudXMuZXh0ZW5zaW9uLmdldFNjcmVlbihmdW5jdGlvbiAoZXJyb3IsIHNvdXJjZUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2tzLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3RyYWludHMgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhdWRpbzogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0XHR2aWRlbzoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtYW5kYXRvcnk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaHJvbWVNZWRpYVNvdXJjZTogJ2Rlc2t0b3AnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1heFdpZHRoOiB3aW5kb3cuc2NyZWVuLndpZHRoLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1heEhlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWluRnJhbWVSYXRlOiBtZWRpYS5zY3JlZW5zaGFyZUZyYW1lUmF0ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXhGcmFtZVJhdGU6IG1lZGlhLnNjcmVlbnNoYXJlRnJhbWVSYXRlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvcHRpb25hbDogW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHtnb29nTGVha3lCdWNrZXQ6IHRydWV9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHtnb29nVGVtcG9yYWxMYXllcmVkU2NyZWVuY2FzdDogdHJ1ZX1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3RyYWludHMudmlkZW8ubWFuZGF0b3J5LmNocm9tZU1lZGlhU291cmNlSWQgPSBzb3VyY2VJZDtcblx0XHRcdFx0XHRcdFx0XHRnZXRTY3JlZW5NZWRpYShjb25zdHJhaW50cywgY2FsbGJhY2tVc2VyTWVkaWEsXG5cdFx0XHRcdFx0XHRcdFx0XHRpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpICYmICFtZWRpYS5rZWVwQXVkaW8pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcpIHtcblx0XHRcdFx0XHRcdGlmKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSAzMykge1xuXHRcdFx0XHRcdFx0XHQvLyBGaXJlZm94IDMzKyBoYXMgZXhwZXJpbWVudGFsIHN1cHBvcnQgZm9yIHNjcmVlbiBzaGFyaW5nXG5cdFx0XHRcdFx0XHRcdGNvbnN0cmFpbnRzID0ge1xuXHRcdFx0XHRcdFx0XHRcdHZpZGVvOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRtb3pNZWRpYVNvdXJjZTogbWVkaWEudmlkZW8sXG5cdFx0XHRcdFx0XHRcdFx0XHRtZWRpYVNvdXJjZTogbWVkaWEudmlkZW9cblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGF1ZGlvOiBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpICYmICFtZWRpYS5rZWVwQXVkaW9cblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0Z2V0U2NyZWVuTWVkaWEoY29uc3RyYWludHMsIGZ1bmN0aW9uIChlcnIsIHN0cmVhbSkge1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrVXNlck1lZGlhKGVyciwgc3RyZWFtKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBXb3JrYXJvdW5kIGZvciBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDQ1ODEwXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBsYXN0VGltZSA9IHN0cmVhbS5jdXJyZW50VGltZTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBwb2xseSA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCFzdHJlYW0pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwocG9sbHkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihzdHJlYW0uY3VycmVudFRpbWUgPT0gbGFzdFRpbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbChwb2xseSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoc3RyZWFtLm9uZW5kZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmVhbS5vbmVuZGVkKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhc3RUaW1lID0gc3RyZWFtLmN1cnJlbnRUaW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCdOYXZpZ2F0b3JVc2VyTWVkaWFFcnJvcicpO1xuXHRcdFx0XHRcdFx0XHRlcnJvci5uYW1lID0gJ1lvdXIgdmVyc2lvbiBvZiBGaXJlZm94IGRvZXMgbm90IHN1cHBvcnQgc2NyZWVuIHNoYXJpbmcsIHBsZWFzZSBpbnN0YWxsIEZpcmVmb3ggMzMgKG9yIG1vcmUgcmVjZW50IHZlcnNpb25zKSc7XG5cdFx0XHRcdFx0XHRcdHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIElmIHdlIGdvdCBoZXJlLCB3ZSdyZSBub3Qgc2NyZWVuc2hhcmluZ1xuXHRcdFx0aWYoIW1lZGlhIHx8IG1lZGlhLnZpZGVvICE9PSAnc2NyZWVuJykge1xuXHRcdFx0XHQvLyBDaGVjayB3aGV0aGVyIGFsbCBtZWRpYSBzb3VyY2VzIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgb3Igbm90XG5cdFx0XHRcdG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24oZGV2aWNlcykge1xuXHRcdFx0XHRcdHZhciBhdWRpb0V4aXN0ID0gZGV2aWNlcy5zb21lKGZ1bmN0aW9uKGRldmljZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRldmljZS5raW5kID09PSAnYXVkaW9pbnB1dCc7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0dmlkZW9FeGlzdCA9IGlzU2NyZWVuU2VuZEVuYWJsZWQobWVkaWEpIHx8IGRldmljZXMuc29tZShmdW5jdGlvbihkZXZpY2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkZXZpY2Uua2luZCA9PT0gJ3ZpZGVvaW5wdXQnO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgd2hldGhlciBhIG1pc3NpbmcgZGV2aWNlIGlzIHJlYWxseSBhIHByb2JsZW1cblx0XHRcdFx0XHR2YXIgYXVkaW9TZW5kID0gaXNBdWRpb1NlbmRFbmFibGVkKG1lZGlhKTtcblx0XHRcdFx0XHR2YXIgdmlkZW9TZW5kID0gaXNWaWRlb1NlbmRFbmFibGVkKG1lZGlhKTtcblx0XHRcdFx0XHR2YXIgbmVlZEF1ZGlvRGV2aWNlID0gaXNBdWRpb1NlbmRSZXF1aXJlZChtZWRpYSk7XG5cdFx0XHRcdFx0dmFyIG5lZWRWaWRlb0RldmljZSA9IGlzVmlkZW9TZW5kUmVxdWlyZWQobWVkaWEpO1xuXHRcdFx0XHRcdGlmKGF1ZGlvU2VuZCB8fCB2aWRlb1NlbmQgfHwgbmVlZEF1ZGlvRGV2aWNlIHx8IG5lZWRWaWRlb0RldmljZSkge1xuXHRcdFx0XHRcdFx0Ly8gV2UgbmVlZCB0byBzZW5kIGVpdGhlciBhdWRpbyBvciB2aWRlb1xuXHRcdFx0XHRcdFx0dmFyIGhhdmVBdWRpb0RldmljZSA9IGF1ZGlvU2VuZCA/IGF1ZGlvRXhpc3QgOiBmYWxzZTtcblx0XHRcdFx0XHRcdHZhciBoYXZlVmlkZW9EZXZpY2UgPSB2aWRlb1NlbmQgPyB2aWRlb0V4aXN0IDogZmFsc2U7XG5cdFx0XHRcdFx0XHRpZighaGF2ZUF1ZGlvRGV2aWNlICYmICFoYXZlVmlkZW9EZXZpY2UpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRklYTUUgU2hvdWxkIHdlIHJlYWxseSBnaXZlIHVwLCBvciBqdXN0IGFzc3VtZSByZWN2b25seSBmb3IgYm90aD9cblx0XHRcdFx0XHRcdFx0cGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3IoJ05vIGNhcHR1cmUgZGV2aWNlIGZvdW5kJyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZighaGF2ZUF1ZGlvRGV2aWNlICYmIG5lZWRBdWRpb0RldmljZSkge1xuXHRcdFx0XHRcdFx0XHRwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcignQXVkaW8gY2FwdHVyZSBpcyByZXF1aXJlZCwgYnV0IG5vIGNhcHR1cmUgZGV2aWNlIGZvdW5kJyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZighaGF2ZVZpZGVvRGV2aWNlICYmIG5lZWRWaWRlb0RldmljZSkge1xuXHRcdFx0XHRcdFx0XHRwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5lcnJvcignVmlkZW8gY2FwdHVyZSBpcyByZXF1aXJlZCwgYnV0IG5vIGNhcHR1cmUgZGV2aWNlIGZvdW5kJyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgZ3VtQ29uc3RyYWludHMgPSB7XG5cdFx0XHRcdFx0XHRhdWRpbzogKGF1ZGlvRXhpc3QgJiYgIW1lZGlhLmtlZXBBdWRpbykgPyBhdWRpb1N1cHBvcnQgOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZpZGVvOiAodmlkZW9FeGlzdCAmJiAhbWVkaWEua2VlcFZpZGVvKSA/IHZpZGVvU3VwcG9ydCA6IGZhbHNlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRKYW51cy5kZWJ1ZyhcImdldFVzZXJNZWRpYSBjb25zdHJhaW50c1wiLCBndW1Db25zdHJhaW50cyk7XG5cdFx0XHRcdFx0aWYgKCFndW1Db25zdHJhaW50cy5hdWRpbyAmJiAhZ3VtQ29uc3RyYWludHMudmlkZW8pIHtcblx0XHRcdFx0XHRcdHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcblx0XHRcdFx0XHRcdHN0cmVhbXNEb25lKGhhbmRsZUlkLCBqc2VwLCBtZWRpYSwgY2FsbGJhY2tzLCBzdHJlYW0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShndW1Db25zdHJhaW50cylcblx0XHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7XG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHRcdHN0cmVhbXNEb25lKGhhbmRsZUlkLCBqc2VwLCBtZWRpYSwgY2FsbGJhY2tzLCBzdHJlYW0pO1xuXHRcdFx0XHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFja3MuZXJyb3Ioe2NvZGU6IGVycm9yLmNvZGUsIG5hbWU6IGVycm9yLm5hbWUsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2V9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG5cdFx0XHRcdFx0Y2FsbGJhY2tzLmVycm9yKGVycm9yKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE5vIG5lZWQgdG8gZG8gYSBnZXRVc2VyTWVkaWEsIGNyZWF0ZSBvZmZlci9hbnN3ZXIgcmlnaHQgYXdheVxuXHRcdFx0c3RyZWFtc0RvbmUoaGFuZGxlSWQsIGpzZXAsIG1lZGlhLCBjYWxsYmFja3MpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHByZXBhcmVXZWJydGNQZWVyKGhhbmRsZUlkLCBjYWxsYmFja3MpIHtcblx0XHRjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG5cdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG5cdFx0Y2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IHdlYnJ0Y0Vycm9yO1xuXHRcdGNhbGxiYWNrcy5jdXN0b21pemVTZHAgPSAodHlwZW9mIGNhbGxiYWNrcy5jdXN0b21pemVTZHAgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5jdXN0b21pemVTZHAgOiBKYW51cy5ub29wO1xuXHRcdHZhciBqc2VwID0gY2FsbGJhY2tzLmpzZXA7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgIXBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZikge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0aWYoanNlcCkge1xuXHRcdFx0aWYoIWNvbmZpZy5wYykge1xuXHRcdFx0XHRKYW51cy53YXJuKFwiV2FpdCwgbm8gUGVlckNvbm5lY3Rpb24/PyBpZiB0aGlzIGlzIGFuIGFuc3dlciwgdXNlIGNyZWF0ZUFuc3dlciBhbmQgbm90IGhhbmRsZVJlbW90ZUpzZXBcIik7XG5cdFx0XHRcdGNhbGxiYWNrcy5lcnJvcihcIk5vIFBlZXJDb25uZWN0aW9uOiBpZiB0aGlzIGlzIGFuIGFuc3dlciwgdXNlIGNyZWF0ZUFuc3dlciBhbmQgbm90IGhhbmRsZVJlbW90ZUpzZXBcIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNhbGxiYWNrcy5jdXN0b21pemVTZHAoanNlcCk7XG5cdFx0XHRjb25maWcucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oanNlcClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0SmFudXMubG9nKFwiUmVtb3RlIGRlc2NyaXB0aW9uIGFjY2VwdGVkIVwiKTtcblx0XHRcdFx0XHRjb25maWcucmVtb3RlU2RwID0ganNlcC5zZHA7XG5cdFx0XHRcdFx0Ly8gQW55IHRyaWNrbGUgY2FuZGlkYXRlIHdlIGNhY2hlZD9cblx0XHRcdFx0XHRpZihjb25maWcuY2FuZGlkYXRlcyAmJiBjb25maWcuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpPCBjb25maWcuY2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHR2YXIgY2FuZGlkYXRlID0gY29uZmlnLmNhbmRpZGF0ZXNbaV07XG5cdFx0XHRcdFx0XHRcdEphbnVzLmRlYnVnKFwiQWRkaW5nIHJlbW90ZSBjYW5kaWRhdGU6XCIsIGNhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHRcdGlmKCFjYW5kaWRhdGUgfHwgY2FuZGlkYXRlLmNvbXBsZXRlZCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVuZC1vZi1jYW5kaWRhdGVzXG5cdFx0XHRcdFx0XHRcdFx0Y29uZmlnLnBjLmFkZEljZUNhbmRpZGF0ZShKYW51cy5lbmRPZkNhbmRpZGF0ZXMpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE5ldyBjYW5kaWRhdGVcblx0XHRcdFx0XHRcdFx0XHRjb25maWcucGMuYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbmZpZy5jYW5kaWRhdGVzID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIERvbmVcblx0XHRcdFx0XHRjYWxsYmFja3Muc3VjY2VzcygpO1xuXHRcdFx0XHR9LCBjYWxsYmFja3MuZXJyb3IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIEpTRVBcIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlT2ZmZXIoaGFuZGxlSWQsIG1lZGlhLCBjYWxsYmFja3MpIHtcblx0XHRjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG5cdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG5cdFx0Y2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IEphbnVzLm5vb3A7XG5cdFx0Y2FsbGJhY2tzLmN1c3RvbWl6ZVNkcCA9ICh0eXBlb2YgY2FsbGJhY2tzLmN1c3RvbWl6ZVNkcCA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmN1c3RvbWl6ZVNkcCA6IEphbnVzLm5vb3A7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgIXBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZikge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0dmFyIHNpbXVsY2FzdCA9IChjYWxsYmFja3Muc2ltdWxjYXN0ID09PSB0cnVlKTtcblx0XHRpZighc2ltdWxjYXN0KSB7XG5cdFx0XHRKYW51cy5sb2coXCJDcmVhdGluZyBvZmZlciAoaWNlRG9uZT1cIiArIGNvbmZpZy5pY2VEb25lICsgXCIpXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRKYW51cy5sb2coXCJDcmVhdGluZyBvZmZlciAoaWNlRG9uZT1cIiArIGNvbmZpZy5pY2VEb25lICsgXCIsIHNpbXVsY2FzdD1cIiArIHNpbXVsY2FzdCArIFwiKVwiKTtcblx0XHR9XG5cdFx0Ly8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD0zNTA4XG5cdFx0dmFyIG1lZGlhQ29uc3RyYWludHMgPSB7fTtcblx0XHRpZihKYW51cy51bmlmaWVkUGxhbikge1xuXHRcdFx0Ly8gV2UgY2FuIHVzZSBUcmFuc2NlaXZlcnNcblx0XHRcdHZhciBhdWRpb1RyYW5zY2VpdmVyID0gbnVsbCwgdmlkZW9UcmFuc2NlaXZlciA9IG51bGw7XG5cdFx0XHR2YXIgdHJhbnNjZWl2ZXJzID0gY29uZmlnLnBjLmdldFRyYW5zY2VpdmVycygpO1xuXHRcdFx0aWYodHJhbnNjZWl2ZXJzICYmIHRyYW5zY2VpdmVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGZvcih2YXIgdCBvZiB0cmFuc2NlaXZlcnMpIHtcblx0XHRcdFx0XHRpZigodC5zZW5kZXIgJiYgdC5zZW5kZXIudHJhY2sgJiYgdC5zZW5kZXIudHJhY2sua2luZCA9PT0gXCJhdWRpb1wiKSB8fFxuXHRcdFx0XHRcdFx0XHQodC5yZWNlaXZlciAmJiB0LnJlY2VpdmVyLnRyYWNrICYmIHQucmVjZWl2ZXIudHJhY2sua2luZCA9PT0gXCJhdWRpb1wiKSkge1xuXHRcdFx0XHRcdFx0aWYoIWF1ZGlvVHJhbnNjZWl2ZXIpIHtcblx0XHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlciA9IHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYoKHQuc2VuZGVyICYmIHQuc2VuZGVyLnRyYWNrICYmIHQuc2VuZGVyLnRyYWNrLmtpbmQgPT09IFwidmlkZW9cIikgfHxcblx0XHRcdFx0XHRcdFx0KHQucmVjZWl2ZXIgJiYgdC5yZWNlaXZlci50cmFjayAmJiB0LnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09IFwidmlkZW9cIikpIHtcblx0XHRcdFx0XHRcdGlmKCF2aWRlb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIgPSB0O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBIYW5kbGUgYXVkaW8gKGFuZCByZWxhdGVkIGNoYW5nZXMsIGlmIGFueSlcblx0XHRcdHZhciBhdWRpb1NlbmQgPSBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpO1xuXHRcdFx0dmFyIGF1ZGlvUmVjdiA9IGlzQXVkaW9SZWN2RW5hYmxlZChtZWRpYSk7XG5cdFx0XHRpZighYXVkaW9TZW5kICYmICFhdWRpb1JlY3YpIHtcblx0XHRcdFx0Ly8gQXVkaW8gZGlzYWJsZWQ6IGhhdmUgd2UgcmVtb3ZlZCBpdD9cblx0XHRcdFx0aWYobWVkaWEucmVtb3ZlQXVkaW8gJiYgYXVkaW9UcmFuc2NlaXZlcikge1xuXHRcdFx0XHRcdGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuXHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSBcImluYWN0aXZlXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgYXVkaW8gdHJhbnNjZWl2ZXIgdG8gaW5hY3RpdmU6XCIsIGF1ZGlvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUYWtlIGNhcmUgb2YgYXVkaW8gbS1saW5lXG5cdFx0XHRcdGlmKGF1ZGlvU2VuZCAmJiBhdWRpb1JlY3YpIHtcblx0XHRcdFx0XHRpZihhdWRpb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJzZW5kcmVjdlwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kcmVjdlwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyBhdWRpbyB0cmFuc2NlaXZlciB0byBzZW5kcmVjdjpcIiwgYXVkaW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYoYXVkaW9TZW5kICYmICFhdWRpb1JlY3YpIHtcblx0XHRcdFx0XHRpZihhdWRpb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kb25seVwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyBhdWRpbyB0cmFuc2NlaXZlciB0byBzZW5kb25seTpcIiwgYXVkaW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYoIWF1ZGlvU2VuZCAmJiBhdWRpb1JlY3YpIHtcblx0XHRcdFx0XHRpZihhdWRpb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJyZWN2b25seVwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJyZWN2b25seVwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyBhdWRpbyB0cmFuc2NlaXZlciB0byByZWN2b25seTpcIiwgYXVkaW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEluIHRoZW9yeSwgdGhpcyBpcyB0aGUgb25seSBjYXNlIHdoZXJlIHdlIG1pZ2h0IG5vdCBoYXZlIGEgdHJhbnNjZWl2ZXIgeWV0XG5cdFx0XHRcdFx0XHRhdWRpb1RyYW5zY2VpdmVyID0gY29uZmlnLnBjLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIiwgeyBkaXJlY3Rpb246IFwicmVjdm9ubHlcIiB9KTtcblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIkFkZGluZyByZWN2b25seSBhdWRpbyB0cmFuc2NlaXZlcjpcIiwgYXVkaW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBIYW5kbGUgdmlkZW8gKGFuZCByZWxhdGVkIGNoYW5nZXMsIGlmIGFueSlcblx0XHRcdHZhciB2aWRlb1NlbmQgPSBpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpO1xuXHRcdFx0dmFyIHZpZGVvUmVjdiA9IGlzVmlkZW9SZWN2RW5hYmxlZChtZWRpYSk7XG5cdFx0XHRpZighdmlkZW9TZW5kICYmICF2aWRlb1JlY3YpIHtcblx0XHRcdFx0Ly8gVmlkZW8gZGlzYWJsZWQ6IGhhdmUgd2UgcmVtb3ZlZCBpdD9cblx0XHRcdFx0aWYobWVkaWEucmVtb3ZlVmlkZW8gJiYgdmlkZW9UcmFuc2NlaXZlcikge1xuXHRcdFx0XHRcdGlmICh2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuXHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSBcImluYWN0aXZlXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgdmlkZW8gdHJhbnNjZWl2ZXIgdG8gaW5hY3RpdmU6XCIsIHZpZGVvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUYWtlIGNhcmUgb2YgdmlkZW8gbS1saW5lXG5cdFx0XHRcdGlmKHZpZGVvU2VuZCAmJiB2aWRlb1JlY3YpIHtcblx0XHRcdFx0XHRpZih2aWRlb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJzZW5kcmVjdlwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kcmVjdlwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyB2aWRlbyB0cmFuc2NlaXZlciB0byBzZW5kcmVjdjpcIiwgdmlkZW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYodmlkZW9TZW5kICYmICF2aWRlb1JlY3YpIHtcblx0XHRcdFx0XHRpZih2aWRlb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kb25seVwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyB2aWRlbyB0cmFuc2NlaXZlciB0byBzZW5kb25seTpcIiwgdmlkZW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYoIXZpZGVvU2VuZCAmJiB2aWRlb1JlY3YpIHtcblx0XHRcdFx0XHRpZih2aWRlb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJyZWN2b25seVwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJyZWN2b25seVwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyB2aWRlbyB0cmFuc2NlaXZlciB0byByZWN2b25seTpcIiwgdmlkZW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEluIHRoZW9yeSwgdGhpcyBpcyB0aGUgb25seSBjYXNlIHdoZXJlIHdlIG1pZ2h0IG5vdCBoYXZlIGEgdHJhbnNjZWl2ZXIgeWV0XG5cdFx0XHRcdFx0XHR2aWRlb1RyYW5zY2VpdmVyID0gY29uZmlnLnBjLmFkZFRyYW5zY2VpdmVyKFwidmlkZW9cIiwgeyBkaXJlY3Rpb246IFwicmVjdm9ubHlcIiB9KTtcblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIkFkZGluZyByZWN2b25seSB2aWRlbyB0cmFuc2NlaXZlcjpcIiwgdmlkZW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1lZGlhQ29uc3RyYWludHNbXCJvZmZlclRvUmVjZWl2ZUF1ZGlvXCJdID0gaXNBdWRpb1JlY3ZFbmFibGVkKG1lZGlhKTtcblx0XHRcdG1lZGlhQ29uc3RyYWludHNbXCJvZmZlclRvUmVjZWl2ZVZpZGVvXCJdID0gaXNWaWRlb1JlY3ZFbmFibGVkKG1lZGlhKTtcblx0XHR9XG5cdFx0dmFyIGljZVJlc3RhcnQgPSAoY2FsbGJhY2tzLmljZVJlc3RhcnQgPT09IHRydWUpO1xuXHRcdGlmKGljZVJlc3RhcnQpIHtcblx0XHRcdG1lZGlhQ29uc3RyYWludHNbXCJpY2VSZXN0YXJ0XCJdID0gdHJ1ZTtcblx0XHR9XG5cdFx0SmFudXMuZGVidWcobWVkaWFDb25zdHJhaW50cyk7XG5cdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBGaXJlZm94IGFuZCB3ZSd2ZSBiZWVuIGFza2VkIHRvIGRvIHNpbXVsY2FzdGluZ1xuXHRcdHZhciBzZW5kVmlkZW8gPSBpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpO1xuXHRcdGlmKHNlbmRWaWRlbyAmJiBzaW11bGNhc3QgJiYgSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImZpcmVmb3hcIikge1xuXHRcdFx0Ly8gRklYTUUgQmFzZWQgb24gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vdm9sdW50YXMvMDg4YmMzY2M2MjA5NDczMDY0N2Jcblx0XHRcdEphbnVzLmxvZyhcIkVuYWJsaW5nIFNpbXVsY2FzdGluZyBmb3IgRmlyZWZveCAoUklEKVwiKTtcblx0XHRcdHZhciBzZW5kZXIgPSBjb25maWcucGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24ocykge3JldHVybiBzLnRyYWNrICYmIHMudHJhY2sua2luZCA9PT0gXCJ2aWRlb1wifSk7XG5cdFx0XHRpZihzZW5kZXIpIHtcblx0XHRcdFx0dmFyIHBhcmFtZXRlcnMgPSBzZW5kZXIuZ2V0UGFyYW1ldGVycygpO1xuXHRcdFx0XHRpZighcGFyYW1ldGVycykge1xuXHRcdFx0XHRcdHBhcmFtZXRlcnMgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbWF4Qml0cmF0ZXMgPSBnZXRNYXhCaXRyYXRlcyhjYWxsYmFja3Muc2ltdWxjYXN0TWF4Qml0cmF0ZXMpO1xuXHRcdFx0XHRwYXJhbWV0ZXJzLmVuY29kaW5ncyA9IGNhbGxiYWNrcy5zZW5kRW5jb2RpbmdzIHx8IFtcblx0XHRcdFx0XHR7IHJpZDogXCJoXCIsIGFjdGl2ZTogdHJ1ZSwgbWF4Qml0cmF0ZTogbWF4Qml0cmF0ZXMuaGlnaCB9LFxuXHRcdFx0XHRcdHsgcmlkOiBcIm1cIiwgYWN0aXZlOiB0cnVlLCBtYXhCaXRyYXRlOiBtYXhCaXRyYXRlcy5tZWRpdW0sIHNjYWxlUmVzb2x1dGlvbkRvd25CeTogMiB9LFxuXHRcdFx0XHRcdHsgcmlkOiBcImxcIiwgYWN0aXZlOiB0cnVlLCBtYXhCaXRyYXRlOiBtYXhCaXRyYXRlcy5sb3csIHNjYWxlUmVzb2x1dGlvbkRvd25CeTogNCB9XG5cdFx0XHRcdF07XG5cdFx0XHRcdHNlbmRlci5zZXRQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25maWcucGMuY3JlYXRlT2ZmZXIobWVkaWFDb25zdHJhaW50cylcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9mZmVyKSB7XG5cdFx0XHRcdEphbnVzLmRlYnVnKG9mZmVyKTtcblx0XHRcdFx0Ly8gSlNPTi5zdHJpbmdpZnkgZG9lc24ndCB3b3JrIG9uIHNvbWUgV2ViUlRDIG9iamVjdHMgYW55bW9yZVxuXHRcdFx0XHQvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ2NzM2NlxuXHRcdFx0XHR2YXIganNlcCA9IHtcblx0XHRcdFx0XHRcInR5cGVcIjogb2ZmZXIudHlwZSxcblx0XHRcdFx0XHRcInNkcFwiOiBvZmZlci5zZHBcblx0XHRcdFx0fTtcblx0XHRcdFx0Y2FsbGJhY2tzLmN1c3RvbWl6ZVNkcChqc2VwKTtcblx0XHRcdFx0b2ZmZXIuc2RwID0ganNlcC5zZHA7XG5cdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgbG9jYWwgZGVzY3JpcHRpb25cIik7XG5cdFx0XHRcdGlmKHNlbmRWaWRlbyAmJiBzaW11bGNhc3QgJiYgIUphbnVzLnVuaWZpZWRQbGFuKSB7XG5cdFx0XHRcdFx0Ly8gV2Ugb25seSBkbyBzaW11bGNhc3QgdmlhIFNEUCBtdW5naW5nIG9uIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpXG5cdFx0XHRcdFx0aWYoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImNocm9tZVwiIHx8XG5cdFx0XHRcdFx0XHRcdEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gXCJzYWZhcmlcIikge1xuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiRW5hYmxpbmcgU2ltdWxjYXN0aW5nIGZvciBDaHJvbWUgKFNEUCBtdW5naW5nKVwiKTtcblx0XHRcdFx0XHRcdG9mZmVyLnNkcCA9IG11bmdlU2RwRm9yU2ltdWxjYXN0aW5nKG9mZmVyLnNkcCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbmZpZy5teVNkcCA9IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9mZmVyXCIsXG5cdFx0XHRcdFx0c2RwOiBvZmZlci5zZHBcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uZmlnLnBjLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpXG5cdFx0XHRcdFx0LmNhdGNoKGNhbGxiYWNrcy5lcnJvcik7XG5cdFx0XHRcdGNvbmZpZy5tZWRpYUNvbnN0cmFpbnRzID0gbWVkaWFDb25zdHJhaW50cztcblx0XHRcdFx0aWYoIWNvbmZpZy5pY2VEb25lICYmICFjb25maWcudHJpY2tsZSkge1xuXHRcdFx0XHRcdC8vIERvbid0IGRvIGFueXRoaW5nIHVudGlsIHdlIGhhdmUgYWxsIGNhbmRpZGF0ZXNcblx0XHRcdFx0XHRKYW51cy5sb2coXCJXYWl0aW5nIGZvciBhbGwgY2FuZGlkYXRlcy4uLlwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gSWYgdHJhbnNmb3JtcyBhcmUgcHJlc2VudCwgbm90aWZ5IEphbnVzIHRoYXQgdGhlIG1lZGlhIGlzIGVuZC10by1lbmQgZW5jcnlwdGVkXG5cdFx0XHRcdGlmKGNvbmZpZy5zZW5kZXJUcmFuc2Zvcm1zIHx8IGNvbmZpZy5yZWNlaXZlclRyYW5zZm9ybXMpIHtcblx0XHRcdFx0XHRvZmZlcltcImUyZWVcIl0gPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKG9mZmVyKTtcblx0XHRcdH0sIGNhbGxiYWNrcy5lcnJvcik7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVBbnN3ZXIoaGFuZGxlSWQsIG1lZGlhLCBjYWxsYmFja3MpIHtcblx0XHRjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG5cdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG5cdFx0Y2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IEphbnVzLm5vb3A7XG5cdFx0Y2FsbGJhY2tzLmN1c3RvbWl6ZVNkcCA9ICh0eXBlb2YgY2FsbGJhY2tzLmN1c3RvbWl6ZVNkcCA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmN1c3RvbWl6ZVNkcCA6IEphbnVzLm5vb3A7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgIXBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZikge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0Y2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0dmFyIHNpbXVsY2FzdCA9IChjYWxsYmFja3Muc2ltdWxjYXN0ID09PSB0cnVlIHx8IGNhbGxiYWNrcy5zaW11bGNhc3QyID09PSB0cnVlKTtcblx0XHRpZighc2ltdWxjYXN0KSB7XG5cdFx0XHRKYW51cy5sb2coXCJDcmVhdGluZyBhbnN3ZXIgKGljZURvbmU9XCIgKyBjb25maWcuaWNlRG9uZSArIFwiKVwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0SmFudXMubG9nKFwiQ3JlYXRpbmcgYW5zd2VyIChpY2VEb25lPVwiICsgY29uZmlnLmljZURvbmUgKyBcIiwgc2ltdWxjYXN0PVwiICsgc2ltdWxjYXN0ICsgXCIpXCIpO1xuXHRcdH1cblx0XHR2YXIgbWVkaWFDb25zdHJhaW50cyA9IG51bGw7XG5cdFx0aWYoSmFudXMudW5pZmllZFBsYW4pIHtcblx0XHRcdC8vIFdlIGNhbiB1c2UgVHJhbnNjZWl2ZXJzXG5cdFx0XHRtZWRpYUNvbnN0cmFpbnRzID0ge307XG5cdFx0XHR2YXIgYXVkaW9UcmFuc2NlaXZlciA9IG51bGwsIHZpZGVvVHJhbnNjZWl2ZXIgPSBudWxsO1xuXHRcdFx0dmFyIHRyYW5zY2VpdmVycyA9IGNvbmZpZy5wYy5nZXRUcmFuc2NlaXZlcnMoKTtcblx0XHRcdGlmKHRyYW5zY2VpdmVycyAmJiB0cmFuc2NlaXZlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRmb3IodmFyIHQgb2YgdHJhbnNjZWl2ZXJzKSB7XG5cdFx0XHRcdFx0aWYoKHQuc2VuZGVyICYmIHQuc2VuZGVyLnRyYWNrICYmIHQuc2VuZGVyLnRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIikgfHxcblx0XHRcdFx0XHRcdFx0KHQucmVjZWl2ZXIgJiYgdC5yZWNlaXZlci50cmFjayAmJiB0LnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIikpIHtcblx0XHRcdFx0XHRcdGlmKCFhdWRpb1RyYW5zY2VpdmVyKVxuXHRcdFx0XHRcdFx0XHRhdWRpb1RyYW5zY2VpdmVyID0gdDtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZigodC5zZW5kZXIgJiYgdC5zZW5kZXIudHJhY2sgJiYgdC5zZW5kZXIudHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiKSB8fFxuXHRcdFx0XHRcdFx0XHQodC5yZWNlaXZlciAmJiB0LnJlY2VpdmVyLnRyYWNrICYmIHQucmVjZWl2ZXIudHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiKSkge1xuXHRcdFx0XHRcdFx0aWYoIXZpZGVvVHJhbnNjZWl2ZXIpXG5cdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIgPSB0O1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBIYW5kbGUgYXVkaW8gKGFuZCByZWxhdGVkIGNoYW5nZXMsIGlmIGFueSlcblx0XHRcdHZhciBhdWRpb1NlbmQgPSBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpO1xuXHRcdFx0dmFyIGF1ZGlvUmVjdiA9IGlzQXVkaW9SZWN2RW5hYmxlZChtZWRpYSk7XG5cdFx0XHRpZighYXVkaW9TZW5kICYmICFhdWRpb1JlY3YpIHtcblx0XHRcdFx0Ly8gQXVkaW8gZGlzYWJsZWQ6IGhhdmUgd2UgcmVtb3ZlZCBpdD9cblx0XHRcdFx0aWYobWVkaWEucmVtb3ZlQXVkaW8gJiYgYXVkaW9UcmFuc2NlaXZlcikge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJpbmFjdGl2ZVwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyBhdWRpbyB0cmFuc2NlaXZlciB0byBpbmFjdGl2ZTpcIiwgYXVkaW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0XHRKYW51cy5lcnJvcihlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFRha2UgY2FyZSBvZiBhdWRpbyBtLWxpbmVcblx0XHRcdFx0aWYoYXVkaW9TZW5kICYmIGF1ZGlvUmVjdikge1xuXHRcdFx0XHRcdGlmKGF1ZGlvVHJhbnNjZWl2ZXIpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuXHRcdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKFwic2VuZHJlY3ZcIik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSBcInNlbmRyZWN2XCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyBhdWRpbyB0cmFuc2NlaXZlciB0byBzZW5kcmVjdjpcIiwgYXVkaW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRcdFx0SmFudXMuZXJyb3IoZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYoYXVkaW9TZW5kICYmICFhdWRpb1JlY3YpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0aWYoYXVkaW9UcmFuc2NlaXZlcikge1xuXHRcdFx0XHRcdFx0XHRpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kb25seVwiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgYXVkaW8gdHJhbnNjZWl2ZXIgdG8gc2VuZG9ubHk6XCIsIGF1ZGlvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdFx0SmFudXMuZXJyb3IoZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYoIWF1ZGlvU2VuZCAmJiBhdWRpb1JlY3YpIHtcblx0XHRcdFx0XHRpZihhdWRpb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbihcInJlY3Zvbmx5XCIpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJyZWN2b25seVwiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgYXVkaW8gdHJhbnNjZWl2ZXIgdG8gcmVjdm9ubHk6XCIsIGF1ZGlvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmVycm9yKGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBJbiB0aGVvcnksIHRoaXMgaXMgdGhlIG9ubHkgY2FzZSB3aGVyZSB3ZSBtaWdodCBub3QgaGF2ZSBhIHRyYW5zY2VpdmVyIHlldFxuXHRcdFx0XHRcdFx0YXVkaW9UcmFuc2NlaXZlciA9IGNvbmZpZy5wYy5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIsIHsgZGlyZWN0aW9uOiBcInJlY3Zvbmx5XCIgfSk7XG5cdFx0XHRcdFx0XHRKYW51cy5sb2coXCJBZGRpbmcgcmVjdm9ubHkgYXVkaW8gdHJhbnNjZWl2ZXI6XCIsIGF1ZGlvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gSGFuZGxlIHZpZGVvIChhbmQgcmVsYXRlZCBjaGFuZ2VzLCBpZiBhbnkpXG5cdFx0XHR2YXIgdmlkZW9TZW5kID0gaXNWaWRlb1NlbmRFbmFibGVkKG1lZGlhKTtcblx0XHRcdHZhciB2aWRlb1JlY3YgPSBpc1ZpZGVvUmVjdkVuYWJsZWQobWVkaWEpO1xuXHRcdFx0aWYoIXZpZGVvU2VuZCAmJiAhdmlkZW9SZWN2KSB7XG5cdFx0XHRcdC8vIFZpZGVvIGRpc2FibGVkOiBoYXZlIHdlIHJlbW92ZWQgaXQ/XG5cdFx0XHRcdGlmKG1lZGlhLnJlbW92ZVZpZGVvICYmIHZpZGVvVHJhbnNjZWl2ZXIpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0aWYgKHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9IFwiaW5hY3RpdmVcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgdmlkZW8gdHJhbnNjZWl2ZXIgdG8gaW5hY3RpdmU6XCIsIHZpZGVvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdFx0SmFudXMuZXJyb3IoZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUYWtlIGNhcmUgb2YgdmlkZW8gbS1saW5lXG5cdFx0XHRcdGlmKHZpZGVvU2VuZCAmJiB2aWRlb1JlY3YpIHtcblx0XHRcdFx0XHRpZih2aWRlb1RyYW5zY2VpdmVyKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0XHR2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbihcInNlbmRyZWN2XCIpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kcmVjdlwiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgdmlkZW8gdHJhbnNjZWl2ZXIgdG8gc2VuZHJlY3Y6XCIsIHZpZGVvVHJhbnNjZWl2ZXIpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0XHRcdEphbnVzLmVycm9yKGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmKHZpZGVvU2VuZCAmJiAhdmlkZW9SZWN2KSB7XG5cdFx0XHRcdFx0aWYodmlkZW9UcmFuc2NlaXZlcikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0aWYgKHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9IFwic2VuZG9ubHlcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRKYW51cy5sb2coXCJTZXR0aW5nIHZpZGVvIHRyYW5zY2VpdmVyIHRvIHNlbmRvbmx5OlwiLCB2aWRlb1RyYW5zY2VpdmVyKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdFx0XHRKYW51cy5lcnJvcihlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZighdmlkZW9TZW5kICYmIHZpZGVvUmVjdikge1xuXHRcdFx0XHRcdGlmKHZpZGVvVHJhbnNjZWl2ZXIpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGlmICh2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuXHRcdFx0XHRcdFx0XHRcdHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKFwicmVjdm9ubHlcIik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSBcInJlY3Zvbmx5XCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0SmFudXMubG9nKFwiU2V0dGluZyB2aWRlbyB0cmFuc2NlaXZlciB0byByZWN2b25seTpcIiwgdmlkZW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRcdFx0SmFudXMuZXJyb3IoZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEluIHRoZW9yeSwgdGhpcyBpcyB0aGUgb25seSBjYXNlIHdoZXJlIHdlIG1pZ2h0IG5vdCBoYXZlIGEgdHJhbnNjZWl2ZXIgeWV0XG5cdFx0XHRcdFx0XHR2aWRlb1RyYW5zY2VpdmVyID0gY29uZmlnLnBjLmFkZFRyYW5zY2VpdmVyKFwidmlkZW9cIiwgeyBkaXJlY3Rpb246IFwicmVjdm9ubHlcIiB9KTtcblx0XHRcdFx0XHRcdEphbnVzLmxvZyhcIkFkZGluZyByZWN2b25seSB2aWRlbyB0cmFuc2NlaXZlcjpcIiwgdmlkZW9UcmFuc2NlaXZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gXCJmaXJlZm94XCIgfHwgSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImVkZ2VcIikge1xuXHRcdFx0XHRtZWRpYUNvbnN0cmFpbnRzID0ge1xuXHRcdFx0XHRcdG9mZmVyVG9SZWNlaXZlQXVkaW86IGlzQXVkaW9SZWN2RW5hYmxlZChtZWRpYSksXG5cdFx0XHRcdFx0b2ZmZXJUb1JlY2VpdmVWaWRlbzogaXNWaWRlb1JlY3ZFbmFibGVkKG1lZGlhKVxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWVkaWFDb25zdHJhaW50cyA9IHtcblx0XHRcdFx0XHRtYW5kYXRvcnk6IHtcblx0XHRcdFx0XHRcdE9mZmVyVG9SZWNlaXZlQXVkaW86IGlzQXVkaW9SZWN2RW5hYmxlZChtZWRpYSksXG5cdFx0XHRcdFx0XHRPZmZlclRvUmVjZWl2ZVZpZGVvOiBpc1ZpZGVvUmVjdkVuYWJsZWQobWVkaWEpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRKYW51cy5kZWJ1ZyhtZWRpYUNvbnN0cmFpbnRzKTtcblx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIEZpcmVmb3ggYW5kIHdlJ3ZlIGJlZW4gYXNrZWQgdG8gZG8gc2ltdWxjYXN0aW5nXG5cdFx0dmFyIHNlbmRWaWRlbyA9IGlzVmlkZW9TZW5kRW5hYmxlZChtZWRpYSk7XG5cdFx0aWYoc2VuZFZpZGVvICYmIHNpbXVsY2FzdCAmJiBKYW51cy53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09IFwiZmlyZWZveFwiKSB7XG5cdFx0XHQvLyBGSVhNRSBCYXNlZCBvbiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS92b2x1bnRhcy8wODhiYzNjYzYyMDk0NzMwNjQ3YlxuXHRcdFx0SmFudXMubG9nKFwiRW5hYmxpbmcgU2ltdWxjYXN0aW5nIGZvciBGaXJlZm94IChSSUQpXCIpO1xuXHRcdFx0dmFyIHNlbmRlciA9IGNvbmZpZy5wYy5nZXRTZW5kZXJzKClbMV07XG5cdFx0XHRKYW51cy5sb2coc2VuZGVyKTtcblx0XHRcdHZhciBwYXJhbWV0ZXJzID0gc2VuZGVyLmdldFBhcmFtZXRlcnMoKTtcblx0XHRcdEphbnVzLmxvZyhwYXJhbWV0ZXJzKTtcblxuXHRcdFx0dmFyIG1heEJpdHJhdGVzID0gZ2V0TWF4Qml0cmF0ZXMoY2FsbGJhY2tzLnNpbXVsY2FzdE1heEJpdHJhdGVzKTtcblx0XHRcdHNlbmRlci5zZXRQYXJhbWV0ZXJzKHtlbmNvZGluZ3M6IGNhbGxiYWNrcy5zZW5kRW5jb2RpbmdzIHx8IFtcblx0XHRcdFx0eyByaWQ6IFwiaFwiLCBhY3RpdmU6IHRydWUsIG1heEJpdHJhdGU6IG1heEJpdHJhdGVzLmhpZ2ggfSxcblx0XHRcdFx0eyByaWQ6IFwibVwiLCBhY3RpdmU6IHRydWUsIG1heEJpdHJhdGU6IG1heEJpdHJhdGVzLm1lZGl1bSwgc2NhbGVSZXNvbHV0aW9uRG93bkJ5OiAyfSxcblx0XHRcdFx0eyByaWQ6IFwibFwiLCBhY3RpdmU6IHRydWUsIG1heEJpdHJhdGU6IG1heEJpdHJhdGVzLmxvdywgc2NhbGVSZXNvbHV0aW9uRG93bkJ5OiA0fVxuXHRcdFx0XX0pO1xuXHRcdH1cblx0XHRjb25maWcucGMuY3JlYXRlQW5zd2VyKG1lZGlhQ29uc3RyYWludHMpXG5cdFx0XHQudGhlbihmdW5jdGlvbihhbnN3ZXIpIHtcblx0XHRcdFx0SmFudXMuZGVidWcoYW5zd2VyKTtcblx0XHRcdFx0Ly8gSlNPTi5zdHJpbmdpZnkgZG9lc24ndCB3b3JrIG9uIHNvbWUgV2ViUlRDIG9iamVjdHMgYW55bW9yZVxuXHRcdFx0XHQvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ2NzM2NlxuXHRcdFx0XHR2YXIganNlcCA9IHtcblx0XHRcdFx0XHRcInR5cGVcIjogYW5zd2VyLnR5cGUsXG5cdFx0XHRcdFx0XCJzZHBcIjogYW5zd2VyLnNkcFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjYWxsYmFja3MuY3VzdG9taXplU2RwKGpzZXApO1xuXHRcdFx0XHRhbnN3ZXIuc2RwID0ganNlcC5zZHA7XG5cdFx0XHRcdEphbnVzLmxvZyhcIlNldHRpbmcgbG9jYWwgZGVzY3JpcHRpb25cIik7XG5cdFx0XHRcdGlmKHNlbmRWaWRlbyAmJiBzaW11bGNhc3QgJiYgIUphbnVzLnVuaWZpZWRQbGFuKSB7XG5cdFx0XHRcdFx0Ly8gV2Ugb25seSBkbyBzaW11bGNhc3QgdmlhIFNEUCBtdW5naW5nIG9uIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpXG5cdFx0XHRcdFx0aWYoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImNocm9tZVwiKSB7XG5cdFx0XHRcdFx0XHQvLyBGSVhNRSBBcHBhcmVudGx5IHRyeWluZyB0byBzaW11bGNhc3Qgd2hlbiBhbnN3ZXJpbmcgYnJlYWtzIHZpZGVvIGluIENocm9tZS4uLlxuXHRcdFx0XHRcdFx0Ly9+IEphbnVzLmxvZyhcIkVuYWJsaW5nIFNpbXVsY2FzdGluZyBmb3IgQ2hyb21lIChTRFAgbXVuZ2luZylcIik7XG5cdFx0XHRcdFx0XHQvL34gYW5zd2VyLnNkcCA9IG11bmdlU2RwRm9yU2ltdWxjYXN0aW5nKGFuc3dlci5zZHApO1xuXHRcdFx0XHRcdFx0SmFudXMud2FybihcInNpbXVsY2FzdD10cnVlLCBidXQgdGhpcyBpcyBhbiBhbnN3ZXIsIGFuZCB2aWRlbyBicmVha3MgaW4gQ2hyb21lIGlmIHdlIGVuYWJsZSBpdFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uZmlnLm15U2RwID0ge1xuXHRcdFx0XHRcdHR5cGU6IFwiYW5zd2VyXCIsXG5cdFx0XHRcdFx0c2RwOiBhbnN3ZXIuc2RwXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbmZpZy5wYy5zZXRMb2NhbERlc2NyaXB0aW9uKGFuc3dlcilcblx0XHRcdFx0XHQuY2F0Y2goY2FsbGJhY2tzLmVycm9yKTtcblx0XHRcdFx0Y29uZmlnLm1lZGlhQ29uc3RyYWludHMgPSBtZWRpYUNvbnN0cmFpbnRzO1xuXHRcdFx0XHRpZighY29uZmlnLmljZURvbmUgJiYgIWNvbmZpZy50cmlja2xlKSB7XG5cdFx0XHRcdFx0Ly8gRG9uJ3QgZG8gYW55dGhpbmcgdW50aWwgd2UgaGF2ZSBhbGwgY2FuZGlkYXRlc1xuXHRcdFx0XHRcdEphbnVzLmxvZyhcIldhaXRpbmcgZm9yIGFsbCBjYW5kaWRhdGVzLi4uXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBJZiB0cmFuc2Zvcm1zIGFyZSBwcmVzZW50LCBub3RpZnkgSmFudXMgdGhhdCB0aGUgbWVkaWEgaXMgZW5kLXRvLWVuZCBlbmNyeXB0ZWRcblx0XHRcdFx0aWYoY29uZmlnLnNlbmRlclRyYW5zZm9ybXMgfHwgY29uZmlnLnJlY2VpdmVyVHJhbnNmb3Jtcykge1xuXHRcdFx0XHRcdGFuc3dlcltcImUyZWVcIl0gPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhbGxiYWNrcy5zdWNjZXNzKGFuc3dlcik7XG5cdFx0XHR9LCBjYWxsYmFja3MuZXJyb3IpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2VuZFNEUChoYW5kbGVJZCwgY2FsbGJhY2tzKSB7XG5cdFx0Y2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuXHRcdGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuXHRcdGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuXHRcdHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcblx0XHRpZighcGx1Z2luSGFuZGxlIHx8ICFwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYpIHtcblx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZSwgbm90IHNlbmRpbmcgYW55dGhpbmdcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0SmFudXMubG9nKFwiU2VuZGluZyBvZmZlci9hbnN3ZXIgU0RQLi4uXCIpO1xuXHRcdGlmKCFjb25maWcubXlTZHApIHtcblx0XHRcdEphbnVzLndhcm4oXCJMb2NhbCBTRFAgaW5zdGFuY2UgaXMgaW52YWxpZCwgbm90IHNlbmRpbmcgYW55dGhpbmcuLi5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbmZpZy5teVNkcCA9IHtcblx0XHRcdFwidHlwZVwiOiBjb25maWcucGMubG9jYWxEZXNjcmlwdGlvbi50eXBlLFxuXHRcdFx0XCJzZHBcIjogY29uZmlnLnBjLmxvY2FsRGVzY3JpcHRpb24uc2RwXG5cdFx0fTtcblx0XHRpZihjb25maWcudHJpY2tsZSA9PT0gZmFsc2UpXG5cdFx0XHRjb25maWcubXlTZHBbXCJ0cmlja2xlXCJdID0gZmFsc2U7XG5cdFx0SmFudXMuZGVidWcoY2FsbGJhY2tzKTtcblx0XHRjb25maWcuc2RwU2VudCA9IHRydWU7XG5cdFx0Y2FsbGJhY2tzLnN1Y2Nlc3MoY29uZmlnLm15U2RwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFZvbHVtZShoYW5kbGVJZCwgcmVtb3RlKSB7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgIXBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZikge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXHRcdHZhciBzdHJlYW0gPSByZW1vdGUgPyBcInJlbW90ZVwiIDogXCJsb2NhbFwiO1xuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0aWYoIWNvbmZpZy52b2x1bWVbc3RyZWFtXSlcblx0XHRcdGNvbmZpZy52b2x1bWVbc3RyZWFtXSA9IHsgdmFsdWU6IDAgfTtcblx0XHQvLyBTdGFydCBnZXR0aW5nIHRoZSB2b2x1bWUsIGlmIGF1ZGlvTGV2ZWwgaW4gZ2V0U3RhdHMgaXMgc3VwcG9ydGVkIChhcHBhcmVudGx5XG5cdFx0Ly8gdGhleSdyZSBvbmx5IGF2YWlsYWJsZSBpbiBDaHJvbWUvU2FmYXJpIHJpZ2h0IG5vdzogaHR0cHM6Ly93ZWJydGMtc3RhdHMuY2FsbHN0YXRzLmlvLylcblx0XHRpZihjb25maWcucGMuZ2V0U3RhdHMgJiYgKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gXCJjaHJvbWVcIiB8fFxuXHRcdFx0XHRKYW51cy53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09IFwic2FmYXJpXCIpKSB7XG5cdFx0XHRpZihyZW1vdGUgJiYgIWNvbmZpZy5yZW1vdGVTdHJlYW0pIHtcblx0XHRcdFx0SmFudXMud2FybihcIlJlbW90ZSBzdHJlYW0gdW5hdmFpbGFibGVcIik7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fSBlbHNlIGlmKCFyZW1vdGUgJiYgIWNvbmZpZy5teVN0cmVhbSkge1xuXHRcdFx0XHRKYW51cy53YXJuKFwiTG9jYWwgc3RyZWFtIHVuYXZhaWxhYmxlXCIpO1xuXHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdH1cblx0XHRcdGlmKCFjb25maWcudm9sdW1lW3N0cmVhbV0udGltZXIpIHtcblx0XHRcdFx0SmFudXMubG9nKFwiU3RhcnRpbmcgXCIgKyBzdHJlYW0gKyBcIiB2b2x1bWUgbW9uaXRvclwiKTtcblx0XHRcdFx0Y29uZmlnLnZvbHVtZVtzdHJlYW1dLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y29uZmlnLnBjLmdldFN0YXRzKClcblx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHN0YXRzKSB7XG5cdFx0XHRcdFx0XHRcdHN0YXRzLmZvckVhY2goZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdFx0XHRcdGlmKCFyZXMgfHwgcmVzLmtpbmQgIT09IFwiYXVkaW9cIilcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRpZigocmVtb3RlICYmICFyZXMucmVtb3RlU291cmNlKSB8fCAoIXJlbW90ZSAmJiByZXMudHlwZSAhPT0gXCJtZWRpYS1zb3VyY2VcIikpXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0Y29uZmlnLnZvbHVtZVtzdHJlYW1dLnZhbHVlID0gKHJlcy5hdWRpb0xldmVsID8gcmVzLmF1ZGlvTGV2ZWwgOiAwKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdFx0cmV0dXJuIDA7XHQvLyBXZSBkb24ndCBoYXZlIGEgdm9sdW1lIHRvIHJldHVybiB5ZXRcblx0XHRcdH1cblx0XHRcdHJldHVybiBjb25maWcudm9sdW1lW3N0cmVhbV0udmFsdWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGF1ZGlvSW5wdXRMZXZlbCBhbmQgYXVkaW9PdXRwdXRMZXZlbCBzZWVtIG9ubHkgYXZhaWxhYmxlIGluIENocm9tZT8gYXVkaW9MZXZlbFxuXHRcdFx0Ly8gc2VlbXMgdG8gYmUgYXZhaWxhYmxlIG9uIENocm9tZSBhbmQgRmlyZWZveCwgYnV0IHRoZXkgZG9uJ3Qgc2VlbSB0byB3b3JrXG5cdFx0XHRKYW51cy53YXJuKFwiR2V0dGluZyB0aGUgXCIgKyBzdHJlYW0gKyBcIiB2b2x1bWUgdW5zdXBwb3J0ZWQgYnkgYnJvd3NlclwiKTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGlzTXV0ZWQoaGFuZGxlSWQsIHZpZGVvKSB7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgIXBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZikge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0aWYoIWNvbmZpZy5wYykge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgUGVlckNvbm5lY3Rpb25cIik7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0aWYoIWNvbmZpZy5teVN0cmVhbSkge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgbG9jYWwgTWVkaWFTdHJlYW1cIik7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0aWYodmlkZW8pIHtcblx0XHRcdC8vIENoZWNrIHZpZGVvIHRyYWNrXG5cdFx0XHRpZighY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkgfHwgY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdEphbnVzLndhcm4oXCJObyB2aWRlbyB0cmFja1wiKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gIWNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIENoZWNrIGF1ZGlvIHRyYWNrXG5cdFx0XHRpZighY29uZmlnLm15U3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkgfHwgY29uZmlnLm15U3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdEphbnVzLndhcm4oXCJObyBhdWRpbyB0cmFja1wiKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gIWNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQ7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gbXV0ZShoYW5kbGVJZCwgdmlkZW8sIG11dGUpIHtcblx0XHR2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0aWYoIXBsdWdpbkhhbmRsZSB8fCAhcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmKSB7XG5cdFx0XHRKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG5cdFx0aWYoIWNvbmZpZy5wYykge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgUGVlckNvbm5lY3Rpb25cIik7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGlmKCFjb25maWcubXlTdHJlYW0pIHtcblx0XHRcdEphbnVzLndhcm4oXCJJbnZhbGlkIGxvY2FsIE1lZGlhU3RyZWFtXCIpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZih2aWRlbykge1xuXHRcdFx0Ly8gTXV0ZS91bm11dGUgdmlkZW8gdHJhY2tcblx0XHRcdGlmKCFjb25maWcubXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKSB8fCBjb25maWcubXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0SmFudXMud2FybihcIk5vIHZpZGVvIHRyYWNrXCIpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb25maWcubXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gIW11dGU7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gTXV0ZS91bm11dGUgYXVkaW8gdHJhY2tcblx0XHRcdGlmKCFjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSB8fCBjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0SmFudXMud2FybihcIk5vIGF1ZGlvIHRyYWNrXCIpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gIW11dGU7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRCaXRyYXRlKGhhbmRsZUlkKSB7XG5cdFx0dmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuXHRcdGlmKCFwbHVnaW5IYW5kbGUgfHwgIXBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZikge1xuXHRcdFx0SmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuXHRcdFx0cmV0dXJuIFwiSW52YWxpZCBoYW5kbGVcIjtcblx0XHR9XG5cdFx0dmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcblx0XHRpZighY29uZmlnLnBjKVxuXHRcdFx0cmV0dXJuIFwiSW52YWxpZCBQZWVyQ29ubmVjdGlvblwiO1xuXHRcdC8vIFN0YXJ0IGdldHRpbmcgdGhlIGJpdHJhdGUsIGlmIGdldFN0YXRzIGlzIHN1cHBvcnRlZFxuXHRcdGlmKGNvbmZpZy5wYy5nZXRTdGF0cykge1xuXHRcdFx0aWYoIWNvbmZpZy5iaXRyYXRlLnRpbWVyKSB7XG5cdFx0XHRcdEphbnVzLmxvZyhcIlN0YXJ0aW5nIGJpdHJhdGUgdGltZXIgKHZpYSBnZXRTdGF0cylcIik7XG5cdFx0XHRcdGNvbmZpZy5iaXRyYXRlLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y29uZmlnLnBjLmdldFN0YXRzKClcblx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHN0YXRzKSB7XG5cdFx0XHRcdFx0XHRcdHN0YXRzLmZvckVhY2goZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdFx0XHRcdGlmKCFyZXMpXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGluU3RhdHMgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGVzZSBhcmUgc3RhdGlzdGljcyBvbiBpbmNvbWluZyBtZWRpYVxuXHRcdFx0XHRcdFx0XHRcdGlmKChyZXMubWVkaWFUeXBlID09PSBcInZpZGVvXCIgfHwgcmVzLmlkLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInZpZGVvXCIpID4gLTEpICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlcy50eXBlID09PSBcImluYm91bmQtcnRwXCIgJiYgcmVzLmlkLmluZGV4T2YoXCJydGNwXCIpIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gTmV3IHN0YXRzXG5cdFx0XHRcdFx0XHRcdFx0XHRpblN0YXRzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYocmVzLnR5cGUgPT0gJ3NzcmMnICYmIHJlcy5ieXRlc1JlY2VpdmVkICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdChyZXMuZ29vZ0NvZGVjTmFtZSA9PT0gXCJWUDhcIiB8fCByZXMuZ29vZ0NvZGVjTmFtZSA9PT0gXCJcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIE9sZGVyIENocm9tZXIgdmVyc2lvbnNcblx0XHRcdFx0XHRcdFx0XHRcdGluU3RhdHMgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBQYXJzZSBzdGF0cyBub3dcblx0XHRcdFx0XHRcdFx0XHRpZihpblN0YXRzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25maWcuYml0cmF0ZS5ic25vdyA9IHJlcy5ieXRlc1JlY2VpdmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uZmlnLmJpdHJhdGUudHNub3cgPSByZXMudGltZXN0YW1wO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoY29uZmlnLmJpdHJhdGUuYnNiZWZvcmUgPT09IG51bGwgfHwgY29uZmlnLmJpdHJhdGUudHNiZWZvcmUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2tpcCB0aGlzIHJvdW5kXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbmZpZy5iaXRyYXRlLmJzYmVmb3JlID0gY29uZmlnLmJpdHJhdGUuYnNub3c7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbmZpZy5iaXRyYXRlLnRzYmVmb3JlID0gY29uZmlnLmJpdHJhdGUudHNub3c7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDYWxjdWxhdGUgYml0cmF0ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgdGltZVBhc3NlZCA9IGNvbmZpZy5iaXRyYXRlLnRzbm93IC0gY29uZmlnLmJpdHJhdGUudHNiZWZvcmU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gXCJzYWZhcmlcIilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lUGFzc2VkID0gdGltZVBhc3NlZC8xMDAwO1x0Ly8gQXBwYXJlbnRseSB0aGUgdGltZXN0YW1wIGlzIGluIG1pY3Jvc2Vjb25kcywgaW4gU2FmYXJpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBiaXRSYXRlID0gTWF0aC5yb3VuZCgoY29uZmlnLmJpdHJhdGUuYnNub3cgLSBjb25maWcuYml0cmF0ZS5ic2JlZm9yZSkgKiA4IC8gdGltZVBhc3NlZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKEphbnVzLndlYlJUQ0FkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gXCJzYWZhcmlcIilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRiaXRSYXRlID0gcGFyc2VJbnQoYml0UmF0ZS8xMDAwKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uZmlnLmJpdHJhdGUudmFsdWUgPSBiaXRSYXRlICsgJyBrYml0cy9zZWMnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL34gSmFudXMubG9nKFwiRXN0aW1hdGVkIGJpdHJhdGUgaXMgXCIgKyBjb25maWcuYml0cmF0ZS52YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbmZpZy5iaXRyYXRlLmJzYmVmb3JlID0gY29uZmlnLmJpdHJhdGUuYnNub3c7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbmZpZy5iaXRyYXRlLnRzYmVmb3JlID0gY29uZmlnLmJpdHJhdGUudHNub3c7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LCAxMDAwKTtcblx0XHRcdFx0cmV0dXJuIFwiMCBrYml0cy9zZWNcIjtcdC8vIFdlIGRvbid0IGhhdmUgYSBiaXRyYXRlIHZhbHVlIHlldFxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNvbmZpZy5iaXRyYXRlLnZhbHVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRKYW51cy53YXJuKFwiR2V0dGluZyB0aGUgdmlkZW8gYml0cmF0ZSB1bnN1cHBvcnRlZCBieSBicm93c2VyXCIpO1xuXHRcdFx0cmV0dXJuIFwiRmVhdHVyZSB1bnN1cHBvcnRlZCBieSBicm93c2VyXCI7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gd2VicnRjRXJyb3IoZXJyb3IpIHtcblx0XHRKYW51cy5lcnJvcihcIldlYlJUQyBlcnJvcjpcIiwgZXJyb3IpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW51cFdlYnJ0YyhoYW5kbGVJZCwgaGFuZ3VwUmVxdWVzdCkge1xuXHRcdEphbnVzLmxvZyhcIkNsZWFuaW5nIFdlYlJUQyBzdHVmZlwiKTtcblx0XHR2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG5cdFx0aWYoIXBsdWdpbkhhbmRsZSkge1xuXHRcdFx0Ly8gTm90aGluZyB0byBjbGVhblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuXHRcdGlmKGNvbmZpZykge1xuXHRcdFx0aWYoaGFuZ3VwUmVxdWVzdCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHQvLyBTZW5kIGEgaGFuZ3VwIHJlcXVlc3QgKHdlIGRvbid0IHJlYWxseSBjYXJlIGFib3V0IHRoZSByZXNwb25zZSlcblx0XHRcdFx0dmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJoYW5ndXBcIiwgXCJ0cmFuc2FjdGlvblwiOiBKYW51cy5yYW5kb21TdHJpbmcoMTIpIH07XG5cdFx0XHRcdGlmKHBsdWdpbkhhbmRsZS50b2tlbilcblx0XHRcdFx0XHRyZXF1ZXN0W1widG9rZW5cIl0gPSBwbHVnaW5IYW5kbGUudG9rZW47XG5cdFx0XHRcdGlmKGFwaXNlY3JldClcblx0XHRcdFx0XHRyZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuXHRcdFx0XHRKYW51cy5kZWJ1ZyhcIlNlbmRpbmcgaGFuZ3VwIHJlcXVlc3QgKGhhbmRsZT1cIiArIGhhbmRsZUlkICsgXCIpOlwiKTtcblx0XHRcdFx0SmFudXMuZGVidWcocmVxdWVzdCk7XG5cdFx0XHRcdGlmKHdlYnNvY2tldHMpIHtcblx0XHRcdFx0XHRyZXF1ZXN0W1wic2Vzc2lvbl9pZFwiXSA9IHNlc3Npb25JZDtcblx0XHRcdFx0XHRyZXF1ZXN0W1wiaGFuZGxlX2lkXCJdID0gaGFuZGxlSWQ7XG5cdFx0XHRcdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0SmFudXMuaHR0cEFQSUNhbGwoc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQgKyBcIi9cIiArIGhhbmRsZUlkLCB7XG5cdFx0XHRcdFx0XHR2ZXJiOiAnUE9TVCcsXG5cdFx0XHRcdFx0XHR3aXRoQ3JlZGVudGlhbHM6IHdpdGhDcmVkZW50aWFscyxcblx0XHRcdFx0XHRcdGJvZHk6IHJlcXVlc3Rcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gQ2xlYW51cCBzdGFja1xuXHRcdFx0Y29uZmlnLnJlbW90ZVN0cmVhbSA9IG51bGw7XG5cdFx0XHRpZihjb25maWcudm9sdW1lKSB7XG5cdFx0XHRcdGlmKGNvbmZpZy52b2x1bWVbXCJsb2NhbFwiXSAmJiBjb25maWcudm9sdW1lW1wibG9jYWxcIl0udGltZXIpXG5cdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChjb25maWcudm9sdW1lW1wibG9jYWxcIl0udGltZXIpO1xuXHRcdFx0XHRpZihjb25maWcudm9sdW1lW1wicmVtb3RlXCJdICYmIGNvbmZpZy52b2x1bWVbXCJyZW1vdGVcIl0udGltZXIpXG5cdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChjb25maWcudm9sdW1lW1wicmVtb3RlXCJdLnRpbWVyKTtcblx0XHRcdH1cblx0XHRcdGNvbmZpZy52b2x1bWUgPSB7fTtcblx0XHRcdGlmKGNvbmZpZy5iaXRyYXRlLnRpbWVyKVxuXHRcdFx0XHRjbGVhckludGVydmFsKGNvbmZpZy5iaXRyYXRlLnRpbWVyKTtcblx0XHRcdGNvbmZpZy5iaXRyYXRlLnRpbWVyID0gbnVsbDtcblx0XHRcdGNvbmZpZy5iaXRyYXRlLmJzbm93ID0gbnVsbDtcblx0XHRcdGNvbmZpZy5iaXRyYXRlLmJzYmVmb3JlID0gbnVsbDtcblx0XHRcdGNvbmZpZy5iaXRyYXRlLnRzbm93ID0gbnVsbDtcblx0XHRcdGNvbmZpZy5iaXRyYXRlLnRzYmVmb3JlID0gbnVsbDtcblx0XHRcdGNvbmZpZy5iaXRyYXRlLnZhbHVlID0gbnVsbDtcblx0XHRcdGlmKCFjb25maWcuc3RyZWFtRXh0ZXJuYWwgJiYgY29uZmlnLm15U3RyZWFtKSB7XG5cdFx0XHRcdEphbnVzLmxvZyhcIlN0b3BwaW5nIGxvY2FsIHN0cmVhbSB0cmFja3NcIik7XG5cdFx0XHRcdEphbnVzLnN0b3BBbGxUcmFja3MoY29uZmlnLm15U3RyZWFtKTtcblx0XHRcdH1cblx0XHRcdGNvbmZpZy5zdHJlYW1FeHRlcm5hbCA9IGZhbHNlO1xuXHRcdFx0Y29uZmlnLm15U3RyZWFtID0gbnVsbDtcblx0XHRcdC8vIENsb3NlIFBlZXJDb25uZWN0aW9uXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25maWcucGMuY2xvc2UoKTtcblx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHQvLyBEbyBub3RoaW5nXG5cdFx0XHR9XG5cdFx0XHRjb25maWcucGMgPSBudWxsO1xuXHRcdFx0Y29uZmlnLmNhbmRpZGF0ZXMgPSBudWxsO1xuXHRcdFx0Y29uZmlnLm15U2RwID0gbnVsbDtcblx0XHRcdGNvbmZpZy5yZW1vdGVTZHAgPSBudWxsO1xuXHRcdFx0Y29uZmlnLmljZURvbmUgPSBmYWxzZTtcblx0XHRcdGNvbmZpZy5kYXRhQ2hhbm5lbCA9IHt9O1xuXHRcdFx0Y29uZmlnLmR0bWZTZW5kZXIgPSBudWxsO1xuXHRcdFx0Y29uZmlnLnNlbmRlclRyYW5zZm9ybXMgPSBudWxsO1xuXHRcdFx0Y29uZmlnLnJlY2VpdmVyVHJhbnNmb3JtcyA9IG51bGw7XG5cdFx0fVxuXHRcdHBsdWdpbkhhbmRsZS5vbmNsZWFudXAoKTtcblx0fVxuXG5cdC8vIEhlbHBlciBtZXRob2QgdG8gbXVuZ2UgYW4gU0RQIHRvIGVuYWJsZSBzaW11bGNhc3RpbmcgKENocm9tZSBvbmx5KVxuXHRmdW5jdGlvbiBtdW5nZVNkcEZvclNpbXVsY2FzdGluZyhzZHApIHtcblx0XHQvLyBMZXQncyBtdW5nZSB0aGUgU0RQIHRvIGFkZCB0aGUgYXR0cmlidXRlcyBmb3IgZW5hYmxpbmcgc2ltdWxjYXN0aW5nXG5cdFx0Ly8gKGJhc2VkIG9uIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2dnYXJiZXIvYTE5YjRjMzM1MTAwMjhiOWM2NTcpXG5cdFx0dmFyIGxpbmVzID0gc2RwLnNwbGl0KFwiXFxyXFxuXCIpO1xuXHRcdHZhciB2aWRlbyA9IGZhbHNlO1xuXHRcdHZhciBzc3JjID0gWyAtMSBdLCBzc3JjX2ZpZCA9IFsgLTEgXTtcblx0XHR2YXIgY25hbWUgPSBudWxsLCBtc2lkID0gbnVsbCwgbXNsYWJlbCA9IG51bGwsIGxhYmVsID0gbnVsbDtcblx0XHR2YXIgaW5zZXJ0QXQgPSAtMTtcblx0XHRmb3IobGV0IGk9MDsgaTxsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgbWxpbmUgPSBsaW5lc1tpXS5tYXRjaCgvbT0oXFx3KykgKi8pO1xuXHRcdFx0aWYobWxpbmUpIHtcblx0XHRcdFx0Y29uc3QgbWVkaXVtID0gbWxpbmVbMV07XG5cdFx0XHRcdGlmKG1lZGl1bSA9PT0gXCJ2aWRlb1wiKSB7XG5cdFx0XHRcdFx0Ly8gTmV3IHZpZGVvIG0tbGluZTogbWFrZSBzdXJlIGl0J3MgdGhlIGZpcnN0IG9uZVxuXHRcdFx0XHRcdGlmKHNzcmNbMF0gPCAwKSB7XG5cdFx0XHRcdFx0XHR2aWRlbyA9IHRydWU7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIFdlJ3JlIGRvbmUsIGxldCdzIGFkZCB0aGUgbmV3IGF0dHJpYnV0ZXMgaGVyZVxuXHRcdFx0XHRcdFx0aW5zZXJ0QXQgPSBpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIE5ldyBub24tdmlkZW8gbS1saW5lOiBkbyB3ZSBoYXZlIHdoYXQgd2Ugd2VyZSBsb29raW5nIGZvcj9cblx0XHRcdFx0XHRpZihzc3JjWzBdID4gLTEpIHtcblx0XHRcdFx0XHRcdC8vIFdlJ3JlIGRvbmUsIGxldCdzIGFkZCB0aGUgbmV3IGF0dHJpYnV0ZXMgaGVyZVxuXHRcdFx0XHRcdFx0aW5zZXJ0QXQgPSBpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYoIXZpZGVvKVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdHZhciBzaW0gPSBsaW5lc1tpXS5tYXRjaCgvYT1zc3JjLWdyb3VwOlNJTSAoXFxkKykgKFxcZCspIChcXGQrKS8pO1xuXHRcdFx0aWYoc2ltKSB7XG5cdFx0XHRcdEphbnVzLndhcm4oXCJUaGUgU0RQIGFscmVhZHkgY29udGFpbnMgYSBTSU0gYXR0cmlidXRlLCBtdW5naW5nIHdpbGwgYmUgc2tpcHBlZFwiKTtcblx0XHRcdFx0cmV0dXJuIHNkcDtcblx0XHRcdH1cblx0XHRcdHZhciBmaWQgPSBsaW5lc1tpXS5tYXRjaCgvYT1zc3JjLWdyb3VwOkZJRCAoXFxkKykgKFxcZCspLyk7XG5cdFx0XHRpZihmaWQpIHtcblx0XHRcdFx0c3NyY1swXSA9IGZpZFsxXTtcblx0XHRcdFx0c3NyY19maWRbMF0gPSBmaWRbMl07XG5cdFx0XHRcdGxpbmVzLnNwbGljZShpLCAxKTsgaS0tO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmKHNzcmNbMF0pIHtcblx0XHRcdFx0dmFyIG1hdGNoID0gbGluZXNbaV0ubWF0Y2goJ2E9c3NyYzonICsgc3NyY1swXSArICcgY25hbWU6KC4rKScpXG5cdFx0XHRcdGlmKG1hdGNoKSB7XG5cdFx0XHRcdFx0Y25hbWUgPSBtYXRjaFsxXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXRjaCA9IGxpbmVzW2ldLm1hdGNoKCdhPXNzcmM6JyArIHNzcmNbMF0gKyAnIG1zaWQ6KC4rKScpXG5cdFx0XHRcdGlmKG1hdGNoKSB7XG5cdFx0XHRcdFx0bXNpZCA9IG1hdGNoWzFdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG1hdGNoID0gbGluZXNbaV0ubWF0Y2goJ2E9c3NyYzonICsgc3NyY1swXSArICcgbXNsYWJlbDooLispJylcblx0XHRcdFx0aWYobWF0Y2gpIHtcblx0XHRcdFx0XHRtc2xhYmVsID0gbWF0Y2hbMV07XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2ggPSBsaW5lc1tpXS5tYXRjaCgnYT1zc3JjOicgKyBzc3JjWzBdICsgJyBsYWJlbDooLispJylcblx0XHRcdFx0aWYobWF0Y2gpIHtcblx0XHRcdFx0XHRsYWJlbCA9IG1hdGNoWzFdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGxpbmVzW2ldLmluZGV4T2YoJ2E9c3NyYzonICsgc3NyY19maWRbMF0pID09PSAwKSB7XG5cdFx0XHRcdFx0bGluZXMuc3BsaWNlKGksIDEpOyBpLS07XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYobGluZXNbaV0uaW5kZXhPZignYT1zc3JjOicgKyBzc3JjWzBdKSA9PT0gMCkge1xuXHRcdFx0XHRcdGxpbmVzLnNwbGljZShpLCAxKTsgaS0tO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihsaW5lc1tpXS5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaSwgMSk7IGktLTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHNzcmNbMF0gPCAwKSB7XG5cdFx0XHQvLyBDb3VsZG4ndCBmaW5kIGEgRklEIGF0dHJpYnV0ZSwgbGV0J3MganVzdCB0YWtlIHRoZSBmaXJzdCB2aWRlbyBTU1JDIHdlIGZpbmRcblx0XHRcdGluc2VydEF0ID0gLTE7XG5cdFx0XHR2aWRlbyA9IGZhbHNlO1xuXHRcdFx0Zm9yKGxldCBpPTA7IGk8bGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgbWxpbmUgPSBsaW5lc1tpXS5tYXRjaCgvbT0oXFx3KykgKi8pO1xuXHRcdFx0XHRpZihtbGluZSkge1xuXHRcdFx0XHRcdGNvbnN0IG1lZGl1bSA9IG1saW5lWzFdO1xuXHRcdFx0XHRcdGlmKG1lZGl1bSA9PT0gXCJ2aWRlb1wiKSB7XG5cdFx0XHRcdFx0XHQvLyBOZXcgdmlkZW8gbS1saW5lOiBtYWtlIHN1cmUgaXQncyB0aGUgZmlyc3Qgb25lXG5cdFx0XHRcdFx0XHRpZihzc3JjWzBdIDwgMCkge1xuXHRcdFx0XHRcdFx0XHR2aWRlbyA9IHRydWU7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBXZSdyZSBkb25lLCBsZXQncyBhZGQgdGhlIG5ldyBhdHRyaWJ1dGVzIGhlcmVcblx0XHRcdFx0XHRcdFx0aW5zZXJ0QXQgPSBpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gTmV3IG5vbi12aWRlbyBtLWxpbmU6IGRvIHdlIGhhdmUgd2hhdCB3ZSB3ZXJlIGxvb2tpbmcgZm9yP1xuXHRcdFx0XHRcdFx0aWYoc3NyY1swXSA+IC0xKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFdlJ3JlIGRvbmUsIGxldCdzIGFkZCB0aGUgbmV3IGF0dHJpYnV0ZXMgaGVyZVxuXHRcdFx0XHRcdFx0XHRpbnNlcnRBdCA9IGk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZighdmlkZW8pXG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGlmKHNzcmNbMF0gPCAwKSB7XG5cdFx0XHRcdFx0dmFyIHZhbHVlID0gbGluZXNbaV0ubWF0Y2goL2E9c3NyYzooXFxkKykvKTtcblx0XHRcdFx0XHRpZih2YWx1ZSkge1xuXHRcdFx0XHRcdFx0c3NyY1swXSA9IHZhbHVlWzFdO1xuXHRcdFx0XHRcdFx0bGluZXMuc3BsaWNlKGksIDEpOyBpLS07XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGV0IG1hdGNoID0gbGluZXNbaV0ubWF0Y2goJ2E9c3NyYzonICsgc3NyY1swXSArICcgY25hbWU6KC4rKScpXG5cdFx0XHRcdFx0aWYobWF0Y2gpIHtcblx0XHRcdFx0XHRcdGNuYW1lID0gbWF0Y2hbMV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1hdGNoID0gbGluZXNbaV0ubWF0Y2goJ2E9c3NyYzonICsgc3NyY1swXSArICcgbXNpZDooLispJylcblx0XHRcdFx0XHRpZihtYXRjaCkge1xuXHRcdFx0XHRcdFx0bXNpZCA9IG1hdGNoWzFdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtYXRjaCA9IGxpbmVzW2ldLm1hdGNoKCdhPXNzcmM6JyArIHNzcmNbMF0gKyAnIG1zbGFiZWw6KC4rKScpXG5cdFx0XHRcdFx0aWYobWF0Y2gpIHtcblx0XHRcdFx0XHRcdG1zbGFiZWwgPSBtYXRjaFsxXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bWF0Y2ggPSBsaW5lc1tpXS5tYXRjaCgnYT1zc3JjOicgKyBzc3JjWzBdICsgJyBsYWJlbDooLispJylcblx0XHRcdFx0XHRpZihtYXRjaCkge1xuXHRcdFx0XHRcdFx0bGFiZWwgPSBtYXRjaFsxXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYobGluZXNbaV0uaW5kZXhPZignYT1zc3JjOicgKyBzc3JjX2ZpZFswXSkgPT09IDApIHtcblx0XHRcdFx0XHRcdGxpbmVzLnNwbGljZShpLCAxKTsgaS0tO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKGxpbmVzW2ldLmluZGV4T2YoJ2E9c3NyYzonICsgc3NyY1swXSkgPT09IDApIHtcblx0XHRcdFx0XHRcdGxpbmVzLnNwbGljZShpLCAxKTsgaS0tO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGxpbmVzW2ldLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdGxpbmVzLnNwbGljZShpLCAxKTsgaS0tO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHNzcmNbMF0gPCAwKSB7XG5cdFx0XHQvLyBTdGlsbCBub3RoaW5nLCBsZXQncyBqdXN0IHJldHVybiB0aGUgU0RQIHdlIHdlcmUgYXNrZWQgdG8gbXVuZ2Vcblx0XHRcdEphbnVzLndhcm4oXCJDb3VsZG4ndCBmaW5kIHRoZSB2aWRlbyBTU1JDLCBzaW11bGNhc3RpbmcgTk9UIGVuYWJsZWRcIik7XG5cdFx0XHRyZXR1cm4gc2RwO1xuXHRcdH1cblx0XHRpZihpbnNlcnRBdCA8IDApIHtcblx0XHRcdC8vIEFwcGVuZCBhdCB0aGUgZW5kXG5cdFx0XHRpbnNlcnRBdCA9IGxpbmVzLmxlbmd0aDtcblx0XHR9XG5cdFx0Ly8gR2VuZXJhdGUgYSBjb3VwbGUgb2YgU1NSQ3MgKGZvciByZXRyYW5zbWlzc2lvbnMgdG9vKVxuXHRcdC8vIE5vdGU6IHNob3VsZCB3ZSBjaGVjayBpZiB0aGVyZSBhcmUgY29uZmxpY3RzLCBoZXJlP1xuXHRcdHNzcmNbMV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMHhGRkZGRkZGRik7XG5cdFx0c3NyY1syXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoweEZGRkZGRkZGKTtcblx0XHRzc3JjX2ZpZFsxXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoweEZGRkZGRkZGKTtcblx0XHRzc3JjX2ZpZFsyXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoweEZGRkZGRkZGKTtcblx0XHQvLyBBZGQgYXR0cmlidXRlcyB0byB0aGUgU0RQXG5cdFx0Zm9yKHZhciBpPTA7IGk8c3NyYy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYoY25hbWUpIHtcblx0XHRcdFx0bGluZXMuc3BsaWNlKGluc2VydEF0LCAwLCAnYT1zc3JjOicgKyBzc3JjW2ldICsgJyBjbmFtZTonICsgY25hbWUpO1xuXHRcdFx0XHRpbnNlcnRBdCsrO1xuXHRcdFx0fVxuXHRcdFx0aWYobXNpZCkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmM6JyArIHNzcmNbaV0gKyAnIG1zaWQ6JyArIG1zaWQpO1xuXHRcdFx0XHRpbnNlcnRBdCsrO1xuXHRcdFx0fVxuXHRcdFx0aWYobXNsYWJlbCkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmM6JyArIHNzcmNbaV0gKyAnIG1zbGFiZWw6JyArIG1zbGFiZWwpO1xuXHRcdFx0XHRpbnNlcnRBdCsrO1xuXHRcdFx0fVxuXHRcdFx0aWYobGFiZWwpIHtcblx0XHRcdFx0bGluZXMuc3BsaWNlKGluc2VydEF0LCAwLCAnYT1zc3JjOicgKyBzc3JjW2ldICsgJyBsYWJlbDonICsgbGFiZWwpO1xuXHRcdFx0XHRpbnNlcnRBdCsrO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQWRkIHRoZSBzYW1lIGluZm8gZm9yIHRoZSByZXRyYW5zbWlzc2lvbiBTU1JDXG5cdFx0XHRpZihjbmFtZSkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmM6JyArIHNzcmNfZmlkW2ldICsgJyBjbmFtZTonICsgY25hbWUpO1xuXHRcdFx0XHRpbnNlcnRBdCsrO1xuXHRcdFx0fVxuXHRcdFx0aWYobXNpZCkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmM6JyArIHNzcmNfZmlkW2ldICsgJyBtc2lkOicgKyBtc2lkKTtcblx0XHRcdFx0aW5zZXJ0QXQrKztcblx0XHRcdH1cblx0XHRcdGlmKG1zbGFiZWwpIHtcblx0XHRcdFx0bGluZXMuc3BsaWNlKGluc2VydEF0LCAwLCAnYT1zc3JjOicgKyBzc3JjX2ZpZFtpXSArICcgbXNsYWJlbDonICsgbXNsYWJlbCk7XG5cdFx0XHRcdGluc2VydEF0Kys7XG5cdFx0XHR9XG5cdFx0XHRpZihsYWJlbCkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmM6JyArIHNzcmNfZmlkW2ldICsgJyBsYWJlbDonICsgbGFiZWwpO1xuXHRcdFx0XHRpbnNlcnRBdCsrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmMtZ3JvdXA6RklEICcgKyBzc3JjWzJdICsgJyAnICsgc3NyY19maWRbMl0pO1xuXHRcdGxpbmVzLnNwbGljZShpbnNlcnRBdCwgMCwgJ2E9c3NyYy1ncm91cDpGSUQgJyArIHNzcmNbMV0gKyAnICcgKyBzc3JjX2ZpZFsxXSk7XG5cdFx0bGluZXMuc3BsaWNlKGluc2VydEF0LCAwLCAnYT1zc3JjLWdyb3VwOkZJRCAnICsgc3NyY1swXSArICcgJyArIHNzcmNfZmlkWzBdKTtcblx0XHRsaW5lcy5zcGxpY2UoaW5zZXJ0QXQsIDAsICdhPXNzcmMtZ3JvdXA6U0lNICcgKyBzc3JjWzBdICsgJyAnICsgc3NyY1sxXSArICcgJyArIHNzcmNbMl0pO1xuXHRcdHNkcCA9IGxpbmVzLmpvaW4oXCJcXHJcXG5cIik7XG5cdFx0aWYoIXNkcC5lbmRzV2l0aChcIlxcclxcblwiKSlcblx0XHRcdHNkcCArPSBcIlxcclxcblwiO1xuXHRcdHJldHVybiBzZHA7XG5cdH1cblxuXHQvLyBIZWxwZXIgbWV0aG9kcyB0byBwYXJzZSBhIG1lZGlhIG9iamVjdFxuXHRmdW5jdGlvbiBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpIHtcblx0XHRKYW51cy5kZWJ1ZyhcImlzQXVkaW9TZW5kRW5hYmxlZDpcIiwgbWVkaWEpO1xuXHRcdGlmKCFtZWRpYSlcblx0XHRcdHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuXHRcdGlmKG1lZGlhLmF1ZGlvID09PSBmYWxzZSlcblx0XHRcdHJldHVybiBmYWxzZTtcdC8vIEdlbmVyaWMgYXVkaW8gaGFzIHByZWNlZGVuY2Vcblx0XHRpZihtZWRpYS5hdWRpb1NlbmQgPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5hdWRpb1NlbmQgPT09IG51bGwpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcdC8vIERlZmF1bHRcblx0XHRyZXR1cm4gKG1lZGlhLmF1ZGlvU2VuZCA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0F1ZGlvU2VuZFJlcXVpcmVkKG1lZGlhKSB7XG5cdFx0SmFudXMuZGVidWcoXCJpc0F1ZGlvU2VuZFJlcXVpcmVkOlwiLCBtZWRpYSk7XG5cdFx0aWYoIW1lZGlhKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuXHRcdGlmKG1lZGlhLmF1ZGlvID09PSBmYWxzZSB8fCBtZWRpYS5hdWRpb1NlbmQgPT09IGZhbHNlKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gSWYgd2UncmUgbm90IGFza2luZyB0byBjYXB0dXJlIGF1ZGlvLCBpdCdzIG5vdCByZXF1aXJlZFxuXHRcdGlmKG1lZGlhLmZhaWxJZk5vQXVkaW8gPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5mYWlsSWZOb0F1ZGlvID09PSBudWxsKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuXHRcdHJldHVybiAobWVkaWEuZmFpbElmTm9BdWRpbyA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0F1ZGlvUmVjdkVuYWJsZWQobWVkaWEpIHtcblx0XHRKYW51cy5kZWJ1ZyhcImlzQXVkaW9SZWN2RW5hYmxlZDpcIiwgbWVkaWEpO1xuXHRcdGlmKCFtZWRpYSlcblx0XHRcdHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuXHRcdGlmKG1lZGlhLmF1ZGlvID09PSBmYWxzZSlcblx0XHRcdHJldHVybiBmYWxzZTtcdC8vIEdlbmVyaWMgYXVkaW8gaGFzIHByZWNlZGVuY2Vcblx0XHRpZihtZWRpYS5hdWRpb1JlY3YgPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5hdWRpb1JlY3YgPT09IG51bGwpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcdC8vIERlZmF1bHRcblx0XHRyZXR1cm4gKG1lZGlhLmF1ZGlvUmVjdiA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpIHtcblx0XHRKYW51cy5kZWJ1ZyhcImlzVmlkZW9TZW5kRW5hYmxlZDpcIiwgbWVkaWEpO1xuXHRcdGlmKCFtZWRpYSlcblx0XHRcdHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuXHRcdGlmKG1lZGlhLnZpZGVvID09PSBmYWxzZSlcblx0XHRcdHJldHVybiBmYWxzZTtcdC8vIEdlbmVyaWMgdmlkZW8gaGFzIHByZWNlZGVuY2Vcblx0XHRpZihtZWRpYS52aWRlb1NlbmQgPT09IHVuZGVmaW5lZCB8fCBtZWRpYS52aWRlb1NlbmQgPT09IG51bGwpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcdC8vIERlZmF1bHRcblx0XHRyZXR1cm4gKG1lZGlhLnZpZGVvU2VuZCA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1ZpZGVvU2VuZFJlcXVpcmVkKG1lZGlhKSB7XG5cdFx0SmFudXMuZGVidWcoXCJpc1ZpZGVvU2VuZFJlcXVpcmVkOlwiLCBtZWRpYSk7XG5cdFx0aWYoIW1lZGlhKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuXHRcdGlmKG1lZGlhLnZpZGVvID09PSBmYWxzZSB8fCBtZWRpYS52aWRlb1NlbmQgPT09IGZhbHNlKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gSWYgd2UncmUgbm90IGFza2luZyB0byBjYXB0dXJlIHZpZGVvLCBpdCdzIG5vdCByZXF1aXJlZFxuXHRcdGlmKG1lZGlhLmZhaWxJZk5vVmlkZW8gPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5mYWlsSWZOb1ZpZGVvID09PSBudWxsKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuXHRcdHJldHVybiAobWVkaWEuZmFpbElmTm9WaWRlbyA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1ZpZGVvUmVjdkVuYWJsZWQobWVkaWEpIHtcblx0XHRKYW51cy5kZWJ1ZyhcImlzVmlkZW9SZWN2RW5hYmxlZDpcIiwgbWVkaWEpO1xuXHRcdGlmKCFtZWRpYSlcblx0XHRcdHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuXHRcdGlmKG1lZGlhLnZpZGVvID09PSBmYWxzZSlcblx0XHRcdHJldHVybiBmYWxzZTtcdC8vIEdlbmVyaWMgdmlkZW8gaGFzIHByZWNlZGVuY2Vcblx0XHRpZihtZWRpYS52aWRlb1JlY3YgPT09IHVuZGVmaW5lZCB8fCBtZWRpYS52aWRlb1JlY3YgPT09IG51bGwpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcdC8vIERlZmF1bHRcblx0XHRyZXR1cm4gKG1lZGlhLnZpZGVvUmVjdiA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1NjcmVlblNlbmRFbmFibGVkKG1lZGlhKSB7XG5cdFx0SmFudXMuZGVidWcoXCJpc1NjcmVlblNlbmRFbmFibGVkOlwiLCBtZWRpYSk7XG5cdFx0aWYgKCFtZWRpYSlcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRpZiAodHlwZW9mIG1lZGlhLnZpZGVvICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgbWVkaWEudmlkZW8ubWFuZGF0b3J5ICE9PSAnb2JqZWN0Jylcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR2YXIgY29uc3RyYWludHMgPSBtZWRpYS52aWRlby5tYW5kYXRvcnk7XG5cdFx0aWYgKGNvbnN0cmFpbnRzLmNocm9tZU1lZGlhU291cmNlKVxuXHRcdFx0cmV0dXJuIGNvbnN0cmFpbnRzLmNocm9tZU1lZGlhU291cmNlID09PSAnZGVza3RvcCcgfHwgY29uc3RyYWludHMuY2hyb21lTWVkaWFTb3VyY2UgPT09ICdzY3JlZW4nO1xuXHRcdGVsc2UgaWYgKGNvbnN0cmFpbnRzLm1vek1lZGlhU291cmNlKVxuXHRcdFx0cmV0dXJuIGNvbnN0cmFpbnRzLm1vek1lZGlhU291cmNlID09PSAnd2luZG93JyB8fCBjb25zdHJhaW50cy5tb3pNZWRpYVNvdXJjZSA9PT0gJ3NjcmVlbic7XG5cdFx0ZWxzZSBpZiAoY29uc3RyYWludHMubWVkaWFTb3VyY2UpXG5cdFx0XHRyZXR1cm4gY29uc3RyYWludHMubWVkaWFTb3VyY2UgPT09ICd3aW5kb3cnIHx8IGNvbnN0cmFpbnRzLm1lZGlhU291cmNlID09PSAnc2NyZWVuJztcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0RhdGFFbmFibGVkKG1lZGlhKSB7XG5cdFx0SmFudXMuZGVidWcoXCJpc0RhdGFFbmFibGVkOlwiLCBtZWRpYSk7XG5cdFx0aWYoSmFudXMud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImVkZ2VcIikge1xuXHRcdFx0SmFudXMud2FybihcIkVkZ2UgZG9lc24ndCBzdXBwb3J0IGRhdGEgY2hhbm5lbHMgeWV0XCIpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZihtZWRpYSA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhID09PSBudWxsKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuXHRcdHJldHVybiAobWVkaWEuZGF0YSA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1RyaWNrbGVFbmFibGVkKHRyaWNrbGUpIHtcblx0XHRKYW51cy5kZWJ1ZyhcImlzVHJpY2tsZUVuYWJsZWQ6XCIsIHRyaWNrbGUpO1xuXHRcdHJldHVybiAodHJpY2tsZSA9PT0gZmFsc2UpID8gZmFsc2UgOiB0cnVlO1xuXHR9XG59XG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbmV4cG9ydCB7XG4gIEphbnVzXG59O1xuIiwiLyoqXG4gKiBAbGljc3RhcnQgVGhlIGZvbGxvd2luZyBpcyB0aGUgZW50aXJlIGxpY2Vuc2Ugbm90aWNlIGZvciB0aGVcbiAqIEphdmFTY3JpcHQgY29kZSBpbiB0aGlzIHBhZ2VcbiAqXG4gKiBDb3B5cmlnaHQgMjAyMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICogQGxpY2VuZCBUaGUgYWJvdmUgaXMgdGhlIGVudGlyZSBsaWNlbnNlIG5vdGljZSBmb3IgdGhlXG4gKiBKYXZhU2NyaXB0IGNvZGUgaW4gdGhpcyBwYWdlXG4gKi9cblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJwZGZqcy1kaXN0L2J1aWxkL3BkZlwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJwZGZqcy1kaXN0L2J1aWxkL3BkZlwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJwZGZqcy1kaXN0L2J1aWxkL3BkZlwiXSA9IHJvb3QucGRmanNMaWIgPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gLyoqKioqKi8gKCgpID0+IHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHRcInVzZSBzdHJpY3RcIjtcbi8qKioqKiovIFx0dmFyIF9fd2VicGFja19tb2R1bGVzX18gPSAoW1xuLyogMCAqLyxcbi8qIDEgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuVmVyYm9zaXR5TGV2ZWwgPSBleHBvcnRzLlV0aWwgPSBleHBvcnRzLlVua25vd25FcnJvckV4Y2VwdGlvbiA9IGV4cG9ydHMuVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uID0gZXhwb3J0cy5VTlNVUFBPUlRFRF9GRUFUVVJFUyA9IGV4cG9ydHMuVGV4dFJlbmRlcmluZ01vZGUgPSBleHBvcnRzLlN0cmVhbVR5cGUgPSBleHBvcnRzLlJlbmRlcmluZ0ludGVudEZsYWcgPSBleHBvcnRzLlBlcm1pc3Npb25GbGFnID0gZXhwb3J0cy5QYXNzd29yZFJlc3BvbnNlcyA9IGV4cG9ydHMuUGFzc3dvcmRFeGNlcHRpb24gPSBleHBvcnRzLlBhZ2VBY3Rpb25FdmVudFR5cGUgPSBleHBvcnRzLk9QUyA9IGV4cG9ydHMuTWlzc2luZ1BERkV4Y2VwdGlvbiA9IGV4cG9ydHMuSW52YWxpZFBERkV4Y2VwdGlvbiA9IGV4cG9ydHMuSW1hZ2VLaW5kID0gZXhwb3J0cy5JREVOVElUWV9NQVRSSVggPSBleHBvcnRzLkZvcm1hdEVycm9yID0gZXhwb3J0cy5Gb250VHlwZSA9IGV4cG9ydHMuRmVhdHVyZVRlc3QgPSBleHBvcnRzLkZPTlRfSURFTlRJVFlfTUFUUklYID0gZXhwb3J0cy5Eb2N1bWVudEFjdGlvbkV2ZW50VHlwZSA9IGV4cG9ydHMuQ01hcENvbXByZXNzaW9uVHlwZSA9IGV4cG9ydHMuQmFzZUV4Y2VwdGlvbiA9IGV4cG9ydHMuQW5ub3RhdGlvblR5cGUgPSBleHBvcnRzLkFubm90YXRpb25TdGF0ZU1vZGVsVHlwZSA9IGV4cG9ydHMuQW5ub3RhdGlvblJldmlld1N0YXRlID0gZXhwb3J0cy5Bbm5vdGF0aW9uUmVwbHlUeXBlID0gZXhwb3J0cy5Bbm5vdGF0aW9uTW9kZSA9IGV4cG9ydHMuQW5ub3RhdGlvbk1hcmtlZFN0YXRlID0gZXhwb3J0cy5Bbm5vdGF0aW9uRmxhZyA9IGV4cG9ydHMuQW5ub3RhdGlvbkZpZWxkRmxhZyA9IGV4cG9ydHMuQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZSA9IGV4cG9ydHMuQW5ub3RhdGlvbkFjdGlvbkV2ZW50VHlwZSA9IGV4cG9ydHMuQWJvcnRFeGNlcHRpb24gPSB2b2lkIDA7XG5leHBvcnRzLmFycmF5Qnl0ZUxlbmd0aCA9IGFycmF5Qnl0ZUxlbmd0aDtcbmV4cG9ydHMuYXJyYXlzVG9CeXRlcyA9IGFycmF5c1RvQnl0ZXM7XG5leHBvcnRzLmFzc2VydCA9IGFzc2VydDtcbmV4cG9ydHMuYnl0ZXNUb1N0cmluZyA9IGJ5dGVzVG9TdHJpbmc7XG5leHBvcnRzLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5ID0gY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHk7XG5leHBvcnRzLmNyZWF0ZVZhbGlkQWJzb2x1dGVVcmwgPSBjcmVhdGVWYWxpZEFic29sdXRlVXJsO1xuZXhwb3J0cy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG5leHBvcnRzLmdldE1vZGlmaWNhdGlvbkRhdGUgPSBnZXRNb2RpZmljYXRpb25EYXRlO1xuZXhwb3J0cy5nZXRWZXJib3NpdHlMZXZlbCA9IGdldFZlcmJvc2l0eUxldmVsO1xuZXhwb3J0cy5pbmZvID0gaW5mbztcbmV4cG9ydHMuaXNBcnJheUJ1ZmZlciA9IGlzQXJyYXlCdWZmZXI7XG5leHBvcnRzLmlzQXJyYXlFcXVhbCA9IGlzQXJyYXlFcXVhbDtcbmV4cG9ydHMuaXNBc2NpaSA9IGlzQXNjaWk7XG5leHBvcnRzLm9iamVjdEZyb21NYXAgPSBvYmplY3RGcm9tTWFwO1xuZXhwb3J0cy5vYmplY3RTaXplID0gb2JqZWN0U2l6ZTtcbmV4cG9ydHMuc2V0VmVyYm9zaXR5TGV2ZWwgPSBzZXRWZXJib3NpdHlMZXZlbDtcbmV4cG9ydHMuc2hhZG93ID0gc2hhZG93O1xuZXhwb3J0cy5zdHJpbmczMiA9IHN0cmluZzMyO1xuZXhwb3J0cy5zdHJpbmdUb0J5dGVzID0gc3RyaW5nVG9CeXRlcztcbmV4cG9ydHMuc3RyaW5nVG9QREZTdHJpbmcgPSBzdHJpbmdUb1BERlN0cmluZztcbmV4cG9ydHMuc3RyaW5nVG9VVEYxNkJFU3RyaW5nID0gc3RyaW5nVG9VVEYxNkJFU3RyaW5nO1xuZXhwb3J0cy5zdHJpbmdUb1VURjhTdHJpbmcgPSBzdHJpbmdUb1VURjhTdHJpbmc7XG5leHBvcnRzLnVucmVhY2hhYmxlID0gdW5yZWFjaGFibGU7XG5leHBvcnRzLnV0ZjhTdHJpbmdUb1N0cmluZyA9IHV0ZjhTdHJpbmdUb1N0cmluZztcbmV4cG9ydHMud2FybiA9IHdhcm47XG5cbl9fd19wZGZqc19yZXF1aXJlX18oMik7XG5cbmNvbnN0IElERU5USVRZX01BVFJJWCA9IFsxLCAwLCAwLCAxLCAwLCAwXTtcbmV4cG9ydHMuSURFTlRJVFlfTUFUUklYID0gSURFTlRJVFlfTUFUUklYO1xuY29uc3QgRk9OVF9JREVOVElUWV9NQVRSSVggPSBbMC4wMDEsIDAsIDAsIDAuMDAxLCAwLCAwXTtcbmV4cG9ydHMuRk9OVF9JREVOVElUWV9NQVRSSVggPSBGT05UX0lERU5USVRZX01BVFJJWDtcbmNvbnN0IFJlbmRlcmluZ0ludGVudEZsYWcgPSB7XG4gIEFOWTogMHgwMSxcbiAgRElTUExBWTogMHgwMixcbiAgUFJJTlQ6IDB4MDQsXG4gIEFOTk9UQVRJT05TX0ZPUk1TOiAweDEwLFxuICBBTk5PVEFUSU9OU19TVE9SQUdFOiAweDIwLFxuICBBTk5PVEFUSU9OU19ESVNBQkxFOiAweDQwLFxuICBPUExJU1Q6IDB4MTAwXG59O1xuZXhwb3J0cy5SZW5kZXJpbmdJbnRlbnRGbGFnID0gUmVuZGVyaW5nSW50ZW50RmxhZztcbmNvbnN0IEFubm90YXRpb25Nb2RlID0ge1xuICBESVNBQkxFOiAwLFxuICBFTkFCTEU6IDEsXG4gIEVOQUJMRV9GT1JNUzogMixcbiAgRU5BQkxFX1NUT1JBR0U6IDNcbn07XG5leHBvcnRzLkFubm90YXRpb25Nb2RlID0gQW5ub3RhdGlvbk1vZGU7XG5jb25zdCBQZXJtaXNzaW9uRmxhZyA9IHtcbiAgUFJJTlQ6IDB4MDQsXG4gIE1PRElGWV9DT05URU5UUzogMHgwOCxcbiAgQ09QWTogMHgxMCxcbiAgTU9ESUZZX0FOTk9UQVRJT05TOiAweDIwLFxuICBGSUxMX0lOVEVSQUNUSVZFX0ZPUk1TOiAweDEwMCxcbiAgQ09QWV9GT1JfQUNDRVNTSUJJTElUWTogMHgyMDAsXG4gIEFTU0VNQkxFOiAweDQwMCxcbiAgUFJJTlRfSElHSF9RVUFMSVRZOiAweDgwMFxufTtcbmV4cG9ydHMuUGVybWlzc2lvbkZsYWcgPSBQZXJtaXNzaW9uRmxhZztcbmNvbnN0IFRleHRSZW5kZXJpbmdNb2RlID0ge1xuICBGSUxMOiAwLFxuICBTVFJPS0U6IDEsXG4gIEZJTExfU1RST0tFOiAyLFxuICBJTlZJU0lCTEU6IDMsXG4gIEZJTExfQUREX1RPX1BBVEg6IDQsXG4gIFNUUk9LRV9BRERfVE9fUEFUSDogNSxcbiAgRklMTF9TVFJPS0VfQUREX1RPX1BBVEg6IDYsXG4gIEFERF9UT19QQVRIOiA3LFxuICBGSUxMX1NUUk9LRV9NQVNLOiAzLFxuICBBRERfVE9fUEFUSF9GTEFHOiA0XG59O1xuZXhwb3J0cy5UZXh0UmVuZGVyaW5nTW9kZSA9IFRleHRSZW5kZXJpbmdNb2RlO1xuY29uc3QgSW1hZ2VLaW5kID0ge1xuICBHUkFZU0NBTEVfMUJQUDogMSxcbiAgUkdCXzI0QlBQOiAyLFxuICBSR0JBXzMyQlBQOiAzXG59O1xuZXhwb3J0cy5JbWFnZUtpbmQgPSBJbWFnZUtpbmQ7XG5jb25zdCBBbm5vdGF0aW9uVHlwZSA9IHtcbiAgVEVYVDogMSxcbiAgTElOSzogMixcbiAgRlJFRVRFWFQ6IDMsXG4gIExJTkU6IDQsXG4gIFNRVUFSRTogNSxcbiAgQ0lSQ0xFOiA2LFxuICBQT0xZR09OOiA3LFxuICBQT0xZTElORTogOCxcbiAgSElHSExJR0hUOiA5LFxuICBVTkRFUkxJTkU6IDEwLFxuICBTUVVJR0dMWTogMTEsXG4gIFNUUklLRU9VVDogMTIsXG4gIFNUQU1QOiAxMyxcbiAgQ0FSRVQ6IDE0LFxuICBJTks6IDE1LFxuICBQT1BVUDogMTYsXG4gIEZJTEVBVFRBQ0hNRU5UOiAxNyxcbiAgU09VTkQ6IDE4LFxuICBNT1ZJRTogMTksXG4gIFdJREdFVDogMjAsXG4gIFNDUkVFTjogMjEsXG4gIFBSSU5URVJNQVJLOiAyMixcbiAgVFJBUE5FVDogMjMsXG4gIFdBVEVSTUFSSzogMjQsXG4gIFRIUkVFRDogMjUsXG4gIFJFREFDVDogMjZcbn07XG5leHBvcnRzLkFubm90YXRpb25UeXBlID0gQW5ub3RhdGlvblR5cGU7XG5jb25zdCBBbm5vdGF0aW9uU3RhdGVNb2RlbFR5cGUgPSB7XG4gIE1BUktFRDogXCJNYXJrZWRcIixcbiAgUkVWSUVXOiBcIlJldmlld1wiXG59O1xuZXhwb3J0cy5Bbm5vdGF0aW9uU3RhdGVNb2RlbFR5cGUgPSBBbm5vdGF0aW9uU3RhdGVNb2RlbFR5cGU7XG5jb25zdCBBbm5vdGF0aW9uTWFya2VkU3RhdGUgPSB7XG4gIE1BUktFRDogXCJNYXJrZWRcIixcbiAgVU5NQVJLRUQ6IFwiVW5tYXJrZWRcIlxufTtcbmV4cG9ydHMuQW5ub3RhdGlvbk1hcmtlZFN0YXRlID0gQW5ub3RhdGlvbk1hcmtlZFN0YXRlO1xuY29uc3QgQW5ub3RhdGlvblJldmlld1N0YXRlID0ge1xuICBBQ0NFUFRFRDogXCJBY2NlcHRlZFwiLFxuICBSRUpFQ1RFRDogXCJSZWplY3RlZFwiLFxuICBDQU5DRUxMRUQ6IFwiQ2FuY2VsbGVkXCIsXG4gIENPTVBMRVRFRDogXCJDb21wbGV0ZWRcIixcbiAgTk9ORTogXCJOb25lXCJcbn07XG5leHBvcnRzLkFubm90YXRpb25SZXZpZXdTdGF0ZSA9IEFubm90YXRpb25SZXZpZXdTdGF0ZTtcbmNvbnN0IEFubm90YXRpb25SZXBseVR5cGUgPSB7XG4gIEdST1VQOiBcIkdyb3VwXCIsXG4gIFJFUExZOiBcIlJcIlxufTtcbmV4cG9ydHMuQW5ub3RhdGlvblJlcGx5VHlwZSA9IEFubm90YXRpb25SZXBseVR5cGU7XG5jb25zdCBBbm5vdGF0aW9uRmxhZyA9IHtcbiAgSU5WSVNJQkxFOiAweDAxLFxuICBISURERU46IDB4MDIsXG4gIFBSSU5UOiAweDA0LFxuICBOT1pPT006IDB4MDgsXG4gIE5PUk9UQVRFOiAweDEwLFxuICBOT1ZJRVc6IDB4MjAsXG4gIFJFQURPTkxZOiAweDQwLFxuICBMT0NLRUQ6IDB4ODAsXG4gIFRPR0dMRU5PVklFVzogMHgxMDAsXG4gIExPQ0tFRENPTlRFTlRTOiAweDIwMFxufTtcbmV4cG9ydHMuQW5ub3RhdGlvbkZsYWcgPSBBbm5vdGF0aW9uRmxhZztcbmNvbnN0IEFubm90YXRpb25GaWVsZEZsYWcgPSB7XG4gIFJFQURPTkxZOiAweDAwMDAwMDEsXG4gIFJFUVVJUkVEOiAweDAwMDAwMDIsXG4gIE5PRVhQT1JUOiAweDAwMDAwMDQsXG4gIE1VTFRJTElORTogMHgwMDAxMDAwLFxuICBQQVNTV09SRDogMHgwMDAyMDAwLFxuICBOT1RPR0dMRVRPT0ZGOiAweDAwMDQwMDAsXG4gIFJBRElPOiAweDAwMDgwMDAsXG4gIFBVU0hCVVRUT046IDB4MDAxMDAwMCxcbiAgQ09NQk86IDB4MDAyMDAwMCxcbiAgRURJVDogMHgwMDQwMDAwLFxuICBTT1JUOiAweDAwODAwMDAsXG4gIEZJTEVTRUxFQ1Q6IDB4MDEwMDAwMCxcbiAgTVVMVElTRUxFQ1Q6IDB4MDIwMDAwMCxcbiAgRE9OT1RTUEVMTENIRUNLOiAweDA0MDAwMDAsXG4gIERPTk9UU0NST0xMOiAweDA4MDAwMDAsXG4gIENPTUI6IDB4MTAwMDAwMCxcbiAgUklDSFRFWFQ6IDB4MjAwMDAwMCxcbiAgUkFESU9TSU5VTklTT046IDB4MjAwMDAwMCxcbiAgQ09NTUlUT05TRUxDSEFOR0U6IDB4NDAwMDAwMFxufTtcbmV4cG9ydHMuQW5ub3RhdGlvbkZpZWxkRmxhZyA9IEFubm90YXRpb25GaWVsZEZsYWc7XG5jb25zdCBBbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlID0ge1xuICBTT0xJRDogMSxcbiAgREFTSEVEOiAyLFxuICBCRVZFTEVEOiAzLFxuICBJTlNFVDogNCxcbiAgVU5ERVJMSU5FOiA1XG59O1xuZXhwb3J0cy5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlID0gQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZTtcbmNvbnN0IEFubm90YXRpb25BY3Rpb25FdmVudFR5cGUgPSB7XG4gIEU6IFwiTW91c2UgRW50ZXJcIixcbiAgWDogXCJNb3VzZSBFeGl0XCIsXG4gIEQ6IFwiTW91c2UgRG93blwiLFxuICBVOiBcIk1vdXNlIFVwXCIsXG4gIEZvOiBcIkZvY3VzXCIsXG4gIEJsOiBcIkJsdXJcIixcbiAgUE86IFwiUGFnZU9wZW5cIixcbiAgUEM6IFwiUGFnZUNsb3NlXCIsXG4gIFBWOiBcIlBhZ2VWaXNpYmxlXCIsXG4gIFBJOiBcIlBhZ2VJbnZpc2libGVcIixcbiAgSzogXCJLZXlzdHJva2VcIixcbiAgRjogXCJGb3JtYXRcIixcbiAgVjogXCJWYWxpZGF0ZVwiLFxuICBDOiBcIkNhbGN1bGF0ZVwiXG59O1xuZXhwb3J0cy5Bbm5vdGF0aW9uQWN0aW9uRXZlbnRUeXBlID0gQW5ub3RhdGlvbkFjdGlvbkV2ZW50VHlwZTtcbmNvbnN0IERvY3VtZW50QWN0aW9uRXZlbnRUeXBlID0ge1xuICBXQzogXCJXaWxsQ2xvc2VcIixcbiAgV1M6IFwiV2lsbFNhdmVcIixcbiAgRFM6IFwiRGlkU2F2ZVwiLFxuICBXUDogXCJXaWxsUHJpbnRcIixcbiAgRFA6IFwiRGlkUHJpbnRcIlxufTtcbmV4cG9ydHMuRG9jdW1lbnRBY3Rpb25FdmVudFR5cGUgPSBEb2N1bWVudEFjdGlvbkV2ZW50VHlwZTtcbmNvbnN0IFBhZ2VBY3Rpb25FdmVudFR5cGUgPSB7XG4gIE86IFwiUGFnZU9wZW5cIixcbiAgQzogXCJQYWdlQ2xvc2VcIlxufTtcbmV4cG9ydHMuUGFnZUFjdGlvbkV2ZW50VHlwZSA9IFBhZ2VBY3Rpb25FdmVudFR5cGU7XG5jb25zdCBTdHJlYW1UeXBlID0ge1xuICBVTktOT1dOOiBcIlVOS05PV05cIixcbiAgRkxBVEU6IFwiRkxBVEVcIixcbiAgTFpXOiBcIkxaV1wiLFxuICBEQ1Q6IFwiRENUXCIsXG4gIEpQWDogXCJKUFhcIixcbiAgSkJJRzogXCJKQklHXCIsXG4gIEE4NTogXCJBODVcIixcbiAgQUhYOiBcIkFIWFwiLFxuICBDQ0Y6IFwiQ0NGXCIsXG4gIFJMWDogXCJSTFhcIlxufTtcbmV4cG9ydHMuU3RyZWFtVHlwZSA9IFN0cmVhbVR5cGU7XG5jb25zdCBGb250VHlwZSA9IHtcbiAgVU5LTk9XTjogXCJVTktOT1dOXCIsXG4gIFRZUEUxOiBcIlRZUEUxXCIsXG4gIFRZUEUxU1RBTkRBUkQ6IFwiVFlQRTFTVEFOREFSRFwiLFxuICBUWVBFMUM6IFwiVFlQRTFDXCIsXG4gIENJREZPTlRUWVBFMDogXCJDSURGT05UVFlQRTBcIixcbiAgQ0lERk9OVFRZUEUwQzogXCJDSURGT05UVFlQRTBDXCIsXG4gIFRSVUVUWVBFOiBcIlRSVUVUWVBFXCIsXG4gIENJREZPTlRUWVBFMjogXCJDSURGT05UVFlQRTJcIixcbiAgVFlQRTM6IFwiVFlQRTNcIixcbiAgT1BFTlRZUEU6IFwiT1BFTlRZUEVcIixcbiAgVFlQRTA6IFwiVFlQRTBcIixcbiAgTU1UWVBFMTogXCJNTVRZUEUxXCJcbn07XG5leHBvcnRzLkZvbnRUeXBlID0gRm9udFR5cGU7XG5jb25zdCBWZXJib3NpdHlMZXZlbCA9IHtcbiAgRVJST1JTOiAwLFxuICBXQVJOSU5HUzogMSxcbiAgSU5GT1M6IDVcbn07XG5leHBvcnRzLlZlcmJvc2l0eUxldmVsID0gVmVyYm9zaXR5TGV2ZWw7XG5jb25zdCBDTWFwQ29tcHJlc3Npb25UeXBlID0ge1xuICBOT05FOiAwLFxuICBCSU5BUlk6IDEsXG4gIFNUUkVBTTogMlxufTtcbmV4cG9ydHMuQ01hcENvbXByZXNzaW9uVHlwZSA9IENNYXBDb21wcmVzc2lvblR5cGU7XG5jb25zdCBPUFMgPSB7XG4gIGRlcGVuZGVuY3k6IDEsXG4gIHNldExpbmVXaWR0aDogMixcbiAgc2V0TGluZUNhcDogMyxcbiAgc2V0TGluZUpvaW46IDQsXG4gIHNldE1pdGVyTGltaXQ6IDUsXG4gIHNldERhc2g6IDYsXG4gIHNldFJlbmRlcmluZ0ludGVudDogNyxcbiAgc2V0RmxhdG5lc3M6IDgsXG4gIHNldEdTdGF0ZTogOSxcbiAgc2F2ZTogMTAsXG4gIHJlc3RvcmU6IDExLFxuICB0cmFuc2Zvcm06IDEyLFxuICBtb3ZlVG86IDEzLFxuICBsaW5lVG86IDE0LFxuICBjdXJ2ZVRvOiAxNSxcbiAgY3VydmVUbzI6IDE2LFxuICBjdXJ2ZVRvMzogMTcsXG4gIGNsb3NlUGF0aDogMTgsXG4gIHJlY3RhbmdsZTogMTksXG4gIHN0cm9rZTogMjAsXG4gIGNsb3NlU3Ryb2tlOiAyMSxcbiAgZmlsbDogMjIsXG4gIGVvRmlsbDogMjMsXG4gIGZpbGxTdHJva2U6IDI0LFxuICBlb0ZpbGxTdHJva2U6IDI1LFxuICBjbG9zZUZpbGxTdHJva2U6IDI2LFxuICBjbG9zZUVPRmlsbFN0cm9rZTogMjcsXG4gIGVuZFBhdGg6IDI4LFxuICBjbGlwOiAyOSxcbiAgZW9DbGlwOiAzMCxcbiAgYmVnaW5UZXh0OiAzMSxcbiAgZW5kVGV4dDogMzIsXG4gIHNldENoYXJTcGFjaW5nOiAzMyxcbiAgc2V0V29yZFNwYWNpbmc6IDM0LFxuICBzZXRIU2NhbGU6IDM1LFxuICBzZXRMZWFkaW5nOiAzNixcbiAgc2V0Rm9udDogMzcsXG4gIHNldFRleHRSZW5kZXJpbmdNb2RlOiAzOCxcbiAgc2V0VGV4dFJpc2U6IDM5LFxuICBtb3ZlVGV4dDogNDAsXG4gIHNldExlYWRpbmdNb3ZlVGV4dDogNDEsXG4gIHNldFRleHRNYXRyaXg6IDQyLFxuICBuZXh0TGluZTogNDMsXG4gIHNob3dUZXh0OiA0NCxcbiAgc2hvd1NwYWNlZFRleHQ6IDQ1LFxuICBuZXh0TGluZVNob3dUZXh0OiA0NixcbiAgbmV4dExpbmVTZXRTcGFjaW5nU2hvd1RleHQ6IDQ3LFxuICBzZXRDaGFyV2lkdGg6IDQ4LFxuICBzZXRDaGFyV2lkdGhBbmRCb3VuZHM6IDQ5LFxuICBzZXRTdHJva2VDb2xvclNwYWNlOiA1MCxcbiAgc2V0RmlsbENvbG9yU3BhY2U6IDUxLFxuICBzZXRTdHJva2VDb2xvcjogNTIsXG4gIHNldFN0cm9rZUNvbG9yTjogNTMsXG4gIHNldEZpbGxDb2xvcjogNTQsXG4gIHNldEZpbGxDb2xvck46IDU1LFxuICBzZXRTdHJva2VHcmF5OiA1NixcbiAgc2V0RmlsbEdyYXk6IDU3LFxuICBzZXRTdHJva2VSR0JDb2xvcjogNTgsXG4gIHNldEZpbGxSR0JDb2xvcjogNTksXG4gIHNldFN0cm9rZUNNWUtDb2xvcjogNjAsXG4gIHNldEZpbGxDTVlLQ29sb3I6IDYxLFxuICBzaGFkaW5nRmlsbDogNjIsXG4gIGJlZ2luSW5saW5lSW1hZ2U6IDYzLFxuICBiZWdpbkltYWdlRGF0YTogNjQsXG4gIGVuZElubGluZUltYWdlOiA2NSxcbiAgcGFpbnRYT2JqZWN0OiA2NixcbiAgbWFya1BvaW50OiA2NyxcbiAgbWFya1BvaW50UHJvcHM6IDY4LFxuICBiZWdpbk1hcmtlZENvbnRlbnQ6IDY5LFxuICBiZWdpbk1hcmtlZENvbnRlbnRQcm9wczogNzAsXG4gIGVuZE1hcmtlZENvbnRlbnQ6IDcxLFxuICBiZWdpbkNvbXBhdDogNzIsXG4gIGVuZENvbXBhdDogNzMsXG4gIHBhaW50Rm9ybVhPYmplY3RCZWdpbjogNzQsXG4gIHBhaW50Rm9ybVhPYmplY3RFbmQ6IDc1LFxuICBiZWdpbkdyb3VwOiA3NixcbiAgZW5kR3JvdXA6IDc3LFxuICBiZWdpbkFubm90YXRpb25zOiA3OCxcbiAgZW5kQW5ub3RhdGlvbnM6IDc5LFxuICBiZWdpbkFubm90YXRpb246IDgwLFxuICBlbmRBbm5vdGF0aW9uOiA4MSxcbiAgcGFpbnRKcGVnWE9iamVjdDogODIsXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdDogODMsXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdEdyb3VwOiA4NCxcbiAgcGFpbnRJbWFnZVhPYmplY3Q6IDg1LFxuICBwYWludElubGluZUltYWdlWE9iamVjdDogODYsXG4gIHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0R3JvdXA6IDg3LFxuICBwYWludEltYWdlWE9iamVjdFJlcGVhdDogODgsXG4gIHBhaW50SW1hZ2VNYXNrWE9iamVjdFJlcGVhdDogODksXG4gIHBhaW50U29saWRDb2xvckltYWdlTWFzazogOTAsXG4gIGNvbnN0cnVjdFBhdGg6IDkxXG59O1xuZXhwb3J0cy5PUFMgPSBPUFM7XG5jb25zdCBVTlNVUFBPUlRFRF9GRUFUVVJFUyA9IHtcbiAgdW5rbm93bjogXCJ1bmtub3duXCIsXG4gIGZvcm1zOiBcImZvcm1zXCIsXG4gIGphdmFTY3JpcHQ6IFwiamF2YVNjcmlwdFwiLFxuICBzaWduYXR1cmVzOiBcInNpZ25hdHVyZXNcIixcbiAgc21hc2s6IFwic21hc2tcIixcbiAgc2hhZGluZ1BhdHRlcm46IFwic2hhZGluZ1BhdHRlcm5cIixcbiAgZm9udDogXCJmb250XCIsXG4gIGVycm9yVGlsaW5nUGF0dGVybjogXCJlcnJvclRpbGluZ1BhdHRlcm5cIixcbiAgZXJyb3JFeHRHU3RhdGU6IFwiZXJyb3JFeHRHU3RhdGVcIixcbiAgZXJyb3JYT2JqZWN0OiBcImVycm9yWE9iamVjdFwiLFxuICBlcnJvckZvbnRMb2FkVHlwZTM6IFwiZXJyb3JGb250TG9hZFR5cGUzXCIsXG4gIGVycm9yRm9udFN0YXRlOiBcImVycm9yRm9udFN0YXRlXCIsXG4gIGVycm9yRm9udE1pc3Npbmc6IFwiZXJyb3JGb250TWlzc2luZ1wiLFxuICBlcnJvckZvbnRUcmFuc2xhdGU6IFwiZXJyb3JGb250VHJhbnNsYXRlXCIsXG4gIGVycm9yQ29sb3JTcGFjZTogXCJlcnJvckNvbG9yU3BhY2VcIixcbiAgZXJyb3JPcGVyYXRvckxpc3Q6IFwiZXJyb3JPcGVyYXRvckxpc3RcIixcbiAgZXJyb3JGb250VG9Vbmljb2RlOiBcImVycm9yRm9udFRvVW5pY29kZVwiLFxuICBlcnJvckZvbnRMb2FkTmF0aXZlOiBcImVycm9yRm9udExvYWROYXRpdmVcIixcbiAgZXJyb3JGb250QnVpbGRQYXRoOiBcImVycm9yRm9udEJ1aWxkUGF0aFwiLFxuICBlcnJvckZvbnRHZXRQYXRoOiBcImVycm9yRm9udEdldFBhdGhcIixcbiAgZXJyb3JNYXJrZWRDb250ZW50OiBcImVycm9yTWFya2VkQ29udGVudFwiLFxuICBlcnJvckNvbnRlbnRTdWJTdHJlYW06IFwiZXJyb3JDb250ZW50U3ViU3RyZWFtXCJcbn07XG5leHBvcnRzLlVOU1VQUE9SVEVEX0ZFQVRVUkVTID0gVU5TVVBQT1JURURfRkVBVFVSRVM7XG5jb25zdCBQYXNzd29yZFJlc3BvbnNlcyA9IHtcbiAgTkVFRF9QQVNTV09SRDogMSxcbiAgSU5DT1JSRUNUX1BBU1NXT1JEOiAyXG59O1xuZXhwb3J0cy5QYXNzd29yZFJlc3BvbnNlcyA9IFBhc3N3b3JkUmVzcG9uc2VzO1xubGV0IHZlcmJvc2l0eSA9IFZlcmJvc2l0eUxldmVsLldBUk5JTkdTO1xuXG5mdW5jdGlvbiBzZXRWZXJib3NpdHlMZXZlbChsZXZlbCkge1xuICBpZiAoTnVtYmVyLmlzSW50ZWdlcihsZXZlbCkpIHtcbiAgICB2ZXJib3NpdHkgPSBsZXZlbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRWZXJib3NpdHlMZXZlbCgpIHtcbiAgcmV0dXJuIHZlcmJvc2l0eTtcbn1cblxuZnVuY3Rpb24gaW5mbyhtc2cpIHtcbiAgaWYgKHZlcmJvc2l0eSA+PSBWZXJib3NpdHlMZXZlbC5JTkZPUykge1xuICAgIGNvbnNvbGUubG9nKGBJbmZvOiAke21zZ31gKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xuICBpZiAodmVyYm9zaXR5ID49IFZlcmJvc2l0eUxldmVsLldBUk5JTkdTKSB7XG4gICAgY29uc29sZS5sb2coYFdhcm5pbmc6ICR7bXNnfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVucmVhY2hhYmxlKG1zZykge1xuICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbn1cblxuZnVuY3Rpb24gYXNzZXJ0KGNvbmQsIG1zZykge1xuICBpZiAoIWNvbmQpIHtcbiAgICB1bnJlYWNoYWJsZShtc2cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9pc1ZhbGlkUHJvdG9jb2wodXJsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3dpdGNoICh1cmwucHJvdG9jb2wpIHtcbiAgICBjYXNlIFwiaHR0cDpcIjpcbiAgICBjYXNlIFwiaHR0cHM6XCI6XG4gICAgY2FzZSBcImZ0cDpcIjpcbiAgICBjYXNlIFwibWFpbHRvOlwiOlxuICAgIGNhc2UgXCJ0ZWw6XCI6XG4gICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCh1cmwsIGJhc2VVcmwgPSBudWxsLCBvcHRpb25zID0gbnVsbCkge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAob3B0aW9ucy5hZGREZWZhdWx0UHJvdG9jb2wgJiYgdXJsLnN0YXJ0c1dpdGgoXCJ3d3cuXCIpKSB7XG4gICAgICAgIGNvbnN0IGRvdHMgPSB1cmwubWF0Y2goL1xcLi9nKTtcblxuICAgICAgICBpZiAoZG90cyAmJiBkb3RzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgdXJsID0gYGh0dHA6Ly8ke3VybH1gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnRyeUNvbnZlcnRFbmNvZGluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVybCA9IHN0cmluZ1RvVVRGOFN0cmluZyh1cmwpO1xuICAgICAgICB9IGNhdGNoIChleCkge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhYnNvbHV0ZVVybCA9IGJhc2VVcmwgPyBuZXcgVVJMKHVybCwgYmFzZVVybCkgOiBuZXcgVVJMKHVybCk7XG5cbiAgICBpZiAoX2lzVmFsaWRQcm90b2NvbChhYnNvbHV0ZVVybCkpIHtcbiAgICAgIHJldHVybiBhYnNvbHV0ZVVybDtcbiAgICB9XG4gIH0gY2F0Y2ggKGV4KSB7fVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBzaGFkb3cob2JqLCBwcm9wLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCB7XG4gICAgdmFsdWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmNvbnN0IEJhc2VFeGNlcHRpb24gPSBmdW5jdGlvbiBCYXNlRXhjZXB0aW9uQ2xvc3VyZSgpIHtcbiAgZnVuY3Rpb24gQmFzZUV4Y2VwdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VFeGNlcHRpb24pIHtcbiAgICAgIHVucmVhY2hhYmxlKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZUV4Y2VwdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG5cbiAgQmFzZUV4Y2VwdGlvbi5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTtcbiAgQmFzZUV4Y2VwdGlvbi5jb25zdHJ1Y3RvciA9IEJhc2VFeGNlcHRpb247XG4gIHJldHVybiBCYXNlRXhjZXB0aW9uO1xufSgpO1xuXG5leHBvcnRzLkJhc2VFeGNlcHRpb24gPSBCYXNlRXhjZXB0aW9uO1xuXG5jbGFzcyBQYXNzd29yZEV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIGNvZGUpIHtcbiAgICBzdXBlcihtc2csIFwiUGFzc3dvcmRFeGNlcHRpb25cIik7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuUGFzc3dvcmRFeGNlcHRpb24gPSBQYXNzd29yZEV4Y2VwdGlvbjtcblxuY2xhc3MgVW5rbm93bkVycm9yRXhjZXB0aW9uIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZywgZGV0YWlscykge1xuICAgIHN1cGVyKG1zZywgXCJVbmtub3duRXJyb3JFeGNlcHRpb25cIik7XG4gICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcbiAgfVxuXG59XG5cbmV4cG9ydHMuVW5rbm93bkVycm9yRXhjZXB0aW9uID0gVW5rbm93bkVycm9yRXhjZXB0aW9uO1xuXG5jbGFzcyBJbnZhbGlkUERGRXhjZXB0aW9uIGV4dGVuZHMgQmFzZUV4Y2VwdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG1zZykge1xuICAgIHN1cGVyKG1zZywgXCJJbnZhbGlkUERGRXhjZXB0aW9uXCIpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5JbnZhbGlkUERGRXhjZXB0aW9uID0gSW52YWxpZFBERkV4Y2VwdGlvbjtcblxuY2xhc3MgTWlzc2luZ1BERkV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2cpIHtcbiAgICBzdXBlcihtc2csIFwiTWlzc2luZ1BERkV4Y2VwdGlvblwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuTWlzc2luZ1BERkV4Y2VwdGlvbiA9IE1pc3NpbmdQREZFeGNlcHRpb247XG5cbmNsYXNzIFVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIHN0YXR1cykge1xuICAgIHN1cGVyKG1zZywgXCJVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb25cIik7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gIH1cblxufVxuXG5leHBvcnRzLlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbiA9IFVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbjtcblxuY2xhc3MgRm9ybWF0RXJyb3IgZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobXNnKSB7XG4gICAgc3VwZXIobXNnLCBcIkZvcm1hdEVycm9yXCIpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5Gb3JtYXRFcnJvciA9IEZvcm1hdEVycm9yO1xuXG5jbGFzcyBBYm9ydEV4Y2VwdGlvbiBleHRlbmRzIEJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2cpIHtcbiAgICBzdXBlcihtc2csIFwiQWJvcnRFeGNlcHRpb25cIik7XG4gIH1cblxufVxuXG5leHBvcnRzLkFib3J0RXhjZXB0aW9uID0gQWJvcnRFeGNlcHRpb247XG5cbmZ1bmN0aW9uIGJ5dGVzVG9TdHJpbmcoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBieXRlcyAhPT0gXCJvYmplY3RcIiB8fCBieXRlcyA9PT0gbnVsbCB8fCBieXRlcy5sZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIHVucmVhY2hhYmxlKFwiSW52YWxpZCBhcmd1bWVudCBmb3IgYnl0ZXNUb1N0cmluZ1wiKTtcbiAgfVxuXG4gIGNvbnN0IGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgY29uc3QgTUFYX0FSR1VNRU5UX0NPVU5UID0gODE5MjtcblxuICBpZiAobGVuZ3RoIDwgTUFYX0FSR1VNRU5UX0NPVU5UKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYnl0ZXMpO1xuICB9XG5cbiAgY29uc3Qgc3RyQnVmID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gTUFYX0FSR1VNRU5UX0NPVU5UKSB7XG4gICAgY29uc3QgY2h1bmtFbmQgPSBNYXRoLm1pbihpICsgTUFYX0FSR1VNRU5UX0NPVU5ULCBsZW5ndGgpO1xuICAgIGNvbnN0IGNodW5rID0gYnl0ZXMuc3ViYXJyYXkoaSwgY2h1bmtFbmQpO1xuICAgIHN0ckJ1Zi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgY2h1bmspKTtcbiAgfVxuXG4gIHJldHVybiBzdHJCdWYuam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHtcbiAgICB1bnJlYWNoYWJsZShcIkludmFsaWQgYXJndW1lbnQgZm9yIHN0cmluZ1RvQnl0ZXNcIik7XG4gIH1cblxuICBjb25zdCBsZW5ndGggPSBzdHIubGVuZ3RoO1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGJ5dGVzW2ldID0gc3RyLmNoYXJDb2RlQXQoaSkgJiAweGZmO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5mdW5jdGlvbiBhcnJheUJ5dGVMZW5ndGgoYXJyKSB7XG4gIGlmIChhcnIubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYXJyLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChhcnIuYnl0ZUxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGFyci5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgdW5yZWFjaGFibGUoXCJJbnZhbGlkIGFyZ3VtZW50IGZvciBhcnJheUJ5dGVMZW5ndGhcIik7XG59XG5cbmZ1bmN0aW9uIGFycmF5c1RvQnl0ZXMoYXJyKSB7XG4gIGNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbiAgaWYgKGxlbmd0aCA9PT0gMSAmJiBhcnJbMF0gaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgcmV0dXJuIGFyclswXTtcbiAgfVxuXG4gIGxldCByZXN1bHRMZW5ndGggPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHRMZW5ndGggKz0gYXJyYXlCeXRlTGVuZ3RoKGFycltpXSk7XG4gIH1cblxuICBsZXQgcG9zID0gMDtcbiAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KHJlc3VsdExlbmd0aCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGxldCBpdGVtID0gYXJyW2ldO1xuXG4gICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaXRlbSA9IHN0cmluZ1RvQnl0ZXMoaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtID0gbmV3IFVpbnQ4QXJyYXkoaXRlbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXRlbUxlbmd0aCA9IGl0ZW0uYnl0ZUxlbmd0aDtcbiAgICBkYXRhLnNldChpdGVtLCBwb3MpO1xuICAgIHBvcyArPSBpdGVtTGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIHN0cmluZzMyKHZhbHVlKSB7XG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHZhbHVlID4+IDI0ICYgMHhmZiwgdmFsdWUgPj4gMTYgJiAweGZmLCB2YWx1ZSA+PiA4ICYgMHhmZiwgdmFsdWUgJiAweGZmKTtcbn1cblxuZnVuY3Rpb24gb2JqZWN0U2l6ZShvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBvYmplY3RGcm9tTWFwKG1hcCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG1hcCkge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBpc0xpdHRsZUVuZGlhbigpIHtcbiAgY29uc3QgYnVmZmVyOCA9IG5ldyBVaW50OEFycmF5KDQpO1xuICBidWZmZXI4WzBdID0gMTtcbiAgY29uc3QgdmlldzMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcjguYnVmZmVyLCAwLCAxKTtcbiAgcmV0dXJuIHZpZXczMlswXSA9PT0gMTtcbn1cblxuZnVuY3Rpb24gaXNFdmFsU3VwcG9ydGVkKCkge1xuICB0cnkge1xuICAgIG5ldyBGdW5jdGlvbihcIlwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5jbGFzcyBGZWF0dXJlVGVzdCB7XG4gIHN0YXRpYyBnZXQgaXNMaXR0bGVFbmRpYW4oKSB7XG4gICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcImlzTGl0dGxlRW5kaWFuXCIsIGlzTGl0dGxlRW5kaWFuKCkpO1xuICB9XG5cbiAgc3RhdGljIGdldCBpc0V2YWxTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHNoYWRvdyh0aGlzLCBcImlzRXZhbFN1cHBvcnRlZFwiLCBpc0V2YWxTdXBwb3J0ZWQoKSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBzaGFkb3codGhpcywgXCJpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZFwiLCB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSBcInVuZGVmaW5lZFwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuRmVhdHVyZVRlc3QgPSBGZWF0dXJlVGVzdDtcbmNvbnN0IGhleE51bWJlcnMgPSBbLi4uQXJyYXkoMjU2KS5rZXlzKCldLm1hcChuID0+IG4udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSk7XG5cbmNsYXNzIFV0aWwge1xuICBzdGF0aWMgbWFrZUhleENvbG9yKHIsIGcsIGIpIHtcbiAgICByZXR1cm4gYCMke2hleE51bWJlcnNbcl19JHtoZXhOdW1iZXJzW2ddfSR7aGV4TnVtYmVyc1tiXX1gO1xuICB9XG5cbiAgc3RhdGljIHNjYWxlTWluTWF4KHRyYW5zZm9ybSwgbWluTWF4KSB7XG4gICAgbGV0IHRlbXA7XG5cbiAgICBpZiAodHJhbnNmb3JtWzBdKSB7XG4gICAgICBpZiAodHJhbnNmb3JtWzBdIDwgMCkge1xuICAgICAgICB0ZW1wID0gbWluTWF4WzBdO1xuICAgICAgICBtaW5NYXhbMF0gPSBtaW5NYXhbMV07XG4gICAgICAgIG1pbk1heFsxXSA9IHRlbXA7XG4gICAgICB9XG5cbiAgICAgIG1pbk1heFswXSAqPSB0cmFuc2Zvcm1bMF07XG4gICAgICBtaW5NYXhbMV0gKj0gdHJhbnNmb3JtWzBdO1xuXG4gICAgICBpZiAodHJhbnNmb3JtWzNdIDwgMCkge1xuICAgICAgICB0ZW1wID0gbWluTWF4WzJdO1xuICAgICAgICBtaW5NYXhbMl0gPSBtaW5NYXhbM107XG4gICAgICAgIG1pbk1heFszXSA9IHRlbXA7XG4gICAgICB9XG5cbiAgICAgIG1pbk1heFsyXSAqPSB0cmFuc2Zvcm1bM107XG4gICAgICBtaW5NYXhbM10gKj0gdHJhbnNmb3JtWzNdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZW1wID0gbWluTWF4WzBdO1xuICAgICAgbWluTWF4WzBdID0gbWluTWF4WzJdO1xuICAgICAgbWluTWF4WzJdID0gdGVtcDtcbiAgICAgIHRlbXAgPSBtaW5NYXhbMV07XG4gICAgICBtaW5NYXhbMV0gPSBtaW5NYXhbM107XG4gICAgICBtaW5NYXhbM10gPSB0ZW1wO1xuXG4gICAgICBpZiAodHJhbnNmb3JtWzFdIDwgMCkge1xuICAgICAgICB0ZW1wID0gbWluTWF4WzJdO1xuICAgICAgICBtaW5NYXhbMl0gPSBtaW5NYXhbM107XG4gICAgICAgIG1pbk1heFszXSA9IHRlbXA7XG4gICAgICB9XG5cbiAgICAgIG1pbk1heFsyXSAqPSB0cmFuc2Zvcm1bMV07XG4gICAgICBtaW5NYXhbM10gKj0gdHJhbnNmb3JtWzFdO1xuXG4gICAgICBpZiAodHJhbnNmb3JtWzJdIDwgMCkge1xuICAgICAgICB0ZW1wID0gbWluTWF4WzBdO1xuICAgICAgICBtaW5NYXhbMF0gPSBtaW5NYXhbMV07XG4gICAgICAgIG1pbk1heFsxXSA9IHRlbXA7XG4gICAgICB9XG5cbiAgICAgIG1pbk1heFswXSAqPSB0cmFuc2Zvcm1bMl07XG4gICAgICBtaW5NYXhbMV0gKj0gdHJhbnNmb3JtWzJdO1xuICAgIH1cblxuICAgIG1pbk1heFswXSArPSB0cmFuc2Zvcm1bNF07XG4gICAgbWluTWF4WzFdICs9IHRyYW5zZm9ybVs0XTtcbiAgICBtaW5NYXhbMl0gKz0gdHJhbnNmb3JtWzVdO1xuICAgIG1pbk1heFszXSArPSB0cmFuc2Zvcm1bNV07XG4gIH1cblxuICBzdGF0aWMgdHJhbnNmb3JtKG0xLCBtMikge1xuICAgIHJldHVybiBbbTFbMF0gKiBtMlswXSArIG0xWzJdICogbTJbMV0sIG0xWzFdICogbTJbMF0gKyBtMVszXSAqIG0yWzFdLCBtMVswXSAqIG0yWzJdICsgbTFbMl0gKiBtMlszXSwgbTFbMV0gKiBtMlsyXSArIG0xWzNdICogbTJbM10sIG0xWzBdICogbTJbNF0gKyBtMVsyXSAqIG0yWzVdICsgbTFbNF0sIG0xWzFdICogbTJbNF0gKyBtMVszXSAqIG0yWzVdICsgbTFbNV1dO1xuICB9XG5cbiAgc3RhdGljIGFwcGx5VHJhbnNmb3JtKHAsIG0pIHtcbiAgICBjb25zdCB4dCA9IHBbMF0gKiBtWzBdICsgcFsxXSAqIG1bMl0gKyBtWzRdO1xuICAgIGNvbnN0IHl0ID0gcFswXSAqIG1bMV0gKyBwWzFdICogbVszXSArIG1bNV07XG4gICAgcmV0dXJuIFt4dCwgeXRdO1xuICB9XG5cbiAgc3RhdGljIGFwcGx5SW52ZXJzZVRyYW5zZm9ybShwLCBtKSB7XG4gICAgY29uc3QgZCA9IG1bMF0gKiBtWzNdIC0gbVsxXSAqIG1bMl07XG4gICAgY29uc3QgeHQgPSAocFswXSAqIG1bM10gLSBwWzFdICogbVsyXSArIG1bMl0gKiBtWzVdIC0gbVs0XSAqIG1bM10pIC8gZDtcbiAgICBjb25zdCB5dCA9ICgtcFswXSAqIG1bMV0gKyBwWzFdICogbVswXSArIG1bNF0gKiBtWzFdIC0gbVs1XSAqIG1bMF0pIC8gZDtcbiAgICByZXR1cm4gW3h0LCB5dF07XG4gIH1cblxuICBzdGF0aWMgZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3gociwgbSkge1xuICAgIGNvbnN0IHAxID0gVXRpbC5hcHBseVRyYW5zZm9ybShyLCBtKTtcbiAgICBjb25zdCBwMiA9IFV0aWwuYXBwbHlUcmFuc2Zvcm0oci5zbGljZSgyLCA0KSwgbSk7XG4gICAgY29uc3QgcDMgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFtyWzBdLCByWzNdXSwgbSk7XG4gICAgY29uc3QgcDQgPSBVdGlsLmFwcGx5VHJhbnNmb3JtKFtyWzJdLCByWzFdXSwgbSk7XG4gICAgcmV0dXJuIFtNYXRoLm1pbihwMVswXSwgcDJbMF0sIHAzWzBdLCBwNFswXSksIE1hdGgubWluKHAxWzFdLCBwMlsxXSwgcDNbMV0sIHA0WzFdKSwgTWF0aC5tYXgocDFbMF0sIHAyWzBdLCBwM1swXSwgcDRbMF0pLCBNYXRoLm1heChwMVsxXSwgcDJbMV0sIHAzWzFdLCBwNFsxXSldO1xuICB9XG5cbiAgc3RhdGljIGludmVyc2VUcmFuc2Zvcm0obSkge1xuICAgIGNvbnN0IGQgPSBtWzBdICogbVszXSAtIG1bMV0gKiBtWzJdO1xuICAgIHJldHVybiBbbVszXSAvIGQsIC1tWzFdIC8gZCwgLW1bMl0gLyBkLCBtWzBdIC8gZCwgKG1bMl0gKiBtWzVdIC0gbVs0XSAqIG1bM10pIC8gZCwgKG1bNF0gKiBtWzFdIC0gbVs1XSAqIG1bMF0pIC8gZF07XG4gIH1cblxuICBzdGF0aWMgYXBwbHkzZFRyYW5zZm9ybShtLCB2KSB7XG4gICAgcmV0dXJuIFttWzBdICogdlswXSArIG1bMV0gKiB2WzFdICsgbVsyXSAqIHZbMl0sIG1bM10gKiB2WzBdICsgbVs0XSAqIHZbMV0gKyBtWzVdICogdlsyXSwgbVs2XSAqIHZbMF0gKyBtWzddICogdlsxXSArIG1bOF0gKiB2WzJdXTtcbiAgfVxuXG4gIHN0YXRpYyBzaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShtKSB7XG4gICAgY29uc3QgdHJhbnNwb3NlID0gW21bMF0sIG1bMl0sIG1bMV0sIG1bM11dO1xuICAgIGNvbnN0IGEgPSBtWzBdICogdHJhbnNwb3NlWzBdICsgbVsxXSAqIHRyYW5zcG9zZVsyXTtcbiAgICBjb25zdCBiID0gbVswXSAqIHRyYW5zcG9zZVsxXSArIG1bMV0gKiB0cmFuc3Bvc2VbM107XG4gICAgY29uc3QgYyA9IG1bMl0gKiB0cmFuc3Bvc2VbMF0gKyBtWzNdICogdHJhbnNwb3NlWzJdO1xuICAgIGNvbnN0IGQgPSBtWzJdICogdHJhbnNwb3NlWzFdICsgbVszXSAqIHRyYW5zcG9zZVszXTtcbiAgICBjb25zdCBmaXJzdCA9IChhICsgZCkgLyAyO1xuICAgIGNvbnN0IHNlY29uZCA9IE1hdGguc3FydCgoYSArIGQpICoqIDIgLSA0ICogKGEgKiBkIC0gYyAqIGIpKSAvIDI7XG4gICAgY29uc3Qgc3ggPSBmaXJzdCArIHNlY29uZCB8fCAxO1xuICAgIGNvbnN0IHN5ID0gZmlyc3QgLSBzZWNvbmQgfHwgMTtcbiAgICByZXR1cm4gW01hdGguc3FydChzeCksIE1hdGguc3FydChzeSldO1xuICB9XG5cbiAgc3RhdGljIG5vcm1hbGl6ZVJlY3QocmVjdCkge1xuICAgIGNvbnN0IHIgPSByZWN0LnNsaWNlKDApO1xuXG4gICAgaWYgKHJlY3RbMF0gPiByZWN0WzJdKSB7XG4gICAgICByWzBdID0gcmVjdFsyXTtcbiAgICAgIHJbMl0gPSByZWN0WzBdO1xuICAgIH1cblxuICAgIGlmIChyZWN0WzFdID4gcmVjdFszXSkge1xuICAgICAgclsxXSA9IHJlY3RbM107XG4gICAgICByWzNdID0gcmVjdFsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIHN0YXRpYyBpbnRlcnNlY3QocmVjdDEsIHJlY3QyKSB7XG4gICAgY29uc3QgeExvdyA9IE1hdGgubWF4KE1hdGgubWluKHJlY3QxWzBdLCByZWN0MVsyXSksIE1hdGgubWluKHJlY3QyWzBdLCByZWN0MlsyXSkpO1xuICAgIGNvbnN0IHhIaWdoID0gTWF0aC5taW4oTWF0aC5tYXgocmVjdDFbMF0sIHJlY3QxWzJdKSwgTWF0aC5tYXgocmVjdDJbMF0sIHJlY3QyWzJdKSk7XG5cbiAgICBpZiAoeExvdyA+IHhIaWdoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB5TG93ID0gTWF0aC5tYXgoTWF0aC5taW4ocmVjdDFbMV0sIHJlY3QxWzNdKSwgTWF0aC5taW4ocmVjdDJbMV0sIHJlY3QyWzNdKSk7XG4gICAgY29uc3QgeUhpZ2ggPSBNYXRoLm1pbihNYXRoLm1heChyZWN0MVsxXSwgcmVjdDFbM10pLCBNYXRoLm1heChyZWN0MlsxXSwgcmVjdDJbM10pKTtcblxuICAgIGlmICh5TG93ID4geUhpZ2gpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBbeExvdywgeUxvdywgeEhpZ2gsIHlIaWdoXTtcbiAgfVxuXG4gIHN0YXRpYyBiZXppZXJCb3VuZGluZ0JveCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpIHtcbiAgICBjb25zdCB0dmFsdWVzID0gW10sXG4gICAgICAgICAgYm91bmRzID0gW1tdLCBbXV07XG4gICAgbGV0IGEsIGIsIGMsIHQsIHQxLCB0MiwgYjJhYywgc3FydGIyYWM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7ICsraSkge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgYiA9IDYgKiB4MCAtIDEyICogeDEgKyA2ICogeDI7XG4gICAgICAgIGEgPSAtMyAqIHgwICsgOSAqIHgxIC0gOSAqIHgyICsgMyAqIHgzO1xuICAgICAgICBjID0gMyAqIHgxIC0gMyAqIHgwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYiA9IDYgKiB5MCAtIDEyICogeTEgKyA2ICogeTI7XG4gICAgICAgIGEgPSAtMyAqIHkwICsgOSAqIHkxIC0gOSAqIHkyICsgMyAqIHkzO1xuICAgICAgICBjID0gMyAqIHkxIC0gMyAqIHkwO1xuICAgICAgfVxuXG4gICAgICBpZiAoTWF0aC5hYnMoYSkgPCAxZS0xMikge1xuICAgICAgICBpZiAoTWF0aC5hYnMoYikgPCAxZS0xMikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdCA9IC1jIC8gYjtcblxuICAgICAgICBpZiAoMCA8IHQgJiYgdCA8IDEpIHtcbiAgICAgICAgICB0dmFsdWVzLnB1c2godCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgYjJhYyA9IGIgKiBiIC0gNCAqIGMgKiBhO1xuICAgICAgc3FydGIyYWMgPSBNYXRoLnNxcnQoYjJhYyk7XG5cbiAgICAgIGlmIChiMmFjIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdDEgPSAoLWIgKyBzcXJ0YjJhYykgLyAoMiAqIGEpO1xuXG4gICAgICBpZiAoMCA8IHQxICYmIHQxIDwgMSkge1xuICAgICAgICB0dmFsdWVzLnB1c2godDEpO1xuICAgICAgfVxuXG4gICAgICB0MiA9ICgtYiAtIHNxcnRiMmFjKSAvICgyICogYSk7XG5cbiAgICAgIGlmICgwIDwgdDIgJiYgdDIgPCAxKSB7XG4gICAgICAgIHR2YWx1ZXMucHVzaCh0Mik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGogPSB0dmFsdWVzLmxlbmd0aCxcbiAgICAgICAgbXQ7XG4gICAgY29uc3QgamxlbiA9IGo7XG5cbiAgICB3aGlsZSAoai0tKSB7XG4gICAgICB0ID0gdHZhbHVlc1tqXTtcbiAgICAgIG10ID0gMSAtIHQ7XG4gICAgICBib3VuZHNbMF1bal0gPSBtdCAqIG10ICogbXQgKiB4MCArIDMgKiBtdCAqIG10ICogdCAqIHgxICsgMyAqIG10ICogdCAqIHQgKiB4MiArIHQgKiB0ICogdCAqIHgzO1xuICAgICAgYm91bmRzWzFdW2pdID0gbXQgKiBtdCAqIG10ICogeTAgKyAzICogbXQgKiBtdCAqIHQgKiB5MSArIDMgKiBtdCAqIHQgKiB0ICogeTIgKyB0ICogdCAqIHQgKiB5MztcbiAgICB9XG5cbiAgICBib3VuZHNbMF1bamxlbl0gPSB4MDtcbiAgICBib3VuZHNbMV1bamxlbl0gPSB5MDtcbiAgICBib3VuZHNbMF1bamxlbiArIDFdID0geDM7XG4gICAgYm91bmRzWzFdW2psZW4gKyAxXSA9IHkzO1xuICAgIGJvdW5kc1swXS5sZW5ndGggPSBib3VuZHNbMV0ubGVuZ3RoID0gamxlbiArIDI7XG4gICAgcmV0dXJuIFtNYXRoLm1pbiguLi5ib3VuZHNbMF0pLCBNYXRoLm1pbiguLi5ib3VuZHNbMV0pLCBNYXRoLm1heCguLi5ib3VuZHNbMF0pLCBNYXRoLm1heCguLi5ib3VuZHNbMV0pXTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuVXRpbCA9IFV0aWw7XG5jb25zdCBQREZTdHJpbmdUcmFuc2xhdGVUYWJsZSA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAweDJkOCwgMHgyYzcsIDB4MmM2LCAweDJkOSwgMHgyZGQsIDB4MmRiLCAweDJkYSwgMHgyZGMsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDB4MjAyMiwgMHgyMDIwLCAweDIwMjEsIDB4MjAyNiwgMHgyMDE0LCAweDIwMTMsIDB4MTkyLCAweDIwNDQsIDB4MjAzOSwgMHgyMDNhLCAweDIyMTIsIDB4MjAzMCwgMHgyMDFlLCAweDIwMWMsIDB4MjAxZCwgMHgyMDE4LCAweDIwMTksIDB4MjAxYSwgMHgyMTIyLCAweGZiMDEsIDB4ZmIwMiwgMHgxNDEsIDB4MTUyLCAweDE2MCwgMHgxNzgsIDB4MTdkLCAweDEzMSwgMHgxNDIsIDB4MTUzLCAweDE2MSwgMHgxN2UsIDAsIDB4MjBhY107XG5cbmZ1bmN0aW9uIHN0cmluZ1RvUERGU3RyaW5nKHN0cikge1xuICBpZiAoc3RyWzBdID49IFwiXFx4RUZcIikge1xuICAgIGxldCBlbmNvZGluZztcblxuICAgIGlmIChzdHJbMF0gPT09IFwiXFx4RkVcIiAmJiBzdHJbMV0gPT09IFwiXFx4RkZcIikge1xuICAgICAgZW5jb2RpbmcgPSBcInV0Zi0xNmJlXCI7XG4gICAgfSBlbHNlIGlmIChzdHJbMF0gPT09IFwiXFx4RkZcIiAmJiBzdHJbMV0gPT09IFwiXFx4RkVcIikge1xuICAgICAgZW5jb2RpbmcgPSBcInV0Zi0xNmxlXCI7XG4gICAgfSBlbHNlIGlmIChzdHJbMF0gPT09IFwiXFx4RUZcIiAmJiBzdHJbMV0gPT09IFwiXFx4QkJcIiAmJiBzdHJbMl0gPT09IFwiXFx4QkZcIikge1xuICAgICAgZW5jb2RpbmcgPSBcInV0Zi04XCI7XG4gICAgfVxuXG4gICAgaWYgKGVuY29kaW5nKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nLCB7XG4gICAgICAgICAgZmF0YWw6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHN0cmluZ1RvQnl0ZXMoc3RyKTtcbiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7XG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICB3YXJuKGBzdHJpbmdUb1BERlN0cmluZzogXCIke2V4fVwiLmApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN0ckJ1ZiA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IHN0ci5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgY29uc3QgY29kZSA9IFBERlN0cmluZ1RyYW5zbGF0ZVRhYmxlW3N0ci5jaGFyQ29kZUF0KGkpXTtcbiAgICBzdHJCdWYucHVzaChjb2RlID8gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKSA6IHN0ci5jaGFyQXQoaSkpO1xuICB9XG5cbiAgcmV0dXJuIHN0ckJ1Zi5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvKFsoKVxcXFxcXG5cXHJdKS9nLCBtYXRjaCA9PiB7XG4gICAgaWYgKG1hdGNoID09PSBcIlxcblwiKSB7XG4gICAgICByZXR1cm4gXCJcXFxcblwiO1xuICAgIH0gZWxzZSBpZiAobWF0Y2ggPT09IFwiXFxyXCIpIHtcbiAgICAgIHJldHVybiBcIlxcXFxyXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGBcXFxcJHttYXRjaH1gO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNBc2NpaShzdHIpIHtcbiAgcmV0dXJuIC9eW1xceDAwLVxceDdGXSokLy50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ1RvVVRGMTZCRVN0cmluZyhzdHIpIHtcbiAgY29uc3QgYnVmID0gW1wiXFx4RkVcXHhGRlwiXTtcblxuICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdHIubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGNvbnN0IGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBidWYucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXIgPj4gOCAmIDB4ZmYpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXIgJiAweGZmKSk7XG4gIH1cblxuICByZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ1RvVVRGOFN0cmluZyhzdHIpIHtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoc3RyKSk7XG59XG5cbmZ1bmN0aW9uIHV0ZjhTdHJpbmdUb1N0cmluZyhzdHIpIHtcbiAgcmV0dXJuIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTtcbn1cblxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2KSB7XG4gIHJldHVybiB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsICYmIHYuYnl0ZUxlbmd0aCAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5RXF1YWwoYXJyMSwgYXJyMikge1xuICBpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXJyMS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0TW9kaWZpY2F0aW9uRGF0ZShkYXRlID0gbmV3IERhdGUoKSkge1xuICBjb25zdCBidWZmZXIgPSBbZGF0ZS5nZXRVVENGdWxsWWVhcigpLnRvU3RyaW5nKCksIChkYXRlLmdldFVUQ01vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSwgZGF0ZS5nZXRVVENEYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIiksIGRhdGUuZ2V0VVRDSG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSwgZGF0ZS5nZXRVVENNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIiksIGRhdGUuZ2V0VVRDU2Vjb25kcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpXTtcbiAgcmV0dXJuIGJ1ZmZlci5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSgpIHtcbiAgY29uc3QgY2FwYWJpbGl0eSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBpc1NldHRsZWQgPSBmYWxzZTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhcGFiaWxpdHksIFwic2V0dGxlZFwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIGlzU2V0dGxlZDtcbiAgICB9XG5cbiAgfSk7XG4gIGNhcGFiaWxpdHkucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjYXBhYmlsaXR5LnJlc29sdmUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaXNTZXR0bGVkID0gdHJ1ZTtcbiAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgfTtcblxuICAgIGNhcGFiaWxpdHkucmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaXNTZXR0bGVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChyZWFzb24pO1xuICAgIH07XG4gIH0pO1xuICByZXR1cm4gY2FwYWJpbGl0eTtcbn1cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbnZhciBfaXNfbm9kZSA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbjtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLmlzTm9kZUpTID0gdm9pZCAwO1xuY29uc3QgaXNOb2RlSlMgPSB0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzICsgXCJcIiA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIgJiYgIXByb2Nlc3MudmVyc2lvbnMubncgJiYgIShwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uICYmIHByb2Nlc3MudHlwZSAmJiBwcm9jZXNzLnR5cGUgIT09IFwiYnJvd3NlclwiKTtcbmV4cG9ydHMuaXNOb2RlSlMgPSBpc05vZGVKUztcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLmJ1aWxkID0gZXhwb3J0cy5SZW5kZXJUYXNrID0gZXhwb3J0cy5QREZXb3JrZXJVdGlsID0gZXhwb3J0cy5QREZXb3JrZXIgPSBleHBvcnRzLlBERlBhZ2VQcm94eSA9IGV4cG9ydHMuUERGRG9jdW1lbnRQcm94eSA9IGV4cG9ydHMuUERGRG9jdW1lbnRMb2FkaW5nVGFzayA9IGV4cG9ydHMuUERGRGF0YVJhbmdlVHJhbnNwb3J0ID0gZXhwb3J0cy5Mb29wYmFja1BvcnQgPSBleHBvcnRzLkRlZmF1bHRTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9IGV4cG9ydHMuRGVmYXVsdENhbnZhc0ZhY3RvcnkgPSBleHBvcnRzLkRlZmF1bHRDTWFwUmVhZGVyRmFjdG9yeSA9IHZvaWQgMDtcbmV4cG9ydHMuZ2V0RG9jdW1lbnQgPSBnZXREb2N1bWVudDtcbmV4cG9ydHMuc2V0UERGTmV0d29ya1N0cmVhbUZhY3RvcnkgPSBzZXRQREZOZXR3b3JrU3RyZWFtRmFjdG9yeTtcbmV4cG9ydHMudmVyc2lvbiA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxudmFyIF9kaXNwbGF5X3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg1KTtcblxudmFyIF9mb250X2xvYWRlciA9IF9fd19wZGZqc19yZXF1aXJlX18oNyk7XG5cbnZhciBfYW5ub3RhdGlvbl9zdG9yYWdlID0gX193X3BkZmpzX3JlcXVpcmVfXyg4KTtcblxudmFyIF9jYW52YXMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93b3JrZXJfb3B0aW9ucyA9IF9fd19wZGZqc19yZXF1aXJlX18oMTMpO1xuXG52YXIgX2lzX25vZGUgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDMpO1xuXG52YXIgX21lc3NhZ2VfaGFuZGxlciA9IF9fd19wZGZqc19yZXF1aXJlX18oMTQpO1xuXG52YXIgX21ldGFkYXRhID0gX193X3BkZmpzX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfb3B0aW9uYWxfY29udGVudF9jb25maWcgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDE2KTtcblxudmFyIF90cmFuc3BvcnRfc3RyZWFtID0gX193X3BkZmpzX3JlcXVpcmVfXygxNyk7XG5cbnZhciBfeGZhX3RleHQgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDE4KTtcblxuY29uc3QgREVGQVVMVF9SQU5HRV9DSFVOS19TSVpFID0gNjU1MzY7XG5jb25zdCBSRU5ERVJJTkdfQ0FOQ0VMTEVEX1RJTUVPVVQgPSAxMDA7XG5sZXQgRGVmYXVsdENhbnZhc0ZhY3RvcnkgPSBfZGlzcGxheV91dGlscy5ET01DYW52YXNGYWN0b3J5O1xuZXhwb3J0cy5EZWZhdWx0Q2FudmFzRmFjdG9yeSA9IERlZmF1bHRDYW52YXNGYWN0b3J5O1xubGV0IERlZmF1bHRDTWFwUmVhZGVyRmFjdG9yeSA9IF9kaXNwbGF5X3V0aWxzLkRPTUNNYXBSZWFkZXJGYWN0b3J5O1xuZXhwb3J0cy5EZWZhdWx0Q01hcFJlYWRlckZhY3RvcnkgPSBEZWZhdWx0Q01hcFJlYWRlckZhY3Rvcnk7XG5sZXQgRGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gX2Rpc3BsYXlfdXRpbHMuRE9NU3RhbmRhcmRGb250RGF0YUZhY3Rvcnk7XG5leHBvcnRzLkRlZmF1bHRTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9IERlZmF1bHRTdGFuZGFyZEZvbnREYXRhRmFjdG9yeTtcblxuaWYgKF9pc19ub2RlLmlzTm9kZUpTKSB7XG4gIGNvbnN0IHtcbiAgICBOb2RlQ2FudmFzRmFjdG9yeSxcbiAgICBOb2RlQ01hcFJlYWRlckZhY3RvcnksXG4gICAgTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5XG4gIH0gPSBfX3dfcGRmanNfcmVxdWlyZV9fKDE5KTtcblxuICBleHBvcnRzLkRlZmF1bHRDYW52YXNGYWN0b3J5ID0gRGVmYXVsdENhbnZhc0ZhY3RvcnkgPSBOb2RlQ2FudmFzRmFjdG9yeTtcbiAgZXhwb3J0cy5EZWZhdWx0Q01hcFJlYWRlckZhY3RvcnkgPSBEZWZhdWx0Q01hcFJlYWRlckZhY3RvcnkgPSBOb2RlQ01hcFJlYWRlckZhY3Rvcnk7XG4gIGV4cG9ydHMuRGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gRGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5O1xufVxuXG5sZXQgY3JlYXRlUERGTmV0d29ya1N0cmVhbTtcblxuZnVuY3Rpb24gc2V0UERGTmV0d29ya1N0cmVhbUZhY3RvcnkocGRmTmV0d29ya1N0cmVhbUZhY3RvcnkpIHtcbiAgY3JlYXRlUERGTmV0d29ya1N0cmVhbSA9IHBkZk5ldHdvcmtTdHJlYW1GYWN0b3J5O1xufVxuXG5mdW5jdGlvbiBnZXREb2N1bWVudChzcmMpIHtcbiAgY29uc3QgdGFzayA9IG5ldyBQREZEb2N1bWVudExvYWRpbmdUYXNrKCk7XG4gIGxldCBzb3VyY2U7XG5cbiAgaWYgKHR5cGVvZiBzcmMgPT09IFwic3RyaW5nXCIgfHwgc3JjIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgc291cmNlID0ge1xuICAgICAgdXJsOiBzcmNcbiAgICB9O1xuICB9IGVsc2UgaWYgKCgwLCBfdXRpbC5pc0FycmF5QnVmZmVyKShzcmMpKSB7XG4gICAgc291cmNlID0ge1xuICAgICAgZGF0YTogc3JjXG4gICAgfTtcbiAgfSBlbHNlIGlmIChzcmMgaW5zdGFuY2VvZiBQREZEYXRhUmFuZ2VUcmFuc3BvcnQpIHtcbiAgICBzb3VyY2UgPSB7XG4gICAgICByYW5nZTogc3JjXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIHNyYyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgaW4gZ2V0RG9jdW1lbnQsIFwiICsgXCJuZWVkIGVpdGhlciBzdHJpbmcsIFVSTCwgVWludDhBcnJheSwgb3IgcGFyYW1ldGVyIG9iamVjdC5cIik7XG4gICAgfVxuXG4gICAgaWYgKCFzcmMudXJsICYmICFzcmMuZGF0YSAmJiAhc3JjLnJhbmdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlciBvYmplY3Q6IG5lZWQgZWl0aGVyIC5kYXRhLCAucmFuZ2Ugb3IgLnVybFwiKTtcbiAgICB9XG5cbiAgICBzb3VyY2UgPSBzcmM7XG4gIH1cblxuICBjb25zdCBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBsZXQgcmFuZ2VUcmFuc3BvcnQgPSBudWxsLFxuICAgICAgd29ya2VyID0gbnVsbDtcblxuICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHNvdXJjZVtrZXldO1xuXG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgXCJ1cmxcIjpcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyYW1zW2tleV0gPSBuZXcgVVJMKHZhbHVlLCB3aW5kb3cubG9jYXRpb24pLmhyZWY7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgKDAsIF91dGlsLndhcm4pKGBDYW5ub3QgY3JlYXRlIHZhbGlkIFVSTDogXCIke2V4fVwiLmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFBERiB1cmwgZGF0YTogXCIgKyBcImVpdGhlciBzdHJpbmcgb3IgVVJMLW9iamVjdCBpcyBleHBlY3RlZCBpbiB0aGUgdXJsIHByb3BlcnR5LlwiKTtcblxuICAgICAgY2FzZSBcInJhbmdlXCI6XG4gICAgICAgIHJhbmdlVHJhbnNwb3J0ID0gdmFsdWU7XG4gICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICBjYXNlIFwid29ya2VyXCI6XG4gICAgICAgIHdvcmtlciA9IHZhbHVlO1xuICAgICAgICBjb250aW51ZTtcblxuICAgICAgY2FzZSBcImRhdGFcIjpcbiAgICAgICAgaWYgKF9pc19ub2RlLmlzTm9kZUpTICYmIHR5cGVvZiBCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgICAgICBwYXJhbXNba2V5XSA9IG5ldyBVaW50OEFycmF5KHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBwYXJhbXNba2V5XSA9ICgwLCBfdXRpbC5zdHJpbmdUb0J5dGVzKSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICFpc05hTih2YWx1ZS5sZW5ndGgpKSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoKDAsIF91dGlsLmlzQXJyYXlCdWZmZXIpKHZhbHVlKSkge1xuICAgICAgICAgIHBhcmFtc1trZXldID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUERGIGJpbmFyeSBkYXRhOiBlaXRoZXIgdHlwZWQgYXJyYXksIFwiICsgXCJzdHJpbmcsIG9yIGFycmF5LWxpa2Ugb2JqZWN0IGlzIGV4cGVjdGVkIGluIHRoZSBkYXRhIHByb3BlcnR5LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHBhcmFtc1trZXldID0gdmFsdWU7XG4gIH1cblxuICBwYXJhbXMuQ01hcFJlYWRlckZhY3RvcnkgPSBwYXJhbXMuQ01hcFJlYWRlckZhY3RvcnkgfHwgRGVmYXVsdENNYXBSZWFkZXJGYWN0b3J5O1xuICBwYXJhbXMuU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgPSBwYXJhbXMuU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgfHwgRGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5O1xuICBwYXJhbXMuaWdub3JlRXJyb3JzID0gcGFyYW1zLnN0b3BBdEVycm9ycyAhPT0gdHJ1ZTtcbiAgcGFyYW1zLmZvbnRFeHRyYVByb3BlcnRpZXMgPSBwYXJhbXMuZm9udEV4dHJhUHJvcGVydGllcyA9PT0gdHJ1ZTtcbiAgcGFyYW1zLnBkZkJ1ZyA9IHBhcmFtcy5wZGZCdWcgPT09IHRydWU7XG4gIHBhcmFtcy5lbmFibGVYZmEgPSBwYXJhbXMuZW5hYmxlWGZhID09PSB0cnVlO1xuXG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihwYXJhbXMucmFuZ2VDaHVua1NpemUpIHx8IHBhcmFtcy5yYW5nZUNodW5rU2l6ZSA8IDEpIHtcbiAgICBwYXJhbXMucmFuZ2VDaHVua1NpemUgPSBERUZBVUxUX1JBTkdFX0NIVU5LX1NJWkU7XG4gIH1cblxuICBpZiAodHlwZW9mIHBhcmFtcy5kb2NCYXNlVXJsICE9PSBcInN0cmluZ1wiIHx8ICgwLCBfZGlzcGxheV91dGlscy5pc0RhdGFTY2hlbWUpKHBhcmFtcy5kb2NCYXNlVXJsKSkge1xuICAgIHBhcmFtcy5kb2NCYXNlVXJsID0gbnVsbDtcbiAgfVxuXG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihwYXJhbXMubWF4SW1hZ2VTaXplKSB8fCBwYXJhbXMubWF4SW1hZ2VTaXplIDwgLTEpIHtcbiAgICBwYXJhbXMubWF4SW1hZ2VTaXplID0gLTE7XG4gIH1cblxuICBpZiAodHlwZW9mIHBhcmFtcy5jTWFwVXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcGFyYW1zLmNNYXBVcmwgPSBudWxsO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwYXJhbXMuc3RhbmRhcmRGb250RGF0YVVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHBhcmFtcy5zdGFuZGFyZEZvbnREYXRhVXJsID0gbnVsbDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGFyYW1zLnVzZVdvcmtlckZldGNoICE9PSBcImJvb2xlYW5cIikge1xuICAgIHBhcmFtcy51c2VXb3JrZXJGZXRjaCA9IHBhcmFtcy5DTWFwUmVhZGVyRmFjdG9yeSA9PT0gX2Rpc3BsYXlfdXRpbHMuRE9NQ01hcFJlYWRlckZhY3RvcnkgJiYgcGFyYW1zLlN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID09PSBfZGlzcGxheV91dGlscy5ET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGFyYW1zLmlzRXZhbFN1cHBvcnRlZCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICBwYXJhbXMuaXNFdmFsU3VwcG9ydGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGFyYW1zLmRpc2FibGVGb250RmFjZSAhPT0gXCJib29sZWFuXCIpIHtcbiAgICBwYXJhbXMuZGlzYWJsZUZvbnRGYWNlID0gX2lzX25vZGUuaXNOb2RlSlM7XG4gIH1cblxuICBpZiAodHlwZW9mIHBhcmFtcy51c2VTeXN0ZW1Gb250cyAhPT0gXCJib29sZWFuXCIpIHtcbiAgICBwYXJhbXMudXNlU3lzdGVtRm9udHMgPSAhX2lzX25vZGUuaXNOb2RlSlMgJiYgIXBhcmFtcy5kaXNhYmxlRm9udEZhY2U7XG4gIH1cblxuICBpZiAodHlwZW9mIHBhcmFtcy5vd25lckRvY3VtZW50ICE9PSBcIm9iamVjdFwiIHx8IHBhcmFtcy5vd25lckRvY3VtZW50ID09PSBudWxsKSB7XG4gICAgcGFyYW1zLm93bmVyRG9jdW1lbnQgPSBnbG9iYWxUaGlzLmRvY3VtZW50O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwYXJhbXMuZGlzYWJsZVJhbmdlICE9PSBcImJvb2xlYW5cIikge1xuICAgIHBhcmFtcy5kaXNhYmxlUmFuZ2UgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGFyYW1zLmRpc2FibGVTdHJlYW0gIT09IFwiYm9vbGVhblwiKSB7XG4gICAgcGFyYW1zLmRpc2FibGVTdHJlYW0gPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGFyYW1zLmRpc2FibGVBdXRvRmV0Y2ggIT09IFwiYm9vbGVhblwiKSB7XG4gICAgcGFyYW1zLmRpc2FibGVBdXRvRmV0Y2ggPSBmYWxzZTtcbiAgfVxuXG4gICgwLCBfdXRpbC5zZXRWZXJib3NpdHlMZXZlbCkocGFyYW1zLnZlcmJvc2l0eSk7XG5cbiAgaWYgKCF3b3JrZXIpIHtcbiAgICBjb25zdCB3b3JrZXJQYXJhbXMgPSB7XG4gICAgICB2ZXJib3NpdHk6IHBhcmFtcy52ZXJib3NpdHksXG4gICAgICBwb3J0OiBfd29ya2VyX29wdGlvbnMuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJQb3J0XG4gICAgfTtcbiAgICB3b3JrZXIgPSB3b3JrZXJQYXJhbXMucG9ydCA/IFBERldvcmtlci5mcm9tUG9ydCh3b3JrZXJQYXJhbXMpIDogbmV3IFBERldvcmtlcih3b3JrZXJQYXJhbXMpO1xuICAgIHRhc2suX3dvcmtlciA9IHdvcmtlcjtcbiAgfVxuXG4gIGNvbnN0IGRvY0lkID0gdGFzay5kb2NJZDtcbiAgd29ya2VyLnByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRhc2suZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkaW5nIGFib3J0ZWRcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgd29ya2VySWRQcm9taXNlID0gX2ZldGNoRG9jdW1lbnQod29ya2VyLCBwYXJhbXMsIHJhbmdlVHJhbnNwb3J0LCBkb2NJZCk7XG5cbiAgICBjb25zdCBuZXR3b3JrU3RyZWFtUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICBsZXQgbmV0d29ya1N0cmVhbTtcblxuICAgICAgaWYgKHJhbmdlVHJhbnNwb3J0KSB7XG4gICAgICAgIG5ldHdvcmtTdHJlYW0gPSBuZXcgX3RyYW5zcG9ydF9zdHJlYW0uUERGRGF0YVRyYW5zcG9ydFN0cmVhbSh7XG4gICAgICAgICAgbGVuZ3RoOiBwYXJhbXMubGVuZ3RoLFxuICAgICAgICAgIGluaXRpYWxEYXRhOiBwYXJhbXMuaW5pdGlhbERhdGEsXG4gICAgICAgICAgcHJvZ3Jlc3NpdmVEb25lOiBwYXJhbXMucHJvZ3Jlc3NpdmVEb25lLFxuICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lOiBwYXJhbXMuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUsXG4gICAgICAgICAgZGlzYWJsZVJhbmdlOiBwYXJhbXMuZGlzYWJsZVJhbmdlLFxuICAgICAgICAgIGRpc2FibGVTdHJlYW06IHBhcmFtcy5kaXNhYmxlU3RyZWFtXG4gICAgICAgIH0sIHJhbmdlVHJhbnNwb3J0KTtcbiAgICAgIH0gZWxzZSBpZiAoIXBhcmFtcy5kYXRhKSB7XG4gICAgICAgIG5ldHdvcmtTdHJlYW0gPSBjcmVhdGVQREZOZXR3b3JrU3RyZWFtKHtcbiAgICAgICAgICB1cmw6IHBhcmFtcy51cmwsXG4gICAgICAgICAgbGVuZ3RoOiBwYXJhbXMubGVuZ3RoLFxuICAgICAgICAgIGh0dHBIZWFkZXJzOiBwYXJhbXMuaHR0cEhlYWRlcnMsXG4gICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBwYXJhbXMud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgIHJhbmdlQ2h1bmtTaXplOiBwYXJhbXMucmFuZ2VDaHVua1NpemUsXG4gICAgICAgICAgZGlzYWJsZVJhbmdlOiBwYXJhbXMuZGlzYWJsZVJhbmdlLFxuICAgICAgICAgIGRpc2FibGVTdHJlYW06IHBhcmFtcy5kaXNhYmxlU3RyZWFtXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKG5ldHdvcmtTdHJlYW0pO1xuICAgIH0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbd29ya2VySWRQcm9taXNlLCBuZXR3b3JrU3RyZWFtUHJvbWlzZV0pLnRoZW4oZnVuY3Rpb24gKFt3b3JrZXJJZCwgbmV0d29ya1N0cmVhbV0pIHtcbiAgICAgIGlmICh0YXNrLmRlc3Ryb3llZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkaW5nIGFib3J0ZWRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVyID0gbmV3IF9tZXNzYWdlX2hhbmRsZXIuTWVzc2FnZUhhbmRsZXIoZG9jSWQsIHdvcmtlcklkLCB3b3JrZXIucG9ydCk7XG4gICAgICBjb25zdCB0cmFuc3BvcnQgPSBuZXcgV29ya2VyVHJhbnNwb3J0KG1lc3NhZ2VIYW5kbGVyLCB0YXNrLCBuZXR3b3JrU3RyZWFtLCBwYXJhbXMpO1xuICAgICAgdGFzay5fdHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICAgICAgbWVzc2FnZUhhbmRsZXIuc2VuZChcIlJlYWR5XCIsIG51bGwpO1xuICAgIH0pO1xuICB9KS5jYXRjaCh0YXNrLl9jYXBhYmlsaXR5LnJlamVjdCk7XG4gIHJldHVybiB0YXNrO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfZmV0Y2hEb2N1bWVudCh3b3JrZXIsIHNvdXJjZSwgcGRmRGF0YVJhbmdlVHJhbnNwb3J0LCBkb2NJZCkge1xuICBpZiAod29ya2VyLmRlc3Ryb3llZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIldvcmtlciB3YXMgZGVzdHJveWVkXCIpO1xuICB9XG5cbiAgaWYgKHBkZkRhdGFSYW5nZVRyYW5zcG9ydCkge1xuICAgIHNvdXJjZS5sZW5ndGggPSBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQubGVuZ3RoO1xuICAgIHNvdXJjZS5pbml0aWFsRGF0YSA9IHBkZkRhdGFSYW5nZVRyYW5zcG9ydC5pbml0aWFsRGF0YTtcbiAgICBzb3VyY2UucHJvZ3Jlc3NpdmVEb25lID0gcGRmRGF0YVJhbmdlVHJhbnNwb3J0LnByb2dyZXNzaXZlRG9uZTtcbiAgICBzb3VyY2UuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgPSBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU7XG4gIH1cblxuICBjb25zdCB3b3JrZXJJZCA9IGF3YWl0IHdvcmtlci5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXREb2NSZXF1ZXN0XCIsIHtcbiAgICBkb2NJZCxcbiAgICBhcGlWZXJzaW9uOiAnMi4xNC4zMDUnLFxuICAgIHNvdXJjZToge1xuICAgICAgZGF0YTogc291cmNlLmRhdGEsXG4gICAgICB1cmw6IHNvdXJjZS51cmwsXG4gICAgICBwYXNzd29yZDogc291cmNlLnBhc3N3b3JkLFxuICAgICAgZGlzYWJsZUF1dG9GZXRjaDogc291cmNlLmRpc2FibGVBdXRvRmV0Y2gsXG4gICAgICByYW5nZUNodW5rU2l6ZTogc291cmNlLnJhbmdlQ2h1bmtTaXplLFxuICAgICAgbGVuZ3RoOiBzb3VyY2UubGVuZ3RoXG4gICAgfSxcbiAgICBtYXhJbWFnZVNpemU6IHNvdXJjZS5tYXhJbWFnZVNpemUsXG4gICAgZGlzYWJsZUZvbnRGYWNlOiBzb3VyY2UuZGlzYWJsZUZvbnRGYWNlLFxuICAgIGRvY0Jhc2VVcmw6IHNvdXJjZS5kb2NCYXNlVXJsLFxuICAgIGlnbm9yZUVycm9yczogc291cmNlLmlnbm9yZUVycm9ycyxcbiAgICBpc0V2YWxTdXBwb3J0ZWQ6IHNvdXJjZS5pc0V2YWxTdXBwb3J0ZWQsXG4gICAgZm9udEV4dHJhUHJvcGVydGllczogc291cmNlLmZvbnRFeHRyYVByb3BlcnRpZXMsXG4gICAgZW5hYmxlWGZhOiBzb3VyY2UuZW5hYmxlWGZhLFxuICAgIHVzZVN5c3RlbUZvbnRzOiBzb3VyY2UudXNlU3lzdGVtRm9udHMsXG4gICAgY01hcFVybDogc291cmNlLnVzZVdvcmtlckZldGNoID8gc291cmNlLmNNYXBVcmwgOiBudWxsLFxuICAgIHN0YW5kYXJkRm9udERhdGFVcmw6IHNvdXJjZS51c2VXb3JrZXJGZXRjaCA/IHNvdXJjZS5zdGFuZGFyZEZvbnREYXRhVXJsIDogbnVsbFxuICB9KTtcblxuICBpZiAod29ya2VyLmRlc3Ryb3llZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIldvcmtlciB3YXMgZGVzdHJveWVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHdvcmtlcklkO1xufVxuXG5jbGFzcyBQREZEb2N1bWVudExvYWRpbmdUYXNrIHtcbiAgc3RhdGljICNkb2NJZCA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fY2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSBudWxsO1xuICAgIHRoaXMuX3dvcmtlciA9IG51bGw7XG4gICAgdGhpcy5kb2NJZCA9IGBkJHtQREZEb2N1bWVudExvYWRpbmdUYXNrLiNkb2NJZCsrfWA7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLm9uUGFzc3dvcmQgPSBudWxsO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gICAgdGhpcy5vblVuc3VwcG9ydGVkRmVhdHVyZSA9IG51bGw7XG4gIH1cblxuICBnZXQgcHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgYXN5bmMgZGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy5fdHJhbnNwb3J0Py5kZXN0cm95KCk7XG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gbnVsbDtcblxuICAgIGlmICh0aGlzLl93b3JrZXIpIHtcbiAgICAgIHRoaXMuX3dvcmtlci5kZXN0cm95KCk7XG5cbiAgICAgIHRoaXMuX3dvcmtlciA9IG51bGw7XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0cy5QREZEb2N1bWVudExvYWRpbmdUYXNrID0gUERGRG9jdW1lbnRMb2FkaW5nVGFzaztcblxuY2xhc3MgUERGRGF0YVJhbmdlVHJhbnNwb3J0IHtcbiAgY29uc3RydWN0b3IobGVuZ3RoLCBpbml0aWFsRGF0YSwgcHJvZ3Jlc3NpdmVEb25lID0gZmFsc2UsIGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lID0gbnVsbCkge1xuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgIHRoaXMuaW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTtcbiAgICB0aGlzLnByb2dyZXNzaXZlRG9uZSA9IHByb2dyZXNzaXZlRG9uZTtcbiAgICB0aGlzLmNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lID0gY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU7XG4gICAgdGhpcy5fcmFuZ2VMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLl9wcm9ncmVzc0xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuX3Byb2dyZXNzaXZlUmVhZExpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgfVxuXG4gIGFkZFJhbmdlTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICB0aGlzLl9yYW5nZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGFkZFByb2dyZXNzTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICB0aGlzLl9wcm9ncmVzc0xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGFkZFByb2dyZXNzaXZlUmVhZExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgYWRkUHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICB0aGlzLl9wcm9ncmVzc2l2ZURvbmVMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvbkRhdGFSYW5nZShiZWdpbiwgY2h1bmspIHtcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuX3JhbmdlTGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcihiZWdpbiwgY2h1bmspO1xuICAgIH1cbiAgfVxuXG4gIG9uRGF0YVByb2dyZXNzKGxvYWRlZCwgdG90YWwpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NMaXN0ZW5lcnMpIHtcbiAgICAgICAgbGlzdGVuZXIobG9hZGVkLCB0b3RhbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbkRhdGFQcm9ncmVzc2l2ZVJlYWQoY2h1bmspIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyKGNodW5rKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uRGF0YVByb2dyZXNzaXZlRG9uZSgpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB0cmFuc3BvcnRSZWFkeSgpIHtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgcmVxdWVzdERhdGFSYW5nZShiZWdpbiwgZW5kKSB7XG4gICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkFic3RyYWN0IG1ldGhvZCBQREZEYXRhUmFuZ2VUcmFuc3BvcnQucmVxdWVzdERhdGFSYW5nZVwiKTtcbiAgfVxuXG4gIGFib3J0KCkge31cblxufVxuXG5leHBvcnRzLlBERkRhdGFSYW5nZVRyYW5zcG9ydCA9IFBERkRhdGFSYW5nZVRyYW5zcG9ydDtcblxuY2xhc3MgUERGRG9jdW1lbnRQcm94eSB7XG4gIGNvbnN0cnVjdG9yKHBkZkluZm8sIHRyYW5zcG9ydCkge1xuICAgIHRoaXMuX3BkZkluZm8gPSBwZGZJbmZvO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaW5nZXJwcmludFwiLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgICgwLCBfZGlzcGxheV91dGlscy5kZXByZWNhdGVkKShcImBQREZEb2N1bWVudFByb3h5LmZpbmdlcnByaW50YCwgXCIgKyBcInBsZWFzZSB1c2UgYFBERkRvY3VtZW50UHJveHkuZmluZ2VycHJpbnRzYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZ2VycHJpbnRzWzBdO1xuICAgICAgfVxuXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2V0U3RhdHNcIiwge1xuICAgICAgdmFsdWU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgKDAsIF9kaXNwbGF5X3V0aWxzLmRlcHJlY2F0ZWQpKFwiYFBERkRvY3VtZW50UHJveHkuZ2V0U3RhdHNgLCBcIiArIFwicGxlYXNlIHVzZSB0aGUgYFBERkRvY3VtZW50UHJveHkuc3RhdHNgLWdldHRlciBpbnN0ZWFkLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHMgfHwge1xuICAgICAgICAgIHN0cmVhbVR5cGVzOiB7fSxcbiAgICAgICAgICBmb250VHlwZXM6IHt9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXQgYW5ub3RhdGlvblN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgfVxuXG4gIGdldCBudW1QYWdlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGRmSW5mby5udW1QYWdlcztcbiAgfVxuXG4gIGdldCBmaW5nZXJwcmludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BkZkluZm8uZmluZ2VycHJpbnRzO1xuICB9XG5cbiAgZ2V0IHN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuc3RhdHM7XG4gIH1cblxuICBnZXQgaXNQdXJlWGZhKCkge1xuICAgIHJldHVybiAhIXRoaXMuX3RyYW5zcG9ydC5faHRtbEZvclhmYTtcbiAgfVxuXG4gIGdldCBhbGxYZmFIdG1sKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuX2h0bWxGb3JYZmE7XG4gIH1cblxuICBnZXRQYWdlKHBhZ2VOdW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFBhZ2UocGFnZU51bWJlcik7XG4gIH1cblxuICBnZXRQYWdlSW5kZXgocmVmKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlSW5kZXgocmVmKTtcbiAgfVxuXG4gIGdldERlc3RpbmF0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERlc3RpbmF0aW9ucygpO1xuICB9XG5cbiAgZ2V0RGVzdGluYXRpb24oaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERlc3RpbmF0aW9uKGlkKTtcbiAgfVxuXG4gIGdldFBhZ2VMYWJlbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlTGFiZWxzKCk7XG4gIH1cblxuICBnZXRQYWdlTGF5b3V0KCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZUxheW91dCgpO1xuICB9XG5cbiAgZ2V0UGFnZU1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlTW9kZSgpO1xuICB9XG5cbiAgZ2V0Vmlld2VyUHJlZmVyZW5jZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRWaWV3ZXJQcmVmZXJlbmNlcygpO1xuICB9XG5cbiAgZ2V0T3BlbkFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE9wZW5BY3Rpb24oKTtcbiAgfVxuXG4gIGdldEF0dGFjaG1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0QXR0YWNobWVudHMoKTtcbiAgfVxuXG4gIGdldEphdmFTY3JpcHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRKYXZhU2NyaXB0KCk7XG4gIH1cblxuICBnZXRKU0FjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXREb2NKU0FjdGlvbnMoKTtcbiAgfVxuXG4gIGdldE91dGxpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRPdXRsaW5lKCk7XG4gIH1cblxuICBnZXRPcHRpb25hbENvbnRlbnRDb25maWcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRPcHRpb25hbENvbnRlbnRDb25maWcoKTtcbiAgfVxuXG4gIGdldFBlcm1pc3Npb25zKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGVybWlzc2lvbnMoKTtcbiAgfVxuXG4gIGdldE1ldGFkYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0TWV0YWRhdGEoKTtcbiAgfVxuXG4gIGdldE1hcmtJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0TWFya0luZm8oKTtcbiAgfVxuXG4gIGdldERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXREYXRhKCk7XG4gIH1cblxuICBnZXREb3dubG9hZEluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5kb3dubG9hZEluZm9DYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBjbGVhbnVwKGtlZXBMb2FkZWRGb250cyA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5zdGFydENsZWFudXAoa2VlcExvYWRlZEZvbnRzIHx8IHRoaXMuaXNQdXJlWGZhKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgcmV0dXJuIHRoaXMubG9hZGluZ1Rhc2suZGVzdHJveSgpO1xuICB9XG5cbiAgZ2V0IGxvYWRpbmdQYXJhbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5sb2FkaW5nUGFyYW1zO1xuICB9XG5cbiAgZ2V0IGxvYWRpbmdUYXNrKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQubG9hZGluZ1Rhc2s7XG4gIH1cblxuICBzYXZlRG9jdW1lbnQoKSB7XG4gICAgaWYgKHRoaXMuX3RyYW5zcG9ydC5hbm5vdGF0aW9uU3RvcmFnZS5zaXplIDw9IDApIHtcbiAgICAgICgwLCBfZGlzcGxheV91dGlscy5kZXByZWNhdGVkKShcInNhdmVEb2N1bWVudCBjYWxsZWQgd2hpbGUgYGFubm90YXRpb25TdG9yYWdlYCBpcyBlbXB0eSwgXCIgKyBcInBsZWFzZSB1c2UgdGhlIGdldERhdGEtbWV0aG9kIGluc3RlYWQuXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuc2F2ZURvY3VtZW50KCk7XG4gIH1cblxuICBnZXRGaWVsZE9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRGaWVsZE9iamVjdHMoKTtcbiAgfVxuXG4gIGhhc0pTQWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0Lmhhc0pTQWN0aW9ucygpO1xuICB9XG5cbiAgZ2V0Q2FsY3VsYXRpb25PcmRlcklkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldENhbGN1bGF0aW9uT3JkZXJJZHMoKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGRG9jdW1lbnRQcm94eSA9IFBERkRvY3VtZW50UHJveHk7XG5cbmNsYXNzIFBERlBhZ2VQcm94eSB7XG4gIGNvbnN0cnVjdG9yKHBhZ2VJbmRleCwgcGFnZUluZm8sIHRyYW5zcG9ydCwgb3duZXJEb2N1bWVudCwgcGRmQnVnID0gZmFsc2UpIHtcbiAgICB0aGlzLl9wYWdlSW5kZXggPSBwYWdlSW5kZXg7XG4gICAgdGhpcy5fcGFnZUluZm8gPSBwYWdlSW5mbztcbiAgICB0aGlzLl9vd25lckRvY3VtZW50ID0gb3duZXJEb2N1bWVudDtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG4gICAgdGhpcy5fc3RhdHMgPSBwZGZCdWcgPyBuZXcgX2Rpc3BsYXlfdXRpbHMuU3RhdFRpbWVyKCkgOiBudWxsO1xuICAgIHRoaXMuX3BkZkJ1ZyA9IHBkZkJ1ZztcbiAgICB0aGlzLmNvbW1vbk9ianMgPSB0cmFuc3BvcnQuY29tbW9uT2JqcztcbiAgICB0aGlzLm9ianMgPSBuZXcgUERGT2JqZWN0cygpO1xuICAgIHRoaXMuX2JpdG1hcHMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5jbGVhbnVwQWZ0ZXJSZW5kZXIgPSBmYWxzZTtcbiAgICB0aGlzLnBlbmRpbmdDbGVhbnVwID0gZmFsc2U7XG4gICAgdGhpcy5faW50ZW50U3RhdGVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX2Fubm90YXRpb25Qcm9taXNlcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0IHBhZ2VOdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmRleCArIDE7XG4gIH1cblxuICBnZXQgcm90YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9wYWdlSW5mby5yb3RhdGU7XG4gIH1cblxuICBnZXQgcmVmKCkge1xuICAgIHJldHVybiB0aGlzLl9wYWdlSW5mby5yZWY7XG4gIH1cblxuICBnZXQgdXNlclVuaXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnVzZXJVbml0O1xuICB9XG5cbiAgZ2V0IHZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnZpZXc7XG4gIH1cblxuICBnZXRWaWV3cG9ydCh7XG4gICAgc2NhbGUsXG4gICAgcm90YXRpb24gPSB0aGlzLnJvdGF0ZSxcbiAgICBvZmZzZXRYID0gMCxcbiAgICBvZmZzZXRZID0gMCxcbiAgICBkb250RmxpcCA9IGZhbHNlXG4gIH0gPSB7fSkge1xuICAgIHJldHVybiBuZXcgX2Rpc3BsYXlfdXRpbHMuUGFnZVZpZXdwb3J0KHtcbiAgICAgIHZpZXdCb3g6IHRoaXMudmlldyxcbiAgICAgIHNjYWxlLFxuICAgICAgcm90YXRpb24sXG4gICAgICBvZmZzZXRYLFxuICAgICAgb2Zmc2V0WSxcbiAgICAgIGRvbnRGbGlwXG4gICAgfSk7XG4gIH1cblxuICBnZXRBbm5vdGF0aW9ucyh7XG4gICAgaW50ZW50ID0gXCJkaXNwbGF5XCJcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgaW50ZW50QXJncyA9IHRoaXMuX3RyYW5zcG9ydC5nZXRSZW5kZXJpbmdJbnRlbnQoaW50ZW50KTtcblxuICAgIGxldCBwcm9taXNlID0gdGhpcy5fYW5ub3RhdGlvblByb21pc2VzLmdldChpbnRlbnRBcmdzLmNhY2hlS2V5KTtcblxuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMuX3RyYW5zcG9ydC5nZXRBbm5vdGF0aW9ucyh0aGlzLl9wYWdlSW5kZXgsIGludGVudEFyZ3MucmVuZGVyaW5nSW50ZW50KTtcblxuICAgICAgdGhpcy5fYW5ub3RhdGlvblByb21pc2VzLnNldChpbnRlbnRBcmdzLmNhY2hlS2V5LCBwcm9taXNlKTtcblxuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihhbm5vdGF0aW9ucyA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiBhbm5vdGF0aW9ucykge1xuICAgICAgICAgIGlmIChhbm5vdGF0aW9uLnRpdGxlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbm5vdGF0aW9uLCBcInRpdGxlXCIsIHtcbiAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICgwLCBfZGlzcGxheV91dGlscy5kZXByZWNhdGVkKShcImB0aXRsZWAtcHJvcGVydHkgb24gYW5ub3RhdGlvbiwgcGxlYXNlIHVzZSBgdGl0bGVPYmpgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhbm5vdGF0aW9uLnRpdGxlT2JqLnN0cjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYW5ub3RhdGlvbi5jb250ZW50c09iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYW5ub3RhdGlvbiwgXCJjb250ZW50c1wiLCB7XG4gICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAoMCwgX2Rpc3BsYXlfdXRpbHMuZGVwcmVjYXRlZCkoXCJgY29udGVudHNgLXByb3BlcnR5IG9uIGFubm90YXRpb24sIHBsZWFzZSB1c2UgYGNvbnRlbnRzT2JqYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ub3RhdGlvbi5jb250ZW50c09iai5zdHI7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFubm90YXRpb25zO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICBnZXRKU0FjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2pzQWN0aW9uc1Byb21pc2UgfHw9IHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlSlNBY3Rpb25zKHRoaXMuX3BhZ2VJbmRleCk7XG4gIH1cblxuICBhc3luYyBnZXRYZmEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5faHRtbEZvclhmYT8uY2hpbGRyZW5bdGhpcy5fcGFnZUluZGV4XSB8fCBudWxsO1xuICB9XG5cbiAgcmVuZGVyKHtcbiAgICBjYW52YXNDb250ZXh0LFxuICAgIHZpZXdwb3J0LFxuICAgIGludGVudCA9IFwiZGlzcGxheVwiLFxuICAgIGFubm90YXRpb25Nb2RlID0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFLFxuICAgIHRyYW5zZm9ybSA9IG51bGwsXG4gICAgaW1hZ2VMYXllciA9IG51bGwsXG4gICAgY2FudmFzRmFjdG9yeSA9IG51bGwsXG4gICAgYmFja2dyb3VuZCA9IG51bGwsXG4gICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IG51bGwsXG4gICAgYW5ub3RhdGlvbkNhbnZhc01hcCA9IG51bGwsXG4gICAgcGFnZUNvbG9ycyA9IG51bGxcbiAgfSkge1xuICAgIGlmIChhcmd1bWVudHNbMF0/LnJlbmRlckludGVyYWN0aXZlRm9ybXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgKDAsIF9kaXNwbGF5X3V0aWxzLmRlcHJlY2F0ZWQpKFwicmVuZGVyIG5vIGxvbmdlciBhY2NlcHRzIHRoZSBgcmVuZGVySW50ZXJhY3RpdmVGb3Jtc2Atb3B0aW9uLCBcIiArIFwicGxlYXNlIHVzZSB0aGUgYGFubm90YXRpb25Nb2RlYC1vcHRpb24gaW5zdGVhZC5cIik7XG5cbiAgICAgIGlmIChhcmd1bWVudHNbMF0ucmVuZGVySW50ZXJhY3RpdmVGb3JtcyA9PT0gdHJ1ZSAmJiBhbm5vdGF0aW9uTW9kZSA9PT0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFKSB7XG4gICAgICAgIGFubm90YXRpb25Nb2RlID0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhcmd1bWVudHNbMF0/LmluY2x1ZGVBbm5vdGF0aW9uU3RvcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAoMCwgX2Rpc3BsYXlfdXRpbHMuZGVwcmVjYXRlZCkoXCJyZW5kZXIgbm8gbG9uZ2VyIGFjY2VwdHMgdGhlIGBpbmNsdWRlQW5ub3RhdGlvblN0b3JhZ2VgLW9wdGlvbiwgXCIgKyBcInBsZWFzZSB1c2UgdGhlIGBhbm5vdGF0aW9uTW9kZWAtb3B0aW9uIGluc3RlYWQuXCIpO1xuXG4gICAgICBpZiAoYXJndW1lbnRzWzBdLmluY2x1ZGVBbm5vdGF0aW9uU3RvcmFnZSA9PT0gdHJ1ZSAmJiBhbm5vdGF0aW9uTW9kZSA9PT0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFKSB7XG4gICAgICAgIGFubm90YXRpb25Nb2RlID0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX1NUT1JBR0U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRzKSB7XG4gICAgICB0aGlzLl9zdGF0cy50aW1lKFwiT3ZlcmFsbFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRlbnRBcmdzID0gdGhpcy5fdHJhbnNwb3J0LmdldFJlbmRlcmluZ0ludGVudChpbnRlbnQsIGFubm90YXRpb25Nb2RlKTtcblxuICAgIHRoaXMucGVuZGluZ0NsZWFudXAgPSBmYWxzZTtcblxuICAgIGlmICghb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSkge1xuICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IHRoaXMuX3RyYW5zcG9ydC5nZXRPcHRpb25hbENvbnRlbnRDb25maWcoKTtcbiAgICB9XG5cbiAgICBsZXQgaW50ZW50U3RhdGUgPSB0aGlzLl9pbnRlbnRTdGF0ZXMuZ2V0KGludGVudEFyZ3MuY2FjaGVLZXkpO1xuXG4gICAgaWYgKCFpbnRlbnRTdGF0ZSkge1xuICAgICAgaW50ZW50U3RhdGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgICB0aGlzLl9pbnRlbnRTdGF0ZXMuc2V0KGludGVudEFyZ3MuY2FjaGVLZXksIGludGVudFN0YXRlKTtcbiAgICB9XG5cbiAgICBpZiAoaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGludGVudFN0YXRlLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQpO1xuICAgICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgY2FudmFzRmFjdG9yeUluc3RhbmNlID0gY2FudmFzRmFjdG9yeSB8fCBuZXcgRGVmYXVsdENhbnZhc0ZhY3Rvcnkoe1xuICAgICAgb3duZXJEb2N1bWVudDogdGhpcy5fb3duZXJEb2N1bWVudFxuICAgIH0pO1xuICAgIGNvbnN0IGludGVudFByaW50ID0gISEoaW50ZW50QXJncy5yZW5kZXJpbmdJbnRlbnQgJiBfdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLlBSSU5UKTtcblxuICAgIGlmICghaW50ZW50U3RhdGUuZGlzcGxheVJlYWR5Q2FwYWJpbGl0eSkge1xuICAgICAgaW50ZW50U3RhdGUuZGlzcGxheVJlYWR5Q2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCA9IHtcbiAgICAgICAgZm5BcnJheTogW10sXG4gICAgICAgIGFyZ3NBcnJheTogW10sXG4gICAgICAgIGxhc3RDaHVuazogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLl9zdGF0cykge1xuICAgICAgICB0aGlzLl9zdGF0cy50aW1lKFwiUGFnZSBSZXF1ZXN0XCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wdW1wT3BlcmF0b3JMaXN0KGludGVudEFyZ3MpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbXBsZXRlID0gZXJyb3IgPT4ge1xuICAgICAgaW50ZW50U3RhdGUucmVuZGVyVGFza3MuZGVsZXRlKGludGVybmFsUmVuZGVyVGFzayk7XG5cbiAgICAgIGlmICh0aGlzLmNsZWFudXBBZnRlclJlbmRlciB8fCBpbnRlbnRQcmludCkge1xuICAgICAgICB0aGlzLnBlbmRpbmdDbGVhbnVwID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdHJ5Q2xlYW51cCgpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaW50ZXJuYWxSZW5kZXJUYXNrLmNhcGFiaWxpdHkucmVqZWN0KGVycm9yKTtcblxuICAgICAgICB0aGlzLl9hYm9ydE9wZXJhdG9yTGlzdCh7XG4gICAgICAgICAgaW50ZW50U3RhdGUsXG4gICAgICAgICAgcmVhc29uOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3IpXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW50ZXJuYWxSZW5kZXJUYXNrLmNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fc3RhdHMpIHtcbiAgICAgICAgdGhpcy5fc3RhdHMudGltZUVuZChcIlJlbmRlcmluZ1wiKTtcblxuICAgICAgICB0aGlzLl9zdGF0cy50aW1lRW5kKFwiT3ZlcmFsbFwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaW50ZXJuYWxSZW5kZXJUYXNrID0gbmV3IEludGVybmFsUmVuZGVyVGFzayh7XG4gICAgICBjYWxsYmFjazogY29tcGxldGUsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgY2FudmFzQ29udGV4dCxcbiAgICAgICAgdmlld3BvcnQsXG4gICAgICAgIHRyYW5zZm9ybSxcbiAgICAgICAgaW1hZ2VMYXllcixcbiAgICAgICAgYmFja2dyb3VuZFxuICAgICAgfSxcbiAgICAgIG9ianM6IHRoaXMub2JqcyxcbiAgICAgIGNvbW1vbk9ianM6IHRoaXMuY29tbW9uT2JqcyxcbiAgICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgICBvcGVyYXRvckxpc3Q6IGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCxcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5fcGFnZUluZGV4LFxuICAgICAgY2FudmFzRmFjdG9yeTogY2FudmFzRmFjdG9yeUluc3RhbmNlLFxuICAgICAgdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lOiAhaW50ZW50UHJpbnQsXG4gICAgICBwZGZCdWc6IHRoaXMuX3BkZkJ1ZyxcbiAgICAgIHBhZ2VDb2xvcnNcbiAgICB9KTtcbiAgICAoaW50ZW50U3RhdGUucmVuZGVyVGFza3MgfHw9IG5ldyBTZXQoKSkuYWRkKGludGVybmFsUmVuZGVyVGFzayk7XG4gICAgY29uc3QgcmVuZGVyVGFzayA9IGludGVybmFsUmVuZGVyVGFzay50YXNrO1xuICAgIFByb21pc2UuYWxsKFtpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnByb21pc2UsIG9wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2VdKS50aGVuKChbdHJhbnNwYXJlbmN5LCBvcHRpb25hbENvbnRlbnRDb25maWddKSA9PiB7XG4gICAgICBpZiAodGhpcy5wZW5kaW5nQ2xlYW51cCkge1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9zdGF0cykge1xuICAgICAgICB0aGlzLl9zdGF0cy50aW1lKFwiUmVuZGVyaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpbnRlcm5hbFJlbmRlclRhc2suaW5pdGlhbGl6ZUdyYXBoaWNzKHtcbiAgICAgICAgdHJhbnNwYXJlbmN5LFxuICAgICAgICBvcHRpb25hbENvbnRlbnRDb25maWdcbiAgICAgIH0pO1xuICAgICAgaW50ZXJuYWxSZW5kZXJUYXNrLm9wZXJhdG9yTGlzdENoYW5nZWQoKTtcbiAgICB9KS5jYXRjaChjb21wbGV0ZSk7XG4gICAgcmV0dXJuIHJlbmRlclRhc2s7XG4gIH1cblxuICBnZXRPcGVyYXRvckxpc3Qoe1xuICAgIGludGVudCA9IFwiZGlzcGxheVwiLFxuICAgIGFubm90YXRpb25Nb2RlID0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFXG4gIH0gPSB7fSkge1xuICAgIGZ1bmN0aW9uIG9wZXJhdG9yTGlzdENoYW5nZWQoKSB7XG4gICAgICBpZiAoaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0Lmxhc3RDaHVuaykge1xuICAgICAgICBpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCk7XG4gICAgICAgIGludGVudFN0YXRlLnJlbmRlclRhc2tzLmRlbGV0ZShvcExpc3RUYXNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnRlbnRBcmdzID0gdGhpcy5fdHJhbnNwb3J0LmdldFJlbmRlcmluZ0ludGVudChpbnRlbnQsIGFubm90YXRpb25Nb2RlLCB0cnVlKTtcblxuICAgIGxldCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoaW50ZW50QXJncy5jYWNoZUtleSk7XG5cbiAgICBpZiAoIWludGVudFN0YXRlKSB7XG4gICAgICBpbnRlbnRTdGF0ZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgIHRoaXMuX2ludGVudFN0YXRlcy5zZXQoaW50ZW50QXJncy5jYWNoZUtleSwgaW50ZW50U3RhdGUpO1xuICAgIH1cblxuICAgIGxldCBvcExpc3RUYXNrO1xuXG4gICAgaWYgKCFpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eSkge1xuICAgICAgb3BMaXN0VGFzayA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBvcExpc3RUYXNrLm9wZXJhdG9yTGlzdENoYW5nZWQgPSBvcGVyYXRvckxpc3RDaGFuZ2VkO1xuICAgICAgaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgICAoaW50ZW50U3RhdGUucmVuZGVyVGFza3MgfHw9IG5ldyBTZXQoKSkuYWRkKG9wTGlzdFRhc2spO1xuICAgICAgaW50ZW50U3RhdGUub3BlcmF0b3JMaXN0ID0ge1xuICAgICAgICBmbkFycmF5OiBbXSxcbiAgICAgICAgYXJnc0FycmF5OiBbXSxcbiAgICAgICAgbGFzdENodW5rOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuX3N0YXRzKSB7XG4gICAgICAgIHRoaXMuX3N0YXRzLnRpbWUoXCJQYWdlIFJlcXVlc3RcIik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3B1bXBPcGVyYXRvckxpc3QoaW50ZW50QXJncyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludGVudFN0YXRlLm9wTGlzdFJlYWRDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBzdHJlYW1UZXh0Q29udGVudCh7XG4gICAgZGlzYWJsZUNvbWJpbmVUZXh0SXRlbXMgPSBmYWxzZSxcbiAgICBpbmNsdWRlTWFya2VkQ29udGVudCA9IGZhbHNlXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IFRFWFRfQ09OVEVOVF9DSFVOS19TSVpFID0gMTAwO1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhTdHJlYW0oXCJHZXRUZXh0Q29udGVudFwiLCB7XG4gICAgICBwYWdlSW5kZXg6IHRoaXMuX3BhZ2VJbmRleCxcbiAgICAgIGNvbWJpbmVUZXh0SXRlbXM6IGRpc2FibGVDb21iaW5lVGV4dEl0ZW1zICE9PSB0cnVlLFxuICAgICAgaW5jbHVkZU1hcmtlZENvbnRlbnQ6IGluY2x1ZGVNYXJrZWRDb250ZW50ID09PSB0cnVlXG4gICAgfSwge1xuICAgICAgaGlnaFdhdGVyTWFyazogVEVYVF9DT05URU5UX0NIVU5LX1NJWkUsXG5cbiAgICAgIHNpemUodGV4dENvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRleHRDb250ZW50Lml0ZW1zLmxlbmd0aDtcbiAgICAgIH1cblxuICAgIH0pO1xuICB9XG5cbiAgZ2V0VGV4dENvbnRlbnQocGFyYW1zID0ge30pIHtcbiAgICBpZiAodGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRYZmEoKS50aGVuKHhmYSA9PiB7XG4gICAgICAgIHJldHVybiBfeGZhX3RleHQuWGZhVGV4dC50ZXh0Q29udGVudCh4ZmEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSB0aGlzLnN0cmVhbVRleHRDb250ZW50KHBhcmFtcyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICAgIHJlYWRlci5yZWFkKCkudGhlbihmdW5jdGlvbiAoe1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGRvbmVcbiAgICAgICAgfSkge1xuICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRleHRDb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBPYmplY3QuYXNzaWduKHRleHRDb250ZW50LnN0eWxlcywgdmFsdWUuc3R5bGVzKTtcbiAgICAgICAgICB0ZXh0Q29udGVudC5pdGVtcy5wdXNoKC4uLnZhbHVlLml0ZW1zKTtcbiAgICAgICAgICBwdW1wKCk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlYWRhYmxlU3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSB7XG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgc3R5bGVzOiBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgICB9O1xuICAgICAgcHVtcCgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U3RydWN0VHJlZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RydWN0VHJlZVByb21pc2UgfHw9IHRoaXMuX3RyYW5zcG9ydC5nZXRTdHJ1Y3RUcmVlKHRoaXMuX3BhZ2VJbmRleCk7XG4gIH1cblxuICBfZGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgY29uc3Qgd2FpdE9uID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGludGVudFN0YXRlIG9mIHRoaXMuX2ludGVudFN0YXRlcy52YWx1ZXMoKSkge1xuICAgICAgdGhpcy5fYWJvcnRPcGVyYXRvckxpc3Qoe1xuICAgICAgICBpbnRlbnRTdGF0ZSxcbiAgICAgICAgcmVhc29uOiBuZXcgRXJyb3IoXCJQYWdlIHdhcyBkZXN0cm95ZWQuXCIpLFxuICAgICAgICBmb3JjZTogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbnRlbnRTdGF0ZS5vcExpc3RSZWFkQ2FwYWJpbGl0eSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgb2YgaW50ZW50U3RhdGUucmVuZGVyVGFza3MpIHtcbiAgICAgICAgd2FpdE9uLnB1c2goaW50ZXJuYWxSZW5kZXJUYXNrLmNvbXBsZXRlZCk7XG4gICAgICAgIGludGVybmFsUmVuZGVyVGFzay5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm9ianMuY2xlYXIoKTtcblxuICAgIGZvciAoY29uc3QgYml0bWFwIG9mIHRoaXMuX2JpdG1hcHMpIHtcbiAgICAgIGJpdG1hcC5jbG9zZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2JpdG1hcHMuY2xlYXIoKTtcblxuICAgIHRoaXMuX2Fubm90YXRpb25Qcm9taXNlcy5jbGVhcigpO1xuXG4gICAgdGhpcy5fanNBY3Rpb25zUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fc3RydWN0VHJlZVByb21pc2UgPSBudWxsO1xuICAgIHRoaXMucGVuZGluZ0NsZWFudXAgPSBmYWxzZTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwod2FpdE9uKTtcbiAgfVxuXG4gIGNsZWFudXAocmVzZXRTdGF0cyA9IGZhbHNlKSB7XG4gICAgdGhpcy5wZW5kaW5nQ2xlYW51cCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXMuX3RyeUNsZWFudXAocmVzZXRTdGF0cyk7XG4gIH1cblxuICBfdHJ5Q2xlYW51cChyZXNldFN0YXRzID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMucGVuZGluZ0NsZWFudXApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHtcbiAgICAgIHJlbmRlclRhc2tzLFxuICAgICAgb3BlcmF0b3JMaXN0XG4gICAgfSBvZiB0aGlzLl9pbnRlbnRTdGF0ZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChyZW5kZXJUYXNrcy5zaXplID4gMCB8fCAhb3BlcmF0b3JMaXN0Lmxhc3RDaHVuaykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5faW50ZW50U3RhdGVzLmNsZWFyKCk7XG5cbiAgICB0aGlzLm9ianMuY2xlYXIoKTtcblxuICAgIHRoaXMuX2Fubm90YXRpb25Qcm9taXNlcy5jbGVhcigpO1xuXG4gICAgdGhpcy5fanNBY3Rpb25zUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fc3RydWN0VHJlZVByb21pc2UgPSBudWxsO1xuXG4gICAgaWYgKHJlc2V0U3RhdHMgJiYgdGhpcy5fc3RhdHMpIHtcbiAgICAgIHRoaXMuX3N0YXRzID0gbmV3IF9kaXNwbGF5X3V0aWxzLlN0YXRUaW1lcigpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgYml0bWFwIG9mIHRoaXMuX2JpdG1hcHMpIHtcbiAgICAgIGJpdG1hcC5jbG9zZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2JpdG1hcHMuY2xlYXIoKTtcblxuICAgIHRoaXMucGVuZGluZ0NsZWFudXAgPSBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIF9zdGFydFJlbmRlclBhZ2UodHJhbnNwYXJlbmN5LCBjYWNoZUtleSkge1xuICAgIGNvbnN0IGludGVudFN0YXRlID0gdGhpcy5faW50ZW50U3RhdGVzLmdldChjYWNoZUtleSk7XG5cbiAgICBpZiAoIWludGVudFN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRzKSB7XG4gICAgICB0aGlzLl9zdGF0cy50aW1lRW5kKFwiUGFnZSBSZXF1ZXN0XCIpO1xuICAgIH1cblxuICAgIGlmIChpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5KSB7XG4gICAgICBpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnJlc29sdmUodHJhbnNwYXJlbmN5KTtcbiAgICB9XG4gIH1cblxuICBfcmVuZGVyUGFnZUNodW5rKG9wZXJhdG9yTGlzdENodW5rLCBpbnRlbnRTdGF0ZSkge1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IG9wZXJhdG9yTGlzdENodW5rLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdC5mbkFycmF5LnB1c2gob3BlcmF0b3JMaXN0Q2h1bmsuZm5BcnJheVtpXSk7XG4gICAgICBpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QuYXJnc0FycmF5LnB1c2gob3BlcmF0b3JMaXN0Q2h1bmsuYXJnc0FycmF5W2ldKTtcbiAgICB9XG5cbiAgICBpbnRlbnRTdGF0ZS5vcGVyYXRvckxpc3QubGFzdENodW5rID0gb3BlcmF0b3JMaXN0Q2h1bmsubGFzdENodW5rO1xuXG4gICAgZm9yIChjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgb2YgaW50ZW50U3RhdGUucmVuZGVyVGFza3MpIHtcbiAgICAgIGludGVybmFsUmVuZGVyVGFzay5vcGVyYXRvckxpc3RDaGFuZ2VkKCk7XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdG9yTGlzdENodW5rLmxhc3RDaHVuaykge1xuICAgICAgdGhpcy5fdHJ5Q2xlYW51cCgpO1xuICAgIH1cbiAgfVxuXG4gIF9wdW1wT3BlcmF0b3JMaXN0KHtcbiAgICByZW5kZXJpbmdJbnRlbnQsXG4gICAgY2FjaGVLZXlcbiAgfSkge1xuICAgIGNvbnN0IHJlYWRhYmxlU3RyZWFtID0gdGhpcy5fdHJhbnNwb3J0Lm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoU3RyZWFtKFwiR2V0T3BlcmF0b3JMaXN0XCIsIHtcbiAgICAgIHBhZ2VJbmRleDogdGhpcy5fcGFnZUluZGV4LFxuICAgICAgaW50ZW50OiByZW5kZXJpbmdJbnRlbnQsXG4gICAgICBjYWNoZUtleSxcbiAgICAgIGFubm90YXRpb25TdG9yYWdlOiByZW5kZXJpbmdJbnRlbnQgJiBfdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLkFOTk9UQVRJT05TX1NUT1JBR0UgPyB0aGlzLl90cmFuc3BvcnQuYW5ub3RhdGlvblN0b3JhZ2Uuc2VyaWFsaXphYmxlIDogbnVsbFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVhZGVyID0gcmVhZGFibGVTdHJlYW0uZ2V0UmVhZGVyKCk7XG5cbiAgICBjb25zdCBpbnRlbnRTdGF0ZSA9IHRoaXMuX2ludGVudFN0YXRlcy5nZXQoY2FjaGVLZXkpO1xuXG4gICAgaW50ZW50U3RhdGUuc3RyZWFtUmVhZGVyID0gcmVhZGVyO1xuXG4gICAgY29uc3QgcHVtcCA9ICgpID0+IHtcbiAgICAgIHJlYWRlci5yZWFkKCkudGhlbigoe1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgZG9uZVxuICAgICAgfSkgPT4ge1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlciA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZW5kZXJQYWdlQ2h1bmsodmFsdWUsIGludGVudFN0YXRlKTtcblxuICAgICAgICBwdW1wKCk7XG4gICAgICB9LCByZWFzb24gPT4ge1xuICAgICAgICBpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXIgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLl90cmFuc3BvcnQuZGVzdHJveWVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGludGVudFN0YXRlLm9wZXJhdG9yTGlzdCkge1xuICAgICAgICAgIGludGVudFN0YXRlLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmsgPSB0cnVlO1xuXG4gICAgICAgICAgZm9yIChjb25zdCBpbnRlcm5hbFJlbmRlclRhc2sgb2YgaW50ZW50U3RhdGUucmVuZGVyVGFza3MpIHtcbiAgICAgICAgICAgIGludGVybmFsUmVuZGVyVGFzay5vcGVyYXRvckxpc3RDaGFuZ2VkKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5fdHJ5Q2xlYW51cCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGludGVudFN0YXRlLmRpc3BsYXlSZWFkeUNhcGFiaWxpdHkpIHtcbiAgICAgICAgICBpbnRlbnRTdGF0ZS5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnJlamVjdChyZWFzb24pO1xuICAgICAgICB9IGVsc2UgaWYgKGludGVudFN0YXRlLm9wTGlzdFJlYWRDYXBhYmlsaXR5KSB7XG4gICAgICAgICAgaW50ZW50U3RhdGUub3BMaXN0UmVhZENhcGFiaWxpdHkucmVqZWN0KHJlYXNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHVtcCgpO1xuICB9XG5cbiAgX2Fib3J0T3BlcmF0b3JMaXN0KHtcbiAgICBpbnRlbnRTdGF0ZSxcbiAgICByZWFzb24sXG4gICAgZm9yY2UgPSBmYWxzZVxuICB9KSB7XG4gICAgaWYgKCFpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWZvcmNlKSB7XG4gICAgICBpZiAoaW50ZW50U3RhdGUucmVuZGVyVGFza3Muc2l6ZSA+IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVhc29uIGluc3RhbmNlb2YgX2Rpc3BsYXlfdXRpbHMuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uKSB7XG4gICAgICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLl9hYm9ydE9wZXJhdG9yTGlzdCh7XG4gICAgICAgICAgICBpbnRlbnRTdGF0ZSxcbiAgICAgICAgICAgIHJlYXNvbixcbiAgICAgICAgICAgIGZvcmNlOiB0cnVlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpbnRlbnRTdGF0ZS5zdHJlYW1SZWFkZXJDYW5jZWxUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfSwgUkVOREVSSU5HX0NBTkNFTExFRF9USU1FT1VUKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlci5jYW5jZWwobmV3IF91dGlsLkFib3J0RXhjZXB0aW9uKHJlYXNvbi5tZXNzYWdlKSkuY2F0Y2goKCkgPT4ge30pO1xuICAgIGludGVudFN0YXRlLnN0cmVhbVJlYWRlciA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5fdHJhbnNwb3J0LmRlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2N1ckNhY2hlS2V5LCBjdXJJbnRlbnRTdGF0ZV0gb2YgdGhpcy5faW50ZW50U3RhdGVzKSB7XG4gICAgICBpZiAoY3VySW50ZW50U3RhdGUgPT09IGludGVudFN0YXRlKSB7XG4gICAgICAgIHRoaXMuX2ludGVudFN0YXRlcy5kZWxldGUoY3VyQ2FjaGVLZXkpO1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG5cbiAgZ2V0IHN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0cztcbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGUGFnZVByb3h5ID0gUERGUGFnZVByb3h5O1xuXG5jbGFzcyBMb29wYmFja1BvcnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLl9kZWZlcnJlZCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgcG9zdE1lc3NhZ2Uob2JqLCB0cmFuc2ZlcnMpIHtcbiAgICBjb25zdCBldmVudCA9IHtcbiAgICAgIGRhdGE6IHN0cnVjdHVyZWRDbG9uZShvYmosIHRyYW5zZmVycylcbiAgICB9O1xuXG4gICAgdGhpcy5fZGVmZXJyZWQudGhlbigoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuX2xpc3RlbmVycykge1xuICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXIobmFtZSwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICByZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgaSA9IHRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcblxuICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gIH1cblxuICB0ZXJtaW5hdGUoKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCA9IDA7XG4gIH1cblxufVxuXG5leHBvcnRzLkxvb3BiYWNrUG9ydCA9IExvb3BiYWNrUG9ydDtcbmNvbnN0IFBERldvcmtlclV0aWwgPSB7XG4gIGlzV29ya2VyRGlzYWJsZWQ6IGZhbHNlLFxuICBmYWxsYmFja1dvcmtlclNyYzogbnVsbCxcbiAgZmFrZVdvcmtlcklkOiAwXG59O1xuZXhwb3J0cy5QREZXb3JrZXJVdGlsID0gUERGV29ya2VyVXRpbDtcbntcbiAgaWYgKF9pc19ub2RlLmlzTm9kZUpTICYmIHR5cGVvZiByZXF1aXJlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBQREZXb3JrZXJVdGlsLmlzV29ya2VyRGlzYWJsZWQgPSB0cnVlO1xuICAgIFBERldvcmtlclV0aWwuZmFsbGJhY2tXb3JrZXJTcmMgPSBcIi4vcGRmLndvcmtlci5qc1wiO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IHBkZmpzRmlsZVBhdGggPSBkb2N1bWVudD8uY3VycmVudFNjcmlwdD8uc3JjO1xuXG4gICAgaWYgKHBkZmpzRmlsZVBhdGgpIHtcbiAgICAgIFBERldvcmtlclV0aWwuZmFsbGJhY2tXb3JrZXJTcmMgPSBwZGZqc0ZpbGVQYXRoLnJlcGxhY2UoLyhcXC4oPzptaW5cXC4pP2pzKShcXD8uKik/JC9pLCBcIi53b3JrZXIkMSQyXCIpO1xuICAgIH1cbiAgfVxuXG4gIFBERldvcmtlclV0aWwuaXNTYW1lT3JpZ2luID0gZnVuY3Rpb24gKGJhc2VVcmwsIG90aGVyVXJsKSB7XG4gICAgbGV0IGJhc2U7XG5cbiAgICB0cnkge1xuICAgICAgYmFzZSA9IG5ldyBVUkwoYmFzZVVybCk7XG5cbiAgICAgIGlmICghYmFzZS5vcmlnaW4gfHwgYmFzZS5vcmlnaW4gPT09IFwibnVsbFwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgb3RoZXIgPSBuZXcgVVJMKG90aGVyVXJsLCBiYXNlKTtcbiAgICByZXR1cm4gYmFzZS5vcmlnaW4gPT09IG90aGVyLm9yaWdpbjtcbiAgfTtcblxuICBQREZXb3JrZXJVdGlsLmNyZWF0ZUNETldyYXBwZXIgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGBpbXBvcnRTY3JpcHRzKFwiJHt1cmx9XCIpO2A7XG4gICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3dyYXBwZXJdKSk7XG4gIH07XG59XG5cbmNsYXNzIFBERldvcmtlciB7XG4gIHN0YXRpYyAjd29ya2VyUG9ydHMgPSBuZXcgV2Vha01hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBuYW1lID0gbnVsbCxcbiAgICBwb3J0ID0gbnVsbCxcbiAgICB2ZXJib3NpdHkgPSAoMCwgX3V0aWwuZ2V0VmVyYm9zaXR5TGV2ZWwpKClcbiAgfSA9IHt9KSB7XG4gICAgaWYgKHBvcnQgJiYgUERGV29ya2VyLiN3b3JrZXJQb3J0cy5oYXMocG9ydCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBQREZXb3JrZXIgcGVyIHBvcnQuXCIpO1xuICAgIH1cblxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnZlcmJvc2l0eSA9IHZlcmJvc2l0eTtcbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgdGhpcy5fcG9ydCA9IG51bGw7XG4gICAgdGhpcy5fd2ViV29ya2VyID0gbnVsbDtcbiAgICB0aGlzLl9tZXNzYWdlSGFuZGxlciA9IG51bGw7XG5cbiAgICBpZiAocG9ydCkge1xuICAgICAgUERGV29ya2VyLiN3b3JrZXJQb3J0cy5zZXQocG9ydCwgdGhpcyk7XG5cbiAgICAgIHRoaXMuX2luaXRpYWxpemVGcm9tUG9ydChwb3J0KTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2luaXRpYWxpemUoKTtcbiAgfVxuXG4gIGdldCBwcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIGdldCBwb3J0KCkge1xuICAgIHJldHVybiB0aGlzLl9wb3J0O1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9tZXNzYWdlSGFuZGxlcjtcbiAgfVxuXG4gIF9pbml0aWFsaXplRnJvbVBvcnQocG9ydCkge1xuICAgIHRoaXMuX3BvcnQgPSBwb3J0O1xuICAgIHRoaXMuX21lc3NhZ2VIYW5kbGVyID0gbmV3IF9tZXNzYWdlX2hhbmRsZXIuTWVzc2FnZUhhbmRsZXIoXCJtYWluXCIsIFwid29ya2VyXCIsIHBvcnQpO1xuXG4gICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIub24oXCJyZWFkeVwiLCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX2luaXRpYWxpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBXb3JrZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgIVBERldvcmtlclV0aWwuaXNXb3JrZXJEaXNhYmxlZCAmJiAhUERGV29ya2VyLl9tYWluVGhyZWFkV29ya2VyTWVzc2FnZUhhbmRsZXIpIHtcbiAgICAgIGxldCB3b3JrZXJTcmMgPSBQREZXb3JrZXIud29ya2VyU3JjO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIVBERldvcmtlclV0aWwuaXNTYW1lT3JpZ2luKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCB3b3JrZXJTcmMpKSB7XG4gICAgICAgICAgd29ya2VyU3JjID0gUERGV29ya2VyVXRpbC5jcmVhdGVDRE5XcmFwcGVyKG5ldyBVUkwod29ya2VyU3JjLCB3aW5kb3cubG9jYXRpb24pLmhyZWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJTcmMpO1xuICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG5ldyBfbWVzc2FnZV9oYW5kbGVyLk1lc3NhZ2VIYW5kbGVyKFwibWFpblwiLCBcIndvcmtlclwiLCB3b3JrZXIpO1xuXG4gICAgICAgIGNvbnN0IHRlcm1pbmF0ZUVhcmx5ID0gKCkgPT4ge1xuICAgICAgICAgIHdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25Xb3JrZXJFcnJvcik7XG4gICAgICAgICAgbWVzc2FnZUhhbmRsZXIuZGVzdHJveSgpO1xuICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcblxuICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlamVjdChuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZFwiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHVwRmFrZVdvcmtlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbldvcmtlckVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5fd2ViV29ya2VyKSB7XG4gICAgICAgICAgICB0ZXJtaW5hdGVFYXJseSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uV29ya2VyRXJyb3IpO1xuICAgICAgICBtZXNzYWdlSGFuZGxlci5vbihcInRlc3RcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbldvcmtlckVycm9yKTtcblxuICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGVybWluYXRlRWFybHkoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5fbWVzc2FnZUhhbmRsZXIgPSBtZXNzYWdlSGFuZGxlcjtcbiAgICAgICAgICAgIHRoaXMuX3BvcnQgPSB3b3JrZXI7XG4gICAgICAgICAgICB0aGlzLl93ZWJXb3JrZXIgPSB3b3JrZXI7XG5cbiAgICAgICAgICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZXNvbHZlKCk7XG5cbiAgICAgICAgICAgIG1lc3NhZ2VIYW5kbGVyLnNlbmQoXCJjb25maWd1cmVcIiwge1xuICAgICAgICAgICAgICB2ZXJib3NpdHk6IHRoaXMudmVyYm9zaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0dXBGYWtlV29ya2VyKCk7XG5cbiAgICAgICAgICAgIG1lc3NhZ2VIYW5kbGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBtZXNzYWdlSGFuZGxlci5vbihcInJlYWR5XCIsIGRhdGEgPT4ge1xuICAgICAgICAgIHdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25Xb3JrZXJFcnJvcik7XG5cbiAgICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRlcm1pbmF0ZUVhcmx5KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlbmRUZXN0KCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0dXBGYWtlV29ya2VyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZW5kVGVzdCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCB0ZXN0T2JqID0gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICAgICAgICBtZXNzYWdlSGFuZGxlci5zZW5kKFwidGVzdFwiLCB0ZXN0T2JqLCBbdGVzdE9iai5idWZmZXJdKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZW5kVGVzdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICgwLCBfdXRpbC5pbmZvKShcIlRoZSB3b3JrZXIgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3NldHVwRmFrZVdvcmtlcigpO1xuICB9XG5cbiAgX3NldHVwRmFrZVdvcmtlcigpIHtcbiAgICBpZiAoIVBERldvcmtlclV0aWwuaXNXb3JrZXJEaXNhYmxlZCkge1xuICAgICAgKDAsIF91dGlsLndhcm4pKFwiU2V0dGluZyB1cCBmYWtlIHdvcmtlci5cIik7XG4gICAgICBQREZXb3JrZXJVdGlsLmlzV29ya2VyRGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIFBERldvcmtlci5fc2V0dXBGYWtlV29ya2VyR2xvYmFsLnRoZW4oV29ya2VyTWVzc2FnZUhhbmRsZXIgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWRcIikpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcG9ydCA9IG5ldyBMb29wYmFja1BvcnQoKTtcbiAgICAgIHRoaXMuX3BvcnQgPSBwb3J0O1xuICAgICAgY29uc3QgaWQgPSBgZmFrZSR7UERGV29ya2VyVXRpbC5mYWtlV29ya2VySWQrK31gO1xuICAgICAgY29uc3Qgd29ya2VySGFuZGxlciA9IG5ldyBfbWVzc2FnZV9oYW5kbGVyLk1lc3NhZ2VIYW5kbGVyKGlkICsgXCJfd29ya2VyXCIsIGlkLCBwb3J0KTtcbiAgICAgIFdvcmtlck1lc3NhZ2VIYW5kbGVyLnNldHVwKHdvcmtlckhhbmRsZXIsIHBvcnQpO1xuICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBuZXcgX21lc3NhZ2VfaGFuZGxlci5NZXNzYWdlSGFuZGxlcihpZCwgaWQgKyBcIl93b3JrZXJcIiwgcG9ydCk7XG4gICAgICB0aGlzLl9tZXNzYWdlSGFuZGxlciA9IG1lc3NhZ2VIYW5kbGVyO1xuXG4gICAgICB0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuXG4gICAgICBtZXNzYWdlSGFuZGxlci5zZW5kKFwiY29uZmlndXJlXCIsIHtcbiAgICAgICAgdmVyYm9zaXR5OiB0aGlzLnZlcmJvc2l0eVxuICAgICAgfSk7XG4gICAgfSkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIHRoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKGBTZXR0aW5nIHVwIGZha2Ugd29ya2VyIGZhaWxlZDogXCIke3JlYXNvbi5tZXNzYWdlfVwiLmApKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuX3dlYldvcmtlcikge1xuICAgICAgdGhpcy5fd2ViV29ya2VyLnRlcm1pbmF0ZSgpO1xuXG4gICAgICB0aGlzLl93ZWJXb3JrZXIgPSBudWxsO1xuICAgIH1cblxuICAgIFBERldvcmtlci4jd29ya2VyUG9ydHMuZGVsZXRlKHRoaXMuX3BvcnQpO1xuICAgIHRoaXMuX3BvcnQgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VIYW5kbGVyKSB7XG4gICAgICB0aGlzLl9tZXNzYWdlSGFuZGxlci5kZXN0cm95KCk7XG5cbiAgICAgIHRoaXMuX21lc3NhZ2VIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZnJvbVBvcnQocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXM/LnBvcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBERldvcmtlci5mcm9tUG9ydCAtIGludmFsaWQgbWV0aG9kIHNpZ25hdHVyZS5cIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI3dvcmtlclBvcnRzLmhhcyhwYXJhbXMucG9ydCkpIHtcbiAgICAgIHJldHVybiB0aGlzLiN3b3JrZXJQb3J0cy5nZXQocGFyYW1zLnBvcnQpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUERGV29ya2VyKHBhcmFtcyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHdvcmtlclNyYygpIHtcbiAgICBpZiAoX3dvcmtlcl9vcHRpb25zLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjKSB7XG4gICAgICByZXR1cm4gX3dvcmtlcl9vcHRpb25zLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjO1xuICAgIH1cblxuICAgIGlmIChQREZXb3JrZXJVdGlsLmZhbGxiYWNrV29ya2VyU3JjICE9PSBudWxsKSB7XG4gICAgICBpZiAoIV9pc19ub2RlLmlzTm9kZUpTKSB7XG4gICAgICAgICgwLCBfZGlzcGxheV91dGlscy5kZXByZWNhdGVkKSgnTm8gXCJHbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyY1wiIHNwZWNpZmllZC4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFBERldvcmtlclV0aWwuZmFsbGJhY2tXb3JrZXJTcmM7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBcIkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjXCIgc3BlY2lmaWVkLicpO1xuICB9XG5cbiAgc3RhdGljIGdldCBfbWFpblRocmVhZFdvcmtlck1lc3NhZ2VIYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZ2xvYmFsVGhpcy5wZGZqc1dvcmtlcj8uV29ya2VyTWVzc2FnZUhhbmRsZXIgfHwgbnVsbDtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBfc2V0dXBGYWtlV29ya2VyR2xvYmFsKCkge1xuICAgIGNvbnN0IGxvYWRlciA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1haW5Xb3JrZXJNZXNzYWdlSGFuZGxlciA9IHRoaXMuX21haW5UaHJlYWRXb3JrZXJNZXNzYWdlSGFuZGxlcjtcblxuICAgICAgaWYgKG1haW5Xb3JrZXJNZXNzYWdlSGFuZGxlcikge1xuICAgICAgICByZXR1cm4gbWFpbldvcmtlck1lc3NhZ2VIYW5kbGVyO1xuICAgICAgfVxuXG4gICAgICBpZiAoX2lzX25vZGUuaXNOb2RlSlMgJiYgdHlwZW9mIHJlcXVpcmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCB3b3JrZXIgPSBldmFsKFwicmVxdWlyZVwiKSh0aGlzLndvcmtlclNyYyk7XG4gICAgICAgIHJldHVybiB3b3JrZXIuV29ya2VyTWVzc2FnZUhhbmRsZXI7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0ICgwLCBfZGlzcGxheV91dGlscy5sb2FkU2NyaXB0KSh0aGlzLndvcmtlclNyYyk7XG4gICAgICByZXR1cm4gd2luZG93LnBkZmpzV29ya2VyLldvcmtlck1lc3NhZ2VIYW5kbGVyO1xuICAgIH07XG5cbiAgICByZXR1cm4gKDAsIF91dGlsLnNoYWRvdykodGhpcywgXCJfc2V0dXBGYWtlV29ya2VyR2xvYmFsXCIsIGxvYWRlcigpKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGV29ya2VyID0gUERGV29ya2VyO1xue1xuICBQREZXb3JrZXIuZ2V0V29ya2VyU3JjID0gZnVuY3Rpb24gKCkge1xuICAgICgwLCBfZGlzcGxheV91dGlscy5kZXByZWNhdGVkKShcImBQREZXb3JrZXIuZ2V0V29ya2VyU3JjKClgLCBwbGVhc2UgdXNlIGBQREZXb3JrZXIud29ya2VyU3JjYCBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gdGhpcy53b3JrZXJTcmM7XG4gIH07XG59XG5cbmNsYXNzIFdvcmtlclRyYW5zcG9ydCB7XG4gICNkb2NTdGF0cyA9IG51bGw7XG4gICNwYWdlQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICNwYWdlUHJvbWlzZXMgPSBuZXcgTWFwKCk7XG4gICNtZXRhZGF0YVByb21pc2UgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2VIYW5kbGVyLCBsb2FkaW5nVGFzaywgbmV0d29ya1N0cmVhbSwgcGFyYW1zKSB7XG4gICAgdGhpcy5tZXNzYWdlSGFuZGxlciA9IG1lc3NhZ2VIYW5kbGVyO1xuICAgIHRoaXMubG9hZGluZ1Rhc2sgPSBsb2FkaW5nVGFzaztcbiAgICB0aGlzLmNvbW1vbk9ianMgPSBuZXcgUERGT2JqZWN0cygpO1xuICAgIHRoaXMuZm9udExvYWRlciA9IG5ldyBfZm9udF9sb2FkZXIuRm9udExvYWRlcih7XG4gICAgICBkb2NJZDogbG9hZGluZ1Rhc2suZG9jSWQsXG4gICAgICBvblVuc3VwcG9ydGVkRmVhdHVyZTogdGhpcy5fb25VbnN1cHBvcnRlZEZlYXR1cmUuYmluZCh0aGlzKSxcbiAgICAgIG93bmVyRG9jdW1lbnQ6IHBhcmFtcy5vd25lckRvY3VtZW50LFxuICAgICAgc3R5bGVFbGVtZW50OiBwYXJhbXMuc3R5bGVFbGVtZW50XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyYW1zID0gcGFyYW1zO1xuXG4gICAgaWYgKCFwYXJhbXMudXNlV29ya2VyRmV0Y2gpIHtcbiAgICAgIHRoaXMuQ01hcFJlYWRlckZhY3RvcnkgPSBuZXcgcGFyYW1zLkNNYXBSZWFkZXJGYWN0b3J5KHtcbiAgICAgICAgYmFzZVVybDogcGFyYW1zLmNNYXBVcmwsXG4gICAgICAgIGlzQ29tcHJlc3NlZDogcGFyYW1zLmNNYXBQYWNrZWRcbiAgICAgIH0pO1xuICAgICAgdGhpcy5TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9IG5ldyBwYXJhbXMuU3RhbmRhcmRGb250RGF0YUZhY3Rvcnkoe1xuICAgICAgICBiYXNlVXJsOiBwYXJhbXMuc3RhbmRhcmRGb250RGF0YVVybFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRlc3Ryb3lDYXBhYmlsaXR5ID0gbnVsbDtcbiAgICB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkgPSBudWxsO1xuICAgIHRoaXMuX25ldHdvcmtTdHJlYW0gPSBuZXR3b3JrU3RyZWFtO1xuICAgIHRoaXMuX2Z1bGxSZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IG51bGw7XG4gICAgdGhpcy5kb3dubG9hZEluZm9DYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuICAgIHRoaXMuc2V0dXBNZXNzYWdlSGFuZGxlcigpO1xuICB9XG5cbiAgZ2V0IGFubm90YXRpb25TdG9yYWdlKCkge1xuICAgIHJldHVybiAoMCwgX3V0aWwuc2hhZG93KSh0aGlzLCBcImFubm90YXRpb25TdG9yYWdlXCIsIG5ldyBfYW5ub3RhdGlvbl9zdG9yYWdlLkFubm90YXRpb25TdG9yYWdlKCkpO1xuICB9XG5cbiAgZ2V0IHN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLiNkb2NTdGF0cztcbiAgfVxuXG4gIGdldFJlbmRlcmluZ0ludGVudChpbnRlbnQsIGFubm90YXRpb25Nb2RlID0gX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFLCBpc09wTGlzdCA9IGZhbHNlKSB7XG4gICAgbGV0IHJlbmRlcmluZ0ludGVudCA9IF91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuRElTUExBWTtcbiAgICBsZXQgYW5ub3RhdGlvbkhhc2ggPSBcIlwiO1xuXG4gICAgc3dpdGNoIChpbnRlbnQpIHtcbiAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgcmVuZGVyaW5nSW50ZW50ID0gX3V0aWwuUmVuZGVyaW5nSW50ZW50RmxhZy5BTlk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiZGlzcGxheVwiOlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcInByaW50XCI6XG4gICAgICAgIHJlbmRlcmluZ0ludGVudCA9IF91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuUFJJTlQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAoMCwgX3V0aWwud2FybikoYGdldFJlbmRlcmluZ0ludGVudCAtIGludmFsaWQgaW50ZW50OiAke2ludGVudH1gKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFubm90YXRpb25Nb2RlKSB7XG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25Nb2RlLkRJU0FCTEU6XG4gICAgICAgIHJlbmRlcmluZ0ludGVudCArPSBfdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLkFOTk9UQVRJT05TX0RJU0FCTEU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25Nb2RlLkVOQUJMRTpcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TOlxuICAgICAgICByZW5kZXJpbmdJbnRlbnQgKz0gX3V0aWwuUmVuZGVyaW5nSW50ZW50RmxhZy5BTk5PVEFUSU9OU19GT1JNUztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX1NUT1JBR0U6XG4gICAgICAgIHJlbmRlcmluZ0ludGVudCArPSBfdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLkFOTk9UQVRJT05TX1NUT1JBR0U7XG4gICAgICAgIGFubm90YXRpb25IYXNoID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5oYXNoO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgKDAsIF91dGlsLndhcm4pKGBnZXRSZW5kZXJpbmdJbnRlbnQgLSBpbnZhbGlkIGFubm90YXRpb25Nb2RlOiAke2Fubm90YXRpb25Nb2RlfWApO1xuICAgIH1cblxuICAgIGlmIChpc09wTGlzdCkge1xuICAgICAgcmVuZGVyaW5nSW50ZW50ICs9IF91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuT1BMSVNUO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZW5kZXJpbmdJbnRlbnQsXG4gICAgICBjYWNoZUtleTogYCR7cmVuZGVyaW5nSW50ZW50fV8ke2Fubm90YXRpb25IYXNofWBcbiAgICB9O1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95Q2FwYWJpbGl0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucHJvbWlzZTtcbiAgICB9XG5cbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5kZXN0cm95Q2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcblxuICAgIGlmICh0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkpIHtcbiAgICAgIHRoaXMuX3Bhc3N3b3JkQ2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWQgZHVyaW5nIG9uUGFzc3dvcmQgY2FsbGJhY2tcIikpO1xuICAgIH1cblxuICAgIGNvbnN0IHdhaXRPbiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMuI3BhZ2VDYWNoZS52YWx1ZXMoKSkge1xuICAgICAgd2FpdE9uLnB1c2gocGFnZS5fZGVzdHJveSgpKTtcbiAgICB9XG5cbiAgICB0aGlzLiNwYWdlQ2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLiNwYWdlUHJvbWlzZXMuY2xlYXIoKTtcblxuICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KFwiYW5ub3RhdGlvblN0b3JhZ2VcIikpIHtcbiAgICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2UucmVzZXRNb2RpZmllZCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHRlcm1pbmF0ZWQgPSB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIlRlcm1pbmF0ZVwiLCBudWxsKTtcbiAgICB3YWl0T24ucHVzaCh0ZXJtaW5hdGVkKTtcbiAgICBQcm9taXNlLmFsbCh3YWl0T24pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5jb21tb25PYmpzLmNsZWFyKCk7XG4gICAgICB0aGlzLmZvbnRMb2FkZXIuY2xlYXIoKTtcbiAgICAgIHRoaXMuI21ldGFkYXRhUHJvbWlzZSA9IG51bGw7XG4gICAgICB0aGlzLl9nZXRGaWVsZE9iamVjdHNQcm9taXNlID0gbnVsbDtcbiAgICAgIHRoaXMuX2hhc0pTQWN0aW9uc1Byb21pc2UgPSBudWxsO1xuXG4gICAgICBpZiAodGhpcy5fbmV0d29ya1N0cmVhbSkge1xuICAgICAgICB0aGlzLl9uZXR3b3JrU3RyZWFtLmNhbmNlbEFsbFJlcXVlc3RzKG5ldyBfdXRpbC5BYm9ydEV4Y2VwdGlvbihcIldvcmtlciB3YXMgdGVybWluYXRlZC5cIikpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5tZXNzYWdlSGFuZGxlcikge1xuICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgIH0sIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucmVqZWN0KTtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgc2V0dXBNZXNzYWdlSGFuZGxlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBtZXNzYWdlSGFuZGxlcixcbiAgICAgIGxvYWRpbmdUYXNrXG4gICAgfSA9IHRoaXM7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJHZXRSZWFkZXJcIiwgKGRhdGEsIHNpbmspID0+IHtcbiAgICAgICgwLCBfdXRpbC5hc3NlcnQpKHRoaXMuX25ldHdvcmtTdHJlYW0sIFwiR2V0UmVhZGVyIC0gbm8gYElQREZTdHJlYW1gIGluc3RhbmNlIGF2YWlsYWJsZS5cIik7XG4gICAgICB0aGlzLl9mdWxsUmVhZGVyID0gdGhpcy5fbmV0d29ya1N0cmVhbS5nZXRGdWxsUmVhZGVyKCk7XG5cbiAgICAgIHRoaXMuX2Z1bGxSZWFkZXIub25Qcm9ncmVzcyA9IGV2dCA9PiB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICBsb2FkZWQ6IGV2dC5sb2FkZWQsXG4gICAgICAgICAgdG90YWw6IGV2dC50b3RhbFxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgc2luay5vblB1bGwgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2Z1bGxSZWFkZXIucmVhZCgpLnRoZW4oZnVuY3Rpb24gKHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBkb25lXG4gICAgICAgIH0pIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgc2luay5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICgwLCBfdXRpbC5hc3NlcnQpKCgwLCBfdXRpbC5pc0FycmF5QnVmZmVyKSh2YWx1ZSksIFwiR2V0UmVhZGVyIC0gZXhwZWN0ZWQgYW4gQXJyYXlCdWZmZXIuXCIpO1xuICAgICAgICAgIHNpbmsuZW5xdWV1ZShuZXcgVWludDhBcnJheSh2YWx1ZSksIDEsIFt2YWx1ZV0pO1xuICAgICAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgIHNpbmsuZXJyb3IocmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBzaW5rLm9uQ2FuY2VsID0gcmVhc29uID0+IHtcbiAgICAgICAgdGhpcy5fZnVsbFJlYWRlci5jYW5jZWwocmVhc29uKTtcblxuICAgICAgICBzaW5rLnJlYWR5LmNhdGNoKHJlYWR5UmVhc29uID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aHJvdyByZWFkeVJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiUmVhZGVySGVhZGVyc1JlYWR5XCIsIGRhdGEgPT4ge1xuICAgICAgY29uc3QgaGVhZGVyc0NhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgICBjb25zdCBmdWxsUmVhZGVyID0gdGhpcy5fZnVsbFJlYWRlcjtcbiAgICAgIGZ1bGxSZWFkZXIuaGVhZGVyc1JlYWR5LnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAoIWZ1bGxSZWFkZXIuaXNTdHJlYW1pbmdTdXBwb3J0ZWQgfHwgIWZ1bGxSZWFkZXIuaXNSYW5nZVN1cHBvcnRlZCkge1xuICAgICAgICAgIGlmICh0aGlzLl9sYXN0UHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGxvYWRpbmdUYXNrLm9uUHJvZ3Jlc3M/Lih0aGlzLl9sYXN0UHJvZ3Jlc3MpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bGxSZWFkZXIub25Qcm9ncmVzcyA9IGV2dCA9PiB7XG4gICAgICAgICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzPy4oe1xuICAgICAgICAgICAgICBsb2FkZWQ6IGV2dC5sb2FkZWQsXG4gICAgICAgICAgICAgIHRvdGFsOiBldnQudG90YWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBoZWFkZXJzQ2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgICBpc1N0cmVhbWluZ1N1cHBvcnRlZDogZnVsbFJlYWRlci5pc1N0cmVhbWluZ1N1cHBvcnRlZCxcbiAgICAgICAgICBpc1JhbmdlU3VwcG9ydGVkOiBmdWxsUmVhZGVyLmlzUmFuZ2VTdXBwb3J0ZWQsXG4gICAgICAgICAgY29udGVudExlbmd0aDogZnVsbFJlYWRlci5jb250ZW50TGVuZ3RoXG4gICAgICAgIH0pO1xuICAgICAgfSwgaGVhZGVyc0NhcGFiaWxpdHkucmVqZWN0KTtcbiAgICAgIHJldHVybiBoZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIH0pO1xuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiR2V0UmFuZ2VSZWFkZXJcIiwgKGRhdGEsIHNpbmspID0+IHtcbiAgICAgICgwLCBfdXRpbC5hc3NlcnQpKHRoaXMuX25ldHdvcmtTdHJlYW0sIFwiR2V0UmFuZ2VSZWFkZXIgLSBubyBgSVBERlN0cmVhbWAgaW5zdGFuY2UgYXZhaWxhYmxlLlwiKTtcblxuICAgICAgY29uc3QgcmFuZ2VSZWFkZXIgPSB0aGlzLl9uZXR3b3JrU3RyZWFtLmdldFJhbmdlUmVhZGVyKGRhdGEuYmVnaW4sIGRhdGEuZW5kKTtcblxuICAgICAgaWYgKCFyYW5nZVJlYWRlcikge1xuICAgICAgICBzaW5rLmNsb3NlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2luay5vblB1bGwgPSAoKSA9PiB7XG4gICAgICAgIHJhbmdlUmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uICh7XG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgZG9uZVxuICAgICAgICB9KSB7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHNpbmsuY2xvc2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAoMCwgX3V0aWwuYXNzZXJ0KSgoMCwgX3V0aWwuaXNBcnJheUJ1ZmZlcikodmFsdWUpLCBcIkdldFJhbmdlUmVhZGVyIC0gZXhwZWN0ZWQgYW4gQXJyYXlCdWZmZXIuXCIpO1xuICAgICAgICAgIHNpbmsuZW5xdWV1ZShuZXcgVWludDhBcnJheSh2YWx1ZSksIDEsIFt2YWx1ZV0pO1xuICAgICAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgIHNpbmsuZXJyb3IocmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBzaW5rLm9uQ2FuY2VsID0gcmVhc29uID0+IHtcbiAgICAgICAgcmFuZ2VSZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgICAgIHNpbmsucmVhZHkuY2F0Y2gocmVhZHlSZWFzb24gPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRocm93IHJlYWR5UmVhc29uO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJHZXREb2NcIiwgKHtcbiAgICAgIHBkZkluZm9cbiAgICB9KSA9PiB7XG4gICAgICB0aGlzLl9udW1QYWdlcyA9IHBkZkluZm8ubnVtUGFnZXM7XG4gICAgICB0aGlzLl9odG1sRm9yWGZhID0gcGRmSW5mby5odG1sRm9yWGZhO1xuICAgICAgZGVsZXRlIHBkZkluZm8uaHRtbEZvclhmYTtcblxuICAgICAgbG9hZGluZ1Rhc2suX2NhcGFiaWxpdHkucmVzb2x2ZShuZXcgUERGRG9jdW1lbnRQcm94eShwZGZJbmZvLCB0aGlzKSk7XG4gICAgfSk7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJEb2NFeGNlcHRpb25cIiwgZnVuY3Rpb24gKGV4KSB7XG4gICAgICBsZXQgcmVhc29uO1xuXG4gICAgICBzd2l0Y2ggKGV4Lm5hbWUpIHtcbiAgICAgICAgY2FzZSBcIlBhc3N3b3JkRXhjZXB0aW9uXCI6XG4gICAgICAgICAgcmVhc29uID0gbmV3IF91dGlsLlBhc3N3b3JkRXhjZXB0aW9uKGV4Lm1lc3NhZ2UsIGV4LmNvZGUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJJbnZhbGlkUERGRXhjZXB0aW9uXCI6XG4gICAgICAgICAgcmVhc29uID0gbmV3IF91dGlsLkludmFsaWRQREZFeGNlcHRpb24oZXgubWVzc2FnZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIk1pc3NpbmdQREZFeGNlcHRpb25cIjpcbiAgICAgICAgICByZWFzb24gPSBuZXcgX3V0aWwuTWlzc2luZ1BERkV4Y2VwdGlvbihleC5tZXNzYWdlKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uXCI6XG4gICAgICAgICAgcmVhc29uID0gbmV3IF91dGlsLlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbihleC5tZXNzYWdlLCBleC5zdGF0dXMpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJVbmtub3duRXJyb3JFeGNlcHRpb25cIjpcbiAgICAgICAgICByZWFzb24gPSBuZXcgX3V0aWwuVW5rbm93bkVycm9yRXhjZXB0aW9uKGV4Lm1lc3NhZ2UsIGV4LmRldGFpbHMpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkRvY0V4Y2VwdGlvbiAtIGV4cGVjdGVkIGEgdmFsaWQgRXJyb3IuXCIpO1xuICAgICAgfVxuXG4gICAgICBsb2FkaW5nVGFzay5fY2FwYWJpbGl0eS5yZWplY3QocmVhc29uKTtcbiAgICB9KTtcbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIlBhc3N3b3JkUmVxdWVzdFwiLCBleGNlcHRpb24gPT4ge1xuICAgICAgdGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuXG4gICAgICBpZiAobG9hZGluZ1Rhc2sub25QYXNzd29yZCkge1xuICAgICAgICBjb25zdCB1cGRhdGVQYXNzd29yZCA9IHBhc3N3b3JkID0+IHtcbiAgICAgICAgICBpZiAocGFzc3dvcmQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdChwYXNzd29yZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkQ2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGxvYWRpbmdUYXNrLm9uUGFzc3dvcmQodXBkYXRlUGFzc3dvcmQsIGV4Y2VwdGlvbi5jb2RlKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkucmVqZWN0KGV4KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdChuZXcgX3V0aWwuUGFzc3dvcmRFeGNlcHRpb24oZXhjZXB0aW9uLm1lc3NhZ2UsIGV4Y2VwdGlvbi5jb2RlKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICB9KTtcbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkRhdGFMb2FkZWRcIiwgZGF0YSA9PiB7XG4gICAgICBsb2FkaW5nVGFzay5vblByb2dyZXNzPy4oe1xuICAgICAgICBsb2FkZWQ6IGRhdGEubGVuZ3RoLFxuICAgICAgICB0b3RhbDogZGF0YS5sZW5ndGhcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kb3dubG9hZEluZm9DYXBhYmlsaXR5LnJlc29sdmUoZGF0YSk7XG4gICAgfSk7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJTdGFydFJlbmRlclBhZ2VcIiwgZGF0YSA9PiB7XG4gICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYWdlID0gdGhpcy4jcGFnZUNhY2hlLmdldChkYXRhLnBhZ2VJbmRleCk7XG5cbiAgICAgIHBhZ2UuX3N0YXJ0UmVuZGVyUGFnZShkYXRhLnRyYW5zcGFyZW5jeSwgZGF0YS5jYWNoZUtleSk7XG4gICAgfSk7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJjb21tb25vYmpcIiwgKFtpZCwgdHlwZSwgZXhwb3J0ZWREYXRhXSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29tbW9uT2Jqcy5oYXMoaWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJGb250XCI6XG4gICAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5fcGFyYW1zO1xuXG4gICAgICAgICAgaWYgKFwiZXJyb3JcIiBpbiBleHBvcnRlZERhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydGVkRXJyb3IgPSBleHBvcnRlZERhdGEuZXJyb3I7XG4gICAgICAgICAgICAoMCwgX3V0aWwud2FybikoYEVycm9yIGR1cmluZyBmb250IGxvYWRpbmc6ICR7ZXhwb3J0ZWRFcnJvcn1gKTtcbiAgICAgICAgICAgIHRoaXMuY29tbW9uT2Jqcy5yZXNvbHZlKGlkLCBleHBvcnRlZEVycm9yKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBmb250UmVnaXN0cnkgPSBudWxsO1xuXG4gICAgICAgICAgaWYgKHBhcmFtcy5wZGZCdWcgJiYgZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yPy5lbmFibGVkKSB7XG4gICAgICAgICAgICBmb250UmVnaXN0cnkgPSB7XG4gICAgICAgICAgICAgIHJlZ2lzdGVyRm9udChmb250LCB1cmwpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLkZvbnRJbnNwZWN0b3IuZm9udEFkZGVkKGZvbnQsIHVybCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBmb250ID0gbmV3IF9mb250X2xvYWRlci5Gb250RmFjZU9iamVjdChleHBvcnRlZERhdGEsIHtcbiAgICAgICAgICAgIGlzRXZhbFN1cHBvcnRlZDogcGFyYW1zLmlzRXZhbFN1cHBvcnRlZCxcbiAgICAgICAgICAgIGRpc2FibGVGb250RmFjZTogcGFyYW1zLmRpc2FibGVGb250RmFjZSxcbiAgICAgICAgICAgIGlnbm9yZUVycm9yczogcGFyYW1zLmlnbm9yZUVycm9ycyxcbiAgICAgICAgICAgIG9uVW5zdXBwb3J0ZWRGZWF0dXJlOiB0aGlzLl9vblVuc3VwcG9ydGVkRmVhdHVyZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgZm9udFJlZ2lzdHJ5XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5mb250TG9hZGVyLmJpbmQoZm9udCkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJGb250RmFsbGJhY2tcIiwge1xuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5mb250RXh0cmFQcm9wZXJ0aWVzICYmIGZvbnQuZGF0YSkge1xuICAgICAgICAgICAgICBmb250LmRhdGEgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNvbW1vbk9ianMucmVzb2x2ZShpZCwgZm9udCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkZvbnRQYXRoXCI6XG4gICAgICAgIGNhc2UgXCJJbWFnZVwiOlxuICAgICAgICAgIHRoaXMuY29tbW9uT2Jqcy5yZXNvbHZlKGlkLCBleHBvcnRlZERhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5rbm93biBjb21tb24gb2JqZWN0IHR5cGUgJHt0eXBlfWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwib2JqXCIsIChbaWQsIHBhZ2VJbmRleCwgdHlwZSwgaW1hZ2VEYXRhXSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFnZVByb3h5ID0gdGhpcy4jcGFnZUNhY2hlLmdldChwYWdlSW5kZXgpO1xuXG4gICAgICBpZiAocGFnZVByb3h5Lm9ianMuaGFzKGlkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiSW1hZ2VcIjpcbiAgICAgICAgICBwYWdlUHJveHkub2Jqcy5yZXNvbHZlKGlkLCBpbWFnZURhdGEpO1xuICAgICAgICAgIGNvbnN0IE1BWF9JTUFHRV9TSVpFX1RPX1NUT1JFID0gODAwMDAwMDtcblxuICAgICAgICAgIGlmIChpbWFnZURhdGEpIHtcbiAgICAgICAgICAgIGxldCBsZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChpbWFnZURhdGEuYml0bWFwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBiaXRtYXAsXG4gICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICAgICAgIH0gPSBpbWFnZURhdGE7XG4gICAgICAgICAgICAgIGxlbmd0aCA9IHdpZHRoICogaGVpZ2h0ICogNDtcblxuICAgICAgICAgICAgICBwYWdlUHJveHkuX2JpdG1hcHMuYWRkKGJpdG1hcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsZW5ndGggPSBpbWFnZURhdGEuZGF0YT8ubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsZW5ndGggPiBNQVhfSU1BR0VfU0laRV9UT19TVE9SRSkge1xuICAgICAgICAgICAgICBwYWdlUHJveHkuY2xlYW51cEFmdGVyUmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiUGF0dGVyblwiOlxuICAgICAgICAgIHBhZ2VQcm94eS5vYmpzLnJlc29sdmUoaWQsIGltYWdlRGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bmtub3duIG9iamVjdCB0eXBlICR7dHlwZX1gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkRvY1Byb2dyZXNzXCIsIGRhdGEgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbG9hZGluZ1Rhc2sub25Qcm9ncmVzcz8uKHtcbiAgICAgICAgbG9hZGVkOiBkYXRhLmxvYWRlZCxcbiAgICAgICAgdG90YWw6IGRhdGEudG90YWxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIG1lc3NhZ2VIYW5kbGVyLm9uKFwiRG9jU3RhdHNcIiwgZGF0YSA9PiB7XG4gICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiNkb2NTdGF0cyA9IE9iamVjdC5mcmVlemUoe1xuICAgICAgICBzdHJlYW1UeXBlczogT2JqZWN0LmZyZWV6ZShkYXRhLnN0cmVhbVR5cGVzKSxcbiAgICAgICAgZm9udFR5cGVzOiBPYmplY3QuZnJlZXplKGRhdGEuZm9udFR5cGVzKVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJVbnN1cHBvcnRlZEZlYXR1cmVcIiwgdGhpcy5fb25VbnN1cHBvcnRlZEZlYXR1cmUuYmluZCh0aGlzKSk7XG4gICAgbWVzc2FnZUhhbmRsZXIub24oXCJGZXRjaEJ1aWx0SW5DTWFwXCIsIGRhdGEgPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJXb3JrZXIgd2FzIGRlc3Ryb3llZC5cIikpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuQ01hcFJlYWRlckZhY3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkNNYXBSZWFkZXJGYWN0b3J5IG5vdCBpbml0aWFsaXplZCwgc2VlIHRoZSBgdXNlV29ya2VyRmV0Y2hgIHBhcmFtZXRlci5cIikpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5DTWFwUmVhZGVyRmFjdG9yeS5mZXRjaChkYXRhKTtcbiAgICB9KTtcbiAgICBtZXNzYWdlSGFuZGxlci5vbihcIkZldGNoU3RhbmRhcmRGb250RGF0YVwiLCBkYXRhID0+IHtcbiAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiV29ya2VyIHdhcyBkZXN0cm95ZWQuXCIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLlN0YW5kYXJkRm9udERhdGFGYWN0b3J5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSBub3QgaW5pdGlhbGl6ZWQsIHNlZSB0aGUgYHVzZVdvcmtlckZldGNoYCBwYXJhbWV0ZXIuXCIpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuU3RhbmRhcmRGb250RGF0YUZhY3RvcnkuZmV0Y2goZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBfb25VbnN1cHBvcnRlZEZlYXR1cmUoe1xuICAgIGZlYXR1cmVJZFxuICB9KSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5sb2FkaW5nVGFzay5vblVuc3VwcG9ydGVkRmVhdHVyZT8uKGZlYXR1cmVJZCk7XG4gIH1cblxuICBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldERhdGFcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRQYWdlKHBhZ2VOdW1iZXIpIHtcbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIocGFnZU51bWJlcikgfHwgcGFnZU51bWJlciA8PSAwIHx8IHBhZ2VOdW1iZXIgPiB0aGlzLl9udW1QYWdlcykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgcGFnZSByZXF1ZXN0LlwiKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZUluZGV4ID0gcGFnZU51bWJlciAtIDEsXG4gICAgICAgICAgY2FjaGVkUHJvbWlzZSA9IHRoaXMuI3BhZ2VQcm9taXNlcy5nZXQocGFnZUluZGV4KTtcblxuICAgIGlmIChjYWNoZWRQcm9taXNlKSB7XG4gICAgICByZXR1cm4gY2FjaGVkUHJvbWlzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9taXNlID0gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlXCIsIHtcbiAgICAgIHBhZ2VJbmRleFxuICAgIH0pLnRoZW4ocGFnZUluZm8gPT4ge1xuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zcG9ydCBkZXN0cm95ZWRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhZ2UgPSBuZXcgUERGUGFnZVByb3h5KHBhZ2VJbmRleCwgcGFnZUluZm8sIHRoaXMsIHRoaXMuX3BhcmFtcy5vd25lckRvY3VtZW50LCB0aGlzLl9wYXJhbXMucGRmQnVnKTtcbiAgICAgIHRoaXMuI3BhZ2VDYWNoZS5zZXQocGFnZUluZGV4LCBwYWdlKTtcbiAgICAgIHJldHVybiBwYWdlO1xuICAgIH0pO1xuICAgIHRoaXMuI3BhZ2VQcm9taXNlcy5zZXQocGFnZUluZGV4LCBwcm9taXNlKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGdldFBhZ2VJbmRleChyZWYpIHtcbiAgICBpZiAodHlwZW9mIHJlZiAhPT0gXCJvYmplY3RcIiB8fCByZWYgPT09IG51bGwgfHwgIU51bWJlci5pc0ludGVnZXIocmVmLm51bSkgfHwgcmVmLm51bSA8IDAgfHwgIU51bWJlci5pc0ludGVnZXIocmVmLmdlbikgfHwgcmVmLmdlbiA8IDApIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIHBhZ2VJbmRleCByZXF1ZXN0LlwiKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0UGFnZUluZGV4XCIsIHtcbiAgICAgIG51bTogcmVmLm51bSxcbiAgICAgIGdlbjogcmVmLmdlblxuICAgIH0pO1xuICB9XG5cbiAgZ2V0QW5ub3RhdGlvbnMocGFnZUluZGV4LCBpbnRlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRBbm5vdGF0aW9uc1wiLCB7XG4gICAgICBwYWdlSW5kZXgsXG4gICAgICBpbnRlbnRcbiAgICB9KTtcbiAgfVxuXG4gIHNhdmVEb2N1bWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJTYXZlRG9jdW1lbnRcIiwge1xuICAgICAgaXNQdXJlWGZhOiAhIXRoaXMuX2h0bWxGb3JYZmEsXG4gICAgICBudW1QYWdlczogdGhpcy5fbnVtUGFnZXMsXG4gICAgICBhbm5vdGF0aW9uU3RvcmFnZTogdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXJpYWxpemFibGUsXG4gICAgICBmaWxlbmFtZTogdGhpcy5fZnVsbFJlYWRlcj8uZmlsZW5hbWUgPz8gbnVsbFxuICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5yZXNldE1vZGlmaWVkKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRGaWVsZE9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEZpZWxkT2JqZWN0c1Byb21pc2UgfHw9IHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0RmllbGRPYmplY3RzXCIsIG51bGwpO1xuICB9XG5cbiAgaGFzSlNBY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9oYXNKU0FjdGlvbnNQcm9taXNlIHx8PSB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkhhc0pTQWN0aW9uc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldENhbGN1bGF0aW9uT3JkZXJJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0Q2FsY3VsYXRpb25PcmRlcklkc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldERlc3RpbmF0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXREZXN0aW5hdGlvbnNcIiwgbnVsbCk7XG4gIH1cblxuICBnZXREZXN0aW5hdGlvbihpZCkge1xuICAgIGlmICh0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIGRlc3RpbmF0aW9uIHJlcXVlc3QuXCIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXREZXN0aW5hdGlvblwiLCB7XG4gICAgICBpZFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0UGFnZUxhYmVscygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlTGFiZWxzXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0UGFnZUxheW91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRQYWdlTGF5b3V0XCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0UGFnZU1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0UGFnZU1vZGVcIiwgbnVsbCk7XG4gIH1cblxuICBnZXRWaWV3ZXJQcmVmZXJlbmNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRWaWV3ZXJQcmVmZXJlbmNlc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldE9wZW5BY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0T3BlbkFjdGlvblwiLCBudWxsKTtcbiAgfVxuXG4gIGdldEF0dGFjaG1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldEF0dGFjaG1lbnRzXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0SmF2YVNjcmlwdCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRKYXZhU2NyaXB0XCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0RG9jSlNBY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldERvY0pTQWN0aW9uc1wiLCBudWxsKTtcbiAgfVxuXG4gIGdldFBhZ2VKU0FjdGlvbnMocGFnZUluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0UGFnZUpTQWN0aW9uc1wiLCB7XG4gICAgICBwYWdlSW5kZXhcbiAgICB9KTtcbiAgfVxuXG4gIGdldFN0cnVjdFRyZWUocGFnZUluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0U3RydWN0VHJlZVwiLCB7XG4gICAgICBwYWdlSW5kZXhcbiAgICB9KTtcbiAgfVxuXG4gIGdldE91dGxpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKFwiR2V0T3V0bGluZVwiLCBudWxsKTtcbiAgfVxuXG4gIGdldE9wdGlvbmFsQ29udGVudENvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRPcHRpb25hbENvbnRlbnRDb25maWdcIiwgbnVsbCkudGhlbihyZXN1bHRzID0+IHtcbiAgICAgIHJldHVybiBuZXcgX29wdGlvbmFsX2NvbnRlbnRfY29uZmlnLk9wdGlvbmFsQ29udGVudENvbmZpZyhyZXN1bHRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFBlcm1pc3Npb25zKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldFBlcm1pc3Npb25zXCIsIG51bGwpO1xuICB9XG5cbiAgZ2V0TWV0YWRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21ldGFkYXRhUHJvbWlzZSB8fD0gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJHZXRNZXRhZGF0YVwiLCBudWxsKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5mbzogcmVzdWx0c1swXSxcbiAgICAgICAgbWV0YWRhdGE6IHJlc3VsdHNbMV0gPyBuZXcgX21ldGFkYXRhLk1ldGFkYXRhKHJlc3VsdHNbMV0pIDogbnVsbCxcbiAgICAgICAgY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU6IHRoaXMuX2Z1bGxSZWFkZXI/LmZpbGVuYW1lID8/IG51bGwsXG4gICAgICAgIGNvbnRlbnRMZW5ndGg6IHRoaXMuX2Z1bGxSZWFkZXI/LmNvbnRlbnRMZW5ndGggPz8gbnVsbFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldE1hcmtJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZShcIkdldE1hcmtJbmZvXCIsIG51bGwpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRDbGVhbnVwKGtlZXBMb2FkZWRGb250cyA9IGZhbHNlKSB7XG4gICAgYXdhaXQgdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoXCJDbGVhbnVwXCIsIG51bGwpO1xuXG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMuI3BhZ2VDYWNoZS52YWx1ZXMoKSkge1xuICAgICAgY29uc3QgY2xlYW51cFN1Y2Nlc3NmdWwgPSBwYWdlLmNsZWFudXAoKTtcblxuICAgICAgaWYgKCFjbGVhbnVwU3VjY2Vzc2Z1bCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHN0YXJ0Q2xlYW51cDogUGFnZSAke3BhZ2UucGFnZU51bWJlcn0gaXMgY3VycmVudGx5IHJlbmRlcmluZy5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbW1vbk9ianMuY2xlYXIoKTtcblxuICAgIGlmICgha2VlcExvYWRlZEZvbnRzKSB7XG4gICAgICB0aGlzLmZvbnRMb2FkZXIuY2xlYXIoKTtcbiAgICB9XG5cbiAgICB0aGlzLiNtZXRhZGF0YVByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX2dldEZpZWxkT2JqZWN0c1Byb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX2hhc0pTQWN0aW9uc1Byb21pc2UgPSBudWxsO1xuICB9XG5cbiAgZ2V0IGxvYWRpbmdQYXJhbXMoKSB7XG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5fcGFyYW1zO1xuICAgIHJldHVybiAoMCwgX3V0aWwuc2hhZG93KSh0aGlzLCBcImxvYWRpbmdQYXJhbXNcIiwge1xuICAgICAgZGlzYWJsZUF1dG9GZXRjaDogcGFyYW1zLmRpc2FibGVBdXRvRmV0Y2gsXG4gICAgICBlbmFibGVYZmE6IHBhcmFtcy5lbmFibGVYZmFcbiAgICB9KTtcbiAgfVxuXG59XG5cbmNsYXNzIFBERk9iamVjdHMge1xuICAjb2JqcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgI2Vuc3VyZU9iaihvYmpJZCkge1xuICAgIGNvbnN0IG9iaiA9IHRoaXMuI29ianNbb2JqSWRdO1xuXG4gICAgaWYgKG9iaikge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy4jb2Jqc1tvYmpJZF0gPSB7XG4gICAgICBjYXBhYmlsaXR5OiAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCksXG4gICAgICBkYXRhOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIGdldChvYmpJZCwgY2FsbGJhY2sgPSBudWxsKSB7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjb25zdCBvYmogPSB0aGlzLiNlbnN1cmVPYmoob2JqSWQpO1xuICAgICAgb2JqLmNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IGNhbGxiYWNrKG9iai5kYXRhKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBvYmogPSB0aGlzLiNvYmpzW29iaklkXTtcblxuICAgIGlmICghb2JqPy5jYXBhYmlsaXR5LnNldHRsZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWVzdGluZyBvYmplY3QgdGhhdCBpc24ndCByZXNvbHZlZCB5ZXQgJHtvYmpJZH0uYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iai5kYXRhO1xuICB9XG5cbiAgaGFzKG9iaklkKSB7XG4gICAgY29uc3Qgb2JqID0gdGhpcy4jb2Jqc1tvYmpJZF07XG4gICAgcmV0dXJuIG9iaj8uY2FwYWJpbGl0eS5zZXR0bGVkIHx8IGZhbHNlO1xuICB9XG5cbiAgcmVzb2x2ZShvYmpJZCwgZGF0YSA9IG51bGwpIHtcbiAgICBjb25zdCBvYmogPSB0aGlzLiNlbnN1cmVPYmoob2JqSWQpO1xuICAgIG9iai5kYXRhID0gZGF0YTtcbiAgICBvYmouY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLiNvYmpzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG59XG5cbmNsYXNzIFJlbmRlclRhc2sge1xuICBjb25zdHJ1Y3RvcihpbnRlcm5hbFJlbmRlclRhc2spIHtcbiAgICB0aGlzLl9pbnRlcm5hbFJlbmRlclRhc2sgPSBpbnRlcm5hbFJlbmRlclRhc2s7XG4gICAgdGhpcy5vbkNvbnRpbnVlID0gbnVsbDtcbiAgfVxuXG4gIGdldCBwcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFJlbmRlclRhc2suY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMuX2ludGVybmFsUmVuZGVyVGFzay5jYW5jZWwoKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuUmVuZGVyVGFzayA9IFJlbmRlclRhc2s7XG5cbmNsYXNzIEludGVybmFsUmVuZGVyVGFzayB7XG4gIHN0YXRpYyAjY2FudmFzSW5Vc2UgPSBuZXcgV2Vha1NldCgpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjYWxsYmFjayxcbiAgICBwYXJhbXMsXG4gICAgb2JqcyxcbiAgICBjb21tb25PYmpzLFxuICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgb3BlcmF0b3JMaXN0LFxuICAgIHBhZ2VJbmRleCxcbiAgICBjYW52YXNGYWN0b3J5LFxuICAgIHVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZhbHNlLFxuICAgIHBkZkJ1ZyA9IGZhbHNlLFxuICAgIHBhZ2VDb2xvcnMgPSBudWxsXG4gIH0pIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5vYmpzID0gb2JqcztcbiAgICB0aGlzLmNvbW1vbk9ianMgPSBjb21tb25PYmpzO1xuICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCA9IGFubm90YXRpb25DYW52YXNNYXA7XG4gICAgdGhpcy5vcGVyYXRvckxpc3RJZHggPSBudWxsO1xuICAgIHRoaXMub3BlcmF0b3JMaXN0ID0gb3BlcmF0b3JMaXN0O1xuICAgIHRoaXMuX3BhZ2VJbmRleCA9IHBhZ2VJbmRleDtcbiAgICB0aGlzLmNhbnZhc0ZhY3RvcnkgPSBjYW52YXNGYWN0b3J5O1xuICAgIHRoaXMuX3BkZkJ1ZyA9IHBkZkJ1ZztcbiAgICB0aGlzLnBhZ2VDb2xvcnMgPSBwYWdlQ29sb3JzO1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrID0gbnVsbDtcbiAgICB0aGlzLmdyYXBoaWNzUmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLl91c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09IHRydWUgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICB0aGlzLmNhbmNlbGxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICB0aGlzLnRhc2sgPSBuZXcgUmVuZGVyVGFzayh0aGlzKTtcbiAgICB0aGlzLl9jYW5jZWxCb3VuZCA9IHRoaXMuY2FuY2VsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY29udGludWVCb3VuZCA9IHRoaXMuX2NvbnRpbnVlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fc2NoZWR1bGVOZXh0Qm91bmQgPSB0aGlzLl9zY2hlZHVsZU5leHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9uZXh0Qm91bmQgPSB0aGlzLl9uZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2FudmFzID0gcGFyYW1zLmNhbnZhc0NvbnRleHQuY2FudmFzO1xuICB9XG5cbiAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYXBhYmlsaXR5LnByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkge30pO1xuICB9XG5cbiAgaW5pdGlhbGl6ZUdyYXBoaWNzKHtcbiAgICB0cmFuc3BhcmVuY3kgPSBmYWxzZSxcbiAgICBvcHRpb25hbENvbnRlbnRDb25maWdcbiAgfSkge1xuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jYW52YXMpIHtcbiAgICAgIGlmIChJbnRlcm5hbFJlbmRlclRhc2suI2NhbnZhc0luVXNlLmhhcyh0aGlzLl9jYW52YXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgdGhlIHNhbWUgY2FudmFzIGR1cmluZyBtdWx0aXBsZSByZW5kZXIoKSBvcGVyYXRpb25zLiBcIiArIFwiVXNlIGRpZmZlcmVudCBjYW52YXMgb3IgZW5zdXJlIHByZXZpb3VzIG9wZXJhdGlvbnMgd2VyZSBcIiArIFwiY2FuY2VsbGVkIG9yIGNvbXBsZXRlZC5cIik7XG4gICAgICB9XG5cbiAgICAgIEludGVybmFsUmVuZGVyVGFzay4jY2FudmFzSW5Vc2UuYWRkKHRoaXMuX2NhbnZhcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BkZkJ1ZyAmJiBnbG9iYWxUaGlzLlN0ZXBwZXJNYW5hZ2VyPy5lbmFibGVkKSB7XG4gICAgICB0aGlzLnN0ZXBwZXIgPSBnbG9iYWxUaGlzLlN0ZXBwZXJNYW5hZ2VyLmNyZWF0ZSh0aGlzLl9wYWdlSW5kZXgpO1xuICAgICAgdGhpcy5zdGVwcGVyLmluaXQodGhpcy5vcGVyYXRvckxpc3QpO1xuICAgICAgdGhpcy5zdGVwcGVyLm5leHRCcmVha1BvaW50ID0gdGhpcy5zdGVwcGVyLmdldE5leHRCcmVha1BvaW50KCk7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgY2FudmFzQ29udGV4dCxcbiAgICAgIHZpZXdwb3J0LFxuICAgICAgdHJhbnNmb3JtLFxuICAgICAgaW1hZ2VMYXllcixcbiAgICAgIGJhY2tncm91bmRcbiAgICB9ID0gdGhpcy5wYXJhbXM7XG4gICAgdGhpcy5nZnggPSBuZXcgX2NhbnZhcy5DYW52YXNHcmFwaGljcyhjYW52YXNDb250ZXh0LCB0aGlzLmNvbW1vbk9ianMsIHRoaXMub2JqcywgdGhpcy5jYW52YXNGYWN0b3J5LCBpbWFnZUxheWVyLCBvcHRpb25hbENvbnRlbnRDb25maWcsIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCwgdGhpcy5wYWdlQ29sb3JzKTtcbiAgICB0aGlzLmdmeC5iZWdpbkRyYXdpbmcoe1xuICAgICAgdHJhbnNmb3JtLFxuICAgICAgdmlld3BvcnQsXG4gICAgICB0cmFuc3BhcmVuY3ksXG4gICAgICBiYWNrZ3JvdW5kXG4gICAgfSk7XG4gICAgdGhpcy5vcGVyYXRvckxpc3RJZHggPSAwO1xuICAgIHRoaXMuZ3JhcGhpY3NSZWFkeSA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5ncmFwaGljc1JlYWR5Q2FsbGJhY2spIHtcbiAgICAgIHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgY2FuY2VsKGVycm9yID0gbnVsbCkge1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsbGVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmdmeCkge1xuICAgICAgdGhpcy5nZnguZW5kRHJhd2luZygpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jYW52YXMpIHtcbiAgICAgIEludGVybmFsUmVuZGVyVGFzay4jY2FudmFzSW5Vc2UuZGVsZXRlKHRoaXMuX2NhbnZhcyk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWxsYmFjayhlcnJvciB8fCBuZXcgX2Rpc3BsYXlfdXRpbHMuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uKGBSZW5kZXJpbmcgY2FuY2VsbGVkLCBwYWdlICR7dGhpcy5fcGFnZUluZGV4ICsgMX1gLCBcImNhbnZhc1wiKSk7XG4gIH1cblxuICBvcGVyYXRvckxpc3RDaGFuZ2VkKCkge1xuICAgIGlmICghdGhpcy5ncmFwaGljc1JlYWR5KSB7XG4gICAgICBpZiAoIXRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZ3JhcGhpY3NSZWFkeUNhbGxiYWNrID0gdGhpcy5fY29udGludWVCb3VuZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0ZXBwZXIpIHtcbiAgICAgIHRoaXMuc3RlcHBlci51cGRhdGVPcGVyYXRvckxpc3QodGhpcy5vcGVyYXRvckxpc3QpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jb250aW51ZSgpO1xuICB9XG5cbiAgX2NvbnRpbnVlKCkge1xuICAgIHRoaXMucnVubmluZyA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50YXNrLm9uQ29udGludWUpIHtcbiAgICAgIHRoaXMudGFzay5vbkNvbnRpbnVlKHRoaXMuX3NjaGVkdWxlTmV4dEJvdW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2NoZWR1bGVOZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgX3NjaGVkdWxlTmV4dCgpIHtcbiAgICBpZiAodGhpcy5fdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fbmV4dEJvdW5kKCkuY2F0Y2godGhpcy5fY2FuY2VsQm91bmQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4odGhpcy5fbmV4dEJvdW5kKS5jYXRjaCh0aGlzLl9jYW5jZWxCb3VuZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX25leHQoKSB7XG4gICAgaWYgKHRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vcGVyYXRvckxpc3RJZHggPSB0aGlzLmdmeC5leGVjdXRlT3BlcmF0b3JMaXN0KHRoaXMub3BlcmF0b3JMaXN0LCB0aGlzLm9wZXJhdG9yTGlzdElkeCwgdGhpcy5fY29udGludWVCb3VuZCwgdGhpcy5zdGVwcGVyKTtcblxuICAgIGlmICh0aGlzLm9wZXJhdG9yTGlzdElkeCA9PT0gdGhpcy5vcGVyYXRvckxpc3QuYXJnc0FycmF5Lmxlbmd0aCkge1xuICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmspIHtcbiAgICAgICAgdGhpcy5nZnguZW5kRHJhd2luZygpO1xuXG4gICAgICAgIGlmICh0aGlzLl9jYW52YXMpIHtcbiAgICAgICAgICBJbnRlcm5hbFJlbmRlclRhc2suI2NhbnZhc0luVXNlLmRlbGV0ZSh0aGlzLl9jYW52YXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbmNvbnN0IHZlcnNpb24gPSAnMi4xNC4zMDUnO1xuZXhwb3J0cy52ZXJzaW9uID0gdmVyc2lvbjtcbmNvbnN0IGJ1aWxkID0gJ2VhYWE4YjRhZCc7XG5leHBvcnRzLmJ1aWxkID0gYnVpbGQ7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5TdGF0VGltZXIgPSBleHBvcnRzLlJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbiA9IGV4cG9ydHMuUGl4ZWxzUGVySW5jaCA9IGV4cG9ydHMuUGFnZVZpZXdwb3J0ID0gZXhwb3J0cy5QREZEYXRlU3RyaW5nID0gZXhwb3J0cy5ET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSA9IGV4cG9ydHMuRE9NU1ZHRmFjdG9yeSA9IGV4cG9ydHMuRE9NQ2FudmFzRmFjdG9yeSA9IGV4cG9ydHMuRE9NQ01hcFJlYWRlckZhY3RvcnkgPSB2b2lkIDA7XG5leHBvcnRzLmRlcHJlY2F0ZWQgPSBkZXByZWNhdGVkO1xuZXhwb3J0cy5nZXRGaWxlbmFtZUZyb21VcmwgPSBnZXRGaWxlbmFtZUZyb21Vcmw7XG5leHBvcnRzLmdldFBkZkZpbGVuYW1lRnJvbVVybCA9IGdldFBkZkZpbGVuYW1lRnJvbVVybDtcbmV4cG9ydHMuZ2V0WGZhUGFnZVZpZXdwb3J0ID0gZ2V0WGZhUGFnZVZpZXdwb3J0O1xuZXhwb3J0cy5pc0RhdGFTY2hlbWUgPSBpc0RhdGFTY2hlbWU7XG5leHBvcnRzLmlzUGRmRmlsZSA9IGlzUGRmRmlsZTtcbmV4cG9ydHMuaXNWYWxpZEZldGNoVXJsID0gaXNWYWxpZEZldGNoVXJsO1xuZXhwb3J0cy5sb2FkU2NyaXB0ID0gbG9hZFNjcmlwdDtcblxudmFyIF9iYXNlX2ZhY3RvcnkgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG5jb25zdCBTVkdfTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG5cbmNsYXNzIFBpeGVsc1BlckluY2gge1xuICBzdGF0aWMgQ1NTID0gOTYuMDtcbiAgc3RhdGljIFBERiA9IDcyLjA7XG4gIHN0YXRpYyBQREZfVE9fQ1NTX1VOSVRTID0gdGhpcy5DU1MgLyB0aGlzLlBERjtcbn1cblxuZXhwb3J0cy5QaXhlbHNQZXJJbmNoID0gUGl4ZWxzUGVySW5jaDtcblxuY2xhc3MgRE9NQ2FudmFzRmFjdG9yeSBleHRlbmRzIF9iYXNlX2ZhY3RvcnkuQmFzZUNhbnZhc0ZhY3Rvcnkge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgb3duZXJEb2N1bWVudCA9IGdsb2JhbFRoaXMuZG9jdW1lbnRcbiAgfSA9IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9kb2N1bWVudCA9IG93bmVyRG9jdW1lbnQ7XG4gIH1cblxuICBfY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICByZXR1cm4gY2FudmFzO1xuICB9XG5cbn1cblxuZXhwb3J0cy5ET01DYW52YXNGYWN0b3J5ID0gRE9NQ2FudmFzRmFjdG9yeTtcblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKHVybCwgYXNUeXBlZEFycmF5ID0gZmFsc2UpIHtcbiAgaWYgKGlzVmFsaWRGZXRjaFVybCh1cmwsIGRvY3VtZW50LmJhc2VVUkkpKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBhc1R5cGVkQXJyYXkgPyBuZXcgVWludDhBcnJheShhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpKSA6ICgwLCBfdXRpbC5zdHJpbmdUb0J5dGVzKShhd2FpdCByZXNwb25zZS50ZXh0KCkpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XG5cbiAgICBpZiAoYXNUeXBlZEFycmF5KSB7XG4gICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICB9XG5cbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCB8fCByZXF1ZXN0LnN0YXR1cyA9PT0gMCkge1xuICAgICAgICBsZXQgZGF0YTtcblxuICAgICAgICBpZiAoYXNUeXBlZEFycmF5ICYmIHJlcXVlc3QucmVzcG9uc2UpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFVpbnQ4QXJyYXkocmVxdWVzdC5yZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWFzVHlwZWRBcnJheSAmJiByZXF1ZXN0LnJlc3BvbnNlVGV4dCkge1xuICAgICAgICAgIGRhdGEgPSAoMCwgX3V0aWwuc3RyaW5nVG9CeXRlcykocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZWplY3QobmV3IEVycm9yKHJlcXVlc3Quc3RhdHVzVGV4dCkpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0LnNlbmQobnVsbCk7XG4gIH0pO1xufVxuXG5jbGFzcyBET01DTWFwUmVhZGVyRmFjdG9yeSBleHRlbmRzIF9iYXNlX2ZhY3RvcnkuQmFzZUNNYXBSZWFkZXJGYWN0b3J5IHtcbiAgX2ZldGNoRGF0YSh1cmwsIGNvbXByZXNzaW9uVHlwZSkge1xuICAgIHJldHVybiBmZXRjaERhdGEodXJsLCB0aGlzLmlzQ29tcHJlc3NlZCkudGhlbihkYXRhID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNNYXBEYXRhOiBkYXRhLFxuICAgICAgICBjb21wcmVzc2lvblR5cGVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxufVxuXG5leHBvcnRzLkRPTUNNYXBSZWFkZXJGYWN0b3J5ID0gRE9NQ01hcFJlYWRlckZhY3Rvcnk7XG5cbmNsYXNzIERPTVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IGV4dGVuZHMgX2Jhc2VfZmFjdG9yeS5CYXNlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnkge1xuICBfZmV0Y2hEYXRhKHVybCkge1xuICAgIHJldHVybiBmZXRjaERhdGEodXJsLCB0cnVlKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuRE9NU3RhbmRhcmRGb250RGF0YUZhY3RvcnkgPSBET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeTtcblxuY2xhc3MgRE9NU1ZHRmFjdG9yeSBleHRlbmRzIF9iYXNlX2ZhY3RvcnkuQmFzZVNWR0ZhY3Rvcnkge1xuICBfY3JlYXRlU1ZHKHR5cGUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgdHlwZSk7XG4gIH1cblxufVxuXG5leHBvcnRzLkRPTVNWR0ZhY3RvcnkgPSBET01TVkdGYWN0b3J5O1xuXG5jbGFzcyBQYWdlVmlld3BvcnQge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgdmlld0JveCxcbiAgICBzY2FsZSxcbiAgICByb3RhdGlvbixcbiAgICBvZmZzZXRYID0gMCxcbiAgICBvZmZzZXRZID0gMCxcbiAgICBkb250RmxpcCA9IGZhbHNlXG4gIH0pIHtcbiAgICB0aGlzLnZpZXdCb3ggPSB2aWV3Qm94O1xuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5vZmZzZXRYID0gb2Zmc2V0WDtcbiAgICB0aGlzLm9mZnNldFkgPSBvZmZzZXRZO1xuICAgIGNvbnN0IGNlbnRlclggPSAodmlld0JveFsyXSArIHZpZXdCb3hbMF0pIC8gMjtcbiAgICBjb25zdCBjZW50ZXJZID0gKHZpZXdCb3hbM10gKyB2aWV3Qm94WzFdKSAvIDI7XG4gICAgbGV0IHJvdGF0ZUEsIHJvdGF0ZUIsIHJvdGF0ZUMsIHJvdGF0ZUQ7XG4gICAgcm90YXRpb24gJT0gMzYwO1xuXG4gICAgaWYgKHJvdGF0aW9uIDwgMCkge1xuICAgICAgcm90YXRpb24gKz0gMzYwO1xuICAgIH1cblxuICAgIHN3aXRjaCAocm90YXRpb24pIHtcbiAgICAgIGNhc2UgMTgwOlxuICAgICAgICByb3RhdGVBID0gLTE7XG4gICAgICAgIHJvdGF0ZUIgPSAwO1xuICAgICAgICByb3RhdGVDID0gMDtcbiAgICAgICAgcm90YXRlRCA9IDE7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDkwOlxuICAgICAgICByb3RhdGVBID0gMDtcbiAgICAgICAgcm90YXRlQiA9IDE7XG4gICAgICAgIHJvdGF0ZUMgPSAxO1xuICAgICAgICByb3RhdGVEID0gMDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMjcwOlxuICAgICAgICByb3RhdGVBID0gMDtcbiAgICAgICAgcm90YXRlQiA9IC0xO1xuICAgICAgICByb3RhdGVDID0gLTE7XG4gICAgICAgIHJvdGF0ZUQgPSAwO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAwOlxuICAgICAgICByb3RhdGVBID0gMTtcbiAgICAgICAgcm90YXRlQiA9IDA7XG4gICAgICAgIHJvdGF0ZUMgPSAwO1xuICAgICAgICByb3RhdGVEID0gLTE7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYWdlVmlld3BvcnQ6IEludmFsaWQgcm90YXRpb24sIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA5MCBkZWdyZWVzLlwiKTtcbiAgICB9XG5cbiAgICBpZiAoZG9udEZsaXApIHtcbiAgICAgIHJvdGF0ZUMgPSAtcm90YXRlQztcbiAgICAgIHJvdGF0ZUQgPSAtcm90YXRlRDtcbiAgICB9XG5cbiAgICBsZXQgb2Zmc2V0Q2FudmFzWCwgb2Zmc2V0Q2FudmFzWTtcbiAgICBsZXQgd2lkdGgsIGhlaWdodDtcblxuICAgIGlmIChyb3RhdGVBID09PSAwKSB7XG4gICAgICBvZmZzZXRDYW52YXNYID0gTWF0aC5hYnMoY2VudGVyWSAtIHZpZXdCb3hbMV0pICogc2NhbGUgKyBvZmZzZXRYO1xuICAgICAgb2Zmc2V0Q2FudmFzWSA9IE1hdGguYWJzKGNlbnRlclggLSB2aWV3Qm94WzBdKSAqIHNjYWxlICsgb2Zmc2V0WTtcbiAgICAgIHdpZHRoID0gTWF0aC5hYnModmlld0JveFszXSAtIHZpZXdCb3hbMV0pICogc2NhbGU7XG4gICAgICBoZWlnaHQgPSBNYXRoLmFicyh2aWV3Qm94WzJdIC0gdmlld0JveFswXSkgKiBzY2FsZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0Q2FudmFzWCA9IE1hdGguYWJzKGNlbnRlclggLSB2aWV3Qm94WzBdKSAqIHNjYWxlICsgb2Zmc2V0WDtcbiAgICAgIG9mZnNldENhbnZhc1kgPSBNYXRoLmFicyhjZW50ZXJZIC0gdmlld0JveFsxXSkgKiBzY2FsZSArIG9mZnNldFk7XG4gICAgICB3aWR0aCA9IE1hdGguYWJzKHZpZXdCb3hbMl0gLSB2aWV3Qm94WzBdKSAqIHNjYWxlO1xuICAgICAgaGVpZ2h0ID0gTWF0aC5hYnModmlld0JveFszXSAtIHZpZXdCb3hbMV0pICogc2NhbGU7XG4gICAgfVxuXG4gICAgdGhpcy50cmFuc2Zvcm0gPSBbcm90YXRlQSAqIHNjYWxlLCByb3RhdGVCICogc2NhbGUsIHJvdGF0ZUMgKiBzY2FsZSwgcm90YXRlRCAqIHNjYWxlLCBvZmZzZXRDYW52YXNYIC0gcm90YXRlQSAqIHNjYWxlICogY2VudGVyWCAtIHJvdGF0ZUMgKiBzY2FsZSAqIGNlbnRlclksIG9mZnNldENhbnZhc1kgLSByb3RhdGVCICogc2NhbGUgKiBjZW50ZXJYIC0gcm90YXRlRCAqIHNjYWxlICogY2VudGVyWV07XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgY2xvbmUoe1xuICAgIHNjYWxlID0gdGhpcy5zY2FsZSxcbiAgICByb3RhdGlvbiA9IHRoaXMucm90YXRpb24sXG4gICAgb2Zmc2V0WCA9IHRoaXMub2Zmc2V0WCxcbiAgICBvZmZzZXRZID0gdGhpcy5vZmZzZXRZLFxuICAgIGRvbnRGbGlwID0gZmFsc2VcbiAgfSA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQYWdlVmlld3BvcnQoe1xuICAgICAgdmlld0JveDogdGhpcy52aWV3Qm94LnNsaWNlKCksXG4gICAgICBzY2FsZSxcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgb2Zmc2V0WCxcbiAgICAgIG9mZnNldFksXG4gICAgICBkb250RmxpcFxuICAgIH0pO1xuICB9XG5cbiAgY29udmVydFRvVmlld3BvcnRQb2ludCh4LCB5KSB7XG4gICAgcmV0dXJuIF91dGlsLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW3gsIHldLCB0aGlzLnRyYW5zZm9ybSk7XG4gIH1cblxuICBjb252ZXJ0VG9WaWV3cG9ydFJlY3RhbmdsZShyZWN0KSB7XG4gICAgY29uc3QgdG9wTGVmdCA9IF91dGlsLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW3JlY3RbMF0sIHJlY3RbMV1dLCB0aGlzLnRyYW5zZm9ybSk7XG5cbiAgICBjb25zdCBib3R0b21SaWdodCA9IF91dGlsLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW3JlY3RbMl0sIHJlY3RbM11dLCB0aGlzLnRyYW5zZm9ybSk7XG5cbiAgICByZXR1cm4gW3RvcExlZnRbMF0sIHRvcExlZnRbMV0sIGJvdHRvbVJpZ2h0WzBdLCBib3R0b21SaWdodFsxXV07XG4gIH1cblxuICBjb252ZXJ0VG9QZGZQb2ludCh4LCB5KSB7XG4gICAgcmV0dXJuIF91dGlsLlV0aWwuYXBwbHlJbnZlcnNlVHJhbnNmb3JtKFt4LCB5XSwgdGhpcy50cmFuc2Zvcm0pO1xuICB9XG5cbn1cblxuZXhwb3J0cy5QYWdlVmlld3BvcnQgPSBQYWdlVmlld3BvcnQ7XG5cbmNsYXNzIFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbiBleHRlbmRzIF91dGlsLkJhc2VFeGNlcHRpb24ge1xuICBjb25zdHJ1Y3Rvcihtc2csIHR5cGUpIHtcbiAgICBzdXBlcihtc2csIFwiUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uXCIpO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cblxufVxuXG5leHBvcnRzLlJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbiA9IFJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbjtcblxuZnVuY3Rpb24gaXNEYXRhU2NoZW1lKHVybCkge1xuICBjb25zdCBpaSA9IHVybC5sZW5ndGg7XG4gIGxldCBpID0gMDtcblxuICB3aGlsZSAoaSA8IGlpICYmIHVybFtpXS50cmltKCkgPT09IFwiXCIpIHtcbiAgICBpKys7XG4gIH1cblxuICByZXR1cm4gdXJsLnN1YnN0cmluZyhpLCBpICsgNSkudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRhOlwiO1xufVxuXG5mdW5jdGlvbiBpc1BkZkZpbGUoZmlsZW5hbWUpIHtcbiAgcmV0dXJuIHR5cGVvZiBmaWxlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJiAvXFwucGRmJC9pLnRlc3QoZmlsZW5hbWUpO1xufVxuXG5mdW5jdGlvbiBnZXRGaWxlbmFtZUZyb21VcmwodXJsKSB7XG4gIGNvbnN0IGFuY2hvciA9IHVybC5pbmRleE9mKFwiI1wiKTtcbiAgY29uc3QgcXVlcnkgPSB1cmwuaW5kZXhPZihcIj9cIik7XG4gIGNvbnN0IGVuZCA9IE1hdGgubWluKGFuY2hvciA+IDAgPyBhbmNob3IgOiB1cmwubGVuZ3RoLCBxdWVyeSA+IDAgPyBxdWVyeSA6IHVybC5sZW5ndGgpO1xuICByZXR1cm4gdXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoXCIvXCIsIGVuZCkgKyAxLCBlbmQpO1xufVxuXG5mdW5jdGlvbiBnZXRQZGZGaWxlbmFtZUZyb21VcmwodXJsLCBkZWZhdWx0RmlsZW5hbWUgPSBcImRvY3VtZW50LnBkZlwiKSB7XG4gIGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRGaWxlbmFtZTtcbiAgfVxuXG4gIGlmIChpc0RhdGFTY2hlbWUodXJsKSkge1xuICAgICgwLCBfdXRpbC53YXJuKSgnZ2V0UGRmRmlsZW5hbWVGcm9tVXJsOiBpZ25vcmUgXCJkYXRhOlwiLVVSTCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4nKTtcbiAgICByZXR1cm4gZGVmYXVsdEZpbGVuYW1lO1xuICB9XG5cbiAgY29uc3QgcmVVUkkgPSAvXig/Oig/OlteOl0rOik/XFwvXFwvW14vXSspPyhbXj8jXSopKFxcP1teI10qKT8oIy4qKT8kLztcbiAgY29uc3QgcmVGaWxlbmFtZSA9IC9bXi8/Iz1dK1xcLnBkZlxcYig/IS4qXFwucGRmXFxiKS9pO1xuICBjb25zdCBzcGxpdFVSSSA9IHJlVVJJLmV4ZWModXJsKTtcbiAgbGV0IHN1Z2dlc3RlZEZpbGVuYW1lID0gcmVGaWxlbmFtZS5leGVjKHNwbGl0VVJJWzFdKSB8fCByZUZpbGVuYW1lLmV4ZWMoc3BsaXRVUklbMl0pIHx8IHJlRmlsZW5hbWUuZXhlYyhzcGxpdFVSSVszXSk7XG5cbiAgaWYgKHN1Z2dlc3RlZEZpbGVuYW1lKSB7XG4gICAgc3VnZ2VzdGVkRmlsZW5hbWUgPSBzdWdnZXN0ZWRGaWxlbmFtZVswXTtcblxuICAgIGlmIChzdWdnZXN0ZWRGaWxlbmFtZS5pbmNsdWRlcyhcIiVcIikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN1Z2dlc3RlZEZpbGVuYW1lID0gcmVGaWxlbmFtZS5leGVjKGRlY29kZVVSSUNvbXBvbmVudChzdWdnZXN0ZWRGaWxlbmFtZSkpWzBdO1xuICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN1Z2dlc3RlZEZpbGVuYW1lIHx8IGRlZmF1bHRGaWxlbmFtZTtcbn1cblxuY2xhc3MgU3RhdFRpbWVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdGFydGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLnRpbWVzID0gW107XG4gIH1cblxuICB0aW1lKG5hbWUpIHtcbiAgICBpZiAobmFtZSBpbiB0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICgwLCBfdXRpbC53YXJuKShgVGltZXIgaXMgYWxyZWFkeSBydW5uaW5nIGZvciAke25hbWV9YCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdGFydGVkW25hbWVdID0gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIHRpbWVFbmQobmFtZSkge1xuICAgIGlmICghKG5hbWUgaW4gdGhpcy5zdGFydGVkKSkge1xuICAgICAgKDAsIF91dGlsLndhcm4pKGBUaW1lciBoYXMgbm90IGJlZW4gc3RhcnRlZCBmb3IgJHtuYW1lfWApO1xuICAgIH1cblxuICAgIHRoaXMudGltZXMucHVzaCh7XG4gICAgICBuYW1lLFxuICAgICAgc3RhcnQ6IHRoaXMuc3RhcnRlZFtuYW1lXSxcbiAgICAgIGVuZDogRGF0ZS5ub3coKVxuICAgIH0pO1xuICAgIGRlbGV0ZSB0aGlzLnN0YXJ0ZWRbbmFtZV07XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICBjb25zdCBvdXRCdWYgPSBbXTtcbiAgICBsZXQgbG9uZ2VzdCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IHRpbWUgb2YgdGhpcy50aW1lcykge1xuICAgICAgY29uc3QgbmFtZSA9IHRpbWUubmFtZTtcblxuICAgICAgaWYgKG5hbWUubGVuZ3RoID4gbG9uZ2VzdCkge1xuICAgICAgICBsb25nZXN0ID0gbmFtZS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB0aW1lIG9mIHRoaXMudGltZXMpIHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGltZS5lbmQgLSB0aW1lLnN0YXJ0O1xuICAgICAgb3V0QnVmLnB1c2goYCR7dGltZS5uYW1lLnBhZEVuZChsb25nZXN0KX0gJHtkdXJhdGlvbn1tc1xcbmApO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRCdWYuam9pbihcIlwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuU3RhdFRpbWVyID0gU3RhdFRpbWVyO1xuXG5mdW5jdGlvbiBpc1ZhbGlkRmV0Y2hVcmwodXJsLCBiYXNlVXJsKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qge1xuICAgICAgcHJvdG9jb2xcbiAgICB9ID0gYmFzZVVybCA/IG5ldyBVUkwodXJsLCBiYXNlVXJsKSA6IG5ldyBVUkwodXJsKTtcbiAgICByZXR1cm4gcHJvdG9jb2wgPT09IFwiaHR0cDpcIiB8fCBwcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gbG9hZFNjcmlwdChzcmMsIHJlbW92ZVNjcmlwdEVsZW1lbnQgPSBmYWxzZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgc2NyaXB0LnNyYyA9IHNyYztcblxuICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBpZiAocmVtb3ZlU2NyaXB0RWxlbWVudCkge1xuICAgICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUoZXZ0KTtcbiAgICB9O1xuXG4gICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGBDYW5ub3QgbG9hZCBzY3JpcHQgYXQ6ICR7c2NyaXB0LnNyY31gKSk7XG4gICAgfTtcblxuICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRlcHJlY2F0ZWQoZGV0YWlscykge1xuICBjb25zb2xlLmxvZyhcIkRlcHJlY2F0ZWQgQVBJIHVzYWdlOiBcIiArIGRldGFpbHMpO1xufVxuXG5sZXQgcGRmRGF0ZVN0cmluZ1JlZ2V4O1xuXG5jbGFzcyBQREZEYXRlU3RyaW5nIHtcbiAgc3RhdGljIHRvRGF0ZU9iamVjdChpbnB1dCkge1xuICAgIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXBkZkRhdGVTdHJpbmdSZWdleCkge1xuICAgICAgcGRmRGF0ZVN0cmluZ1JlZ2V4ID0gbmV3IFJlZ0V4cChcIl5EOlwiICsgXCIoXFxcXGR7NH0pXCIgKyBcIihcXFxcZHsyfSk/XCIgKyBcIihcXFxcZHsyfSk/XCIgKyBcIihcXFxcZHsyfSk/XCIgKyBcIihcXFxcZHsyfSk/XCIgKyBcIihcXFxcZHsyfSk/XCIgKyBcIihbWnwrfC1dKT9cIiArIFwiKFxcXFxkezJ9KT9cIiArIFwiJz9cIiArIFwiKFxcXFxkezJ9KT9cIiArIFwiJz9cIik7XG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2hlcyA9IHBkZkRhdGVTdHJpbmdSZWdleC5leGVjKGlucHV0KTtcblxuICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgeWVhciA9IHBhcnNlSW50KG1hdGNoZXNbMV0sIDEwKTtcbiAgICBsZXQgbW9udGggPSBwYXJzZUludChtYXRjaGVzWzJdLCAxMCk7XG4gICAgbW9udGggPSBtb250aCA+PSAxICYmIG1vbnRoIDw9IDEyID8gbW9udGggLSAxIDogMDtcbiAgICBsZXQgZGF5ID0gcGFyc2VJbnQobWF0Y2hlc1szXSwgMTApO1xuICAgIGRheSA9IGRheSA+PSAxICYmIGRheSA8PSAzMSA/IGRheSA6IDE7XG4gICAgbGV0IGhvdXIgPSBwYXJzZUludChtYXRjaGVzWzRdLCAxMCk7XG4gICAgaG91ciA9IGhvdXIgPj0gMCAmJiBob3VyIDw9IDIzID8gaG91ciA6IDA7XG4gICAgbGV0IG1pbnV0ZSA9IHBhcnNlSW50KG1hdGNoZXNbNV0sIDEwKTtcbiAgICBtaW51dGUgPSBtaW51dGUgPj0gMCAmJiBtaW51dGUgPD0gNTkgPyBtaW51dGUgOiAwO1xuICAgIGxldCBzZWNvbmQgPSBwYXJzZUludChtYXRjaGVzWzZdLCAxMCk7XG4gICAgc2Vjb25kID0gc2Vjb25kID49IDAgJiYgc2Vjb25kIDw9IDU5ID8gc2Vjb25kIDogMDtcbiAgICBjb25zdCB1bml2ZXJzYWxUaW1lUmVsYXRpb24gPSBtYXRjaGVzWzddIHx8IFwiWlwiO1xuICAgIGxldCBvZmZzZXRIb3VyID0gcGFyc2VJbnQobWF0Y2hlc1s4XSwgMTApO1xuICAgIG9mZnNldEhvdXIgPSBvZmZzZXRIb3VyID49IDAgJiYgb2Zmc2V0SG91ciA8PSAyMyA/IG9mZnNldEhvdXIgOiAwO1xuICAgIGxldCBvZmZzZXRNaW51dGUgPSBwYXJzZUludChtYXRjaGVzWzldLCAxMCkgfHwgMDtcbiAgICBvZmZzZXRNaW51dGUgPSBvZmZzZXRNaW51dGUgPj0gMCAmJiBvZmZzZXRNaW51dGUgPD0gNTkgPyBvZmZzZXRNaW51dGUgOiAwO1xuXG4gICAgaWYgKHVuaXZlcnNhbFRpbWVSZWxhdGlvbiA9PT0gXCItXCIpIHtcbiAgICAgIGhvdXIgKz0gb2Zmc2V0SG91cjtcbiAgICAgIG1pbnV0ZSArPSBvZmZzZXRNaW51dGU7XG4gICAgfSBlbHNlIGlmICh1bml2ZXJzYWxUaW1lUmVsYXRpb24gPT09IFwiK1wiKSB7XG4gICAgICBob3VyIC09IG9mZnNldEhvdXI7XG4gICAgICBtaW51dGUgLT0gb2Zmc2V0TWludXRlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCkpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5QREZEYXRlU3RyaW5nID0gUERGRGF0ZVN0cmluZztcblxuZnVuY3Rpb24gZ2V0WGZhUGFnZVZpZXdwb3J0KHhmYVBhZ2UsIHtcbiAgc2NhbGUgPSAxLFxuICByb3RhdGlvbiA9IDBcbn0pIHtcbiAgY29uc3Qge1xuICAgIHdpZHRoLFxuICAgIGhlaWdodFxuICB9ID0geGZhUGFnZS5hdHRyaWJ1dGVzLnN0eWxlO1xuICBjb25zdCB2aWV3Qm94ID0gWzAsIDAsIHBhcnNlSW50KHdpZHRoKSwgcGFyc2VJbnQoaGVpZ2h0KV07XG4gIHJldHVybiBuZXcgUGFnZVZpZXdwb3J0KHtcbiAgICB2aWV3Qm94LFxuICAgIHNjYWxlLFxuICAgIHJvdGF0aW9uXG4gIH0pO1xufVxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gZXhwb3J0cy5CYXNlU1ZHRmFjdG9yeSA9IGV4cG9ydHMuQmFzZUNhbnZhc0ZhY3RvcnkgPSBleHBvcnRzLkJhc2VDTWFwUmVhZGVyRmFjdG9yeSA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxuY2xhc3MgQmFzZUNhbnZhc0ZhY3Rvcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZUNhbnZhc0ZhY3RvcnkpIHtcbiAgICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlQ2FudmFzRmFjdG9yeS5cIik7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBpZiAod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjYW52YXMgc2l6ZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9jcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY2FudmFzLFxuICAgICAgY29udGV4dDogY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxuICAgIH07XG4gIH1cblxuICByZXNldChjYW52YXNBbmRDb250ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgaWYgKCFjYW52YXNBbmRDb250ZXh0LmNhbnZhcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FudmFzIGlzIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2FudmFzIHNpemVcIik7XG4gICAgfVxuXG4gICAgY2FudmFzQW5kQ29udGV4dC5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBkZXN0cm95KGNhbnZhc0FuZENvbnRleHQpIHtcbiAgICBpZiAoIWNhbnZhc0FuZENvbnRleHQuY2FudmFzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW52YXMgaXMgbm90IHNwZWNpZmllZFwiKTtcbiAgICB9XG5cbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcy53aWR0aCA9IDA7XG4gICAgY2FudmFzQW5kQ29udGV4dC5jYW52YXMuaGVpZ2h0ID0gMDtcbiAgICBjYW52YXNBbmRDb250ZXh0LmNhbnZhcyA9IG51bGw7XG4gICAgY2FudmFzQW5kQ29udGV4dC5jb250ZXh0ID0gbnVsbDtcbiAgfVxuXG4gIF9jcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJBYnN0cmFjdCBtZXRob2QgYF9jcmVhdGVDYW52YXNgIGNhbGxlZC5cIik7XG4gIH1cblxufVxuXG5leHBvcnRzLkJhc2VDYW52YXNGYWN0b3J5ID0gQmFzZUNhbnZhc0ZhY3Rvcnk7XG5cbmNsYXNzIEJhc2VDTWFwUmVhZGVyRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYXNlVXJsID0gbnVsbCxcbiAgICBpc0NvbXByZXNzZWQgPSBmYWxzZVxuICB9KSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VDTWFwUmVhZGVyRmFjdG9yeSkge1xuICAgICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VDTWFwUmVhZGVyRmFjdG9yeS5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLmlzQ29tcHJlc3NlZCA9IGlzQ29tcHJlc3NlZDtcbiAgfVxuXG4gIGFzeW5jIGZldGNoKHtcbiAgICBuYW1lXG4gIH0pIHtcbiAgICBpZiAoIXRoaXMuYmFzZVVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgQ01hcCBcImJhc2VVcmxcIiBwYXJhbWV0ZXIgbXVzdCBiZSBzcGVjaWZpZWQsIGVuc3VyZSB0aGF0ICcgKyAndGhlIFwiY01hcFVybFwiIGFuZCBcImNNYXBQYWNrZWRcIiBBUEkgcGFyYW1ldGVycyBhcmUgcHJvdmlkZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDTWFwIG5hbWUgbXVzdCBiZSBzcGVjaWZpZWQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IHRoaXMuYmFzZVVybCArIG5hbWUgKyAodGhpcy5pc0NvbXByZXNzZWQgPyBcIi5iY21hcFwiIDogXCJcIik7XG4gICAgY29uc3QgY29tcHJlc3Npb25UeXBlID0gdGhpcy5pc0NvbXByZXNzZWQgPyBfdXRpbC5DTWFwQ29tcHJlc3Npb25UeXBlLkJJTkFSWSA6IF91dGlsLkNNYXBDb21wcmVzc2lvblR5cGUuTk9ORTtcbiAgICByZXR1cm4gdGhpcy5fZmV0Y2hEYXRhKHVybCwgY29tcHJlc3Npb25UeXBlKS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gbG9hZCAke3RoaXMuaXNDb21wcmVzc2VkID8gXCJiaW5hcnkgXCIgOiBcIlwifUNNYXAgYXQ6ICR7dXJsfWApO1xuICAgIH0pO1xuICB9XG5cbiAgX2ZldGNoRGF0YSh1cmwsIGNvbXByZXNzaW9uVHlwZSkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJBYnN0cmFjdCBtZXRob2QgYF9mZXRjaERhdGFgIGNhbGxlZC5cIik7XG4gIH1cblxufVxuXG5leHBvcnRzLkJhc2VDTWFwUmVhZGVyRmFjdG9yeSA9IEJhc2VDTWFwUmVhZGVyRmFjdG9yeTtcblxuY2xhc3MgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVcmwgPSBudWxsXG4gIH0pIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5KSB7XG4gICAgICAoMCwgX3V0aWwudW5yZWFjaGFibGUpKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2goe1xuICAgIGZpbGVuYW1lXG4gIH0pIHtcbiAgICBpZiAoIXRoaXMuYmFzZVVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3RhbmRhcmQgZm9udCBcImJhc2VVcmxcIiBwYXJhbWV0ZXIgbXVzdCBiZSBzcGVjaWZpZWQsIGVuc3VyZSB0aGF0ICcgKyAndGhlIFwic3RhbmRhcmRGb250RGF0YVVybFwiIEFQSSBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKCFmaWxlbmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm9udCBmaWxlbmFtZSBtdXN0IGJlIHNwZWNpZmllZC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZmlsZW5hbWV9YDtcbiAgICByZXR1cm4gdGhpcy5fZmV0Y2hEYXRhKHVybCkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvYWQgZm9udCBkYXRhIGF0OiAke3VybH1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9mZXRjaERhdGEodXJsKSB7XG4gICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkFic3RyYWN0IG1ldGhvZCBgX2ZldGNoRGF0YWAgY2FsbGVkLlwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5O1xuXG5jbGFzcyBCYXNlU1ZHRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBCYXNlU1ZHRmFjdG9yeSkge1xuICAgICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VTVkdGYWN0b3J5LlwiKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGUod2lkdGgsIGhlaWdodCkge1xuICAgIGlmICh3aWR0aCA8PSAwIHx8IGhlaWdodCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFNWRyBkaW1lbnNpb25zXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHN2ZyA9IHRoaXMuX2NyZWF0ZVNWRyhcInN2ZzpzdmdcIik7XG5cbiAgICBzdmcuc2V0QXR0cmlidXRlKFwidmVyc2lvblwiLCBcIjEuMVwiKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgYCR7d2lkdGh9cHhgKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGAke2hlaWdodH1weGApO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwibm9uZVwiKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWApO1xuICAgIHJldHVybiBzdmc7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KHR5cGUpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgU1ZHIGVsZW1lbnQgdHlwZVwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlU1ZHKHR5cGUpO1xuICB9XG5cbiAgX2NyZWF0ZVNWRyh0eXBlKSB7XG4gICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkFic3RyYWN0IG1ldGhvZCBgX2NyZWF0ZVNWR2AgY2FsbGVkLlwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuQmFzZVNWR0ZhY3RvcnkgPSBCYXNlU1ZHRmFjdG9yeTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkZvbnRMb2FkZXIgPSBleHBvcnRzLkZvbnRGYWNlT2JqZWN0ID0gdm9pZCAwO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG5jbGFzcyBCYXNlRm9udExvYWRlciB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkb2NJZCxcbiAgICBvblVuc3VwcG9ydGVkRmVhdHVyZSxcbiAgICBvd25lckRvY3VtZW50ID0gZ2xvYmFsVGhpcy5kb2N1bWVudCxcbiAgICBzdHlsZUVsZW1lbnQgPSBudWxsXG4gIH0pIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZUZvbnRMb2FkZXIpIHtcbiAgICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlRm9udExvYWRlci5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5kb2NJZCA9IGRvY0lkO1xuICAgIHRoaXMuX29uVW5zdXBwb3J0ZWRGZWF0dXJlID0gb25VbnN1cHBvcnRlZEZlYXR1cmU7XG4gICAgdGhpcy5fZG9jdW1lbnQgPSBvd25lckRvY3VtZW50O1xuICAgIHRoaXMubmF0aXZlRm9udEZhY2VzID0gW107XG4gICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgYWRkTmF0aXZlRm9udEZhY2UobmF0aXZlRm9udEZhY2UpIHtcbiAgICB0aGlzLm5hdGl2ZUZvbnRGYWNlcy5wdXNoKG5hdGl2ZUZvbnRGYWNlKTtcblxuICAgIHRoaXMuX2RvY3VtZW50LmZvbnRzLmFkZChuYXRpdmVGb250RmFjZSk7XG4gIH1cblxuICBpbnNlcnRSdWxlKHJ1bGUpIHtcbiAgICBsZXQgc3R5bGVFbGVtZW50ID0gdGhpcy5zdHlsZUVsZW1lbnQ7XG5cbiAgICBpZiAoIXN0eWxlRWxlbWVudCkge1xuICAgICAgc3R5bGVFbGVtZW50ID0gdGhpcy5zdHlsZUVsZW1lbnQgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICBzdHlsZUVsZW1lbnQuaWQgPSBgUERGSlNfRk9OVF9TVFlMRV9UQUdfJHt0aGlzLmRvY0lkfWA7XG5cbiAgICAgIHRoaXMuX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHlsZVNoZWV0ID0gc3R5bGVFbGVtZW50LnNoZWV0O1xuICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShydWxlLCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICBmb3IgKGNvbnN0IG5hdGl2ZUZvbnRGYWNlIG9mIHRoaXMubmF0aXZlRm9udEZhY2VzKSB7XG4gICAgICB0aGlzLl9kb2N1bWVudC5mb250cy5kZWxldGUobmF0aXZlRm9udEZhY2UpO1xuICAgIH1cblxuICAgIHRoaXMubmF0aXZlRm9udEZhY2VzLmxlbmd0aCA9IDA7XG5cbiAgICBpZiAodGhpcy5zdHlsZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc3R5bGVFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJpbmQoZm9udCkge1xuICAgIGlmIChmb250LmF0dGFjaGVkIHx8IGZvbnQubWlzc2luZ0ZpbGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb250LmF0dGFjaGVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWQpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUZvbnRGYWNlID0gZm9udC5jcmVhdGVOYXRpdmVGb250RmFjZSgpO1xuXG4gICAgICBpZiAobmF0aXZlRm9udEZhY2UpIHtcbiAgICAgICAgdGhpcy5hZGROYXRpdmVGb250RmFjZShuYXRpdmVGb250RmFjZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBuYXRpdmVGb250RmFjZS5sb2FkZWQ7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgdGhpcy5fb25VbnN1cHBvcnRlZEZlYXR1cmUoe1xuICAgICAgICAgICAgZmVhdHVyZUlkOiBfdXRpbC5VTlNVUFBPUlRFRF9GRUFUVVJFUy5lcnJvckZvbnRMb2FkTmF0aXZlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAoMCwgX3V0aWwud2FybikoYEZhaWxlZCB0byBsb2FkIGZvbnQgJyR7bmF0aXZlRm9udEZhY2UuZmFtaWx5fSc6ICcke2V4fScuYCk7XG4gICAgICAgICAgZm9udC5kaXNhYmxlRm9udEZhY2UgPSB0cnVlO1xuICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBydWxlID0gZm9udC5jcmVhdGVGb250RmFjZVJ1bGUoKTtcblxuICAgIGlmIChydWxlKSB7XG4gICAgICB0aGlzLmluc2VydFJ1bGUocnVsZSk7XG5cbiAgICAgIGlmICh0aGlzLmlzU3luY0ZvbnRMb2FkaW5nU3VwcG9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9xdWV1ZUxvYWRpbmdDYWxsYmFjayhyZXNvbHZlKTtcblxuICAgICAgICB0aGlzLl9wcmVwYXJlRm9udExvYWRFdmVudChbcnVsZV0sIFtmb250XSwgcmVxdWVzdCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfcXVldWVMb2FkaW5nQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAoMCwgX3V0aWwudW5yZWFjaGFibGUpKFwiQWJzdHJhY3QgbWV0aG9kIGBfcXVldWVMb2FkaW5nQ2FsbGJhY2tgLlwiKTtcbiAgfVxuXG4gIGdldCBpc0ZvbnRMb2FkaW5nQVBJU3VwcG9ydGVkKCkge1xuICAgIGNvbnN0IGhhc0ZvbnRzID0gISF0aGlzLl9kb2N1bWVudD8uZm9udHM7XG4gICAgcmV0dXJuICgwLCBfdXRpbC5zaGFkb3cpKHRoaXMsIFwiaXNGb250TG9hZGluZ0FQSVN1cHBvcnRlZFwiLCBoYXNGb250cyk7XG4gIH1cblxuICBnZXQgaXNTeW5jRm9udExvYWRpbmdTdXBwb3J0ZWQoKSB7XG4gICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKShcIkFic3RyYWN0IG1ldGhvZCBgaXNTeW5jRm9udExvYWRpbmdTdXBwb3J0ZWRgLlwiKTtcbiAgfVxuXG4gIGdldCBfbG9hZFRlc3RGb250KCkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJBYnN0cmFjdCBtZXRob2QgYF9sb2FkVGVzdEZvbnRgLlwiKTtcbiAgfVxuXG4gIF9wcmVwYXJlRm9udExvYWRFdmVudChydWxlcywgZm9udHNUb0xvYWQsIHJlcXVlc3QpIHtcbiAgICAoMCwgX3V0aWwudW5yZWFjaGFibGUpKFwiQWJzdHJhY3QgbWV0aG9kIGBfcHJlcGFyZUZvbnRMb2FkRXZlbnRgLlwiKTtcbiAgfVxuXG59XG5cbmxldCBGb250TG9hZGVyO1xuZXhwb3J0cy5Gb250TG9hZGVyID0gRm9udExvYWRlcjtcbntcbiAgZXhwb3J0cy5Gb250TG9hZGVyID0gRm9udExvYWRlciA9IGNsYXNzIEdlbmVyaWNGb250TG9hZGVyIGV4dGVuZHMgQmFzZUZvbnRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgc3VwZXIocGFyYW1zKTtcbiAgICAgIHRoaXMubG9hZGluZ0NvbnRleHQgPSB7XG4gICAgICAgIHJlcXVlc3RzOiBbXSxcbiAgICAgICAgbmV4dFJlcXVlc3RJZDogMFxuICAgICAgfTtcbiAgICAgIHRoaXMubG9hZFRlc3RGb250SWQgPSAwO1xuICAgIH1cblxuICAgIGdldCBpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZCgpIHtcbiAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG0gPSAvTW96aWxsYVxcLzUuMC4qP3J2OihcXGQrKS4qPyBHZWNrby8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcblxuICAgICAgICBpZiAobT8uWzFdID49IDE0KSB7XG4gICAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKDAsIF91dGlsLnNoYWRvdykodGhpcywgXCJpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZFwiLCBzdXBwb3J0ZWQpO1xuICAgIH1cblxuICAgIF9xdWV1ZUxvYWRpbmdDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgZnVuY3Rpb24gY29tcGxldGVSZXF1ZXN0KCkge1xuICAgICAgICAoMCwgX3V0aWwuYXNzZXJ0KSghcmVxdWVzdC5kb25lLCBcImNvbXBsZXRlUmVxdWVzdCgpIGNhbm5vdCBiZSBjYWxsZWQgdHdpY2UuXCIpO1xuICAgICAgICByZXF1ZXN0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgIHdoaWxlIChjb250ZXh0LnJlcXVlc3RzLmxlbmd0aCA+IDAgJiYgY29udGV4dC5yZXF1ZXN0c1swXS5kb25lKSB7XG4gICAgICAgICAgY29uc3Qgb3RoZXJSZXF1ZXN0ID0gY29udGV4dC5yZXF1ZXN0cy5zaGlmdCgpO1xuICAgICAgICAgIHNldFRpbWVvdXQob3RoZXJSZXF1ZXN0LmNhbGxiYWNrLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5sb2FkaW5nQ29udGV4dDtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGlkOiBgcGRmanMtZm9udC1sb2FkaW5nLSR7Y29udGV4dC5uZXh0UmVxdWVzdElkKyt9YCxcbiAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVJlcXVlc3QsXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICB9O1xuICAgICAgY29udGV4dC5yZXF1ZXN0cy5wdXNoKHJlcXVlc3QpO1xuICAgICAgcmV0dXJuIHJlcXVlc3Q7XG4gICAgfVxuXG4gICAgZ2V0IF9sb2FkVGVzdEZvbnQoKSB7XG4gICAgICBjb25zdCBnZXRMb2FkVGVzdEZvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhdG9iKFwiVDFSVVR3QUxBSUFBQXdBd1EwWkdJREh0Wmc0QUFBT1lBQUFBZ1VaR1ZFMWxrelp3QUFBRUhBQUFBQnhIUkVWR0FCUUFcIiArIFwiRlFBQUJEZ0FBQUFlVDFNdk1sWU5Zd2tBQUFFZ0FBQUFZR050WVhBQkRRTFVBQUFDTkFBQUFVSm9aV0ZrL3hWRkRRQUFcIiArIFwiQUx3QUFBQTJhR2hsWVFka0Erb0FBQUQwQUFBQUpHaHRkSGdENkFBQUFBQUVXQUFBQUFadFlYaHdBQUpRQUFBQUFSZ0FcIiArIFwiQUFBR2JtRnRaVmptZEg0QUFBR0FBQUFBc1hCdmMzVC9oZ0F6QUFBRGVBQUFBQ0FBQVFBQUFBRUFBTFpSRnNSZkR6ejFcIiArIFwiQUFzRDZBQUFBQURPQk9UTEFBQUFBTTRLSER3QUFBQUFBK2dESVFBQUFBZ0FBZ0FBQUFBQUFBQUJBQUFESVFBQUFGb0RcIiArIFwiNkFBQUFBQUQ2QUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBVUFBQUFnQUFBQVFENkFIMEFBVUFBQUtLQXJ3QUFBQ01cIiArIFwiQW9vQ3ZBQUFBZUFBTVFFQ0FBQUNBQVlKQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFGQm1SV1FBd0FBdUFDNERcIiArIFwiSVA4NEFGb0RJUUFBQUFBQUFRQUFBQUFBQUFBQUFDQUFJQUFCQUFBQURnQ3VBQUVBQUFBQUFBQUFBUUFBQUFFQUFBQUFcIiArIFwiQUFFQUFRQUFBQUVBQUFBQUFBSUFBUUFBQUFFQUFBQUFBQU1BQVFBQUFBRUFBQUFBQUFRQUFRQUFBQUVBQUFBQUFBVUFcIiArIFwiQVFBQUFBRUFBQUFBQUFZQUFRQUFBQU1BQVFRSkFBQUFBZ0FCQUFNQUFRUUpBQUVBQWdBQkFBTUFBUVFKQUFJQUFnQUJcIiArIFwiQUFNQUFRUUpBQU1BQWdBQkFBTUFBUVFKQUFRQUFnQUJBQU1BQVFRSkFBVUFBZ0FCQUFNQUFRUUpBQVlBQWdBQldBQllcIiArIFwiQUFBQUFBQUFBd0FBQUFNQUFBQWNBQUVBQUFBQUFEd0FBd0FCQUFBQUhBQUVBQ0FBQUFBRUFBUUFBUUFBQUM3Ly93QUFcIiArIFwiQUM3Ly8vL1RBQUVBQUFBQUFBQUJCZ0FBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArIFwiQUFBQUFBQUFBQUFBQUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArIFwiQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArIFwiQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArIFwiQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFcIiArIFwiQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBTUFBQUFBQUFEL2d3QXlBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFcIiArIFwiQUFBQkFBUUVBQUVCQVFKWUFBRUJBU0g0RHdENEd3SEVBdmdjQS9nWEJJd01BWXVMK256NXRRWGtENWozQ0JMbkVRQUNcIiArIFwiQVFFQklWaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZQUFBQkFRQUFEd0FDQVFFRUUvdDNcIiArIFwiRG92NmZBSDZmQVQrZlBwOCtud0hEb3NNQ3ZtMUN2bTFEQXo2ZkJRQUFBQUFBQUFCQUFBQUFNbUpiekVBQUFBQXpnVGpcIiArIFwiRlFBQUFBRE9CT1FwQUFFQUFBQUFBQUFBREFBVUFBUUFBQUFCQUFBQUFnQUJBQUFBQUFBQUFBQUQ2QUFBQUFBQUFBPT1cIik7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gKDAsIF91dGlsLnNoYWRvdykodGhpcywgXCJfbG9hZFRlc3RGb250XCIsIGdldExvYWRUZXN0Rm9udCgpKTtcbiAgICB9XG5cbiAgICBfcHJlcGFyZUZvbnRMb2FkRXZlbnQocnVsZXMsIGZvbnRzLCByZXF1ZXN0KSB7XG4gICAgICBmdW5jdGlvbiBpbnQzMihkYXRhLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0IHwgZGF0YS5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2IHwgZGF0YS5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDggfCBkYXRhLmNoYXJDb2RlQXQob2Zmc2V0ICsgMykgJiAweGZmO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzcGxpY2VTdHJpbmcocywgb2Zmc2V0LCByZW1vdmUsIGluc2VydCkge1xuICAgICAgICBjb25zdCBjaHVuazEgPSBzLnN1YnN0cmluZygwLCBvZmZzZXQpO1xuICAgICAgICBjb25zdCBjaHVuazIgPSBzLnN1YnN0cmluZyhvZmZzZXQgKyByZW1vdmUpO1xuICAgICAgICByZXR1cm4gY2h1bmsxICsgaW5zZXJ0ICsgY2h1bmsyO1xuICAgICAgfVxuXG4gICAgICBsZXQgaSwgaWk7XG5cbiAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5cbiAgICAgIGNhbnZhcy53aWR0aCA9IDE7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBsZXQgY2FsbGVkID0gMDtcblxuICAgICAgZnVuY3Rpb24gaXNGb250UmVhZHkobmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGVkKys7XG5cbiAgICAgICAgaWYgKGNhbGxlZCA+IDMwKSB7XG4gICAgICAgICAgKDAsIF91dGlsLndhcm4pKFwiTG9hZCB0ZXN0IGZvbnQgbmV2ZXIgbG9hZGVkLlwiKTtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGN0eC5mb250ID0gXCIzMHB4IFwiICsgbmFtZTtcbiAgICAgICAgY3R4LmZpbGxUZXh0KFwiLlwiLCAwLCAyMCk7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSk7XG5cbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhWzNdID4gMCkge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dChpc0ZvbnRSZWFkeS5iaW5kKG51bGwsIG5hbWUsIGNhbGxiYWNrKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvYWRUZXN0Rm9udElkID0gYGx0JHtEYXRlLm5vdygpfSR7dGhpcy5sb2FkVGVzdEZvbnRJZCsrfWA7XG4gICAgICBsZXQgZGF0YSA9IHRoaXMuX2xvYWRUZXN0Rm9udDtcbiAgICAgIGNvbnN0IENPTU1FTlRfT0ZGU0VUID0gOTc2O1xuICAgICAgZGF0YSA9IHNwbGljZVN0cmluZyhkYXRhLCBDT01NRU5UX09GRlNFVCwgbG9hZFRlc3RGb250SWQubGVuZ3RoLCBsb2FkVGVzdEZvbnRJZCk7XG4gICAgICBjb25zdCBDRkZfQ0hFQ0tTVU1fT0ZGU0VUID0gMTY7XG4gICAgICBjb25zdCBYWFhYX1ZBTFVFID0gMHg1ODU4NTg1ODtcbiAgICAgIGxldCBjaGVja3N1bSA9IGludDMyKGRhdGEsIENGRl9DSEVDS1NVTV9PRkZTRVQpO1xuXG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGxvYWRUZXN0Rm9udElkLmxlbmd0aCAtIDM7IGkgPCBpaTsgaSArPSA0KSB7XG4gICAgICAgIGNoZWNrc3VtID0gY2hlY2tzdW0gLSBYWFhYX1ZBTFVFICsgaW50MzIobG9hZFRlc3RGb250SWQsIGkpIHwgMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGkgPCBsb2FkVGVzdEZvbnRJZC5sZW5ndGgpIHtcbiAgICAgICAgY2hlY2tzdW0gPSBjaGVja3N1bSAtIFhYWFhfVkFMVUUgKyBpbnQzMihsb2FkVGVzdEZvbnRJZCArIFwiWFhYXCIsIGkpIHwgMDtcbiAgICAgIH1cblxuICAgICAgZGF0YSA9IHNwbGljZVN0cmluZyhkYXRhLCBDRkZfQ0hFQ0tTVU1fT0ZGU0VULCA0LCAoMCwgX3V0aWwuc3RyaW5nMzIpKGNoZWNrc3VtKSk7XG4gICAgICBjb25zdCB1cmwgPSBgdXJsKGRhdGE6Zm9udC9vcGVudHlwZTtiYXNlNjQsJHtidG9hKGRhdGEpfSk7YDtcbiAgICAgIGNvbnN0IHJ1bGUgPSBgQGZvbnQtZmFjZSB7Zm9udC1mYW1pbHk6XCIke2xvYWRUZXN0Rm9udElkfVwiO3NyYzoke3VybH19YDtcbiAgICAgIHRoaXMuaW5zZXJ0UnVsZShydWxlKTtcbiAgICAgIGNvbnN0IG5hbWVzID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgZm9udCBvZiBmb250cykge1xuICAgICAgICBuYW1lcy5wdXNoKGZvbnQubG9hZGVkTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIG5hbWVzLnB1c2gobG9hZFRlc3RGb250SWQpO1xuXG4gICAgICBjb25zdCBkaXYgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICBkaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICBkaXYuc3R5bGUud2lkdGggPSBkaXYuc3R5bGUuaGVpZ2h0ID0gXCIxMHB4XCI7XG4gICAgICBkaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICBkaXYuc3R5bGUudG9wID0gZGl2LnN0eWxlLmxlZnQgPSBcIjBweFwiO1xuXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgbmFtZXMpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBcIkhpXCI7XG4gICAgICAgIHNwYW4uc3R5bGUuZm9udEZhbWlseSA9IG5hbWU7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgICBpc0ZvbnRSZWFkeShsb2FkVGVzdEZvbnRJZCwgKCkgPT4ge1xuICAgICAgICBkaXYucmVtb3ZlKCk7XG4gICAgICAgIHJlcXVlc3QuY29tcGxldGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9O1xufVxuXG5jbGFzcyBGb250RmFjZU9iamVjdCB7XG4gIGNvbnN0cnVjdG9yKHRyYW5zbGF0ZWREYXRhLCB7XG4gICAgaXNFdmFsU3VwcG9ydGVkID0gdHJ1ZSxcbiAgICBkaXNhYmxlRm9udEZhY2UgPSBmYWxzZSxcbiAgICBpZ25vcmVFcnJvcnMgPSBmYWxzZSxcbiAgICBvblVuc3VwcG9ydGVkRmVhdHVyZSxcbiAgICBmb250UmVnaXN0cnkgPSBudWxsXG4gIH0pIHtcbiAgICB0aGlzLmNvbXBpbGVkR2x5cGhzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIGZvciAoY29uc3QgaSBpbiB0cmFuc2xhdGVkRGF0YSkge1xuICAgICAgdGhpc1tpXSA9IHRyYW5zbGF0ZWREYXRhW2ldO1xuICAgIH1cblxuICAgIHRoaXMuaXNFdmFsU3VwcG9ydGVkID0gaXNFdmFsU3VwcG9ydGVkICE9PSBmYWxzZTtcbiAgICB0aGlzLmRpc2FibGVGb250RmFjZSA9IGRpc2FibGVGb250RmFjZSA9PT0gdHJ1ZTtcbiAgICB0aGlzLmlnbm9yZUVycm9ycyA9IGlnbm9yZUVycm9ycyA9PT0gdHJ1ZTtcbiAgICB0aGlzLl9vblVuc3VwcG9ydGVkRmVhdHVyZSA9IG9uVW5zdXBwb3J0ZWRGZWF0dXJlO1xuICAgIHRoaXMuZm9udFJlZ2lzdHJ5ID0gZm9udFJlZ2lzdHJ5O1xuICB9XG5cbiAgY3JlYXRlTmF0aXZlRm9udEZhY2UoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEgfHwgdGhpcy5kaXNhYmxlRm9udEZhY2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBuYXRpdmVGb250RmFjZTtcblxuICAgIGlmICghdGhpcy5jc3NGb250SW5mbykge1xuICAgICAgbmF0aXZlRm9udEZhY2UgPSBuZXcgRm9udEZhY2UodGhpcy5sb2FkZWROYW1lLCB0aGlzLmRhdGEsIHt9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY3NzID0ge1xuICAgICAgICB3ZWlnaHQ6IHRoaXMuY3NzRm9udEluZm8uZm9udFdlaWdodFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGUpIHtcbiAgICAgICAgY3NzLnN0eWxlID0gYG9ibGlxdWUgJHt0aGlzLmNzc0ZvbnRJbmZvLml0YWxpY0FuZ2xlfWRlZ2A7XG4gICAgICB9XG5cbiAgICAgIG5hdGl2ZUZvbnRGYWNlID0gbmV3IEZvbnRGYWNlKHRoaXMuY3NzRm9udEluZm8uZm9udEZhbWlseSwgdGhpcy5kYXRhLCBjc3MpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZvbnRSZWdpc3RyeSkge1xuICAgICAgdGhpcy5mb250UmVnaXN0cnkucmVnaXN0ZXJGb250KHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVGb250RmFjZTtcbiAgfVxuXG4gIGNyZWF0ZUZvbnRGYWNlUnVsZSgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YSB8fCB0aGlzLmRpc2FibGVGb250RmFjZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9ICgwLCBfdXRpbC5ieXRlc1RvU3RyaW5nKSh0aGlzLmRhdGEpO1xuICAgIGNvbnN0IHVybCA9IGB1cmwoZGF0YToke3RoaXMubWltZXR5cGV9O2Jhc2U2NCwke2J0b2EoZGF0YSl9KTtgO1xuICAgIGxldCBydWxlO1xuXG4gICAgaWYgKCF0aGlzLmNzc0ZvbnRJbmZvKSB7XG4gICAgICBydWxlID0gYEBmb250LWZhY2Uge2ZvbnQtZmFtaWx5OlwiJHt0aGlzLmxvYWRlZE5hbWV9XCI7c3JjOiR7dXJsfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY3NzID0gYGZvbnQtd2VpZ2h0OiAke3RoaXMuY3NzRm9udEluZm8uZm9udFdlaWdodH07YDtcblxuICAgICAgaWYgKHRoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGUpIHtcbiAgICAgICAgY3NzICs9IGBmb250LXN0eWxlOiBvYmxpcXVlICR7dGhpcy5jc3NGb250SW5mby5pdGFsaWNBbmdsZX1kZWc7YDtcbiAgICAgIH1cblxuICAgICAgcnVsZSA9IGBAZm9udC1mYWNlIHtmb250LWZhbWlseTpcIiR7dGhpcy5jc3NGb250SW5mby5mb250RmFtaWx5fVwiOyR7Y3NzfXNyYzoke3VybH19YDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb250UmVnaXN0cnkpIHtcbiAgICAgIHRoaXMuZm9udFJlZ2lzdHJ5LnJlZ2lzdGVyRm9udCh0aGlzLCB1cmwpO1xuICAgIH1cblxuICAgIHJldHVybiBydWxlO1xuICB9XG5cbiAgZ2V0UGF0aEdlbmVyYXRvcihvYmpzLCBjaGFyYWN0ZXIpIHtcbiAgICBpZiAodGhpcy5jb21waWxlZEdseXBoc1tjaGFyYWN0ZXJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVkR2x5cGhzW2NoYXJhY3Rlcl07XG4gICAgfVxuXG4gICAgbGV0IGNtZHM7XG5cbiAgICB0cnkge1xuICAgICAgY21kcyA9IG9ianMuZ2V0KHRoaXMubG9hZGVkTmFtZSArIFwiX3BhdGhfXCIgKyBjaGFyYWN0ZXIpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBpZiAoIXRoaXMuaWdub3JlRXJyb3JzKSB7XG4gICAgICAgIHRocm93IGV4O1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9vblVuc3VwcG9ydGVkRmVhdHVyZSh7XG4gICAgICAgIGZlYXR1cmVJZDogX3V0aWwuVU5TVVBQT1JURURfRkVBVFVSRVMuZXJyb3JGb250R2V0UGF0aFxuICAgICAgfSk7XG5cbiAgICAgICgwLCBfdXRpbC53YXJuKShgZ2V0UGF0aEdlbmVyYXRvciAtIGlnbm9yaW5nIGNoYXJhY3RlcjogXCIke2V4fVwiLmApO1xuICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZWRHbHlwaHNbY2hhcmFjdGVyXSA9IGZ1bmN0aW9uIChjLCBzaXplKSB7fTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0V2YWxTdXBwb3J0ZWQgJiYgX3V0aWwuRmVhdHVyZVRlc3QuaXNFdmFsU3VwcG9ydGVkKSB7XG4gICAgICBjb25zdCBqc0J1ZiA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGN1cnJlbnQgb2YgY21kcykge1xuICAgICAgICBjb25zdCBhcmdzID0gY3VycmVudC5hcmdzICE9PSB1bmRlZmluZWQgPyBjdXJyZW50LmFyZ3Muam9pbihcIixcIikgOiBcIlwiO1xuICAgICAgICBqc0J1Zi5wdXNoKFwiYy5cIiwgY3VycmVudC5jbWQsIFwiKFwiLCBhcmdzLCBcIik7XFxuXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21waWxlZEdseXBoc1tjaGFyYWN0ZXJdID0gbmV3IEZ1bmN0aW9uKFwiY1wiLCBcInNpemVcIiwganNCdWYuam9pbihcIlwiKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29tcGlsZWRHbHlwaHNbY2hhcmFjdGVyXSA9IGZ1bmN0aW9uIChjLCBzaXplKSB7XG4gICAgICBmb3IgKGNvbnN0IGN1cnJlbnQgb2YgY21kcykge1xuICAgICAgICBpZiAoY3VycmVudC5jbWQgPT09IFwic2NhbGVcIikge1xuICAgICAgICAgIGN1cnJlbnQuYXJncyA9IFtzaXplLCAtc2l6ZV07XG4gICAgICAgIH1cblxuICAgICAgICBjW2N1cnJlbnQuY21kXS5hcHBseShjLCBjdXJyZW50LmFyZ3MpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxufVxuXG5leHBvcnRzLkZvbnRGYWNlT2JqZWN0ID0gRm9udEZhY2VPYmplY3Q7XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5Bbm5vdGF0aW9uU3RvcmFnZSA9IHZvaWQgMDtcblxudmFyIF9tdXJtdXJoYXNoID0gX193X3BkZmpzX3JlcXVpcmVfXyg5KTtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxuY2xhc3MgQW5ub3RhdGlvblN0b3JhZ2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdG9yYWdlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX21vZGlmaWVkID0gZmFsc2U7XG4gICAgdGhpcy5vblNldE1vZGlmaWVkID0gbnVsbDtcbiAgICB0aGlzLm9uUmVzZXRNb2RpZmllZCA9IG51bGw7XG4gIH1cblxuICBnZXRWYWx1ZShrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fc3RvcmFnZS5nZXQoa2V5KTtcblxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGRlZmF1bHRWYWx1ZSwgdmFsdWUpO1xuICB9XG5cbiAgZ2V0UmF3VmFsdWUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2UuZ2V0KGtleSk7XG4gIH1cblxuICBzZXRWYWx1ZShrZXksIHZhbHVlKSB7XG4gICAgY29uc3Qgb2JqID0gdGhpcy5fc3RvcmFnZS5nZXQoa2V5KTtcblxuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlO1xuXG4gICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGNvbnN0IFtlbnRyeSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKG9ialtlbnRyeV0gIT09IHZhbCkge1xuICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICBvYmpbZW50cnldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fc3RvcmFnZS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKG1vZGlmaWVkKSB7XG4gICAgICB0aGlzLl9zZXRNb2RpZmllZCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5zaXplID4gMCA/ICgwLCBfdXRpbC5vYmplY3RGcm9tTWFwKSh0aGlzLl9zdG9yYWdlKSA6IG51bGw7XG4gIH1cblxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5zaXplO1xuICB9XG5cbiAgX3NldE1vZGlmaWVkKCkge1xuICAgIGlmICghdGhpcy5fbW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuX21vZGlmaWVkID0gdHJ1ZTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uU2V0TW9kaWZpZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLm9uU2V0TW9kaWZpZWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXNldE1vZGlmaWVkKCkge1xuICAgIGlmICh0aGlzLl9tb2RpZmllZCkge1xuICAgICAgdGhpcy5fbW9kaWZpZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uUmVzZXRNb2RpZmllZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMub25SZXNldE1vZGlmaWVkKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNlcmlhbGl6YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5zaXplID4gMCA/IHRoaXMuX3N0b3JhZ2UgOiBudWxsO1xuICB9XG5cbiAgZ2V0IGhhc2goKSB7XG4gICAgY29uc3QgaGFzaCA9IG5ldyBfbXVybXVyaGFzaC5NdXJtdXJIYXNoM182NCgpO1xuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fc3RvcmFnZSkge1xuICAgICAgaGFzaC51cGRhdGUoYCR7a2V5fToke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzaC5oZXhkaWdlc3QoKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuQW5ub3RhdGlvblN0b3JhZ2UgPSBBbm5vdGF0aW9uU3RvcmFnZTtcblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLk11cm11ckhhc2gzXzY0ID0gdm9pZCAwO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG5jb25zdCBTRUVEID0gMHhjM2QyZTFmMDtcbmNvbnN0IE1BU0tfSElHSCA9IDB4ZmZmZjAwMDA7XG5jb25zdCBNQVNLX0xPVyA9IDB4ZmZmZjtcblxuY2xhc3MgTXVybXVySGFzaDNfNjQge1xuICBjb25zdHJ1Y3RvcihzZWVkKSB7XG4gICAgdGhpcy5oMSA9IHNlZWQgPyBzZWVkICYgMHhmZmZmZmZmZiA6IFNFRUQ7XG4gICAgdGhpcy5oMiA9IHNlZWQgPyBzZWVkICYgMHhmZmZmZmZmZiA6IFNFRUQ7XG4gIH1cblxuICB1cGRhdGUoaW5wdXQpIHtcbiAgICBsZXQgZGF0YSwgbGVuZ3RoO1xuXG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGlucHV0Lmxlbmd0aCAqIDIpO1xuICAgICAgbGVuZ3RoID0gMDtcblxuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gaW5wdXQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBjb25zdCBjb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcblxuICAgICAgICBpZiAoY29kZSA8PSAweGZmKSB7XG4gICAgICAgICAgZGF0YVtsZW5ndGgrK10gPSBjb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGFbbGVuZ3RoKytdID0gY29kZSA+Pj4gODtcbiAgICAgICAgICBkYXRhW2xlbmd0aCsrXSA9IGNvZGUgJiAweGZmO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoMCwgX3V0aWwuaXNBcnJheUJ1ZmZlcikoaW5wdXQpKSB7XG4gICAgICBkYXRhID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgIGxlbmd0aCA9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV3JvbmcgZGF0YSBmb3JtYXQgaW4gTXVybXVySGFzaDNfNjRfdXBkYXRlLiBcIiArIFwiSW5wdXQgbXVzdCBiZSBhIHN0cmluZyBvciBhcnJheS5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgYmxvY2tDb3VudHMgPSBsZW5ndGggPj4gMjtcbiAgICBjb25zdCB0YWlsTGVuZ3RoID0gbGVuZ3RoIC0gYmxvY2tDb3VudHMgKiA0O1xuICAgIGNvbnN0IGRhdGFVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoZGF0YS5idWZmZXIsIDAsIGJsb2NrQ291bnRzKTtcbiAgICBsZXQgazEgPSAwLFxuICAgICAgICBrMiA9IDA7XG4gICAgbGV0IGgxID0gdGhpcy5oMSxcbiAgICAgICAgaDIgPSB0aGlzLmgyO1xuICAgIGNvbnN0IEMxID0gMHhjYzllMmQ1MSxcbiAgICAgICAgICBDMiA9IDB4MWI4NzM1OTM7XG4gICAgY29uc3QgQzFfTE9XID0gQzEgJiBNQVNLX0xPVyxcbiAgICAgICAgICBDMl9MT1cgPSBDMiAmIE1BU0tfTE9XO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja0NvdW50czsgaSsrKSB7XG4gICAgICBpZiAoaSAmIDEpIHtcbiAgICAgICAgazEgPSBkYXRhVWludDMyW2ldO1xuICAgICAgICBrMSA9IGsxICogQzEgJiBNQVNLX0hJR0ggfCBrMSAqIEMxX0xPVyAmIE1BU0tfTE9XO1xuICAgICAgICBrMSA9IGsxIDw8IDE1IHwgazEgPj4+IDE3O1xuICAgICAgICBrMSA9IGsxICogQzIgJiBNQVNLX0hJR0ggfCBrMSAqIEMyX0xPVyAmIE1BU0tfTE9XO1xuICAgICAgICBoMSBePSBrMTtcbiAgICAgICAgaDEgPSBoMSA8PCAxMyB8IGgxID4+PiAxOTtcbiAgICAgICAgaDEgPSBoMSAqIDUgKyAweGU2NTQ2YjY0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgazIgPSBkYXRhVWludDMyW2ldO1xuICAgICAgICBrMiA9IGsyICogQzEgJiBNQVNLX0hJR0ggfCBrMiAqIEMxX0xPVyAmIE1BU0tfTE9XO1xuICAgICAgICBrMiA9IGsyIDw8IDE1IHwgazIgPj4+IDE3O1xuICAgICAgICBrMiA9IGsyICogQzIgJiBNQVNLX0hJR0ggfCBrMiAqIEMyX0xPVyAmIE1BU0tfTE9XO1xuICAgICAgICBoMiBePSBrMjtcbiAgICAgICAgaDIgPSBoMiA8PCAxMyB8IGgyID4+PiAxOTtcbiAgICAgICAgaDIgPSBoMiAqIDUgKyAweGU2NTQ2YjY0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGsxID0gMDtcblxuICAgIHN3aXRjaCAodGFpbExlbmd0aCkge1xuICAgICAgY2FzZSAzOlxuICAgICAgICBrMSBePSBkYXRhW2Jsb2NrQ291bnRzICogNCArIDJdIDw8IDE2O1xuXG4gICAgICBjYXNlIDI6XG4gICAgICAgIGsxIF49IGRhdGFbYmxvY2tDb3VudHMgKiA0ICsgMV0gPDwgODtcblxuICAgICAgY2FzZSAxOlxuICAgICAgICBrMSBePSBkYXRhW2Jsb2NrQ291bnRzICogNF07XG4gICAgICAgIGsxID0gazEgKiBDMSAmIE1BU0tfSElHSCB8IGsxICogQzFfTE9XICYgTUFTS19MT1c7XG4gICAgICAgIGsxID0gazEgPDwgMTUgfCBrMSA+Pj4gMTc7XG4gICAgICAgIGsxID0gazEgKiBDMiAmIE1BU0tfSElHSCB8IGsxICogQzJfTE9XICYgTUFTS19MT1c7XG5cbiAgICAgICAgaWYgKGJsb2NrQ291bnRzICYgMSkge1xuICAgICAgICAgIGgxIF49IGsxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGgyIF49IGsxO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICB0aGlzLmgxID0gaDE7XG4gICAgdGhpcy5oMiA9IGgyO1xuICB9XG5cbiAgaGV4ZGlnZXN0KCkge1xuICAgIGxldCBoMSA9IHRoaXMuaDEsXG4gICAgICAgIGgyID0gdGhpcy5oMjtcbiAgICBoMSBePSBoMiA+Pj4gMTtcbiAgICBoMSA9IGgxICogMHhlZDU1OGNjZCAmIE1BU0tfSElHSCB8IGgxICogMHg4Y2NkICYgTUFTS19MT1c7XG4gICAgaDIgPSBoMiAqIDB4ZmY1MWFmZDcgJiBNQVNLX0hJR0ggfCAoKGgyIDw8IDE2IHwgaDEgPj4+IDE2KSAqIDB4YWZkN2VkNTUgJiBNQVNLX0hJR0gpID4+PiAxNjtcbiAgICBoMSBePSBoMiA+Pj4gMTtcbiAgICBoMSA9IGgxICogMHgxYTg1ZWM1MyAmIE1BU0tfSElHSCB8IGgxICogMHhlYzUzICYgTUFTS19MT1c7XG4gICAgaDIgPSBoMiAqIDB4YzRjZWI5ZmUgJiBNQVNLX0hJR0ggfCAoKGgyIDw8IDE2IHwgaDEgPj4+IDE2KSAqIDB4YjlmZTFhODUgJiBNQVNLX0hJR0gpID4+PiAxNjtcbiAgICBoMSBePSBoMiA+Pj4gMTtcbiAgICBjb25zdCBoZXgxID0gKGgxID4+PiAwKS50b1N0cmluZygxNiksXG4gICAgICAgICAgaGV4MiA9IChoMiA+Pj4gMCkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBoZXgxLnBhZFN0YXJ0KDgsIFwiMFwiKSArIGhleDIucGFkU3RhcnQoOCwgXCIwXCIpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5NdXJtdXJIYXNoM182NCA9IE11cm11ckhhc2gzXzY0O1xuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkNhbnZhc0dyYXBoaWNzID0gdm9pZCAwO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3BhdHRlcm5faGVscGVyID0gX193X3BkZmpzX3JlcXVpcmVfXygxMSk7XG5cbnZhciBfaW1hZ2VfdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEyKTtcblxudmFyIF9pc19ub2RlID0gX193X3BkZmpzX3JlcXVpcmVfXygzKTtcblxudmFyIF9kaXNwbGF5X3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg1KTtcblxuY29uc3QgTUlOX0ZPTlRfU0laRSA9IDE2O1xuY29uc3QgTUFYX0ZPTlRfU0laRSA9IDEwMDtcbmNvbnN0IE1BWF9HUk9VUF9TSVpFID0gNDA5NjtcbmNvbnN0IEVYRUNVVElPTl9USU1FID0gMTU7XG5jb25zdCBFWEVDVVRJT05fU1RFUFMgPSAxMDtcbmNvbnN0IENPTVBJTEVfVFlQRTNfR0xZUEhTID0gdHJ1ZTtcbmNvbnN0IE1BWF9TSVpFX1RPX0NPTVBJTEUgPSAxMDAwO1xuY29uc3QgRlVMTF9DSFVOS19IRUlHSFQgPSAxNjtcbmNvbnN0IExJTkVXSURUSF9TQ0FMRV9GQUNUT1IgPSAxLjAwMDAwMTtcblxuZnVuY3Rpb24gbWlycm9yQ29udGV4dE9wZXJhdGlvbnMoY3R4LCBkZXN0Q3R4KSB7XG4gIGlmIChjdHguX3JlbW92ZU1pcnJvcmluZykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRleHQgaXMgYWxyZWFkeSBmb3J3YXJkaW5nIG9wZXJhdGlvbnMuXCIpO1xuICB9XG5cbiAgY3R4Ll9fb3JpZ2luYWxTYXZlID0gY3R4LnNhdmU7XG4gIGN0eC5fX29yaWdpbmFsUmVzdG9yZSA9IGN0eC5yZXN0b3JlO1xuICBjdHguX19vcmlnaW5hbFJvdGF0ZSA9IGN0eC5yb3RhdGU7XG4gIGN0eC5fX29yaWdpbmFsU2NhbGUgPSBjdHguc2NhbGU7XG4gIGN0eC5fX29yaWdpbmFsVHJhbnNsYXRlID0gY3R4LnRyYW5zbGF0ZTtcbiAgY3R4Ll9fb3JpZ2luYWxUcmFuc2Zvcm0gPSBjdHgudHJhbnNmb3JtO1xuICBjdHguX19vcmlnaW5hbFNldFRyYW5zZm9ybSA9IGN0eC5zZXRUcmFuc2Zvcm07XG4gIGN0eC5fX29yaWdpbmFsUmVzZXRUcmFuc2Zvcm0gPSBjdHgucmVzZXRUcmFuc2Zvcm07XG4gIGN0eC5fX29yaWdpbmFsQ2xpcCA9IGN0eC5jbGlwO1xuICBjdHguX19vcmlnaW5hbE1vdmVUbyA9IGN0eC5tb3ZlVG87XG4gIGN0eC5fX29yaWdpbmFsTGluZVRvID0gY3R4LmxpbmVUbztcbiAgY3R4Ll9fb3JpZ2luYWxCZXppZXJDdXJ2ZVRvID0gY3R4LmJlemllckN1cnZlVG87XG4gIGN0eC5fX29yaWdpbmFsUmVjdCA9IGN0eC5yZWN0O1xuICBjdHguX19vcmlnaW5hbENsb3NlUGF0aCA9IGN0eC5jbG9zZVBhdGg7XG4gIGN0eC5fX29yaWdpbmFsQmVnaW5QYXRoID0gY3R4LmJlZ2luUGF0aDtcblxuICBjdHguX3JlbW92ZU1pcnJvcmluZyA9ICgpID0+IHtcbiAgICBjdHguc2F2ZSA9IGN0eC5fX29yaWdpbmFsU2F2ZTtcbiAgICBjdHgucmVzdG9yZSA9IGN0eC5fX29yaWdpbmFsUmVzdG9yZTtcbiAgICBjdHgucm90YXRlID0gY3R4Ll9fb3JpZ2luYWxSb3RhdGU7XG4gICAgY3R4LnNjYWxlID0gY3R4Ll9fb3JpZ2luYWxTY2FsZTtcbiAgICBjdHgudHJhbnNsYXRlID0gY3R4Ll9fb3JpZ2luYWxUcmFuc2xhdGU7XG4gICAgY3R4LnRyYW5zZm9ybSA9IGN0eC5fX29yaWdpbmFsVHJhbnNmb3JtO1xuICAgIGN0eC5zZXRUcmFuc2Zvcm0gPSBjdHguX19vcmlnaW5hbFNldFRyYW5zZm9ybTtcbiAgICBjdHgucmVzZXRUcmFuc2Zvcm0gPSBjdHguX19vcmlnaW5hbFJlc2V0VHJhbnNmb3JtO1xuICAgIGN0eC5jbGlwID0gY3R4Ll9fb3JpZ2luYWxDbGlwO1xuICAgIGN0eC5tb3ZlVG8gPSBjdHguX19vcmlnaW5hbE1vdmVUbztcbiAgICBjdHgubGluZVRvID0gY3R4Ll9fb3JpZ2luYWxMaW5lVG87XG4gICAgY3R4LmJlemllckN1cnZlVG8gPSBjdHguX19vcmlnaW5hbEJlemllckN1cnZlVG87XG4gICAgY3R4LnJlY3QgPSBjdHguX19vcmlnaW5hbFJlY3Q7XG4gICAgY3R4LmNsb3NlUGF0aCA9IGN0eC5fX29yaWdpbmFsQ2xvc2VQYXRoO1xuICAgIGN0eC5iZWdpblBhdGggPSBjdHguX19vcmlnaW5hbEJlZ2luUGF0aDtcbiAgICBkZWxldGUgY3R4Ll9yZW1vdmVNaXJyb3Jpbmc7XG4gIH07XG5cbiAgY3R4LnNhdmUgPSBmdW5jdGlvbiBjdHhTYXZlKCkge1xuICAgIGRlc3RDdHguc2F2ZSgpO1xuXG4gICAgdGhpcy5fX29yaWdpbmFsU2F2ZSgpO1xuICB9O1xuXG4gIGN0eC5yZXN0b3JlID0gZnVuY3Rpb24gY3R4UmVzdG9yZSgpIHtcbiAgICBkZXN0Q3R4LnJlc3RvcmUoKTtcblxuICAgIHRoaXMuX19vcmlnaW5hbFJlc3RvcmUoKTtcbiAgfTtcblxuICBjdHgudHJhbnNsYXRlID0gZnVuY3Rpb24gY3R4VHJhbnNsYXRlKHgsIHkpIHtcbiAgICBkZXN0Q3R4LnRyYW5zbGF0ZSh4LCB5KTtcblxuICAgIHRoaXMuX19vcmlnaW5hbFRyYW5zbGF0ZSh4LCB5KTtcbiAgfTtcblxuICBjdHguc2NhbGUgPSBmdW5jdGlvbiBjdHhTY2FsZSh4LCB5KSB7XG4gICAgZGVzdEN0eC5zY2FsZSh4LCB5KTtcblxuICAgIHRoaXMuX19vcmlnaW5hbFNjYWxlKHgsIHkpO1xuICB9O1xuXG4gIGN0eC50cmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZikge1xuICAgIGRlc3RDdHgudHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuXG4gICAgdGhpcy5fX29yaWdpbmFsVHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICB9O1xuXG4gIGN0eC5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhTZXRUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZikge1xuICAgIGRlc3RDdHguc2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuXG4gICAgdGhpcy5fX29yaWdpbmFsU2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICB9O1xuXG4gIGN0eC5yZXNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uIGN0eFJlc2V0VHJhbnNmb3JtKCkge1xuICAgIGRlc3RDdHgucmVzZXRUcmFuc2Zvcm0oKTtcblxuICAgIHRoaXMuX19vcmlnaW5hbFJlc2V0VHJhbnNmb3JtKCk7XG4gIH07XG5cbiAgY3R4LnJvdGF0ZSA9IGZ1bmN0aW9uIGN0eFJvdGF0ZShhbmdsZSkge1xuICAgIGRlc3RDdHgucm90YXRlKGFuZ2xlKTtcblxuICAgIHRoaXMuX19vcmlnaW5hbFJvdGF0ZShhbmdsZSk7XG4gIH07XG5cbiAgY3R4LmNsaXAgPSBmdW5jdGlvbiBjdHhSb3RhdGUocnVsZSkge1xuICAgIGRlc3RDdHguY2xpcChydWxlKTtcblxuICAgIHRoaXMuX19vcmlnaW5hbENsaXAocnVsZSk7XG4gIH07XG5cbiAgY3R4Lm1vdmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgZGVzdEN0eC5tb3ZlVG8oeCwgeSk7XG5cbiAgICB0aGlzLl9fb3JpZ2luYWxNb3ZlVG8oeCwgeSk7XG4gIH07XG5cbiAgY3R4LmxpbmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgZGVzdEN0eC5saW5lVG8oeCwgeSk7XG5cbiAgICB0aGlzLl9fb3JpZ2luYWxMaW5lVG8oeCwgeSk7XG4gIH07XG5cbiAgY3R4LmJlemllckN1cnZlVG8gPSBmdW5jdGlvbiAoY3AxeCwgY3AxeSwgY3AyeCwgY3AyeSwgeCwgeSkge1xuICAgIGRlc3RDdHguYmV6aWVyQ3VydmVUbyhjcDF4LCBjcDF5LCBjcDJ4LCBjcDJ5LCB4LCB5KTtcblxuICAgIHRoaXMuX19vcmlnaW5hbEJlemllckN1cnZlVG8oY3AxeCwgY3AxeSwgY3AyeCwgY3AyeSwgeCwgeSk7XG4gIH07XG5cbiAgY3R4LnJlY3QgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgIGRlc3RDdHgucmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHRoaXMuX19vcmlnaW5hbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gIH07XG5cbiAgY3R4LmNsb3NlUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICBkZXN0Q3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgdGhpcy5fX29yaWdpbmFsQ2xvc2VQYXRoKCk7XG4gIH07XG5cbiAgY3R4LmJlZ2luUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICBkZXN0Q3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgdGhpcy5fX29yaWdpbmFsQmVnaW5QYXRoKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFkZENvbnRleHRDdXJyZW50VHJhbnNmb3JtKGN0eCkge1xuICBpZiAoY3R4Ll90cmFuc2Zvcm1TdGFjaykge1xuICAgIGN0eC5fdHJhbnNmb3JtU3RhY2sgPSBbXTtcbiAgfVxuXG4gIGlmIChjdHgubW96Q3VycmVudFRyYW5zZm9ybSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGN0eC5fb3JpZ2luYWxTYXZlID0gY3R4LnNhdmU7XG4gIGN0eC5fb3JpZ2luYWxSZXN0b3JlID0gY3R4LnJlc3RvcmU7XG4gIGN0eC5fb3JpZ2luYWxSb3RhdGUgPSBjdHgucm90YXRlO1xuICBjdHguX29yaWdpbmFsU2NhbGUgPSBjdHguc2NhbGU7XG4gIGN0eC5fb3JpZ2luYWxUcmFuc2xhdGUgPSBjdHgudHJhbnNsYXRlO1xuICBjdHguX29yaWdpbmFsVHJhbnNmb3JtID0gY3R4LnRyYW5zZm9ybTtcbiAgY3R4Ll9vcmlnaW5hbFNldFRyYW5zZm9ybSA9IGN0eC5zZXRUcmFuc2Zvcm07XG4gIGN0eC5fb3JpZ2luYWxSZXNldFRyYW5zZm9ybSA9IGN0eC5yZXNldFRyYW5zZm9ybTtcbiAgY3R4Ll90cmFuc2Zvcm1NYXRyaXggPSBjdHguX3RyYW5zZm9ybU1hdHJpeCB8fCBbMSwgMCwgMCwgMSwgMCwgMF07XG4gIGN0eC5fdHJhbnNmb3JtU3RhY2sgPSBbXTtcblxuICB0cnkge1xuICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5nZXRQcm90b3R5cGVPZihjdHgpLCBcImxpbmVXaWR0aFwiKTtcbiAgICBjdHguX3NldExpbmVXaWR0aCA9IGRlc2Muc2V0O1xuICAgIGN0eC5fZ2V0TGluZVdpZHRoID0gZGVzYy5nZXQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwgXCJsaW5lV2lkdGhcIiwge1xuICAgICAgc2V0OiBmdW5jdGlvbiBzZXRMaW5lV2lkdGgod2lkdGgpIHtcbiAgICAgICAgdGhpcy5fc2V0TGluZVdpZHRoKHdpZHRoICogTElORVdJRFRIX1NDQUxFX0ZBQ1RPUik7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXRMaW5lV2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRMaW5lV2lkdGgoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBcIm1vekN1cnJlbnRUcmFuc2Zvcm1cIiwge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0Q3VycmVudFRyYW5zZm9ybSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1NYXRyaXg7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwgXCJtb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZVwiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSgpIHtcbiAgICAgIGNvbnN0IFthLCBiLCBjLCBkLCBlLCBmXSA9IHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcbiAgICAgIGNvbnN0IGFkX2JjID0gYSAqIGQgLSBiICogYztcbiAgICAgIGNvbnN0IGJjX2FkID0gYiAqIGMgLSBhICogZDtcbiAgICAgIHJldHVybiBbZCAvIGFkX2JjLCBiIC8gYmNfYWQsIGMgLyBiY19hZCwgYSAvIGFkX2JjLCAoZCAqIGUgLSBjICogZikgLyBiY19hZCwgKGIgKiBlIC0gYSAqIGYpIC8gYWRfYmNdO1xuICAgIH1cbiAgfSk7XG5cbiAgY3R4LnNhdmUgPSBmdW5jdGlvbiBjdHhTYXZlKCkge1xuICAgIGNvbnN0IG9sZCA9IHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcblxuICAgIHRoaXMuX3RyYW5zZm9ybVN0YWNrLnB1c2gob2xkKTtcblxuICAgIHRoaXMuX3RyYW5zZm9ybU1hdHJpeCA9IG9sZC5zbGljZSgwLCA2KTtcblxuICAgIHRoaXMuX29yaWdpbmFsU2F2ZSgpO1xuICB9O1xuXG4gIGN0eC5yZXN0b3JlID0gZnVuY3Rpb24gY3R4UmVzdG9yZSgpIHtcbiAgICBpZiAodGhpcy5fdHJhbnNmb3JtU3RhY2subGVuZ3RoID09PSAwKSB7XG4gICAgICAoMCwgX3V0aWwud2FybikoXCJUcmllZCB0byByZXN0b3JlIGEgY3R4IHdoZW4gdGhlIHN0YWNrIHdhcyBhbHJlYWR5IGVtcHR5LlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2ID0gdGhpcy5fdHJhbnNmb3JtU3RhY2sucG9wKCk7XG5cbiAgICBpZiAocHJldikge1xuICAgICAgdGhpcy5fdHJhbnNmb3JtTWF0cml4ID0gcHJldjtcblxuICAgICAgdGhpcy5fb3JpZ2luYWxSZXN0b3JlKCk7XG4gICAgfVxuICB9O1xuXG4gIGN0eC50cmFuc2xhdGUgPSBmdW5jdGlvbiBjdHhUcmFuc2xhdGUoeCwgeSkge1xuICAgIGNvbnN0IG0gPSB0aGlzLl90cmFuc2Zvcm1NYXRyaXg7XG4gICAgbVs0XSA9IG1bMF0gKiB4ICsgbVsyXSAqIHkgKyBtWzRdO1xuICAgIG1bNV0gPSBtWzFdICogeCArIG1bM10gKiB5ICsgbVs1XTtcblxuICAgIHRoaXMuX29yaWdpbmFsVHJhbnNsYXRlKHgsIHkpO1xuICB9O1xuXG4gIGN0eC5zY2FsZSA9IGZ1bmN0aW9uIGN0eFNjYWxlKHgsIHkpIHtcbiAgICBjb25zdCBtID0gdGhpcy5fdHJhbnNmb3JtTWF0cml4O1xuICAgIG1bMF0gKj0geDtcbiAgICBtWzFdICo9IHg7XG4gICAgbVsyXSAqPSB5O1xuICAgIG1bM10gKj0geTtcblxuICAgIHRoaXMuX29yaWdpbmFsU2NhbGUoeCwgeSk7XG4gIH07XG5cbiAgY3R4LnRyYW5zZm9ybSA9IGZ1bmN0aW9uIGN0eFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgY29uc3QgbSA9IHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcbiAgICB0aGlzLl90cmFuc2Zvcm1NYXRyaXggPSBbbVswXSAqIGEgKyBtWzJdICogYiwgbVsxXSAqIGEgKyBtWzNdICogYiwgbVswXSAqIGMgKyBtWzJdICogZCwgbVsxXSAqIGMgKyBtWzNdICogZCwgbVswXSAqIGUgKyBtWzJdICogZiArIG1bNF0sIG1bMV0gKiBlICsgbVszXSAqIGYgKyBtWzVdXTtcblxuICAgIGN0eC5fb3JpZ2luYWxUcmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZik7XG4gIH07XG5cbiAgY3R4LnNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uIGN0eFNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgdGhpcy5fdHJhbnNmb3JtTWF0cml4ID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuXG4gICAgY3R4Ll9vcmlnaW5hbFNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKTtcbiAgfTtcblxuICBjdHgucmVzZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBjdHhSZXNldFRyYW5zZm9ybSgpIHtcbiAgICB0aGlzLl90cmFuc2Zvcm1NYXRyaXggPSBbMSwgMCwgMCwgMSwgMCwgMF07XG5cbiAgICBjdHguX29yaWdpbmFsUmVzZXRUcmFuc2Zvcm0oKTtcbiAgfTtcblxuICBjdHgucm90YXRlID0gZnVuY3Rpb24gY3R4Um90YXRlKGFuZ2xlKSB7XG4gICAgY29uc3QgY29zVmFsdWUgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgY29uc3Qgc2luVmFsdWUgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgY29uc3QgbSA9IHRoaXMuX3RyYW5zZm9ybU1hdHJpeDtcbiAgICB0aGlzLl90cmFuc2Zvcm1NYXRyaXggPSBbbVswXSAqIGNvc1ZhbHVlICsgbVsyXSAqIHNpblZhbHVlLCBtWzFdICogY29zVmFsdWUgKyBtWzNdICogc2luVmFsdWUsIG1bMF0gKiAtc2luVmFsdWUgKyBtWzJdICogY29zVmFsdWUsIG1bMV0gKiAtc2luVmFsdWUgKyBtWzNdICogY29zVmFsdWUsIG1bNF0sIG1bNV1dO1xuXG4gICAgdGhpcy5fb3JpZ2luYWxSb3RhdGUoYW5nbGUpO1xuICB9O1xufVxuXG5jbGFzcyBDYWNoZWRDYW52YXNlcyB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhc0ZhY3RvcnkpIHtcbiAgICB0aGlzLmNhbnZhc0ZhY3RvcnkgPSBjYW52YXNGYWN0b3J5O1xuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgZ2V0Q2FudmFzKGlkLCB3aWR0aCwgaGVpZ2h0LCB0cmFja1RyYW5zZm9ybSkge1xuICAgIGxldCBjYW52YXNFbnRyeTtcblxuICAgIGlmICh0aGlzLmNhY2hlW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjYW52YXNFbnRyeSA9IHRoaXMuY2FjaGVbaWRdO1xuICAgICAgdGhpcy5jYW52YXNGYWN0b3J5LnJlc2V0KGNhbnZhc0VudHJ5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIGNhbnZhc0VudHJ5LmNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW52YXNFbnRyeSA9IHRoaXMuY2FudmFzRmFjdG9yeS5jcmVhdGUod2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLmNhY2hlW2lkXSA9IGNhbnZhc0VudHJ5O1xuICAgIH1cblxuICAgIGlmICh0cmFja1RyYW5zZm9ybSkge1xuICAgICAgYWRkQ29udGV4dEN1cnJlbnRUcmFuc2Zvcm0oY2FudmFzRW50cnkuY29udGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbnZhc0VudHJ5O1xuICB9XG5cbiAgZGVsZXRlKGlkKSB7XG4gICAgZGVsZXRlIHRoaXMuY2FjaGVbaWRdO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLmNhY2hlKSB7XG4gICAgICBjb25zdCBjYW52YXNFbnRyeSA9IHRoaXMuY2FjaGVbaWRdO1xuICAgICAgdGhpcy5jYW52YXNGYWN0b3J5LmRlc3Ryb3koY2FudmFzRW50cnkpO1xuICAgICAgZGVsZXRlIHRoaXMuY2FjaGVbaWRdO1xuICAgIH1cbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGRyYXdJbWFnZUF0SW50ZWdlckNvb3JkcyhjdHgsIHNyY0ltZywgc3JjWCwgc3JjWSwgc3JjVywgc3JjSCwgZGVzdFgsIGRlc3RZLCBkZXN0VywgZGVzdEgpIHtcbiAgY29uc3QgW2EsIGIsIGMsIGQsIHR4LCB0eV0gPSBjdHgubW96Q3VycmVudFRyYW5zZm9ybTtcblxuICBpZiAoYiA9PT0gMCAmJiBjID09PSAwKSB7XG4gICAgY29uc3QgdGxYID0gZGVzdFggKiBhICsgdHg7XG4gICAgY29uc3QgclRsWCA9IE1hdGgucm91bmQodGxYKTtcbiAgICBjb25zdCB0bFkgPSBkZXN0WSAqIGQgKyB0eTtcbiAgICBjb25zdCByVGxZID0gTWF0aC5yb3VuZCh0bFkpO1xuICAgIGNvbnN0IGJyWCA9IChkZXN0WCArIGRlc3RXKSAqIGEgKyB0eDtcbiAgICBjb25zdCByV2lkdGggPSBNYXRoLmFicyhNYXRoLnJvdW5kKGJyWCkgLSByVGxYKSB8fCAxO1xuICAgIGNvbnN0IGJyWSA9IChkZXN0WSArIGRlc3RIKSAqIGQgKyB0eTtcbiAgICBjb25zdCBySGVpZ2h0ID0gTWF0aC5hYnMoTWF0aC5yb3VuZChiclkpIC0gclRsWSkgfHwgMTtcbiAgICBjdHguc2V0VHJhbnNmb3JtKE1hdGguc2lnbihhKSwgMCwgMCwgTWF0aC5zaWduKGQpLCByVGxYLCByVGxZKTtcbiAgICBjdHguZHJhd0ltYWdlKHNyY0ltZywgc3JjWCwgc3JjWSwgc3JjVywgc3JjSCwgMCwgMCwgcldpZHRoLCBySGVpZ2h0KTtcbiAgICBjdHguc2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIHR4LCB0eSk7XG4gICAgcmV0dXJuIFtyV2lkdGgsIHJIZWlnaHRdO1xuICB9XG5cbiAgaWYgKGEgPT09IDAgJiYgZCA9PT0gMCkge1xuICAgIGNvbnN0IHRsWCA9IGRlc3RZICogYyArIHR4O1xuICAgIGNvbnN0IHJUbFggPSBNYXRoLnJvdW5kKHRsWCk7XG4gICAgY29uc3QgdGxZID0gZGVzdFggKiBiICsgdHk7XG4gICAgY29uc3QgclRsWSA9IE1hdGgucm91bmQodGxZKTtcbiAgICBjb25zdCBiclggPSAoZGVzdFkgKyBkZXN0SCkgKiBjICsgdHg7XG4gICAgY29uc3QgcldpZHRoID0gTWF0aC5hYnMoTWF0aC5yb3VuZChiclgpIC0gclRsWCkgfHwgMTtcbiAgICBjb25zdCBiclkgPSAoZGVzdFggKyBkZXN0VykgKiBiICsgdHk7XG4gICAgY29uc3QgckhlaWdodCA9IE1hdGguYWJzKE1hdGgucm91bmQoYnJZKSAtIHJUbFkpIHx8IDE7XG4gICAgY3R4LnNldFRyYW5zZm9ybSgwLCBNYXRoLnNpZ24oYiksIE1hdGguc2lnbihjKSwgMCwgclRsWCwgclRsWSk7XG4gICAgY3R4LmRyYXdJbWFnZShzcmNJbWcsIHNyY1gsIHNyY1ksIHNyY1csIHNyY0gsIDAsIDAsIHJIZWlnaHQsIHJXaWR0aCk7XG4gICAgY3R4LnNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCB0eCwgdHkpO1xuICAgIHJldHVybiBbckhlaWdodCwgcldpZHRoXTtcbiAgfVxuXG4gIGN0eC5kcmF3SW1hZ2Uoc3JjSW1nLCBzcmNYLCBzcmNZLCBzcmNXLCBzcmNILCBkZXN0WCwgZGVzdFksIGRlc3RXLCBkZXN0SCk7XG4gIGNvbnN0IHNjYWxlWCA9IE1hdGguaHlwb3QoYSwgYik7XG4gIGNvbnN0IHNjYWxlWSA9IE1hdGguaHlwb3QoYywgZCk7XG4gIHJldHVybiBbc2NhbGVYICogZGVzdFcsIHNjYWxlWSAqIGRlc3RIXTtcbn1cblxuZnVuY3Rpb24gY29tcGlsZVR5cGUzR2x5cGgoaW1nRGF0YSkge1xuICBjb25zdCB7XG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0XG4gIH0gPSBpbWdEYXRhO1xuXG4gIGlmICghQ09NUElMRV9UWVBFM19HTFlQSFMgfHwgd2lkdGggPiBNQVhfU0laRV9UT19DT01QSUxFIHx8IGhlaWdodCA+IE1BWF9TSVpFX1RPX0NPTVBJTEUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IFBPSU5UX1RPX1BST0NFU1NfTElNSVQgPSAxMDAwO1xuICBjb25zdCBQT0lOVF9UWVBFUyA9IG5ldyBVaW50OEFycmF5KFswLCAyLCA0LCAwLCAxLCAwLCA1LCA0LCA4LCAxMCwgMCwgOCwgMCwgMiwgMSwgMF0pO1xuICBjb25zdCB3aWR0aDEgPSB3aWR0aCArIDE7XG4gIGxldCBwb2ludHMgPSBuZXcgVWludDhBcnJheSh3aWR0aDEgKiAoaGVpZ2h0ICsgMSkpO1xuICBsZXQgaSwgaiwgajA7XG4gIGNvbnN0IGxpbmVTaXplID0gd2lkdGggKyA3ICYgfjc7XG4gIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobGluZVNpemUgKiBoZWlnaHQpLFxuICAgICAgcG9zID0gMDtcblxuICBmb3IgKGNvbnN0IGVsZW0gb2YgaW1nRGF0YS5kYXRhKSB7XG4gICAgbGV0IG1hc2sgPSAxMjg7XG5cbiAgICB3aGlsZSAobWFzayA+IDApIHtcbiAgICAgIGRhdGFbcG9zKytdID0gZWxlbSAmIG1hc2sgPyAwIDogMjU1O1xuICAgICAgbWFzayA+Pj0gMTtcbiAgICB9XG4gIH1cblxuICBsZXQgY291bnQgPSAwO1xuICBwb3MgPSAwO1xuXG4gIGlmIChkYXRhW3Bvc10gIT09IDApIHtcbiAgICBwb2ludHNbMF0gPSAxO1xuICAgICsrY291bnQ7XG4gIH1cblxuICBmb3IgKGogPSAxOyBqIDwgd2lkdGg7IGorKykge1xuICAgIGlmIChkYXRhW3Bvc10gIT09IGRhdGFbcG9zICsgMV0pIHtcbiAgICAgIHBvaW50c1tqXSA9IGRhdGFbcG9zXSA/IDIgOiAxO1xuICAgICAgKytjb3VudDtcbiAgICB9XG5cbiAgICBwb3MrKztcbiAgfVxuXG4gIGlmIChkYXRhW3Bvc10gIT09IDApIHtcbiAgICBwb2ludHNbal0gPSAyO1xuICAgICsrY291bnQ7XG4gIH1cblxuICBmb3IgKGkgPSAxOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICBwb3MgPSBpICogbGluZVNpemU7XG4gICAgajAgPSBpICogd2lkdGgxO1xuXG4gICAgaWYgKGRhdGFbcG9zIC0gbGluZVNpemVdICE9PSBkYXRhW3Bvc10pIHtcbiAgICAgIHBvaW50c1tqMF0gPSBkYXRhW3Bvc10gPyAxIDogODtcbiAgICAgICsrY291bnQ7XG4gICAgfVxuXG4gICAgbGV0IHN1bSA9IChkYXRhW3Bvc10gPyA0IDogMCkgKyAoZGF0YVtwb3MgLSBsaW5lU2l6ZV0gPyA4IDogMCk7XG5cbiAgICBmb3IgKGogPSAxOyBqIDwgd2lkdGg7IGorKykge1xuICAgICAgc3VtID0gKHN1bSA+PiAyKSArIChkYXRhW3BvcyArIDFdID8gNCA6IDApICsgKGRhdGFbcG9zIC0gbGluZVNpemUgKyAxXSA/IDggOiAwKTtcblxuICAgICAgaWYgKFBPSU5UX1RZUEVTW3N1bV0pIHtcbiAgICAgICAgcG9pbnRzW2owICsgal0gPSBQT0lOVF9UWVBFU1tzdW1dO1xuICAgICAgICArK2NvdW50O1xuICAgICAgfVxuXG4gICAgICBwb3MrKztcbiAgICB9XG5cbiAgICBpZiAoZGF0YVtwb3MgLSBsaW5lU2l6ZV0gIT09IGRhdGFbcG9zXSkge1xuICAgICAgcG9pbnRzW2owICsgal0gPSBkYXRhW3Bvc10gPyAyIDogNDtcbiAgICAgICsrY291bnQ7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50ID4gUE9JTlRfVE9fUFJPQ0VTU19MSU1JVCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcG9zID0gbGluZVNpemUgKiAoaGVpZ2h0IC0gMSk7XG4gIGowID0gaSAqIHdpZHRoMTtcblxuICBpZiAoZGF0YVtwb3NdICE9PSAwKSB7XG4gICAgcG9pbnRzW2owXSA9IDg7XG4gICAgKytjb3VudDtcbiAgfVxuXG4gIGZvciAoaiA9IDE7IGogPCB3aWR0aDsgaisrKSB7XG4gICAgaWYgKGRhdGFbcG9zXSAhPT0gZGF0YVtwb3MgKyAxXSkge1xuICAgICAgcG9pbnRzW2owICsgal0gPSBkYXRhW3Bvc10gPyA0IDogODtcbiAgICAgICsrY291bnQ7XG4gICAgfVxuXG4gICAgcG9zKys7XG4gIH1cblxuICBpZiAoZGF0YVtwb3NdICE9PSAwKSB7XG4gICAgcG9pbnRzW2owICsgal0gPSA0O1xuICAgICsrY291bnQ7XG4gIH1cblxuICBpZiAoY291bnQgPiBQT0lOVF9UT19QUk9DRVNTX0xJTUlUKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBzdGVwcyA9IG5ldyBJbnQzMkFycmF5KFswLCB3aWR0aDEsIC0xLCAwLCAtd2lkdGgxLCAwLCAwLCAwLCAxXSk7XG4gIGxldCBwYXRoLCBvdXRsaW5lcywgY29vcmRzO1xuXG4gIGlmICghX2lzX25vZGUuaXNOb2RlSlMpIHtcbiAgICBwYXRoID0gbmV3IFBhdGgyRCgpO1xuICB9IGVsc2Uge1xuICAgIG91dGxpbmVzID0gW107XG4gIH1cblxuICBmb3IgKGkgPSAwOyBjb3VudCAmJiBpIDw9IGhlaWdodDsgaSsrKSB7XG4gICAgbGV0IHAgPSBpICogd2lkdGgxO1xuICAgIGNvbnN0IGVuZCA9IHAgKyB3aWR0aDtcblxuICAgIHdoaWxlIChwIDwgZW5kICYmICFwb2ludHNbcF0pIHtcbiAgICAgIHArKztcbiAgICB9XG5cbiAgICBpZiAocCA9PT0gZW5kKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAocGF0aCkge1xuICAgICAgcGF0aC5tb3ZlVG8ocCAlIHdpZHRoMSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvb3JkcyA9IFtwICUgd2lkdGgxLCBpXTtcbiAgICB9XG5cbiAgICBjb25zdCBwMCA9IHA7XG4gICAgbGV0IHR5cGUgPSBwb2ludHNbcF07XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBzdGVwID0gc3RlcHNbdHlwZV07XG5cbiAgICAgIGRvIHtcbiAgICAgICAgcCArPSBzdGVwO1xuICAgICAgfSB3aGlsZSAoIXBvaW50c1twXSk7XG5cbiAgICAgIGNvbnN0IHBwID0gcG9pbnRzW3BdO1xuXG4gICAgICBpZiAocHAgIT09IDUgJiYgcHAgIT09IDEwKSB7XG4gICAgICAgIHR5cGUgPSBwcDtcbiAgICAgICAgcG9pbnRzW3BdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHR5cGUgPSBwcCAmIDB4MzMgKiB0eXBlID4+IDQ7XG4gICAgICAgIHBvaW50c1twXSAmPSB0eXBlID4+IDIgfCB0eXBlIDw8IDI7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgIHBhdGgubGluZVRvKHAgJSB3aWR0aDEsIHAgLyB3aWR0aDEgfCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvb3Jkcy5wdXNoKHAgJSB3aWR0aDEsIHAgLyB3aWR0aDEgfCAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFwb2ludHNbcF0pIHtcbiAgICAgICAgLS1jb3VudDtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChwMCAhPT0gcCk7XG5cbiAgICBpZiAoIXBhdGgpIHtcbiAgICAgIG91dGxpbmVzLnB1c2goY29vcmRzKTtcbiAgICB9XG5cbiAgICAtLWk7XG4gIH1cblxuICBkYXRhID0gbnVsbDtcbiAgcG9pbnRzID0gbnVsbDtcblxuICBjb25zdCBkcmF3T3V0bGluZSA9IGZ1bmN0aW9uIChjKSB7XG4gICAgYy5zYXZlKCk7XG4gICAgYy5zY2FsZSgxIC8gd2lkdGgsIC0xIC8gaGVpZ2h0KTtcbiAgICBjLnRyYW5zbGF0ZSgwLCAtaGVpZ2h0KTtcblxuICAgIGlmIChwYXRoKSB7XG4gICAgICBjLmZpbGwocGF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMuYmVnaW5QYXRoKCk7XG5cbiAgICAgIGZvciAoY29uc3QgbyBvZiBvdXRsaW5lcykge1xuICAgICAgICBjLm1vdmVUbyhvWzBdLCBvWzFdKTtcblxuICAgICAgICBmb3IgKGxldCBsID0gMiwgbGwgPSBvLmxlbmd0aDsgbCA8IGxsOyBsICs9IDIpIHtcbiAgICAgICAgICBjLmxpbmVUbyhvW2xdLCBvW2wgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYy5maWxsKCk7XG4gICAgfVxuXG4gICAgYy5iZWdpblBhdGgoKTtcbiAgICBjLnJlc3RvcmUoKTtcbiAgfTtcblxuICByZXR1cm4gZHJhd091dGxpbmU7XG59XG5cbmNsYXNzIENhbnZhc0V4dHJhU3RhdGUge1xuICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdGhpcy5hbHBoYUlzU2hhcGUgPSBmYWxzZTtcbiAgICB0aGlzLmZvbnRTaXplID0gMDtcbiAgICB0aGlzLmZvbnRTaXplU2NhbGUgPSAxO1xuICAgIHRoaXMudGV4dE1hdHJpeCA9IF91dGlsLklERU5USVRZX01BVFJJWDtcbiAgICB0aGlzLnRleHRNYXRyaXhTY2FsZSA9IDE7XG4gICAgdGhpcy5mb250TWF0cml4ID0gX3V0aWwuRk9OVF9JREVOVElUWV9NQVRSSVg7XG4gICAgdGhpcy5sZWFkaW5nID0gMDtcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgdGhpcy5saW5lWCA9IDA7XG4gICAgdGhpcy5saW5lWSA9IDA7XG4gICAgdGhpcy5jaGFyU3BhY2luZyA9IDA7XG4gICAgdGhpcy53b3JkU3BhY2luZyA9IDA7XG4gICAgdGhpcy50ZXh0SFNjYWxlID0gMTtcbiAgICB0aGlzLnRleHRSZW5kZXJpbmdNb2RlID0gX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuRklMTDtcbiAgICB0aGlzLnRleHRSaXNlID0gMDtcbiAgICB0aGlzLmZpbGxDb2xvciA9IFwiIzAwMDAwMFwiO1xuICAgIHRoaXMuc3Ryb2tlQ29sb3IgPSBcIiMwMDAwMDBcIjtcbiAgICB0aGlzLnBhdHRlcm5GaWxsID0gZmFsc2U7XG4gICAgdGhpcy5maWxsQWxwaGEgPSAxO1xuICAgIHRoaXMuc3Ryb2tlQWxwaGEgPSAxO1xuICAgIHRoaXMubGluZVdpZHRoID0gMTtcbiAgICB0aGlzLmFjdGl2ZVNNYXNrID0gbnVsbDtcbiAgICB0aGlzLnRyYW5zZmVyTWFwcyA9IG51bGw7XG4gICAgdGhpcy5zdGFydE5ld1BhdGhBbmRDbGlwQm94KFswLCAwLCB3aWR0aCwgaGVpZ2h0XSk7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICBjb25zdCBjbG9uZSA9IE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgY2xvbmUuY2xpcEJveCA9IHRoaXMuY2xpcEJveC5zbGljZSgpO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuXG4gIHNldEN1cnJlbnRQb2ludCh4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICB9XG5cbiAgdXBkYXRlUGF0aE1pbk1heCh0cmFuc2Zvcm0sIHgsIHkpIHtcbiAgICBbeCwgeV0gPSBfdXRpbC5VdGlsLmFwcGx5VHJhbnNmb3JtKFt4LCB5XSwgdHJhbnNmb3JtKTtcbiAgICB0aGlzLm1pblggPSBNYXRoLm1pbih0aGlzLm1pblgsIHgpO1xuICAgIHRoaXMubWluWSA9IE1hdGgubWluKHRoaXMubWluWSwgeSk7XG4gICAgdGhpcy5tYXhYID0gTWF0aC5tYXgodGhpcy5tYXhYLCB4KTtcbiAgICB0aGlzLm1heFkgPSBNYXRoLm1heCh0aGlzLm1heFksIHkpO1xuICB9XG5cbiAgdXBkYXRlUmVjdE1pbk1heCh0cmFuc2Zvcm0sIHJlY3QpIHtcbiAgICBjb25zdCBwMSA9IF91dGlsLlV0aWwuYXBwbHlUcmFuc2Zvcm0ocmVjdCwgdHJhbnNmb3JtKTtcblxuICAgIGNvbnN0IHAyID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShyZWN0LnNsaWNlKDIpLCB0cmFuc2Zvcm0pO1xuXG4gICAgdGhpcy5taW5YID0gTWF0aC5taW4odGhpcy5taW5YLCBwMVswXSwgcDJbMF0pO1xuICAgIHRoaXMubWluWSA9IE1hdGgubWluKHRoaXMubWluWSwgcDFbMV0sIHAyWzFdKTtcbiAgICB0aGlzLm1heFggPSBNYXRoLm1heCh0aGlzLm1heFgsIHAxWzBdLCBwMlswXSk7XG4gICAgdGhpcy5tYXhZID0gTWF0aC5tYXgodGhpcy5tYXhZLCBwMVsxXSwgcDJbMV0pO1xuICB9XG5cbiAgdXBkYXRlU2NhbGluZ1BhdGhNaW5NYXgodHJhbnNmb3JtLCBtaW5NYXgpIHtcbiAgICBfdXRpbC5VdGlsLnNjYWxlTWluTWF4KHRyYW5zZm9ybSwgbWluTWF4KTtcblxuICAgIHRoaXMubWluWCA9IE1hdGgubWluKHRoaXMubWluWCwgbWluTWF4WzBdKTtcbiAgICB0aGlzLm1heFggPSBNYXRoLm1heCh0aGlzLm1heFgsIG1pbk1heFsxXSk7XG4gICAgdGhpcy5taW5ZID0gTWF0aC5taW4odGhpcy5taW5ZLCBtaW5NYXhbMl0pO1xuICAgIHRoaXMubWF4WSA9IE1hdGgubWF4KHRoaXMubWF4WSwgbWluTWF4WzNdKTtcbiAgfVxuXG4gIHVwZGF0ZUN1cnZlUGF0aE1pbk1heCh0cmFuc2Zvcm0sIHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgbWluTWF4KSB7XG4gICAgY29uc3QgYm94ID0gX3V0aWwuVXRpbC5iZXppZXJCb3VuZGluZ0JveCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpO1xuXG4gICAgaWYgKG1pbk1heCkge1xuICAgICAgbWluTWF4WzBdID0gTWF0aC5taW4obWluTWF4WzBdLCBib3hbMF0sIGJveFsyXSk7XG4gICAgICBtaW5NYXhbMV0gPSBNYXRoLm1heChtaW5NYXhbMV0sIGJveFswXSwgYm94WzJdKTtcbiAgICAgIG1pbk1heFsyXSA9IE1hdGgubWluKG1pbk1heFsyXSwgYm94WzFdLCBib3hbM10pO1xuICAgICAgbWluTWF4WzNdID0gTWF0aC5tYXgobWluTWF4WzNdLCBib3hbMV0sIGJveFszXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVSZWN0TWluTWF4KHRyYW5zZm9ybSwgYm94KTtcbiAgfVxuXG4gIGdldFBhdGhCb3VuZGluZ0JveChwYXRoVHlwZSA9IF9wYXR0ZXJuX2hlbHBlci5QYXRoVHlwZS5GSUxMLCB0cmFuc2Zvcm0gPSBudWxsKSB7XG4gICAgY29uc3QgYm94ID0gW3RoaXMubWluWCwgdGhpcy5taW5ZLCB0aGlzLm1heFgsIHRoaXMubWF4WV07XG5cbiAgICBpZiAocGF0aFR5cGUgPT09IF9wYXR0ZXJuX2hlbHBlci5QYXRoVHlwZS5TVFJPS0UpIHtcbiAgICAgIGlmICghdHJhbnNmb3JtKSB7XG4gICAgICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJTdHJva2UgYm91bmRpbmcgYm94IG11c3QgaW5jbHVkZSB0cmFuc2Zvcm0uXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzY2FsZSA9IF91dGlsLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodHJhbnNmb3JtKTtcblxuICAgICAgY29uc3QgeFN0cm9rZVBhZCA9IHNjYWxlWzBdICogdGhpcy5saW5lV2lkdGggLyAyO1xuICAgICAgY29uc3QgeVN0cm9rZVBhZCA9IHNjYWxlWzFdICogdGhpcy5saW5lV2lkdGggLyAyO1xuICAgICAgYm94WzBdIC09IHhTdHJva2VQYWQ7XG4gICAgICBib3hbMV0gLT0geVN0cm9rZVBhZDtcbiAgICAgIGJveFsyXSArPSB4U3Ryb2tlUGFkO1xuICAgICAgYm94WzNdICs9IHlTdHJva2VQYWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJveDtcbiAgfVxuXG4gIHVwZGF0ZUNsaXBGcm9tUGF0aCgpIHtcbiAgICBjb25zdCBpbnRlcnNlY3QgPSBfdXRpbC5VdGlsLmludGVyc2VjdCh0aGlzLmNsaXBCb3gsIHRoaXMuZ2V0UGF0aEJvdW5kaW5nQm94KCkpO1xuXG4gICAgdGhpcy5zdGFydE5ld1BhdGhBbmRDbGlwQm94KGludGVyc2VjdCB8fCBbMCwgMCwgMCwgMF0pO1xuICB9XG5cbiAgaXNFbXB0eUNsaXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWluWCA9PT0gSW5maW5pdHk7XG4gIH1cblxuICBzdGFydE5ld1BhdGhBbmRDbGlwQm94KGJveCkge1xuICAgIHRoaXMuY2xpcEJveCA9IGJveDtcbiAgICB0aGlzLm1pblggPSBJbmZpbml0eTtcbiAgICB0aGlzLm1pblkgPSBJbmZpbml0eTtcbiAgICB0aGlzLm1heFggPSAwO1xuICAgIHRoaXMubWF4WSA9IDA7XG4gIH1cblxuICBnZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KHBhdGhUeXBlID0gX3BhdHRlcm5faGVscGVyLlBhdGhUeXBlLkZJTEwsIHRyYW5zZm9ybSA9IG51bGwpIHtcbiAgICByZXR1cm4gX3V0aWwuVXRpbC5pbnRlcnNlY3QodGhpcy5jbGlwQm94LCB0aGlzLmdldFBhdGhCb3VuZGluZ0JveChwYXRoVHlwZSwgdHJhbnNmb3JtKSk7XG4gIH1cblxufVxuXG5mdW5jdGlvbiBwdXRCaW5hcnlJbWFnZURhdGEoY3R4LCBpbWdEYXRhLCB0cmFuc2Zlck1hcHMgPSBudWxsKSB7XG4gIGlmICh0eXBlb2YgSW1hZ2VEYXRhICE9PSBcInVuZGVmaW5lZFwiICYmIGltZ0RhdGEgaW5zdGFuY2VvZiBJbWFnZURhdGEpIHtcbiAgICBjdHgucHV0SW1hZ2VEYXRhKGltZ0RhdGEsIDAsIDApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0LFxuICAgICAgICB3aWR0aCA9IGltZ0RhdGEud2lkdGg7XG4gIGNvbnN0IHBhcnRpYWxDaHVua0hlaWdodCA9IGhlaWdodCAlIEZVTExfQ0hVTktfSEVJR0hUO1xuICBjb25zdCBmdWxsQ2h1bmtzID0gKGhlaWdodCAtIHBhcnRpYWxDaHVua0hlaWdodCkgLyBGVUxMX0NIVU5LX0hFSUdIVDtcbiAgY29uc3QgdG90YWxDaHVua3MgPSBwYXJ0aWFsQ2h1bmtIZWlnaHQgPT09IDAgPyBmdWxsQ2h1bmtzIDogZnVsbENodW5rcyArIDE7XG4gIGNvbnN0IGNodW5rSW1nRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIEZVTExfQ0hVTktfSEVJR0hUKTtcbiAgbGV0IHNyY1BvcyA9IDAsXG4gICAgICBkZXN0UG9zO1xuICBjb25zdCBzcmMgPSBpbWdEYXRhLmRhdGE7XG4gIGNvbnN0IGRlc3QgPSBjaHVua0ltZ0RhdGEuZGF0YTtcbiAgbGV0IGksIGosIHRoaXNDaHVua0hlaWdodCwgZWxlbXNJblRoaXNDaHVuaztcbiAgbGV0IHRyYW5zZmVyTWFwUmVkLCB0cmFuc2Zlck1hcEdyZWVuLCB0cmFuc2Zlck1hcEJsdWUsIHRyYW5zZmVyTWFwR3JheTtcblxuICBpZiAodHJhbnNmZXJNYXBzKSB7XG4gICAgc3dpdGNoICh0cmFuc2Zlck1hcHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHRyYW5zZmVyTWFwUmVkID0gdHJhbnNmZXJNYXBzWzBdO1xuICAgICAgICB0cmFuc2Zlck1hcEdyZWVuID0gdHJhbnNmZXJNYXBzWzBdO1xuICAgICAgICB0cmFuc2Zlck1hcEJsdWUgPSB0cmFuc2Zlck1hcHNbMF07XG4gICAgICAgIHRyYW5zZmVyTWFwR3JheSA9IHRyYW5zZmVyTWFwc1swXTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgNDpcbiAgICAgICAgdHJhbnNmZXJNYXBSZWQgPSB0cmFuc2Zlck1hcHNbMF07XG4gICAgICAgIHRyYW5zZmVyTWFwR3JlZW4gPSB0cmFuc2Zlck1hcHNbMV07XG4gICAgICAgIHRyYW5zZmVyTWFwQmx1ZSA9IHRyYW5zZmVyTWFwc1syXTtcbiAgICAgICAgdHJhbnNmZXJNYXBHcmF5ID0gdHJhbnNmZXJNYXBzWzNdO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoaW1nRGF0YS5raW5kID09PSBfdXRpbC5JbWFnZUtpbmQuR1JBWVNDQUxFXzFCUFApIHtcbiAgICBjb25zdCBzcmNMZW5ndGggPSBzcmMuYnl0ZUxlbmd0aDtcbiAgICBjb25zdCBkZXN0MzIgPSBuZXcgVWludDMyQXJyYXkoZGVzdC5idWZmZXIsIDAsIGRlc3QuYnl0ZUxlbmd0aCA+PiAyKTtcbiAgICBjb25zdCBkZXN0MzJEYXRhTGVuZ3RoID0gZGVzdDMyLmxlbmd0aDtcbiAgICBjb25zdCBmdWxsU3JjRGlmZiA9IHdpZHRoICsgNyA+PiAzO1xuICAgIGxldCB3aGl0ZSA9IDB4ZmZmZmZmZmY7XG4gICAgbGV0IGJsYWNrID0gX3V0aWwuRmVhdHVyZVRlc3QuaXNMaXR0bGVFbmRpYW4gPyAweGZmMDAwMDAwIDogMHgwMDAwMDBmZjtcblxuICAgIGlmICh0cmFuc2Zlck1hcEdyYXkpIHtcbiAgICAgIGlmICh0cmFuc2Zlck1hcEdyYXlbMF0gPT09IDB4ZmYgJiYgdHJhbnNmZXJNYXBHcmF5WzB4ZmZdID09PSAwKSB7XG4gICAgICAgIFt3aGl0ZSwgYmxhY2tdID0gW2JsYWNrLCB3aGl0ZV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRvdGFsQ2h1bmtzOyBpKyspIHtcbiAgICAgIHRoaXNDaHVua0hlaWdodCA9IGkgPCBmdWxsQ2h1bmtzID8gRlVMTF9DSFVOS19IRUlHSFQgOiBwYXJ0aWFsQ2h1bmtIZWlnaHQ7XG4gICAgICBkZXN0UG9zID0gMDtcblxuICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXNDaHVua0hlaWdodDsgaisrKSB7XG4gICAgICAgIGNvbnN0IHNyY0RpZmYgPSBzcmNMZW5ndGggLSBzcmNQb3M7XG4gICAgICAgIGxldCBrID0gMDtcbiAgICAgICAgY29uc3Qga0VuZCA9IHNyY0RpZmYgPiBmdWxsU3JjRGlmZiA/IHdpZHRoIDogc3JjRGlmZiAqIDggLSA3O1xuICAgICAgICBjb25zdCBrRW5kVW5yb2xsZWQgPSBrRW5kICYgfjc7XG4gICAgICAgIGxldCBtYXNrID0gMDtcbiAgICAgICAgbGV0IHNyY0J5dGUgPSAwO1xuXG4gICAgICAgIGZvciAoOyBrIDwga0VuZFVucm9sbGVkOyBrICs9IDgpIHtcbiAgICAgICAgICBzcmNCeXRlID0gc3JjW3NyY1BvcysrXTtcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiAxMjggPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDY0ID8gd2hpdGUgOiBibGFjaztcbiAgICAgICAgICBkZXN0MzJbZGVzdFBvcysrXSA9IHNyY0J5dGUgJiAzMiA/IHdoaXRlIDogYmxhY2s7XG4gICAgICAgICAgZGVzdDMyW2Rlc3RQb3MrK10gPSBzcmNCeXRlICYgMTYgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDggPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDQgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDIgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIDEgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICg7IGsgPCBrRW5kOyBrKyspIHtcbiAgICAgICAgICBpZiAobWFzayA9PT0gMCkge1xuICAgICAgICAgICAgc3JjQnl0ZSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgICAgICBtYXNrID0gMTI4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gc3JjQnl0ZSAmIG1hc2sgPyB3aGl0ZSA6IGJsYWNrO1xuICAgICAgICAgIG1hc2sgPj49IDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgd2hpbGUgKGRlc3RQb3MgPCBkZXN0MzJEYXRhTGVuZ3RoKSB7XG4gICAgICAgIGRlc3QzMltkZXN0UG9zKytdID0gMDtcbiAgICAgIH1cblxuICAgICAgY3R4LnB1dEltYWdlRGF0YShjaHVua0ltZ0RhdGEsIDAsIGkgKiBGVUxMX0NIVU5LX0hFSUdIVCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGltZ0RhdGEua2luZCA9PT0gX3V0aWwuSW1hZ2VLaW5kLlJHQkFfMzJCUFApIHtcbiAgICBjb25zdCBoYXNUcmFuc2Zlck1hcHMgPSAhISh0cmFuc2Zlck1hcFJlZCB8fCB0cmFuc2Zlck1hcEdyZWVuIHx8IHRyYW5zZmVyTWFwQmx1ZSk7XG4gICAgaiA9IDA7XG4gICAgZWxlbXNJblRoaXNDaHVuayA9IHdpZHRoICogRlVMTF9DSFVOS19IRUlHSFQgKiA0O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGZ1bGxDaHVua3M7IGkrKykge1xuICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY1Bvcywgc3JjUG9zICsgZWxlbXNJblRoaXNDaHVuaykpO1xuICAgICAgc3JjUG9zICs9IGVsZW1zSW5UaGlzQ2h1bms7XG5cbiAgICAgIGlmIChoYXNUcmFuc2Zlck1hcHMpIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBlbGVtc0luVGhpc0NodW5rOyBrICs9IDQpIHtcbiAgICAgICAgICBpZiAodHJhbnNmZXJNYXBSZWQpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDBdID0gdHJhbnNmZXJNYXBSZWRbZGVzdFtrICsgMF1dO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0cmFuc2Zlck1hcEdyZWVuKSB7XG4gICAgICAgICAgICBkZXN0W2sgKyAxXSA9IHRyYW5zZmVyTWFwR3JlZW5bZGVzdFtrICsgMV1dO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0cmFuc2Zlck1hcEJsdWUpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDJdID0gdHJhbnNmZXJNYXBCbHVlW2Rlc3RbayArIDJdXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3R4LnB1dEltYWdlRGF0YShjaHVua0ltZ0RhdGEsIDAsIGopO1xuICAgICAgaiArPSBGVUxMX0NIVU5LX0hFSUdIVDtcbiAgICB9XG5cbiAgICBpZiAoaSA8IHRvdGFsQ2h1bmtzKSB7XG4gICAgICBlbGVtc0luVGhpc0NodW5rID0gd2lkdGggKiBwYXJ0aWFsQ2h1bmtIZWlnaHQgKiA0O1xuICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY1Bvcywgc3JjUG9zICsgZWxlbXNJblRoaXNDaHVuaykpO1xuXG4gICAgICBpZiAoaGFzVHJhbnNmZXJNYXBzKSB7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZWxlbXNJblRoaXNDaHVuazsgayArPSA0KSB7XG4gICAgICAgICAgaWYgKHRyYW5zZmVyTWFwUmVkKSB7XG4gICAgICAgICAgICBkZXN0W2sgKyAwXSA9IHRyYW5zZmVyTWFwUmVkW2Rlc3RbayArIDBdXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHJhbnNmZXJNYXBHcmVlbikge1xuICAgICAgICAgICAgZGVzdFtrICsgMV0gPSB0cmFuc2Zlck1hcEdyZWVuW2Rlc3RbayArIDFdXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHJhbnNmZXJNYXBCbHVlKSB7XG4gICAgICAgICAgICBkZXN0W2sgKyAyXSA9IHRyYW5zZmVyTWFwQmx1ZVtkZXN0W2sgKyAyXV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGN0eC5wdXRJbWFnZURhdGEoY2h1bmtJbWdEYXRhLCAwLCBqKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaW1nRGF0YS5raW5kID09PSBfdXRpbC5JbWFnZUtpbmQuUkdCXzI0QlBQKSB7XG4gICAgY29uc3QgaGFzVHJhbnNmZXJNYXBzID0gISEodHJhbnNmZXJNYXBSZWQgfHwgdHJhbnNmZXJNYXBHcmVlbiB8fCB0cmFuc2Zlck1hcEJsdWUpO1xuICAgIHRoaXNDaHVua0hlaWdodCA9IEZVTExfQ0hVTktfSEVJR0hUO1xuICAgIGVsZW1zSW5UaGlzQ2h1bmsgPSB3aWR0aCAqIHRoaXNDaHVua0hlaWdodDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbENodW5rczsgaSsrKSB7XG4gICAgICBpZiAoaSA+PSBmdWxsQ2h1bmtzKSB7XG4gICAgICAgIHRoaXNDaHVua0hlaWdodCA9IHBhcnRpYWxDaHVua0hlaWdodDtcbiAgICAgICAgZWxlbXNJblRoaXNDaHVuayA9IHdpZHRoICogdGhpc0NodW5rSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBkZXN0UG9zID0gMDtcblxuICAgICAgZm9yIChqID0gZWxlbXNJblRoaXNDaHVuazsgai0tOykge1xuICAgICAgICBkZXN0W2Rlc3RQb3MrK10gPSBzcmNbc3JjUG9zKytdO1xuICAgICAgICBkZXN0W2Rlc3RQb3MrK10gPSBzcmNbc3JjUG9zKytdO1xuICAgICAgICBkZXN0W2Rlc3RQb3MrK10gPSBzcmNbc3JjUG9zKytdO1xuICAgICAgICBkZXN0W2Rlc3RQb3MrK10gPSAyNTU7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNUcmFuc2Zlck1hcHMpIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBkZXN0UG9zOyBrICs9IDQpIHtcbiAgICAgICAgICBpZiAodHJhbnNmZXJNYXBSZWQpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDBdID0gdHJhbnNmZXJNYXBSZWRbZGVzdFtrICsgMF1dO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0cmFuc2Zlck1hcEdyZWVuKSB7XG4gICAgICAgICAgICBkZXN0W2sgKyAxXSA9IHRyYW5zZmVyTWFwR3JlZW5bZGVzdFtrICsgMV1dO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0cmFuc2Zlck1hcEJsdWUpIHtcbiAgICAgICAgICAgIGRlc3RbayArIDJdID0gdHJhbnNmZXJNYXBCbHVlW2Rlc3RbayArIDJdXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3R4LnB1dEltYWdlRGF0YShjaHVua0ltZ0RhdGEsIDAsIGkgKiBGVUxMX0NIVU5LX0hFSUdIVCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgYmFkIGltYWdlIGtpbmQ6ICR7aW1nRGF0YS5raW5kfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1dEJpbmFyeUltYWdlTWFzayhjdHgsIGltZ0RhdGEpIHtcbiAgaWYgKGltZ0RhdGEuYml0bWFwKSB7XG4gICAgY3R4LmRyYXdJbWFnZShpbWdEYXRhLmJpdG1hcCwgMCwgMCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaGVpZ2h0ID0gaW1nRGF0YS5oZWlnaHQsXG4gICAgICAgIHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgY29uc3QgcGFydGlhbENodW5rSGVpZ2h0ID0gaGVpZ2h0ICUgRlVMTF9DSFVOS19IRUlHSFQ7XG4gIGNvbnN0IGZ1bGxDaHVua3MgPSAoaGVpZ2h0IC0gcGFydGlhbENodW5rSGVpZ2h0KSAvIEZVTExfQ0hVTktfSEVJR0hUO1xuICBjb25zdCB0b3RhbENodW5rcyA9IHBhcnRpYWxDaHVua0hlaWdodCA9PT0gMCA/IGZ1bGxDaHVua3MgOiBmdWxsQ2h1bmtzICsgMTtcbiAgY29uc3QgY2h1bmtJbWdEYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgRlVMTF9DSFVOS19IRUlHSFQpO1xuICBsZXQgc3JjUG9zID0gMDtcbiAgY29uc3Qgc3JjID0gaW1nRGF0YS5kYXRhO1xuICBjb25zdCBkZXN0ID0gY2h1bmtJbWdEYXRhLmRhdGE7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbENodW5rczsgaSsrKSB7XG4gICAgY29uc3QgdGhpc0NodW5rSGVpZ2h0ID0gaSA8IGZ1bGxDaHVua3MgPyBGVUxMX0NIVU5LX0hFSUdIVCA6IHBhcnRpYWxDaHVua0hlaWdodDtcbiAgICAoe1xuICAgICAgc3JjUG9zXG4gICAgfSA9ICgwLCBfaW1hZ2VfdXRpbHMuYXBwbHlNYXNrSW1hZ2VEYXRhKSh7XG4gICAgICBzcmMsXG4gICAgICBzcmNQb3MsXG4gICAgICBkZXN0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXNDaHVua0hlaWdodFxuICAgIH0pKTtcbiAgICBjdHgucHV0SW1hZ2VEYXRhKGNodW5rSW1nRGF0YSwgMCwgaSAqIEZVTExfQ0hVTktfSEVJR0hUKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb3B5Q3R4U3RhdGUoc291cmNlQ3R4LCBkZXN0Q3R4KSB7XG4gIGNvbnN0IHByb3BlcnRpZXMgPSBbXCJzdHJva2VTdHlsZVwiLCBcImZpbGxTdHlsZVwiLCBcImZpbGxSdWxlXCIsIFwiZ2xvYmFsQWxwaGFcIiwgXCJsaW5lV2lkdGhcIiwgXCJsaW5lQ2FwXCIsIFwibGluZUpvaW5cIiwgXCJtaXRlckxpbWl0XCIsIFwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uXCIsIFwiZm9udFwiXTtcblxuICBmb3IgKGxldCBpID0gMCwgaWkgPSBwcm9wZXJ0aWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbaV07XG5cbiAgICBpZiAoc291cmNlQ3R4W3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZXN0Q3R4W3Byb3BlcnR5XSA9IHNvdXJjZUN0eFtwcm9wZXJ0eV07XG4gICAgfVxuICB9XG5cbiAgaWYgKHNvdXJjZUN0eC5zZXRMaW5lRGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVzdEN0eC5zZXRMaW5lRGFzaChzb3VyY2VDdHguZ2V0TGluZURhc2goKSk7XG4gICAgZGVzdEN0eC5saW5lRGFzaE9mZnNldCA9IHNvdXJjZUN0eC5saW5lRGFzaE9mZnNldDtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXNldEN0eFRvRGVmYXVsdChjdHgsIGZvcmVncm91bmRDb2xvcikge1xuICBjdHguc3Ryb2tlU3R5bGUgPSBjdHguZmlsbFN0eWxlID0gZm9yZWdyb3VuZENvbG9yIHx8IFwiIzAwMDAwMFwiO1xuICBjdHguZmlsbFJ1bGUgPSBcIm5vbnplcm9cIjtcbiAgY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gIGN0eC5saW5lQ2FwID0gXCJidXR0XCI7XG4gIGN0eC5saW5lSm9pbiA9IFwibWl0ZXJcIjtcbiAgY3R4Lm1pdGVyTGltaXQgPSAxMDtcbiAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcbiAgY3R4LmZvbnQgPSBcIjEwcHggc2Fucy1zZXJpZlwiO1xuXG4gIGlmIChjdHguc2V0TGluZURhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgIGN0eC5zZXRMaW5lRGFzaChbXSk7XG4gICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wb3NlU01hc2tCYWNrZHJvcChieXRlcywgcjAsIGcwLCBiMCkge1xuICBjb25zdCBsZW5ndGggPSBieXRlcy5sZW5ndGg7XG5cbiAgZm9yIChsZXQgaSA9IDM7IGkgPCBsZW5ndGg7IGkgKz0gNCkge1xuICAgIGNvbnN0IGFscGhhID0gYnl0ZXNbaV07XG5cbiAgICBpZiAoYWxwaGEgPT09IDApIHtcbiAgICAgIGJ5dGVzW2kgLSAzXSA9IHIwO1xuICAgICAgYnl0ZXNbaSAtIDJdID0gZzA7XG4gICAgICBieXRlc1tpIC0gMV0gPSBiMDtcbiAgICB9IGVsc2UgaWYgKGFscGhhIDwgMjU1KSB7XG4gICAgICBjb25zdCBhbHBoYV8gPSAyNTUgLSBhbHBoYTtcbiAgICAgIGJ5dGVzW2kgLSAzXSA9IGJ5dGVzW2kgLSAzXSAqIGFscGhhICsgcjAgKiBhbHBoYV8gPj4gODtcbiAgICAgIGJ5dGVzW2kgLSAyXSA9IGJ5dGVzW2kgLSAyXSAqIGFscGhhICsgZzAgKiBhbHBoYV8gPj4gODtcbiAgICAgIGJ5dGVzW2kgLSAxXSA9IGJ5dGVzW2kgLSAxXSAqIGFscGhhICsgYjAgKiBhbHBoYV8gPj4gODtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcG9zZVNNYXNrQWxwaGEobWFza0RhdGEsIGxheWVyRGF0YSwgdHJhbnNmZXJNYXApIHtcbiAgY29uc3QgbGVuZ3RoID0gbWFza0RhdGEubGVuZ3RoO1xuICBjb25zdCBzY2FsZSA9IDEgLyAyNTU7XG5cbiAgZm9yIChsZXQgaSA9IDM7IGkgPCBsZW5ndGg7IGkgKz0gNCkge1xuICAgIGNvbnN0IGFscGhhID0gdHJhbnNmZXJNYXAgPyB0cmFuc2Zlck1hcFttYXNrRGF0YVtpXV0gOiBtYXNrRGF0YVtpXTtcbiAgICBsYXllckRhdGFbaV0gPSBsYXllckRhdGFbaV0gKiBhbHBoYSAqIHNjYWxlIHwgMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wb3NlU01hc2tMdW1pbm9zaXR5KG1hc2tEYXRhLCBsYXllckRhdGEsIHRyYW5zZmVyTWFwKSB7XG4gIGNvbnN0IGxlbmd0aCA9IG1hc2tEYXRhLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMzsgaSA8IGxlbmd0aDsgaSArPSA0KSB7XG4gICAgY29uc3QgeSA9IG1hc2tEYXRhW2kgLSAzXSAqIDc3ICsgbWFza0RhdGFbaSAtIDJdICogMTUyICsgbWFza0RhdGFbaSAtIDFdICogMjg7XG4gICAgbGF5ZXJEYXRhW2ldID0gdHJhbnNmZXJNYXAgPyBsYXllckRhdGFbaV0gKiB0cmFuc2Zlck1hcFt5ID4+IDhdID4+IDggOiBsYXllckRhdGFbaV0gKiB5ID4+IDE2O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyaWNDb21wb3NlU01hc2sobWFza0N0eCwgbGF5ZXJDdHgsIHdpZHRoLCBoZWlnaHQsIHN1YnR5cGUsIGJhY2tkcm9wLCB0cmFuc2Zlck1hcCwgbGF5ZXJPZmZzZXRYLCBsYXllck9mZnNldFksIG1hc2tPZmZzZXRYLCBtYXNrT2Zmc2V0WSkge1xuICBjb25zdCBoYXNCYWNrZHJvcCA9ICEhYmFja2Ryb3A7XG4gIGNvbnN0IHIwID0gaGFzQmFja2Ryb3AgPyBiYWNrZHJvcFswXSA6IDA7XG4gIGNvbnN0IGcwID0gaGFzQmFja2Ryb3AgPyBiYWNrZHJvcFsxXSA6IDA7XG4gIGNvbnN0IGIwID0gaGFzQmFja2Ryb3AgPyBiYWNrZHJvcFsyXSA6IDA7XG4gIGxldCBjb21wb3NlRm47XG5cbiAgaWYgKHN1YnR5cGUgPT09IFwiTHVtaW5vc2l0eVwiKSB7XG4gICAgY29tcG9zZUZuID0gY29tcG9zZVNNYXNrTHVtaW5vc2l0eTtcbiAgfSBlbHNlIHtcbiAgICBjb21wb3NlRm4gPSBjb21wb3NlU01hc2tBbHBoYTtcbiAgfVxuXG4gIGNvbnN0IFBJWEVMU19UT19QUk9DRVNTID0gMTA0ODU3NjtcbiAgY29uc3QgY2h1bmtTaXplID0gTWF0aC5taW4oaGVpZ2h0LCBNYXRoLmNlaWwoUElYRUxTX1RPX1BST0NFU1MgLyB3aWR0aCkpO1xuXG4gIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGhlaWdodDsgcm93ICs9IGNodW5rU2l6ZSkge1xuICAgIGNvbnN0IGNodW5rSGVpZ2h0ID0gTWF0aC5taW4oY2h1bmtTaXplLCBoZWlnaHQgLSByb3cpO1xuICAgIGNvbnN0IG1hc2tEYXRhID0gbWFza0N0eC5nZXRJbWFnZURhdGEobGF5ZXJPZmZzZXRYIC0gbWFza09mZnNldFgsIHJvdyArIChsYXllck9mZnNldFkgLSBtYXNrT2Zmc2V0WSksIHdpZHRoLCBjaHVua0hlaWdodCk7XG4gICAgY29uc3QgbGF5ZXJEYXRhID0gbGF5ZXJDdHguZ2V0SW1hZ2VEYXRhKGxheWVyT2Zmc2V0WCwgcm93ICsgbGF5ZXJPZmZzZXRZLCB3aWR0aCwgY2h1bmtIZWlnaHQpO1xuXG4gICAgaWYgKGhhc0JhY2tkcm9wKSB7XG4gICAgICBjb21wb3NlU01hc2tCYWNrZHJvcChtYXNrRGF0YS5kYXRhLCByMCwgZzAsIGIwKTtcbiAgICB9XG5cbiAgICBjb21wb3NlRm4obWFza0RhdGEuZGF0YSwgbGF5ZXJEYXRhLmRhdGEsIHRyYW5zZmVyTWFwKTtcbiAgICBsYXllckN0eC5wdXRJbWFnZURhdGEobGF5ZXJEYXRhLCBsYXllck9mZnNldFgsIHJvdyArIGxheWVyT2Zmc2V0WSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcG9zZVNNYXNrKGN0eCwgc21hc2ssIGxheWVyQ3R4LCBsYXllckJveCkge1xuICBjb25zdCBsYXllck9mZnNldFggPSBsYXllckJveFswXTtcbiAgY29uc3QgbGF5ZXJPZmZzZXRZID0gbGF5ZXJCb3hbMV07XG4gIGNvbnN0IGxheWVyV2lkdGggPSBsYXllckJveFsyXSAtIGxheWVyT2Zmc2V0WDtcbiAgY29uc3QgbGF5ZXJIZWlnaHQgPSBsYXllckJveFszXSAtIGxheWVyT2Zmc2V0WTtcblxuICBpZiAobGF5ZXJXaWR0aCA9PT0gMCB8fCBsYXllckhlaWdodCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGdlbmVyaWNDb21wb3NlU01hc2soc21hc2suY29udGV4dCwgbGF5ZXJDdHgsIGxheWVyV2lkdGgsIGxheWVySGVpZ2h0LCBzbWFzay5zdWJ0eXBlLCBzbWFzay5iYWNrZHJvcCwgc21hc2sudHJhbnNmZXJNYXAsIGxheWVyT2Zmc2V0WCwgbGF5ZXJPZmZzZXRZLCBzbWFzay5vZmZzZXRYLCBzbWFzay5vZmZzZXRZKTtcbiAgY3R4LnNhdmUoKTtcbiAgY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcbiAgY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgY3R4LmRyYXdJbWFnZShsYXllckN0eC5jYW52YXMsIDAsIDApO1xuICBjdHgucmVzdG9yZSgpO1xufVxuXG5mdW5jdGlvbiBnZXRJbWFnZVNtb290aGluZ0VuYWJsZWQodHJhbnNmb3JtLCBpbnRlcnBvbGF0ZSkge1xuICBjb25zdCBzY2FsZSA9IF91dGlsLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodHJhbnNmb3JtKTtcblxuICBzY2FsZVswXSA9IE1hdGguZnJvdW5kKHNjYWxlWzBdKTtcbiAgc2NhbGVbMV0gPSBNYXRoLmZyb3VuZChzY2FsZVsxXSk7XG4gIGNvbnN0IGFjdHVhbFNjYWxlID0gTWF0aC5mcm91bmQoKGdsb2JhbFRoaXMuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSAqIF9kaXNwbGF5X3V0aWxzLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUyk7XG5cbiAgaWYgKGludGVycG9sYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gaW50ZXJwb2xhdGU7XG4gIH0gZWxzZSBpZiAoc2NhbGVbMF0gPD0gYWN0dWFsU2NhbGUgfHwgc2NhbGVbMV0gPD0gYWN0dWFsU2NhbGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuY29uc3QgTElORV9DQVBfU1RZTEVTID0gW1wiYnV0dFwiLCBcInJvdW5kXCIsIFwic3F1YXJlXCJdO1xuY29uc3QgTElORV9KT0lOX1NUWUxFUyA9IFtcIm1pdGVyXCIsIFwicm91bmRcIiwgXCJiZXZlbFwiXTtcbmNvbnN0IE5PUk1BTF9DTElQID0ge307XG5jb25zdCBFT19DTElQID0ge307XG5cbmNsYXNzIENhbnZhc0dyYXBoaWNzIHtcbiAgY29uc3RydWN0b3IoY2FudmFzQ3R4LCBjb21tb25PYmpzLCBvYmpzLCBjYW52YXNGYWN0b3J5LCBpbWFnZUxheWVyLCBvcHRpb25hbENvbnRlbnRDb25maWcsIGFubm90YXRpb25DYW52YXNNYXAsIHBhZ2VDb2xvcnMpIHtcbiAgICB0aGlzLmN0eCA9IGNhbnZhc0N0eDtcbiAgICB0aGlzLmN1cnJlbnQgPSBuZXcgQ2FudmFzRXh0cmFTdGF0ZSh0aGlzLmN0eC5jYW52YXMud2lkdGgsIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMuc3RhdGVTdGFjayA9IFtdO1xuICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgIHRoaXMucGVuZGluZ0VPRmlsbCA9IGZhbHNlO1xuICAgIHRoaXMucmVzID0gbnVsbDtcbiAgICB0aGlzLnhvYmpzID0gbnVsbDtcbiAgICB0aGlzLmNvbW1vbk9ianMgPSBjb21tb25PYmpzO1xuICAgIHRoaXMub2JqcyA9IG9ianM7XG4gICAgdGhpcy5jYW52YXNGYWN0b3J5ID0gY2FudmFzRmFjdG9yeTtcbiAgICB0aGlzLmltYWdlTGF5ZXIgPSBpbWFnZUxheWVyO1xuICAgIHRoaXMuZ3JvdXBTdGFjayA9IFtdO1xuICAgIHRoaXMucHJvY2Vzc2luZ1R5cGUzID0gbnVsbDtcbiAgICB0aGlzLmJhc2VUcmFuc2Zvcm0gPSBudWxsO1xuICAgIHRoaXMuYmFzZVRyYW5zZm9ybVN0YWNrID0gW107XG4gICAgdGhpcy5ncm91cExldmVsID0gMDtcbiAgICB0aGlzLnNtYXNrU3RhY2sgPSBbXTtcbiAgICB0aGlzLnNtYXNrQ291bnRlciA9IDA7XG4gICAgdGhpcy50ZW1wU01hc2sgPSBudWxsO1xuICAgIHRoaXMuc3VzcGVuZGVkQ3R4ID0gbnVsbDtcbiAgICB0aGlzLmNvbnRlbnRWaXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLm1hcmtlZENvbnRlbnRTdGFjayA9IFtdO1xuICAgIHRoaXMub3B0aW9uYWxDb250ZW50Q29uZmlnID0gb3B0aW9uYWxDb250ZW50Q29uZmlnO1xuICAgIHRoaXMuY2FjaGVkQ2FudmFzZXMgPSBuZXcgQ2FjaGVkQ2FudmFzZXModGhpcy5jYW52YXNGYWN0b3J5KTtcbiAgICB0aGlzLmNhY2hlZFBhdHRlcm5zID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCA9IGFubm90YXRpb25DYW52YXNNYXA7XG4gICAgdGhpcy52aWV3cG9ydFNjYWxlID0gMTtcbiAgICB0aGlzLm91dHB1dFNjYWxlWCA9IDE7XG4gICAgdGhpcy5vdXRwdXRTY2FsZVkgPSAxO1xuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gcGFnZUNvbG9ycz8uYmFja2dyb3VuZCB8fCBudWxsO1xuICAgIHRoaXMuZm9yZWdyb3VuZENvbG9yID0gcGFnZUNvbG9ycz8uZm9yZWdyb3VuZCB8fCBudWxsO1xuXG4gICAgaWYgKGNhbnZhc0N0eCkge1xuICAgICAgYWRkQ29udGV4dEN1cnJlbnRUcmFuc2Zvcm0oY2FudmFzQ3R4KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gbnVsbDtcbiAgICB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoID0gbnVsbDtcbiAgICB0aGlzLl9jYWNoZWRCaXRtYXBzTWFwID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgZ2V0T2JqZWN0KGRhdGEsIGZhbGxiYWNrID0gbnVsbCkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIGRhdGEuc3RhcnRzV2l0aChcImdfXCIpID8gdGhpcy5jb21tb25PYmpzLmdldChkYXRhKSA6IHRoaXMub2Jqcy5nZXQoZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG5cbiAgYmVnaW5EcmF3aW5nKHtcbiAgICB0cmFuc2Zvcm0sXG4gICAgdmlld3BvcnQsXG4gICAgdHJhbnNwYXJlbmN5ID0gZmFsc2UsXG4gICAgYmFja2dyb3VuZCA9IG51bGxcbiAgfSkge1xuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5jdHguY2FudmFzLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQ7XG4gICAgY29uc3QgZGVmYXVsdEJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmQgfHwgXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5jdHguc2F2ZSgpO1xuXG4gICAgaWYgKHRoaXMuZm9yZWdyb3VuZENvbG9yICYmIHRoaXMuYmFja2dyb3VuZENvbG9yKSB7XG4gICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmZvcmVncm91bmRDb2xvcjtcbiAgICAgIGNvbnN0IGZnID0gdGhpcy5mb3JlZ3JvdW5kQ29sb3IgPSB0aGlzLmN0eC5maWxsU3R5bGU7XG4gICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRDb2xvcjtcbiAgICAgIGNvbnN0IGJnID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmN0eC5maWxsU3R5bGU7XG4gICAgICBsZXQgaXNWYWxpZERlZmF1bHRCZyA9IHRydWU7XG4gICAgICBsZXQgZGVmYXVsdEJnID0gZGVmYXVsdEJhY2tncm91bmRDb2xvcjtcbiAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGRlZmF1bHRCYWNrZ3JvdW5kQ29sb3I7XG4gICAgICBkZWZhdWx0QmcgPSB0aGlzLmN0eC5maWxsU3R5bGU7XG4gICAgICBpc1ZhbGlkRGVmYXVsdEJnID0gdHlwZW9mIGRlZmF1bHRCZyA9PT0gXCJzdHJpbmdcIiAmJiAvXiNbMC05QS1GYS1mXXs2fSQvLnRlc3QoZGVmYXVsdEJnKTtcblxuICAgICAgaWYgKGZnID09PSBcIiMwMDAwMDBcIiAmJiBiZyA9PT0gXCIjZmZmZmZmXCIgfHwgZmcgPT09IGJnIHx8ICFpc1ZhbGlkRGVmYXVsdEJnKSB7XG4gICAgICAgIHRoaXMuZm9yZWdyb3VuZENvbG9yID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY0IgPSBwYXJzZUludChkZWZhdWx0Qmcuc2xpY2UoMSksIDE2KTtcbiAgICAgICAgY29uc3QgckIgPSAoY0IgJiYgMHhmZjAwMDApID4+IDE2O1xuICAgICAgICBjb25zdCBnQiA9IChjQiAmJiAweDAwZmYwMCkgPj4gODtcbiAgICAgICAgY29uc3QgYkIgPSBjQiAmJiAweDAwMDBmZjtcblxuICAgICAgICBjb25zdCBuZXdDb21wID0geCA9PiB7XG4gICAgICAgICAgeCAvPSAyNTU7XG4gICAgICAgICAgcmV0dXJuIHggPD0gMC4wMzkyOCA/IHggLyAxMi45MiA6ICgoeCArIDAuMDU1KSAvIDEuMDU1KSAqKiAyLjQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgbHVtQiA9IE1hdGgucm91bmQoMC4yMTI2ICogbmV3Q29tcChyQikgKyAwLjcxNTIgKiBuZXdDb21wKGdCKSArIDAuMDcyMiAqIG5ld0NvbXAoYkIpKTtcblxuICAgICAgICB0aGlzLnNlbGVjdENvbG9yID0gKHIsIGcsIGIpID0+IHtcbiAgICAgICAgICBjb25zdCBsdW1DID0gMC4yMTI2ICogbmV3Q29tcChyKSArIDAuNzE1MiAqIG5ld0NvbXAoZykgKyAwLjA3MjIgKiBuZXdDb21wKGIpO1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGx1bUMpID09PSBsdW1CID8gYmcgOiBmZztcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRDb2xvciB8fCBkZWZhdWx0QmFja2dyb3VuZENvbG9yO1xuICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcblxuICAgIGlmICh0cmFuc3BhcmVuY3kpIHtcbiAgICAgIGNvbnN0IHRyYW5zcGFyZW50Q2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXCJ0cmFuc3BhcmVudFwiLCB3aWR0aCwgaGVpZ2h0LCB0cnVlKTtcbiAgICAgIHRoaXMuY29tcG9zaXRlQ3R4ID0gdGhpcy5jdHg7XG4gICAgICB0aGlzLnRyYW5zcGFyZW50Q2FudmFzID0gdHJhbnNwYXJlbnRDYW52YXMuY2FudmFzO1xuICAgICAgdGhpcy5jdHggPSB0cmFuc3BhcmVudENhbnZhcy5jb250ZXh0O1xuICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5KHRoaXMuY3R4LCB0aGlzLmNvbXBvc2l0ZUN0eC5tb3pDdXJyZW50VHJhbnNmb3JtKTtcbiAgICB9XG5cbiAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgcmVzZXRDdHhUb0RlZmF1bHQodGhpcy5jdHgsIHRoaXMuZm9yZWdyb3VuZENvbG9yKTtcblxuICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgIHRoaXMuY3R4LnRyYW5zZm9ybS5hcHBseSh0aGlzLmN0eCwgdHJhbnNmb3JtKTtcbiAgICAgIHRoaXMub3V0cHV0U2NhbGVYID0gdHJhbnNmb3JtWzBdO1xuICAgICAgdGhpcy5vdXRwdXRTY2FsZVkgPSB0cmFuc2Zvcm1bMF07XG4gICAgfVxuXG4gICAgdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5KHRoaXMuY3R4LCB2aWV3cG9ydC50cmFuc2Zvcm0pO1xuICAgIHRoaXMudmlld3BvcnRTY2FsZSA9IHZpZXdwb3J0LnNjYWxlO1xuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0uc2xpY2UoKTtcblxuICAgIGlmICh0aGlzLmltYWdlTGF5ZXIpIHtcbiAgICAgIHRoaXMuaW1hZ2VMYXllci5iZWdpbkxheW91dCgpO1xuICAgIH1cbiAgfVxuXG4gIGV4ZWN1dGVPcGVyYXRvckxpc3Qob3BlcmF0b3JMaXN0LCBleGVjdXRpb25TdGFydElkeCwgY29udGludWVDYWxsYmFjaywgc3RlcHBlcikge1xuICAgIGNvbnN0IGFyZ3NBcnJheSA9IG9wZXJhdG9yTGlzdC5hcmdzQXJyYXk7XG4gICAgY29uc3QgZm5BcnJheSA9IG9wZXJhdG9yTGlzdC5mbkFycmF5O1xuICAgIGxldCBpID0gZXhlY3V0aW9uU3RhcnRJZHggfHwgMDtcbiAgICBjb25zdCBhcmdzQXJyYXlMZW4gPSBhcmdzQXJyYXkubGVuZ3RoO1xuXG4gICAgaWYgKGFyZ3NBcnJheUxlbiA9PT0gaSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmtPcGVyYXRpb25zID0gYXJnc0FycmF5TGVuIC0gaSA+IEVYRUNVVElPTl9TVEVQUyAmJiB0eXBlb2YgY29udGludWVDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiO1xuICAgIGNvbnN0IGVuZFRpbWUgPSBjaHVua09wZXJhdGlvbnMgPyBEYXRlLm5vdygpICsgRVhFQ1VUSU9OX1RJTUUgOiAwO1xuICAgIGxldCBzdGVwcyA9IDA7XG4gICAgY29uc3QgY29tbW9uT2JqcyA9IHRoaXMuY29tbW9uT2JqcztcbiAgICBjb25zdCBvYmpzID0gdGhpcy5vYmpzO1xuICAgIGxldCBmbklkO1xuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGlmIChzdGVwcGVyICE9PSB1bmRlZmluZWQgJiYgaSA9PT0gc3RlcHBlci5uZXh0QnJlYWtQb2ludCkge1xuICAgICAgICBzdGVwcGVyLmJyZWFrSXQoaSwgY29udGludWVDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuXG4gICAgICBmbklkID0gZm5BcnJheVtpXTtcblxuICAgICAgaWYgKGZuSWQgIT09IF91dGlsLk9QUy5kZXBlbmRlbmN5KSB7XG4gICAgICAgIHRoaXNbZm5JZF0uYXBwbHkodGhpcywgYXJnc0FycmF5W2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgZGVwT2JqSWQgb2YgYXJnc0FycmF5W2ldKSB7XG4gICAgICAgICAgY29uc3Qgb2Jqc1Bvb2wgPSBkZXBPYmpJZC5zdGFydHNXaXRoKFwiZ19cIikgPyBjb21tb25PYmpzIDogb2JqcztcblxuICAgICAgICAgIGlmICghb2Jqc1Bvb2wuaGFzKGRlcE9iaklkKSkge1xuICAgICAgICAgICAgb2Jqc1Bvb2wuZ2V0KGRlcE9iaklkLCBjb250aW51ZUNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpKys7XG5cbiAgICAgIGlmIChpID09PSBhcmdzQXJyYXlMZW4pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaHVua09wZXJhdGlvbnMgJiYgKytzdGVwcyA+IEVYRUNVVElPTl9TVEVQUykge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSA+IGVuZFRpbWUpIHtcbiAgICAgICAgICBjb250aW51ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGVwcyA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZW5kRHJhd2luZygpIHtcbiAgICB3aGlsZSAodGhpcy5zdGF0ZVN0YWNrLmxlbmd0aCB8fCB0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG5cbiAgICBpZiAodGhpcy50cmFuc3BhcmVudENhbnZhcykge1xuICAgICAgdGhpcy5jdHggPSB0aGlzLmNvbXBvc2l0ZUN0eDtcbiAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLnRyYW5zcGFyZW50Q2FudmFzLCAwLCAwKTtcbiAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgIHRoaXMudHJhbnNwYXJlbnRDYW52YXMgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuY2FjaGVkQ2FudmFzZXMuY2xlYXIoKTtcbiAgICB0aGlzLmNhY2hlZFBhdHRlcm5zLmNsZWFyKCk7XG5cbiAgICBmb3IgKGNvbnN0IGNhY2hlIG9mIHRoaXMuX2NhY2hlZEJpdG1hcHNNYXAudmFsdWVzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgY2FudmFzIG9mIGNhY2hlLnZhbHVlcygpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYWNoZS5jbGVhcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2NhY2hlZEJpdG1hcHNNYXAuY2xlYXIoKTtcblxuICAgIGlmICh0aGlzLmltYWdlTGF5ZXIpIHtcbiAgICAgIHRoaXMuaW1hZ2VMYXllci5lbmRMYXlvdXQoKTtcbiAgICB9XG4gIH1cblxuICBfc2NhbGVJbWFnZShpbWcsIGludmVyc2VUcmFuc2Zvcm0pIHtcbiAgICBjb25zdCB3aWR0aCA9IGltZy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgIGxldCB3aWR0aFNjYWxlID0gTWF0aC5tYXgoTWF0aC5oeXBvdChpbnZlcnNlVHJhbnNmb3JtWzBdLCBpbnZlcnNlVHJhbnNmb3JtWzFdKSwgMSk7XG4gICAgbGV0IGhlaWdodFNjYWxlID0gTWF0aC5tYXgoTWF0aC5oeXBvdChpbnZlcnNlVHJhbnNmb3JtWzJdLCBpbnZlcnNlVHJhbnNmb3JtWzNdKSwgMSk7XG4gICAgbGV0IHBhaW50V2lkdGggPSB3aWR0aCxcbiAgICAgICAgcGFpbnRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgbGV0IHRtcENhbnZhc0lkID0gXCJwcmVzY2FsZTFcIjtcbiAgICBsZXQgdG1wQ2FudmFzLCB0bXBDdHg7XG5cbiAgICB3aGlsZSAod2lkdGhTY2FsZSA+IDIgJiYgcGFpbnRXaWR0aCA+IDEgfHwgaGVpZ2h0U2NhbGUgPiAyICYmIHBhaW50SGVpZ2h0ID4gMSkge1xuICAgICAgbGV0IG5ld1dpZHRoID0gcGFpbnRXaWR0aCxcbiAgICAgICAgICBuZXdIZWlnaHQgPSBwYWludEhlaWdodDtcblxuICAgICAgaWYgKHdpZHRoU2NhbGUgPiAyICYmIHBhaW50V2lkdGggPiAxKSB7XG4gICAgICAgIG5ld1dpZHRoID0gTWF0aC5jZWlsKHBhaW50V2lkdGggLyAyKTtcbiAgICAgICAgd2lkdGhTY2FsZSAvPSBwYWludFdpZHRoIC8gbmV3V2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGlmIChoZWlnaHRTY2FsZSA+IDIgJiYgcGFpbnRIZWlnaHQgPiAxKSB7XG4gICAgICAgIG5ld0hlaWdodCA9IE1hdGguY2VpbChwYWludEhlaWdodCAvIDIpO1xuICAgICAgICBoZWlnaHRTY2FsZSAvPSBwYWludEhlaWdodCAvIG5ld0hlaWdodDtcbiAgICAgIH1cblxuICAgICAgdG1wQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXModG1wQ2FudmFzSWQsIG5ld1dpZHRoLCBuZXdIZWlnaHQsIGZhbHNlKTtcbiAgICAgIHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgICAgdG1wQ3R4LmNsZWFyUmVjdCgwLCAwLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcbiAgICAgIHRtcEN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBwYWludFdpZHRoLCBwYWludEhlaWdodCwgMCwgMCwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XG4gICAgICBpbWcgPSB0bXBDYW52YXMuY2FudmFzO1xuICAgICAgcGFpbnRXaWR0aCA9IG5ld1dpZHRoO1xuICAgICAgcGFpbnRIZWlnaHQgPSBuZXdIZWlnaHQ7XG4gICAgICB0bXBDYW52YXNJZCA9IHRtcENhbnZhc0lkID09PSBcInByZXNjYWxlMVwiID8gXCJwcmVzY2FsZTJcIiA6IFwicHJlc2NhbGUxXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGltZyxcbiAgICAgIHBhaW50V2lkdGgsXG4gICAgICBwYWludEhlaWdodFxuICAgIH07XG4gIH1cblxuICBfY3JlYXRlTWFza0NhbnZhcyhpbWcpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0gPSBpbWc7XG4gICAgY29uc3QgZmlsbENvbG9yID0gdGhpcy5jdXJyZW50LmZpbGxDb2xvcjtcbiAgICBjb25zdCBpc1BhdHRlcm5GaWxsID0gdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsO1xuICAgIGNvbnN0IGN1cnJlbnRUcmFuc2Zvcm0gPSBjdHgubW96Q3VycmVudFRyYW5zZm9ybTtcbiAgICBsZXQgY2FjaGUsIGNhY2hlS2V5LCBzY2FsZWQsIG1hc2tDYW52YXM7XG5cbiAgICBpZiAoKGltZy5iaXRtYXAgfHwgaW1nLmRhdGEpICYmIGltZy5jb3VudCA+IDEpIHtcbiAgICAgIGNvbnN0IG1haW5LZXkgPSBpbWcuYml0bWFwIHx8IGltZy5kYXRhLmJ1ZmZlcjtcbiAgICAgIGNvbnN0IHdpdGhvdXRUcmFuc2xhdGlvbiA9IGN1cnJlbnRUcmFuc2Zvcm0uc2xpY2UoMCwgNCk7XG4gICAgICBjYWNoZUtleSA9IEpTT04uc3RyaW5naWZ5KGlzUGF0dGVybkZpbGwgPyB3aXRob3V0VHJhbnNsYXRpb24gOiBbd2l0aG91dFRyYW5zbGF0aW9uLCBmaWxsQ29sb3JdKTtcbiAgICAgIGNhY2hlID0gdGhpcy5fY2FjaGVkQml0bWFwc01hcC5nZXQobWFpbktleSk7XG5cbiAgICAgIGlmICghY2FjaGUpIHtcbiAgICAgICAgY2FjaGUgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgdGhpcy5fY2FjaGVkQml0bWFwc01hcC5zZXQobWFpbktleSwgY2FjaGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYWNoZWRJbWFnZSA9IGNhY2hlLmdldChjYWNoZUtleSk7XG5cbiAgICAgIGlmIChjYWNoZWRJbWFnZSAmJiAhaXNQYXR0ZXJuRmlsbCkge1xuICAgICAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5yb3VuZChNYXRoLm1pbihjdXJyZW50VHJhbnNmb3JtWzBdLCBjdXJyZW50VHJhbnNmb3JtWzJdKSArIGN1cnJlbnRUcmFuc2Zvcm1bNF0pO1xuICAgICAgICBjb25zdCBvZmZzZXRZID0gTWF0aC5yb3VuZChNYXRoLm1pbihjdXJyZW50VHJhbnNmb3JtWzFdLCBjdXJyZW50VHJhbnNmb3JtWzNdKSArIGN1cnJlbnRUcmFuc2Zvcm1bNV0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNhbnZhczogY2FjaGVkSW1hZ2UsXG4gICAgICAgICAgb2Zmc2V0WCxcbiAgICAgICAgICBvZmZzZXRZXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHNjYWxlZCA9IGNhY2hlZEltYWdlO1xuICAgIH1cblxuICAgIGlmICghc2NhbGVkKSB7XG4gICAgICBtYXNrQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXCJtYXNrQ2FudmFzXCIsIHdpZHRoLCBoZWlnaHQsIGZhbHNlKTtcbiAgICAgIHB1dEJpbmFyeUltYWdlTWFzayhtYXNrQ2FudmFzLmNvbnRleHQsIGltZyk7XG4gICAgfVxuXG4gICAgbGV0IG1hc2tUb0NhbnZhcyA9IF91dGlsLlV0aWwudHJhbnNmb3JtKGN1cnJlbnRUcmFuc2Zvcm0sIFsxIC8gd2lkdGgsIDAsIDAsIC0xIC8gaGVpZ2h0LCAwLCAwXSk7XG5cbiAgICBtYXNrVG9DYW52YXMgPSBfdXRpbC5VdGlsLnRyYW5zZm9ybShtYXNrVG9DYW52YXMsIFsxLCAwLCAwLCAxLCAwLCAtaGVpZ2h0XSk7XG5cbiAgICBjb25zdCBjb3JkMSA9IF91dGlsLlV0aWwuYXBwbHlUcmFuc2Zvcm0oWzAsIDBdLCBtYXNrVG9DYW52YXMpO1xuXG4gICAgY29uc3QgY29yZDIgPSBfdXRpbC5VdGlsLmFwcGx5VHJhbnNmb3JtKFt3aWR0aCwgaGVpZ2h0XSwgbWFza1RvQ2FudmFzKTtcblxuICAgIGNvbnN0IHJlY3QgPSBfdXRpbC5VdGlsLm5vcm1hbGl6ZVJlY3QoW2NvcmQxWzBdLCBjb3JkMVsxXSwgY29yZDJbMF0sIGNvcmQyWzFdXSk7XG5cbiAgICBjb25zdCBkcmF3bldpZHRoID0gTWF0aC5yb3VuZChyZWN0WzJdIC0gcmVjdFswXSkgfHwgMTtcbiAgICBjb25zdCBkcmF3bkhlaWdodCA9IE1hdGgucm91bmQocmVjdFszXSAtIHJlY3RbMV0pIHx8IDE7XG4gICAgY29uc3QgZmlsbENhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwiZmlsbENhbnZhc1wiLCBkcmF3bldpZHRoLCBkcmF3bkhlaWdodCwgdHJ1ZSk7XG4gICAgY29uc3QgZmlsbEN0eCA9IGZpbGxDYW52YXMuY29udGV4dDtcbiAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5taW4oY29yZDFbMF0sIGNvcmQyWzBdKTtcbiAgICBjb25zdCBvZmZzZXRZID0gTWF0aC5taW4oY29yZDFbMV0sIGNvcmQyWzFdKTtcbiAgICBmaWxsQ3R4LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICAgIGZpbGxDdHgudHJhbnNmb3JtLmFwcGx5KGZpbGxDdHgsIG1hc2tUb0NhbnZhcyk7XG5cbiAgICBpZiAoIXNjYWxlZCkge1xuICAgICAgc2NhbGVkID0gdGhpcy5fc2NhbGVJbWFnZShtYXNrQ2FudmFzLmNhbnZhcywgZmlsbEN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSk7XG4gICAgICBzY2FsZWQgPSBzY2FsZWQuaW1nO1xuXG4gICAgICBpZiAoY2FjaGUgJiYgaXNQYXR0ZXJuRmlsbCkge1xuICAgICAgICBjYWNoZS5zZXQoY2FjaGVLZXksIHNjYWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmlsbEN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBnZXRJbWFnZVNtb290aGluZ0VuYWJsZWQoZmlsbEN0eC5tb3pDdXJyZW50VHJhbnNmb3JtLCBpbWcuaW50ZXJwb2xhdGUpO1xuICAgIGRyYXdJbWFnZUF0SW50ZWdlckNvb3JkcyhmaWxsQ3R4LCBzY2FsZWQsIDAsIDAsIHNjYWxlZC53aWR0aCwgc2NhbGVkLmhlaWdodCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgZmlsbEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xuXG4gICAgY29uc3QgaW52ZXJzZSA9IF91dGlsLlV0aWwudHJhbnNmb3JtKGZpbGxDdHgubW96Q3VycmVudFRyYW5zZm9ybUludmVyc2UsIFsxLCAwLCAwLCAxLCAtb2Zmc2V0WCwgLW9mZnNldFldKTtcblxuICAgIGZpbGxDdHguZmlsbFN0eWxlID0gaXNQYXR0ZXJuRmlsbCA/IGZpbGxDb2xvci5nZXRQYXR0ZXJuKGN0eCwgdGhpcywgaW52ZXJzZSwgX3BhdHRlcm5faGVscGVyLlBhdGhUeXBlLkZJTEwpIDogZmlsbENvbG9yO1xuICAgIGZpbGxDdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICBpZiAoY2FjaGUgJiYgIWlzUGF0dGVybkZpbGwpIHtcbiAgICAgIHRoaXMuY2FjaGVkQ2FudmFzZXMuZGVsZXRlKFwiZmlsbENhbnZhc1wiKTtcbiAgICAgIGNhY2hlLnNldChjYWNoZUtleSwgZmlsbENhbnZhcy5jYW52YXMpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjYW52YXM6IGZpbGxDYW52YXMuY2FudmFzLFxuICAgICAgb2Zmc2V0WDogTWF0aC5yb3VuZChvZmZzZXRYKSxcbiAgICAgIG9mZnNldFk6IE1hdGgucm91bmQob2Zmc2V0WSlcbiAgICB9O1xuICB9XG5cbiAgc2V0TGluZVdpZHRoKHdpZHRoKSB7XG4gICAgaWYgKHdpZHRoICE9PSB0aGlzLmN1cnJlbnQubGluZVdpZHRoKSB7XG4gICAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQubGluZVdpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5jdHgubGluZVdpZHRoID0gd2lkdGg7XG4gIH1cblxuICBzZXRMaW5lQ2FwKHN0eWxlKSB7XG4gICAgdGhpcy5jdHgubGluZUNhcCA9IExJTkVfQ0FQX1NUWUxFU1tzdHlsZV07XG4gIH1cblxuICBzZXRMaW5lSm9pbihzdHlsZSkge1xuICAgIHRoaXMuY3R4LmxpbmVKb2luID0gTElORV9KT0lOX1NUWUxFU1tzdHlsZV07XG4gIH1cblxuICBzZXRNaXRlckxpbWl0KGxpbWl0KSB7XG4gICAgdGhpcy5jdHgubWl0ZXJMaW1pdCA9IGxpbWl0O1xuICB9XG5cbiAgc2V0RGFzaChkYXNoQXJyYXksIGRhc2hQaGFzZSkge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuXG4gICAgaWYgKGN0eC5zZXRMaW5lRGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjdHguc2V0TGluZURhc2goZGFzaEFycmF5KTtcbiAgICAgIGN0eC5saW5lRGFzaE9mZnNldCA9IGRhc2hQaGFzZTtcbiAgICB9XG4gIH1cblxuICBzZXRSZW5kZXJpbmdJbnRlbnQoaW50ZW50KSB7fVxuXG4gIHNldEZsYXRuZXNzKGZsYXRuZXNzKSB7fVxuXG4gIHNldEdTdGF0ZShzdGF0ZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3Qgc3RhdGUgPSBzdGF0ZXNbaV07XG4gICAgICBjb25zdCBrZXkgPSBzdGF0ZVswXTtcbiAgICAgIGNvbnN0IHZhbHVlID0gc3RhdGVbMV07XG5cbiAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgIGNhc2UgXCJMV1wiOlxuICAgICAgICAgIHRoaXMuc2V0TGluZVdpZHRoKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiTENcIjpcbiAgICAgICAgICB0aGlzLnNldExpbmVDYXAodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJMSlwiOlxuICAgICAgICAgIHRoaXMuc2V0TGluZUpvaW4odmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJNTFwiOlxuICAgICAgICAgIHRoaXMuc2V0TWl0ZXJMaW1pdCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkRcIjpcbiAgICAgICAgICB0aGlzLnNldERhc2godmFsdWVbMF0sIHZhbHVlWzFdKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiUklcIjpcbiAgICAgICAgICB0aGlzLnNldFJlbmRlcmluZ0ludGVudCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkZMXCI6XG4gICAgICAgICAgdGhpcy5zZXRGbGF0bmVzcyh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkZvbnRcIjpcbiAgICAgICAgICB0aGlzLnNldEZvbnQodmFsdWVbMF0sIHZhbHVlWzFdKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiQ0FcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnQuc3Ryb2tlQWxwaGEgPSBzdGF0ZVsxXTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiY2FcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnQuZmlsbEFscGhhID0gc3RhdGVbMV07XG4gICAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBzdGF0ZVsxXTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiQk1cIjpcbiAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiU01hc2tcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgPSB2YWx1ZSA/IHRoaXMudGVtcFNNYXNrIDogbnVsbDtcbiAgICAgICAgICB0aGlzLnRlbXBTTWFzayA9IG51bGw7XG4gICAgICAgICAgdGhpcy5jaGVja1NNYXNrU3RhdGUoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiVFJcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnQudHJhbnNmZXJNYXBzID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGluU01hc2tNb2RlKCkge1xuICAgIHJldHVybiAhIXRoaXMuc3VzcGVuZGVkQ3R4O1xuICB9XG5cbiAgY2hlY2tTTWFza1N0YXRlKCkge1xuICAgIGNvbnN0IGluU01hc2tNb2RlID0gdGhpcy5pblNNYXNrTW9kZTtcblxuICAgIGlmICh0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgJiYgIWluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmJlZ2luU01hc2tNb2RlKCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrICYmIGluU01hc2tNb2RlKSB7XG4gICAgICB0aGlzLmVuZFNNYXNrTW9kZSgpO1xuICAgIH1cbiAgfVxuXG4gIGJlZ2luU01hc2tNb2RlKCkge1xuICAgIGlmICh0aGlzLmluU01hc2tNb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJiZWdpblNNYXNrTW9kZSBjYWxsZWQgd2hpbGUgYWxyZWFkeSBpbiBzbWFzayBtb2RlXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGRyYXduV2lkdGggPSB0aGlzLmN0eC5jYW52YXMud2lkdGg7XG4gICAgY29uc3QgZHJhd25IZWlnaHQgPSB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0O1xuICAgIGNvbnN0IGNhY2hlSWQgPSBcInNtYXNrR3JvdXBBdFwiICsgdGhpcy5ncm91cExldmVsO1xuICAgIGNvbnN0IHNjcmF0Y2hDYW52YXMgPSB0aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhjYWNoZUlkLCBkcmF3bldpZHRoLCBkcmF3bkhlaWdodCwgdHJ1ZSk7XG4gICAgdGhpcy5zdXNwZW5kZWRDdHggPSB0aGlzLmN0eDtcbiAgICB0aGlzLmN0eCA9IHNjcmF0Y2hDYW52YXMuY29udGV4dDtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjdHguc2V0VHJhbnNmb3JtLmFwcGx5KGN0eCwgdGhpcy5zdXNwZW5kZWRDdHgubW96Q3VycmVudFRyYW5zZm9ybSk7XG4gICAgY29weUN0eFN0YXRlKHRoaXMuc3VzcGVuZGVkQ3R4LCBjdHgpO1xuICAgIG1pcnJvckNvbnRleHRPcGVyYXRpb25zKGN0eCwgdGhpcy5zdXNwZW5kZWRDdHgpO1xuICAgIHRoaXMuc2V0R1N0YXRlKFtbXCJCTVwiLCBcInNvdXJjZS1vdmVyXCJdLCBbXCJjYVwiLCAxXSwgW1wiQ0FcIiwgMV1dKTtcbiAgfVxuXG4gIGVuZFNNYXNrTW9kZSgpIHtcbiAgICBpZiAoIXRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImVuZFNNYXNrTW9kZSBjYWxsZWQgd2hpbGUgbm90IGluIHNtYXNrIG1vZGVcIik7XG4gICAgfVxuXG4gICAgdGhpcy5jdHguX3JlbW92ZU1pcnJvcmluZygpO1xuXG4gICAgY29weUN0eFN0YXRlKHRoaXMuY3R4LCB0aGlzLnN1c3BlbmRlZEN0eCk7XG4gICAgdGhpcy5jdHggPSB0aGlzLnN1c3BlbmRlZEN0eDtcbiAgICB0aGlzLnN1c3BlbmRlZEN0eCA9IG51bGw7XG4gIH1cblxuICBjb21wb3NlKGRpcnR5Qm94KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2spIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWRpcnR5Qm94KSB7XG4gICAgICBkaXJ0eUJveCA9IFswLCAwLCB0aGlzLmN0eC5jYW52YXMud2lkdGgsIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJ0eUJveFswXSA9IE1hdGguZmxvb3IoZGlydHlCb3hbMF0pO1xuICAgICAgZGlydHlCb3hbMV0gPSBNYXRoLmZsb29yKGRpcnR5Qm94WzFdKTtcbiAgICAgIGRpcnR5Qm94WzJdID0gTWF0aC5jZWlsKGRpcnR5Qm94WzJdKTtcbiAgICAgIGRpcnR5Qm94WzNdID0gTWF0aC5jZWlsKGRpcnR5Qm94WzNdKTtcbiAgICB9XG5cbiAgICBjb25zdCBzbWFzayA9IHRoaXMuY3VycmVudC5hY3RpdmVTTWFzaztcbiAgICBjb25zdCBzdXNwZW5kZWRDdHggPSB0aGlzLnN1c3BlbmRlZEN0eDtcbiAgICBjb21wb3NlU01hc2soc3VzcGVuZGVkQ3R4LCBzbWFzaywgdGhpcy5jdHgsIGRpcnR5Qm94KTtcbiAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmN0eC5jYW52YXMud2lkdGgsIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHNhdmUoKSB7XG4gICAgaWYgKHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgIGNvcHlDdHhTdGF0ZSh0aGlzLmN0eCwgdGhpcy5zdXNwZW5kZWRDdHgpO1xuICAgICAgdGhpcy5zdXNwZW5kZWRDdHguc2F2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMuc3RhdGVTdGFjay5wdXNoKG9sZCk7XG4gICAgdGhpcy5jdXJyZW50ID0gb2xkLmNsb25lKCk7XG4gIH1cblxuICByZXN0b3JlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlU3RhY2subGVuZ3RoID09PSAwICYmIHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgIHRoaXMuZW5kU01hc2tNb2RlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGVTdGFjay5sZW5ndGggIT09IDApIHtcbiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMuc3RhdGVTdGFjay5wb3AoKTtcblxuICAgICAgaWYgKHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgICAgdGhpcy5zdXNwZW5kZWRDdHgucmVzdG9yZSgpO1xuICAgICAgICBjb3B5Q3R4U3RhdGUodGhpcy5zdXNwZW5kZWRDdHgsIHRoaXMuY3R4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jaGVja1NNYXNrU3RhdGUoKTtcbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZyA9IG51bGw7XG4gICAgICB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICB0cmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZikge1xuICAgIHRoaXMuY3R4LnRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKTtcbiAgICB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nID0gbnVsbDtcbiAgICB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoID0gbnVsbDtcbiAgfVxuXG4gIGNvbnN0cnVjdFBhdGgob3BzLCBhcmdzLCBtaW5NYXgpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGxldCB4ID0gY3VycmVudC54LFxuICAgICAgICB5ID0gY3VycmVudC55O1xuICAgIGxldCBzdGFydFgsIHN0YXJ0WTtcbiAgICBjb25zdCBjdXJyZW50VHJhbnNmb3JtID0gY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG4gICAgY29uc3QgaXNTY2FsaW5nTWF0cml4ID0gY3VycmVudFRyYW5zZm9ybVswXSA9PT0gMCAmJiBjdXJyZW50VHJhbnNmb3JtWzNdID09PSAwIHx8IGN1cnJlbnRUcmFuc2Zvcm1bMV0gPT09IDAgJiYgY3VycmVudFRyYW5zZm9ybVsyXSA9PT0gMDtcbiAgICBjb25zdCBtaW5NYXhGb3JCZXppZXIgPSBpc1NjYWxpbmdNYXRyaXggPyBtaW5NYXguc2xpY2UoMCkgOiBudWxsO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSAwLCBpaSA9IG9wcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKG9wc1tpXSB8IDApIHtcbiAgICAgICAgY2FzZSBfdXRpbC5PUFMucmVjdGFuZ2xlOlxuICAgICAgICAgIHggPSBhcmdzW2orK107XG4gICAgICAgICAgeSA9IGFyZ3NbaisrXTtcbiAgICAgICAgICBjb25zdCB3aWR0aCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBhcmdzW2orK107XG4gICAgICAgICAgY29uc3QgeHcgPSB4ICsgd2lkdGg7XG4gICAgICAgICAgY29uc3QgeWggPSB5ICsgaGVpZ2h0O1xuICAgICAgICAgIGN0eC5tb3ZlVG8oeCwgeSk7XG5cbiAgICAgICAgICBpZiAod2lkdGggPT09IDAgfHwgaGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgICBjdHgubGluZVRvKHh3LCB5aCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeHcsIHkpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4dywgeWgpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4LCB5aCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpc1NjYWxpbmdNYXRyaXgpIHtcbiAgICAgICAgICAgIGN1cnJlbnQudXBkYXRlUmVjdE1pbk1heChjdXJyZW50VHJhbnNmb3JtLCBbeCwgeSwgeHcsIHloXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgX3V0aWwuT1BTLm1vdmVUbzpcbiAgICAgICAgICB4ID0gYXJnc1tqKytdO1xuICAgICAgICAgIHkgPSBhcmdzW2orK107XG4gICAgICAgICAgY3R4Lm1vdmVUbyh4LCB5KTtcblxuICAgICAgICAgIGlmICghaXNTY2FsaW5nTWF0cml4KSB7XG4gICAgICAgICAgICBjdXJyZW50LnVwZGF0ZVBhdGhNaW5NYXgoY3VycmVudFRyYW5zZm9ybSwgeCwgeSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBfdXRpbC5PUFMubGluZVRvOlxuICAgICAgICAgIHggPSBhcmdzW2orK107XG4gICAgICAgICAgeSA9IGFyZ3NbaisrXTtcbiAgICAgICAgICBjdHgubGluZVRvKHgsIHkpO1xuXG4gICAgICAgICAgaWYgKCFpc1NjYWxpbmdNYXRyaXgpIHtcbiAgICAgICAgICAgIGN1cnJlbnQudXBkYXRlUGF0aE1pbk1heChjdXJyZW50VHJhbnNmb3JtLCB4LCB5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIF91dGlsLk9QUy5jdXJ2ZVRvOlxuICAgICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgICAgc3RhcnRZID0geTtcbiAgICAgICAgICB4ID0gYXJnc1tqICsgNF07XG4gICAgICAgICAgeSA9IGFyZ3NbaiArIDVdO1xuICAgICAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKGFyZ3Nbal0sIGFyZ3NbaiArIDFdLCBhcmdzW2ogKyAyXSwgYXJnc1tqICsgM10sIHgsIHkpO1xuICAgICAgICAgIGN1cnJlbnQudXBkYXRlQ3VydmVQYXRoTWluTWF4KGN1cnJlbnRUcmFuc2Zvcm0sIHN0YXJ0WCwgc3RhcnRZLCBhcmdzW2pdLCBhcmdzW2ogKyAxXSwgYXJnc1tqICsgMl0sIGFyZ3NbaiArIDNdLCB4LCB5LCBtaW5NYXhGb3JCZXppZXIpO1xuICAgICAgICAgIGogKz0gNjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIF91dGlsLk9QUy5jdXJ2ZVRvMjpcbiAgICAgICAgICBzdGFydFggPSB4O1xuICAgICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICAgICAgY3R4LmJlemllckN1cnZlVG8oeCwgeSwgYXJnc1tqXSwgYXJnc1tqICsgMV0sIGFyZ3NbaiArIDJdLCBhcmdzW2ogKyAzXSk7XG4gICAgICAgICAgY3VycmVudC51cGRhdGVDdXJ2ZVBhdGhNaW5NYXgoY3VycmVudFRyYW5zZm9ybSwgc3RhcnRYLCBzdGFydFksIHgsIHksIGFyZ3Nbal0sIGFyZ3NbaiArIDFdLCBhcmdzW2ogKyAyXSwgYXJnc1tqICsgM10sIG1pbk1heEZvckJlemllcik7XG4gICAgICAgICAgeCA9IGFyZ3NbaiArIDJdO1xuICAgICAgICAgIHkgPSBhcmdzW2ogKyAzXTtcbiAgICAgICAgICBqICs9IDQ7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBfdXRpbC5PUFMuY3VydmVUbzM6XG4gICAgICAgICAgc3RhcnRYID0geDtcbiAgICAgICAgICBzdGFydFkgPSB5O1xuICAgICAgICAgIHggPSBhcmdzW2ogKyAyXTtcbiAgICAgICAgICB5ID0gYXJnc1tqICsgM107XG4gICAgICAgICAgY3R4LmJlemllckN1cnZlVG8oYXJnc1tqXSwgYXJnc1tqICsgMV0sIHgsIHksIHgsIHkpO1xuICAgICAgICAgIGN1cnJlbnQudXBkYXRlQ3VydmVQYXRoTWluTWF4KGN1cnJlbnRUcmFuc2Zvcm0sIHN0YXJ0WCwgc3RhcnRZLCBhcmdzW2pdLCBhcmdzW2ogKyAxXSwgeCwgeSwgeCwgeSwgbWluTWF4Rm9yQmV6aWVyKTtcbiAgICAgICAgICBqICs9IDQ7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBfdXRpbC5PUFMuY2xvc2VQYXRoOlxuICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNTY2FsaW5nTWF0cml4KSB7XG4gICAgICBjdXJyZW50LnVwZGF0ZVNjYWxpbmdQYXRoTWluTWF4KGN1cnJlbnRUcmFuc2Zvcm0sIG1pbk1heEZvckJlemllcik7XG4gICAgfVxuXG4gICAgY3VycmVudC5zZXRDdXJyZW50UG9pbnQoeCwgeSk7XG4gIH1cblxuICBjbG9zZVBhdGgoKSB7XG4gICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gIH1cblxuICBzdHJva2UoY29uc3VtZVBhdGgpIHtcbiAgICBjb25zdW1lUGF0aCA9IHR5cGVvZiBjb25zdW1lUGF0aCAhPT0gXCJ1bmRlZmluZWRcIiA/IGNvbnN1bWVQYXRoIDogdHJ1ZTtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBzdHJva2VDb2xvciA9IHRoaXMuY3VycmVudC5zdHJva2VDb2xvcjtcbiAgICBjdHguZ2xvYmFsQWxwaGEgPSB0aGlzLmN1cnJlbnQuc3Ryb2tlQWxwaGE7XG5cbiAgICBpZiAodGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgaWYgKHR5cGVvZiBzdHJva2VDb2xvciA9PT0gXCJvYmplY3RcIiAmJiBzdHJva2VDb2xvcj8uZ2V0UGF0dGVybikge1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VDb2xvci5nZXRQYXR0ZXJuKGN0eCwgdGhpcywgY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlLCBfcGF0dGVybl9oZWxwZXIuUGF0aFR5cGUuU1RST0tFKTtcbiAgICAgICAgdGhpcy5yZXNjYWxlQW5kU3Ryb2tlKGZhbHNlKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVzY2FsZUFuZFN0cm9rZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29uc3VtZVBhdGgpIHtcbiAgICAgIHRoaXMuY29uc3VtZVBhdGgodGhpcy5jdXJyZW50LmdldENsaXBwZWRQYXRoQm91bmRpbmdCb3goKSk7XG4gICAgfVxuXG4gICAgY3R4Lmdsb2JhbEFscGhhID0gdGhpcy5jdXJyZW50LmZpbGxBbHBoYTtcbiAgfVxuXG4gIGNsb3NlU3Ryb2tlKCkge1xuICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgdGhpcy5zdHJva2UoKTtcbiAgfVxuXG4gIGZpbGwoY29uc3VtZVBhdGgpIHtcbiAgICBjb25zdW1lUGF0aCA9IHR5cGVvZiBjb25zdW1lUGF0aCAhPT0gXCJ1bmRlZmluZWRcIiA/IGNvbnN1bWVQYXRoIDogdHJ1ZTtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBmaWxsQ29sb3IgPSB0aGlzLmN1cnJlbnQuZmlsbENvbG9yO1xuICAgIGNvbnN0IGlzUGF0dGVybkZpbGwgPSB0aGlzLmN1cnJlbnQucGF0dGVybkZpbGw7XG4gICAgbGV0IG5lZWRSZXN0b3JlID0gZmFsc2U7XG5cbiAgICBpZiAoaXNQYXR0ZXJuRmlsbCkge1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsQ29sb3IuZ2V0UGF0dGVybihjdHgsIHRoaXMsIGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSwgX3BhdHRlcm5faGVscGVyLlBhdGhUeXBlLkZJTEwpO1xuICAgICAgbmVlZFJlc3RvcmUgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGludGVyc2VjdCA9IHRoaXMuY3VycmVudC5nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KCk7XG5cbiAgICBpZiAodGhpcy5jb250ZW50VmlzaWJsZSAmJiBpbnRlcnNlY3QgIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLnBlbmRpbmdFT0ZpbGwpIHtcbiAgICAgICAgY3R4LmZpbGwoXCJldmVub2RkXCIpO1xuICAgICAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5lZWRSZXN0b3JlKSB7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGlmIChjb25zdW1lUGF0aCkge1xuICAgICAgdGhpcy5jb25zdW1lUGF0aChpbnRlcnNlY3QpO1xuICAgIH1cbiAgfVxuXG4gIGVvRmlsbCgpIHtcbiAgICB0aGlzLnBlbmRpbmdFT0ZpbGwgPSB0cnVlO1xuICAgIHRoaXMuZmlsbCgpO1xuICB9XG5cbiAgZmlsbFN0cm9rZSgpIHtcbiAgICB0aGlzLmZpbGwoZmFsc2UpO1xuICAgIHRoaXMuc3Ryb2tlKGZhbHNlKTtcbiAgICB0aGlzLmNvbnN1bWVQYXRoKCk7XG4gIH1cblxuICBlb0ZpbGxTdHJva2UoKSB7XG4gICAgdGhpcy5wZW5kaW5nRU9GaWxsID0gdHJ1ZTtcbiAgICB0aGlzLmZpbGxTdHJva2UoKTtcbiAgfVxuXG4gIGNsb3NlRmlsbFN0cm9rZSgpIHtcbiAgICB0aGlzLmNsb3NlUGF0aCgpO1xuICAgIHRoaXMuZmlsbFN0cm9rZSgpO1xuICB9XG5cbiAgY2xvc2VFT0ZpbGxTdHJva2UoKSB7XG4gICAgdGhpcy5wZW5kaW5nRU9GaWxsID0gdHJ1ZTtcbiAgICB0aGlzLmNsb3NlUGF0aCgpO1xuICAgIHRoaXMuZmlsbFN0cm9rZSgpO1xuICB9XG5cbiAgZW5kUGF0aCgpIHtcbiAgICB0aGlzLmNvbnN1bWVQYXRoKCk7XG4gIH1cblxuICBjbGlwKCkge1xuICAgIHRoaXMucGVuZGluZ0NsaXAgPSBOT1JNQUxfQ0xJUDtcbiAgfVxuXG4gIGVvQ2xpcCgpIHtcbiAgICB0aGlzLnBlbmRpbmdDbGlwID0gRU9fQ0xJUDtcbiAgfVxuXG4gIGJlZ2luVGV4dCgpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dE1hdHJpeCA9IF91dGlsLklERU5USVRZX01BVFJJWDtcbiAgICB0aGlzLmN1cnJlbnQudGV4dE1hdHJpeFNjYWxlID0gMTtcbiAgICB0aGlzLmN1cnJlbnQueCA9IHRoaXMuY3VycmVudC5saW5lWCA9IDA7XG4gICAgdGhpcy5jdXJyZW50LnkgPSB0aGlzLmN1cnJlbnQubGluZVkgPSAwO1xuICB9XG5cbiAgZW5kVGV4dCgpIHtcbiAgICBjb25zdCBwYXRocyA9IHRoaXMucGVuZGluZ1RleHRQYXRocztcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcblxuICAgIGlmIChwYXRocyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGF0aHNbaV07XG4gICAgICBjdHguc2V0VHJhbnNmb3JtLmFwcGx5KGN0eCwgcGF0aC50cmFuc2Zvcm0pO1xuICAgICAgY3R4LnRyYW5zbGF0ZShwYXRoLngsIHBhdGgueSk7XG4gICAgICBwYXRoLmFkZFRvUGF0aChjdHgsIHBhdGguZm9udFNpemUpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgY3R4LmNsaXAoKTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgZGVsZXRlIHRoaXMucGVuZGluZ1RleHRQYXRocztcbiAgfVxuXG4gIHNldENoYXJTcGFjaW5nKHNwYWNpbmcpIHtcbiAgICB0aGlzLmN1cnJlbnQuY2hhclNwYWNpbmcgPSBzcGFjaW5nO1xuICB9XG5cbiAgc2V0V29yZFNwYWNpbmcoc3BhY2luZykge1xuICAgIHRoaXMuY3VycmVudC53b3JkU3BhY2luZyA9IHNwYWNpbmc7XG4gIH1cblxuICBzZXRIU2NhbGUoc2NhbGUpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dEhTY2FsZSA9IHNjYWxlIC8gMTAwO1xuICB9XG5cbiAgc2V0TGVhZGluZyhsZWFkaW5nKSB7XG4gICAgdGhpcy5jdXJyZW50LmxlYWRpbmcgPSAtbGVhZGluZztcbiAgfVxuXG4gIHNldEZvbnQoZm9udFJlZk5hbWUsIHNpemUpIHtcbiAgICBjb25zdCBmb250T2JqID0gdGhpcy5jb21tb25PYmpzLmdldChmb250UmVmTmFtZSk7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcblxuICAgIGlmICghZm9udE9iaikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBmaW5kIGZvbnQgZm9yICR7Zm9udFJlZk5hbWV9YCk7XG4gICAgfVxuXG4gICAgY3VycmVudC5mb250TWF0cml4ID0gZm9udE9iai5mb250TWF0cml4IHx8IF91dGlsLkZPTlRfSURFTlRJVFlfTUFUUklYO1xuXG4gICAgaWYgKGN1cnJlbnQuZm9udE1hdHJpeFswXSA9PT0gMCB8fCBjdXJyZW50LmZvbnRNYXRyaXhbM10gPT09IDApIHtcbiAgICAgICgwLCBfdXRpbC53YXJuKShcIkludmFsaWQgZm9udCBtYXRyaXggZm9yIGZvbnQgXCIgKyBmb250UmVmTmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHNpemUgPCAwKSB7XG4gICAgICBzaXplID0gLXNpemU7XG4gICAgICBjdXJyZW50LmZvbnREaXJlY3Rpb24gPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudC5mb250RGlyZWN0aW9uID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQuZm9udCA9IGZvbnRPYmo7XG4gICAgdGhpcy5jdXJyZW50LmZvbnRTaXplID0gc2l6ZTtcblxuICAgIGlmIChmb250T2JqLmlzVHlwZTNGb250KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmFtZSA9IGZvbnRPYmoubG9hZGVkTmFtZSB8fCBcInNhbnMtc2VyaWZcIjtcbiAgICBsZXQgYm9sZCA9IFwibm9ybWFsXCI7XG5cbiAgICBpZiAoZm9udE9iai5ibGFjaykge1xuICAgICAgYm9sZCA9IFwiOTAwXCI7XG4gICAgfSBlbHNlIGlmIChmb250T2JqLmJvbGQpIHtcbiAgICAgIGJvbGQgPSBcImJvbGRcIjtcbiAgICB9XG5cbiAgICBjb25zdCBpdGFsaWMgPSBmb250T2JqLml0YWxpYyA/IFwiaXRhbGljXCIgOiBcIm5vcm1hbFwiO1xuICAgIGNvbnN0IHR5cGVmYWNlID0gYFwiJHtuYW1lfVwiLCAke2ZvbnRPYmouZmFsbGJhY2tOYW1lfWA7XG4gICAgbGV0IGJyb3dzZXJGb250U2l6ZSA9IHNpemU7XG5cbiAgICBpZiAoc2l6ZSA8IE1JTl9GT05UX1NJWkUpIHtcbiAgICAgIGJyb3dzZXJGb250U2l6ZSA9IE1JTl9GT05UX1NJWkU7XG4gICAgfSBlbHNlIGlmIChzaXplID4gTUFYX0ZPTlRfU0laRSkge1xuICAgICAgYnJvd3NlckZvbnRTaXplID0gTUFYX0ZPTlRfU0laRTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnQuZm9udFNpemVTY2FsZSA9IHNpemUgLyBicm93c2VyRm9udFNpemU7XG4gICAgdGhpcy5jdHguZm9udCA9IGAke2l0YWxpY30gJHtib2xkfSAke2Jyb3dzZXJGb250U2l6ZX1weCAke3R5cGVmYWNlfWA7XG4gIH1cblxuICBzZXRUZXh0UmVuZGVyaW5nTW9kZShtb2RlKSB7XG4gICAgdGhpcy5jdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlID0gbW9kZTtcbiAgfVxuXG4gIHNldFRleHRSaXNlKHJpc2UpIHtcbiAgICB0aGlzLmN1cnJlbnQudGV4dFJpc2UgPSByaXNlO1xuICB9XG5cbiAgbW92ZVRleHQoeCwgeSkge1xuICAgIHRoaXMuY3VycmVudC54ID0gdGhpcy5jdXJyZW50LmxpbmVYICs9IHg7XG4gICAgdGhpcy5jdXJyZW50LnkgPSB0aGlzLmN1cnJlbnQubGluZVkgKz0geTtcbiAgfVxuXG4gIHNldExlYWRpbmdNb3ZlVGV4dCh4LCB5KSB7XG4gICAgdGhpcy5zZXRMZWFkaW5nKC15KTtcbiAgICB0aGlzLm1vdmVUZXh0KHgsIHkpO1xuICB9XG5cbiAgc2V0VGV4dE1hdHJpeChhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgdGhpcy5jdXJyZW50LnRleHRNYXRyaXggPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgdGhpcy5jdXJyZW50LnRleHRNYXRyaXhTY2FsZSA9IE1hdGguaHlwb3QoYSwgYik7XG4gICAgdGhpcy5jdXJyZW50LnggPSB0aGlzLmN1cnJlbnQubGluZVggPSAwO1xuICAgIHRoaXMuY3VycmVudC55ID0gdGhpcy5jdXJyZW50LmxpbmVZID0gMDtcbiAgfVxuXG4gIG5leHRMaW5lKCkge1xuICAgIHRoaXMubW92ZVRleHQoMCwgdGhpcy5jdXJyZW50LmxlYWRpbmcpO1xuICB9XG5cbiAgcGFpbnRDaGFyKGNoYXJhY3RlciwgeCwgeSwgcGF0dGVyblRyYW5zZm9ybSkge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgY29uc3QgZm9udCA9IGN1cnJlbnQuZm9udDtcbiAgICBjb25zdCB0ZXh0UmVuZGVyaW5nTW9kZSA9IGN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGU7XG4gICAgY29uc3QgZm9udFNpemUgPSBjdXJyZW50LmZvbnRTaXplIC8gY3VycmVudC5mb250U2l6ZVNjYWxlO1xuICAgIGNvbnN0IGZpbGxTdHJva2VNb2RlID0gdGV4dFJlbmRlcmluZ01vZGUgJiBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRV9NQVNLO1xuICAgIGNvbnN0IGlzQWRkVG9QYXRoU2V0ID0gISEodGV4dFJlbmRlcmluZ01vZGUgJiBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5BRERfVE9fUEFUSF9GTEFHKTtcbiAgICBjb25zdCBwYXR0ZXJuRmlsbCA9IGN1cnJlbnQucGF0dGVybkZpbGwgJiYgIWZvbnQubWlzc2luZ0ZpbGU7XG4gICAgbGV0IGFkZFRvUGF0aDtcblxuICAgIGlmIChmb250LmRpc2FibGVGb250RmFjZSB8fCBpc0FkZFRvUGF0aFNldCB8fCBwYXR0ZXJuRmlsbCkge1xuICAgICAgYWRkVG9QYXRoID0gZm9udC5nZXRQYXRoR2VuZXJhdG9yKHRoaXMuY29tbW9uT2JqcywgY2hhcmFjdGVyKTtcbiAgICB9XG5cbiAgICBpZiAoZm9udC5kaXNhYmxlRm9udEZhY2UgfHwgcGF0dGVybkZpbGwpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHgudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgYWRkVG9QYXRoKGN0eCwgZm9udFNpemUpO1xuXG4gICAgICBpZiAocGF0dGVyblRyYW5zZm9ybSkge1xuICAgICAgICBjdHguc2V0VHJhbnNmb3JtLmFwcGx5KGN0eCwgcGF0dGVyblRyYW5zZm9ybSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWxsU3Ryb2tlTW9kZSA9PT0gX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuRklMTCB8fCBmaWxsU3Ryb2tlTW9kZSA9PT0gX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0UpIHtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpbGxTdHJva2VNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5TVFJPS0UgfHwgZmlsbFN0cm9rZU1vZGUgPT09IF91dGlsLlRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFKSB7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgIH1cblxuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGZpbGxTdHJva2VNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMIHx8IGZpbGxTdHJva2VNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRSkge1xuICAgICAgICBjdHguZmlsbFRleHQoY2hhcmFjdGVyLCB4LCB5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpbGxTdHJva2VNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5TVFJPS0UgfHwgZmlsbFN0cm9rZU1vZGUgPT09IF91dGlsLlRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFKSB7XG4gICAgICAgIGN0eC5zdHJva2VUZXh0KGNoYXJhY3RlciwgeCwgeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQWRkVG9QYXRoU2V0KSB7XG4gICAgICBjb25zdCBwYXRocyA9IHRoaXMucGVuZGluZ1RleHRQYXRocyB8fCAodGhpcy5wZW5kaW5nVGV4dFBhdGhzID0gW10pO1xuICAgICAgcGF0aHMucHVzaCh7XG4gICAgICAgIHRyYW5zZm9ybTogY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0sXG4gICAgICAgIHgsXG4gICAgICAgIHksXG4gICAgICAgIGZvbnRTaXplLFxuICAgICAgICBhZGRUb1BhdGhcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBjb250ZXh0OiBjdHhcbiAgICB9ID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXCJpc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZFwiLCAxMCwgMTAsIGZhbHNlKTtcbiAgICBjdHguc2NhbGUoMS41LCAxKTtcbiAgICBjdHguZmlsbFRleHQoXCJJXCIsIDAsIDEwKTtcbiAgICBjb25zdCBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxMCwgMTApLmRhdGE7XG4gICAgbGV0IGVuYWJsZWQgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGkgPSAzOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgaWYgKGRhdGFbaV0gPiAwICYmIGRhdGFbaV0gPCAyNTUpIHtcbiAgICAgICAgZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoMCwgX3V0aWwuc2hhZG93KSh0aGlzLCBcImlzRm9udFN1YnBpeGVsQUFFbmFibGVkXCIsIGVuYWJsZWQpO1xuICB9XG5cbiAgc2hvd1RleHQoZ2x5cGhzKSB7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICBjb25zdCBmb250ID0gY3VycmVudC5mb250O1xuXG4gICAgaWYgKGZvbnQuaXNUeXBlM0ZvbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNob3dUeXBlM1RleHQoZ2x5cGhzKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb250U2l6ZSA9IGN1cnJlbnQuZm9udFNpemU7XG5cbiAgICBpZiAoZm9udFNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3QgZm9udFNpemVTY2FsZSA9IGN1cnJlbnQuZm9udFNpemVTY2FsZTtcbiAgICBjb25zdCBjaGFyU3BhY2luZyA9IGN1cnJlbnQuY2hhclNwYWNpbmc7XG4gICAgY29uc3Qgd29yZFNwYWNpbmcgPSBjdXJyZW50LndvcmRTcGFjaW5nO1xuICAgIGNvbnN0IGZvbnREaXJlY3Rpb24gPSBjdXJyZW50LmZvbnREaXJlY3Rpb247XG4gICAgY29uc3QgdGV4dEhTY2FsZSA9IGN1cnJlbnQudGV4dEhTY2FsZSAqIGZvbnREaXJlY3Rpb247XG4gICAgY29uc3QgZ2x5cGhzTGVuZ3RoID0gZ2x5cGhzLmxlbmd0aDtcbiAgICBjb25zdCB2ZXJ0aWNhbCA9IGZvbnQudmVydGljYWw7XG4gICAgY29uc3Qgc3BhY2luZ0RpciA9IHZlcnRpY2FsID8gMSA6IC0xO1xuICAgIGNvbnN0IGRlZmF1bHRWTWV0cmljcyA9IGZvbnQuZGVmYXVsdFZNZXRyaWNzO1xuICAgIGNvbnN0IHdpZHRoQWR2YW5jZVNjYWxlID0gZm9udFNpemUgKiBjdXJyZW50LmZvbnRNYXRyaXhbMF07XG4gICAgY29uc3Qgc2ltcGxlRmlsbFRleHQgPSBjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMICYmICFmb250LmRpc2FibGVGb250RmFjZSAmJiAhY3VycmVudC5wYXR0ZXJuRmlsbDtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2Zvcm0uYXBwbHkoY3R4LCBjdXJyZW50LnRleHRNYXRyaXgpO1xuICAgIGN0eC50cmFuc2xhdGUoY3VycmVudC54LCBjdXJyZW50LnkgKyBjdXJyZW50LnRleHRSaXNlKTtcblxuICAgIGlmIChmb250RGlyZWN0aW9uID4gMCkge1xuICAgICAgY3R4LnNjYWxlKHRleHRIU2NhbGUsIC0xKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LnNjYWxlKHRleHRIU2NhbGUsIDEpO1xuICAgIH1cblxuICAgIGxldCBwYXR0ZXJuVHJhbnNmb3JtO1xuXG4gICAgaWYgKGN1cnJlbnQucGF0dGVybkZpbGwpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjb25zdCBwYXR0ZXJuID0gY3VycmVudC5maWxsQ29sb3IuZ2V0UGF0dGVybihjdHgsIHRoaXMsIGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSwgX3BhdHRlcm5faGVscGVyLlBhdGhUeXBlLkZJTEwpO1xuICAgICAgcGF0dGVyblRyYW5zZm9ybSA9IGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBwYXR0ZXJuO1xuICAgIH1cblxuICAgIGxldCBsaW5lV2lkdGggPSBjdXJyZW50LmxpbmVXaWR0aDtcbiAgICBjb25zdCBzY2FsZSA9IGN1cnJlbnQudGV4dE1hdHJpeFNjYWxlO1xuXG4gICAgaWYgKHNjYWxlID09PSAwIHx8IGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZmlsbFN0cm9rZU1vZGUgPSBjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlICYgX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VfTUFTSztcblxuICAgICAgaWYgKGZpbGxTdHJva2VNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5TVFJPS0UgfHwgZmlsbFN0cm9rZU1vZGUgPT09IF91dGlsLlRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFKSB7XG4gICAgICAgIGxpbmVXaWR0aCA9IHRoaXMuZ2V0U2luZ2xlUGl4ZWxXaWR0aCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsaW5lV2lkdGggLz0gc2NhbGU7XG4gICAgfVxuXG4gICAgaWYgKGZvbnRTaXplU2NhbGUgIT09IDEuMCkge1xuICAgICAgY3R4LnNjYWxlKGZvbnRTaXplU2NhbGUsIGZvbnRTaXplU2NhbGUpO1xuICAgICAgbGluZVdpZHRoIC89IGZvbnRTaXplU2NhbGU7XG4gICAgfVxuXG4gICAgY3R4LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgICBsZXQgeCA9IDAsXG4gICAgICAgIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZ2x5cGhzTGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGdseXBoID0gZ2x5cGhzW2ldO1xuXG4gICAgICBpZiAodHlwZW9mIGdseXBoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHggKz0gc3BhY2luZ0RpciAqIGdseXBoICogZm9udFNpemUgLyAxMDAwO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3RvcmVOZWVkZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHNwYWNpbmcgPSAoZ2x5cGguaXNTcGFjZSA/IHdvcmRTcGFjaW5nIDogMCkgKyBjaGFyU3BhY2luZztcbiAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGdseXBoLmZvbnRDaGFyO1xuICAgICAgY29uc3QgYWNjZW50ID0gZ2x5cGguYWNjZW50O1xuICAgICAgbGV0IHNjYWxlZFgsIHNjYWxlZFk7XG4gICAgICBsZXQgd2lkdGggPSBnbHlwaC53aWR0aDtcblxuICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgIGNvbnN0IHZtZXRyaWMgPSBnbHlwaC52bWV0cmljIHx8IGRlZmF1bHRWTWV0cmljcztcbiAgICAgICAgY29uc3QgdnggPSAtKGdseXBoLnZtZXRyaWMgPyB2bWV0cmljWzFdIDogd2lkdGggKiAwLjUpICogd2lkdGhBZHZhbmNlU2NhbGU7XG4gICAgICAgIGNvbnN0IHZ5ID0gdm1ldHJpY1syXSAqIHdpZHRoQWR2YW5jZVNjYWxlO1xuICAgICAgICB3aWR0aCA9IHZtZXRyaWMgPyAtdm1ldHJpY1swXSA6IHdpZHRoO1xuICAgICAgICBzY2FsZWRYID0gdnggLyBmb250U2l6ZVNjYWxlO1xuICAgICAgICBzY2FsZWRZID0gKHggKyB2eSkgLyBmb250U2l6ZVNjYWxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2NhbGVkWCA9IHggLyBmb250U2l6ZVNjYWxlO1xuICAgICAgICBzY2FsZWRZID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvbnQucmVtZWFzdXJlICYmIHdpZHRoID4gMCkge1xuICAgICAgICBjb25zdCBtZWFzdXJlZFdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KGNoYXJhY3Rlcikud2lkdGggKiAxMDAwIC8gZm9udFNpemUgKiBmb250U2l6ZVNjYWxlO1xuXG4gICAgICAgIGlmICh3aWR0aCA8IG1lYXN1cmVkV2lkdGggJiYgdGhpcy5pc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCkge1xuICAgICAgICAgIGNvbnN0IGNoYXJhY3RlclNjYWxlWCA9IHdpZHRoIC8gbWVhc3VyZWRXaWR0aDtcbiAgICAgICAgICByZXN0b3JlTmVlZGVkID0gdHJ1ZTtcbiAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgIGN0eC5zY2FsZShjaGFyYWN0ZXJTY2FsZVgsIDEpO1xuICAgICAgICAgIHNjYWxlZFggLz0gY2hhcmFjdGVyU2NhbGVYO1xuICAgICAgICB9IGVsc2UgaWYgKHdpZHRoICE9PSBtZWFzdXJlZFdpZHRoKSB7XG4gICAgICAgICAgc2NhbGVkWCArPSAod2lkdGggLSBtZWFzdXJlZFdpZHRoKSAvIDIwMDAgKiBmb250U2l6ZSAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29udGVudFZpc2libGUgJiYgKGdseXBoLmlzSW5Gb250IHx8IGZvbnQubWlzc2luZ0ZpbGUpKSB7XG4gICAgICAgIGlmIChzaW1wbGVGaWxsVGV4dCAmJiAhYWNjZW50KSB7XG4gICAgICAgICAgY3R4LmZpbGxUZXh0KGNoYXJhY3Rlciwgc2NhbGVkWCwgc2NhbGVkWSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wYWludENoYXIoY2hhcmFjdGVyLCBzY2FsZWRYLCBzY2FsZWRZLCBwYXR0ZXJuVHJhbnNmb3JtKTtcblxuICAgICAgICAgIGlmIChhY2NlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZEFjY2VudFggPSBzY2FsZWRYICsgZm9udFNpemUgKiBhY2NlbnQub2Zmc2V0LnggLyBmb250U2l6ZVNjYWxlO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVkQWNjZW50WSA9IHNjYWxlZFkgLSBmb250U2l6ZSAqIGFjY2VudC5vZmZzZXQueSAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgICAgICB0aGlzLnBhaW50Q2hhcihhY2NlbnQuZm9udENoYXIsIHNjYWxlZEFjY2VudFgsIHNjYWxlZEFjY2VudFksIHBhdHRlcm5UcmFuc2Zvcm0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgY2hhcldpZHRoO1xuXG4gICAgICBpZiAodmVydGljYWwpIHtcbiAgICAgICAgY2hhcldpZHRoID0gd2lkdGggKiB3aWR0aEFkdmFuY2VTY2FsZSAtIHNwYWNpbmcgKiBmb250RGlyZWN0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhcldpZHRoID0gd2lkdGggKiB3aWR0aEFkdmFuY2VTY2FsZSArIHNwYWNpbmcgKiBmb250RGlyZWN0aW9uO1xuICAgICAgfVxuXG4gICAgICB4ICs9IGNoYXJXaWR0aDtcblxuICAgICAgaWYgKHJlc3RvcmVOZWVkZWQpIHtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodmVydGljYWwpIHtcbiAgICAgIGN1cnJlbnQueSAtPSB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50LnggKz0geCAqIHRleHRIU2NhbGU7XG4gICAgfVxuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgc2hvd1R5cGUzVGV4dChnbHlwaHMpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGZvbnQgPSBjdXJyZW50LmZvbnQ7XG4gICAgY29uc3QgZm9udFNpemUgPSBjdXJyZW50LmZvbnRTaXplO1xuICAgIGNvbnN0IGZvbnREaXJlY3Rpb24gPSBjdXJyZW50LmZvbnREaXJlY3Rpb247XG4gICAgY29uc3Qgc3BhY2luZ0RpciA9IGZvbnQudmVydGljYWwgPyAxIDogLTE7XG4gICAgY29uc3QgY2hhclNwYWNpbmcgPSBjdXJyZW50LmNoYXJTcGFjaW5nO1xuICAgIGNvbnN0IHdvcmRTcGFjaW5nID0gY3VycmVudC53b3JkU3BhY2luZztcbiAgICBjb25zdCB0ZXh0SFNjYWxlID0gY3VycmVudC50ZXh0SFNjYWxlICogZm9udERpcmVjdGlvbjtcbiAgICBjb25zdCBmb250TWF0cml4ID0gY3VycmVudC5mb250TWF0cml4IHx8IF91dGlsLkZPTlRfSURFTlRJVFlfTUFUUklYO1xuICAgIGNvbnN0IGdseXBoc0xlbmd0aCA9IGdseXBocy5sZW5ndGg7XG4gICAgY29uc3QgaXNUZXh0SW52aXNpYmxlID0gY3VycmVudC50ZXh0UmVuZGVyaW5nTW9kZSA9PT0gX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuSU5WSVNJQkxFO1xuICAgIGxldCBpLCBnbHlwaCwgd2lkdGgsIHNwYWNpbmdMZW5ndGg7XG5cbiAgICBpZiAoaXNUZXh0SW52aXNpYmxlIHx8IGZvbnRTaXplID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZyA9IG51bGw7XG4gICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9IG51bGw7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHgudHJhbnNmb3JtLmFwcGx5KGN0eCwgY3VycmVudC50ZXh0TWF0cml4KTtcbiAgICBjdHgudHJhbnNsYXRlKGN1cnJlbnQueCwgY3VycmVudC55KTtcbiAgICBjdHguc2NhbGUodGV4dEhTY2FsZSwgZm9udERpcmVjdGlvbik7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZ2x5cGhzTGVuZ3RoOyArK2kpIHtcbiAgICAgIGdseXBoID0gZ2x5cGhzW2ldO1xuXG4gICAgICBpZiAodHlwZW9mIGdseXBoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHNwYWNpbmdMZW5ndGggPSBzcGFjaW5nRGlyICogZ2x5cGggKiBmb250U2l6ZSAvIDEwMDA7XG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShzcGFjaW5nTGVuZ3RoLCAwKTtcbiAgICAgICAgY3VycmVudC54ICs9IHNwYWNpbmdMZW5ndGggKiB0ZXh0SFNjYWxlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3BhY2luZyA9IChnbHlwaC5pc1NwYWNlID8gd29yZFNwYWNpbmcgOiAwKSArIGNoYXJTcGFjaW5nO1xuICAgICAgY29uc3Qgb3BlcmF0b3JMaXN0ID0gZm9udC5jaGFyUHJvY09wZXJhdG9yTGlzdFtnbHlwaC5vcGVyYXRvckxpc3RJZF07XG5cbiAgICAgIGlmICghb3BlcmF0b3JMaXN0KSB7XG4gICAgICAgICgwLCBfdXRpbC53YXJuKShgVHlwZTMgY2hhcmFjdGVyIFwiJHtnbHlwaC5vcGVyYXRvckxpc3RJZH1cIiBpcyBub3QgYXZhaWxhYmxlLmApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzaW5nVHlwZTMgPSBnbHlwaDtcbiAgICAgICAgdGhpcy5zYXZlKCk7XG4gICAgICAgIGN0eC5zY2FsZShmb250U2l6ZSwgZm9udFNpemUpO1xuICAgICAgICBjdHgudHJhbnNmb3JtLmFwcGx5KGN0eCwgZm9udE1hdHJpeCk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZU9wZXJhdG9yTGlzdChvcGVyYXRvckxpc3QpO1xuICAgICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBfdXRpbC5VdGlsLmFwcGx5VHJhbnNmb3JtKFtnbHlwaC53aWR0aCwgMF0sIGZvbnRNYXRyaXgpO1xuXG4gICAgICB3aWR0aCA9IHRyYW5zZm9ybWVkWzBdICogZm9udFNpemUgKyBzcGFjaW5nO1xuICAgICAgY3R4LnRyYW5zbGF0ZSh3aWR0aCwgMCk7XG4gICAgICBjdXJyZW50LnggKz0gd2lkdGggKiB0ZXh0SFNjYWxlO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgdGhpcy5wcm9jZXNzaW5nVHlwZTMgPSBudWxsO1xuICB9XG5cbiAgc2V0Q2hhcldpZHRoKHhXaWR0aCwgeVdpZHRoKSB7fVxuXG4gIHNldENoYXJXaWR0aEFuZEJvdW5kcyh4V2lkdGgsIHlXaWR0aCwgbGx4LCBsbHksIHVyeCwgdXJ5KSB7XG4gICAgdGhpcy5jdHgucmVjdChsbHgsIGxseSwgdXJ4IC0gbGx4LCB1cnkgLSBsbHkpO1xuICAgIHRoaXMuY3R4LmNsaXAoKTtcbiAgICB0aGlzLmVuZFBhdGgoKTtcbiAgfVxuXG4gIGdldENvbG9yTl9QYXR0ZXJuKElSKSB7XG4gICAgbGV0IHBhdHRlcm47XG5cbiAgICBpZiAoSVJbMF0gPT09IFwiVGlsaW5nUGF0dGVyblwiKSB7XG4gICAgICBjb25zdCBjb2xvciA9IElSWzFdO1xuICAgICAgY29uc3QgYmFzZVRyYW5zZm9ybSA9IHRoaXMuYmFzZVRyYW5zZm9ybSB8fCB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtLnNsaWNlKCk7XG4gICAgICBjb25zdCBjYW52YXNHcmFwaGljc0ZhY3RvcnkgPSB7XG4gICAgICAgIGNyZWF0ZUNhbnZhc0dyYXBoaWNzOiBjdHggPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgQ2FudmFzR3JhcGhpY3MoY3R4LCB0aGlzLmNvbW1vbk9ianMsIHRoaXMub2JqcywgdGhpcy5jYW52YXNGYWN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHBhdHRlcm4gPSBuZXcgX3BhdHRlcm5faGVscGVyLlRpbGluZ1BhdHRlcm4oSVIsIGNvbG9yLCB0aGlzLmN0eCwgY2FudmFzR3JhcGhpY3NGYWN0b3J5LCBiYXNlVHJhbnNmb3JtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0dGVybiA9IHRoaXMuX2dldFBhdHRlcm4oSVJbMV0sIElSWzJdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxuXG4gIHNldFN0cm9rZUNvbG9yTigpIHtcbiAgICB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3IgPSB0aGlzLmdldENvbG9yTl9QYXR0ZXJuKGFyZ3VtZW50cyk7XG4gIH1cblxuICBzZXRGaWxsQ29sb3JOKCkge1xuICAgIHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSB0aGlzLmdldENvbG9yTl9QYXR0ZXJuKGFyZ3VtZW50cyk7XG4gICAgdGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsID0gdHJ1ZTtcbiAgfVxuXG4gIHNldFN0cm9rZVJHQkNvbG9yKHIsIGcsIGIpIHtcbiAgICBjb25zdCBjb2xvciA9IHRoaXMuc2VsZWN0Q29sb3I/LihyLCBnLCBiKSB8fCBfdXRpbC5VdGlsLm1ha2VIZXhDb2xvcihyLCBnLCBiKTtcblxuICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgdGhpcy5jdXJyZW50LnN0cm9rZUNvbG9yID0gY29sb3I7XG4gIH1cblxuICBzZXRGaWxsUkdCQ29sb3IociwgZywgYikge1xuICAgIGNvbnN0IGNvbG9yID0gdGhpcy5zZWxlY3RDb2xvcj8uKHIsIGcsIGIpIHx8IF91dGlsLlV0aWwubWFrZUhleENvbG9yKHIsIGcsIGIpO1xuXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgdGhpcy5jdXJyZW50LmZpbGxDb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuY3VycmVudC5wYXR0ZXJuRmlsbCA9IGZhbHNlO1xuICB9XG5cbiAgX2dldFBhdHRlcm4ob2JqSWQsIG1hdHJpeCA9IG51bGwpIHtcbiAgICBsZXQgcGF0dGVybjtcblxuICAgIGlmICh0aGlzLmNhY2hlZFBhdHRlcm5zLmhhcyhvYmpJZCkpIHtcbiAgICAgIHBhdHRlcm4gPSB0aGlzLmNhY2hlZFBhdHRlcm5zLmdldChvYmpJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdHRlcm4gPSAoMCwgX3BhdHRlcm5faGVscGVyLmdldFNoYWRpbmdQYXR0ZXJuKSh0aGlzLm9ianMuZ2V0KG9iaklkKSk7XG4gICAgICB0aGlzLmNhY2hlZFBhdHRlcm5zLnNldChvYmpJZCwgcGF0dGVybik7XG4gICAgfVxuXG4gICAgaWYgKG1hdHJpeCkge1xuICAgICAgcGF0dGVybi5tYXRyaXggPSBtYXRyaXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdHRlcm47XG4gIH1cblxuICBzaGFkaW5nRmlsbChvYmpJZCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIHRoaXMuc2F2ZSgpO1xuXG4gICAgY29uc3QgcGF0dGVybiA9IHRoaXMuX2dldFBhdHRlcm4ob2JqSWQpO1xuXG4gICAgY3R4LmZpbGxTdHlsZSA9IHBhdHRlcm4uZ2V0UGF0dGVybihjdHgsIHRoaXMsIGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSwgX3BhdHRlcm5faGVscGVyLlBhdGhUeXBlLlNIQURJTkcpO1xuICAgIGNvbnN0IGludiA9IGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtSW52ZXJzZTtcblxuICAgIGlmIChpbnYpIHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGN0eC5jYW52YXM7XG4gICAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG5cbiAgICAgIGNvbnN0IGJsID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbMCwgMF0sIGludik7XG5cbiAgICAgIGNvbnN0IGJyID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbMCwgaGVpZ2h0XSwgaW52KTtcblxuICAgICAgY29uc3QgdWwgPSBfdXRpbC5VdGlsLmFwcGx5VHJhbnNmb3JtKFt3aWR0aCwgMF0sIGludik7XG5cbiAgICAgIGNvbnN0IHVyID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbd2lkdGgsIGhlaWdodF0sIGludik7XG5cbiAgICAgIGNvbnN0IHgwID0gTWF0aC5taW4oYmxbMF0sIGJyWzBdLCB1bFswXSwgdXJbMF0pO1xuICAgICAgY29uc3QgeTAgPSBNYXRoLm1pbihibFsxXSwgYnJbMV0sIHVsWzFdLCB1clsxXSk7XG4gICAgICBjb25zdCB4MSA9IE1hdGgubWF4KGJsWzBdLCBiclswXSwgdWxbMF0sIHVyWzBdKTtcbiAgICAgIGNvbnN0IHkxID0gTWF0aC5tYXgoYmxbMV0sIGJyWzFdLCB1bFsxXSwgdXJbMV0pO1xuICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeDAsIHkwLCB4MSAtIHgwLCB5MSAtIHkwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdHguZmlsbFJlY3QoLTFlMTAsIC0xZTEwLCAyZTEwLCAyZTEwKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBvc2UodGhpcy5jdXJyZW50LmdldENsaXBwZWRQYXRoQm91bmRpbmdCb3goKSk7XG4gICAgdGhpcy5yZXN0b3JlKCk7XG4gIH1cblxuICBiZWdpbklubGluZUltYWdlKCkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJTaG91bGQgbm90IGNhbGwgYmVnaW5JbmxpbmVJbWFnZVwiKTtcbiAgfVxuXG4gIGJlZ2luSW1hZ2VEYXRhKCkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJTaG91bGQgbm90IGNhbGwgYmVnaW5JbWFnZURhdGFcIik7XG4gIH1cblxuICBwYWludEZvcm1YT2JqZWN0QmVnaW4obWF0cml4LCBiYm94KSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zYXZlKCk7XG4gICAgdGhpcy5iYXNlVHJhbnNmb3JtU3RhY2sucHVzaCh0aGlzLmJhc2VUcmFuc2Zvcm0pO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobWF0cml4KSAmJiBtYXRyaXgubGVuZ3RoID09PSA2KSB7XG4gICAgICB0aGlzLnRyYW5zZm9ybS5hcHBseSh0aGlzLCBtYXRyaXgpO1xuICAgIH1cblxuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG5cbiAgICBpZiAoYmJveCkge1xuICAgICAgY29uc3Qgd2lkdGggPSBiYm94WzJdIC0gYmJveFswXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGJib3hbM10gLSBiYm94WzFdO1xuICAgICAgdGhpcy5jdHgucmVjdChiYm94WzBdLCBiYm94WzFdLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIHRoaXMuY3VycmVudC51cGRhdGVSZWN0TWluTWF4KHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0sIGJib3gpO1xuICAgICAgdGhpcy5jbGlwKCk7XG4gICAgICB0aGlzLmVuZFBhdGgoKTtcbiAgICB9XG4gIH1cblxuICBwYWludEZvcm1YT2JqZWN0RW5kKCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVzdG9yZSgpO1xuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IHRoaXMuYmFzZVRyYW5zZm9ybVN0YWNrLnBvcCgpO1xuICB9XG5cbiAgYmVnaW5Hcm91cChncm91cCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2F2ZSgpO1xuXG4gICAgaWYgKHRoaXMuaW5TTWFza01vZGUpIHtcbiAgICAgIHRoaXMuZW5kU01hc2tNb2RlKCk7XG4gICAgICB0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2sgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDdHggPSB0aGlzLmN0eDtcblxuICAgIGlmICghZ3JvdXAuaXNvbGF0ZWQpIHtcbiAgICAgICgwLCBfdXRpbC5pbmZvKShcIlRPRE86IFN1cHBvcnQgbm9uLWlzb2xhdGVkIGdyb3Vwcy5cIik7XG4gICAgfVxuXG4gICAgaWYgKGdyb3VwLmtub2Nrb3V0KSB7XG4gICAgICAoMCwgX3V0aWwud2FybikoXCJLbm9ja291dCBncm91cHMgbm90IHN1cHBvcnRlZC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IGN1cnJlbnRDdHgubW96Q3VycmVudFRyYW5zZm9ybTtcblxuICAgIGlmIChncm91cC5tYXRyaXgpIHtcbiAgICAgIGN1cnJlbnRDdHgudHJhbnNmb3JtLmFwcGx5KGN1cnJlbnRDdHgsIGdyb3VwLm1hdHJpeCk7XG4gICAgfVxuXG4gICAgaWYgKCFncm91cC5iYm94KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3VuZGluZyBib3ggaXMgcmVxdWlyZWQuXCIpO1xuICAgIH1cblxuICAgIGxldCBib3VuZHMgPSBfdXRpbC5VdGlsLmdldEF4aWFsQWxpZ25lZEJvdW5kaW5nQm94KGdyb3VwLmJib3gsIGN1cnJlbnRDdHgubW96Q3VycmVudFRyYW5zZm9ybSk7XG5cbiAgICBjb25zdCBjYW52YXNCb3VuZHMgPSBbMCwgMCwgY3VycmVudEN0eC5jYW52YXMud2lkdGgsIGN1cnJlbnRDdHguY2FudmFzLmhlaWdodF07XG4gICAgYm91bmRzID0gX3V0aWwuVXRpbC5pbnRlcnNlY3QoYm91bmRzLCBjYW52YXNCb3VuZHMpIHx8IFswLCAwLCAwLCAwXTtcbiAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5mbG9vcihib3VuZHNbMF0pO1xuICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLmZsb29yKGJvdW5kc1sxXSk7XG4gICAgbGV0IGRyYXduV2lkdGggPSBNYXRoLm1heChNYXRoLmNlaWwoYm91bmRzWzJdKSAtIG9mZnNldFgsIDEpO1xuICAgIGxldCBkcmF3bkhlaWdodCA9IE1hdGgubWF4KE1hdGguY2VpbChib3VuZHNbM10pIC0gb2Zmc2V0WSwgMSk7XG4gICAgbGV0IHNjYWxlWCA9IDEsXG4gICAgICAgIHNjYWxlWSA9IDE7XG5cbiAgICBpZiAoZHJhd25XaWR0aCA+IE1BWF9HUk9VUF9TSVpFKSB7XG4gICAgICBzY2FsZVggPSBkcmF3bldpZHRoIC8gTUFYX0dST1VQX1NJWkU7XG4gICAgICBkcmF3bldpZHRoID0gTUFYX0dST1VQX1NJWkU7XG4gICAgfVxuXG4gICAgaWYgKGRyYXduSGVpZ2h0ID4gTUFYX0dST1VQX1NJWkUpIHtcbiAgICAgIHNjYWxlWSA9IGRyYXduSGVpZ2h0IC8gTUFYX0dST1VQX1NJWkU7XG4gICAgICBkcmF3bkhlaWdodCA9IE1BWF9HUk9VUF9TSVpFO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudC5zdGFydE5ld1BhdGhBbmRDbGlwQm94KFswLCAwLCBkcmF3bldpZHRoLCBkcmF3bkhlaWdodF0pO1xuICAgIGxldCBjYWNoZUlkID0gXCJncm91cEF0XCIgKyB0aGlzLmdyb3VwTGV2ZWw7XG5cbiAgICBpZiAoZ3JvdXAuc21hc2spIHtcbiAgICAgIGNhY2hlSWQgKz0gXCJfc21hc2tfXCIgKyB0aGlzLnNtYXNrQ291bnRlcisrICUgMjtcbiAgICB9XG5cbiAgICBjb25zdCBzY3JhdGNoQ2FudmFzID0gdGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoY2FjaGVJZCwgZHJhd25XaWR0aCwgZHJhd25IZWlnaHQsIHRydWUpO1xuICAgIGNvbnN0IGdyb3VwQ3R4ID0gc2NyYXRjaENhbnZhcy5jb250ZXh0O1xuICAgIGdyb3VwQ3R4LnNjYWxlKDEgLyBzY2FsZVgsIDEgLyBzY2FsZVkpO1xuICAgIGdyb3VwQ3R4LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICAgIGdyb3VwQ3R4LnRyYW5zZm9ybS5hcHBseShncm91cEN0eCwgY3VycmVudFRyYW5zZm9ybSk7XG5cbiAgICBpZiAoZ3JvdXAuc21hc2spIHtcbiAgICAgIHRoaXMuc21hc2tTdGFjay5wdXNoKHtcbiAgICAgICAgY2FudmFzOiBzY3JhdGNoQ2FudmFzLmNhbnZhcyxcbiAgICAgICAgY29udGV4dDogZ3JvdXBDdHgsXG4gICAgICAgIG9mZnNldFgsXG4gICAgICAgIG9mZnNldFksXG4gICAgICAgIHNjYWxlWCxcbiAgICAgICAgc2NhbGVZLFxuICAgICAgICBzdWJ0eXBlOiBncm91cC5zbWFzay5zdWJ0eXBlLFxuICAgICAgICBiYWNrZHJvcDogZ3JvdXAuc21hc2suYmFja2Ryb3AsXG4gICAgICAgIHRyYW5zZmVyTWFwOiBncm91cC5zbWFzay50cmFuc2Zlck1hcCB8fCBudWxsLFxuICAgICAgICBzdGFydFRyYW5zZm9ybUludmVyc2U6IG51bGxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Q3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICAgIGN1cnJlbnRDdHgudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgY3VycmVudEN0eC5zY2FsZShzY2FsZVgsIHNjYWxlWSk7XG4gICAgICBjdXJyZW50Q3R4LnNhdmUoKTtcbiAgICB9XG5cbiAgICBjb3B5Q3R4U3RhdGUoY3VycmVudEN0eCwgZ3JvdXBDdHgpO1xuICAgIHRoaXMuY3R4ID0gZ3JvdXBDdHg7XG4gICAgdGhpcy5zZXRHU3RhdGUoW1tcIkJNXCIsIFwic291cmNlLW92ZXJcIl0sIFtcImNhXCIsIDFdLCBbXCJDQVwiLCAxXV0pO1xuICAgIHRoaXMuZ3JvdXBTdGFjay5wdXNoKGN1cnJlbnRDdHgpO1xuICAgIHRoaXMuZ3JvdXBMZXZlbCsrO1xuICB9XG5cbiAgZW5kR3JvdXAoZ3JvdXApIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmdyb3VwTGV2ZWwtLTtcbiAgICBjb25zdCBncm91cEN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuZ3JvdXBTdGFjay5wb3AoKTtcbiAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB0aGlzLmN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcblxuICAgIGlmIChncm91cC5zbWFzaykge1xuICAgICAgdGhpcy50ZW1wU01hc2sgPSB0aGlzLnNtYXNrU3RhY2sucG9wKCk7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgY29uc3QgY3VycmVudE10eCA9IHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybS5hcHBseSh0aGlzLmN0eCwgY3VycmVudE10eCk7XG5cbiAgICAgIGNvbnN0IGRpcnR5Qm94ID0gX3V0aWwuVXRpbC5nZXRBeGlhbEFsaWduZWRCb3VuZGluZ0JveChbMCwgMCwgZ3JvdXBDdHguY2FudmFzLndpZHRoLCBncm91cEN0eC5jYW52YXMuaGVpZ2h0XSwgY3VycmVudE10eCk7XG5cbiAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShncm91cEN0eC5jYW52YXMsIDAsIDApO1xuICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy5jb21wb3NlKGRpcnR5Qm94KTtcbiAgICB9XG4gIH1cblxuICBiZWdpbkFubm90YXRpb25zKCkge1xuICAgIHRoaXMuc2F2ZSgpO1xuXG4gICAgaWYgKHRoaXMuYmFzZVRyYW5zZm9ybSkge1xuICAgICAgdGhpcy5jdHguc2V0VHJhbnNmb3JtLmFwcGx5KHRoaXMuY3R4LCB0aGlzLmJhc2VUcmFuc2Zvcm0pO1xuICAgIH1cbiAgfVxuXG4gIGVuZEFubm90YXRpb25zKCkge1xuICAgIHRoaXMucmVzdG9yZSgpO1xuICB9XG5cbiAgYmVnaW5Bbm5vdGF0aW9uKGlkLCByZWN0LCB0cmFuc2Zvcm0sIG1hdHJpeCwgaGFzT3duQ2FudmFzKSB7XG4gICAgdGhpcy5zYXZlKCk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZWN0KSAmJiByZWN0Lmxlbmd0aCA9PT0gNCkge1xuICAgICAgY29uc3Qgd2lkdGggPSByZWN0WzJdIC0gcmVjdFswXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHJlY3RbM10gLSByZWN0WzFdO1xuXG4gICAgICBpZiAoaGFzT3duQ2FudmFzICYmIHRoaXMuYW5ub3RhdGlvbkNhbnZhc01hcCkge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0uc2xpY2UoKTtcbiAgICAgICAgdHJhbnNmb3JtWzRdIC09IHJlY3RbMF07XG4gICAgICAgIHRyYW5zZm9ybVs1XSAtPSByZWN0WzFdO1xuICAgICAgICByZWN0ID0gcmVjdC5zbGljZSgpO1xuICAgICAgICByZWN0WzBdID0gcmVjdFsxXSA9IDA7XG4gICAgICAgIHJlY3RbMl0gPSB3aWR0aDtcbiAgICAgICAgcmVjdFszXSA9IGhlaWdodDtcblxuICAgICAgICBjb25zdCBbc2NhbGVYLCBzY2FsZVldID0gX3V0aWwuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtKTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgdmlld3BvcnRTY2FsZVxuICAgICAgICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgY2FudmFzV2lkdGggPSBNYXRoLmNlaWwod2lkdGggKiB0aGlzLm91dHB1dFNjYWxlWCAqIHZpZXdwb3J0U2NhbGUpO1xuICAgICAgICBjb25zdCBjYW52YXNIZWlnaHQgPSBNYXRoLmNlaWwoaGVpZ2h0ICogdGhpcy5vdXRwdXRTY2FsZVkgKiB2aWV3cG9ydFNjYWxlKTtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uQ2FudmFzID0gdGhpcy5jYW52YXNGYWN0b3J5LmNyZWF0ZShjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGNhbnZhcyxcbiAgICAgICAgICBjb250ZXh0XG4gICAgICAgIH0gPSB0aGlzLmFubm90YXRpb25DYW52YXM7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0U2NhbGVGYWN0b3JTdHIgPSBgdmFyKC0tem9vbS1mYWN0b3IpICogJHtfZGlzcGxheV91dGlscy5QaXhlbHNQZXJJbmNoLlBERl9UT19DU1NfVU5JVFN9YDtcbiAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gYGNhbGMoJHt3aWR0aH1weCAqICR7dmlld3BvcnRTY2FsZUZhY3RvclN0cn0pYDtcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGBjYWxjKCR7aGVpZ2h0fXB4ICogJHt2aWV3cG9ydFNjYWxlRmFjdG9yU3RyfSlgO1xuICAgICAgICB0aGlzLmFubm90YXRpb25DYW52YXNNYXAuc2V0KGlkLCBjYW52YXMpO1xuICAgICAgICB0aGlzLmFubm90YXRpb25DYW52YXMuc2F2ZWRDdHggPSB0aGlzLmN0eDtcbiAgICAgICAgdGhpcy5jdHggPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oc2NhbGVYLCAwLCAwLCAtc2NhbGVZLCAwLCBoZWlnaHQgKiBzY2FsZVkpO1xuICAgICAgICBhZGRDb250ZXh0Q3VycmVudFRyYW5zZm9ybSh0aGlzLmN0eCk7XG4gICAgICAgIHJlc2V0Q3R4VG9EZWZhdWx0KHRoaXMuY3R4LCB0aGlzLmZvcmVncm91bmRDb2xvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCwgdGhpcy5mb3JlZ3JvdW5kQ29sb3IpO1xuICAgICAgICB0aGlzLmN0eC5yZWN0KHJlY3RbMF0sIHJlY3RbMV0sIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5jbGlwKCk7XG4gICAgICAgIHRoaXMuZW5kUGF0aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY3VycmVudCA9IG5ldyBDYW52YXNFeHRyYVN0YXRlKHRoaXMuY3R4LmNhbnZhcy53aWR0aCwgdGhpcy5jdHguY2FudmFzLmhlaWdodCk7XG4gICAgdGhpcy50cmFuc2Zvcm0uYXBwbHkodGhpcywgdHJhbnNmb3JtKTtcbiAgICB0aGlzLnRyYW5zZm9ybS5hcHBseSh0aGlzLCBtYXRyaXgpO1xuICB9XG5cbiAgZW5kQW5ub3RhdGlvbigpIHtcbiAgICBpZiAodGhpcy5hbm5vdGF0aW9uQ2FudmFzKSB7XG4gICAgICB0aGlzLmN0eCA9IHRoaXMuYW5ub3RhdGlvbkNhbnZhcy5zYXZlZEN0eDtcbiAgICAgIGRlbGV0ZSB0aGlzLmFubm90YXRpb25DYW52YXMuc2F2ZWRDdHg7XG4gICAgICBkZWxldGUgdGhpcy5hbm5vdGF0aW9uQ2FudmFzO1xuICAgIH1cblxuICAgIHRoaXMucmVzdG9yZSgpO1xuICB9XG5cbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0KGltZykge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvdW50ID0gaW1nLmNvdW50O1xuICAgIGltZyA9IHRoaXMuZ2V0T2JqZWN0KGltZy5kYXRhLCBpbWcpO1xuICAgIGltZy5jb3VudCA9IGNvdW50O1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IGdseXBoID0gdGhpcy5wcm9jZXNzaW5nVHlwZTM7XG5cbiAgICBpZiAoZ2x5cGgpIHtcbiAgICAgIGlmIChnbHlwaC5jb21waWxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGdseXBoLmNvbXBpbGVkID0gY29tcGlsZVR5cGUzR2x5cGgoaW1nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdseXBoLmNvbXBpbGVkKSB7XG4gICAgICAgIGdseXBoLmNvbXBpbGVkKGN0eCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtYXNrID0gdGhpcy5fY3JlYXRlTWFza0NhbnZhcyhpbWcpO1xuXG4gICAgY29uc3QgbWFza0NhbnZhcyA9IG1hc2suY2FudmFzO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICBjdHguZHJhd0ltYWdlKG1hc2tDYW52YXMsIG1hc2sub2Zmc2V0WCwgbWFzay5vZmZzZXRZKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIHRoaXMuY29tcG9zZSgpO1xuICB9XG5cbiAgcGFpbnRJbWFnZU1hc2tYT2JqZWN0UmVwZWF0KGltZywgc2NhbGVYLCBza2V3WCA9IDAsIHNrZXdZID0gMCwgc2NhbGVZLCBwb3NpdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbWcgPSB0aGlzLmdldE9iamVjdChpbWcuZGF0YSwgaW1nKTtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGNvbnN0IGN1cnJlbnRUcmFuc2Zvcm0gPSBjdHgubW96Q3VycmVudFRyYW5zZm9ybTtcbiAgICBjdHgudHJhbnNmb3JtKHNjYWxlWCwgc2tld1gsIHNrZXdZLCBzY2FsZVksIDAsIDApO1xuXG4gICAgY29uc3QgbWFzayA9IHRoaXMuX2NyZWF0ZU1hc2tDYW52YXMoaW1nKTtcblxuICAgIGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG5cbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwb3NpdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgY29uc3QgdHJhbnMgPSBfdXRpbC5VdGlsLnRyYW5zZm9ybShjdXJyZW50VHJhbnNmb3JtLCBbc2NhbGVYLCBza2V3WCwgc2tld1ksIHNjYWxlWSwgcG9zaXRpb25zW2ldLCBwb3NpdGlvbnNbaSArIDFdXSk7XG5cbiAgICAgIGNvbnN0IFt4LCB5XSA9IF91dGlsLlV0aWwuYXBwbHlUcmFuc2Zvcm0oWzAsIDBdLCB0cmFucyk7XG5cbiAgICAgIGN0eC5kcmF3SW1hZ2UobWFzay5jYW52YXMsIHgsIHkpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgdGhpcy5jb21wb3NlKCk7XG4gIH1cblxuICBwYWludEltYWdlTWFza1hPYmplY3RHcm91cChpbWFnZXMpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBmaWxsQ29sb3IgPSB0aGlzLmN1cnJlbnQuZmlsbENvbG9yO1xuICAgIGNvbnN0IGlzUGF0dGVybkZpbGwgPSB0aGlzLmN1cnJlbnQucGF0dGVybkZpbGw7XG5cbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBpbWFnZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3QgaW1hZ2UgPSBpbWFnZXNbaV07XG4gICAgICBjb25zdCB3aWR0aCA9IGltYWdlLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuICAgICAgY29uc3QgbWFza0NhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwibWFza0NhbnZhc1wiLCB3aWR0aCwgaGVpZ2h0LCBmYWxzZSk7XG4gICAgICBjb25zdCBtYXNrQ3R4ID0gbWFza0NhbnZhcy5jb250ZXh0O1xuICAgICAgbWFza0N0eC5zYXZlKCk7XG4gICAgICBwdXRCaW5hcnlJbWFnZU1hc2sobWFza0N0eCwgaW1hZ2UpO1xuICAgICAgbWFza0N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xuICAgICAgbWFza0N0eC5maWxsU3R5bGUgPSBpc1BhdHRlcm5GaWxsID8gZmlsbENvbG9yLmdldFBhdHRlcm4obWFza0N0eCwgdGhpcywgY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlLCBfcGF0dGVybl9oZWxwZXIuUGF0aFR5cGUuRklMTCkgOiBmaWxsQ29sb3I7XG4gICAgICBtYXNrQ3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgbWFza0N0eC5yZXN0b3JlKCk7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnRyYW5zZm9ybS5hcHBseShjdHgsIGltYWdlLnRyYW5zZm9ybSk7XG4gICAgICBjdHguc2NhbGUoMSwgLTEpO1xuICAgICAgZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKGN0eCwgbWFza0NhbnZhcy5jYW52YXMsIDAsIDAsIHdpZHRoLCBoZWlnaHQsIDAsIC0xLCAxLCAxKTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb21wb3NlKCk7XG4gIH1cblxuICBwYWludEltYWdlWE9iamVjdChvYmpJZCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGltZ0RhdGEgPSB0aGlzLmdldE9iamVjdChvYmpJZCk7XG5cbiAgICBpZiAoIWltZ0RhdGEpIHtcbiAgICAgICgwLCBfdXRpbC53YXJuKShcIkRlcGVuZGVudCBpbWFnZSBpc24ndCByZWFkeSB5ZXRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wYWludElubGluZUltYWdlWE9iamVjdChpbWdEYXRhKTtcbiAgfVxuXG4gIHBhaW50SW1hZ2VYT2JqZWN0UmVwZWF0KG9iaklkLCBzY2FsZVgsIHNjYWxlWSwgcG9zaXRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW1nRGF0YSA9IHRoaXMuZ2V0T2JqZWN0KG9iaklkKTtcblxuICAgIGlmICghaW1nRGF0YSkge1xuICAgICAgKDAsIF91dGlsLndhcm4pKFwiRGVwZW5kZW50IGltYWdlIGlzbid0IHJlYWR5IHlldFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3aWR0aCA9IGltZ0RhdGEud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gaW1nRGF0YS5oZWlnaHQ7XG4gICAgY29uc3QgbWFwID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwb3NpdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgbWFwLnB1c2goe1xuICAgICAgICB0cmFuc2Zvcm06IFtzY2FsZVgsIDAsIDAsIHNjYWxlWSwgcG9zaXRpb25zW2ldLCBwb3NpdGlvbnNbaSArIDFdXSxcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgICAgdzogd2lkdGgsXG4gICAgICAgIGg6IGhlaWdodFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5wYWludElubGluZUltYWdlWE9iamVjdEdyb3VwKGltZ0RhdGEsIG1hcCk7XG4gIH1cblxuICBwYWludElubGluZUltYWdlWE9iamVjdChpbWdEYXRhKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd2lkdGggPSBpbWdEYXRhLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIHRoaXMuc2F2ZSgpO1xuICAgIGN0eC5zY2FsZSgxIC8gd2lkdGgsIC0xIC8gaGVpZ2h0KTtcbiAgICBsZXQgaW1nVG9QYWludDtcblxuICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiAmJiBpbWdEYXRhIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgIWltZ0RhdGEuZGF0YSkge1xuICAgICAgaW1nVG9QYWludCA9IGltZ0RhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRtcENhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwiaW5saW5lSW1hZ2VcIiwgd2lkdGgsIGhlaWdodCwgZmFsc2UpO1xuICAgICAgY29uc3QgdG1wQ3R4ID0gdG1wQ2FudmFzLmNvbnRleHQ7XG4gICAgICBwdXRCaW5hcnlJbWFnZURhdGEodG1wQ3R4LCBpbWdEYXRhLCB0aGlzLmN1cnJlbnQudHJhbnNmZXJNYXBzKTtcbiAgICAgIGltZ1RvUGFpbnQgPSB0bXBDYW52YXMuY2FudmFzO1xuICAgIH1cblxuICAgIGNvbnN0IHNjYWxlZCA9IHRoaXMuX3NjYWxlSW1hZ2UoaW1nVG9QYWludCwgY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm1JbnZlcnNlKTtcblxuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBnZXRJbWFnZVNtb290aGluZ0VuYWJsZWQoY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0sIGltZ0RhdGEuaW50ZXJwb2xhdGUpO1xuICAgIGNvbnN0IFtyV2lkdGgsIHJIZWlnaHRdID0gZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKGN0eCwgc2NhbGVkLmltZywgMCwgMCwgc2NhbGVkLnBhaW50V2lkdGgsIHNjYWxlZC5wYWludEhlaWdodCwgMCwgLWhlaWdodCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICBpZiAodGhpcy5pbWFnZUxheWVyKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZ2V0Q2FudmFzUG9zaXRpb24oMCwgLWhlaWdodCk7XG4gICAgICB0aGlzLmltYWdlTGF5ZXIuYXBwZW5kSW1hZ2Uoe1xuICAgICAgICBpbWdEYXRhLFxuICAgICAgICBsZWZ0OiBwb3NpdGlvblswXSxcbiAgICAgICAgdG9wOiBwb3NpdGlvblsxXSxcbiAgICAgICAgd2lkdGg6IHJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBySGVpZ2h0XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgICB0aGlzLnJlc3RvcmUoKTtcbiAgfVxuXG4gIHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0R3JvdXAoaW1nRGF0YSwgbWFwKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3QgdyA9IGltZ0RhdGEud2lkdGg7XG4gICAgY29uc3QgaCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgIGNvbnN0IHRtcENhbnZhcyA9IHRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwiaW5saW5lSW1hZ2VcIiwgdywgaCwgZmFsc2UpO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgIHB1dEJpbmFyeUltYWdlRGF0YSh0bXBDdHgsIGltZ0RhdGEsIHRoaXMuY3VycmVudC50cmFuc2Zlck1hcHMpO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbWFwLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGNvbnN0IGVudHJ5ID0gbWFwW2ldO1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGN0eC50cmFuc2Zvcm0uYXBwbHkoY3R4LCBlbnRyeS50cmFuc2Zvcm0pO1xuICAgICAgY3R4LnNjYWxlKDEsIC0xKTtcbiAgICAgIGRyYXdJbWFnZUF0SW50ZWdlckNvb3JkcyhjdHgsIHRtcENhbnZhcy5jYW52YXMsIGVudHJ5LngsIGVudHJ5LnksIGVudHJ5LncsIGVudHJ5LmgsIDAsIC0xLCAxLCAxKTtcblxuICAgICAgaWYgKHRoaXMuaW1hZ2VMYXllcikge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZ2V0Q2FudmFzUG9zaXRpb24oZW50cnkueCwgZW50cnkueSk7XG4gICAgICAgIHRoaXMuaW1hZ2VMYXllci5hcHBlbmRJbWFnZSh7XG4gICAgICAgICAgaW1nRGF0YSxcbiAgICAgICAgICBsZWZ0OiBwb3NpdGlvblswXSxcbiAgICAgICAgICB0b3A6IHBvc2l0aW9uWzFdLFxuICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgIGhlaWdodDogaFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgfVxuXG4gIHBhaW50U29saWRDb2xvckltYWdlTWFzaygpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudFZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICB0aGlzLmNvbXBvc2UoKTtcbiAgfVxuXG4gIG1hcmtQb2ludCh0YWcpIHt9XG5cbiAgbWFya1BvaW50UHJvcHModGFnLCBwcm9wZXJ0aWVzKSB7fVxuXG4gIGJlZ2luTWFya2VkQ29udGVudCh0YWcpIHtcbiAgICB0aGlzLm1hcmtlZENvbnRlbnRTdGFjay5wdXNoKHtcbiAgICAgIHZpc2libGU6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGJlZ2luTWFya2VkQ29udGVudFByb3BzKHRhZywgcHJvcGVydGllcykge1xuICAgIGlmICh0YWcgPT09IFwiT0NcIikge1xuICAgICAgdGhpcy5tYXJrZWRDb250ZW50U3RhY2sucHVzaCh7XG4gICAgICAgIHZpc2libGU6IHRoaXMub3B0aW9uYWxDb250ZW50Q29uZmlnLmlzVmlzaWJsZShwcm9wZXJ0aWVzKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrLnB1c2goe1xuICAgICAgICB2aXNpYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRlbnRWaXNpYmxlID0gdGhpcy5pc0NvbnRlbnRWaXNpYmxlKCk7XG4gIH1cblxuICBlbmRNYXJrZWRDb250ZW50KCkge1xuICAgIHRoaXMubWFya2VkQ29udGVudFN0YWNrLnBvcCgpO1xuICAgIHRoaXMuY29udGVudFZpc2libGUgPSB0aGlzLmlzQ29udGVudFZpc2libGUoKTtcbiAgfVxuXG4gIGJlZ2luQ29tcGF0KCkge31cblxuICBlbmRDb21wYXQoKSB7fVxuXG4gIGNvbnN1bWVQYXRoKGNsaXBCb3gpIHtcbiAgICBjb25zdCBpc0VtcHR5ID0gdGhpcy5jdXJyZW50LmlzRW1wdHlDbGlwKCk7XG5cbiAgICBpZiAodGhpcy5wZW5kaW5nQ2xpcCkge1xuICAgICAgdGhpcy5jdXJyZW50LnVwZGF0ZUNsaXBGcm9tUGF0aCgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wZW5kaW5nQ2xpcCkge1xuICAgICAgdGhpcy5jb21wb3NlKGNsaXBCb3gpO1xuICAgIH1cblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuXG4gICAgaWYgKHRoaXMucGVuZGluZ0NsaXApIHtcbiAgICAgIGlmICghaXNFbXB0eSkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQ2xpcCA9PT0gRU9fQ0xJUCkge1xuICAgICAgICAgIGN0eC5jbGlwKFwiZXZlbm9kZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHguY2xpcCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudC5zdGFydE5ld1BhdGhBbmRDbGlwQm94KHRoaXMuY3VycmVudC5jbGlwQm94KTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gIH1cblxuICBnZXRTaW5nbGVQaXhlbFdpZHRoKCkge1xuICAgIGlmICghdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCkge1xuICAgICAgY29uc3QgbSA9IHRoaXMuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm07XG5cbiAgICAgIGlmIChtWzFdID09PSAwICYmIG1bMl0gPT09IDApIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCA9IDEgLyBNYXRoLm1pbihNYXRoLmFicyhtWzBdKSwgTWF0aC5hYnMobVszXSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYWJzRGV0ID0gTWF0aC5hYnMobVswXSAqIG1bM10gLSBtWzJdICogbVsxXSk7XG4gICAgICAgIGNvbnN0IG5vcm1YID0gTWF0aC5oeXBvdChtWzBdLCBtWzJdKTtcbiAgICAgICAgY29uc3Qgbm9ybVkgPSBNYXRoLmh5cG90KG1bMV0sIG1bM10pO1xuICAgICAgICB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoID0gTWF0aC5tYXgobm9ybVgsIG5vcm1ZKSAvIGFic0RldDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aDtcbiAgfVxuXG4gIGdldFNjYWxlRm9yU3Ryb2tpbmcoKSB7XG4gICAgaWYgKCF0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGxpbmVXaWR0aFxuICAgICAgfSA9IHRoaXMuY3VycmVudDtcbiAgICAgIGNvbnN0IG0gPSB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuICAgICAgbGV0IHNjYWxlWCwgc2NhbGVZO1xuXG4gICAgICBpZiAobVsxXSA9PT0gMCAmJiBtWzJdID09PSAwKSB7XG4gICAgICAgIGNvbnN0IG5vcm1YID0gTWF0aC5hYnMobVswXSk7XG4gICAgICAgIGNvbnN0IG5vcm1ZID0gTWF0aC5hYnMobVszXSk7XG5cbiAgICAgICAgaWYgKGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgICAgIHNjYWxlWCA9IDEgLyBub3JtWDtcbiAgICAgICAgICBzY2FsZVkgPSAxIC8gbm9ybVk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2NhbGVkWExpbmVXaWR0aCA9IG5vcm1YICogbGluZVdpZHRoO1xuICAgICAgICAgIGNvbnN0IHNjYWxlZFlMaW5lV2lkdGggPSBub3JtWSAqIGxpbmVXaWR0aDtcbiAgICAgICAgICBzY2FsZVggPSBzY2FsZWRYTGluZVdpZHRoIDwgMSA/IDEgLyBzY2FsZWRYTGluZVdpZHRoIDogMTtcbiAgICAgICAgICBzY2FsZVkgPSBzY2FsZWRZTGluZVdpZHRoIDwgMSA/IDEgLyBzY2FsZWRZTGluZVdpZHRoIDogMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYWJzRGV0ID0gTWF0aC5hYnMobVswXSAqIG1bM10gLSBtWzJdICogbVsxXSk7XG4gICAgICAgIGNvbnN0IG5vcm1YID0gTWF0aC5oeXBvdChtWzBdLCBtWzFdKTtcbiAgICAgICAgY29uc3Qgbm9ybVkgPSBNYXRoLmh5cG90KG1bMl0sIG1bM10pO1xuXG4gICAgICAgIGlmIChsaW5lV2lkdGggPT09IDApIHtcbiAgICAgICAgICBzY2FsZVggPSBub3JtWSAvIGFic0RldDtcbiAgICAgICAgICBzY2FsZVkgPSBub3JtWCAvIGFic0RldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBiYXNlQXJlYSA9IGxpbmVXaWR0aCAqIGFic0RldDtcbiAgICAgICAgICBzY2FsZVggPSBub3JtWSA+IGJhc2VBcmVhID8gbm9ybVkgLyBiYXNlQXJlYSA6IDE7XG4gICAgICAgICAgc2NhbGVZID0gbm9ybVggPiBiYXNlQXJlYSA/IG5vcm1YIC8gYmFzZUFyZWEgOiAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmcgPSBbc2NhbGVYLCBzY2FsZVldO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nO1xuICB9XG5cbiAgcmVzY2FsZUFuZFN0cm9rZShzYXZlUmVzdG9yZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGN0eFxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGxpbmVXaWR0aFxuICAgIH0gPSB0aGlzLmN1cnJlbnQ7XG4gICAgY29uc3QgW3NjYWxlWCwgc2NhbGVZXSA9IHRoaXMuZ2V0U2NhbGVGb3JTdHJva2luZygpO1xuICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGggfHwgMTtcblxuICAgIGlmIChzY2FsZVggPT09IDEgJiYgc2NhbGVZID09PSAxKSB7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHNhdmVkTWF0cml4LCBzYXZlZERhc2hlcywgc2F2ZWREYXNoT2Zmc2V0O1xuXG4gICAgaWYgKHNhdmVSZXN0b3JlKSB7XG4gICAgICBzYXZlZE1hdHJpeCA9IGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtLnNsaWNlKCk7XG4gICAgICBzYXZlZERhc2hlcyA9IGN0eC5nZXRMaW5lRGFzaCgpLnNsaWNlKCk7XG4gICAgICBzYXZlZERhc2hPZmZzZXQgPSBjdHgubGluZURhc2hPZmZzZXQ7XG4gICAgfVxuXG4gICAgY3R4LnNjYWxlKHNjYWxlWCwgc2NhbGVZKTtcbiAgICBjb25zdCBzY2FsZSA9IE1hdGgubWF4KHNjYWxlWCwgc2NhbGVZKTtcbiAgICBjdHguc2V0TGluZURhc2goY3R4LmdldExpbmVEYXNoKCkubWFwKHggPT4geCAvIHNjYWxlKSk7XG4gICAgY3R4LmxpbmVEYXNoT2Zmc2V0IC89IHNjYWxlO1xuICAgIGN0eC5zdHJva2UoKTtcblxuICAgIGlmIChzYXZlUmVzdG9yZSkge1xuICAgICAgY3R4LnNldFRyYW5zZm9ybSguLi5zYXZlZE1hdHJpeCk7XG4gICAgICBjdHguc2V0TGluZURhc2goc2F2ZWREYXNoZXMpO1xuICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gc2F2ZWREYXNoT2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIGdldENhbnZhc1Bvc2l0aW9uKHgsIHkpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSB0aGlzLmN0eC5tb3pDdXJyZW50VHJhbnNmb3JtO1xuICAgIHJldHVybiBbdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF0sIHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdXTtcbiAgfVxuXG4gIGlzQ29udGVudFZpc2libGUoKSB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMubWFya2VkQ29udGVudFN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBpZiAoIXRoaXMubWFya2VkQ29udGVudFN0YWNrW2ldLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cblxuZXhwb3J0cy5DYW52YXNHcmFwaGljcyA9IENhbnZhc0dyYXBoaWNzO1xuXG5mb3IgKGNvbnN0IG9wIGluIF91dGlsLk9QUykge1xuICBpZiAoQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW29wXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW191dGlsLk9QU1tvcF1dID0gQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW29wXTtcbiAgfVxufVxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlRpbGluZ1BhdHRlcm4gPSBleHBvcnRzLlBhdGhUeXBlID0gdm9pZCAwO1xuZXhwb3J0cy5nZXRTaGFkaW5nUGF0dGVybiA9IGdldFNoYWRpbmdQYXR0ZXJuO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2lzX25vZGUgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDMpO1xuXG5jb25zdCBQYXRoVHlwZSA9IHtcbiAgRklMTDogXCJGaWxsXCIsXG4gIFNUUk9LRTogXCJTdHJva2VcIixcbiAgU0hBRElORzogXCJTaGFkaW5nXCJcbn07XG5leHBvcnRzLlBhdGhUeXBlID0gUGF0aFR5cGU7XG5cbmZ1bmN0aW9uIGFwcGx5Qm91bmRpbmdCb3goY3R4LCBiYm94KSB7XG4gIGlmICghYmJveCB8fCBfaXNfbm9kZS5pc05vZGVKUykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHdpZHRoID0gYmJveFsyXSAtIGJib3hbMF07XG4gIGNvbnN0IGhlaWdodCA9IGJib3hbM10gLSBiYm94WzFdO1xuICBjb25zdCByZWdpb24gPSBuZXcgUGF0aDJEKCk7XG4gIHJlZ2lvbi5yZWN0KGJib3hbMF0sIGJib3hbMV0sIHdpZHRoLCBoZWlnaHQpO1xuICBjdHguY2xpcChyZWdpb24pO1xufVxuXG5jbGFzcyBCYXNlU2hhZGluZ1BhdHRlcm4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gQmFzZVNoYWRpbmdQYXR0ZXJuKSB7XG4gICAgICAoMCwgX3V0aWwudW5yZWFjaGFibGUpKFwiQ2Fubm90IGluaXRpYWxpemUgQmFzZVNoYWRpbmdQYXR0ZXJuLlwiKTtcbiAgICB9XG4gIH1cblxuICBnZXRQYXR0ZXJuKCkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJBYnN0cmFjdCBtZXRob2QgYGdldFBhdHRlcm5gIGNhbGxlZC5cIik7XG4gIH1cblxufVxuXG5jbGFzcyBSYWRpYWxBeGlhbFNoYWRpbmdQYXR0ZXJuIGV4dGVuZHMgQmFzZVNoYWRpbmdQYXR0ZXJuIHtcbiAgY29uc3RydWN0b3IoSVIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3R5cGUgPSBJUlsxXTtcbiAgICB0aGlzLl9iYm94ID0gSVJbMl07XG4gICAgdGhpcy5fY29sb3JTdG9wcyA9IElSWzNdO1xuICAgIHRoaXMuX3AwID0gSVJbNF07XG4gICAgdGhpcy5fcDEgPSBJUls1XTtcbiAgICB0aGlzLl9yMCA9IElSWzZdO1xuICAgIHRoaXMuX3IxID0gSVJbN107XG4gICAgdGhpcy5tYXRyaXggPSBudWxsO1xuICB9XG5cbiAgX2NyZWF0ZUdyYWRpZW50KGN0eCkge1xuICAgIGxldCBncmFkO1xuXG4gICAgaWYgKHRoaXMuX3R5cGUgPT09IFwiYXhpYWxcIikge1xuICAgICAgZ3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCh0aGlzLl9wMFswXSwgdGhpcy5fcDBbMV0sIHRoaXMuX3AxWzBdLCB0aGlzLl9wMVsxXSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90eXBlID09PSBcInJhZGlhbFwiKSB7XG4gICAgICBncmFkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHRoaXMuX3AwWzBdLCB0aGlzLl9wMFsxXSwgdGhpcy5fcjAsIHRoaXMuX3AxWzBdLCB0aGlzLl9wMVsxXSwgdGhpcy5fcjEpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY29sb3JTdG9wIG9mIHRoaXMuX2NvbG9yU3RvcHMpIHtcbiAgICAgIGdyYWQuYWRkQ29sb3JTdG9wKGNvbG9yU3RvcFswXSwgY29sb3JTdG9wWzFdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ3JhZDtcbiAgfVxuXG4gIGdldFBhdHRlcm4oY3R4LCBvd25lciwgaW52ZXJzZSwgcGF0aFR5cGUpIHtcbiAgICBsZXQgcGF0dGVybjtcblxuICAgIGlmIChwYXRoVHlwZSA9PT0gUGF0aFR5cGUuU1RST0tFIHx8IHBhdGhUeXBlID09PSBQYXRoVHlwZS5GSUxMKSB7XG4gICAgICBjb25zdCBvd25lckJCb3ggPSBvd25lci5jdXJyZW50LmdldENsaXBwZWRQYXRoQm91bmRpbmdCb3gocGF0aFR5cGUsIGN0eC5tb3pDdXJyZW50VHJhbnNmb3JtKSB8fCBbMCwgMCwgMCwgMF07XG4gICAgICBjb25zdCB3aWR0aCA9IE1hdGguY2VpbChvd25lckJCb3hbMl0gLSBvd25lckJCb3hbMF0pIHx8IDE7XG4gICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmNlaWwob3duZXJCQm94WzNdIC0gb3duZXJCQm94WzFdKSB8fCAxO1xuICAgICAgY29uc3QgdG1wQ2FudmFzID0gb3duZXIuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKFwicGF0dGVyblwiLCB3aWR0aCwgaGVpZ2h0LCB0cnVlKTtcbiAgICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgICAgdG1wQ3R4LmNsZWFyUmVjdCgwLCAwLCB0bXBDdHguY2FudmFzLndpZHRoLCB0bXBDdHguY2FudmFzLmhlaWdodCk7XG4gICAgICB0bXBDdHguYmVnaW5QYXRoKCk7XG4gICAgICB0bXBDdHgucmVjdCgwLCAwLCB0bXBDdHguY2FudmFzLndpZHRoLCB0bXBDdHguY2FudmFzLmhlaWdodCk7XG4gICAgICB0bXBDdHgudHJhbnNsYXRlKC1vd25lckJCb3hbMF0sIC1vd25lckJCb3hbMV0pO1xuICAgICAgaW52ZXJzZSA9IF91dGlsLlV0aWwudHJhbnNmb3JtKGludmVyc2UsIFsxLCAwLCAwLCAxLCBvd25lckJCb3hbMF0sIG93bmVyQkJveFsxXV0pO1xuICAgICAgdG1wQ3R4LnRyYW5zZm9ybS5hcHBseSh0bXBDdHgsIG93bmVyLmJhc2VUcmFuc2Zvcm0pO1xuXG4gICAgICBpZiAodGhpcy5tYXRyaXgpIHtcbiAgICAgICAgdG1wQ3R4LnRyYW5zZm9ybS5hcHBseSh0bXBDdHgsIHRoaXMubWF0cml4KTtcbiAgICAgIH1cblxuICAgICAgYXBwbHlCb3VuZGluZ0JveCh0bXBDdHgsIHRoaXMuX2Jib3gpO1xuICAgICAgdG1wQ3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NyZWF0ZUdyYWRpZW50KHRtcEN0eCk7XG4gICAgICB0bXBDdHguZmlsbCgpO1xuICAgICAgcGF0dGVybiA9IGN0eC5jcmVhdGVQYXR0ZXJuKHRtcENhbnZhcy5jYW52YXMsIFwibm8tcmVwZWF0XCIpO1xuICAgICAgY29uc3QgZG9tTWF0cml4ID0gbmV3IERPTU1hdHJpeChpbnZlcnNlKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcGF0dGVybi5zZXRUcmFuc2Zvcm0oZG9tTWF0cml4KTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICgwLCBfdXRpbC53YXJuKShgUmFkaWFsQXhpYWxTaGFkaW5nUGF0dGVybi5nZXRQYXR0ZXJuOiBcIiR7ZXg/Lm1lc3NhZ2V9XCIuYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcGx5Qm91bmRpbmdCb3goY3R4LCB0aGlzLl9iYm94KTtcbiAgICAgIHBhdHRlcm4gPSB0aGlzLl9jcmVhdGVHcmFkaWVudChjdHgpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXR0ZXJuO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gZHJhd1RyaWFuZ2xlKGRhdGEsIGNvbnRleHQsIHAxLCBwMiwgcDMsIGMxLCBjMiwgYzMpIHtcbiAgY29uc3QgY29vcmRzID0gY29udGV4dC5jb29yZHMsXG4gICAgICAgIGNvbG9ycyA9IGNvbnRleHQuY29sb3JzO1xuICBjb25zdCBieXRlcyA9IGRhdGEuZGF0YSxcbiAgICAgICAgcm93U2l6ZSA9IGRhdGEud2lkdGggKiA0O1xuICBsZXQgdG1wO1xuXG4gIGlmIChjb29yZHNbcDEgKyAxXSA+IGNvb3Jkc1twMiArIDFdKSB7XG4gICAgdG1wID0gcDE7XG4gICAgcDEgPSBwMjtcbiAgICBwMiA9IHRtcDtcbiAgICB0bXAgPSBjMTtcbiAgICBjMSA9IGMyO1xuICAgIGMyID0gdG1wO1xuICB9XG5cbiAgaWYgKGNvb3Jkc1twMiArIDFdID4gY29vcmRzW3AzICsgMV0pIHtcbiAgICB0bXAgPSBwMjtcbiAgICBwMiA9IHAzO1xuICAgIHAzID0gdG1wO1xuICAgIHRtcCA9IGMyO1xuICAgIGMyID0gYzM7XG4gICAgYzMgPSB0bXA7XG4gIH1cblxuICBpZiAoY29vcmRzW3AxICsgMV0gPiBjb29yZHNbcDIgKyAxXSkge1xuICAgIHRtcCA9IHAxO1xuICAgIHAxID0gcDI7XG4gICAgcDIgPSB0bXA7XG4gICAgdG1wID0gYzE7XG4gICAgYzEgPSBjMjtcbiAgICBjMiA9IHRtcDtcbiAgfVxuXG4gIGNvbnN0IHgxID0gKGNvb3Jkc1twMV0gKyBjb250ZXh0Lm9mZnNldFgpICogY29udGV4dC5zY2FsZVg7XG4gIGNvbnN0IHkxID0gKGNvb3Jkc1twMSArIDFdICsgY29udGV4dC5vZmZzZXRZKSAqIGNvbnRleHQuc2NhbGVZO1xuICBjb25zdCB4MiA9IChjb29yZHNbcDJdICsgY29udGV4dC5vZmZzZXRYKSAqIGNvbnRleHQuc2NhbGVYO1xuICBjb25zdCB5MiA9IChjb29yZHNbcDIgKyAxXSArIGNvbnRleHQub2Zmc2V0WSkgKiBjb250ZXh0LnNjYWxlWTtcbiAgY29uc3QgeDMgPSAoY29vcmRzW3AzXSArIGNvbnRleHQub2Zmc2V0WCkgKiBjb250ZXh0LnNjYWxlWDtcbiAgY29uc3QgeTMgPSAoY29vcmRzW3AzICsgMV0gKyBjb250ZXh0Lm9mZnNldFkpICogY29udGV4dC5zY2FsZVk7XG5cbiAgaWYgKHkxID49IHkzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYzFyID0gY29sb3JzW2MxXSxcbiAgICAgICAgYzFnID0gY29sb3JzW2MxICsgMV0sXG4gICAgICAgIGMxYiA9IGNvbG9yc1tjMSArIDJdO1xuICBjb25zdCBjMnIgPSBjb2xvcnNbYzJdLFxuICAgICAgICBjMmcgPSBjb2xvcnNbYzIgKyAxXSxcbiAgICAgICAgYzJiID0gY29sb3JzW2MyICsgMl07XG4gIGNvbnN0IGMzciA9IGNvbG9yc1tjM10sXG4gICAgICAgIGMzZyA9IGNvbG9yc1tjMyArIDFdLFxuICAgICAgICBjM2IgPSBjb2xvcnNbYzMgKyAyXTtcbiAgY29uc3QgbWluWSA9IE1hdGgucm91bmQoeTEpLFxuICAgICAgICBtYXhZID0gTWF0aC5yb3VuZCh5Myk7XG4gIGxldCB4YSwgY2FyLCBjYWcsIGNhYjtcbiAgbGV0IHhiLCBjYnIsIGNiZywgY2JiO1xuXG4gIGZvciAobGV0IHkgPSBtaW5ZOyB5IDw9IG1heFk7IHkrKykge1xuICAgIGlmICh5IDwgeTIpIHtcbiAgICAgIGxldCBrO1xuXG4gICAgICBpZiAoeSA8IHkxKSB7XG4gICAgICAgIGsgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgayA9ICh5MSAtIHkpIC8gKHkxIC0geTIpO1xuICAgICAgfVxuXG4gICAgICB4YSA9IHgxIC0gKHgxIC0geDIpICogaztcbiAgICAgIGNhciA9IGMxciAtIChjMXIgLSBjMnIpICogaztcbiAgICAgIGNhZyA9IGMxZyAtIChjMWcgLSBjMmcpICogaztcbiAgICAgIGNhYiA9IGMxYiAtIChjMWIgLSBjMmIpICogaztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGs7XG5cbiAgICAgIGlmICh5ID4geTMpIHtcbiAgICAgICAgayA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHkyID09PSB5Mykge1xuICAgICAgICBrID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGsgPSAoeTIgLSB5KSAvICh5MiAtIHkzKTtcbiAgICAgIH1cblxuICAgICAgeGEgPSB4MiAtICh4MiAtIHgzKSAqIGs7XG4gICAgICBjYXIgPSBjMnIgLSAoYzJyIC0gYzNyKSAqIGs7XG4gICAgICBjYWcgPSBjMmcgLSAoYzJnIC0gYzNnKSAqIGs7XG4gICAgICBjYWIgPSBjMmIgLSAoYzJiIC0gYzNiKSAqIGs7XG4gICAgfVxuXG4gICAgbGV0IGs7XG5cbiAgICBpZiAoeSA8IHkxKSB7XG4gICAgICBrID0gMDtcbiAgICB9IGVsc2UgaWYgKHkgPiB5Mykge1xuICAgICAgayA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGsgPSAoeTEgLSB5KSAvICh5MSAtIHkzKTtcbiAgICB9XG5cbiAgICB4YiA9IHgxIC0gKHgxIC0geDMpICogaztcbiAgICBjYnIgPSBjMXIgLSAoYzFyIC0gYzNyKSAqIGs7XG4gICAgY2JnID0gYzFnIC0gKGMxZyAtIGMzZykgKiBrO1xuICAgIGNiYiA9IGMxYiAtIChjMWIgLSBjM2IpICogaztcbiAgICBjb25zdCB4MV8gPSBNYXRoLnJvdW5kKE1hdGgubWluKHhhLCB4YikpO1xuICAgIGNvbnN0IHgyXyA9IE1hdGgucm91bmQoTWF0aC5tYXgoeGEsIHhiKSk7XG4gICAgbGV0IGogPSByb3dTaXplICogeSArIHgxXyAqIDQ7XG5cbiAgICBmb3IgKGxldCB4ID0geDFfOyB4IDw9IHgyXzsgeCsrKSB7XG4gICAgICBrID0gKHhhIC0geCkgLyAoeGEgLSB4Yik7XG5cbiAgICAgIGlmIChrIDwgMCkge1xuICAgICAgICBrID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoayA+IDEpIHtcbiAgICAgICAgayA9IDE7XG4gICAgICB9XG5cbiAgICAgIGJ5dGVzW2orK10gPSBjYXIgLSAoY2FyIC0gY2JyKSAqIGsgfCAwO1xuICAgICAgYnl0ZXNbaisrXSA9IGNhZyAtIChjYWcgLSBjYmcpICogayB8IDA7XG4gICAgICBieXRlc1tqKytdID0gY2FiIC0gKGNhYiAtIGNiYikgKiBrIHwgMDtcbiAgICAgIGJ5dGVzW2orK10gPSAyNTU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdGaWd1cmUoZGF0YSwgZmlndXJlLCBjb250ZXh0KSB7XG4gIGNvbnN0IHBzID0gZmlndXJlLmNvb3JkcztcbiAgY29uc3QgY3MgPSBmaWd1cmUuY29sb3JzO1xuICBsZXQgaSwgaWk7XG5cbiAgc3dpdGNoIChmaWd1cmUudHlwZSkge1xuICAgIGNhc2UgXCJsYXR0aWNlXCI6XG4gICAgICBjb25zdCB2ZXJ0aWNlc1BlclJvdyA9IGZpZ3VyZS52ZXJ0aWNlc1BlclJvdztcbiAgICAgIGNvbnN0IHJvd3MgPSBNYXRoLmZsb29yKHBzLmxlbmd0aCAvIHZlcnRpY2VzUGVyUm93KSAtIDE7XG4gICAgICBjb25zdCBjb2xzID0gdmVydGljZXNQZXJSb3cgLSAxO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcm93czsgaSsrKSB7XG4gICAgICAgIGxldCBxID0gaSAqIHZlcnRpY2VzUGVyUm93O1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29sczsgaisrLCBxKyspIHtcbiAgICAgICAgICBkcmF3VHJpYW5nbGUoZGF0YSwgY29udGV4dCwgcHNbcV0sIHBzW3EgKyAxXSwgcHNbcSArIHZlcnRpY2VzUGVyUm93XSwgY3NbcV0sIGNzW3EgKyAxXSwgY3NbcSArIHZlcnRpY2VzUGVyUm93XSk7XG4gICAgICAgICAgZHJhd1RyaWFuZ2xlKGRhdGEsIGNvbnRleHQsIHBzW3EgKyB2ZXJ0aWNlc1BlclJvdyArIDFdLCBwc1txICsgMV0sIHBzW3EgKyB2ZXJ0aWNlc1BlclJvd10sIGNzW3EgKyB2ZXJ0aWNlc1BlclJvdyArIDFdLCBjc1txICsgMV0sIGNzW3EgKyB2ZXJ0aWNlc1BlclJvd10pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcInRyaWFuZ2xlc1wiOlxuICAgICAgZm9yIChpID0gMCwgaWkgPSBwcy5sZW5ndGg7IGkgPCBpaTsgaSArPSAzKSB7XG4gICAgICAgIGRyYXdUcmlhbmdsZShkYXRhLCBjb250ZXh0LCBwc1tpXSwgcHNbaSArIDFdLCBwc1tpICsgMl0sIGNzW2ldLCBjc1tpICsgMV0sIGNzW2kgKyAyXSk7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgZmlndXJlXCIpO1xuICB9XG59XG5cbmNsYXNzIE1lc2hTaGFkaW5nUGF0dGVybiBleHRlbmRzIEJhc2VTaGFkaW5nUGF0dGVybiB7XG4gIGNvbnN0cnVjdG9yKElSKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jb29yZHMgPSBJUlsyXTtcbiAgICB0aGlzLl9jb2xvcnMgPSBJUlszXTtcbiAgICB0aGlzLl9maWd1cmVzID0gSVJbNF07XG4gICAgdGhpcy5fYm91bmRzID0gSVJbNV07XG4gICAgdGhpcy5fYmJveCA9IElSWzddO1xuICAgIHRoaXMuX2JhY2tncm91bmQgPSBJUls4XTtcbiAgICB0aGlzLm1hdHJpeCA9IG51bGw7XG4gIH1cblxuICBfY3JlYXRlTWVzaENhbnZhcyhjb21iaW5lZFNjYWxlLCBiYWNrZ3JvdW5kQ29sb3IsIGNhY2hlZENhbnZhc2VzKSB7XG4gICAgY29uc3QgRVhQRUNURURfU0NBTEUgPSAxLjE7XG4gICAgY29uc3QgTUFYX1BBVFRFUk5fU0laRSA9IDMwMDA7XG4gICAgY29uc3QgQk9SREVSX1NJWkUgPSAyO1xuICAgIGNvbnN0IG9mZnNldFggPSBNYXRoLmZsb29yKHRoaXMuX2JvdW5kc1swXSk7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IE1hdGguZmxvb3IodGhpcy5fYm91bmRzWzFdKTtcbiAgICBjb25zdCBib3VuZHNXaWR0aCA9IE1hdGguY2VpbCh0aGlzLl9ib3VuZHNbMl0pIC0gb2Zmc2V0WDtcbiAgICBjb25zdCBib3VuZHNIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fYm91bmRzWzNdKSAtIG9mZnNldFk7XG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1pbihNYXRoLmNlaWwoTWF0aC5hYnMoYm91bmRzV2lkdGggKiBjb21iaW5lZFNjYWxlWzBdICogRVhQRUNURURfU0NBTEUpKSwgTUFYX1BBVFRFUk5fU0laRSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5taW4oTWF0aC5jZWlsKE1hdGguYWJzKGJvdW5kc0hlaWdodCAqIGNvbWJpbmVkU2NhbGVbMV0gKiBFWFBFQ1RFRF9TQ0FMRSkpLCBNQVhfUEFUVEVSTl9TSVpFKTtcbiAgICBjb25zdCBzY2FsZVggPSBib3VuZHNXaWR0aCAvIHdpZHRoO1xuICAgIGNvbnN0IHNjYWxlWSA9IGJvdW5kc0hlaWdodCAvIGhlaWdodDtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgY29vcmRzOiB0aGlzLl9jb29yZHMsXG4gICAgICBjb2xvcnM6IHRoaXMuX2NvbG9ycyxcbiAgICAgIG9mZnNldFg6IC1vZmZzZXRYLFxuICAgICAgb2Zmc2V0WTogLW9mZnNldFksXG4gICAgICBzY2FsZVg6IDEgLyBzY2FsZVgsXG4gICAgICBzY2FsZVk6IDEgLyBzY2FsZVlcbiAgICB9O1xuICAgIGNvbnN0IHBhZGRlZFdpZHRoID0gd2lkdGggKyBCT1JERVJfU0laRSAqIDI7XG4gICAgY29uc3QgcGFkZGVkSGVpZ2h0ID0gaGVpZ2h0ICsgQk9SREVSX1NJWkUgKiAyO1xuICAgIGNvbnN0IHRtcENhbnZhcyA9IGNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhcIm1lc2hcIiwgcGFkZGVkV2lkdGgsIHBhZGRlZEhlaWdodCwgZmFsc2UpO1xuICAgIGNvbnN0IHRtcEN0eCA9IHRtcENhbnZhcy5jb250ZXh0O1xuICAgIGNvbnN0IGRhdGEgPSB0bXBDdHguY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgY29uc3QgYnl0ZXMgPSBkYXRhLmRhdGE7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGJ5dGVzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiYWNrZ3JvdW5kQ29sb3JbMF07XG4gICAgICAgIGJ5dGVzW2kgKyAxXSA9IGJhY2tncm91bmRDb2xvclsxXTtcbiAgICAgICAgYnl0ZXNbaSArIDJdID0gYmFja2dyb3VuZENvbG9yWzJdO1xuICAgICAgICBieXRlc1tpICsgM10gPSAyNTU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBmaWd1cmUgb2YgdGhpcy5fZmlndXJlcykge1xuICAgICAgZHJhd0ZpZ3VyZShkYXRhLCBmaWd1cmUsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHRtcEN0eC5wdXRJbWFnZURhdGEoZGF0YSwgQk9SREVSX1NJWkUsIEJPUkRFUl9TSVpFKTtcbiAgICBjb25zdCBjYW52YXMgPSB0bXBDYW52YXMuY2FudmFzO1xuICAgIHJldHVybiB7XG4gICAgICBjYW52YXMsXG4gICAgICBvZmZzZXRYOiBvZmZzZXRYIC0gQk9SREVSX1NJWkUgKiBzY2FsZVgsXG4gICAgICBvZmZzZXRZOiBvZmZzZXRZIC0gQk9SREVSX1NJWkUgKiBzY2FsZVksXG4gICAgICBzY2FsZVgsXG4gICAgICBzY2FsZVlcbiAgICB9O1xuICB9XG5cbiAgZ2V0UGF0dGVybihjdHgsIG93bmVyLCBpbnZlcnNlLCBwYXRoVHlwZSkge1xuICAgIGFwcGx5Qm91bmRpbmdCb3goY3R4LCB0aGlzLl9iYm94KTtcbiAgICBsZXQgc2NhbGU7XG5cbiAgICBpZiAocGF0aFR5cGUgPT09IFBhdGhUeXBlLlNIQURJTkcpIHtcbiAgICAgIHNjYWxlID0gX3V0aWwuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShjdHgubW96Q3VycmVudFRyYW5zZm9ybSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjYWxlID0gX3V0aWwuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShvd25lci5iYXNlVHJhbnNmb3JtKTtcblxuICAgICAgaWYgKHRoaXMubWF0cml4KSB7XG4gICAgICAgIGNvbnN0IG1hdHJpeFNjYWxlID0gX3V0aWwuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0aGlzLm1hdHJpeCk7XG5cbiAgICAgICAgc2NhbGUgPSBbc2NhbGVbMF0gKiBtYXRyaXhTY2FsZVswXSwgc2NhbGVbMV0gKiBtYXRyaXhTY2FsZVsxXV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcyA9IHRoaXMuX2NyZWF0ZU1lc2hDYW52YXMoc2NhbGUsIHBhdGhUeXBlID09PSBQYXRoVHlwZS5TSEFESU5HID8gbnVsbCA6IHRoaXMuX2JhY2tncm91bmQsIG93bmVyLmNhY2hlZENhbnZhc2VzKTtcblxuICAgIGlmIChwYXRoVHlwZSAhPT0gUGF0aFR5cGUuU0hBRElORykge1xuICAgICAgY3R4LnNldFRyYW5zZm9ybS5hcHBseShjdHgsIG93bmVyLmJhc2VUcmFuc2Zvcm0pO1xuXG4gICAgICBpZiAodGhpcy5tYXRyaXgpIHtcbiAgICAgICAgY3R4LnRyYW5zZm9ybS5hcHBseShjdHgsIHRoaXMubWF0cml4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjdHgudHJhbnNsYXRlKHRlbXBvcmFyeVBhdHRlcm5DYW52YXMub2Zmc2V0WCwgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRZKTtcbiAgICBjdHguc2NhbGUodGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5zY2FsZVgsIHRlbXBvcmFyeVBhdHRlcm5DYW52YXMuc2NhbGVZKTtcbiAgICByZXR1cm4gY3R4LmNyZWF0ZVBhdHRlcm4odGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5jYW52YXMsIFwibm8tcmVwZWF0XCIpO1xuICB9XG5cbn1cblxuY2xhc3MgRHVtbXlTaGFkaW5nUGF0dGVybiBleHRlbmRzIEJhc2VTaGFkaW5nUGF0dGVybiB7XG4gIGdldFBhdHRlcm4oKSB7XG4gICAgcmV0dXJuIFwiaG90cGlua1wiO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gZ2V0U2hhZGluZ1BhdHRlcm4oSVIpIHtcbiAgc3dpdGNoIChJUlswXSkge1xuICAgIGNhc2UgXCJSYWRpYWxBeGlhbFwiOlxuICAgICAgcmV0dXJuIG5ldyBSYWRpYWxBeGlhbFNoYWRpbmdQYXR0ZXJuKElSKTtcblxuICAgIGNhc2UgXCJNZXNoXCI6XG4gICAgICByZXR1cm4gbmV3IE1lc2hTaGFkaW5nUGF0dGVybihJUik7XG5cbiAgICBjYXNlIFwiRHVtbXlcIjpcbiAgICAgIHJldHVybiBuZXcgRHVtbXlTaGFkaW5nUGF0dGVybigpO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIElSIHR5cGU6ICR7SVJbMF19YCk7XG59XG5cbmNvbnN0IFBhaW50VHlwZSA9IHtcbiAgQ09MT1JFRDogMSxcbiAgVU5DT0xPUkVEOiAyXG59O1xuXG5jbGFzcyBUaWxpbmdQYXR0ZXJuIHtcbiAgc3RhdGljIGdldCBNQVhfUEFUVEVSTl9TSVpFKCkge1xuICAgIHJldHVybiAoMCwgX3V0aWwuc2hhZG93KSh0aGlzLCBcIk1BWF9QQVRURVJOX1NJWkVcIiwgMzAwMCk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihJUiwgY29sb3IsIGN0eCwgY2FudmFzR3JhcGhpY3NGYWN0b3J5LCBiYXNlVHJhbnNmb3JtKSB7XG4gICAgdGhpcy5vcGVyYXRvckxpc3QgPSBJUlsyXTtcbiAgICB0aGlzLm1hdHJpeCA9IElSWzNdIHx8IFsxLCAwLCAwLCAxLCAwLCAwXTtcbiAgICB0aGlzLmJib3ggPSBJUls0XTtcbiAgICB0aGlzLnhzdGVwID0gSVJbNV07XG4gICAgdGhpcy55c3RlcCA9IElSWzZdO1xuICAgIHRoaXMucGFpbnRUeXBlID0gSVJbN107XG4gICAgdGhpcy50aWxpbmdUeXBlID0gSVJbOF07XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIHRoaXMuY2FudmFzR3JhcGhpY3NGYWN0b3J5ID0gY2FudmFzR3JhcGhpY3NGYWN0b3J5O1xuICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IGJhc2VUcmFuc2Zvcm07XG4gIH1cblxuICBjcmVhdGVQYXR0ZXJuQ2FudmFzKG93bmVyKSB7XG4gICAgY29uc3Qgb3BlcmF0b3JMaXN0ID0gdGhpcy5vcGVyYXRvckxpc3Q7XG4gICAgY29uc3QgYmJveCA9IHRoaXMuYmJveDtcbiAgICBjb25zdCB4c3RlcCA9IHRoaXMueHN0ZXA7XG4gICAgY29uc3QgeXN0ZXAgPSB0aGlzLnlzdGVwO1xuICAgIGNvbnN0IHBhaW50VHlwZSA9IHRoaXMucGFpbnRUeXBlO1xuICAgIGNvbnN0IHRpbGluZ1R5cGUgPSB0aGlzLnRpbGluZ1R5cGU7XG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yO1xuICAgIGNvbnN0IGNhbnZhc0dyYXBoaWNzRmFjdG9yeSA9IHRoaXMuY2FudmFzR3JhcGhpY3NGYWN0b3J5O1xuICAgICgwLCBfdXRpbC5pbmZvKShcIlRpbGluZ1R5cGU6IFwiICsgdGlsaW5nVHlwZSk7XG4gICAgY29uc3QgeDAgPSBiYm94WzBdLFxuICAgICAgICAgIHkwID0gYmJveFsxXSxcbiAgICAgICAgICB4MSA9IGJib3hbMl0sXG4gICAgICAgICAgeTEgPSBiYm94WzNdO1xuXG4gICAgY29uc3QgbWF0cml4U2NhbGUgPSBfdXRpbC5VdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHRoaXMubWF0cml4KTtcblxuICAgIGNvbnN0IGN1ck1hdHJpeFNjYWxlID0gX3V0aWwuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0aGlzLmJhc2VUcmFuc2Zvcm0pO1xuXG4gICAgY29uc3QgY29tYmluZWRTY2FsZSA9IFttYXRyaXhTY2FsZVswXSAqIGN1ck1hdHJpeFNjYWxlWzBdLCBtYXRyaXhTY2FsZVsxXSAqIGN1ck1hdHJpeFNjYWxlWzFdXTtcbiAgICBjb25zdCBkaW14ID0gdGhpcy5nZXRTaXplQW5kU2NhbGUoeHN0ZXAsIHRoaXMuY3R4LmNhbnZhcy53aWR0aCwgY29tYmluZWRTY2FsZVswXSk7XG4gICAgY29uc3QgZGlteSA9IHRoaXMuZ2V0U2l6ZUFuZFNjYWxlKHlzdGVwLCB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0LCBjb21iaW5lZFNjYWxlWzFdKTtcbiAgICBjb25zdCB0bXBDYW52YXMgPSBvd25lci5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoXCJwYXR0ZXJuXCIsIGRpbXguc2l6ZSwgZGlteS5zaXplLCB0cnVlKTtcbiAgICBjb25zdCB0bXBDdHggPSB0bXBDYW52YXMuY29udGV4dDtcbiAgICBjb25zdCBncmFwaGljcyA9IGNhbnZhc0dyYXBoaWNzRmFjdG9yeS5jcmVhdGVDYW52YXNHcmFwaGljcyh0bXBDdHgpO1xuICAgIGdyYXBoaWNzLmdyb3VwTGV2ZWwgPSBvd25lci5ncm91cExldmVsO1xuICAgIHRoaXMuc2V0RmlsbEFuZFN0cm9rZVN0eWxlVG9Db250ZXh0KGdyYXBoaWNzLCBwYWludFR5cGUsIGNvbG9yKTtcbiAgICBsZXQgYWRqdXN0ZWRYMCA9IHgwO1xuICAgIGxldCBhZGp1c3RlZFkwID0geTA7XG4gICAgbGV0IGFkanVzdGVkWDEgPSB4MTtcbiAgICBsZXQgYWRqdXN0ZWRZMSA9IHkxO1xuXG4gICAgaWYgKHgwIDwgMCkge1xuICAgICAgYWRqdXN0ZWRYMCA9IDA7XG4gICAgICBhZGp1c3RlZFgxICs9IE1hdGguYWJzKHgwKTtcbiAgICB9XG5cbiAgICBpZiAoeTAgPCAwKSB7XG4gICAgICBhZGp1c3RlZFkwID0gMDtcbiAgICAgIGFkanVzdGVkWTEgKz0gTWF0aC5hYnMoeTApO1xuICAgIH1cblxuICAgIHRtcEN0eC50cmFuc2xhdGUoLShkaW14LnNjYWxlICogYWRqdXN0ZWRYMCksIC0oZGlteS5zY2FsZSAqIGFkanVzdGVkWTApKTtcbiAgICBncmFwaGljcy50cmFuc2Zvcm0oZGlteC5zY2FsZSwgMCwgMCwgZGlteS5zY2FsZSwgMCwgMCk7XG4gICAgdG1wQ3R4LnNhdmUoKTtcbiAgICB0aGlzLmNsaXBCYm94KGdyYXBoaWNzLCBhZGp1c3RlZFgwLCBhZGp1c3RlZFkwLCBhZGp1c3RlZFgxLCBhZGp1c3RlZFkxKTtcbiAgICBncmFwaGljcy5iYXNlVHJhbnNmb3JtID0gZ3JhcGhpY3MuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0uc2xpY2UoKTtcbiAgICBncmFwaGljcy5leGVjdXRlT3BlcmF0b3JMaXN0KG9wZXJhdG9yTGlzdCk7XG4gICAgZ3JhcGhpY3MuZW5kRHJhd2luZygpO1xuICAgIHJldHVybiB7XG4gICAgICBjYW52YXM6IHRtcENhbnZhcy5jYW52YXMsXG4gICAgICBzY2FsZVg6IGRpbXguc2NhbGUsXG4gICAgICBzY2FsZVk6IGRpbXkuc2NhbGUsXG4gICAgICBvZmZzZXRYOiBhZGp1c3RlZFgwLFxuICAgICAgb2Zmc2V0WTogYWRqdXN0ZWRZMFxuICAgIH07XG4gIH1cblxuICBnZXRTaXplQW5kU2NhbGUoc3RlcCwgcmVhbE91dHB1dFNpemUsIHNjYWxlKSB7XG4gICAgc3RlcCA9IE1hdGguYWJzKHN0ZXApO1xuICAgIGNvbnN0IG1heFNpemUgPSBNYXRoLm1heChUaWxpbmdQYXR0ZXJuLk1BWF9QQVRURVJOX1NJWkUsIHJlYWxPdXRwdXRTaXplKTtcbiAgICBsZXQgc2l6ZSA9IE1hdGguY2VpbChzdGVwICogc2NhbGUpO1xuXG4gICAgaWYgKHNpemUgPj0gbWF4U2l6ZSkge1xuICAgICAgc2l6ZSA9IG1heFNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjYWxlID0gc2l6ZSAvIHN0ZXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNjYWxlLFxuICAgICAgc2l6ZVxuICAgIH07XG4gIH1cblxuICBjbGlwQmJveChncmFwaGljcywgeDAsIHkwLCB4MSwgeTEpIHtcbiAgICBjb25zdCBiYm94V2lkdGggPSB4MSAtIHgwO1xuICAgIGNvbnN0IGJib3hIZWlnaHQgPSB5MSAtIHkwO1xuICAgIGdyYXBoaWNzLmN0eC5yZWN0KHgwLCB5MCwgYmJveFdpZHRoLCBiYm94SGVpZ2h0KTtcbiAgICBncmFwaGljcy5jdXJyZW50LnVwZGF0ZVJlY3RNaW5NYXgoZ3JhcGhpY3MuY3R4Lm1vekN1cnJlbnRUcmFuc2Zvcm0sIFt4MCwgeTAsIHgxLCB5MV0pO1xuICAgIGdyYXBoaWNzLmNsaXAoKTtcbiAgICBncmFwaGljcy5lbmRQYXRoKCk7XG4gIH1cblxuICBzZXRGaWxsQW5kU3Ryb2tlU3R5bGVUb0NvbnRleHQoZ3JhcGhpY3MsIHBhaW50VHlwZSwgY29sb3IpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ3JhcGhpY3MuY3R4LFxuICAgICAgICAgIGN1cnJlbnQgPSBncmFwaGljcy5jdXJyZW50O1xuXG4gICAgc3dpdGNoIChwYWludFR5cGUpIHtcbiAgICAgIGNhc2UgUGFpbnRUeXBlLkNPTE9SRUQ6XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGN0eC5maWxsU3R5bGU7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjdHguc3Ryb2tlU3R5bGU7XG4gICAgICAgIGN1cnJlbnQuZmlsbENvbG9yID0gY3R4LmZpbGxTdHlsZTtcbiAgICAgICAgY3VycmVudC5zdHJva2VDb2xvciA9IGN0eC5zdHJva2VTdHlsZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUGFpbnRUeXBlLlVOQ09MT1JFRDpcbiAgICAgICAgY29uc3QgY3NzQ29sb3IgPSBfdXRpbC5VdGlsLm1ha2VIZXhDb2xvcihjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdKTtcblxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGNzc0NvbG9yO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY3NzQ29sb3I7XG4gICAgICAgIGN1cnJlbnQuZmlsbENvbG9yID0gY3NzQ29sb3I7XG4gICAgICAgIGN1cnJlbnQuc3Ryb2tlQ29sb3IgPSBjc3NDb2xvcjtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBfdXRpbC5Gb3JtYXRFcnJvcihgVW5zdXBwb3J0ZWQgcGFpbnQgdHlwZTogJHtwYWludFR5cGV9YCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UGF0dGVybihjdHgsIG93bmVyLCBpbnZlcnNlLCBwYXRoVHlwZSkge1xuICAgIGxldCBtYXRyaXggPSBpbnZlcnNlO1xuXG4gICAgaWYgKHBhdGhUeXBlICE9PSBQYXRoVHlwZS5TSEFESU5HKSB7XG4gICAgICBtYXRyaXggPSBfdXRpbC5VdGlsLnRyYW5zZm9ybShtYXRyaXgsIG93bmVyLmJhc2VUcmFuc2Zvcm0pO1xuXG4gICAgICBpZiAodGhpcy5tYXRyaXgpIHtcbiAgICAgICAgbWF0cml4ID0gX3V0aWwuVXRpbC50cmFuc2Zvcm0obWF0cml4LCB0aGlzLm1hdHJpeCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcyA9IHRoaXMuY3JlYXRlUGF0dGVybkNhbnZhcyhvd25lcik7XG4gICAgbGV0IGRvbU1hdHJpeCA9IG5ldyBET01NYXRyaXgobWF0cml4KTtcbiAgICBkb21NYXRyaXggPSBkb21NYXRyaXgudHJhbnNsYXRlKHRlbXBvcmFyeVBhdHRlcm5DYW52YXMub2Zmc2V0WCwgdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5vZmZzZXRZKTtcbiAgICBkb21NYXRyaXggPSBkb21NYXRyaXguc2NhbGUoMSAvIHRlbXBvcmFyeVBhdHRlcm5DYW52YXMuc2NhbGVYLCAxIC8gdGVtcG9yYXJ5UGF0dGVybkNhbnZhcy5zY2FsZVkpO1xuICAgIGNvbnN0IHBhdHRlcm4gPSBjdHguY3JlYXRlUGF0dGVybih0ZW1wb3JhcnlQYXR0ZXJuQ2FudmFzLmNhbnZhcywgXCJyZXBlYXRcIik7XG5cbiAgICB0cnkge1xuICAgICAgcGF0dGVybi5zZXRUcmFuc2Zvcm0oZG9tTWF0cml4KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgKDAsIF91dGlsLndhcm4pKGBUaWxpbmdQYXR0ZXJuLmdldFBhdHRlcm46IFwiJHtleD8ubWVzc2FnZX1cIi5gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxuXG59XG5cbmV4cG9ydHMuVGlsaW5nUGF0dGVybiA9IFRpbGluZ1BhdHRlcm47XG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuYXBwbHlNYXNrSW1hZ2VEYXRhID0gYXBwbHlNYXNrSW1hZ2VEYXRhO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG5mdW5jdGlvbiBhcHBseU1hc2tJbWFnZURhdGEoe1xuICBzcmMsXG4gIHNyY1BvcyA9IDAsXG4gIGRlc3QsXG4gIGRlc3RQb3MgPSAwLFxuICB3aWR0aCxcbiAgaGVpZ2h0LFxuICBpbnZlcnNlRGVjb2RlID0gZmFsc2Vcbn0pIHtcbiAgY29uc3Qgb3BhcXVlID0gX3V0aWwuRmVhdHVyZVRlc3QuaXNMaXR0bGVFbmRpYW4gPyAweGZmMDAwMDAwIDogMHgwMDAwMDBmZjtcbiAgY29uc3QgW3plcm9NYXBwaW5nLCBvbmVNYXBwaW5nXSA9ICFpbnZlcnNlRGVjb2RlID8gW29wYXF1ZSwgMF0gOiBbMCwgb3BhcXVlXTtcbiAgY29uc3Qgd2lkdGhJblNvdXJjZSA9IHdpZHRoID4+IDM7XG4gIGNvbnN0IHdpZHRoUmVtYWluZGVyID0gd2lkdGggJiA3O1xuICBjb25zdCBzcmNMZW5ndGggPSBzcmMubGVuZ3RoO1xuICBkZXN0ID0gbmV3IFVpbnQzMkFycmF5KGRlc3QuYnVmZmVyKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgZm9yIChjb25zdCBtYXggPSBzcmNQb3MgKyB3aWR0aEluU291cmNlOyBzcmNQb3MgPCBtYXg7IHNyY1BvcysrKSB7XG4gICAgICBjb25zdCBlbGVtID0gc3JjUG9zIDwgc3JjTGVuZ3RoID8gc3JjW3NyY1Bvc10gOiAyNTU7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAwMDAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAwMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAwMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAwMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEwMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMDAgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgICBkZXN0W2Rlc3RQb3MrK10gPSBlbGVtICYgMGIxMCA/IG9uZU1hcHBpbmcgOiB6ZXJvTWFwcGluZztcbiAgICAgIGRlc3RbZGVzdFBvcysrXSA9IGVsZW0gJiAwYjEgPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgfVxuXG4gICAgaWYgKHdpZHRoUmVtYWluZGVyID09PSAwKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtID0gc3JjUG9zIDwgc3JjTGVuZ3RoID8gc3JjW3NyY1BvcysrXSA6IDI1NTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgd2lkdGhSZW1haW5kZXI7IGorKykge1xuICAgICAgZGVzdFtkZXN0UG9zKytdID0gZWxlbSAmIDEgPDwgNyAtIGogPyBvbmVNYXBwaW5nIDogemVyb01hcHBpbmc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzcmNQb3MsXG4gICAgZGVzdFBvc1xuICB9O1xufVxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkdsb2JhbFdvcmtlck9wdGlvbnMgPSB2b2lkIDA7XG5jb25zdCBHbG9iYWxXb3JrZXJPcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmV4cG9ydHMuR2xvYmFsV29ya2VyT3B0aW9ucyA9IEdsb2JhbFdvcmtlck9wdGlvbnM7XG5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclBvcnQgPSBHbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclBvcnQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBHbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclBvcnQ7XG5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYyA9IEdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID09PSB1bmRlZmluZWQgPyBcIlwiIDogR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmM7XG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuTWVzc2FnZUhhbmRsZXIgPSB2b2lkIDA7XG5cbnZhciBfdXRpbCA9IF9fd19wZGZqc19yZXF1aXJlX18oMSk7XG5cbmNvbnN0IENhbGxiYWNrS2luZCA9IHtcbiAgVU5LTk9XTjogMCxcbiAgREFUQTogMSxcbiAgRVJST1I6IDJcbn07XG5jb25zdCBTdHJlYW1LaW5kID0ge1xuICBVTktOT1dOOiAwLFxuICBDQU5DRUw6IDEsXG4gIENBTkNFTF9DT01QTEVURTogMixcbiAgQ0xPU0U6IDMsXG4gIEVOUVVFVUU6IDQsXG4gIEVSUk9SOiA1LFxuICBQVUxMOiA2LFxuICBQVUxMX0NPTVBMRVRFOiA3LFxuICBTVEFSVF9DT01QTEVURTogOFxufTtcblxuZnVuY3Rpb24gd3JhcFJlYXNvbihyZWFzb24pIHtcbiAgaWYgKCEocmVhc29uIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIHJlYXNvbiA9PT0gXCJvYmplY3RcIiAmJiByZWFzb24gIT09IG51bGwpKSB7XG4gICAgKDAsIF91dGlsLnVucmVhY2hhYmxlKSgnd3JhcFJlYXNvbjogRXhwZWN0ZWQgXCJyZWFzb25cIiB0byBiZSBhIChwb3NzaWJseSBjbG9uZWQpIEVycm9yLicpO1xuICB9XG5cbiAgc3dpdGNoIChyZWFzb24ubmFtZSkge1xuICAgIGNhc2UgXCJBYm9ydEV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBfdXRpbC5BYm9ydEV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSk7XG5cbiAgICBjYXNlIFwiTWlzc2luZ1BERkV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBfdXRpbC5NaXNzaW5nUERGRXhjZXB0aW9uKHJlYXNvbi5tZXNzYWdlKTtcblxuICAgIGNhc2UgXCJQYXNzd29yZEV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBfdXRpbC5QYXNzd29yZEV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSwgcmVhc29uLmNvZGUpO1xuXG4gICAgY2FzZSBcIlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBfdXRpbC5VbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24ocmVhc29uLm1lc3NhZ2UsIHJlYXNvbi5zdGF0dXMpO1xuXG4gICAgY2FzZSBcIlVua25vd25FcnJvckV4Y2VwdGlvblwiOlxuICAgICAgcmV0dXJuIG5ldyBfdXRpbC5Vbmtub3duRXJyb3JFeGNlcHRpb24ocmVhc29uLm1lc3NhZ2UsIHJlYXNvbi5kZXRhaWxzKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IF91dGlsLlVua25vd25FcnJvckV4Y2VwdGlvbihyZWFzb24ubWVzc2FnZSwgcmVhc29uLnRvU3RyaW5nKCkpO1xuICB9XG59XG5cbmNsYXNzIE1lc3NhZ2VIYW5kbGVyIHtcbiAgY29uc3RydWN0b3Ioc291cmNlTmFtZSwgdGFyZ2V0TmFtZSwgY29tT2JqKSB7XG4gICAgdGhpcy5zb3VyY2VOYW1lID0gc291cmNlTmFtZTtcbiAgICB0aGlzLnRhcmdldE5hbWUgPSB0YXJnZXROYW1lO1xuICAgIHRoaXMuY29tT2JqID0gY29tT2JqO1xuICAgIHRoaXMuY2FsbGJhY2tJZCA9IDE7XG4gICAgdGhpcy5zdHJlYW1JZCA9IDE7XG4gICAgdGhpcy5zdHJlYW1TaW5rcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5zdHJlYW1Db250cm9sbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5hY3Rpb25IYW5kbGVyID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIHRoaXMuX29uQ29tT2JqT25NZXNzYWdlID0gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG5cbiAgICAgIGlmIChkYXRhLnRhcmdldE5hbWUgIT09IHRoaXMuc291cmNlTmFtZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLnN0cmVhbSkge1xuICAgICAgICB0aGlzLl9wcm9jZXNzU3RyZWFtTWVzc2FnZShkYXRhKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrSWQgPSBkYXRhLmNhbGxiYWNrSWQ7XG4gICAgICAgIGNvbnN0IGNhcGFiaWxpdHkgPSB0aGlzLmNhbGxiYWNrQ2FwYWJpbGl0aWVzW2NhbGxiYWNrSWRdO1xuXG4gICAgICAgIGlmICghY2FwYWJpbGl0eSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlc29sdmUgY2FsbGJhY2sgJHtjYWxsYmFja0lkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHRoaXMuY2FsbGJhY2tDYXBhYmlsaXRpZXNbY2FsbGJhY2tJZF07XG5cbiAgICAgICAgaWYgKGRhdGEuY2FsbGJhY2sgPT09IENhbGxiYWNrS2luZC5EQVRBKSB7XG4gICAgICAgICAgY2FwYWJpbGl0eS5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jYWxsYmFjayA9PT0gQ2FsbGJhY2tLaW5kLkVSUk9SKSB7XG4gICAgICAgICAgY2FwYWJpbGl0eS5yZWplY3Qod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgY2FsbGJhY2sgY2FzZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5hY3Rpb25IYW5kbGVyW2RhdGEuYWN0aW9uXTtcblxuICAgICAgaWYgKCFhY3Rpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGFjdGlvbiBmcm9tIHdvcmtlcjogJHtkYXRhLmFjdGlvbn1gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEuY2FsbGJhY2tJZCkge1xuICAgICAgICBjb25zdCBjYlNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWU7XG4gICAgICAgIGNvbnN0IGNiVGFyZ2V0TmFtZSA9IGRhdGEuc291cmNlTmFtZTtcbiAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICByZXNvbHZlKGFjdGlvbihkYXRhLmRhdGEpKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWU6IGNiU291cmNlTmFtZSxcbiAgICAgICAgICAgIHRhcmdldE5hbWU6IGNiVGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBDYWxsYmFja0tpbmQuREFUQSxcbiAgICAgICAgICAgIGNhbGxiYWNrSWQ6IGRhdGEuY2FsbGJhY2tJZCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWU6IGNiU291cmNlTmFtZSxcbiAgICAgICAgICAgIHRhcmdldE5hbWU6IGNiVGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBDYWxsYmFja0tpbmQuRVJST1IsXG4gICAgICAgICAgICBjYWxsYmFja0lkOiBkYXRhLmNhbGxiYWNrSWQsXG4gICAgICAgICAgICByZWFzb246IHdyYXBSZWFzb24ocmVhc29uKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5zdHJlYW1JZCkge1xuICAgICAgICB0aGlzLl9jcmVhdGVTdHJlYW1TaW5rKGRhdGEpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYWN0aW9uKGRhdGEuZGF0YSk7XG4gICAgfTtcblxuICAgIGNvbU9iai5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLl9vbkNvbU9iak9uTWVzc2FnZSk7XG4gIH1cblxuICBvbihhY3Rpb25OYW1lLCBoYW5kbGVyKSB7XG4gICAgY29uc3QgYWggPSB0aGlzLmFjdGlvbkhhbmRsZXI7XG5cbiAgICBpZiAoYWhbYWN0aW9uTmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgYWxyZWFkeSBhbiBhY3Rpb25OYW1lIGNhbGxlZCBcIiR7YWN0aW9uTmFtZX1cImApO1xuICAgIH1cblxuICAgIGFoW2FjdGlvbk5hbWVdID0gaGFuZGxlcjtcbiAgfVxuXG4gIHNlbmQoYWN0aW9uTmFtZSwgZGF0YSwgdHJhbnNmZXJzKSB7XG4gICAgdGhpcy5jb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgc291cmNlTmFtZTogdGhpcy5zb3VyY2VOYW1lLFxuICAgICAgdGFyZ2V0TmFtZTogdGhpcy50YXJnZXROYW1lLFxuICAgICAgYWN0aW9uOiBhY3Rpb25OYW1lLFxuICAgICAgZGF0YVxuICAgIH0sIHRyYW5zZmVycyk7XG4gIH1cblxuICBzZW5kV2l0aFByb21pc2UoYWN0aW9uTmFtZSwgZGF0YSwgdHJhbnNmZXJzKSB7XG4gICAgY29uc3QgY2FsbGJhY2tJZCA9IHRoaXMuY2FsbGJhY2tJZCsrO1xuICAgIGNvbnN0IGNhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgdGhpcy5jYWxsYmFja0NhcGFiaWxpdGllc1tjYWxsYmFja0lkXSA9IGNhcGFiaWxpdHk7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5jb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICBzb3VyY2VOYW1lOiB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICAgIHRhcmdldE5hbWU6IHRoaXMudGFyZ2V0TmFtZSxcbiAgICAgICAgYWN0aW9uOiBhY3Rpb25OYW1lLFxuICAgICAgICBjYWxsYmFja0lkLFxuICAgICAgICBkYXRhXG4gICAgICB9LCB0cmFuc2ZlcnMpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBjYXBhYmlsaXR5LnJlamVjdChleCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIHNlbmRXaXRoU3RyZWFtKGFjdGlvbk5hbWUsIGRhdGEsIHF1ZXVlaW5nU3RyYXRlZ3ksIHRyYW5zZmVycykge1xuICAgIGNvbnN0IHN0cmVhbUlkID0gdGhpcy5zdHJlYW1JZCsrLFxuICAgICAgICAgIHNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSA9IHRoaXMudGFyZ2V0TmFtZSxcbiAgICAgICAgICBjb21PYmogPSB0aGlzLmNvbU9iajtcbiAgICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIHN0YXJ0OiBjb250cm9sbGVyID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnRDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuICAgICAgICB0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW3N0cmVhbUlkXSA9IHtcbiAgICAgICAgICBjb250cm9sbGVyLFxuICAgICAgICAgIHN0YXJ0Q2FsbDogc3RhcnRDYXBhYmlsaXR5LFxuICAgICAgICAgIHB1bGxDYWxsOiBudWxsLFxuICAgICAgICAgIGNhbmNlbENhbGw6IG51bGwsXG4gICAgICAgICAgaXNDbG9zZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIGFjdGlvbjogYWN0aW9uTmFtZSxcbiAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGRlc2lyZWRTaXplOiBjb250cm9sbGVyLmRlc2lyZWRTaXplXG4gICAgICAgIH0sIHRyYW5zZmVycyk7XG4gICAgICAgIHJldHVybiBzdGFydENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgIH0sXG4gICAgICBwdWxsOiBjb250cm9sbGVyID0+IHtcbiAgICAgICAgY29uc3QgcHVsbENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgICAgIHRoaXMuc3RyZWFtQ29udHJvbGxlcnNbc3RyZWFtSWRdLnB1bGxDYWxsID0gcHVsbENhcGFiaWxpdHk7XG4gICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5QVUxMLFxuICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgIGRlc2lyZWRTaXplOiBjb250cm9sbGVyLmRlc2lyZWRTaXplXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHVsbENhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgIH0sXG4gICAgICBjYW5jZWw6IHJlYXNvbiA9PiB7XG4gICAgICAgICgwLCBfdXRpbC5hc3NlcnQpKHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yLCBcImNhbmNlbCBtdXN0IGhhdmUgYSB2YWxpZCByZWFzb25cIik7XG4gICAgICAgIGNvbnN0IGNhbmNlbENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgICAgIHRoaXMuc3RyZWFtQ29udHJvbGxlcnNbc3RyZWFtSWRdLmNhbmNlbENhbGwgPSBjYW5jZWxDYXBhYmlsaXR5O1xuICAgICAgICB0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW3N0cmVhbUlkXS5pc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5DQU5DRUwsXG4gICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbilcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjYW5jZWxDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgICB9XG4gICAgfSwgcXVldWVpbmdTdHJhdGVneSk7XG4gIH1cblxuICBfY3JlYXRlU3RyZWFtU2luayhkYXRhKSB7XG4gICAgY29uc3Qgc3RyZWFtSWQgPSBkYXRhLnN0cmVhbUlkLFxuICAgICAgICAgIHNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSA9IGRhdGEuc291cmNlTmFtZSxcbiAgICAgICAgICBjb21PYmogPSB0aGlzLmNvbU9iajtcbiAgICBjb25zdCBzZWxmID0gdGhpcyxcbiAgICAgICAgICBhY3Rpb24gPSB0aGlzLmFjdGlvbkhhbmRsZXJbZGF0YS5hY3Rpb25dO1xuICAgIGNvbnN0IHN0cmVhbVNpbmsgPSB7XG4gICAgICBlbnF1ZXVlKGNodW5rLCBzaXplID0gMSwgdHJhbnNmZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGFzdERlc2lyZWRTaXplID0gdGhpcy5kZXNpcmVkU2l6ZTtcbiAgICAgICAgdGhpcy5kZXNpcmVkU2l6ZSAtPSBzaXplO1xuXG4gICAgICAgIGlmIChsYXN0RGVzaXJlZFNpemUgPiAwICYmIHRoaXMuZGVzaXJlZFNpemUgPD0gMCkge1xuICAgICAgICAgIHRoaXMuc2lua0NhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgICAgICAgdGhpcy5yZWFkeSA9IHRoaXMuc2lua0NhcGFiaWxpdHkucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5FTlFVRVVFLFxuICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgIGNodW5rXG4gICAgICAgIH0sIHRyYW5zZmVycyk7XG4gICAgICB9LFxuXG4gICAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQ2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkNMT1NFLFxuICAgICAgICAgIHN0cmVhbUlkXG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGUgc2VsZi5zdHJlYW1TaW5rc1tzdHJlYW1JZF07XG4gICAgICB9LFxuXG4gICAgICBlcnJvcihyZWFzb24pIHtcbiAgICAgICAgKDAsIF91dGlsLmFzc2VydCkocmVhc29uIGluc3RhbmNlb2YgRXJyb3IsIFwiZXJyb3IgbXVzdCBoYXZlIGEgdmFsaWQgcmVhc29uXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5FUlJPUixcbiAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICByZWFzb246IHdyYXBSZWFzb24ocmVhc29uKVxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIHNpbmtDYXBhYmlsaXR5OiAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCksXG4gICAgICBvblB1bGw6IG51bGwsXG4gICAgICBvbkNhbmNlbDogbnVsbCxcbiAgICAgIGlzQ2FuY2VsbGVkOiBmYWxzZSxcbiAgICAgIGRlc2lyZWRTaXplOiBkYXRhLmRlc2lyZWRTaXplLFxuICAgICAgcmVhZHk6IG51bGxcbiAgICB9O1xuICAgIHN0cmVhbVNpbmsuc2lua0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgIHN0cmVhbVNpbmsucmVhZHkgPSBzdHJlYW1TaW5rLnNpbmtDYXBhYmlsaXR5LnByb21pc2U7XG4gICAgdGhpcy5zdHJlYW1TaW5rc1tzdHJlYW1JZF0gPSBzdHJlYW1TaW5rO1xuICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICByZXNvbHZlKGFjdGlvbihkYXRhLmRhdGEsIHN0cmVhbVNpbmspKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5TVEFSVF9DT01QTEVURSxcbiAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5TVEFSVF9DT01QTEVURSxcbiAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgIHJlYXNvbjogd3JhcFJlYXNvbihyZWFzb24pXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9wcm9jZXNzU3RyZWFtTWVzc2FnZShkYXRhKSB7XG4gICAgY29uc3Qgc3RyZWFtSWQgPSBkYXRhLnN0cmVhbUlkLFxuICAgICAgICAgIHNvdXJjZU5hbWUgPSB0aGlzLnNvdXJjZU5hbWUsXG4gICAgICAgICAgdGFyZ2V0TmFtZSA9IGRhdGEuc291cmNlTmFtZSxcbiAgICAgICAgICBjb21PYmogPSB0aGlzLmNvbU9iajtcbiAgICBjb25zdCBzdHJlYW1Db250cm9sbGVyID0gdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF0sXG4gICAgICAgICAgc3RyZWFtU2luayA9IHRoaXMuc3RyZWFtU2lua3Nbc3RyZWFtSWRdO1xuXG4gICAgc3dpdGNoIChkYXRhLnN0cmVhbSkge1xuICAgICAgY2FzZSBTdHJlYW1LaW5kLlNUQVJUX0NPTVBMRVRFOlxuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5zdGFydENhbGwucmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuc3RhcnRDYWxsLnJlamVjdCh3cmFwUmVhc29uKGRhdGEucmVhc29uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBTdHJlYW1LaW5kLlBVTExfQ09NUExFVEU6XG4gICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBzdHJlYW1Db250cm9sbGVyLnB1bGxDYWxsLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJlYW1Db250cm9sbGVyLnB1bGxDYWxsLnJlamVjdCh3cmFwUmVhc29uKGRhdGEucmVhc29uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBTdHJlYW1LaW5kLlBVTEw6XG4gICAgICAgIGlmICghc3RyZWFtU2luaykge1xuICAgICAgICAgIGNvbU9iai5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2VOYW1lLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHN0cmVhbTogU3RyZWFtS2luZC5QVUxMX0NPTVBMRVRFLFxuICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RyZWFtU2luay5kZXNpcmVkU2l6ZSA8PSAwICYmIGRhdGEuZGVzaXJlZFNpemUgPiAwKSB7XG4gICAgICAgICAgc3RyZWFtU2luay5zaW5rQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzdHJlYW1TaW5rLmRlc2lyZWRTaXplID0gZGF0YS5kZXNpcmVkU2l6ZTtcbiAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICByZXNvbHZlKHN0cmVhbVNpbmsub25QdWxsICYmIHN0cmVhbVNpbmsub25QdWxsKCkpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb21PYmoucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgc291cmNlTmFtZSxcbiAgICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgICBzdHJlYW06IFN0cmVhbUtpbmQuUFVMTF9DT01QTEVURSxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLlBVTExfQ09NUExFVEUsXG4gICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgIHJlYXNvbjogd3JhcFJlYXNvbihyZWFzb24pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBTdHJlYW1LaW5kLkVOUVVFVUU6XG4gICAgICAgICgwLCBfdXRpbC5hc3NlcnQpKHN0cmVhbUNvbnRyb2xsZXIsIFwiZW5xdWV1ZSBzaG91bGQgaGF2ZSBzdHJlYW0gY29udHJvbGxlclwiKTtcblxuICAgICAgICBpZiAoc3RyZWFtQ29udHJvbGxlci5pc0Nsb3NlZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyZWFtQ29udHJvbGxlci5jb250cm9sbGVyLmVucXVldWUoZGF0YS5jaHVuayk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFN0cmVhbUtpbmQuQ0xPU0U6XG4gICAgICAgICgwLCBfdXRpbC5hc3NlcnQpKHN0cmVhbUNvbnRyb2xsZXIsIFwiY2xvc2Ugc2hvdWxkIGhhdmUgc3RyZWFtIGNvbnRyb2xsZXJcIik7XG5cbiAgICAgICAgaWYgKHN0cmVhbUNvbnRyb2xsZXIuaXNDbG9zZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHN0cmVhbUNvbnRyb2xsZXIuaXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICBzdHJlYW1Db250cm9sbGVyLmNvbnRyb2xsZXIuY2xvc2UoKTtcblxuICAgICAgICB0aGlzLl9kZWxldGVTdHJlYW1Db250cm9sbGVyKHN0cmVhbUNvbnRyb2xsZXIsIHN0cmVhbUlkKTtcblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBTdHJlYW1LaW5kLkVSUk9SOlxuICAgICAgICAoMCwgX3V0aWwuYXNzZXJ0KShzdHJlYW1Db250cm9sbGVyLCBcImVycm9yIHNob3VsZCBoYXZlIHN0cmVhbSBjb250cm9sbGVyXCIpO1xuICAgICAgICBzdHJlYW1Db250cm9sbGVyLmNvbnRyb2xsZXIuZXJyb3Iod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpO1xuXG4gICAgICAgIHRoaXMuX2RlbGV0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtQ29udHJvbGxlciwgc3RyZWFtSWQpO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFN0cmVhbUtpbmQuQ0FOQ0VMX0NPTVBMRVRFOlxuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgc3RyZWFtQ29udHJvbGxlci5jYW5jZWxDYWxsLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJlYW1Db250cm9sbGVyLmNhbmNlbENhbGwucmVqZWN0KHdyYXBSZWFzb24oZGF0YS5yZWFzb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RlbGV0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtQ29udHJvbGxlciwgc3RyZWFtSWQpO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFN0cmVhbUtpbmQuQ0FOQ0VMOlxuICAgICAgICBpZiAoIXN0cmVhbVNpbmspIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgcmVzb2x2ZShzdHJlYW1TaW5rLm9uQ2FuY2VsICYmIHN0cmVhbVNpbmsub25DYW5jZWwod3JhcFJlYXNvbihkYXRhLnJlYXNvbikpKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkNBTkNFTF9DT01QTEVURSxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgY29tT2JqLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHNvdXJjZU5hbWUsXG4gICAgICAgICAgICB0YXJnZXROYW1lLFxuICAgICAgICAgICAgc3RyZWFtOiBTdHJlYW1LaW5kLkNBTkNFTF9DT01QTEVURSxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgcmVhc29uOiB3cmFwUmVhc29uKHJlYXNvbilcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0cmVhbVNpbmsuc2lua0NhcGFiaWxpdHkucmVqZWN0KHdyYXBSZWFzb24oZGF0YS5yZWFzb24pKTtcbiAgICAgICAgc3RyZWFtU2luay5pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0cmVhbVNpbmtzW3N0cmVhbUlkXTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgc3RyZWFtIGNhc2VcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2RlbGV0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtQ29udHJvbGxlciwgc3RyZWFtSWQpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW3N0cmVhbUNvbnRyb2xsZXIuc3RhcnRDYWxsICYmIHN0cmVhbUNvbnRyb2xsZXIuc3RhcnRDYWxsLnByb21pc2UsIHN0cmVhbUNvbnRyb2xsZXIucHVsbENhbGwgJiYgc3RyZWFtQ29udHJvbGxlci5wdWxsQ2FsbC5wcm9taXNlLCBzdHJlYW1Db250cm9sbGVyLmNhbmNlbENhbGwgJiYgc3RyZWFtQ29udHJvbGxlci5jYW5jZWxDYWxsLnByb21pc2VdKTtcbiAgICBkZWxldGUgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tzdHJlYW1JZF07XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuY29tT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuX29uQ29tT2JqT25NZXNzYWdlKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuTWVzc2FnZUhhbmRsZXIgPSBNZXNzYWdlSGFuZGxlcjtcblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5NZXRhZGF0YSA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxuY2xhc3MgTWV0YWRhdGEge1xuICAjbWV0YWRhdGFNYXA7XG4gICNkYXRhO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwYXJzZWREYXRhLFxuICAgIHJhd0RhdGFcbiAgfSkge1xuICAgIHRoaXMuI21ldGFkYXRhTWFwID0gcGFyc2VkRGF0YTtcbiAgICB0aGlzLiNkYXRhID0gcmF3RGF0YTtcbiAgfVxuXG4gIGdldFJhdygpIHtcbiAgICByZXR1cm4gdGhpcy4jZGF0YTtcbiAgfVxuXG4gIGdldChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuI21ldGFkYXRhTWFwLmdldChuYW1lKSA/PyBudWxsO1xuICB9XG5cbiAgZ2V0QWxsKCkge1xuICAgIHJldHVybiAoMCwgX3V0aWwub2JqZWN0RnJvbU1hcCkodGhpcy4jbWV0YWRhdGFNYXApO1xuICB9XG5cbiAgaGFzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy4jbWV0YWRhdGFNYXAuaGFzKG5hbWUpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5NZXRhZGF0YSA9IE1ldGFkYXRhO1xuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLk9wdGlvbmFsQ29udGVudENvbmZpZyA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxuY2xhc3MgT3B0aW9uYWxDb250ZW50R3JvdXAge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBpbnRlbnQpIHtcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5pbnRlbnQgPSBpbnRlbnQ7XG4gIH1cblxufVxuXG5jbGFzcyBPcHRpb25hbENvbnRlbnRDb25maWcge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5uYW1lID0gbnVsbDtcbiAgICB0aGlzLmNyZWF0b3IgPSBudWxsO1xuICAgIHRoaXMuX29yZGVyID0gbnVsbDtcbiAgICB0aGlzLl9ncm91cHMgPSBuZXcgTWFwKCk7XG5cbiAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLmNyZWF0b3IgPSBkYXRhLmNyZWF0b3I7XG4gICAgdGhpcy5fb3JkZXIgPSBkYXRhLm9yZGVyO1xuXG4gICAgZm9yIChjb25zdCBncm91cCBvZiBkYXRhLmdyb3Vwcykge1xuICAgICAgdGhpcy5fZ3JvdXBzLnNldChncm91cC5pZCwgbmV3IE9wdGlvbmFsQ29udGVudEdyb3VwKGdyb3VwLm5hbWUsIGdyb3VwLmludGVudCkpO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmJhc2VTdGF0ZSA9PT0gXCJPRkZcIikge1xuICAgICAgZm9yIChjb25zdCBncm91cCBvZiB0aGlzLl9ncm91cHMpIHtcbiAgICAgICAgZ3JvdXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3Qgb24gb2YgZGF0YS5vbikge1xuICAgICAgdGhpcy5fZ3JvdXBzLmdldChvbikudmlzaWJsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBvZmYgb2YgZGF0YS5vZmYpIHtcbiAgICAgIHRoaXMuX2dyb3Vwcy5nZXQob2ZmKS52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2V2YWx1YXRlVmlzaWJpbGl0eUV4cHJlc3Npb24oYXJyYXkpIHtcbiAgICBjb25zdCBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICBpZiAobGVuZ3RoIDwgMikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgb3BlcmF0b3IgPSBhcnJheVswXTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBhcnJheVtpXTtcbiAgICAgIGxldCBzdGF0ZTtcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudCkpIHtcbiAgICAgICAgc3RhdGUgPSB0aGlzLl9ldmFsdWF0ZVZpc2liaWxpdHlFeHByZXNzaW9uKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ncm91cHMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgIHN0YXRlID0gdGhpcy5fZ3JvdXBzLmdldChlbGVtZW50KS52aXNpYmxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKDAsIF91dGlsLndhcm4pKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtlbGVtZW50fWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICBjYXNlIFwiQW5kXCI6XG4gICAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJPclwiOlxuICAgICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIk5vdFwiOlxuICAgICAgICAgIHJldHVybiAhc3RhdGU7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3BlcmF0b3IgPT09IFwiQW5kXCI7XG4gIH1cblxuICBpc1Zpc2libGUoZ3JvdXApIHtcbiAgICBpZiAodGhpcy5fZ3JvdXBzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghZ3JvdXApIHtcbiAgICAgICgwLCBfdXRpbC53YXJuKShcIk9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGRlZmluZWQuXCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGdyb3VwLnR5cGUgPT09IFwiT0NHXCIpIHtcbiAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhncm91cC5pZCkpIHtcbiAgICAgICAgKDAsIF91dGlsLndhcm4pKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtncm91cC5pZH1gKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9ncm91cHMuZ2V0KGdyb3VwLmlkKS52aXNpYmxlO1xuICAgIH0gZWxzZSBpZiAoZ3JvdXAudHlwZSA9PT0gXCJPQ01EXCIpIHtcbiAgICAgIGlmIChncm91cC5leHByZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ldmFsdWF0ZVZpc2liaWxpdHlFeHByZXNzaW9uKGdyb3VwLmV4cHJlc3Npb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWdyb3VwLnBvbGljeSB8fCBncm91cC5wb2xpY3kgPT09IFwiQW55T25cIikge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGdyb3VwLmlkcykge1xuICAgICAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICgwLCBfdXRpbC53YXJuKShgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7aWR9YCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5fZ3JvdXBzLmdldChpZCkudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChncm91cC5wb2xpY3kgPT09IFwiQWxsT25cIikge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGdyb3VwLmlkcykge1xuICAgICAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICgwLCBfdXRpbC53YXJuKShgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7aWR9YCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXRoaXMuX2dyb3Vwcy5nZXQoaWQpLnZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZ3JvdXAucG9saWN5ID09PSBcIkFueU9mZlwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgZ3JvdXAuaWRzKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLl9ncm91cHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgKDAsIF91dGlsLndhcm4pKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtpZH1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghdGhpcy5fZ3JvdXBzLmdldChpZCkudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChncm91cC5wb2xpY3kgPT09IFwiQWxsT2ZmXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBncm91cC5pZHMpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2dyb3Vwcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAoMCwgX3V0aWwud2FybikoYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2lkfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuX2dyb3Vwcy5nZXQoaWQpLnZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgKDAsIF91dGlsLndhcm4pKGBVbmtub3duIG9wdGlvbmFsIGNvbnRlbnQgcG9saWN5ICR7Z3JvdXAucG9saWN5fS5gKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgICgwLCBfdXRpbC53YXJuKShgVW5rbm93biBncm91cCB0eXBlICR7Z3JvdXAudHlwZX0uYCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBzZXRWaXNpYmlsaXR5KGlkLCB2aXNpYmxlID0gdHJ1ZSkge1xuICAgIGlmICghdGhpcy5fZ3JvdXBzLmhhcyhpZCkpIHtcbiAgICAgICgwLCBfdXRpbC53YXJuKShgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZ3JvdXBzLmdldChpZCkudmlzaWJsZSA9ICEhdmlzaWJsZTtcbiAgfVxuXG4gIGdldE9yZGVyKCkge1xuICAgIGlmICghdGhpcy5fZ3JvdXBzLnNpemUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9vcmRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX29yZGVyLnNsaWNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fZ3JvdXBzLmtleXMoKSk7XG4gIH1cblxuICBnZXRHcm91cHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dyb3Vwcy5zaXplID4gMCA/ICgwLCBfdXRpbC5vYmplY3RGcm9tTWFwKSh0aGlzLl9ncm91cHMpIDogbnVsbDtcbiAgfVxuXG4gIGdldEdyb3VwKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dyb3Vwcy5nZXQoaWQpIHx8IG51bGw7XG4gIH1cblxufVxuXG5leHBvcnRzLk9wdGlvbmFsQ29udGVudENvbmZpZyA9IE9wdGlvbmFsQ29udGVudENvbmZpZztcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5QREZEYXRhVHJhbnNwb3J0U3RyZWFtID0gdm9pZCAwO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2Rpc3BsYXlfdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDUpO1xuXG5jbGFzcyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtIHtcbiAgY29uc3RydWN0b3IocGFyYW1zLCBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQpIHtcbiAgICAoMCwgX3V0aWwuYXNzZXJ0KShwZGZEYXRhUmFuZ2VUcmFuc3BvcnQsICdQREZEYXRhVHJhbnNwb3J0U3RyZWFtIC0gbWlzc2luZyByZXF1aXJlZCBcInBkZkRhdGFSYW5nZVRyYW5zcG9ydFwiIGFyZ3VtZW50LicpO1xuICAgIHRoaXMuX3F1ZXVlZENodW5rcyA9IFtdO1xuICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZSA9IHBhcmFtcy5wcm9ncmVzc2l2ZURvbmUgfHwgZmFsc2U7XG4gICAgdGhpcy5fY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgPSBwYXJhbXMuY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgfHwgbnVsbDtcbiAgICBjb25zdCBpbml0aWFsRGF0YSA9IHBhcmFtcy5pbml0aWFsRGF0YTtcblxuICAgIGlmIChpbml0aWFsRGF0YT8ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoaW5pdGlhbERhdGEpLmJ1ZmZlcjtcblxuICAgICAgdGhpcy5fcXVldWVkQ2h1bmtzLnB1c2goYnVmZmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQgPSBwZGZEYXRhUmFuZ2VUcmFuc3BvcnQ7XG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSAhcGFyYW1zLmRpc2FibGVTdHJlYW07XG4gICAgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCA9ICFwYXJhbXMuZGlzYWJsZVJhbmdlO1xuICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBwYXJhbXMubGVuZ3RoO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9yYW5nZVJlYWRlcnMgPSBbXTtcblxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRSYW5nZUxpc3RlbmVyKChiZWdpbiwgY2h1bmspID0+IHtcbiAgICAgIHRoaXMuX29uUmVjZWl2ZURhdGEoe1xuICAgICAgICBiZWdpbixcbiAgICAgICAgY2h1bmtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFkZFByb2dyZXNzTGlzdGVuZXIoKGxvYWRlZCwgdG90YWwpID0+IHtcbiAgICAgIHRoaXMuX29uUHJvZ3Jlc3Moe1xuICAgICAgICBsb2FkZWQsXG4gICAgICAgIHRvdGFsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRQcm9ncmVzc2l2ZVJlYWRMaXN0ZW5lcihjaHVuayA9PiB7XG4gICAgICB0aGlzLl9vblJlY2VpdmVEYXRhKHtcbiAgICAgICAgY2h1bmtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFkZFByb2dyZXNzaXZlRG9uZUxpc3RlbmVyKCgpID0+IHtcbiAgICAgIHRoaXMuX29uUHJvZ3Jlc3NpdmVEb25lKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQudHJhbnNwb3J0UmVhZHkoKTtcbiAgfVxuXG4gIF9vblJlY2VpdmVEYXRhKGFyZ3MpIHtcbiAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShhcmdzLmNodW5rKS5idWZmZXI7XG5cbiAgICBpZiAoYXJncy5iZWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIpIHtcbiAgICAgICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIuX2VucXVldWUoYnVmZmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3F1ZXVlZENodW5rcy5wdXNoKGJ1ZmZlcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5fcmFuZ2VSZWFkZXJzLnNvbWUoZnVuY3Rpb24gKHJhbmdlUmVhZGVyKSB7XG4gICAgICAgIGlmIChyYW5nZVJlYWRlci5fYmVnaW4gIT09IGFyZ3MuYmVnaW4pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByYW5nZVJlYWRlci5fZW5xdWV1ZShidWZmZXIpO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgICgwLCBfdXRpbC5hc3NlcnQpKGZvdW5kLCBcIl9vblJlY2VpdmVEYXRhIC0gbm8gYFBERkRhdGFUcmFuc3BvcnRTdHJlYW1SYW5nZVJlYWRlcmAgaW5zdGFuY2UgZm91bmQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBfcHJvZ3Jlc3NpdmVEYXRhTGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uX2xvYWRlZCA/PyAwO1xuICB9XG5cbiAgX29uUHJvZ3Jlc3MoZXZ0KSB7XG4gICAgaWYgKGV2dC50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBmaXJzdFJlYWRlciA9IHRoaXMuX3JhbmdlUmVhZGVyc1swXTtcblxuICAgICAgaWYgKGZpcnN0UmVhZGVyPy5vblByb2dyZXNzKSB7XG4gICAgICAgIGZpcnN0UmVhZGVyLm9uUHJvZ3Jlc3Moe1xuICAgICAgICAgIGxvYWRlZDogZXZ0LmxvYWRlZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZnVsbFJlYWRlciA9IHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyO1xuXG4gICAgICBpZiAoZnVsbFJlYWRlcj8ub25Qcm9ncmVzcykge1xuICAgICAgICBmdWxsUmVhZGVyLm9uUHJvZ3Jlc3Moe1xuICAgICAgICAgIGxvYWRlZDogZXZ0LmxvYWRlZCxcbiAgICAgICAgICB0b3RhbDogZXZ0LnRvdGFsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vblByb2dyZXNzaXZlRG9uZSgpIHtcbiAgICBpZiAodGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIpIHtcbiAgICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLnByb2dyZXNzaXZlRG9uZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3Byb2dyZXNzaXZlRG9uZSA9IHRydWU7XG4gIH1cblxuICBfcmVtb3ZlUmFuZ2VSZWFkZXIocmVhZGVyKSB7XG4gICAgY29uc3QgaSA9IHRoaXMuX3JhbmdlUmVhZGVycy5pbmRleE9mKHJlYWRlcik7XG5cbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9yYW5nZVJlYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgKDAsIF91dGlsLmFzc2VydCkoIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLCBcIlBERkRhdGFUcmFuc3BvcnRTdHJlYW0uZ2V0RnVsbFJlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZS5cIik7XG4gICAgY29uc3QgcXVldWVkQ2h1bmtzID0gdGhpcy5fcXVldWVkQ2h1bmtzO1xuICAgIHRoaXMuX3F1ZXVlZENodW5rcyA9IG51bGw7XG4gICAgcmV0dXJuIG5ldyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmVhZGVyKHRoaXMsIHF1ZXVlZENodW5rcywgdGhpcy5fcHJvZ3Jlc3NpdmVEb25lLCB0aGlzLl9jb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSk7XG4gIH1cblxuICBnZXRSYW5nZVJlYWRlcihiZWdpbiwgZW5kKSB7XG4gICAgaWYgKGVuZCA8PSB0aGlzLl9wcm9ncmVzc2l2ZURhdGFMZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmFuZ2VSZWFkZXIodGhpcywgYmVnaW4sIGVuZCk7XG5cbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQucmVxdWVzdERhdGFSYW5nZShiZWdpbiwgZW5kKTtcblxuICAgIHRoaXMuX3JhbmdlUmVhZGVycy5wdXNoKHJlYWRlcik7XG5cbiAgICByZXR1cm4gcmVhZGVyO1xuICB9XG5cbiAgY2FuY2VsQWxsUmVxdWVzdHMocmVhc29uKSB7XG4gICAgaWYgKHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyKSB7XG4gICAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiB0aGlzLl9yYW5nZVJlYWRlcnMuc2xpY2UoMCkpIHtcbiAgICAgIHJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQuYWJvcnQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGRGF0YVRyYW5zcG9ydFN0cmVhbSA9IFBERkRhdGFUcmFuc3BvcnRTdHJlYW07XG5cbmNsYXNzIFBERkRhdGFUcmFuc3BvcnRTdHJlYW1SZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIHF1ZXVlZENodW5rcywgcHJvZ3Jlc3NpdmVEb25lID0gZmFsc2UsIGNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lID0gbnVsbCkge1xuICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcbiAgICB0aGlzLl9kb25lID0gcHJvZ3Jlc3NpdmVEb25lIHx8IGZhbHNlO1xuICAgIHRoaXMuX2ZpbGVuYW1lID0gKDAsIF9kaXNwbGF5X3V0aWxzLmlzUGRmRmlsZSkoY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUpID8gY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWUgOiBudWxsO1xuICAgIHRoaXMuX3F1ZXVlZENodW5rcyA9IHF1ZXVlZENodW5rcyB8fCBbXTtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuXG4gICAgZm9yIChjb25zdCBjaHVuayBvZiB0aGlzLl9xdWV1ZWRDaHVua3MpIHtcbiAgICAgIHRoaXMuX2xvYWRlZCArPSBjaHVuay5ieXRlTGVuZ3RoO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5faGVhZGVyc1JlYWR5ID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgc3RyZWFtLl9mdWxsUmVxdWVzdFJlYWRlciA9IHRoaXM7XG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgfVxuXG4gIF9lbnF1ZXVlKGNodW5rKSB7XG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgPSB0aGlzLl9yZXF1ZXN0cy5zaGlmdCgpO1xuXG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgdmFsdWU6IGNodW5rLFxuICAgICAgICBkb25lOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rcy5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICB0aGlzLl9sb2FkZWQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIGdldCBoZWFkZXJzUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlYWRlcnNSZWFkeTtcbiAgfVxuXG4gIGdldCBmaWxlbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsZW5hbWU7XG4gIH1cblxuICBnZXQgaXNSYW5nZVN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RyZWFtLl9pc1JhbmdlU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9zdHJlYW0uX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmVhbS5fY29udGVudExlbmd0aDtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgaWYgKHRoaXMuX3F1ZXVlZENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaHVuayA9IHRoaXMuX3F1ZXVlZENodW5rcy5zaGlmdCgpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgIGRvbmU6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuXG4gICAgdGhpcy5fcmVxdWVzdHMucHVzaChyZXF1ZXN0Q2FwYWJpbGl0eSk7XG5cbiAgICByZXR1cm4gcmVxdWVzdENhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICB0aGlzLl9kb25lID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPSAwO1xuICB9XG5cbiAgcHJvZ3Jlc3NpdmVEb25lKCkge1xuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG4gIH1cblxufVxuXG5jbGFzcyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIGJlZ2luLCBlbmQpIHtcbiAgICB0aGlzLl9zdHJlYW0gPSBzdHJlYW07XG4gICAgdGhpcy5fYmVnaW4gPSBiZWdpbjtcbiAgICB0aGlzLl9lbmQgPSBlbmQ7XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fZG9uZSA9IGZhbHNlO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gIH1cblxuICBfZW5xdWV1ZShjaHVuaykge1xuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBjaHVuaztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVxdWVzdHNDYXBhYmlsaXR5ID0gdGhpcy5fcmVxdWVzdHMuc2hpZnQoKTtcblxuICAgICAgcmVxdWVzdHNDYXBhYmlsaXR5LnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgIGRvbmU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGRvbmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG5cbiAgICB0aGlzLl9zdHJlYW0uX3JlbW92ZVJhbmdlUmVhZGVyKHRoaXMpO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgaWYgKHRoaXMuX3F1ZXVlZENodW5rKSB7XG4gICAgICBjb25zdCBjaHVuayA9IHRoaXMuX3F1ZXVlZENodW5rO1xuICAgICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGNodW5rLFxuICAgICAgICBkb25lOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZG9uZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcblxuICAgIHRoaXMuX3JlcXVlc3RzLnB1c2gocmVxdWVzdENhcGFiaWxpdHkpO1xuXG4gICAgcmV0dXJuIHJlcXVlc3RDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBjYW5jZWwocmVhc29uKSB7XG4gICAgdGhpcy5fZG9uZSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcblxuICAgIHRoaXMuX3N0cmVhbS5fcmVtb3ZlUmFuZ2VSZWFkZXIodGhpcyk7XG4gIH1cblxufVxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlhmYVRleHQgPSB2b2lkIDA7XG5cbmNsYXNzIFhmYVRleHQge1xuICBzdGF0aWMgdGV4dENvbnRlbnQoeGZhKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICBpdGVtcyxcbiAgICAgIHN0eWxlczogT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB3YWxrKG5vZGUpIHtcbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBzdHIgPSBudWxsO1xuICAgICAgY29uc3QgbmFtZSA9IG5vZGUubmFtZTtcblxuICAgICAgaWYgKG5hbWUgPT09IFwiI3RleHRcIikge1xuICAgICAgICBzdHIgPSBub2RlLnZhbHVlO1xuICAgICAgfSBlbHNlIGlmICghWGZhVGV4dC5zaG91bGRCdWlsZFRleHQobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChub2RlPy5hdHRyaWJ1dGVzPy50ZXh0Q29udGVudCkge1xuICAgICAgICBzdHIgPSBub2RlLmF0dHJpYnV0ZXMudGV4dENvbnRlbnQ7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUudmFsdWUpIHtcbiAgICAgICAgc3RyID0gbm9kZS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0ciAhPT0gbnVsbCkge1xuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICBzdHJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbm9kZS5jaGlsZHJlbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgICAgICB3YWxrKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3YWxrKHhmYSk7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIHN0YXRpYyBzaG91bGRCdWlsZFRleHQobmFtZSkge1xuICAgIHJldHVybiAhKG5hbWUgPT09IFwidGV4dGFyZWFcIiB8fCBuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJvcHRpb25cIiB8fCBuYW1lID09PSBcInNlbGVjdFwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuWGZhVGV4dCA9IFhmYVRleHQ7XG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gZXhwb3J0cy5Ob2RlQ2FudmFzRmFjdG9yeSA9IGV4cG9ydHMuTm9kZUNNYXBSZWFkZXJGYWN0b3J5ID0gdm9pZCAwO1xuXG52YXIgX2Jhc2VfZmFjdG9yeSA9IF9fd19wZGZqc19yZXF1aXJlX18oNik7XG5cbjtcblxuY29uc3QgZmV0Y2hEYXRhID0gZnVuY3Rpb24gKHVybCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG4gICAgZnMucmVhZEZpbGUodXJsLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGVycm9yKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY2xhc3MgTm9kZUNhbnZhc0ZhY3RvcnkgZXh0ZW5kcyBfYmFzZV9mYWN0b3J5LkJhc2VDYW52YXNGYWN0b3J5IHtcbiAgX2NyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgY29uc3QgQ2FudmFzID0gcmVxdWlyZShcImNhbnZhc1wiKTtcblxuICAgIHJldHVybiBDYW52YXMuY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5Ob2RlQ2FudmFzRmFjdG9yeSA9IE5vZGVDYW52YXNGYWN0b3J5O1xuXG5jbGFzcyBOb2RlQ01hcFJlYWRlckZhY3RvcnkgZXh0ZW5kcyBfYmFzZV9mYWN0b3J5LkJhc2VDTWFwUmVhZGVyRmFjdG9yeSB7XG4gIF9mZXRjaERhdGEodXJsLCBjb21wcmVzc2lvblR5cGUpIHtcbiAgICByZXR1cm4gZmV0Y2hEYXRhKHVybCkudGhlbihkYXRhID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNNYXBEYXRhOiBkYXRhLFxuICAgICAgICBjb21wcmVzc2lvblR5cGVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxufVxuXG5leHBvcnRzLk5vZGVDTWFwUmVhZGVyRmFjdG9yeSA9IE5vZGVDTWFwUmVhZGVyRmFjdG9yeTtcblxuY2xhc3MgTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5IGV4dGVuZHMgX2Jhc2VfZmFjdG9yeS5CYXNlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnkge1xuICBfZmV0Y2hEYXRhKHVybCkge1xuICAgIHJldHVybiBmZXRjaERhdGEodXJsKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5ID0gTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5O1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkFubm90YXRpb25MYXllciA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxudmFyIF9kaXNwbGF5X3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg1KTtcblxudmFyIF9hbm5vdGF0aW9uX3N0b3JhZ2UgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDgpO1xuXG52YXIgX3NjcmlwdGluZ191dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oMjEpO1xuXG52YXIgX3hmYV9sYXllciA9IF9fd19wZGZqc19yZXF1aXJlX18oMjIpO1xuXG5jb25zdCBERUZBVUxUX1RBQl9JTkRFWCA9IDEwMDA7XG5jb25zdCBHZXRFbGVtZW50c0J5TmFtZVNldCA9IG5ldyBXZWFrU2V0KCk7XG5cbmZ1bmN0aW9uIGdldFJlY3REaW1zKHJlY3QpIHtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogcmVjdFsyXSAtIHJlY3RbMF0sXG4gICAgaGVpZ2h0OiByZWN0WzNdIC0gcmVjdFsxXVxuICB9O1xufVxuXG5jbGFzcyBBbm5vdGF0aW9uRWxlbWVudEZhY3Rvcnkge1xuICBzdGF0aWMgY3JlYXRlKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBzdWJ0eXBlID0gcGFyYW1ldGVycy5kYXRhLmFubm90YXRpb25UeXBlO1xuXG4gICAgc3dpdGNoIChzdWJ0eXBlKSB7XG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLkxJTks6XG4gICAgICAgIHJldHVybiBuZXcgTGlua0Fubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLlRFWFQ6XG4gICAgICAgIHJldHVybiBuZXcgVGV4dEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLldJREdFVDpcbiAgICAgICAgY29uc3QgZmllbGRUeXBlID0gcGFyYW1ldGVycy5kYXRhLmZpZWxkVHlwZTtcblxuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgICAgICBjYXNlIFwiQnRuXCI6XG4gICAgICAgICAgICBpZiAocGFyYW1ldGVycy5kYXRhLnJhZGlvQnV0dG9uKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgUmFkaW9CdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1ldGVycy5kYXRhLmNoZWNrQm94KSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgQ2hlY2tib3hXaWRnZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQdXNoQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgICAgICBjYXNlIFwiQ2hcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hvaWNlV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFdpZGdldEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLlBPUFVQOlxuICAgICAgICByZXR1cm4gbmV3IFBvcHVwQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvblR5cGUuRlJFRVRFWFQ6XG4gICAgICAgIHJldHVybiBuZXcgRnJlZVRleHRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uVHlwZS5MSU5FOlxuICAgICAgICByZXR1cm4gbmV3IExpbmVBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uVHlwZS5TUVVBUkU6XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvblR5cGUuQ0lSQ0xFOlxuICAgICAgICByZXR1cm4gbmV3IENpcmNsZUFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLlBPTFlMSU5FOlxuICAgICAgICByZXR1cm4gbmV3IFBvbHlsaW5lQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvblR5cGUuQ0FSRVQ6XG4gICAgICAgIHJldHVybiBuZXcgQ2FyZXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uVHlwZS5JTks6XG4gICAgICAgIHJldHVybiBuZXcgSW5rQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvblR5cGUuUE9MWUdPTjpcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGNhc2UgX3V0aWwuQW5ub3RhdGlvblR5cGUuSElHSExJR0hUOlxuICAgICAgICByZXR1cm4gbmV3IEhpZ2hsaWdodEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLlVOREVSTElORTpcbiAgICAgICAgcmV0dXJuIG5ldyBVbmRlcmxpbmVBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uVHlwZS5TUVVJR0dMWTpcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVpZ2dseUFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLlNUUklLRU9VVDpcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpa2VPdXRBbm5vdGF0aW9uRWxlbWVudChwYXJhbWV0ZXJzKTtcblxuICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uVHlwZS5TVEFNUDpcbiAgICAgICAgcmV0dXJuIG5ldyBTdGFtcEFubm90YXRpb25FbGVtZW50KHBhcmFtZXRlcnMpO1xuXG4gICAgICBjYXNlIF91dGlsLkFubm90YXRpb25UeXBlLkZJTEVBVFRBQ0hNRU5UOlxuICAgICAgICByZXR1cm4gbmV3IEZpbGVBdHRhY2htZW50QW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBuZXcgQW5ub3RhdGlvbkVsZW1lbnQocGFyYW1ldGVycyk7XG4gICAgfVxuICB9XG5cbn1cblxuY2xhc3MgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzLCB7XG4gICAgaXNSZW5kZXJhYmxlID0gZmFsc2UsXG4gICAgaWdub3JlQm9yZGVyID0gZmFsc2UsXG4gICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHMgPSBmYWxzZVxuICB9ID0ge30pIHtcbiAgICB0aGlzLmlzUmVuZGVyYWJsZSA9IGlzUmVuZGVyYWJsZTtcbiAgICB0aGlzLmRhdGEgPSBwYXJhbWV0ZXJzLmRhdGE7XG4gICAgdGhpcy5sYXllciA9IHBhcmFtZXRlcnMubGF5ZXI7XG4gICAgdGhpcy5wYWdlID0gcGFyYW1ldGVycy5wYWdlO1xuICAgIHRoaXMudmlld3BvcnQgPSBwYXJhbWV0ZXJzLnZpZXdwb3J0O1xuICAgIHRoaXMubGlua1NlcnZpY2UgPSBwYXJhbWV0ZXJzLmxpbmtTZXJ2aWNlO1xuICAgIHRoaXMuZG93bmxvYWRNYW5hZ2VyID0gcGFyYW1ldGVycy5kb3dubG9hZE1hbmFnZXI7XG4gICAgdGhpcy5pbWFnZVJlc291cmNlc1BhdGggPSBwYXJhbWV0ZXJzLmltYWdlUmVzb3VyY2VzUGF0aDtcbiAgICB0aGlzLnJlbmRlckZvcm1zID0gcGFyYW1ldGVycy5yZW5kZXJGb3JtcztcbiAgICB0aGlzLnN2Z0ZhY3RvcnkgPSBwYXJhbWV0ZXJzLnN2Z0ZhY3Rvcnk7XG4gICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZSA9IHBhcmFtZXRlcnMuYW5ub3RhdGlvblN0b3JhZ2U7XG4gICAgdGhpcy5lbmFibGVTY3JpcHRpbmcgPSBwYXJhbWV0ZXJzLmVuYWJsZVNjcmlwdGluZztcbiAgICB0aGlzLmhhc0pTQWN0aW9ucyA9IHBhcmFtZXRlcnMuaGFzSlNBY3Rpb25zO1xuICAgIHRoaXMuX2ZpZWxkT2JqZWN0cyA9IHBhcmFtZXRlcnMuZmllbGRPYmplY3RzO1xuICAgIHRoaXMuX21vdXNlU3RhdGUgPSBwYXJhbWV0ZXJzLm1vdXNlU3RhdGU7XG5cbiAgICBpZiAoaXNSZW5kZXJhYmxlKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuX2NyZWF0ZUNvbnRhaW5lcihpZ25vcmVCb3JkZXIpO1xuICAgIH1cblxuICAgIGlmIChjcmVhdGVRdWFkcmlsYXRlcmFscykge1xuICAgICAgdGhpcy5xdWFkcmlsYXRlcmFscyA9IHRoaXMuX2NyZWF0ZVF1YWRyaWxhdGVyYWxzKGlnbm9yZUJvcmRlcik7XG4gICAgfVxuICB9XG5cbiAgX2NyZWF0ZUNvbnRhaW5lcihpZ25vcmVCb3JkZXIgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGEsXG4gICAgICAgICAgcGFnZSA9IHRoaXMucGFnZSxcbiAgICAgICAgICB2aWV3cG9ydCA9IHRoaXMudmlld3BvcnQ7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XG4gICAgbGV0IHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0XG4gICAgfSA9IGdldFJlY3REaW1zKGRhdGEucmVjdCk7XG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtYW5ub3RhdGlvbi1pZFwiLCBkYXRhLmlkKTtcblxuICAgIGNvbnN0IHJlY3QgPSBfdXRpbC5VdGlsLm5vcm1hbGl6ZVJlY3QoW2RhdGEucmVjdFswXSwgcGFnZS52aWV3WzNdIC0gZGF0YS5yZWN0WzFdICsgcGFnZS52aWV3WzFdLCBkYXRhLnJlY3RbMl0sIHBhZ2Uudmlld1szXSAtIGRhdGEucmVjdFszXSArIHBhZ2Uudmlld1sxXV0pO1xuXG4gICAgaWYgKGRhdGEuaGFzT3duQ2FudmFzKSB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSB2aWV3cG9ydC50cmFuc2Zvcm0uc2xpY2UoKTtcblxuICAgICAgY29uc3QgW3NjYWxlWCwgc2NhbGVZXSA9IF91dGlsLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodHJhbnNmb3JtKTtcblxuICAgICAgd2lkdGggPSBNYXRoLmNlaWwod2lkdGggKiBzY2FsZVgpO1xuICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCAqIHNjYWxlWSk7XG4gICAgICByZWN0WzBdICo9IHNjYWxlWDtcbiAgICAgIHJlY3RbMV0gKj0gc2NhbGVZO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICB0cmFuc2Zvcm1baV0gPSBNYXRoLnNpZ24odHJhbnNmb3JtW2ldKTtcbiAgICAgIH1cblxuICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGBtYXRyaXgoJHt0cmFuc2Zvcm0uam9pbihcIixcIil9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSBgbWF0cml4KCR7dmlld3BvcnQudHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgIH1cblxuICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBgJHstcmVjdFswXX1weCAkey1yZWN0WzFdfXB4YDtcblxuICAgIGlmICghaWdub3JlQm9yZGVyICYmIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggPiAwKSB7XG4gICAgICBjb250YWluZXIuc3R5bGUuYm9yZGVyV2lkdGggPSBgJHtkYXRhLmJvcmRlclN0eWxlLndpZHRofXB4YDtcblxuICAgICAgaWYgKGRhdGEuYm9yZGVyU3R5bGUuc3R5bGUgIT09IF91dGlsLkFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuVU5ERVJMSU5FKSB7XG4gICAgICAgIHdpZHRoIC09IDIgKiBkYXRhLmJvcmRlclN0eWxlLndpZHRoO1xuICAgICAgICBoZWlnaHQgLT0gMiAqIGRhdGEuYm9yZGVyU3R5bGUud2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhvcml6b250YWxSYWRpdXMgPSBkYXRhLmJvcmRlclN0eWxlLmhvcml6b250YWxDb3JuZXJSYWRpdXM7XG4gICAgICBjb25zdCB2ZXJ0aWNhbFJhZGl1cyA9IGRhdGEuYm9yZGVyU3R5bGUudmVydGljYWxDb3JuZXJSYWRpdXM7XG5cbiAgICAgIGlmIChob3Jpem9udGFsUmFkaXVzID4gMCB8fCB2ZXJ0aWNhbFJhZGl1cyA+IDApIHtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gYCR7aG9yaXpvbnRhbFJhZGl1c31weCAvICR7dmVydGljYWxSYWRpdXN9cHhgO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gcmFkaXVzO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGRhdGEuYm9yZGVyU3R5bGUuc3R5bGUpIHtcbiAgICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLlNPTElEOlxuICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJTdHlsZSA9IFwic29saWRcIjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIF91dGlsLkFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuREFTSEVEOlxuICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJTdHlsZSA9IFwiZGFzaGVkXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLkJFVkVMRUQ6XG4gICAgICAgICAgKDAsIF91dGlsLndhcm4pKFwiVW5pbXBsZW1lbnRlZCBib3JkZXIgc3R5bGU6IGJldmVsZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBfdXRpbC5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLklOU0VUOlxuICAgICAgICAgICgwLCBfdXRpbC53YXJuKShcIlVuaW1wbGVtZW50ZWQgYm9yZGVyIHN0eWxlOiBpbnNldFwiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIF91dGlsLkFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuVU5ERVJMSU5FOlxuICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b21TdHlsZSA9IFwic29saWRcIjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBib3JkZXJDb2xvciA9IGRhdGEuYm9yZGVyQ29sb3IgfHwgZGF0YS5jb2xvciB8fCBudWxsO1xuXG4gICAgICBpZiAoYm9yZGVyQ29sb3IpIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvcmRlckNvbG9yID0gX3V0aWwuVXRpbC5tYWtlSGV4Q29sb3IoZGF0YS5jb2xvclswXSB8IDAsIGRhdGEuY29sb3JbMV0gfCAwLCBkYXRhLmNvbG9yWzJdIHwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYm9yZGVyV2lkdGggPSAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gYCR7cmVjdFswXX1weGA7XG4gICAgY29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3JlY3RbMV19cHhgO1xuXG4gICAgaWYgKGRhdGEuaGFzT3duQ2FudmFzKSB7XG4gICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICBnZXQgX2NvbW1vbkFjdGlvbnMoKSB7XG4gICAgY29uc3Qgc2V0Q29sb3IgPSAoanNOYW1lLCBzdHlsZU5hbWUsIGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjb2xvciA9IGV2ZW50LmRldGFpbFtqc05hbWVdO1xuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlW3N0eWxlTmFtZV0gPSBfc2NyaXB0aW5nX3V0aWxzLkNvbG9yQ29udmVydGVyc1tgJHtjb2xvclswXX1fSFRNTGBdKGNvbG9yLnNsaWNlKDEpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuICgwLCBfdXRpbC5zaGFkb3cpKHRoaXMsIFwiX2NvbW1vbkFjdGlvbnNcIiwge1xuICAgICAgZGlzcGxheTogZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBoaWRkZW4gPSBldmVudC5kZXRhaWwuZGlzcGxheSAlIDIgPT09IDE7XG4gICAgICAgIGV2ZW50LnRhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gaGlkZGVuID8gXCJoaWRkZW5cIiA6IFwidmlzaWJsZVwiO1xuICAgICAgICB0aGlzLmFubm90YXRpb25TdG9yYWdlLnNldFZhbHVlKHRoaXMuZGF0YS5pZCwge1xuICAgICAgICAgIGhpZGRlbixcbiAgICAgICAgICBwcmludDogZXZlbnQuZGV0YWlsLmRpc3BsYXkgPT09IDAgfHwgZXZlbnQuZGV0YWlsLmRpc3BsYXkgPT09IDNcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcHJpbnQ6IGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZSh0aGlzLmRhdGEuaWQsIHtcbiAgICAgICAgICBwcmludDogZXZlbnQuZGV0YWlsLnByaW50XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhpZGRlbjogZXZlbnQgPT4ge1xuICAgICAgICBldmVudC50YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9IGV2ZW50LmRldGFpbC5oaWRkZW4gPyBcImhpZGRlblwiIDogXCJ2aXNpYmxlXCI7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2V0VmFsdWUodGhpcy5kYXRhLmlkLCB7XG4gICAgICAgICAgaGlkZGVuOiBldmVudC5kZXRhaWwuaGlkZGVuXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGZvY3VzOiBldmVudCA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZXZlbnQudGFyZ2V0LmZvY3VzKHtcbiAgICAgICAgICBwcmV2ZW50U2Nyb2xsOiBmYWxzZVxuICAgICAgICB9KSwgMCk7XG4gICAgICB9LFxuICAgICAgdXNlck5hbWU6IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnRpdGxlID0gZXZlbnQuZGV0YWlsLnVzZXJOYW1lO1xuICAgICAgfSxcbiAgICAgIHJlYWRvbmx5OiBldmVudCA9PiB7XG4gICAgICAgIGlmIChldmVudC5kZXRhaWwucmVhZG9ubHkpIHtcbiAgICAgICAgICBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmRldGFpbC5yZXF1aXJlZCkge1xuICAgICAgICAgIGV2ZW50LnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBldmVudC50YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwicmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBiZ0NvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiYmdDb2xvclwiLCBcImJhY2tncm91bmRDb2xvclwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgZmlsbENvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiZmlsbENvbG9yXCIsIFwiYmFja2dyb3VuZENvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBmZ0NvbG9yOiBldmVudCA9PiB7XG4gICAgICAgIHNldENvbG9yKFwiZmdDb2xvclwiLCBcImNvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICB0ZXh0Q29sb3I6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0Q29sb3IoXCJ0ZXh0Q29sb3JcIiwgXCJjb2xvclwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgYm9yZGVyQ29sb3I6IGV2ZW50ID0+IHtcbiAgICAgICAgc2V0Q29sb3IoXCJib3JkZXJDb2xvclwiLCBcImJvcmRlckNvbG9yXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBzdHJva2VDb2xvcjogZXZlbnQgPT4ge1xuICAgICAgICBzZXRDb2xvcihcInN0cm9rZUNvbG9yXCIsIFwiYm9yZGVyQ29sb3JcIiwgZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveChhY3Rpb25zLCBqc0V2ZW50KSB7XG4gICAgY29uc3QgY29tbW9uQWN0aW9ucyA9IHRoaXMuX2NvbW1vbkFjdGlvbnM7XG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoanNFdmVudC5kZXRhaWwpKSB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBhY3Rpb25zW25hbWVdIHx8IGNvbW1vbkFjdGlvbnNbbmFtZV07XG5cbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgYWN0aW9uKGpzRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhlbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZVNjcmlwdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3JlZERhdGEgPSB0aGlzLmFubm90YXRpb25TdG9yYWdlLmdldFJhd1ZhbHVlKHRoaXMuZGF0YS5pZCk7XG5cbiAgICBpZiAoIXN0b3JlZERhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb21tb25BY3Rpb25zID0gdGhpcy5fY29tbW9uQWN0aW9ucztcblxuICAgIGZvciAoY29uc3QgW2FjdGlvbk5hbWUsIGRldGFpbF0gb2YgT2JqZWN0LmVudHJpZXMoc3RvcmVkRGF0YSkpIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IGNvbW1vbkFjdGlvbnNbYWN0aW9uTmFtZV07XG5cbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgYWN0aW9uKHtcbiAgICAgICAgICBkZXRhaWwsXG4gICAgICAgICAgdGFyZ2V0OiBlbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGUgc3RvcmVkRGF0YVthY3Rpb25OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfY3JlYXRlUXVhZHJpbGF0ZXJhbHMoaWdub3JlQm9yZGVyID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5xdWFkUG9pbnRzKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBxdWFkcmlsYXRlcmFscyA9IFtdO1xuICAgIGNvbnN0IHNhdmVkUmVjdCA9IHRoaXMuZGF0YS5yZWN0O1xuXG4gICAgZm9yIChjb25zdCBxdWFkUG9pbnQgb2YgdGhpcy5kYXRhLnF1YWRQb2ludHMpIHtcbiAgICAgIHRoaXMuZGF0YS5yZWN0ID0gW3F1YWRQb2ludFsyXS54LCBxdWFkUG9pbnRbMl0ueSwgcXVhZFBvaW50WzFdLngsIHF1YWRQb2ludFsxXS55XTtcbiAgICAgIHF1YWRyaWxhdGVyYWxzLnB1c2godGhpcy5fY3JlYXRlQ29udGFpbmVyKGlnbm9yZUJvcmRlcikpO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YS5yZWN0ID0gc2F2ZWRSZWN0O1xuICAgIHJldHVybiBxdWFkcmlsYXRlcmFscztcbiAgfVxuXG4gIF9jcmVhdGVQb3B1cCh0cmlnZ2VyLCBkYXRhKSB7XG4gICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuXG4gICAgaWYgKHRoaXMucXVhZHJpbGF0ZXJhbHMpIHtcbiAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyIHx8IHRoaXMucXVhZHJpbGF0ZXJhbHM7XG4gICAgICBjb250YWluZXIgPSB0aGlzLnF1YWRyaWxhdGVyYWxzWzBdO1xuICAgIH1cblxuICAgIGlmICghdHJpZ2dlcikge1xuICAgICAgdHJpZ2dlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB0cmlnZ2VyLnN0eWxlLmhlaWdodCA9IGNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgICB0cmlnZ2VyLnN0eWxlLndpZHRoID0gY29udGFpbmVyLnN0eWxlLndpZHRoO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRyaWdnZXIpO1xuICAgIH1cblxuICAgIGNvbnN0IHBvcHVwRWxlbWVudCA9IG5ldyBQb3B1cEVsZW1lbnQoe1xuICAgICAgY29udGFpbmVyLFxuICAgICAgdHJpZ2dlcixcbiAgICAgIGNvbG9yOiBkYXRhLmNvbG9yLFxuICAgICAgdGl0bGVPYmo6IGRhdGEudGl0bGVPYmosXG4gICAgICBtb2RpZmljYXRpb25EYXRlOiBkYXRhLm1vZGlmaWNhdGlvbkRhdGUsXG4gICAgICBjb250ZW50c09iajogZGF0YS5jb250ZW50c09iaixcbiAgICAgIHJpY2hUZXh0OiBkYXRhLnJpY2hUZXh0LFxuICAgICAgaGlkZVdyYXBwZXI6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBwb3B1cCA9IHBvcHVwRWxlbWVudC5yZW5kZXIoKTtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gY29udGFpbmVyLnN0eWxlLndpZHRoO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwb3B1cCk7XG4gIH1cblxuICBfcmVuZGVyUXVhZHJpbGF0ZXJhbHMoY2xhc3NOYW1lKSB7XG4gICAgZm9yIChjb25zdCBxdWFkcmlsYXRlcmFsIG9mIHRoaXMucXVhZHJpbGF0ZXJhbHMpIHtcbiAgICAgIHF1YWRyaWxhdGVyYWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnF1YWRyaWxhdGVyYWxzO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgICgwLCBfdXRpbC51bnJlYWNoYWJsZSkoXCJBYnN0cmFjdCBtZXRob2QgYEFubm90YXRpb25FbGVtZW50LnJlbmRlcmAgY2FsbGVkXCIpO1xuICB9XG5cbiAgX2dldEVsZW1lbnRzQnlOYW1lKG5hbWUsIHNraXBJZCA9IG51bGwpIHtcbiAgICBjb25zdCBmaWVsZHMgPSBbXTtcblxuICAgIGlmICh0aGlzLl9maWVsZE9iamVjdHMpIHtcbiAgICAgIGNvbnN0IGZpZWxkT2JqID0gdGhpcy5fZmllbGRPYmplY3RzW25hbWVdO1xuXG4gICAgICBpZiAoZmllbGRPYmopIHtcbiAgICAgICAgZm9yIChjb25zdCB7XG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBleHBvcnRWYWx1ZXNcbiAgICAgICAgfSBvZiBmaWVsZE9iaikge1xuICAgICAgICAgIGlmIChwYWdlID09PSAtMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlkID09PSBza2lwSWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGV4cG9ydFZhbHVlID0gdHlwZW9mIGV4cG9ydFZhbHVlcyA9PT0gXCJzdHJpbmdcIiA/IGV4cG9ydFZhbHVlcyA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZG9tRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgICAgICAgIGlmIChkb21FbGVtZW50ICYmICFHZXRFbGVtZW50c0J5TmFtZVNldC5oYXMoZG9tRWxlbWVudCkpIHtcbiAgICAgICAgICAgICgwLCBfdXRpbC53YXJuKShgX2dldEVsZW1lbnRzQnlOYW1lIC0gZWxlbWVudCBub3QgYWxsb3dlZDogJHtpZH1gKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgZXhwb3J0VmFsdWUsXG4gICAgICAgICAgICBkb21FbGVtZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZpZWxkcztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRvbUVsZW1lbnQgb2YgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUobmFtZSkpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaWQsXG4gICAgICAgIGV4cG9ydFZhbHVlXG4gICAgICB9ID0gZG9tRWxlbWVudDtcblxuICAgICAgaWYgKGlkID09PSBza2lwSWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghR2V0RWxlbWVudHNCeU5hbWVTZXQuaGFzKGRvbUVsZW1lbnQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmaWVsZHMucHVzaCh7XG4gICAgICAgIGlkLFxuICAgICAgICBleHBvcnRWYWx1ZSxcbiAgICAgICAgZG9tRWxlbWVudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpZWxkcztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcGxhdGZvcm0oKSB7XG4gICAgY29uc3QgcGxhdGZvcm0gPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiID8gbmF2aWdhdG9yLnBsYXRmb3JtIDogXCJcIjtcbiAgICByZXR1cm4gKDAsIF91dGlsLnNoYWRvdykodGhpcywgXCJwbGF0Zm9ybVwiLCB7XG4gICAgICBpc1dpbjogcGxhdGZvcm0uaW5jbHVkZXMoXCJXaW5cIiksXG4gICAgICBpc01hYzogcGxhdGZvcm0uaW5jbHVkZXMoXCJNYWNcIilcbiAgICB9KTtcbiAgfVxuXG59XG5cbmNsYXNzIExpbmtBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycywgb3B0aW9ucyA9IG51bGwpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShwYXJhbWV0ZXJzLmRhdGEudXJsIHx8IHBhcmFtZXRlcnMuZGF0YS5kZXN0IHx8IHBhcmFtZXRlcnMuZGF0YS5hY3Rpb24gfHwgcGFyYW1ldGVycy5kYXRhLmlzVG9vbHRpcE9ubHkgfHwgcGFyYW1ldGVycy5kYXRhLnJlc2V0Rm9ybSB8fCBwYXJhbWV0ZXJzLmRhdGEuYWN0aW9ucyAmJiAocGFyYW1ldGVycy5kYXRhLmFjdGlvbnMuQWN0aW9uIHx8IHBhcmFtZXRlcnMuZGF0YS5hY3Rpb25zW1wiTW91c2UgVXBcIl0gfHwgcGFyYW1ldGVycy5kYXRhLmFjdGlvbnNbXCJNb3VzZSBEb3duXCJdKSk7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiAhIW9wdGlvbnM/Lmlnbm9yZUJvcmRlcixcbiAgICAgIGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YSxcbiAgICAgIGxpbmtTZXJ2aWNlXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXG4gICAgaWYgKGRhdGEudXJsKSB7XG4gICAgICBsaW5rU2VydmljZS5hZGRMaW5rQXR0cmlidXRlcyhsaW5rLCBkYXRhLnVybCwgZGF0YS5uZXdXaW5kb3cpO1xuICAgIH0gZWxzZSBpZiAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIHRoaXMuX2JpbmROYW1lZEFjdGlvbihsaW5rLCBkYXRhLmFjdGlvbik7XG4gICAgfSBlbHNlIGlmIChkYXRhLmRlc3QpIHtcbiAgICAgIHRoaXMuX2JpbmRMaW5rKGxpbmssIGRhdGEuZGVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBoYXNDbGlja0FjdGlvbiA9IGZhbHNlO1xuXG4gICAgICBpZiAoZGF0YS5hY3Rpb25zICYmIChkYXRhLmFjdGlvbnMuQWN0aW9uIHx8IGRhdGEuYWN0aW9uc1tcIk1vdXNlIFVwXCJdIHx8IGRhdGEuYWN0aW9uc1tcIk1vdXNlIERvd25cIl0pICYmIHRoaXMuZW5hYmxlU2NyaXB0aW5nICYmIHRoaXMuaGFzSlNBY3Rpb25zKSB7XG4gICAgICAgIGhhc0NsaWNrQWN0aW9uID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9iaW5kSlNBY3Rpb24obGluaywgZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLnJlc2V0Rm9ybSkge1xuICAgICAgICB0aGlzLl9iaW5kUmVzZXRGb3JtQWN0aW9uKGxpbmssIGRhdGEucmVzZXRGb3JtKTtcbiAgICAgIH0gZWxzZSBpZiAoIWhhc0NsaWNrQWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX2JpbmRMaW5rKGxpbmssIFwiXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnF1YWRyaWxhdGVyYWxzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyUXVhZHJpbGF0ZXJhbHMoXCJsaW5rQW5ub3RhdGlvblwiKS5tYXAoKHF1YWRyaWxhdGVyYWwsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gaW5kZXggPT09IDAgPyBsaW5rIDogbGluay5jbG9uZU5vZGUoKTtcbiAgICAgICAgcXVhZHJpbGF0ZXJhbC5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XG4gICAgICAgIHJldHVybiBxdWFkcmlsYXRlcmFsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJsaW5rQW5ub3RhdGlvblwiO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGxpbmspO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIF9iaW5kTGluayhsaW5rLCBkZXN0aW5hdGlvbikge1xuICAgIGxpbmsuaHJlZiA9IHRoaXMubGlua1NlcnZpY2UuZ2V0RGVzdGluYXRpb25IYXNoKGRlc3RpbmF0aW9uKTtcblxuICAgIGxpbmsub25jbGljayA9ICgpID0+IHtcbiAgICAgIGlmIChkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmdvVG9EZXN0aW5hdGlvbihkZXN0aW5hdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGRlc3RpbmF0aW9uIHx8IGRlc3RpbmF0aW9uID09PSBcIlwiKSB7XG4gICAgICBsaW5rLmNsYXNzTmFtZSA9IFwiaW50ZXJuYWxMaW5rXCI7XG4gICAgfVxuICB9XG5cbiAgX2JpbmROYW1lZEFjdGlvbihsaW5rLCBhY3Rpb24pIHtcbiAgICBsaW5rLmhyZWYgPSB0aGlzLmxpbmtTZXJ2aWNlLmdldEFuY2hvclVybChcIlwiKTtcblxuICAgIGxpbmsub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMubGlua1NlcnZpY2UuZXhlY3V0ZU5hbWVkQWN0aW9uKGFjdGlvbik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGxpbmsuY2xhc3NOYW1lID0gXCJpbnRlcm5hbExpbmtcIjtcbiAgfVxuXG4gIF9iaW5kSlNBY3Rpb24obGluaywgZGF0YSkge1xuICAgIGxpbmsuaHJlZiA9IHRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKFwiXCIpO1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoW1tcIkFjdGlvblwiLCBcIm9uY2xpY2tcIl0sIFtcIk1vdXNlIFVwXCIsIFwib25tb3VzZXVwXCJdLCBbXCJNb3VzZSBEb3duXCIsIFwib25tb3VzZWRvd25cIl1dKTtcblxuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhkYXRhLmFjdGlvbnMpKSB7XG4gICAgICBjb25zdCBqc05hbWUgPSBtYXAuZ2V0KG5hbWUpO1xuXG4gICAgICBpZiAoIWpzTmFtZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGlua1tqc05hbWVdID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCFsaW5rLm9uY2xpY2spIHtcbiAgICAgIGxpbmsub25jbGljayA9ICgpID0+IGZhbHNlO1xuICAgIH1cblxuICAgIGxpbmsuY2xhc3NOYW1lID0gXCJpbnRlcm5hbExpbmtcIjtcbiAgfVxuXG4gIF9iaW5kUmVzZXRGb3JtQWN0aW9uKGxpbmssIHJlc2V0Rm9ybSkge1xuICAgIGNvbnN0IG90aGVyQ2xpY2tBY3Rpb24gPSBsaW5rLm9uY2xpY2s7XG5cbiAgICBpZiAoIW90aGVyQ2xpY2tBY3Rpb24pIHtcbiAgICAgIGxpbmsuaHJlZiA9IHRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKFwiXCIpO1xuICAgIH1cblxuICAgIGxpbmsuY2xhc3NOYW1lID0gXCJpbnRlcm5hbExpbmtcIjtcblxuICAgIGlmICghdGhpcy5fZmllbGRPYmplY3RzKSB7XG4gICAgICAoMCwgX3V0aWwud2FybikoYF9iaW5kUmVzZXRGb3JtQWN0aW9uIC0gXCJyZXNldEZvcm1cIiBhY3Rpb24gbm90IHN1cHBvcnRlZCwgYCArIFwiZW5zdXJlIHRoYXQgdGhlIGBmaWVsZE9iamVjdHNgIHBhcmFtZXRlciBpcyBwcm92aWRlZC5cIik7XG5cbiAgICAgIGlmICghb3RoZXJDbGlja0FjdGlvbikge1xuICAgICAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxpbmsub25jbGljayA9ICgpID0+IHtcbiAgICAgIGlmIChvdGhlckNsaWNrQWN0aW9uKSB7XG4gICAgICAgIG90aGVyQ2xpY2tBY3Rpb24oKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qge1xuICAgICAgICBmaWVsZHM6IHJlc2V0Rm9ybUZpZWxkcyxcbiAgICAgICAgcmVmczogcmVzZXRGb3JtUmVmcyxcbiAgICAgICAgaW5jbHVkZVxuICAgICAgfSA9IHJlc2V0Rm9ybTtcbiAgICAgIGNvbnN0IGFsbEZpZWxkcyA9IFtdO1xuXG4gICAgICBpZiAocmVzZXRGb3JtRmllbGRzLmxlbmd0aCAhPT0gMCB8fCByZXNldEZvcm1SZWZzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBjb25zdCBmaWVsZElkcyA9IG5ldyBTZXQocmVzZXRGb3JtUmVmcyk7XG5cbiAgICAgICAgZm9yIChjb25zdCBmaWVsZE5hbWUgb2YgcmVzZXRGb3JtRmllbGRzKSB7XG4gICAgICAgICAgY29uc3QgZmllbGRzID0gdGhpcy5fZmllbGRPYmplY3RzW2ZpZWxkTmFtZV0gfHwgW107XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgfSBvZiBmaWVsZHMpIHtcbiAgICAgICAgICAgIGZpZWxkSWRzLmFkZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBmaWVsZHMgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLl9maWVsZE9iamVjdHMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpIHtcbiAgICAgICAgICAgIGlmIChmaWVsZElkcy5oYXMoZmllbGQuaWQpID09PSBpbmNsdWRlKSB7XG4gICAgICAgICAgICAgIGFsbEZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGRzIG9mIE9iamVjdC52YWx1ZXModGhpcy5fZmllbGRPYmplY3RzKSkge1xuICAgICAgICAgIGFsbEZpZWxkcy5wdXNoKC4uLmZpZWxkcyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2U7XG4gICAgICBjb25zdCBhbGxJZHMgPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBhbGxGaWVsZHMpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0gPSBmaWVsZDtcbiAgICAgICAgYWxsSWRzLnB1c2goaWQpO1xuXG4gICAgICAgIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQuZGVmYXVsdFZhbHVlIHx8IFwiXCI7XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICBjYXNlIFwicmFkaW9idXR0b25cIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWVsZC5kZWZhdWx0VmFsdWUgPT09IGZpZWxkLmV4cG9ydFZhbHVlcztcbiAgICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgXCJjb21ib2JveFwiOlxuICAgICAgICAgIGNhc2UgXCJsaXN0Ym94XCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQuZGVmYXVsdFZhbHVlIHx8IFwiXCI7XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkb21FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuXG4gICAgICAgIGlmICghZG9tRWxlbWVudCB8fCAhR2V0RWxlbWVudHNCeU5hbWVTZXQuaGFzKGRvbUVsZW1lbnQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBkb21FbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicmVzZXRmb3JtXCIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZW5hYmxlU2NyaXB0aW5nKSB7XG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgaWQ6IFwiYXBwXCIsXG4gICAgICAgICAgICBpZHM6IGFsbElkcyxcbiAgICAgICAgICAgIG5hbWU6IFwiUmVzZXRGb3JtXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgfVxuXG59XG5cbmNsYXNzIFRleHRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fCBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJ0ZXh0QW5ub3RhdGlvblwiO1xuICAgIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBpbWFnZS5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgaW1hZ2Uuc3R5bGUud2lkdGggPSB0aGlzLmNvbnRhaW5lci5zdHlsZS53aWR0aDtcbiAgICBpbWFnZS5zcmMgPSB0aGlzLmltYWdlUmVzb3VyY2VzUGF0aCArIFwiYW5ub3RhdGlvbi1cIiArIHRoaXMuZGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkgKyBcIi5zdmdcIjtcbiAgICBpbWFnZS5hbHQgPSBcIlt7e3R5cGV9fSBBbm5vdGF0aW9uXVwiO1xuICAgIGltYWdlLmRhdGFzZXQubDEwbklkID0gXCJ0ZXh0X2Fubm90YXRpb25fdHlwZVwiO1xuICAgIGltYWdlLmRhdGFzZXQubDEwbkFyZ3MgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICB0eXBlOiB0aGlzLmRhdGEubmFtZVxuICAgIH0pO1xuXG4gICAgaWYgKCF0aGlzLmRhdGEuaGFzUG9wdXApIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKGltYWdlLCB0aGlzLmRhdGEpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGltYWdlKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYWx0ZXJuYXRpdmVUZXh0KSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci50aXRsZSA9IHRoaXMuZGF0YS5hbHRlcm5hdGl2ZVRleHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbiAgX2dldEtleU1vZGlmaWVyKGV2ZW50KSB7XG4gICAgY29uc3Qge1xuICAgICAgaXNXaW4sXG4gICAgICBpc01hY1xuICAgIH0gPSBBbm5vdGF0aW9uRWxlbWVudC5wbGF0Zm9ybTtcbiAgICByZXR1cm4gaXNXaW4gJiYgZXZlbnQuY3RybEtleSB8fCBpc01hYyAmJiBldmVudC5tZXRhS2V5O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgYmFzZU5hbWUsIGV2ZW50TmFtZSwgdmFsdWVHZXR0ZXIpIHtcbiAgICBpZiAoYmFzZU5hbWUuaW5jbHVkZXMoXCJtb3VzZVwiKSkge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGJhc2VOYW1lLCBldmVudCA9PiB7XG4gICAgICAgIHRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgaWQ6IHRoaXMuZGF0YS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZUdldHRlcihldmVudCksXG4gICAgICAgICAgICBzaGlmdDogZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5fZ2V0S2V5TW9kaWZpZXIoZXZlbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoYmFzZU5hbWUsIGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBpZDogdGhpcy5kYXRhLmlkLFxuICAgICAgICAgICAgbmFtZTogZXZlbnROYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlR2V0dGVyKGV2ZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZWxlbWVudCwgbmFtZXMsIGdldHRlcikge1xuICAgIGZvciAoY29uc3QgW2Jhc2VOYW1lLCBldmVudE5hbWVdIG9mIG5hbWVzKSB7XG4gICAgICBpZiAoZXZlbnROYW1lID09PSBcIkFjdGlvblwiIHx8IHRoaXMuZGF0YS5hY3Rpb25zPy5bZXZlbnROYW1lXSkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGJhc2VOYW1lLCBldmVudE5hbWUsIGdldHRlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3NldEJhY2tncm91bmRDb2xvcihlbGVtZW50KSB7XG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmRhdGEuYmFja2dyb3VuZENvbG9yIHx8IG51bGw7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA9PT0gbnVsbCA/IFwidHJhbnNwYXJlbnRcIiA6IF91dGlsLlV0aWwubWFrZUhleENvbG9yKGNvbG9yWzBdLCBjb2xvclsxXSwgY29sb3JbMl0pO1xuICB9XG5cbn1cblxuY2xhc3MgVGV4dFdpZGdldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gcGFyYW1ldGVycy5yZW5kZXJGb3JtcyB8fCAhcGFyYW1ldGVycy5kYXRhLmhhc0FwcGVhcmFuY2UgJiYgISFwYXJhbWV0ZXJzLmRhdGEuZmllbGRWYWx1ZTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGVcbiAgICB9KTtcbiAgfVxuXG4gIHNldFByb3BlcnR5T25TaWJsaW5ncyhiYXNlLCBrZXksIHZhbHVlLCBrZXlJblN0b3JhZ2UpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLl9nZXRFbGVtZW50c0J5TmFtZShiYXNlLm5hbWUsIGJhc2UuaWQpKSB7XG4gICAgICBpZiAoZWxlbWVudC5kb21FbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuZG9tRWxlbWVudFtrZXldID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoZWxlbWVudC5pZCwge1xuICAgICAgICBba2V5SW5TdG9yYWdlXTogdmFsdWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBjb25zdCBpZCA9IHRoaXMuZGF0YS5pZDtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInRleHRXaWRnZXRBbm5vdGF0aW9uXCI7XG4gICAgbGV0IGVsZW1lbnQgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucmVuZGVyRm9ybXMpIHtcbiAgICAgIGNvbnN0IHN0b3JlZERhdGEgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZmllbGRWYWx1ZVxuICAgICAgfSk7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IHN0b3JlZERhdGEuZm9ybWF0dGVkVmFsdWUgfHwgc3RvcmVkRGF0YS52YWx1ZSB8fCBcIlwiO1xuICAgICAgY29uc3QgZWxlbWVudERhdGEgPSB7XG4gICAgICAgIHVzZXJWYWx1ZTogbnVsbCxcbiAgICAgICAgZm9ybWF0dGVkVmFsdWU6IG51bGwsXG4gICAgICAgIHZhbHVlT25Gb2N1czogXCJcIlxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuZGF0YS5tdWx0aUxpbmUpIHtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgZWxlbWVudC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdGV4dENvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBHZXRFbGVtZW50c0J5TmFtZVNldC5hZGQoZWxlbWVudCk7XG4gICAgICBlbGVtZW50LmRpc2FibGVkID0gdGhpcy5kYXRhLnJlYWRPbmx5O1xuICAgICAgZWxlbWVudC5uYW1lID0gdGhpcy5kYXRhLmZpZWxkTmFtZTtcbiAgICAgIGVsZW1lbnQudGFiSW5kZXggPSBERUZBVUxUX1RBQl9JTkRFWDtcbiAgICAgIGVsZW1lbnREYXRhLnVzZXJWYWx1ZSA9IHRleHRDb250ZW50O1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBldmVudCA9PiB7XG4gICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5T25TaWJsaW5ncyhlbGVtZW50LCBcInZhbHVlXCIsIGV2ZW50LnRhcmdldC52YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRmb3JtXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gdGhpcy5kYXRhLmRlZmF1bHRGaWVsZFZhbHVlID8/IFwiXCI7XG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBlbGVtZW50RGF0YS51c2VyVmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIGVsZW1lbnREYXRhLmZvcm1hdHRlZFZhbHVlID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgYmx1ckxpc3RlbmVyID0gZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZm9ybWF0dGVkVmFsdWVcbiAgICAgICAgfSA9IGVsZW1lbnREYXRhO1xuXG4gICAgICAgIGlmIChmb3JtYXR0ZWRWYWx1ZSAhPT0gbnVsbCAmJiBmb3JtYXR0ZWRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZm9ybWF0dGVkVmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsTGVmdCA9IDA7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIGlmIChlbGVtZW50RGF0YS51c2VyVmFsdWUpIHtcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGVsZW1lbnREYXRhLnVzZXJWYWx1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtZW50RGF0YS52YWx1ZU9uRm9jdXMgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVmcm9tc2FuZGJveFwiLCBqc0V2ZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgICAgdmFsdWUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgZWxlbWVudERhdGEudXNlclZhbHVlID0gZXZlbnQuZGV0YWlsLnZhbHVlID8/IFwiXCI7XG4gICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudERhdGEudXNlclZhbHVlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGVsZW1lbnREYXRhLnVzZXJWYWx1ZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZVxuICAgICAgICAgICAgICB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAgICAgICBlbGVtZW50RGF0YS5mb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuXG4gICAgICAgICAgICAgIGlmIChmb3JtYXR0ZWRWYWx1ZSAhPT0gbnVsbCAmJiBmb3JtYXR0ZWRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGV2ZW50LnRhcmdldCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc2VsUmFuZ2UoZXZlbnQpIHtcbiAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKC4uLmV2ZW50LmRldGFpbC5zZWxSYW5nZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KGFjdGlvbnMsIGpzRXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudCA9PiB7XG4gICAgICAgICAgbGV0IGNvbW1pdEtleSA9IC0xO1xuXG4gICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgY29tbWl0S2V5ID0gMDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBjb21taXRLZXkgPSAyO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICAgICAgICBjb21taXRLZXkgPSAzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb21taXRLZXkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICB9ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgICAgaWYgKGVsZW1lbnREYXRhLnZhbHVlT25Gb2N1cyA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtZW50RGF0YS51c2VyVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICBuYW1lOiBcIktleXN0cm9rZVwiLFxuICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgd2lsbENvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgY29tbWl0S2V5LFxuICAgICAgICAgICAgICBzZWxTdGFydDogZXZlbnQudGFyZ2V0LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgICAgICBzZWxFbmQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IF9ibHVyTGlzdGVuZXIgPSBibHVyTGlzdGVuZXI7XG4gICAgICAgIGJsdXJMaXN0ZW5lciA9IG51bGw7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICBlbGVtZW50RGF0YS51c2VyVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAgIGlmICh0aGlzLl9tb3VzZVN0YXRlLmlzRG93biAmJiBlbGVtZW50RGF0YS52YWx1ZU9uRm9jdXMgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaChcImRpc3BhdGNoZXZlbnRpbnNhbmRib3hcIiwge1xuICAgICAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiS2V5c3Ryb2tlXCIsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgd2lsbENvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21taXRLZXk6IDEsXG4gICAgICAgICAgICAgICAgc2VsU3RhcnQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgICAgICAgICBzZWxFbmQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2JsdXJMaXN0ZW5lcihldmVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuYWN0aW9ucz8uS2V5c3Ryb2tlKSB7XG4gICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICB0YXJnZXRcbiAgICAgICAgICAgIH0gPSBldmVudDtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRcbiAgICAgICAgICAgIH0gPSB0YXJnZXQ7XG4gICAgICAgICAgICBsZXQgc2VsU3RhcnQgPSBzZWxlY3Rpb25TdGFydCxcbiAgICAgICAgICAgICAgICBzZWxFbmQgPSBzZWxlY3Rpb25FbmQ7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuaW5wdXRUeXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJkZWxldGVXb3JkQmFja3dhcmRcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHZhbHVlLnN1YnN0cmluZygwLCBzZWxlY3Rpb25TdGFydCkubWF0Y2goL1xcdypbXlxcd10qJC8pO1xuXG4gICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsU3RhcnQgLT0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZVdvcmRGb3J3YXJkXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB2YWx1ZS5zdWJzdHJpbmcoc2VsZWN0aW9uU3RhcnQpLm1hdGNoKC9eW15cXHddKlxcdyovKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbEVuZCArPSBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjYXNlIFwiZGVsZXRlQ29udGVudEJhY2t3YXJkXCI6XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSBzZWxlY3Rpb25FbmQpIHtcbiAgICAgICAgICAgICAgICAgIHNlbFN0YXJ0IC09IDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZUNvbnRlbnRGb3J3YXJkXCI6XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSBzZWxlY3Rpb25FbmQpIHtcbiAgICAgICAgICAgICAgICAgIHNlbEVuZCArPSAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIktleXN0cm9rZVwiLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogZGF0YSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHdpbGxDb21taXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlbFN0YXJ0LFxuICAgICAgICAgICAgICAgIHNlbEVuZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGVsZW1lbnQsIFtbXCJmb2N1c1wiLCBcIkZvY3VzXCJdLCBbXCJibHVyXCIsIFwiQmx1clwiXSwgW1wibW91c2Vkb3duXCIsIFwiTW91c2UgRG93blwiXSwgW1wibW91c2VlbnRlclwiLCBcIk1vdXNlIEVudGVyXCJdLCBbXCJtb3VzZWxlYXZlXCIsIFwiTW91c2UgRXhpdFwiXSwgW1wibW91c2V1cFwiLCBcIk1vdXNlIFVwXCJdXSwgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJsdXJMaXN0ZW5lcikge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGJsdXJMaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEubWF4TGVuICE9PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQubWF4TGVuZ3RoID0gdGhpcy5kYXRhLm1heExlbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5jb21iKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSB0aGlzLmRhdGEucmVjdFsyXSAtIHRoaXMuZGF0YS5yZWN0WzBdO1xuICAgICAgICBjb25zdCBjb21iV2lkdGggPSBmaWVsZFdpZHRoIC8gdGhpcy5kYXRhLm1heExlbjtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY29tYlwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gYGNhbGMoJHtjb21iV2lkdGh9cHggLSAxY2gpYDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5kYXRhLmZpZWxkVmFsdWU7XG4gICAgICBlbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xuICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJ0YWJsZS1jZWxsXCI7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0VGV4dFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMoZWxlbWVudCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICBfc2V0VGV4dFN0eWxlKGVsZW1lbnQpIHtcbiAgICBjb25zdCBURVhUX0FMSUdOTUVOVCA9IFtcImxlZnRcIiwgXCJjZW50ZXJcIiwgXCJyaWdodFwiXTtcbiAgICBjb25zdCB7XG4gICAgICBmb250U2l6ZSxcbiAgICAgIGZvbnRDb2xvclxuICAgIH0gPSB0aGlzLmRhdGEuZGVmYXVsdEFwcGVhcmFuY2VEYXRhO1xuICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudC5zdHlsZTtcblxuICAgIGlmIChmb250U2l6ZSkge1xuICAgICAgc3R5bGUuZm9udFNpemUgPSBgJHtmb250U2l6ZX1weGA7XG4gICAgfVxuXG4gICAgc3R5bGUuY29sb3IgPSBfdXRpbC5VdGlsLm1ha2VIZXhDb2xvcihmb250Q29sb3JbMF0sIGZvbnRDb2xvclsxXSwgZm9udENvbG9yWzJdKTtcblxuICAgIGlmICh0aGlzLmRhdGEudGV4dEFsaWdubWVudCAhPT0gbnVsbCkge1xuICAgICAgc3R5bGUudGV4dEFsaWduID0gVEVYVF9BTElHTk1FTlRbdGhpcy5kYXRhLnRleHRBbGlnbm1lbnRdO1xuICAgIH1cbiAgfVxuXG59XG5cbmNsYXNzIENoZWNrYm94V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGU6IHBhcmFtZXRlcnMucmVuZGVyRm9ybXNcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGlkID0gZGF0YS5pZDtcbiAgICBsZXQgdmFsdWUgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7XG4gICAgICB2YWx1ZTogZGF0YS5leHBvcnRWYWx1ZSA9PT0gZGF0YS5maWVsZFZhbHVlXG4gICAgfSkudmFsdWU7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlICE9PSBcIk9mZlwiO1xuICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICB2YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJidXR0b25XaWRnZXRBbm5vdGF0aW9uIGNoZWNrQm94XCI7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBHZXRFbGVtZW50c0J5TmFtZVNldC5hZGQoZWxlbWVudCk7XG4gICAgZWxlbWVudC5kaXNhYmxlZCA9IGRhdGEucmVhZE9ubHk7XG4gICAgZWxlbWVudC50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIGVsZW1lbnQubmFtZSA9IGRhdGEuZmllbGROYW1lO1xuXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJleHBvcnRWYWx1ZVwiLCBkYXRhLmV4cG9ydFZhbHVlKTtcbiAgICBlbGVtZW50LnRhYkluZGV4ID0gREVGQVVMVF9UQUJfSU5ERVg7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgY2hlY2tlZFxuICAgICAgfSA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiB0aGlzLl9nZXRFbGVtZW50c0J5TmFtZShuYW1lLCBpZCkpIHtcbiAgICAgICAgY29uc3QgY3VyQ2hlY2tlZCA9IGNoZWNrZWQgJiYgY2hlY2tib3guZXhwb3J0VmFsdWUgPT09IGRhdGEuZXhwb3J0VmFsdWU7XG5cbiAgICAgICAgaWYgKGNoZWNrYm94LmRvbUVsZW1lbnQpIHtcbiAgICAgICAgICBjaGVja2JveC5kb21FbGVtZW50LmNoZWNrZWQgPSBjdXJDaGVja2VkO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShjaGVja2JveC5pZCwge1xuICAgICAgICAgIHZhbHVlOiBjdXJDaGVja2VkXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgIHZhbHVlOiBjaGVja2VkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZGF0YS5kZWZhdWx0RmllbGRWYWx1ZSB8fCBcIk9mZlwiO1xuICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrZWQgPSBkZWZhdWx0VmFsdWUgPT09IGRhdGEuZXhwb3J0VmFsdWU7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5lbmFibGVTY3JpcHRpbmcgJiYgdGhpcy5oYXNKU0FjdGlvbnMpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGpzRXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAgIHZhbHVlKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQuY2hlY2tlZCA9IGV2ZW50LmRldGFpbC52YWx1ZSAhPT0gXCJPZmZcIjtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LnRhcmdldC5jaGVja2VkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goYWN0aW9ucywganNFdmVudCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZWxlbWVudCwgW1tcImNoYW5nZVwiLCBcIlZhbGlkYXRlXCJdLCBbXCJjaGFuZ2VcIiwgXCJBY3Rpb25cIl0sIFtcImZvY3VzXCIsIFwiRm9jdXNcIl0sIFtcImJsdXJcIiwgXCJCbHVyXCJdLCBbXCJtb3VzZWRvd25cIiwgXCJNb3VzZSBEb3duXCJdLCBbXCJtb3VzZWVudGVyXCIsIFwiTW91c2UgRW50ZXJcIl0sIFtcIm1vdXNlbGVhdmVcIiwgXCJNb3VzZSBFeGl0XCJdLCBbXCJtb3VzZXVwXCIsIFwiTW91c2UgVXBcIl1dLCBldmVudCA9PiBldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMoZWxlbWVudCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBSYWRpb0J1dHRvbldpZGdldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlOiBwYXJhbWV0ZXJzLnJlbmRlckZvcm1zXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJidXR0b25XaWRnZXRBbm5vdGF0aW9uIHJhZGlvQnV0dG9uXCI7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuYW5ub3RhdGlvblN0b3JhZ2U7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBpZCA9IGRhdGEuaWQ7XG4gICAgbGV0IHZhbHVlID0gc3RvcmFnZS5nZXRWYWx1ZShpZCwge1xuICAgICAgdmFsdWU6IGRhdGEuZmllbGRWYWx1ZSA9PT0gZGF0YS5idXR0b25WYWx1ZVxuICAgIH0pLnZhbHVlO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFsdWUgPSB2YWx1ZSAhPT0gZGF0YS5idXR0b25WYWx1ZTtcbiAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgR2V0RWxlbWVudHNCeU5hbWVTZXQuYWRkKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBkYXRhLnJlYWRPbmx5O1xuICAgIGVsZW1lbnQudHlwZSA9IFwicmFkaW9cIjtcbiAgICBlbGVtZW50Lm5hbWUgPSBkYXRhLmZpZWxkTmFtZTtcblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgIH1cblxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xuICAgIGVsZW1lbnQudGFiSW5kZXggPSBERUZBVUxUX1RBQl9JTkRFWDtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBuYW1lLFxuICAgICAgICBjaGVja2VkXG4gICAgICB9ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICBmb3IgKGNvbnN0IHJhZGlvIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKG5hbWUsIGlkKSkge1xuICAgICAgICBzdG9yYWdlLnNldFZhbHVlKHJhZGlvLmlkLCB7XG4gICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgIHZhbHVlOiBjaGVja2VkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldGZvcm1cIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZGF0YS5kZWZhdWx0RmllbGRWYWx1ZTtcbiAgICAgIGV2ZW50LnRhcmdldC5jaGVja2VkID0gZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGRlZmF1bHRWYWx1ZSA9PT0gZGF0YS5idXR0b25WYWx1ZTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmVuYWJsZVNjcmlwdGluZyAmJiB0aGlzLmhhc0pTQWN0aW9ucykge1xuICAgICAgY29uc3QgcGRmQnV0dG9uVmFsdWUgPSBkYXRhLmJ1dHRvblZhbHVlO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlZnJvbXNhbmRib3hcIiwganNFdmVudCA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGlvbnMgPSB7XG4gICAgICAgICAgdmFsdWU6IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBwZGZCdXR0b25WYWx1ZSA9PT0gZXZlbnQuZGV0YWlsLnZhbHVlO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJhZGlvIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKGV2ZW50LnRhcmdldC5uYW1lKSkge1xuICAgICAgICAgICAgICBjb25zdCBjdXJDaGVja2VkID0gY2hlY2tlZCAmJiByYWRpby5pZCA9PT0gaWQ7XG5cbiAgICAgICAgICAgICAgaWYgKHJhZGlvLmRvbUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByYWRpby5kb21FbGVtZW50LmNoZWNrZWQgPSBjdXJDaGVja2VkO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShyYWRpby5pZCwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBjdXJDaGVja2VkXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goYWN0aW9ucywganNFdmVudCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZWxlbWVudCwgW1tcImNoYW5nZVwiLCBcIlZhbGlkYXRlXCJdLCBbXCJjaGFuZ2VcIiwgXCJBY3Rpb25cIl0sIFtcImZvY3VzXCIsIFwiRm9jdXNcIl0sIFtcImJsdXJcIiwgXCJCbHVyXCJdLCBbXCJtb3VzZWRvd25cIiwgXCJNb3VzZSBEb3duXCJdLCBbXCJtb3VzZWVudGVyXCIsIFwiTW91c2UgRW50ZXJcIl0sIFtcIm1vdXNlbGVhdmVcIiwgXCJNb3VzZSBFeGl0XCJdLCBbXCJtb3VzZXVwXCIsIFwiTW91c2UgVXBcIl1dLCBldmVudCA9PiBldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0QmFja2dyb3VuZENvbG9yKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMoZWxlbWVudCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBQdXNoQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBMaW5rQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaWdub3JlQm9yZGVyOiBwYXJhbWV0ZXJzLmRhdGEuaGFzQXBwZWFyYW5jZVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlcigpO1xuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcImJ1dHRvbldpZGdldEFubm90YXRpb24gcHVzaEJ1dHRvblwiO1xuXG4gICAgaWYgKHRoaXMuZGF0YS5hbHRlcm5hdGl2ZVRleHQpIHtcbiAgICAgIGNvbnRhaW5lci50aXRsZSA9IHRoaXMuZGF0YS5hbHRlcm5hdGl2ZVRleHQ7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMoY29udGFpbmVyKTtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBDaG9pY2VXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZTogcGFyYW1ldGVycy5yZW5kZXJGb3Jtc1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2hvaWNlV2lkZ2V0QW5ub3RhdGlvblwiO1xuICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmFubm90YXRpb25TdG9yYWdlO1xuICAgIGNvbnN0IGlkID0gdGhpcy5kYXRhLmlkO1xuICAgIGNvbnN0IHN0b3JlZERhdGEgPSBzdG9yYWdlLmdldFZhbHVlKGlkLCB7XG4gICAgICB2YWx1ZTogdGhpcy5kYXRhLmZpZWxkVmFsdWVcbiAgICB9KTtcbiAgICBsZXQge1xuICAgICAgZm9udFNpemVcbiAgICB9ID0gdGhpcy5kYXRhLmRlZmF1bHRBcHBlYXJhbmNlRGF0YTtcblxuICAgIGlmICghZm9udFNpemUpIHtcbiAgICAgIGZvbnRTaXplID0gOTtcbiAgICB9XG5cbiAgICBjb25zdCBmb250U2l6ZVN0eWxlID0gYGNhbGMoJHtmb250U2l6ZX1weCAqIHZhcigtLXpvb20tZmFjdG9yKSlgO1xuICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICAgIEdldEVsZW1lbnRzQnlOYW1lU2V0LmFkZChzZWxlY3RFbGVtZW50KTtcbiAgICBzZWxlY3RFbGVtZW50LmRpc2FibGVkID0gdGhpcy5kYXRhLnJlYWRPbmx5O1xuICAgIHNlbGVjdEVsZW1lbnQubmFtZSA9IHRoaXMuZGF0YS5maWVsZE5hbWU7XG4gICAgc2VsZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgc2VsZWN0RWxlbWVudC50YWJJbmRleCA9IERFRkFVTFRfVEFCX0lOREVYO1xuICAgIHNlbGVjdEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBgJHtmb250U2l6ZX1weGA7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5jb21ibykge1xuICAgICAgc2VsZWN0RWxlbWVudC5zaXplID0gdGhpcy5kYXRhLm9wdGlvbnMubGVuZ3RoO1xuXG4gICAgICBpZiAodGhpcy5kYXRhLm11bHRpU2VsZWN0KSB7XG4gICAgICAgIHNlbGVjdEVsZW1lbnQubXVsdGlwbGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0Zm9ybVwiLCBldmVudCA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSB0aGlzLmRhdGEuZGVmYXVsdEZpZWxkVmFsdWU7XG5cbiAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHNlbGVjdEVsZW1lbnQub3B0aW9ucykge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBvcHRpb24udmFsdWUgPT09IGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMuZGF0YS5vcHRpb25zKSB7XG4gICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBvcHRpb24uZGlzcGxheVZhbHVlO1xuICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IG9wdGlvbi5leHBvcnRWYWx1ZTtcblxuICAgICAgaWYgKHRoaXMuZGF0YS5jb21ibykge1xuICAgICAgICBvcHRpb25FbGVtZW50LnN0eWxlLmZvbnRTaXplID0gZm9udFNpemVTdHlsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0b3JlZERhdGEudmFsdWUuaW5jbHVkZXMob3B0aW9uLmV4cG9ydFZhbHVlKSkge1xuICAgICAgICBvcHRpb25FbGVtZW50LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICAgIH1cblxuICAgIGNvbnN0IGdldFZhbHVlID0gKGV2ZW50LCBpc0V4cG9ydCkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGlzRXhwb3J0ID8gXCJ2YWx1ZVwiIDogXCJ0ZXh0Q29udGVudFwiO1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IGV2ZW50LnRhcmdldC5vcHRpb25zO1xuXG4gICAgICBpZiAoIWV2ZW50LnRhcmdldC5tdWx0aXBsZSkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5zZWxlY3RlZEluZGV4ID09PSAtMSA/IG51bGwgOiBvcHRpb25zW29wdGlvbnMuc2VsZWN0ZWRJbmRleF1bbmFtZV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwob3B0aW9ucywgb3B0aW9uID0+IG9wdGlvbi5zZWxlY3RlZCkubWFwKG9wdGlvbiA9PiBvcHRpb25bbmFtZV0pO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRJdGVtcyA9IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBldmVudC50YXJnZXQub3B0aW9ucztcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwob3B0aW9ucywgb3B0aW9uID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaXNwbGF5VmFsdWU6IG9wdGlvbi50ZXh0Q29udGVudCxcbiAgICAgICAgICBleHBvcnRWYWx1ZTogb3B0aW9uLnZhbHVlXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuZW5hYmxlU2NyaXB0aW5nICYmIHRoaXMuaGFzSlNBY3Rpb25zKSB7XG4gICAgICBzZWxlY3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVmcm9tc2FuZGJveFwiLCBqc0V2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IHtcbiAgICAgICAgICB2YWx1ZShldmVudCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC5kZXRhaWwudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBuZXcgU2V0KEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc2VsZWN0RWxlbWVudC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlcy5oYXMob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2V0VmFsdWUoZXZlbnQsIHRydWUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgbXVsdGlwbGVTZWxlY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQubXVsdGlwbGUgPSB0cnVlO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICByZW1vdmUoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBzZWxlY3RFbGVtZW50Lm9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGV2ZW50LmRldGFpbC5yZW1vdmU7XG4gICAgICAgICAgICBvcHRpb25zW2luZGV4XS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5yZW1vdmUoaW5kZXgpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGkgPSBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4LmNhbGwob3B0aW9ucywgb3B0aW9uID0+IG9wdGlvbi5zZWxlY3RlZCk7XG5cbiAgICAgICAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2V0VmFsdWUoZXZlbnQsIHRydWUpLFxuICAgICAgICAgICAgICBpdGVtczogZ2V0SXRlbXMoZXZlbnQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgY2xlYXIoZXZlbnQpIHtcbiAgICAgICAgICAgIHdoaWxlIChzZWxlY3RFbGVtZW50Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LnJlbW92ZSgwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgICAgaXRlbXM6IFtdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgaW5zZXJ0KGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBkaXNwbGF5VmFsdWUsXG4gICAgICAgICAgICAgIGV4cG9ydFZhbHVlXG4gICAgICAgICAgICB9ID0gZXZlbnQuZGV0YWlsLmluc2VydDtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBleHBvcnRWYWx1ZTtcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuaW5zZXJ0QmVmb3JlKG9wdGlvbkVsZW1lbnQsIHNlbGVjdEVsZW1lbnQuY2hpbGRyZW5baW5kZXhdKTtcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlKGV2ZW50LCB0cnVlKSxcbiAgICAgICAgICAgICAgaXRlbXM6IGdldEl0ZW1zKGV2ZW50KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGl0ZW1zKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIGl0ZW1zXG4gICAgICAgICAgICB9ID0gZXZlbnQuZGV0YWlsO1xuXG4gICAgICAgICAgICB3aGlsZSAoc2VsZWN0RWxlbWVudC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5yZW1vdmUoMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVZhbHVlLFxuICAgICAgICAgICAgICAgIGV4cG9ydFZhbHVlXG4gICAgICAgICAgICAgIH0gPSBpdGVtO1xuICAgICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IGV4cG9ydFZhbHVlO1xuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5vcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2V0VmFsdWUoZXZlbnQsIHRydWUpLFxuICAgICAgICAgICAgICBpdGVtczogZ2V0SXRlbXMoZXZlbnQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgaW5kaWNlcyhldmVudCkge1xuICAgICAgICAgICAgY29uc3QgaW5kaWNlcyA9IG5ldyBTZXQoZXZlbnQuZGV0YWlsLmluZGljZXMpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBldmVudC50YXJnZXQub3B0aW9ucykge1xuICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBpbmRpY2VzLmhhcyhvcHRpb24uaW5kZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZShldmVudCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBlZGl0YWJsZShldmVudCkge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmRpc2FibGVkID0gIWV2ZW50LmRldGFpbC5lZGl0YWJsZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goYWN0aW9ucywganNFdmVudCk7XG4gICAgICB9KTtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgZXhwb3J0VmFsdWUgPSBnZXRWYWx1ZShldmVudCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0VmFsdWUoZXZlbnQsIGZhbHNlKTtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgIHZhbHVlOiBleHBvcnRWYWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94XCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWU6IFwiS2V5c3Ryb2tlXCIsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGNoYW5nZUV4OiBleHBvcnRWYWx1ZSxcbiAgICAgICAgICAgIHdpbGxDb21taXQ6IHRydWUsXG4gICAgICAgICAgICBjb21taXRLZXk6IDEsXG4gICAgICAgICAgICBrZXlEb3duOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoc2VsZWN0RWxlbWVudCwgW1tcImZvY3VzXCIsIFwiRm9jdXNcIl0sIFtcImJsdXJcIiwgXCJCbHVyXCJdLCBbXCJtb3VzZWRvd25cIiwgXCJNb3VzZSBEb3duXCJdLCBbXCJtb3VzZWVudGVyXCIsIFwiTW91c2UgRW50ZXJcIl0sIFtcIm1vdXNlbGVhdmVcIiwgXCJNb3VzZSBFeGl0XCJdLCBbXCJtb3VzZXVwXCIsIFwiTW91c2UgVXBcIl0sIFtcImlucHV0XCIsIFwiQWN0aW9uXCJdXSwgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LmNoZWNrZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZShldmVudCwgdHJ1ZSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRCYWNrZ3JvdW5kQ29sb3Ioc2VsZWN0RWxlbWVudCk7XG5cbiAgICB0aGlzLl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhzZWxlY3RFbGVtZW50KTtcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGVjdEVsZW1lbnQpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG59XG5cbmNsYXNzIFBvcHVwQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgSUdOT1JFX1RZUEVTID0gW1wiTGluZVwiLCBcIlNxdWFyZVwiLCBcIkNpcmNsZVwiLCBcIlBvbHlMaW5lXCIsIFwiUG9seWdvblwiLCBcIklua1wiXTtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInBvcHVwQW5ub3RhdGlvblwiO1xuXG4gICAgaWYgKElHTk9SRV9UWVBFUy5pbmNsdWRlcyh0aGlzLmRhdGEucGFyZW50VHlwZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RvciA9IGBbZGF0YS1hbm5vdGF0aW9uLWlkPVwiJHt0aGlzLmRhdGEucGFyZW50SWR9XCJdYDtcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50cyA9IHRoaXMubGF5ZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cbiAgICBpZiAocGFyZW50RWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgfVxuXG4gICAgY29uc3QgcG9wdXAgPSBuZXcgUG9wdXBFbGVtZW50KHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICB0cmlnZ2VyOiBBcnJheS5mcm9tKHBhcmVudEVsZW1lbnRzKSxcbiAgICAgIGNvbG9yOiB0aGlzLmRhdGEuY29sb3IsXG4gICAgICB0aXRsZU9iajogdGhpcy5kYXRhLnRpdGxlT2JqLFxuICAgICAgbW9kaWZpY2F0aW9uRGF0ZTogdGhpcy5kYXRhLm1vZGlmaWNhdGlvbkRhdGUsXG4gICAgICBjb250ZW50c09iajogdGhpcy5kYXRhLmNvbnRlbnRzT2JqLFxuICAgICAgcmljaFRleHQ6IHRoaXMuZGF0YS5yaWNoVGV4dFxuICAgIH0pO1xuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLnBhZ2U7XG5cbiAgICBjb25zdCByZWN0ID0gX3V0aWwuVXRpbC5ub3JtYWxpemVSZWN0KFt0aGlzLmRhdGEucGFyZW50UmVjdFswXSwgcGFnZS52aWV3WzNdIC0gdGhpcy5kYXRhLnBhcmVudFJlY3RbMV0gKyBwYWdlLnZpZXdbMV0sIHRoaXMuZGF0YS5wYXJlbnRSZWN0WzJdLCBwYWdlLnZpZXdbM10gLSB0aGlzLmRhdGEucGFyZW50UmVjdFszXSArIHBhZ2Uudmlld1sxXV0pO1xuXG4gICAgY29uc3QgcG9wdXBMZWZ0ID0gcmVjdFswXSArIHRoaXMuZGF0YS5wYXJlbnRSZWN0WzJdIC0gdGhpcy5kYXRhLnBhcmVudFJlY3RbMF07XG4gICAgY29uc3QgcG9wdXBUb3AgPSByZWN0WzFdO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAkey1wb3B1cExlZnR9cHggJHstcG9wdXBUb3B9cHhgO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtwb3B1cExlZnR9cHhgO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3BvcHVwVG9wfXB4YDtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChwb3B1cC5yZW5kZXIoKSk7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbn1cblxuY2xhc3MgUG9wdXBFbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHRoaXMuY29udGFpbmVyID0gcGFyYW1ldGVycy5jb250YWluZXI7XG4gICAgdGhpcy50cmlnZ2VyID0gcGFyYW1ldGVycy50cmlnZ2VyO1xuICAgIHRoaXMuY29sb3IgPSBwYXJhbWV0ZXJzLmNvbG9yO1xuICAgIHRoaXMudGl0bGVPYmogPSBwYXJhbWV0ZXJzLnRpdGxlT2JqO1xuICAgIHRoaXMubW9kaWZpY2F0aW9uRGF0ZSA9IHBhcmFtZXRlcnMubW9kaWZpY2F0aW9uRGF0ZTtcbiAgICB0aGlzLmNvbnRlbnRzT2JqID0gcGFyYW1ldGVycy5jb250ZW50c09iajtcbiAgICB0aGlzLnJpY2hUZXh0ID0gcGFyYW1ldGVycy5yaWNoVGV4dDtcbiAgICB0aGlzLmhpZGVXcmFwcGVyID0gcGFyYW1ldGVycy5oaWRlV3JhcHBlciB8fCBmYWxzZTtcbiAgICB0aGlzLnBpbm5lZCA9IGZhbHNlO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IEJBQ0tHUk9VTkRfRU5MSUdIVCA9IDAuNztcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IFwicG9wdXBXcmFwcGVyXCI7XG4gICAgdGhpcy5oaWRlRWxlbWVudCA9IHRoaXMuaGlkZVdyYXBwZXIgPyB3cmFwcGVyIDogdGhpcy5jb250YWluZXI7XG4gICAgdGhpcy5oaWRlRWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwb3B1cC5jbGFzc05hbWUgPSBcInBvcHVwXCI7XG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yO1xuXG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICBjb25zdCByID0gQkFDS0dST1VORF9FTkxJR0hUICogKDI1NSAtIGNvbG9yWzBdKSArIGNvbG9yWzBdO1xuICAgICAgY29uc3QgZyA9IEJBQ0tHUk9VTkRfRU5MSUdIVCAqICgyNTUgLSBjb2xvclsxXSkgKyBjb2xvclsxXTtcbiAgICAgIGNvbnN0IGIgPSBCQUNLR1JPVU5EX0VOTElHSFQgKiAoMjU1IC0gY29sb3JbMl0pICsgY29sb3JbMl07XG4gICAgICBwb3B1cC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBfdXRpbC5VdGlsLm1ha2VIZXhDb2xvcihyIHwgMCwgZyB8IDAsIGIgfCAwKTtcbiAgICB9XG5cbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICB0aXRsZS5kaXIgPSB0aGlzLnRpdGxlT2JqLmRpcjtcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRoaXMudGl0bGVPYmouc3RyO1xuICAgIHBvcHVwLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgIGNvbnN0IGRhdGVPYmplY3QgPSBfZGlzcGxheV91dGlscy5QREZEYXRlU3RyaW5nLnRvRGF0ZU9iamVjdCh0aGlzLm1vZGlmaWNhdGlvbkRhdGUpO1xuXG4gICAgaWYgKGRhdGVPYmplY3QpIHtcbiAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbkRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGUuY2xhc3NOYW1lID0gXCJwb3B1cERhdGVcIjtcbiAgICAgIG1vZGlmaWNhdGlvbkRhdGUudGV4dENvbnRlbnQgPSBcInt7ZGF0ZX19LCB7e3RpbWV9fVwiO1xuICAgICAgbW9kaWZpY2F0aW9uRGF0ZS5kYXRhc2V0LmwxMG5JZCA9IFwiYW5ub3RhdGlvbl9kYXRlX3N0cmluZ1wiO1xuICAgICAgbW9kaWZpY2F0aW9uRGF0ZS5kYXRhc2V0LmwxMG5BcmdzID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBkYXRlOiBkYXRlT2JqZWN0LnRvTG9jYWxlRGF0ZVN0cmluZygpLFxuICAgICAgICB0aW1lOiBkYXRlT2JqZWN0LnRvTG9jYWxlVGltZVN0cmluZygpXG4gICAgICB9KTtcbiAgICAgIHBvcHVwLmFwcGVuZENoaWxkKG1vZGlmaWNhdGlvbkRhdGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJpY2hUZXh0Py5zdHIgJiYgKCF0aGlzLmNvbnRlbnRzT2JqPy5zdHIgfHwgdGhpcy5jb250ZW50c09iai5zdHIgPT09IHRoaXMucmljaFRleHQuc3RyKSkge1xuICAgICAgX3hmYV9sYXllci5YZmFMYXllci5yZW5kZXIoe1xuICAgICAgICB4ZmFIdG1sOiB0aGlzLnJpY2hUZXh0Lmh0bWwsXG4gICAgICAgIGludGVudDogXCJyaWNoVGV4dFwiLFxuICAgICAgICBkaXY6IHBvcHVwXG4gICAgICB9KTtcblxuICAgICAgcG9wdXAubGFzdENoaWxkLmNsYXNzTmFtZSA9IFwicmljaFRleHQgcG9wdXBDb250ZW50XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gdGhpcy5fZm9ybWF0Q29udGVudHModGhpcy5jb250ZW50c09iaik7XG5cbiAgICAgIHBvcHVwLmFwcGVuZENoaWxkKGNvbnRlbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy50cmlnZ2VyKSkge1xuICAgICAgdGhpcy50cmlnZ2VyID0gW3RoaXMudHJpZ2dlcl07XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMudHJpZ2dlcikge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fdG9nZ2xlLmJpbmQodGhpcykpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIHRoaXMuX3Nob3cuYmluZCh0aGlzLCBmYWxzZSkpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5faGlkZS5iaW5kKHRoaXMsIGZhbHNlKSk7XG4gICAgfVxuXG4gICAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hpZGUuYmluZCh0aGlzLCB0cnVlKSk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cblxuICBfZm9ybWF0Q29udGVudHMoe1xuICAgIHN0cixcbiAgICBkaXJcbiAgfSkge1xuICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwLmNsYXNzTmFtZSA9IFwicG9wdXBDb250ZW50XCI7XG4gICAgcC5kaXIgPSBkaXI7XG4gICAgY29uc3QgbGluZXMgPSBzdHIuc3BsaXQoLyg/Olxcclxcbj98XFxuKS8pO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbGluZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgcC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lKSk7XG5cbiAgICAgIGlmIChpIDwgaWkgLSAxKSB7XG4gICAgICAgIHAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIF90b2dnbGUoKSB7XG4gICAgaWYgKHRoaXMucGlubmVkKSB7XG4gICAgICB0aGlzLl9oaWRlKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93KHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93KHBpbiA9IGZhbHNlKSB7XG4gICAgaWYgKHBpbikge1xuICAgICAgdGhpcy5waW5uZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhpZGVFbGVtZW50LmhpZGRlbikge1xuICAgICAgdGhpcy5oaWRlRWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnpJbmRleCArPSAxO1xuICAgIH1cbiAgfVxuXG4gIF9oaWRlKHVucGluID0gdHJ1ZSkge1xuICAgIGlmICh1bnBpbikge1xuICAgICAgdGhpcy5waW5uZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGlkZUVsZW1lbnQuaGlkZGVuICYmICF0aGlzLnBpbm5lZCkge1xuICAgICAgdGhpcy5oaWRlRWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuekluZGV4IC09IDE7XG4gICAgfVxuICB9XG5cbn1cblxuY2xhc3MgRnJlZVRleHRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fCBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJmcmVlVGV4dEFubm90YXRpb25cIjtcblxuICAgIGlmICghdGhpcy5kYXRhLmhhc1BvcHVwKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cChudWxsLCB0aGlzLmRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG59XG5cbmNsYXNzIExpbmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fCBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJsaW5lQW5ub3RhdGlvblwiO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3Qge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHRcbiAgICB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcbiAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpsaW5lXCIpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieDFcIiwgZGF0YS5yZWN0WzJdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbMF0pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieTFcIiwgZGF0YS5yZWN0WzNdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbMV0pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieDJcIiwgZGF0YS5yZWN0WzJdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbMl0pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwieTJcIiwgZGF0YS5yZWN0WzNdIC0gZGF0YS5saW5lQ29vcmRpbmF0ZXNbM10pO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggfHwgMSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQobGluZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICB0aGlzLl9jcmVhdGVQb3B1cChsaW5lLCBkYXRhKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG59XG5cbmNsYXNzIFNxdWFyZUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEocGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8IHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNxdWFyZUFubm90YXRpb25cIjtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0XG4gICAgfSA9IGdldFJlY3REaW1zKGRhdGEucmVjdCk7XG4gICAgY29uc3Qgc3ZnID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICBjb25zdCBib3JkZXJXaWR0aCA9IGRhdGEuYm9yZGVyU3R5bGUud2lkdGg7XG4gICAgY29uc3Qgc3F1YXJlID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cmVjdFwiKTtcbiAgICBzcXVhcmUuc2V0QXR0cmlidXRlKFwieFwiLCBib3JkZXJXaWR0aCAvIDIpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJ5XCIsIGJvcmRlcldpZHRoIC8gMik7XG4gICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoIC0gYm9yZGVyV2lkdGgpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgaGVpZ2h0IC0gYm9yZGVyV2lkdGgpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgYm9yZGVyV2lkdGggfHwgMSk7XG4gICAgc3F1YXJlLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidHJhbnNwYXJlbnRcIik7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICB0aGlzLl9jcmVhdGVQb3B1cChzcXVhcmUsIGRhdGEpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbn1cblxuY2xhc3MgQ2lyY2xlQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShwYXJhbWV0ZXJzLmRhdGEuaGFzUG9wdXAgfHwgcGFyYW1ldGVycy5kYXRhLnRpdGxlT2JqPy5zdHIgfHwgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHwgcGFyYW1ldGVycy5kYXRhLnJpY2hUZXh0Py5zdHIpO1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZSxcbiAgICAgIGlnbm9yZUJvcmRlcjogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2lyY2xlQW5ub3RhdGlvblwiO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3Qge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHRcbiAgICB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcbiAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnN0IGJvcmRlcldpZHRoID0gZGF0YS5ib3JkZXJTdHlsZS53aWR0aDtcbiAgICBjb25zdCBjaXJjbGUgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzplbGxpcHNlXCIpO1xuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeFwiLCB3aWR0aCAvIDIpO1xuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeVwiLCBoZWlnaHQgLyAyKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwicnhcIiwgd2lkdGggLyAyIC0gYm9yZGVyV2lkdGggLyAyKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwicnlcIiwgaGVpZ2h0IC8gMiAtIGJvcmRlcldpZHRoIC8gMik7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBib3JkZXJXaWR0aCB8fCAxKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ0cmFuc3BhcmVudFwiKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoc3ZnKTtcblxuICAgIHRoaXMuX2NyZWF0ZVBvcHVwKGNpcmNsZSwgZGF0YSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBQb2x5bGluZUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEocGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8IHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRhaW5lckNsYXNzTmFtZSA9IFwicG9seWxpbmVBbm5vdGF0aW9uXCI7XG4gICAgdGhpcy5zdmdFbGVtZW50TmFtZSA9IFwic3ZnOnBvbHlsaW5lXCI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy5jb250YWluZXJDbGFzc05hbWU7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0gPSBnZXRSZWN0RGltcyhkYXRhLnJlY3QpO1xuICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGUod2lkdGgsIGhlaWdodCk7XG4gICAgbGV0IHBvaW50cyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb29yZGluYXRlIG9mIGRhdGEudmVydGljZXMpIHtcbiAgICAgIGNvbnN0IHggPSBjb29yZGluYXRlLnggLSBkYXRhLnJlY3RbMF07XG4gICAgICBjb25zdCB5ID0gZGF0YS5yZWN0WzNdIC0gY29vcmRpbmF0ZS55O1xuICAgICAgcG9pbnRzLnB1c2goeCArIFwiLFwiICsgeSk7XG4gICAgfVxuXG4gICAgcG9pbnRzID0gcG9pbnRzLmpvaW4oXCIgXCIpO1xuICAgIGNvbnN0IHBvbHlsaW5lID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQodGhpcy5zdmdFbGVtZW50TmFtZSk7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsIHBvaW50cyk7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGRhdGEuYm9yZGVyU3R5bGUud2lkdGggfHwgMSk7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG4gICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChwb2x5bGluZSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN2Zyk7XG5cbiAgICB0aGlzLl9jcmVhdGVQb3B1cChwb2x5bGluZSwgZGF0YSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBQb2x5Z29uQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBQb2x5bGluZUFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgIHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lID0gXCJwb2x5Z29uQW5ub3RhdGlvblwiO1xuICAgIHRoaXMuc3ZnRWxlbWVudE5hbWUgPSBcInN2Zzpwb2x5Z29uXCI7XG4gIH1cblxufVxuXG5jbGFzcyBDYXJldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEocGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8IHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcImNhcmV0QW5ub3RhdGlvblwiO1xuXG4gICAgaWYgKCF0aGlzLmRhdGEuaGFzUG9wdXApIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsIHRoaXMuZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbn1cblxuY2xhc3MgSW5rQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCBpc1JlbmRlcmFibGUgPSAhIShwYXJhbWV0ZXJzLmRhdGEuaGFzUG9wdXAgfHwgcGFyYW1ldGVycy5kYXRhLnRpdGxlT2JqPy5zdHIgfHwgcGFyYW1ldGVycy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHwgcGFyYW1ldGVycy5kYXRhLnJpY2hUZXh0Py5zdHIpO1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZSxcbiAgICAgIGlnbm9yZUJvcmRlcjogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lID0gXCJpbmtBbm5vdGF0aW9uXCI7XG4gICAgdGhpcy5zdmdFbGVtZW50TmFtZSA9IFwic3ZnOnBvbHlsaW5lXCI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy5jb250YWluZXJDbGFzc05hbWU7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0gPSBnZXRSZWN0RGltcyhkYXRhLnJlY3QpO1xuICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGUod2lkdGgsIGhlaWdodCk7XG5cbiAgICBmb3IgKGNvbnN0IGlua0xpc3Qgb2YgZGF0YS5pbmtMaXN0cykge1xuICAgICAgbGV0IHBvaW50cyA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGNvb3JkaW5hdGUgb2YgaW5rTGlzdCkge1xuICAgICAgICBjb25zdCB4ID0gY29vcmRpbmF0ZS54IC0gZGF0YS5yZWN0WzBdO1xuICAgICAgICBjb25zdCB5ID0gZGF0YS5yZWN0WzNdIC0gY29vcmRpbmF0ZS55O1xuICAgICAgICBwb2ludHMucHVzaChgJHt4fSwke3l9YCk7XG4gICAgICB9XG5cbiAgICAgIHBvaW50cyA9IHBvaW50cy5qb2luKFwiIFwiKTtcbiAgICAgIGNvbnN0IHBvbHlsaW5lID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQodGhpcy5zdmdFbGVtZW50TmFtZSk7XG4gICAgICBwb2x5bGluZS5zZXRBdHRyaWJ1dGUoXCJwb2ludHNcIiwgcG9pbnRzKTtcbiAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBkYXRhLmJvcmRlclN0eWxlLndpZHRoIHx8IDEpO1xuICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG4gICAgICBwb2x5bGluZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidHJhbnNwYXJlbnRcIik7XG5cbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKHBvbHlsaW5lLCBkYXRhKTtcblxuICAgICAgc3ZnLmFwcGVuZENoaWxkKHBvbHlsaW5lKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoc3ZnKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBIaWdobGlnaHRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fCBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5oYXNQb3B1cCkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAobnVsbCwgdGhpcy5kYXRhKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5xdWFkcmlsYXRlcmFscykge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclF1YWRyaWxhdGVyYWxzKFwiaGlnaGxpZ2h0QW5ub3RhdGlvblwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcImhpZ2hsaWdodEFubm90YXRpb25cIjtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBVbmRlcmxpbmVBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fCBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5oYXNQb3B1cCkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAobnVsbCwgdGhpcy5kYXRhKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5xdWFkcmlsYXRlcmFscykge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclF1YWRyaWxhdGVyYWxzKFwidW5kZXJsaW5lQW5ub3RhdGlvblwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInVuZGVybGluZUFubm90YXRpb25cIjtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBTcXVpZ2dseUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEocGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8IHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWUsXG4gICAgICBjcmVhdGVRdWFkcmlsYXRlcmFsczogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmhhc1BvcHVwKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQb3B1cChudWxsLCB0aGlzLmRhdGEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnF1YWRyaWxhdGVyYWxzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyUXVhZHJpbGF0ZXJhbHMoXCJzcXVpZ2dseUFubm90YXRpb25cIik7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJzcXVpZ2dseUFubm90YXRpb25cIjtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBTdHJpa2VPdXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIGNvbnN0IGlzUmVuZGVyYWJsZSA9ICEhKHBhcmFtZXRlcnMuZGF0YS5oYXNQb3B1cCB8fCBwYXJhbWV0ZXJzLmRhdGEudGl0bGVPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEuY29udGVudHNPYmo/LnN0ciB8fCBwYXJhbWV0ZXJzLmRhdGEucmljaFRleHQ/LnN0cik7XG4gICAgc3VwZXIocGFyYW1ldGVycywge1xuICAgICAgaXNSZW5kZXJhYmxlLFxuICAgICAgaWdub3JlQm9yZGVyOiB0cnVlLFxuICAgICAgY3JlYXRlUXVhZHJpbGF0ZXJhbHM6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5oYXNQb3B1cCkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAobnVsbCwgdGhpcy5kYXRhKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5xdWFkcmlsYXRlcmFscykge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclF1YWRyaWxhdGVyYWxzKFwic3RyaWtlb3V0QW5ub3RhdGlvblwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInN0cmlrZW91dEFubm90YXRpb25cIjtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxufVxuXG5jbGFzcyBTdGFtcEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgaXNSZW5kZXJhYmxlID0gISEocGFyYW1ldGVycy5kYXRhLmhhc1BvcHVwIHx8IHBhcmFtZXRlcnMuZGF0YS50aXRsZU9iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5jb250ZW50c09iaj8uc3RyIHx8IHBhcmFtZXRlcnMuZGF0YS5yaWNoVGV4dD8uc3RyKTtcbiAgICBzdXBlcihwYXJhbWV0ZXJzLCB7XG4gICAgICBpc1JlbmRlcmFibGUsXG4gICAgICBpZ25vcmVCb3JkZXI6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSBcInN0YW1wQW5ub3RhdGlvblwiO1xuXG4gICAgaWYgKCF0aGlzLmRhdGEuaGFzUG9wdXApIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsIHRoaXMuZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbn1cblxuY2xhc3MgRmlsZUF0dGFjaG1lbnRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50IHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgIHN1cGVyKHBhcmFtZXRlcnMsIHtcbiAgICAgIGlzUmVuZGVyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IHtcbiAgICAgIGZpbGVuYW1lLFxuICAgICAgY29udGVudFxuICAgIH0gPSB0aGlzLmRhdGEuZmlsZTtcbiAgICB0aGlzLmZpbGVuYW1lID0gKDAsIF9kaXNwbGF5X3V0aWxzLmdldEZpbGVuYW1lRnJvbVVybCkoZmlsZW5hbWUpO1xuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgdGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goXCJmaWxlYXR0YWNobWVudGFubm90YXRpb25cIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgZmlsZW5hbWUsXG4gICAgICBjb250ZW50XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gXCJmaWxlQXR0YWNobWVudEFubm90YXRpb25cIjtcbiAgICBjb25zdCB0cmlnZ2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0cmlnZ2VyLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB0cmlnZ2VyLnN0eWxlLndpZHRoID0gdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGg7XG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgdGhpcy5fZG93bmxvYWQuYmluZCh0aGlzKSk7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5oYXNQb3B1cCAmJiAodGhpcy5kYXRhLnRpdGxlT2JqPy5zdHIgfHwgdGhpcy5kYXRhLmNvbnRlbnRzT2JqPy5zdHIgfHwgdGhpcy5kYXRhLnJpY2hUZXh0KSkge1xuICAgICAgdGhpcy5fY3JlYXRlUG9wdXAodHJpZ2dlciwgdGhpcy5kYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmlnZ2VyKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICBfZG93bmxvYWQoKSB7XG4gICAgdGhpcy5kb3dubG9hZE1hbmFnZXI/Lm9wZW5PckRvd25sb2FkRGF0YSh0aGlzLmNvbnRhaW5lciwgdGhpcy5jb250ZW50LCB0aGlzLmZpbGVuYW1lKTtcbiAgfVxuXG59XG5cbmNsYXNzIEFubm90YXRpb25MYXllciB7XG4gIHN0YXRpYyByZW5kZXIocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHNvcnRlZEFubm90YXRpb25zID0gW10sXG4gICAgICAgICAgcG9wdXBBbm5vdGF0aW9ucyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBkYXRhIG9mIHBhcmFtZXRlcnMuYW5ub3RhdGlvbnMpIHtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qge1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICB9ID0gZ2V0UmVjdERpbXMoZGF0YS5yZWN0KTtcblxuICAgICAgaWYgKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmFubm90YXRpb25UeXBlID09PSBfdXRpbC5Bbm5vdGF0aW9uVHlwZS5QT1BVUCkge1xuICAgICAgICBwb3B1cEFubm90YXRpb25zLnB1c2goZGF0YSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBzb3J0ZWRBbm5vdGF0aW9ucy5wdXNoKGRhdGEpO1xuICAgIH1cblxuICAgIGlmIChwb3B1cEFubm90YXRpb25zLmxlbmd0aCkge1xuICAgICAgc29ydGVkQW5ub3RhdGlvbnMucHVzaCguLi5wb3B1cEFubm90YXRpb25zKTtcbiAgICB9XG5cbiAgICBjb25zdCBkaXYgPSBwYXJhbWV0ZXJzLmRpdjtcblxuICAgIGZvciAoY29uc3QgZGF0YSBvZiBzb3J0ZWRBbm5vdGF0aW9ucykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IEFubm90YXRpb25FbGVtZW50RmFjdG9yeS5jcmVhdGUoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBsYXllcjogZGl2LFxuICAgICAgICBwYWdlOiBwYXJhbWV0ZXJzLnBhZ2UsXG4gICAgICAgIHZpZXdwb3J0OiBwYXJhbWV0ZXJzLnZpZXdwb3J0LFxuICAgICAgICBsaW5rU2VydmljZTogcGFyYW1ldGVycy5saW5rU2VydmljZSxcbiAgICAgICAgZG93bmxvYWRNYW5hZ2VyOiBwYXJhbWV0ZXJzLmRvd25sb2FkTWFuYWdlcixcbiAgICAgICAgaW1hZ2VSZXNvdXJjZXNQYXRoOiBwYXJhbWV0ZXJzLmltYWdlUmVzb3VyY2VzUGF0aCB8fCBcIlwiLFxuICAgICAgICByZW5kZXJGb3JtczogcGFyYW1ldGVycy5yZW5kZXJGb3JtcyAhPT0gZmFsc2UsXG4gICAgICAgIHN2Z0ZhY3Rvcnk6IG5ldyBfZGlzcGxheV91dGlscy5ET01TVkdGYWN0b3J5KCksXG4gICAgICAgIGFubm90YXRpb25TdG9yYWdlOiBwYXJhbWV0ZXJzLmFubm90YXRpb25TdG9yYWdlIHx8IG5ldyBfYW5ub3RhdGlvbl9zdG9yYWdlLkFubm90YXRpb25TdG9yYWdlKCksXG4gICAgICAgIGVuYWJsZVNjcmlwdGluZzogcGFyYW1ldGVycy5lbmFibGVTY3JpcHRpbmcsXG4gICAgICAgIGhhc0pTQWN0aW9uczogcGFyYW1ldGVycy5oYXNKU0FjdGlvbnMsXG4gICAgICAgIGZpZWxkT2JqZWN0czogcGFyYW1ldGVycy5maWVsZE9iamVjdHMsXG4gICAgICAgIG1vdXNlU3RhdGU6IHBhcmFtZXRlcnMubW91c2VTdGF0ZSB8fCB7XG4gICAgICAgICAgaXNEb3duOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGVsZW1lbnQuaXNSZW5kZXJhYmxlKSB7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVkID0gZWxlbWVudC5yZW5kZXIoKTtcblxuICAgICAgICBpZiAoZGF0YS5oaWRkZW4pIHtcbiAgICAgICAgICByZW5kZXJlZC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlbmRlcmVkKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgcmVuZGVyZWRFbGVtZW50IG9mIHJlbmRlcmVkKSB7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQocmVuZGVyZWRFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBQb3B1cEFubm90YXRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICBkaXYucHJlcGVuZChyZW5kZXJlZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChyZW5kZXJlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jc2V0QW5ub3RhdGlvbkNhbnZhc01hcChkaXYsIHBhcmFtZXRlcnMuYW5ub3RhdGlvbkNhbnZhc01hcCk7XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlKHBhcmFtZXRlcnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBwYWdlLFxuICAgICAgdmlld3BvcnQsXG4gICAgICBhbm5vdGF0aW9ucyxcbiAgICAgIGFubm90YXRpb25DYW52YXNNYXAsXG4gICAgICBkaXZcbiAgICB9ID0gcGFyYW1ldGVycztcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSB2aWV3cG9ydC50cmFuc2Zvcm07XG4gICAgY29uc3QgbWF0cml4ID0gYG1hdHJpeCgke3RyYW5zZm9ybS5qb2luKFwiLFwiKX0pYDtcbiAgICBsZXQgc2NhbGUsIG93bk1hdHJpeDtcblxuICAgIGZvciAoY29uc3QgZGF0YSBvZiBhbm5vdGF0aW9ucykge1xuICAgICAgY29uc3QgZWxlbWVudHMgPSBkaXYucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtYW5ub3RhdGlvbi1pZD1cIiR7ZGF0YS5pZH1cIl1gKTtcblxuICAgICAgaWYgKGVsZW1lbnRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgICAgIGlmIChkYXRhLmhhc093bkNhbnZhcykge1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IF91dGlsLlV0aWwubm9ybWFsaXplUmVjdChbZGF0YS5yZWN0WzBdLCBwYWdlLnZpZXdbM10gLSBkYXRhLnJlY3RbMV0gKyBwYWdlLnZpZXdbMV0sIGRhdGEucmVjdFsyXSwgcGFnZS52aWV3WzNdIC0gZGF0YS5yZWN0WzNdICsgcGFnZS52aWV3WzFdXSk7XG5cbiAgICAgICAgICAgIGlmICghb3duTWF0cml4KSB7XG4gICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5hYnModHJhbnNmb3JtWzBdIHx8IHRyYW5zZm9ybVsxXSk7XG4gICAgICAgICAgICAgIGNvbnN0IG93blRyYW5zZm9ybSA9IHRyYW5zZm9ybS5zbGljZSgpO1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3duVHJhbnNmb3JtW2ldID0gTWF0aC5zaWduKG93blRyYW5zZm9ybVtpXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvd25NYXRyaXggPSBgbWF0cml4KCR7b3duVHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gcmVjdFswXSAqIHNjYWxlO1xuICAgICAgICAgICAgY29uc3QgdG9wID0gcmVjdFsxXSAqIHNjYWxlO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IGAke3RvcH1weGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAkey1sZWZ0fXB4ICR7LXRvcH1weGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IG93bk1hdHJpeDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBtYXRyaXg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jc2V0QW5ub3RhdGlvbkNhbnZhc01hcChkaXYsIGFubm90YXRpb25DYW52YXNNYXApO1xuICAgIGRpdi5oaWRkZW4gPSBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyAjc2V0QW5ub3RhdGlvbkNhbnZhc01hcChkaXYsIGFubm90YXRpb25DYW52YXNNYXApIHtcbiAgICBpZiAoIWFubm90YXRpb25DYW52YXNNYXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtpZCwgY2FudmFzXSBvZiBhbm5vdGF0aW9uQ2FudmFzTWFwKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWFubm90YXRpb24taWQ9XCIke2lkfVwiXWApO1xuXG4gICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZmlyc3RDaGlsZFxuICAgICAgfSA9IGVsZW1lbnQ7XG5cbiAgICAgIGlmIChmaXJzdENoaWxkLm5vZGVOYW1lID09PSBcIkNBTlZBU1wiKSB7XG4gICAgICAgIGVsZW1lbnQucmVwbGFjZUNoaWxkKGNhbnZhcywgZmlyc3RDaGlsZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZShjYW52YXMsIGZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFubm90YXRpb25DYW52YXNNYXAuY2xlYXIoKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuQW5ub3RhdGlvbkxheWVyID0gQW5ub3RhdGlvbkxheWVyO1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkNvbG9yQ29udmVydGVycyA9IHZvaWQgMDtcblxuZnVuY3Rpb24gbWFrZUNvbG9yQ29tcChuKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG4pKSAqIDI1NSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbn1cblxuY2xhc3MgQ29sb3JDb252ZXJ0ZXJzIHtcbiAgc3RhdGljIENNWUtfRyhbYywgeSwgbSwga10pIHtcbiAgICByZXR1cm4gW1wiR1wiLCAxIC0gTWF0aC5taW4oMSwgMC4zICogYyArIDAuNTkgKiBtICsgMC4xMSAqIHkgKyBrKV07XG4gIH1cblxuICBzdGF0aWMgR19DTVlLKFtnXSkge1xuICAgIHJldHVybiBbXCJDTVlLXCIsIDAsIDAsIDAsIDEgLSBnXTtcbiAgfVxuXG4gIHN0YXRpYyBHX1JHQihbZ10pIHtcbiAgICByZXR1cm4gW1wiUkdCXCIsIGcsIGcsIGddO1xuICB9XG5cbiAgc3RhdGljIEdfSFRNTChbZ10pIHtcbiAgICBjb25zdCBHID0gbWFrZUNvbG9yQ29tcChnKTtcbiAgICByZXR1cm4gYCMke0d9JHtHfSR7R31gO1xuICB9XG5cbiAgc3RhdGljIFJHQl9HKFtyLCBnLCBiXSkge1xuICAgIHJldHVybiBbXCJHXCIsIDAuMyAqIHIgKyAwLjU5ICogZyArIDAuMTEgKiBiXTtcbiAgfVxuXG4gIHN0YXRpYyBSR0JfSFRNTChbciwgZywgYl0pIHtcbiAgICBjb25zdCBSID0gbWFrZUNvbG9yQ29tcChyKTtcbiAgICBjb25zdCBHID0gbWFrZUNvbG9yQ29tcChnKTtcbiAgICBjb25zdCBCID0gbWFrZUNvbG9yQ29tcChiKTtcbiAgICByZXR1cm4gYCMke1J9JHtHfSR7Qn1gO1xuICB9XG5cbiAgc3RhdGljIFRfSFRNTCgpIHtcbiAgICByZXR1cm4gXCIjMDAwMDAwMDBcIjtcbiAgfVxuXG4gIHN0YXRpYyBDTVlLX1JHQihbYywgeSwgbSwga10pIHtcbiAgICByZXR1cm4gW1wiUkdCXCIsIDEgLSBNYXRoLm1pbigxLCBjICsgayksIDEgLSBNYXRoLm1pbigxLCBtICsgayksIDEgLSBNYXRoLm1pbigxLCB5ICsgayldO1xuICB9XG5cbiAgc3RhdGljIENNWUtfSFRNTChjb21wb25lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuUkdCX0hUTUwodGhpcy5DTVlLX1JHQihjb21wb25lbnRzKSk7XG4gIH1cblxuICBzdGF0aWMgUkdCX0NNWUsoW3IsIGcsIGJdKSB7XG4gICAgY29uc3QgYyA9IDEgLSByO1xuICAgIGNvbnN0IG0gPSAxIC0gZztcbiAgICBjb25zdCB5ID0gMSAtIGI7XG4gICAgY29uc3QgayA9IE1hdGgubWluKGMsIG0sIHkpO1xuICAgIHJldHVybiBbXCJDTVlLXCIsIGMsIG0sIHksIGtdO1xuICB9XG5cbn1cblxuZXhwb3J0cy5Db2xvckNvbnZlcnRlcnMgPSBDb2xvckNvbnZlcnRlcnM7XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuWGZhTGF5ZXIgPSB2b2lkIDA7XG5cbnZhciBfeGZhX3RleHQgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDE4KTtcblxuY2xhc3MgWGZhTGF5ZXIge1xuICBzdGF0aWMgc2V0dXBTdG9yYWdlKGh0bWwsIGlkLCBlbGVtZW50LCBzdG9yYWdlLCBpbnRlbnQpIHtcbiAgICBjb25zdCBzdG9yZWREYXRhID0gc3RvcmFnZS5nZXRWYWx1ZShpZCwge1xuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KTtcblxuICAgIHN3aXRjaCAoZWxlbWVudC5uYW1lKSB7XG4gICAgICBjYXNlIFwidGV4dGFyZWFcIjpcbiAgICAgICAgaWYgKHN0b3JlZERhdGEudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBodG1sLnRleHRDb250ZW50ID0gc3RvcmVkRGF0YS52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnRlbnQgPT09IFwicHJpbnRcIikge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoaWQsIHtcbiAgICAgICAgICAgIHZhbHVlOiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiaW5wdXRcIjpcbiAgICAgICAgaWYgKGVsZW1lbnQuYXR0cmlidXRlcy50eXBlID09PSBcInJhZGlvXCIgfHwgZWxlbWVudC5hdHRyaWJ1dGVzLnR5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlID09PSBlbGVtZW50LmF0dHJpYnV0ZXMueGZhT24pIHtcbiAgICAgICAgICAgIGh0bWwuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0b3JlZERhdGEudmFsdWUgPT09IGVsZW1lbnQuYXR0cmlidXRlcy54ZmFPZmYpIHtcbiAgICAgICAgICAgIGh0bWwucmVtb3ZlQXR0cmlidXRlKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaW50ZW50ID09PSBcInByaW50XCIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGh0bWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBldmVudCA9PiB7XG4gICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKGlkLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBldmVudC50YXJnZXQuY2hlY2tlZCA/IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ4ZmFPblwiKSA6IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ4ZmFPZmZcIilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBodG1sLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHN0b3JlZERhdGEudmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbnRlbnQgPT09IFwicHJpbnRcIikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwic2VsZWN0XCI6XG4gICAgICAgIGlmIChzdG9yZWREYXRhLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZWxlbWVudC5jaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5hdHRyaWJ1dGVzLnZhbHVlID09PSBzdG9yZWREYXRhLnZhbHVlKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi5hdHRyaWJ1dGVzLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBodG1sLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBldmVudCA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGV2ZW50LnRhcmdldC5vcHRpb25zO1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gb3B0aW9ucy5zZWxlY3RlZEluZGV4ID09PSAtMSA/IFwiXCIgOiBvcHRpb25zW29wdGlvbnMuc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICAgICAgc3RvcmFnZS5zZXRWYWx1ZShpZCwge1xuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzZXRBdHRyaWJ1dGVzKHtcbiAgICBodG1sLFxuICAgIGVsZW1lbnQsXG4gICAgc3RvcmFnZSA9IG51bGwsXG4gICAgaW50ZW50LFxuICAgIGxpbmtTZXJ2aWNlXG4gIH0pIHtcbiAgICBjb25zdCB7XG4gICAgICBhdHRyaWJ1dGVzXG4gICAgfSA9IGVsZW1lbnQ7XG4gICAgY29uc3QgaXNIVE1MQW5jaG9yRWxlbWVudCA9IGh0bWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudDtcblxuICAgIGlmIChhdHRyaWJ1dGVzLnR5cGUgPT09IFwicmFkaW9cIikge1xuICAgICAgYXR0cmlidXRlcy5uYW1lID0gYCR7YXR0cmlidXRlcy5uYW1lfS0ke2ludGVudH1gO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCBrZXkgPT09IFwiZGF0YUlkXCIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChrZXkgIT09IFwic3R5bGVcIikge1xuICAgICAgICBpZiAoa2V5ID09PSBcInRleHRDb250ZW50XCIpIHtcbiAgICAgICAgICBodG1sLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcImNsYXNzXCIpIHtcbiAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBodG1sLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGlzSFRNTEFuY2hvckVsZW1lbnQgJiYgKGtleSA9PT0gXCJocmVmXCIgfHwga2V5ID09PSBcIm5ld1dpbmRvd1wiKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaHRtbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oaHRtbC5zdHlsZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0hUTUxBbmNob3JFbGVtZW50KSB7XG4gICAgICBsaW5rU2VydmljZS5hZGRMaW5rQXR0cmlidXRlcyhodG1sLCBhdHRyaWJ1dGVzLmhyZWYsIGF0dHJpYnV0ZXMubmV3V2luZG93KTtcbiAgICB9XG5cbiAgICBpZiAoc3RvcmFnZSAmJiBhdHRyaWJ1dGVzLmRhdGFJZCkge1xuICAgICAgdGhpcy5zZXR1cFN0b3JhZ2UoaHRtbCwgYXR0cmlidXRlcy5kYXRhSWQsIGVsZW1lbnQsIHN0b3JhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyByZW5kZXIocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBwYXJhbWV0ZXJzLmFubm90YXRpb25TdG9yYWdlO1xuICAgIGNvbnN0IGxpbmtTZXJ2aWNlID0gcGFyYW1ldGVycy5saW5rU2VydmljZTtcbiAgICBjb25zdCByb290ID0gcGFyYW1ldGVycy54ZmFIdG1sO1xuICAgIGNvbnN0IGludGVudCA9IHBhcmFtZXRlcnMuaW50ZW50IHx8IFwiZGlzcGxheVwiO1xuICAgIGNvbnN0IHJvb3RIdG1sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChyb290Lm5hbWUpO1xuXG4gICAgaWYgKHJvb3QuYXR0cmlidXRlcykge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgaHRtbDogcm9vdEh0bWwsXG4gICAgICAgIGVsZW1lbnQ6IHJvb3QsXG4gICAgICAgIGludGVudCxcbiAgICAgICAgbGlua1NlcnZpY2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YWNrID0gW1tyb290LCAtMSwgcm9vdEh0bWxdXTtcbiAgICBjb25zdCByb290RGl2ID0gcGFyYW1ldGVycy5kaXY7XG4gICAgcm9vdERpdi5hcHBlbmRDaGlsZChyb290SHRtbCk7XG5cbiAgICBpZiAocGFyYW1ldGVycy52aWV3cG9ydCkge1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gYG1hdHJpeCgke3BhcmFtZXRlcnMudmlld3BvcnQudHJhbnNmb3JtLmpvaW4oXCIsXCIpfSlgO1xuICAgICAgcm9vdERpdi5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgfVxuXG4gICAgaWYgKGludGVudCAhPT0gXCJyaWNoVGV4dFwiKSB7XG4gICAgICByb290RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwieGZhTGF5ZXIgeGZhRm9udFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0RGl2cyA9IFtdO1xuXG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IFtwYXJlbnQsIGksIGh0bWxdID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG5cbiAgICAgIGlmIChpICsgMSA9PT0gcGFyZW50LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoaWxkID0gcGFyZW50LmNoaWxkcmVuWysrc3RhY2tbc3RhY2subGVuZ3RoIC0gMV1bMV1dO1xuXG4gICAgICBpZiAoY2hpbGQgPT09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgbmFtZVxuICAgICAgfSA9IGNoaWxkO1xuXG4gICAgICBpZiAobmFtZSA9PT0gXCIjdGV4dFwiKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaGlsZC52YWx1ZSk7XG4gICAgICAgIHRleHREaXZzLnB1c2gobm9kZSk7XG4gICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgY2hpbGRIdG1sO1xuXG4gICAgICBpZiAoY2hpbGQ/LmF0dHJpYnV0ZXM/LnhtbG5zKSB7XG4gICAgICAgIGNoaWxkSHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhjaGlsZC5hdHRyaWJ1dGVzLnhtbG5zLCBuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkSHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2hpbGRIdG1sKTtcblxuICAgICAgaWYgKGNoaWxkLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICBodG1sOiBjaGlsZEh0bWwsXG4gICAgICAgICAgZWxlbWVudDogY2hpbGQsXG4gICAgICAgICAgc3RvcmFnZSxcbiAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgbGlua1NlcnZpY2VcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGlsZC5jaGlsZHJlbiAmJiBjaGlsZC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHN0YWNrLnB1c2goW2NoaWxkLCAtMSwgY2hpbGRIdG1sXSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkLnZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaGlsZC52YWx1ZSk7XG5cbiAgICAgICAgaWYgKF94ZmFfdGV4dC5YZmFUZXh0LnNob3VsZEJ1aWxkVGV4dChuYW1lKSkge1xuICAgICAgICAgIHRleHREaXZzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZEh0bWwuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbCBvZiByb290RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIueGZhTm9uSW50ZXJhY3RpdmUgaW5wdXQsIC54ZmFOb25JbnRlcmFjdGl2ZSB0ZXh0YXJlYVwiKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFwicmVhZE9ubHlcIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHREaXZzXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGUocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHRyYW5zZm9ybSA9IGBtYXRyaXgoJHtwYXJhbWV0ZXJzLnZpZXdwb3J0LnRyYW5zZm9ybS5qb2luKFwiLFwiKX0pYDtcbiAgICBwYXJhbWV0ZXJzLmRpdi5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgcGFyYW1ldGVycy5kaXYuaGlkZGVuID0gZmFsc2U7XG4gIH1cblxufVxuXG5leHBvcnRzLlhmYUxheWVyID0gWGZhTGF5ZXI7XG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMucmVuZGVyVGV4dExheWVyID0gcmVuZGVyVGV4dExheWVyO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG5jb25zdCBNQVhfVEVYVF9ESVZTX1RPX1JFTkRFUiA9IDEwMDAwMDtcbmNvbnN0IERFRkFVTFRfRk9OVF9TSVpFID0gMzA7XG5jb25zdCBERUZBVUxUX0ZPTlRfQVNDRU5UID0gMC44O1xuY29uc3QgYXNjZW50Q2FjaGUgPSBuZXcgTWFwKCk7XG5jb25zdCBBbGxXaGl0ZXNwYWNlUmVnZXhwID0gL15cXHMrJC9nO1xuXG5mdW5jdGlvbiBnZXRBc2NlbnQoZm9udEZhbWlseSwgY3R4KSB7XG4gIGNvbnN0IGNhY2hlZEFzY2VudCA9IGFzY2VudENhY2hlLmdldChmb250RmFtaWx5KTtcblxuICBpZiAoY2FjaGVkQXNjZW50KSB7XG4gICAgcmV0dXJuIGNhY2hlZEFzY2VudDtcbiAgfVxuXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC5mb250ID0gYCR7REVGQVVMVF9GT05UX1NJWkV9cHggJHtmb250RmFtaWx5fWA7XG4gIGNvbnN0IG1ldHJpY3MgPSBjdHgubWVhc3VyZVRleHQoXCJcIik7XG4gIGxldCBhc2NlbnQgPSBtZXRyaWNzLmZvbnRCb3VuZGluZ0JveEFzY2VudDtcbiAgbGV0IGRlc2NlbnQgPSBNYXRoLmFicyhtZXRyaWNzLmZvbnRCb3VuZGluZ0JveERlc2NlbnQpO1xuXG4gIGlmIChhc2NlbnQpIHtcbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGNvbnN0IHJhdGlvID0gYXNjZW50IC8gKGFzY2VudCArIGRlc2NlbnQpO1xuICAgIGFzY2VudENhY2hlLnNldChmb250RmFtaWx5LCByYXRpbyk7XG4gICAgcmV0dXJuIHJhdGlvO1xuICB9XG5cbiAgY3R4LnN0cm9rZVN0eWxlID0gXCJyZWRcIjtcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBERUZBVUxUX0ZPTlRfU0laRSwgREVGQVVMVF9GT05UX1NJWkUpO1xuICBjdHguc3Ryb2tlVGV4dChcImdcIiwgMCwgMCk7XG4gIGxldCBwaXhlbHMgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIERFRkFVTFRfRk9OVF9TSVpFLCBERUZBVUxUX0ZPTlRfU0laRSkuZGF0YTtcbiAgZGVzY2VudCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IHBpeGVscy5sZW5ndGggLSAxIC0gMzsgaSA+PSAwOyBpIC09IDQpIHtcbiAgICBpZiAocGl4ZWxzW2ldID4gMCkge1xuICAgICAgZGVzY2VudCA9IE1hdGguY2VpbChpIC8gNCAvIERFRkFVTFRfRk9OVF9TSVpFKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgREVGQVVMVF9GT05UX1NJWkUsIERFRkFVTFRfRk9OVF9TSVpFKTtcbiAgY3R4LnN0cm9rZVRleHQoXCJBXCIsIDAsIERFRkFVTFRfRk9OVF9TSVpFKTtcbiAgcGl4ZWxzID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBERUZBVUxUX0ZPTlRfU0laRSwgREVGQVVMVF9GT05UX1NJWkUpLmRhdGE7XG4gIGFzY2VudCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gcGl4ZWxzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICBpZiAocGl4ZWxzW2ldID4gMCkge1xuICAgICAgYXNjZW50ID0gREVGQVVMVF9GT05UX1NJWkUgLSBNYXRoLmZsb29yKGkgLyA0IC8gREVGQVVMVF9GT05UX1NJWkUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY3R4LnJlc3RvcmUoKTtcblxuICBpZiAoYXNjZW50KSB7XG4gICAgY29uc3QgcmF0aW8gPSBhc2NlbnQgLyAoYXNjZW50ICsgZGVzY2VudCk7XG4gICAgYXNjZW50Q2FjaGUuc2V0KGZvbnRGYW1pbHksIHJhdGlvKTtcbiAgICByZXR1cm4gcmF0aW87XG4gIH1cblxuICBhc2NlbnRDYWNoZS5zZXQoZm9udEZhbWlseSwgREVGQVVMVF9GT05UX0FTQ0VOVCk7XG4gIHJldHVybiBERUZBVUxUX0ZPTlRfQVNDRU5UO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRUZXh0KHRhc2ssIGdlb20sIHN0eWxlcywgY3R4KSB7XG4gIGNvbnN0IHRleHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgY29uc3QgdGV4dERpdlByb3BlcnRpZXMgPSB0YXNrLl9lbmhhbmNlVGV4dFNlbGVjdGlvbiA/IHtcbiAgICBhbmdsZTogMCxcbiAgICBjYW52YXNXaWR0aDogMCxcbiAgICBoYXNUZXh0OiBnZW9tLnN0ciAhPT0gXCJcIixcbiAgICBoYXNFT0w6IGdlb20uaGFzRU9MLFxuICAgIG9yaWdpbmFsVHJhbnNmb3JtOiBudWxsLFxuICAgIHBhZGRpbmdCb3R0b206IDAsXG4gICAgcGFkZGluZ0xlZnQ6IDAsXG4gICAgcGFkZGluZ1JpZ2h0OiAwLFxuICAgIHBhZGRpbmdUb3A6IDAsXG4gICAgc2NhbGU6IDFcbiAgfSA6IHtcbiAgICBhbmdsZTogMCxcbiAgICBjYW52YXNXaWR0aDogMCxcbiAgICBoYXNUZXh0OiBnZW9tLnN0ciAhPT0gXCJcIixcbiAgICBoYXNFT0w6IGdlb20uaGFzRU9MXG4gIH07XG5cbiAgdGFzay5fdGV4dERpdnMucHVzaCh0ZXh0RGl2KTtcblxuICBjb25zdCB0eCA9IF91dGlsLlV0aWwudHJhbnNmb3JtKHRhc2suX3ZpZXdwb3J0LnRyYW5zZm9ybSwgZ2VvbS50cmFuc2Zvcm0pO1xuXG4gIGxldCBhbmdsZSA9IE1hdGguYXRhbjIodHhbMV0sIHR4WzBdKTtcbiAgY29uc3Qgc3R5bGUgPSBzdHlsZXNbZ2VvbS5mb250TmFtZV07XG5cbiAgaWYgKHN0eWxlLnZlcnRpY2FsKSB7XG4gICAgYW5nbGUgKz0gTWF0aC5QSSAvIDI7XG4gIH1cblxuICBjb25zdCBmb250SGVpZ2h0ID0gTWF0aC5oeXBvdCh0eFsyXSwgdHhbM10pO1xuICBjb25zdCBmb250QXNjZW50ID0gZm9udEhlaWdodCAqIGdldEFzY2VudChzdHlsZS5mb250RmFtaWx5LCBjdHgpO1xuICBsZXQgbGVmdCwgdG9wO1xuXG4gIGlmIChhbmdsZSA9PT0gMCkge1xuICAgIGxlZnQgPSB0eFs0XTtcbiAgICB0b3AgPSB0eFs1XSAtIGZvbnRBc2NlbnQ7XG4gIH0gZWxzZSB7XG4gICAgbGVmdCA9IHR4WzRdICsgZm9udEFzY2VudCAqIE1hdGguc2luKGFuZ2xlKTtcbiAgICB0b3AgPSB0eFs1XSAtIGZvbnRBc2NlbnQgKiBNYXRoLmNvcyhhbmdsZSk7XG4gIH1cblxuICB0ZXh0RGl2LnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcbiAgdGV4dERpdi5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICB0ZXh0RGl2LnN0eWxlLmZvbnRTaXplID0gYCR7Zm9udEhlaWdodH1weGA7XG4gIHRleHREaXYuc3R5bGUuZm9udEZhbWlseSA9IHN0eWxlLmZvbnRGYW1pbHk7XG4gIHRleHREaXYuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInByZXNlbnRhdGlvblwiKTtcbiAgdGV4dERpdi50ZXh0Q29udGVudCA9IGdlb20uc3RyO1xuICB0ZXh0RGl2LmRpciA9IGdlb20uZGlyO1xuXG4gIGlmICh0YXNrLl9mb250SW5zcGVjdG9yRW5hYmxlZCkge1xuICAgIHRleHREaXYuZGF0YXNldC5mb250TmFtZSA9IGdlb20uZm9udE5hbWU7XG4gIH1cblxuICBpZiAoYW5nbGUgIT09IDApIHtcbiAgICB0ZXh0RGl2UHJvcGVydGllcy5hbmdsZSA9IGFuZ2xlICogKDE4MCAvIE1hdGguUEkpO1xuICB9XG5cbiAgbGV0IHNob3VsZFNjYWxlVGV4dCA9IGZhbHNlO1xuXG4gIGlmIChnZW9tLnN0ci5sZW5ndGggPiAxIHx8IHRhc2suX2VuaGFuY2VUZXh0U2VsZWN0aW9uICYmIEFsbFdoaXRlc3BhY2VSZWdleHAudGVzdChnZW9tLnN0cikpIHtcbiAgICBzaG91bGRTY2FsZVRleHQgPSB0cnVlO1xuICB9IGVsc2UgaWYgKGdlb20uc3RyICE9PSBcIiBcIiAmJiBnZW9tLnRyYW5zZm9ybVswXSAhPT0gZ2VvbS50cmFuc2Zvcm1bM10pIHtcbiAgICBjb25zdCBhYnNTY2FsZVggPSBNYXRoLmFicyhnZW9tLnRyYW5zZm9ybVswXSksXG4gICAgICAgICAgYWJzU2NhbGVZID0gTWF0aC5hYnMoZ2VvbS50cmFuc2Zvcm1bM10pO1xuXG4gICAgaWYgKGFic1NjYWxlWCAhPT0gYWJzU2NhbGVZICYmIE1hdGgubWF4KGFic1NjYWxlWCwgYWJzU2NhbGVZKSAvIE1hdGgubWluKGFic1NjYWxlWCwgYWJzU2NhbGVZKSA+IDEuNSkge1xuICAgICAgc2hvdWxkU2NhbGVUZXh0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoc2hvdWxkU2NhbGVUZXh0KSB7XG4gICAgaWYgKHN0eWxlLnZlcnRpY2FsKSB7XG4gICAgICB0ZXh0RGl2UHJvcGVydGllcy5jYW52YXNXaWR0aCA9IGdlb20uaGVpZ2h0ICogdGFzay5fdmlld3BvcnQuc2NhbGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRleHREaXZQcm9wZXJ0aWVzLmNhbnZhc1dpZHRoID0gZ2VvbS53aWR0aCAqIHRhc2suX3ZpZXdwb3J0LnNjYWxlO1xuICAgIH1cbiAgfVxuXG4gIHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLnNldCh0ZXh0RGl2LCB0ZXh0RGl2UHJvcGVydGllcyk7XG5cbiAgaWYgKHRhc2suX3RleHRDb250ZW50U3RyZWFtKSB7XG4gICAgdGFzay5fbGF5b3V0VGV4dCh0ZXh0RGl2KTtcbiAgfVxuXG4gIGlmICh0YXNrLl9lbmhhbmNlVGV4dFNlbGVjdGlvbiAmJiB0ZXh0RGl2UHJvcGVydGllcy5oYXNUZXh0KSB7XG4gICAgbGV0IGFuZ2xlQ29zID0gMSxcbiAgICAgICAgYW5nbGVTaW4gPSAwO1xuXG4gICAgaWYgKGFuZ2xlICE9PSAwKSB7XG4gICAgICBhbmdsZUNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICAgIGFuZ2xlU2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGRpdldpZHRoID0gKHN0eWxlLnZlcnRpY2FsID8gZ2VvbS5oZWlnaHQgOiBnZW9tLndpZHRoKSAqIHRhc2suX3ZpZXdwb3J0LnNjYWxlO1xuICAgIGNvbnN0IGRpdkhlaWdodCA9IGZvbnRIZWlnaHQ7XG4gICAgbGV0IG0sIGI7XG5cbiAgICBpZiAoYW5nbGUgIT09IDApIHtcbiAgICAgIG0gPSBbYW5nbGVDb3MsIGFuZ2xlU2luLCAtYW5nbGVTaW4sIGFuZ2xlQ29zLCBsZWZ0LCB0b3BdO1xuICAgICAgYiA9IF91dGlsLlV0aWwuZ2V0QXhpYWxBbGlnbmVkQm91bmRpbmdCb3goWzAsIDAsIGRpdldpZHRoLCBkaXZIZWlnaHRdLCBtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYiA9IFtsZWZ0LCB0b3AsIGxlZnQgKyBkaXZXaWR0aCwgdG9wICsgZGl2SGVpZ2h0XTtcbiAgICB9XG5cbiAgICB0YXNrLl9ib3VuZHMucHVzaCh7XG4gICAgICBsZWZ0OiBiWzBdLFxuICAgICAgdG9wOiBiWzFdLFxuICAgICAgcmlnaHQ6IGJbMl0sXG4gICAgICBib3R0b206IGJbM10sXG4gICAgICBkaXY6IHRleHREaXYsXG4gICAgICBzaXplOiBbZGl2V2lkdGgsIGRpdkhlaWdodF0sXG4gICAgICBtXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyKHRhc2spIHtcbiAgaWYgKHRhc2suX2NhbmNlbGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdGV4dERpdnMgPSB0YXNrLl90ZXh0RGl2cztcbiAgY29uc3QgY2FwYWJpbGl0eSA9IHRhc2suX2NhcGFiaWxpdHk7XG4gIGNvbnN0IHRleHREaXZzTGVuZ3RoID0gdGV4dERpdnMubGVuZ3RoO1xuXG4gIGlmICh0ZXh0RGl2c0xlbmd0aCA+IE1BWF9URVhUX0RJVlNfVE9fUkVOREVSKSB7XG4gICAgdGFzay5fcmVuZGVyaW5nRG9uZSA9IHRydWU7XG4gICAgY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF0YXNrLl90ZXh0Q29udGVudFN0cmVhbSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dERpdnNMZW5ndGg7IGkrKykge1xuICAgICAgdGFzay5fbGF5b3V0VGV4dCh0ZXh0RGl2c1tpXSk7XG4gICAgfVxuICB9XG5cbiAgdGFzay5fcmVuZGVyaW5nRG9uZSA9IHRydWU7XG4gIGNhcGFiaWxpdHkucmVzb2x2ZSgpO1xufVxuXG5mdW5jdGlvbiBmaW5kUG9zaXRpdmVNaW4odHMsIG9mZnNldCwgY291bnQpIHtcbiAgbGV0IHJlc3VsdCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgY29uc3QgdCA9IHRzW29mZnNldCsrXTtcblxuICAgIGlmICh0ID4gMCkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0ID8gTWF0aC5taW4odCwgcmVzdWx0KSA6IHQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZXhwYW5kKHRhc2spIHtcbiAgY29uc3QgYm91bmRzID0gdGFzay5fYm91bmRzO1xuICBjb25zdCB2aWV3cG9ydCA9IHRhc2suX3ZpZXdwb3J0O1xuICBjb25zdCBleHBhbmRlZCA9IGV4cGFuZEJvdW5kcyh2aWV3cG9ydC53aWR0aCwgdmlld3BvcnQuaGVpZ2h0LCBib3VuZHMpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZXhwYW5kZWQubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBkaXYgPSBib3VuZHNbaV0uZGl2O1xuXG4gICAgY29uc3QgZGl2UHJvcGVydGllcyA9IHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLmdldChkaXYpO1xuXG4gICAgaWYgKGRpdlByb3BlcnRpZXMuYW5nbGUgPT09IDApIHtcbiAgICAgIGRpdlByb3BlcnRpZXMucGFkZGluZ0xlZnQgPSBib3VuZHNbaV0ubGVmdCAtIGV4cGFuZGVkW2ldLmxlZnQ7XG4gICAgICBkaXZQcm9wZXJ0aWVzLnBhZGRpbmdUb3AgPSBib3VuZHNbaV0udG9wIC0gZXhwYW5kZWRbaV0udG9wO1xuICAgICAgZGl2UHJvcGVydGllcy5wYWRkaW5nUmlnaHQgPSBleHBhbmRlZFtpXS5yaWdodCAtIGJvdW5kc1tpXS5yaWdodDtcbiAgICAgIGRpdlByb3BlcnRpZXMucGFkZGluZ0JvdHRvbSA9IGV4cGFuZGVkW2ldLmJvdHRvbSAtIGJvdW5kc1tpXS5ib3R0b207XG5cbiAgICAgIHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLnNldChkaXYsIGRpdlByb3BlcnRpZXMpO1xuXG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBlID0gZXhwYW5kZWRbaV0sXG4gICAgICAgICAgYiA9IGJvdW5kc1tpXTtcbiAgICBjb25zdCBtID0gYi5tLFxuICAgICAgICAgIGMgPSBtWzBdLFxuICAgICAgICAgIHMgPSBtWzFdO1xuICAgIGNvbnN0IHBvaW50cyA9IFtbMCwgMF0sIFswLCBiLnNpemVbMV1dLCBbYi5zaXplWzBdLCAwXSwgYi5zaXplXTtcbiAgICBjb25zdCB0cyA9IG5ldyBGbG9hdDY0QXJyYXkoNjQpO1xuXG4gICAgZm9yIChsZXQgaiA9IDAsIGpqID0gcG9pbnRzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgIGNvbnN0IHQgPSBfdXRpbC5VdGlsLmFwcGx5VHJhbnNmb3JtKHBvaW50c1tqXSwgbSk7XG5cbiAgICAgIHRzW2ogKyAwXSA9IGMgJiYgKGUubGVmdCAtIHRbMF0pIC8gYztcbiAgICAgIHRzW2ogKyA0XSA9IHMgJiYgKGUudG9wIC0gdFsxXSkgLyBzO1xuICAgICAgdHNbaiArIDhdID0gYyAmJiAoZS5yaWdodCAtIHRbMF0pIC8gYztcbiAgICAgIHRzW2ogKyAxMl0gPSBzICYmIChlLmJvdHRvbSAtIHRbMV0pIC8gcztcbiAgICAgIHRzW2ogKyAxNl0gPSBzICYmIChlLmxlZnQgLSB0WzBdKSAvIC1zO1xuICAgICAgdHNbaiArIDIwXSA9IGMgJiYgKGUudG9wIC0gdFsxXSkgLyBjO1xuICAgICAgdHNbaiArIDI0XSA9IHMgJiYgKGUucmlnaHQgLSB0WzBdKSAvIC1zO1xuICAgICAgdHNbaiArIDI4XSA9IGMgJiYgKGUuYm90dG9tIC0gdFsxXSkgLyBjO1xuICAgICAgdHNbaiArIDMyXSA9IGMgJiYgKGUubGVmdCAtIHRbMF0pIC8gLWM7XG4gICAgICB0c1tqICsgMzZdID0gcyAmJiAoZS50b3AgLSB0WzFdKSAvIC1zO1xuICAgICAgdHNbaiArIDQwXSA9IGMgJiYgKGUucmlnaHQgLSB0WzBdKSAvIC1jO1xuICAgICAgdHNbaiArIDQ0XSA9IHMgJiYgKGUuYm90dG9tIC0gdFsxXSkgLyAtcztcbiAgICAgIHRzW2ogKyA0OF0gPSBzICYmIChlLmxlZnQgLSB0WzBdKSAvIHM7XG4gICAgICB0c1tqICsgNTJdID0gYyAmJiAoZS50b3AgLSB0WzFdKSAvIC1jO1xuICAgICAgdHNbaiArIDU2XSA9IHMgJiYgKGUucmlnaHQgLSB0WzBdKSAvIHM7XG4gICAgICB0c1tqICsgNjBdID0gYyAmJiAoZS5ib3R0b20gLSB0WzFdKSAvIC1jO1xuICAgIH1cblxuICAgIGNvbnN0IGJveFNjYWxlID0gMSArIE1hdGgubWluKE1hdGguYWJzKGMpLCBNYXRoLmFicyhzKSk7XG4gICAgZGl2UHJvcGVydGllcy5wYWRkaW5nTGVmdCA9IGZpbmRQb3NpdGl2ZU1pbih0cywgMzIsIDE2KSAvIGJveFNjYWxlO1xuICAgIGRpdlByb3BlcnRpZXMucGFkZGluZ1RvcCA9IGZpbmRQb3NpdGl2ZU1pbih0cywgNDgsIDE2KSAvIGJveFNjYWxlO1xuICAgIGRpdlByb3BlcnRpZXMucGFkZGluZ1JpZ2h0ID0gZmluZFBvc2l0aXZlTWluKHRzLCAwLCAxNikgLyBib3hTY2FsZTtcbiAgICBkaXZQcm9wZXJ0aWVzLnBhZGRpbmdCb3R0b20gPSBmaW5kUG9zaXRpdmVNaW4odHMsIDE2LCAxNikgLyBib3hTY2FsZTtcblxuICAgIHRhc2suX3RleHREaXZQcm9wZXJ0aWVzLnNldChkaXYsIGRpdlByb3BlcnRpZXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV4cGFuZEJvdW5kcyh3aWR0aCwgaGVpZ2h0LCBib3hlcykge1xuICBjb25zdCBib3VuZHMgPSBib3hlcy5tYXAoZnVuY3Rpb24gKGJveCwgaSkge1xuICAgIHJldHVybiB7XG4gICAgICB4MTogYm94LmxlZnQsXG4gICAgICB5MTogYm94LnRvcCxcbiAgICAgIHgyOiBib3gucmlnaHQsXG4gICAgICB5MjogYm94LmJvdHRvbSxcbiAgICAgIGluZGV4OiBpLFxuICAgICAgeDFOZXc6IHVuZGVmaW5lZCxcbiAgICAgIHgyTmV3OiB1bmRlZmluZWRcbiAgICB9O1xuICB9KTtcbiAgZXhwYW5kQm91bmRzTFRSKHdpZHRoLCBib3VuZHMpO1xuICBjb25zdCBleHBhbmRlZCA9IG5ldyBBcnJheShib3hlcy5sZW5ndGgpO1xuXG4gIGZvciAoY29uc3QgYiBvZiBib3VuZHMpIHtcbiAgICBjb25zdCBpID0gYi5pbmRleDtcbiAgICBleHBhbmRlZFtpXSA9IHtcbiAgICAgIGxlZnQ6IGIueDFOZXcsXG4gICAgICB0b3A6IDAsXG4gICAgICByaWdodDogYi54Mk5ldyxcbiAgICAgIGJvdHRvbTogMFxuICAgIH07XG4gIH1cblxuICBib3hlcy5tYXAoZnVuY3Rpb24gKGJveCwgaSkge1xuICAgIGNvbnN0IGUgPSBleHBhbmRlZFtpXSxcbiAgICAgICAgICBiID0gYm91bmRzW2ldO1xuICAgIGIueDEgPSBib3gudG9wO1xuICAgIGIueTEgPSB3aWR0aCAtIGUucmlnaHQ7XG4gICAgYi54MiA9IGJveC5ib3R0b207XG4gICAgYi55MiA9IHdpZHRoIC0gZS5sZWZ0O1xuICAgIGIuaW5kZXggPSBpO1xuICAgIGIueDFOZXcgPSB1bmRlZmluZWQ7XG4gICAgYi54Mk5ldyA9IHVuZGVmaW5lZDtcbiAgfSk7XG4gIGV4cGFuZEJvdW5kc0xUUihoZWlnaHQsIGJvdW5kcyk7XG5cbiAgZm9yIChjb25zdCBiIG9mIGJvdW5kcykge1xuICAgIGNvbnN0IGkgPSBiLmluZGV4O1xuICAgIGV4cGFuZGVkW2ldLnRvcCA9IGIueDFOZXc7XG4gICAgZXhwYW5kZWRbaV0uYm90dG9tID0gYi54Mk5ldztcbiAgfVxuXG4gIHJldHVybiBleHBhbmRlZDtcbn1cblxuZnVuY3Rpb24gZXhwYW5kQm91bmRzTFRSKHdpZHRoLCBib3VuZHMpIHtcbiAgYm91bmRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYS54MSAtIGIueDEgfHwgYS5pbmRleCAtIGIuaW5kZXg7XG4gIH0pO1xuICBjb25zdCBmYWtlQm91bmRhcnkgPSB7XG4gICAgeDE6IC1JbmZpbml0eSxcbiAgICB5MTogLUluZmluaXR5LFxuICAgIHgyOiAwLFxuICAgIHkyOiBJbmZpbml0eSxcbiAgICBpbmRleDogLTEsXG4gICAgeDFOZXc6IDAsXG4gICAgeDJOZXc6IDBcbiAgfTtcbiAgY29uc3QgaG9yaXpvbiA9IFt7XG4gICAgc3RhcnQ6IC1JbmZpbml0eSxcbiAgICBlbmQ6IEluZmluaXR5LFxuICAgIGJvdW5kYXJ5OiBmYWtlQm91bmRhcnlcbiAgfV07XG5cbiAgZm9yIChjb25zdCBib3VuZGFyeSBvZiBib3VuZHMpIHtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IGhvcml6b24ubGVuZ3RoICYmIGhvcml6b25baV0uZW5kIDw9IGJvdW5kYXJ5LnkxKSB7XG4gICAgICBpKys7XG4gICAgfVxuXG4gICAgbGV0IGogPSBob3Jpem9uLmxlbmd0aCAtIDE7XG5cbiAgICB3aGlsZSAoaiA+PSAwICYmIGhvcml6b25bal0uc3RhcnQgPj0gYm91bmRhcnkueTIpIHtcbiAgICAgIGotLTtcbiAgICB9XG5cbiAgICBsZXQgaG9yaXpvblBhcnQsIGFmZmVjdGVkQm91bmRhcnk7XG4gICAgbGV0IHEsXG4gICAgICAgIGssXG4gICAgICAgIG1heFhOZXcgPSAtSW5maW5pdHk7XG5cbiAgICBmb3IgKHEgPSBpOyBxIDw9IGo7IHErKykge1xuICAgICAgaG9yaXpvblBhcnQgPSBob3Jpem9uW3FdO1xuICAgICAgYWZmZWN0ZWRCb3VuZGFyeSA9IGhvcml6b25QYXJ0LmJvdW5kYXJ5O1xuICAgICAgbGV0IHhOZXc7XG5cbiAgICAgIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyID4gYm91bmRhcnkueDEpIHtcbiAgICAgICAgeE5ldyA9IGFmZmVjdGVkQm91bmRhcnkuaW5kZXggPiBib3VuZGFyeS5pbmRleCA/IGFmZmVjdGVkQm91bmRhcnkueDFOZXcgOiBib3VuZGFyeS54MTtcbiAgICAgIH0gZWxzZSBpZiAoYWZmZWN0ZWRCb3VuZGFyeS54Mk5ldyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHhOZXcgPSAoYWZmZWN0ZWRCb3VuZGFyeS54MiArIGJvdW5kYXJ5LngxKSAvIDI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4TmV3ID0gYWZmZWN0ZWRCb3VuZGFyeS54Mk5ldztcbiAgICAgIH1cblxuICAgICAgaWYgKHhOZXcgPiBtYXhYTmV3KSB7XG4gICAgICAgIG1heFhOZXcgPSB4TmV3O1xuICAgICAgfVxuICAgIH1cblxuICAgIGJvdW5kYXJ5LngxTmV3ID0gbWF4WE5ldztcblxuICAgIGZvciAocSA9IGk7IHEgPD0gajsgcSsrKSB7XG4gICAgICBob3Jpem9uUGFydCA9IGhvcml6b25bcV07XG4gICAgICBhZmZlY3RlZEJvdW5kYXJ5ID0gaG9yaXpvblBhcnQuYm91bmRhcnk7XG5cbiAgICAgIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFmZmVjdGVkQm91bmRhcnkueDIgPiBib3VuZGFyeS54MSkge1xuICAgICAgICAgIGlmIChhZmZlY3RlZEJvdW5kYXJ5LmluZGV4ID4gYm91bmRhcnkuaW5kZXgpIHtcbiAgICAgICAgICAgIGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPSBhZmZlY3RlZEJvdW5kYXJ5LngyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID0gbWF4WE5ldztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID4gbWF4WE5ldykge1xuICAgICAgICBhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID0gTWF0aC5tYXgobWF4WE5ldywgYWZmZWN0ZWRCb3VuZGFyeS54Mik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlZEhvcml6b24gPSBbXTtcbiAgICBsZXQgbGFzdEJvdW5kYXJ5ID0gbnVsbDtcblxuICAgIGZvciAocSA9IGk7IHEgPD0gajsgcSsrKSB7XG4gICAgICBob3Jpem9uUGFydCA9IGhvcml6b25bcV07XG4gICAgICBhZmZlY3RlZEJvdW5kYXJ5ID0gaG9yaXpvblBhcnQuYm91bmRhcnk7XG4gICAgICBjb25zdCB1c2VCb3VuZGFyeSA9IGFmZmVjdGVkQm91bmRhcnkueDIgPiBib3VuZGFyeS54MiA/IGFmZmVjdGVkQm91bmRhcnkgOiBib3VuZGFyeTtcblxuICAgICAgaWYgKGxhc3RCb3VuZGFyeSA9PT0gdXNlQm91bmRhcnkpIHtcbiAgICAgICAgY2hhbmdlZEhvcml6b25bY2hhbmdlZEhvcml6b24ubGVuZ3RoIC0gMV0uZW5kID0gaG9yaXpvblBhcnQuZW5kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlZEhvcml6b24ucHVzaCh7XG4gICAgICAgICAgc3RhcnQ6IGhvcml6b25QYXJ0LnN0YXJ0LFxuICAgICAgICAgIGVuZDogaG9yaXpvblBhcnQuZW5kLFxuICAgICAgICAgIGJvdW5kYXJ5OiB1c2VCb3VuZGFyeVxuICAgICAgICB9KTtcbiAgICAgICAgbGFzdEJvdW5kYXJ5ID0gdXNlQm91bmRhcnk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhvcml6b25baV0uc3RhcnQgPCBib3VuZGFyeS55MSkge1xuICAgICAgY2hhbmdlZEhvcml6b25bMF0uc3RhcnQgPSBib3VuZGFyeS55MTtcbiAgICAgIGNoYW5nZWRIb3Jpem9uLnVuc2hpZnQoe1xuICAgICAgICBzdGFydDogaG9yaXpvbltpXS5zdGFydCxcbiAgICAgICAgZW5kOiBib3VuZGFyeS55MSxcbiAgICAgICAgYm91bmRhcnk6IGhvcml6b25baV0uYm91bmRhcnlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChib3VuZGFyeS55MiA8IGhvcml6b25bal0uZW5kKSB7XG4gICAgICBjaGFuZ2VkSG9yaXpvbltjaGFuZ2VkSG9yaXpvbi5sZW5ndGggLSAxXS5lbmQgPSBib3VuZGFyeS55MjtcbiAgICAgIGNoYW5nZWRIb3Jpem9uLnB1c2goe1xuICAgICAgICBzdGFydDogYm91bmRhcnkueTIsXG4gICAgICAgIGVuZDogaG9yaXpvbltqXS5lbmQsXG4gICAgICAgIGJvdW5kYXJ5OiBob3Jpem9uW2pdLmJvdW5kYXJ5XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKHEgPSBpOyBxIDw9IGo7IHErKykge1xuICAgICAgaG9yaXpvblBhcnQgPSBob3Jpem9uW3FdO1xuICAgICAgYWZmZWN0ZWRCb3VuZGFyeSA9IGhvcml6b25QYXJ0LmJvdW5kYXJ5O1xuXG4gICAgICBpZiAoYWZmZWN0ZWRCb3VuZGFyeS54Mk5ldyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgdXNlZCA9IGZhbHNlO1xuXG4gICAgICBmb3IgKGsgPSBpIC0gMTsgIXVzZWQgJiYgayA+PSAwICYmIGhvcml6b25ba10uc3RhcnQgPj0gYWZmZWN0ZWRCb3VuZGFyeS55MTsgay0tKSB7XG4gICAgICAgIHVzZWQgPSBob3Jpem9uW2tdLmJvdW5kYXJ5ID09PSBhZmZlY3RlZEJvdW5kYXJ5O1xuICAgICAgfVxuXG4gICAgICBmb3IgKGsgPSBqICsgMTsgIXVzZWQgJiYgayA8IGhvcml6b24ubGVuZ3RoICYmIGhvcml6b25ba10uZW5kIDw9IGFmZmVjdGVkQm91bmRhcnkueTI7IGsrKykge1xuICAgICAgICB1c2VkID0gaG9yaXpvbltrXS5ib3VuZGFyeSA9PT0gYWZmZWN0ZWRCb3VuZGFyeTtcbiAgICAgIH1cblxuICAgICAgZm9yIChrID0gMDsgIXVzZWQgJiYgayA8IGNoYW5nZWRIb3Jpem9uLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHVzZWQgPSBjaGFuZ2VkSG9yaXpvbltrXS5ib3VuZGFyeSA9PT0gYWZmZWN0ZWRCb3VuZGFyeTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF1c2VkKSB7XG4gICAgICAgIGFmZmVjdGVkQm91bmRhcnkueDJOZXcgPSBtYXhYTmV3O1xuICAgICAgfVxuICAgIH1cblxuICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoaG9yaXpvbiwgW2ksIGogLSBpICsgMV0uY29uY2F0KGNoYW5nZWRIb3Jpem9uKSk7XG4gIH1cblxuICBmb3IgKGNvbnN0IGhvcml6b25QYXJ0IG9mIGhvcml6b24pIHtcbiAgICBjb25zdCBhZmZlY3RlZEJvdW5kYXJ5ID0gaG9yaXpvblBhcnQuYm91bmRhcnk7XG5cbiAgICBpZiAoYWZmZWN0ZWRCb3VuZGFyeS54Mk5ldyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBhZmZlY3RlZEJvdW5kYXJ5LngyTmV3ID0gTWF0aC5tYXgod2lkdGgsIGFmZmVjdGVkQm91bmRhcnkueDIpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBUZXh0TGF5ZXJSZW5kZXJUYXNrIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHRleHRDb250ZW50LFxuICAgIHRleHRDb250ZW50U3RyZWFtLFxuICAgIGNvbnRhaW5lcixcbiAgICB2aWV3cG9ydCxcbiAgICB0ZXh0RGl2cyxcbiAgICB0ZXh0Q29udGVudEl0ZW1zU3RyLFxuICAgIGVuaGFuY2VUZXh0U2VsZWN0aW9uXG4gIH0pIHtcbiAgICB0aGlzLl90ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuICAgIHRoaXMuX3RleHRDb250ZW50U3RyZWFtID0gdGV4dENvbnRlbnRTdHJlYW07XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuX2RvY3VtZW50ID0gY29udGFpbmVyLm93bmVyRG9jdW1lbnQ7XG4gICAgdGhpcy5fdmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICB0aGlzLl90ZXh0RGl2cyA9IHRleHREaXZzIHx8IFtdO1xuICAgIHRoaXMuX3RleHRDb250ZW50SXRlbXNTdHIgPSB0ZXh0Q29udGVudEl0ZW1zU3RyIHx8IFtdO1xuICAgIHRoaXMuX2VuaGFuY2VUZXh0U2VsZWN0aW9uID0gISFlbmhhbmNlVGV4dFNlbGVjdGlvbjtcbiAgICB0aGlzLl9mb250SW5zcGVjdG9yRW5hYmxlZCA9ICEhZ2xvYmFsVGhpcy5Gb250SW5zcGVjdG9yPy5lbmFibGVkO1xuICAgIHRoaXMuX3JlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fbGF5b3V0VGV4dExhc3RGb250U2l6ZSA9IG51bGw7XG4gICAgdGhpcy5fbGF5b3V0VGV4dExhc3RGb250RmFtaWx5ID0gbnVsbDtcbiAgICB0aGlzLl9sYXlvdXRUZXh0Q3R4ID0gbnVsbDtcbiAgICB0aGlzLl90ZXh0RGl2UHJvcGVydGllcyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgdGhpcy5fcmVuZGVyaW5nRG9uZSA9IGZhbHNlO1xuICAgIHRoaXMuX2NhbmNlbGVkID0gZmFsc2U7XG4gICAgdGhpcy5fY2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICB0aGlzLl9yZW5kZXJUaW1lciA9IG51bGw7XG4gICAgdGhpcy5fYm91bmRzID0gW107XG5cbiAgICB0aGlzLl9jYXBhYmlsaXR5LnByb21pc2UuZmluYWxseSgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuX2VuaGFuY2VUZXh0U2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX3RleHREaXZQcm9wZXJ0aWVzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2xheW91dFRleHRDdHgpIHtcbiAgICAgICAgdGhpcy5fbGF5b3V0VGV4dEN0eC5jYW52YXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLl9sYXlvdXRUZXh0Q3R4LmNhbnZhcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLl9sYXlvdXRUZXh0Q3R4ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoKSA9PiB7fSk7XG4gIH1cblxuICBnZXQgcHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMuX2NhbmNlbGVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLl9yZWFkZXIpIHtcbiAgICAgIHRoaXMuX3JlYWRlci5jYW5jZWwobmV3IF91dGlsLkFib3J0RXhjZXB0aW9uKFwiVGV4dExheWVyIHRhc2sgY2FuY2VsbGVkLlwiKSkuY2F0Y2goKCkgPT4ge30pO1xuXG4gICAgICB0aGlzLl9yZWFkZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9yZW5kZXJUaW1lciAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JlbmRlclRpbWVyKTtcbiAgICAgIHRoaXMuX3JlbmRlclRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLl9jYXBhYmlsaXR5LnJlamVjdChuZXcgRXJyb3IoXCJUZXh0TGF5ZXIgdGFzayBjYW5jZWxsZWQuXCIpKTtcbiAgfVxuXG4gIF9wcm9jZXNzSXRlbXMoaXRlbXMsIHN0eWxlQ2FjaGUpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChpdGVtc1tpXS5zdHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaXRlbXNbaV0udHlwZSA9PT0gXCJiZWdpbk1hcmtlZENvbnRlbnRQcm9wc1wiIHx8IGl0ZW1zW2ldLnR5cGUgPT09IFwiYmVnaW5NYXJrZWRDb250ZW50XCIpIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLl9jb250YWluZXI7XG4gICAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cbiAgICAgICAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcmtlZENvbnRlbnRcIik7XG5cbiAgICAgICAgICBpZiAoaXRlbXNbaV0uaWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgJHtpdGVtc1tpXS5pZH1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtc1tpXS50eXBlID09PSBcImVuZE1hcmtlZENvbnRlbnRcIikge1xuICAgICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3RleHRDb250ZW50SXRlbXNTdHIucHVzaChpdGVtc1tpXS5zdHIpO1xuXG4gICAgICBhcHBlbmRUZXh0KHRoaXMsIGl0ZW1zW2ldLCBzdHlsZUNhY2hlLCB0aGlzLl9sYXlvdXRUZXh0Q3R4KTtcbiAgICB9XG4gIH1cblxuICBfbGF5b3V0VGV4dCh0ZXh0RGl2KSB7XG4gICAgY29uc3QgdGV4dERpdlByb3BlcnRpZXMgPSB0aGlzLl90ZXh0RGl2UHJvcGVydGllcy5nZXQodGV4dERpdik7XG5cbiAgICBsZXQgdHJhbnNmb3JtID0gXCJcIjtcblxuICAgIGlmICh0ZXh0RGl2UHJvcGVydGllcy5jYW52YXNXaWR0aCAhPT0gMCAmJiB0ZXh0RGl2UHJvcGVydGllcy5oYXNUZXh0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvbnRTaXplLFxuICAgICAgICBmb250RmFtaWx5XG4gICAgICB9ID0gdGV4dERpdi5zdHlsZTtcblxuICAgICAgaWYgKGZvbnRTaXplICE9PSB0aGlzLl9sYXlvdXRUZXh0TGFzdEZvbnRTaXplIHx8IGZvbnRGYW1pbHkgIT09IHRoaXMuX2xheW91dFRleHRMYXN0Rm9udEZhbWlseSkge1xuICAgICAgICB0aGlzLl9sYXlvdXRUZXh0Q3R4LmZvbnQgPSBgJHtmb250U2l6ZX0gJHtmb250RmFtaWx5fWA7XG4gICAgICAgIHRoaXMuX2xheW91dFRleHRMYXN0Rm9udFNpemUgPSBmb250U2l6ZTtcbiAgICAgICAgdGhpcy5fbGF5b3V0VGV4dExhc3RGb250RmFtaWx5ID0gZm9udEZhbWlseTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qge1xuICAgICAgICB3aWR0aFxuICAgICAgfSA9IHRoaXMuX2xheW91dFRleHRDdHgubWVhc3VyZVRleHQodGV4dERpdi50ZXh0Q29udGVudCk7XG5cbiAgICAgIGlmICh3aWR0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSB0ZXh0RGl2UHJvcGVydGllcy5jYW52YXNXaWR0aCAvIHdpZHRoO1xuXG4gICAgICAgIGlmICh0aGlzLl9lbmhhbmNlVGV4dFNlbGVjdGlvbikge1xuICAgICAgICAgIHRleHREaXZQcm9wZXJ0aWVzLnNjYWxlID0gc2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICB0cmFuc2Zvcm0gPSBgc2NhbGVYKCR7c2NhbGV9KWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRleHREaXZQcm9wZXJ0aWVzLmFuZ2xlICE9PSAwKSB7XG4gICAgICB0cmFuc2Zvcm0gPSBgcm90YXRlKCR7dGV4dERpdlByb3BlcnRpZXMuYW5nbGV9ZGVnKSAke3RyYW5zZm9ybX1gO1xuICAgIH1cblxuICAgIGlmICh0cmFuc2Zvcm0ubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHRoaXMuX2VuaGFuY2VUZXh0U2VsZWN0aW9uKSB7XG4gICAgICAgIHRleHREaXZQcm9wZXJ0aWVzLm9yaWdpbmFsVHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgfVxuXG4gICAgICB0ZXh0RGl2LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICB9XG5cbiAgICBpZiAodGV4dERpdlByb3BlcnRpZXMuaGFzVGV4dCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRleHREaXYpO1xuICAgIH1cblxuICAgIGlmICh0ZXh0RGl2UHJvcGVydGllcy5oYXNFT0wpIHtcbiAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuICAgICAgYnIuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInByZXNlbnRhdGlvblwiKTtcblxuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGJyKTtcbiAgICB9XG4gIH1cblxuICBfcmVuZGVyKHRpbWVvdXQgPSAwKSB7XG4gICAgY29uc3QgY2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICBsZXQgc3R5bGVDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXG4gICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy53aWR0aCA9IERFRkFVTFRfRk9OVF9TSVpFO1xuICAgIHRoaXMuX2xheW91dFRleHRDdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHtcbiAgICAgIGFscGhhOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX3RleHRDb250ZW50KSB7XG4gICAgICBjb25zdCB0ZXh0SXRlbXMgPSB0aGlzLl90ZXh0Q29udGVudC5pdGVtcztcbiAgICAgIGNvbnN0IHRleHRTdHlsZXMgPSB0aGlzLl90ZXh0Q29udGVudC5zdHlsZXM7XG5cbiAgICAgIHRoaXMuX3Byb2Nlc3NJdGVtcyh0ZXh0SXRlbXMsIHRleHRTdHlsZXMpO1xuXG4gICAgICBjYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3RleHRDb250ZW50U3RyZWFtKSB7XG4gICAgICBjb25zdCBwdW1wID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9yZWFkZXIucmVhZCgpLnRoZW4oKHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBkb25lXG4gICAgICAgIH0pID0+IHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgY2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihzdHlsZUNhY2hlLCB2YWx1ZS5zdHlsZXMpO1xuXG4gICAgICAgICAgdGhpcy5fcHJvY2Vzc0l0ZW1zKHZhbHVlLml0ZW1zLCBzdHlsZUNhY2hlKTtcblxuICAgICAgICAgIHB1bXAoKTtcbiAgICAgICAgfSwgY2FwYWJpbGl0eS5yZWplY3QpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcmVhZGVyID0gdGhpcy5fdGV4dENvbnRlbnRTdHJlYW0uZ2V0UmVhZGVyKCk7XG4gICAgICBwdW1wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTmVpdGhlciBcInRleHRDb250ZW50XCIgbm9yIFwidGV4dENvbnRlbnRTdHJlYW1cIiBwYXJhbWV0ZXJzIHNwZWNpZmllZC4nKTtcbiAgICB9XG5cbiAgICBjYXBhYmlsaXR5LnByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICBzdHlsZUNhY2hlID0gbnVsbDtcblxuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHJlbmRlcih0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3JlbmRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKHRoaXMpO1xuICAgICAgICAgIHRoaXMuX3JlbmRlclRpbWVyID0gbnVsbDtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICB9XG4gICAgfSwgdGhpcy5fY2FwYWJpbGl0eS5yZWplY3QpO1xuICB9XG5cbiAgZXhwYW5kVGV4dERpdnMoZXhwYW5kRGl2cyA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLl9lbmhhbmNlVGV4dFNlbGVjdGlvbiB8fCAhdGhpcy5fcmVuZGVyaW5nRG9uZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ib3VuZHMgIT09IG51bGwpIHtcbiAgICAgIGV4cGFuZCh0aGlzKTtcbiAgICAgIHRoaXMuX2JvdW5kcyA9IG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgdHJhbnNmb3JtQnVmID0gW10sXG4gICAgICAgICAgcGFkZGluZ0J1ZiA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5fdGV4dERpdnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3QgZGl2ID0gdGhpcy5fdGV4dERpdnNbaV07XG5cbiAgICAgIGNvbnN0IGRpdlByb3BzID0gdGhpcy5fdGV4dERpdlByb3BlcnRpZXMuZ2V0KGRpdik7XG5cbiAgICAgIGlmICghZGl2UHJvcHMuaGFzVGV4dCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV4cGFuZERpdnMpIHtcbiAgICAgICAgdHJhbnNmb3JtQnVmLmxlbmd0aCA9IDA7XG4gICAgICAgIHBhZGRpbmdCdWYubGVuZ3RoID0gMDtcblxuICAgICAgICBpZiAoZGl2UHJvcHMub3JpZ2luYWxUcmFuc2Zvcm0pIHtcbiAgICAgICAgICB0cmFuc2Zvcm1CdWYucHVzaChkaXZQcm9wcy5vcmlnaW5hbFRyYW5zZm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGl2UHJvcHMucGFkZGluZ1RvcCA+IDApIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goYCR7ZGl2UHJvcHMucGFkZGluZ1RvcH1weGApO1xuICAgICAgICAgIHRyYW5zZm9ybUJ1Zi5wdXNoKGB0cmFuc2xhdGVZKCR7LWRpdlByb3BzLnBhZGRpbmdUb3B9cHgpYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFkZGluZ0J1Zi5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpdlByb3BzLnBhZGRpbmdSaWdodCA+IDApIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goYCR7ZGl2UHJvcHMucGFkZGluZ1JpZ2h0IC8gZGl2UHJvcHMuc2NhbGV9cHhgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGl2UHJvcHMucGFkZGluZ0JvdHRvbSA+IDApIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goYCR7ZGl2UHJvcHMucGFkZGluZ0JvdHRvbX1weGApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhZGRpbmdCdWYucHVzaCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXZQcm9wcy5wYWRkaW5nTGVmdCA+IDApIHtcbiAgICAgICAgICBwYWRkaW5nQnVmLnB1c2goYCR7ZGl2UHJvcHMucGFkZGluZ0xlZnQgLyBkaXZQcm9wcy5zY2FsZX1weGApO1xuICAgICAgICAgIHRyYW5zZm9ybUJ1Zi5wdXNoKGB0cmFuc2xhdGVYKCR7LWRpdlByb3BzLnBhZGRpbmdMZWZ0IC8gZGl2UHJvcHMuc2NhbGV9cHgpYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFkZGluZ0J1Zi5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZGl2LnN0eWxlLnBhZGRpbmcgPSBwYWRkaW5nQnVmLmpvaW4oXCIgXCIpO1xuXG4gICAgICAgIGlmICh0cmFuc2Zvcm1CdWYubGVuZ3RoKSB7XG4gICAgICAgICAgZGl2LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybUJ1Zi5qb2luKFwiIFwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2LnN0eWxlLnBhZGRpbmcgPSBudWxsO1xuICAgICAgICBkaXYuc3R5bGUudHJhbnNmb3JtID0gZGl2UHJvcHMub3JpZ2luYWxUcmFuc2Zvcm07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuZnVuY3Rpb24gcmVuZGVyVGV4dExheWVyKHJlbmRlclBhcmFtZXRlcnMpIHtcbiAgY29uc3QgdGFzayA9IG5ldyBUZXh0TGF5ZXJSZW5kZXJUYXNrKHtcbiAgICB0ZXh0Q29udGVudDogcmVuZGVyUGFyYW1ldGVycy50ZXh0Q29udGVudCxcbiAgICB0ZXh0Q29udGVudFN0cmVhbTogcmVuZGVyUGFyYW1ldGVycy50ZXh0Q29udGVudFN0cmVhbSxcbiAgICBjb250YWluZXI6IHJlbmRlclBhcmFtZXRlcnMuY29udGFpbmVyLFxuICAgIHZpZXdwb3J0OiByZW5kZXJQYXJhbWV0ZXJzLnZpZXdwb3J0LFxuICAgIHRleHREaXZzOiByZW5kZXJQYXJhbWV0ZXJzLnRleHREaXZzLFxuICAgIHRleHRDb250ZW50SXRlbXNTdHI6IHJlbmRlclBhcmFtZXRlcnMudGV4dENvbnRlbnRJdGVtc1N0cixcbiAgICBlbmhhbmNlVGV4dFNlbGVjdGlvbjogcmVuZGVyUGFyYW1ldGVycy5lbmhhbmNlVGV4dFNlbGVjdGlvblxuICB9KTtcblxuICB0YXNrLl9yZW5kZXIocmVuZGVyUGFyYW1ldGVycy50aW1lb3V0KTtcblxuICByZXR1cm4gdGFzaztcbn1cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5TVkdHcmFwaGljcyA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxudmFyIF9kaXNwbGF5X3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pc19ub2RlID0gX193X3BkZmpzX3JlcXVpcmVfXygzKTtcblxubGV0IFNWR0dyYXBoaWNzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAoMCwgX3V0aWwudW5yZWFjaGFibGUpKFwiTm90IGltcGxlbWVudGVkOiBTVkdHcmFwaGljc1wiKTtcbiAgfVxuXG59O1xuZXhwb3J0cy5TVkdHcmFwaGljcyA9IFNWR0dyYXBoaWNzO1xue1xuICBjb25zdCBTVkdfREVGQVVMVFMgPSB7XG4gICAgZm9udFN0eWxlOiBcIm5vcm1hbFwiLFxuICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgZmlsbENvbG9yOiBcIiMwMDAwMDBcIlxuICB9O1xuICBjb25zdCBYTUxfTlMgPSBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiO1xuICBjb25zdCBYTElOS19OUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuICBjb25zdCBMSU5FX0NBUF9TVFlMRVMgPSBbXCJidXR0XCIsIFwicm91bmRcIiwgXCJzcXVhcmVcIl07XG4gIGNvbnN0IExJTkVfSk9JTl9TVFlMRVMgPSBbXCJtaXRlclwiLCBcInJvdW5kXCIsIFwiYmV2ZWxcIl07XG5cbiAgY29uc3QgY3JlYXRlT2JqZWN0VVJMID0gZnVuY3Rpb24gKGRhdGEsIGNvbnRlbnRUeXBlID0gXCJcIiwgZm9yY2VEYXRhU2NoZW1hID0gZmFsc2UpIHtcbiAgICBpZiAoVVJMLmNyZWF0ZU9iamVjdFVSTCAmJiB0eXBlb2YgQmxvYiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhZm9yY2VEYXRhU2NoZW1hKSB7XG4gICAgICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbZGF0YV0sIHtcbiAgICAgICAgdHlwZTogY29udGVudFR5cGVcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBjb25zdCBkaWdpdHMgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgbGV0IGJ1ZmZlciA9IGBkYXRhOiR7Y29udGVudFR5cGV9O2Jhc2U2NCxgO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZGF0YS5sZW5ndGg7IGkgPCBpaTsgaSArPSAzKSB7XG4gICAgICBjb25zdCBiMSA9IGRhdGFbaV0gJiAweGZmO1xuICAgICAgY29uc3QgYjIgPSBkYXRhW2kgKyAxXSAmIDB4ZmY7XG4gICAgICBjb25zdCBiMyA9IGRhdGFbaSArIDJdICYgMHhmZjtcbiAgICAgIGNvbnN0IGQxID0gYjEgPj4gMixcbiAgICAgICAgICAgIGQyID0gKGIxICYgMykgPDwgNCB8IGIyID4+IDQ7XG4gICAgICBjb25zdCBkMyA9IGkgKyAxIDwgaWkgPyAoYjIgJiAweGYpIDw8IDIgfCBiMyA+PiA2IDogNjQ7XG4gICAgICBjb25zdCBkNCA9IGkgKyAyIDwgaWkgPyBiMyAmIDB4M2YgOiA2NDtcbiAgICAgIGJ1ZmZlciArPSBkaWdpdHNbZDFdICsgZGlnaXRzW2QyXSArIGRpZ2l0c1tkM10gKyBkaWdpdHNbZDRdO1xuICAgIH1cblxuICAgIHJldHVybiBidWZmZXI7XG4gIH07XG5cbiAgY29uc3QgY29udmVydEltZ0RhdGFUb1BuZyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBQTkdfSEVBREVSID0gbmV3IFVpbnQ4QXJyYXkoWzB4ODksIDB4NTAsIDB4NGUsIDB4NDcsIDB4MGQsIDB4MGEsIDB4MWEsIDB4MGFdKTtcbiAgICBjb25zdCBDSFVOS19XUkFQUEVSX1NJWkUgPSAxMjtcbiAgICBjb25zdCBjcmNUYWJsZSA9IG5ldyBJbnQzMkFycmF5KDI1Nik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICBsZXQgYyA9IGk7XG5cbiAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgODsgaCsrKSB7XG4gICAgICAgIGlmIChjICYgMSkge1xuICAgICAgICAgIGMgPSAweGVkYjg4MzIwIF4gYyA+PiAxICYgMHg3ZmZmZmZmZjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjID0gYyA+PiAxICYgMHg3ZmZmZmZmZjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjcmNUYWJsZVtpXSA9IGM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JjMzIoZGF0YSwgc3RhcnQsIGVuZCkge1xuICAgICAgbGV0IGNyYyA9IC0xO1xuXG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICBjb25zdCBhID0gKGNyYyBeIGRhdGFbaV0pICYgMHhmZjtcbiAgICAgICAgY29uc3QgYiA9IGNyY1RhYmxlW2FdO1xuICAgICAgICBjcmMgPSBjcmMgPj4+IDggXiBiO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JjIF4gLTE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JpdGVQbmdDaHVuayh0eXBlLCBib2R5LCBkYXRhLCBvZmZzZXQpIHtcbiAgICAgIGxldCBwID0gb2Zmc2V0O1xuICAgICAgY29uc3QgbGVuID0gYm9keS5sZW5ndGg7XG4gICAgICBkYXRhW3BdID0gbGVuID4+IDI0ICYgMHhmZjtcbiAgICAgIGRhdGFbcCArIDFdID0gbGVuID4+IDE2ICYgMHhmZjtcbiAgICAgIGRhdGFbcCArIDJdID0gbGVuID4+IDggJiAweGZmO1xuICAgICAgZGF0YVtwICsgM10gPSBsZW4gJiAweGZmO1xuICAgICAgcCArPSA0O1xuICAgICAgZGF0YVtwXSA9IHR5cGUuY2hhckNvZGVBdCgwKSAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAxXSA9IHR5cGUuY2hhckNvZGVBdCgxKSAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAyXSA9IHR5cGUuY2hhckNvZGVBdCgyKSAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAzXSA9IHR5cGUuY2hhckNvZGVBdCgzKSAmIDB4ZmY7XG4gICAgICBwICs9IDQ7XG4gICAgICBkYXRhLnNldChib2R5LCBwKTtcbiAgICAgIHAgKz0gYm9keS5sZW5ndGg7XG4gICAgICBjb25zdCBjcmMgPSBjcmMzMihkYXRhLCBvZmZzZXQgKyA0LCBwKTtcbiAgICAgIGRhdGFbcF0gPSBjcmMgPj4gMjQgJiAweGZmO1xuICAgICAgZGF0YVtwICsgMV0gPSBjcmMgPj4gMTYgJiAweGZmO1xuICAgICAgZGF0YVtwICsgMl0gPSBjcmMgPj4gOCAmIDB4ZmY7XG4gICAgICBkYXRhW3AgKyAzXSA9IGNyYyAmIDB4ZmY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRsZXIzMihkYXRhLCBzdGFydCwgZW5kKSB7XG4gICAgICBsZXQgYSA9IDE7XG4gICAgICBsZXQgYiA9IDA7XG5cbiAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICAgIGEgPSAoYSArIChkYXRhW2ldICYgMHhmZikpICUgNjU1MjE7XG4gICAgICAgIGIgPSAoYiArIGEpICUgNjU1MjE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBiIDw8IDE2IHwgYTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZsYXRlU3luYyhsaXRlcmFscykge1xuICAgICAgaWYgKCFfaXNfbm9kZS5pc05vZGVKUykge1xuICAgICAgICByZXR1cm4gZGVmbGF0ZVN5bmNVbmNvbXByZXNzZWQobGl0ZXJhbHMpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBsZXQgaW5wdXQ7XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KHByb2Nlc3MudmVyc2lvbnMubm9kZSkgPj0gOCkge1xuICAgICAgICAgIGlucHV0ID0gbGl0ZXJhbHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5wdXQgPSBCdWZmZXIuZnJvbShsaXRlcmFscyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvdXRwdXQgPSByZXF1aXJlKFwiemxpYlwiKS5kZWZsYXRlU3luYyhpbnB1dCwge1xuICAgICAgICAgIGxldmVsOiA5XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvdXRwdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gb3V0cHV0IDogbmV3IFVpbnQ4QXJyYXkob3V0cHV0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgKDAsIF91dGlsLndhcm4pKFwiTm90IGNvbXByZXNzaW5nIFBORyBiZWNhdXNlIHpsaWIuZGVmbGF0ZVN5bmMgaXMgdW5hdmFpbGFibGU6IFwiICsgZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZWZsYXRlU3luY1VuY29tcHJlc3NlZChsaXRlcmFscyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmbGF0ZVN5bmNVbmNvbXByZXNzZWQobGl0ZXJhbHMpIHtcbiAgICAgIGxldCBsZW4gPSBsaXRlcmFscy5sZW5ndGg7XG4gICAgICBjb25zdCBtYXhCbG9ja0xlbmd0aCA9IDB4ZmZmZjtcbiAgICAgIGNvbnN0IGRlZmxhdGVCbG9ja3MgPSBNYXRoLmNlaWwobGVuIC8gbWF4QmxvY2tMZW5ndGgpO1xuICAgICAgY29uc3QgaWRhdCA9IG5ldyBVaW50OEFycmF5KDIgKyBsZW4gKyBkZWZsYXRlQmxvY2tzICogNSArIDQpO1xuICAgICAgbGV0IHBpID0gMDtcbiAgICAgIGlkYXRbcGkrK10gPSAweDc4O1xuICAgICAgaWRhdFtwaSsrXSA9IDB4OWM7XG4gICAgICBsZXQgcG9zID0gMDtcblxuICAgICAgd2hpbGUgKGxlbiA+IG1heEJsb2NrTGVuZ3RoKSB7XG4gICAgICAgIGlkYXRbcGkrK10gPSAweDAwO1xuICAgICAgICBpZGF0W3BpKytdID0gMHhmZjtcbiAgICAgICAgaWRhdFtwaSsrXSA9IDB4ZmY7XG4gICAgICAgIGlkYXRbcGkrK10gPSAweDAwO1xuICAgICAgICBpZGF0W3BpKytdID0gMHgwMDtcbiAgICAgICAgaWRhdC5zZXQobGl0ZXJhbHMuc3ViYXJyYXkocG9zLCBwb3MgKyBtYXhCbG9ja0xlbmd0aCksIHBpKTtcbiAgICAgICAgcGkgKz0gbWF4QmxvY2tMZW5ndGg7XG4gICAgICAgIHBvcyArPSBtYXhCbG9ja0xlbmd0aDtcbiAgICAgICAgbGVuIC09IG1heEJsb2NrTGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBpZGF0W3BpKytdID0gMHgwMTtcbiAgICAgIGlkYXRbcGkrK10gPSBsZW4gJiAweGZmO1xuICAgICAgaWRhdFtwaSsrXSA9IGxlbiA+PiA4ICYgMHhmZjtcbiAgICAgIGlkYXRbcGkrK10gPSB+bGVuICYgMHhmZmZmICYgMHhmZjtcbiAgICAgIGlkYXRbcGkrK10gPSAofmxlbiAmIDB4ZmZmZikgPj4gOCAmIDB4ZmY7XG4gICAgICBpZGF0LnNldChsaXRlcmFscy5zdWJhcnJheShwb3MpLCBwaSk7XG4gICAgICBwaSArPSBsaXRlcmFscy5sZW5ndGggLSBwb3M7XG4gICAgICBjb25zdCBhZGxlciA9IGFkbGVyMzIobGl0ZXJhbHMsIDAsIGxpdGVyYWxzLmxlbmd0aCk7XG4gICAgICBpZGF0W3BpKytdID0gYWRsZXIgPj4gMjQgJiAweGZmO1xuICAgICAgaWRhdFtwaSsrXSA9IGFkbGVyID4+IDE2ICYgMHhmZjtcbiAgICAgIGlkYXRbcGkrK10gPSBhZGxlciA+PiA4ICYgMHhmZjtcbiAgICAgIGlkYXRbcGkrK10gPSBhZGxlciAmIDB4ZmY7XG4gICAgICByZXR1cm4gaWRhdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGUoaW1nRGF0YSwga2luZCwgZm9yY2VEYXRhU2NoZW1hLCBpc01hc2spIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgICAgbGV0IGJpdERlcHRoLCBjb2xvclR5cGUsIGxpbmVTaXplO1xuICAgICAgY29uc3QgYnl0ZXMgPSBpbWdEYXRhLmRhdGE7XG5cbiAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICBjYXNlIF91dGlsLkltYWdlS2luZC5HUkFZU0NBTEVfMUJQUDpcbiAgICAgICAgICBjb2xvclR5cGUgPSAwO1xuICAgICAgICAgIGJpdERlcHRoID0gMTtcbiAgICAgICAgICBsaW5lU2l6ZSA9IHdpZHRoICsgNyA+PiAzO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgX3V0aWwuSW1hZ2VLaW5kLlJHQl8yNEJQUDpcbiAgICAgICAgICBjb2xvclR5cGUgPSAyO1xuICAgICAgICAgIGJpdERlcHRoID0gODtcbiAgICAgICAgICBsaW5lU2l6ZSA9IHdpZHRoICogMztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIF91dGlsLkltYWdlS2luZC5SR0JBXzMyQlBQOlxuICAgICAgICAgIGNvbG9yVHlwZSA9IDY7XG4gICAgICAgICAgYml0RGVwdGggPSA4O1xuICAgICAgICAgIGxpbmVTaXplID0gd2lkdGggKiA0O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBmb3JtYXRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpdGVyYWxzID0gbmV3IFVpbnQ4QXJyYXkoKDEgKyBsaW5lU2l6ZSkgKiBoZWlnaHQpO1xuICAgICAgbGV0IG9mZnNldExpdGVyYWxzID0gMCxcbiAgICAgICAgICBvZmZzZXRCeXRlcyA9IDA7XG5cbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyArK3kpIHtcbiAgICAgICAgbGl0ZXJhbHNbb2Zmc2V0TGl0ZXJhbHMrK10gPSAwO1xuICAgICAgICBsaXRlcmFscy5zZXQoYnl0ZXMuc3ViYXJyYXkob2Zmc2V0Qnl0ZXMsIG9mZnNldEJ5dGVzICsgbGluZVNpemUpLCBvZmZzZXRMaXRlcmFscyk7XG4gICAgICAgIG9mZnNldEJ5dGVzICs9IGxpbmVTaXplO1xuICAgICAgICBvZmZzZXRMaXRlcmFscyArPSBsaW5lU2l6ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGtpbmQgPT09IF91dGlsLkltYWdlS2luZC5HUkFZU0NBTEVfMUJQUCAmJiBpc01hc2spIHtcbiAgICAgICAgb2Zmc2V0TGl0ZXJhbHMgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICBvZmZzZXRMaXRlcmFscysrO1xuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBsaXRlcmFsc1tvZmZzZXRMaXRlcmFscysrXSBePSAweGZmO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBpaGRyID0gbmV3IFVpbnQ4QXJyYXkoW3dpZHRoID4+IDI0ICYgMHhmZiwgd2lkdGggPj4gMTYgJiAweGZmLCB3aWR0aCA+PiA4ICYgMHhmZiwgd2lkdGggJiAweGZmLCBoZWlnaHQgPj4gMjQgJiAweGZmLCBoZWlnaHQgPj4gMTYgJiAweGZmLCBoZWlnaHQgPj4gOCAmIDB4ZmYsIGhlaWdodCAmIDB4ZmYsIGJpdERlcHRoLCBjb2xvclR5cGUsIDB4MDAsIDB4MDAsIDB4MDBdKTtcbiAgICAgIGNvbnN0IGlkYXQgPSBkZWZsYXRlU3luYyhsaXRlcmFscyk7XG4gICAgICBjb25zdCBwbmdMZW5ndGggPSBQTkdfSEVBREVSLmxlbmd0aCArIENIVU5LX1dSQVBQRVJfU0laRSAqIDMgKyBpaGRyLmxlbmd0aCArIGlkYXQubGVuZ3RoO1xuICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KHBuZ0xlbmd0aCk7XG4gICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgIGRhdGEuc2V0KFBOR19IRUFERVIsIG9mZnNldCk7XG4gICAgICBvZmZzZXQgKz0gUE5HX0hFQURFUi5sZW5ndGg7XG4gICAgICB3cml0ZVBuZ0NodW5rKFwiSUhEUlwiLCBpaGRyLCBkYXRhLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IENIVU5LX1dSQVBQRVJfU0laRSArIGloZHIubGVuZ3RoO1xuICAgICAgd3JpdGVQbmdDaHVuayhcIklEQVRBXCIsIGlkYXQsIGRhdGEsIG9mZnNldCk7XG4gICAgICBvZmZzZXQgKz0gQ0hVTktfV1JBUFBFUl9TSVpFICsgaWRhdC5sZW5ndGg7XG4gICAgICB3cml0ZVBuZ0NodW5rKFwiSUVORFwiLCBuZXcgVWludDhBcnJheSgwKSwgZGF0YSwgb2Zmc2V0KTtcbiAgICAgIHJldHVybiBjcmVhdGVPYmplY3RVUkwoZGF0YSwgXCJpbWFnZS9wbmdcIiwgZm9yY2VEYXRhU2NoZW1hKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gY29udmVydEltZ0RhdGFUb1BuZyhpbWdEYXRhLCBmb3JjZURhdGFTY2hlbWEsIGlzTWFzaykge1xuICAgICAgY29uc3Qga2luZCA9IGltZ0RhdGEua2luZCA9PT0gdW5kZWZpbmVkID8gX3V0aWwuSW1hZ2VLaW5kLkdSQVlTQ0FMRV8xQlBQIDogaW1nRGF0YS5raW5kO1xuICAgICAgcmV0dXJuIGVuY29kZShpbWdEYXRhLCBraW5kLCBmb3JjZURhdGFTY2hlbWEsIGlzTWFzayk7XG4gICAgfTtcbiAgfSgpO1xuXG4gIGNsYXNzIFNWR0V4dHJhU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgdGhpcy5mb250U2l6ZVNjYWxlID0gMTtcbiAgICAgIHRoaXMuZm9udFdlaWdodCA9IFNWR19ERUZBVUxUUy5mb250V2VpZ2h0O1xuICAgICAgdGhpcy5mb250U2l6ZSA9IDA7XG4gICAgICB0aGlzLnRleHRNYXRyaXggPSBfdXRpbC5JREVOVElUWV9NQVRSSVg7XG4gICAgICB0aGlzLmZvbnRNYXRyaXggPSBfdXRpbC5GT05UX0lERU5USVRZX01BVFJJWDtcbiAgICAgIHRoaXMubGVhZGluZyA9IDA7XG4gICAgICB0aGlzLnRleHRSZW5kZXJpbmdNb2RlID0gX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuRklMTDtcbiAgICAgIHRoaXMudGV4dE1hdHJpeFNjYWxlID0gMTtcbiAgICAgIHRoaXMueCA9IDA7XG4gICAgICB0aGlzLnkgPSAwO1xuICAgICAgdGhpcy5saW5lWCA9IDA7XG4gICAgICB0aGlzLmxpbmVZID0gMDtcbiAgICAgIHRoaXMuY2hhclNwYWNpbmcgPSAwO1xuICAgICAgdGhpcy53b3JkU3BhY2luZyA9IDA7XG4gICAgICB0aGlzLnRleHRIU2NhbGUgPSAxO1xuICAgICAgdGhpcy50ZXh0UmlzZSA9IDA7XG4gICAgICB0aGlzLmZpbGxDb2xvciA9IFNWR19ERUZBVUxUUy5maWxsQ29sb3I7XG4gICAgICB0aGlzLnN0cm9rZUNvbG9yID0gXCIjMDAwMDAwXCI7XG4gICAgICB0aGlzLmZpbGxBbHBoYSA9IDE7XG4gICAgICB0aGlzLnN0cm9rZUFscGhhID0gMTtcbiAgICAgIHRoaXMubGluZVdpZHRoID0gMTtcbiAgICAgIHRoaXMubGluZUpvaW4gPSBcIlwiO1xuICAgICAgdGhpcy5saW5lQ2FwID0gXCJcIjtcbiAgICAgIHRoaXMubWl0ZXJMaW1pdCA9IDA7XG4gICAgICB0aGlzLmRhc2hBcnJheSA9IFtdO1xuICAgICAgdGhpcy5kYXNoUGhhc2UgPSAwO1xuICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTtcbiAgICAgIHRoaXMuYWN0aXZlQ2xpcFVybCA9IG51bGw7XG4gICAgICB0aGlzLmNsaXBHcm91cCA9IG51bGw7XG4gICAgICB0aGlzLm1hc2tJZCA9IFwiXCI7XG4gICAgfVxuXG4gICAgY2xvbmUoKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG5cbiAgICBzZXRDdXJyZW50UG9pbnQoeCwgeSkge1xuICAgICAgdGhpcy54ID0geDtcbiAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBvcExpc3RUb1RyZWUob3BMaXN0KSB7XG4gICAgbGV0IG9wVHJlZSA9IFtdO1xuICAgIGNvbnN0IHRtcCA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBvcExpc3RFbGVtZW50IG9mIG9wTGlzdCkge1xuICAgICAgaWYgKG9wTGlzdEVsZW1lbnQuZm4gPT09IFwic2F2ZVwiKSB7XG4gICAgICAgIG9wVHJlZS5wdXNoKHtcbiAgICAgICAgICBmbklkOiA5MixcbiAgICAgICAgICBmbjogXCJncm91cFwiLFxuICAgICAgICAgIGl0ZW1zOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgdG1wLnB1c2gob3BUcmVlKTtcbiAgICAgICAgb3BUcmVlID0gb3BUcmVlW29wVHJlZS5sZW5ndGggLSAxXS5pdGVtcztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcExpc3RFbGVtZW50LmZuID09PSBcInJlc3RvcmVcIikge1xuICAgICAgICBvcFRyZWUgPSB0bXAucG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcFRyZWUucHVzaChvcExpc3RFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3BUcmVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcGYodmFsdWUpIHtcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGNvbnN0IHMgPSB2YWx1ZS50b0ZpeGVkKDEwKTtcbiAgICBsZXQgaSA9IHMubGVuZ3RoIC0gMTtcblxuICAgIGlmIChzW2ldICE9PSBcIjBcIikge1xuICAgICAgcmV0dXJuIHM7XG4gICAgfVxuXG4gICAgZG8ge1xuICAgICAgaS0tO1xuICAgIH0gd2hpbGUgKHNbaV0gPT09IFwiMFwiKTtcblxuICAgIHJldHVybiBzLnN1YnN0cmluZygwLCBzW2ldID09PSBcIi5cIiA/IGkgOiBpICsgMSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbShtKSB7XG4gICAgaWYgKG1bNF0gPT09IDAgJiYgbVs1XSA9PT0gMCkge1xuICAgICAgaWYgKG1bMV0gPT09IDAgJiYgbVsyXSA9PT0gMCkge1xuICAgICAgICBpZiAobVswXSA9PT0gMSAmJiBtWzNdID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYHNjYWxlKCR7cGYobVswXSl9ICR7cGYobVszXSl9KWA7XG4gICAgICB9XG5cbiAgICAgIGlmIChtWzBdID09PSBtWzNdICYmIG1bMV0gPT09IC1tWzJdKSB7XG4gICAgICAgIGNvbnN0IGEgPSBNYXRoLmFjb3MobVswXSkgKiAxODAgLyBNYXRoLlBJO1xuICAgICAgICByZXR1cm4gYHJvdGF0ZSgke3BmKGEpfSlgO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobVswXSA9PT0gMSAmJiBtWzFdID09PSAwICYmIG1bMl0gPT09IDAgJiYgbVszXSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3BmKG1bNF0pfSAke3BmKG1bNV0pfSlgO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBgbWF0cml4KCR7cGYobVswXSl9ICR7cGYobVsxXSl9ICR7cGYobVsyXSl9ICR7cGYobVszXSl9ICR7cGYobVs0XSl9IGAgKyBgJHtwZihtWzVdKX0pYDtcbiAgfVxuXG4gIGxldCBjbGlwQ291bnQgPSAwO1xuICBsZXQgbWFza0NvdW50ID0gMDtcbiAgbGV0IHNoYWRpbmdDb3VudCA9IDA7XG4gIGV4cG9ydHMuU1ZHR3JhcGhpY3MgPSBTVkdHcmFwaGljcyA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21tb25PYmpzLCBvYmpzLCBmb3JjZURhdGFTY2hlbWEgPSBmYWxzZSkge1xuICAgICAgdGhpcy5zdmdGYWN0b3J5ID0gbmV3IF9kaXNwbGF5X3V0aWxzLkRPTVNWR0ZhY3RvcnkoKTtcbiAgICAgIHRoaXMuY3VycmVudCA9IG5ldyBTVkdFeHRyYVN0YXRlKCk7XG4gICAgICB0aGlzLnRyYW5zZm9ybU1hdHJpeCA9IF91dGlsLklERU5USVRZX01BVFJJWDtcbiAgICAgIHRoaXMudHJhbnNmb3JtU3RhY2sgPSBbXTtcbiAgICAgIHRoaXMuZXh0cmFTdGFjayA9IFtdO1xuICAgICAgdGhpcy5jb21tb25PYmpzID0gY29tbW9uT2JqcztcbiAgICAgIHRoaXMub2JqcyA9IG9ianM7XG4gICAgICB0aGlzLnBlbmRpbmdDbGlwID0gbnVsbDtcbiAgICAgIHRoaXMucGVuZGluZ0VPRmlsbCA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWJlZEZvbnRzID0gZmFsc2U7XG4gICAgICB0aGlzLmVtYmVkZGVkRm9udHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5jc3NTdHlsZSA9IG51bGw7XG4gICAgICB0aGlzLmZvcmNlRGF0YVNjaGVtYSA9ICEhZm9yY2VEYXRhU2NoZW1hO1xuICAgICAgdGhpcy5fb3BlcmF0b3JJZE1hcHBpbmcgPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBvcCBpbiBfdXRpbC5PUFMpIHtcbiAgICAgICAgdGhpcy5fb3BlcmF0b3JJZE1hcHBpbmdbX3V0aWwuT1BTW29wXV0gPSBvcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzYXZlKCkge1xuICAgICAgdGhpcy50cmFuc2Zvcm1TdGFjay5wdXNoKHRoaXMudHJhbnNmb3JtTWF0cml4KTtcbiAgICAgIGNvbnN0IG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuZXh0cmFTdGFjay5wdXNoKG9sZCk7XG4gICAgICB0aGlzLmN1cnJlbnQgPSBvbGQuY2xvbmUoKTtcbiAgICB9XG5cbiAgICByZXN0b3JlKCkge1xuICAgICAgdGhpcy50cmFuc2Zvcm1NYXRyaXggPSB0aGlzLnRyYW5zZm9ybVN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5leHRyYVN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ2xpcCA9IG51bGw7XG4gICAgICB0aGlzLnRncnAgPSBudWxsO1xuICAgIH1cblxuICAgIGdyb3VwKGl0ZW1zKSB7XG4gICAgICB0aGlzLnNhdmUoKTtcbiAgICAgIHRoaXMuZXhlY3V0ZU9wVHJlZShpdGVtcyk7XG4gICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBsb2FkRGVwZW5kZW5jaWVzKG9wZXJhdG9yTGlzdCkge1xuICAgICAgY29uc3QgZm5BcnJheSA9IG9wZXJhdG9yTGlzdC5mbkFycmF5O1xuICAgICAgY29uc3QgYXJnc0FycmF5ID0gb3BlcmF0b3JMaXN0LmFyZ3NBcnJheTtcblxuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm5BcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGlmIChmbkFycmF5W2ldICE9PSBfdXRpbC5PUFMuZGVwZW5kZW5jeSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBvYmogb2YgYXJnc0FycmF5W2ldKSB7XG4gICAgICAgICAgY29uc3Qgb2Jqc1Bvb2wgPSBvYmouc3RhcnRzV2l0aChcImdfXCIpID8gdGhpcy5jb21tb25PYmpzIDogdGhpcy5vYmpzO1xuICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIG9ianNQb29sLmdldChvYmosIHJlc29sdmUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuY3VycmVudC5kZXBlbmRlbmNpZXMucHVzaChwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5jdXJyZW50LmRlcGVuZGVuY2llcyk7XG4gICAgfVxuXG4gICAgdHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybU1hdHJpeCA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHRoaXMudHJhbnNmb3JtTWF0cml4ID0gX3V0aWwuVXRpbC50cmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1NYXRyaXgsIHRyYW5zZm9ybU1hdHJpeCk7XG4gICAgICB0aGlzLnRncnAgPSBudWxsO1xuICAgIH1cblxuICAgIGdldFNWRyhvcGVyYXRvckxpc3QsIHZpZXdwb3J0KSB7XG4gICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG5cbiAgICAgIGNvbnN0IHN2Z0VsZW1lbnQgPSB0aGlzLl9pbml0aWFsaXplKHZpZXdwb3J0KTtcblxuICAgICAgcmV0dXJuIHRoaXMubG9hZERlcGVuZGVuY2llcyhvcGVyYXRvckxpc3QpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybU1hdHJpeCA9IF91dGlsLklERU5USVRZX01BVFJJWDtcbiAgICAgICAgdGhpcy5leGVjdXRlT3BUcmVlKHRoaXMuY29udmVydE9wTGlzdChvcGVyYXRvckxpc3QpKTtcbiAgICAgICAgcmV0dXJuIHN2Z0VsZW1lbnQ7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb252ZXJ0T3BMaXN0KG9wZXJhdG9yTGlzdCkge1xuICAgICAgY29uc3Qgb3BlcmF0b3JJZE1hcHBpbmcgPSB0aGlzLl9vcGVyYXRvcklkTWFwcGluZztcbiAgICAgIGNvbnN0IGFyZ3NBcnJheSA9IG9wZXJhdG9yTGlzdC5hcmdzQXJyYXk7XG4gICAgICBjb25zdCBmbkFycmF5ID0gb3BlcmF0b3JMaXN0LmZuQXJyYXk7XG4gICAgICBjb25zdCBvcExpc3QgPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm5BcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZuSWQgPSBmbkFycmF5W2ldO1xuICAgICAgICBvcExpc3QucHVzaCh7XG4gICAgICAgICAgZm5JZCxcbiAgICAgICAgICBmbjogb3BlcmF0b3JJZE1hcHBpbmdbZm5JZF0sXG4gICAgICAgICAgYXJnczogYXJnc0FycmF5W2ldXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3BMaXN0VG9UcmVlKG9wTGlzdCk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZU9wVHJlZShvcFRyZWUpIHtcbiAgICAgIGZvciAoY29uc3Qgb3BUcmVlRWxlbWVudCBvZiBvcFRyZWUpIHtcbiAgICAgICAgY29uc3QgZm4gPSBvcFRyZWVFbGVtZW50LmZuO1xuICAgICAgICBjb25zdCBmbklkID0gb3BUcmVlRWxlbWVudC5mbklkO1xuICAgICAgICBjb25zdCBhcmdzID0gb3BUcmVlRWxlbWVudC5hcmdzO1xuXG4gICAgICAgIHN3aXRjaCAoZm5JZCB8IDApIHtcbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5iZWdpblRleHQ6XG4gICAgICAgICAgICB0aGlzLmJlZ2luVGV4dCgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5kZXBlbmRlbmN5OlxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRMZWFkaW5nOlxuICAgICAgICAgICAgdGhpcy5zZXRMZWFkaW5nKGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRMZWFkaW5nTW92ZVRleHQ6XG4gICAgICAgICAgICB0aGlzLnNldExlYWRpbmdNb3ZlVGV4dChhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0Rm9udDpcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9udChhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2hvd1RleHQ6XG4gICAgICAgICAgICB0aGlzLnNob3dUZXh0KGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zaG93U3BhY2VkVGV4dDpcbiAgICAgICAgICAgIHRoaXMuc2hvd1RleHQoYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLmVuZFRleHQ6XG4gICAgICAgICAgICB0aGlzLmVuZFRleHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMubW92ZVRleHQ6XG4gICAgICAgICAgICB0aGlzLm1vdmVUZXh0KGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRDaGFyU3BhY2luZzpcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hhclNwYWNpbmcoYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLnNldFdvcmRTcGFjaW5nOlxuICAgICAgICAgICAgdGhpcy5zZXRXb3JkU3BhY2luZyhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0SFNjYWxlOlxuICAgICAgICAgICAgdGhpcy5zZXRIU2NhbGUoYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLnNldFRleHRNYXRyaXg6XG4gICAgICAgICAgICB0aGlzLnNldFRleHRNYXRyaXgoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLnNldFRleHRSaXNlOlxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0UmlzZShhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0VGV4dFJlbmRlcmluZ01vZGU6XG4gICAgICAgICAgICB0aGlzLnNldFRleHRSZW5kZXJpbmdNb2RlKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRMaW5lV2lkdGg6XG4gICAgICAgICAgICB0aGlzLnNldExpbmVXaWR0aChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0TGluZUpvaW46XG4gICAgICAgICAgICB0aGlzLnNldExpbmVKb2luKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRMaW5lQ2FwOlxuICAgICAgICAgICAgdGhpcy5zZXRMaW5lQ2FwKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRNaXRlckxpbWl0OlxuICAgICAgICAgICAgdGhpcy5zZXRNaXRlckxpbWl0KGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRGaWxsUkdCQ29sb3I6XG4gICAgICAgICAgICB0aGlzLnNldEZpbGxSR0JDb2xvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0U3Ryb2tlUkdCQ29sb3I6XG4gICAgICAgICAgICB0aGlzLnNldFN0cm9rZVJHQkNvbG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRTdHJva2VDb2xvck46XG4gICAgICAgICAgICB0aGlzLnNldFN0cm9rZUNvbG9yTihhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0RmlsbENvbG9yTjpcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsbENvbG9yTihhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2hhZGluZ0ZpbGw6XG4gICAgICAgICAgICB0aGlzLnNoYWRpbmdGaWxsKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXREYXNoOlxuICAgICAgICAgICAgdGhpcy5zZXREYXNoKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRSZW5kZXJpbmdJbnRlbnQ6XG4gICAgICAgICAgICB0aGlzLnNldFJlbmRlcmluZ0ludGVudChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuc2V0RmxhdG5lc3M6XG4gICAgICAgICAgICB0aGlzLnNldEZsYXRuZXNzKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zZXRHU3RhdGU6XG4gICAgICAgICAgICB0aGlzLnNldEdTdGF0ZShhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuZmlsbDpcbiAgICAgICAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5lb0ZpbGw6XG4gICAgICAgICAgICB0aGlzLmVvRmlsbCgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5zdHJva2U6XG4gICAgICAgICAgICB0aGlzLnN0cm9rZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5maWxsU3Ryb2tlOlxuICAgICAgICAgICAgdGhpcy5maWxsU3Ryb2tlKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLmVvRmlsbFN0cm9rZTpcbiAgICAgICAgICAgIHRoaXMuZW9GaWxsU3Ryb2tlKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLmNsaXA6XG4gICAgICAgICAgICB0aGlzLmNsaXAoXCJub256ZXJvXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5lb0NsaXA6XG4gICAgICAgICAgICB0aGlzLmNsaXAoXCJldmVub2RkXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5wYWludFNvbGlkQ29sb3JJbWFnZU1hc2s6XG4gICAgICAgICAgICB0aGlzLnBhaW50U29saWRDb2xvckltYWdlTWFzaygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5wYWludEltYWdlWE9iamVjdDpcbiAgICAgICAgICAgIHRoaXMucGFpbnRJbWFnZVhPYmplY3QoYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLnBhaW50SW5saW5lSW1hZ2VYT2JqZWN0OlxuICAgICAgICAgICAgdGhpcy5wYWludElubGluZUltYWdlWE9iamVjdChhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMucGFpbnRJbWFnZU1hc2tYT2JqZWN0OlxuICAgICAgICAgICAgdGhpcy5wYWludEltYWdlTWFza1hPYmplY3QoYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLnBhaW50Rm9ybVhPYmplY3RCZWdpbjpcbiAgICAgICAgICAgIHRoaXMucGFpbnRGb3JtWE9iamVjdEJlZ2luKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5wYWludEZvcm1YT2JqZWN0RW5kOlxuICAgICAgICAgICAgdGhpcy5wYWludEZvcm1YT2JqZWN0RW5kKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLmNsb3NlUGF0aDpcbiAgICAgICAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLmNsb3NlU3Ryb2tlOlxuICAgICAgICAgICAgdGhpcy5jbG9zZVN0cm9rZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5jbG9zZUZpbGxTdHJva2U6XG4gICAgICAgICAgICB0aGlzLmNsb3NlRmlsbFN0cm9rZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5jbG9zZUVPRmlsbFN0cm9rZTpcbiAgICAgICAgICAgIHRoaXMuY2xvc2VFT0ZpbGxTdHJva2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMubmV4dExpbmU6XG4gICAgICAgICAgICB0aGlzLm5leHRMaW5lKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLnRyYW5zZm9ybTpcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10sIGFyZ3NbNF0sIGFyZ3NbNV0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5jb25zdHJ1Y3RQYXRoOlxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RQYXRoKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5lbmRQYXRoOlxuICAgICAgICAgICAgdGhpcy5lbmRQYXRoKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgOTI6XG4gICAgICAgICAgICB0aGlzLmdyb3VwKG9wVHJlZUVsZW1lbnQuaXRlbXMpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgKDAsIF91dGlsLndhcm4pKGBVbmltcGxlbWVudGVkIG9wZXJhdG9yICR7Zm59YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHNldFdvcmRTcGFjaW5nKHdvcmRTcGFjaW5nKSB7XG4gICAgICB0aGlzLmN1cnJlbnQud29yZFNwYWNpbmcgPSB3b3JkU3BhY2luZztcbiAgICB9XG5cbiAgICBzZXRDaGFyU3BhY2luZyhjaGFyU3BhY2luZykge1xuICAgICAgdGhpcy5jdXJyZW50LmNoYXJTcGFjaW5nID0gY2hhclNwYWNpbmc7XG4gICAgfVxuXG4gICAgbmV4dExpbmUoKSB7XG4gICAgICB0aGlzLm1vdmVUZXh0KDAsIHRoaXMuY3VycmVudC5sZWFkaW5nKTtcbiAgICB9XG5cbiAgICBzZXRUZXh0TWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBjdXJyZW50LnRleHRNYXRyaXggPSBjdXJyZW50LmxpbmVNYXRyaXggPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICBjdXJyZW50LnRleHRNYXRyaXhTY2FsZSA9IE1hdGguaHlwb3QoYSwgYik7XG4gICAgICBjdXJyZW50LnggPSBjdXJyZW50LmxpbmVYID0gMDtcbiAgICAgIGN1cnJlbnQueSA9IGN1cnJlbnQubGluZVkgPSAwO1xuICAgICAgY3VycmVudC54Y29vcmRzID0gW107XG4gICAgICBjdXJyZW50Lnljb29yZHMgPSBbXTtcbiAgICAgIGN1cnJlbnQudHNwYW4gPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2Zzp0c3BhblwiKTtcbiAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmb250LWZhbWlseVwiLCBjdXJyZW50LmZvbnRGYW1pbHkpO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZvbnQtc2l6ZVwiLCBgJHtwZihjdXJyZW50LmZvbnRTaXplKX1weGApO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgcGYoLWN1cnJlbnQueSkpO1xuICAgICAgY3VycmVudC50eHRFbGVtZW50ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6dGV4dFwiKTtcbiAgICAgIGN1cnJlbnQudHh0RWxlbWVudC5hcHBlbmRDaGlsZChjdXJyZW50LnRzcGFuKTtcbiAgICB9XG5cbiAgICBiZWdpblRleHQoKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY3VycmVudC54ID0gY3VycmVudC5saW5lWCA9IDA7XG4gICAgICBjdXJyZW50LnkgPSBjdXJyZW50LmxpbmVZID0gMDtcbiAgICAgIGN1cnJlbnQudGV4dE1hdHJpeCA9IF91dGlsLklERU5USVRZX01BVFJJWDtcbiAgICAgIGN1cnJlbnQubGluZU1hdHJpeCA9IF91dGlsLklERU5USVRZX01BVFJJWDtcbiAgICAgIGN1cnJlbnQudGV4dE1hdHJpeFNjYWxlID0gMTtcbiAgICAgIGN1cnJlbnQudHNwYW4gPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2Zzp0c3BhblwiKTtcbiAgICAgIGN1cnJlbnQudHh0RWxlbWVudCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnRleHRcIik7XG4gICAgICBjdXJyZW50LnR4dGdycCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOmdcIik7XG4gICAgICBjdXJyZW50Lnhjb29yZHMgPSBbXTtcbiAgICAgIGN1cnJlbnQueWNvb3JkcyA9IFtdO1xuICAgIH1cblxuICAgIG1vdmVUZXh0KHgsIHkpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICBjdXJyZW50LnggPSBjdXJyZW50LmxpbmVYICs9IHg7XG4gICAgICBjdXJyZW50LnkgPSBjdXJyZW50LmxpbmVZICs9IHk7XG4gICAgICBjdXJyZW50Lnhjb29yZHMgPSBbXTtcbiAgICAgIGN1cnJlbnQueWNvb3JkcyA9IFtdO1xuICAgICAgY3VycmVudC50c3BhbiA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnRzcGFuXCIpO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZvbnQtZmFtaWx5XCIsIGN1cnJlbnQuZm9udEZhbWlseSk7XG4gICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZm9udC1zaXplXCIsIGAke3BmKGN1cnJlbnQuZm9udFNpemUpfXB4YCk7XG4gICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBwZigtY3VycmVudC55KSk7XG4gICAgfVxuXG4gICAgc2hvd1RleHQoZ2x5cGhzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY29uc3QgZm9udCA9IGN1cnJlbnQuZm9udDtcbiAgICAgIGNvbnN0IGZvbnRTaXplID0gY3VycmVudC5mb250U2l6ZTtcblxuICAgICAgaWYgKGZvbnRTaXplID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZm9udFNpemVTY2FsZSA9IGN1cnJlbnQuZm9udFNpemVTY2FsZTtcbiAgICAgIGNvbnN0IGNoYXJTcGFjaW5nID0gY3VycmVudC5jaGFyU3BhY2luZztcbiAgICAgIGNvbnN0IHdvcmRTcGFjaW5nID0gY3VycmVudC53b3JkU3BhY2luZztcbiAgICAgIGNvbnN0IGZvbnREaXJlY3Rpb24gPSBjdXJyZW50LmZvbnREaXJlY3Rpb247XG4gICAgICBjb25zdCB0ZXh0SFNjYWxlID0gY3VycmVudC50ZXh0SFNjYWxlICogZm9udERpcmVjdGlvbjtcbiAgICAgIGNvbnN0IHZlcnRpY2FsID0gZm9udC52ZXJ0aWNhbDtcbiAgICAgIGNvbnN0IHNwYWNpbmdEaXIgPSB2ZXJ0aWNhbCA/IDEgOiAtMTtcbiAgICAgIGNvbnN0IGRlZmF1bHRWTWV0cmljcyA9IGZvbnQuZGVmYXVsdFZNZXRyaWNzO1xuICAgICAgY29uc3Qgd2lkdGhBZHZhbmNlU2NhbGUgPSBmb250U2l6ZSAqIGN1cnJlbnQuZm9udE1hdHJpeFswXTtcbiAgICAgIGxldCB4ID0gMDtcblxuICAgICAgZm9yIChjb25zdCBnbHlwaCBvZiBnbHlwaHMpIHtcbiAgICAgICAgaWYgKGdseXBoID09PSBudWxsKSB7XG4gICAgICAgICAgeCArPSBmb250RGlyZWN0aW9uICogd29yZFNwYWNpbmc7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGdseXBoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgeCArPSBzcGFjaW5nRGlyICogZ2x5cGggKiBmb250U2l6ZSAvIDEwMDA7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzcGFjaW5nID0gKGdseXBoLmlzU3BhY2UgPyB3b3JkU3BhY2luZyA6IDApICsgY2hhclNwYWNpbmc7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGdseXBoLmZvbnRDaGFyO1xuICAgICAgICBsZXQgc2NhbGVkWCwgc2NhbGVkWTtcbiAgICAgICAgbGV0IHdpZHRoID0gZ2x5cGgud2lkdGg7XG5cbiAgICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgICAgbGV0IHZ4O1xuICAgICAgICAgIGNvbnN0IHZtZXRyaWMgPSBnbHlwaC52bWV0cmljIHx8IGRlZmF1bHRWTWV0cmljcztcbiAgICAgICAgICB2eCA9IGdseXBoLnZtZXRyaWMgPyB2bWV0cmljWzFdIDogd2lkdGggKiAwLjU7XG4gICAgICAgICAgdnggPSAtdnggKiB3aWR0aEFkdmFuY2VTY2FsZTtcbiAgICAgICAgICBjb25zdCB2eSA9IHZtZXRyaWNbMl0gKiB3aWR0aEFkdmFuY2VTY2FsZTtcbiAgICAgICAgICB3aWR0aCA9IHZtZXRyaWMgPyAtdm1ldHJpY1swXSA6IHdpZHRoO1xuICAgICAgICAgIHNjYWxlZFggPSB2eCAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgICAgc2NhbGVkWSA9ICh4ICsgdnkpIC8gZm9udFNpemVTY2FsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzY2FsZWRYID0geCAvIGZvbnRTaXplU2NhbGU7XG4gICAgICAgICAgc2NhbGVkWSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2x5cGguaXNJbkZvbnQgfHwgZm9udC5taXNzaW5nRmlsZSkge1xuICAgICAgICAgIGN1cnJlbnQueGNvb3Jkcy5wdXNoKGN1cnJlbnQueCArIHNjYWxlZFgpO1xuXG4gICAgICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgICAgICBjdXJyZW50Lnljb29yZHMucHVzaCgtY3VycmVudC55ICsgc2NhbGVkWSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3VycmVudC50c3Bhbi50ZXh0Q29udGVudCArPSBjaGFyYWN0ZXI7XG4gICAgICAgIH0gZWxzZSB7fVxuXG4gICAgICAgIGxldCBjaGFyV2lkdGg7XG5cbiAgICAgICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICAgICAgY2hhcldpZHRoID0gd2lkdGggKiB3aWR0aEFkdmFuY2VTY2FsZSAtIHNwYWNpbmcgKiBmb250RGlyZWN0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYXJXaWR0aCA9IHdpZHRoICogd2lkdGhBZHZhbmNlU2NhbGUgKyBzcGFjaW5nICogZm9udERpcmVjdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHggKz0gY2hhcldpZHRoO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieFwiLCBjdXJyZW50Lnhjb29yZHMubWFwKHBmKS5qb2luKFwiIFwiKSk7XG5cbiAgICAgIGlmICh2ZXJ0aWNhbCkge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBjdXJyZW50Lnljb29yZHMubWFwKHBmKS5qb2luKFwiIFwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBwZigtY3VycmVudC55KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2ZXJ0aWNhbCkge1xuICAgICAgICBjdXJyZW50LnkgLT0geDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQueCArPSB4ICogdGV4dEhTY2FsZTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZvbnQtZmFtaWx5XCIsIGN1cnJlbnQuZm9udEZhbWlseSk7XG4gICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZm9udC1zaXplXCIsIGAke3BmKGN1cnJlbnQuZm9udFNpemUpfXB4YCk7XG5cbiAgICAgIGlmIChjdXJyZW50LmZvbnRTdHlsZSAhPT0gU1ZHX0RFRkFVTFRTLmZvbnRTdHlsZSkge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZm9udC1zdHlsZVwiLCBjdXJyZW50LmZvbnRTdHlsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50LmZvbnRXZWlnaHQgIT09IFNWR19ERUZBVUxUUy5mb250V2VpZ2h0KSB7XG4gICAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmb250LXdlaWdodFwiLCBjdXJyZW50LmZvbnRXZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxsU3Ryb2tlTW9kZSA9IGN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgJiBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRV9NQVNLO1xuXG4gICAgICBpZiAoZmlsbFN0cm9rZU1vZGUgPT09IF91dGlsLlRleHRSZW5kZXJpbmdNb2RlLkZJTEwgfHwgZmlsbFN0cm9rZU1vZGUgPT09IF91dGlsLlRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFKSB7XG4gICAgICAgIGlmIChjdXJyZW50LmZpbGxDb2xvciAhPT0gU1ZHX0RFRkFVTFRTLmZpbGxDb2xvcikge1xuICAgICAgICAgIGN1cnJlbnQudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIGN1cnJlbnQuZmlsbENvbG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50LmZpbGxBbHBoYSA8IDEpIHtcbiAgICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbC1vcGFjaXR5XCIsIGN1cnJlbnQuZmlsbEFscGhhKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlID09PSBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5BRERfVE9fUEFUSCkge1xuICAgICAgICBjdXJyZW50LnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbFwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgXCJub25lXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsbFN0cm9rZU1vZGUgPT09IF91dGlsLlRleHRSZW5kZXJpbmdNb2RlLlNUUk9LRSB8fCBmaWxsU3Ryb2tlTW9kZSA9PT0gX3V0aWwuVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0UpIHtcbiAgICAgICAgY29uc3QgbGluZVdpZHRoU2NhbGUgPSAxIC8gKGN1cnJlbnQudGV4dE1hdHJpeFNjYWxlIHx8IDEpO1xuXG4gICAgICAgIHRoaXMuX3NldFN0cm9rZUF0dHJpYnV0ZXMoY3VycmVudC50c3BhbiwgbGluZVdpZHRoU2NhbGUpO1xuICAgICAgfVxuXG4gICAgICBsZXQgdGV4dE1hdHJpeCA9IGN1cnJlbnQudGV4dE1hdHJpeDtcblxuICAgICAgaWYgKGN1cnJlbnQudGV4dFJpc2UgIT09IDApIHtcbiAgICAgICAgdGV4dE1hdHJpeCA9IHRleHRNYXRyaXguc2xpY2UoKTtcbiAgICAgICAgdGV4dE1hdHJpeFs1XSArPSBjdXJyZW50LnRleHRSaXNlO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50LnR4dEVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ0cmFuc2Zvcm1cIiwgYCR7cG0odGV4dE1hdHJpeCl9IHNjYWxlKCR7cGYodGV4dEhTY2FsZSl9LCAtMSlgKTtcbiAgICAgIGN1cnJlbnQudHh0RWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhYTUxfTlMsIFwieG1sOnNwYWNlXCIsIFwicHJlc2VydmVcIik7XG4gICAgICBjdXJyZW50LnR4dEVsZW1lbnQuYXBwZW5kQ2hpbGQoY3VycmVudC50c3Bhbik7XG4gICAgICBjdXJyZW50LnR4dGdycC5hcHBlbmRDaGlsZChjdXJyZW50LnR4dEVsZW1lbnQpO1xuXG4gICAgICB0aGlzLl9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpLmFwcGVuZENoaWxkKGN1cnJlbnQudHh0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgc2V0TGVhZGluZ01vdmVUZXh0KHgsIHkpIHtcbiAgICAgIHRoaXMuc2V0TGVhZGluZygteSk7XG4gICAgICB0aGlzLm1vdmVUZXh0KHgsIHkpO1xuICAgIH1cblxuICAgIGFkZEZvbnRTdHlsZShmb250T2JqKSB7XG4gICAgICBpZiAoIWZvbnRPYmouZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhZGRGb250U3R5bGU6IE5vIGZvbnQgZGF0YSBhdmFpbGFibGUsIFwiICsgJ2Vuc3VyZSB0aGF0IHRoZSBcImZvbnRFeHRyYVByb3BlcnRpZXNcIiBBUEkgcGFyYW1ldGVyIGlzIHNldC4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmNzc1N0eWxlKSB7XG4gICAgICAgIHRoaXMuY3NzU3R5bGUgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpzdHlsZVwiKTtcbiAgICAgICAgdGhpcy5jc3NTdHlsZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInR5cGVcIiwgXCJ0ZXh0L2Nzc1wiKTtcbiAgICAgICAgdGhpcy5kZWZzLmFwcGVuZENoaWxkKHRoaXMuY3NzU3R5bGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cmwgPSBjcmVhdGVPYmplY3RVUkwoZm9udE9iai5kYXRhLCBmb250T2JqLm1pbWV0eXBlLCB0aGlzLmZvcmNlRGF0YVNjaGVtYSk7XG4gICAgICB0aGlzLmNzc1N0eWxlLnRleHRDb250ZW50ICs9IGBAZm9udC1mYWNlIHsgZm9udC1mYW1pbHk6IFwiJHtmb250T2JqLmxvYWRlZE5hbWV9XCI7YCArIGAgc3JjOiB1cmwoJHt1cmx9KTsgfVxcbmA7XG4gICAgfVxuXG4gICAgc2V0Rm9udChkZXRhaWxzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY29uc3QgZm9udE9iaiA9IHRoaXMuY29tbW9uT2Jqcy5nZXQoZGV0YWlsc1swXSk7XG4gICAgICBsZXQgc2l6ZSA9IGRldGFpbHNbMV07XG4gICAgICBjdXJyZW50LmZvbnQgPSBmb250T2JqO1xuXG4gICAgICBpZiAodGhpcy5lbWJlZEZvbnRzICYmICFmb250T2JqLm1pc3NpbmdGaWxlICYmICF0aGlzLmVtYmVkZGVkRm9udHNbZm9udE9iai5sb2FkZWROYW1lXSkge1xuICAgICAgICB0aGlzLmFkZEZvbnRTdHlsZShmb250T2JqKTtcbiAgICAgICAgdGhpcy5lbWJlZGRlZEZvbnRzW2ZvbnRPYmoubG9hZGVkTmFtZV0gPSBmb250T2JqO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50LmZvbnRNYXRyaXggPSBmb250T2JqLmZvbnRNYXRyaXggfHwgX3V0aWwuRk9OVF9JREVOVElUWV9NQVRSSVg7XG4gICAgICBsZXQgYm9sZCA9IFwibm9ybWFsXCI7XG5cbiAgICAgIGlmIChmb250T2JqLmJsYWNrKSB7XG4gICAgICAgIGJvbGQgPSBcIjkwMFwiO1xuICAgICAgfSBlbHNlIGlmIChmb250T2JqLmJvbGQpIHtcbiAgICAgICAgYm9sZCA9IFwiYm9sZFwiO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpdGFsaWMgPSBmb250T2JqLml0YWxpYyA/IFwiaXRhbGljXCIgOiBcIm5vcm1hbFwiO1xuXG4gICAgICBpZiAoc2l6ZSA8IDApIHtcbiAgICAgICAgc2l6ZSA9IC1zaXplO1xuICAgICAgICBjdXJyZW50LmZvbnREaXJlY3Rpb24gPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQuZm9udERpcmVjdGlvbiA9IDE7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQuZm9udFNpemUgPSBzaXplO1xuICAgICAgY3VycmVudC5mb250RmFtaWx5ID0gZm9udE9iai5sb2FkZWROYW1lO1xuICAgICAgY3VycmVudC5mb250V2VpZ2h0ID0gYm9sZDtcbiAgICAgIGN1cnJlbnQuZm9udFN0eWxlID0gaXRhbGljO1xuICAgICAgY3VycmVudC50c3BhbiA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnRzcGFuXCIpO1xuICAgICAgY3VycmVudC50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgcGYoLWN1cnJlbnQueSkpO1xuICAgICAgY3VycmVudC54Y29vcmRzID0gW107XG4gICAgICBjdXJyZW50Lnljb29yZHMgPSBbXTtcbiAgICB9XG5cbiAgICBlbmRUZXh0KCkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcblxuICAgICAgaWYgKGN1cnJlbnQudGV4dFJlbmRlcmluZ01vZGUgJiBfdXRpbC5UZXh0UmVuZGVyaW5nTW9kZS5BRERfVE9fUEFUSF9GTEFHICYmIGN1cnJlbnQudHh0RWxlbWVudD8uaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgIGN1cnJlbnQuZWxlbWVudCA9IGN1cnJlbnQudHh0RWxlbWVudDtcbiAgICAgICAgdGhpcy5jbGlwKFwibm9uemVyb1wiKTtcbiAgICAgICAgdGhpcy5lbmRQYXRoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0TGluZVdpZHRoKHdpZHRoKSB7XG4gICAgICBpZiAod2lkdGggPiAwKSB7XG4gICAgICAgIHRoaXMuY3VycmVudC5saW5lV2lkdGggPSB3aWR0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRMaW5lQ2FwKHN0eWxlKSB7XG4gICAgICB0aGlzLmN1cnJlbnQubGluZUNhcCA9IExJTkVfQ0FQX1NUWUxFU1tzdHlsZV07XG4gICAgfVxuXG4gICAgc2V0TGluZUpvaW4oc3R5bGUpIHtcbiAgICAgIHRoaXMuY3VycmVudC5saW5lSm9pbiA9IExJTkVfSk9JTl9TVFlMRVNbc3R5bGVdO1xuICAgIH1cblxuICAgIHNldE1pdGVyTGltaXQobGltaXQpIHtcbiAgICAgIHRoaXMuY3VycmVudC5taXRlckxpbWl0ID0gbGltaXQ7XG4gICAgfVxuXG4gICAgc2V0U3Ryb2tlQWxwaGEoc3Ryb2tlQWxwaGEpIHtcbiAgICAgIHRoaXMuY3VycmVudC5zdHJva2VBbHBoYSA9IHN0cm9rZUFscGhhO1xuICAgIH1cblxuICAgIHNldFN0cm9rZVJHQkNvbG9yKHIsIGcsIGIpIHtcbiAgICAgIHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IF91dGlsLlV0aWwubWFrZUhleENvbG9yKHIsIGcsIGIpO1xuICAgIH1cblxuICAgIHNldEZpbGxBbHBoYShmaWxsQWxwaGEpIHtcbiAgICAgIHRoaXMuY3VycmVudC5maWxsQWxwaGEgPSBmaWxsQWxwaGE7XG4gICAgfVxuXG4gICAgc2V0RmlsbFJHQkNvbG9yKHIsIGcsIGIpIHtcbiAgICAgIHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSBfdXRpbC5VdGlsLm1ha2VIZXhDb2xvcihyLCBnLCBiKTtcbiAgICAgIHRoaXMuY3VycmVudC50c3BhbiA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnRzcGFuXCIpO1xuICAgICAgdGhpcy5jdXJyZW50Lnhjb29yZHMgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudC55Y29vcmRzID0gW107XG4gICAgfVxuXG4gICAgc2V0U3Ryb2tlQ29sb3JOKGFyZ3MpIHtcbiAgICAgIHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IHRoaXMuX21ha2VDb2xvck5fUGF0dGVybihhcmdzKTtcbiAgICB9XG5cbiAgICBzZXRGaWxsQ29sb3JOKGFyZ3MpIHtcbiAgICAgIHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSB0aGlzLl9tYWtlQ29sb3JOX1BhdHRlcm4oYXJncyk7XG4gICAgfVxuXG4gICAgc2hhZGluZ0ZpbGwoYXJncykge1xuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnZpZXdwb3J0LndpZHRoO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy52aWV3cG9ydC5oZWlnaHQ7XG5cbiAgICAgIGNvbnN0IGludiA9IF91dGlsLlV0aWwuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRyYW5zZm9ybU1hdHJpeCk7XG5cbiAgICAgIGNvbnN0IGJsID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbMCwgMF0sIGludik7XG5cbiAgICAgIGNvbnN0IGJyID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbMCwgaGVpZ2h0XSwgaW52KTtcblxuICAgICAgY29uc3QgdWwgPSBfdXRpbC5VdGlsLmFwcGx5VHJhbnNmb3JtKFt3aWR0aCwgMF0sIGludik7XG5cbiAgICAgIGNvbnN0IHVyID0gX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbd2lkdGgsIGhlaWdodF0sIGludik7XG5cbiAgICAgIGNvbnN0IHgwID0gTWF0aC5taW4oYmxbMF0sIGJyWzBdLCB1bFswXSwgdXJbMF0pO1xuICAgICAgY29uc3QgeTAgPSBNYXRoLm1pbihibFsxXSwgYnJbMV0sIHVsWzFdLCB1clsxXSk7XG4gICAgICBjb25zdCB4MSA9IE1hdGgubWF4KGJsWzBdLCBiclswXSwgdWxbMF0sIHVyWzBdKTtcbiAgICAgIGNvbnN0IHkxID0gTWF0aC5tYXgoYmxbMV0sIGJyWzFdLCB1bFsxXSwgdXJbMV0pO1xuICAgICAgY29uc3QgcmVjdCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnJlY3RcIik7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieFwiLCB4MCk7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCB5MCk7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwid2lkdGhcIiwgeDEgLSB4MCk7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaGVpZ2h0XCIsIHkxIC0geTApO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgdGhpcy5fbWFrZVNoYWRpbmdQYXR0ZXJuKGFyZ3MpKTtcblxuICAgICAgaWYgKHRoaXMuY3VycmVudC5maWxsQWxwaGEgPCAxKSB7XG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsLW9wYWNpdHlcIiwgdGhpcy5jdXJyZW50LmZpbGxBbHBoYSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kQ2hpbGQocmVjdCk7XG4gICAgfVxuXG4gICAgX21ha2VDb2xvck5fUGF0dGVybihhcmdzKSB7XG4gICAgICBpZiAoYXJnc1swXSA9PT0gXCJUaWxpbmdQYXR0ZXJuXCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21ha2VUaWxpbmdQYXR0ZXJuKGFyZ3MpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fbWFrZVNoYWRpbmdQYXR0ZXJuKGFyZ3MpO1xuICAgIH1cblxuICAgIF9tYWtlVGlsaW5nUGF0dGVybihhcmdzKSB7XG4gICAgICBjb25zdCBjb2xvciA9IGFyZ3NbMV07XG4gICAgICBjb25zdCBvcGVyYXRvckxpc3QgPSBhcmdzWzJdO1xuICAgICAgY29uc3QgbWF0cml4ID0gYXJnc1szXSB8fCBfdXRpbC5JREVOVElUWV9NQVRSSVg7XG4gICAgICBjb25zdCBbeDAsIHkwLCB4MSwgeTFdID0gYXJnc1s0XTtcbiAgICAgIGNvbnN0IHhzdGVwID0gYXJnc1s1XTtcbiAgICAgIGNvbnN0IHlzdGVwID0gYXJnc1s2XTtcbiAgICAgIGNvbnN0IHBhaW50VHlwZSA9IGFyZ3NbN107XG4gICAgICBjb25zdCB0aWxpbmdJZCA9IGBzaGFkaW5nJHtzaGFkaW5nQ291bnQrK31gO1xuXG4gICAgICBjb25zdCBbdHgwLCB0eTAsIHR4MSwgdHkxXSA9IF91dGlsLlV0aWwubm9ybWFsaXplUmVjdChbLi4uX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbeDAsIHkwXSwgbWF0cml4KSwgLi4uX3V0aWwuVXRpbC5hcHBseVRyYW5zZm9ybShbeDEsIHkxXSwgbWF0cml4KV0pO1xuXG4gICAgICBjb25zdCBbeHNjYWxlLCB5c2NhbGVdID0gX3V0aWwuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShtYXRyaXgpO1xuXG4gICAgICBjb25zdCB0eHN0ZXAgPSB4c3RlcCAqIHhzY2FsZTtcbiAgICAgIGNvbnN0IHR5c3RlcCA9IHlzdGVwICogeXNjYWxlO1xuICAgICAgY29uc3QgdGlsaW5nID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cGF0dGVyblwiKTtcbiAgICAgIHRpbGluZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImlkXCIsIHRpbGluZ0lkKTtcbiAgICAgIHRpbGluZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInBhdHRlcm5Vbml0c1wiLCBcInVzZXJTcGFjZU9uVXNlXCIpO1xuICAgICAgdGlsaW5nLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwid2lkdGhcIiwgdHhzdGVwKTtcbiAgICAgIHRpbGluZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCB0eXN0ZXApO1xuICAgICAgdGlsaW5nLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieFwiLCBgJHt0eDB9YCk7XG4gICAgICB0aWxpbmcuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIGAke3R5MH1gKTtcbiAgICAgIGNvbnN0IHN2ZyA9IHRoaXMuc3ZnO1xuICAgICAgY29uc3QgdHJhbnNmb3JtTWF0cml4ID0gdGhpcy50cmFuc2Zvcm1NYXRyaXg7XG4gICAgICBjb25zdCBmaWxsQ29sb3IgPSB0aGlzLmN1cnJlbnQuZmlsbENvbG9yO1xuICAgICAgY29uc3Qgc3Ryb2tlQ29sb3IgPSB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3I7XG4gICAgICBjb25zdCBiYm94ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZSh0eDEgLSB0eDAsIHR5MSAtIHR5MCk7XG4gICAgICB0aGlzLnN2ZyA9IGJib3g7XG4gICAgICB0aGlzLnRyYW5zZm9ybU1hdHJpeCA9IG1hdHJpeDtcblxuICAgICAgaWYgKHBhaW50VHlwZSA9PT0gMikge1xuICAgICAgICBjb25zdCBjc3NDb2xvciA9IF91dGlsLlV0aWwubWFrZUhleENvbG9yKC4uLmNvbG9yKTtcblxuICAgICAgICB0aGlzLmN1cnJlbnQuZmlsbENvbG9yID0gY3NzQ29sb3I7XG4gICAgICAgIHRoaXMuY3VycmVudC5zdHJva2VDb2xvciA9IGNzc0NvbG9yO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmV4ZWN1dGVPcFRyZWUodGhpcy5jb252ZXJ0T3BMaXN0KG9wZXJhdG9yTGlzdCkpO1xuICAgICAgdGhpcy5zdmcgPSBzdmc7XG4gICAgICB0aGlzLnRyYW5zZm9ybU1hdHJpeCA9IHRyYW5zZm9ybU1hdHJpeDtcbiAgICAgIHRoaXMuY3VycmVudC5maWxsQ29sb3IgPSBmaWxsQ29sb3I7XG4gICAgICB0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3IgPSBzdHJva2VDb2xvcjtcbiAgICAgIHRpbGluZy5hcHBlbmRDaGlsZChiYm94LmNoaWxkTm9kZXNbMF0pO1xuICAgICAgdGhpcy5kZWZzLmFwcGVuZENoaWxkKHRpbGluZyk7XG4gICAgICByZXR1cm4gYHVybCgjJHt0aWxpbmdJZH0pYDtcbiAgICB9XG5cbiAgICBfbWFrZVNoYWRpbmdQYXR0ZXJuKGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJncyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBhcmdzID0gdGhpcy5vYmpzLmdldChhcmdzKTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChhcmdzWzBdKSB7XG4gICAgICAgIGNhc2UgXCJSYWRpYWxBeGlhbFwiOlxuICAgICAgICAgIGNvbnN0IHNoYWRpbmdJZCA9IGBzaGFkaW5nJHtzaGFkaW5nQ291bnQrK31gO1xuICAgICAgICAgIGNvbnN0IGNvbG9yU3RvcHMgPSBhcmdzWzNdO1xuICAgICAgICAgIGxldCBncmFkaWVudDtcblxuICAgICAgICAgIHN3aXRjaCAoYXJnc1sxXSkge1xuICAgICAgICAgICAgY2FzZSBcImF4aWFsXCI6XG4gICAgICAgICAgICAgIGNvbnN0IHBvaW50MCA9IGFyZ3NbNF07XG4gICAgICAgICAgICAgIGNvbnN0IHBvaW50MSA9IGFyZ3NbNV07XG4gICAgICAgICAgICAgIGdyYWRpZW50ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6bGluZWFyR3JhZGllbnRcIik7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaWRcIiwgc2hhZGluZ0lkKTtcbiAgICAgICAgICAgICAgZ3JhZGllbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJncmFkaWVudFVuaXRzXCIsIFwidXNlclNwYWNlT25Vc2VcIik7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieDFcIiwgcG9pbnQwWzBdKTtcbiAgICAgICAgICAgICAgZ3JhZGllbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5MVwiLCBwb2ludDBbMV0pO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIngyXCIsIHBvaW50MVswXSk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieTJcIiwgcG9pbnQxWzFdKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJyYWRpYWxcIjpcbiAgICAgICAgICAgICAgY29uc3QgZm9jYWxQb2ludCA9IGFyZ3NbNF07XG4gICAgICAgICAgICAgIGNvbnN0IGNpcmNsZVBvaW50ID0gYXJnc1s1XTtcbiAgICAgICAgICAgICAgY29uc3QgZm9jYWxSYWRpdXMgPSBhcmdzWzZdO1xuICAgICAgICAgICAgICBjb25zdCBjaXJjbGVSYWRpdXMgPSBhcmdzWzddO1xuICAgICAgICAgICAgICBncmFkaWVudCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnJhZGlhbEdyYWRpZW50XCIpO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImlkXCIsIHNoYWRpbmdJZCk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZ3JhZGllbnRVbml0c1wiLCBcInVzZXJTcGFjZU9uVXNlXCIpO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImN4XCIsIGNpcmNsZVBvaW50WzBdKTtcbiAgICAgICAgICAgICAgZ3JhZGllbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjeVwiLCBjaXJjbGVQb2ludFsxXSk7XG4gICAgICAgICAgICAgIGdyYWRpZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiclwiLCBjaXJjbGVSYWRpdXMpO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZ4XCIsIGZvY2FsUG9pbnRbMF0pO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZ5XCIsIGZvY2FsUG9pbnRbMV0pO1xuICAgICAgICAgICAgICBncmFkaWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZyXCIsIGZvY2FsUmFkaXVzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBSYWRpYWxBeGlhbCB0eXBlOiAke2FyZ3NbMV19YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChjb25zdCBjb2xvclN0b3Agb2YgY29sb3JTdG9wcykge1xuICAgICAgICAgICAgY29uc3Qgc3RvcCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnN0b3BcIik7XG4gICAgICAgICAgICBzdG9wLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwib2Zmc2V0XCIsIGNvbG9yU3RvcFswXSk7XG4gICAgICAgICAgICBzdG9wLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3RvcC1jb2xvclwiLCBjb2xvclN0b3BbMV0pO1xuICAgICAgICAgICAgZ3JhZGllbnQuYXBwZW5kQ2hpbGQoc3RvcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5kZWZzLmFwcGVuZENoaWxkKGdyYWRpZW50KTtcbiAgICAgICAgICByZXR1cm4gYHVybCgjJHtzaGFkaW5nSWR9KWA7XG5cbiAgICAgICAgY2FzZSBcIk1lc2hcIjpcbiAgICAgICAgICAoMCwgX3V0aWwud2FybikoXCJVbmltcGxlbWVudGVkIHBhdHRlcm4gTWVzaFwiKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICBjYXNlIFwiRHVtbXlcIjpcbiAgICAgICAgICByZXR1cm4gXCJob3RwaW5rXCI7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gSVIgdHlwZTogJHthcmdzWzBdfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldERhc2goZGFzaEFycmF5LCBkYXNoUGhhc2UpIHtcbiAgICAgIHRoaXMuY3VycmVudC5kYXNoQXJyYXkgPSBkYXNoQXJyYXk7XG4gICAgICB0aGlzLmN1cnJlbnQuZGFzaFBoYXNlID0gZGFzaFBoYXNlO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdFBhdGgob3BzLCBhcmdzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgbGV0IHggPSBjdXJyZW50LngsXG4gICAgICAgICAgeSA9IGN1cnJlbnQueTtcbiAgICAgIGxldCBkID0gW107XG4gICAgICBsZXQgaiA9IDA7XG5cbiAgICAgIGZvciAoY29uc3Qgb3Agb2Ygb3BzKSB7XG4gICAgICAgIHN3aXRjaCAob3AgfCAwKSB7XG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMucmVjdGFuZ2xlOlxuICAgICAgICAgICAgeCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICAgIHkgPSBhcmdzW2orK107XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGFyZ3NbaisrXTtcbiAgICAgICAgICAgIGNvbnN0IHh3ID0geCArIHdpZHRoO1xuICAgICAgICAgICAgY29uc3QgeWggPSB5ICsgaGVpZ2h0O1xuICAgICAgICAgICAgZC5wdXNoKFwiTVwiLCBwZih4KSwgcGYoeSksIFwiTFwiLCBwZih4dyksIHBmKHkpLCBcIkxcIiwgcGYoeHcpLCBwZih5aCksIFwiTFwiLCBwZih4KSwgcGYoeWgpLCBcIlpcIik7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLm1vdmVUbzpcbiAgICAgICAgICAgIHggPSBhcmdzW2orK107XG4gICAgICAgICAgICB5ID0gYXJnc1tqKytdO1xuICAgICAgICAgICAgZC5wdXNoKFwiTVwiLCBwZih4KSwgcGYoeSkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIF91dGlsLk9QUy5saW5lVG86XG4gICAgICAgICAgICB4ID0gYXJnc1tqKytdO1xuICAgICAgICAgICAgeSA9IGFyZ3NbaisrXTtcbiAgICAgICAgICAgIGQucHVzaChcIkxcIiwgcGYoeCksIHBmKHkpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuY3VydmVUbzpcbiAgICAgICAgICAgIHggPSBhcmdzW2ogKyA0XTtcbiAgICAgICAgICAgIHkgPSBhcmdzW2ogKyA1XTtcbiAgICAgICAgICAgIGQucHVzaChcIkNcIiwgcGYoYXJnc1tqXSksIHBmKGFyZ3NbaiArIDFdKSwgcGYoYXJnc1tqICsgMl0pLCBwZihhcmdzW2ogKyAzXSksIHBmKHgpLCBwZih5KSk7XG4gICAgICAgICAgICBqICs9IDY7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgX3V0aWwuT1BTLmN1cnZlVG8yOlxuICAgICAgICAgICAgZC5wdXNoKFwiQ1wiLCBwZih4KSwgcGYoeSksIHBmKGFyZ3Nbal0pLCBwZihhcmdzW2ogKyAxXSksIHBmKGFyZ3NbaiArIDJdKSwgcGYoYXJnc1tqICsgM10pKTtcbiAgICAgICAgICAgIHggPSBhcmdzW2ogKyAyXTtcbiAgICAgICAgICAgIHkgPSBhcmdzW2ogKyAzXTtcbiAgICAgICAgICAgIGogKz0gNDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuY3VydmVUbzM6XG4gICAgICAgICAgICB4ID0gYXJnc1tqICsgMl07XG4gICAgICAgICAgICB5ID0gYXJnc1tqICsgM107XG4gICAgICAgICAgICBkLnB1c2goXCJDXCIsIHBmKGFyZ3Nbal0pLCBwZihhcmdzW2ogKyAxXSksIHBmKHgpLCBwZih5KSwgcGYoeCksIHBmKHkpKTtcbiAgICAgICAgICAgIGogKz0gNDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBfdXRpbC5PUFMuY2xvc2VQYXRoOlxuICAgICAgICAgICAgZC5wdXNoKFwiWlwiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGQgPSBkLmpvaW4oXCIgXCIpO1xuXG4gICAgICBpZiAoY3VycmVudC5wYXRoICYmIG9wcy5sZW5ndGggPiAwICYmIG9wc1swXSAhPT0gX3V0aWwuT1BTLnJlY3RhbmdsZSAmJiBvcHNbMF0gIT09IF91dGlsLk9QUy5tb3ZlVG8pIHtcbiAgICAgICAgZCA9IGN1cnJlbnQucGF0aC5nZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIikgKyBkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudC5wYXRoID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cGF0aFwiKTtcblxuICAgICAgICB0aGlzLl9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpLmFwcGVuZENoaWxkKGN1cnJlbnQucGF0aCk7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQucGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIiwgZCk7XG4gICAgICBjdXJyZW50LnBhdGguc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIFwibm9uZVwiKTtcbiAgICAgIGN1cnJlbnQuZWxlbWVudCA9IGN1cnJlbnQucGF0aDtcbiAgICAgIGN1cnJlbnQuc2V0Q3VycmVudFBvaW50KHgsIHkpO1xuICAgIH1cblxuICAgIGVuZFBhdGgoKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY3VycmVudC5wYXRoID0gbnVsbDtcblxuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdDbGlwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjdXJyZW50LmVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2xpcCA9IG51bGw7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2xpcElkID0gYGNsaXBwYXRoJHtjbGlwQ291bnQrK31gO1xuICAgICAgY29uc3QgY2xpcFBhdGggPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpjbGlwUGF0aFwiKTtcbiAgICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaWRcIiwgY2xpcElkKTtcbiAgICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwidHJhbnNmb3JtXCIsIHBtKHRoaXMudHJhbnNmb3JtTWF0cml4KSk7XG4gICAgICBjb25zdCBjbGlwRWxlbWVudCA9IGN1cnJlbnQuZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgIGlmICh0aGlzLnBlbmRpbmdDbGlwID09PSBcImV2ZW5vZGRcIikge1xuICAgICAgICBjbGlwRWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImNsaXAtcnVsZVwiLCBcImV2ZW5vZGRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGlwRWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImNsaXAtcnVsZVwiLCBcIm5vbnplcm9cIik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSBudWxsO1xuICAgICAgY2xpcFBhdGguYXBwZW5kQ2hpbGQoY2xpcEVsZW1lbnQpO1xuICAgICAgdGhpcy5kZWZzLmFwcGVuZENoaWxkKGNsaXBQYXRoKTtcblxuICAgICAgaWYgKGN1cnJlbnQuYWN0aXZlQ2xpcFVybCkge1xuICAgICAgICBjdXJyZW50LmNsaXBHcm91cCA9IG51bGw7XG5cbiAgICAgICAgZm9yIChjb25zdCBwcmV2IG9mIHRoaXMuZXh0cmFTdGFjaykge1xuICAgICAgICAgIHByZXYuY2xpcEdyb3VwID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsaXBQYXRoLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiY2xpcC1wYXRoXCIsIGN1cnJlbnQuYWN0aXZlQ2xpcFVybCk7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQuYWN0aXZlQ2xpcFVybCA9IGB1cmwoIyR7Y2xpcElkfSlgO1xuICAgICAgdGhpcy50Z3JwID0gbnVsbDtcbiAgICB9XG5cbiAgICBjbGlwKHR5cGUpIHtcbiAgICAgIHRoaXMucGVuZGluZ0NsaXAgPSB0eXBlO1xuICAgIH1cblxuICAgIGNsb3NlUGF0aCgpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG5cbiAgICAgIGlmIChjdXJyZW50LnBhdGgpIHtcbiAgICAgICAgY29uc3QgZCA9IGAke2N1cnJlbnQucGF0aC5nZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIil9WmA7XG4gICAgICAgIGN1cnJlbnQucGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIiwgZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0TGVhZGluZyhsZWFkaW5nKSB7XG4gICAgICB0aGlzLmN1cnJlbnQubGVhZGluZyA9IC1sZWFkaW5nO1xuICAgIH1cblxuICAgIHNldFRleHRSaXNlKHRleHRSaXNlKSB7XG4gICAgICB0aGlzLmN1cnJlbnQudGV4dFJpc2UgPSB0ZXh0UmlzZTtcbiAgICB9XG5cbiAgICBzZXRUZXh0UmVuZGVyaW5nTW9kZSh0ZXh0UmVuZGVyaW5nTW9kZSkge1xuICAgICAgdGhpcy5jdXJyZW50LnRleHRSZW5kZXJpbmdNb2RlID0gdGV4dFJlbmRlcmluZ01vZGU7XG4gICAgfVxuXG4gICAgc2V0SFNjYWxlKHNjYWxlKSB7XG4gICAgICB0aGlzLmN1cnJlbnQudGV4dEhTY2FsZSA9IHNjYWxlIC8gMTAwO1xuICAgIH1cblxuICAgIHNldFJlbmRlcmluZ0ludGVudChpbnRlbnQpIHt9XG5cbiAgICBzZXRGbGF0bmVzcyhmbGF0bmVzcykge31cblxuICAgIHNldEdTdGF0ZShzdGF0ZXMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHN0YXRlcykge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgXCJMV1wiOlxuICAgICAgICAgICAgdGhpcy5zZXRMaW5lV2lkdGgodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiTENcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0TGluZUNhcCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJMSlwiOlxuICAgICAgICAgICAgdGhpcy5zZXRMaW5lSm9pbih2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJNTFwiOlxuICAgICAgICAgICAgdGhpcy5zZXRNaXRlckxpbWl0KHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIkRcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0RGFzaCh2YWx1ZVswXSwgdmFsdWVbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiUklcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0UmVuZGVyaW5nSW50ZW50KHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIkZMXCI6XG4gICAgICAgICAgICB0aGlzLnNldEZsYXRuZXNzKHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIkZvbnRcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9udCh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJDQVwiOlxuICAgICAgICAgICAgdGhpcy5zZXRTdHJva2VBbHBoYSh2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJjYVwiOlxuICAgICAgICAgICAgdGhpcy5zZXRGaWxsQWxwaGEodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgKDAsIF91dGlsLndhcm4pKGBVbmltcGxlbWVudGVkIGdyYXBoaWMgc3RhdGUgb3BlcmF0b3IgJHtrZXl9YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZpbGwoKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuXG4gICAgICBpZiAoY3VycmVudC5lbGVtZW50KSB7XG4gICAgICAgIGN1cnJlbnQuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImZpbGxcIiwgY3VycmVudC5maWxsQ29sb3IpO1xuICAgICAgICBjdXJyZW50LmVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsLW9wYWNpdHlcIiwgY3VycmVudC5maWxsQWxwaGEpO1xuICAgICAgICB0aGlzLmVuZFBhdGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdHJva2UoKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuXG4gICAgICBpZiAoY3VycmVudC5lbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX3NldFN0cm9rZUF0dHJpYnV0ZXMoY3VycmVudC5lbGVtZW50KTtcblxuICAgICAgICBjdXJyZW50LmVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIFwibm9uZVwiKTtcbiAgICAgICAgdGhpcy5lbmRQYXRoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3NldFN0cm9rZUF0dHJpYnV0ZXMoZWxlbWVudCwgbGluZVdpZHRoU2NhbGUgPSAxKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgbGV0IGRhc2hBcnJheSA9IGN1cnJlbnQuZGFzaEFycmF5O1xuXG4gICAgICBpZiAobGluZVdpZHRoU2NhbGUgIT09IDEgJiYgZGFzaEFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGFzaEFycmF5ID0gZGFzaEFycmF5Lm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gbGluZVdpZHRoU2NhbGUgKiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2VcIiwgY3VycmVudC5zdHJva2VDb2xvcik7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3Ryb2tlLW9wYWNpdHlcIiwgY3VycmVudC5zdHJva2VBbHBoYSk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3Ryb2tlLW1pdGVybGltaXRcIiwgcGYoY3VycmVudC5taXRlckxpbWl0KSk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3Ryb2tlLWxpbmVjYXBcIiwgY3VycmVudC5saW5lQ2FwKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2UtbGluZWpvaW5cIiwgY3VycmVudC5saW5lSm9pbik7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3Ryb2tlLXdpZHRoXCIsIHBmKGxpbmVXaWR0aFNjYWxlICogY3VycmVudC5saW5lV2lkdGgpICsgXCJweFwiKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2UtZGFzaGFycmF5XCIsIGRhc2hBcnJheS5tYXAocGYpLmpvaW4oXCIgXCIpKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2UtZGFzaG9mZnNldFwiLCBwZihsaW5lV2lkdGhTY2FsZSAqIGN1cnJlbnQuZGFzaFBoYXNlKSArIFwicHhcIik7XG4gICAgfVxuXG4gICAgZW9GaWxsKCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudC5lbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY3VycmVudC5lbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbC1ydWxlXCIsIFwiZXZlbm9kZFwiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5maWxsKCk7XG4gICAgfVxuXG4gICAgZmlsbFN0cm9rZSgpIHtcbiAgICAgIHRoaXMuc3Ryb2tlKCk7XG4gICAgICB0aGlzLmZpbGwoKTtcbiAgICB9XG5cbiAgICBlb0ZpbGxTdHJva2UoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50LmVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50LmVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsLXJ1bGVcIiwgXCJldmVub2RkXCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZpbGxTdHJva2UoKTtcbiAgICB9XG5cbiAgICBjbG9zZVN0cm9rZSgpIHtcbiAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICB0aGlzLnN0cm9rZSgpO1xuICAgIH1cblxuICAgIGNsb3NlRmlsbFN0cm9rZSgpIHtcbiAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICB0aGlzLmZpbGxTdHJva2UoKTtcbiAgICB9XG5cbiAgICBjbG9zZUVPRmlsbFN0cm9rZSgpIHtcbiAgICAgIHRoaXMuY2xvc2VQYXRoKCk7XG4gICAgICB0aGlzLmVvRmlsbFN0cm9rZSgpO1xuICAgIH1cblxuICAgIHBhaW50U29saWRDb2xvckltYWdlTWFzaygpIHtcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpyZWN0XCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInhcIiwgXCIwXCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgXCIwXCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIFwiMXB4XCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBcIjFweFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIHRoaXMuY3VycmVudC5maWxsQ29sb3IpO1xuXG4gICAgICB0aGlzLl9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpLmFwcGVuZENoaWxkKHJlY3QpO1xuICAgIH1cblxuICAgIHBhaW50SW1hZ2VYT2JqZWN0KG9iaklkKSB7XG4gICAgICBjb25zdCBpbWdEYXRhID0gb2JqSWQuc3RhcnRzV2l0aChcImdfXCIpID8gdGhpcy5jb21tb25PYmpzLmdldChvYmpJZCkgOiB0aGlzLm9ianMuZ2V0KG9iaklkKTtcblxuICAgICAgaWYgKCFpbWdEYXRhKSB7XG4gICAgICAgICgwLCBfdXRpbC53YXJuKShgRGVwZW5kZW50IGltYWdlIHdpdGggb2JqZWN0IElEICR7b2JqSWR9IGlzIG5vdCByZWFkeSB5ZXRgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnBhaW50SW5saW5lSW1hZ2VYT2JqZWN0KGltZ0RhdGEpO1xuICAgIH1cblxuICAgIHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0KGltZ0RhdGEsIG1hc2spIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gaW1nRGF0YS53aWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xuICAgICAgY29uc3QgaW1nU3JjID0gY29udmVydEltZ0RhdGFUb1BuZyhpbWdEYXRhLCB0aGlzLmZvcmNlRGF0YVNjaGVtYSwgISFtYXNrKTtcbiAgICAgIGNvbnN0IGNsaXByZWN0ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cmVjdFwiKTtcbiAgICAgIGNsaXByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieFwiLCBcIjBcIik7XG4gICAgICBjbGlwcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInlcIiwgXCIwXCIpO1xuICAgICAgY2xpcHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ3aWR0aFwiLCBwZih3aWR0aCkpO1xuICAgICAgY2xpcHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJoZWlnaHRcIiwgcGYoaGVpZ2h0KSk7XG4gICAgICB0aGlzLmN1cnJlbnQuZWxlbWVudCA9IGNsaXByZWN0O1xuICAgICAgdGhpcy5jbGlwKFwibm9uemVyb1wiKTtcbiAgICAgIGNvbnN0IGltZ0VsID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6aW1hZ2VcIik7XG4gICAgICBpbWdFbC5zZXRBdHRyaWJ1dGVOUyhYTElOS19OUywgXCJ4bGluazpocmVmXCIsIGltZ1NyYyk7XG4gICAgICBpbWdFbC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInhcIiwgXCIwXCIpO1xuICAgICAgaW1nRWwuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIHBmKC1oZWlnaHQpKTtcbiAgICAgIGltZ0VsLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwid2lkdGhcIiwgcGYod2lkdGgpICsgXCJweFwiKTtcbiAgICAgIGltZ0VsLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaGVpZ2h0XCIsIHBmKGhlaWdodCkgKyBcInB4XCIpO1xuICAgICAgaW1nRWwuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ0cmFuc2Zvcm1cIiwgYHNjYWxlKCR7cGYoMSAvIHdpZHRoKX0gJHtwZigtMSAvIGhlaWdodCl9KWApO1xuXG4gICAgICBpZiAobWFzaykge1xuICAgICAgICBtYXNrLmFwcGVuZENoaWxkKGltZ0VsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kQ2hpbGQoaW1nRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBhaW50SW1hZ2VNYXNrWE9iamVjdChpbWdEYXRhKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICAgICAgY29uc3Qgd2lkdGggPSBpbWdEYXRhLndpZHRoO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gaW1nRGF0YS5oZWlnaHQ7XG4gICAgICBjb25zdCBmaWxsQ29sb3IgPSBjdXJyZW50LmZpbGxDb2xvcjtcbiAgICAgIGN1cnJlbnQubWFza0lkID0gYG1hc2ske21hc2tDb3VudCsrfWA7XG4gICAgICBjb25zdCBtYXNrID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6bWFza1wiKTtcbiAgICAgIG1hc2suc2V0QXR0cmlidXRlTlMobnVsbCwgXCJpZFwiLCBjdXJyZW50Lm1hc2tJZCk7XG4gICAgICBjb25zdCByZWN0ID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6cmVjdFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ4XCIsIFwiMFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIFwiMFwiKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ3aWR0aFwiLCBwZih3aWR0aCkpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBwZihoZWlnaHQpKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJmaWxsXCIsIGZpbGxDb2xvcik7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwibWFza1wiLCBgdXJsKCMke2N1cnJlbnQubWFza0lkfSlgKTtcbiAgICAgIHRoaXMuZGVmcy5hcHBlbmRDaGlsZChtYXNrKTtcblxuICAgICAgdGhpcy5fZW5zdXJlVHJhbnNmb3JtR3JvdXAoKS5hcHBlbmRDaGlsZChyZWN0KTtcblxuICAgICAgdGhpcy5wYWludElubGluZUltYWdlWE9iamVjdChpbWdEYXRhLCBtYXNrKTtcbiAgICB9XG5cbiAgICBwYWludEZvcm1YT2JqZWN0QmVnaW4obWF0cml4LCBiYm94KSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRyaXgpICYmIG1hdHJpeC5sZW5ndGggPT09IDYpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0obWF0cml4WzBdLCBtYXRyaXhbMV0sIG1hdHJpeFsyXSwgbWF0cml4WzNdLCBtYXRyaXhbNF0sIG1hdHJpeFs1XSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChiYm94KSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gYmJveFsyXSAtIGJib3hbMF07XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGJib3hbM10gLSBiYm94WzFdO1xuICAgICAgICBjb25zdCBjbGlwcmVjdCA9IHRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3ZnOnJlY3RcIik7XG4gICAgICAgIGNsaXByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieFwiLCBiYm94WzBdKTtcbiAgICAgICAgY2xpcHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ5XCIsIGJib3hbMV0pO1xuICAgICAgICBjbGlwcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIndpZHRoXCIsIHBmKHdpZHRoKSk7XG4gICAgICAgIGNsaXByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaGVpZ2h0XCIsIHBmKGhlaWdodCkpO1xuICAgICAgICB0aGlzLmN1cnJlbnQuZWxlbWVudCA9IGNsaXByZWN0O1xuICAgICAgICB0aGlzLmNsaXAoXCJub256ZXJvXCIpO1xuICAgICAgICB0aGlzLmVuZFBhdGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYWludEZvcm1YT2JqZWN0RW5kKCkge31cblxuICAgIF9pbml0aWFsaXplKHZpZXdwb3J0KSB7XG4gICAgICBjb25zdCBzdmcgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlKHZpZXdwb3J0LndpZHRoLCB2aWV3cG9ydC5oZWlnaHQpO1xuICAgICAgY29uc3QgZGVmaW5pdGlvbnMgPSB0aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudChcInN2ZzpkZWZzXCIpO1xuICAgICAgc3ZnLmFwcGVuZENoaWxkKGRlZmluaXRpb25zKTtcbiAgICAgIHRoaXMuZGVmcyA9IGRlZmluaXRpb25zO1xuICAgICAgY29uc3Qgcm9vdEdyb3VwID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6Z1wiKTtcbiAgICAgIHJvb3RHcm91cC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInRyYW5zZm9ybVwiLCBwbSh2aWV3cG9ydC50cmFuc2Zvcm0pKTtcbiAgICAgIHN2Zy5hcHBlbmRDaGlsZChyb290R3JvdXApO1xuICAgICAgdGhpcy5zdmcgPSByb290R3JvdXA7XG4gICAgICByZXR1cm4gc3ZnO1xuICAgIH1cblxuICAgIF9lbnN1cmVDbGlwR3JvdXAoKSB7XG4gICAgICBpZiAoIXRoaXMuY3VycmVudC5jbGlwR3JvdXApIHtcbiAgICAgICAgY29uc3QgY2xpcEdyb3VwID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6Z1wiKTtcbiAgICAgICAgY2xpcEdyb3VwLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiY2xpcC1wYXRoXCIsIHRoaXMuY3VycmVudC5hY3RpdmVDbGlwVXJsKTtcbiAgICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQoY2xpcEdyb3VwKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LmNsaXBHcm91cCA9IGNsaXBHcm91cDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5jbGlwR3JvdXA7XG4gICAgfVxuXG4gICAgX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkge1xuICAgICAgaWYgKCF0aGlzLnRncnApIHtcbiAgICAgICAgdGhpcy50Z3JwID0gdGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJzdmc6Z1wiKTtcbiAgICAgICAgdGhpcy50Z3JwLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwidHJhbnNmb3JtXCIsIHBtKHRoaXMudHJhbnNmb3JtTWF0cml4KSk7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudC5hY3RpdmVDbGlwVXJsKSB7XG4gICAgICAgICAgdGhpcy5fZW5zdXJlQ2xpcEdyb3VwKCkuYXBwZW5kQ2hpbGQodGhpcy50Z3JwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLnRncnApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRncnA7XG4gICAgfVxuXG4gIH07XG59XG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuUERGTm9kZVN0cmVhbSA9IHZvaWQgMDtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxudmFyIF9uZXR3b3JrX3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXygyNik7XG5cbjtcblxuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cbmNvbnN0IGh0dHAgPSByZXF1aXJlKFwiaHR0cFwiKTtcblxuY29uc3QgaHR0cHMgPSByZXF1aXJlKFwiaHR0cHNcIik7XG5cbmNvbnN0IHVybCA9IHJlcXVpcmUoXCJ1cmxcIik7XG5cbmNvbnN0IGZpbGVVcmlSZWdleCA9IC9eZmlsZTpcXC9cXC9cXC9bYS16QS1aXTpcXC8vO1xuXG5mdW5jdGlvbiBwYXJzZVVybChzb3VyY2VVcmwpIHtcbiAgY29uc3QgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHNvdXJjZVVybCk7XG5cbiAgaWYgKHBhcnNlZFVybC5wcm90b2NvbCA9PT0gXCJmaWxlOlwiIHx8IHBhcnNlZFVybC5ob3N0KSB7XG4gICAgcmV0dXJuIHBhcnNlZFVybDtcbiAgfVxuXG4gIGlmICgvXlthLXpdOlsvXFxcXF0vaS50ZXN0KHNvdXJjZVVybCkpIHtcbiAgICByZXR1cm4gdXJsLnBhcnNlKGBmaWxlOi8vLyR7c291cmNlVXJsfWApO1xuICB9XG5cbiAgaWYgKCFwYXJzZWRVcmwuaG9zdCkge1xuICAgIHBhcnNlZFVybC5wcm90b2NvbCA9IFwiZmlsZTpcIjtcbiAgfVxuXG4gIHJldHVybiBwYXJzZWRVcmw7XG59XG5cbmNsYXNzIFBERk5vZGVTdHJlYW0ge1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLnVybCA9IHBhcnNlVXJsKHNvdXJjZS51cmwpO1xuICAgIHRoaXMuaXNIdHRwID0gdGhpcy51cmwucHJvdG9jb2wgPT09IFwiaHR0cDpcIiB8fCB0aGlzLnVybC5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbiAgICB0aGlzLmlzRnNVcmwgPSB0aGlzLnVybC5wcm90b2NvbCA9PT0gXCJmaWxlOlwiO1xuICAgIHRoaXMuaHR0cEhlYWRlcnMgPSB0aGlzLmlzSHR0cCAmJiBzb3VyY2UuaHR0cEhlYWRlcnMgfHwge307XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMgPSBbXTtcbiAgfVxuXG4gIGdldCBfcHJvZ3Jlc3NpdmVEYXRhTGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uX2xvYWRlZCA/PyAwO1xuICB9XG5cbiAgZ2V0RnVsbFJlYWRlcigpIHtcbiAgICAoMCwgX3V0aWwuYXNzZXJ0KSghdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIsIFwiUERGTm9kZVN0cmVhbS5nZXRGdWxsUmVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlLlwiKTtcbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciA9IHRoaXMuaXNGc1VybCA/IG5ldyBQREZOb2RlU3RyZWFtRnNGdWxsUmVhZGVyKHRoaXMpIDogbmV3IFBERk5vZGVTdHJlYW1GdWxsUmVhZGVyKHRoaXMpO1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcjtcbiAgfVxuXG4gIGdldFJhbmdlUmVhZGVyKHN0YXJ0LCBlbmQpIHtcbiAgICBpZiAoZW5kIDw9IHRoaXMuX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZ2VSZWFkZXIgPSB0aGlzLmlzRnNVcmwgPyBuZXcgUERGTm9kZVN0cmVhbUZzUmFuZ2VSZWFkZXIodGhpcywgc3RhcnQsIGVuZCkgOiBuZXcgUERGTm9kZVN0cmVhbVJhbmdlUmVhZGVyKHRoaXMsIHN0YXJ0LCBlbmQpO1xuXG4gICAgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5wdXNoKHJhbmdlUmVhZGVyKTtcblxuICAgIHJldHVybiByYW5nZVJlYWRlcjtcbiAgfVxuXG4gIGNhbmNlbEFsbFJlcXVlc3RzKHJlYXNvbikge1xuICAgIGlmICh0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcikge1xuICAgICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5zbGljZSgwKSkge1xuICAgICAgcmVhZGVyLmNhbmNlbChyZWFzb24pO1xuICAgIH1cbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGTm9kZVN0cmVhbSA9IFBERk5vZGVTdHJlYW07XG5cbmNsYXNzIEJhc2VGdWxsUmVhZGVyIHtcbiAgY29uc3RydWN0b3Ioc3RyZWFtKSB7XG4gICAgdGhpcy5fdXJsID0gc3RyZWFtLnVybDtcbiAgICB0aGlzLl9kb25lID0gZmFsc2U7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSBudWxsO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gICAgY29uc3Qgc291cmNlID0gc3RyZWFtLnNvdXJjZTtcbiAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc291cmNlLmxlbmd0aDtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuICAgIHRoaXMuX2ZpbGVuYW1lID0gbnVsbDtcbiAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSBzb3VyY2UuZGlzYWJsZVJhbmdlIHx8IGZhbHNlO1xuICAgIHRoaXMuX3JhbmdlQ2h1bmtTaXplID0gc291cmNlLnJhbmdlQ2h1bmtTaXplO1xuXG4gICAgaWYgKCF0aGlzLl9yYW5nZUNodW5rU2l6ZSAmJiAhdGhpcy5fZGlzYWJsZVJhbmdlKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlUmFuZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlU3RyZWFtO1xuICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSAhc291cmNlLmRpc2FibGVSYW5nZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gIH1cblxuICBnZXQgaGVhZGVyc1JlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgZ2V0IGZpbGVuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9maWxlbmFtZTtcbiAgfVxuXG4gIGdldCBjb250ZW50TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZW50TGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBhd2FpdCB0aGlzLl9yZWFkQ2FwYWJpbGl0eS5wcm9taXNlO1xuXG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0b3JlZEVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLl9zdG9yZWRFcnJvcjtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVuayA9IHRoaXMuX3JlYWRhYmxlU3RyZWFtLnJlYWQoKTtcblxuICAgIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgICByZXR1cm4gdGhpcy5yZWFkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fbG9hZGVkICs9IGNodW5rLmxlbmd0aDtcblxuICAgIGlmICh0aGlzLm9uUHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMub25Qcm9ncmVzcyh7XG4gICAgICAgIGxvYWRlZDogdGhpcy5fbG9hZGVkLFxuICAgICAgICB0b3RhbDogdGhpcy5fY29udGVudExlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmspLmJ1ZmZlcjtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGJ1ZmZlcixcbiAgICAgIGRvbmU6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICBpZiAoIXRoaXMuX3JlYWRhYmxlU3RyZWFtKSB7XG4gICAgICB0aGlzLl9lcnJvcihyZWFzb24pO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveShyZWFzb24pO1xuICB9XG5cbiAgX2Vycm9yKHJlYXNvbikge1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gcmVhc29uO1xuXG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX3NldFJlYWRhYmxlU3RyZWFtKHJlYWRhYmxlU3RyZWFtKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0gPSByZWFkYWJsZVN0cmVhbTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcInJlYWRhYmxlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcImVuZFwiLCAoKSA9PiB7XG4gICAgICByZWFkYWJsZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9kb25lID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgIH0pO1xuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX2Vycm9yKHJlYXNvbik7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkICYmIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMuX2Vycm9yKG5ldyBfdXRpbC5BYm9ydEV4Y2VwdGlvbihcInN0cmVhbWluZyBpcyBkaXNhYmxlZFwiKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0b3JlZEVycm9yKSB7XG4gICAgICB0aGlzLl9yZWFkYWJsZVN0cmVhbS5kZXN0cm95KHRoaXMuX3N0b3JlZEVycm9yKTtcbiAgICB9XG4gIH1cblxufVxuXG5jbGFzcyBCYXNlUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICB0aGlzLl91cmwgPSBzdHJlYW0udXJsO1xuICAgIHRoaXMuX2RvbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IG51bGw7XG4gICAgdGhpcy5vblByb2dyZXNzID0gbnVsbDtcbiAgICB0aGlzLl9sb2FkZWQgPSAwO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtID0gbnVsbDtcbiAgICB0aGlzLl9yZWFkQ2FwYWJpbGl0eSA9ICgwLCBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJlYW0uc291cmNlO1xuICAgIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlU3RyZWFtO1xuICB9XG5cbiAgZ2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZDtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5fcmVhZENhcGFiaWxpdHkucHJvbWlzZTtcblxuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdG9yZWRFcnJvcikge1xuICAgICAgdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmsgPSB0aGlzLl9yZWFkYWJsZVN0cmVhbS5yZWFkKCk7XG5cbiAgICBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuICAgICAgcmV0dXJuIHRoaXMucmVhZCgpO1xuICAgIH1cblxuICAgIHRoaXMuX2xvYWRlZCArPSBjaHVuay5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5vblByb2dyZXNzKSB7XG4gICAgICB0aGlzLm9uUHJvZ3Jlc3Moe1xuICAgICAgICBsb2FkZWQ6IHRoaXMuX2xvYWRlZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmspLmJ1ZmZlcjtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGJ1ZmZlcixcbiAgICAgIGRvbmU6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICBpZiAoIXRoaXMuX3JlYWRhYmxlU3RyZWFtKSB7XG4gICAgICB0aGlzLl9lcnJvcihyZWFzb24pO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveShyZWFzb24pO1xuICB9XG5cbiAgX2Vycm9yKHJlYXNvbikge1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gcmVhc29uO1xuXG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX3NldFJlYWRhYmxlU3RyZWFtKHJlYWRhYmxlU3RyZWFtKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdHJlYW0gPSByZWFkYWJsZVN0cmVhbTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcInJlYWRhYmxlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9KTtcbiAgICByZWFkYWJsZVN0cmVhbS5vbihcImVuZFwiLCAoKSA9PiB7XG4gICAgICByZWFkYWJsZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9kb25lID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgIH0pO1xuICAgIHJlYWRhYmxlU3RyZWFtLm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX2Vycm9yKHJlYXNvbik7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRoaXMuX3JlYWRhYmxlU3RyZWFtLmRlc3Ryb3kodGhpcy5fc3RvcmVkRXJyb3IpO1xuICAgIH1cbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RPcHRpb25zKHBhcnNlZFVybCwgaGVhZGVycykge1xuICByZXR1cm4ge1xuICAgIHByb3RvY29sOiBwYXJzZWRVcmwucHJvdG9jb2wsXG4gICAgYXV0aDogcGFyc2VkVXJsLmF1dGgsXG4gICAgaG9zdDogcGFyc2VkVXJsLmhvc3RuYW1lLFxuICAgIHBvcnQ6IHBhcnNlZFVybC5wb3J0LFxuICAgIHBhdGg6IHBhcnNlZFVybC5wYXRoLFxuICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICBoZWFkZXJzXG4gIH07XG59XG5cbmNsYXNzIFBERk5vZGVTdHJlYW1GdWxsUmVhZGVyIGV4dGVuZHMgQmFzZUZ1bGxSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICBzdXBlcihzdHJlYW0pO1xuXG4gICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSByZXNwb25zZSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IF91dGlsLk1pc3NpbmdQREZFeGNlcHRpb24oYE1pc3NpbmcgUERGIFwiJHt0aGlzLl91cmx9XCIuYCk7XG4gICAgICAgIHRoaXMuX3N0b3JlZEVycm9yID0gZXJyb3I7XG5cbiAgICAgICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVqZWN0KGVycm9yKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlc29sdmUoKTtcblxuICAgICAgdGhpcy5fc2V0UmVhZGFibGVTdHJlYW0ocmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCBnZXRSZXNwb25zZUhlYWRlciA9IG5hbWUgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdHJlYW0uaGVhZGVyc1tuYW1lLnRvTG93ZXJDYXNlKCldO1xuICAgICAgfTtcblxuICAgICAgY29uc3Qge1xuICAgICAgICBhbGxvd1JhbmdlUmVxdWVzdHMsXG4gICAgICAgIHN1Z2dlc3RlZExlbmd0aFxuICAgICAgfSA9ICgwLCBfbmV0d29ya191dGlscy52YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcykoe1xuICAgICAgICBnZXRSZXNwb25zZUhlYWRlcixcbiAgICAgICAgaXNIdHRwOiBzdHJlYW0uaXNIdHRwLFxuICAgICAgICByYW5nZUNodW5rU2l6ZTogdGhpcy5fcmFuZ2VDaHVua1NpemUsXG4gICAgICAgIGRpc2FibGVSYW5nZTogdGhpcy5fZGlzYWJsZVJhbmdlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSBhbGxvd1JhbmdlUmVxdWVzdHM7XG4gICAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc3VnZ2VzdGVkTGVuZ3RoIHx8IHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gICAgICB0aGlzLl9maWxlbmFtZSA9ICgwLCBfbmV0d29ya191dGlscy5leHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKShnZXRSZXNwb25zZUhlYWRlcik7XG4gICAgfTtcblxuICAgIHRoaXMuX3JlcXVlc3QgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMuX3VybC5wcm90b2NvbCA9PT0gXCJodHRwOlwiKSB7XG4gICAgICB0aGlzLl9yZXF1ZXN0ID0gaHR0cC5yZXF1ZXN0KGNyZWF0ZVJlcXVlc3RPcHRpb25zKHRoaXMuX3VybCwgc3RyZWFtLmh0dHBIZWFkZXJzKSwgaGFuZGxlUmVzcG9uc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXF1ZXN0ID0gaHR0cHMucmVxdWVzdChjcmVhdGVSZXF1ZXN0T3B0aW9ucyh0aGlzLl91cmwsIHN0cmVhbS5odHRwSGVhZGVycyksIGhhbmRsZVJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXF1ZXN0Lm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX3N0b3JlZEVycm9yID0gcmVhc29uO1xuXG4gICAgICB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZWplY3QocmVhc29uKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3JlcXVlc3QuZW5kKCk7XG4gIH1cblxufVxuXG5jbGFzcyBQREZOb2RlU3RyZWFtUmFuZ2VSZWFkZXIgZXh0ZW5kcyBCYXNlUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIHN0YXJ0LCBlbmQpIHtcbiAgICBzdXBlcihzdHJlYW0pO1xuICAgIHRoaXMuX2h0dHBIZWFkZXJzID0ge307XG5cbiAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIHN0cmVhbS5odHRwSGVhZGVycykge1xuICAgICAgY29uc3QgdmFsdWUgPSBzdHJlYW0uaHR0cEhlYWRlcnNbcHJvcGVydHldO1xuXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9odHRwSGVhZGVyc1twcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9odHRwSGVhZGVycy5SYW5nZSA9IGBieXRlcz0ke3N0YXJ0fS0ke2VuZCAtIDF9YDtcblxuICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gcmVzcG9uc2UgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwNCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBfdXRpbC5NaXNzaW5nUERGRXhjZXB0aW9uKGBNaXNzaW5nIFBERiBcIiR7dGhpcy5fdXJsfVwiLmApO1xuICAgICAgICB0aGlzLl9zdG9yZWRFcnJvciA9IGVycm9yO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3NldFJlYWRhYmxlU3RyZWFtKHJlc3BvbnNlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5fcmVxdWVzdCA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5fdXJsLnByb3RvY29sID09PSBcImh0dHA6XCIpIHtcbiAgICAgIHRoaXMuX3JlcXVlc3QgPSBodHRwLnJlcXVlc3QoY3JlYXRlUmVxdWVzdE9wdGlvbnModGhpcy5fdXJsLCB0aGlzLl9odHRwSGVhZGVycyksIGhhbmRsZVJlc3BvbnNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVxdWVzdCA9IGh0dHBzLnJlcXVlc3QoY3JlYXRlUmVxdWVzdE9wdGlvbnModGhpcy5fdXJsLCB0aGlzLl9odHRwSGVhZGVycyksIGhhbmRsZVJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXF1ZXN0Lm9uKFwiZXJyb3JcIiwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX3N0b3JlZEVycm9yID0gcmVhc29uO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcmVxdWVzdC5lbmQoKTtcbiAgfVxuXG59XG5cbmNsYXNzIFBERk5vZGVTdHJlYW1Gc0Z1bGxSZWFkZXIgZXh0ZW5kcyBCYXNlRnVsbFJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHN0cmVhbSkge1xuICAgIHN1cGVyKHN0cmVhbSk7XG4gICAgbGV0IHBhdGggPSBkZWNvZGVVUklDb21wb25lbnQodGhpcy5fdXJsLnBhdGgpO1xuXG4gICAgaWYgKGZpbGVVcmlSZWdleC50ZXN0KHRoaXMuX3VybC5ocmVmKSkge1xuICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXlxcLy8sIFwiXCIpO1xuICAgIH1cblxuICAgIGZzLmxzdGF0KHBhdGgsIChlcnJvciwgc3RhdCkgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIkVOT0VOVFwiKSB7XG4gICAgICAgICAgZXJyb3IgPSBuZXcgX3V0aWwuTWlzc2luZ1BERkV4Y2VwdGlvbihgTWlzc2luZyBQREYgXCIke3BhdGh9XCIuYCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zdG9yZWRFcnJvciA9IGVycm9yO1xuXG4gICAgICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlamVjdChlcnJvcik7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc3RhdC5zaXplO1xuXG4gICAgICB0aGlzLl9zZXRSZWFkYWJsZVN0cmVhbShmcy5jcmVhdGVSZWFkU3RyZWFtKHBhdGgpKTtcblxuICAgICAgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgIH0pO1xuICB9XG5cbn1cblxuY2xhc3MgUERGTm9kZVN0cmVhbUZzUmFuZ2VSZWFkZXIgZXh0ZW5kcyBCYXNlUmFuZ2VSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0sIHN0YXJ0LCBlbmQpIHtcbiAgICBzdXBlcihzdHJlYW0pO1xuICAgIGxldCBwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMuX3VybC5wYXRoKTtcblxuICAgIGlmIChmaWxlVXJpUmVnZXgudGVzdCh0aGlzLl91cmwuaHJlZikpIHtcbiAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoL15cXC8vLCBcIlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRSZWFkYWJsZVN0cmVhbShmcy5jcmVhdGVSZWFkU3RyZWFtKHBhdGgsIHtcbiAgICAgIHN0YXJ0LFxuICAgICAgZW5kOiBlbmQgLSAxXG4gICAgfSkpO1xuICB9XG5cbn1cblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5jcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yID0gY3JlYXRlUmVzcG9uc2VTdGF0dXNFcnJvcjtcbmV4cG9ydHMuZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlciA9IGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXI7XG5leHBvcnRzLnZhbGlkYXRlUmFuZ2VSZXF1ZXN0Q2FwYWJpbGl0aWVzID0gdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXM7XG5leHBvcnRzLnZhbGlkYXRlUmVzcG9uc2VTdGF0dXMgPSB2YWxpZGF0ZVJlc3BvbnNlU3RhdHVzO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2NvbnRlbnRfZGlzcG9zaXRpb24gPSBfX3dfcGRmanNfcmVxdWlyZV9fKDI3KTtcblxudmFyIF9kaXNwbGF5X3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg1KTtcblxuZnVuY3Rpb24gdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMoe1xuICBnZXRSZXNwb25zZUhlYWRlcixcbiAgaXNIdHRwLFxuICByYW5nZUNodW5rU2l6ZSxcbiAgZGlzYWJsZVJhbmdlXG59KSB7XG4gIGNvbnN0IHJldHVyblZhbHVlcyA9IHtcbiAgICBhbGxvd1JhbmdlUmVxdWVzdHM6IGZhbHNlLFxuICAgIHN1Z2dlc3RlZExlbmd0aDogdW5kZWZpbmVkXG4gIH07XG4gIGNvbnN0IGxlbmd0aCA9IHBhcnNlSW50KGdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1MZW5ndGhcIiksIDEwKTtcblxuICBpZiAoIU51bWJlci5pc0ludGVnZXIobGVuZ3RoKSkge1xuICAgIHJldHVybiByZXR1cm5WYWx1ZXM7XG4gIH1cblxuICByZXR1cm5WYWx1ZXMuc3VnZ2VzdGVkTGVuZ3RoID0gbGVuZ3RoO1xuXG4gIGlmIChsZW5ndGggPD0gMiAqIHJhbmdlQ2h1bmtTaXplKSB7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlcztcbiAgfVxuXG4gIGlmIChkaXNhYmxlUmFuZ2UgfHwgIWlzSHR0cCkge1xuICAgIHJldHVybiByZXR1cm5WYWx1ZXM7XG4gIH1cblxuICBpZiAoZ2V0UmVzcG9uc2VIZWFkZXIoXCJBY2NlcHQtUmFuZ2VzXCIpICE9PSBcImJ5dGVzXCIpIHtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWVzO1xuICB9XG5cbiAgY29uc3QgY29udGVudEVuY29kaW5nID0gZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LUVuY29kaW5nXCIpIHx8IFwiaWRlbnRpdHlcIjtcblxuICBpZiAoY29udGVudEVuY29kaW5nICE9PSBcImlkZW50aXR5XCIpIHtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWVzO1xuICB9XG5cbiAgcmV0dXJuVmFsdWVzLmFsbG93UmFuZ2VSZXF1ZXN0cyA9IHRydWU7XG4gIHJldHVybiByZXR1cm5WYWx1ZXM7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIoZ2V0UmVzcG9uc2VIZWFkZXIpIHtcbiAgY29uc3QgY29udGVudERpc3Bvc2l0aW9uID0gZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIpO1xuXG4gIGlmIChjb250ZW50RGlzcG9zaXRpb24pIHtcbiAgICBsZXQgZmlsZW5hbWUgPSAoMCwgX2NvbnRlbnRfZGlzcG9zaXRpb24uZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyKShjb250ZW50RGlzcG9zaXRpb24pO1xuXG4gICAgaWYgKGZpbGVuYW1lLmluY2x1ZGVzKFwiJVwiKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmlsZW5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoZmlsZW5hbWUpO1xuICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgfVxuXG4gICAgaWYgKCgwLCBfZGlzcGxheV91dGlscy5pc1BkZkZpbGUpKGZpbGVuYW1lKSkge1xuICAgICAgcmV0dXJuIGZpbGVuYW1lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKHN0YXR1cywgdXJsKSB7XG4gIGlmIChzdGF0dXMgPT09IDQwNCB8fCBzdGF0dXMgPT09IDAgJiYgdXJsLnN0YXJ0c1dpdGgoXCJmaWxlOlwiKSkge1xuICAgIHJldHVybiBuZXcgX3V0aWwuTWlzc2luZ1BERkV4Y2VwdGlvbignTWlzc2luZyBQREYgXCInICsgdXJsICsgJ1wiLicpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBfdXRpbC5VbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24oYFVuZXhwZWN0ZWQgc2VydmVyIHJlc3BvbnNlICgke3N0YXR1c30pIHdoaWxlIHJldHJpZXZpbmcgUERGIFwiJHt1cmx9XCIuYCwgc3RhdHVzKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVSZXNwb25zZVN0YXR1cyhzdGF0dXMpIHtcbiAgcmV0dXJuIHN0YXR1cyA9PT0gMjAwIHx8IHN0YXR1cyA9PT0gMjA2O1xufVxuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLmdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlciA9IGdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlcjtcblxudmFyIF91dGlsID0gX193X3BkZmpzX3JlcXVpcmVfXygxKTtcblxuZnVuY3Rpb24gZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyKGNvbnRlbnREaXNwb3NpdGlvbikge1xuICBsZXQgbmVlZHNFbmNvZGluZ0ZpeHVwID0gdHJ1ZTtcbiAgbGV0IHRtcCA9IHRvUGFyYW1SZWdFeHAoXCJmaWxlbmFtZVxcXFwqXCIsIFwiaVwiKS5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7XG5cbiAgaWYgKHRtcCkge1xuICAgIHRtcCA9IHRtcFsxXTtcbiAgICBsZXQgZmlsZW5hbWUgPSByZmMyNjE2dW5xdW90ZSh0bXApO1xuICAgIGZpbGVuYW1lID0gdW5lc2NhcGUoZmlsZW5hbWUpO1xuICAgIGZpbGVuYW1lID0gcmZjNTk4N2RlY29kZShmaWxlbmFtZSk7XG4gICAgZmlsZW5hbWUgPSByZmMyMDQ3ZGVjb2RlKGZpbGVuYW1lKTtcbiAgICByZXR1cm4gZml4dXBFbmNvZGluZyhmaWxlbmFtZSk7XG4gIH1cblxuICB0bXAgPSByZmMyMjMxZ2V0cGFyYW0oY29udGVudERpc3Bvc2l0aW9uKTtcblxuICBpZiAodG1wKSB7XG4gICAgY29uc3QgZmlsZW5hbWUgPSByZmMyMDQ3ZGVjb2RlKHRtcCk7XG4gICAgcmV0dXJuIGZpeHVwRW5jb2RpbmcoZmlsZW5hbWUpO1xuICB9XG5cbiAgdG1wID0gdG9QYXJhbVJlZ0V4cChcImZpbGVuYW1lXCIsIFwiaVwiKS5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7XG5cbiAgaWYgKHRtcCkge1xuICAgIHRtcCA9IHRtcFsxXTtcbiAgICBsZXQgZmlsZW5hbWUgPSByZmMyNjE2dW5xdW90ZSh0bXApO1xuICAgIGZpbGVuYW1lID0gcmZjMjA0N2RlY29kZShmaWxlbmFtZSk7XG4gICAgcmV0dXJuIGZpeHVwRW5jb2RpbmcoZmlsZW5hbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9QYXJhbVJlZ0V4cChhdHRyaWJ1dGVQYXR0ZXJuLCBmbGFncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKD86Xnw7KVxcXFxzKlwiICsgYXR0cmlidXRlUGF0dGVybiArIFwiXFxcXHMqPVxcXFxzKlwiICsgXCIoXCIgKyAnW15cIjtcXFxcc11bXjtcXFxcc10qJyArIFwifFwiICsgJ1wiKD86W15cIlxcXFxcXFxcXXxcXFxcXFxcXFwiPykrXCI/JyArIFwiKVwiLCBmbGFncyk7XG4gIH1cblxuICBmdW5jdGlvbiB0ZXh0ZGVjb2RlKGVuY29kaW5nLCB2YWx1ZSkge1xuICAgIGlmIChlbmNvZGluZykge1xuICAgICAgaWYgKCEvXltcXHgwMC1cXHhGRl0rJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nLCB7XG4gICAgICAgICAgZmF0YWw6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9ICgwLCBfdXRpbC5zdHJpbmdUb0J5dGVzKSh2YWx1ZSk7XG4gICAgICAgIHZhbHVlID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyKTtcbiAgICAgICAgbmVlZHNFbmNvZGluZ0ZpeHVwID0gZmFsc2U7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpeHVwRW5jb2RpbmcodmFsdWUpIHtcbiAgICBpZiAobmVlZHNFbmNvZGluZ0ZpeHVwICYmIC9bXFx4ODAtXFx4ZmZdLy50ZXN0KHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSB0ZXh0ZGVjb2RlKFwidXRmLThcIiwgdmFsdWUpO1xuXG4gICAgICBpZiAobmVlZHNFbmNvZGluZ0ZpeHVwKSB7XG4gICAgICAgIHZhbHVlID0gdGV4dGRlY29kZShcImlzby04ODU5LTFcIiwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJmYzIyMzFnZXRwYXJhbShjb250ZW50RGlzcG9zaXRpb25TdHIpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gW107XG4gICAgbGV0IG1hdGNoO1xuICAgIGNvbnN0IGl0ZXIgPSB0b1BhcmFtUmVnRXhwKFwiZmlsZW5hbWVcXFxcKigoPyEwXFxcXGQpXFxcXGQrKShcXFxcKj8pXCIsIFwiaWdcIik7XG5cbiAgICB3aGlsZSAoKG1hdGNoID0gaXRlci5leGVjKGNvbnRlbnREaXNwb3NpdGlvblN0cikpICE9PSBudWxsKSB7XG4gICAgICBsZXQgWywgbiwgcXVvdCwgcGFydF0gPSBtYXRjaDtcbiAgICAgIG4gPSBwYXJzZUludChuLCAxMCk7XG5cbiAgICAgIGlmIChuIGluIG1hdGNoZXMpIHtcbiAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBtYXRjaGVzW25dID0gW3F1b3QsIHBhcnRdO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcnRzID0gW107XG5cbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IG1hdGNoZXMubGVuZ3RoOyArK24pIHtcbiAgICAgIGlmICghKG4gaW4gbWF0Y2hlcykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGxldCBbcXVvdCwgcGFydF0gPSBtYXRjaGVzW25dO1xuICAgICAgcGFydCA9IHJmYzI2MTZ1bnF1b3RlKHBhcnQpO1xuXG4gICAgICBpZiAocXVvdCkge1xuICAgICAgICBwYXJ0ID0gdW5lc2NhcGUocGFydCk7XG5cbiAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICBwYXJ0ID0gcmZjNTk4N2RlY29kZShwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5qb2luKFwiXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmZjMjYxNnVucXVvdGUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnXCInKSkge1xuICAgICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zbGljZSgxKS5zcGxpdCgnXFxcXFwiJyk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgcXVvdGluZGV4ID0gcGFydHNbaV0uaW5kZXhPZignXCInKTtcblxuICAgICAgICBpZiAocXVvdGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHBhcnRzW2ldID0gcGFydHNbaV0uc2xpY2UoMCwgcXVvdGluZGV4KTtcbiAgICAgICAgICBwYXJ0cy5sZW5ndGggPSBpICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnRzW2ldID0gcGFydHNbaV0ucmVwbGFjZSgvXFxcXCguKS9nLCBcIiQxXCIpO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZSA9IHBhcnRzLmpvaW4oJ1wiJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmZjNTk4N2RlY29kZShleHR2YWx1ZSkge1xuICAgIGNvbnN0IGVuY29kaW5nZW5kID0gZXh0dmFsdWUuaW5kZXhPZihcIidcIik7XG5cbiAgICBpZiAoZW5jb2RpbmdlbmQgPT09IC0xKSB7XG4gICAgICByZXR1cm4gZXh0dmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgZW5jb2RpbmcgPSBleHR2YWx1ZS5zbGljZSgwLCBlbmNvZGluZ2VuZCk7XG4gICAgY29uc3QgbGFuZ3ZhbHVlID0gZXh0dmFsdWUuc2xpY2UoZW5jb2RpbmdlbmQgKyAxKTtcbiAgICBjb25zdCB2YWx1ZSA9IGxhbmd2YWx1ZS5yZXBsYWNlKC9eW14nXSonLywgXCJcIik7XG4gICAgcmV0dXJuIHRleHRkZWNvZGUoZW5jb2RpbmcsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJmYzIwNDdkZWNvZGUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlLnN0YXJ0c1dpdGgoXCI9P1wiKSB8fCAvW1xceDAwLVxceDE5XFx4ODAtXFx4ZmZdLy50ZXN0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC89XFw/KFtcXHctXSopXFw/KFtRcUJiXSlcXD8oKD86W14/XXxcXD8oPyE9KSkqKVxcPz0vZywgZnVuY3Rpb24gKG1hdGNoZXMsIGNoYXJzZXQsIGVuY29kaW5nLCB0ZXh0KSB7XG4gICAgICBpZiAoZW5jb2RpbmcgPT09IFwicVwiIHx8IGVuY29kaW5nID09PSBcIlFcIikge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9fL2csIFwiIFwiKTtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvPShbMC05YS1mQS1GXXsyfSkvZywgZnVuY3Rpb24gKG1hdGNoLCBoZXgpIHtcbiAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoZXgsIDE2KSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGV4dGRlY29kZShjaGFyc2V0LCB0ZXh0KTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgdGV4dCA9IGF0b2IodGV4dCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICByZXR1cm4gdGV4dGRlY29kZShjaGFyc2V0LCB0ZXh0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBcIlwiO1xufVxuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlBERk5ldHdvcmtTdHJlYW0gPSB2b2lkIDA7XG5cbnZhciBfdXRpbCA9IF9fd19wZGZqc19yZXF1aXJlX18oMSk7XG5cbnZhciBfbmV0d29ya191dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oMjYpO1xuXG47XG5jb25zdCBPS19SRVNQT05TRSA9IDIwMDtcbmNvbnN0IFBBUlRJQUxfQ09OVEVOVF9SRVNQT05TRSA9IDIwNjtcblxuZnVuY3Rpb24gZ2V0QXJyYXlCdWZmZXIoeGhyKSB7XG4gIGNvbnN0IGRhdGEgPSB4aHIucmVzcG9uc2U7XG5cbiAgaWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBjb25zdCBhcnJheSA9ICgwLCBfdXRpbC5zdHJpbmdUb0J5dGVzKShkYXRhKTtcbiAgcmV0dXJuIGFycmF5LmJ1ZmZlcjtcbn1cblxuY2xhc3MgTmV0d29ya01hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih1cmwsIGFyZ3MgPSB7fSkge1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuaXNIdHRwID0gL15odHRwcz86L2kudGVzdCh1cmwpO1xuICAgIHRoaXMuaHR0cEhlYWRlcnMgPSB0aGlzLmlzSHR0cCAmJiBhcmdzLmh0dHBIZWFkZXJzIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy53aXRoQ3JlZGVudGlhbHMgPSBhcmdzLndpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcblxuICAgIHRoaXMuZ2V0WGhyID0gYXJncy5nZXRYaHIgfHwgZnVuY3Rpb24gTmV0d29ya01hbmFnZXJfZ2V0WGhyKCkge1xuICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmN1cnJYaHJJZCA9IDA7XG4gICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgcmVxdWVzdFJhbmdlKGJlZ2luLCBlbmQsIGxpc3RlbmVycykge1xuICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICBiZWdpbixcbiAgICAgIGVuZFxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gbGlzdGVuZXJzKSB7XG4gICAgICBhcmdzW3Byb3BdID0gbGlzdGVuZXJzW3Byb3BdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYXJncyk7XG4gIH1cblxuICByZXF1ZXN0RnVsbChsaXN0ZW5lcnMpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGxpc3RlbmVycyk7XG4gIH1cblxuICByZXF1ZXN0KGFyZ3MpIHtcbiAgICBjb25zdCB4aHIgPSB0aGlzLmdldFhocigpO1xuICAgIGNvbnN0IHhocklkID0gdGhpcy5jdXJyWGhySWQrKztcbiAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXSA9IHtcbiAgICAgIHhoclxuICAgIH07XG4gICAgeGhyLm9wZW4oXCJHRVRcIiwgdGhpcy51cmwpO1xuICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLndpdGhDcmVkZW50aWFscztcblxuICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gdGhpcy5odHRwSGVhZGVycykge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmh0dHBIZWFkZXJzW3Byb3BlcnR5XTtcblxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIocHJvcGVydHksIHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0h0dHAgJiYgXCJiZWdpblwiIGluIGFyZ3MgJiYgXCJlbmRcIiBpbiBhcmdzKSB7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlJhbmdlXCIsIGBieXRlcz0ke2FyZ3MuYmVnaW59LSR7YXJncy5lbmQgLSAxfWApO1xuICAgICAgcGVuZGluZ1JlcXVlc3QuZXhwZWN0ZWRTdGF0dXMgPSBQQVJUSUFMX0NPTlRFTlRfUkVTUE9OU0U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0LmV4cGVjdGVkU3RhdHVzID0gT0tfUkVTUE9OU0U7XG4gICAgfVxuXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcblxuICAgIGlmIChhcmdzLm9uRXJyb3IpIHtcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBhcmdzLm9uRXJyb3IoeGhyLnN0YXR1cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSB0aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzLCB4aHJJZCk7XG4gICAgeGhyLm9ucHJvZ3Jlc3MgPSB0aGlzLm9uUHJvZ3Jlc3MuYmluZCh0aGlzLCB4aHJJZCk7XG4gICAgcGVuZGluZ1JlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQgPSBhcmdzLm9uSGVhZGVyc1JlY2VpdmVkO1xuICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRG9uZSA9IGFyZ3Mub25Eb25lO1xuICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRXJyb3IgPSBhcmdzLm9uRXJyb3I7XG4gICAgcGVuZGluZ1JlcXVlc3Qub25Qcm9ncmVzcyA9IGFyZ3Mub25Qcm9ncmVzcztcbiAgICB4aHIuc2VuZChudWxsKTtcbiAgICByZXR1cm4geGhySWQ7XG4gIH1cblxuICBvblByb2dyZXNzKHhocklkLCBldnQpIHtcbiAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXTtcblxuICAgIGlmICghcGVuZGluZ1JlcXVlc3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwZW5kaW5nUmVxdWVzdC5vblByb2dyZXNzPy4oZXZ0KTtcbiAgfVxuXG4gIG9uU3RhdGVDaGFuZ2UoeGhySWQsIGV2dCkge1xuICAgIGNvbnN0IHBlbmRpbmdSZXF1ZXN0ID0gdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdO1xuXG4gICAgaWYgKCFwZW5kaW5nUmVxdWVzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHhociA9IHBlbmRpbmdSZXF1ZXN0LnhocjtcblxuICAgIGlmICh4aHIucmVhZHlTdGF0ZSA+PSAyICYmIHBlbmRpbmdSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkhlYWRlcnNSZWNlaXZlZCgpO1xuICAgICAgZGVsZXRlIHBlbmRpbmdSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkO1xuICAgIH1cblxuICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghKHhocklkIGluIHRoaXMucGVuZGluZ1JlcXVlc3RzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdSZXF1ZXN0c1t4aHJJZF07XG5cbiAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMCAmJiB0aGlzLmlzSHR0cCkge1xuICAgICAgcGVuZGluZ1JlcXVlc3Qub25FcnJvcj8uKHhoci5zdGF0dXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHhoclN0YXR1cyA9IHhoci5zdGF0dXMgfHwgT0tfUkVTUE9OU0U7XG4gICAgY29uc3Qgb2tfcmVzcG9uc2Vfb25fcmFuZ2VfcmVxdWVzdCA9IHhoclN0YXR1cyA9PT0gT0tfUkVTUE9OU0UgJiYgcGVuZGluZ1JlcXVlc3QuZXhwZWN0ZWRTdGF0dXMgPT09IFBBUlRJQUxfQ09OVEVOVF9SRVNQT05TRTtcblxuICAgIGlmICghb2tfcmVzcG9uc2Vfb25fcmFuZ2VfcmVxdWVzdCAmJiB4aHJTdGF0dXMgIT09IHBlbmRpbmdSZXF1ZXN0LmV4cGVjdGVkU3RhdHVzKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkVycm9yPy4oeGhyLnN0YXR1cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmsgPSBnZXRBcnJheUJ1ZmZlcih4aHIpO1xuXG4gICAgaWYgKHhoclN0YXR1cyA9PT0gUEFSVElBTF9DT05URU5UX1JFU1BPTlNFKSB7XG4gICAgICBjb25zdCByYW5nZUhlYWRlciA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtUmFuZ2VcIik7XG4gICAgICBjb25zdCBtYXRjaGVzID0gL2J5dGVzIChcXGQrKS0oXFxkKylcXC8oXFxkKykvLmV4ZWMocmFuZ2VIZWFkZXIpO1xuICAgICAgcGVuZGluZ1JlcXVlc3Qub25Eb25lKHtcbiAgICAgICAgYmVnaW46IHBhcnNlSW50KG1hdGNoZXNbMV0sIDEwKSxcbiAgICAgICAgY2h1bmtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoY2h1bmspIHtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRG9uZSh7XG4gICAgICAgIGJlZ2luOiAwLFxuICAgICAgICBjaHVua1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBlbmRpbmdSZXF1ZXN0Lm9uRXJyb3I/Lih4aHIuc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBnZXRSZXF1ZXN0WGhyKHhocklkKSB7XG4gICAgcmV0dXJuIHRoaXMucGVuZGluZ1JlcXVlc3RzW3hocklkXS54aHI7XG4gIH1cblxuICBpc1BlbmRpbmdSZXF1ZXN0KHhocklkKSB7XG4gICAgcmV0dXJuIHhocklkIGluIHRoaXMucGVuZGluZ1JlcXVlc3RzO1xuICB9XG5cbiAgYWJvcnRSZXF1ZXN0KHhocklkKSB7XG4gICAgY29uc3QgeGhyID0gdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdLnhocjtcbiAgICBkZWxldGUgdGhpcy5wZW5kaW5nUmVxdWVzdHNbeGhySWRdO1xuICAgIHhoci5hYm9ydCgpO1xuICB9XG5cbn1cblxuY2xhc3MgUERGTmV0d29ya1N0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLl9tYW5hZ2VyID0gbmV3IE5ldHdvcmtNYW5hZ2VyKHNvdXJjZS51cmwsIHtcbiAgICAgIGh0dHBIZWFkZXJzOiBzb3VyY2UuaHR0cEhlYWRlcnMsXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHNvdXJjZS53aXRoQ3JlZGVudGlhbHNcbiAgICB9KTtcbiAgICB0aGlzLl9yYW5nZUNodW5rU2l6ZSA9IHNvdXJjZS5yYW5nZUNodW5rU2l6ZTtcbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycyA9IFtdO1xuICB9XG5cbiAgX29uUmFuZ2VSZXF1ZXN0UmVhZGVyQ2xvc2VkKHJlYWRlcikge1xuICAgIGNvbnN0IGkgPSB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLmluZGV4T2YocmVhZGVyKTtcblxuICAgIGlmIChpID49IDApIHtcbiAgICAgIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgKDAsIF91dGlsLmFzc2VydCkoIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLCBcIlBERk5ldHdvcmtTdHJlYW0uZ2V0RnVsbFJlYWRlciBjYW4gb25seSBiZSBjYWxsZWQgb25jZS5cIik7XG4gICAgdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIgPSBuZXcgUERGTmV0d29ya1N0cmVhbUZ1bGxSZXF1ZXN0UmVhZGVyKHRoaXMuX21hbmFnZXIsIHRoaXMuX3NvdXJjZSk7XG4gICAgcmV0dXJuIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyO1xuICB9XG5cbiAgZ2V0UmFuZ2VSZWFkZXIoYmVnaW4sIGVuZCkge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBQREZOZXR3b3JrU3RyZWFtUmFuZ2VSZXF1ZXN0UmVhZGVyKHRoaXMuX21hbmFnZXIsIGJlZ2luLCBlbmQpO1xuICAgIHJlYWRlci5vbkNsb3NlZCA9IHRoaXMuX29uUmFuZ2VSZXF1ZXN0UmVhZGVyQ2xvc2VkLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmVhZGVyKTtcblxuICAgIHJldHVybiByZWFkZXI7XG4gIH1cblxuICBjYW5jZWxBbGxSZXF1ZXN0cyhyZWFzb24pIHtcbiAgICB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uY2FuY2VsKHJlYXNvbik7XG5cbiAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnNsaWNlKDApKSB7XG4gICAgICByZWFkZXIuY2FuY2VsKHJlYXNvbik7XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0cy5QREZOZXR3b3JrU3RyZWFtID0gUERGTmV0d29ya1N0cmVhbTtcblxuY2xhc3MgUERGTmV0d29ya1N0cmVhbUZ1bGxSZXF1ZXN0UmVhZGVyIHtcbiAgY29uc3RydWN0b3IobWFuYWdlciwgc291cmNlKSB7XG4gICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgY29uc3QgYXJncyA9IHtcbiAgICAgIG9uSGVhZGVyc1JlY2VpdmVkOiB0aGlzLl9vbkhlYWRlcnNSZWNlaXZlZC5iaW5kKHRoaXMpLFxuICAgICAgb25Eb25lOiB0aGlzLl9vbkRvbmUuYmluZCh0aGlzKSxcbiAgICAgIG9uRXJyb3I6IHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSxcbiAgICAgIG9uUHJvZ3Jlc3M6IHRoaXMuX29uUHJvZ3Jlc3MuYmluZCh0aGlzKVxuICAgIH07XG4gICAgdGhpcy5fdXJsID0gc291cmNlLnVybDtcbiAgICB0aGlzLl9mdWxsUmVxdWVzdElkID0gbWFuYWdlci5yZXF1ZXN0RnVsbChhcmdzKTtcbiAgICB0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHNvdXJjZS5kaXNhYmxlUmFuZ2UgfHwgZmFsc2U7XG4gICAgdGhpcy5fY29udGVudExlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG4gICAgdGhpcy5fcmFuZ2VDaHVua1NpemUgPSBzb3VyY2UucmFuZ2VDaHVua1NpemU7XG5cbiAgICBpZiAoIXRoaXMuX3JhbmdlQ2h1bmtTaXplICYmICF0aGlzLl9kaXNhYmxlUmFuZ2UpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgdGhpcy5fY2FjaGVkQ2h1bmtzID0gW107XG4gICAgdGhpcy5fcmVxdWVzdHMgPSBbXTtcbiAgICB0aGlzLl9kb25lID0gZmFsc2U7XG4gICAgdGhpcy5fc3RvcmVkRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZmlsZW5hbWUgPSBudWxsO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gIH1cblxuICBfb25IZWFkZXJzUmVjZWl2ZWQoKSB7XG4gICAgY29uc3QgZnVsbFJlcXVlc3RYaHJJZCA9IHRoaXMuX2Z1bGxSZXF1ZXN0SWQ7XG5cbiAgICBjb25zdCBmdWxsUmVxdWVzdFhociA9IHRoaXMuX21hbmFnZXIuZ2V0UmVxdWVzdFhocihmdWxsUmVxdWVzdFhocklkKTtcblxuICAgIGNvbnN0IGdldFJlc3BvbnNlSGVhZGVyID0gbmFtZSA9PiB7XG4gICAgICByZXR1cm4gZnVsbFJlcXVlc3RYaHIuZ2V0UmVzcG9uc2VIZWFkZXIobmFtZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGFsbG93UmFuZ2VSZXF1ZXN0cyxcbiAgICAgIHN1Z2dlc3RlZExlbmd0aFxuICAgIH0gPSAoMCwgX25ldHdvcmtfdXRpbHMudmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMpKHtcbiAgICAgIGdldFJlc3BvbnNlSGVhZGVyLFxuICAgICAgaXNIdHRwOiB0aGlzLl9tYW5hZ2VyLmlzSHR0cCxcbiAgICAgIHJhbmdlQ2h1bmtTaXplOiB0aGlzLl9yYW5nZUNodW5rU2l6ZSxcbiAgICAgIGRpc2FibGVSYW5nZTogdGhpcy5fZGlzYWJsZVJhbmdlXG4gICAgfSk7XG5cbiAgICBpZiAoYWxsb3dSYW5nZVJlcXVlc3RzKSB7XG4gICAgICB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc3VnZ2VzdGVkTGVuZ3RoIHx8IHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gICAgdGhpcy5fZmlsZW5hbWUgPSAoMCwgX25ldHdvcmtfdXRpbHMuZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlcikoZ2V0UmVzcG9uc2VIZWFkZXIpO1xuXG4gICAgaWYgKHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMuX21hbmFnZXIuYWJvcnRSZXF1ZXN0KGZ1bGxSZXF1ZXN0WGhySWQpO1xuICAgIH1cblxuICAgIHRoaXMuX2hlYWRlcnNSZWNlaXZlZENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgX29uRG9uZShkYXRhKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gdGhpcy5fcmVxdWVzdHMuc2hpZnQoKTtcblxuICAgICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgICB2YWx1ZTogZGF0YS5jaHVuayxcbiAgICAgICAgICBkb25lOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZENodW5rcy5wdXNoKGRhdGEuY2h1bmspO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2RvbmUgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuX2NhY2hlZENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBfb25FcnJvcihzdGF0dXMpIHtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9ICgwLCBfbmV0d29ya191dGlscy5jcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKShzdGF0dXMsIHRoaXMuX3VybCk7XG5cbiAgICB0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7XG5cbiAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZWplY3QodGhpcy5fc3RvcmVkRXJyb3IpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fY2FjaGVkQ2h1bmtzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBfb25Qcm9ncmVzcyhldnQpIHtcbiAgICB0aGlzLm9uUHJvZ3Jlc3M/Lih7XG4gICAgICBsb2FkZWQ6IGV2dC5sb2FkZWQsXG4gICAgICB0b3RhbDogZXZ0Lmxlbmd0aENvbXB1dGFibGUgPyBldnQudG90YWwgOiB0aGlzLl9jb250ZW50TGVuZ3RoXG4gICAgfSk7XG4gIH1cblxuICBnZXQgZmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbGVuYW1lO1xuICB9XG5cbiAgZ2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgZ2V0IGNvbnRlbnRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gIH1cblxuICBnZXQgaGVhZGVyc1JlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cblxuICBhc3luYyByZWFkKCkge1xuICAgIGlmICh0aGlzLl9zdG9yZWRFcnJvcikge1xuICAgICAgdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NhY2hlZENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaHVuayA9IHRoaXMuX2NhY2hlZENodW5rcy5zaGlmdCgpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgIGRvbmU6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kb25lKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuXG4gICAgdGhpcy5fcmVxdWVzdHMucHVzaChyZXF1ZXN0Q2FwYWJpbGl0eSk7XG5cbiAgICByZXR1cm4gcmVxdWVzdENhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxuXG4gIGNhbmNlbChyZWFzb24pIHtcbiAgICB0aGlzLl9kb25lID0gdHJ1ZTtcblxuICAgIHRoaXMuX2hlYWRlcnNSZWNlaXZlZENhcGFiaWxpdHkucmVqZWN0KHJlYXNvbik7XG5cbiAgICBmb3IgKGNvbnN0IHJlcXVlc3RDYXBhYmlsaXR5IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICByZXF1ZXN0Q2FwYWJpbGl0eS5yZXNvbHZlKHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcblxuICAgIGlmICh0aGlzLl9tYW5hZ2VyLmlzUGVuZGluZ1JlcXVlc3QodGhpcy5fZnVsbFJlcXVlc3RJZCkpIHtcbiAgICAgIHRoaXMuX21hbmFnZXIuYWJvcnRSZXF1ZXN0KHRoaXMuX2Z1bGxSZXF1ZXN0SWQpO1xuICAgIH1cblxuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgfVxuXG59XG5cbmNsYXNzIFBERk5ldHdvcmtTdHJlYW1SYW5nZVJlcXVlc3RSZWFkZXIge1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBiZWdpbiwgZW5kKSB7XG4gICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgY29uc3QgYXJncyA9IHtcbiAgICAgIG9uRG9uZTogdGhpcy5fb25Eb25lLmJpbmQodGhpcyksXG4gICAgICBvbkVycm9yOiB0aGlzLl9vbkVycm9yLmJpbmQodGhpcyksXG4gICAgICBvblByb2dyZXNzOiB0aGlzLl9vblByb2dyZXNzLmJpbmQodGhpcylcbiAgICB9O1xuICAgIHRoaXMuX3VybCA9IG1hbmFnZXIudXJsO1xuICAgIHRoaXMuX3JlcXVlc3RJZCA9IG1hbmFnZXIucmVxdWVzdFJhbmdlKGJlZ2luLCBlbmQsIGFyZ3MpO1xuICAgIHRoaXMuX3JlcXVlc3RzID0gW107XG4gICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBudWxsO1xuICAgIHRoaXMuX2RvbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9yZWRFcnJvciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9uUHJvZ3Jlc3MgPSBudWxsO1xuICAgIHRoaXMub25DbG9zZWQgPSBudWxsO1xuICB9XG5cbiAgX2Nsb3NlKCkge1xuICAgIHRoaXMub25DbG9zZWQ/Lih0aGlzKTtcbiAgfVxuXG4gIF9vbkRvbmUoZGF0YSkge1xuICAgIGNvbnN0IGNodW5rID0gZGF0YS5jaHVuaztcblxuICAgIGlmICh0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSA9IHRoaXMuX3JlcXVlc3RzLnNoaWZ0KCk7XG5cbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgIGRvbmU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcXVldWVkQ2h1bmsgPSBjaHVuaztcbiAgICB9XG5cbiAgICB0aGlzLl9kb25lID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBkb25lOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXF1ZXN0cy5sZW5ndGggPSAwO1xuXG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG4gIF9vbkVycm9yKHN0YXR1cykge1xuICAgIHRoaXMuX3N0b3JlZEVycm9yID0gKDAsIF9uZXR3b3JrX3V0aWxzLmNyZWF0ZVJlc3BvbnNlU3RhdHVzRXJyb3IpKHN0YXR1cywgdGhpcy5fdXJsKTtcblxuICAgIGZvciAoY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgIHJlcXVlc3RDYXBhYmlsaXR5LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9xdWV1ZWRDaHVuayA9IG51bGw7XG4gIH1cblxuICBfb25Qcm9ncmVzcyhldnQpIHtcbiAgICBpZiAoIXRoaXMuaXNTdHJlYW1pbmdTdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMub25Qcm9ncmVzcz8uKHtcbiAgICAgICAgbG9hZGVkOiBldnQubG9hZGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBpZiAodGhpcy5fc3RvcmVkRXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuX3N0b3JlZEVycm9yO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9xdWV1ZWRDaHVuayAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLl9xdWV1ZWRDaHVuaztcbiAgICAgIHRoaXMuX3F1ZXVlZENodW5rID0gbnVsbDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgZG9uZTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RvbmUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG5cbiAgICB0aGlzLl9yZXF1ZXN0cy5wdXNoKHJlcXVlc3RDYXBhYmlsaXR5KTtcblxuICAgIHJldHVybiByZXF1ZXN0Q2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIHRoaXMuX2RvbmUgPSB0cnVlO1xuXG4gICAgZm9yIChjb25zdCByZXF1ZXN0Q2FwYWJpbGl0eSBvZiB0aGlzLl9yZXF1ZXN0cykge1xuICAgICAgcmVxdWVzdENhcGFiaWxpdHkucmVzb2x2ZSh7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX3JlcXVlc3RzLmxlbmd0aCA9IDA7XG5cbiAgICBpZiAodGhpcy5fbWFuYWdlci5pc1BlbmRpbmdSZXF1ZXN0KHRoaXMuX3JlcXVlc3RJZCkpIHtcbiAgICAgIHRoaXMuX21hbmFnZXIuYWJvcnRSZXF1ZXN0KHRoaXMuX3JlcXVlc3RJZCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG59XG5cbi8qKiovIH0pLFxuLyogMjkgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuUERGRmV0Y2hTdHJlYW0gPSB2b2lkIDA7XG5cbnZhciBfdXRpbCA9IF9fd19wZGZqc19yZXF1aXJlX18oMSk7XG5cbnZhciBfbmV0d29ya191dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oMjYpO1xuXG47XG5cbmZ1bmN0aW9uIGNyZWF0ZUZldGNoT3B0aW9ucyhoZWFkZXJzLCB3aXRoQ3JlZGVudGlhbHMsIGFib3J0Q29udHJvbGxlcikge1xuICByZXR1cm4ge1xuICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICBoZWFkZXJzLFxuICAgIHNpZ25hbDogYWJvcnRDb250cm9sbGVyPy5zaWduYWwsXG4gICAgbW9kZTogXCJjb3JzXCIsXG4gICAgY3JlZGVudGlhbHM6IHdpdGhDcmVkZW50aWFscyA/IFwiaW5jbHVkZVwiIDogXCJzYW1lLW9yaWdpblwiLFxuICAgIHJlZGlyZWN0OiBcImZvbGxvd1wiXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhlYWRlcnMoaHR0cEhlYWRlcnMpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBodHRwSGVhZGVycykge1xuICAgIGNvbnN0IHZhbHVlID0gaHR0cEhlYWRlcnNbcHJvcGVydHldO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaGVhZGVycy5hcHBlbmQocHJvcGVydHksIHZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiBoZWFkZXJzO1xufVxuXG5jbGFzcyBQREZGZXRjaFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuaXNIdHRwID0gL15odHRwcz86L2kudGVzdChzb3VyY2UudXJsKTtcbiAgICB0aGlzLmh0dHBIZWFkZXJzID0gdGhpcy5pc0h0dHAgJiYgc291cmNlLmh0dHBIZWFkZXJzIHx8IHt9O1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbnVsbDtcbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzID0gW107XG4gIH1cblxuICBnZXQgX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQgPz8gMDtcbiAgfVxuXG4gIGdldEZ1bGxSZWFkZXIoKSB7XG4gICAgKDAsIF91dGlsLmFzc2VydCkoIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLCBcIlBERkZldGNoU3RyZWFtLmdldEZ1bGxSZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuXCIpO1xuICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyID0gbmV3IFBERkZldGNoU3RyZWFtUmVhZGVyKHRoaXMpO1xuICAgIHJldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcjtcbiAgfVxuXG4gIGdldFJhbmdlUmVhZGVyKGJlZ2luLCBlbmQpIHtcbiAgICBpZiAoZW5kIDw9IHRoaXMuX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IFBERkZldGNoU3RyZWFtUmFuZ2VSZWFkZXIodGhpcywgYmVnaW4sIGVuZCk7XG5cbiAgICB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocmVhZGVyKTtcblxuICAgIHJldHVybiByZWFkZXI7XG4gIH1cblxuICBjYW5jZWxBbGxSZXF1ZXN0cyhyZWFzb24pIHtcbiAgICBpZiAodGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIpIHtcbiAgICAgIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLmNhbmNlbChyZWFzb24pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc2xpY2UoMCkpIHtcbiAgICAgIHJlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG4gIH1cblxufVxuXG5leHBvcnRzLlBERkZldGNoU3RyZWFtID0gUERGRmV0Y2hTdHJlYW07XG5cbmNsYXNzIFBERkZldGNoU3RyZWFtUmVhZGVyIHtcbiAgY29uc3RydWN0b3Ioc3RyZWFtKSB7XG4gICAgdGhpcy5fc3RyZWFtID0gc3RyZWFtO1xuICAgIHRoaXMuX3JlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fbG9hZGVkID0gMDtcbiAgICB0aGlzLl9maWxlbmFtZSA9IG51bGw7XG4gICAgY29uc3Qgc291cmNlID0gc3RyZWFtLnNvdXJjZTtcbiAgICB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSBzb3VyY2Uud2l0aENyZWRlbnRpYWxzIHx8IGZhbHNlO1xuICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBzb3VyY2UubGVuZ3RoO1xuICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5ID0gKDAsIF91dGlsLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHNvdXJjZS5kaXNhYmxlUmFuZ2UgfHwgZmFsc2U7XG4gICAgdGhpcy5fcmFuZ2VDaHVua1NpemUgPSBzb3VyY2UucmFuZ2VDaHVua1NpemU7XG5cbiAgICBpZiAoIXRoaXMuX3JhbmdlQ2h1bmtTaXplICYmICF0aGlzLl9kaXNhYmxlUmFuZ2UpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVSYW5nZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBBYm9ydENvbnRyb2xsZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCA9ICFzb3VyY2UuZGlzYWJsZVN0cmVhbTtcbiAgICB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkID0gIXNvdXJjZS5kaXNhYmxlUmFuZ2U7XG4gICAgdGhpcy5faGVhZGVycyA9IGNyZWF0ZUhlYWRlcnModGhpcy5fc3RyZWFtLmh0dHBIZWFkZXJzKTtcbiAgICBjb25zdCB1cmwgPSBzb3VyY2UudXJsO1xuICAgIGZldGNoKHVybCwgY3JlYXRlRmV0Y2hPcHRpb25zKHRoaXMuX2hlYWRlcnMsIHRoaXMuX3dpdGhDcmVkZW50aWFscywgdGhpcy5fYWJvcnRDb250cm9sbGVyKSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICBpZiAoISgwLCBfbmV0d29ya191dGlscy52YWxpZGF0ZVJlc3BvbnNlU3RhdHVzKShyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgIHRocm93ICgwLCBfbmV0d29ya191dGlscy5jcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKShyZXNwb25zZS5zdGF0dXMsIHVybCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG5cbiAgICAgIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlc29sdmUoKTtcblxuICAgICAgY29uc3QgZ2V0UmVzcG9uc2VIZWFkZXIgPSBuYW1lID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KG5hbWUpO1xuICAgICAgfTtcblxuICAgICAgY29uc3Qge1xuICAgICAgICBhbGxvd1JhbmdlUmVxdWVzdHMsXG4gICAgICAgIHN1Z2dlc3RlZExlbmd0aFxuICAgICAgfSA9ICgwLCBfbmV0d29ya191dGlscy52YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcykoe1xuICAgICAgICBnZXRSZXNwb25zZUhlYWRlcixcbiAgICAgICAgaXNIdHRwOiB0aGlzLl9zdHJlYW0uaXNIdHRwLFxuICAgICAgICByYW5nZUNodW5rU2l6ZTogdGhpcy5fcmFuZ2VDaHVua1NpemUsXG4gICAgICAgIGRpc2FibGVSYW5nZTogdGhpcy5fZGlzYWJsZVJhbmdlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQgPSBhbGxvd1JhbmdlUmVxdWVzdHM7XG4gICAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gc3VnZ2VzdGVkTGVuZ3RoIHx8IHRoaXMuX2NvbnRlbnRMZW5ndGg7XG4gICAgICB0aGlzLl9maWxlbmFtZSA9ICgwLCBfbmV0d29ya191dGlscy5leHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKShnZXRSZXNwb25zZUhlYWRlcik7XG5cbiAgICAgIGlmICghdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgJiYgdGhpcy5faXNSYW5nZVN1cHBvcnRlZCkge1xuICAgICAgICB0aGlzLmNhbmNlbChuZXcgX3V0aWwuQWJvcnRFeGNlcHRpb24oXCJTdHJlYW1pbmcgaXMgZGlzYWJsZWQuXCIpKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCh0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZWplY3QpO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gIH1cblxuICBnZXQgaGVhZGVyc1JlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG5cbiAgZ2V0IGZpbGVuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9maWxlbmFtZTtcbiAgfVxuXG4gIGdldCBjb250ZW50TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZW50TGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBhd2FpdCB0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbHVlLFxuICAgICAgZG9uZVxuICAgIH0gPSBhd2FpdCB0aGlzLl9yZWFkZXIucmVhZCgpO1xuXG4gICAgaWYgKGRvbmUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICBkb25lXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuX2xvYWRlZCArPSB2YWx1ZS5ieXRlTGVuZ3RoO1xuXG4gICAgaWYgKHRoaXMub25Qcm9ncmVzcykge1xuICAgICAgdGhpcy5vblByb2dyZXNzKHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLl9sb2FkZWQsXG4gICAgICAgIHRvdGFsOiB0aGlzLl9jb250ZW50TGVuZ3RoXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheSh2YWx1ZSkuYnVmZmVyO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogYnVmZmVyLFxuICAgICAgZG9uZTogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgY2FuY2VsKHJlYXNvbikge1xuICAgIGlmICh0aGlzLl9yZWFkZXIpIHtcbiAgICAgIHRoaXMuX3JlYWRlci5jYW5jZWwocmVhc29uKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWJvcnRDb250cm9sbGVyKSB7XG4gICAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9XG4gIH1cblxufVxuXG5jbGFzcyBQREZGZXRjaFN0cmVhbVJhbmdlUmVhZGVyIHtcbiAgY29uc3RydWN0b3Ioc3RyZWFtLCBiZWdpbiwgZW5kKSB7XG4gICAgdGhpcy5fc3RyZWFtID0gc3RyZWFtO1xuICAgIHRoaXMuX3JlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fbG9hZGVkID0gMDtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJlYW0uc291cmNlO1xuICAgIHRoaXMuX3dpdGhDcmVkZW50aWFscyA9IHNvdXJjZS53aXRoQ3JlZGVudGlhbHMgfHwgZmFsc2U7XG4gICAgdGhpcy5fcmVhZENhcGFiaWxpdHkgPSAoMCwgX3V0aWwuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQgPSAhc291cmNlLmRpc2FibGVTdHJlYW07XG5cbiAgICBpZiAodHlwZW9mIEFib3J0Q29udHJvbGxlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2hlYWRlcnMgPSBjcmVhdGVIZWFkZXJzKHRoaXMuX3N0cmVhbS5odHRwSGVhZGVycyk7XG5cbiAgICB0aGlzLl9oZWFkZXJzLmFwcGVuZChcIlJhbmdlXCIsIGBieXRlcz0ke2JlZ2lufS0ke2VuZCAtIDF9YCk7XG5cbiAgICBjb25zdCB1cmwgPSBzb3VyY2UudXJsO1xuICAgIGZldGNoKHVybCwgY3JlYXRlRmV0Y2hPcHRpb25zKHRoaXMuX2hlYWRlcnMsIHRoaXMuX3dpdGhDcmVkZW50aWFscywgdGhpcy5fYWJvcnRDb250cm9sbGVyKSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICBpZiAoISgwLCBfbmV0d29ya191dGlscy52YWxpZGF0ZVJlc3BvbnNlU3RhdHVzKShyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgIHRocm93ICgwLCBfbmV0d29ya191dGlscy5jcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKShyZXNwb25zZS5zdGF0dXMsIHVybCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKTtcblxuICAgICAgdGhpcy5fcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcbiAgICB9KS5jYXRjaCh0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZWplY3QpO1xuICAgIHRoaXMub25Qcm9ncmVzcyA9IG51bGw7XG4gIH1cblxuICBnZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkO1xuICB9XG5cbiAgYXN5bmMgcmVhZCgpIHtcbiAgICBhd2FpdCB0aGlzLl9yZWFkQ2FwYWJpbGl0eS5wcm9taXNlO1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbHVlLFxuICAgICAgZG9uZVxuICAgIH0gPSBhd2FpdCB0aGlzLl9yZWFkZXIucmVhZCgpO1xuXG4gICAgaWYgKGRvbmUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICBkb25lXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuX2xvYWRlZCArPSB2YWx1ZS5ieXRlTGVuZ3RoO1xuXG4gICAgaWYgKHRoaXMub25Qcm9ncmVzcykge1xuICAgICAgdGhpcy5vblByb2dyZXNzKHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLl9sb2FkZWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHZhbHVlKS5idWZmZXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBidWZmZXIsXG4gICAgICBkb25lOiBmYWxzZVxuICAgIH07XG4gIH1cblxuICBjYW5jZWwocmVhc29uKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRlcikge1xuICAgICAgdGhpcy5fcmVhZGVyLmNhbmNlbChyZWFzb24pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgIH1cbiAgfVxuXG59XG5cbi8qKiovIH0pXG4vKioqKioqLyBcdF0pO1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dfcGRmanNfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG4vKioqKioqLyBcdFx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovIFx0XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSB7fTtcbi8vIFRoaXMgZW50cnkgbmVlZCB0byBiZSB3cmFwcGVkIGluIGFuIElJRkUgYmVjYXVzZSBpdCBuZWVkIHRvIGJlIGlzb2xhdGVkIGFnYWluc3Qgb3RoZXIgbW9kdWxlcyBpbiB0aGUgY2h1bmsuXG4oKCkgPT4ge1xudmFyIGV4cG9ydHMgPSBfX3dlYnBhY2tfZXhwb3J0c19fO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFubm90YXRpb25MYXllclwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Fubm90YXRpb25fbGF5ZXIuQW5ub3RhdGlvbkxheWVyO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBbm5vdGF0aW9uTW9kZVwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3V0aWwuQW5ub3RhdGlvbk1vZGU7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNNYXBDb21wcmVzc2lvblR5cGVcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91dGlsLkNNYXBDb21wcmVzc2lvblR5cGU7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkdsb2JhbFdvcmtlck9wdGlvbnNcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF93b3JrZXJfb3B0aW9ucy5HbG9iYWxXb3JrZXJPcHRpb25zO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJJbnZhbGlkUERGRXhjZXB0aW9uXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXRpbC5JbnZhbGlkUERGRXhjZXB0aW9uO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJMb29wYmFja1BvcnRcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9hcGkuTG9vcGJhY2tQb3J0O1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNaXNzaW5nUERGRXhjZXB0aW9uXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXRpbC5NaXNzaW5nUERGRXhjZXB0aW9uO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJPUFNcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91dGlsLk9QUztcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUERGRGF0YVJhbmdlVHJhbnNwb3J0XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfYXBpLlBERkRhdGFSYW5nZVRyYW5zcG9ydDtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUERGRGF0ZVN0cmluZ1wiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Rpc3BsYXlfdXRpbHMuUERGRGF0ZVN0cmluZztcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUERGV29ya2VyXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfYXBpLlBERldvcmtlcjtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUGFzc3dvcmRSZXNwb25zZXNcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91dGlsLlBhc3N3b3JkUmVzcG9uc2VzO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQZXJtaXNzaW9uRmxhZ1wiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3V0aWwuUGVybWlzc2lvbkZsYWc7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBpeGVsc1BlckluY2hcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9kaXNwbGF5X3V0aWxzLlBpeGVsc1BlckluY2g7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvblwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Rpc3BsYXlfdXRpbHMuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTVkdHcmFwaGljc1wiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3N2Zy5TVkdHcmFwaGljcztcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVU5TVVBQT1JURURfRkVBVFVSRVNcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91dGlsLlVOU1VQUE9SVEVEX0ZFQVRVUkVTO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb25cIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91dGlsLlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbjtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVXRpbFwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3V0aWwuVXRpbDtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVmVyYm9zaXR5TGV2ZWxcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF91dGlsLlZlcmJvc2l0eUxldmVsO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJYZmFMYXllclwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3hmYV9sYXllci5YZmFMYXllcjtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiYnVpbGRcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9hcGkuYnVpbGQ7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNyZWF0ZVByb21pc2VDYXBhYmlsaXR5XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXRpbC5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eTtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY3JlYXRlVmFsaWRBYnNvbHV0ZVVybFwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3V0aWwuY3JlYXRlVmFsaWRBYnNvbHV0ZVVybDtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0RG9jdW1lbnRcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9hcGkuZ2V0RG9jdW1lbnQ7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImdldEZpbGVuYW1lRnJvbVVybFwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Rpc3BsYXlfdXRpbHMuZ2V0RmlsZW5hbWVGcm9tVXJsO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJnZXRQZGZGaWxlbmFtZUZyb21VcmxcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9kaXNwbGF5X3V0aWxzLmdldFBkZkZpbGVuYW1lRnJvbVVybDtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0WGZhUGFnZVZpZXdwb3J0XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfZGlzcGxheV91dGlscy5nZXRYZmFQYWdlVmlld3BvcnQ7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImlzUGRmRmlsZVwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Rpc3BsYXlfdXRpbHMuaXNQZGZGaWxlO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJsb2FkU2NyaXB0XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfZGlzcGxheV91dGlscy5sb2FkU2NyaXB0O1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZW5kZXJUZXh0TGF5ZXJcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90ZXh0X2xheWVyLnJlbmRlclRleHRMYXllcjtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic2hhZG93XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdXRpbC5zaGFkb3c7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInZlcnNpb25cIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9hcGkudmVyc2lvbjtcbiAgfVxufSkpO1xuXG52YXIgX3V0aWwgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2FwaSA9IF9fd19wZGZqc19yZXF1aXJlX18oNCk7XG5cbnZhciBfZGlzcGxheV91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oNSk7XG5cbnZhciBfYW5ub3RhdGlvbl9sYXllciA9IF9fd19wZGZqc19yZXF1aXJlX18oMjApO1xuXG52YXIgX3dvcmtlcl9vcHRpb25zID0gX193X3BkZmpzX3JlcXVpcmVfXygxMyk7XG5cbnZhciBfaXNfbm9kZSA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbnZhciBfdGV4dF9sYXllciA9IF9fd19wZGZqc19yZXF1aXJlX18oMjMpO1xuXG52YXIgX3N2ZyA9IF9fd19wZGZqc19yZXF1aXJlX18oMjQpO1xuXG52YXIgX3hmYV9sYXllciA9IF9fd19wZGZqc19yZXF1aXJlX18oMjIpO1xuXG5jb25zdCBwZGZqc1ZlcnNpb24gPSAnMi4xNC4zMDUnO1xuY29uc3QgcGRmanNCdWlsZCA9ICdlYWFhOGI0YWQnO1xue1xuICBpZiAoX2lzX25vZGUuaXNOb2RlSlMpIHtcbiAgICBjb25zdCB7XG4gICAgICBQREZOb2RlU3RyZWFtXG4gICAgfSA9IF9fd19wZGZqc19yZXF1aXJlX18oMjUpO1xuXG4gICAgKDAsIF9hcGkuc2V0UERGTmV0d29ya1N0cmVhbUZhY3RvcnkpKHBhcmFtcyA9PiB7XG4gICAgICByZXR1cm4gbmV3IFBERk5vZGVTdHJlYW0ocGFyYW1zKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7XG4gICAgICBQREZOZXR3b3JrU3RyZWFtXG4gICAgfSA9IF9fd19wZGZqc19yZXF1aXJlX18oMjgpO1xuXG4gICAgY29uc3Qge1xuICAgICAgUERGRmV0Y2hTdHJlYW1cbiAgICB9ID0gX193X3BkZmpzX3JlcXVpcmVfXygyOSk7XG5cbiAgICAoMCwgX2FwaS5zZXRQREZOZXR3b3JrU3RyZWFtRmFjdG9yeSkocGFyYW1zID0+IHtcbiAgICAgIGlmICgoMCwgX2Rpc3BsYXlfdXRpbHMuaXNWYWxpZEZldGNoVXJsKShwYXJhbXMudXJsKSkge1xuICAgICAgICByZXR1cm4gbmV3IFBERkZldGNoU3RyZWFtKHBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgUERGTmV0d29ya1N0cmVhbShwYXJhbXMpO1xuICAgIH0pO1xuICB9XG59XG59KSgpO1xuXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfZXhwb3J0c19fO1xuLyoqKioqKi8gfSkoKVxuO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wZGYuanMubWFwIiwiLyoqXG4gKiBAbGljc3RhcnQgVGhlIGZvbGxvd2luZyBpcyB0aGUgZW50aXJlIGxpY2Vuc2Ugbm90aWNlIGZvciB0aGVcbiAqIEphdmFTY3JpcHQgY29kZSBpbiB0aGlzIHBhZ2VcbiAqXG4gKiBDb3B5cmlnaHQgMjAyMiBNb3ppbGxhIEZvdW5kYXRpb25cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICogQGxpY2VuZCBUaGUgYWJvdmUgaXMgdGhlIGVudGlyZSBsaWNlbnNlIG5vdGljZSBmb3IgdGhlXG4gKiBKYXZhU2NyaXB0IGNvZGUgaW4gdGhpcyBwYWdlXG4gKi9cblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJwZGZqcy1kaXN0L3dlYi9wZGZfdmlld2VyXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInBkZmpzLWRpc3Qvd2ViL3BkZl92aWV3ZXJcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wicGRmanMtZGlzdC93ZWIvcGRmX3ZpZXdlclwiXSA9IHJvb3QucGRmanNWaWV3ZXIgPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gLyoqKioqKi8gKCgpID0+IHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHRcInVzZSBzdHJpY3RcIjtcbi8qKioqKiovIFx0dmFyIF9fd2VicGFja19tb2R1bGVzX18gPSAoW1xuLyogMCAqLyxcbi8qIDEgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuRGVmYXVsdFhmYUxheWVyRmFjdG9yeSA9IGV4cG9ydHMuRGVmYXVsdFRleHRMYXllckZhY3RvcnkgPSBleHBvcnRzLkRlZmF1bHRTdHJ1Y3RUcmVlTGF5ZXJGYWN0b3J5ID0gZXhwb3J0cy5EZWZhdWx0QW5ub3RhdGlvbkxheWVyRmFjdG9yeSA9IHZvaWQgMDtcblxudmFyIF9hbm5vdGF0aW9uX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2wxMG5fdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDQpO1xuXG52YXIgX3BkZl9saW5rX3NlcnZpY2UgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDUpO1xuXG52YXIgX3N0cnVjdF90cmVlX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3RleHRfbGF5ZXJfYnVpbGRlciA9IF9fd19wZGZqc19yZXF1aXJlX18oOCk7XG5cbnZhciBfeGZhX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDkpO1xuXG5jbGFzcyBEZWZhdWx0QW5ub3RhdGlvbkxheWVyRmFjdG9yeSB7XG4gIGNyZWF0ZUFubm90YXRpb25MYXllckJ1aWxkZXIocGFnZURpdiwgcGRmUGFnZSwgYW5ub3RhdGlvblN0b3JhZ2UgPSBudWxsLCBpbWFnZVJlc291cmNlc1BhdGggPSBcIlwiLCByZW5kZXJGb3JtcyA9IHRydWUsIGwxMG4gPSBfbDEwbl91dGlscy5OdWxsTDEwbiwgZW5hYmxlU2NyaXB0aW5nID0gZmFsc2UsIGhhc0pTQWN0aW9uc1Byb21pc2UgPSBudWxsLCBtb3VzZVN0YXRlID0gbnVsbCwgZmllbGRPYmplY3RzUHJvbWlzZSA9IG51bGwsIGFubm90YXRpb25DYW52YXNNYXAgPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBfYW5ub3RhdGlvbl9sYXllcl9idWlsZGVyLkFubm90YXRpb25MYXllckJ1aWxkZXIoe1xuICAgICAgcGFnZURpdixcbiAgICAgIHBkZlBhZ2UsXG4gICAgICBpbWFnZVJlc291cmNlc1BhdGgsXG4gICAgICByZW5kZXJGb3JtcyxcbiAgICAgIGxpbmtTZXJ2aWNlOiBuZXcgX3BkZl9saW5rX3NlcnZpY2UuU2ltcGxlTGlua1NlcnZpY2UoKSxcbiAgICAgIGwxMG4sXG4gICAgICBhbm5vdGF0aW9uU3RvcmFnZSxcbiAgICAgIGVuYWJsZVNjcmlwdGluZyxcbiAgICAgIGhhc0pTQWN0aW9uc1Byb21pc2UsXG4gICAgICBmaWVsZE9iamVjdHNQcm9taXNlLFxuICAgICAgbW91c2VTdGF0ZSxcbiAgICAgIGFubm90YXRpb25DYW52YXNNYXBcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuRGVmYXVsdEFubm90YXRpb25MYXllckZhY3RvcnkgPSBEZWZhdWx0QW5ub3RhdGlvbkxheWVyRmFjdG9yeTtcblxuY2xhc3MgRGVmYXVsdFN0cnVjdFRyZWVMYXllckZhY3Rvcnkge1xuICBjcmVhdGVTdHJ1Y3RUcmVlTGF5ZXJCdWlsZGVyKHBkZlBhZ2UpIHtcbiAgICByZXR1cm4gbmV3IF9zdHJ1Y3RfdHJlZV9sYXllcl9idWlsZGVyLlN0cnVjdFRyZWVMYXllckJ1aWxkZXIoe1xuICAgICAgcGRmUGFnZVxuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0cy5EZWZhdWx0U3RydWN0VHJlZUxheWVyRmFjdG9yeSA9IERlZmF1bHRTdHJ1Y3RUcmVlTGF5ZXJGYWN0b3J5O1xuXG5jbGFzcyBEZWZhdWx0VGV4dExheWVyRmFjdG9yeSB7XG4gIGNyZWF0ZVRleHRMYXllckJ1aWxkZXIodGV4dExheWVyRGl2LCBwYWdlSW5kZXgsIHZpZXdwb3J0LCBlbmhhbmNlVGV4dFNlbGVjdGlvbiA9IGZhbHNlLCBldmVudEJ1cywgaGlnaGxpZ2h0ZXIpIHtcbiAgICByZXR1cm4gbmV3IF90ZXh0X2xheWVyX2J1aWxkZXIuVGV4dExheWVyQnVpbGRlcih7XG4gICAgICB0ZXh0TGF5ZXJEaXYsXG4gICAgICBwYWdlSW5kZXgsXG4gICAgICB2aWV3cG9ydCxcbiAgICAgIGVuaGFuY2VUZXh0U2VsZWN0aW9uLFxuICAgICAgZXZlbnRCdXMsXG4gICAgICBoaWdobGlnaHRlclxuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0cy5EZWZhdWx0VGV4dExheWVyRmFjdG9yeSA9IERlZmF1bHRUZXh0TGF5ZXJGYWN0b3J5O1xuXG5jbGFzcyBEZWZhdWx0WGZhTGF5ZXJGYWN0b3J5IHtcbiAgY3JlYXRlWGZhTGF5ZXJCdWlsZGVyKHBhZ2VEaXYsIHBkZlBhZ2UsIGFubm90YXRpb25TdG9yYWdlID0gbnVsbCwgeGZhSHRtbCA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IF94ZmFfbGF5ZXJfYnVpbGRlci5YZmFMYXllckJ1aWxkZXIoe1xuICAgICAgcGFnZURpdixcbiAgICAgIHBkZlBhZ2UsXG4gICAgICBhbm5vdGF0aW9uU3RvcmFnZSxcbiAgICAgIGxpbmtTZXJ2aWNlOiBuZXcgX3BkZl9saW5rX3NlcnZpY2UuU2ltcGxlTGlua1NlcnZpY2UoKSxcbiAgICAgIHhmYUh0bWxcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuRGVmYXVsdFhmYUxheWVyRmFjdG9yeSA9IERlZmF1bHRYZmFMYXllckZhY3Rvcnk7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5Bbm5vdGF0aW9uTGF5ZXJCdWlsZGVyID0gdm9pZCAwO1xuXG52YXIgX3BkZmpzTGliID0gX193X3BkZmpzX3JlcXVpcmVfXygzKTtcblxudmFyIF9sMTBuX3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg0KTtcblxuY2xhc3MgQW5ub3RhdGlvbkxheWVyQnVpbGRlciB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwYWdlRGl2LFxuICAgIHBkZlBhZ2UsXG4gICAgbGlua1NlcnZpY2UsXG4gICAgZG93bmxvYWRNYW5hZ2VyLFxuICAgIGFubm90YXRpb25TdG9yYWdlID0gbnVsbCxcbiAgICBpbWFnZVJlc291cmNlc1BhdGggPSBcIlwiLFxuICAgIHJlbmRlckZvcm1zID0gdHJ1ZSxcbiAgICBsMTBuID0gX2wxMG5fdXRpbHMuTnVsbEwxMG4sXG4gICAgZW5hYmxlU2NyaXB0aW5nID0gZmFsc2UsXG4gICAgaGFzSlNBY3Rpb25zUHJvbWlzZSA9IG51bGwsXG4gICAgZmllbGRPYmplY3RzUHJvbWlzZSA9IG51bGwsXG4gICAgbW91c2VTdGF0ZSA9IG51bGwsXG4gICAgYW5ub3RhdGlvbkNhbnZhc01hcCA9IG51bGxcbiAgfSkge1xuICAgIHRoaXMucGFnZURpdiA9IHBhZ2VEaXY7XG4gICAgdGhpcy5wZGZQYWdlID0gcGRmUGFnZTtcbiAgICB0aGlzLmxpbmtTZXJ2aWNlID0gbGlua1NlcnZpY2U7XG4gICAgdGhpcy5kb3dubG9hZE1hbmFnZXIgPSBkb3dubG9hZE1hbmFnZXI7XG4gICAgdGhpcy5pbWFnZVJlc291cmNlc1BhdGggPSBpbWFnZVJlc291cmNlc1BhdGg7XG4gICAgdGhpcy5yZW5kZXJGb3JtcyA9IHJlbmRlckZvcm1zO1xuICAgIHRoaXMubDEwbiA9IGwxMG47XG4gICAgdGhpcy5hbm5vdGF0aW9uU3RvcmFnZSA9IGFubm90YXRpb25TdG9yYWdlO1xuICAgIHRoaXMuZW5hYmxlU2NyaXB0aW5nID0gZW5hYmxlU2NyaXB0aW5nO1xuICAgIHRoaXMuX2hhc0pTQWN0aW9uc1Byb21pc2UgPSBoYXNKU0FjdGlvbnNQcm9taXNlO1xuICAgIHRoaXMuX2ZpZWxkT2JqZWN0c1Byb21pc2UgPSBmaWVsZE9iamVjdHNQcm9taXNlO1xuICAgIHRoaXMuX21vdXNlU3RhdGUgPSBtb3VzZVN0YXRlO1xuICAgIHRoaXMuX2Fubm90YXRpb25DYW52YXNNYXAgPSBhbm5vdGF0aW9uQ2FudmFzTWFwO1xuICAgIHRoaXMuZGl2ID0gbnVsbDtcbiAgICB0aGlzLl9jYW5jZWxsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcih2aWV3cG9ydCwgaW50ZW50ID0gXCJkaXNwbGF5XCIpIHtcbiAgICBjb25zdCBbYW5ub3RhdGlvbnMsIGhhc0pTQWN0aW9ucyA9IGZhbHNlLCBmaWVsZE9iamVjdHMgPSBudWxsXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnBkZlBhZ2UuZ2V0QW5ub3RhdGlvbnMoe1xuICAgICAgaW50ZW50XG4gICAgfSksIHRoaXMuX2hhc0pTQWN0aW9uc1Byb21pc2UsIHRoaXMuX2ZpZWxkT2JqZWN0c1Byb21pc2VdKTtcblxuICAgIGlmICh0aGlzLl9jYW5jZWxsZWQgfHwgYW5ub3RhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGFyYW1ldGVycyA9IHtcbiAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydC5jbG9uZSh7XG4gICAgICAgIGRvbnRGbGlwOiB0cnVlXG4gICAgICB9KSxcbiAgICAgIGRpdjogdGhpcy5kaXYsXG4gICAgICBhbm5vdGF0aW9ucyxcbiAgICAgIHBhZ2U6IHRoaXMucGRmUGFnZSxcbiAgICAgIGltYWdlUmVzb3VyY2VzUGF0aDogdGhpcy5pbWFnZVJlc291cmNlc1BhdGgsXG4gICAgICByZW5kZXJGb3JtczogdGhpcy5yZW5kZXJGb3JtcyxcbiAgICAgIGxpbmtTZXJ2aWNlOiB0aGlzLmxpbmtTZXJ2aWNlLFxuICAgICAgZG93bmxvYWRNYW5hZ2VyOiB0aGlzLmRvd25sb2FkTWFuYWdlcixcbiAgICAgIGFubm90YXRpb25TdG9yYWdlOiB0aGlzLmFubm90YXRpb25TdG9yYWdlLFxuICAgICAgZW5hYmxlU2NyaXB0aW5nOiB0aGlzLmVuYWJsZVNjcmlwdGluZyxcbiAgICAgIGhhc0pTQWN0aW9ucyxcbiAgICAgIGZpZWxkT2JqZWN0cyxcbiAgICAgIG1vdXNlU3RhdGU6IHRoaXMuX21vdXNlU3RhdGUsXG4gICAgICBhbm5vdGF0aW9uQ2FudmFzTWFwOiB0aGlzLl9hbm5vdGF0aW9uQ2FudmFzTWFwXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmRpdikge1xuICAgICAgX3BkZmpzTGliLkFubm90YXRpb25MYXllci51cGRhdGUocGFyYW1ldGVycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRoaXMuZGl2LmNsYXNzTmFtZSA9IFwiYW5ub3RhdGlvbkxheWVyXCI7XG4gICAgICB0aGlzLnBhZ2VEaXYuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xuICAgICAgcGFyYW1ldGVycy5kaXYgPSB0aGlzLmRpdjtcblxuICAgICAgX3BkZmpzTGliLkFubm90YXRpb25MYXllci5yZW5kZXIocGFyYW1ldGVycyk7XG5cbiAgICAgIHRoaXMubDEwbi50cmFuc2xhdGUodGhpcy5kaXYpO1xuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLl9jYW5jZWxsZWQgPSB0cnVlO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBpZiAoIXRoaXMuZGl2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kaXYuaGlkZGVuID0gdHJ1ZTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuQW5ub3RhdGlvbkxheWVyQnVpbGRlciA9IEFubm90YXRpb25MYXllckJ1aWxkZXI7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKChtb2R1bGUpID0+IHtcblxuXG5cbmxldCBwZGZqc0xpYjtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93W1wicGRmanMtZGlzdC9idWlsZC9wZGZcIl0pIHtcbiAgcGRmanNMaWIgPSB3aW5kb3dbXCJwZGZqcy1kaXN0L2J1aWxkL3BkZlwiXTtcbn0gZWxzZSB7XG4gIHBkZmpzTGliID0gcmVxdWlyZShcIi4uL2J1aWxkL3BkZi5qc1wiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwZGZqc0xpYjtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLk51bGxMMTBuID0gdm9pZCAwO1xuZXhwb3J0cy5maXh1cExhbmdDb2RlID0gZml4dXBMYW5nQ29kZTtcbmV4cG9ydHMuZ2V0TDEwbkZhbGxiYWNrID0gZ2V0TDEwbkZhbGxiYWNrO1xuY29uc3QgREVGQVVMVF9MMTBOX1NUUklOR1MgPSB7XG4gIG9mX3BhZ2VzOiBcIm9mIHt7cGFnZXNDb3VudH19XCIsXG4gIHBhZ2Vfb2ZfcGFnZXM6IFwiKHt7cGFnZU51bWJlcn19IG9mIHt7cGFnZXNDb3VudH19KVwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX2tiOiBcInt7c2l6ZV9rYn19IEtCICh7e3NpemVfYn19IGJ5dGVzKVwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX21iOiBcInt7c2l6ZV9tYn19IE1CICh7e3NpemVfYn19IGJ5dGVzKVwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX2RhdGVfc3RyaW5nOiBcInt7ZGF0ZX19LCB7e3RpbWV9fVwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX3BhZ2Vfc2l6ZV91bml0X2luY2hlczogXCJpblwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX3BhZ2Vfc2l6ZV91bml0X21pbGxpbWV0ZXJzOiBcIm1tXCIsXG4gIGRvY3VtZW50X3Byb3BlcnRpZXNfcGFnZV9zaXplX29yaWVudGF0aW9uX3BvcnRyYWl0OiBcInBvcnRyYWl0XCIsXG4gIGRvY3VtZW50X3Byb3BlcnRpZXNfcGFnZV9zaXplX29yaWVudGF0aW9uX2xhbmRzY2FwZTogXCJsYW5kc2NhcGVcIixcbiAgZG9jdW1lbnRfcHJvcGVydGllc19wYWdlX3NpemVfbmFtZV9hMzogXCJBM1wiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX3BhZ2Vfc2l6ZV9uYW1lX2E0OiBcIkE0XCIsXG4gIGRvY3VtZW50X3Byb3BlcnRpZXNfcGFnZV9zaXplX25hbWVfbGV0dGVyOiBcIkxldHRlclwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX3BhZ2Vfc2l6ZV9uYW1lX2xlZ2FsOiBcIkxlZ2FsXCIsXG4gIGRvY3VtZW50X3Byb3BlcnRpZXNfcGFnZV9zaXplX2RpbWVuc2lvbl9zdHJpbmc6IFwie3t3aWR0aH19IMOXIHt7aGVpZ2h0fX0ge3t1bml0fX0gKHt7b3JpZW50YXRpb259fSlcIixcbiAgZG9jdW1lbnRfcHJvcGVydGllc19wYWdlX3NpemVfZGltZW5zaW9uX25hbWVfc3RyaW5nOiBcInt7d2lkdGh9fSDDlyB7e2hlaWdodH19IHt7dW5pdH19ICh7e25hbWV9fSwge3tvcmllbnRhdGlvbn19KVwiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX2xpbmVhcml6ZWRfeWVzOiBcIlllc1wiLFxuICBkb2N1bWVudF9wcm9wZXJ0aWVzX2xpbmVhcml6ZWRfbm86IFwiTm9cIixcbiAgcHJpbnRfcHJvZ3Jlc3NfcGVyY2VudDogXCJ7e3Byb2dyZXNzfX0lXCIsXG4gIFwidG9nZ2xlX3NpZGViYXIudGl0bGVcIjogXCJUb2dnbGUgU2lkZWJhclwiLFxuICBcInRvZ2dsZV9zaWRlYmFyX25vdGlmaWNhdGlvbjIudGl0bGVcIjogXCJUb2dnbGUgU2lkZWJhciAoZG9jdW1lbnQgY29udGFpbnMgb3V0bGluZS9hdHRhY2htZW50cy9sYXllcnMpXCIsXG4gIGFkZGl0aW9uYWxfbGF5ZXJzOiBcIkFkZGl0aW9uYWwgTGF5ZXJzXCIsXG4gIHBhZ2VfbGFuZG1hcms6IFwiUGFnZSB7e3BhZ2V9fVwiLFxuICB0aHVtYl9wYWdlX3RpdGxlOiBcIlBhZ2Uge3twYWdlfX1cIixcbiAgdGh1bWJfcGFnZV9jYW52YXM6IFwiVGh1bWJuYWlsIG9mIFBhZ2Uge3twYWdlfX1cIixcbiAgZmluZF9yZWFjaGVkX3RvcDogXCJSZWFjaGVkIHRvcCBvZiBkb2N1bWVudCwgY29udGludWVkIGZyb20gYm90dG9tXCIsXG4gIGZpbmRfcmVhY2hlZF9ib3R0b206IFwiUmVhY2hlZCBlbmQgb2YgZG9jdW1lbnQsIGNvbnRpbnVlZCBmcm9tIHRvcFwiLFxuICBcImZpbmRfbWF0Y2hfY291bnRbb25lXVwiOiBcInt7Y3VycmVudH19IG9mIHt7dG90YWx9fSBtYXRjaFwiLFxuICBcImZpbmRfbWF0Y2hfY291bnRbb3RoZXJdXCI6IFwie3tjdXJyZW50fX0gb2Yge3t0b3RhbH19IG1hdGNoZXNcIixcbiAgXCJmaW5kX21hdGNoX2NvdW50X2xpbWl0W29uZV1cIjogXCJNb3JlIHRoYW4ge3tsaW1pdH19IG1hdGNoXCIsXG4gIFwiZmluZF9tYXRjaF9jb3VudF9saW1pdFtvdGhlcl1cIjogXCJNb3JlIHRoYW4ge3tsaW1pdH19IG1hdGNoZXNcIixcbiAgZmluZF9ub3RfZm91bmQ6IFwiUGhyYXNlIG5vdCBmb3VuZFwiLFxuICBlcnJvcl92ZXJzaW9uX2luZm86IFwiUERGLmpzIHZ7e3ZlcnNpb259fSAoYnVpbGQ6IHt7YnVpbGR9fSlcIixcbiAgZXJyb3JfbWVzc2FnZTogXCJNZXNzYWdlOiB7e21lc3NhZ2V9fVwiLFxuICBlcnJvcl9zdGFjazogXCJTdGFjazoge3tzdGFja319XCIsXG4gIGVycm9yX2ZpbGU6IFwiRmlsZToge3tmaWxlfX1cIixcbiAgZXJyb3JfbGluZTogXCJMaW5lOiB7e2xpbmV9fVwiLFxuICByZW5kZXJpbmdfZXJyb3I6IFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSBwYWdlLlwiLFxuICBwYWdlX3NjYWxlX3dpZHRoOiBcIlBhZ2UgV2lkdGhcIixcbiAgcGFnZV9zY2FsZV9maXQ6IFwiUGFnZSBGaXRcIixcbiAgcGFnZV9zY2FsZV9hdXRvOiBcIkF1dG9tYXRpYyBab29tXCIsXG4gIHBhZ2Vfc2NhbGVfYWN0dWFsOiBcIkFjdHVhbCBTaXplXCIsXG4gIHBhZ2Vfc2NhbGVfcGVyY2VudDogXCJ7e3NjYWxlfX0lXCIsXG4gIGxvYWRpbmc6IFwiTG9hZGluZ+KAplwiLFxuICBsb2FkaW5nX2Vycm9yOiBcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgdGhlIFBERi5cIixcbiAgaW52YWxpZF9maWxlX2Vycm9yOiBcIkludmFsaWQgb3IgY29ycnVwdGVkIFBERiBmaWxlLlwiLFxuICBtaXNzaW5nX2ZpbGVfZXJyb3I6IFwiTWlzc2luZyBQREYgZmlsZS5cIixcbiAgdW5leHBlY3RlZF9yZXNwb25zZV9lcnJvcjogXCJVbmV4cGVjdGVkIHNlcnZlciByZXNwb25zZS5cIixcbiAgcHJpbnRpbmdfbm90X3N1cHBvcnRlZDogXCJXYXJuaW5nOiBQcmludGluZyBpcyBub3QgZnVsbHkgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci5cIixcbiAgcHJpbnRpbmdfbm90X3JlYWR5OiBcIldhcm5pbmc6IFRoZSBQREYgaXMgbm90IGZ1bGx5IGxvYWRlZCBmb3IgcHJpbnRpbmcuXCIsXG4gIHdlYl9mb250c19kaXNhYmxlZDogXCJXZWIgZm9udHMgYXJlIGRpc2FibGVkOiB1bmFibGUgdG8gdXNlIGVtYmVkZGVkIFBERiBmb250cy5cIlxufTtcblxuZnVuY3Rpb24gZ2V0TDEwbkZhbGxiYWNrKGtleSwgYXJncykge1xuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgXCJmaW5kX21hdGNoX2NvdW50XCI6XG4gICAgICBrZXkgPSBgZmluZF9tYXRjaF9jb3VudFske2FyZ3MudG90YWwgPT09IDEgPyBcIm9uZVwiIDogXCJvdGhlclwifV1gO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiZmluZF9tYXRjaF9jb3VudF9saW1pdFwiOlxuICAgICAga2V5ID0gYGZpbmRfbWF0Y2hfY291bnRfbGltaXRbJHthcmdzLmxpbWl0ID09PSAxID8gXCJvbmVcIiA6IFwib3RoZXJcIn1dYDtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIERFRkFVTFRfTDEwTl9TVFJJTkdTW2tleV0gfHwgXCJcIjtcbn1cblxuY29uc3QgUEFSVElBTF9MQU5HX0NPREVTID0ge1xuICBlbjogXCJlbi1VU1wiLFxuICBlczogXCJlcy1FU1wiLFxuICBmeTogXCJmeS1OTFwiLFxuICBnYTogXCJnYS1JRVwiLFxuICBndTogXCJndS1JTlwiLFxuICBoaTogXCJoaS1JTlwiLFxuICBoeTogXCJoeS1BTVwiLFxuICBuYjogXCJuYi1OT1wiLFxuICBuZTogXCJuZS1OUFwiLFxuICBubjogXCJubi1OT1wiLFxuICBwYTogXCJwYS1JTlwiLFxuICBwdDogXCJwdC1QVFwiLFxuICBzdjogXCJzdi1TRVwiLFxuICB6aDogXCJ6aC1DTlwiXG59O1xuXG5mdW5jdGlvbiBmaXh1cExhbmdDb2RlKGxhbmdDb2RlKSB7XG4gIHJldHVybiBQQVJUSUFMX0xBTkdfQ09ERVNbbGFuZ0NvZGU/LnRvTG93ZXJDYXNlKCldIHx8IGxhbmdDb2RlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRMMTBuVmFsdWUodGV4dCwgYXJncykge1xuICBpZiAoIWFyZ3MpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xce1xce1xccyooXFx3KylcXHMqXFx9XFx9L2csIChhbGwsIG5hbWUpID0+IHtcbiAgICByZXR1cm4gbmFtZSBpbiBhcmdzID8gYXJnc1tuYW1lXSA6IFwie3tcIiArIG5hbWUgKyBcIn19XCI7XG4gIH0pO1xufVxuXG5jb25zdCBOdWxsTDEwbiA9IHtcbiAgYXN5bmMgZ2V0TGFuZ3VhZ2UoKSB7XG4gICAgcmV0dXJuIFwiZW4tdXNcIjtcbiAgfSxcblxuICBhc3luYyBnZXREaXJlY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwibHRyXCI7XG4gIH0sXG5cbiAgYXN5bmMgZ2V0KGtleSwgYXJncyA9IG51bGwsIGZhbGxiYWNrID0gZ2V0TDEwbkZhbGxiYWNrKGtleSwgYXJncykpIHtcbiAgICByZXR1cm4gZm9ybWF0TDEwblZhbHVlKGZhbGxiYWNrLCBhcmdzKTtcbiAgfSxcblxuICBhc3luYyB0cmFuc2xhdGUoZWxlbWVudCkge31cblxufTtcbmV4cG9ydHMuTnVsbEwxMG4gPSBOdWxsTDEwbjtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlNpbXBsZUxpbmtTZXJ2aWNlID0gZXhwb3J0cy5QREZMaW5rU2VydmljZSA9IGV4cG9ydHMuTGlua1RhcmdldCA9IHZvaWQgMDtcblxudmFyIF91aV91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oNik7XG5cbmNvbnN0IERFRkFVTFRfTElOS19SRUwgPSBcIm5vb3BlbmVyIG5vcmVmZXJyZXIgbm9mb2xsb3dcIjtcbmNvbnN0IExpbmtUYXJnZXQgPSB7XG4gIE5PTkU6IDAsXG4gIFNFTEY6IDEsXG4gIEJMQU5LOiAyLFxuICBQQVJFTlQ6IDMsXG4gIFRPUDogNFxufTtcbmV4cG9ydHMuTGlua1RhcmdldCA9IExpbmtUYXJnZXQ7XG5cbmZ1bmN0aW9uIGFkZExpbmtBdHRyaWJ1dGVzKGxpbmssIHtcbiAgdXJsLFxuICB0YXJnZXQsXG4gIHJlbCxcbiAgZW5hYmxlZCA9IHRydWVcbn0gPSB7fSkge1xuICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBIHZhbGlkIFwidXJsXCIgcGFyYW1ldGVyIG11c3QgcHJvdmlkZWQuJyk7XG4gIH1cblxuICBjb25zdCB1cmxOdWxsUmVtb3ZlZCA9ICgwLCBfdWlfdXRpbHMucmVtb3ZlTnVsbENoYXJhY3RlcnMpKHVybCk7XG5cbiAgaWYgKGVuYWJsZWQpIHtcbiAgICBsaW5rLmhyZWYgPSBsaW5rLnRpdGxlID0gdXJsTnVsbFJlbW92ZWQ7XG4gIH0gZWxzZSB7XG4gICAgbGluay5ocmVmID0gXCJcIjtcbiAgICBsaW5rLnRpdGxlID0gYERpc2FibGVkOiAke3VybE51bGxSZW1vdmVkfWA7XG5cbiAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgfVxuXG4gIGxldCB0YXJnZXRTdHIgPSBcIlwiO1xuXG4gIHN3aXRjaCAodGFyZ2V0KSB7XG4gICAgY2FzZSBMaW5rVGFyZ2V0Lk5PTkU6XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgTGlua1RhcmdldC5TRUxGOlxuICAgICAgdGFyZ2V0U3RyID0gXCJfc2VsZlwiO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIExpbmtUYXJnZXQuQkxBTks6XG4gICAgICB0YXJnZXRTdHIgPSBcIl9ibGFua1wiO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIExpbmtUYXJnZXQuUEFSRU5UOlxuICAgICAgdGFyZ2V0U3RyID0gXCJfcGFyZW50XCI7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgTGlua1RhcmdldC5UT1A6XG4gICAgICB0YXJnZXRTdHIgPSBcIl90b3BcIjtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgbGluay50YXJnZXQgPSB0YXJnZXRTdHI7XG4gIGxpbmsucmVsID0gdHlwZW9mIHJlbCA9PT0gXCJzdHJpbmdcIiA/IHJlbCA6IERFRkFVTFRfTElOS19SRUw7XG59XG5cbmNsYXNzIFBERkxpbmtTZXJ2aWNlIHtcbiAgI3BhZ2VzUmVmQ2FjaGUgPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGV2ZW50QnVzLFxuICAgIGV4dGVybmFsTGlua1RhcmdldCA9IG51bGwsXG4gICAgZXh0ZXJuYWxMaW5rUmVsID0gbnVsbCxcbiAgICBpZ25vcmVEZXN0aW5hdGlvblpvb20gPSBmYWxzZVxuICB9ID0ge30pIHtcbiAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgdGhpcy5leHRlcm5hbExpbmtUYXJnZXQgPSBleHRlcm5hbExpbmtUYXJnZXQ7XG4gICAgdGhpcy5leHRlcm5hbExpbmtSZWwgPSBleHRlcm5hbExpbmtSZWw7XG4gICAgdGhpcy5leHRlcm5hbExpbmtFbmFibGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pZ25vcmVEZXN0aW5hdGlvblpvb20gPSBpZ25vcmVEZXN0aW5hdGlvblpvb207XG4gICAgdGhpcy5iYXNlVXJsID0gbnVsbDtcbiAgICB0aGlzLnBkZkRvY3VtZW50ID0gbnVsbDtcbiAgICB0aGlzLnBkZlZpZXdlciA9IG51bGw7XG4gICAgdGhpcy5wZGZIaXN0b3J5ID0gbnVsbDtcbiAgfVxuXG4gIHNldERvY3VtZW50KHBkZkRvY3VtZW50LCBiYXNlVXJsID0gbnVsbCkge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5wZGZEb2N1bWVudCA9IHBkZkRvY3VtZW50O1xuICAgIHRoaXMuI3BhZ2VzUmVmQ2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIHNldFZpZXdlcihwZGZWaWV3ZXIpIHtcbiAgICB0aGlzLnBkZlZpZXdlciA9IHBkZlZpZXdlcjtcbiAgfVxuXG4gIHNldEhpc3RvcnkocGRmSGlzdG9yeSkge1xuICAgIHRoaXMucGRmSGlzdG9yeSA9IHBkZkhpc3Rvcnk7XG4gIH1cblxuICBnZXQgcGFnZXNDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5wZGZEb2N1bWVudCA/IHRoaXMucGRmRG9jdW1lbnQubnVtUGFnZXMgOiAwO1xuICB9XG5cbiAgZ2V0IHBhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMucGRmVmlld2VyLmN1cnJlbnRQYWdlTnVtYmVyO1xuICB9XG5cbiAgc2V0IHBhZ2UodmFsdWUpIHtcbiAgICB0aGlzLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlciA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHJvdGF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnBkZlZpZXdlci5wYWdlc1JvdGF0aW9uO1xuICB9XG5cbiAgc2V0IHJvdGF0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5wZGZWaWV3ZXIucGFnZXNSb3RhdGlvbiA9IHZhbHVlO1xuICB9XG5cbiAgI2dvVG9EZXN0aW5hdGlvbkhlbHBlcihyYXdEZXN0LCBuYW1lZERlc3QgPSBudWxsLCBleHBsaWNpdERlc3QpIHtcbiAgICBjb25zdCBkZXN0UmVmID0gZXhwbGljaXREZXN0WzBdO1xuICAgIGxldCBwYWdlTnVtYmVyO1xuXG4gICAgaWYgKHR5cGVvZiBkZXN0UmVmID09PSBcIm9iamVjdFwiICYmIGRlc3RSZWYgIT09IG51bGwpIHtcbiAgICAgIHBhZ2VOdW1iZXIgPSB0aGlzLl9jYWNoZWRQYWdlTnVtYmVyKGRlc3RSZWYpO1xuXG4gICAgICBpZiAoIXBhZ2VOdW1iZXIpIHtcbiAgICAgICAgdGhpcy5wZGZEb2N1bWVudC5nZXRQYWdlSW5kZXgoZGVzdFJlZikudGhlbihwYWdlSW5kZXggPT4ge1xuICAgICAgICAgIHRoaXMuY2FjaGVQYWdlUmVmKHBhZ2VJbmRleCArIDEsIGRlc3RSZWYpO1xuICAgICAgICAgIHRoaXMuI2dvVG9EZXN0aW5hdGlvbkhlbHBlcihyYXdEZXN0LCBuYW1lZERlc3QsIGV4cGxpY2l0RGVzdCk7XG4gICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBQREZMaW5rU2VydmljZS4jZ29Ub0Rlc3RpbmF0aW9uSGVscGVyOiBcIiR7ZGVzdFJlZn1cIiBpcyBub3QgYCArIGBhIHZhbGlkIHBhZ2UgcmVmZXJlbmNlLCBmb3IgZGVzdD1cIiR7cmF3RGVzdH1cIi5gKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKE51bWJlci5pc0ludGVnZXIoZGVzdFJlZikpIHtcbiAgICAgIHBhZ2VOdW1iZXIgPSBkZXN0UmVmICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihgUERGTGlua1NlcnZpY2UuI2dvVG9EZXN0aW5hdGlvbkhlbHBlcjogXCIke2Rlc3RSZWZ9XCIgaXMgbm90IGAgKyBgYSB2YWxpZCBkZXN0aW5hdGlvbiByZWZlcmVuY2UsIGZvciBkZXN0PVwiJHtyYXdEZXN0fVwiLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghcGFnZU51bWJlciB8fCBwYWdlTnVtYmVyIDwgMSB8fCBwYWdlTnVtYmVyID4gdGhpcy5wYWdlc0NvdW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBQREZMaW5rU2VydmljZS4jZ29Ub0Rlc3RpbmF0aW9uSGVscGVyOiBcIiR7cGFnZU51bWJlcn1cIiBpcyBub3QgYCArIGBhIHZhbGlkIHBhZ2UgbnVtYmVyLCBmb3IgZGVzdD1cIiR7cmF3RGVzdH1cIi5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZGZIaXN0b3J5KSB7XG4gICAgICB0aGlzLnBkZkhpc3RvcnkucHVzaEN1cnJlbnRQb3NpdGlvbigpO1xuICAgICAgdGhpcy5wZGZIaXN0b3J5LnB1c2goe1xuICAgICAgICBuYW1lZERlc3QsXG4gICAgICAgIGV4cGxpY2l0RGVzdCxcbiAgICAgICAgcGFnZU51bWJlclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5wZGZWaWV3ZXIuc2Nyb2xsUGFnZUludG9WaWV3KHtcbiAgICAgIHBhZ2VOdW1iZXIsXG4gICAgICBkZXN0QXJyYXk6IGV4cGxpY2l0RGVzdCxcbiAgICAgIGlnbm9yZURlc3RpbmF0aW9uWm9vbTogdGhpcy5faWdub3JlRGVzdGluYXRpb25ab29tXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnb1RvRGVzdGluYXRpb24oZGVzdCkge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBuYW1lZERlc3QsIGV4cGxpY2l0RGVzdDtcblxuICAgIGlmICh0eXBlb2YgZGVzdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbmFtZWREZXN0ID0gZGVzdDtcbiAgICAgIGV4cGxpY2l0RGVzdCA9IGF3YWl0IHRoaXMucGRmRG9jdW1lbnQuZ2V0RGVzdGluYXRpb24oZGVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWVkRGVzdCA9IG51bGw7XG4gICAgICBleHBsaWNpdERlc3QgPSBhd2FpdCBkZXN0O1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheShleHBsaWNpdERlc3QpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBQREZMaW5rU2VydmljZS5nb1RvRGVzdGluYXRpb246IFwiJHtleHBsaWNpdERlc3R9XCIgaXMgbm90IGAgKyBgYSB2YWxpZCBkZXN0aW5hdGlvbiBhcnJheSwgZm9yIGRlc3Q9XCIke2Rlc3R9XCIuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4jZ29Ub0Rlc3RpbmF0aW9uSGVscGVyKGRlc3QsIG5hbWVkRGVzdCwgZXhwbGljaXREZXN0KTtcbiAgfVxuXG4gIGdvVG9QYWdlKHZhbCkge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiICYmIHRoaXMucGRmVmlld2VyLnBhZ2VMYWJlbFRvUGFnZU51bWJlcih2YWwpIHx8IHZhbCB8IDA7XG5cbiAgICBpZiAoIShOdW1iZXIuaXNJbnRlZ2VyKHBhZ2VOdW1iZXIpICYmIHBhZ2VOdW1iZXIgPiAwICYmIHBhZ2VOdW1iZXIgPD0gdGhpcy5wYWdlc0NvdW50KSkge1xuICAgICAgY29uc29sZS5lcnJvcihgUERGTGlua1NlcnZpY2UuZ29Ub1BhZ2U6IFwiJHt2YWx9XCIgaXMgbm90IGEgdmFsaWQgcGFnZS5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZGZIaXN0b3J5KSB7XG4gICAgICB0aGlzLnBkZkhpc3RvcnkucHVzaEN1cnJlbnRQb3NpdGlvbigpO1xuICAgICAgdGhpcy5wZGZIaXN0b3J5LnB1c2hQYWdlKHBhZ2VOdW1iZXIpO1xuICAgIH1cblxuICAgIHRoaXMucGRmVmlld2VyLnNjcm9sbFBhZ2VJbnRvVmlldyh7XG4gICAgICBwYWdlTnVtYmVyXG4gICAgfSk7XG4gIH1cblxuICBhZGRMaW5rQXR0cmlidXRlcyhsaW5rLCB1cmwsIG5ld1dpbmRvdyA9IGZhbHNlKSB7XG4gICAgYWRkTGlua0F0dHJpYnV0ZXMobGluaywge1xuICAgICAgdXJsLFxuICAgICAgdGFyZ2V0OiBuZXdXaW5kb3cgPyBMaW5rVGFyZ2V0LkJMQU5LIDogdGhpcy5leHRlcm5hbExpbmtUYXJnZXQsXG4gICAgICByZWw6IHRoaXMuZXh0ZXJuYWxMaW5rUmVsLFxuICAgICAgZW5hYmxlZDogdGhpcy5leHRlcm5hbExpbmtFbmFibGVkXG4gICAgfSk7XG4gIH1cblxuICBnZXREZXN0aW5hdGlvbkhhc2goZGVzdCkge1xuICAgIGlmICh0eXBlb2YgZGVzdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKGRlc3QubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbmNob3JVcmwoXCIjXCIgKyBlc2NhcGUoZGVzdCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZXN0KSkge1xuICAgICAgY29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkoZGVzdCk7XG5cbiAgICAgIGlmIChzdHIubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbmNob3JVcmwoXCIjXCIgKyBlc2NhcGUoc3RyKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0QW5jaG9yVXJsKFwiXCIpO1xuICB9XG5cbiAgZ2V0QW5jaG9yVXJsKGFuY2hvcikge1xuICAgIHJldHVybiAodGhpcy5iYXNlVXJsIHx8IFwiXCIpICsgYW5jaG9yO1xuICB9XG5cbiAgc2V0SGFzaChoYXNoKSB7XG4gICAgaWYgKCF0aGlzLnBkZkRvY3VtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHBhZ2VOdW1iZXIsIGRlc3Q7XG5cbiAgICBpZiAoaGFzaC5pbmNsdWRlcyhcIj1cIikpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9ICgwLCBfdWlfdXRpbHMucGFyc2VRdWVyeVN0cmluZykoaGFzaCk7XG5cbiAgICAgIGlmIChwYXJhbXMuaGFzKFwic2VhcmNoXCIpKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJmaW5kZnJvbXVybGhhc2hcIiwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgICBxdWVyeTogcGFyYW1zLmdldChcInNlYXJjaFwiKS5yZXBsYWNlKC9cIi9nLCBcIlwiKSxcbiAgICAgICAgICBwaHJhc2VTZWFyY2g6IHBhcmFtcy5nZXQoXCJwaHJhc2VcIikgPT09IFwidHJ1ZVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLmhhcyhcInBhZ2VcIikpIHtcbiAgICAgICAgcGFnZU51bWJlciA9IHBhcmFtcy5nZXQoXCJwYWdlXCIpIHwgMCB8fCAxO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLmhhcyhcInpvb21cIikpIHtcbiAgICAgICAgY29uc3Qgem9vbUFyZ3MgPSBwYXJhbXMuZ2V0KFwiem9vbVwiKS5zcGxpdChcIixcIik7XG4gICAgICAgIGNvbnN0IHpvb21BcmcgPSB6b29tQXJnc1swXTtcbiAgICAgICAgY29uc3Qgem9vbUFyZ051bWJlciA9IHBhcnNlRmxvYXQoem9vbUFyZyk7XG5cbiAgICAgICAgaWYgKCF6b29tQXJnLmluY2x1ZGVzKFwiRml0XCIpKSB7XG4gICAgICAgICAgZGVzdCA9IFtudWxsLCB7XG4gICAgICAgICAgICBuYW1lOiBcIlhZWlwiXG4gICAgICAgICAgfSwgem9vbUFyZ3MubGVuZ3RoID4gMSA/IHpvb21BcmdzWzFdIHwgMCA6IG51bGwsIHpvb21BcmdzLmxlbmd0aCA+IDIgPyB6b29tQXJnc1syXSB8IDAgOiBudWxsLCB6b29tQXJnTnVtYmVyID8gem9vbUFyZ051bWJlciAvIDEwMCA6IHpvb21BcmddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh6b29tQXJnID09PSBcIkZpdFwiIHx8IHpvb21BcmcgPT09IFwiRml0QlwiKSB7XG4gICAgICAgICAgICBkZXN0ID0gW251bGwsIHtcbiAgICAgICAgICAgICAgbmFtZTogem9vbUFyZ1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgfSBlbHNlIGlmICh6b29tQXJnID09PSBcIkZpdEhcIiB8fCB6b29tQXJnID09PSBcIkZpdEJIXCIgfHwgem9vbUFyZyA9PT0gXCJGaXRWXCIgfHwgem9vbUFyZyA9PT0gXCJGaXRCVlwiKSB7XG4gICAgICAgICAgICBkZXN0ID0gW251bGwsIHtcbiAgICAgICAgICAgICAgbmFtZTogem9vbUFyZ1xuICAgICAgICAgICAgfSwgem9vbUFyZ3MubGVuZ3RoID4gMSA/IHpvb21BcmdzWzFdIHwgMCA6IG51bGxdO1xuICAgICAgICAgIH0gZWxzZSBpZiAoem9vbUFyZyA9PT0gXCJGaXRSXCIpIHtcbiAgICAgICAgICAgIGlmICh6b29tQXJncy5sZW5ndGggIT09IDUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUERGTGlua1NlcnZpY2Uuc2V0SGFzaDogTm90IGVub3VnaCBwYXJhbWV0ZXJzIGZvciBcIkZpdFJcIi4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc3QgPSBbbnVsbCwge1xuICAgICAgICAgICAgICAgIG5hbWU6IHpvb21BcmdcbiAgICAgICAgICAgICAgfSwgem9vbUFyZ3NbMV0gfCAwLCB6b29tQXJnc1syXSB8IDAsIHpvb21BcmdzWzNdIHwgMCwgem9vbUFyZ3NbNF0gfCAwXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUERGTGlua1NlcnZpY2Uuc2V0SGFzaDogXCIke3pvb21Bcmd9XCIgaXMgbm90IGEgdmFsaWQgem9vbSB2YWx1ZS5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGRlc3QpIHtcbiAgICAgICAgdGhpcy5wZGZWaWV3ZXIuc2Nyb2xsUGFnZUludG9WaWV3KHtcbiAgICAgICAgICBwYWdlTnVtYmVyOiBwYWdlTnVtYmVyIHx8IHRoaXMucGFnZSxcbiAgICAgICAgICBkZXN0QXJyYXk6IGRlc3QsXG4gICAgICAgICAgYWxsb3dOZWdhdGl2ZU9mZnNldDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocGFnZU51bWJlcikge1xuICAgICAgICB0aGlzLnBhZ2UgPSBwYWdlTnVtYmVyO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLmhhcyhcInBhZ2Vtb2RlXCIpKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJwYWdlbW9kZVwiLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICAgIG1vZGU6IHBhcmFtcy5nZXQoXCJwYWdlbW9kZVwiKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcy5oYXMoXCJuYW1lZGRlc3RcIikpIHtcbiAgICAgICAgdGhpcy5nb1RvRGVzdGluYXRpb24ocGFyYW1zLmdldChcIm5hbWVkZGVzdFwiKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlc3QgPSB1bmVzY2FwZShoYXNoKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZGVzdCA9IEpTT04ucGFyc2UoZGVzdCk7XG5cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRlc3QpKSB7XG4gICAgICAgICAgZGVzdCA9IGRlc3QudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXgpIHt9XG5cbiAgICAgIGlmICh0eXBlb2YgZGVzdCA9PT0gXCJzdHJpbmdcIiB8fCBQREZMaW5rU2VydmljZS4jaXNWYWxpZEV4cGxpY2l0RGVzdGluYXRpb24oZGVzdCkpIHtcbiAgICAgICAgdGhpcy5nb1RvRGVzdGluYXRpb24oZGVzdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5lcnJvcihgUERGTGlua1NlcnZpY2Uuc2V0SGFzaDogXCIke3VuZXNjYXBlKGhhc2gpfVwiIGlzIG5vdCBhIHZhbGlkIGRlc3RpbmF0aW9uLmApO1xuICAgIH1cbiAgfVxuXG4gIGV4ZWN1dGVOYW1lZEFjdGlvbihhY3Rpb24pIHtcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSBcIkdvQmFja1wiOlxuICAgICAgICB0aGlzLnBkZkhpc3Rvcnk/LmJhY2soKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJHb0ZvcndhcmRcIjpcbiAgICAgICAgdGhpcy5wZGZIaXN0b3J5Py5mb3J3YXJkKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiTmV4dFBhZ2VcIjpcbiAgICAgICAgdGhpcy5wZGZWaWV3ZXIubmV4dFBhZ2UoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJQcmV2UGFnZVwiOlxuICAgICAgICB0aGlzLnBkZlZpZXdlci5wcmV2aW91c1BhZ2UoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJMYXN0UGFnZVwiOlxuICAgICAgICB0aGlzLnBhZ2UgPSB0aGlzLnBhZ2VzQ291bnQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiRmlyc3RQYWdlXCI6XG4gICAgICAgIHRoaXMucGFnZSA9IDE7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwibmFtZWRhY3Rpb25cIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgYWN0aW9uXG4gICAgfSk7XG4gIH1cblxuICBjYWNoZVBhZ2VSZWYocGFnZU51bSwgcGFnZVJlZikge1xuICAgIGlmICghcGFnZVJlZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZlN0ciA9IHBhZ2VSZWYuZ2VuID09PSAwID8gYCR7cGFnZVJlZi5udW19UmAgOiBgJHtwYWdlUmVmLm51bX1SJHtwYWdlUmVmLmdlbn1gO1xuICAgIHRoaXMuI3BhZ2VzUmVmQ2FjaGUuc2V0KHJlZlN0ciwgcGFnZU51bSk7XG4gIH1cblxuICBfY2FjaGVkUGFnZU51bWJlcihwYWdlUmVmKSB7XG4gICAgaWYgKCFwYWdlUmVmKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCByZWZTdHIgPSBwYWdlUmVmLmdlbiA9PT0gMCA/IGAke3BhZ2VSZWYubnVtfVJgIDogYCR7cGFnZVJlZi5udW19UiR7cGFnZVJlZi5nZW59YDtcbiAgICByZXR1cm4gdGhpcy4jcGFnZXNSZWZDYWNoZS5nZXQocmVmU3RyKSB8fCBudWxsO1xuICB9XG5cbiAgaXNQYWdlVmlzaWJsZShwYWdlTnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMucGRmVmlld2VyLmlzUGFnZVZpc2libGUocGFnZU51bWJlcik7XG4gIH1cblxuICBpc1BhZ2VDYWNoZWQocGFnZU51bWJlcikge1xuICAgIHJldHVybiB0aGlzLnBkZlZpZXdlci5pc1BhZ2VDYWNoZWQocGFnZU51bWJlcik7XG4gIH1cblxuICBzdGF0aWMgI2lzVmFsaWRFeHBsaWNpdERlc3RpbmF0aW9uKGRlc3QpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGVzdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBkZXN0TGVuZ3RoID0gZGVzdC5sZW5ndGg7XG5cbiAgICBpZiAoZGVzdExlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlID0gZGVzdFswXTtcblxuICAgIGlmICghKHR5cGVvZiBwYWdlID09PSBcIm9iamVjdFwiICYmIE51bWJlci5pc0ludGVnZXIocGFnZS5udW0pICYmIE51bWJlci5pc0ludGVnZXIocGFnZS5nZW4pKSAmJiAhKE51bWJlci5pc0ludGVnZXIocGFnZSkgJiYgcGFnZSA+PSAwKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHpvb20gPSBkZXN0WzFdO1xuXG4gICAgaWYgKCEodHlwZW9mIHpvb20gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHpvb20ubmFtZSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgYWxsb3dOdWxsID0gdHJ1ZTtcblxuICAgIHN3aXRjaCAoem9vbS5uYW1lKSB7XG4gICAgICBjYXNlIFwiWFlaXCI6XG4gICAgICAgIGlmIChkZXN0TGVuZ3RoICE9PSA1KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJGaXRcIjpcbiAgICAgIGNhc2UgXCJGaXRCXCI6XG4gICAgICAgIHJldHVybiBkZXN0TGVuZ3RoID09PSAyO1xuXG4gICAgICBjYXNlIFwiRml0SFwiOlxuICAgICAgY2FzZSBcIkZpdEJIXCI6XG4gICAgICBjYXNlIFwiRml0VlwiOlxuICAgICAgY2FzZSBcIkZpdEJWXCI6XG4gICAgICAgIGlmIChkZXN0TGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJGaXRSXCI6XG4gICAgICAgIGlmIChkZXN0TGVuZ3RoICE9PSA2KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxsb3dOdWxsID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDI7IGkgPCBkZXN0TGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcmFtID0gZGVzdFtpXTtcblxuICAgICAgaWYgKCEodHlwZW9mIHBhcmFtID09PSBcIm51bWJlclwiIHx8IGFsbG93TnVsbCAmJiBwYXJhbSA9PT0gbnVsbCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cblxuZXhwb3J0cy5QREZMaW5rU2VydmljZSA9IFBERkxpbmtTZXJ2aWNlO1xuXG5jbGFzcyBTaW1wbGVMaW5rU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXh0ZXJuYWxMaW5rRW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBnZXQgcGFnZXNDb3VudCgpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGdldCBwYWdlKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgc2V0IHBhZ2UodmFsdWUpIHt9XG5cbiAgZ2V0IHJvdGF0aW9uKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgc2V0IHJvdGF0aW9uKHZhbHVlKSB7fVxuXG4gIGFzeW5jIGdvVG9EZXN0aW5hdGlvbihkZXN0KSB7fVxuXG4gIGdvVG9QYWdlKHZhbCkge31cblxuICBhZGRMaW5rQXR0cmlidXRlcyhsaW5rLCB1cmwsIG5ld1dpbmRvdyA9IGZhbHNlKSB7XG4gICAgYWRkTGlua0F0dHJpYnV0ZXMobGluaywge1xuICAgICAgdXJsLFxuICAgICAgZW5hYmxlZDogdGhpcy5leHRlcm5hbExpbmtFbmFibGVkXG4gICAgfSk7XG4gIH1cblxuICBnZXREZXN0aW5hdGlvbkhhc2goZGVzdCkge1xuICAgIHJldHVybiBcIiNcIjtcbiAgfVxuXG4gIGdldEFuY2hvclVybChoYXNoKSB7XG4gICAgcmV0dXJuIFwiI1wiO1xuICB9XG5cbiAgc2V0SGFzaChoYXNoKSB7fVxuXG4gIGV4ZWN1dGVOYW1lZEFjdGlvbihhY3Rpb24pIHt9XG5cbiAgY2FjaGVQYWdlUmVmKHBhZ2VOdW0sIHBhZ2VSZWYpIHt9XG5cbiAgaXNQYWdlVmlzaWJsZShwYWdlTnVtYmVyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpc1BhZ2VDYWNoZWQocGFnZU51bWJlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cblxuZXhwb3J0cy5TaW1wbGVMaW5rU2VydmljZSA9IFNpbXBsZUxpbmtTZXJ2aWNlO1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMpID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuYW5pbWF0aW9uU3RhcnRlZCA9IGV4cG9ydHMuVkVSVElDQUxfUEFERElORyA9IGV4cG9ydHMuVU5LTk9XTl9TQ0FMRSA9IGV4cG9ydHMuVGV4dExheWVyTW9kZSA9IGV4cG9ydHMuU3ByZWFkTW9kZSA9IGV4cG9ydHMuU2lkZWJhclZpZXcgPSBleHBvcnRzLlNjcm9sbE1vZGUgPSBleHBvcnRzLlNDUk9MTEJBUl9QQURESU5HID0gZXhwb3J0cy5SZW5kZXJpbmdTdGF0ZXMgPSBleHBvcnRzLlJlbmRlcmVyVHlwZSA9IGV4cG9ydHMuUHJvZ3Jlc3NCYXIgPSBleHBvcnRzLlByZXNlbnRhdGlvbk1vZGVTdGF0ZSA9IGV4cG9ydHMuT3V0cHV0U2NhbGUgPSBleHBvcnRzLk1JTl9TQ0FMRSA9IGV4cG9ydHMuTUFYX1NDQUxFID0gZXhwb3J0cy5NQVhfQVVUT19TQ0FMRSA9IGV4cG9ydHMuREVGQVVMVF9TQ0FMRV9WQUxVRSA9IGV4cG9ydHMuREVGQVVMVF9TQ0FMRV9ERUxUQSA9IGV4cG9ydHMuREVGQVVMVF9TQ0FMRSA9IGV4cG9ydHMuQXV0b1ByaW50UmVnRXhwID0gdm9pZCAwO1xuZXhwb3J0cy5hcGlQYWdlTGF5b3V0VG9WaWV3ZXJNb2RlcyA9IGFwaVBhZ2VMYXlvdXRUb1ZpZXdlck1vZGVzO1xuZXhwb3J0cy5hcGlQYWdlTW9kZVRvU2lkZWJhclZpZXcgPSBhcGlQYWdlTW9kZVRvU2lkZWJhclZpZXc7XG5leHBvcnRzLmFwcHJveGltYXRlRnJhY3Rpb24gPSBhcHByb3hpbWF0ZUZyYWN0aW9uO1xuZXhwb3J0cy5iYWNrdHJhY2tCZWZvcmVBbGxWaXNpYmxlRWxlbWVudHMgPSBiYWNrdHJhY2tCZWZvcmVBbGxWaXNpYmxlRWxlbWVudHM7XG5leHBvcnRzLmJpbmFyeVNlYXJjaEZpcnN0SXRlbSA9IGJpbmFyeVNlYXJjaEZpcnN0SXRlbTtcbmV4cG9ydHMuZ2V0QWN0aXZlT3JGb2N1c2VkRWxlbWVudCA9IGdldEFjdGl2ZU9yRm9jdXNlZEVsZW1lbnQ7XG5leHBvcnRzLmdldFBhZ2VTaXplSW5jaGVzID0gZ2V0UGFnZVNpemVJbmNoZXM7XG5leHBvcnRzLmdldFZpc2libGVFbGVtZW50cyA9IGdldFZpc2libGVFbGVtZW50cztcbmV4cG9ydHMuaXNQb3J0cmFpdE9yaWVudGF0aW9uID0gaXNQb3J0cmFpdE9yaWVudGF0aW9uO1xuZXhwb3J0cy5pc1ZhbGlkUm90YXRpb24gPSBpc1ZhbGlkUm90YXRpb247XG5leHBvcnRzLmlzVmFsaWRTY3JvbGxNb2RlID0gaXNWYWxpZFNjcm9sbE1vZGU7XG5leHBvcnRzLmlzVmFsaWRTcHJlYWRNb2RlID0gaXNWYWxpZFNwcmVhZE1vZGU7XG5leHBvcnRzLm5vQ29udGV4dE1lbnVIYW5kbGVyID0gbm9Db250ZXh0TWVudUhhbmRsZXI7XG5leHBvcnRzLm5vcm1hbGl6ZVdoZWVsRXZlbnREZWx0YSA9IG5vcm1hbGl6ZVdoZWVsRXZlbnREZWx0YTtcbmV4cG9ydHMubm9ybWFsaXplV2hlZWxFdmVudERpcmVjdGlvbiA9IG5vcm1hbGl6ZVdoZWVsRXZlbnREaXJlY3Rpb247XG5leHBvcnRzLnBhcnNlUXVlcnlTdHJpbmcgPSBwYXJzZVF1ZXJ5U3RyaW5nO1xuZXhwb3J0cy5yZW1vdmVOdWxsQ2hhcmFjdGVycyA9IHJlbW92ZU51bGxDaGFyYWN0ZXJzO1xuZXhwb3J0cy5yb3VuZFRvRGl2aWRlID0gcm91bmRUb0RpdmlkZTtcbmV4cG9ydHMuc2Nyb2xsSW50b1ZpZXcgPSBzY3JvbGxJbnRvVmlldztcbmV4cG9ydHMud2F0Y2hTY3JvbGwgPSB3YXRjaFNjcm9sbDtcbmNvbnN0IERFRkFVTFRfU0NBTEVfVkFMVUUgPSBcImF1dG9cIjtcbmV4cG9ydHMuREVGQVVMVF9TQ0FMRV9WQUxVRSA9IERFRkFVTFRfU0NBTEVfVkFMVUU7XG5jb25zdCBERUZBVUxUX1NDQUxFID0gMS4wO1xuZXhwb3J0cy5ERUZBVUxUX1NDQUxFID0gREVGQVVMVF9TQ0FMRTtcbmNvbnN0IERFRkFVTFRfU0NBTEVfREVMVEEgPSAxLjE7XG5leHBvcnRzLkRFRkFVTFRfU0NBTEVfREVMVEEgPSBERUZBVUxUX1NDQUxFX0RFTFRBO1xuY29uc3QgTUlOX1NDQUxFID0gMC4xO1xuZXhwb3J0cy5NSU5fU0NBTEUgPSBNSU5fU0NBTEU7XG5jb25zdCBNQVhfU0NBTEUgPSAxMC4wO1xuZXhwb3J0cy5NQVhfU0NBTEUgPSBNQVhfU0NBTEU7XG5jb25zdCBVTktOT1dOX1NDQUxFID0gMDtcbmV4cG9ydHMuVU5LTk9XTl9TQ0FMRSA9IFVOS05PV05fU0NBTEU7XG5jb25zdCBNQVhfQVVUT19TQ0FMRSA9IDEuMjU7XG5leHBvcnRzLk1BWF9BVVRPX1NDQUxFID0gTUFYX0FVVE9fU0NBTEU7XG5jb25zdCBTQ1JPTExCQVJfUEFERElORyA9IDQwO1xuZXhwb3J0cy5TQ1JPTExCQVJfUEFERElORyA9IFNDUk9MTEJBUl9QQURESU5HO1xuY29uc3QgVkVSVElDQUxfUEFERElORyA9IDU7XG5leHBvcnRzLlZFUlRJQ0FMX1BBRERJTkcgPSBWRVJUSUNBTF9QQURESU5HO1xuY29uc3QgUmVuZGVyaW5nU3RhdGVzID0ge1xuICBJTklUSUFMOiAwLFxuICBSVU5OSU5HOiAxLFxuICBQQVVTRUQ6IDIsXG4gIEZJTklTSEVEOiAzXG59O1xuZXhwb3J0cy5SZW5kZXJpbmdTdGF0ZXMgPSBSZW5kZXJpbmdTdGF0ZXM7XG5jb25zdCBQcmVzZW50YXRpb25Nb2RlU3RhdGUgPSB7XG4gIFVOS05PV046IDAsXG4gIE5PUk1BTDogMSxcbiAgQ0hBTkdJTkc6IDIsXG4gIEZVTExTQ1JFRU46IDNcbn07XG5leHBvcnRzLlByZXNlbnRhdGlvbk1vZGVTdGF0ZSA9IFByZXNlbnRhdGlvbk1vZGVTdGF0ZTtcbmNvbnN0IFNpZGViYXJWaWV3ID0ge1xuICBVTktOT1dOOiAtMSxcbiAgTk9ORTogMCxcbiAgVEhVTUJTOiAxLFxuICBPVVRMSU5FOiAyLFxuICBBVFRBQ0hNRU5UUzogMyxcbiAgTEFZRVJTOiA0XG59O1xuZXhwb3J0cy5TaWRlYmFyVmlldyA9IFNpZGViYXJWaWV3O1xuY29uc3QgUmVuZGVyZXJUeXBlID0ge1xuICBDQU5WQVM6IFwiY2FudmFzXCIsXG4gIFNWRzogXCJzdmdcIlxufTtcbmV4cG9ydHMuUmVuZGVyZXJUeXBlID0gUmVuZGVyZXJUeXBlO1xuY29uc3QgVGV4dExheWVyTW9kZSA9IHtcbiAgRElTQUJMRTogMCxcbiAgRU5BQkxFOiAxLFxuICBFTkFCTEVfRU5IQU5DRTogMlxufTtcbmV4cG9ydHMuVGV4dExheWVyTW9kZSA9IFRleHRMYXllck1vZGU7XG5jb25zdCBTY3JvbGxNb2RlID0ge1xuICBVTktOT1dOOiAtMSxcbiAgVkVSVElDQUw6IDAsXG4gIEhPUklaT05UQUw6IDEsXG4gIFdSQVBQRUQ6IDIsXG4gIFBBR0U6IDNcbn07XG5leHBvcnRzLlNjcm9sbE1vZGUgPSBTY3JvbGxNb2RlO1xuY29uc3QgU3ByZWFkTW9kZSA9IHtcbiAgVU5LTk9XTjogLTEsXG4gIE5PTkU6IDAsXG4gIE9ERDogMSxcbiAgRVZFTjogMlxufTtcbmV4cG9ydHMuU3ByZWFkTW9kZSA9IFNwcmVhZE1vZGU7XG5jb25zdCBBdXRvUHJpbnRSZWdFeHAgPSAvXFxicHJpbnRcXHMqXFwoLztcbmV4cG9ydHMuQXV0b1ByaW50UmVnRXhwID0gQXV0b1ByaW50UmVnRXhwO1xuXG5jbGFzcyBPdXRwdXRTY2FsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IHBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICAgIHRoaXMuc3ggPSBwaXhlbFJhdGlvO1xuICAgIHRoaXMuc3kgPSBwaXhlbFJhdGlvO1xuICB9XG5cbiAgZ2V0IHNjYWxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zeCAhPT0gMSB8fCB0aGlzLnN5ICE9PSAxO1xuICB9XG5cbn1cblxuZXhwb3J0cy5PdXRwdXRTY2FsZSA9IE91dHB1dFNjYWxlO1xuXG5mdW5jdGlvbiBzY3JvbGxJbnRvVmlldyhlbGVtZW50LCBzcG90LCBzY3JvbGxNYXRjaGVzID0gZmFsc2UpIHtcbiAgbGV0IHBhcmVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50O1xuXG4gIGlmICghcGFyZW50KSB7XG4gICAgY29uc29sZS5lcnJvcihcIm9mZnNldFBhcmVudCBpcyBub3Qgc2V0IC0tIGNhbm5vdCBzY3JvbGxcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IG9mZnNldFkgPSBlbGVtZW50Lm9mZnNldFRvcCArIGVsZW1lbnQuY2xpZW50VG9wO1xuICBsZXQgb2Zmc2V0WCA9IGVsZW1lbnQub2Zmc2V0TGVmdCArIGVsZW1lbnQuY2xpZW50TGVmdDtcblxuICB3aGlsZSAocGFyZW50LmNsaWVudEhlaWdodCA9PT0gcGFyZW50LnNjcm9sbEhlaWdodCAmJiBwYXJlbnQuY2xpZW50V2lkdGggPT09IHBhcmVudC5zY3JvbGxXaWR0aCB8fCBzY3JvbGxNYXRjaGVzICYmIChwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibWFya2VkQ29udGVudFwiKSB8fCBnZXRDb21wdXRlZFN0eWxlKHBhcmVudCkub3ZlcmZsb3cgPT09IFwiaGlkZGVuXCIpKSB7XG4gICAgb2Zmc2V0WSArPSBwYXJlbnQub2Zmc2V0VG9wO1xuICAgIG9mZnNldFggKz0gcGFyZW50Lm9mZnNldExlZnQ7XG4gICAgcGFyZW50ID0gcGFyZW50Lm9mZnNldFBhcmVudDtcblxuICAgIGlmICghcGFyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaWYgKHNwb3QpIHtcbiAgICBpZiAoc3BvdC50b3AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgb2Zmc2V0WSArPSBzcG90LnRvcDtcbiAgICB9XG5cbiAgICBpZiAoc3BvdC5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9mZnNldFggKz0gc3BvdC5sZWZ0O1xuICAgICAgcGFyZW50LnNjcm9sbExlZnQgPSBvZmZzZXRYO1xuICAgIH1cbiAgfVxuXG4gIHBhcmVudC5zY3JvbGxUb3AgPSBvZmZzZXRZO1xufVxuXG5mdW5jdGlvbiB3YXRjaFNjcm9sbCh2aWV3QXJlYUVsZW1lbnQsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGRlYm91bmNlU2Nyb2xsID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChyQUYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByQUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIHZpZXdBcmVhRWxlbWVudFNjcm9sbGVkKCkge1xuICAgICAgckFGID0gbnVsbDtcbiAgICAgIGNvbnN0IGN1cnJlbnRYID0gdmlld0FyZWFFbGVtZW50LnNjcm9sbExlZnQ7XG4gICAgICBjb25zdCBsYXN0WCA9IHN0YXRlLmxhc3RYO1xuXG4gICAgICBpZiAoY3VycmVudFggIT09IGxhc3RYKSB7XG4gICAgICAgIHN0YXRlLnJpZ2h0ID0gY3VycmVudFggPiBsYXN0WDtcbiAgICAgIH1cblxuICAgICAgc3RhdGUubGFzdFggPSBjdXJyZW50WDtcbiAgICAgIGNvbnN0IGN1cnJlbnRZID0gdmlld0FyZWFFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIGNvbnN0IGxhc3RZID0gc3RhdGUubGFzdFk7XG5cbiAgICAgIGlmIChjdXJyZW50WSAhPT0gbGFzdFkpIHtcbiAgICAgICAgc3RhdGUuZG93biA9IGN1cnJlbnRZID4gbGFzdFk7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLmxhc3RZID0gY3VycmVudFk7XG4gICAgICBjYWxsYmFjayhzdGF0ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc3RhdGUgPSB7XG4gICAgcmlnaHQ6IHRydWUsXG4gICAgZG93bjogdHJ1ZSxcbiAgICBsYXN0WDogdmlld0FyZWFFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgbGFzdFk6IHZpZXdBcmVhRWxlbWVudC5zY3JvbGxUb3AsXG4gICAgX2V2ZW50SGFuZGxlcjogZGVib3VuY2VTY3JvbGxcbiAgfTtcbiAgbGV0IHJBRiA9IG51bGw7XG4gIHZpZXdBcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGRlYm91bmNlU2Nyb2xsLCB0cnVlKTtcbiAgcmV0dXJuIHN0YXRlO1xufVxuXG5mdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5KSB7XG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBNYXAoKTtcblxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5KSkge1xuICAgIHBhcmFtcy5zZXQoa2V5LnRvTG93ZXJDYXNlKCksIHZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiBwYXJhbXM7XG59XG5cbmNvbnN0IE51bGxDaGFyYWN0ZXJzUmVnRXhwID0gL1xceDAwL2c7XG5jb25zdCBJbnZpc2libGVDaGFyYWN0ZXJzUmVnRXhwID0gL1tcXHgwMS1cXHgxRl0vZztcblxuZnVuY3Rpb24gcmVtb3ZlTnVsbENoYXJhY3RlcnMoc3RyLCByZXBsYWNlSW52aXNpYmxlID0gZmFsc2UpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zb2xlLmVycm9yKGBUaGUgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZy5gKTtcbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgaWYgKHJlcGxhY2VJbnZpc2libGUpIHtcbiAgICBzdHIgPSBzdHIucmVwbGFjZShJbnZpc2libGVDaGFyYWN0ZXJzUmVnRXhwLCBcIiBcIik7XG4gIH1cblxuICByZXR1cm4gc3RyLnJlcGxhY2UoTnVsbENoYXJhY3RlcnNSZWdFeHAsIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBiaW5hcnlTZWFyY2hGaXJzdEl0ZW0oaXRlbXMsIGNvbmRpdGlvbiwgc3RhcnQgPSAwKSB7XG4gIGxldCBtaW5JbmRleCA9IHN0YXJ0O1xuICBsZXQgbWF4SW5kZXggPSBpdGVtcy5sZW5ndGggLSAxO1xuXG4gIGlmIChtYXhJbmRleCA8IDAgfHwgIWNvbmRpdGlvbihpdGVtc1ttYXhJbmRleF0pKSB7XG4gICAgcmV0dXJuIGl0ZW1zLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChjb25kaXRpb24oaXRlbXNbbWluSW5kZXhdKSkge1xuICAgIHJldHVybiBtaW5JbmRleDtcbiAgfVxuXG4gIHdoaWxlIChtaW5JbmRleCA8IG1heEluZGV4KSB7XG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gbWluSW5kZXggKyBtYXhJbmRleCA+PiAxO1xuICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gaXRlbXNbY3VycmVudEluZGV4XTtcblxuICAgIGlmIChjb25kaXRpb24oY3VycmVudEl0ZW0pKSB7XG4gICAgICBtYXhJbmRleCA9IGN1cnJlbnRJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWluSW5kZXggPSBjdXJyZW50SW5kZXggKyAxO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtaW5JbmRleDtcbn1cblxuZnVuY3Rpb24gYXBwcm94aW1hdGVGcmFjdGlvbih4KSB7XG4gIGlmIChNYXRoLmZsb29yKHgpID09PSB4KSB7XG4gICAgcmV0dXJuIFt4LCAxXTtcbiAgfVxuXG4gIGNvbnN0IHhpbnYgPSAxIC8geDtcbiAgY29uc3QgbGltaXQgPSA4O1xuXG4gIGlmICh4aW52ID4gbGltaXQpIHtcbiAgICByZXR1cm4gWzEsIGxpbWl0XTtcbiAgfSBlbHNlIGlmIChNYXRoLmZsb29yKHhpbnYpID09PSB4aW52KSB7XG4gICAgcmV0dXJuIFsxLCB4aW52XTtcbiAgfVxuXG4gIGNvbnN0IHhfID0geCA+IDEgPyB4aW52IDogeDtcbiAgbGV0IGEgPSAwLFxuICAgICAgYiA9IDEsXG4gICAgICBjID0gMSxcbiAgICAgIGQgPSAxO1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgcCA9IGEgKyBjLFxuICAgICAgICAgIHEgPSBiICsgZDtcblxuICAgIGlmIChxID4gbGltaXQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmICh4XyA8PSBwIC8gcSkge1xuICAgICAgYyA9IHA7XG4gICAgICBkID0gcTtcbiAgICB9IGVsc2Uge1xuICAgICAgYSA9IHA7XG4gICAgICBiID0gcTtcbiAgICB9XG4gIH1cblxuICBsZXQgcmVzdWx0O1xuXG4gIGlmICh4XyAtIGEgLyBiIDwgYyAvIGQgLSB4Xykge1xuICAgIHJlc3VsdCA9IHhfID09PSB4ID8gW2EsIGJdIDogW2IsIGFdO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9IHhfID09PSB4ID8gW2MsIGRdIDogW2QsIGNdO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcm91bmRUb0RpdmlkZSh4LCBkaXYpIHtcbiAgY29uc3QgciA9IHggJSBkaXY7XG4gIHJldHVybiByID09PSAwID8geCA6IE1hdGgucm91bmQoeCAtIHIgKyBkaXYpO1xufVxuXG5mdW5jdGlvbiBnZXRQYWdlU2l6ZUluY2hlcyh7XG4gIHZpZXcsXG4gIHVzZXJVbml0LFxuICByb3RhdGVcbn0pIHtcbiAgY29uc3QgW3gxLCB5MSwgeDIsIHkyXSA9IHZpZXc7XG4gIGNvbnN0IGNoYW5nZU9yaWVudGF0aW9uID0gcm90YXRlICUgMTgwICE9PSAwO1xuICBjb25zdCB3aWR0aCA9ICh4MiAtIHgxKSAvIDcyICogdXNlclVuaXQ7XG4gIGNvbnN0IGhlaWdodCA9ICh5MiAtIHkxKSAvIDcyICogdXNlclVuaXQ7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGNoYW5nZU9yaWVudGF0aW9uID8gaGVpZ2h0IDogd2lkdGgsXG4gICAgaGVpZ2h0OiBjaGFuZ2VPcmllbnRhdGlvbiA/IHdpZHRoIDogaGVpZ2h0XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJhY2t0cmFja0JlZm9yZUFsbFZpc2libGVFbGVtZW50cyhpbmRleCwgdmlld3MsIHRvcCkge1xuICBpZiAoaW5kZXggPCAyKSB7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgbGV0IGVsdCA9IHZpZXdzW2luZGV4XS5kaXY7XG4gIGxldCBwYWdlVG9wID0gZWx0Lm9mZnNldFRvcCArIGVsdC5jbGllbnRUb3A7XG5cbiAgaWYgKHBhZ2VUb3AgPj0gdG9wKSB7XG4gICAgZWx0ID0gdmlld3NbaW5kZXggLSAxXS5kaXY7XG4gICAgcGFnZVRvcCA9IGVsdC5vZmZzZXRUb3AgKyBlbHQuY2xpZW50VG9wO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IGluZGV4IC0gMjsgaSA+PSAwOyAtLWkpIHtcbiAgICBlbHQgPSB2aWV3c1tpXS5kaXY7XG5cbiAgICBpZiAoZWx0Lm9mZnNldFRvcCArIGVsdC5jbGllbnRUb3AgKyBlbHQuY2xpZW50SGVpZ2h0IDw9IHBhZ2VUb3ApIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGluZGV4ID0gaTtcbiAgfVxuXG4gIHJldHVybiBpbmRleDtcbn1cblxuZnVuY3Rpb24gZ2V0VmlzaWJsZUVsZW1lbnRzKHtcbiAgc2Nyb2xsRWwsXG4gIHZpZXdzLFxuICBzb3J0QnlWaXNpYmlsaXR5ID0gZmFsc2UsXG4gIGhvcml6b250YWwgPSBmYWxzZSxcbiAgcnRsID0gZmFsc2Vcbn0pIHtcbiAgY29uc3QgdG9wID0gc2Nyb2xsRWwuc2Nyb2xsVG9wLFxuICAgICAgICBib3R0b20gPSB0b3AgKyBzY3JvbGxFbC5jbGllbnRIZWlnaHQ7XG4gIGNvbnN0IGxlZnQgPSBzY3JvbGxFbC5zY3JvbGxMZWZ0LFxuICAgICAgICByaWdodCA9IGxlZnQgKyBzY3JvbGxFbC5jbGllbnRXaWR0aDtcblxuICBmdW5jdGlvbiBpc0VsZW1lbnRCb3R0b21BZnRlclZpZXdUb3Aodmlldykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB2aWV3LmRpdjtcbiAgICBjb25zdCBlbGVtZW50Qm90dG9tID0gZWxlbWVudC5vZmZzZXRUb3AgKyBlbGVtZW50LmNsaWVudFRvcCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgIHJldHVybiBlbGVtZW50Qm90dG9tID4gdG9wO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNFbGVtZW50TmV4dEFmdGVyVmlld0hvcml6b250YWxseSh2aWV3KSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHZpZXcuZGl2O1xuICAgIGNvbnN0IGVsZW1lbnRMZWZ0ID0gZWxlbWVudC5vZmZzZXRMZWZ0ICsgZWxlbWVudC5jbGllbnRMZWZ0O1xuICAgIGNvbnN0IGVsZW1lbnRSaWdodCA9IGVsZW1lbnRMZWZ0ICsgZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICByZXR1cm4gcnRsID8gZWxlbWVudExlZnQgPCByaWdodCA6IGVsZW1lbnRSaWdodCA+IGxlZnQ7XG4gIH1cblxuICBjb25zdCB2aXNpYmxlID0gW10sXG4gICAgICAgIGlkcyA9IG5ldyBTZXQoKSxcbiAgICAgICAgbnVtVmlld3MgPSB2aWV3cy5sZW5ndGg7XG4gIGxldCBmaXJzdFZpc2libGVFbGVtZW50SW5kID0gYmluYXJ5U2VhcmNoRmlyc3RJdGVtKHZpZXdzLCBob3Jpem9udGFsID8gaXNFbGVtZW50TmV4dEFmdGVyVmlld0hvcml6b250YWxseSA6IGlzRWxlbWVudEJvdHRvbUFmdGVyVmlld1RvcCk7XG5cbiAgaWYgKGZpcnN0VmlzaWJsZUVsZW1lbnRJbmQgPiAwICYmIGZpcnN0VmlzaWJsZUVsZW1lbnRJbmQgPCBudW1WaWV3cyAmJiAhaG9yaXpvbnRhbCkge1xuICAgIGZpcnN0VmlzaWJsZUVsZW1lbnRJbmQgPSBiYWNrdHJhY2tCZWZvcmVBbGxWaXNpYmxlRWxlbWVudHMoZmlyc3RWaXNpYmxlRWxlbWVudEluZCwgdmlld3MsIHRvcCk7XG4gIH1cblxuICBsZXQgbGFzdEVkZ2UgPSBob3Jpem9udGFsID8gcmlnaHQgOiAtMTtcblxuICBmb3IgKGxldCBpID0gZmlyc3RWaXNpYmxlRWxlbWVudEluZDsgaSA8IG51bVZpZXdzOyBpKyspIHtcbiAgICBjb25zdCB2aWV3ID0gdmlld3NbaV0sXG4gICAgICAgICAgZWxlbWVudCA9IHZpZXcuZGl2O1xuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IGVsZW1lbnQub2Zmc2V0TGVmdCArIGVsZW1lbnQuY2xpZW50TGVmdDtcbiAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRUb3AgKyBlbGVtZW50LmNsaWVudFRvcDtcbiAgICBjb25zdCB2aWV3V2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICAgIHZpZXdIZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICBjb25zdCB2aWV3UmlnaHQgPSBjdXJyZW50V2lkdGggKyB2aWV3V2lkdGg7XG4gICAgY29uc3Qgdmlld0JvdHRvbSA9IGN1cnJlbnRIZWlnaHQgKyB2aWV3SGVpZ2h0O1xuXG4gICAgaWYgKGxhc3RFZGdlID09PSAtMSkge1xuICAgICAgaWYgKHZpZXdCb3R0b20gPj0gYm90dG9tKSB7XG4gICAgICAgIGxhc3RFZGdlID0gdmlld0JvdHRvbTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChob3Jpem9udGFsID8gY3VycmVudFdpZHRoIDogY3VycmVudEhlaWdodCkgPiBsYXN0RWRnZSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHZpZXdCb3R0b20gPD0gdG9wIHx8IGN1cnJlbnRIZWlnaHQgPj0gYm90dG9tIHx8IHZpZXdSaWdodCA8PSBsZWZ0IHx8IGN1cnJlbnRXaWR0aCA+PSByaWdodCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgaGlkZGVuSGVpZ2h0ID0gTWF0aC5tYXgoMCwgdG9wIC0gY3VycmVudEhlaWdodCkgKyBNYXRoLm1heCgwLCB2aWV3Qm90dG9tIC0gYm90dG9tKTtcbiAgICBjb25zdCBoaWRkZW5XaWR0aCA9IE1hdGgubWF4KDAsIGxlZnQgLSBjdXJyZW50V2lkdGgpICsgTWF0aC5tYXgoMCwgdmlld1JpZ2h0IC0gcmlnaHQpO1xuICAgIGNvbnN0IGZyYWN0aW9uSGVpZ2h0ID0gKHZpZXdIZWlnaHQgLSBoaWRkZW5IZWlnaHQpIC8gdmlld0hlaWdodCxcbiAgICAgICAgICBmcmFjdGlvbldpZHRoID0gKHZpZXdXaWR0aCAtIGhpZGRlbldpZHRoKSAvIHZpZXdXaWR0aDtcbiAgICBjb25zdCBwZXJjZW50ID0gZnJhY3Rpb25IZWlnaHQgKiBmcmFjdGlvbldpZHRoICogMTAwIHwgMDtcbiAgICB2aXNpYmxlLnB1c2goe1xuICAgICAgaWQ6IHZpZXcuaWQsXG4gICAgICB4OiBjdXJyZW50V2lkdGgsXG4gICAgICB5OiBjdXJyZW50SGVpZ2h0LFxuICAgICAgdmlldyxcbiAgICAgIHBlcmNlbnQsXG4gICAgICB3aWR0aFBlcmNlbnQ6IGZyYWN0aW9uV2lkdGggKiAxMDAgfCAwXG4gICAgfSk7XG4gICAgaWRzLmFkZCh2aWV3LmlkKTtcbiAgfVxuXG4gIGNvbnN0IGZpcnN0ID0gdmlzaWJsZVswXSxcbiAgICAgICAgbGFzdCA9IHZpc2libGVbdmlzaWJsZS5sZW5ndGggLSAxXTtcblxuICBpZiAoc29ydEJ5VmlzaWJpbGl0eSkge1xuICAgIHZpc2libGUuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgY29uc3QgcGMgPSBhLnBlcmNlbnQgLSBiLnBlcmNlbnQ7XG5cbiAgICAgIGlmIChNYXRoLmFicyhwYykgPiAwLjAwMSkge1xuICAgICAgICByZXR1cm4gLXBjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYS5pZCAtIGIuaWQ7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZpcnN0LFxuICAgIGxhc3QsXG4gICAgdmlld3M6IHZpc2libGUsXG4gICAgaWRzXG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vQ29udGV4dE1lbnVIYW5kbGVyKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplV2hlZWxFdmVudERpcmVjdGlvbihldnQpIHtcbiAgbGV0IGRlbHRhID0gTWF0aC5oeXBvdChldnQuZGVsdGFYLCBldnQuZGVsdGFZKTtcbiAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKGV2dC5kZWx0YVksIGV2dC5kZWx0YVgpO1xuXG4gIGlmICgtMC4yNSAqIE1hdGguUEkgPCBhbmdsZSAmJiBhbmdsZSA8IDAuNzUgKiBNYXRoLlBJKSB7XG4gICAgZGVsdGEgPSAtZGVsdGE7XG4gIH1cblxuICByZXR1cm4gZGVsdGE7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVdoZWVsRXZlbnREZWx0YShldnQpIHtcbiAgbGV0IGRlbHRhID0gbm9ybWFsaXplV2hlZWxFdmVudERpcmVjdGlvbihldnQpO1xuICBjb25zdCBNT1VTRV9ET01fREVMVEFfUElYRUxfTU9ERSA9IDA7XG4gIGNvbnN0IE1PVVNFX0RPTV9ERUxUQV9MSU5FX01PREUgPSAxO1xuICBjb25zdCBNT1VTRV9QSVhFTFNfUEVSX0xJTkUgPSAzMDtcbiAgY29uc3QgTU9VU0VfTElORVNfUEVSX1BBR0UgPSAzMDtcblxuICBpZiAoZXZ0LmRlbHRhTW9kZSA9PT0gTU9VU0VfRE9NX0RFTFRBX1BJWEVMX01PREUpIHtcbiAgICBkZWx0YSAvPSBNT1VTRV9QSVhFTFNfUEVSX0xJTkUgKiBNT1VTRV9MSU5FU19QRVJfUEFHRTtcbiAgfSBlbHNlIGlmIChldnQuZGVsdGFNb2RlID09PSBNT1VTRV9ET01fREVMVEFfTElORV9NT0RFKSB7XG4gICAgZGVsdGEgLz0gTU9VU0VfTElORVNfUEVSX1BBR0U7XG4gIH1cblxuICByZXR1cm4gZGVsdGE7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRSb3RhdGlvbihhbmdsZSkge1xuICByZXR1cm4gTnVtYmVyLmlzSW50ZWdlcihhbmdsZSkgJiYgYW5nbGUgJSA5MCA9PT0gMDtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZFNjcm9sbE1vZGUobW9kZSkge1xuICByZXR1cm4gTnVtYmVyLmlzSW50ZWdlcihtb2RlKSAmJiBPYmplY3QudmFsdWVzKFNjcm9sbE1vZGUpLmluY2x1ZGVzKG1vZGUpICYmIG1vZGUgIT09IFNjcm9sbE1vZGUuVU5LTk9XTjtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZFNwcmVhZE1vZGUobW9kZSkge1xuICByZXR1cm4gTnVtYmVyLmlzSW50ZWdlcihtb2RlKSAmJiBPYmplY3QudmFsdWVzKFNwcmVhZE1vZGUpLmluY2x1ZGVzKG1vZGUpICYmIG1vZGUgIT09IFNwcmVhZE1vZGUuVU5LTk9XTjtcbn1cblxuZnVuY3Rpb24gaXNQb3J0cmFpdE9yaWVudGF0aW9uKHNpemUpIHtcbiAgcmV0dXJuIHNpemUud2lkdGggPD0gc2l6ZS5oZWlnaHQ7XG59XG5cbmNvbnN0IGFuaW1hdGlvblN0YXJ0ZWQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc29sdmUpO1xufSk7XG5leHBvcnRzLmFuaW1hdGlvblN0YXJ0ZWQgPSBhbmltYXRpb25TdGFydGVkO1xuXG5mdW5jdGlvbiBjbGFtcCh2LCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodiwgbWluKSwgbWF4KTtcbn1cblxuY2xhc3MgUHJvZ3Jlc3NCYXIge1xuICBjb25zdHJ1Y3RvcihpZCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvZ3Jlc3NCYXIgbm8gbG9uZ2VyIGFjY2VwdHMgYW55IGFkZGl0aW9uYWwgb3B0aW9ucywgXCIgKyBcInBsZWFzZSB1c2UgQ1NTIHJ1bGVzIHRvIG1vZGlmeSBpdHMgYXBwZWFyYW5jZSBpbnN0ZWFkLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCArIFwiIC5wcm9ncmVzc1wiKTtcbiAgICB0aGlzLmJhciA9IHRoaXMuZGl2LnBhcmVudE5vZGU7XG4gICAgdGhpcy5wZXJjZW50ID0gMDtcbiAgfVxuXG4gICN1cGRhdGVCYXIoKSB7XG4gICAgaWYgKHRoaXMuX2luZGV0ZXJtaW5hdGUpIHtcbiAgICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5hZGQoXCJpbmRldGVybWluYXRlXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJpbmRldGVybWluYXRlXCIpO1xuICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICBkb2Muc3R5bGUuc2V0UHJvcGVydHkoXCItLXByb2dyZXNzQmFyLXBlcmNlbnRcIiwgYCR7dGhpcy5fcGVyY2VudH0lYCk7XG4gIH1cblxuICBnZXQgcGVyY2VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGVyY2VudDtcbiAgfVxuXG4gIHNldCBwZXJjZW50KHZhbCkge1xuICAgIHRoaXMuX2luZGV0ZXJtaW5hdGUgPSBpc05hTih2YWwpO1xuICAgIHRoaXMuX3BlcmNlbnQgPSBjbGFtcCh2YWwsIDAsIDEwMCk7XG4gICAgdGhpcy4jdXBkYXRlQmFyKCk7XG4gIH1cblxuICBzZXRXaWR0aCh2aWV3ZXIpIHtcbiAgICBpZiAoIXZpZXdlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHZpZXdlci5wYXJlbnROb2RlO1xuICAgIGNvbnN0IHNjcm9sbGJhcldpZHRoID0gY29udGFpbmVyLm9mZnNldFdpZHRoIC0gdmlld2VyLm9mZnNldFdpZHRoO1xuXG4gICAgaWYgKHNjcm9sbGJhcldpZHRoID4gMCkge1xuICAgICAgY29uc3QgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgZG9jLnN0eWxlLnNldFByb3BlcnR5KFwiLS1wcm9ncmVzc0Jhci1lbmQtb2Zmc2V0XCIsIGAke3Njcm9sbGJhcldpZHRofXB4YCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuYmFyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICh0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMuYmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIH1cblxufVxuXG5leHBvcnRzLlByb2dyZXNzQmFyID0gUHJvZ3Jlc3NCYXI7XG5cbmZ1bmN0aW9uIGdldEFjdGl2ZU9yRm9jdXNlZEVsZW1lbnQoKSB7XG4gIGxldCBjdXJSb290ID0gZG9jdW1lbnQ7XG4gIGxldCBjdXJBY3RpdmVPckZvY3VzZWQgPSBjdXJSb290LmFjdGl2ZUVsZW1lbnQgfHwgY3VyUm9vdC5xdWVyeVNlbGVjdG9yKFwiOmZvY3VzXCIpO1xuXG4gIHdoaWxlIChjdXJBY3RpdmVPckZvY3VzZWQ/LnNoYWRvd1Jvb3QpIHtcbiAgICBjdXJSb290ID0gY3VyQWN0aXZlT3JGb2N1c2VkLnNoYWRvd1Jvb3Q7XG4gICAgY3VyQWN0aXZlT3JGb2N1c2VkID0gY3VyUm9vdC5hY3RpdmVFbGVtZW50IHx8IGN1clJvb3QucXVlcnlTZWxlY3RvcihcIjpmb2N1c1wiKTtcbiAgfVxuXG4gIHJldHVybiBjdXJBY3RpdmVPckZvY3VzZWQ7XG59XG5cbmZ1bmN0aW9uIGFwaVBhZ2VMYXlvdXRUb1ZpZXdlck1vZGVzKGxheW91dCkge1xuICBsZXQgc2Nyb2xsTW9kZSA9IFNjcm9sbE1vZGUuVkVSVElDQUwsXG4gICAgICBzcHJlYWRNb2RlID0gU3ByZWFkTW9kZS5OT05FO1xuXG4gIHN3aXRjaCAobGF5b3V0KSB7XG4gICAgY2FzZSBcIlNpbmdsZVBhZ2VcIjpcbiAgICAgIHNjcm9sbE1vZGUgPSBTY3JvbGxNb2RlLlBBR0U7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJPbmVDb2x1bW5cIjpcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcIlR3b1BhZ2VMZWZ0XCI6XG4gICAgICBzY3JvbGxNb2RlID0gU2Nyb2xsTW9kZS5QQUdFO1xuXG4gICAgY2FzZSBcIlR3b0NvbHVtbkxlZnRcIjpcbiAgICAgIHNwcmVhZE1vZGUgPSBTcHJlYWRNb2RlLk9ERDtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcIlR3b1BhZ2VSaWdodFwiOlxuICAgICAgc2Nyb2xsTW9kZSA9IFNjcm9sbE1vZGUuUEFHRTtcblxuICAgIGNhc2UgXCJUd29Db2x1bW5SaWdodFwiOlxuICAgICAgc3ByZWFkTW9kZSA9IFNwcmVhZE1vZGUuRVZFTjtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxNb2RlLFxuICAgIHNwcmVhZE1vZGVcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXBpUGFnZU1vZGVUb1NpZGViYXJWaWV3KG1vZGUpIHtcbiAgc3dpdGNoIChtb2RlKSB7XG4gICAgY2FzZSBcIlVzZU5vbmVcIjpcbiAgICAgIHJldHVybiBTaWRlYmFyVmlldy5OT05FO1xuXG4gICAgY2FzZSBcIlVzZVRodW1ic1wiOlxuICAgICAgcmV0dXJuIFNpZGViYXJWaWV3LlRIVU1CUztcblxuICAgIGNhc2UgXCJVc2VPdXRsaW5lc1wiOlxuICAgICAgcmV0dXJuIFNpZGViYXJWaWV3Lk9VVExJTkU7XG5cbiAgICBjYXNlIFwiVXNlQXR0YWNobWVudHNcIjpcbiAgICAgIHJldHVybiBTaWRlYmFyVmlldy5BVFRBQ0hNRU5UUztcblxuICAgIGNhc2UgXCJVc2VPQ1wiOlxuICAgICAgcmV0dXJuIFNpZGViYXJWaWV3LkxBWUVSUztcbiAgfVxuXG4gIHJldHVybiBTaWRlYmFyVmlldy5OT05FO1xufVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMpID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuU3RydWN0VHJlZUxheWVyQnVpbGRlciA9IHZvaWQgMDtcbmNvbnN0IFBERl9ST0xFX1RPX0hUTUxfUk9MRSA9IHtcbiAgRG9jdW1lbnQ6IG51bGwsXG4gIERvY3VtZW50RnJhZ21lbnQ6IG51bGwsXG4gIFBhcnQ6IFwiZ3JvdXBcIixcbiAgU2VjdDogXCJncm91cFwiLFxuICBEaXY6IFwiZ3JvdXBcIixcbiAgQXNpZGU6IFwibm90ZVwiLFxuICBOb25TdHJ1Y3Q6IFwibm9uZVwiLFxuICBQOiBudWxsLFxuICBIOiBcImhlYWRpbmdcIixcbiAgVGl0bGU6IG51bGwsXG4gIEZFTm90ZTogXCJub3RlXCIsXG4gIFN1YjogXCJncm91cFwiLFxuICBMYmw6IG51bGwsXG4gIFNwYW46IG51bGwsXG4gIEVtOiBudWxsLFxuICBTdHJvbmc6IG51bGwsXG4gIExpbms6IFwibGlua1wiLFxuICBBbm5vdDogXCJub3RlXCIsXG4gIEZvcm06IFwiZm9ybVwiLFxuICBSdWJ5OiBudWxsLFxuICBSQjogbnVsbCxcbiAgUlQ6IG51bGwsXG4gIFJQOiBudWxsLFxuICBXYXJpY2h1OiBudWxsLFxuICBXVDogbnVsbCxcbiAgV1A6IG51bGwsXG4gIEw6IFwibGlzdFwiLFxuICBMSTogXCJsaXN0aXRlbVwiLFxuICBMQm9keTogbnVsbCxcbiAgVGFibGU6IFwidGFibGVcIixcbiAgVFI6IFwicm93XCIsXG4gIFRIOiBcImNvbHVtbmhlYWRlclwiLFxuICBURDogXCJjZWxsXCIsXG4gIFRIZWFkOiBcImNvbHVtbmhlYWRlclwiLFxuICBUQm9keTogbnVsbCxcbiAgVEZvb3Q6IG51bGwsXG4gIENhcHRpb246IG51bGwsXG4gIEZpZ3VyZTogXCJmaWd1cmVcIixcbiAgRm9ybXVsYTogbnVsbCxcbiAgQXJ0aWZhY3Q6IG51bGxcbn07XG5jb25zdCBIRUFESU5HX1BBVFRFUk4gPSAvXkgoXFxkKykkLztcblxuY2xhc3MgU3RydWN0VHJlZUxheWVyQnVpbGRlciB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwZGZQYWdlXG4gIH0pIHtcbiAgICB0aGlzLnBkZlBhZ2UgPSBwZGZQYWdlO1xuICB9XG5cbiAgcmVuZGVyKHN0cnVjdFRyZWUpIHtcbiAgICByZXR1cm4gdGhpcy5fd2FsayhzdHJ1Y3RUcmVlKTtcbiAgfVxuXG4gIF9zZXRBdHRyaWJ1dGVzKHN0cnVjdEVsZW1lbnQsIGh0bWxFbGVtZW50KSB7XG4gICAgaWYgKHN0cnVjdEVsZW1lbnQuYWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGh0bWxFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc3RydWN0RWxlbWVudC5hbHQpO1xuICAgIH1cblxuICAgIGlmIChzdHJ1Y3RFbGVtZW50LmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGh0bWxFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtb3duc1wiLCBzdHJ1Y3RFbGVtZW50LmlkKTtcbiAgICB9XG5cbiAgICBpZiAoc3RydWN0RWxlbWVudC5sYW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGh0bWxFbGVtZW50LnNldEF0dHJpYnV0ZShcImxhbmdcIiwgc3RydWN0RWxlbWVudC5sYW5nKTtcbiAgICB9XG4gIH1cblxuICBfd2Fsayhub2RlKSB7XG4gICAgaWYgKCFub2RlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cbiAgICBpZiAoXCJyb2xlXCIgaW4gbm9kZSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICByb2xlXG4gICAgICB9ID0gbm9kZTtcbiAgICAgIGNvbnN0IG1hdGNoID0gcm9sZS5tYXRjaChIRUFESU5HX1BBVFRFUk4pO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiaGVhZGluZ1wiKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxldmVsXCIsIG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSBpZiAoUERGX1JPTEVfVE9fSFRNTF9ST0xFW3JvbGVdKSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBQREZfUk9MRV9UT19IVE1MX1JPTEVbcm9sZV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3NldEF0dHJpYnV0ZXMobm9kZSwgZWxlbWVudCk7XG5cbiAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIFwiaWRcIiBpbiBub2RlLmNoaWxkcmVuWzBdKSB7XG4gICAgICAgIHRoaXMuX3NldEF0dHJpYnV0ZXMobm9kZS5jaGlsZHJlblswXSwgZWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGtpZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl93YWxrKGtpZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxufVxuXG5leHBvcnRzLlN0cnVjdFRyZWVMYXllckJ1aWxkZXIgPSBTdHJ1Y3RUcmVlTGF5ZXJCdWlsZGVyO1xuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuVGV4dExheWVyQnVpbGRlciA9IHZvaWQgMDtcblxudmFyIF9wZGZqc0xpYiA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbmNvbnN0IEVYUEFORF9ESVZTX1RJTUVPVVQgPSAzMDA7XG5cbmNsYXNzIFRleHRMYXllckJ1aWxkZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgdGV4dExheWVyRGl2LFxuICAgIGV2ZW50QnVzLFxuICAgIHBhZ2VJbmRleCxcbiAgICB2aWV3cG9ydCxcbiAgICBoaWdobGlnaHRlciA9IG51bGwsXG4gICAgZW5oYW5jZVRleHRTZWxlY3Rpb24gPSBmYWxzZVxuICB9KSB7XG4gICAgdGhpcy50ZXh0TGF5ZXJEaXYgPSB0ZXh0TGF5ZXJEaXY7XG4gICAgdGhpcy5ldmVudEJ1cyA9IGV2ZW50QnVzO1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSBudWxsO1xuICAgIHRoaXMudGV4dENvbnRlbnRJdGVtc1N0ciA9IFtdO1xuICAgIHRoaXMudGV4dENvbnRlbnRTdHJlYW0gPSBudWxsO1xuICAgIHRoaXMucmVuZGVyaW5nRG9uZSA9IGZhbHNlO1xuICAgIHRoaXMucGFnZU51bWJlciA9IHBhZ2VJbmRleCArIDE7XG4gICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuICAgIHRoaXMudGV4dERpdnMgPSBbXTtcbiAgICB0aGlzLnRleHRMYXllclJlbmRlclRhc2sgPSBudWxsO1xuICAgIHRoaXMuaGlnaGxpZ2h0ZXIgPSBoaWdobGlnaHRlcjtcbiAgICB0aGlzLmVuaGFuY2VUZXh0U2VsZWN0aW9uID0gZW5oYW5jZVRleHRTZWxlY3Rpb247XG5cbiAgICB0aGlzLl9iaW5kTW91c2UoKTtcbiAgfVxuXG4gIF9maW5pc2hSZW5kZXJpbmcoKSB7XG4gICAgdGhpcy5yZW5kZXJpbmdEb25lID0gdHJ1ZTtcblxuICAgIGlmICghdGhpcy5lbmhhbmNlVGV4dFNlbGVjdGlvbikge1xuICAgICAgY29uc3QgZW5kT2ZDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVuZE9mQ29udGVudC5jbGFzc05hbWUgPSBcImVuZE9mQ29udGVudFwiO1xuICAgICAgdGhpcy50ZXh0TGF5ZXJEaXYuYXBwZW5kQ2hpbGQoZW5kT2ZDb250ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwidGV4dGxheWVycmVuZGVyZWRcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgcGFnZU51bWJlcjogdGhpcy5wYWdlTnVtYmVyLFxuICAgICAgbnVtVGV4dERpdnM6IHRoaXMudGV4dERpdnMubGVuZ3RoXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIodGltZW91dCA9IDApIHtcbiAgICBpZiAoISh0aGlzLnRleHRDb250ZW50IHx8IHRoaXMudGV4dENvbnRlbnRTdHJlYW0pIHx8IHRoaXMucmVuZGVyaW5nRG9uZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgdGhpcy50ZXh0RGl2cy5sZW5ndGggPSAwO1xuICAgIHRoaXMuaGlnaGxpZ2h0ZXI/LnNldFRleHRNYXBwaW5nKHRoaXMudGV4dERpdnMsIHRoaXMudGV4dENvbnRlbnRJdGVtc1N0cik7XG4gICAgY29uc3QgdGV4dExheWVyRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0aGlzLnRleHRMYXllclJlbmRlclRhc2sgPSAoMCwgX3BkZmpzTGliLnJlbmRlclRleHRMYXllcikoe1xuICAgICAgdGV4dENvbnRlbnQ6IHRoaXMudGV4dENvbnRlbnQsXG4gICAgICB0ZXh0Q29udGVudFN0cmVhbTogdGhpcy50ZXh0Q29udGVudFN0cmVhbSxcbiAgICAgIGNvbnRhaW5lcjogdGV4dExheWVyRnJhZyxcbiAgICAgIHZpZXdwb3J0OiB0aGlzLnZpZXdwb3J0LFxuICAgICAgdGV4dERpdnM6IHRoaXMudGV4dERpdnMsXG4gICAgICB0ZXh0Q29udGVudEl0ZW1zU3RyOiB0aGlzLnRleHRDb250ZW50SXRlbXNTdHIsXG4gICAgICB0aW1lb3V0LFxuICAgICAgZW5oYW5jZVRleHRTZWxlY3Rpb246IHRoaXMuZW5oYW5jZVRleHRTZWxlY3Rpb25cbiAgICB9KTtcbiAgICB0aGlzLnRleHRMYXllclJlbmRlclRhc2sucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMudGV4dExheWVyRGl2LmFwcGVuZENoaWxkKHRleHRMYXllckZyYWcpO1xuXG4gICAgICB0aGlzLl9maW5pc2hSZW5kZXJpbmcoKTtcblxuICAgICAgdGhpcy5oaWdobGlnaHRlcj8uZW5hYmxlKCk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge30pO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIGlmICh0aGlzLnRleHRMYXllclJlbmRlclRhc2spIHtcbiAgICAgIHRoaXMudGV4dExheWVyUmVuZGVyVGFzay5jYW5jZWwoKTtcbiAgICAgIHRoaXMudGV4dExheWVyUmVuZGVyVGFzayA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5oaWdobGlnaHRlcj8uZGlzYWJsZSgpO1xuICB9XG5cbiAgc2V0VGV4dENvbnRlbnRTdHJlYW0ocmVhZGFibGVTdHJlYW0pIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xuICAgIHRoaXMudGV4dENvbnRlbnRTdHJlYW0gPSByZWFkYWJsZVN0cmVhbTtcbiAgfVxuXG4gIHNldFRleHRDb250ZW50KHRleHRDb250ZW50KSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gIH1cblxuICBfYmluZE1vdXNlKCkge1xuICAgIGNvbnN0IGRpdiA9IHRoaXMudGV4dExheWVyRGl2O1xuICAgIGxldCBleHBhbmREaXZzVGltZXIgPSBudWxsO1xuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGV2dCA9PiB7XG4gICAgICBpZiAodGhpcy5lbmhhbmNlVGV4dFNlbGVjdGlvbiAmJiB0aGlzLnRleHRMYXllclJlbmRlclRhc2spIHtcbiAgICAgICAgdGhpcy50ZXh0TGF5ZXJSZW5kZXJUYXNrLmV4cGFuZFRleHREaXZzKHRydWUpO1xuXG4gICAgICAgIGlmIChleHBhbmREaXZzVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZXhwYW5kRGl2c1RpbWVyKTtcbiAgICAgICAgICBleHBhbmREaXZzVGltZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmQgPSBkaXYucXVlcnlTZWxlY3RvcihcIi5lbmRPZkNvbnRlbnRcIik7XG5cbiAgICAgIGlmICghZW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGFkanVzdFRvcCA9IGV2dC50YXJnZXQgIT09IGRpdjtcbiAgICAgIGFkanVzdFRvcCA9IGFkanVzdFRvcCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbmQpLmdldFByb3BlcnR5VmFsdWUoXCItbW96LXVzZXItc2VsZWN0XCIpICE9PSBcIm5vbmVcIjtcblxuICAgICAgaWYgKGFkanVzdFRvcCkge1xuICAgICAgICBjb25zdCBkaXZCb3VuZHMgPSBkaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHIgPSBNYXRoLm1heCgwLCAoZXZ0LnBhZ2VZIC0gZGl2Qm91bmRzLnRvcCkgLyBkaXZCb3VuZHMuaGVpZ2h0KTtcbiAgICAgICAgZW5kLnN0eWxlLnRvcCA9IChyICogMTAwKS50b0ZpeGVkKDIpICsgXCIlXCI7XG4gICAgICB9XG5cbiAgICAgIGVuZC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH0pO1xuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5lbmhhbmNlVGV4dFNlbGVjdGlvbiAmJiB0aGlzLnRleHRMYXllclJlbmRlclRhc2spIHtcbiAgICAgICAgZXhwYW5kRGl2c1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMudGV4dExheWVyUmVuZGVyVGFzaykge1xuICAgICAgICAgICAgdGhpcy50ZXh0TGF5ZXJSZW5kZXJUYXNrLmV4cGFuZFRleHREaXZzKGZhbHNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBleHBhbmREaXZzVGltZXIgPSBudWxsO1xuICAgICAgICB9LCBFWFBBTkRfRElWU19USU1FT1VUKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmQgPSBkaXYucXVlcnlTZWxlY3RvcihcIi5lbmRPZkNvbnRlbnRcIik7XG5cbiAgICAgIGlmICghZW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZW5kLnN0eWxlLnRvcCA9IFwiXCI7XG4gICAgICBlbmQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuVGV4dExheWVyQnVpbGRlciA9IFRleHRMYXllckJ1aWxkZXI7XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5YZmFMYXllckJ1aWxkZXIgPSB2b2lkIDA7XG5cbnZhciBfcGRmanNMaWIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDMpO1xuXG5jbGFzcyBYZmFMYXllckJ1aWxkZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgcGFnZURpdixcbiAgICBwZGZQYWdlLFxuICAgIGFubm90YXRpb25TdG9yYWdlID0gbnVsbCxcbiAgICBsaW5rU2VydmljZSxcbiAgICB4ZmFIdG1sID0gbnVsbFxuICB9KSB7XG4gICAgdGhpcy5wYWdlRGl2ID0gcGFnZURpdjtcbiAgICB0aGlzLnBkZlBhZ2UgPSBwZGZQYWdlO1xuICAgIHRoaXMuYW5ub3RhdGlvblN0b3JhZ2UgPSBhbm5vdGF0aW9uU3RvcmFnZTtcbiAgICB0aGlzLmxpbmtTZXJ2aWNlID0gbGlua1NlcnZpY2U7XG4gICAgdGhpcy54ZmFIdG1sID0geGZhSHRtbDtcbiAgICB0aGlzLmRpdiA9IG51bGw7XG4gICAgdGhpcy5fY2FuY2VsbGVkID0gZmFsc2U7XG4gIH1cblxuICByZW5kZXIodmlld3BvcnQsIGludGVudCA9IFwiZGlzcGxheVwiKSB7XG4gICAgaWYgKGludGVudCA9PT0gXCJwcmludFwiKSB7XG4gICAgICBjb25zdCBwYXJhbWV0ZXJzID0ge1xuICAgICAgICB2aWV3cG9ydDogdmlld3BvcnQuY2xvbmUoe1xuICAgICAgICAgIGRvbnRGbGlwOiB0cnVlXG4gICAgICAgIH0pLFxuICAgICAgICBkaXY6IHRoaXMuZGl2LFxuICAgICAgICB4ZmFIdG1sOiB0aGlzLnhmYUh0bWwsXG4gICAgICAgIGFubm90YXRpb25TdG9yYWdlOiB0aGlzLmFubm90YXRpb25TdG9yYWdlLFxuICAgICAgICBsaW5rU2VydmljZTogdGhpcy5saW5rU2VydmljZSxcbiAgICAgICAgaW50ZW50XG4gICAgICB9O1xuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRoaXMucGFnZURpdi5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgcGFyYW1ldGVycy5kaXYgPSBkaXY7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IF9wZGZqc0xpYi5YZmFMYXllci5yZW5kZXIocGFyYW1ldGVycyk7XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wZGZQYWdlLmdldFhmYSgpLnRoZW4oeGZhSHRtbCA9PiB7XG4gICAgICBpZiAodGhpcy5fY2FuY2VsbGVkIHx8ICF4ZmFIdG1sKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGV4dERpdnM6IFtdXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7XG4gICAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydC5jbG9uZSh7XG4gICAgICAgICAgZG9udEZsaXA6IHRydWVcbiAgICAgICAgfSksXG4gICAgICAgIGRpdjogdGhpcy5kaXYsXG4gICAgICAgIHhmYUh0bWwsXG4gICAgICAgIGFubm90YXRpb25TdG9yYWdlOiB0aGlzLmFubm90YXRpb25TdG9yYWdlLFxuICAgICAgICBsaW5rU2VydmljZTogdGhpcy5saW5rU2VydmljZSxcbiAgICAgICAgaW50ZW50XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5kaXYpIHtcbiAgICAgICAgcmV0dXJuIF9wZGZqc0xpYi5YZmFMYXllci51cGRhdGUocGFyYW1ldGVycyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRoaXMucGFnZURpdi5hcHBlbmRDaGlsZCh0aGlzLmRpdik7XG4gICAgICBwYXJhbWV0ZXJzLmRpdiA9IHRoaXMuZGl2O1xuICAgICAgcmV0dXJuIF9wZGZqc0xpYi5YZmFMYXllci5yZW5kZXIocGFyYW1ldGVycyk7XG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5fY2FuY2VsbGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgaWYgKCF0aGlzLmRpdikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGl2LmhpZGRlbiA9IHRydWU7XG4gIH1cblxufVxuXG5leHBvcnRzLlhmYUxheWVyQnVpbGRlciA9IFhmYUxheWVyQnVpbGRlcjtcblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5QREZWaWV3ZXIgPSBleHBvcnRzLlBERlNpbmdsZVBhZ2VWaWV3ZXIgPSB2b2lkIDA7XG5cbnZhciBfdWlfdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDYpO1xuXG52YXIgX2Jhc2Vfdmlld2VyID0gX193X3BkZmpzX3JlcXVpcmVfXygxMSk7XG5cbmNsYXNzIFBERlZpZXdlciBleHRlbmRzIF9iYXNlX3ZpZXdlci5CYXNlVmlld2VyIHt9XG5cbmV4cG9ydHMuUERGVmlld2VyID0gUERGVmlld2VyO1xuXG5jbGFzcyBQREZTaW5nbGVQYWdlVmlld2VyIGV4dGVuZHMgX2Jhc2Vfdmlld2VyLkJhc2VWaWV3ZXIge1xuICBfcmVzZXRWaWV3KCkge1xuICAgIHN1cGVyLl9yZXNldFZpZXcoKTtcblxuICAgIHRoaXMuX3Njcm9sbE1vZGUgPSBfdWlfdXRpbHMuU2Nyb2xsTW9kZS5QQUdFO1xuICAgIHRoaXMuX3NwcmVhZE1vZGUgPSBfdWlfdXRpbHMuU3ByZWFkTW9kZS5OT05FO1xuICB9XG5cbiAgc2V0IHNjcm9sbE1vZGUobW9kZSkge31cblxuICBfdXBkYXRlU2Nyb2xsTW9kZSgpIHt9XG5cbiAgc2V0IHNwcmVhZE1vZGUobW9kZSkge31cblxuICBfdXBkYXRlU3ByZWFkTW9kZSgpIHt9XG5cbn1cblxuZXhwb3J0cy5QREZTaW5nbGVQYWdlVmlld2VyID0gUERGU2luZ2xlUGFnZVZpZXdlcjtcblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5QYWdlc0NvdW50TGltaXQgPSBleHBvcnRzLlBERlBhZ2VWaWV3QnVmZmVyID0gZXhwb3J0cy5CYXNlVmlld2VyID0gdm9pZCAwO1xuXG52YXIgX3BkZmpzTGliID0gX193X3BkZmpzX3JlcXVpcmVfXygzKTtcblxudmFyIF91aV91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oNik7XG5cbnZhciBfYW5ub3RhdGlvbl9sYXllcl9idWlsZGVyID0gX193X3BkZmpzX3JlcXVpcmVfXygyKTtcblxudmFyIF9sMTBuX3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg0KTtcblxudmFyIF9wZGZfcGFnZV92aWV3ID0gX193X3BkZmpzX3JlcXVpcmVfXygxMik7XG5cbnZhciBfcGRmX3JlbmRlcmluZ19xdWV1ZSA9IF9fd19wZGZqc19yZXF1aXJlX18oMTQpO1xuXG52YXIgX3BkZl9saW5rX3NlcnZpY2UgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDUpO1xuXG52YXIgX3N0cnVjdF90cmVlX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3RleHRfaGlnaGxpZ2h0ZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDE1KTtcblxudmFyIF90ZXh0X2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDgpO1xuXG52YXIgX3hmYV9sYXllcl9idWlsZGVyID0gX193X3BkZmpzX3JlcXVpcmVfXyg5KTtcblxuY29uc3QgREVGQVVMVF9DQUNIRV9TSVpFID0gMTA7XG5jb25zdCBFTkFCTEVfUEVSTUlTU0lPTlNfQ0xBU1MgPSBcImVuYWJsZVBlcm1pc3Npb25zXCI7XG5jb25zdCBQYWdlc0NvdW50TGltaXQgPSB7XG4gIEZPUkNFX1NDUk9MTF9NT0RFX1BBR0U6IDE1MDAwLFxuICBGT1JDRV9MQVpZX1BBR0VfSU5JVDogNzUwMCxcbiAgUEFVU0VfRUFHRVJfUEFHRV9JTklUOiAyNTBcbn07XG5leHBvcnRzLlBhZ2VzQ291bnRMaW1pdCA9IFBhZ2VzQ291bnRMaW1pdDtcblxuY2xhc3MgUERGUGFnZVZpZXdCdWZmZXIge1xuICAjYnVmID0gbmV3IFNldCgpO1xuICAjc2l6ZSA9IDA7XG5cbiAgY29uc3RydWN0b3Ioc2l6ZSkge1xuICAgIHRoaXMuI3NpemUgPSBzaXplO1xuICB9XG5cbiAgcHVzaCh2aWV3KSB7XG4gICAgY29uc3QgYnVmID0gdGhpcy4jYnVmO1xuXG4gICAgaWYgKGJ1Zi5oYXModmlldykpIHtcbiAgICAgIGJ1Zi5kZWxldGUodmlldyk7XG4gICAgfVxuXG4gICAgYnVmLmFkZCh2aWV3KTtcblxuICAgIGlmIChidWYuc2l6ZSA+IHRoaXMuI3NpemUpIHtcbiAgICAgIHRoaXMuI2Rlc3Ryb3lGaXJzdFZpZXcoKTtcbiAgICB9XG4gIH1cblxuICByZXNpemUobmV3U2l6ZSwgaWRzVG9LZWVwID0gbnVsbCkge1xuICAgIHRoaXMuI3NpemUgPSBuZXdTaXplO1xuICAgIGNvbnN0IGJ1ZiA9IHRoaXMuI2J1ZjtcblxuICAgIGlmIChpZHNUb0tlZXApIHtcbiAgICAgIGNvbnN0IGlpID0gYnVmLnNpemU7XG4gICAgICBsZXQgaSA9IDE7XG5cbiAgICAgIGZvciAoY29uc3QgdmlldyBvZiBidWYpIHtcbiAgICAgICAgaWYgKGlkc1RvS2VlcC5oYXModmlldy5pZCkpIHtcbiAgICAgICAgICBidWYuZGVsZXRlKHZpZXcpO1xuICAgICAgICAgIGJ1Zi5hZGQodmlldyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKytpID4gaWkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHdoaWxlIChidWYuc2l6ZSA+IHRoaXMuI3NpemUpIHtcbiAgICAgIHRoaXMuI2Rlc3Ryb3lGaXJzdFZpZXcoKTtcbiAgICB9XG4gIH1cblxuICBoYXModmlldykge1xuICAgIHJldHVybiB0aGlzLiNidWYuaGFzKHZpZXcpO1xuICB9XG5cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuI2J1Zi5rZXlzKCk7XG4gIH1cblxuICAjZGVzdHJveUZpcnN0VmlldygpIHtcbiAgICBjb25zdCBmaXJzdFZpZXcgPSB0aGlzLiNidWYua2V5cygpLm5leHQoKS52YWx1ZTtcbiAgICBmaXJzdFZpZXc/LmRlc3Ryb3koKTtcbiAgICB0aGlzLiNidWYuZGVsZXRlKGZpcnN0Vmlldyk7XG4gIH1cblxufVxuXG5leHBvcnRzLlBERlBhZ2VWaWV3QnVmZmVyID0gUERGUGFnZVZpZXdCdWZmZXI7XG5cbmNsYXNzIEJhc2VWaWV3ZXIge1xuICAjYnVmZmVyID0gbnVsbDtcbiAgI2Fubm90YXRpb25Nb2RlID0gX3BkZmpzTGliLkFubm90YXRpb25Nb2RlLkVOQUJMRV9GT1JNUztcbiAgI3ByZXZpb3VzQW5ub3RhdGlvbk1vZGUgPSBudWxsO1xuICAjZW5hYmxlUGVybWlzc2lvbnMgPSBmYWxzZTtcbiAgI3ByZXZpb3VzQ29udGFpbmVySGVpZ2h0ID0gMDtcbiAgI3Njcm9sbE1vZGVQYWdlU3RhdGUgPSBudWxsO1xuICAjb25WaXNpYmlsaXR5Q2hhbmdlID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEJhc2VWaWV3ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBpbml0aWFsaXplIEJhc2VWaWV3ZXIuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXdlclZlcnNpb24gPSAnMi4xNC4zMDUnO1xuXG4gICAgaWYgKF9wZGZqc0xpYi52ZXJzaW9uICE9PSB2aWV3ZXJWZXJzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBBUEkgdmVyc2lvbiBcIiR7X3BkZmpzTGliLnZlcnNpb259XCIgZG9lcyBub3QgbWF0Y2ggdGhlIFZpZXdlciB2ZXJzaW9uIFwiJHt2aWV3ZXJWZXJzaW9ufVwiLmApO1xuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG4gICAgdGhpcy52aWV3ZXIgPSBvcHRpb25zLnZpZXdlciB8fCBvcHRpb25zLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcblxuICAgIGlmICghKHRoaXMuY29udGFpbmVyPy50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiRElWXCIgJiYgdGhpcy52aWV3ZXI/LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJESVZcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYGNvbnRhaW5lcmAgYW5kL29yIGB2aWV3ZXJgIG9wdGlvbi5cIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29udGFpbmVyLm9mZnNldFBhcmVudCAmJiBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyKS5wb3NpdGlvbiAhPT0gXCJhYnNvbHV0ZVwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYGNvbnRhaW5lcmAgbXVzdCBiZSBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQuXCIpO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRCdXMgPSBvcHRpb25zLmV2ZW50QnVzO1xuICAgIHRoaXMubGlua1NlcnZpY2UgPSBvcHRpb25zLmxpbmtTZXJ2aWNlIHx8IG5ldyBfcGRmX2xpbmtfc2VydmljZS5TaW1wbGVMaW5rU2VydmljZSgpO1xuICAgIHRoaXMuZG93bmxvYWRNYW5hZ2VyID0gb3B0aW9ucy5kb3dubG9hZE1hbmFnZXIgfHwgbnVsbDtcbiAgICB0aGlzLmZpbmRDb250cm9sbGVyID0gb3B0aW9ucy5maW5kQ29udHJvbGxlciB8fCBudWxsO1xuICAgIHRoaXMuX3NjcmlwdGluZ01hbmFnZXIgPSBvcHRpb25zLnNjcmlwdGluZ01hbmFnZXIgfHwgbnVsbDtcbiAgICB0aGlzLnJlbW92ZVBhZ2VCb3JkZXJzID0gb3B0aW9ucy5yZW1vdmVQYWdlQm9yZGVycyB8fCBmYWxzZTtcbiAgICB0aGlzLnRleHRMYXllck1vZGUgPSBvcHRpb25zLnRleHRMYXllck1vZGUgPz8gX3VpX3V0aWxzLlRleHRMYXllck1vZGUuRU5BQkxFO1xuICAgIHRoaXMuI2Fubm90YXRpb25Nb2RlID0gb3B0aW9ucy5hbm5vdGF0aW9uTW9kZSA/PyBfcGRmanNMaWIuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TO1xuICAgIHRoaXMuaW1hZ2VSZXNvdXJjZXNQYXRoID0gb3B0aW9ucy5pbWFnZVJlc291cmNlc1BhdGggfHwgXCJcIjtcbiAgICB0aGlzLmVuYWJsZVByaW50QXV0b1JvdGF0ZSA9IG9wdGlvbnMuZW5hYmxlUHJpbnRBdXRvUm90YXRlIHx8IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyZXIgPSBvcHRpb25zLnJlbmRlcmVyIHx8IF91aV91dGlscy5SZW5kZXJlclR5cGUuQ0FOVkFTO1xuICAgIHRoaXMudXNlT25seUNzc1pvb20gPSBvcHRpb25zLnVzZU9ubHlDc3Nab29tIHx8IGZhbHNlO1xuICAgIHRoaXMubWF4Q2FudmFzUGl4ZWxzID0gb3B0aW9ucy5tYXhDYW52YXNQaXhlbHM7XG4gICAgdGhpcy5sMTBuID0gb3B0aW9ucy5sMTBuIHx8IF9sMTBuX3V0aWxzLk51bGxMMTBuO1xuICAgIHRoaXMuI2VuYWJsZVBlcm1pc3Npb25zID0gb3B0aW9ucy5lbmFibGVQZXJtaXNzaW9ucyB8fCBmYWxzZTtcbiAgICB0aGlzLnBhZ2VDb2xvcnMgPSBvcHRpb25zLnBhZ2VDb2xvcnMgfHwgbnVsbDtcblxuICAgIGlmIChvcHRpb25zLnBhZ2VDb2xvcnMgJiYgKCFDU1Muc3VwcG9ydHMoXCJjb2xvclwiLCBvcHRpb25zLnBhZ2VDb2xvcnMuYmFja2dyb3VuZCkgfHwgIUNTUy5zdXBwb3J0cyhcImNvbG9yXCIsIG9wdGlvbnMucGFnZUNvbG9ycy5mb3JlZ3JvdW5kKSkpIHtcbiAgICAgIGlmIChvcHRpb25zLnBhZ2VDb2xvcnMuYmFja2dyb3VuZCB8fCBvcHRpb25zLnBhZ2VDb2xvcnMuZm9yZWdyb3VuZCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJJZ25vcmluZyBgcGFnZUNvbG9yc2Atb3B0aW9uLCBzaW5jZSB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIHZhbHVlcyB1c2VkLlwiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYWdlQ29sb3JzID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmRlZmF1bHRSZW5kZXJpbmdRdWV1ZSA9ICFvcHRpb25zLnJlbmRlcmluZ1F1ZXVlO1xuXG4gICAgaWYgKHRoaXMuZGVmYXVsdFJlbmRlcmluZ1F1ZXVlKSB7XG4gICAgICB0aGlzLnJlbmRlcmluZ1F1ZXVlID0gbmV3IF9wZGZfcmVuZGVyaW5nX3F1ZXVlLlBERlJlbmRlcmluZ1F1ZXVlKCk7XG4gICAgICB0aGlzLnJlbmRlcmluZ1F1ZXVlLnNldFZpZXdlcih0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJpbmdRdWV1ZSA9IG9wdGlvbnMucmVuZGVyaW5nUXVldWU7XG4gICAgfVxuXG4gICAgdGhpcy5fZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHRoaXMuc2Nyb2xsID0gKDAsIF91aV91dGlscy53YXRjaFNjcm9sbCkodGhpcy5jb250YWluZXIsIHRoaXMuX3Njcm9sbFVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnByZXNlbnRhdGlvbk1vZGVTdGF0ZSA9IF91aV91dGlscy5QcmVzZW50YXRpb25Nb2RlU3RhdGUuVU5LTk9XTjtcbiAgICB0aGlzLl9vbkJlZm9yZURyYXcgPSB0aGlzLl9vbkFmdGVyRHJhdyA9IG51bGw7XG5cbiAgICB0aGlzLl9yZXNldFZpZXcoKTtcblxuICAgIGlmICh0aGlzLnJlbW92ZVBhZ2VCb3JkZXJzKSB7XG4gICAgICB0aGlzLnZpZXdlci5jbGFzc0xpc3QuYWRkKFwicmVtb3ZlUGFnZUJvcmRlcnNcIik7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVDb250YWluZXJIZWlnaHRDc3MoKTtcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJiYXNldmlld2VyaW5pdFwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpc1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgcGFnZXNDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZXMubGVuZ3RoO1xuICB9XG5cbiAgZ2V0UGFnZVZpZXcoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZXNbaW5kZXhdO1xuICB9XG5cbiAgZ2V0IHBhZ2VWaWV3c1JlYWR5KCkge1xuICAgIGlmICghdGhpcy5fcGFnZXNDYXBhYmlsaXR5LnNldHRsZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcGFnZXMuZXZlcnkoZnVuY3Rpb24gKHBhZ2VWaWV3KSB7XG4gICAgICByZXR1cm4gcGFnZVZpZXc/LnBkZlBhZ2U7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgcmVuZGVyRm9ybXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2Fubm90YXRpb25Nb2RlID09PSBfcGRmanNMaWIuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TO1xuICB9XG5cbiAgZ2V0IGVuYWJsZVNjcmlwdGluZygpIHtcbiAgICByZXR1cm4gISF0aGlzLl9zY3JpcHRpbmdNYW5hZ2VyO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRQYWdlTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50UGFnZU51bWJlcjtcbiAgfVxuXG4gIHNldCBjdXJyZW50UGFnZU51bWJlcih2YWwpIHtcbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYWdlIG51bWJlci5cIik7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBkZkRvY3VtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9zZXRDdXJyZW50UGFnZU51bWJlcih2YWwsIHRydWUpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBjdXJyZW50UGFnZU51bWJlcjogXCIke3ZhbH1cIiBpcyBub3QgYSB2YWxpZCBwYWdlLmApO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRDdXJyZW50UGFnZU51bWJlcih2YWwsIHJlc2V0Q3VycmVudFBhZ2VWaWV3ID0gZmFsc2UpIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFBhZ2VOdW1iZXIgPT09IHZhbCkge1xuICAgICAgaWYgKHJlc2V0Q3VycmVudFBhZ2VWaWV3KSB7XG4gICAgICAgIHRoaXMuI3Jlc2V0Q3VycmVudFBhZ2VWaWV3KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghKDAgPCB2YWwgJiYgdmFsIDw9IHRoaXMucGFnZXNDb3VudCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuX2N1cnJlbnRQYWdlTnVtYmVyO1xuICAgIHRoaXMuX2N1cnJlbnRQYWdlTnVtYmVyID0gdmFsO1xuICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJwYWdlY2hhbmdpbmdcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgcGFnZU51bWJlcjogdmFsLFxuICAgICAgcGFnZUxhYmVsOiB0aGlzLl9wYWdlTGFiZWxzPy5bdmFsIC0gMV0gPz8gbnVsbCxcbiAgICAgIHByZXZpb3VzXG4gICAgfSk7XG5cbiAgICBpZiAocmVzZXRDdXJyZW50UGFnZVZpZXcpIHtcbiAgICAgIHRoaXMuI3Jlc2V0Q3VycmVudFBhZ2VWaWV3KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnZXQgY3VycmVudFBhZ2VMYWJlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZUxhYmVscz8uW3RoaXMuX2N1cnJlbnRQYWdlTnVtYmVyIC0gMV0gPz8gbnVsbDtcbiAgfVxuXG4gIHNldCBjdXJyZW50UGFnZUxhYmVsKHZhbCkge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBwYWdlID0gdmFsIHwgMDtcblxuICAgIGlmICh0aGlzLl9wYWdlTGFiZWxzKSB7XG4gICAgICBjb25zdCBpID0gdGhpcy5fcGFnZUxhYmVscy5pbmRleE9mKHZhbCk7XG5cbiAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgcGFnZSA9IGkgKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fc2V0Q3VycmVudFBhZ2VOdW1iZXIocGFnZSwgdHJ1ZSkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYGN1cnJlbnRQYWdlTGFiZWw6IFwiJHt2YWx9XCIgaXMgbm90IGEgdmFsaWQgcGFnZS5gKTtcbiAgICB9XG4gIH1cblxuICBnZXQgY3VycmVudFNjYWxlKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50U2NhbGUgIT09IF91aV91dGlscy5VTktOT1dOX1NDQUxFID8gdGhpcy5fY3VycmVudFNjYWxlIDogX3VpX3V0aWxzLkRFRkFVTFRfU0NBTEU7XG4gIH1cblxuICBzZXQgY3VycmVudFNjYWxlKHZhbCkge1xuICAgIGlmIChpc05hTih2YWwpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG51bWVyaWMgc2NhbGUuXCIpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NldFNjYWxlKHZhbCwgZmFsc2UpO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRTY2FsZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50U2NhbGVWYWx1ZTtcbiAgfVxuXG4gIHNldCBjdXJyZW50U2NhbGVWYWx1ZSh2YWwpIHtcbiAgICBpZiAoIXRoaXMucGRmRG9jdW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRTY2FsZSh2YWwsIGZhbHNlKTtcbiAgfVxuXG4gIGdldCBwYWdlc1JvdGF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9wYWdlc1JvdGF0aW9uO1xuICB9XG5cbiAgc2V0IHBhZ2VzUm90YXRpb24ocm90YXRpb24pIHtcbiAgICBpZiAoISgwLCBfdWlfdXRpbHMuaXNWYWxpZFJvdGF0aW9uKShyb3RhdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFnZXMgcm90YXRpb24gYW5nbGUuXCIpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJvdGF0aW9uICU9IDM2MDtcblxuICAgIGlmIChyb3RhdGlvbiA8IDApIHtcbiAgICAgIHJvdGF0aW9uICs9IDM2MDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGFnZXNSb3RhdGlvbiA9PT0gcm90YXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYWdlc1JvdGF0aW9uID0gcm90YXRpb247XG4gICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMuX2N1cnJlbnRQYWdlTnVtYmVyO1xuICAgIGNvbnN0IHVwZGF0ZUFyZ3MgPSB7XG4gICAgICByb3RhdGlvblxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2VWaWV3IG9mIHRoaXMuX3BhZ2VzKSB7XG4gICAgICBwYWdlVmlldy51cGRhdGUodXBkYXRlQXJncyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRTY2FsZVZhbHVlKSB7XG4gICAgICB0aGlzLl9zZXRTY2FsZSh0aGlzLl9jdXJyZW50U2NhbGVWYWx1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcInJvdGF0aW9uY2hhbmdpbmdcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgcGFnZXNSb3RhdGlvbjogcm90YXRpb24sXG4gICAgICBwYWdlTnVtYmVyXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5kZWZhdWx0UmVuZGVyaW5nUXVldWUpIHtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGZpcnN0UGFnZVByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMucGRmRG9jdW1lbnQgPyB0aGlzLl9maXJzdFBhZ2VDYXBhYmlsaXR5LnByb21pc2UgOiBudWxsO1xuICB9XG5cbiAgZ2V0IG9uZVBhZ2VSZW5kZXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wZGZEb2N1bWVudCA/IHRoaXMuX29uZVBhZ2VSZW5kZXJlZENhcGFiaWxpdHkucHJvbWlzZSA6IG51bGw7XG4gIH1cblxuICBnZXQgcGFnZXNQcm9taXNlKCkge1xuICAgIHJldHVybiB0aGlzLnBkZkRvY3VtZW50ID8gdGhpcy5fcGFnZXNDYXBhYmlsaXR5LnByb21pc2UgOiBudWxsO1xuICB9XG5cbiAgI2luaXRpYWxpemVQZXJtaXNzaW9ucyhwZXJtaXNzaW9ucykge1xuICAgIGlmICghcGVybWlzc2lvbnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXBlcm1pc3Npb25zLmluY2x1ZGVzKF9wZGZqc0xpYi5QZXJtaXNzaW9uRmxhZy5DT1BZKSkge1xuICAgICAgdGhpcy52aWV3ZXIuY2xhc3NMaXN0LmFkZChFTkFCTEVfUEVSTUlTU0lPTlNfQ0xBU1MpO1xuICAgIH1cblxuICAgIGlmICghcGVybWlzc2lvbnMuaW5jbHVkZXMoX3BkZmpzTGliLlBlcm1pc3Npb25GbGFnLk1PRElGWV9BTk5PVEFUSU9OUykgJiYgIXBlcm1pc3Npb25zLmluY2x1ZGVzKF9wZGZqc0xpYi5QZXJtaXNzaW9uRmxhZy5GSUxMX0lOVEVSQUNUSVZFX0ZPUk1TKSkge1xuICAgICAgaWYgKHRoaXMuI2Fubm90YXRpb25Nb2RlID09PSBfcGRmanNMaWIuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzQW5ub3RhdGlvbk1vZGUgPSB0aGlzLiNhbm5vdGF0aW9uTW9kZTtcbiAgICAgICAgdGhpcy4jYW5ub3RhdGlvbk1vZGUgPSBfcGRmanNMaWIuQW5ub3RhdGlvbk1vZGUuRU5BQkxFO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICNvbmVQYWdlUmVuZGVyZWRPckZvcmNlRmV0Y2goKSB7XG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJoaWRkZW5cIiB8fCAhdGhpcy5jb250YWluZXIub2Zmc2V0UGFyZW50IHx8IHRoaXMuX2dldFZpc2libGVQYWdlcygpLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHZpc2liaWxpdHlDaGFuZ2VQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLiNvblZpc2liaWxpdHlDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgIT09IFwiaGlkZGVuXCIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuI29uVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgICAgIHRoaXMuI29uVmlzaWJpbGl0eUNoYW5nZSA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLiNvblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH0pO1xuICAgIHJldHVybiBQcm9taXNlLnJhY2UoW3RoaXMuX29uZVBhZ2VSZW5kZXJlZENhcGFiaWxpdHkucHJvbWlzZSwgdmlzaWJpbGl0eUNoYW5nZVByb21pc2VdKTtcbiAgfVxuXG4gIHNldERvY3VtZW50KHBkZkRvY3VtZW50KSB7XG4gICAgaWYgKHRoaXMucGRmRG9jdW1lbnQpIHtcbiAgICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJwYWdlc2Rlc3Ryb3lcIiwge1xuICAgICAgICBzb3VyY2U6IHRoaXNcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9jYW5jZWxSZW5kZXJpbmcoKTtcblxuICAgICAgdGhpcy5fcmVzZXRWaWV3KCk7XG5cbiAgICAgIGlmICh0aGlzLmZpbmRDb250cm9sbGVyKSB7XG4gICAgICAgIHRoaXMuZmluZENvbnRyb2xsZXIuc2V0RG9jdW1lbnQobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9zY3JpcHRpbmdNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuX3NjcmlwdGluZ01hbmFnZXIuc2V0RG9jdW1lbnQobnVsbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wZGZEb2N1bWVudCA9IHBkZkRvY3VtZW50O1xuXG4gICAgaWYgKCFwZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUHVyZVhmYSA9IHBkZkRvY3VtZW50LmlzUHVyZVhmYTtcbiAgICBjb25zdCBwYWdlc0NvdW50ID0gcGRmRG9jdW1lbnQubnVtUGFnZXM7XG4gICAgY29uc3QgZmlyc3RQYWdlUHJvbWlzZSA9IHBkZkRvY3VtZW50LmdldFBhZ2UoMSk7XG4gICAgY29uc3Qgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IHBkZkRvY3VtZW50LmdldE9wdGlvbmFsQ29udGVudENvbmZpZygpO1xuICAgIGNvbnN0IHBlcm1pc3Npb25zUHJvbWlzZSA9IHRoaXMuI2VuYWJsZVBlcm1pc3Npb25zID8gcGRmRG9jdW1lbnQuZ2V0UGVybWlzc2lvbnMoKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgaWYgKHBhZ2VzQ291bnQgPiBQYWdlc0NvdW50TGltaXQuRk9SQ0VfU0NST0xMX01PREVfUEFHRSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRm9yY2luZyBQQUdFLXNjcm9sbGluZyBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgZ2l2ZW4gdGhlIGxlbmd0aCBvZiB0aGUgZG9jdW1lbnQuXCIpO1xuICAgICAgY29uc3QgbW9kZSA9IHRoaXMuX3Njcm9sbE1vZGUgPSBfdWlfdXRpbHMuU2Nyb2xsTW9kZS5QQUdFO1xuICAgICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcInNjcm9sbG1vZGVjaGFuZ2VkXCIsIHtcbiAgICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgICBtb2RlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9wYWdlc0NhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJwYWdlc2xvYWRlZFwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgcGFnZXNDb3VudFxuICAgICAgfSk7XG4gICAgfSwgKCkgPT4ge30pO1xuXG4gICAgdGhpcy5fb25CZWZvcmVEcmF3ID0gZXZ0ID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VWaWV3ID0gdGhpcy5fcGFnZXNbZXZ0LnBhZ2VOdW1iZXIgLSAxXTtcblxuICAgICAgaWYgKCFwYWdlVmlldykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuI2J1ZmZlci5wdXNoKHBhZ2VWaWV3KTtcbiAgICB9O1xuXG4gICAgdGhpcy5ldmVudEJ1cy5fb24oXCJwYWdlcmVuZGVyXCIsIHRoaXMuX29uQmVmb3JlRHJhdyk7XG5cbiAgICB0aGlzLl9vbkFmdGVyRHJhdyA9IGV2dCA9PiB7XG4gICAgICBpZiAoZXZ0LmNzc1RyYW5zZm9ybSB8fCB0aGlzLl9vbmVQYWdlUmVuZGVyZWRDYXBhYmlsaXR5LnNldHRsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9vbmVQYWdlUmVuZGVyZWRDYXBhYmlsaXR5LnJlc29sdmUoe1xuICAgICAgICB0aW1lc3RhbXA6IGV2dC50aW1lc3RhbXBcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmV2ZW50QnVzLl9vZmYoXCJwYWdlcmVuZGVyZWRcIiwgdGhpcy5fb25BZnRlckRyYXcpO1xuXG4gICAgICB0aGlzLl9vbkFmdGVyRHJhdyA9IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLiNvblZpc2liaWxpdHlDaGFuZ2UpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy4jb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgICAgdGhpcy4jb25WaXNpYmlsaXR5Q2hhbmdlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5ldmVudEJ1cy5fb24oXCJwYWdlcmVuZGVyZWRcIiwgdGhpcy5fb25BZnRlckRyYXcpO1xuXG4gICAgUHJvbWlzZS5hbGwoW2ZpcnN0UGFnZVByb21pc2UsIHBlcm1pc3Npb25zUHJvbWlzZV0pLnRoZW4oKFtmaXJzdFBkZlBhZ2UsIHBlcm1pc3Npb25zXSkgPT4ge1xuICAgICAgaWYgKHBkZkRvY3VtZW50ICE9PSB0aGlzLnBkZkRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZmlyc3RQYWdlQ2FwYWJpbGl0eS5yZXNvbHZlKGZpcnN0UGRmUGFnZSk7XG5cbiAgICAgIHRoaXMuX29wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UgPSBvcHRpb25hbENvbnRlbnRDb25maWdQcm9taXNlO1xuICAgICAgdGhpcy4jaW5pdGlhbGl6ZVBlcm1pc3Npb25zKHBlcm1pc3Npb25zKTtcbiAgICAgIGNvbnN0IHZpZXdlckVsZW1lbnQgPSB0aGlzLl9zY3JvbGxNb2RlID09PSBfdWlfdXRpbHMuU2Nyb2xsTW9kZS5QQUdFID8gbnVsbCA6IHRoaXMudmlld2VyO1xuICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLmN1cnJlbnRTY2FsZTtcbiAgICAgIGNvbnN0IHZpZXdwb3J0ID0gZmlyc3RQZGZQYWdlLmdldFZpZXdwb3J0KHtcbiAgICAgICAgc2NhbGU6IHNjYWxlICogX3BkZmpzTGliLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUU1xuICAgICAgfSk7XG4gICAgICBjb25zdCB0ZXh0TGF5ZXJGYWN0b3J5ID0gdGhpcy50ZXh0TGF5ZXJNb2RlICE9PSBfdWlfdXRpbHMuVGV4dExheWVyTW9kZS5ESVNBQkxFICYmICFpc1B1cmVYZmEgPyB0aGlzIDogbnVsbDtcbiAgICAgIGNvbnN0IGFubm90YXRpb25MYXllckZhY3RvcnkgPSB0aGlzLiNhbm5vdGF0aW9uTW9kZSAhPT0gX3BkZmpzTGliLkFubm90YXRpb25Nb2RlLkRJU0FCTEUgPyB0aGlzIDogbnVsbDtcbiAgICAgIGNvbnN0IHhmYUxheWVyRmFjdG9yeSA9IGlzUHVyZVhmYSA/IHRoaXMgOiBudWxsO1xuXG4gICAgICBmb3IgKGxldCBwYWdlTnVtID0gMTsgcGFnZU51bSA8PSBwYWdlc0NvdW50OyArK3BhZ2VOdW0pIHtcbiAgICAgICAgY29uc3QgcGFnZVZpZXcgPSBuZXcgX3BkZl9wYWdlX3ZpZXcuUERGUGFnZVZpZXcoe1xuICAgICAgICAgIGNvbnRhaW5lcjogdmlld2VyRWxlbWVudCxcbiAgICAgICAgICBldmVudEJ1czogdGhpcy5ldmVudEJ1cyxcbiAgICAgICAgICBpZDogcGFnZU51bSxcbiAgICAgICAgICBzY2FsZSxcbiAgICAgICAgICBkZWZhdWx0Vmlld3BvcnQ6IHZpZXdwb3J0LmNsb25lKCksXG4gICAgICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSxcbiAgICAgICAgICByZW5kZXJpbmdRdWV1ZTogdGhpcy5yZW5kZXJpbmdRdWV1ZSxcbiAgICAgICAgICB0ZXh0TGF5ZXJGYWN0b3J5LFxuICAgICAgICAgIHRleHRMYXllck1vZGU6IHRoaXMudGV4dExheWVyTW9kZSxcbiAgICAgICAgICBhbm5vdGF0aW9uTGF5ZXJGYWN0b3J5LFxuICAgICAgICAgIGFubm90YXRpb25Nb2RlOiB0aGlzLiNhbm5vdGF0aW9uTW9kZSxcbiAgICAgICAgICB4ZmFMYXllckZhY3RvcnksXG4gICAgICAgICAgdGV4dEhpZ2hsaWdodGVyRmFjdG9yeTogdGhpcyxcbiAgICAgICAgICBzdHJ1Y3RUcmVlTGF5ZXJGYWN0b3J5OiB0aGlzLFxuICAgICAgICAgIGltYWdlUmVzb3VyY2VzUGF0aDogdGhpcy5pbWFnZVJlc291cmNlc1BhdGgsXG4gICAgICAgICAgcmVuZGVyZXI6IHRoaXMucmVuZGVyZXIsXG4gICAgICAgICAgdXNlT25seUNzc1pvb206IHRoaXMudXNlT25seUNzc1pvb20sXG4gICAgICAgICAgbWF4Q2FudmFzUGl4ZWxzOiB0aGlzLm1heENhbnZhc1BpeGVscyxcbiAgICAgICAgICBwYWdlQ29sb3JzOiB0aGlzLnBhZ2VDb2xvcnMsXG4gICAgICAgICAgbDEwbjogdGhpcy5sMTBuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3BhZ2VzLnB1c2gocGFnZVZpZXcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaXJzdFBhZ2VWaWV3ID0gdGhpcy5fcGFnZXNbMF07XG5cbiAgICAgIGlmIChmaXJzdFBhZ2VWaWV3KSB7XG4gICAgICAgIGZpcnN0UGFnZVZpZXcuc2V0UGRmUGFnZShmaXJzdFBkZlBhZ2UpO1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmNhY2hlUGFnZVJlZigxLCBmaXJzdFBkZlBhZ2UucmVmKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3Njcm9sbE1vZGUgPT09IF91aV91dGlscy5TY3JvbGxNb2RlLlBBR0UpIHtcbiAgICAgICAgdGhpcy4jZW5zdXJlUGFnZVZpZXdWaXNpYmxlKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3NwcmVhZE1vZGUgIT09IF91aV91dGlscy5TcHJlYWRNb2RlLk5PTkUpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3ByZWFkTW9kZSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiNvbmVQYWdlUmVuZGVyZWRPckZvcmNlRmV0Y2goKS50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZmluZENvbnRyb2xsZXIpIHtcbiAgICAgICAgICB0aGlzLmZpbmRDb250cm9sbGVyLnNldERvY3VtZW50KHBkZkRvY3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9zY3JpcHRpbmdNYW5hZ2VyKSB7XG4gICAgICAgICAgdGhpcy5fc2NyaXB0aW5nTWFuYWdlci5zZXREb2N1bWVudChwZGZEb2N1bWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGRmRG9jdW1lbnQubG9hZGluZ1BhcmFtcy5kaXNhYmxlQXV0b0ZldGNoIHx8IHBhZ2VzQ291bnQgPiBQYWdlc0NvdW50TGltaXQuRk9SQ0VfTEFaWV9QQUdFX0lOSVQpIHtcbiAgICAgICAgICB0aGlzLl9wYWdlc0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGdldFBhZ2VzTGVmdCA9IHBhZ2VzQ291bnQgLSAxO1xuXG4gICAgICAgIGlmIChnZXRQYWdlc0xlZnQgPD0gMCkge1xuICAgICAgICAgIHRoaXMuX3BhZ2VzQ2FwYWJpbGl0eS5yZXNvbHZlKCk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBwYWdlTnVtID0gMjsgcGFnZU51bSA8PSBwYWdlc0NvdW50OyArK3BhZ2VOdW0pIHtcbiAgICAgICAgICBjb25zdCBwcm9taXNlID0gcGRmRG9jdW1lbnQuZ2V0UGFnZShwYWdlTnVtKS50aGVuKHBkZlBhZ2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFnZVZpZXcgPSB0aGlzLl9wYWdlc1twYWdlTnVtIC0gMV07XG5cbiAgICAgICAgICAgIGlmICghcGFnZVZpZXcucGRmUGFnZSkge1xuICAgICAgICAgICAgICBwYWdlVmlldy5zZXRQZGZQYWdlKHBkZlBhZ2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmNhY2hlUGFnZVJlZihwYWdlTnVtLCBwZGZQYWdlLnJlZik7XG5cbiAgICAgICAgICAgIGlmICgtLWdldFBhZ2VzTGVmdCA9PT0gMCkge1xuICAgICAgICAgICAgICB0aGlzLl9wYWdlc0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZ2V0IHBhZ2UgJHtwYWdlTnVtfSB0byBpbml0aWFsaXplIHZpZXdlcmAsIHJlYXNvbik7XG5cbiAgICAgICAgICAgIGlmICgtLWdldFBhZ2VzTGVmdCA9PT0gMCkge1xuICAgICAgICAgICAgICB0aGlzLl9wYWdlc0NhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHBhZ2VOdW0gJSBQYWdlc0NvdW50TGltaXQuUEFVU0VfRUFHRVJfUEFHRV9JTklUID09PSAwKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9taXNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwicGFnZXNpbml0XCIsIHtcbiAgICAgICAgc291cmNlOiB0aGlzXG4gICAgICB9KTtcbiAgICAgIHBkZkRvY3VtZW50LmdldE1ldGFkYXRhKCkudGhlbigoe1xuICAgICAgICBpbmZvXG4gICAgICB9KSA9PiB7XG4gICAgICAgIGlmIChwZGZEb2N1bWVudCAhPT0gdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmZvLkxhbmd1YWdlKSB7XG4gICAgICAgICAgdGhpcy52aWV3ZXIubGFuZyA9IGluZm8uTGFuZ3VhZ2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5kZWZhdWx0UmVuZGVyaW5nUXVldWUpIHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBpbml0aWFsaXplIHZpZXdlclwiLCByZWFzb24pO1xuXG4gICAgICB0aGlzLl9wYWdlc0NhcGFiaWxpdHkucmVqZWN0KHJlYXNvbik7XG4gICAgfSk7XG4gIH1cblxuICBzZXRQYWdlTGFiZWxzKGxhYmVscykge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghbGFiZWxzKSB7XG4gICAgICB0aGlzLl9wYWdlTGFiZWxzID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKCEoQXJyYXkuaXNBcnJheShsYWJlbHMpICYmIHRoaXMucGRmRG9jdW1lbnQubnVtUGFnZXMgPT09IGxhYmVscy5sZW5ndGgpKSB7XG4gICAgICB0aGlzLl9wYWdlTGFiZWxzID0gbnVsbDtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYHNldFBhZ2VMYWJlbHM6IEludmFsaWQgcGFnZSBsYWJlbHMuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3BhZ2VMYWJlbHMgPSBsYWJlbHM7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5fcGFnZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdGhpcy5fcGFnZXNbaV0uc2V0UGFnZUxhYmVsKHRoaXMuX3BhZ2VMYWJlbHM/LltpXSA/PyBudWxsKTtcbiAgICB9XG4gIH1cblxuICBfcmVzZXRWaWV3KCkge1xuICAgIHRoaXMuX3BhZ2VzID0gW107XG4gICAgdGhpcy5fY3VycmVudFBhZ2VOdW1iZXIgPSAxO1xuICAgIHRoaXMuX2N1cnJlbnRTY2FsZSA9IF91aV91dGlscy5VTktOT1dOX1NDQUxFO1xuICAgIHRoaXMuX2N1cnJlbnRTY2FsZVZhbHVlID0gbnVsbDtcbiAgICB0aGlzLl9wYWdlTGFiZWxzID0gbnVsbDtcbiAgICB0aGlzLiNidWZmZXIgPSBuZXcgUERGUGFnZVZpZXdCdWZmZXIoREVGQVVMVF9DQUNIRV9TSVpFKTtcbiAgICB0aGlzLl9sb2NhdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fcGFnZXNSb3RhdGlvbiA9IDA7XG4gICAgdGhpcy5fb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fZmlyc3RQYWdlQ2FwYWJpbGl0eSA9ICgwLCBfcGRmanNMaWIuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgdGhpcy5fb25lUGFnZVJlbmRlcmVkQ2FwYWJpbGl0eSA9ICgwLCBfcGRmanNMaWIuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gICAgdGhpcy5fcGFnZXNDYXBhYmlsaXR5ID0gKDAsIF9wZGZqc0xpYi5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICB0aGlzLl9zY3JvbGxNb2RlID0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuVkVSVElDQUw7XG4gICAgdGhpcy5fcHJldmlvdXNTY3JvbGxNb2RlID0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuVU5LTk9XTjtcbiAgICB0aGlzLl9zcHJlYWRNb2RlID0gX3VpX3V0aWxzLlNwcmVhZE1vZGUuTk9ORTtcbiAgICB0aGlzLiNzY3JvbGxNb2RlUGFnZVN0YXRlID0ge1xuICAgICAgcHJldmlvdXNQYWdlTnVtYmVyOiAxLFxuICAgICAgc2Nyb2xsRG93bjogdHJ1ZSxcbiAgICAgIHBhZ2VzOiBbXVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5fb25CZWZvcmVEcmF3KSB7XG4gICAgICB0aGlzLmV2ZW50QnVzLl9vZmYoXCJwYWdlcmVuZGVyXCIsIHRoaXMuX29uQmVmb3JlRHJhdyk7XG5cbiAgICAgIHRoaXMuX29uQmVmb3JlRHJhdyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX29uQWZ0ZXJEcmF3KSB7XG4gICAgICB0aGlzLmV2ZW50QnVzLl9vZmYoXCJwYWdlcmVuZGVyZWRcIiwgdGhpcy5fb25BZnRlckRyYXcpO1xuXG4gICAgICB0aGlzLl9vbkFmdGVyRHJhdyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI29uVmlzaWJpbGl0eUNoYW5nZSkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy4jb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgIHRoaXMuI29uVmlzaWJpbGl0eUNoYW5nZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy52aWV3ZXIudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgdGhpcy5fdXBkYXRlU2Nyb2xsTW9kZSgpO1xuXG4gICAgdGhpcy52aWV3ZXIucmVtb3ZlQXR0cmlidXRlKFwibGFuZ1wiKTtcbiAgICB0aGlzLnZpZXdlci5jbGFzc0xpc3QucmVtb3ZlKEVOQUJMRV9QRVJNSVNTSU9OU19DTEFTUyk7XG5cbiAgICBpZiAodGhpcy4jcHJldmlvdXNBbm5vdGF0aW9uTW9kZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy4jYW5ub3RhdGlvbk1vZGUgPSB0aGlzLiNwcmV2aW91c0Fubm90YXRpb25Nb2RlO1xuICAgICAgdGhpcy4jcHJldmlvdXNBbm5vdGF0aW9uTW9kZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgI2Vuc3VyZVBhZ2VWaWV3VmlzaWJsZSgpIHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsTW9kZSAhPT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuUEFHRSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiI2Vuc3VyZVBhZ2VWaWV3VmlzaWJsZTogSW52YWxpZCBzY3JvbGxNb2RlIHZhbHVlLlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5fY3VycmVudFBhZ2VOdW1iZXIsXG4gICAgICAgICAgc3RhdGUgPSB0aGlzLiNzY3JvbGxNb2RlUGFnZVN0YXRlLFxuICAgICAgICAgIHZpZXdlciA9IHRoaXMudmlld2VyO1xuICAgIHZpZXdlci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgc3RhdGUucGFnZXMubGVuZ3RoID0gMDtcblxuICAgIGlmICh0aGlzLl9zcHJlYWRNb2RlID09PSBfdWlfdXRpbHMuU3ByZWFkTW9kZS5OT05FICYmICF0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlKSB7XG4gICAgICBjb25zdCBwYWdlVmlldyA9IHRoaXMuX3BhZ2VzW3BhZ2VOdW1iZXIgLSAxXTtcbiAgICAgIHZpZXdlci5hcHBlbmRDaGlsZChwYWdlVmlldy5kaXYpO1xuICAgICAgc3RhdGUucGFnZXMucHVzaChwYWdlVmlldyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBhZ2VJbmRleFNldCA9IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIHBhcml0eSA9IHRoaXMuX3NwcmVhZE1vZGUgLSAxO1xuXG4gICAgICBpZiAocGFyaXR5ID09PSAtMSkge1xuICAgICAgICBwYWdlSW5kZXhTZXQuYWRkKHBhZ2VOdW1iZXIgLSAxKTtcbiAgICAgIH0gZWxzZSBpZiAocGFnZU51bWJlciAlIDIgIT09IHBhcml0eSkge1xuICAgICAgICBwYWdlSW5kZXhTZXQuYWRkKHBhZ2VOdW1iZXIgLSAxKTtcbiAgICAgICAgcGFnZUluZGV4U2V0LmFkZChwYWdlTnVtYmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhZ2VJbmRleFNldC5hZGQocGFnZU51bWJlciAtIDIpO1xuICAgICAgICBwYWdlSW5kZXhTZXQuYWRkKHBhZ2VOdW1iZXIgLSAxKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3ByZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHNwcmVhZC5jbGFzc05hbWUgPSBcInNwcmVhZFwiO1xuXG4gICAgICBpZiAodGhpcy5pc0luUHJlc2VudGF0aW9uTW9kZSkge1xuICAgICAgICBjb25zdCBkdW1teVBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBkdW1teVBhZ2UuY2xhc3NOYW1lID0gXCJkdW1teVBhZ2VcIjtcbiAgICAgICAgc3ByZWFkLmFwcGVuZENoaWxkKGR1bW15UGFnZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgaSBvZiBwYWdlSW5kZXhTZXQpIHtcbiAgICAgICAgY29uc3QgcGFnZVZpZXcgPSB0aGlzLl9wYWdlc1tpXTtcblxuICAgICAgICBpZiAoIXBhZ2VWaWV3KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBzcHJlYWQuYXBwZW5kQ2hpbGQocGFnZVZpZXcuZGl2KTtcbiAgICAgICAgc3RhdGUucGFnZXMucHVzaChwYWdlVmlldyk7XG4gICAgICB9XG5cbiAgICAgIHZpZXdlci5hcHBlbmRDaGlsZChzcHJlYWQpO1xuICAgIH1cblxuICAgIHN0YXRlLnNjcm9sbERvd24gPSBwYWdlTnVtYmVyID49IHN0YXRlLnByZXZpb3VzUGFnZU51bWJlcjtcbiAgICBzdGF0ZS5wcmV2aW91c1BhZ2VOdW1iZXIgPSBwYWdlTnVtYmVyO1xuICB9XG5cbiAgX3Njcm9sbFVwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5wYWdlc0NvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gICNzY3JvbGxJbnRvVmlldyhwYWdlVmlldywgcGFnZVNwb3QgPSBudWxsKSB7XG4gICAgY29uc3Qge1xuICAgICAgZGl2LFxuICAgICAgaWRcbiAgICB9ID0gcGFnZVZpZXc7XG5cbiAgICBpZiAodGhpcy5fc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuUEFHRSkge1xuICAgICAgdGhpcy5fc2V0Q3VycmVudFBhZ2VOdW1iZXIoaWQpO1xuXG4gICAgICB0aGlzLiNlbnN1cmVQYWdlVmlld1Zpc2libGUoKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgaWYgKCFwYWdlU3BvdCAmJiAhdGhpcy5pc0luUHJlc2VudGF0aW9uTW9kZSkge1xuICAgICAgY29uc3QgbGVmdCA9IGRpdi5vZmZzZXRMZWZ0ICsgZGl2LmNsaWVudExlZnQsXG4gICAgICAgICAgICByaWdodCA9IGxlZnQgKyBkaXYuY2xpZW50V2lkdGg7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNjcm9sbExlZnQsXG4gICAgICAgIGNsaWVudFdpZHRoXG4gICAgICB9ID0gdGhpcy5jb250YWluZXI7XG5cbiAgICAgIGlmICh0aGlzLl9zY3JvbGxNb2RlID09PSBfdWlfdXRpbHMuU2Nyb2xsTW9kZS5IT1JJWk9OVEFMIHx8IGxlZnQgPCBzY3JvbGxMZWZ0IHx8IHJpZ2h0ID4gc2Nyb2xsTGVmdCArIGNsaWVudFdpZHRoKSB7XG4gICAgICAgIHBhZ2VTcG90ID0ge1xuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdG9wOiAwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgKDAsIF91aV91dGlscy5zY3JvbGxJbnRvVmlldykoZGl2LCBwYWdlU3BvdCk7XG4gIH1cblxuICAjaXNTYW1lU2NhbGUobmV3U2NhbGUpIHtcbiAgICByZXR1cm4gbmV3U2NhbGUgPT09IHRoaXMuX2N1cnJlbnRTY2FsZSB8fCBNYXRoLmFicyhuZXdTY2FsZSAtIHRoaXMuX2N1cnJlbnRTY2FsZSkgPCAxZS0xNTtcbiAgfVxuXG4gIF9zZXRTY2FsZVVwZGF0ZVBhZ2VzKG5ld1NjYWxlLCBuZXdWYWx1ZSwgbm9TY3JvbGwgPSBmYWxzZSwgcHJlc2V0ID0gZmFsc2UpIHtcbiAgICB0aGlzLl9jdXJyZW50U2NhbGVWYWx1ZSA9IG5ld1ZhbHVlLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy4jaXNTYW1lU2NhbGUobmV3U2NhbGUpKSB7XG4gICAgICBpZiAocHJlc2V0KSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJzY2FsZWNoYW5naW5nXCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgc2NhbGU6IG5ld1NjYWxlLFxuICAgICAgICAgIHByZXNldFZhbHVlOiBuZXdWYWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RvYy5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tem9vbS1mYWN0b3JcIiwgbmV3U2NhbGUpO1xuXG4gICAgY29uc3QgdXBkYXRlQXJncyA9IHtcbiAgICAgIHNjYWxlOiBuZXdTY2FsZVxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2VWaWV3IG9mIHRoaXMuX3BhZ2VzKSB7XG4gICAgICBwYWdlVmlldy51cGRhdGUodXBkYXRlQXJncyk7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudFNjYWxlID0gbmV3U2NhbGU7XG5cbiAgICBpZiAoIW5vU2Nyb2xsKSB7XG4gICAgICBsZXQgcGFnZSA9IHRoaXMuX2N1cnJlbnRQYWdlTnVtYmVyLFxuICAgICAgICAgIGRlc3Q7XG5cbiAgICAgIGlmICh0aGlzLl9sb2NhdGlvbiAmJiAhKHRoaXMuaXNJblByZXNlbnRhdGlvbk1vZGUgfHwgdGhpcy5pc0NoYW5naW5nUHJlc2VudGF0aW9uTW9kZSkpIHtcbiAgICAgICAgcGFnZSA9IHRoaXMuX2xvY2F0aW9uLnBhZ2VOdW1iZXI7XG4gICAgICAgIGRlc3QgPSBbbnVsbCwge1xuICAgICAgICAgIG5hbWU6IFwiWFlaXCJcbiAgICAgICAgfSwgdGhpcy5fbG9jYXRpb24ubGVmdCwgdGhpcy5fbG9jYXRpb24udG9wLCBudWxsXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zY3JvbGxQYWdlSW50b1ZpZXcoe1xuICAgICAgICBwYWdlTnVtYmVyOiBwYWdlLFxuICAgICAgICBkZXN0QXJyYXk6IGRlc3QsXG4gICAgICAgIGFsbG93TmVnYXRpdmVPZmZzZXQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJzY2FsZWNoYW5naW5nXCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIHNjYWxlOiBuZXdTY2FsZSxcbiAgICAgIHByZXNldFZhbHVlOiBwcmVzZXQgPyBuZXdWYWx1ZSA6IHVuZGVmaW5lZFxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuZGVmYXVsdFJlbmRlcmluZ1F1ZXVlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQ29udGFpbmVySGVpZ2h0Q3NzKCk7XG4gIH1cblxuICBnZXQgX3BhZ2VXaWR0aFNjYWxlRmFjdG9yKCkge1xuICAgIGlmICh0aGlzLl9zcHJlYWRNb2RlICE9PSBfdWlfdXRpbHMuU3ByZWFkTW9kZS5OT05FICYmIHRoaXMuX3Njcm9sbE1vZGUgIT09IF91aV91dGlscy5TY3JvbGxNb2RlLkhPUklaT05UQUwpIHtcbiAgICAgIHJldHVybiAyO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xuICB9XG5cbiAgX3NldFNjYWxlKHZhbHVlLCBub1Njcm9sbCA9IGZhbHNlKSB7XG4gICAgbGV0IHNjYWxlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgICBpZiAoc2NhbGUgPiAwKSB7XG4gICAgICB0aGlzLl9zZXRTY2FsZVVwZGF0ZVBhZ2VzKHNjYWxlLCB2YWx1ZSwgbm9TY3JvbGwsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLl9wYWdlc1t0aGlzLl9jdXJyZW50UGFnZU51bWJlciAtIDFdO1xuXG4gICAgICBpZiAoIWN1cnJlbnRQYWdlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGhQYWRkaW5nID0gX3VpX3V0aWxzLlNDUk9MTEJBUl9QQURESU5HLFxuICAgICAgICAgIHZQYWRkaW5nID0gX3VpX3V0aWxzLlZFUlRJQ0FMX1BBRERJTkc7XG5cbiAgICAgIGlmICh0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlKSB7XG4gICAgICAgIGhQYWRkaW5nID0gdlBhZGRpbmcgPSA0O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnJlbW92ZVBhZ2VCb3JkZXJzKSB7XG4gICAgICAgIGhQYWRkaW5nID0gdlBhZGRpbmcgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9zY3JvbGxNb2RlID09PSBfdWlfdXRpbHMuU2Nyb2xsTW9kZS5IT1JJWk9OVEFMKSB7XG4gICAgICAgIFtoUGFkZGluZywgdlBhZGRpbmddID0gW3ZQYWRkaW5nLCBoUGFkZGluZ107XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhZ2VXaWR0aFNjYWxlID0gKHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoIC0gaFBhZGRpbmcpIC8gY3VycmVudFBhZ2Uud2lkdGggKiBjdXJyZW50UGFnZS5zY2FsZSAvIHRoaXMuX3BhZ2VXaWR0aFNjYWxlRmFjdG9yO1xuICAgICAgY29uc3QgcGFnZUhlaWdodFNjYWxlID0gKHRoaXMuY29udGFpbmVyLmNsaWVudEhlaWdodCAtIHZQYWRkaW5nKSAvIGN1cnJlbnRQYWdlLmhlaWdodCAqIGN1cnJlbnRQYWdlLnNjYWxlO1xuXG4gICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgIGNhc2UgXCJwYWdlLWFjdHVhbFwiOlxuICAgICAgICAgIHNjYWxlID0gMTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwicGFnZS13aWR0aFwiOlxuICAgICAgICAgIHNjYWxlID0gcGFnZVdpZHRoU2NhbGU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInBhZ2UtaGVpZ2h0XCI6XG4gICAgICAgICAgc2NhbGUgPSBwYWdlSGVpZ2h0U2NhbGU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInBhZ2UtZml0XCI6XG4gICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihwYWdlV2lkdGhTY2FsZSwgcGFnZUhlaWdodFNjYWxlKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiYXV0b1wiOlxuICAgICAgICAgIGNvbnN0IGhvcml6b250YWxTY2FsZSA9ICgwLCBfdWlfdXRpbHMuaXNQb3J0cmFpdE9yaWVudGF0aW9uKShjdXJyZW50UGFnZSkgPyBwYWdlV2lkdGhTY2FsZSA6IE1hdGgubWluKHBhZ2VIZWlnaHRTY2FsZSwgcGFnZVdpZHRoU2NhbGUpO1xuICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oX3VpX3V0aWxzLk1BWF9BVVRPX1NDQUxFLCBob3Jpem9udGFsU2NhbGUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgX3NldFNjYWxlOiBcIiR7dmFsdWV9XCIgaXMgYW4gdW5rbm93biB6b29tIHZhbHVlLmApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2V0U2NhbGVVcGRhdGVQYWdlcyhzY2FsZSwgdmFsdWUsIG5vU2Nyb2xsLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAjcmVzZXRDdXJyZW50UGFnZVZpZXcoKSB7XG4gICAgY29uc3QgcGFnZVZpZXcgPSB0aGlzLl9wYWdlc1t0aGlzLl9jdXJyZW50UGFnZU51bWJlciAtIDFdO1xuXG4gICAgaWYgKHRoaXMuaXNJblByZXNlbnRhdGlvbk1vZGUpIHtcbiAgICAgIHRoaXMuX3NldFNjYWxlKHRoaXMuX2N1cnJlbnRTY2FsZVZhbHVlLCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLiNzY3JvbGxJbnRvVmlldyhwYWdlVmlldyk7XG4gIH1cblxuICBwYWdlTGFiZWxUb1BhZ2VOdW1iZXIobGFiZWwpIHtcbiAgICBpZiAoIXRoaXMuX3BhZ2VMYWJlbHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGkgPSB0aGlzLl9wYWdlTGFiZWxzLmluZGV4T2YobGFiZWwpO1xuXG4gICAgaWYgKGkgPCAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gaSArIDE7XG4gIH1cblxuICBzY3JvbGxQYWdlSW50b1ZpZXcoe1xuICAgIHBhZ2VOdW1iZXIsXG4gICAgZGVzdEFycmF5ID0gbnVsbCxcbiAgICBhbGxvd05lZ2F0aXZlT2Zmc2V0ID0gZmFsc2UsXG4gICAgaWdub3JlRGVzdGluYXRpb25ab29tID0gZmFsc2VcbiAgfSkge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VWaWV3ID0gTnVtYmVyLmlzSW50ZWdlcihwYWdlTnVtYmVyKSAmJiB0aGlzLl9wYWdlc1twYWdlTnVtYmVyIC0gMV07XG5cbiAgICBpZiAoIXBhZ2VWaWV3KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBzY3JvbGxQYWdlSW50b1ZpZXc6IFwiJHtwYWdlTnVtYmVyfVwiIGlzIG5vdCBhIHZhbGlkIHBhZ2VOdW1iZXIgcGFyYW1ldGVyLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlIHx8ICFkZXN0QXJyYXkpIHtcbiAgICAgIHRoaXMuX3NldEN1cnJlbnRQYWdlTnVtYmVyKHBhZ2VOdW1iZXIsIHRydWUpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHggPSAwLFxuICAgICAgICB5ID0gMDtcbiAgICBsZXQgd2lkdGggPSAwLFxuICAgICAgICBoZWlnaHQgPSAwLFxuICAgICAgICB3aWR0aFNjYWxlLFxuICAgICAgICBoZWlnaHRTY2FsZTtcbiAgICBjb25zdCBjaGFuZ2VPcmllbnRhdGlvbiA9IHBhZ2VWaWV3LnJvdGF0aW9uICUgMTgwICE9PSAwO1xuICAgIGNvbnN0IHBhZ2VXaWR0aCA9IChjaGFuZ2VPcmllbnRhdGlvbiA/IHBhZ2VWaWV3LmhlaWdodCA6IHBhZ2VWaWV3LndpZHRoKSAvIHBhZ2VWaWV3LnNjYWxlIC8gX3BkZmpzTGliLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUztcbiAgICBjb25zdCBwYWdlSGVpZ2h0ID0gKGNoYW5nZU9yaWVudGF0aW9uID8gcGFnZVZpZXcud2lkdGggOiBwYWdlVmlldy5oZWlnaHQpIC8gcGFnZVZpZXcuc2NhbGUgLyBfcGRmanNMaWIuUGl4ZWxzUGVySW5jaC5QREZfVE9fQ1NTX1VOSVRTO1xuICAgIGxldCBzY2FsZSA9IDA7XG5cbiAgICBzd2l0Y2ggKGRlc3RBcnJheVsxXS5uYW1lKSB7XG4gICAgICBjYXNlIFwiWFlaXCI6XG4gICAgICAgIHggPSBkZXN0QXJyYXlbMl07XG4gICAgICAgIHkgPSBkZXN0QXJyYXlbM107XG4gICAgICAgIHNjYWxlID0gZGVzdEFycmF5WzRdO1xuICAgICAgICB4ID0geCAhPT0gbnVsbCA/IHggOiAwO1xuICAgICAgICB5ID0geSAhPT0gbnVsbCA/IHkgOiBwYWdlSGVpZ2h0O1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcIkZpdFwiOlxuICAgICAgY2FzZSBcIkZpdEJcIjpcbiAgICAgICAgc2NhbGUgPSBcInBhZ2UtZml0XCI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiRml0SFwiOlxuICAgICAgY2FzZSBcIkZpdEJIXCI6XG4gICAgICAgIHkgPSBkZXN0QXJyYXlbMl07XG4gICAgICAgIHNjYWxlID0gXCJwYWdlLXdpZHRoXCI7XG5cbiAgICAgICAgaWYgKHkgPT09IG51bGwgJiYgdGhpcy5fbG9jYXRpb24pIHtcbiAgICAgICAgICB4ID0gdGhpcy5fbG9jYXRpb24ubGVmdDtcbiAgICAgICAgICB5ID0gdGhpcy5fbG9jYXRpb24udG9wO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB5ICE9PSBcIm51bWJlclwiIHx8IHkgPCAwKSB7XG4gICAgICAgICAgeSA9IHBhZ2VIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcIkZpdFZcIjpcbiAgICAgIGNhc2UgXCJGaXRCVlwiOlxuICAgICAgICB4ID0gZGVzdEFycmF5WzJdO1xuICAgICAgICB3aWR0aCA9IHBhZ2VXaWR0aDtcbiAgICAgICAgaGVpZ2h0ID0gcGFnZUhlaWdodDtcbiAgICAgICAgc2NhbGUgPSBcInBhZ2UtaGVpZ2h0XCI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiRml0UlwiOlxuICAgICAgICB4ID0gZGVzdEFycmF5WzJdO1xuICAgICAgICB5ID0gZGVzdEFycmF5WzNdO1xuICAgICAgICB3aWR0aCA9IGRlc3RBcnJheVs0XSAtIHg7XG4gICAgICAgIGhlaWdodCA9IGRlc3RBcnJheVs1XSAtIHk7XG4gICAgICAgIGNvbnN0IGhQYWRkaW5nID0gdGhpcy5yZW1vdmVQYWdlQm9yZGVycyA/IDAgOiBfdWlfdXRpbHMuU0NST0xMQkFSX1BBRERJTkc7XG4gICAgICAgIGNvbnN0IHZQYWRkaW5nID0gdGhpcy5yZW1vdmVQYWdlQm9yZGVycyA/IDAgOiBfdWlfdXRpbHMuVkVSVElDQUxfUEFERElORztcbiAgICAgICAgd2lkdGhTY2FsZSA9ICh0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aCAtIGhQYWRkaW5nKSAvIHdpZHRoIC8gX3BkZmpzTGliLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUztcbiAgICAgICAgaGVpZ2h0U2NhbGUgPSAodGhpcy5jb250YWluZXIuY2xpZW50SGVpZ2h0IC0gdlBhZGRpbmcpIC8gaGVpZ2h0IC8gX3BkZmpzTGliLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUztcbiAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihNYXRoLmFicyh3aWR0aFNjYWxlKSwgTWF0aC5hYnMoaGVpZ2h0U2NhbGUpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYHNjcm9sbFBhZ2VJbnRvVmlldzogXCIke2Rlc3RBcnJheVsxXS5uYW1lfVwiIGlzIG5vdCBhIHZhbGlkIGRlc3RpbmF0aW9uIHR5cGUuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlnbm9yZURlc3RpbmF0aW9uWm9vbSkge1xuICAgICAgaWYgKHNjYWxlICYmIHNjYWxlICE9PSB0aGlzLl9jdXJyZW50U2NhbGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U2NhbGVWYWx1ZSA9IHNjYWxlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9jdXJyZW50U2NhbGUgPT09IF91aV91dGlscy5VTktOT1dOX1NDQUxFKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFNjYWxlVmFsdWUgPSBfdWlfdXRpbHMuREVGQVVMVF9TQ0FMRV9WQUxVRTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2NhbGUgPT09IFwicGFnZS1maXRcIiAmJiAhZGVzdEFycmF5WzRdKSB7XG4gICAgICB0aGlzLiNzY3JvbGxJbnRvVmlldyhwYWdlVmlldyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gW3BhZ2VWaWV3LnZpZXdwb3J0LmNvbnZlcnRUb1ZpZXdwb3J0UG9pbnQoeCwgeSksIHBhZ2VWaWV3LnZpZXdwb3J0LmNvbnZlcnRUb1ZpZXdwb3J0UG9pbnQoeCArIHdpZHRoLCB5ICsgaGVpZ2h0KV07XG4gICAgbGV0IGxlZnQgPSBNYXRoLm1pbihib3VuZGluZ1JlY3RbMF1bMF0sIGJvdW5kaW5nUmVjdFsxXVswXSk7XG4gICAgbGV0IHRvcCA9IE1hdGgubWluKGJvdW5kaW5nUmVjdFswXVsxXSwgYm91bmRpbmdSZWN0WzFdWzFdKTtcblxuICAgIGlmICghYWxsb3dOZWdhdGl2ZU9mZnNldCkge1xuICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIDApO1xuICAgICAgdG9wID0gTWF0aC5tYXgodG9wLCAwKTtcbiAgICB9XG5cbiAgICB0aGlzLiNzY3JvbGxJbnRvVmlldyhwYWdlVmlldywge1xuICAgICAgbGVmdCxcbiAgICAgIHRvcFxuICAgIH0pO1xuICB9XG5cbiAgX3VwZGF0ZUxvY2F0aW9uKGZpcnN0UGFnZSkge1xuICAgIGNvbnN0IGN1cnJlbnRTY2FsZSA9IHRoaXMuX2N1cnJlbnRTY2FsZTtcbiAgICBjb25zdCBjdXJyZW50U2NhbGVWYWx1ZSA9IHRoaXMuX2N1cnJlbnRTY2FsZVZhbHVlO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTY2FsZVZhbHVlID0gcGFyc2VGbG9hdChjdXJyZW50U2NhbGVWYWx1ZSkgPT09IGN1cnJlbnRTY2FsZSA/IE1hdGgucm91bmQoY3VycmVudFNjYWxlICogMTAwMDApIC8gMTAwIDogY3VycmVudFNjYWxlVmFsdWU7XG4gICAgY29uc3QgcGFnZU51bWJlciA9IGZpcnN0UGFnZS5pZDtcbiAgICBjb25zdCBjdXJyZW50UGFnZVZpZXcgPSB0aGlzLl9wYWdlc1twYWdlTnVtYmVyIC0gMV07XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG4gICAgY29uc3QgdG9wTGVmdCA9IGN1cnJlbnRQYWdlVmlldy5nZXRQYWdlUG9pbnQoY29udGFpbmVyLnNjcm9sbExlZnQgLSBmaXJzdFBhZ2UueCwgY29udGFpbmVyLnNjcm9sbFRvcCAtIGZpcnN0UGFnZS55KTtcbiAgICBjb25zdCBpbnRMZWZ0ID0gTWF0aC5yb3VuZCh0b3BMZWZ0WzBdKTtcbiAgICBjb25zdCBpbnRUb3AgPSBNYXRoLnJvdW5kKHRvcExlZnRbMV0pO1xuICAgIGxldCBwZGZPcGVuUGFyYW1zID0gYCNwYWdlPSR7cGFnZU51bWJlcn1gO1xuXG4gICAgaWYgKCF0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlKSB7XG4gICAgICBwZGZPcGVuUGFyYW1zICs9IGAmem9vbT0ke25vcm1hbGl6ZWRTY2FsZVZhbHVlfSwke2ludExlZnR9LCR7aW50VG9wfWA7XG4gICAgfVxuXG4gICAgdGhpcy5fbG9jYXRpb24gPSB7XG4gICAgICBwYWdlTnVtYmVyLFxuICAgICAgc2NhbGU6IG5vcm1hbGl6ZWRTY2FsZVZhbHVlLFxuICAgICAgdG9wOiBpbnRUb3AsXG4gICAgICBsZWZ0OiBpbnRMZWZ0LFxuICAgICAgcm90YXRpb246IHRoaXMuX3BhZ2VzUm90YXRpb24sXG4gICAgICBwZGZPcGVuUGFyYW1zXG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5fZ2V0VmlzaWJsZVBhZ2VzKCk7XG5cbiAgICBjb25zdCB2aXNpYmxlUGFnZXMgPSB2aXNpYmxlLnZpZXdzLFxuICAgICAgICAgIG51bVZpc2libGVQYWdlcyA9IHZpc2libGVQYWdlcy5sZW5ndGg7XG5cbiAgICBpZiAobnVtVmlzaWJsZVBhZ2VzID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3Q2FjaGVTaXplID0gTWF0aC5tYXgoREVGQVVMVF9DQUNIRV9TSVpFLCAyICogbnVtVmlzaWJsZVBhZ2VzICsgMSk7XG4gICAgdGhpcy4jYnVmZmVyLnJlc2l6ZShuZXdDYWNoZVNpemUsIHZpc2libGUuaWRzKTtcbiAgICB0aGlzLnJlbmRlcmluZ1F1ZXVlLnJlbmRlckhpZ2hlc3RQcmlvcml0eSh2aXNpYmxlKTtcbiAgICBjb25zdCBpc1NpbXBsZUxheW91dCA9IHRoaXMuX3NwcmVhZE1vZGUgPT09IF91aV91dGlscy5TcHJlYWRNb2RlLk5PTkUgJiYgKHRoaXMuX3Njcm9sbE1vZGUgPT09IF91aV91dGlscy5TY3JvbGxNb2RlLlBBR0UgfHwgdGhpcy5fc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuVkVSVElDQUwpO1xuICAgIGNvbnN0IGN1cnJlbnRJZCA9IHRoaXMuX2N1cnJlbnRQYWdlTnVtYmVyO1xuICAgIGxldCBzdGlsbEZ1bGx5VmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHZpc2libGVQYWdlcykge1xuICAgICAgaWYgKHBhZ2UucGVyY2VudCA8IDEwMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKHBhZ2UuaWQgPT09IGN1cnJlbnRJZCAmJiBpc1NpbXBsZUxheW91dCkge1xuICAgICAgICBzdGlsbEZ1bGx5VmlzaWJsZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3NldEN1cnJlbnRQYWdlTnVtYmVyKHN0aWxsRnVsbHlWaXNpYmxlID8gY3VycmVudElkIDogdmlzaWJsZVBhZ2VzWzBdLmlkKTtcblxuICAgIHRoaXMuX3VwZGF0ZUxvY2F0aW9uKHZpc2libGUuZmlyc3QpO1xuXG4gICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcInVwZGF0ZXZpZXdhcmVhXCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLl9sb2NhdGlvblxuICAgIH0pO1xuICB9XG5cbiAgY29udGFpbnNFbGVtZW50KGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIuY29udGFpbnMoZWxlbWVudCk7XG4gIH1cblxuICBmb2N1cygpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5mb2N1cygpO1xuICB9XG5cbiAgZ2V0IF9pc0NvbnRhaW5lclJ0bCgpIHtcbiAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRhaW5lcikuZGlyZWN0aW9uID09PSBcInJ0bFwiO1xuICB9XG5cbiAgZ2V0IGlzSW5QcmVzZW50YXRpb25Nb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnByZXNlbnRhdGlvbk1vZGVTdGF0ZSA9PT0gX3VpX3V0aWxzLlByZXNlbnRhdGlvbk1vZGVTdGF0ZS5GVUxMU0NSRUVOO1xuICB9XG5cbiAgZ2V0IGlzQ2hhbmdpbmdQcmVzZW50YXRpb25Nb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnByZXNlbnRhdGlvbk1vZGVTdGF0ZSA9PT0gX3VpX3V0aWxzLlByZXNlbnRhdGlvbk1vZGVTdGF0ZS5DSEFOR0lORztcbiAgfVxuXG4gIGdldCBpc0hvcml6b250YWxTY3JvbGxiYXJFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlID8gZmFsc2UgOiB0aGlzLmNvbnRhaW5lci5zY3JvbGxXaWR0aCA+IHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICB9XG5cbiAgZ2V0IGlzVmVydGljYWxTY3JvbGxiYXJFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlID8gZmFsc2UgOiB0aGlzLmNvbnRhaW5lci5zY3JvbGxIZWlnaHQgPiB0aGlzLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gIH1cblxuICBfZ2V0VmlzaWJsZVBhZ2VzKCkge1xuICAgIGNvbnN0IHZpZXdzID0gdGhpcy5fc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuUEFHRSA/IHRoaXMuI3Njcm9sbE1vZGVQYWdlU3RhdGUucGFnZXMgOiB0aGlzLl9wYWdlcyxcbiAgICAgICAgICBob3Jpem9udGFsID0gdGhpcy5fc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuSE9SSVpPTlRBTCxcbiAgICAgICAgICBydGwgPSBob3Jpem9udGFsICYmIHRoaXMuX2lzQ29udGFpbmVyUnRsO1xuICAgIHJldHVybiAoMCwgX3VpX3V0aWxzLmdldFZpc2libGVFbGVtZW50cykoe1xuICAgICAgc2Nyb2xsRWw6IHRoaXMuY29udGFpbmVyLFxuICAgICAgdmlld3MsXG4gICAgICBzb3J0QnlWaXNpYmlsaXR5OiB0cnVlLFxuICAgICAgaG9yaXpvbnRhbCxcbiAgICAgIHJ0bFxuICAgIH0pO1xuICB9XG5cbiAgaXNQYWdlVmlzaWJsZShwYWdlTnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLnBkZkRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCEoTnVtYmVyLmlzSW50ZWdlcihwYWdlTnVtYmVyKSAmJiBwYWdlTnVtYmVyID4gMCAmJiBwYWdlTnVtYmVyIDw9IHRoaXMucGFnZXNDb3VudCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYGlzUGFnZVZpc2libGU6IFwiJHtwYWdlTnVtYmVyfVwiIGlzIG5vdCBhIHZhbGlkIHBhZ2UuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dldFZpc2libGVQYWdlcygpLmlkcy5oYXMocGFnZU51bWJlcik7XG4gIH1cblxuICBpc1BhZ2VDYWNoZWQocGFnZU51bWJlcikge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghKE51bWJlci5pc0ludGVnZXIocGFnZU51bWJlcikgJiYgcGFnZU51bWJlciA+IDAgJiYgcGFnZU51bWJlciA8PSB0aGlzLnBhZ2VzQ291bnQpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBpc1BhZ2VDYWNoZWQ6IFwiJHtwYWdlTnVtYmVyfVwiIGlzIG5vdCBhIHZhbGlkIHBhZ2UuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZVZpZXcgPSB0aGlzLl9wYWdlc1twYWdlTnVtYmVyIC0gMV07XG4gICAgcmV0dXJuIHRoaXMuI2J1ZmZlci5oYXMocGFnZVZpZXcpO1xuICB9XG5cbiAgY2xlYW51cCgpIHtcbiAgICBmb3IgKGNvbnN0IHBhZ2VWaWV3IG9mIHRoaXMuX3BhZ2VzKSB7XG4gICAgICBpZiAocGFnZVZpZXcucmVuZGVyaW5nU3RhdGUgIT09IF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuRklOSVNIRUQpIHtcbiAgICAgICAgcGFnZVZpZXcucmVzZXQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfY2FuY2VsUmVuZGVyaW5nKCkge1xuICAgIGZvciAoY29uc3QgcGFnZVZpZXcgb2YgdGhpcy5fcGFnZXMpIHtcbiAgICAgIHBhZ2VWaWV3LmNhbmNlbFJlbmRlcmluZygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICNlbnN1cmVQZGZQYWdlTG9hZGVkKHBhZ2VWaWV3KSB7XG4gICAgaWYgKHBhZ2VWaWV3LnBkZlBhZ2UpIHtcbiAgICAgIHJldHVybiBwYWdlVmlldy5wZGZQYWdlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwZGZQYWdlID0gYXdhaXQgdGhpcy5wZGZEb2N1bWVudC5nZXRQYWdlKHBhZ2VWaWV3LmlkKTtcblxuICAgICAgaWYgKCFwYWdlVmlldy5wZGZQYWdlKSB7XG4gICAgICAgIHBhZ2VWaWV3LnNldFBkZlBhZ2UocGRmUGFnZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5saW5rU2VydmljZS5fY2FjaGVkUGFnZU51bWJlcj8uKHBkZlBhZ2UucmVmKSkge1xuICAgICAgICB0aGlzLmxpbmtTZXJ2aWNlLmNhY2hlUGFnZVJlZihwYWdlVmlldy5pZCwgcGRmUGFnZS5yZWYpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGRmUGFnZTtcbiAgICB9IGNhdGNoIChyZWFzb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gZ2V0IHBhZ2UgZm9yIHBhZ2Ugdmlld1wiLCByZWFzb24pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgI2dldFNjcm9sbEFoZWFkKHZpc2libGUpIHtcbiAgICBpZiAodmlzaWJsZS5maXJzdD8uaWQgPT09IDEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodmlzaWJsZS5sYXN0Py5pZCA9PT0gdGhpcy5wYWdlc0NvdW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLl9zY3JvbGxNb2RlKSB7XG4gICAgICBjYXNlIF91aV91dGlscy5TY3JvbGxNb2RlLlBBR0U6XG4gICAgICAgIHJldHVybiB0aGlzLiNzY3JvbGxNb2RlUGFnZVN0YXRlLnNjcm9sbERvd247XG5cbiAgICAgIGNhc2UgX3VpX3V0aWxzLlNjcm9sbE1vZGUuSE9SSVpPTlRBTDpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsLnJpZ2h0O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNjcm9sbC5kb3duO1xuICB9XG5cbiAgI3RvZ2dsZUxvYWRpbmdJY29uU3Bpbm5lcih2aXNpYmxlSWRzKSB7XG4gICAgZm9yIChjb25zdCBpZCBvZiB2aXNpYmxlSWRzKSB7XG4gICAgICBjb25zdCBwYWdlVmlldyA9IHRoaXMuX3BhZ2VzW2lkIC0gMV07XG4gICAgICBwYWdlVmlldz8udG9nZ2xlTG9hZGluZ0ljb25TcGlubmVyKHRydWUpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcGFnZVZpZXcgb2YgdGhpcy4jYnVmZmVyKSB7XG4gICAgICBpZiAodmlzaWJsZUlkcy5oYXMocGFnZVZpZXcuaWQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBwYWdlVmlldy50b2dnbGVMb2FkaW5nSWNvblNwaW5uZXIoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGZvcmNlUmVuZGVyaW5nKGN1cnJlbnRseVZpc2libGVQYWdlcykge1xuICAgIGNvbnN0IHZpc2libGVQYWdlcyA9IGN1cnJlbnRseVZpc2libGVQYWdlcyB8fCB0aGlzLl9nZXRWaXNpYmxlUGFnZXMoKTtcblxuICAgIGNvbnN0IHNjcm9sbEFoZWFkID0gdGhpcy4jZ2V0U2Nyb2xsQWhlYWQodmlzaWJsZVBhZ2VzKTtcbiAgICBjb25zdCBwcmVSZW5kZXJFeHRyYSA9IHRoaXMuX3NwcmVhZE1vZGUgIT09IF91aV91dGlscy5TcHJlYWRNb2RlLk5PTkUgJiYgdGhpcy5fc2Nyb2xsTW9kZSAhPT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuSE9SSVpPTlRBTDtcbiAgICBjb25zdCBwYWdlVmlldyA9IHRoaXMucmVuZGVyaW5nUXVldWUuZ2V0SGlnaGVzdFByaW9yaXR5KHZpc2libGVQYWdlcywgdGhpcy5fcGFnZXMsIHNjcm9sbEFoZWFkLCBwcmVSZW5kZXJFeHRyYSk7XG4gICAgdGhpcy4jdG9nZ2xlTG9hZGluZ0ljb25TcGlubmVyKHZpc2libGVQYWdlcy5pZHMpO1xuXG4gICAgaWYgKHBhZ2VWaWV3KSB7XG4gICAgICB0aGlzLiNlbnN1cmVQZGZQYWdlTG9hZGVkKHBhZ2VWaWV3KS50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdRdWV1ZS5yZW5kZXJWaWV3KHBhZ2VWaWV3KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY3JlYXRlVGV4dExheWVyQnVpbGRlcih0ZXh0TGF5ZXJEaXYsIHBhZ2VJbmRleCwgdmlld3BvcnQsIGVuaGFuY2VUZXh0U2VsZWN0aW9uID0gZmFsc2UsIGV2ZW50QnVzLCBoaWdobGlnaHRlcikge1xuICAgIHJldHVybiBuZXcgX3RleHRfbGF5ZXJfYnVpbGRlci5UZXh0TGF5ZXJCdWlsZGVyKHtcbiAgICAgIHRleHRMYXllckRpdixcbiAgICAgIGV2ZW50QnVzLFxuICAgICAgcGFnZUluZGV4LFxuICAgICAgdmlld3BvcnQsXG4gICAgICBlbmhhbmNlVGV4dFNlbGVjdGlvbjogdGhpcy5pc0luUHJlc2VudGF0aW9uTW9kZSA/IGZhbHNlIDogZW5oYW5jZVRleHRTZWxlY3Rpb24sXG4gICAgICBoaWdobGlnaHRlclxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlVGV4dEhpZ2hsaWdodGVyKHBhZ2VJbmRleCwgZXZlbnRCdXMpIHtcbiAgICByZXR1cm4gbmV3IF90ZXh0X2hpZ2hsaWdodGVyLlRleHRIaWdobGlnaHRlcih7XG4gICAgICBldmVudEJ1cyxcbiAgICAgIHBhZ2VJbmRleCxcbiAgICAgIGZpbmRDb250cm9sbGVyOiB0aGlzLmlzSW5QcmVzZW50YXRpb25Nb2RlID8gbnVsbCA6IHRoaXMuZmluZENvbnRyb2xsZXJcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUFubm90YXRpb25MYXllckJ1aWxkZXIocGFnZURpdiwgcGRmUGFnZSwgYW5ub3RhdGlvblN0b3JhZ2UgPSBudWxsLCBpbWFnZVJlc291cmNlc1BhdGggPSBcIlwiLCByZW5kZXJGb3JtcyA9IHRydWUsIGwxMG4gPSBfbDEwbl91dGlscy5OdWxsTDEwbiwgZW5hYmxlU2NyaXB0aW5nID0gbnVsbCwgaGFzSlNBY3Rpb25zUHJvbWlzZSA9IG51bGwsIG1vdXNlU3RhdGUgPSBudWxsLCBmaWVsZE9iamVjdHNQcm9taXNlID0gbnVsbCwgYW5ub3RhdGlvbkNhbnZhc01hcCA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IF9hbm5vdGF0aW9uX2xheWVyX2J1aWxkZXIuQW5ub3RhdGlvbkxheWVyQnVpbGRlcih7XG4gICAgICBwYWdlRGl2LFxuICAgICAgcGRmUGFnZSxcbiAgICAgIGFubm90YXRpb25TdG9yYWdlOiBhbm5vdGF0aW9uU3RvcmFnZSB8fCB0aGlzLnBkZkRvY3VtZW50Py5hbm5vdGF0aW9uU3RvcmFnZSxcbiAgICAgIGltYWdlUmVzb3VyY2VzUGF0aCxcbiAgICAgIHJlbmRlckZvcm1zLFxuICAgICAgbGlua1NlcnZpY2U6IHRoaXMubGlua1NlcnZpY2UsXG4gICAgICBkb3dubG9hZE1hbmFnZXI6IHRoaXMuZG93bmxvYWRNYW5hZ2VyLFxuICAgICAgbDEwbixcbiAgICAgIGVuYWJsZVNjcmlwdGluZzogZW5hYmxlU2NyaXB0aW5nID8/IHRoaXMuZW5hYmxlU2NyaXB0aW5nLFxuICAgICAgaGFzSlNBY3Rpb25zUHJvbWlzZTogaGFzSlNBY3Rpb25zUHJvbWlzZSB8fCB0aGlzLnBkZkRvY3VtZW50Py5oYXNKU0FjdGlvbnMoKSxcbiAgICAgIGZpZWxkT2JqZWN0c1Byb21pc2U6IGZpZWxkT2JqZWN0c1Byb21pc2UgfHwgdGhpcy5wZGZEb2N1bWVudD8uZ2V0RmllbGRPYmplY3RzKCksXG4gICAgICBtb3VzZVN0YXRlOiBtb3VzZVN0YXRlIHx8IHRoaXMuX3NjcmlwdGluZ01hbmFnZXI/Lm1vdXNlU3RhdGUsXG4gICAgICBhbm5vdGF0aW9uQ2FudmFzTWFwXG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVYZmFMYXllckJ1aWxkZXIocGFnZURpdiwgcGRmUGFnZSwgYW5ub3RhdGlvblN0b3JhZ2UgPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBfeGZhX2xheWVyX2J1aWxkZXIuWGZhTGF5ZXJCdWlsZGVyKHtcbiAgICAgIHBhZ2VEaXYsXG4gICAgICBwZGZQYWdlLFxuICAgICAgYW5ub3RhdGlvblN0b3JhZ2U6IGFubm90YXRpb25TdG9yYWdlIHx8IHRoaXMucGRmRG9jdW1lbnQ/LmFubm90YXRpb25TdG9yYWdlLFxuICAgICAgbGlua1NlcnZpY2U6IHRoaXMubGlua1NlcnZpY2VcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVN0cnVjdFRyZWVMYXllckJ1aWxkZXIocGRmUGFnZSkge1xuICAgIHJldHVybiBuZXcgX3N0cnVjdF90cmVlX2xheWVyX2J1aWxkZXIuU3RydWN0VHJlZUxheWVyQnVpbGRlcih7XG4gICAgICBwZGZQYWdlXG4gICAgfSk7XG4gIH1cblxuICBnZXQgaGFzRXF1YWxQYWdlU2l6ZXMoKSB7XG4gICAgY29uc3QgZmlyc3RQYWdlVmlldyA9IHRoaXMuX3BhZ2VzWzBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDEsIGlpID0gdGhpcy5fcGFnZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgcGFnZVZpZXcgPSB0aGlzLl9wYWdlc1tpXTtcblxuICAgICAgaWYgKHBhZ2VWaWV3LndpZHRoICE9PSBmaXJzdFBhZ2VWaWV3LndpZHRoIHx8IHBhZ2VWaWV3LmhlaWdodCAhPT0gZmlyc3RQYWdlVmlldy5oZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0UGFnZXNPdmVydmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZXMubWFwKHBhZ2VWaWV3ID0+IHtcbiAgICAgIGNvbnN0IHZpZXdwb3J0ID0gcGFnZVZpZXcucGRmUGFnZS5nZXRWaWV3cG9ydCh7XG4gICAgICAgIHNjYWxlOiAxXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0aGlzLmVuYWJsZVByaW50QXV0b1JvdGF0ZSB8fCAoMCwgX3VpX3V0aWxzLmlzUG9ydHJhaXRPcmllbnRhdGlvbikodmlld3BvcnQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2lkdGg6IHZpZXdwb3J0LndpZHRoLFxuICAgICAgICAgIGhlaWdodDogdmlld3BvcnQuaGVpZ2h0LFxuICAgICAgICAgIHJvdGF0aW9uOiB2aWV3cG9ydC5yb3RhdGlvblxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogdmlld3BvcnQuaGVpZ2h0LFxuICAgICAgICBoZWlnaHQ6IHZpZXdwb3J0LndpZHRoLFxuICAgICAgICByb3RhdGlvbjogKHZpZXdwb3J0LnJvdGF0aW9uIC0gOTApICUgMzYwXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0IG9wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UoKSB7XG4gICAgaWYgKCF0aGlzLnBkZkRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSkge1xuICAgICAgcmV0dXJuIHRoaXMucGRmRG9jdW1lbnQuZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2U7XG4gIH1cblxuICBzZXQgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZShwcm9taXNlKSB7XG4gICAgaWYgKCEocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZTogJHtwcm9taXNlfWApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX29wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UgPSBwcm9taXNlO1xuICAgIGNvbnN0IHVwZGF0ZUFyZ3MgPSB7XG4gICAgICBvcHRpb25hbENvbnRlbnRDb25maWdQcm9taXNlOiBwcm9taXNlXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgcGFnZVZpZXcgb2YgdGhpcy5fcGFnZXMpIHtcbiAgICAgIHBhZ2VWaWV3LnVwZGF0ZSh1cGRhdGVBcmdzKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIHRoaXMuZXZlbnRCdXMuZGlzcGF0Y2goXCJvcHRpb25hbGNvbnRlbnRjb25maWdjaGFuZ2VkXCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIHByb21pc2VcbiAgICB9KTtcbiAgfVxuXG4gIGdldCBzY3JvbGxNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9zY3JvbGxNb2RlO1xuICB9XG5cbiAgc2V0IHNjcm9sbE1vZGUobW9kZSkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxNb2RlID09PSBtb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCEoMCwgX3VpX3V0aWxzLmlzVmFsaWRTY3JvbGxNb2RlKShtb2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNjcm9sbCBtb2RlOiAke21vZGV9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFnZXNDb3VudCA+IFBhZ2VzQ291bnRMaW1pdC5GT1JDRV9TQ1JPTExfTU9ERV9QQUdFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcHJldmlvdXNTY3JvbGxNb2RlID0gdGhpcy5fc2Nyb2xsTW9kZTtcbiAgICB0aGlzLl9zY3JvbGxNb2RlID0gbW9kZTtcbiAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwic2Nyb2xsbW9kZWNoYW5nZWRcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgbW9kZVxuICAgIH0pO1xuXG4gICAgdGhpcy5fdXBkYXRlU2Nyb2xsTW9kZSh0aGlzLl9jdXJyZW50UGFnZU51bWJlcik7XG4gIH1cblxuICBfdXBkYXRlU2Nyb2xsTW9kZShwYWdlTnVtYmVyID0gbnVsbCkge1xuICAgIGNvbnN0IHNjcm9sbE1vZGUgPSB0aGlzLl9zY3JvbGxNb2RlLFxuICAgICAgICAgIHZpZXdlciA9IHRoaXMudmlld2VyO1xuICAgIHZpZXdlci5jbGFzc0xpc3QudG9nZ2xlKFwic2Nyb2xsSG9yaXpvbnRhbFwiLCBzY3JvbGxNb2RlID09PSBfdWlfdXRpbHMuU2Nyb2xsTW9kZS5IT1JJWk9OVEFMKTtcbiAgICB2aWV3ZXIuY2xhc3NMaXN0LnRvZ2dsZShcInNjcm9sbFdyYXBwZWRcIiwgc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuV1JBUFBFRCk7XG5cbiAgICBpZiAoIXRoaXMucGRmRG9jdW1lbnQgfHwgIXBhZ2VOdW1iZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuUEFHRSkge1xuICAgICAgdGhpcy4jZW5zdXJlUGFnZVZpZXdWaXNpYmxlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9wcmV2aW91c1Njcm9sbE1vZGUgPT09IF91aV91dGlscy5TY3JvbGxNb2RlLlBBR0UpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVNwcmVhZE1vZGUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY3VycmVudFNjYWxlVmFsdWUgJiYgaXNOYU4odGhpcy5fY3VycmVudFNjYWxlVmFsdWUpKSB7XG4gICAgICB0aGlzLl9zZXRTY2FsZSh0aGlzLl9jdXJyZW50U2NhbGVWYWx1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0Q3VycmVudFBhZ2VOdW1iZXIocGFnZU51bWJlciwgdHJ1ZSk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgZ2V0IHNwcmVhZE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NwcmVhZE1vZGU7XG4gIH1cblxuICBzZXQgc3ByZWFkTW9kZShtb2RlKSB7XG4gICAgaWYgKHRoaXMuX3NwcmVhZE1vZGUgPT09IG1vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoISgwLCBfdWlfdXRpbHMuaXNWYWxpZFNwcmVhZE1vZGUpKG1vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3ByZWFkIG1vZGU6ICR7bW9kZX1gKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zcHJlYWRNb2RlID0gbW9kZTtcbiAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwic3ByZWFkbW9kZWNoYW5nZWRcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgbW9kZVxuICAgIH0pO1xuXG4gICAgdGhpcy5fdXBkYXRlU3ByZWFkTW9kZSh0aGlzLl9jdXJyZW50UGFnZU51bWJlcik7XG4gIH1cblxuICBfdXBkYXRlU3ByZWFkTW9kZShwYWdlTnVtYmVyID0gbnVsbCkge1xuICAgIGlmICghdGhpcy5wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXdlciA9IHRoaXMudmlld2VyLFxuICAgICAgICAgIHBhZ2VzID0gdGhpcy5fcGFnZXM7XG5cbiAgICBpZiAodGhpcy5fc2Nyb2xsTW9kZSA9PT0gX3VpX3V0aWxzLlNjcm9sbE1vZGUuUEFHRSkge1xuICAgICAgdGhpcy4jZW5zdXJlUGFnZVZpZXdWaXNpYmxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXdlci50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICAgIGlmICh0aGlzLl9zcHJlYWRNb2RlID09PSBfdWlfdXRpbHMuU3ByZWFkTW9kZS5OT05FKSB7XG4gICAgICAgIGZvciAoY29uc3QgcGFnZVZpZXcgb2YgdGhpcy5fcGFnZXMpIHtcbiAgICAgICAgICB2aWV3ZXIuYXBwZW5kQ2hpbGQocGFnZVZpZXcuZGl2KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcGFyaXR5ID0gdGhpcy5fc3ByZWFkTW9kZSAtIDE7XG4gICAgICAgIGxldCBzcHJlYWQgPSBudWxsO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBhZ2VzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICBpZiAoc3ByZWFkID09PSBudWxsKSB7XG4gICAgICAgICAgICBzcHJlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgc3ByZWFkLmNsYXNzTmFtZSA9IFwic3ByZWFkXCI7XG4gICAgICAgICAgICB2aWV3ZXIuYXBwZW5kQ2hpbGQoc3ByZWFkKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgJSAyID09PSBwYXJpdHkpIHtcbiAgICAgICAgICAgIHNwcmVhZCA9IHNwcmVhZC5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICAgICAgdmlld2VyLmFwcGVuZENoaWxkKHNwcmVhZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3ByZWFkLmFwcGVuZENoaWxkKHBhZ2VzW2ldLmRpdik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXBhZ2VOdW1iZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY3VycmVudFNjYWxlVmFsdWUgJiYgaXNOYU4odGhpcy5fY3VycmVudFNjYWxlVmFsdWUpKSB7XG4gICAgICB0aGlzLl9zZXRTY2FsZSh0aGlzLl9jdXJyZW50U2NhbGVWYWx1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0Q3VycmVudFBhZ2VOdW1iZXIocGFnZU51bWJlciwgdHJ1ZSk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgX2dldFBhZ2VBZHZhbmNlKGN1cnJlbnRQYWdlTnVtYmVyLCBwcmV2aW91cyA9IGZhbHNlKSB7XG4gICAgc3dpdGNoICh0aGlzLl9zY3JvbGxNb2RlKSB7XG4gICAgICBjYXNlIF91aV91dGlscy5TY3JvbGxNb2RlLldSQVBQRUQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB2aWV3c1xuICAgICAgICAgIH0gPSB0aGlzLl9nZXRWaXNpYmxlUGFnZXMoKSxcbiAgICAgICAgICAgICAgICBwYWdlTGF5b3V0ID0gbmV3IE1hcCgpO1xuXG4gICAgICAgICAgZm9yIChjb25zdCB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHksXG4gICAgICAgICAgICBwZXJjZW50LFxuICAgICAgICAgICAgd2lkdGhQZXJjZW50XG4gICAgICAgICAgfSBvZiB2aWV3cykge1xuICAgICAgICAgICAgaWYgKHBlcmNlbnQgPT09IDAgfHwgd2lkdGhQZXJjZW50IDwgMTAwKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgeUFycmF5ID0gcGFnZUxheW91dC5nZXQoeSk7XG5cbiAgICAgICAgICAgIGlmICgheUFycmF5KSB7XG4gICAgICAgICAgICAgIHBhZ2VMYXlvdXQuc2V0KHksIHlBcnJheSB8fD0gW10pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB5QXJyYXkucHVzaChpZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChjb25zdCB5QXJyYXkgb2YgcGFnZUxheW91dC52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0geUFycmF5LmluZGV4T2YoY3VycmVudFBhZ2VOdW1iZXIpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbnVtUGFnZXMgPSB5QXJyYXkubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAobnVtUGFnZXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudEluZGV4IC0gMSwgaWkgPSAwOyBpID49IGlpOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SWQgPSB5QXJyYXlbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRJZCA9IHlBcnJheVtpICsgMV0gLSAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJZCA8IGV4cGVjdGVkSWQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50UGFnZU51bWJlciAtIGV4cGVjdGVkSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudEluZGV4ICsgMSwgaWkgPSBudW1QYWdlczsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SWQgPSB5QXJyYXlbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRJZCA9IHlBcnJheVtpIC0gMV0gKyAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJZCA+IGV4cGVjdGVkSWQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBleHBlY3RlZElkIC0gY3VycmVudFBhZ2VOdW1iZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICAgICAgICBjb25zdCBmaXJzdElkID0geUFycmF5WzBdO1xuXG4gICAgICAgICAgICAgIGlmIChmaXJzdElkIDwgY3VycmVudFBhZ2VOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFBhZ2VOdW1iZXIgLSBmaXJzdElkICsgMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgbGFzdElkID0geUFycmF5W251bVBhZ2VzIC0gMV07XG5cbiAgICAgICAgICAgICAgaWYgKGxhc3RJZCA+IGN1cnJlbnRQYWdlTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RJZCAtIGN1cnJlbnRQYWdlTnVtYmVyICsgMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIF91aV91dGlscy5TY3JvbGxNb2RlLkhPUklaT05UQUw6XG4gICAgICAgIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIF91aV91dGlscy5TY3JvbGxNb2RlLlBBR0U6XG4gICAgICBjYXNlIF91aV91dGlscy5TY3JvbGxNb2RlLlZFUlRJQ0FMOlxuICAgICAgICB7XG4gICAgICAgICAgaWYgKHRoaXMuX3NwcmVhZE1vZGUgPT09IF91aV91dGlscy5TcHJlYWRNb2RlLk5PTkUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHBhcml0eSA9IHRoaXMuX3NwcmVhZE1vZGUgLSAxO1xuXG4gICAgICAgICAgaWYgKHByZXZpb3VzICYmIGN1cnJlbnRQYWdlTnVtYmVyICUgMiAhPT0gcGFyaXR5KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2UgaWYgKCFwcmV2aW91cyAmJiBjdXJyZW50UGFnZU51bWJlciAlIDIgPT09IHBhcml0eSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdmlld3NcbiAgICAgICAgICB9ID0gdGhpcy5fZ2V0VmlzaWJsZVBhZ2VzKCksXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRJZCA9IHByZXZpb3VzID8gY3VycmVudFBhZ2VOdW1iZXIgLSAxIDogY3VycmVudFBhZ2VOdW1iZXIgKyAxO1xuXG4gICAgICAgICAgZm9yIChjb25zdCB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHBlcmNlbnQsXG4gICAgICAgICAgICB3aWR0aFBlcmNlbnRcbiAgICAgICAgICB9IG9mIHZpZXdzKSB7XG4gICAgICAgICAgICBpZiAoaWQgIT09IGV4cGVjdGVkSWQpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwZXJjZW50ID4gMCAmJiB3aWR0aFBlcmNlbnQgPT09IDEwMCkge1xuICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIG5leHRQYWdlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRQYWdlTnVtYmVyID0gdGhpcy5fY3VycmVudFBhZ2VOdW1iZXIsXG4gICAgICAgICAgcGFnZXNDb3VudCA9IHRoaXMucGFnZXNDb3VudDtcblxuICAgIGlmIChjdXJyZW50UGFnZU51bWJlciA+PSBwYWdlc0NvdW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYWR2YW5jZSA9IHRoaXMuX2dldFBhZ2VBZHZhbmNlKGN1cnJlbnRQYWdlTnVtYmVyLCBmYWxzZSkgfHwgMTtcbiAgICB0aGlzLmN1cnJlbnRQYWdlTnVtYmVyID0gTWF0aC5taW4oY3VycmVudFBhZ2VOdW1iZXIgKyBhZHZhbmNlLCBwYWdlc0NvdW50KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByZXZpb3VzUGFnZSgpIHtcbiAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IHRoaXMuX2N1cnJlbnRQYWdlTnVtYmVyO1xuXG4gICAgaWYgKGN1cnJlbnRQYWdlTnVtYmVyIDw9IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBhZHZhbmNlID0gdGhpcy5fZ2V0UGFnZUFkdmFuY2UoY3VycmVudFBhZ2VOdW1iZXIsIHRydWUpIHx8IDE7XG4gICAgdGhpcy5jdXJyZW50UGFnZU51bWJlciA9IE1hdGgubWF4KGN1cnJlbnRQYWdlTnVtYmVyIC0gYWR2YW5jZSwgMSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpbmNyZWFzZVNjYWxlKHN0ZXBzID0gMSkge1xuICAgIGxldCBuZXdTY2FsZSA9IHRoaXMuX2N1cnJlbnRTY2FsZTtcblxuICAgIGRvIHtcbiAgICAgIG5ld1NjYWxlID0gKG5ld1NjYWxlICogX3VpX3V0aWxzLkRFRkFVTFRfU0NBTEVfREVMVEEpLnRvRml4ZWQoMik7XG4gICAgICBuZXdTY2FsZSA9IE1hdGguY2VpbChuZXdTY2FsZSAqIDEwKSAvIDEwO1xuICAgICAgbmV3U2NhbGUgPSBNYXRoLm1pbihfdWlfdXRpbHMuTUFYX1NDQUxFLCBuZXdTY2FsZSk7XG4gICAgfSB3aGlsZSAoLS1zdGVwcyA+IDAgJiYgbmV3U2NhbGUgPCBfdWlfdXRpbHMuTUFYX1NDQUxFKTtcblxuICAgIHRoaXMuY3VycmVudFNjYWxlVmFsdWUgPSBuZXdTY2FsZTtcbiAgfVxuXG4gIGRlY3JlYXNlU2NhbGUoc3RlcHMgPSAxKSB7XG4gICAgbGV0IG5ld1NjYWxlID0gdGhpcy5fY3VycmVudFNjYWxlO1xuXG4gICAgZG8ge1xuICAgICAgbmV3U2NhbGUgPSAobmV3U2NhbGUgLyBfdWlfdXRpbHMuREVGQVVMVF9TQ0FMRV9ERUxUQSkudG9GaXhlZCgyKTtcbiAgICAgIG5ld1NjYWxlID0gTWF0aC5mbG9vcihuZXdTY2FsZSAqIDEwKSAvIDEwO1xuICAgICAgbmV3U2NhbGUgPSBNYXRoLm1heChfdWlfdXRpbHMuTUlOX1NDQUxFLCBuZXdTY2FsZSk7XG4gICAgfSB3aGlsZSAoLS1zdGVwcyA+IDAgJiYgbmV3U2NhbGUgPiBfdWlfdXRpbHMuTUlOX1NDQUxFKTtcblxuICAgIHRoaXMuY3VycmVudFNjYWxlVmFsdWUgPSBuZXdTY2FsZTtcbiAgfVxuXG4gIHVwZGF0ZUNvbnRhaW5lckhlaWdodENzcygpIHtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG5cbiAgICBpZiAoaGVpZ2h0ICE9PSB0aGlzLiNwcmV2aW91c0NvbnRhaW5lckhlaWdodCkge1xuICAgICAgdGhpcy4jcHJldmlvdXNDb250YWluZXJIZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMuX2RvYy5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tdmlld2VyLWNvbnRhaW5lci1oZWlnaHRcIiwgYCR7aGVpZ2h0fXB4YCk7XG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0cy5CYXNlVmlld2VyID0gQmFzZVZpZXdlcjtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5QREZQYWdlVmlldyA9IHZvaWQgMDtcblxudmFyIF9wZGZqc0xpYiA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbnZhciBfdWlfdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDYpO1xuXG52YXIgX2FwcF9vcHRpb25zID0gX193X3BkZmpzX3JlcXVpcmVfXygxMyk7XG5cbnZhciBfbDEwbl91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oNCk7XG5cbmNvbnN0IE1BWF9DQU5WQVNfUElYRUxTID0gX2FwcF9vcHRpb25zLmNvbXBhdGliaWxpdHlQYXJhbXMubWF4Q2FudmFzUGl4ZWxzIHx8IDE2Nzc3MjE2O1xuXG5jbGFzcyBQREZQYWdlVmlldyB7XG4gICNhbm5vdGF0aW9uTW9kZSA9IF9wZGZqc0xpYi5Bbm5vdGF0aW9uTW9kZS5FTkFCTEVfRk9STVM7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xuICAgIGNvbnN0IGRlZmF1bHRWaWV3cG9ydCA9IG9wdGlvbnMuZGVmYXVsdFZpZXdwb3J0O1xuICAgIHRoaXMuaWQgPSBvcHRpb25zLmlkO1xuICAgIHRoaXMucmVuZGVyaW5nSWQgPSBcInBhZ2VcIiArIHRoaXMuaWQ7XG4gICAgdGhpcy5wZGZQYWdlID0gbnVsbDtcbiAgICB0aGlzLnBhZ2VMYWJlbCA9IG51bGw7XG4gICAgdGhpcy5yb3RhdGlvbiA9IDA7XG4gICAgdGhpcy5zY2FsZSA9IG9wdGlvbnMuc2NhbGUgfHwgX3VpX3V0aWxzLkRFRkFVTFRfU0NBTEU7XG4gICAgdGhpcy52aWV3cG9ydCA9IGRlZmF1bHRWaWV3cG9ydDtcbiAgICB0aGlzLnBkZlBhZ2VSb3RhdGUgPSBkZWZhdWx0Vmlld3BvcnQucm90YXRpb247XG4gICAgdGhpcy5fb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSA9IG9wdGlvbnMub3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSB8fCBudWxsO1xuICAgIHRoaXMuaGFzUmVzdHJpY3RlZFNjYWxpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnRleHRMYXllck1vZGUgPSBvcHRpb25zLnRleHRMYXllck1vZGUgPz8gX3VpX3V0aWxzLlRleHRMYXllck1vZGUuRU5BQkxFO1xuICAgIHRoaXMuI2Fubm90YXRpb25Nb2RlID0gb3B0aW9ucy5hbm5vdGF0aW9uTW9kZSA/PyBfcGRmanNMaWIuQW5ub3RhdGlvbk1vZGUuRU5BQkxFX0ZPUk1TO1xuICAgIHRoaXMuaW1hZ2VSZXNvdXJjZXNQYXRoID0gb3B0aW9ucy5pbWFnZVJlc291cmNlc1BhdGggfHwgXCJcIjtcbiAgICB0aGlzLnVzZU9ubHlDc3Nab29tID0gb3B0aW9ucy51c2VPbmx5Q3NzWm9vbSB8fCBmYWxzZTtcbiAgICB0aGlzLm1heENhbnZhc1BpeGVscyA9IG9wdGlvbnMubWF4Q2FudmFzUGl4ZWxzIHx8IE1BWF9DQU5WQVNfUElYRUxTO1xuICAgIHRoaXMucGFnZUNvbG9ycyA9IG9wdGlvbnMucGFnZUNvbG9ycyB8fCBudWxsO1xuICAgIHRoaXMuZXZlbnRCdXMgPSBvcHRpb25zLmV2ZW50QnVzO1xuICAgIHRoaXMucmVuZGVyaW5nUXVldWUgPSBvcHRpb25zLnJlbmRlcmluZ1F1ZXVlO1xuICAgIHRoaXMudGV4dExheWVyRmFjdG9yeSA9IG9wdGlvbnMudGV4dExheWVyRmFjdG9yeTtcbiAgICB0aGlzLmFubm90YXRpb25MYXllckZhY3RvcnkgPSBvcHRpb25zLmFubm90YXRpb25MYXllckZhY3Rvcnk7XG4gICAgdGhpcy54ZmFMYXllckZhY3RvcnkgPSBvcHRpb25zLnhmYUxheWVyRmFjdG9yeTtcbiAgICB0aGlzLnRleHRIaWdobGlnaHRlciA9IG9wdGlvbnMudGV4dEhpZ2hsaWdodGVyRmFjdG9yeT8uY3JlYXRlVGV4dEhpZ2hsaWdodGVyKHRoaXMuaWQgLSAxLCB0aGlzLmV2ZW50QnVzKTtcbiAgICB0aGlzLnN0cnVjdFRyZWVMYXllckZhY3RvcnkgPSBvcHRpb25zLnN0cnVjdFRyZWVMYXllckZhY3Rvcnk7XG4gICAgdGhpcy5yZW5kZXJlciA9IG9wdGlvbnMucmVuZGVyZXIgfHwgX3VpX3V0aWxzLlJlbmRlcmVyVHlwZS5DQU5WQVM7XG4gICAgdGhpcy5sMTBuID0gb3B0aW9ucy5sMTBuIHx8IF9sMTBuX3V0aWxzLk51bGxMMTBuO1xuICAgIHRoaXMucGFpbnRUYXNrID0gbnVsbDtcbiAgICB0aGlzLnBhaW50ZWRWaWV3cG9ydE1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgdGhpcy5yZW5kZXJpbmdTdGF0ZSA9IF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuSU5JVElBTDtcbiAgICB0aGlzLnJlc3VtZSA9IG51bGw7XG4gICAgdGhpcy5fcmVuZGVyRXJyb3IgPSBudWxsO1xuICAgIHRoaXMuX2lzU3RhbmRhbG9uZSA9ICF0aGlzLnJlbmRlcmluZ1F1ZXVlPy5oYXNWaWV3ZXIoKTtcbiAgICB0aGlzLl9hbm5vdGF0aW9uQ2FudmFzTWFwID0gbnVsbDtcbiAgICB0aGlzLmFubm90YXRpb25MYXllciA9IG51bGw7XG4gICAgdGhpcy50ZXh0TGF5ZXIgPSBudWxsO1xuICAgIHRoaXMuem9vbUxheWVyID0gbnVsbDtcbiAgICB0aGlzLnhmYUxheWVyID0gbnVsbDtcbiAgICB0aGlzLnN0cnVjdFRyZWVMYXllciA9IG51bGw7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuY2xhc3NOYW1lID0gXCJwYWdlXCI7XG4gICAgZGl2LnN0eWxlLndpZHRoID0gTWF0aC5mbG9vcih0aGlzLnZpZXdwb3J0LndpZHRoKSArIFwicHhcIjtcbiAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLnZpZXdwb3J0LmhlaWdodCkgKyBcInB4XCI7XG4gICAgZGl2LnNldEF0dHJpYnV0ZShcImRhdGEtcGFnZS1udW1iZXJcIiwgdGhpcy5pZCk7XG4gICAgZGl2LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJyZWdpb25cIik7XG4gICAgdGhpcy5sMTBuLmdldChcInBhZ2VfbGFuZG1hcmtcIiwge1xuICAgICAgcGFnZTogdGhpcy5pZFxuICAgIH0pLnRoZW4obXNnID0+IHtcbiAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIG1zZyk7XG4gICAgfSk7XG4gICAgdGhpcy5kaXYgPSBkaXY7XG4gICAgY29udGFpbmVyPy5hcHBlbmRDaGlsZChkaXYpO1xuICB9XG5cbiAgc2V0UGRmUGFnZShwZGZQYWdlKSB7XG4gICAgdGhpcy5wZGZQYWdlID0gcGRmUGFnZTtcbiAgICB0aGlzLnBkZlBhZ2VSb3RhdGUgPSBwZGZQYWdlLnJvdGF0ZTtcbiAgICBjb25zdCB0b3RhbFJvdGF0aW9uID0gKHRoaXMucm90YXRpb24gKyB0aGlzLnBkZlBhZ2VSb3RhdGUpICUgMzYwO1xuICAgIHRoaXMudmlld3BvcnQgPSBwZGZQYWdlLmdldFZpZXdwb3J0KHtcbiAgICAgIHNjYWxlOiB0aGlzLnNjYWxlICogX3BkZmpzTGliLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUUyxcbiAgICAgIHJvdGF0aW9uOiB0b3RhbFJvdGF0aW9uXG4gICAgfSk7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICBpZiAodGhpcy5wZGZQYWdlKSB7XG4gICAgICB0aGlzLnBkZlBhZ2UuY2xlYW51cCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9yZW5kZXJBbm5vdGF0aW9uTGF5ZXIoKSB7XG4gICAgbGV0IGVycm9yID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmFubm90YXRpb25MYXllci5yZW5kZXIodGhpcy52aWV3cG9ydCwgXCJkaXNwbGF5XCIpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBlcnJvciA9IGV4O1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwiYW5ub3RhdGlvbmxheWVycmVuZGVyZWRcIiwge1xuICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgIHBhZ2VOdW1iZXI6IHRoaXMuaWQsXG4gICAgICAgIGVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfcmVuZGVyWGZhTGF5ZXIoKSB7XG4gICAgbGV0IGVycm9yID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnhmYUxheWVyLnJlbmRlcih0aGlzLnZpZXdwb3J0LCBcImRpc3BsYXlcIik7XG5cbiAgICAgIGlmICh0aGlzLnRleHRIaWdobGlnaHRlcikge1xuICAgICAgICB0aGlzLl9idWlsZFhmYVRleHRDb250ZW50SXRlbXMocmVzdWx0LnRleHREaXZzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgZXJyb3IgPSBleDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcInhmYWxheWVycmVuZGVyZWRcIiwge1xuICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgIHBhZ2VOdW1iZXI6IHRoaXMuaWQsXG4gICAgICAgIGVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfYnVpbGRYZmFUZXh0Q29udGVudEl0ZW1zKHRleHREaXZzKSB7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMucGRmUGFnZS5nZXRUZXh0Q29udGVudCgpO1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGV4dC5pdGVtcykge1xuICAgICAgaXRlbXMucHVzaChpdGVtLnN0cik7XG4gICAgfVxuXG4gICAgdGhpcy50ZXh0SGlnaGxpZ2h0ZXIuc2V0VGV4dE1hcHBpbmcodGV4dERpdnMsIGl0ZW1zKTtcbiAgICB0aGlzLnRleHRIaWdobGlnaHRlci5lbmFibGUoKTtcbiAgfVxuXG4gIF9yZXNldFpvb21MYXllcihyZW1vdmVGcm9tRE9NID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMuem9vbUxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgem9vbUxheWVyQ2FudmFzID0gdGhpcy56b29tTGF5ZXIuZmlyc3RDaGlsZDtcbiAgICB0aGlzLnBhaW50ZWRWaWV3cG9ydE1hcC5kZWxldGUoem9vbUxheWVyQ2FudmFzKTtcbiAgICB6b29tTGF5ZXJDYW52YXMud2lkdGggPSAwO1xuICAgIHpvb21MYXllckNhbnZhcy5oZWlnaHQgPSAwO1xuXG4gICAgaWYgKHJlbW92ZUZyb21ET00pIHtcbiAgICAgIHRoaXMuem9vbUxheWVyLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuem9vbUxheWVyID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0KHtcbiAgICBrZWVwWm9vbUxheWVyID0gZmFsc2UsXG4gICAga2VlcEFubm90YXRpb25MYXllciA9IGZhbHNlLFxuICAgIGtlZXBYZmFMYXllciA9IGZhbHNlXG4gIH0gPSB7fSkge1xuICAgIHRoaXMuY2FuY2VsUmVuZGVyaW5nKHtcbiAgICAgIGtlZXBBbm5vdGF0aW9uTGF5ZXIsXG4gICAgICBrZWVwWGZhTGF5ZXJcbiAgICB9KTtcbiAgICB0aGlzLnJlbmRlcmluZ1N0YXRlID0gX3VpX3V0aWxzLlJlbmRlcmluZ1N0YXRlcy5JTklUSUFMO1xuICAgIGNvbnN0IGRpdiA9IHRoaXMuZGl2O1xuICAgIGRpdi5zdHlsZS53aWR0aCA9IE1hdGguZmxvb3IodGhpcy52aWV3cG9ydC53aWR0aCkgKyBcInB4XCI7XG4gICAgZGl2LnN0eWxlLmhlaWdodCA9IE1hdGguZmxvb3IodGhpcy52aWV3cG9ydC5oZWlnaHQpICsgXCJweFwiO1xuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBkaXYuY2hpbGROb2RlcyxcbiAgICAgICAgICB6b29tTGF5ZXJOb2RlID0ga2VlcFpvb21MYXllciAmJiB0aGlzLnpvb21MYXllciB8fCBudWxsLFxuICAgICAgICAgIGFubm90YXRpb25MYXllck5vZGUgPSBrZWVwQW5ub3RhdGlvbkxheWVyICYmIHRoaXMuYW5ub3RhdGlvbkxheWVyPy5kaXYgfHwgbnVsbCxcbiAgICAgICAgICB4ZmFMYXllck5vZGUgPSBrZWVwWGZhTGF5ZXIgJiYgdGhpcy54ZmFMYXllcj8uZGl2IHx8IG51bGw7XG5cbiAgICBmb3IgKGxldCBpID0gY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3Qgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG5cbiAgICAgIHN3aXRjaCAobm9kZSkge1xuICAgICAgICBjYXNlIHpvb21MYXllck5vZGU6XG4gICAgICAgIGNhc2UgYW5ub3RhdGlvbkxheWVyTm9kZTpcbiAgICAgICAgY2FzZSB4ZmFMYXllck5vZGU6XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgZGl2LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtbG9hZGVkXCIpO1xuXG4gICAgaWYgKGFubm90YXRpb25MYXllck5vZGUpIHtcbiAgICAgIHRoaXMuYW5ub3RhdGlvbkxheWVyLmhpZGUoKTtcbiAgICB9XG5cbiAgICBpZiAoeGZhTGF5ZXJOb2RlKSB7XG4gICAgICB0aGlzLnhmYUxheWVyLmhpZGUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXpvb21MYXllck5vZGUpIHtcbiAgICAgIGlmICh0aGlzLmNhbnZhcykge1xuICAgICAgICB0aGlzLnBhaW50ZWRWaWV3cG9ydE1hcC5kZWxldGUodGhpcy5jYW52YXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDA7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDA7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhbnZhcztcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVzZXRab29tTGF5ZXIoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdmcpIHtcbiAgICAgIHRoaXMucGFpbnRlZFZpZXdwb3J0TWFwLmRlbGV0ZSh0aGlzLnN2Zyk7XG4gICAgICBkZWxldGUgdGhpcy5zdmc7XG4gICAgfVxuXG4gICAgdGhpcy5sb2FkaW5nSWNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5sb2FkaW5nSWNvbkRpdi5jbGFzc05hbWUgPSBcImxvYWRpbmdJY29uIG5vdFZpc2libGVcIjtcblxuICAgIGlmICh0aGlzLl9pc1N0YW5kYWxvbmUpIHtcbiAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0ljb25TcGlubmVyKHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMubG9hZGluZ0ljb25EaXYuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImltZ1wiKTtcbiAgICB0aGlzLmwxMG4uZ2V0KFwibG9hZGluZ1wiKS50aGVuKG1zZyA9PiB7XG4gICAgICB0aGlzLmxvYWRpbmdJY29uRGl2Py5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIG1zZyk7XG4gICAgfSk7XG4gICAgZGl2LmFwcGVuZENoaWxkKHRoaXMubG9hZGluZ0ljb25EaXYpO1xuICB9XG5cbiAgdXBkYXRlKHtcbiAgICBzY2FsZSA9IDAsXG4gICAgcm90YXRpb24gPSBudWxsLFxuICAgIG9wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UgPSBudWxsXG4gIH0pIHtcbiAgICB0aGlzLnNjYWxlID0gc2NhbGUgfHwgdGhpcy5zY2FsZTtcblxuICAgIGlmICh0eXBlb2Ygcm90YXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgIHRoaXMuX29wdGlvbmFsQ29udGVudENvbmZpZ1Byb21pc2UgPSBvcHRpb25hbENvbnRlbnRDb25maWdQcm9taXNlO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsUm90YXRpb24gPSAodGhpcy5yb3RhdGlvbiArIHRoaXMucGRmUGFnZVJvdGF0ZSkgJSAzNjA7XG4gICAgdGhpcy52aWV3cG9ydCA9IHRoaXMudmlld3BvcnQuY2xvbmUoe1xuICAgICAgc2NhbGU6IHRoaXMuc2NhbGUgKiBfcGRmanNMaWIuUGl4ZWxzUGVySW5jaC5QREZfVE9fQ1NTX1VOSVRTLFxuICAgICAgcm90YXRpb246IHRvdGFsUm90YXRpb25cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9pc1N0YW5kYWxvbmUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc3R5bGVcbiAgICAgIH0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBzdHlsZS5zZXRQcm9wZXJ0eShcIi0tem9vbS1mYWN0b3JcIiwgdGhpcy5zY2FsZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3ZnKSB7XG4gICAgICB0aGlzLmNzc1RyYW5zZm9ybSh7XG4gICAgICAgIHRhcmdldDogdGhpcy5zdmcsXG4gICAgICAgIHJlZHJhd0Fubm90YXRpb25MYXllcjogdHJ1ZSxcbiAgICAgICAgcmVkcmF3WGZhTGF5ZXI6IHRydWVcbiAgICAgIH0pO1xuICAgICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcInBhZ2VyZW5kZXJlZFwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgcGFnZU51bWJlcjogdGhpcy5pZCxcbiAgICAgICAgY3NzVHJhbnNmb3JtOiB0cnVlLFxuICAgICAgICB0aW1lc3RhbXA6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgICAgICBlcnJvcjogdGhpcy5fcmVuZGVyRXJyb3JcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBpc1NjYWxpbmdSZXN0cmljdGVkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5tYXhDYW52YXNQaXhlbHMgPiAwKSB7XG4gICAgICBjb25zdCBvdXRwdXRTY2FsZSA9IHRoaXMub3V0cHV0U2NhbGU7XG5cbiAgICAgIGlmICgoTWF0aC5mbG9vcih0aGlzLnZpZXdwb3J0LndpZHRoKSAqIG91dHB1dFNjYWxlLnN4IHwgMCkgKiAoTWF0aC5mbG9vcih0aGlzLnZpZXdwb3J0LmhlaWdodCkgKiBvdXRwdXRTY2FsZS5zeSB8IDApID4gdGhpcy5tYXhDYW52YXNQaXhlbHMpIHtcbiAgICAgICAgaXNTY2FsaW5nUmVzdHJpY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2FudmFzKSB7XG4gICAgICBpZiAodGhpcy51c2VPbmx5Q3NzWm9vbSB8fCB0aGlzLmhhc1Jlc3RyaWN0ZWRTY2FsaW5nICYmIGlzU2NhbGluZ1Jlc3RyaWN0ZWQpIHtcbiAgICAgICAgdGhpcy5jc3NUcmFuc2Zvcm0oe1xuICAgICAgICAgIHRhcmdldDogdGhpcy5jYW52YXMsXG4gICAgICAgICAgcmVkcmF3QW5ub3RhdGlvbkxheWVyOiB0cnVlLFxuICAgICAgICAgIHJlZHJhd1hmYUxheWVyOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwicGFnZXJlbmRlcmVkXCIsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICAgICAgcGFnZU51bWJlcjogdGhpcy5pZCxcbiAgICAgICAgICBjc3NUcmFuc2Zvcm06IHRydWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBwZXJmb3JtYW5jZS5ub3coKSxcbiAgICAgICAgICBlcnJvcjogdGhpcy5fcmVuZGVyRXJyb3JcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnpvb21MYXllciAmJiAhdGhpcy5jYW52YXMuaGlkZGVuKSB7XG4gICAgICAgIHRoaXMuem9vbUxheWVyID0gdGhpcy5jYW52YXMucGFyZW50Tm9kZTtcbiAgICAgICAgdGhpcy56b29tTGF5ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuem9vbUxheWVyKSB7XG4gICAgICB0aGlzLmNzc1RyYW5zZm9ybSh7XG4gICAgICAgIHRhcmdldDogdGhpcy56b29tTGF5ZXIuZmlyc3RDaGlsZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldCh7XG4gICAgICBrZWVwWm9vbUxheWVyOiB0cnVlLFxuICAgICAga2VlcEFubm90YXRpb25MYXllcjogdHJ1ZSxcbiAgICAgIGtlZXBYZmFMYXllcjogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgY2FuY2VsUmVuZGVyaW5nKHtcbiAgICBrZWVwQW5ub3RhdGlvbkxheWVyID0gZmFsc2UsXG4gICAga2VlcFhmYUxheWVyID0gZmFsc2VcbiAgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMucGFpbnRUYXNrKSB7XG4gICAgICB0aGlzLnBhaW50VGFzay5jYW5jZWwoKTtcbiAgICAgIHRoaXMucGFpbnRUYXNrID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VtZSA9IG51bGw7XG5cbiAgICBpZiAodGhpcy50ZXh0TGF5ZXIpIHtcbiAgICAgIHRoaXMudGV4dExheWVyLmNhbmNlbCgpO1xuICAgICAgdGhpcy50ZXh0TGF5ZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFubm90YXRpb25MYXllciAmJiAoIWtlZXBBbm5vdGF0aW9uTGF5ZXIgfHwgIXRoaXMuYW5ub3RhdGlvbkxheWVyLmRpdikpIHtcbiAgICAgIHRoaXMuYW5ub3RhdGlvbkxheWVyLmNhbmNlbCgpO1xuICAgICAgdGhpcy5hbm5vdGF0aW9uTGF5ZXIgPSBudWxsO1xuICAgICAgdGhpcy5fYW5ub3RhdGlvbkNhbnZhc01hcCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMueGZhTGF5ZXIgJiYgKCFrZWVwWGZhTGF5ZXIgfHwgIXRoaXMueGZhTGF5ZXIuZGl2KSkge1xuICAgICAgdGhpcy54ZmFMYXllci5jYW5jZWwoKTtcbiAgICAgIHRoaXMueGZhTGF5ZXIgPSBudWxsO1xuICAgICAgdGhpcy50ZXh0SGlnaGxpZ2h0ZXI/LmRpc2FibGUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fb25UZXh0TGF5ZXJSZW5kZXJlZCkge1xuICAgICAgdGhpcy5ldmVudEJ1cy5fb2ZmKFwidGV4dGxheWVycmVuZGVyZWRcIiwgdGhpcy5fb25UZXh0TGF5ZXJSZW5kZXJlZCk7XG5cbiAgICAgIHRoaXMuX29uVGV4dExheWVyUmVuZGVyZWQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGNzc1RyYW5zZm9ybSh7XG4gICAgdGFyZ2V0LFxuICAgIHJlZHJhd0Fubm90YXRpb25MYXllciA9IGZhbHNlLFxuICAgIHJlZHJhd1hmYUxheWVyID0gZmFsc2VcbiAgfSkge1xuICAgIGNvbnN0IHdpZHRoID0gdGhpcy52aWV3cG9ydC53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnZpZXdwb3J0LmhlaWdodDtcbiAgICBjb25zdCBkaXYgPSB0aGlzLmRpdjtcbiAgICB0YXJnZXQuc3R5bGUud2lkdGggPSB0YXJnZXQucGFyZW50Tm9kZS5zdHlsZS53aWR0aCA9IGRpdi5zdHlsZS53aWR0aCA9IE1hdGguZmxvb3Iod2lkdGgpICsgXCJweFwiO1xuICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSB0YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQgPSBkaXYuc3R5bGUuaGVpZ2h0ID0gTWF0aC5mbG9vcihoZWlnaHQpICsgXCJweFwiO1xuICAgIGNvbnN0IHJlbGF0aXZlUm90YXRpb24gPSB0aGlzLnZpZXdwb3J0LnJvdGF0aW9uIC0gdGhpcy5wYWludGVkVmlld3BvcnRNYXAuZ2V0KHRhcmdldCkucm90YXRpb247XG4gICAgY29uc3QgYWJzUm90YXRpb24gPSBNYXRoLmFicyhyZWxhdGl2ZVJvdGF0aW9uKTtcbiAgICBsZXQgc2NhbGVYID0gMSxcbiAgICAgICAgc2NhbGVZID0gMTtcblxuICAgIGlmIChhYnNSb3RhdGlvbiA9PT0gOTAgfHwgYWJzUm90YXRpb24gPT09IDI3MCkge1xuICAgICAgc2NhbGVYID0gaGVpZ2h0IC8gd2lkdGg7XG4gICAgICBzY2FsZVkgPSB3aWR0aCAvIGhlaWdodDtcbiAgICB9XG5cbiAgICB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3JlbGF0aXZlUm90YXRpb259ZGVnKSBzY2FsZSgke3NjYWxlWH0sICR7c2NhbGVZfSlgO1xuXG4gICAgaWYgKHRoaXMudGV4dExheWVyKSB7XG4gICAgICBjb25zdCB0ZXh0TGF5ZXJWaWV3cG9ydCA9IHRoaXMudGV4dExheWVyLnZpZXdwb3J0O1xuICAgICAgY29uc3QgdGV4dFJlbGF0aXZlUm90YXRpb24gPSB0aGlzLnZpZXdwb3J0LnJvdGF0aW9uIC0gdGV4dExheWVyVmlld3BvcnQucm90YXRpb247XG4gICAgICBjb25zdCB0ZXh0QWJzUm90YXRpb24gPSBNYXRoLmFicyh0ZXh0UmVsYXRpdmVSb3RhdGlvbik7XG4gICAgICBsZXQgc2NhbGUgPSB3aWR0aCAvIHRleHRMYXllclZpZXdwb3J0LndpZHRoO1xuXG4gICAgICBpZiAodGV4dEFic1JvdGF0aW9uID09PSA5MCB8fCB0ZXh0QWJzUm90YXRpb24gPT09IDI3MCkge1xuICAgICAgICBzY2FsZSA9IHdpZHRoIC8gdGV4dExheWVyVmlld3BvcnQuaGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZXh0TGF5ZXJEaXYgPSB0aGlzLnRleHRMYXllci50ZXh0TGF5ZXJEaXY7XG4gICAgICBsZXQgdHJhbnNYLCB0cmFuc1k7XG5cbiAgICAgIHN3aXRjaCAodGV4dEFic1JvdGF0aW9uKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICB0cmFuc1ggPSB0cmFuc1kgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgOTA6XG4gICAgICAgICAgdHJhbnNYID0gMDtcbiAgICAgICAgICB0cmFuc1kgPSBcIi1cIiArIHRleHRMYXllckRpdi5zdHlsZS5oZWlnaHQ7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAxODA6XG4gICAgICAgICAgdHJhbnNYID0gXCItXCIgKyB0ZXh0TGF5ZXJEaXYuc3R5bGUud2lkdGg7XG4gICAgICAgICAgdHJhbnNZID0gXCItXCIgKyB0ZXh0TGF5ZXJEaXYuc3R5bGUuaGVpZ2h0O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMjcwOlxuICAgICAgICAgIHRyYW5zWCA9IFwiLVwiICsgdGV4dExheWVyRGl2LnN0eWxlLndpZHRoO1xuICAgICAgICAgIHRyYW5zWSA9IDA7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQmFkIHJvdGF0aW9uIHZhbHVlLlwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdGV4dExheWVyRGl2LnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGUoJHt0ZXh0QWJzUm90YXRpb259ZGVnKSBgICsgYHNjYWxlKCR7c2NhbGV9KSBgICsgYHRyYW5zbGF0ZSgke3RyYW5zWH0sICR7dHJhbnNZfSlgO1xuICAgICAgdGV4dExheWVyRGl2LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwiMCUgMCVcIjtcbiAgICB9XG5cbiAgICBpZiAocmVkcmF3QW5ub3RhdGlvbkxheWVyICYmIHRoaXMuYW5ub3RhdGlvbkxheWVyKSB7XG4gICAgICB0aGlzLl9yZW5kZXJBbm5vdGF0aW9uTGF5ZXIoKTtcbiAgICB9XG5cbiAgICBpZiAocmVkcmF3WGZhTGF5ZXIgJiYgdGhpcy54ZmFMYXllcikge1xuICAgICAgdGhpcy5fcmVuZGVyWGZhTGF5ZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3BvcnQud2lkdGg7XG4gIH1cblxuICBnZXQgaGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdwb3J0LmhlaWdodDtcbiAgfVxuXG4gIGdldFBhZ2VQb2ludCh4LCB5KSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3BvcnQuY29udmVydFRvUGRmUG9pbnQoeCwgeSk7XG4gIH1cblxuICB0b2dnbGVMb2FkaW5nSWNvblNwaW5uZXIodmlld1Zpc2libGUgPSBmYWxzZSkge1xuICAgIHRoaXMubG9hZGluZ0ljb25EaXY/LmNsYXNzTGlzdC50b2dnbGUoXCJub3RWaXNpYmxlXCIsICF2aWV3VmlzaWJsZSk7XG4gIH1cblxuICBkcmF3KCkge1xuICAgIGlmICh0aGlzLnJlbmRlcmluZ1N0YXRlICE9PSBfdWlfdXRpbHMuUmVuZGVyaW5nU3RhdGVzLklOSVRJQUwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJNdXN0IGJlIGluIG5ldyBzdGF0ZSBiZWZvcmUgZHJhd2luZ1wiKTtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBkaXYsXG4gICAgICBwZGZQYWdlXG4gICAgfSA9IHRoaXM7XG5cbiAgICBpZiAoIXBkZlBhZ2UpIHtcbiAgICAgIHRoaXMucmVuZGVyaW5nU3RhdGUgPSBfdWlfdXRpbHMuUmVuZGVyaW5nU3RhdGVzLkZJTklTSEVEO1xuXG4gICAgICBpZiAodGhpcy5sb2FkaW5nSWNvbkRpdikge1xuICAgICAgICB0aGlzLmxvYWRpbmdJY29uRGl2LnJlbW92ZSgpO1xuICAgICAgICBkZWxldGUgdGhpcy5sb2FkaW5nSWNvbkRpdjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcInBkZlBhZ2UgaXMgbm90IGxvYWRlZFwiKSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJpbmdTdGF0ZSA9IF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuUlVOTklORztcbiAgICBjb25zdCBjYW52YXNXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjYW52YXNXcmFwcGVyLnN0eWxlLndpZHRoID0gZGl2LnN0eWxlLndpZHRoO1xuICAgIGNhbnZhc1dyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gZGl2LnN0eWxlLmhlaWdodDtcbiAgICBjYW52YXNXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJjYW52YXNXcmFwcGVyXCIpO1xuXG4gICAgaWYgKHRoaXMuYW5ub3RhdGlvbkxheWVyPy5kaXYpIHtcbiAgICAgIGRpdi5pbnNlcnRCZWZvcmUoY2FudmFzV3JhcHBlciwgdGhpcy5hbm5vdGF0aW9uTGF5ZXIuZGl2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGl2LmFwcGVuZENoaWxkKGNhbnZhc1dyYXBwZXIpO1xuICAgIH1cblxuICAgIGxldCB0ZXh0TGF5ZXIgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMudGV4dExheWVyTW9kZSAhPT0gX3VpX3V0aWxzLlRleHRMYXllck1vZGUuRElTQUJMRSAmJiB0aGlzLnRleHRMYXllckZhY3RvcnkpIHtcbiAgICAgIGNvbnN0IHRleHRMYXllckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB0ZXh0TGF5ZXJEaXYuY2xhc3NOYW1lID0gXCJ0ZXh0TGF5ZXJcIjtcbiAgICAgIHRleHRMYXllckRpdi5zdHlsZS53aWR0aCA9IGNhbnZhc1dyYXBwZXIuc3R5bGUud2lkdGg7XG4gICAgICB0ZXh0TGF5ZXJEaXYuc3R5bGUuaGVpZ2h0ID0gY2FudmFzV3JhcHBlci5zdHlsZS5oZWlnaHQ7XG5cbiAgICAgIGlmICh0aGlzLmFubm90YXRpb25MYXllcj8uZGl2KSB7XG4gICAgICAgIGRpdi5pbnNlcnRCZWZvcmUodGV4dExheWVyRGl2LCB0aGlzLmFubm90YXRpb25MYXllci5kaXYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHRleHRMYXllckRpdik7XG4gICAgICB9XG5cbiAgICAgIHRleHRMYXllciA9IHRoaXMudGV4dExheWVyRmFjdG9yeS5jcmVhdGVUZXh0TGF5ZXJCdWlsZGVyKHRleHRMYXllckRpdiwgdGhpcy5pZCAtIDEsIHRoaXMudmlld3BvcnQsIHRoaXMudGV4dExheWVyTW9kZSA9PT0gX3VpX3V0aWxzLlRleHRMYXllck1vZGUuRU5BQkxFX0VOSEFOQ0UsIHRoaXMuZXZlbnRCdXMsIHRoaXMudGV4dEhpZ2hsaWdodGVyKTtcbiAgICB9XG5cbiAgICB0aGlzLnRleHRMYXllciA9IHRleHRMYXllcjtcblxuICAgIGlmICh0aGlzLiNhbm5vdGF0aW9uTW9kZSAhPT0gX3BkZmpzTGliLkFubm90YXRpb25Nb2RlLkRJU0FCTEUgJiYgdGhpcy5hbm5vdGF0aW9uTGF5ZXJGYWN0b3J5KSB7XG4gICAgICB0aGlzLl9hbm5vdGF0aW9uQ2FudmFzTWFwIHx8PSBuZXcgTWFwKCk7XG4gICAgICB0aGlzLmFubm90YXRpb25MYXllciB8fD0gdGhpcy5hbm5vdGF0aW9uTGF5ZXJGYWN0b3J5LmNyZWF0ZUFubm90YXRpb25MYXllckJ1aWxkZXIoZGl2LCBwZGZQYWdlLCBudWxsLCB0aGlzLmltYWdlUmVzb3VyY2VzUGF0aCwgdGhpcy4jYW5ub3RhdGlvbk1vZGUgPT09IF9wZGZqc0xpYi5Bbm5vdGF0aW9uTW9kZS5FTkFCTEVfRk9STVMsIHRoaXMubDEwbiwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgdGhpcy5fYW5ub3RhdGlvbkNhbnZhc01hcCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMueGZhTGF5ZXI/LmRpdikge1xuICAgICAgZGl2LmFwcGVuZENoaWxkKHRoaXMueGZhTGF5ZXIuZGl2KTtcbiAgICB9XG5cbiAgICBsZXQgcmVuZGVyQ29udGludWVDYWxsYmFjayA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5yZW5kZXJpbmdRdWV1ZSkge1xuICAgICAgcmVuZGVyQ29udGludWVDYWxsYmFjayA9IGNvbnQgPT4ge1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyaW5nUXVldWUuaXNIaWdoZXN0UHJpb3JpdHkodGhpcykpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmluZ1N0YXRlID0gX3VpX3V0aWxzLlJlbmRlcmluZ1N0YXRlcy5QQVVTRUQ7XG5cbiAgICAgICAgICB0aGlzLnJlc3VtZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nU3RhdGUgPSBfdWlfdXRpbHMuUmVuZGVyaW5nU3RhdGVzLlJVTk5JTkc7XG4gICAgICAgICAgICBjb250KCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnQoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgZmluaXNoUGFpbnRUYXNrID0gYXN5bmMgKGVycm9yID0gbnVsbCkgPT4ge1xuICAgICAgaWYgKHBhaW50VGFzayA9PT0gdGhpcy5wYWludFRhc2spIHtcbiAgICAgICAgdGhpcy5wYWludFRhc2sgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBfcGRmanNMaWIuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckVycm9yID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9yZW5kZXJFcnJvciA9IGVycm9yO1xuICAgICAgdGhpcy5yZW5kZXJpbmdTdGF0ZSA9IF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuRklOSVNIRUQ7XG5cbiAgICAgIGlmICh0aGlzLmxvYWRpbmdJY29uRGl2KSB7XG4gICAgICAgIHRoaXMubG9hZGluZ0ljb25EaXYucmVtb3ZlKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvYWRpbmdJY29uRGl2O1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9yZXNldFpvb21MYXllcih0cnVlKTtcblxuICAgICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcInBhZ2VyZW5kZXJlZFwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgICAgcGFnZU51bWJlcjogdGhpcy5pZCxcbiAgICAgICAgY3NzVHJhbnNmb3JtOiBmYWxzZSxcbiAgICAgICAgdGltZXN0YW1wOiBwZXJmb3JtYW5jZS5ub3coKSxcbiAgICAgICAgZXJyb3I6IHRoaXMuX3JlbmRlckVycm9yXG4gICAgICB9KTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBwYWludFRhc2sgPSB0aGlzLnJlbmRlcmVyID09PSBfdWlfdXRpbHMuUmVuZGVyZXJUeXBlLlNWRyA/IHRoaXMucGFpbnRPblN2ZyhjYW52YXNXcmFwcGVyKSA6IHRoaXMucGFpbnRPbkNhbnZhcyhjYW52YXNXcmFwcGVyKTtcbiAgICBwYWludFRhc2sub25SZW5kZXJDb250aW51ZSA9IHJlbmRlckNvbnRpbnVlQ2FsbGJhY2s7XG4gICAgdGhpcy5wYWludFRhc2sgPSBwYWludFRhc2s7XG4gICAgY29uc3QgcmVzdWx0UHJvbWlzZSA9IHBhaW50VGFzay5wcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIGZpbmlzaFBhaW50VGFzayhudWxsKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHRleHRMYXllcikge1xuICAgICAgICAgIGNvbnN0IHJlYWRhYmxlU3RyZWFtID0gcGRmUGFnZS5zdHJlYW1UZXh0Q29udGVudCh7XG4gICAgICAgICAgICBpbmNsdWRlTWFya2VkQ29udGVudDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRleHRMYXllci5zZXRUZXh0Q29udGVudFN0cmVhbShyZWFkYWJsZVN0cmVhbSk7XG4gICAgICAgICAgdGV4dExheWVyLnJlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYW5ub3RhdGlvbkxheWVyKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQW5ub3RhdGlvbkxheWVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBmaW5pc2hQYWludFRhc2socmVhc29uKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnhmYUxheWVyRmFjdG9yeSkge1xuICAgICAgaWYgKCF0aGlzLnhmYUxheWVyKSB7XG4gICAgICAgIHRoaXMueGZhTGF5ZXIgPSB0aGlzLnhmYUxheWVyRmFjdG9yeS5jcmVhdGVYZmFMYXllckJ1aWxkZXIoZGl2LCBwZGZQYWdlLCBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVuZGVyWGZhTGF5ZXIoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJ1Y3RUcmVlTGF5ZXJGYWN0b3J5ICYmIHRoaXMudGV4dExheWVyICYmIHRoaXMuY2FudmFzKSB7XG4gICAgICB0aGlzLl9vblRleHRMYXllclJlbmRlcmVkID0gZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQucGFnZU51bWJlciAhPT0gdGhpcy5pZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXZlbnRCdXMuX29mZihcInRleHRsYXllcnJlbmRlcmVkXCIsIHRoaXMuX29uVGV4dExheWVyUmVuZGVyZWQpO1xuXG4gICAgICAgIHRoaXMuX29uVGV4dExheWVyUmVuZGVyZWQgPSBudWxsO1xuXG4gICAgICAgIGlmICghdGhpcy5jYW52YXMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBkZlBhZ2UuZ2V0U3RydWN0VHJlZSgpLnRoZW4odHJlZSA9PiB7XG4gICAgICAgICAgaWYgKCF0cmVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCF0aGlzLmNhbnZhcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHRyZWVEb20gPSB0aGlzLnN0cnVjdFRyZWVMYXllci5yZW5kZXIodHJlZSk7XG4gICAgICAgICAgdHJlZURvbS5jbGFzc0xpc3QuYWRkKFwic3RydWN0VHJlZVwiKTtcbiAgICAgICAgICB0aGlzLmNhbnZhcy5hcHBlbmRDaGlsZCh0cmVlRG9tKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmV2ZW50QnVzLl9vbihcInRleHRsYXllcnJlbmRlcmVkXCIsIHRoaXMuX29uVGV4dExheWVyUmVuZGVyZWQpO1xuXG4gICAgICB0aGlzLnN0cnVjdFRyZWVMYXllciA9IHRoaXMuc3RydWN0VHJlZUxheWVyRmFjdG9yeS5jcmVhdGVTdHJ1Y3RUcmVlTGF5ZXJCdWlsZGVyKHBkZlBhZ2UpO1xuICAgIH1cblxuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxvYWRlZFwiLCB0cnVlKTtcbiAgICB0aGlzLmV2ZW50QnVzLmRpc3BhdGNoKFwicGFnZXJlbmRlclwiLCB7XG4gICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICBwYWdlTnVtYmVyOiB0aGlzLmlkXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG4gIH1cblxuICBwYWludE9uQ2FudmFzKGNhbnZhc1dyYXBwZXIpIHtcbiAgICBjb25zdCByZW5kZXJDYXBhYmlsaXR5ID0gKDAsIF9wZGZqc0xpYi5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBwcm9taXNlOiByZW5kZXJDYXBhYmlsaXR5LnByb21pc2UsXG5cbiAgICAgIG9uUmVuZGVyQ29udGludWUoY29udCkge1xuICAgICAgICBjb250KCk7XG4gICAgICB9LFxuXG4gICAgICBjYW5jZWwoKSB7XG4gICAgICAgIHJlbmRlclRhc2suY2FuY2VsKCk7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNhbnZhcy5oaWRkZW4gPSB0cnVlO1xuICAgIGxldCBpc0NhbnZhc0hpZGRlbiA9IHRydWU7XG5cbiAgICBjb25zdCBzaG93Q2FudmFzID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQ2FudmFzSGlkZGVuKSB7XG4gICAgICAgIGNhbnZhcy5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgaXNDYW52YXNIaWRkZW4gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY2FudmFzV3JhcHBlci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwge1xuICAgICAgYWxwaGE6IGZhbHNlXG4gICAgfSk7XG4gICAgY29uc3Qgb3V0cHV0U2NhbGUgPSB0aGlzLm91dHB1dFNjYWxlID0gbmV3IF91aV91dGlscy5PdXRwdXRTY2FsZSgpO1xuXG4gICAgaWYgKHRoaXMudXNlT25seUNzc1pvb20pIHtcbiAgICAgIGNvbnN0IGFjdHVhbFNpemVWaWV3cG9ydCA9IHZpZXdwb3J0LmNsb25lKHtcbiAgICAgICAgc2NhbGU6IF9wZGZqc0xpYi5QaXhlbHNQZXJJbmNoLlBERl9UT19DU1NfVU5JVFNcbiAgICAgIH0pO1xuICAgICAgb3V0cHV0U2NhbGUuc3ggKj0gYWN0dWFsU2l6ZVZpZXdwb3J0LndpZHRoIC8gdmlld3BvcnQud2lkdGg7XG4gICAgICBvdXRwdXRTY2FsZS5zeSAqPSBhY3R1YWxTaXplVmlld3BvcnQuaGVpZ2h0IC8gdmlld3BvcnQuaGVpZ2h0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1heENhbnZhc1BpeGVscyA+IDApIHtcbiAgICAgIGNvbnN0IHBpeGVsc0luVmlld3BvcnQgPSB2aWV3cG9ydC53aWR0aCAqIHZpZXdwb3J0LmhlaWdodDtcbiAgICAgIGNvbnN0IG1heFNjYWxlID0gTWF0aC5zcXJ0KHRoaXMubWF4Q2FudmFzUGl4ZWxzIC8gcGl4ZWxzSW5WaWV3cG9ydCk7XG5cbiAgICAgIGlmIChvdXRwdXRTY2FsZS5zeCA+IG1heFNjYWxlIHx8IG91dHB1dFNjYWxlLnN5ID4gbWF4U2NhbGUpIHtcbiAgICAgICAgb3V0cHV0U2NhbGUuc3ggPSBtYXhTY2FsZTtcbiAgICAgICAgb3V0cHV0U2NhbGUuc3kgPSBtYXhTY2FsZTtcbiAgICAgICAgdGhpcy5oYXNSZXN0cmljdGVkU2NhbGluZyA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhc1Jlc3RyaWN0ZWRTY2FsaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2Z4ID0gKDAsIF91aV91dGlscy5hcHByb3hpbWF0ZUZyYWN0aW9uKShvdXRwdXRTY2FsZS5zeCk7XG4gICAgY29uc3Qgc2Z5ID0gKDAsIF91aV91dGlscy5hcHByb3hpbWF0ZUZyYWN0aW9uKShvdXRwdXRTY2FsZS5zeSk7XG4gICAgY2FudmFzLndpZHRoID0gKDAsIF91aV91dGlscy5yb3VuZFRvRGl2aWRlKSh2aWV3cG9ydC53aWR0aCAqIG91dHB1dFNjYWxlLnN4LCBzZnhbMF0pO1xuICAgIGNhbnZhcy5oZWlnaHQgPSAoMCwgX3VpX3V0aWxzLnJvdW5kVG9EaXZpZGUpKHZpZXdwb3J0LmhlaWdodCAqIG91dHB1dFNjYWxlLnN5LCBzZnlbMF0pO1xuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9ICgwLCBfdWlfdXRpbHMucm91bmRUb0RpdmlkZSkodmlld3BvcnQud2lkdGgsIHNmeFsxXSkgKyBcInB4XCI7XG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9ICgwLCBfdWlfdXRpbHMucm91bmRUb0RpdmlkZSkodmlld3BvcnQuaGVpZ2h0LCBzZnlbMV0pICsgXCJweFwiO1xuICAgIHRoaXMucGFpbnRlZFZpZXdwb3J0TWFwLnNldChjYW52YXMsIHZpZXdwb3J0KTtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBvdXRwdXRTY2FsZS5zY2FsZWQgPyBbb3V0cHV0U2NhbGUuc3gsIDAsIDAsIG91dHB1dFNjYWxlLnN5LCAwLCAwXSA6IG51bGw7XG4gICAgY29uc3QgcmVuZGVyQ29udGV4dCA9IHtcbiAgICAgIGNhbnZhc0NvbnRleHQ6IGN0eCxcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIHZpZXdwb3J0OiB0aGlzLnZpZXdwb3J0LFxuICAgICAgYW5ub3RhdGlvbk1vZGU6IHRoaXMuI2Fubm90YXRpb25Nb2RlLFxuICAgICAgb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZTogdGhpcy5fb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZSxcbiAgICAgIGFubm90YXRpb25DYW52YXNNYXA6IHRoaXMuX2Fubm90YXRpb25DYW52YXNNYXAsXG4gICAgICBwYWdlQ29sb3JzOiB0aGlzLnBhZ2VDb2xvcnNcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlclRhc2sgPSB0aGlzLnBkZlBhZ2UucmVuZGVyKHJlbmRlckNvbnRleHQpO1xuXG4gICAgcmVuZGVyVGFzay5vbkNvbnRpbnVlID0gZnVuY3Rpb24gKGNvbnQpIHtcbiAgICAgIHNob3dDYW52YXMoKTtcblxuICAgICAgaWYgKHJlc3VsdC5vblJlbmRlckNvbnRpbnVlKSB7XG4gICAgICAgIHJlc3VsdC5vblJlbmRlckNvbnRpbnVlKGNvbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZW5kZXJUYXNrLnByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBzaG93Q2FudmFzKCk7XG4gICAgICByZW5kZXJDYXBhYmlsaXR5LnJlc29sdmUoKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIHNob3dDYW52YXMoKTtcbiAgICAgIHJlbmRlckNhcGFiaWxpdHkucmVqZWN0KGVycm9yKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcGFpbnRPblN2Zyh3cmFwcGVyKSB7XG4gICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlO1xuXG4gICAgY29uc3QgZW5zdXJlTm90Q2FuY2VsbGVkID0gKCkgPT4ge1xuICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgX3BkZmpzTGliLlJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbihgUmVuZGVyaW5nIGNhbmNlbGxlZCwgcGFnZSAke3RoaXMuaWR9YCwgXCJzdmdcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHBkZlBhZ2UgPSB0aGlzLnBkZlBhZ2U7XG4gICAgY29uc3QgYWN0dWFsU2l6ZVZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydC5jbG9uZSh7XG4gICAgICBzY2FsZTogX3BkZmpzTGliLlBpeGVsc1BlckluY2guUERGX1RPX0NTU19VTklUU1xuICAgIH0pO1xuICAgIGNvbnN0IHByb21pc2UgPSBwZGZQYWdlLmdldE9wZXJhdG9yTGlzdCh7XG4gICAgICBhbm5vdGF0aW9uTW9kZTogdGhpcy4jYW5ub3RhdGlvbk1vZGVcbiAgICB9KS50aGVuKG9wTGlzdCA9PiB7XG4gICAgICBlbnN1cmVOb3RDYW5jZWxsZWQoKTtcbiAgICAgIGNvbnN0IHN2Z0dmeCA9IG5ldyBfcGRmanNMaWIuU1ZHR3JhcGhpY3MocGRmUGFnZS5jb21tb25PYmpzLCBwZGZQYWdlLm9ianMpO1xuICAgICAgcmV0dXJuIHN2Z0dmeC5nZXRTVkcob3BMaXN0LCBhY3R1YWxTaXplVmlld3BvcnQpLnRoZW4oc3ZnID0+IHtcbiAgICAgICAgZW5zdXJlTm90Q2FuY2VsbGVkKCk7XG4gICAgICAgIHRoaXMuc3ZnID0gc3ZnO1xuICAgICAgICB0aGlzLnBhaW50ZWRWaWV3cG9ydE1hcC5zZXQoc3ZnLCBhY3R1YWxTaXplVmlld3BvcnQpO1xuICAgICAgICBzdmcuc3R5bGUud2lkdGggPSB3cmFwcGVyLnN0eWxlLndpZHRoO1xuICAgICAgICBzdmcuc3R5bGUuaGVpZ2h0ID0gd3JhcHBlci5zdHlsZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMucmVuZGVyaW5nU3RhdGUgPSBfdWlfdXRpbHMuUmVuZGVyaW5nU3RhdGVzLkZJTklTSEVEO1xuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHN2Zyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvbWlzZSxcblxuICAgICAgb25SZW5kZXJDb250aW51ZShjb250KSB7XG4gICAgICAgIGNvbnQoKTtcbiAgICAgIH0sXG5cbiAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgIH07XG4gIH1cblxuICBzZXRQYWdlTGFiZWwobGFiZWwpIHtcbiAgICB0aGlzLnBhZ2VMYWJlbCA9IHR5cGVvZiBsYWJlbCA9PT0gXCJzdHJpbmdcIiA/IGxhYmVsIDogbnVsbDtcblxuICAgIGlmICh0aGlzLnBhZ2VMYWJlbCAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5kaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1wYWdlLWxhYmVsXCIsIHRoaXMucGFnZUxhYmVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXYucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wYWdlLWxhYmVsXCIpO1xuICAgIH1cbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGUGFnZVZpZXcgPSBQREZQYWdlVmlldztcblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5jb21wYXRpYmlsaXR5UGFyYW1zID0gZXhwb3J0cy5PcHRpb25LaW5kID0gZXhwb3J0cy5BcHBPcHRpb25zID0gdm9pZCAwO1xuY29uc3QgY29tcGF0aWJpbGl0eVBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5leHBvcnRzLmNvbXBhdGliaWxpdHlQYXJhbXMgPSBjb21wYXRpYmlsaXR5UGFyYW1zO1xue1xuICBjb25zdCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IFwiXCI7XG4gIGNvbnN0IHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtIHx8IFwiXCI7XG4gIGNvbnN0IG1heFRvdWNoUG9pbnRzID0gbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzIHx8IDE7XG4gIGNvbnN0IGlzQW5kcm9pZCA9IC9BbmRyb2lkLy50ZXN0KHVzZXJBZ2VudCk7XG4gIGNvbnN0IGlzSU9TID0gL1xcYihpUGFkfGlQaG9uZXxpUG9kKSg/PTspLy50ZXN0KHVzZXJBZ2VudCkgfHwgcGxhdGZvcm0gPT09IFwiTWFjSW50ZWxcIiAmJiBtYXhUb3VjaFBvaW50cyA+IDE7XG5cbiAgKGZ1bmN0aW9uIGNoZWNrQ2FudmFzU2l6ZUxpbWl0YXRpb24oKSB7XG4gICAgaWYgKGlzSU9TIHx8IGlzQW5kcm9pZCkge1xuICAgICAgY29tcGF0aWJpbGl0eVBhcmFtcy5tYXhDYW52YXNQaXhlbHMgPSA1MjQyODgwO1xuICAgIH1cbiAgfSkoKTtcbn1cbmNvbnN0IE9wdGlvbktpbmQgPSB7XG4gIFZJRVdFUjogMHgwMixcbiAgQVBJOiAweDA0LFxuICBXT1JLRVI6IDB4MDgsXG4gIFBSRUZFUkVOQ0U6IDB4ODBcbn07XG5leHBvcnRzLk9wdGlvbktpbmQgPSBPcHRpb25LaW5kO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGFubm90YXRpb25Nb2RlOiB7XG4gICAgdmFsdWU6IDIsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVIgKyBPcHRpb25LaW5kLlBSRUZFUkVOQ0VcbiAgfSxcbiAgY3Vyc29yVG9vbE9uTG9hZDoge1xuICAgIHZhbHVlOiAwLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGRlZmF1bHRVcmw6IHtcbiAgICB2YWx1ZTogXCJjb21wcmVzc2VkLnRyYWNlbW9ua2V5LXBsZGktMDkucGRmXCIsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVJcbiAgfSxcbiAgZGVmYXVsdFpvb21WYWx1ZToge1xuICAgIHZhbHVlOiBcIlwiLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGRpc2FibGVIaXN0b3J5OiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSXG4gIH0sXG4gIGRpc2FibGVQYWdlTGFiZWxzOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGVuYWJsZVBlcm1pc3Npb25zOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGVuYWJsZVByaW50QXV0b1JvdGF0ZToge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGVuYWJsZVNjcmlwdGluZzoge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGV4dGVybmFsTGlua1JlbDoge1xuICAgIHZhbHVlOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXIgbm9mb2xsb3dcIixcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUlxuICB9LFxuICBleHRlcm5hbExpbmtUYXJnZXQ6IHtcbiAgICB2YWx1ZTogMCxcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUiArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBoaXN0b3J5VXBkYXRlVXJsOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGlnbm9yZURlc3RpbmF0aW9uWm9vbToge1xuICAgIHZhbHVlOiBmYWxzZSxcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUiArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBpbWFnZVJlc291cmNlc1BhdGg6IHtcbiAgICB2YWx1ZTogXCIuL2ltYWdlcy9cIixcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUlxuICB9LFxuICBtYXhDYW52YXNQaXhlbHM6IHtcbiAgICB2YWx1ZTogMTY3NzcyMTYsXG4gICAgY29tcGF0aWJpbGl0eTogY29tcGF0aWJpbGl0eVBhcmFtcy5tYXhDYW52YXNQaXhlbHMsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVJcbiAgfSxcbiAgcGFnZUNvbG9yc0JhY2tncm91bmQ6IHtcbiAgICB2YWx1ZTogXCJDYW52YXNcIixcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUiArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBwYWdlQ29sb3JzRm9yZWdyb3VuZDoge1xuICAgIHZhbHVlOiBcIkNhbnZhc1RleHRcIixcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUiArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBwZGZCdWdFbmFibGVkOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIHByaW50UmVzb2x1dGlvbjoge1xuICAgIHZhbHVlOiAxNTAsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVJcbiAgfSxcbiAgcmVuZGVyZXI6IHtcbiAgICB2YWx1ZTogXCJjYW52YXNcIixcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUlxuICB9LFxuICBzaWRlYmFyVmlld09uTG9hZDoge1xuICAgIHZhbHVlOiAtMSxcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUiArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBzY3JvbGxNb2RlT25Mb2FkOiB7XG4gICAgdmFsdWU6IC0xLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIHNwcmVhZE1vZGVPbkxvYWQ6IHtcbiAgICB2YWx1ZTogLTEsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVIgKyBPcHRpb25LaW5kLlBSRUZFUkVOQ0VcbiAgfSxcbiAgdGV4dExheWVyTW9kZToge1xuICAgIHZhbHVlOiAxLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIHVzZU9ubHlDc3Nab29tOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIHZpZXdlckNzc1RoZW1lOiB7XG4gICAgdmFsdWU6IDAsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVIgKyBPcHRpb25LaW5kLlBSRUZFUkVOQ0VcbiAgfSxcbiAgdmlld09uTG9hZDoge1xuICAgIHZhbHVlOiAwLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGNNYXBQYWNrZWQ6IHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSVxuICB9LFxuICBjTWFwVXJsOiB7XG4gICAgdmFsdWU6IFwiLi4vd2ViL2NtYXBzL1wiLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuQVBJXG4gIH0sXG4gIGRpc2FibGVBdXRvRmV0Y2g6IHtcbiAgICB2YWx1ZTogZmFsc2UsXG4gICAga2luZDogT3B0aW9uS2luZC5BUEkgKyBPcHRpb25LaW5kLlBSRUZFUkVOQ0VcbiAgfSxcbiAgZGlzYWJsZUZvbnRGYWNlOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuQVBJICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGRpc2FibGVSYW5nZToge1xuICAgIHZhbHVlOiBmYWxzZSxcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSSArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBkaXNhYmxlU3RyZWFtOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuQVBJICsgT3B0aW9uS2luZC5QUkVGRVJFTkNFXG4gIH0sXG4gIGRvY0Jhc2VVcmw6IHtcbiAgICB2YWx1ZTogXCJcIixcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSVxuICB9LFxuICBlbmFibGVYZmE6IHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSSArIE9wdGlvbktpbmQuUFJFRkVSRU5DRVxuICB9LFxuICBmb250RXh0cmFQcm9wZXJ0aWVzOiB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuQVBJXG4gIH0sXG4gIGlzRXZhbFN1cHBvcnRlZDoge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuQVBJXG4gIH0sXG4gIG1heEltYWdlU2l6ZToge1xuICAgIHZhbHVlOiAtMSxcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSVxuICB9LFxuICBwZGZCdWc6IHtcbiAgICB2YWx1ZTogZmFsc2UsXG4gICAga2luZDogT3B0aW9uS2luZC5BUElcbiAgfSxcbiAgc3RhbmRhcmRGb250RGF0YVVybDoge1xuICAgIHZhbHVlOiBcIi4uL3dlYi9zdGFuZGFyZF9mb250cy9cIixcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSVxuICB9LFxuICB2ZXJib3NpdHk6IHtcbiAgICB2YWx1ZTogMSxcbiAgICBraW5kOiBPcHRpb25LaW5kLkFQSVxuICB9LFxuICB3b3JrZXJQb3J0OiB7XG4gICAgdmFsdWU6IG51bGwsXG4gICAga2luZDogT3B0aW9uS2luZC5XT1JLRVJcbiAgfSxcbiAgd29ya2VyU3JjOiB7XG4gICAgdmFsdWU6IFwiLi4vYnVpbGQvcGRmLndvcmtlci5qc1wiLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuV09SS0VSXG4gIH1cbn07XG57XG4gIGRlZmF1bHRPcHRpb25zLmRpc2FibGVQcmVmZXJlbmNlcyA9IHtcbiAgICB2YWx1ZTogZmFsc2UsXG4gICAga2luZDogT3B0aW9uS2luZC5WSUVXRVJcbiAgfTtcbiAgZGVmYXVsdE9wdGlvbnMubG9jYWxlID0ge1xuICAgIHZhbHVlOiBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgXCJlbi1VU1wiLFxuICAgIGtpbmQ6IE9wdGlvbktpbmQuVklFV0VSXG4gIH07XG4gIGRlZmF1bHRPcHRpb25zLnNhbmRib3hCdW5kbGVTcmMgPSB7XG4gICAgdmFsdWU6IFwiLi4vYnVpbGQvcGRmLnNhbmRib3guanNcIixcbiAgICBraW5kOiBPcHRpb25LaW5kLlZJRVdFUlxuICB9O1xuICBkZWZhdWx0T3B0aW9ucy5yZW5kZXJlci5raW5kICs9IE9wdGlvbktpbmQuUFJFRkVSRU5DRTtcbn1cbmNvbnN0IHVzZXJPcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuY2xhc3MgQXBwT3B0aW9ucyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBpbml0aWFsaXplIEFwcE9wdGlvbnMuXCIpO1xuICB9XG5cbiAgc3RhdGljIGdldChuYW1lKSB7XG4gICAgY29uc3QgdXNlck9wdGlvbiA9IHVzZXJPcHRpb25zW25hbWVdO1xuXG4gICAgaWYgKHVzZXJPcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVzZXJPcHRpb247XG4gICAgfVxuXG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbiA9IGRlZmF1bHRPcHRpb25zW25hbWVdO1xuXG4gICAgaWYgKGRlZmF1bHRPcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRPcHRpb24uY29tcGF0aWJpbGl0eSA/PyBkZWZhdWx0T3B0aW9uLnZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBzdGF0aWMgZ2V0QWxsKGtpbmQgPSBudWxsKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZGVmYXVsdE9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb24gPSBkZWZhdWx0T3B0aW9uc1tuYW1lXTtcblxuICAgICAgaWYgKGtpbmQpIHtcbiAgICAgICAgaWYgKChraW5kICYgZGVmYXVsdE9wdGlvbi5raW5kKSA9PT0gMCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGtpbmQgPT09IE9wdGlvbktpbmQuUFJFRkVSRU5DRSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gZGVmYXVsdE9wdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cbiAgICAgICAgICBpZiAodmFsdWVUeXBlID09PSBcImJvb2xlYW5cIiB8fCB2YWx1ZVR5cGUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWVUeXBlID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgICAgICAgICBvcHRpb25zW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHlwZSBmb3IgcHJlZmVyZW5jZTogJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJPcHRpb24gPSB1c2VyT3B0aW9uc1tuYW1lXTtcbiAgICAgIG9wdGlvbnNbbmFtZV0gPSB1c2VyT3B0aW9uICE9PSB1bmRlZmluZWQgPyB1c2VyT3B0aW9uIDogZGVmYXVsdE9wdGlvbi5jb21wYXRpYmlsaXR5ID8/IGRlZmF1bHRPcHRpb24udmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICBzdGF0aWMgc2V0KG5hbWUsIHZhbHVlKSB7XG4gICAgdXNlck9wdGlvbnNbbmFtZV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRBbGwob3B0aW9ucykge1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICB1c2VyT3B0aW9uc1tuYW1lXSA9IG9wdGlvbnNbbmFtZV07XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlbW92ZShuYW1lKSB7XG4gICAgZGVsZXRlIHVzZXJPcHRpb25zW25hbWVdO1xuICB9XG5cbiAgc3RhdGljIF9oYXNVc2VyT3B0aW9ucygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModXNlck9wdGlvbnMpLmxlbmd0aCA+IDA7XG4gIH1cblxufVxuXG5leHBvcnRzLkFwcE9wdGlvbnMgPSBBcHBPcHRpb25zO1xuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlBERlJlbmRlcmluZ1F1ZXVlID0gdm9pZCAwO1xuXG52YXIgX3BkZmpzTGliID0gX193X3BkZmpzX3JlcXVpcmVfXygzKTtcblxudmFyIF91aV91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oNik7XG5cbmNvbnN0IENMRUFOVVBfVElNRU9VVCA9IDMwMDAwO1xuXG5jbGFzcyBQREZSZW5kZXJpbmdRdWV1ZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucGRmVmlld2VyID0gbnVsbDtcbiAgICB0aGlzLnBkZlRodW1ibmFpbFZpZXdlciA9IG51bGw7XG4gICAgdGhpcy5vbklkbGUgPSBudWxsO1xuICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5UGFnZSA9IG51bGw7XG4gICAgdGhpcy5pZGxlVGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5wcmludGluZyA9IGZhbHNlO1xuICAgIHRoaXMuaXNUaHVtYm5haWxWaWV3RW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgc2V0Vmlld2VyKHBkZlZpZXdlcikge1xuICAgIHRoaXMucGRmVmlld2VyID0gcGRmVmlld2VyO1xuICB9XG5cbiAgc2V0VGh1bWJuYWlsVmlld2VyKHBkZlRodW1ibmFpbFZpZXdlcikge1xuICAgIHRoaXMucGRmVGh1bWJuYWlsVmlld2VyID0gcGRmVGh1bWJuYWlsVmlld2VyO1xuICB9XG5cbiAgaXNIaWdoZXN0UHJpb3JpdHkodmlldykge1xuICAgIHJldHVybiB0aGlzLmhpZ2hlc3RQcmlvcml0eVBhZ2UgPT09IHZpZXcucmVuZGVyaW5nSWQ7XG4gIH1cblxuICBoYXNWaWV3ZXIoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5wZGZWaWV3ZXI7XG4gIH1cblxuICByZW5kZXJIaWdoZXN0UHJpb3JpdHkoY3VycmVudGx5VmlzaWJsZVBhZ2VzKSB7XG4gICAgaWYgKHRoaXMuaWRsZVRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlkbGVUaW1lb3V0KTtcbiAgICAgIHRoaXMuaWRsZVRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBkZlZpZXdlci5mb3JjZVJlbmRlcmluZyhjdXJyZW50bHlWaXNpYmxlUGFnZXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNUaHVtYm5haWxWaWV3RW5hYmxlZCAmJiB0aGlzLnBkZlRodW1ibmFpbFZpZXdlcj8uZm9yY2VSZW5kZXJpbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByaW50aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub25JZGxlKSB7XG4gICAgICB0aGlzLmlkbGVUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLm9uSWRsZS5iaW5kKHRoaXMpLCBDTEVBTlVQX1RJTUVPVVQpO1xuICAgIH1cbiAgfVxuXG4gIGdldEhpZ2hlc3RQcmlvcml0eSh2aXNpYmxlLCB2aWV3cywgc2Nyb2xsZWREb3duLCBwcmVSZW5kZXJFeHRyYSA9IGZhbHNlKSB7XG4gICAgY29uc3QgdmlzaWJsZVZpZXdzID0gdmlzaWJsZS52aWV3cyxcbiAgICAgICAgICBudW1WaXNpYmxlID0gdmlzaWJsZVZpZXdzLmxlbmd0aDtcblxuICAgIGlmIChudW1WaXNpYmxlID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZpc2libGU7IGkrKykge1xuICAgICAgY29uc3QgdmlldyA9IHZpc2libGVWaWV3c1tpXS52aWV3O1xuXG4gICAgICBpZiAoIXRoaXMuaXNWaWV3RmluaXNoZWQodmlldykpIHtcbiAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RJZCA9IHZpc2libGUuZmlyc3QuaWQsXG4gICAgICAgICAgbGFzdElkID0gdmlzaWJsZS5sYXN0LmlkO1xuXG4gICAgaWYgKGxhc3RJZCAtIGZpcnN0SWQgKyAxID4gbnVtVmlzaWJsZSkge1xuICAgICAgY29uc3QgdmlzaWJsZUlkcyA9IHZpc2libGUuaWRzO1xuXG4gICAgICBmb3IgKGxldCBpID0gMSwgaWkgPSBsYXN0SWQgLSBmaXJzdElkOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBjb25zdCBob2xlSWQgPSBzY3JvbGxlZERvd24gPyBmaXJzdElkICsgaSA6IGxhc3RJZCAtIGk7XG5cbiAgICAgICAgaWYgKHZpc2libGVJZHMuaGFzKGhvbGVJZCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhvbGVWaWV3ID0gdmlld3NbaG9sZUlkIC0gMV07XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzVmlld0ZpbmlzaGVkKGhvbGVWaWV3KSkge1xuICAgICAgICAgIHJldHVybiBob2xlVmlldztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBwcmVSZW5kZXJJbmRleCA9IHNjcm9sbGVkRG93biA/IGxhc3RJZCA6IGZpcnN0SWQgLSAyO1xuICAgIGxldCBwcmVSZW5kZXJWaWV3ID0gdmlld3NbcHJlUmVuZGVySW5kZXhdO1xuXG4gICAgaWYgKHByZVJlbmRlclZpZXcgJiYgIXRoaXMuaXNWaWV3RmluaXNoZWQocHJlUmVuZGVyVmlldykpIHtcbiAgICAgIHJldHVybiBwcmVSZW5kZXJWaWV3O1xuICAgIH1cblxuICAgIGlmIChwcmVSZW5kZXJFeHRyYSkge1xuICAgICAgcHJlUmVuZGVySW5kZXggKz0gc2Nyb2xsZWREb3duID8gMSA6IC0xO1xuICAgICAgcHJlUmVuZGVyVmlldyA9IHZpZXdzW3ByZVJlbmRlckluZGV4XTtcblxuICAgICAgaWYgKHByZVJlbmRlclZpZXcgJiYgIXRoaXMuaXNWaWV3RmluaXNoZWQocHJlUmVuZGVyVmlldykpIHtcbiAgICAgICAgcmV0dXJuIHByZVJlbmRlclZpZXc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpc1ZpZXdGaW5pc2hlZCh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcucmVuZGVyaW5nU3RhdGUgPT09IF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuRklOSVNIRUQ7XG4gIH1cblxuICByZW5kZXJWaWV3KHZpZXcpIHtcbiAgICBzd2l0Y2ggKHZpZXcucmVuZGVyaW5nU3RhdGUpIHtcbiAgICAgIGNhc2UgX3VpX3V0aWxzLlJlbmRlcmluZ1N0YXRlcy5GSU5JU0hFRDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjYXNlIF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuUEFVU0VEOlxuICAgICAgICB0aGlzLmhpZ2hlc3RQcmlvcml0eVBhZ2UgPSB2aWV3LnJlbmRlcmluZ0lkO1xuICAgICAgICB2aWV3LnJlc3VtZSgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBfdWlfdXRpbHMuUmVuZGVyaW5nU3RhdGVzLlJVTk5JTkc6XG4gICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5UGFnZSA9IHZpZXcucmVuZGVyaW5nSWQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuSU5JVElBTDpcbiAgICAgICAgdGhpcy5oaWdoZXN0UHJpb3JpdHlQYWdlID0gdmlldy5yZW5kZXJpbmdJZDtcbiAgICAgICAgdmlldy5kcmF3KCkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJIaWdoZXN0UHJpb3JpdHkoKTtcbiAgICAgICAgfSkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICBpZiAocmVhc29uIGluc3RhbmNlb2YgX3BkZmpzTGliLlJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYHJlbmRlclZpZXc6IFwiJHtyZWFzb259XCJgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cblxuZXhwb3J0cy5QREZSZW5kZXJpbmdRdWV1ZSA9IFBERlJlbmRlcmluZ1F1ZXVlO1xuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlRleHRIaWdobGlnaHRlciA9IHZvaWQgMDtcblxuY2xhc3MgVGV4dEhpZ2hsaWdodGVyIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGZpbmRDb250cm9sbGVyLFxuICAgIGV2ZW50QnVzLFxuICAgIHBhZ2VJbmRleFxuICB9KSB7XG4gICAgdGhpcy5maW5kQ29udHJvbGxlciA9IGZpbmRDb250cm9sbGVyO1xuICAgIHRoaXMubWF0Y2hlcyA9IFtdO1xuICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICB0aGlzLnBhZ2VJZHggPSBwYWdlSW5kZXg7XG4gICAgdGhpcy5fb25VcGRhdGVUZXh0TGF5ZXJNYXRjaGVzID0gbnVsbDtcbiAgICB0aGlzLnRleHREaXZzID0gbnVsbDtcbiAgICB0aGlzLnRleHRDb250ZW50SXRlbXNTdHIgPSBudWxsO1xuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgc2V0VGV4dE1hcHBpbmcoZGl2cywgdGV4dHMpIHtcbiAgICB0aGlzLnRleHREaXZzID0gZGl2cztcbiAgICB0aGlzLnRleHRDb250ZW50SXRlbXNTdHIgPSB0ZXh0cztcbiAgfVxuXG4gIGVuYWJsZSgpIHtcbiAgICBpZiAoIXRoaXMudGV4dERpdnMgfHwgIXRoaXMudGV4dENvbnRlbnRJdGVtc1N0cikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGV4dCBkaXZzIGFuZCBzdHJpbmdzIGhhdmUgbm90IGJlZW4gc2V0LlwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUZXh0SGlnaGxpZ2h0ZXIgaXMgYWxyZWFkeSBlbmFibGVkLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLl9vblVwZGF0ZVRleHRMYXllck1hdGNoZXMpIHtcbiAgICAgIHRoaXMuX29uVXBkYXRlVGV4dExheWVyTWF0Y2hlcyA9IGV2dCA9PiB7XG4gICAgICAgIGlmIChldnQucGFnZUluZGV4ID09PSB0aGlzLnBhZ2VJZHggfHwgZXZ0LnBhZ2VJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVNYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZXZlbnRCdXMuX29uKFwidXBkYXRldGV4dGxheWVybWF0Y2hlc1wiLCB0aGlzLl9vblVwZGF0ZVRleHRMYXllck1hdGNoZXMpO1xuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZU1hdGNoZXMoKTtcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLl9vblVwZGF0ZVRleHRMYXllck1hdGNoZXMpIHtcbiAgICAgIHRoaXMuZXZlbnRCdXMuX29mZihcInVwZGF0ZXRleHRsYXllcm1hdGNoZXNcIiwgdGhpcy5fb25VcGRhdGVUZXh0TGF5ZXJNYXRjaGVzKTtcblxuICAgICAgdGhpcy5fb25VcGRhdGVUZXh0TGF5ZXJNYXRjaGVzID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBfY29udmVydE1hdGNoZXMobWF0Y2hlcywgbWF0Y2hlc0xlbmd0aCkge1xuICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIHRleHRDb250ZW50SXRlbXNTdHJcbiAgICB9ID0gdGhpcztcbiAgICBsZXQgaSA9IDAsXG4gICAgICAgIGlJbmRleCA9IDA7XG4gICAgY29uc3QgZW5kID0gdGV4dENvbnRlbnRJdGVtc1N0ci5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuXG4gICAgZm9yIChsZXQgbSA9IDAsIG1tID0gbWF0Y2hlcy5sZW5ndGg7IG0gPCBtbTsgbSsrKSB7XG4gICAgICBsZXQgbWF0Y2hJZHggPSBtYXRjaGVzW21dO1xuXG4gICAgICB3aGlsZSAoaSAhPT0gZW5kICYmIG1hdGNoSWR4ID49IGlJbmRleCArIHRleHRDb250ZW50SXRlbXNTdHJbaV0ubGVuZ3RoKSB7XG4gICAgICAgIGlJbmRleCArPSB0ZXh0Q29udGVudEl0ZW1zU3RyW2ldLmxlbmd0aDtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuXG4gICAgICBpZiAoaSA9PT0gdGV4dENvbnRlbnRJdGVtc1N0ci5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmaW5kIGEgbWF0Y2hpbmcgbWFwcGluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF0Y2ggPSB7XG4gICAgICAgIGJlZ2luOiB7XG4gICAgICAgICAgZGl2SWR4OiBpLFxuICAgICAgICAgIG9mZnNldDogbWF0Y2hJZHggLSBpSW5kZXhcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG1hdGNoSWR4ICs9IG1hdGNoZXNMZW5ndGhbbV07XG5cbiAgICAgIHdoaWxlIChpICE9PSBlbmQgJiYgbWF0Y2hJZHggPiBpSW5kZXggKyB0ZXh0Q29udGVudEl0ZW1zU3RyW2ldLmxlbmd0aCkge1xuICAgICAgICBpSW5kZXggKz0gdGV4dENvbnRlbnRJdGVtc1N0cltpXS5sZW5ndGg7XG4gICAgICAgIGkrKztcbiAgICAgIH1cblxuICAgICAgbWF0Y2guZW5kID0ge1xuICAgICAgICBkaXZJZHg6IGksXG4gICAgICAgIG9mZnNldDogbWF0Y2hJZHggLSBpSW5kZXhcbiAgICAgIH07XG4gICAgICByZXN1bHQucHVzaChtYXRjaCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIF9yZW5kZXJNYXRjaGVzKG1hdGNoZXMpIHtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBmaW5kQ29udHJvbGxlcixcbiAgICAgIHBhZ2VJZHhcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICB0ZXh0Q29udGVudEl0ZW1zU3RyLFxuICAgICAgdGV4dERpdnNcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBpc1NlbGVjdGVkUGFnZSA9IHBhZ2VJZHggPT09IGZpbmRDb250cm9sbGVyLnNlbGVjdGVkLnBhZ2VJZHg7XG4gICAgY29uc3Qgc2VsZWN0ZWRNYXRjaElkeCA9IGZpbmRDb250cm9sbGVyLnNlbGVjdGVkLm1hdGNoSWR4O1xuICAgIGNvbnN0IGhpZ2hsaWdodEFsbCA9IGZpbmRDb250cm9sbGVyLnN0YXRlLmhpZ2hsaWdodEFsbDtcbiAgICBsZXQgcHJldkVuZCA9IG51bGw7XG4gICAgY29uc3QgaW5maW5pdHkgPSB7XG4gICAgICBkaXZJZHg6IC0xLFxuICAgICAgb2Zmc2V0OiB1bmRlZmluZWRcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gYmVnaW5UZXh0KGJlZ2luLCBjbGFzc05hbWUpIHtcbiAgICAgIGNvbnN0IGRpdklkeCA9IGJlZ2luLmRpdklkeDtcbiAgICAgIHRleHREaXZzW2RpdklkeF0udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgcmV0dXJuIGFwcGVuZFRleHRUb0RpdihkaXZJZHgsIDAsIGJlZ2luLm9mZnNldCwgY2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcHBlbmRUZXh0VG9EaXYoZGl2SWR4LCBmcm9tT2Zmc2V0LCB0b09mZnNldCwgY2xhc3NOYW1lKSB7XG4gICAgICBsZXQgZGl2ID0gdGV4dERpdnNbZGl2SWR4XTtcblxuICAgICAgaWYgKGRpdi5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBkaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3BhbiwgZGl2KTtcbiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB0ZXh0RGl2c1tkaXZJZHhdID0gc3BhbjtcbiAgICAgICAgZGl2ID0gc3BhbjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29udGVudCA9IHRleHRDb250ZW50SXRlbXNTdHJbZGl2SWR4XS5zdWJzdHJpbmcoZnJvbU9mZnNldCwgdG9PZmZzZXQpO1xuICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbnRlbnQpO1xuXG4gICAgICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBgJHtjbGFzc05hbWV9IGFwcGVuZGVkYDtcbiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICByZXR1cm4gY2xhc3NOYW1lLmluY2x1ZGVzKFwic2VsZWN0ZWRcIikgPyBzcGFuLm9mZnNldExlZnQgOiAwO1xuICAgICAgfVxuXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgaTAgPSBzZWxlY3RlZE1hdGNoSWR4LFxuICAgICAgICBpMSA9IGkwICsgMTtcblxuICAgIGlmIChoaWdobGlnaHRBbGwpIHtcbiAgICAgIGkwID0gMDtcbiAgICAgIGkxID0gbWF0Y2hlcy5sZW5ndGg7XG4gICAgfSBlbHNlIGlmICghaXNTZWxlY3RlZFBhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gaTA7IGkgPCBpMTsgaSsrKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IG1hdGNoZXNbaV07XG4gICAgICBjb25zdCBiZWdpbiA9IG1hdGNoLmJlZ2luO1xuICAgICAgY29uc3QgZW5kID0gbWF0Y2guZW5kO1xuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IGlzU2VsZWN0ZWRQYWdlICYmIGkgPT09IHNlbGVjdGVkTWF0Y2hJZHg7XG4gICAgICBjb25zdCBoaWdobGlnaHRTdWZmaXggPSBpc1NlbGVjdGVkID8gXCIgc2VsZWN0ZWRcIiA6IFwiXCI7XG4gICAgICBsZXQgc2VsZWN0ZWRMZWZ0ID0gMDtcblxuICAgICAgaWYgKCFwcmV2RW5kIHx8IGJlZ2luLmRpdklkeCAhPT0gcHJldkVuZC5kaXZJZHgpIHtcbiAgICAgICAgaWYgKHByZXZFbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBhcHBlbmRUZXh0VG9EaXYocHJldkVuZC5kaXZJZHgsIHByZXZFbmQub2Zmc2V0LCBpbmZpbml0eS5vZmZzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVnaW5UZXh0KGJlZ2luKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcGVuZFRleHRUb0RpdihwcmV2RW5kLmRpdklkeCwgcHJldkVuZC5vZmZzZXQsIGJlZ2luLm9mZnNldCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChiZWdpbi5kaXZJZHggPT09IGVuZC5kaXZJZHgpIHtcbiAgICAgICAgc2VsZWN0ZWRMZWZ0ID0gYXBwZW5kVGV4dFRvRGl2KGJlZ2luLmRpdklkeCwgYmVnaW4ub2Zmc2V0LCBlbmQub2Zmc2V0LCBcImhpZ2hsaWdodFwiICsgaGlnaGxpZ2h0U3VmZml4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkTGVmdCA9IGFwcGVuZFRleHRUb0RpdihiZWdpbi5kaXZJZHgsIGJlZ2luLm9mZnNldCwgaW5maW5pdHkub2Zmc2V0LCBcImhpZ2hsaWdodCBiZWdpblwiICsgaGlnaGxpZ2h0U3VmZml4KTtcblxuICAgICAgICBmb3IgKGxldCBuMCA9IGJlZ2luLmRpdklkeCArIDEsIG4xID0gZW5kLmRpdklkeDsgbjAgPCBuMTsgbjArKykge1xuICAgICAgICAgIHRleHREaXZzW24wXS5jbGFzc05hbWUgPSBcImhpZ2hsaWdodCBtaWRkbGVcIiArIGhpZ2hsaWdodFN1ZmZpeDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJlZ2luVGV4dChlbmQsIFwiaGlnaGxpZ2h0IGVuZFwiICsgaGlnaGxpZ2h0U3VmZml4KTtcbiAgICAgIH1cblxuICAgICAgcHJldkVuZCA9IGVuZDtcblxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgZmluZENvbnRyb2xsZXIuc2Nyb2xsTWF0Y2hJbnRvVmlldyh7XG4gICAgICAgICAgZWxlbWVudDogdGV4dERpdnNbYmVnaW4uZGl2SWR4XSxcbiAgICAgICAgICBzZWxlY3RlZExlZnQsXG4gICAgICAgICAgcGFnZUluZGV4OiBwYWdlSWR4LFxuICAgICAgICAgIG1hdGNoSW5kZXg6IHNlbGVjdGVkTWF0Y2hJZHhcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByZXZFbmQpIHtcbiAgICAgIGFwcGVuZFRleHRUb0RpdihwcmV2RW5kLmRpdklkeCwgcHJldkVuZC5vZmZzZXQsIGluZmluaXR5Lm9mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgX3VwZGF0ZU1hdGNoZXMoKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBmaW5kQ29udHJvbGxlcixcbiAgICAgIG1hdGNoZXMsXG4gICAgICBwYWdlSWR4XG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgdGV4dENvbnRlbnRJdGVtc1N0cixcbiAgICAgIHRleHREaXZzXG4gICAgfSA9IHRoaXM7XG4gICAgbGV0IGNsZWFyZWRVbnRpbERpdklkeCA9IC0xO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbWF0Y2hlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IG1hdGNoZXNbaV07XG4gICAgICBjb25zdCBiZWdpbiA9IE1hdGgubWF4KGNsZWFyZWRVbnRpbERpdklkeCwgbWF0Y2guYmVnaW4uZGl2SWR4KTtcblxuICAgICAgZm9yIChsZXQgbiA9IGJlZ2luLCBlbmQgPSBtYXRjaC5lbmQuZGl2SWR4OyBuIDw9IGVuZDsgbisrKSB7XG4gICAgICAgIGNvbnN0IGRpdiA9IHRleHREaXZzW25dO1xuICAgICAgICBkaXYudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudEl0ZW1zU3RyW25dO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gXCJcIjtcbiAgICAgIH1cblxuICAgICAgY2xlYXJlZFVudGlsRGl2SWR4ID0gbWF0Y2guZW5kLmRpdklkeCArIDE7XG4gICAgfVxuXG4gICAgaWYgKCFmaW5kQ29udHJvbGxlcj8uaGlnaGxpZ2h0TWF0Y2hlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VNYXRjaGVzID0gZmluZENvbnRyb2xsZXIucGFnZU1hdGNoZXNbcGFnZUlkeF0gfHwgbnVsbDtcbiAgICBjb25zdCBwYWdlTWF0Y2hlc0xlbmd0aCA9IGZpbmRDb250cm9sbGVyLnBhZ2VNYXRjaGVzTGVuZ3RoW3BhZ2VJZHhdIHx8IG51bGw7XG4gICAgdGhpcy5tYXRjaGVzID0gdGhpcy5fY29udmVydE1hdGNoZXMocGFnZU1hdGNoZXMsIHBhZ2VNYXRjaGVzTGVuZ3RoKTtcblxuICAgIHRoaXMuX3JlbmRlck1hdGNoZXModGhpcy5tYXRjaGVzKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuVGV4dEhpZ2hsaWdodGVyID0gVGV4dEhpZ2hsaWdodGVyO1xuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkRvd25sb2FkTWFuYWdlciA9IHZvaWQgMDtcblxudmFyIF9wZGZqc0xpYiA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbjtcblxuZnVuY3Rpb24gZG93bmxvYWQoYmxvYlVybCwgZmlsZW5hbWUpIHtcbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXG4gIGlmICghYS5jbGljaykge1xuICAgIHRocm93IG5ldyBFcnJvcignRG93bmxvYWRNYW5hZ2VyOiBcImEuY2xpY2soKVwiIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gIH1cblxuICBhLmhyZWYgPSBibG9iVXJsO1xuICBhLnRhcmdldCA9IFwiX3BhcmVudFwiO1xuXG4gIGlmIChcImRvd25sb2FkXCIgaW4gYSkge1xuICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTtcbiAgfVxuXG4gIChkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoYSk7XG4gIGEuY2xpY2soKTtcbiAgYS5yZW1vdmUoKTtcbn1cblxuY2xhc3MgRG93bmxvYWRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fb3BlbkJsb2JVcmxzID0gbmV3IFdlYWtNYXAoKTtcbiAgfVxuXG4gIGRvd25sb2FkVXJsKHVybCwgZmlsZW5hbWUpIHtcbiAgICBpZiAoISgwLCBfcGRmanNMaWIuY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCkodXJsLCBcImh0dHA6Ly9leGFtcGxlLmNvbVwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgZG93bmxvYWRVcmwgLSBub3QgYSB2YWxpZCBVUkw6ICR7dXJsfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRvd25sb2FkKHVybCArIFwiI3BkZmpzLmFjdGlvbj1kb3dubG9hZFwiLCBmaWxlbmFtZSk7XG4gIH1cblxuICBkb3dubG9hZERhdGEoZGF0YSwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlKSB7XG4gICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2RhdGFdLCB7XG4gICAgICB0eXBlOiBjb250ZW50VHlwZVxuICAgIH0pKTtcbiAgICBkb3dubG9hZChibG9iVXJsLCBmaWxlbmFtZSk7XG4gIH1cblxuICBvcGVuT3JEb3dubG9hZERhdGEoZWxlbWVudCwgZGF0YSwgZmlsZW5hbWUpIHtcbiAgICBjb25zdCBpc1BkZkRhdGEgPSAoMCwgX3BkZmpzTGliLmlzUGRmRmlsZSkoZmlsZW5hbWUpO1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gaXNQZGZEYXRhID8gXCJhcHBsaWNhdGlvbi9wZGZcIiA6IFwiXCI7XG5cbiAgICBpZiAoaXNQZGZEYXRhKSB7XG4gICAgICBsZXQgYmxvYlVybCA9IHRoaXMuX29wZW5CbG9iVXJscy5nZXQoZWxlbWVudCk7XG5cbiAgICAgIGlmICghYmxvYlVybCkge1xuICAgICAgICBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbZGF0YV0sIHtcbiAgICAgICAgICB0eXBlOiBjb250ZW50VHlwZVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgdGhpcy5fb3BlbkJsb2JVcmxzLnNldChlbGVtZW50LCBibG9iVXJsKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHZpZXdlclVybDtcbiAgICAgIHZpZXdlclVybCA9IFwiP2ZpbGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoYmxvYlVybCArIFwiI1wiICsgZmlsZW5hbWUpO1xuXG4gICAgICB0cnkge1xuICAgICAgICB3aW5kb3cub3Blbih2aWV3ZXJVcmwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYG9wZW5PckRvd25sb2FkRGF0YTogJHtleH1gKTtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChibG9iVXJsKTtcblxuICAgICAgICB0aGlzLl9vcGVuQmxvYlVybHMuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZG93bmxvYWREYXRhKGRhdGEsIGZpbGVuYW1lLCBjb250ZW50VHlwZSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZG93bmxvYWQoYmxvYiwgdXJsLCBmaWxlbmFtZSwgc291cmNlRXZlbnRUeXBlID0gXCJkb3dubG9hZFwiKSB7XG4gICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgZG93bmxvYWQoYmxvYlVybCwgZmlsZW5hbWUpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5Eb3dubG9hZE1hbmFnZXIgPSBEb3dubG9hZE1hbmFnZXI7XG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIGV4cG9ydHMpID0+IHtcblxuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgKHtcbiAgdmFsdWU6IHRydWVcbn0pKTtcbmV4cG9ydHMuV2FpdE9uVHlwZSA9IGV4cG9ydHMuRXZlbnRCdXMgPSBleHBvcnRzLkF1dG9tYXRpb25FdmVudEJ1cyA9IHZvaWQgMDtcbmV4cG9ydHMud2FpdE9uRXZlbnRPclRpbWVvdXQgPSB3YWl0T25FdmVudE9yVGltZW91dDtcbmNvbnN0IFdhaXRPblR5cGUgPSB7XG4gIEVWRU5UOiBcImV2ZW50XCIsXG4gIFRJTUVPVVQ6IFwidGltZW91dFwiXG59O1xuZXhwb3J0cy5XYWl0T25UeXBlID0gV2FpdE9uVHlwZTtcblxuZnVuY3Rpb24gd2FpdE9uRXZlbnRPclRpbWVvdXQoe1xuICB0YXJnZXQsXG4gIG5hbWUsXG4gIGRlbGF5ID0gMFxufSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiIHx8ICEobmFtZSAmJiB0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikgfHwgIShOdW1iZXIuaXNJbnRlZ2VyKGRlbGF5KSAmJiBkZWxheSA+PSAwKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwid2FpdE9uRXZlbnRPclRpbWVvdXQgLSBpbnZhbGlkIHBhcmFtZXRlcnMuXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZXIodHlwZSkge1xuICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEV2ZW50QnVzKSB7XG4gICAgICAgIHRhcmdldC5fb2ZmKG5hbWUsIGV2ZW50SGFuZGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudEhhbmRsZXIpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUodHlwZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnRIYW5kbGVyID0gaGFuZGxlci5iaW5kKG51bGwsIFdhaXRPblR5cGUuRVZFTlQpO1xuXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEV2ZW50QnVzKSB7XG4gICAgICB0YXJnZXQuX29uKG5hbWUsIGV2ZW50SGFuZGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50SGFuZGxlcik7XG4gICAgfVxuXG4gICAgY29uc3QgdGltZW91dEhhbmRsZXIgPSBoYW5kbGVyLmJpbmQobnVsbCwgV2FpdE9uVHlwZS5USU1FT1VUKTtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCh0aW1lb3V0SGFuZGxlciwgZGVsYXkpO1xuICB9KTtcbn1cblxuY2xhc3MgRXZlbnRCdXMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgb24oZXZlbnROYW1lLCBsaXN0ZW5lciwgb3B0aW9ucyA9IG51bGwpIHtcbiAgICB0aGlzLl9vbihldmVudE5hbWUsIGxpc3RlbmVyLCB7XG4gICAgICBleHRlcm5hbDogdHJ1ZSxcbiAgICAgIG9uY2U6IG9wdGlvbnM/Lm9uY2VcbiAgICB9KTtcbiAgfVxuXG4gIG9mZihldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRpb25zID0gbnVsbCkge1xuICAgIHRoaXMuX29mZihldmVudE5hbWUsIGxpc3RlbmVyLCB7XG4gICAgICBleHRlcm5hbDogdHJ1ZSxcbiAgICAgIG9uY2U6IG9wdGlvbnM/Lm9uY2VcbiAgICB9KTtcbiAgfVxuXG4gIGRpc3BhdGNoKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWV2ZW50TGlzdGVuZXJzIHx8IGV2ZW50TGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBleHRlcm5hbExpc3RlbmVycztcblxuICAgIGZvciAoY29uc3Qge1xuICAgICAgbGlzdGVuZXIsXG4gICAgICBleHRlcm5hbCxcbiAgICAgIG9uY2VcbiAgICB9IG9mIGV2ZW50TGlzdGVuZXJzLnNsaWNlKDApKSB7XG4gICAgICBpZiAob25jZSkge1xuICAgICAgICB0aGlzLl9vZmYoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHRlcm5hbCkge1xuICAgICAgICAoZXh0ZXJuYWxMaXN0ZW5lcnMgfHw9IFtdKS5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgIH1cblxuICAgIGlmIChleHRlcm5hbExpc3RlbmVycykge1xuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBleHRlcm5hbExpc3RlbmVycykge1xuICAgICAgICBsaXN0ZW5lcihkYXRhKTtcbiAgICAgIH1cblxuICAgICAgZXh0ZXJuYWxMaXN0ZW5lcnMgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIF9vbihldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRpb25zID0gbnVsbCkge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV0gfHw9IFtdO1xuICAgIGV2ZW50TGlzdGVuZXJzLnB1c2goe1xuICAgICAgbGlzdGVuZXIsXG4gICAgICBleHRlcm5hbDogb3B0aW9ucz8uZXh0ZXJuYWwgPT09IHRydWUsXG4gICAgICBvbmNlOiBvcHRpb25zPy5vbmNlID09PSB0cnVlXG4gICAgfSk7XG4gIH1cblxuICBfb2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIsIG9wdGlvbnMgPSBudWxsKSB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnROYW1lXTtcblxuICAgIGlmICghZXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBldmVudExpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpZiAoZXZlbnRMaXN0ZW5lcnNbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIGV2ZW50TGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbmV4cG9ydHMuRXZlbnRCdXMgPSBFdmVudEJ1cztcblxuY2xhc3MgQXV0b21hdGlvbkV2ZW50QnVzIGV4dGVuZHMgRXZlbnRCdXMge1xuICBkaXNwYXRjaChldmVudE5hbWUsIGRhdGEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQ6IEF1dG9tYXRpb25FdmVudEJ1cy5kaXNwYXRjaFwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuQXV0b21hdGlvbkV2ZW50QnVzID0gQXV0b21hdGlvbkV2ZW50QnVzO1xuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLkdlbmVyaWNMMTBuID0gdm9pZCAwO1xuXG5fX3dfcGRmanNfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9sMTBuX3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg0KTtcblxuY29uc3Qgd2ViTDEwbiA9IGRvY3VtZW50LndlYkwxMG47XG5cbmNsYXNzIEdlbmVyaWNMMTBuIHtcbiAgY29uc3RydWN0b3IobGFuZykge1xuICAgIHRoaXMuX2xhbmcgPSBsYW5nO1xuICAgIHRoaXMuX3JlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgd2ViTDEwbi5zZXRMYW5ndWFnZSgoMCwgX2wxMG5fdXRpbHMuZml4dXBMYW5nQ29kZSkobGFuZyksICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh3ZWJMMTBuKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGFuZ3VhZ2UoKSB7XG4gICAgY29uc3QgbDEwbiA9IGF3YWl0IHRoaXMuX3JlYWR5O1xuICAgIHJldHVybiBsMTBuLmdldExhbmd1YWdlKCk7XG4gIH1cblxuICBhc3luYyBnZXREaXJlY3Rpb24oKSB7XG4gICAgY29uc3QgbDEwbiA9IGF3YWl0IHRoaXMuX3JlYWR5O1xuICAgIHJldHVybiBsMTBuLmdldERpcmVjdGlvbigpO1xuICB9XG5cbiAgYXN5bmMgZ2V0KGtleSwgYXJncyA9IG51bGwsIGZhbGxiYWNrID0gKDAsIF9sMTBuX3V0aWxzLmdldEwxMG5GYWxsYmFjaykoa2V5LCBhcmdzKSkge1xuICAgIGNvbnN0IGwxMG4gPSBhd2FpdCB0aGlzLl9yZWFkeTtcbiAgICByZXR1cm4gbDEwbi5nZXQoa2V5LCBhcmdzLCBmYWxsYmFjayk7XG4gIH1cblxuICBhc3luYyB0cmFuc2xhdGUoZWxlbWVudCkge1xuICAgIGNvbnN0IGwxMG4gPSBhd2FpdCB0aGlzLl9yZWFkeTtcbiAgICByZXR1cm4gbDEwbi50cmFuc2xhdGUoZWxlbWVudCk7XG4gIH1cblxufVxuXG5leHBvcnRzLkdlbmVyaWNMMTBuID0gR2VuZXJpY0wxMG47XG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovICgoKSA9PiB7XG5cblxuXG5kb2N1bWVudC53ZWJMMTBuID0gZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuICB2YXIgZ0wxMG5EYXRhID0ge307XG4gIHZhciBnVGV4dERhdGEgPSAnJztcbiAgdmFyIGdUZXh0UHJvcCA9ICd0ZXh0Q29udGVudCc7XG4gIHZhciBnTGFuZ3VhZ2UgPSAnJztcbiAgdmFyIGdNYWNyb3MgPSB7fTtcbiAgdmFyIGdSZWFkeVN0YXRlID0gJ2xvYWRpbmcnO1xuICB2YXIgZ0FzeW5jUmVzb3VyY2VMb2FkaW5nID0gdHJ1ZTtcblxuICBmdW5jdGlvbiBnZXRMMTBuUmVzb3VyY2VMaW5rcygpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGlua1t0eXBlPVwiYXBwbGljYXRpb24vbDEwblwiXScpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TDEwbkRpY3Rpb25hcnkoKSB7XG4gICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFt0eXBlPVwiYXBwbGljYXRpb24vbDEwblwiXScpO1xuICAgIHJldHVybiBzY3JpcHQgPyBKU09OLnBhcnNlKHNjcmlwdC5pbm5lckhUTUwpIDogbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRyYW5zbGF0YWJsZUNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudCA/IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLWwxMG4taWRdJykgOiBbXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEwxMG5BdHRyaWJ1dGVzKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybiB7fTtcbiAgICB2YXIgbDEwbklkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbDEwbi1pZCcpO1xuICAgIHZhciBsMTBuQXJncyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWwxMG4tYXJncycpO1xuICAgIHZhciBhcmdzID0ge307XG5cbiAgICBpZiAobDEwbkFyZ3MpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKGwxMG5BcmdzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdjb3VsZCBub3QgcGFyc2UgYXJndW1lbnRzIGZvciAjJyArIGwxMG5JZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBsMTBuSWQsXG4gICAgICBhcmdzOiBhcmdzXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHhockxvYWRUZXh0KHVybCwgb25TdWNjZXNzLCBvbkZhaWx1cmUpIHtcbiAgICBvblN1Y2Nlc3MgPSBvblN1Y2Nlc3MgfHwgZnVuY3Rpb24gX29uU3VjY2VzcyhkYXRhKSB7fTtcblxuICAgIG9uRmFpbHVyZSA9IG9uRmFpbHVyZSB8fCBmdW5jdGlvbiBfb25GYWlsdXJlKCkge307XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgZ0FzeW5jUmVzb3VyY2VMb2FkaW5nKTtcblxuICAgIGlmICh4aHIub3ZlcnJpZGVNaW1lVHlwZSkge1xuICAgICAgeGhyLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9dXRmLTgnKTtcbiAgICB9XG5cbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwIHx8IHhoci5zdGF0dXMgPT09IDApIHtcbiAgICAgICAgICBvblN1Y2Nlc3MoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25GYWlsdXJlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgeGhyLm9uZXJyb3IgPSBvbkZhaWx1cmU7XG4gICAgeGhyLm9udGltZW91dCA9IG9uRmFpbHVyZTtcblxuICAgIHRyeSB7XG4gICAgICB4aHIuc2VuZChudWxsKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBvbkZhaWx1cmUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVJlc291cmNlKGhyZWYsIGxhbmcsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgdmFyIGJhc2VVUkwgPSBocmVmLnJlcGxhY2UoL1teXFwvXSokLywgJycpIHx8ICcuLyc7XG5cbiAgICBmdW5jdGlvbiBldmFsU3RyaW5nKHRleHQpIHtcbiAgICAgIGlmICh0ZXh0Lmxhc3RJbmRleE9mKCdcXFxcJykgPCAwKSByZXR1cm4gdGV4dDtcbiAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xcXFxcXFxcL2csICdcXFxcJykucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcXFxyL2csICdcXHInKS5yZXBsYWNlKC9cXFxcdC9nLCAnXFx0JykucmVwbGFjZSgvXFxcXGIvZywgJ1xcYicpLnJlcGxhY2UoL1xcXFxmL2csICdcXGYnKS5yZXBsYWNlKC9cXFxcey9nLCAneycpLnJlcGxhY2UoL1xcXFx9L2csICd9JykucmVwbGFjZSgvXFxcXFwiL2csICdcIicpLnJlcGxhY2UoL1xcXFwnL2csIFwiJ1wiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZVByb3BlcnRpZXModGV4dCwgcGFyc2VkUHJvcGVydGllc0NhbGxiYWNrKSB7XG4gICAgICB2YXIgZGljdGlvbmFyeSA9IHt9O1xuICAgICAgdmFyIHJlQmxhbmsgPSAvXlxccyp8XFxzKiQvO1xuICAgICAgdmFyIHJlQ29tbWVudCA9IC9eXFxzKiN8XlxccyokLztcbiAgICAgIHZhciByZVNlY3Rpb24gPSAvXlxccypcXFsoLiopXFxdXFxzKiQvO1xuICAgICAgdmFyIHJlSW1wb3J0ID0gL15cXHMqQGltcG9ydFxccyt1cmxcXCgoLiopXFwpXFxzKiQvaTtcbiAgICAgIHZhciByZVNwbGl0ID0gL14oW149XFxzXSopXFxzKj1cXHMqKC4rKSQvO1xuXG4gICAgICBmdW5jdGlvbiBwYXJzZVJhd0xpbmVzKHJhd1RleHQsIGV4dGVuZGVkU3ludGF4LCBwYXJzZWRSYXdMaW5lc0NhbGxiYWNrKSB7XG4gICAgICAgIHZhciBlbnRyaWVzID0gcmF3VGV4dC5yZXBsYWNlKHJlQmxhbmssICcnKS5zcGxpdCgvW1xcclxcbl0rLyk7XG4gICAgICAgIHZhciBjdXJyZW50TGFuZyA9ICcqJztcbiAgICAgICAgdmFyIGdlbmVyaWNMYW5nID0gbGFuZy5zcGxpdCgnLScsIDEpWzBdO1xuICAgICAgICB2YXIgc2tpcExhbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hdGNoID0gJyc7XG5cbiAgICAgICAgZnVuY3Rpb24gbmV4dEVudHJ5KCkge1xuICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIWVudHJpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHBhcnNlZFJhd0xpbmVzQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbGluZSA9IGVudHJpZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChyZUNvbW1lbnQudGVzdChsaW5lKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGlmIChleHRlbmRlZFN5bnRheCkge1xuICAgICAgICAgICAgICBtYXRjaCA9IHJlU2VjdGlvbi5leGVjKGxpbmUpO1xuXG4gICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMYW5nID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBza2lwTGFuZyA9IGN1cnJlbnRMYW5nICE9PSAnKicgJiYgY3VycmVudExhbmcgIT09IGxhbmcgJiYgY3VycmVudExhbmcgIT09IGdlbmVyaWNMYW5nO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraXBMYW5nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBtYXRjaCA9IHJlSW1wb3J0LmV4ZWMobGluZSk7XG5cbiAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgbG9hZEltcG9ydChiYXNlVVJMICsgbWF0Y2hbMV0sIG5leHRFbnRyeSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0bXAgPSBsaW5lLm1hdGNoKHJlU3BsaXQpO1xuXG4gICAgICAgICAgICBpZiAodG1wICYmIHRtcC5sZW5ndGggPT0gMykge1xuICAgICAgICAgICAgICBkaWN0aW9uYXJ5W3RtcFsxXV0gPSBldmFsU3RyaW5nKHRtcFsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmV4dEVudHJ5KCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGxvYWRJbXBvcnQodXJsLCBjYWxsYmFjaykge1xuICAgICAgICB4aHJMb2FkVGV4dCh1cmwsIGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgcGFyc2VSYXdMaW5lcyhjb250ZW50LCBmYWxzZSwgY2FsbGJhY2spO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKHVybCArICcgbm90IGZvdW5kLicpO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBwYXJzZVJhd0xpbmVzKHRleHQsIHRydWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFyc2VkUHJvcGVydGllc0NhbGxiYWNrKGRpY3Rpb25hcnkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgeGhyTG9hZFRleHQoaHJlZiwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBnVGV4dERhdGEgKz0gcmVzcG9uc2U7XG4gICAgICBwYXJzZVByb3BlcnRpZXMocmVzcG9uc2UsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgdmFyIGlkLFxuICAgICAgICAgICAgICBwcm9wLFxuICAgICAgICAgICAgICBpbmRleCA9IGtleS5sYXN0SW5kZXhPZignLicpO1xuXG4gICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgaWQgPSBrZXkuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgIHByb3AgPSBrZXkuc3Vic3RyaW5nKGluZGV4ICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkID0ga2V5O1xuICAgICAgICAgICAgcHJvcCA9IGdUZXh0UHJvcDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWdMMTBuRGF0YVtpZF0pIHtcbiAgICAgICAgICAgIGdMMTBuRGF0YVtpZF0gPSB7fTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnTDEwbkRhdGFbaWRdW3Byb3BdID0gZGF0YVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCBmYWlsdXJlQ2FsbGJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZExvY2FsZShsYW5nLCBjYWxsYmFjaykge1xuICAgIGlmIChsYW5nKSB7XG4gICAgICBsYW5nID0gbGFuZy50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gX2NhbGxiYWNrKCkge307XG5cbiAgICBjbGVhcigpO1xuICAgIGdMYW5ndWFnZSA9IGxhbmc7XG4gICAgdmFyIGxhbmdMaW5rcyA9IGdldEwxMG5SZXNvdXJjZUxpbmtzKCk7XG4gICAgdmFyIGxhbmdDb3VudCA9IGxhbmdMaW5rcy5sZW5ndGg7XG5cbiAgICBpZiAobGFuZ0NvdW50ID09PSAwKSB7XG4gICAgICB2YXIgZGljdCA9IGdldEwxMG5EaWN0aW9uYXJ5KCk7XG5cbiAgICAgIGlmIChkaWN0ICYmIGRpY3QubG9jYWxlcyAmJiBkaWN0LmRlZmF1bHRfbG9jYWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyB0aGUgZW1iZWRkZWQgSlNPTiBkaXJlY3RvcnksIGVhcmx5IHdheSBvdXQnKTtcbiAgICAgICAgZ0wxMG5EYXRhID0gZGljdC5sb2NhbGVzW2xhbmddO1xuXG4gICAgICAgIGlmICghZ0wxMG5EYXRhKSB7XG4gICAgICAgICAgdmFyIGRlZmF1bHRMb2NhbGUgPSBkaWN0LmRlZmF1bHRfbG9jYWxlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICBmb3IgKHZhciBhbnlDYXNlTGFuZyBpbiBkaWN0LmxvY2FsZXMpIHtcbiAgICAgICAgICAgIGFueUNhc2VMYW5nID0gYW55Q2FzZUxhbmcudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgaWYgKGFueUNhc2VMYW5nID09PSBsYW5nKSB7XG4gICAgICAgICAgICAgIGdMMTBuRGF0YSA9IGRpY3QubG9jYWxlc1tsYW5nXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFueUNhc2VMYW5nID09PSBkZWZhdWx0TG9jYWxlKSB7XG4gICAgICAgICAgICAgIGdMMTBuRGF0YSA9IGRpY3QubG9jYWxlc1tkZWZhdWx0TG9jYWxlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ25vIHJlc291cmNlIHRvIGxvYWQsIGVhcmx5IHdheSBvdXQnKTtcbiAgICAgIH1cblxuICAgICAgZ1JlYWR5U3RhdGUgPSAnY29tcGxldGUnO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBvblJlc291cmNlTG9hZGVkID0gbnVsbDtcbiAgICB2YXIgZ1Jlc291cmNlQ291bnQgPSAwO1xuXG4gICAgb25SZXNvdXJjZUxvYWRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGdSZXNvdXJjZUNvdW50Kys7XG5cbiAgICAgIGlmIChnUmVzb3VyY2VDb3VudCA+PSBsYW5nQ291bnQpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgZ1JlYWR5U3RhdGUgPSAnY29tcGxldGUnO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBMMTBuUmVzb3VyY2VMaW5rKGxpbmspIHtcbiAgICAgIHZhciBocmVmID0gbGluay5ocmVmO1xuXG4gICAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAobGFuZywgY2FsbGJhY2spIHtcbiAgICAgICAgcGFyc2VSZXNvdXJjZShocmVmLCBsYW5nLCBjYWxsYmFjaywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihocmVmICsgJyBub3QgZm91bmQuJyk7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdcIicgKyBsYW5nICsgJ1wiIHJlc291cmNlIG5vdCBmb3VuZCcpO1xuICAgICAgICAgIGdMYW5ndWFnZSA9ICcnO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhbmdDb3VudDsgaSsrKSB7XG4gICAgICB2YXIgcmVzb3VyY2UgPSBuZXcgTDEwblJlc291cmNlTGluayhsYW5nTGlua3NbaV0pO1xuICAgICAgcmVzb3VyY2UubG9hZChsYW5nLCBvblJlc291cmNlTG9hZGVkKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBnTDEwbkRhdGEgPSB7fTtcbiAgICBnVGV4dERhdGEgPSAnJztcbiAgICBnTGFuZ3VhZ2UgPSAnJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBsdXJhbFJ1bGVzKGxhbmcpIHtcbiAgICB2YXIgbG9jYWxlczJydWxlcyA9IHtcbiAgICAgICdhZic6IDMsXG4gICAgICAnYWsnOiA0LFxuICAgICAgJ2FtJzogNCxcbiAgICAgICdhcic6IDEsXG4gICAgICAnYXNhJzogMyxcbiAgICAgICdheic6IDAsXG4gICAgICAnYmUnOiAxMSxcbiAgICAgICdiZW0nOiAzLFxuICAgICAgJ2Jleic6IDMsXG4gICAgICAnYmcnOiAzLFxuICAgICAgJ2JoJzogNCxcbiAgICAgICdibSc6IDAsXG4gICAgICAnYm4nOiAzLFxuICAgICAgJ2JvJzogMCxcbiAgICAgICdicic6IDIwLFxuICAgICAgJ2JyeCc6IDMsXG4gICAgICAnYnMnOiAxMSxcbiAgICAgICdjYSc6IDMsXG4gICAgICAnY2dnJzogMyxcbiAgICAgICdjaHInOiAzLFxuICAgICAgJ2NzJzogMTIsXG4gICAgICAnY3knOiAxNyxcbiAgICAgICdkYSc6IDMsXG4gICAgICAnZGUnOiAzLFxuICAgICAgJ2R2JzogMyxcbiAgICAgICdkeic6IDAsXG4gICAgICAnZWUnOiAzLFxuICAgICAgJ2VsJzogMyxcbiAgICAgICdlbic6IDMsXG4gICAgICAnZW8nOiAzLFxuICAgICAgJ2VzJzogMyxcbiAgICAgICdldCc6IDMsXG4gICAgICAnZXUnOiAzLFxuICAgICAgJ2ZhJzogMCxcbiAgICAgICdmZic6IDUsXG4gICAgICAnZmknOiAzLFxuICAgICAgJ2ZpbCc6IDQsXG4gICAgICAnZm8nOiAzLFxuICAgICAgJ2ZyJzogNSxcbiAgICAgICdmdXInOiAzLFxuICAgICAgJ2Z5JzogMyxcbiAgICAgICdnYSc6IDgsXG4gICAgICAnZ2QnOiAyNCxcbiAgICAgICdnbCc6IDMsXG4gICAgICAnZ3N3JzogMyxcbiAgICAgICdndSc6IDMsXG4gICAgICAnZ3V3JzogNCxcbiAgICAgICdndic6IDIzLFxuICAgICAgJ2hhJzogMyxcbiAgICAgICdoYXcnOiAzLFxuICAgICAgJ2hlJzogMixcbiAgICAgICdoaSc6IDQsXG4gICAgICAnaHInOiAxMSxcbiAgICAgICdodSc6IDAsXG4gICAgICAnaWQnOiAwLFxuICAgICAgJ2lnJzogMCxcbiAgICAgICdpaSc6IDAsXG4gICAgICAnaXMnOiAzLFxuICAgICAgJ2l0JzogMyxcbiAgICAgICdpdSc6IDcsXG4gICAgICAnamEnOiAwLFxuICAgICAgJ2ptYyc6IDMsXG4gICAgICAnanYnOiAwLFxuICAgICAgJ2thJzogMCxcbiAgICAgICdrYWInOiA1LFxuICAgICAgJ2thaic6IDMsXG4gICAgICAna2NnJzogMyxcbiAgICAgICdrZGUnOiAwLFxuICAgICAgJ2tlYSc6IDAsXG4gICAgICAna2snOiAzLFxuICAgICAgJ2tsJzogMyxcbiAgICAgICdrbSc6IDAsXG4gICAgICAna24nOiAwLFxuICAgICAgJ2tvJzogMCxcbiAgICAgICdrc2InOiAzLFxuICAgICAgJ2tzaCc6IDIxLFxuICAgICAgJ2t1JzogMyxcbiAgICAgICdrdyc6IDcsXG4gICAgICAnbGFnJzogMTgsXG4gICAgICAnbGInOiAzLFxuICAgICAgJ2xnJzogMyxcbiAgICAgICdsbic6IDQsXG4gICAgICAnbG8nOiAwLFxuICAgICAgJ2x0JzogMTAsXG4gICAgICAnbHYnOiA2LFxuICAgICAgJ21hcyc6IDMsXG4gICAgICAnbWcnOiA0LFxuICAgICAgJ21rJzogMTYsXG4gICAgICAnbWwnOiAzLFxuICAgICAgJ21uJzogMyxcbiAgICAgICdtbyc6IDksXG4gICAgICAnbXInOiAzLFxuICAgICAgJ21zJzogMCxcbiAgICAgICdtdCc6IDE1LFxuICAgICAgJ215JzogMCxcbiAgICAgICduYWgnOiAzLFxuICAgICAgJ25hcSc6IDcsXG4gICAgICAnbmInOiAzLFxuICAgICAgJ25kJzogMyxcbiAgICAgICduZSc6IDMsXG4gICAgICAnbmwnOiAzLFxuICAgICAgJ25uJzogMyxcbiAgICAgICdubyc6IDMsXG4gICAgICAnbnInOiAzLFxuICAgICAgJ25zbyc6IDQsXG4gICAgICAnbnknOiAzLFxuICAgICAgJ255bic6IDMsXG4gICAgICAnb20nOiAzLFxuICAgICAgJ29yJzogMyxcbiAgICAgICdwYSc6IDMsXG4gICAgICAncGFwJzogMyxcbiAgICAgICdwbCc6IDEzLFxuICAgICAgJ3BzJzogMyxcbiAgICAgICdwdCc6IDMsXG4gICAgICAncm0nOiAzLFxuICAgICAgJ3JvJzogOSxcbiAgICAgICdyb2YnOiAzLFxuICAgICAgJ3J1JzogMTEsXG4gICAgICAncndrJzogMyxcbiAgICAgICdzYWgnOiAwLFxuICAgICAgJ3NhcSc6IDMsXG4gICAgICAnc2UnOiA3LFxuICAgICAgJ3NlaCc6IDMsXG4gICAgICAnc2VzJzogMCxcbiAgICAgICdzZyc6IDAsXG4gICAgICAnc2gnOiAxMSxcbiAgICAgICdzaGknOiAxOSxcbiAgICAgICdzayc6IDEyLFxuICAgICAgJ3NsJzogMTQsXG4gICAgICAnc21hJzogNyxcbiAgICAgICdzbWknOiA3LFxuICAgICAgJ3Ntaic6IDcsXG4gICAgICAnc21uJzogNyxcbiAgICAgICdzbXMnOiA3LFxuICAgICAgJ3NuJzogMyxcbiAgICAgICdzbyc6IDMsXG4gICAgICAnc3EnOiAzLFxuICAgICAgJ3NyJzogMTEsXG4gICAgICAnc3MnOiAzLFxuICAgICAgJ3NzeSc6IDMsXG4gICAgICAnc3QnOiAzLFxuICAgICAgJ3N2JzogMyxcbiAgICAgICdzdyc6IDMsXG4gICAgICAnc3lyJzogMyxcbiAgICAgICd0YSc6IDMsXG4gICAgICAndGUnOiAzLFxuICAgICAgJ3Rlbyc6IDMsXG4gICAgICAndGgnOiAwLFxuICAgICAgJ3RpJzogNCxcbiAgICAgICd0aWcnOiAzLFxuICAgICAgJ3RrJzogMyxcbiAgICAgICd0bCc6IDQsXG4gICAgICAndG4nOiAzLFxuICAgICAgJ3RvJzogMCxcbiAgICAgICd0cic6IDAsXG4gICAgICAndHMnOiAzLFxuICAgICAgJ3R6bSc6IDIyLFxuICAgICAgJ3VrJzogMTEsXG4gICAgICAndXInOiAzLFxuICAgICAgJ3ZlJzogMyxcbiAgICAgICd2aSc6IDAsXG4gICAgICAndnVuJzogMyxcbiAgICAgICd3YSc6IDQsXG4gICAgICAnd2FlJzogMyxcbiAgICAgICd3byc6IDAsXG4gICAgICAneGgnOiAzLFxuICAgICAgJ3hvZyc6IDMsXG4gICAgICAneW8nOiAwLFxuICAgICAgJ3poJzogMCxcbiAgICAgICd6dSc6IDNcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaXNJbihuLCBsaXN0KSB7XG4gICAgICByZXR1cm4gbGlzdC5pbmRleE9mKG4pICE9PSAtMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0JldHdlZW4obiwgc3RhcnQsIGVuZCkge1xuICAgICAgcmV0dXJuIHN0YXJ0IDw9IG4gJiYgbiA8PSBlbmQ7XG4gICAgfVxuXG4gICAgdmFyIHBsdXJhbFJ1bGVzID0ge1xuICAgICAgJzAnOiBmdW5jdGlvbiAobikge1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMSc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiAlIDEwMCwgMywgMTApKSByZXR1cm4gJ2Zldyc7XG4gICAgICAgIGlmIChuID09PSAwKSByZXR1cm4gJ3plcm8nO1xuICAgICAgICBpZiAoaXNCZXR3ZWVuKG4gJSAxMDAsIDExLCA5OSkpIHJldHVybiAnbWFueSc7XG4gICAgICAgIGlmIChuID09IDIpIHJldHVybiAndHdvJztcbiAgICAgICAgaWYgKG4gPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMic6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChuICE9PSAwICYmIG4gJSAxMCA9PT0gMCkgcmV0dXJuICdtYW55JztcbiAgICAgICAgaWYgKG4gPT0gMikgcmV0dXJuICd0d28nO1xuICAgICAgICBpZiAobiA9PSAxKSByZXR1cm4gJ29uZSc7XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgICAgfSxcbiAgICAgICczJzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4gPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnNCc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiwgMCwgMSkpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzUnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAoaXNCZXR3ZWVuKG4sIDAsIDIpICYmIG4gIT0gMikgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnNic6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChuID09PSAwKSByZXR1cm4gJ3plcm8nO1xuICAgICAgICBpZiAobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnNyc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChuID09IDIpIHJldHVybiAndHdvJztcbiAgICAgICAgaWYgKG4gPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnOCc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiwgMywgNikpIHJldHVybiAnZmV3JztcbiAgICAgICAgaWYgKGlzQmV0d2VlbihuLCA3LCAxMCkpIHJldHVybiAnbWFueSc7XG4gICAgICAgIGlmIChuID09IDIpIHJldHVybiAndHdvJztcbiAgICAgICAgaWYgKG4gPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnOSc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChuID09PSAwIHx8IG4gIT0gMSAmJiBpc0JldHdlZW4obiAlIDEwMCwgMSwgMTkpKSByZXR1cm4gJ2Zldyc7XG4gICAgICAgIGlmIChuID09IDEpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzEwJzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKGlzQmV0d2VlbihuICUgMTAsIDIsIDkpICYmICFpc0JldHdlZW4obiAlIDEwMCwgMTEsIDE5KSkgcmV0dXJuICdmZXcnO1xuICAgICAgICBpZiAobiAlIDEwID09IDEgJiYgIWlzQmV0d2VlbihuICUgMTAwLCAxMSwgMTkpKSByZXR1cm4gJ29uZSc7XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgICAgfSxcbiAgICAgICcxMSc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiAlIDEwLCAyLCA0KSAmJiAhaXNCZXR3ZWVuKG4gJSAxMDAsIDEyLCAxNCkpIHJldHVybiAnZmV3JztcbiAgICAgICAgaWYgKG4gJSAxMCA9PT0gMCB8fCBpc0JldHdlZW4obiAlIDEwLCA1LCA5KSB8fCBpc0JldHdlZW4obiAlIDEwMCwgMTEsIDE0KSkgcmV0dXJuICdtYW55JztcbiAgICAgICAgaWYgKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzEyJzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKGlzQmV0d2VlbihuLCAyLCA0KSkgcmV0dXJuICdmZXcnO1xuICAgICAgICBpZiAobiA9PSAxKSByZXR1cm4gJ29uZSc7XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgICAgfSxcbiAgICAgICcxMyc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiAlIDEwLCAyLCA0KSAmJiAhaXNCZXR3ZWVuKG4gJSAxMDAsIDEyLCAxNCkpIHJldHVybiAnZmV3JztcbiAgICAgICAgaWYgKG4gIT0gMSAmJiBpc0JldHdlZW4obiAlIDEwLCAwLCAxKSB8fCBpc0JldHdlZW4obiAlIDEwLCA1LCA5KSB8fCBpc0JldHdlZW4obiAlIDEwMCwgMTIsIDE0KSkgcmV0dXJuICdtYW55JztcbiAgICAgICAgaWYgKG4gPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMTQnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAoaXNCZXR3ZWVuKG4gJSAxMDAsIDMsIDQpKSByZXR1cm4gJ2Zldyc7XG4gICAgICAgIGlmIChuICUgMTAwID09IDIpIHJldHVybiAndHdvJztcbiAgICAgICAgaWYgKG4gJSAxMDAgPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMTUnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAobiA9PT0gMCB8fCBpc0JldHdlZW4obiAlIDEwMCwgMiwgMTApKSByZXR1cm4gJ2Zldyc7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiAlIDEwMCwgMTEsIDE5KSkgcmV0dXJuICdtYW55JztcbiAgICAgICAgaWYgKG4gPT0gMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMTYnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAobiAlIDEwID09IDEgJiYgbiAhPSAxMSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMTcnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAobiA9PSAzKSByZXR1cm4gJ2Zldyc7XG4gICAgICAgIGlmIChuID09PSAwKSByZXR1cm4gJ3plcm8nO1xuICAgICAgICBpZiAobiA9PSA2KSByZXR1cm4gJ21hbnknO1xuICAgICAgICBpZiAobiA9PSAyKSByZXR1cm4gJ3R3byc7XG4gICAgICAgIGlmIChuID09IDEpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzE4JzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4gPT09IDApIHJldHVybiAnemVybyc7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiwgMCwgMikgJiYgbiAhPT0gMCAmJiBuICE9IDIpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzE5JzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKGlzQmV0d2VlbihuLCAyLCAxMCkpIHJldHVybiAnZmV3JztcbiAgICAgICAgaWYgKGlzQmV0d2VlbihuLCAwLCAxKSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMjAnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAoKGlzQmV0d2VlbihuICUgMTAsIDMsIDQpIHx8IG4gJSAxMCA9PSA5KSAmJiAhKGlzQmV0d2VlbihuICUgMTAwLCAxMCwgMTkpIHx8IGlzQmV0d2VlbihuICUgMTAwLCA3MCwgNzkpIHx8IGlzQmV0d2VlbihuICUgMTAwLCA5MCwgOTkpKSkgcmV0dXJuICdmZXcnO1xuICAgICAgICBpZiAobiAlIDEwMDAwMDAgPT09IDAgJiYgbiAhPT0gMCkgcmV0dXJuICdtYW55JztcbiAgICAgICAgaWYgKG4gJSAxMCA9PSAyICYmICFpc0luKG4gJSAxMDAsIFsxMiwgNzIsIDkyXSkpIHJldHVybiAndHdvJztcbiAgICAgICAgaWYgKG4gJSAxMCA9PSAxICYmICFpc0luKG4gJSAxMDAsIFsxMSwgNzEsIDkxXSkpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzIxJzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4gPT09IDApIHJldHVybiAnemVybyc7XG4gICAgICAgIGlmIChuID09IDEpIHJldHVybiAnb25lJztcbiAgICAgICAgcmV0dXJuICdvdGhlcic7XG4gICAgICB9LFxuICAgICAgJzIyJzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKGlzQmV0d2VlbihuLCAwLCAxKSB8fCBpc0JldHdlZW4obiwgMTEsIDk5KSkgcmV0dXJuICdvbmUnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH0sXG4gICAgICAnMjMnOiBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAoaXNCZXR3ZWVuKG4gJSAxMCwgMSwgMikgfHwgbiAlIDIwID09PSAwKSByZXR1cm4gJ29uZSc7XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgICAgfSxcbiAgICAgICcyNCc6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChpc0JldHdlZW4obiwgMywgMTApIHx8IGlzQmV0d2VlbihuLCAxMywgMTkpKSByZXR1cm4gJ2Zldyc7XG4gICAgICAgIGlmIChpc0luKG4sIFsyLCAxMl0pKSByZXR1cm4gJ3R3byc7XG4gICAgICAgIGlmIChpc0luKG4sIFsxLCAxMV0pKSByZXR1cm4gJ29uZSc7XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGluZGV4ID0gbG9jYWxlczJydWxlc1tsYW5nLnJlcGxhY2UoLy0uKiQvLCAnJyldO1xuXG4gICAgaWYgKCEoaW5kZXggaW4gcGx1cmFsUnVsZXMpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3BsdXJhbCBmb3JtIHVua25vd24gZm9yIFsnICsgbGFuZyArICddJyk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBsdXJhbFJ1bGVzW2luZGV4XTtcbiAgfVxuXG4gIGdNYWNyb3MucGx1cmFsID0gZnVuY3Rpb24gKHN0ciwgcGFyYW0sIGtleSwgcHJvcCkge1xuICAgIHZhciBuID0gcGFyc2VGbG9hdChwYXJhbSk7XG4gICAgaWYgKGlzTmFOKG4pKSByZXR1cm4gc3RyO1xuICAgIGlmIChwcm9wICE9IGdUZXh0UHJvcCkgcmV0dXJuIHN0cjtcblxuICAgIGlmICghZ01hY3Jvcy5fcGx1cmFsUnVsZXMpIHtcbiAgICAgIGdNYWNyb3MuX3BsdXJhbFJ1bGVzID0gZ2V0UGx1cmFsUnVsZXMoZ0xhbmd1YWdlKTtcbiAgICB9XG5cbiAgICB2YXIgaW5kZXggPSAnWycgKyBnTWFjcm9zLl9wbHVyYWxSdWxlcyhuKSArICddJztcblxuICAgIGlmIChuID09PSAwICYmIGtleSArICdbemVyb10nIGluIGdMMTBuRGF0YSkge1xuICAgICAgc3RyID0gZ0wxMG5EYXRhW2tleSArICdbemVyb10nXVtwcm9wXTtcbiAgICB9IGVsc2UgaWYgKG4gPT0gMSAmJiBrZXkgKyAnW29uZV0nIGluIGdMMTBuRGF0YSkge1xuICAgICAgc3RyID0gZ0wxMG5EYXRhW2tleSArICdbb25lXSddW3Byb3BdO1xuICAgIH0gZWxzZSBpZiAobiA9PSAyICYmIGtleSArICdbdHdvXScgaW4gZ0wxMG5EYXRhKSB7XG4gICAgICBzdHIgPSBnTDEwbkRhdGFba2V5ICsgJ1t0d29dJ11bcHJvcF07XG4gICAgfSBlbHNlIGlmIChrZXkgKyBpbmRleCBpbiBnTDEwbkRhdGEpIHtcbiAgICAgIHN0ciA9IGdMMTBuRGF0YVtrZXkgKyBpbmRleF1bcHJvcF07XG4gICAgfSBlbHNlIGlmIChrZXkgKyAnW290aGVyXScgaW4gZ0wxMG5EYXRhKSB7XG4gICAgICBzdHIgPSBnTDEwbkRhdGFba2V5ICsgJ1tvdGhlcl0nXVtwcm9wXTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldEwxMG5EYXRhKGtleSwgYXJncywgZmFsbGJhY2spIHtcbiAgICB2YXIgZGF0YSA9IGdMMTBuRGF0YVtrZXldO1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICBjb25zb2xlLndhcm4oJyMnICsga2V5ICsgJyBpcyB1bmRlZmluZWQuJyk7XG5cbiAgICAgIGlmICghZmFsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGRhdGEgPSBmYWxsYmFjaztcbiAgICB9XG5cbiAgICB2YXIgcnYgPSB7fTtcblxuICAgIGZvciAodmFyIHByb3AgaW4gZGF0YSkge1xuICAgICAgdmFyIHN0ciA9IGRhdGFbcHJvcF07XG4gICAgICBzdHIgPSBzdWJzdEluZGV4ZXMoc3RyLCBhcmdzLCBrZXksIHByb3ApO1xuICAgICAgc3RyID0gc3Vic3RBcmd1bWVudHMoc3RyLCBhcmdzLCBrZXkpO1xuICAgICAgcnZbcHJvcF0gPSBzdHI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ2O1xuICB9XG5cbiAgZnVuY3Rpb24gc3Vic3RJbmRleGVzKHN0ciwgYXJncywga2V5LCBwcm9wKSB7XG4gICAgdmFyIHJlSW5kZXggPSAvXFx7XFxbXFxzKihbYS16QS1aXSspXFwoKFthLXpBLVpdKylcXClcXHMqXFxdXFx9LztcbiAgICB2YXIgcmVNYXRjaCA9IHJlSW5kZXguZXhlYyhzdHIpO1xuICAgIGlmICghcmVNYXRjaCB8fCAhcmVNYXRjaC5sZW5ndGgpIHJldHVybiBzdHI7XG4gICAgdmFyIG1hY3JvTmFtZSA9IHJlTWF0Y2hbMV07XG4gICAgdmFyIHBhcmFtTmFtZSA9IHJlTWF0Y2hbMl07XG4gICAgdmFyIHBhcmFtO1xuXG4gICAgaWYgKGFyZ3MgJiYgcGFyYW1OYW1lIGluIGFyZ3MpIHtcbiAgICAgIHBhcmFtID0gYXJnc1twYXJhbU5hbWVdO1xuICAgIH0gZWxzZSBpZiAocGFyYW1OYW1lIGluIGdMMTBuRGF0YSkge1xuICAgICAgcGFyYW0gPSBnTDEwbkRhdGFbcGFyYW1OYW1lXTtcbiAgICB9XG5cbiAgICBpZiAobWFjcm9OYW1lIGluIGdNYWNyb3MpIHtcbiAgICAgIHZhciBtYWNybyA9IGdNYWNyb3NbbWFjcm9OYW1lXTtcbiAgICAgIHN0ciA9IG1hY3JvKHN0ciwgcGFyYW0sIGtleSwgcHJvcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN1YnN0QXJndW1lbnRzKHN0ciwgYXJncywga2V5KSB7XG4gICAgdmFyIHJlQXJncyA9IC9cXHtcXHtcXHMqKC4rPylcXHMqXFx9XFx9L2c7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlQXJncywgZnVuY3Rpb24gKG1hdGNoZWRfdGV4dCwgYXJnKSB7XG4gICAgICBpZiAoYXJncyAmJiBhcmcgaW4gYXJncykge1xuICAgICAgICByZXR1cm4gYXJnc1thcmddO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXJnIGluIGdMMTBuRGF0YSkge1xuICAgICAgICByZXR1cm4gZ0wxMG5EYXRhW2FyZ107XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdhcmd1bWVudCB7eycgKyBhcmcgKyAnfX0gZm9yICMnICsga2V5ICsgJyBpcyB1bmRlZmluZWQuJyk7XG4gICAgICByZXR1cm4gbWF0Y2hlZF90ZXh0O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlRWxlbWVudChlbGVtZW50KSB7XG4gICAgdmFyIGwxMG4gPSBnZXRMMTBuQXR0cmlidXRlcyhlbGVtZW50KTtcbiAgICBpZiAoIWwxMG4uaWQpIHJldHVybjtcbiAgICB2YXIgZGF0YSA9IGdldEwxMG5EYXRhKGwxMG4uaWQsIGwxMG4uYXJncyk7XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIGNvbnNvbGUud2FybignIycgKyBsMTBuLmlkICsgJyBpcyB1bmRlZmluZWQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRhdGFbZ1RleHRQcm9wXSkge1xuICAgICAgaWYgKGdldENoaWxkRWxlbWVudENvdW50KGVsZW1lbnQpID09PSAwKSB7XG4gICAgICAgIGVsZW1lbnRbZ1RleHRQcm9wXSA9IGRhdGFbZ1RleHRQcm9wXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IGVsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoY2hpbGRyZW5baV0ubm9kZVR5cGUgPT09IDMgJiYgL1xcUy8udGVzdChjaGlsZHJlbltpXS5ub2RlVmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW5baV0ubm9kZVZhbHVlID0gJyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGlsZHJlbltpXS5ub2RlVmFsdWUgPSBkYXRhW2dUZXh0UHJvcF07XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YVtnVGV4dFByb3BdKTtcbiAgICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZSh0ZXh0Tm9kZSwgZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkZWxldGUgZGF0YVtnVGV4dFByb3BdO1xuICAgIH1cblxuICAgIGZvciAodmFyIGsgaW4gZGF0YSkge1xuICAgICAgZWxlbWVudFtrXSA9IGRhdGFba107XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2hpbGRFbGVtZW50Q291bnQoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LmNoaWxkRWxlbWVudENvdW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQ7XG4gICAgfVxuXG4gICAgdmFyIGNvdW50ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb3VudCArPSBlbGVtZW50Lm5vZGVUeXBlID09PSAxID8gMSA6IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlRnJhZ21lbnQoZWxlbWVudCkge1xuICAgIGVsZW1lbnQgPSBlbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICB2YXIgY2hpbGRyZW4gPSBnZXRUcmFuc2xhdGFibGVDaGlsZHJlbihlbGVtZW50KTtcbiAgICB2YXIgZWxlbWVudENvdW50ID0gY2hpbGRyZW4ubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50Q291bnQ7IGkrKykge1xuICAgICAgdHJhbnNsYXRlRWxlbWVudChjaGlsZHJlbltpXSk7XG4gICAgfVxuXG4gICAgdHJhbnNsYXRlRWxlbWVudChlbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoa2V5LCBhcmdzLCBmYWxsYmFja1N0cmluZykge1xuICAgICAgdmFyIGluZGV4ID0ga2V5Lmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICB2YXIgcHJvcCA9IGdUZXh0UHJvcDtcblxuICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICBwcm9wID0ga2V5LnN1YnN0cmluZyhpbmRleCArIDEpO1xuICAgICAgICBrZXkgPSBrZXkuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZhbGxiYWNrO1xuXG4gICAgICBpZiAoZmFsbGJhY2tTdHJpbmcpIHtcbiAgICAgICAgZmFsbGJhY2sgPSB7fTtcbiAgICAgICAgZmFsbGJhY2tbcHJvcF0gPSBmYWxsYmFja1N0cmluZztcbiAgICAgIH1cblxuICAgICAgdmFyIGRhdGEgPSBnZXRMMTBuRGF0YShrZXksIGFyZ3MsIGZhbGxiYWNrKTtcblxuICAgICAgaWYgKGRhdGEgJiYgcHJvcCBpbiBkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhW3Byb3BdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJ3t7JyArIGtleSArICd9fSc7XG4gICAgfSxcbiAgICBnZXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ0wxMG5EYXRhO1xuICAgIH0sXG4gICAgZ2V0VGV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGdUZXh0RGF0YTtcbiAgICB9LFxuICAgIGdldExhbmd1YWdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ0xhbmd1YWdlO1xuICAgIH0sXG4gICAgc2V0TGFuZ3VhZ2U6IGZ1bmN0aW9uIChsYW5nLCBjYWxsYmFjaykge1xuICAgICAgbG9hZExvY2FsZShsYW5nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0RGlyZWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcnRsTGlzdCA9IFsnYXInLCAnaGUnLCAnZmEnLCAncHMnLCAndXInXTtcbiAgICAgIHZhciBzaG9ydENvZGUgPSBnTGFuZ3VhZ2Uuc3BsaXQoJy0nLCAxKVswXTtcbiAgICAgIHJldHVybiBydGxMaXN0LmluZGV4T2Yoc2hvcnRDb2RlKSA+PSAwID8gJ3J0bCcgOiAnbHRyJztcbiAgICB9LFxuICAgIHRyYW5zbGF0ZTogdHJhbnNsYXRlRnJhZ21lbnQsXG4gICAgZ2V0UmVhZHlTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGdSZWFkeVN0YXRlO1xuICAgIH0sXG4gICAgcmVhZHk6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKGdSZWFkeVN0YXRlID09ICdjb21wbGV0ZScgfHwgZ1JlYWR5U3RhdGUgPT0gJ2ludGVyYWN0aXZlJykge1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9jYWxpemVkJywgZnVuY3Rpb24gb25jZSgpIHtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2NhbGl6ZWQnLCBvbmNlKTtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KHdpbmRvdywgZG9jdW1lbnQpO1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzLCBfX3dfcGRmanNfcmVxdWlyZV9fKSA9PiB7XG5cblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsICh7XG4gIHZhbHVlOiB0cnVlXG59KSk7XG5leHBvcnRzLlBERkZpbmRDb250cm9sbGVyID0gZXhwb3J0cy5GaW5kU3RhdGUgPSB2b2lkIDA7XG5cbnZhciBfdWlfdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3BkZmpzTGliID0gX193X3BkZmpzX3JlcXVpcmVfXygzKTtcblxudmFyIF9wZGZfZmluZF91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oMjEpO1xuXG5jb25zdCBGaW5kU3RhdGUgPSB7XG4gIEZPVU5EOiAwLFxuICBOT1RfRk9VTkQ6IDEsXG4gIFdSQVBQRUQ6IDIsXG4gIFBFTkRJTkc6IDNcbn07XG5leHBvcnRzLkZpbmRTdGF0ZSA9IEZpbmRTdGF0ZTtcbmNvbnN0IEZJTkRfVElNRU9VVCA9IDI1MDtcbmNvbnN0IE1BVENIX1NDUk9MTF9PRkZTRVRfVE9QID0gLTUwO1xuY29uc3QgTUFUQ0hfU0NST0xMX09GRlNFVF9MRUZUID0gLTQwMDtcbmNvbnN0IENIQVJBQ1RFUlNfVE9fTk9STUFMSVpFID0ge1xuICBcIlxcdTIwMTBcIjogXCItXCIsXG4gIFwiXFx1MjAxOFwiOiBcIidcIixcbiAgXCJcXHUyMDE5XCI6IFwiJ1wiLFxuICBcIlxcdTIwMUFcIjogXCInXCIsXG4gIFwiXFx1MjAxQlwiOiBcIidcIixcbiAgXCJcXHUyMDFDXCI6ICdcIicsXG4gIFwiXFx1MjAxRFwiOiAnXCInLFxuICBcIlxcdTIwMUVcIjogJ1wiJyxcbiAgXCJcXHUyMDFGXCI6ICdcIicsXG4gIFwiXFx1MDBCQ1wiOiBcIjEvNFwiLFxuICBcIlxcdTAwQkRcIjogXCIxLzJcIixcbiAgXCJcXHUwMEJFXCI6IFwiMy80XCJcbn07XG5jb25zdCBESUFDUklUSUNTX0VYQ0VQVElPTiA9IG5ldyBTZXQoWzB4MzA5OSwgMHgzMDlhLCAweDA5NGQsIDB4MDljZCwgMHgwYTRkLCAweDBhY2QsIDB4MGI0ZCwgMHgwYmNkLCAweDBjNGQsIDB4MGNjZCwgMHgwZDNiLCAweDBkM2MsIDB4MGQ0ZCwgMHgwZGNhLCAweDBlM2EsIDB4MGViYSwgMHgwZjg0LCAweDEwMzksIDB4MTAzYSwgMHgxNzE0LCAweDE3MzQsIDB4MTdkMiwgMHgxYTYwLCAweDFiNDQsIDB4MWJhYSwgMHgxYmFiLCAweDFiZjIsIDB4MWJmMywgMHgyZDdmLCAweGE4MDYsIDB4YTgyYywgMHhhOGM0LCAweGE5NTMsIDB4YTljMCwgMHhhYWY2LCAweGFiZWQsIDB4MGM1NiwgMHgwZjcxLCAweDBmNzIsIDB4MGY3YSwgMHgwZjdiLCAweDBmN2MsIDB4MGY3ZCwgMHgwZjgwLCAweDBmNzRdKTtcbmNvbnN0IERJQUNSSVRJQ1NfRVhDRVBUSU9OX1NUUiA9IFsuLi5ESUFDUklUSUNTX0VYQ0VQVElPTi52YWx1ZXMoKV0ubWFwKHggPT4gU3RyaW5nLmZyb21DaGFyQ29kZSh4KSkuam9pbihcIlwiKTtcbmNvbnN0IERJQUNSSVRJQ1NfUkVHX0VYUCA9IC9cXHB7TX0rL2d1O1xuY29uc3QgU1BFQ0lBTF9DSEFSU19SRUdfRVhQID0gLyhbLiorP14ke30oKXxbXFxdXFxcXF0pfChcXHB7UH0pfChcXHMrKXwoXFxwe019KXwoXFxwe0x9KS9ndTtcbmNvbnN0IE5PVF9ESUFDUklUSUNfRlJPTV9FTkRfUkVHX0VYUCA9IC8oW15cXHB7TX1dKVxccHtNfSokL3U7XG5jb25zdCBOT1RfRElBQ1JJVElDX0ZST01fU1RBUlRfUkVHX0VYUCA9IC9eXFxwe019KihbXlxccHtNfV0pL3U7XG5sZXQgbm9ybWFsaXphdGlvblJlZ2V4ID0gbnVsbDtcblxuZnVuY3Rpb24gbm9ybWFsaXplKHRleHQpIHtcbiAgaWYgKCFub3JtYWxpemF0aW9uUmVnZXgpIHtcbiAgICBjb25zdCByZXBsYWNlID0gT2JqZWN0LmtleXMoQ0hBUkFDVEVSU19UT19OT1JNQUxJWkUpLmpvaW4oXCJcIik7XG4gICAgbm9ybWFsaXphdGlvblJlZ2V4ID0gbmV3IFJlZ0V4cChgKFske3JlcGxhY2V9XSl8KFxcXFxwe019Kyg/Oi1cXFxcbik/KXwoXFxcXFMtXFxcXG4pfChcXFxcbilgLCBcImd1bVwiKTtcbiAgfVxuXG4gIGNvbnN0IHJhd0RpYWNyaXRpY3NQb3NpdGlvbnMgPSBbXTtcbiAgbGV0IG07XG5cbiAgd2hpbGUgKChtID0gRElBQ1JJVElDU19SRUdfRVhQLmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgcmF3RGlhY3JpdGljc1Bvc2l0aW9ucy5wdXNoKFttWzBdLmxlbmd0aCwgbS5pbmRleF0pO1xuICB9XG5cbiAgbGV0IG5vcm1hbGl6ZWQgPSB0ZXh0Lm5vcm1hbGl6ZShcIk5GRFwiKTtcbiAgY29uc3QgcG9zaXRpb25zID0gW1swLCAwXV07XG4gIGxldCBrID0gMDtcbiAgbGV0IHNoaWZ0ID0gMDtcbiAgbGV0IHNoaWZ0T3JpZ2luID0gMDtcbiAgbGV0IGVvbCA9IDA7XG4gIGxldCBoYXNEaWFjcml0aWNzID0gZmFsc2U7XG4gIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2Uobm9ybWFsaXphdGlvblJlZ2V4LCAobWF0Y2gsIHAxLCBwMiwgcDMsIHA0LCBpKSA9PiB7XG4gICAgaSAtPSBzaGlmdE9yaWdpbjtcblxuICAgIGlmIChwMSkge1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBDSEFSQUNURVJTX1RPX05PUk1BTElaRVttYXRjaF07XG4gICAgICBjb25zdCBqaiA9IHJlcGxhY2VtZW50Lmxlbmd0aDtcblxuICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBqajsgaisrKSB7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFtpIC0gc2hpZnQgKyBqLCBzaGlmdCAtIGpdKTtcbiAgICAgIH1cblxuICAgICAgc2hpZnQgLT0gamogLSAxO1xuICAgICAgcmV0dXJuIHJlcGxhY2VtZW50O1xuICAgIH1cblxuICAgIGlmIChwMikge1xuICAgICAgY29uc3QgaGFzVHJhaWxpbmdEYXNoRU9MID0gcDIuZW5kc1dpdGgoXCJcXG5cIik7XG4gICAgICBjb25zdCBsZW4gPSBoYXNUcmFpbGluZ0Rhc2hFT0wgPyBwMi5sZW5ndGggLSAyIDogcDIubGVuZ3RoO1xuICAgICAgaGFzRGlhY3JpdGljcyA9IHRydWU7XG4gICAgICBsZXQgamogPSBsZW47XG5cbiAgICAgIGlmIChpICsgZW9sID09PSByYXdEaWFjcml0aWNzUG9zaXRpb25zW2tdPy5bMV0pIHtcbiAgICAgICAgamogLT0gcmF3RGlhY3JpdGljc1Bvc2l0aW9uc1trXVswXTtcbiAgICAgICAgKytrO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGpqICsgMTsgaisrKSB7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKFtpIC0gMSAtIHNoaWZ0ICsgaiwgc2hpZnQgLSBqXSk7XG4gICAgICB9XG5cbiAgICAgIHNoaWZ0IC09IGpqO1xuICAgICAgc2hpZnRPcmlnaW4gKz0gamo7XG5cbiAgICAgIGlmIChoYXNUcmFpbGluZ0Rhc2hFT0wpIHtcbiAgICAgICAgaSArPSBsZW4gLSAxO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChbaSAtIHNoaWZ0ICsgMSwgMSArIHNoaWZ0XSk7XG4gICAgICAgIHNoaWZ0ICs9IDE7XG4gICAgICAgIHNoaWZ0T3JpZ2luICs9IDE7XG4gICAgICAgIGVvbCArPSAxO1xuICAgICAgICByZXR1cm4gcDIuc2xpY2UoMCwgbGVuKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHAyO1xuICAgIH1cblxuICAgIGlmIChwMykge1xuICAgICAgcG9zaXRpb25zLnB1c2goW2kgLSBzaGlmdCArIDEsIDEgKyBzaGlmdF0pO1xuICAgICAgc2hpZnQgKz0gMTtcbiAgICAgIHNoaWZ0T3JpZ2luICs9IDE7XG4gICAgICBlb2wgKz0gMTtcbiAgICAgIHJldHVybiBwMy5jaGFyQXQoMCk7XG4gICAgfVxuXG4gICAgcG9zaXRpb25zLnB1c2goW2kgLSBzaGlmdCArIDEsIHNoaWZ0IC0gMV0pO1xuICAgIHNoaWZ0IC09IDE7XG4gICAgc2hpZnRPcmlnaW4gKz0gMTtcbiAgICBlb2wgKz0gMTtcbiAgICByZXR1cm4gXCIgXCI7XG4gIH0pO1xuICBwb3NpdGlvbnMucHVzaChbbm9ybWFsaXplZC5sZW5ndGgsIHNoaWZ0XSk7XG4gIHJldHVybiBbbm9ybWFsaXplZCwgcG9zaXRpb25zLCBoYXNEaWFjcml0aWNzXTtcbn1cblxuZnVuY3Rpb24gZ2V0T3JpZ2luYWxJbmRleChkaWZmcywgcG9zLCBsZW4pIHtcbiAgaWYgKCFkaWZmcykge1xuICAgIHJldHVybiBbcG9zLCBsZW5dO1xuICB9XG5cbiAgY29uc3Qgc3RhcnQgPSBwb3M7XG4gIGNvbnN0IGVuZCA9IHBvcyArIGxlbjtcbiAgbGV0IGkgPSAoMCwgX3VpX3V0aWxzLmJpbmFyeVNlYXJjaEZpcnN0SXRlbSkoZGlmZnMsIHggPT4geFswXSA+PSBzdGFydCk7XG5cbiAgaWYgKGRpZmZzW2ldWzBdID4gc3RhcnQpIHtcbiAgICAtLWk7XG4gIH1cblxuICBsZXQgaiA9ICgwLCBfdWlfdXRpbHMuYmluYXJ5U2VhcmNoRmlyc3RJdGVtKShkaWZmcywgeCA9PiB4WzBdID49IGVuZCwgaSk7XG5cbiAgaWYgKGRpZmZzW2pdWzBdID4gZW5kKSB7XG4gICAgLS1qO1xuICB9XG5cbiAgcmV0dXJuIFtzdGFydCArIGRpZmZzW2ldWzFdLCBsZW4gKyBkaWZmc1tqXVsxXSAtIGRpZmZzW2ldWzFdXTtcbn1cblxuY2xhc3MgUERGRmluZENvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbGlua1NlcnZpY2UsXG4gICAgZXZlbnRCdXNcbiAgfSkge1xuICAgIHRoaXMuX2xpbmtTZXJ2aWNlID0gbGlua1NlcnZpY2U7XG4gICAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICB0aGlzLiNyZXNldCgpO1xuXG4gICAgZXZlbnRCdXMuX29uKFwiZmluZFwiLCB0aGlzLiNvbkZpbmQuYmluZCh0aGlzKSk7XG5cbiAgICBldmVudEJ1cy5fb24oXCJmaW5kYmFyY2xvc2VcIiwgdGhpcy4jb25GaW5kQmFyQ2xvc2UuYmluZCh0aGlzKSk7XG4gIH1cblxuICBnZXQgaGlnaGxpZ2h0TWF0Y2hlcygpIHtcbiAgICByZXR1cm4gdGhpcy5faGlnaGxpZ2h0TWF0Y2hlcztcbiAgfVxuXG4gIGdldCBwYWdlTWF0Y2hlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnZU1hdGNoZXM7XG4gIH1cblxuICBnZXQgcGFnZU1hdGNoZXNMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhZ2VNYXRjaGVzTGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHNlbGVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcbiAgfVxuXG4gIGdldCBzdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gIH1cblxuICBzZXREb2N1bWVudChwZGZEb2N1bWVudCkge1xuICAgIGlmICh0aGlzLl9wZGZEb2N1bWVudCkge1xuICAgICAgdGhpcy4jcmVzZXQoKTtcbiAgICB9XG5cbiAgICBpZiAoIXBkZkRvY3VtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcGRmRG9jdW1lbnQgPSBwZGZEb2N1bWVudDtcblxuICAgIHRoaXMuX2ZpcnN0UGFnZUNhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICB9XG5cbiAgI29uRmluZChzdGF0ZSkge1xuICAgIGlmICghc3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwZGZEb2N1bWVudCA9IHRoaXMuX3BkZkRvY3VtZW50O1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGVcbiAgICB9ID0gc3RhdGU7XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IG51bGwgfHwgdGhpcy4jc2hvdWxkRGlydHlNYXRjaChzdGF0ZSkpIHtcbiAgICAgIHRoaXMuX2RpcnR5TWF0Y2ggPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG5cbiAgICBpZiAodHlwZSAhPT0gXCJoaWdobGlnaHRhbGxjaGFuZ2VcIikge1xuICAgICAgdGhpcy4jdXBkYXRlVUlTdGF0ZShGaW5kU3RhdGUuUEVORElORyk7XG4gICAgfVxuXG4gICAgdGhpcy5fZmlyc3RQYWdlQ2FwYWJpbGl0eS5wcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9wZGZEb2N1bWVudCB8fCBwZGZEb2N1bWVudCAmJiB0aGlzLl9wZGZEb2N1bWVudCAhPT0gcGRmRG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiNleHRyYWN0VGV4dCgpO1xuICAgICAgY29uc3QgZmluZGJhckNsb3NlZCA9ICF0aGlzLl9oaWdobGlnaHRNYXRjaGVzO1xuICAgICAgY29uc3QgcGVuZGluZ1RpbWVvdXQgPSAhIXRoaXMuX2ZpbmRUaW1lb3V0O1xuXG4gICAgICBpZiAodGhpcy5fZmluZFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2ZpbmRUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5fZmluZFRpbWVvdXQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgdGhpcy5fZmluZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLiNuZXh0TWF0Y2goKTtcbiAgICAgICAgICB0aGlzLl9maW5kVGltZW91dCA9IG51bGw7XG4gICAgICAgIH0sIEZJTkRfVElNRU9VVCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2RpcnR5TWF0Y2gpIHtcbiAgICAgICAgdGhpcy4jbmV4dE1hdGNoKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYWdhaW5cIikge1xuICAgICAgICB0aGlzLiNuZXh0TWF0Y2goKTtcblxuICAgICAgICBpZiAoZmluZGJhckNsb3NlZCAmJiB0aGlzLl9zdGF0ZS5oaWdobGlnaHRBbGwpIHtcbiAgICAgICAgICB0aGlzLiN1cGRhdGVBbGxQYWdlcygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiaGlnaGxpZ2h0YWxsY2hhbmdlXCIpIHtcbiAgICAgICAgaWYgKHBlbmRpbmdUaW1lb3V0KSB7XG4gICAgICAgICAgdGhpcy4jbmV4dE1hdGNoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5faGlnaGxpZ2h0TWF0Y2hlcyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiN1cGRhdGVBbGxQYWdlcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4jbmV4dE1hdGNoKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzY3JvbGxNYXRjaEludG9WaWV3KHtcbiAgICBlbGVtZW50ID0gbnVsbCxcbiAgICBzZWxlY3RlZExlZnQgPSAwLFxuICAgIHBhZ2VJbmRleCA9IC0xLFxuICAgIG1hdGNoSW5kZXggPSAtMVxuICB9KSB7XG4gICAgaWYgKCF0aGlzLl9zY3JvbGxNYXRjaGVzIHx8ICFlbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChtYXRjaEluZGV4ID09PSAtMSB8fCBtYXRjaEluZGV4ICE9PSB0aGlzLl9zZWxlY3RlZC5tYXRjaElkeCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAocGFnZUluZGV4ID09PSAtMSB8fCBwYWdlSW5kZXggIT09IHRoaXMuX3NlbGVjdGVkLnBhZ2VJZHgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zY3JvbGxNYXRjaGVzID0gZmFsc2U7XG4gICAgY29uc3Qgc3BvdCA9IHtcbiAgICAgIHRvcDogTUFUQ0hfU0NST0xMX09GRlNFVF9UT1AsXG4gICAgICBsZWZ0OiBzZWxlY3RlZExlZnQgKyBNQVRDSF9TQ1JPTExfT0ZGU0VUX0xFRlRcbiAgICB9O1xuICAgICgwLCBfdWlfdXRpbHMuc2Nyb2xsSW50b1ZpZXcpKGVsZW1lbnQsIHNwb3QsIHRydWUpO1xuICB9XG5cbiAgI3Jlc2V0KCkge1xuICAgIHRoaXMuX2hpZ2hsaWdodE1hdGNoZXMgPSBmYWxzZTtcbiAgICB0aGlzLl9zY3JvbGxNYXRjaGVzID0gZmFsc2U7XG4gICAgdGhpcy5fcGRmRG9jdW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX3BhZ2VNYXRjaGVzID0gW107XG4gICAgdGhpcy5fcGFnZU1hdGNoZXNMZW5ndGggPSBbXTtcbiAgICB0aGlzLl9zdGF0ZSA9IG51bGw7XG4gICAgdGhpcy5fc2VsZWN0ZWQgPSB7XG4gICAgICBwYWdlSWR4OiAtMSxcbiAgICAgIG1hdGNoSWR4OiAtMVxuICAgIH07XG4gICAgdGhpcy5fb2Zmc2V0ID0ge1xuICAgICAgcGFnZUlkeDogbnVsbCxcbiAgICAgIG1hdGNoSWR4OiBudWxsLFxuICAgICAgd3JhcHBlZDogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuX2V4dHJhY3RUZXh0UHJvbWlzZXMgPSBbXTtcbiAgICB0aGlzLl9wYWdlQ29udGVudHMgPSBbXTtcbiAgICB0aGlzLl9wYWdlRGlmZnMgPSBbXTtcbiAgICB0aGlzLl9oYXNEaWFjcml0aWNzID0gW107XG4gICAgdGhpcy5fbWF0Y2hlc0NvdW50VG90YWwgPSAwO1xuICAgIHRoaXMuX3BhZ2VzVG9TZWFyY2ggPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdGaW5kTWF0Y2hlcyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLl9yZXN1bWVQYWdlSWR4ID0gbnVsbDtcbiAgICB0aGlzLl9kaXJ0eU1hdGNoID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2ZpbmRUaW1lb3V0KTtcbiAgICB0aGlzLl9maW5kVGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5fZmlyc3RQYWdlQ2FwYWJpbGl0eSA9ICgwLCBfcGRmanNMaWIuY3JlYXRlUHJvbWlzZUNhcGFiaWxpdHkpKCk7XG4gIH1cblxuICBnZXQgI3F1ZXJ5KCkge1xuICAgIGlmICh0aGlzLl9zdGF0ZS5xdWVyeSAhPT0gdGhpcy5fcmF3UXVlcnkpIHtcbiAgICAgIHRoaXMuX3Jhd1F1ZXJ5ID0gdGhpcy5fc3RhdGUucXVlcnk7XG4gICAgICBbdGhpcy5fbm9ybWFsaXplZFF1ZXJ5XSA9IG5vcm1hbGl6ZSh0aGlzLl9zdGF0ZS5xdWVyeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX25vcm1hbGl6ZWRRdWVyeTtcbiAgfVxuXG4gICNzaG91bGREaXJ0eU1hdGNoKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlLnF1ZXJ5ICE9PSB0aGlzLl9zdGF0ZS5xdWVyeSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgc3dpdGNoIChzdGF0ZS50eXBlKSB7XG4gICAgICBjYXNlIFwiYWdhaW5cIjpcbiAgICAgICAgY29uc3QgcGFnZU51bWJlciA9IHRoaXMuX3NlbGVjdGVkLnBhZ2VJZHggKyAxO1xuICAgICAgICBjb25zdCBsaW5rU2VydmljZSA9IHRoaXMuX2xpbmtTZXJ2aWNlO1xuXG4gICAgICAgIGlmIChwYWdlTnVtYmVyID49IDEgJiYgcGFnZU51bWJlciA8PSBsaW5rU2VydmljZS5wYWdlc0NvdW50ICYmIHBhZ2VOdW1iZXIgIT09IGxpbmtTZXJ2aWNlLnBhZ2UgJiYgIWxpbmtTZXJ2aWNlLmlzUGFnZVZpc2libGUocGFnZU51bWJlcikpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgY2FzZSBcImhpZ2hsaWdodGFsbGNoYW5nZVwiOlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAjaXNFbnRpcmVXb3JkKGNvbnRlbnQsIHN0YXJ0SWR4LCBsZW5ndGgpIHtcbiAgICBsZXQgbWF0Y2ggPSBjb250ZW50LnNsaWNlKDAsIHN0YXJ0SWR4KS5tYXRjaChOT1RfRElBQ1JJVElDX0ZST01fRU5EX1JFR19FWFApO1xuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBmaXJzdCA9IGNvbnRlbnQuY2hhckNvZGVBdChzdGFydElkeCk7XG4gICAgICBjb25zdCBsaW1pdCA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAgIGlmICgoMCwgX3BkZl9maW5kX3V0aWxzLmdldENoYXJhY3RlclR5cGUpKGZpcnN0KSA9PT0gKDAsIF9wZGZfZmluZF91dGlscy5nZXRDaGFyYWN0ZXJUeXBlKShsaW1pdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1hdGNoID0gY29udGVudC5zbGljZShzdGFydElkeCArIGxlbmd0aCkubWF0Y2goTk9UX0RJQUNSSVRJQ19GUk9NX1NUQVJUX1JFR19FWFApO1xuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBsYXN0ID0gY29udGVudC5jaGFyQ29kZUF0KHN0YXJ0SWR4ICsgbGVuZ3RoIC0gMSk7XG4gICAgICBjb25zdCBsaW1pdCA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAgIGlmICgoMCwgX3BkZl9maW5kX3V0aWxzLmdldENoYXJhY3RlclR5cGUpKGxhc3QpID09PSAoMCwgX3BkZl9maW5kX3V0aWxzLmdldENoYXJhY3RlclR5cGUpKGxpbWl0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAjY2FsY3VsYXRlUmVnRXhwTWF0Y2gocXVlcnksIGVudGlyZVdvcmQsIHBhZ2VJbmRleCwgcGFnZUNvbnRlbnQpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gW10sXG4gICAgICAgICAgbWF0Y2hlc0xlbmd0aCA9IFtdO1xuICAgIGNvbnN0IGRpZmZzID0gdGhpcy5fcGFnZURpZmZzW3BhZ2VJbmRleF07XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IHF1ZXJ5LmV4ZWMocGFnZUNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgaWYgKGVudGlyZVdvcmQgJiYgIXRoaXMuI2lzRW50aXJlV29yZChwYWdlQ29udGVudCwgbWF0Y2guaW5kZXgsIG1hdGNoWzBdLmxlbmd0aCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFttYXRjaFBvcywgbWF0Y2hMZW5dID0gZ2V0T3JpZ2luYWxJbmRleChkaWZmcywgbWF0Y2guaW5kZXgsIG1hdGNoWzBdLmxlbmd0aCk7XG5cbiAgICAgIGlmIChtYXRjaExlbikge1xuICAgICAgICBtYXRjaGVzLnB1c2gobWF0Y2hQb3MpO1xuICAgICAgICBtYXRjaGVzTGVuZ3RoLnB1c2gobWF0Y2hMZW4pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3BhZ2VNYXRjaGVzW3BhZ2VJbmRleF0gPSBtYXRjaGVzO1xuICAgIHRoaXMuX3BhZ2VNYXRjaGVzTGVuZ3RoW3BhZ2VJbmRleF0gPSBtYXRjaGVzTGVuZ3RoO1xuICB9XG5cbiAgI2NvbnZlcnRUb1JlZ0V4cFN0cmluZyhxdWVyeSwgaGFzRGlhY3JpdGljcykge1xuICAgIGNvbnN0IHtcbiAgICAgIG1hdGNoRGlhY3JpdGljc1xuICAgIH0gPSB0aGlzLl9zdGF0ZTtcbiAgICBsZXQgaXNVbmljb2RlID0gZmFsc2U7XG4gICAgcXVlcnkgPSBxdWVyeS5yZXBsYWNlKFNQRUNJQUxfQ0hBUlNfUkVHX0VYUCwgKG1hdGNoLCBwMSwgcDIsIHAzLCBwNCwgcDUpID0+IHtcbiAgICAgIGlmIChwMSkge1xuICAgICAgICByZXR1cm4gYFsgXSpcXFxcJHtwMX1bIF0qYDtcbiAgICAgIH1cblxuICAgICAgaWYgKHAyKSB7XG4gICAgICAgIHJldHVybiBgWyBdKiR7cDJ9WyBdKmA7XG4gICAgICB9XG5cbiAgICAgIGlmIChwMykge1xuICAgICAgICByZXR1cm4gXCJbIF0rXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXRjaERpYWNyaXRpY3MpIHtcbiAgICAgICAgcmV0dXJuIHA0IHx8IHA1O1xuICAgICAgfVxuXG4gICAgICBpZiAocDQpIHtcbiAgICAgICAgcmV0dXJuIERJQUNSSVRJQ1NfRVhDRVBUSU9OLmhhcyhwNC5jaGFyQ29kZUF0KDApKSA/IHA0IDogXCJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc0RpYWNyaXRpY3MpIHtcbiAgICAgICAgaXNVbmljb2RlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGAke3A1fVxcXFxwe019KmA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwNTtcbiAgICB9KTtcbiAgICBjb25zdCB0cmFpbGluZ1NwYWNlcyA9IFwiWyBdKlwiO1xuXG4gICAgaWYgKHF1ZXJ5LmVuZHNXaXRoKHRyYWlsaW5nU3BhY2VzKSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCBxdWVyeS5sZW5ndGggLSB0cmFpbGluZ1NwYWNlcy5sZW5ndGgpO1xuICAgIH1cblxuICAgIGlmIChtYXRjaERpYWNyaXRpY3MpIHtcbiAgICAgIGlmIChoYXNEaWFjcml0aWNzKSB7XG4gICAgICAgIGlzVW5pY29kZSA9IHRydWU7XG4gICAgICAgIHF1ZXJ5ID0gYCR7cXVlcnl9KD89WyR7RElBQ1JJVElDU19FWENFUFRJT05fU1RSfV18W15cXFxccHtNfV18JClgO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbaXNVbmljb2RlLCBxdWVyeV07XG4gIH1cblxuICAjY2FsY3VsYXRlTWF0Y2gocGFnZUluZGV4KSB7XG4gICAgbGV0IHF1ZXJ5ID0gdGhpcy4jcXVlcnk7XG5cbiAgICBpZiAocXVlcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgY2FzZVNlbnNpdGl2ZSxcbiAgICAgIGVudGlyZVdvcmQsXG4gICAgICBwaHJhc2VTZWFyY2hcbiAgICB9ID0gdGhpcy5fc3RhdGU7XG4gICAgY29uc3QgcGFnZUNvbnRlbnQgPSB0aGlzLl9wYWdlQ29udGVudHNbcGFnZUluZGV4XTtcbiAgICBjb25zdCBoYXNEaWFjcml0aWNzID0gdGhpcy5faGFzRGlhY3JpdGljc1twYWdlSW5kZXhdO1xuICAgIGxldCBpc1VuaWNvZGUgPSBmYWxzZTtcblxuICAgIGlmIChwaHJhc2VTZWFyY2gpIHtcbiAgICAgIFtpc1VuaWNvZGUsIHF1ZXJ5XSA9IHRoaXMuI2NvbnZlcnRUb1JlZ0V4cFN0cmluZyhxdWVyeSwgaGFzRGlhY3JpdGljcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gcXVlcnkubWF0Y2goL1xcUysvZyk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBxdWVyeSA9IG1hdGNoLnNvcnQoKS5yZXZlcnNlKCkubWFwKHEgPT4ge1xuICAgICAgICAgIGNvbnN0IFtpc1VuaWNvZGVQYXJ0LCBxdWVyeVBhcnRdID0gdGhpcy4jY29udmVydFRvUmVnRXhwU3RyaW5nKHEsIGhhc0RpYWNyaXRpY3MpO1xuICAgICAgICAgIGlzVW5pY29kZSB8fD0gaXNVbmljb2RlUGFydDtcbiAgICAgICAgICByZXR1cm4gYCgke3F1ZXJ5UGFydH0pYDtcbiAgICAgICAgfSkuam9pbihcInxcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZmxhZ3MgPSBgZyR7aXNVbmljb2RlID8gXCJ1XCIgOiBcIlwifSR7Y2FzZVNlbnNpdGl2ZSA/IFwiXCIgOiBcImlcIn1gO1xuICAgIHF1ZXJ5ID0gbmV3IFJlZ0V4cChxdWVyeSwgZmxhZ3MpO1xuICAgIHRoaXMuI2NhbGN1bGF0ZVJlZ0V4cE1hdGNoKHF1ZXJ5LCBlbnRpcmVXb3JkLCBwYWdlSW5kZXgsIHBhZ2VDb250ZW50KTtcblxuICAgIGlmICh0aGlzLl9zdGF0ZS5oaWdobGlnaHRBbGwpIHtcbiAgICAgIHRoaXMuI3VwZGF0ZVBhZ2UocGFnZUluZGV4KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmVzdW1lUGFnZUlkeCA9PT0gcGFnZUluZGV4KSB7XG4gICAgICB0aGlzLl9yZXN1bWVQYWdlSWR4ID0gbnVsbDtcbiAgICAgIHRoaXMuI25leHRQYWdlTWF0Y2goKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlTWF0Y2hlc0NvdW50ID0gdGhpcy5fcGFnZU1hdGNoZXNbcGFnZUluZGV4XS5sZW5ndGg7XG5cbiAgICBpZiAocGFnZU1hdGNoZXNDb3VudCA+IDApIHtcbiAgICAgIHRoaXMuX21hdGNoZXNDb3VudFRvdGFsICs9IHBhZ2VNYXRjaGVzQ291bnQ7XG4gICAgICB0aGlzLiN1cGRhdGVVSVJlc3VsdHNDb3VudCgpO1xuICAgIH1cbiAgfVxuXG4gICNleHRyYWN0VGV4dCgpIHtcbiAgICBpZiAodGhpcy5fZXh0cmFjdFRleHRQcm9taXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMuX2xpbmtTZXJ2aWNlLnBhZ2VzQ291bnQ7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCBleHRyYWN0VGV4dENhcGFiaWxpdHkgPSAoMCwgX3BkZmpzTGliLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuICAgICAgdGhpcy5fZXh0cmFjdFRleHRQcm9taXNlc1tpXSA9IGV4dHJhY3RUZXh0Q2FwYWJpbGl0eS5wcm9taXNlO1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZGZEb2N1bWVudC5nZXRQYWdlKGkgKyAxKS50aGVuKHBkZlBhZ2UgPT4ge1xuICAgICAgICAgIHJldHVybiBwZGZQYWdlLmdldFRleHRDb250ZW50KCk7XG4gICAgICAgIH0pLnRoZW4odGV4dENvbnRlbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0ckJ1ZiA9IFtdO1xuXG4gICAgICAgICAgZm9yIChjb25zdCB0ZXh0SXRlbSBvZiB0ZXh0Q29udGVudC5pdGVtcykge1xuICAgICAgICAgICAgc3RyQnVmLnB1c2godGV4dEl0ZW0uc3RyKTtcblxuICAgICAgICAgICAgaWYgKHRleHRJdGVtLmhhc0VPTCkge1xuICAgICAgICAgICAgICBzdHJCdWYucHVzaChcIlxcblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBbdGhpcy5fcGFnZUNvbnRlbnRzW2ldLCB0aGlzLl9wYWdlRGlmZnNbaV0sIHRoaXMuX2hhc0RpYWNyaXRpY3NbaV1dID0gbm9ybWFsaXplKHN0ckJ1Zi5qb2luKFwiXCIpKTtcbiAgICAgICAgICBleHRyYWN0VGV4dENhcGFiaWxpdHkucmVzb2x2ZSgpO1xuICAgICAgICB9LCByZWFzb24gPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBnZXQgdGV4dCBjb250ZW50IGZvciBwYWdlICR7aSArIDF9YCwgcmVhc29uKTtcbiAgICAgICAgICB0aGlzLl9wYWdlQ29udGVudHNbaV0gPSBcIlwiO1xuICAgICAgICAgIHRoaXMuX3BhZ2VEaWZmc1tpXSA9IG51bGw7XG4gICAgICAgICAgdGhpcy5faGFzRGlhY3JpdGljc1tpXSA9IGZhbHNlO1xuICAgICAgICAgIGV4dHJhY3RUZXh0Q2FwYWJpbGl0eS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgI3VwZGF0ZVBhZ2UoaW5kZXgpIHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsTWF0Y2hlcyAmJiB0aGlzLl9zZWxlY3RlZC5wYWdlSWR4ID09PSBpbmRleCkge1xuICAgICAgdGhpcy5fbGlua1NlcnZpY2UucGFnZSA9IGluZGV4ICsgMTtcbiAgICB9XG5cbiAgICB0aGlzLl9ldmVudEJ1cy5kaXNwYXRjaChcInVwZGF0ZXRleHRsYXllcm1hdGNoZXNcIiwge1xuICAgICAgc291cmNlOiB0aGlzLFxuICAgICAgcGFnZUluZGV4OiBpbmRleFxuICAgIH0pO1xuICB9XG5cbiAgI3VwZGF0ZUFsbFBhZ2VzKCkge1xuICAgIHRoaXMuX2V2ZW50QnVzLmRpc3BhdGNoKFwidXBkYXRldGV4dGxheWVybWF0Y2hlc1wiLCB7XG4gICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICBwYWdlSW5kZXg6IC0xXG4gICAgfSk7XG4gIH1cblxuICAjbmV4dE1hdGNoKCkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5fc3RhdGUuZmluZFByZXZpb3VzO1xuICAgIGNvbnN0IGN1cnJlbnRQYWdlSW5kZXggPSB0aGlzLl9saW5rU2VydmljZS5wYWdlIC0gMTtcbiAgICBjb25zdCBudW1QYWdlcyA9IHRoaXMuX2xpbmtTZXJ2aWNlLnBhZ2VzQ291bnQ7XG4gICAgdGhpcy5faGlnaGxpZ2h0TWF0Y2hlcyA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5fZGlydHlNYXRjaCkge1xuICAgICAgdGhpcy5fZGlydHlNYXRjaCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc2VsZWN0ZWQucGFnZUlkeCA9IHRoaXMuX3NlbGVjdGVkLm1hdGNoSWR4ID0gLTE7XG4gICAgICB0aGlzLl9vZmZzZXQucGFnZUlkeCA9IGN1cnJlbnRQYWdlSW5kZXg7XG4gICAgICB0aGlzLl9vZmZzZXQubWF0Y2hJZHggPSBudWxsO1xuICAgICAgdGhpcy5fb2Zmc2V0LndyYXBwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3Jlc3VtZVBhZ2VJZHggPSBudWxsO1xuICAgICAgdGhpcy5fcGFnZU1hdGNoZXMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX3BhZ2VNYXRjaGVzTGVuZ3RoLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9tYXRjaGVzQ291bnRUb3RhbCA9IDA7XG4gICAgICB0aGlzLiN1cGRhdGVBbGxQYWdlcygpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVBhZ2VzOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdGaW5kTWF0Y2hlcy5oYXMoaSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BlbmRpbmdGaW5kTWF0Y2hlcy5hZGQoaSk7XG5cbiAgICAgICAgdGhpcy5fZXh0cmFjdFRleHRQcm9taXNlc1tpXS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLl9wZW5kaW5nRmluZE1hdGNoZXMuZGVsZXRlKGkpO1xuXG4gICAgICAgICAgdGhpcy4jY2FsY3VsYXRlTWF0Y2goaSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLiNxdWVyeSA9PT0gXCJcIikge1xuICAgICAgdGhpcy4jdXBkYXRlVUlTdGF0ZShGaW5kU3RhdGUuRk9VTkQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9yZXN1bWVQYWdlSWR4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5fb2Zmc2V0O1xuICAgIHRoaXMuX3BhZ2VzVG9TZWFyY2ggPSBudW1QYWdlcztcblxuICAgIGlmIChvZmZzZXQubWF0Y2hJZHggIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IG51bVBhZ2VNYXRjaGVzID0gdGhpcy5fcGFnZU1hdGNoZXNbb2Zmc2V0LnBhZ2VJZHhdLmxlbmd0aDtcblxuICAgICAgaWYgKCFwcmV2aW91cyAmJiBvZmZzZXQubWF0Y2hJZHggKyAxIDwgbnVtUGFnZU1hdGNoZXMgfHwgcHJldmlvdXMgJiYgb2Zmc2V0Lm1hdGNoSWR4ID4gMCkge1xuICAgICAgICBvZmZzZXQubWF0Y2hJZHggPSBwcmV2aW91cyA/IG9mZnNldC5tYXRjaElkeCAtIDEgOiBvZmZzZXQubWF0Y2hJZHggKyAxO1xuICAgICAgICB0aGlzLiN1cGRhdGVNYXRjaCh0cnVlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiNhZHZhbmNlT2Zmc2V0UGFnZShwcmV2aW91cyk7XG4gICAgfVxuXG4gICAgdGhpcy4jbmV4dFBhZ2VNYXRjaCgpO1xuICB9XG5cbiAgI21hdGNoZXNSZWFkeShtYXRjaGVzKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5fb2Zmc2V0O1xuICAgIGNvbnN0IG51bU1hdGNoZXMgPSBtYXRjaGVzLmxlbmd0aDtcbiAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuX3N0YXRlLmZpbmRQcmV2aW91cztcblxuICAgIGlmIChudW1NYXRjaGVzKSB7XG4gICAgICBvZmZzZXQubWF0Y2hJZHggPSBwcmV2aW91cyA/IG51bU1hdGNoZXMgLSAxIDogMDtcbiAgICAgIHRoaXMuI3VwZGF0ZU1hdGNoKHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy4jYWR2YW5jZU9mZnNldFBhZ2UocHJldmlvdXMpO1xuXG4gICAgaWYgKG9mZnNldC53cmFwcGVkKSB7XG4gICAgICBvZmZzZXQubWF0Y2hJZHggPSBudWxsO1xuXG4gICAgICBpZiAodGhpcy5fcGFnZXNUb1NlYXJjaCA8IDApIHtcbiAgICAgICAgdGhpcy4jdXBkYXRlTWF0Y2goZmFsc2UpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAjbmV4dFBhZ2VNYXRjaCgpIHtcbiAgICBpZiAodGhpcy5fcmVzdW1lUGFnZUlkeCAhPT0gbnVsbCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIlRoZXJlIGNhbiBvbmx5IGJlIG9uZSBwZW5kaW5nIHBhZ2UuXCIpO1xuICAgIH1cblxuICAgIGxldCBtYXRjaGVzID0gbnVsbDtcblxuICAgIGRvIHtcbiAgICAgIGNvbnN0IHBhZ2VJZHggPSB0aGlzLl9vZmZzZXQucGFnZUlkeDtcbiAgICAgIG1hdGNoZXMgPSB0aGlzLl9wYWdlTWF0Y2hlc1twYWdlSWR4XTtcblxuICAgICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAgIHRoaXMuX3Jlc3VtZVBhZ2VJZHggPSBwYWdlSWR4O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IHdoaWxlICghdGhpcy4jbWF0Y2hlc1JlYWR5KG1hdGNoZXMpKTtcbiAgfVxuXG4gICNhZHZhbmNlT2Zmc2V0UGFnZShwcmV2aW91cykge1xuICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuX29mZnNldDtcbiAgICBjb25zdCBudW1QYWdlcyA9IHRoaXMuX2xpbmtTZXJ2aWNlLnBhZ2VzQ291bnQ7XG4gICAgb2Zmc2V0LnBhZ2VJZHggPSBwcmV2aW91cyA/IG9mZnNldC5wYWdlSWR4IC0gMSA6IG9mZnNldC5wYWdlSWR4ICsgMTtcbiAgICBvZmZzZXQubWF0Y2hJZHggPSBudWxsO1xuICAgIHRoaXMuX3BhZ2VzVG9TZWFyY2gtLTtcblxuICAgIGlmIChvZmZzZXQucGFnZUlkeCA+PSBudW1QYWdlcyB8fCBvZmZzZXQucGFnZUlkeCA8IDApIHtcbiAgICAgIG9mZnNldC5wYWdlSWR4ID0gcHJldmlvdXMgPyBudW1QYWdlcyAtIDEgOiAwO1xuICAgICAgb2Zmc2V0LndyYXBwZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gICN1cGRhdGVNYXRjaChmb3VuZCA9IGZhbHNlKSB7XG4gICAgbGV0IHN0YXRlID0gRmluZFN0YXRlLk5PVF9GT1VORDtcbiAgICBjb25zdCB3cmFwcGVkID0gdGhpcy5fb2Zmc2V0LndyYXBwZWQ7XG4gICAgdGhpcy5fb2Zmc2V0LndyYXBwZWQgPSBmYWxzZTtcblxuICAgIGlmIChmb3VuZCkge1xuICAgICAgY29uc3QgcHJldmlvdXNQYWdlID0gdGhpcy5fc2VsZWN0ZWQucGFnZUlkeDtcbiAgICAgIHRoaXMuX3NlbGVjdGVkLnBhZ2VJZHggPSB0aGlzLl9vZmZzZXQucGFnZUlkeDtcbiAgICAgIHRoaXMuX3NlbGVjdGVkLm1hdGNoSWR4ID0gdGhpcy5fb2Zmc2V0Lm1hdGNoSWR4O1xuICAgICAgc3RhdGUgPSB3cmFwcGVkID8gRmluZFN0YXRlLldSQVBQRUQgOiBGaW5kU3RhdGUuRk9VTkQ7XG5cbiAgICAgIGlmIChwcmV2aW91c1BhZ2UgIT09IC0xICYmIHByZXZpb3VzUGFnZSAhPT0gdGhpcy5fc2VsZWN0ZWQucGFnZUlkeCkge1xuICAgICAgICB0aGlzLiN1cGRhdGVQYWdlKHByZXZpb3VzUGFnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4jdXBkYXRlVUlTdGF0ZShzdGF0ZSwgdGhpcy5fc3RhdGUuZmluZFByZXZpb3VzKTtcblxuICAgIGlmICh0aGlzLl9zZWxlY3RlZC5wYWdlSWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5fc2Nyb2xsTWF0Y2hlcyA9IHRydWU7XG4gICAgICB0aGlzLiN1cGRhdGVQYWdlKHRoaXMuX3NlbGVjdGVkLnBhZ2VJZHgpO1xuICAgIH1cbiAgfVxuXG4gICNvbkZpbmRCYXJDbG9zZShldnQpIHtcbiAgICBjb25zdCBwZGZEb2N1bWVudCA9IHRoaXMuX3BkZkRvY3VtZW50O1xuXG4gICAgdGhpcy5fZmlyc3RQYWdlQ2FwYWJpbGl0eS5wcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9wZGZEb2N1bWVudCB8fCBwZGZEb2N1bWVudCAmJiB0aGlzLl9wZGZEb2N1bWVudCAhPT0gcGRmRG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fZmluZFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2ZpbmRUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5fZmluZFRpbWVvdXQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcmVzdW1lUGFnZUlkeCkge1xuICAgICAgICB0aGlzLl9yZXN1bWVQYWdlSWR4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZGlydHlNYXRjaCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuI3VwZGF0ZVVJU3RhdGUoRmluZFN0YXRlLkZPVU5EKTtcbiAgICAgIHRoaXMuX2hpZ2hsaWdodE1hdGNoZXMgPSBmYWxzZTtcbiAgICAgIHRoaXMuI3VwZGF0ZUFsbFBhZ2VzKCk7XG4gICAgfSk7XG4gIH1cblxuICAjcmVxdWVzdE1hdGNoZXNDb3VudCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBwYWdlSWR4LFxuICAgICAgbWF0Y2hJZHhcbiAgICB9ID0gdGhpcy5fc2VsZWN0ZWQ7XG4gICAgbGV0IGN1cnJlbnQgPSAwLFxuICAgICAgICB0b3RhbCA9IHRoaXMuX21hdGNoZXNDb3VudFRvdGFsO1xuXG4gICAgaWYgKG1hdGNoSWR4ICE9PSAtMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlSWR4OyBpKyspIHtcbiAgICAgICAgY3VycmVudCArPSB0aGlzLl9wYWdlTWF0Y2hlc1tpXT8ubGVuZ3RoIHx8IDA7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQgKz0gbWF0Y2hJZHggKyAxO1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50IDwgMSB8fCBjdXJyZW50ID4gdG90YWwpIHtcbiAgICAgIGN1cnJlbnQgPSB0b3RhbCA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnQsXG4gICAgICB0b3RhbFxuICAgIH07XG4gIH1cblxuICAjdXBkYXRlVUlSZXN1bHRzQ291bnQoKSB7XG4gICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJ1cGRhdGVmaW5kbWF0Y2hlc2NvdW50XCIsIHtcbiAgICAgIHNvdXJjZTogdGhpcyxcbiAgICAgIG1hdGNoZXNDb3VudDogdGhpcy4jcmVxdWVzdE1hdGNoZXNDb3VudCgpXG4gICAgfSk7XG4gIH1cblxuICAjdXBkYXRlVUlTdGF0ZShzdGF0ZSwgcHJldmlvdXMgPSBmYWxzZSkge1xuICAgIHRoaXMuX2V2ZW50QnVzLmRpc3BhdGNoKFwidXBkYXRlZmluZGNvbnRyb2xzdGF0ZVwiLCB7XG4gICAgICBzb3VyY2U6IHRoaXMsXG4gICAgICBzdGF0ZSxcbiAgICAgIHByZXZpb3VzLFxuICAgICAgbWF0Y2hlc0NvdW50OiB0aGlzLiNyZXF1ZXN0TWF0Y2hlc0NvdW50KCksXG4gICAgICByYXdRdWVyeTogdGhpcy5fc3RhdGU/LnF1ZXJ5ID8/IG51bGxcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydHMuUERGRmluZENvbnRyb2xsZXIgPSBQREZGaW5kQ29udHJvbGxlcjtcblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5DaGFyYWN0ZXJUeXBlID0gdm9pZCAwO1xuZXhwb3J0cy5nZXRDaGFyYWN0ZXJUeXBlID0gZ2V0Q2hhcmFjdGVyVHlwZTtcbmNvbnN0IENoYXJhY3RlclR5cGUgPSB7XG4gIFNQQUNFOiAwLFxuICBBTFBIQV9MRVRURVI6IDEsXG4gIFBVTkNUOiAyLFxuICBIQU5fTEVUVEVSOiAzLFxuICBLQVRBS0FOQV9MRVRURVI6IDQsXG4gIEhJUkFHQU5BX0xFVFRFUjogNSxcbiAgSEFMRldJRFRIX0tBVEFLQU5BX0xFVFRFUjogNixcbiAgVEhBSV9MRVRURVI6IDdcbn07XG5leHBvcnRzLkNoYXJhY3RlclR5cGUgPSBDaGFyYWN0ZXJUeXBlO1xuXG5mdW5jdGlvbiBpc0FscGhhYmV0aWNhbFNjcmlwdChjaGFyQ29kZSkge1xuICByZXR1cm4gY2hhckNvZGUgPCAweDJlODA7XG59XG5cbmZ1bmN0aW9uIGlzQXNjaWkoY2hhckNvZGUpIHtcbiAgcmV0dXJuIChjaGFyQ29kZSAmIDB4ZmY4MCkgPT09IDA7XG59XG5cbmZ1bmN0aW9uIGlzQXNjaWlBbHBoYShjaGFyQ29kZSkge1xuICByZXR1cm4gY2hhckNvZGUgPj0gMHg2MSAmJiBjaGFyQ29kZSA8PSAweDdhIHx8IGNoYXJDb2RlID49IDB4NDEgJiYgY2hhckNvZGUgPD0gMHg1YTtcbn1cblxuZnVuY3Rpb24gaXNBc2NpaURpZ2l0KGNoYXJDb2RlKSB7XG4gIHJldHVybiBjaGFyQ29kZSA+PSAweDMwICYmIGNoYXJDb2RlIDw9IDB4Mzk7XG59XG5cbmZ1bmN0aW9uIGlzQXNjaWlTcGFjZShjaGFyQ29kZSkge1xuICByZXR1cm4gY2hhckNvZGUgPT09IDB4MjAgfHwgY2hhckNvZGUgPT09IDB4MDkgfHwgY2hhckNvZGUgPT09IDB4MGQgfHwgY2hhckNvZGUgPT09IDB4MGE7XG59XG5cbmZ1bmN0aW9uIGlzSGFuKGNoYXJDb2RlKSB7XG4gIHJldHVybiBjaGFyQ29kZSA+PSAweDM0MDAgJiYgY2hhckNvZGUgPD0gMHg5ZmZmIHx8IGNoYXJDb2RlID49IDB4ZjkwMCAmJiBjaGFyQ29kZSA8PSAweGZhZmY7XG59XG5cbmZ1bmN0aW9uIGlzS2F0YWthbmEoY2hhckNvZGUpIHtcbiAgcmV0dXJuIGNoYXJDb2RlID49IDB4MzBhMCAmJiBjaGFyQ29kZSA8PSAweDMwZmY7XG59XG5cbmZ1bmN0aW9uIGlzSGlyYWdhbmEoY2hhckNvZGUpIHtcbiAgcmV0dXJuIGNoYXJDb2RlID49IDB4MzA0MCAmJiBjaGFyQ29kZSA8PSAweDMwOWY7XG59XG5cbmZ1bmN0aW9uIGlzSGFsZndpZHRoS2F0YWthbmEoY2hhckNvZGUpIHtcbiAgcmV0dXJuIGNoYXJDb2RlID49IDB4ZmY2MCAmJiBjaGFyQ29kZSA8PSAweGZmOWY7XG59XG5cbmZ1bmN0aW9uIGlzVGhhaShjaGFyQ29kZSkge1xuICByZXR1cm4gKGNoYXJDb2RlICYgMHhmZjgwKSA9PT0gMHgwZTAwO1xufVxuXG5mdW5jdGlvbiBnZXRDaGFyYWN0ZXJUeXBlKGNoYXJDb2RlKSB7XG4gIGlmIChpc0FscGhhYmV0aWNhbFNjcmlwdChjaGFyQ29kZSkpIHtcbiAgICBpZiAoaXNBc2NpaShjaGFyQ29kZSkpIHtcbiAgICAgIGlmIChpc0FzY2lpU3BhY2UoY2hhckNvZGUpKSB7XG4gICAgICAgIHJldHVybiBDaGFyYWN0ZXJUeXBlLlNQQUNFO1xuICAgICAgfSBlbHNlIGlmIChpc0FzY2lpQWxwaGEoY2hhckNvZGUpIHx8IGlzQXNjaWlEaWdpdChjaGFyQ29kZSkgfHwgY2hhckNvZGUgPT09IDB4NWYpIHtcbiAgICAgICAgcmV0dXJuIENoYXJhY3RlclR5cGUuQUxQSEFfTEVUVEVSO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ2hhcmFjdGVyVHlwZS5QVU5DVDtcbiAgICB9IGVsc2UgaWYgKGlzVGhhaShjaGFyQ29kZSkpIHtcbiAgICAgIHJldHVybiBDaGFyYWN0ZXJUeXBlLlRIQUlfTEVUVEVSO1xuICAgIH0gZWxzZSBpZiAoY2hhckNvZGUgPT09IDB4YTApIHtcbiAgICAgIHJldHVybiBDaGFyYWN0ZXJUeXBlLlNQQUNFO1xuICAgIH1cblxuICAgIHJldHVybiBDaGFyYWN0ZXJUeXBlLkFMUEhBX0xFVFRFUjtcbiAgfVxuXG4gIGlmIChpc0hhbihjaGFyQ29kZSkpIHtcbiAgICByZXR1cm4gQ2hhcmFjdGVyVHlwZS5IQU5fTEVUVEVSO1xuICB9IGVsc2UgaWYgKGlzS2F0YWthbmEoY2hhckNvZGUpKSB7XG4gICAgcmV0dXJuIENoYXJhY3RlclR5cGUuS0FUQUtBTkFfTEVUVEVSO1xuICB9IGVsc2UgaWYgKGlzSGlyYWdhbmEoY2hhckNvZGUpKSB7XG4gICAgcmV0dXJuIENoYXJhY3RlclR5cGUuSElSQUdBTkFfTEVUVEVSO1xuICB9IGVsc2UgaWYgKGlzSGFsZndpZHRoS2F0YWthbmEoY2hhckNvZGUpKSB7XG4gICAgcmV0dXJuIENoYXJhY3RlclR5cGUuSEFMRldJRFRIX0tBVEFLQU5BX0xFVFRFUjtcbiAgfVxuXG4gIHJldHVybiBDaGFyYWN0ZXJUeXBlLkFMUEhBX0xFVFRFUjtcbn1cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5QREZIaXN0b3J5ID0gdm9pZCAwO1xuZXhwb3J0cy5pc0Rlc3RBcnJheXNFcXVhbCA9IGlzRGVzdEFycmF5c0VxdWFsO1xuZXhwb3J0cy5pc0Rlc3RIYXNoZXNFcXVhbCA9IGlzRGVzdEhhc2hlc0VxdWFsO1xuXG52YXIgX3VpX3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg2KTtcblxudmFyIF9ldmVudF91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oMTcpO1xuXG5jb25zdCBIQVNIX0NIQU5HRV9USU1FT1VUID0gMTAwMDtcbmNvbnN0IFBPU0lUSU9OX1VQREFURURfVEhSRVNIT0xEID0gNTA7XG5jb25zdCBVUERBVEVfVklFV0FSRUFfVElNRU9VVCA9IDEwMDA7XG5cbmZ1bmN0aW9uIGdldEN1cnJlbnRIYXNoKCkge1xuICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaGFzaDtcbn1cblxuY2xhc3MgUERGSGlzdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBsaW5rU2VydmljZSxcbiAgICBldmVudEJ1c1xuICB9KSB7XG4gICAgdGhpcy5saW5rU2VydmljZSA9IGxpbmtTZXJ2aWNlO1xuICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gXCJcIjtcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5fYm91bmRFdmVudHMgPSBudWxsO1xuXG4gICAgdGhpcy5ldmVudEJ1cy5fb24oXCJwYWdlc2luaXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faXNQYWdlc0xvYWRlZCA9IGZhbHNlO1xuXG4gICAgICB0aGlzLmV2ZW50QnVzLl9vbihcInBhZ2VzbG9hZGVkXCIsIGV2dCA9PiB7XG4gICAgICAgIHRoaXMuX2lzUGFnZXNMb2FkZWQgPSAhIWV2dC5wYWdlc0NvdW50O1xuICAgICAgfSwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGluaXRpYWxpemUoe1xuICAgIGZpbmdlcnByaW50LFxuICAgIHJlc2V0SGlzdG9yeSA9IGZhbHNlLFxuICAgIHVwZGF0ZVVybCA9IGZhbHNlXG4gIH0pIHtcbiAgICBpZiAoIWZpbmdlcnByaW50IHx8IHR5cGVvZiBmaW5nZXJwcmludCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc29sZS5lcnJvcignUERGSGlzdG9yeS5pbml0aWFsaXplOiBUaGUgXCJmaW5nZXJwcmludFwiIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlSW5pdGlhbGl6ZWQgPSB0aGlzLl9maW5nZXJwcmludCAhPT0gXCJcIiAmJiB0aGlzLl9maW5nZXJwcmludCAhPT0gZmluZ2VycHJpbnQ7XG4gICAgdGhpcy5fZmluZ2VycHJpbnQgPSBmaW5nZXJwcmludDtcbiAgICB0aGlzLl91cGRhdGVVcmwgPSB1cGRhdGVVcmwgPT09IHRydWU7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5fYmluZEV2ZW50cygpO1xuXG4gICAgY29uc3Qgc3RhdGUgPSB3aW5kb3cuaGlzdG9yeS5zdGF0ZTtcbiAgICB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICB0aGlzLl9ibG9ja0hhc2hDaGFuZ2UgPSAwO1xuICAgIHRoaXMuX2N1cnJlbnRIYXNoID0gZ2V0Q3VycmVudEhhc2goKTtcbiAgICB0aGlzLl9udW1Qb3NpdGlvblVwZGF0ZXMgPSAwO1xuICAgIHRoaXMuX3VpZCA9IHRoaXMuX21heFVpZCA9IDA7XG4gICAgdGhpcy5fZGVzdGluYXRpb24gPSBudWxsO1xuICAgIHRoaXMuX3Bvc2l0aW9uID0gbnVsbDtcblxuICAgIGlmICghdGhpcy5faXNWYWxpZFN0YXRlKHN0YXRlLCB0cnVlKSB8fCByZXNldEhpc3RvcnkpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaGFzaCxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgcm90YXRpb25cbiAgICAgIH0gPSB0aGlzLl9wYXJzZUN1cnJlbnRIYXNoKHRydWUpO1xuXG4gICAgICBpZiAoIWhhc2ggfHwgcmVJbml0aWFsaXplZCB8fCByZXNldEhpc3RvcnkpIHtcbiAgICAgICAgdGhpcy5fcHVzaE9yUmVwbGFjZVN0YXRlKG51bGwsIHRydWUpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcHVzaE9yUmVwbGFjZVN0YXRlKHtcbiAgICAgICAgaGFzaCxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgcm90YXRpb25cbiAgICAgIH0sIHRydWUpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBzdGF0ZS5kZXN0aW5hdGlvbjtcblxuICAgIHRoaXMuX3VwZGF0ZUludGVybmFsU3RhdGUoZGVzdGluYXRpb24sIHN0YXRlLnVpZCwgdHJ1ZSk7XG5cbiAgICBpZiAoZGVzdGluYXRpb24ucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5faW5pdGlhbFJvdGF0aW9uID0gZGVzdGluYXRpb24ucm90YXRpb247XG4gICAgfVxuXG4gICAgaWYgKGRlc3RpbmF0aW9uLmRlc3QpIHtcbiAgICAgIHRoaXMuX2luaXRpYWxCb29rbWFyayA9IEpTT04uc3RyaW5naWZ5KGRlc3RpbmF0aW9uLmRlc3QpO1xuICAgICAgdGhpcy5fZGVzdGluYXRpb24ucGFnZSA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChkZXN0aW5hdGlvbi5oYXNoKSB7XG4gICAgICB0aGlzLl9pbml0aWFsQm9va21hcmsgPSBkZXN0aW5hdGlvbi5oYXNoO1xuICAgIH0gZWxzZSBpZiAoZGVzdGluYXRpb24ucGFnZSkge1xuICAgICAgdGhpcy5faW5pdGlhbEJvb2ttYXJrID0gYHBhZ2U9JHtkZXN0aW5hdGlvbi5wYWdlfWA7XG4gICAgfVxuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLl9wYWdlSGlkZSgpO1xuXG4gICAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICB0aGlzLl91bmJpbmRFdmVudHMoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdXBkYXRlVmlld2FyZWFUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdXBkYXRlVmlld2FyZWFUaW1lb3V0KTtcbiAgICAgIHRoaXMuX3VwZGF0ZVZpZXdhcmVhVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdGlhbEJvb2ttYXJrID0gbnVsbDtcbiAgICB0aGlzLl9pbml0aWFsUm90YXRpb24gPSBudWxsO1xuICB9XG5cbiAgcHVzaCh7XG4gICAgbmFtZWREZXN0ID0gbnVsbCxcbiAgICBleHBsaWNpdERlc3QsXG4gICAgcGFnZU51bWJlclxuICB9KSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChuYW1lZERlc3QgJiYgdHlwZW9mIG5hbWVkRGVzdCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlBERkhpc3RvcnkucHVzaDogXCIgKyBgXCIke25hbWVkRGVzdH1cIiBpcyBub3QgYSB2YWxpZCBuYW1lZERlc3QgcGFyYW1ldGVyLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoZXhwbGljaXREZXN0KSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIlBERkhpc3RvcnkucHVzaDogXCIgKyBgXCIke2V4cGxpY2l0RGVzdH1cIiBpcyBub3QgYSB2YWxpZCBleHBsaWNpdERlc3QgcGFyYW1ldGVyLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzVmFsaWRQYWdlKHBhZ2VOdW1iZXIpKSB7XG4gICAgICBpZiAocGFnZU51bWJlciAhPT0gbnVsbCB8fCB0aGlzLl9kZXN0aW5hdGlvbikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiUERGSGlzdG9yeS5wdXNoOiBcIiArIGBcIiR7cGFnZU51bWJlcn1cIiBpcyBub3QgYSB2YWxpZCBwYWdlTnVtYmVyIHBhcmFtZXRlci5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhc2ggPSBuYW1lZERlc3QgfHwgSlNPTi5zdHJpbmdpZnkoZXhwbGljaXREZXN0KTtcblxuICAgIGlmICghaGFzaCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBmb3JjZVJlcGxhY2UgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLl9kZXN0aW5hdGlvbiAmJiAoaXNEZXN0SGFzaGVzRXF1YWwodGhpcy5fZGVzdGluYXRpb24uaGFzaCwgaGFzaCkgfHwgaXNEZXN0QXJyYXlzRXF1YWwodGhpcy5fZGVzdGluYXRpb24uZGVzdCwgZXhwbGljaXREZXN0KSkpIHtcbiAgICAgIGlmICh0aGlzLl9kZXN0aW5hdGlvbi5wYWdlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZm9yY2VSZXBsYWNlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcG9wU3RhdGVJblByb2dyZXNzICYmICFmb3JjZVJlcGxhY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wdXNoT3JSZXBsYWNlU3RhdGUoe1xuICAgICAgZGVzdDogZXhwbGljaXREZXN0LFxuICAgICAgaGFzaCxcbiAgICAgIHBhZ2U6IHBhZ2VOdW1iZXIsXG4gICAgICByb3RhdGlvbjogdGhpcy5saW5rU2VydmljZS5yb3RhdGlvblxuICAgIH0sIGZvcmNlUmVwbGFjZSk7XG5cbiAgICBpZiAoIXRoaXMuX3BvcFN0YXRlSW5Qcm9ncmVzcykge1xuICAgICAgdGhpcy5fcG9wU3RhdGVJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1c2hQYWdlKHBhZ2VOdW1iZXIpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9pc1ZhbGlkUGFnZShwYWdlTnVtYmVyKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgUERGSGlzdG9yeS5wdXNoUGFnZTogXCIke3BhZ2VOdW1iZXJ9XCIgaXMgbm90IGEgdmFsaWQgcGFnZSBudW1iZXIuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Rlc3RpbmF0aW9uPy5wYWdlID09PSBwYWdlTnVtYmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BvcFN0YXRlSW5Qcm9ncmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3B1c2hPclJlcGxhY2VTdGF0ZSh7XG4gICAgICBkZXN0OiBudWxsLFxuICAgICAgaGFzaDogYHBhZ2U9JHtwYWdlTnVtYmVyfWAsXG4gICAgICBwYWdlOiBwYWdlTnVtYmVyLFxuICAgICAgcm90YXRpb246IHRoaXMubGlua1NlcnZpY2Uucm90YXRpb25cbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5fcG9wU3RhdGVJblByb2dyZXNzKSB7XG4gICAgICB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuX3BvcFN0YXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVzaEN1cnJlbnRQb3NpdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkIHx8IHRoaXMuX3BvcFN0YXRlSW5Qcm9ncmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3RyeVB1c2hDdXJyZW50UG9zaXRpb24oKTtcbiAgfVxuXG4gIGJhY2soKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCB8fCB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZSA9IHdpbmRvdy5oaXN0b3J5LnN0YXRlO1xuXG4gICAgaWYgKHRoaXMuX2lzVmFsaWRTdGF0ZShzdGF0ZSkgJiYgc3RhdGUudWlkID4gMCkge1xuICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZvcndhcmQoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCB8fCB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZSA9IHdpbmRvdy5oaXN0b3J5LnN0YXRlO1xuXG4gICAgaWYgKHRoaXMuX2lzVmFsaWRTdGF0ZShzdGF0ZSkgJiYgc3RhdGUudWlkIDwgdGhpcy5fbWF4VWlkKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5mb3J3YXJkKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHBvcFN0YXRlSW5Qcm9ncmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZWQgJiYgKHRoaXMuX3BvcFN0YXRlSW5Qcm9ncmVzcyB8fCB0aGlzLl9ibG9ja0hhc2hDaGFuZ2UgPiAwKTtcbiAgfVxuXG4gIGdldCBpbml0aWFsQm9va21hcmsoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemVkID8gdGhpcy5faW5pdGlhbEJvb2ttYXJrIDogbnVsbDtcbiAgfVxuXG4gIGdldCBpbml0aWFsUm90YXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemVkID8gdGhpcy5faW5pdGlhbFJvdGF0aW9uIDogbnVsbDtcbiAgfVxuXG4gIF9wdXNoT3JSZXBsYWNlU3RhdGUoZGVzdGluYXRpb24sIGZvcmNlUmVwbGFjZSA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2hvdWxkUmVwbGFjZSA9IGZvcmNlUmVwbGFjZSB8fCAhdGhpcy5fZGVzdGluYXRpb247XG4gICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICBmaW5nZXJwcmludDogdGhpcy5fZmluZ2VycHJpbnQsXG4gICAgICB1aWQ6IHNob3VsZFJlcGxhY2UgPyB0aGlzLl91aWQgOiB0aGlzLl91aWQgKyAxLFxuICAgICAgZGVzdGluYXRpb25cbiAgICB9O1xuXG4gICAgdGhpcy5fdXBkYXRlSW50ZXJuYWxTdGF0ZShkZXN0aW5hdGlvbiwgbmV3U3RhdGUudWlkKTtcblxuICAgIGxldCBuZXdVcmw7XG5cbiAgICBpZiAodGhpcy5fdXBkYXRlVXJsICYmIGRlc3RpbmF0aW9uPy5oYXNoKSB7XG4gICAgICBjb25zdCBiYXNlVXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5zcGxpdChcIiNcIilbMF07XG5cbiAgICAgIGlmICghYmFzZVVybC5zdGFydHNXaXRoKFwiZmlsZTovL1wiKSkge1xuICAgICAgICBuZXdVcmwgPSBgJHtiYXNlVXJsfSMke2Rlc3RpbmF0aW9uLmhhc2h9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkUmVwbGFjZSkge1xuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG5ld1N0YXRlLCBcIlwiLCBuZXdVcmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobmV3U3RhdGUsIFwiXCIsIG5ld1VybCk7XG4gICAgfVxuICB9XG5cbiAgX3RyeVB1c2hDdXJyZW50UG9zaXRpb24odGVtcG9yYXJ5ID0gZmFsc2UpIHtcbiAgICBpZiAoIXRoaXMuX3Bvc2l0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG5cbiAgICBpZiAodGVtcG9yYXJ5KSB7XG4gICAgICBwb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgdGhpcy5fcG9zaXRpb24pO1xuICAgICAgcG9zaXRpb24udGVtcG9yYXJ5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2Rlc3RpbmF0aW9uKSB7XG4gICAgICB0aGlzLl9wdXNoT3JSZXBsYWNlU3RhdGUocG9zaXRpb24pO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Rlc3RpbmF0aW9uLnRlbXBvcmFyeSkge1xuICAgICAgdGhpcy5fcHVzaE9yUmVwbGFjZVN0YXRlKHBvc2l0aW9uLCB0cnVlKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kZXN0aW5hdGlvbi5oYXNoID09PSBwb3NpdGlvbi5oYXNoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9kZXN0aW5hdGlvbi5wYWdlICYmIChQT1NJVElPTl9VUERBVEVEX1RIUkVTSE9MRCA8PSAwIHx8IHRoaXMuX251bVBvc2l0aW9uVXBkYXRlcyA8PSBQT1NJVElPTl9VUERBVEVEX1RIUkVTSE9MRCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZm9yY2VSZXBsYWNlID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fZGVzdGluYXRpb24ucGFnZSA+PSBwb3NpdGlvbi5maXJzdCAmJiB0aGlzLl9kZXN0aW5hdGlvbi5wYWdlIDw9IHBvc2l0aW9uLnBhZ2UpIHtcbiAgICAgIGlmICh0aGlzLl9kZXN0aW5hdGlvbi5kZXN0ICE9PSB1bmRlZmluZWQgfHwgIXRoaXMuX2Rlc3RpbmF0aW9uLmZpcnN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZm9yY2VSZXBsYWNlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9wdXNoT3JSZXBsYWNlU3RhdGUocG9zaXRpb24sIGZvcmNlUmVwbGFjZSk7XG4gIH1cblxuICBfaXNWYWxpZFBhZ2UodmFsKSB7XG4gICAgcmV0dXJuIE51bWJlci5pc0ludGVnZXIodmFsKSAmJiB2YWwgPiAwICYmIHZhbCA8PSB0aGlzLmxpbmtTZXJ2aWNlLnBhZ2VzQ291bnQ7XG4gIH1cblxuICBfaXNWYWxpZFN0YXRlKHN0YXRlLCBjaGVja1JlbG9hZCA9IGZhbHNlKSB7XG4gICAgaWYgKCFzdGF0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5maW5nZXJwcmludCAhPT0gdGhpcy5fZmluZ2VycHJpbnQpIHtcbiAgICAgIGlmIChjaGVja1JlbG9hZCkge1xuICAgICAgICBpZiAodHlwZW9mIHN0YXRlLmZpbmdlcnByaW50ICE9PSBcInN0cmluZ1wiIHx8IHN0YXRlLmZpbmdlcnByaW50Lmxlbmd0aCAhPT0gdGhpcy5fZmluZ2VycHJpbnQubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW3BlcmZFbnRyeV0gPSBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKTtcblxuICAgICAgICBpZiAocGVyZkVudHJ5Py50eXBlICE9PSBcInJlbG9hZFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHN0YXRlLnVpZCkgfHwgc3RhdGUudWlkIDwgMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5kZXN0aW5hdGlvbiA9PT0gbnVsbCB8fCB0eXBlb2Ygc3RhdGUuZGVzdGluYXRpb24gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIF91cGRhdGVJbnRlcm5hbFN0YXRlKGRlc3RpbmF0aW9uLCB1aWQsIHJlbW92ZVRlbXBvcmFyeSA9IGZhbHNlKSB7XG4gICAgaWYgKHRoaXMuX3VwZGF0ZVZpZXdhcmVhVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3VwZGF0ZVZpZXdhcmVhVGltZW91dCk7XG4gICAgICB0aGlzLl91cGRhdGVWaWV3YXJlYVRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChyZW1vdmVUZW1wb3JhcnkgJiYgZGVzdGluYXRpb24/LnRlbXBvcmFyeSkge1xuICAgICAgZGVsZXRlIGRlc3RpbmF0aW9uLnRlbXBvcmFyeTtcbiAgICB9XG5cbiAgICB0aGlzLl9kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIHRoaXMuX3VpZCA9IHVpZDtcbiAgICB0aGlzLl9tYXhVaWQgPSBNYXRoLm1heCh0aGlzLl9tYXhVaWQsIHVpZCk7XG4gICAgdGhpcy5fbnVtUG9zaXRpb25VcGRhdGVzID0gMDtcbiAgfVxuXG4gIF9wYXJzZUN1cnJlbnRIYXNoKGNoZWNrTmFtZWRkZXN0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBoYXNoID0gdW5lc2NhcGUoZ2V0Q3VycmVudEhhc2goKSkuc3Vic3RyaW5nKDEpO1xuICAgIGNvbnN0IHBhcmFtcyA9ICgwLCBfdWlfdXRpbHMucGFyc2VRdWVyeVN0cmluZykoaGFzaCk7XG4gICAgY29uc3QgbmFtZWRkZXN0ID0gcGFyYW1zLmdldChcIm5hbWVkZGVzdFwiKSB8fCBcIlwiO1xuICAgIGxldCBwYWdlID0gcGFyYW1zLmdldChcInBhZ2VcIikgfCAwO1xuXG4gICAgaWYgKCF0aGlzLl9pc1ZhbGlkUGFnZShwYWdlKSB8fCBjaGVja05hbWVkZGVzdCAmJiBuYW1lZGRlc3QubGVuZ3RoID4gMCkge1xuICAgICAgcGFnZSA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc2gsXG4gICAgICBwYWdlLFxuICAgICAgcm90YXRpb246IHRoaXMubGlua1NlcnZpY2Uucm90YXRpb25cbiAgICB9O1xuICB9XG5cbiAgX3VwZGF0ZVZpZXdhcmVhKHtcbiAgICBsb2NhdGlvblxuICB9KSB7XG4gICAgaWYgKHRoaXMuX3VwZGF0ZVZpZXdhcmVhVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3VwZGF0ZVZpZXdhcmVhVGltZW91dCk7XG4gICAgICB0aGlzLl91cGRhdGVWaWV3YXJlYVRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuX3Bvc2l0aW9uID0ge1xuICAgICAgaGFzaDogbG9jYXRpb24ucGRmT3BlblBhcmFtcy5zdWJzdHJpbmcoMSksXG4gICAgICBwYWdlOiB0aGlzLmxpbmtTZXJ2aWNlLnBhZ2UsXG4gICAgICBmaXJzdDogbG9jYXRpb24ucGFnZU51bWJlcixcbiAgICAgIHJvdGF0aW9uOiBsb2NhdGlvbi5yb3RhdGlvblxuICAgIH07XG5cbiAgICBpZiAodGhpcy5fcG9wU3RhdGVJblByb2dyZXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFBPU0lUSU9OX1VQREFURURfVEhSRVNIT0xEID4gMCAmJiB0aGlzLl9pc1BhZ2VzTG9hZGVkICYmIHRoaXMuX2Rlc3RpbmF0aW9uICYmICF0aGlzLl9kZXN0aW5hdGlvbi5wYWdlKSB7XG4gICAgICB0aGlzLl9udW1Qb3NpdGlvblVwZGF0ZXMrKztcbiAgICB9XG5cbiAgICBpZiAoVVBEQVRFX1ZJRVdBUkVBX1RJTUVPVVQgPiAwKSB7XG4gICAgICB0aGlzLl91cGRhdGVWaWV3YXJlYVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICB0aGlzLl90cnlQdXNoQ3VycmVudFBvc2l0aW9uKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlVmlld2FyZWFUaW1lb3V0ID0gbnVsbDtcbiAgICAgIH0sIFVQREFURV9WSUVXQVJFQV9USU1FT1VUKTtcbiAgICB9XG4gIH1cblxuICBfcG9wU3RhdGUoe1xuICAgIHN0YXRlXG4gIH0pIHtcbiAgICBjb25zdCBuZXdIYXNoID0gZ2V0Q3VycmVudEhhc2goKSxcbiAgICAgICAgICBoYXNoQ2hhbmdlZCA9IHRoaXMuX2N1cnJlbnRIYXNoICE9PSBuZXdIYXNoO1xuICAgIHRoaXMuX2N1cnJlbnRIYXNoID0gbmV3SGFzaDtcblxuICAgIGlmICghc3RhdGUpIHtcbiAgICAgIHRoaXMuX3VpZCsrO1xuXG4gICAgICBjb25zdCB7XG4gICAgICAgIGhhc2gsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHJvdGF0aW9uXG4gICAgICB9ID0gdGhpcy5fcGFyc2VDdXJyZW50SGFzaCgpO1xuXG4gICAgICB0aGlzLl9wdXNoT3JSZXBsYWNlU3RhdGUoe1xuICAgICAgICBoYXNoLFxuICAgICAgICBwYWdlLFxuICAgICAgICByb3RhdGlvblxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzVmFsaWRTdGF0ZShzdGF0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xuXG4gICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9ibG9ja0hhc2hDaGFuZ2UrKztcbiAgICAgICgwLCBfZXZlbnRfdXRpbHMud2FpdE9uRXZlbnRPclRpbWVvdXQpKHtcbiAgICAgICAgdGFyZ2V0OiB3aW5kb3csXG4gICAgICAgIG5hbWU6IFwiaGFzaGNoYW5nZVwiLFxuICAgICAgICBkZWxheTogSEFTSF9DSEFOR0VfVElNRU9VVFxuICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuX2Jsb2NrSGFzaENoYW5nZS0tO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBzdGF0ZS5kZXN0aW5hdGlvbjtcblxuICAgIHRoaXMuX3VwZGF0ZUludGVybmFsU3RhdGUoZGVzdGluYXRpb24sIHN0YXRlLnVpZCwgdHJ1ZSk7XG5cbiAgICBpZiAoKDAsIF91aV91dGlscy5pc1ZhbGlkUm90YXRpb24pKGRlc3RpbmF0aW9uLnJvdGF0aW9uKSkge1xuICAgICAgdGhpcy5saW5rU2VydmljZS5yb3RhdGlvbiA9IGRlc3RpbmF0aW9uLnJvdGF0aW9uO1xuICAgIH1cblxuICAgIGlmIChkZXN0aW5hdGlvbi5kZXN0KSB7XG4gICAgICB0aGlzLmxpbmtTZXJ2aWNlLmdvVG9EZXN0aW5hdGlvbihkZXN0aW5hdGlvbi5kZXN0KTtcbiAgICB9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmhhc2gpIHtcbiAgICAgIHRoaXMubGlua1NlcnZpY2Uuc2V0SGFzaChkZXN0aW5hdGlvbi5oYXNoKTtcbiAgICB9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLnBhZ2UpIHtcbiAgICAgIHRoaXMubGlua1NlcnZpY2UucGFnZSA9IGRlc3RpbmF0aW9uLnBhZ2U7XG4gICAgfVxuXG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9wb3BTdGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIF9wYWdlSGlkZSgpIHtcbiAgICBpZiAoIXRoaXMuX2Rlc3RpbmF0aW9uIHx8IHRoaXMuX2Rlc3RpbmF0aW9uLnRlbXBvcmFyeSkge1xuICAgICAgdGhpcy5fdHJ5UHVzaEN1cnJlbnRQb3NpdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9iaW5kRXZlbnRzKCkge1xuICAgIGlmICh0aGlzLl9ib3VuZEV2ZW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2JvdW5kRXZlbnRzID0ge1xuICAgICAgdXBkYXRlVmlld2FyZWE6IHRoaXMuX3VwZGF0ZVZpZXdhcmVhLmJpbmQodGhpcyksXG4gICAgICBwb3BTdGF0ZTogdGhpcy5fcG9wU3RhdGUuYmluZCh0aGlzKSxcbiAgICAgIHBhZ2VIaWRlOiB0aGlzLl9wYWdlSGlkZS5iaW5kKHRoaXMpXG4gICAgfTtcblxuICAgIHRoaXMuZXZlbnRCdXMuX29uKFwidXBkYXRldmlld2FyZWFcIiwgdGhpcy5fYm91bmRFdmVudHMudXBkYXRlVmlld2FyZWEpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCB0aGlzLl9ib3VuZEV2ZW50cy5wb3BTdGF0ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLl9ib3VuZEV2ZW50cy5wYWdlSGlkZSk7XG4gIH1cblxuICBfdW5iaW5kRXZlbnRzKCkge1xuICAgIGlmICghdGhpcy5fYm91bmRFdmVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50QnVzLl9vZmYoXCJ1cGRhdGV2aWV3YXJlYVwiLCB0aGlzLl9ib3VuZEV2ZW50cy51cGRhdGVWaWV3YXJlYSk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHRoaXMuX2JvdW5kRXZlbnRzLnBvcFN0YXRlKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuX2JvdW5kRXZlbnRzLnBhZ2VIaWRlKTtcbiAgICB0aGlzLl9ib3VuZEV2ZW50cyA9IG51bGw7XG4gIH1cblxufVxuXG5leHBvcnRzLlBERkhpc3RvcnkgPSBQREZIaXN0b3J5O1xuXG5mdW5jdGlvbiBpc0Rlc3RIYXNoZXNFcXVhbChkZXN0SGFzaCwgcHVzaEhhc2gpIHtcbiAgaWYgKHR5cGVvZiBkZXN0SGFzaCAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcHVzaEhhc2ggIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZGVzdEhhc2ggPT09IHB1c2hIYXNoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBuYW1lZGRlc3QgPSAoMCwgX3VpX3V0aWxzLnBhcnNlUXVlcnlTdHJpbmcpKGRlc3RIYXNoKS5nZXQoXCJuYW1lZGRlc3RcIik7XG5cbiAgaWYgKG5hbWVkZGVzdCA9PT0gcHVzaEhhc2gpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNEZXN0QXJyYXlzRXF1YWwoZmlyc3REZXN0LCBzZWNvbmREZXN0KSB7XG4gIGZ1bmN0aW9uIGlzRW50cnlFcXVhbChmaXJzdCwgc2Vjb25kKSB7XG4gICAgaWYgKHR5cGVvZiBmaXJzdCAhPT0gdHlwZW9mIHNlY29uZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGZpcnN0KSB8fCBBcnJheS5pc0FycmF5KHNlY29uZCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZmlyc3QgIT09IG51bGwgJiYgdHlwZW9mIGZpcnN0ID09PSBcIm9iamVjdFwiICYmIHNlY29uZCAhPT0gbnVsbCkge1xuICAgICAgaWYgKE9iamVjdC5rZXlzKGZpcnN0KS5sZW5ndGggIT09IE9iamVjdC5rZXlzKHNlY29uZCkubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZmlyc3QpIHtcbiAgICAgICAgaWYgKCFpc0VudHJ5RXF1YWwoZmlyc3Rba2V5XSwgc2Vjb25kW2tleV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kIHx8IE51bWJlci5pc05hTihmaXJzdCkgJiYgTnVtYmVyLmlzTmFOKHNlY29uZCk7XG4gIH1cblxuICBpZiAoIShBcnJheS5pc0FycmF5KGZpcnN0RGVzdCkgJiYgQXJyYXkuaXNBcnJheShzZWNvbmREZXN0KSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZmlyc3REZXN0Lmxlbmd0aCAhPT0gc2Vjb25kRGVzdC5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMCwgaWkgPSBmaXJzdERlc3QubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGlmICghaXNFbnRyeUVxdWFsKGZpcnN0RGVzdFtpXSwgc2Vjb25kRGVzdFtpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5QREZTY3JpcHRpbmdNYW5hZ2VyID0gdm9pZCAwO1xuXG52YXIgX3VpX3V0aWxzID0gX193X3BkZmpzX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wZGZqc0xpYiA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbmNsYXNzIFBERlNjcmlwdGluZ01hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgZXZlbnRCdXMsXG4gICAgc2FuZGJveEJ1bmRsZVNyYyA9IG51bGwsXG4gICAgc2NyaXB0aW5nRmFjdG9yeSA9IG51bGwsXG4gICAgZG9jUHJvcGVydGllc0xvb2t1cCA9IG51bGxcbiAgfSkge1xuICAgIHRoaXMuX3BkZkRvY3VtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9wZGZWaWV3ZXIgPSBudWxsO1xuICAgIHRoaXMuX2Nsb3NlQ2FwYWJpbGl0eSA9IG51bGw7XG4gICAgdGhpcy5fZGVzdHJveUNhcGFiaWxpdHkgPSBudWxsO1xuICAgIHRoaXMuX3NjcmlwdGluZyA9IG51bGw7XG4gICAgdGhpcy5fbW91c2VTdGF0ZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLl9ldmVudEJ1cyA9IGV2ZW50QnVzO1xuICAgIHRoaXMuX3NhbmRib3hCdW5kbGVTcmMgPSBzYW5kYm94QnVuZGxlU3JjO1xuICAgIHRoaXMuX3NjcmlwdGluZ0ZhY3RvcnkgPSBzY3JpcHRpbmdGYWN0b3J5O1xuICAgIHRoaXMuX2RvY1Byb3BlcnRpZXNMb29rdXAgPSBkb2NQcm9wZXJ0aWVzTG9va3VwO1xuXG4gICAgaWYgKCF0aGlzLl9zY3JpcHRpbmdGYWN0b3J5KSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZyb21zYW5kYm94XCIsIGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJ1cGRhdGVmcm9tc2FuZGJveFwiLCB7XG4gICAgICAgICAgc291cmNlOiB3aW5kb3csXG4gICAgICAgICAgZGV0YWlsOiBldmVudC5kZXRhaWxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzZXRWaWV3ZXIocGRmVmlld2VyKSB7XG4gICAgdGhpcy5fcGRmVmlld2VyID0gcGRmVmlld2VyO1xuICB9XG5cbiAgYXN5bmMgc2V0RG9jdW1lbnQocGRmRG9jdW1lbnQpIHtcbiAgICBpZiAodGhpcy5fcGRmRG9jdW1lbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuX2Rlc3Ryb3lTY3JpcHRpbmcoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wZGZEb2N1bWVudCA9IHBkZkRvY3VtZW50O1xuXG4gICAgaWYgKCFwZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFtvYmplY3RzLCBjYWxjdWxhdGlvbk9yZGVyLCBkb2NBY3Rpb25zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtwZGZEb2N1bWVudC5nZXRGaWVsZE9iamVjdHMoKSwgcGRmRG9jdW1lbnQuZ2V0Q2FsY3VsYXRpb25PcmRlcklkcygpLCBwZGZEb2N1bWVudC5nZXRKU0FjdGlvbnMoKV0pO1xuXG4gICAgaWYgKCFvYmplY3RzICYmICFkb2NBY3Rpb25zKSB7XG4gICAgICBhd2FpdCB0aGlzLl9kZXN0cm95U2NyaXB0aW5nKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHBkZkRvY3VtZW50ICE9PSB0aGlzLl9wZGZEb2N1bWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9zY3JpcHRpbmcgPSB0aGlzLl9jcmVhdGVTY3JpcHRpbmcoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgUERGU2NyaXB0aW5nTWFuYWdlci5zZXREb2N1bWVudDogXCIke2Vycm9yPy5tZXNzYWdlfVwiLmApO1xuICAgICAgYXdhaXQgdGhpcy5fZGVzdHJveVNjcmlwdGluZygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2ludGVybmFsRXZlbnRzLnNldChcInVwZGF0ZWZyb21zYW5kYm94XCIsIGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudD8uc291cmNlICE9PSB3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl91cGRhdGVGcm9tU2FuZGJveChldmVudC5kZXRhaWwpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5faW50ZXJuYWxFdmVudHMuc2V0KFwiZGlzcGF0Y2hldmVudGluc2FuZGJveFwiLCBldmVudCA9PiB7XG4gICAgICB0aGlzLl9zY3JpcHRpbmc/LmRpc3BhdGNoRXZlbnRJblNhbmRib3goZXZlbnQuZGV0YWlsKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2ludGVybmFsRXZlbnRzLnNldChcInBhZ2VjaGFuZ2luZ1wiLCAoe1xuICAgICAgcGFnZU51bWJlcixcbiAgICAgIHByZXZpb3VzXG4gICAgfSkgPT4ge1xuICAgICAgaWYgKHBhZ2VOdW1iZXIgPT09IHByZXZpb3VzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZGlzcGF0Y2hQYWdlQ2xvc2UocHJldmlvdXMpO1xuXG4gICAgICB0aGlzLl9kaXNwYXRjaFBhZ2VPcGVuKHBhZ2VOdW1iZXIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5faW50ZXJuYWxFdmVudHMuc2V0KFwicGFnZXJlbmRlcmVkXCIsICh7XG4gICAgICBwYWdlTnVtYmVyXG4gICAgfSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9wYWdlT3BlblBlbmRpbmcuaGFzKHBhZ2VOdW1iZXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHRoaXMuX3BkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2Rpc3BhdGNoUGFnZU9wZW4ocGFnZU51bWJlcik7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9pbnRlcm5hbEV2ZW50cy5zZXQoXCJwYWdlc2Rlc3Ryb3lcIiwgYXN5bmMgZXZlbnQgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5fZGlzcGF0Y2hQYWdlQ2xvc2UodGhpcy5fcGRmVmlld2VyLmN1cnJlbnRQYWdlTnVtYmVyKTtcbiAgICAgIGF3YWl0IHRoaXMuX3NjcmlwdGluZz8uZGlzcGF0Y2hFdmVudEluU2FuZGJveCh7XG4gICAgICAgIGlkOiBcImRvY1wiLFxuICAgICAgICBuYW1lOiBcIldpbGxDbG9zZVwiXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2Nsb3NlQ2FwYWJpbGl0eT8ucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZG9tRXZlbnRzLnNldChcIm1vdXNlZG93blwiLCBldmVudCA9PiB7XG4gICAgICB0aGlzLl9tb3VzZVN0YXRlLmlzRG93biA9IHRydWU7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kb21FdmVudHMuc2V0KFwibW91c2V1cFwiLCBldmVudCA9PiB7XG4gICAgICB0aGlzLl9tb3VzZVN0YXRlLmlzRG93biA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgZm9yIChjb25zdCBbbmFtZSwgbGlzdGVuZXJdIG9mIHRoaXMuX2ludGVybmFsRXZlbnRzKSB7XG4gICAgICB0aGlzLl9ldmVudEJ1cy5fb24obmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgW25hbWUsIGxpc3RlbmVyXSBvZiB0aGlzLl9kb21FdmVudHMpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZG9jUHJvcGVydGllcyA9IGF3YWl0IHRoaXMuX2dldERvY1Byb3BlcnRpZXMoKTtcblxuICAgICAgaWYgKHBkZkRvY3VtZW50ICE9PSB0aGlzLl9wZGZEb2N1bWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuX3NjcmlwdGluZy5jcmVhdGVTYW5kYm94KHtcbiAgICAgICAgb2JqZWN0cyxcbiAgICAgICAgY2FsY3VsYXRpb25PcmRlcixcbiAgICAgICAgYXBwSW5mbzoge1xuICAgICAgICAgIHBsYXRmb3JtOiBuYXZpZ2F0b3IucGxhdGZvcm0sXG4gICAgICAgICAgbGFuZ3VhZ2U6IG5hdmlnYXRvci5sYW5ndWFnZVxuICAgICAgICB9LFxuICAgICAgICBkb2NJbmZvOiB7IC4uLmRvY1Byb3BlcnRpZXMsXG4gICAgICAgICAgYWN0aW9uczogZG9jQWN0aW9uc1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJzYW5kYm94Y3JlYXRlZFwiLCB7XG4gICAgICAgIHNvdXJjZTogdGhpc1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFBERlNjcmlwdGluZ01hbmFnZXIuc2V0RG9jdW1lbnQ6IFwiJHtlcnJvcj8ubWVzc2FnZX1cIi5gKTtcbiAgICAgIGF3YWl0IHRoaXMuX2Rlc3Ryb3lTY3JpcHRpbmcoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLl9zY3JpcHRpbmc/LmRpc3BhdGNoRXZlbnRJblNhbmRib3goe1xuICAgICAgaWQ6IFwiZG9jXCIsXG4gICAgICBuYW1lOiBcIk9wZW5cIlxuICAgIH0pO1xuICAgIGF3YWl0IHRoaXMuX2Rpc3BhdGNoUGFnZU9wZW4odGhpcy5fcGRmVmlld2VyLmN1cnJlbnRQYWdlTnVtYmVyLCB0cnVlKTtcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChwZGZEb2N1bWVudCA9PT0gdGhpcy5fcGRmRG9jdW1lbnQpIHtcbiAgICAgICAgdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGlzcGF0Y2hXaWxsU2F2ZShkZXRhaWwpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyaXB0aW5nPy5kaXNwYXRjaEV2ZW50SW5TYW5kYm94KHtcbiAgICAgIGlkOiBcImRvY1wiLFxuICAgICAgbmFtZTogXCJXaWxsU2F2ZVwiXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkaXNwYXRjaERpZFNhdmUoZGV0YWlsKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NjcmlwdGluZz8uZGlzcGF0Y2hFdmVudEluU2FuZGJveCh7XG4gICAgICBpZDogXCJkb2NcIixcbiAgICAgIG5hbWU6IFwiRGlkU2F2ZVwiXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkaXNwYXRjaFdpbGxQcmludChkZXRhaWwpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyaXB0aW5nPy5kaXNwYXRjaEV2ZW50SW5TYW5kYm94KHtcbiAgICAgIGlkOiBcImRvY1wiLFxuICAgICAgbmFtZTogXCJXaWxsUHJpbnRcIlxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGlzcGF0Y2hEaWRQcmludChkZXRhaWwpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyaXB0aW5nPy5kaXNwYXRjaEV2ZW50SW5TYW5kYm94KHtcbiAgICAgIGlkOiBcImRvY1wiLFxuICAgICAgbmFtZTogXCJEaWRQcmludFwiXG4gICAgfSk7XG4gIH1cblxuICBnZXQgbW91c2VTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbW91c2VTdGF0ZTtcbiAgfVxuXG4gIGdldCBkZXN0cm95UHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzdHJveUNhcGFiaWxpdHk/LnByb21pc2UgfHwgbnVsbDtcbiAgfVxuXG4gIGdldCByZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVhZHk7XG4gIH1cblxuICBnZXQgX2ludGVybmFsRXZlbnRzKCkge1xuICAgIHJldHVybiAoMCwgX3BkZmpzTGliLnNoYWRvdykodGhpcywgXCJfaW50ZXJuYWxFdmVudHNcIiwgbmV3IE1hcCgpKTtcbiAgfVxuXG4gIGdldCBfZG9tRXZlbnRzKCkge1xuICAgIHJldHVybiAoMCwgX3BkZmpzTGliLnNoYWRvdykodGhpcywgXCJfZG9tRXZlbnRzXCIsIG5ldyBNYXAoKSk7XG4gIH1cblxuICBnZXQgX3BhZ2VPcGVuUGVuZGluZygpIHtcbiAgICByZXR1cm4gKDAsIF9wZGZqc0xpYi5zaGFkb3cpKHRoaXMsIFwiX3BhZ2VPcGVuUGVuZGluZ1wiLCBuZXcgU2V0KCkpO1xuICB9XG5cbiAgZ2V0IF92aXNpdGVkUGFnZXMoKSB7XG4gICAgcmV0dXJuICgwLCBfcGRmanNMaWIuc2hhZG93KSh0aGlzLCBcIl92aXNpdGVkUGFnZXNcIiwgbmV3IE1hcCgpKTtcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVGcm9tU2FuZGJveChkZXRhaWwpIHtcbiAgICBjb25zdCBpc0luUHJlc2VudGF0aW9uTW9kZSA9IHRoaXMuX3BkZlZpZXdlci5pc0luUHJlc2VudGF0aW9uTW9kZSB8fCB0aGlzLl9wZGZWaWV3ZXIuaXNDaGFuZ2luZ1ByZXNlbnRhdGlvbk1vZGU7XG4gICAgY29uc3Qge1xuICAgICAgaWQsXG4gICAgICBzaWJsaW5ncyxcbiAgICAgIGNvbW1hbmQsXG4gICAgICB2YWx1ZVxuICAgIH0gPSBkZXRhaWw7XG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgICAgY2FzZSBcImNsZWFyXCI6XG4gICAgICAgICAgY29uc29sZS5jbGVhcigpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJsYXlvdXRcIjpcbiAgICAgICAgICBpZiAoaXNJblByZXNlbnRhdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBtb2RlcyA9ICgwLCBfdWlfdXRpbHMuYXBpUGFnZUxheW91dFRvVmlld2VyTW9kZXMpKHZhbHVlKTtcbiAgICAgICAgICB0aGlzLl9wZGZWaWV3ZXIuc3ByZWFkTW9kZSA9IG1vZGVzLnNwcmVhZE1vZGU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInBhZ2UtbnVtXCI6XG4gICAgICAgICAgdGhpcy5fcGRmVmlld2VyLmN1cnJlbnRQYWdlTnVtYmVyID0gdmFsdWUgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJwcmludFwiOlxuICAgICAgICAgIGF3YWl0IHRoaXMuX3BkZlZpZXdlci5wYWdlc1Byb21pc2U7XG5cbiAgICAgICAgICB0aGlzLl9ldmVudEJ1cy5kaXNwYXRjaChcInByaW50XCIsIHtcbiAgICAgICAgICAgIHNvdXJjZTogdGhpc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInByaW50bG5cIjpcbiAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInpvb21cIjpcbiAgICAgICAgICBpZiAoaXNJblByZXNlbnRhdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl9wZGZWaWV3ZXIuY3VycmVudFNjYWxlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiU2F2ZUFzXCI6XG4gICAgICAgICAgdGhpcy5fZXZlbnRCdXMuZGlzcGF0Y2goXCJzYXZlXCIsIHtcbiAgICAgICAgICAgIHNvdXJjZTogdGhpc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkZpcnN0UGFnZVwiOlxuICAgICAgICAgIHRoaXMuX3BkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlciA9IDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkxhc3RQYWdlXCI6XG4gICAgICAgICAgdGhpcy5fcGRmVmlld2VyLmN1cnJlbnRQYWdlTnVtYmVyID0gdGhpcy5fcGRmVmlld2VyLnBhZ2VzQ291bnQ7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIk5leHRQYWdlXCI6XG4gICAgICAgICAgdGhpcy5fcGRmVmlld2VyLm5leHRQYWdlKCk7XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiUHJldlBhZ2VcIjpcbiAgICAgICAgICB0aGlzLl9wZGZWaWV3ZXIucHJldmlvdXNQYWdlKCk7XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiWm9vbVZpZXdJblwiOlxuICAgICAgICAgIGlmIChpc0luUHJlc2VudGF0aW9uTW9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX3BkZlZpZXdlci5pbmNyZWFzZVNjYWxlKCk7XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiWm9vbVZpZXdPdXRcIjpcbiAgICAgICAgICBpZiAoaXNJblByZXNlbnRhdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl9wZGZWaWV3ZXIuZGVjcmVhc2VTY2FsZSgpO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNJblByZXNlbnRhdGlvbk1vZGUpIHtcbiAgICAgIGlmIChkZXRhaWwuZm9jdXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZSBkZXRhaWwuaWQ7XG4gICAgZGVsZXRlIGRldGFpbC5zaWJsaW5ncztcbiAgICBjb25zdCBpZHMgPSBzaWJsaW5ncyA/IFtpZCwgLi4uc2libGluZ3NdIDogW2lkXTtcblxuICAgIGZvciAoY29uc3QgZWxlbWVudElkIG9mIGlkcykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1cGRhdGVmcm9tc2FuZGJveFwiLCB7XG4gICAgICAgICAgZGV0YWlsXG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3BkZkRvY3VtZW50Py5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZShlbGVtZW50SWQsIGRldGFpbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2Rpc3BhdGNoUGFnZU9wZW4ocGFnZU51bWJlciwgaW5pdGlhbGl6ZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgcGRmRG9jdW1lbnQgPSB0aGlzLl9wZGZEb2N1bWVudCxcbiAgICAgICAgICB2aXNpdGVkUGFnZXMgPSB0aGlzLl92aXNpdGVkUGFnZXM7XG5cbiAgICBpZiAoaW5pdGlhbGl6ZSkge1xuICAgICAgdGhpcy5fY2xvc2VDYXBhYmlsaXR5ID0gKDAsIF9wZGZqc0xpYi5jcmVhdGVQcm9taXNlQ2FwYWJpbGl0eSkoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2Nsb3NlQ2FwYWJpbGl0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VWaWV3ID0gdGhpcy5fcGRmVmlld2VyLmdldFBhZ2VWaWV3KHBhZ2VOdW1iZXIgLSAxKTtcblxuICAgIGlmIChwYWdlVmlldz8ucmVuZGVyaW5nU3RhdGUgIT09IF91aV91dGlscy5SZW5kZXJpbmdTdGF0ZXMuRklOSVNIRUQpIHtcbiAgICAgIHRoaXMuX3BhZ2VPcGVuUGVuZGluZy5hZGQocGFnZU51bWJlcik7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYWdlT3BlblBlbmRpbmcuZGVsZXRlKHBhZ2VOdW1iZXIpO1xuXG4gICAgY29uc3QgYWN0aW9uc1Byb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aW9ucyA9IGF3YWl0ICghdmlzaXRlZFBhZ2VzLmhhcyhwYWdlTnVtYmVyKSA/IHBhZ2VWaWV3LnBkZlBhZ2U/LmdldEpTQWN0aW9ucygpIDogbnVsbCk7XG5cbiAgICAgIGlmIChwZGZEb2N1bWVudCAhPT0gdGhpcy5fcGRmRG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLl9zY3JpcHRpbmc/LmRpc3BhdGNoRXZlbnRJblNhbmRib3goe1xuICAgICAgICBpZDogXCJwYWdlXCIsXG4gICAgICAgIG5hbWU6IFwiUGFnZU9wZW5cIixcbiAgICAgICAgcGFnZU51bWJlcixcbiAgICAgICAgYWN0aW9uc1xuICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIHZpc2l0ZWRQYWdlcy5zZXQocGFnZU51bWJlciwgYWN0aW9uc1Byb21pc2UpO1xuICB9XG5cbiAgYXN5bmMgX2Rpc3BhdGNoUGFnZUNsb3NlKHBhZ2VOdW1iZXIpIHtcbiAgICBjb25zdCBwZGZEb2N1bWVudCA9IHRoaXMuX3BkZkRvY3VtZW50LFxuICAgICAgICAgIHZpc2l0ZWRQYWdlcyA9IHRoaXMuX3Zpc2l0ZWRQYWdlcztcblxuICAgIGlmICghdGhpcy5fY2xvc2VDYXBhYmlsaXR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BhZ2VPcGVuUGVuZGluZy5oYXMocGFnZU51bWJlcikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb25zUHJvbWlzZSA9IHZpc2l0ZWRQYWdlcy5nZXQocGFnZU51bWJlcik7XG5cbiAgICBpZiAoIWFjdGlvbnNQcm9taXNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmlzaXRlZFBhZ2VzLnNldChwYWdlTnVtYmVyLCBudWxsKTtcbiAgICBhd2FpdCBhY3Rpb25zUHJvbWlzZTtcblxuICAgIGlmIChwZGZEb2N1bWVudCAhPT0gdGhpcy5fcGRmRG9jdW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLl9zY3JpcHRpbmc/LmRpc3BhdGNoRXZlbnRJblNhbmRib3goe1xuICAgICAgaWQ6IFwicGFnZVwiLFxuICAgICAgbmFtZTogXCJQYWdlQ2xvc2VcIixcbiAgICAgIHBhZ2VOdW1iZXJcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIF9nZXREb2NQcm9wZXJ0aWVzKCkge1xuICAgIGlmICh0aGlzLl9kb2NQcm9wZXJ0aWVzTG9va3VwKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZG9jUHJvcGVydGllc0xvb2t1cCh0aGlzLl9wZGZEb2N1bWVudCk7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgZG9jUHJvcGVydGllc0xvb2t1cFxuICAgIH0gPSBfX3dfcGRmanNfcmVxdWlyZV9fKDI0KTtcblxuICAgIHJldHVybiBkb2NQcm9wZXJ0aWVzTG9va3VwKHRoaXMuX3BkZkRvY3VtZW50KTtcbiAgfVxuXG4gIF9jcmVhdGVTY3JpcHRpbmcoKSB7XG4gICAgdGhpcy5fZGVzdHJveUNhcGFiaWxpdHkgPSAoMCwgX3BkZmpzTGliLmNyZWF0ZVByb21pc2VDYXBhYmlsaXR5KSgpO1xuXG4gICAgaWYgKHRoaXMuX3NjcmlwdGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiX2NyZWF0ZVNjcmlwdGluZzogU2NyaXB0aW5nIGFscmVhZHkgZXhpc3RzLlwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2NyaXB0aW5nRmFjdG9yeSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjcmlwdGluZ0ZhY3RvcnkuY3JlYXRlU2NyaXB0aW5nKHtcbiAgICAgICAgc2FuZGJveEJ1bmRsZVNyYzogdGhpcy5fc2FuZGJveEJ1bmRsZVNyY1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgR2VuZXJpY1NjcmlwdGluZ1xuICAgIH0gPSBfX3dfcGRmanNfcmVxdWlyZV9fKDI0KTtcblxuICAgIHJldHVybiBuZXcgR2VuZXJpY1NjcmlwdGluZyh0aGlzLl9zYW5kYm94QnVuZGxlU3JjKTtcbiAgfVxuXG4gIGFzeW5jIF9kZXN0cm95U2NyaXB0aW5nKCkge1xuICAgIGlmICghdGhpcy5fc2NyaXB0aW5nKSB7XG4gICAgICB0aGlzLl9wZGZEb2N1bWVudCA9IG51bGw7XG4gICAgICB0aGlzLl9kZXN0cm95Q2FwYWJpbGl0eT8ucmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jbG9zZUNhcGFiaWxpdHkpIHtcbiAgICAgIGF3YWl0IFByb21pc2UucmFjZShbdGhpcy5fY2xvc2VDYXBhYmlsaXR5LnByb21pc2UsIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApO1xuICAgICAgfSldKS5jYXRjaChyZWFzb24gPT4ge30pO1xuICAgICAgdGhpcy5fY2xvc2VDYXBhYmlsaXR5ID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLl9wZGZEb2N1bWVudCA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5fc2NyaXB0aW5nLmRlc3Ryb3lTYW5kYm94KCk7XG4gICAgfSBjYXRjaCAoZXgpIHt9XG5cbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBsaXN0ZW5lcl0gb2YgdGhpcy5faW50ZXJuYWxFdmVudHMpIHtcbiAgICAgIHRoaXMuX2V2ZW50QnVzLl9vZmYobmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHRoaXMuX2ludGVybmFsRXZlbnRzLmNsZWFyKCk7XG5cbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBsaXN0ZW5lcl0gb2YgdGhpcy5fZG9tRXZlbnRzKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBsaXN0ZW5lciwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZG9tRXZlbnRzLmNsZWFyKCk7XG5cbiAgICB0aGlzLl9wYWdlT3BlblBlbmRpbmcuY2xlYXIoKTtcblxuICAgIHRoaXMuX3Zpc2l0ZWRQYWdlcy5jbGVhcigpO1xuXG4gICAgdGhpcy5fc2NyaXB0aW5nID0gbnVsbDtcbiAgICBkZWxldGUgdGhpcy5fbW91c2VTdGF0ZS5pc0Rvd247XG4gICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLl9kZXN0cm95Q2FwYWJpbGl0eT8ucmVzb2x2ZSgpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5QREZTY3JpcHRpbmdNYW5hZ2VyID0gUERGU2NyaXB0aW5nTWFuYWdlcjtcblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgZXhwb3J0cywgX193X3BkZmpzX3JlcXVpcmVfXykgPT4ge1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuZXhwb3J0cy5HZW5lcmljU2NyaXB0aW5nID0gdm9pZCAwO1xuZXhwb3J0cy5kb2NQcm9wZXJ0aWVzTG9va3VwID0gZG9jUHJvcGVydGllc0xvb2t1cDtcblxudmFyIF9wZGZqc0xpYiA9IF9fd19wZGZqc19yZXF1aXJlX18oMyk7XG5cbmFzeW5jIGZ1bmN0aW9uIGRvY1Byb3BlcnRpZXNMb29rdXAocGRmRG9jdW1lbnQpIHtcbiAgY29uc3QgdXJsID0gXCJcIixcbiAgICAgICAgYmFzZVVybCA9IHVybC5zcGxpdChcIiNcIilbMF07XG4gIGxldCB7XG4gICAgaW5mbyxcbiAgICBtZXRhZGF0YSxcbiAgICBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSxcbiAgICBjb250ZW50TGVuZ3RoXG4gIH0gPSBhd2FpdCBwZGZEb2N1bWVudC5nZXRNZXRhZGF0YSgpO1xuXG4gIGlmICghY29udGVudExlbmd0aCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGxlbmd0aFxuICAgIH0gPSBhd2FpdCBwZGZEb2N1bWVudC5nZXREb3dubG9hZEluZm8oKTtcbiAgICBjb250ZW50TGVuZ3RoID0gbGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIHsgLi4uaW5mbyxcbiAgICBiYXNlVVJMOiBiYXNlVXJsLFxuICAgIGZpbGVzaXplOiBjb250ZW50TGVuZ3RoLFxuICAgIGZpbGVuYW1lOiBjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSB8fCAoMCwgX3BkZmpzTGliLmdldFBkZkZpbGVuYW1lRnJvbVVybCkodXJsKSxcbiAgICBtZXRhZGF0YTogbWV0YWRhdGE/LmdldFJhdygpLFxuICAgIGF1dGhvcnM6IG1ldGFkYXRhPy5nZXQoXCJkYzpjcmVhdG9yXCIpLFxuICAgIG51bVBhZ2VzOiBwZGZEb2N1bWVudC5udW1QYWdlcyxcbiAgICBVUkw6IHVybFxuICB9O1xufVxuXG5jbGFzcyBHZW5lcmljU2NyaXB0aW5nIHtcbiAgY29uc3RydWN0b3Ioc2FuZGJveEJ1bmRsZVNyYykge1xuICAgIHRoaXMuX3JlYWR5ID0gKDAsIF9wZGZqc0xpYi5sb2FkU2NyaXB0KShzYW5kYm94QnVuZGxlU3JjLCB0cnVlKS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB3aW5kb3cucGRmanNTYW5kYm94LlF1aWNrSlNTYW5kYm94KCk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVTYW5kYm94KGRhdGEpIHtcbiAgICBjb25zdCBzYW5kYm94ID0gYXdhaXQgdGhpcy5fcmVhZHk7XG4gICAgc2FuZGJveC5jcmVhdGUoZGF0YSk7XG4gIH1cblxuICBhc3luYyBkaXNwYXRjaEV2ZW50SW5TYW5kYm94KGV2ZW50KSB7XG4gICAgY29uc3Qgc2FuZGJveCA9IGF3YWl0IHRoaXMuX3JlYWR5O1xuICAgIHNldFRpbWVvdXQoKCkgPT4gc2FuZGJveC5kaXNwYXRjaEV2ZW50KGV2ZW50KSwgMCk7XG4gIH1cblxuICBhc3luYyBkZXN0cm95U2FuZGJveCgpIHtcbiAgICBjb25zdCBzYW5kYm94ID0gYXdhaXQgdGhpcy5fcmVhZHk7XG4gICAgc2FuZGJveC5udWtlU2FuZGJveCgpO1xuICB9XG5cbn1cblxuZXhwb3J0cy5HZW5lcmljU2NyaXB0aW5nID0gR2VuZXJpY1NjcmlwdGluZztcblxuLyoqKi8gfSlcbi8qKioqKiovIFx0XSk7XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd19wZGZqc19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd19wZGZqc19yZXF1aXJlX18pO1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IHt9O1xuLy8gVGhpcyBlbnRyeSBuZWVkIHRvIGJlIHdyYXBwZWQgaW4gYW4gSUlGRSBiZWNhdXNlIGl0IG5lZWQgdG8gYmUgaXNvbGF0ZWQgYWdhaW5zdCBvdGhlciBtb2R1bGVzIGluIHRoZSBjaHVuay5cbigoKSA9PiB7XG52YXIgZXhwb3J0cyA9IF9fd2VicGFja19leHBvcnRzX187XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCAoe1xuICB2YWx1ZTogdHJ1ZVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQW5ub3RhdGlvbkxheWVyQnVpbGRlclwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Fubm90YXRpb25fbGF5ZXJfYnVpbGRlci5Bbm5vdGF0aW9uTGF5ZXJCdWlsZGVyO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEZWZhdWx0QW5ub3RhdGlvbkxheWVyRmFjdG9yeVwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2RlZmF1bHRfZmFjdG9yeS5EZWZhdWx0QW5ub3RhdGlvbkxheWVyRmFjdG9yeTtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRGVmYXVsdFN0cnVjdFRyZWVMYXllckZhY3RvcnlcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9kZWZhdWx0X2ZhY3RvcnkuRGVmYXVsdFN0cnVjdFRyZWVMYXllckZhY3Rvcnk7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRlZmF1bHRUZXh0TGF5ZXJGYWN0b3J5XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfZGVmYXVsdF9mYWN0b3J5LkRlZmF1bHRUZXh0TGF5ZXJGYWN0b3J5O1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEZWZhdWx0WGZhTGF5ZXJGYWN0b3J5XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfZGVmYXVsdF9mYWN0b3J5LkRlZmF1bHRYZmFMYXllckZhY3Rvcnk7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRvd25sb2FkTWFuYWdlclwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2Rvd25sb2FkX21hbmFnZXIuRG93bmxvYWRNYW5hZ2VyO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFdmVudEJ1c1wiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2V2ZW50X3V0aWxzLkV2ZW50QnVzO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJHZW5lcmljTDEwblwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2dlbmVyaWNsMTBuLkdlbmVyaWNMMTBuO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJMaW5rVGFyZ2V0XCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfcGRmX2xpbmtfc2VydmljZS5MaW5rVGFyZ2V0O1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJOdWxsTDEwblwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2wxMG5fdXRpbHMuTnVsbEwxMG47XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBERkZpbmRDb250cm9sbGVyXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfcGRmX2ZpbmRfY29udHJvbGxlci5QREZGaW5kQ29udHJvbGxlcjtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUERGSGlzdG9yeVwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3BkZl9oaXN0b3J5LlBERkhpc3Rvcnk7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBERkxpbmtTZXJ2aWNlXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfcGRmX2xpbmtfc2VydmljZS5QREZMaW5rU2VydmljZTtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUERGUGFnZVZpZXdcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9wZGZfcGFnZV92aWV3LlBERlBhZ2VWaWV3O1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQREZTY3JpcHRpbmdNYW5hZ2VyXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfcGRmX3NjcmlwdGluZ19tYW5hZ2VyLlBERlNjcmlwdGluZ01hbmFnZXI7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBERlNpbmdsZVBhZ2VWaWV3ZXJcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9wZGZfdmlld2VyLlBERlNpbmdsZVBhZ2VWaWV3ZXI7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBERlZpZXdlclwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3BkZl92aWV3ZXIuUERGVmlld2VyO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQcm9ncmVzc0JhclwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3VpX3V0aWxzLlByb2dyZXNzQmFyO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTaW1wbGVMaW5rU2VydmljZVwiLCAoe1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3BkZl9saW5rX3NlcnZpY2UuU2ltcGxlTGlua1NlcnZpY2U7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlN0cnVjdFRyZWVMYXllckJ1aWxkZXJcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9zdHJ1Y3RfdHJlZV9sYXllcl9idWlsZGVyLlN0cnVjdFRyZWVMYXllckJ1aWxkZXI7XG4gIH1cbn0pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRleHRMYXllckJ1aWxkZXJcIiwgKHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90ZXh0X2xheWVyX2J1aWxkZXIuVGV4dExheWVyQnVpbGRlcjtcbiAgfVxufSkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiWGZhTGF5ZXJCdWlsZGVyXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfeGZhX2xheWVyX2J1aWxkZXIuWGZhTGF5ZXJCdWlsZGVyO1xuICB9XG59KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwYXJzZVF1ZXJ5U3RyaW5nXCIsICh7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdWlfdXRpbHMucGFyc2VRdWVyeVN0cmluZztcbiAgfVxufSkpO1xuXG52YXIgX2RlZmF1bHRfZmFjdG9yeSA9IF9fd19wZGZqc19yZXF1aXJlX18oMSk7XG5cbnZhciBfcGRmX2xpbmtfc2VydmljZSA9IF9fd19wZGZqc19yZXF1aXJlX18oNSk7XG5cbnZhciBfdWlfdXRpbHMgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3BkZl92aWV3ZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDEwKTtcblxudmFyIF9hbm5vdGF0aW9uX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2Rvd25sb2FkX21hbmFnZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9ldmVudF91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oMTcpO1xuXG52YXIgX2dlbmVyaWNsMTBuID0gX193X3BkZmpzX3JlcXVpcmVfXygxOCk7XG5cbnZhciBfbDEwbl91dGlscyA9IF9fd19wZGZqc19yZXF1aXJlX18oNCk7XG5cbnZhciBfcGRmX2ZpbmRfY29udHJvbGxlciA9IF9fd19wZGZqc19yZXF1aXJlX18oMjApO1xuXG52YXIgX3BkZl9oaXN0b3J5ID0gX193X3BkZmpzX3JlcXVpcmVfXygyMik7XG5cbnZhciBfcGRmX3BhZ2VfdmlldyA9IF9fd19wZGZqc19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3BkZl9zY3JpcHRpbmdfbWFuYWdlciA9IF9fd19wZGZqc19yZXF1aXJlX18oMjMpO1xuXG52YXIgX3N0cnVjdF90cmVlX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3RleHRfbGF5ZXJfYnVpbGRlciA9IF9fd19wZGZqc19yZXF1aXJlX18oOCk7XG5cbnZhciBfeGZhX2xheWVyX2J1aWxkZXIgPSBfX3dfcGRmanNfcmVxdWlyZV9fKDkpO1xuXG5jb25zdCBwZGZqc1ZlcnNpb24gPSAnMi4xNC4zMDUnO1xuY29uc3QgcGRmanNCdWlsZCA9ICdlYWFhOGI0YWQnO1xufSkoKTtcblxuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX2V4cG9ydHNfXztcbi8qKioqKiovIH0pKClcbjtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGRmX3ZpZXdlci5qcy5tYXAiLCIvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gU0RQIGhlbHBlcnMuXG5jb25zdCBTRFBVdGlscyA9IHt9O1xuXG4vLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy5cbi8vIFRPRE86IHVzZSBVVUlEcyBpbnN0ZWFkPyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qZWQvOTgyODgzXG5TRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7XG59O1xuXG4vLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy5cblNEUFV0aWxzLmxvY2FsQ05hbWUgPSBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTtcblxuLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi5cblNEUFV0aWxzLnNwbGl0TGluZXMgPSBmdW5jdGlvbihibG9iKSB7XG4gIHJldHVybiBibG9iLnRyaW0oKS5zcGxpdCgnXFxuJykubWFwKGxpbmUgPT4gbGluZS50cmltKCkpO1xufTtcbi8vIFNwbGl0cyBTRFAgaW50byBzZXNzaW9ucGFydCBhbmQgbWVkaWFzZWN0aW9ucy4gRW5zdXJlcyBDUkxGLlxuU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgY29uc3QgcGFydHMgPSBibG9iLnNwbGl0KCdcXG5tPScpO1xuICByZXR1cm4gcGFydHMubWFwKChwYXJ0LCBpbmRleCkgPT4gKGluZGV4ID4gMCA/XG4gICAgJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXFxyXFxuJyk7XG59O1xuXG4vLyBSZXR1cm5zIHRoZSBzZXNzaW9uIGRlc2NyaXB0aW9uLlxuU0RQVXRpbHMuZ2V0RGVzY3JpcHRpb24gPSBmdW5jdGlvbihibG9iKSB7XG4gIGNvbnN0IHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTtcbiAgcmV0dXJuIHNlY3Rpb25zICYmIHNlY3Rpb25zWzBdO1xufTtcblxuLy8gUmV0dXJucyB0aGUgaW5kaXZpZHVhbCBtZWRpYSBzZWN0aW9ucy5cblNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7XG4gIGNvbnN0IHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTtcbiAgc2VjdGlvbnMuc2hpZnQoKTtcbiAgcmV0dXJuIHNlY3Rpb25zO1xufTtcblxuLy8gUmV0dXJucyBsaW5lcyB0aGF0IHN0YXJ0IHdpdGggYSBjZXJ0YWluIHByZWZpeC5cblNEUFV0aWxzLm1hdGNoUHJlZml4ID0gZnVuY3Rpb24oYmxvYiwgcHJlZml4KSB7XG4gIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihsaW5lID0+IGxpbmUuaW5kZXhPZihwcmVmaXgpID09PSAwKTtcbn07XG5cbi8vIFBhcnNlcyBhbiBJQ0UgY2FuZGlkYXRlIGxpbmUuIFNhbXBsZSBpbnB1dDpcbi8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOFxuLy8gcnBvcnQgNTU5OTZcIlxuLy8gSW5wdXQgY2FuIGJlIHByZWZpeGVkIHdpdGggYT0uXG5TRFBVdGlscy5wYXJzZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgbGV0IHBhcnRzO1xuICAvLyBQYXJzZSBib3RoIHZhcmlhbnRzLlxuICBpZiAobGluZS5pbmRleE9mKCdhPWNhbmRpZGF0ZTonKSA9PT0gMCkge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7XG4gIH0gZWxzZSB7XG4gICAgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxMCkuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHtcbiAgICBmb3VuZGF0aW9uOiBwYXJ0c1swXSxcbiAgICBjb21wb25lbnQ6IHsxOiAncnRwJywgMjogJ3J0Y3AnfVtwYXJ0c1sxXV0gfHwgcGFydHNbMV0sXG4gICAgcHJvdG9jb2w6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksXG4gICAgcHJpb3JpdHk6IHBhcnNlSW50KHBhcnRzWzNdLCAxMCksXG4gICAgaXA6IHBhcnRzWzRdLFxuICAgIGFkZHJlc3M6IHBhcnRzWzRdLCAvLyBhZGRyZXNzIGlzIGFuIGFsaWFzIGZvciBpcC5cbiAgICBwb3J0OiBwYXJzZUludChwYXJ0c1s1XSwgMTApLFxuICAgIC8vIHNraXAgcGFydHNbNl0gPT0gJ3R5cCdcbiAgICB0eXBlOiBwYXJ0c1s3XSxcbiAgfTtcblxuICBmb3IgKGxldCBpID0gODsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgc3dpdGNoIChwYXJ0c1tpXSkge1xuICAgICAgY2FzZSAncmFkZHInOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncnBvcnQnOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQgPSBwYXJzZUludChwYXJ0c1tpICsgMV0sIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Y3B0eXBlJzpcbiAgICAgICAgY2FuZGlkYXRlLnRjcFR5cGUgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndWZyYWcnOlxuICAgICAgICBjYW5kaWRhdGUudWZyYWcgPSBwYXJ0c1tpICsgMV07IC8vIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxuICAgICAgICBjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCA9IHBhcnRzW2kgKyAxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OiAvLyBleHRlbnNpb24gaGFuZGxpbmcsIGluIHBhcnRpY3VsYXIgdWZyYWcuIERvbid0IG92ZXJ3cml0ZS5cbiAgICAgICAgaWYgKGNhbmRpZGF0ZVtwYXJ0c1tpXV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNhbmRpZGF0ZVtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBjYW5kaWRhdGU7XG59O1xuXG4vLyBUcmFuc2xhdGVzIGEgY2FuZGlkYXRlIG9iamVjdCBpbnRvIFNEUCBjYW5kaWRhdGUgYXR0cmlidXRlLlxuLy8gVGhpcyBkb2VzIG5vdCBpbmNsdWRlIHRoZSBhPSBwcmVmaXghXG5TRFBVdGlscy53cml0ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICBjb25zdCBzZHAgPSBbXTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pO1xuXG4gIGNvbnN0IGNvbXBvbmVudCA9IGNhbmRpZGF0ZS5jb21wb25lbnQ7XG4gIGlmIChjb21wb25lbnQgPT09ICdydHAnKSB7XG4gICAgc2RwLnB1c2goMSk7XG4gIH0gZWxzZSBpZiAoY29tcG9uZW50ID09PSAncnRjcCcpIHtcbiAgICBzZHAucHVzaCgyKTtcbiAgfSBlbHNlIHtcbiAgICBzZHAucHVzaChjb21wb25lbnQpO1xuICB9XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnByaW9yaXR5KTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmFkZHJlc3MgfHwgY2FuZGlkYXRlLmlwKTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpO1xuXG4gIGNvbnN0IHR5cGUgPSBjYW5kaWRhdGUudHlwZTtcbiAgc2RwLnB1c2goJ3R5cCcpO1xuICBzZHAucHVzaCh0eXBlKTtcbiAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiZcbiAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkge1xuICAgIHNkcC5wdXNoKCdyYWRkcicpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyk7XG4gICAgc2RwLnB1c2goJ3Jwb3J0Jyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRQb3J0KTtcbiAgfVxuICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7XG4gICAgc2RwLnB1c2goJ3RjcHR5cGUnKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUudGNwVHlwZSk7XG4gIH1cbiAgaWYgKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZykge1xuICAgIHNkcC5wdXNoKCd1ZnJhZycpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZyk7XG4gIH1cbiAgcmV0dXJuICdjYW5kaWRhdGU6JyArIHNkcC5qb2luKCcgJyk7XG59O1xuXG4vLyBQYXJzZXMgYW4gaWNlLW9wdGlvbnMgbGluZSwgcmV0dXJucyBhbiBhcnJheSBvZiBvcHRpb24gdGFncy5cbi8vIFNhbXBsZSBpbnB1dDpcbi8vIGE9aWNlLW9wdGlvbnM6Zm9vIGJhclxuU0RQVXRpbHMucGFyc2VJY2VPcHRpb25zID0gZnVuY3Rpb24obGluZSkge1xuICByZXR1cm4gbGluZS5zdWJzdHIoMTQpLnNwbGl0KCcgJyk7XG59O1xuXG4vLyBQYXJzZXMgYSBydHBtYXAgbGluZSwgcmV0dXJucyBSVENSdHBDb2RkZWNQYXJhbWV0ZXJzLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXJ0cG1hcDoxMTEgb3B1cy80ODAwMC8yXG5TRFBVdGlscy5wYXJzZVJ0cE1hcCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgbGV0IHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTtcbiAgY29uc3QgcGFyc2VkID0ge1xuICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCksIC8vIHdhczogaWRcbiAgfTtcblxuICBwYXJ0cyA9IHBhcnRzWzBdLnNwbGl0KCcvJyk7XG5cbiAgcGFyc2VkLm5hbWUgPSBwYXJ0c1swXTtcbiAgcGFyc2VkLmNsb2NrUmF0ZSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7IC8vIHdhczogY2xvY2tyYXRlXG4gIHBhcnNlZC5jaGFubmVscyA9IHBhcnRzLmxlbmd0aCA9PT0gMyA/IHBhcnNlSW50KHBhcnRzWzJdLCAxMCkgOiAxO1xuICAvLyBsZWdhY3kgYWxpYXMsIGdvdCByZW5hbWVkIGJhY2sgdG8gY2hhbm5lbHMgaW4gT1JUQy5cbiAgcGFyc2VkLm51bUNoYW5uZWxzID0gcGFyc2VkLmNoYW5uZWxzO1xuICByZXR1cm4gcGFyc2VkO1xufTtcblxuLy8gR2VuZXJhdGVzIGEgcnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3Jcbi8vIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgbGV0IHB0ID0gY29kZWMucGF5bG9hZFR5cGU7XG4gIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgfVxuICBjb25zdCBjaGFubmVscyA9IGNvZGVjLmNoYW5uZWxzIHx8IGNvZGVjLm51bUNoYW5uZWxzIHx8IDE7XG4gIHJldHVybiAnYT1ydHBtYXA6JyArIHB0ICsgJyAnICsgY29kZWMubmFtZSArICcvJyArIGNvZGVjLmNsb2NrUmF0ZSArXG4gICAgICAoY2hhbm5lbHMgIT09IDEgPyAnLycgKyBjaGFubmVscyA6ICcnKSArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIGEgZXh0bWFwIGxpbmUgKGhlYWRlcmV4dGVuc2lvbiBmcm9tIFJGQyA1Mjg1KS4gU2FtcGxlIGlucHV0OlxuLy8gYT1leHRtYXA6MiB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XG4vLyBhPWV4dG1hcDoyL3NlbmRvbmx5IHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXRcblNEUFV0aWxzLnBhcnNlRXh0bWFwID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyKDkpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgaWQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksXG4gICAgZGlyZWN0aW9uOiBwYXJ0c1swXS5pbmRleE9mKCcvJykgPiAwID8gcGFydHNbMF0uc3BsaXQoJy8nKVsxXSA6ICdzZW5kcmVjdicsXG4gICAgdXJpOiBwYXJ0c1sxXSxcbiAgfTtcbn07XG5cbi8vIEdlbmVyYXRlcyBhbiBleHRtYXAgbGluZSBmcm9tIFJUQ1J0cEhlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMgb3Jcbi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi5cblNEUFV0aWxzLndyaXRlRXh0bWFwID0gZnVuY3Rpb24oaGVhZGVyRXh0ZW5zaW9uKSB7XG4gIHJldHVybiAnYT1leHRtYXA6JyArIChoZWFkZXJFeHRlbnNpb24uaWQgfHwgaGVhZGVyRXh0ZW5zaW9uLnByZWZlcnJlZElkKSArXG4gICAgICAoaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAmJiBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICE9PSAnc2VuZHJlY3YnXG4gICAgICAgID8gJy8nICsgaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvblxuICAgICAgICA6ICcnKSArXG4gICAgICAnICcgKyBoZWFkZXJFeHRlbnNpb24udXJpICsgJ1xcclxcbic7XG59O1xuXG4vLyBQYXJzZXMgYSBmbXRwIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OlxuLy8gYT1mbXRwOjk2IHZicj1vbjtjbmc9b25cbi8vIEFsc28gZGVhbHMgd2l0aCB2YnI9b247IGNuZz1vblxuU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgbGV0IGt2O1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7XG4gICAgcGFyc2VkW2t2WzBdLnRyaW0oKV0gPSBrdlsxXTtcbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuLy8gR2VuZXJhdGVzIGEgZm10cCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlRm10cCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBsaW5lID0gJyc7XG4gIGxldCBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnBhcmFtZXRlcnMgJiYgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykubGVuZ3RoKSB7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG4gICAgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICBpZiAoY29kZWMucGFyYW1ldGVyc1twYXJhbV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYXJhbXMucHVzaChwYXJhbSArICc9JyArIGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKHBhcmFtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsaW5lICs9ICdhPWZtdHA6JyArIHB0ICsgJyAnICsgcGFyYW1zLmpvaW4oJzsnKSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBsaW5lO1xufTtcblxuLy8gUGFyc2VzIGEgcnRjcC1mYiBsaW5lLCByZXR1cm5zIFJUQ1BSdGNwRmVlZGJhY2sgb2JqZWN0LiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXJ0Y3AtZmI6OTggbmFjayBycHNpXG5TRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogcGFydHMuc2hpZnQoKSxcbiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKSxcbiAgfTtcbn07XG5cbi8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0Y3BGYiA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBsaW5lcyA9ICcnO1xuICBsZXQgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5ydGNwRmVlZGJhY2sgJiYgY29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aCkge1xuICAgIC8vIEZJWE1FOiBzcGVjaWFsIGhhbmRsaW5nIGZvciB0cnItaW50P1xuICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZiID0+IHtcbiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArXG4gICAgICAoZmIucGFyYW1ldGVyICYmIGZiLnBhcmFtZXRlci5sZW5ndGggPyAnICcgKyBmYi5wYXJhbWV0ZXIgOiAnJykgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBsaW5lcztcbn07XG5cbi8vIFBhcnNlcyBhIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXNzcmM6MzczNTkyODU1OSBjbmFtZTpzb21ldGhpbmdcblNEUFV0aWxzLnBhcnNlU3NyY01lZGlhID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBzcCA9IGxpbmUuaW5kZXhPZignICcpO1xuICBjb25zdCBwYXJ0cyA9IHtcbiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMCksXG4gIH07XG4gIGNvbnN0IGNvbG9uID0gbGluZS5pbmRleE9mKCc6Jywgc3ApO1xuICBpZiAoY29sb24gPiAtMSkge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSwgY29sb24gLSBzcCAtIDEpO1xuICAgIHBhcnRzLnZhbHVlID0gbGluZS5zdWJzdHIoY29sb24gKyAxKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cihzcCArIDEpO1xuICB9XG4gIHJldHVybiBwYXJ0cztcbn07XG5cbi8vIFBhcnNlIGEgc3NyYy1ncm91cCBsaW5lIChzZWUgUkZDIDU1NzYpLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXNzcmMtZ3JvdXA6c2VtYW50aWNzIDEyIDM0XG5TRFBVdGlscy5wYXJzZVNzcmNHcm91cCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cigxMykuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBzZW1hbnRpY3M6IHBhcnRzLnNoaWZ0KCksXG4gICAgc3NyY3M6IHBhcnRzLm1hcChzc3JjID0+IHBhcnNlSW50KHNzcmMsIDEwKSksXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyB0aGUgTUlEIChSRkMgNTg4OCkgZnJvbSBhIG1lZGlhIHNlY3Rpb24uXG4vLyBSZXR1cm5zIHRoZSBNSUQgb3IgdW5kZWZpbmVkIGlmIG5vIG1pZCBsaW5lIHdhcyBmb3VuZC5cblNEUFV0aWxzLmdldE1pZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXTtcbiAgaWYgKG1pZCkge1xuICAgIHJldHVybiBtaWQuc3Vic3RyKDYpO1xuICB9XG59O1xuXG4vLyBQYXJzZXMgYSBmaW5nZXJwcmludCBsaW5lIGZvciBEVExTLVNSVFAuXG5TRFBVdGlscy5wYXJzZUZpbmdlcnByaW50ID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGFsZ29yaXRobTogcGFydHNbMF0udG9Mb3dlckNhc2UoKSwgLy8gYWxnb3JpdGhtIGlzIGNhc2Utc2Vuc2l0aXZlIGluIEVkZ2UuXG4gICAgdmFsdWU6IHBhcnRzWzFdLnRvVXBwZXJDYXNlKCksIC8vIHRoZSBkZWZpbml0aW9uIGlzIHVwcGVyLWNhc2UgaW4gUkZDIDQ1NzIuXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24gKyBzZXNzaW9ucGFydCxcbiAgICAnYT1maW5nZXJwcmludDonKTtcbiAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZSBpbiBFZGdlLlxuICByZXR1cm4ge1xuICAgIHJvbGU6ICdhdXRvJyxcbiAgICBmaW5nZXJwcmludHM6IGxpbmVzLm1hcChTRFBVdGlscy5wYXJzZUZpbmdlcnByaW50KSxcbiAgfTtcbn07XG5cbi8vIFNlcmlhbGl6ZXMgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkge1xuICBsZXQgc2RwID0gJ2E9c2V0dXA6JyArIHNldHVwVHlwZSArICdcXHJcXG4nO1xuICBwYXJhbXMuZmluZ2VycHJpbnRzLmZvckVhY2goZnAgPT4ge1xuICAgIHNkcCArPSAnYT1maW5nZXJwcmludDonICsgZnAuYWxnb3JpdGhtICsgJyAnICsgZnAudmFsdWUgKyAnXFxyXFxuJztcbiAgfSk7XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgYT1jcnlwdG8gbGluZXMgaW50b1xuLy8gICBodHRwczovL3Jhd2dpdC5jb20vYWJvYmEvZWRnZXJ0Yy9tYXN0ZXIvbXNvcnRjLXJzNC5odG1sI2RpY3Rpb25hcnktcnRjc3J0cHNkZXNwYXJhbWV0ZXJzLW1lbWJlcnNcblNEUFV0aWxzLnBhcnNlQ3J5cHRvTGluZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHRhZzogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBjcnlwdG9TdWl0ZTogcGFydHNbMV0sXG4gICAga2V5UGFyYW1zOiBwYXJ0c1syXSxcbiAgICBzZXNzaW9uUGFyYW1zOiBwYXJ0cy5zbGljZSgzKSxcbiAgfTtcbn07XG5cblNEUFV0aWxzLndyaXRlQ3J5cHRvTGluZSA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgcmV0dXJuICdhPWNyeXB0bzonICsgcGFyYW1ldGVycy50YWcgKyAnICcgK1xuICAgIHBhcmFtZXRlcnMuY3J5cHRvU3VpdGUgKyAnICcgK1xuICAgICh0eXBlb2YgcGFyYW1ldGVycy5rZXlQYXJhbXMgPT09ICdvYmplY3QnXG4gICAgICA/IFNEUFV0aWxzLndyaXRlQ3J5cHRvS2V5UGFyYW1zKHBhcmFtZXRlcnMua2V5UGFyYW1zKVxuICAgICAgOiBwYXJhbWV0ZXJzLmtleVBhcmFtcykgK1xuICAgIChwYXJhbWV0ZXJzLnNlc3Npb25QYXJhbXMgPyAnICcgKyBwYXJhbWV0ZXJzLnNlc3Npb25QYXJhbXMuam9pbignICcpIDogJycpICtcbiAgICAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyB0aGUgY3J5cHRvIGtleSBwYXJhbWV0ZXJzIGludG9cbi8vICAgaHR0cHM6Ly9yYXdnaXQuY29tL2Fib2JhL2VkZ2VydGMvbWFzdGVyL21zb3J0Yy1yczQuaHRtbCNydGNzcnRwa2V5cGFyYW0qXG5TRFBVdGlscy5wYXJzZUNyeXB0b0tleVBhcmFtcyA9IGZ1bmN0aW9uKGtleVBhcmFtcykge1xuICBpZiAoa2V5UGFyYW1zLmluZGV4T2YoJ2lubGluZTonKSAhPT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHBhcnRzID0ga2V5UGFyYW1zLnN1YnN0cig3KS5zcGxpdCgnfCcpO1xuICByZXR1cm4ge1xuICAgIGtleU1ldGhvZDogJ2lubGluZScsXG4gICAga2V5U2FsdDogcGFydHNbMF0sXG4gICAgbGlmZVRpbWU6IHBhcnRzWzFdLFxuICAgIG1raVZhbHVlOiBwYXJ0c1syXSA/IHBhcnRzWzJdLnNwbGl0KCc6JylbMF0gOiB1bmRlZmluZWQsXG4gICAgbWtpTGVuZ3RoOiBwYXJ0c1syXSA/IHBhcnRzWzJdLnNwbGl0KCc6JylbMV0gOiB1bmRlZmluZWQsXG4gIH07XG59O1xuXG5TRFBVdGlscy53cml0ZUNyeXB0b0tleVBhcmFtcyA9IGZ1bmN0aW9uKGtleVBhcmFtcykge1xuICByZXR1cm4ga2V5UGFyYW1zLmtleU1ldGhvZCArICc6J1xuICAgICsga2V5UGFyYW1zLmtleVNhbHQgK1xuICAgIChrZXlQYXJhbXMubGlmZVRpbWUgPyAnfCcgKyBrZXlQYXJhbXMubGlmZVRpbWUgOiAnJykgK1xuICAgIChrZXlQYXJhbXMubWtpVmFsdWUgJiYga2V5UGFyYW1zLm1raUxlbmd0aFxuICAgICAgPyAnfCcgKyBrZXlQYXJhbXMubWtpVmFsdWUgKyAnOicgKyBrZXlQYXJhbXMubWtpTGVuZ3RoXG4gICAgICA6ICcnKTtcbn07XG5cbi8vIEV4dHJhY3RzIGFsbCBTREVTIHBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXRDcnlwdG9QYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWNyeXB0bzonKTtcbiAgcmV0dXJuIGxpbmVzLm1hcChTRFBVdGlscy5wYXJzZUNyeXB0b0xpbmUpO1xufTtcblxuLy8gUGFyc2VzIElDRSBpbmZvcm1hdGlvbiBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LlxuLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5XG4vLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LlxuU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgY29uc3QgdWZyYWcgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24gKyBzZXNzaW9ucGFydCxcbiAgICAnYT1pY2UtdWZyYWc6JylbMF07XG4gIGNvbnN0IHB3ZCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWljZS1wd2Q6JylbMF07XG4gIGlmICghKHVmcmFnICYmIHB3ZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHVzZXJuYW1lRnJhZ21lbnQ6IHVmcmFnLnN1YnN0cigxMiksXG4gICAgcGFzc3dvcmQ6IHB3ZC5zdWJzdHIoMTApLFxuICB9O1xufTtcblxuLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuXG5TRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgbGV0IHNkcCA9ICdhPWljZS11ZnJhZzonICsgcGFyYW1zLnVzZXJuYW1lRnJhZ21lbnQgKyAnXFxyXFxuJyArXG4gICAgICAnYT1pY2UtcHdkOicgKyBwYXJhbXMucGFzc3dvcmQgKyAnXFxyXFxuJztcbiAgaWYgKHBhcmFtcy5pY2VMaXRlKSB7XG4gICAgc2RwICs9ICdhPWljZS1saXRlXFxyXFxuJztcbiAgfVxuICByZXR1cm4gc2RwO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0ge1xuICAgIGNvZGVjczogW10sXG4gICAgaGVhZGVyRXh0ZW5zaW9uczogW10sXG4gICAgZmVjTWVjaGFuaXNtczogW10sXG4gICAgcnRjcDogW10sXG4gIH07XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7XG4gIGZvciAobGV0IGkgPSAzOyBpIDwgbWxpbmUubGVuZ3RoOyBpKyspIHsgLy8gZmluZCBhbGwgY29kZWNzIGZyb20gbWxpbmVbMy4uXVxuICAgIGNvbnN0IHB0ID0gbWxpbmVbaV07XG4gICAgY29uc3QgcnRwbWFwbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KFxuICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTtcbiAgICBpZiAocnRwbWFwbGluZSkge1xuICAgICAgY29uc3QgY29kZWMgPSBTRFBVdGlscy5wYXJzZVJ0cE1hcChydHBtYXBsaW5lKTtcbiAgICAgIGNvbnN0IGZtdHBzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9Zm10cDonICsgcHQgKyAnICcpO1xuICAgICAgLy8gT25seSB0aGUgZmlyc3QgYT1mbXRwOjxwdD4gaXMgY29uc2lkZXJlZC5cbiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307XG4gICAgICBjb2RlYy5ydGNwRmVlZGJhY2sgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJylcbiAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7XG4gICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy5cbiAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ1JFRCc6XG4gICAgICAgIGNhc2UgJ1VMUEZFQyc6XG4gICAgICAgICAgZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5wdXNoKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9ZXh0bWFwOicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgZGVzY3JpcHRpb24uaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKFNEUFV0aWxzLnBhcnNlRXh0bWFwKGxpbmUpKTtcbiAgfSk7XG4gIC8vIEZJWE1FOiBwYXJzZSBydGNwLlxuICByZXR1cm4gZGVzY3JpcHRpb247XG59O1xuXG4vLyBHZW5lcmF0ZXMgcGFydHMgb2YgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGRlc2NyaWJpbmcgdGhlIGNhcGFiaWxpdGllcyAvXG4vLyBwYXJhbWV0ZXJzLlxuU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGtpbmQsIGNhcHMpIHtcbiAgbGV0IHNkcCA9ICcnO1xuXG4gIC8vIEJ1aWxkIHRoZSBtbGluZS5cbiAgc2RwICs9ICdtPScgKyBraW5kICsgJyAnO1xuICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy5cbiAgc2RwICs9ICcgVURQL1RMUy9SVFAvU0FWUEYgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLm1hcChjb2RlYyA9PiB7XG4gICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVjLnBheWxvYWRUeXBlO1xuICB9KS5qb2luKCcgJykgKyAnXFxyXFxuJztcblxuICBzZHAgKz0gJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuICBzZHAgKz0gJ2E9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuJztcblxuICAvLyBBZGQgYT1ydHBtYXAgbGluZXMgZm9yIGVhY2ggY29kZWMuIEFsc28gZm10cCBhbmQgcnRjcC1mYi5cbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChjb2RlYyA9PiB7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpO1xuICB9KTtcbiAgbGV0IG1heHB0aW1lID0gMDtcbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChjb2RlYyA9PiB7XG4gICAgaWYgKGNvZGVjLm1heHB0aW1lID4gbWF4cHRpbWUpIHtcbiAgICAgIG1heHB0aW1lID0gY29kZWMubWF4cHRpbWU7XG4gICAgfVxuICB9KTtcbiAgaWYgKG1heHB0aW1lID4gMCkge1xuICAgIHNkcCArPSAnYT1tYXhwdGltZTonICsgbWF4cHRpbWUgKyAnXFxyXFxuJztcbiAgfVxuXG4gIGlmIChjYXBzLmhlYWRlckV4dGVuc2lvbnMpIHtcbiAgICBjYXBzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChleHRlbnNpb24gPT4ge1xuICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRXh0bWFwKGV4dGVuc2lvbik7XG4gICAgfSk7XG4gIH1cbiAgLy8gRklYTUU6IHdyaXRlIGZlY01lY2hhbmlzbXMuXG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mXG4vLyBSVENSdHBFbmNvZGluZ1BhcmFtZXRlcnMuXG5TRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgaGFzUmVkID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdSRUQnKSAhPT0gLTE7XG4gIGNvbnN0IGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xO1xuXG4gIC8vIGZpbHRlciBhPXNzcmM6Li4uIGNuYW1lOiwgaWdub3JlIFBsYW5CLW1zaWRcbiAgY29uc3Qgc3NyY3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgICAubWFwKGxpbmUgPT4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSkpXG4gICAgLmZpbHRlcihwYXJ0cyA9PiBwYXJ0cy5hdHRyaWJ1dGUgPT09ICdjbmFtZScpO1xuICBjb25zdCBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYztcbiAgbGV0IHNlY29uZGFyeVNzcmM7XG5cbiAgY29uc3QgZmxvd3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmMtZ3JvdXA6RklEJylcbiAgICAubWFwKGxpbmUgPT4ge1xuICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cigxNykuc3BsaXQoJyAnKTtcbiAgICAgIHJldHVybiBwYXJ0cy5tYXAocGFydCA9PiBwYXJzZUludChwYXJ0LCAxMCkpO1xuICAgIH0pO1xuICBpZiAoZmxvd3MubGVuZ3RoID4gMCAmJiBmbG93c1swXS5sZW5ndGggPiAxICYmIGZsb3dzWzBdWzBdID09PSBwcmltYXJ5U3NyYykge1xuICAgIHNlY29uZGFyeVNzcmMgPSBmbG93c1swXVsxXTtcbiAgfVxuXG4gIGRlc2NyaXB0aW9uLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICBpZiAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpID09PSAnUlRYJyAmJiBjb2RlYy5wYXJhbWV0ZXJzLmFwdCkge1xuICAgICAgbGV0IGVuY1BhcmFtID0ge1xuICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICAgICAgY29kZWNQYXlsb2FkVHlwZTogcGFyc2VJbnQoY29kZWMucGFyYW1ldGVycy5hcHQsIDEwKSxcbiAgICAgIH07XG4gICAgICBpZiAocHJpbWFyeVNzcmMgJiYgc2Vjb25kYXJ5U3NyYykge1xuICAgICAgICBlbmNQYXJhbS5ydHggPSB7c3NyYzogc2Vjb25kYXJ5U3NyY307XG4gICAgICB9XG4gICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICBpZiAoaGFzUmVkKSB7XG4gICAgICAgIGVuY1BhcmFtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbmNQYXJhbSkpO1xuICAgICAgICBlbmNQYXJhbS5mZWMgPSB7XG4gICAgICAgICAgc3NyYzogcHJpbWFyeVNzcmMsXG4gICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJyxcbiAgICAgICAgfTtcbiAgICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGlmIChlbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoID09PSAwICYmIHByaW1hcnlTc3JjKSB7XG4gICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goe1xuICAgICAgc3NyYzogcHJpbWFyeVNzcmMsXG4gICAgfSk7XG4gIH1cblxuICAvLyB3ZSBzdXBwb3J0IGJvdGggYj1BUyBhbmQgYj1USUFTIGJ1dCBpbnRlcnByZXQgQVMgYXMgVElBUy5cbiAgbGV0IGJhbmR3aWR0aCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2I9Jyk7XG4gIGlmIChiYW5kd2lkdGgubGVuZ3RoKSB7XG4gICAgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPVRJQVM6JykgPT09IDApIHtcbiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHIoNyksIDEwKTtcbiAgICB9IGVsc2UgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPUFTOicpID09PSAwKSB7XG4gICAgICAvLyB1c2UgZm9ybXVsYSBmcm9tIEpTRVAgdG8gY29udmVydCBiPUFTIHRvIFRJQVMgdmFsdWUuXG4gICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDUpLCAxMCkgKiAxMDAwICogMC45NVxuICAgICAgICAgIC0gKDUwICogNDAgKiA4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmFuZHdpZHRoID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChwYXJhbXMgPT4ge1xuICAgICAgcGFyYW1zLm1heEJpdHJhdGUgPSBiYW5kd2lkdGg7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGVuY29kaW5nUGFyYW1ldGVycztcbn07XG5cbi8vIHBhcnNlcyBodHRwOi8vZHJhZnQub3J0Yy5vcmcvI3J0Y3J0Y3BwYXJhbWV0ZXJzKlxuU0RQVXRpbHMucGFyc2VSdGNwUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBydGNwUGFyYW1ldGVycyA9IHt9O1xuXG4gIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhdCB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZVxuICAvLyBTU1JDcy5cbiAgY29uc3QgcmVtb3RlU3NyYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAobGluZSA9PiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKSlcbiAgICAuZmlsdGVyKG9iaiA9PiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnKVswXTtcbiAgaWYgKHJlbW90ZVNzcmMpIHtcbiAgICBydGNwUGFyYW1ldGVycy5jbmFtZSA9IHJlbW90ZVNzcmMudmFsdWU7XG4gICAgcnRjcFBhcmFtZXRlcnMuc3NyYyA9IHJlbW90ZVNzcmMuc3NyYztcbiAgfVxuXG4gIC8vIEVkZ2UgdXNlcyB0aGUgY29tcG91bmQgYXR0cmlidXRlIGluc3RlYWQgb2YgcmVkdWNlZFNpemVcbiAgLy8gY29tcG91bmQgaXMgIXJlZHVjZWRTaXplXG4gIGNvbnN0IHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplID0gcnNpemUubGVuZ3RoID4gMDtcbiAgcnRjcFBhcmFtZXRlcnMuY29tcG91bmQgPSByc2l6ZS5sZW5ndGggPT09IDA7XG5cbiAgLy8gcGFyc2VzIHRoZSBydGNwLW11eCBhdHRy0ZZidXRlLlxuICAvLyBOb3RlIHRoYXQgRWRnZSBkb2VzIG5vdCBzdXBwb3J0IHVubXV4ZWQgUlRDUC5cbiAgY29uc3QgbXV4ID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLW11eCcpO1xuICBydGNwUGFyYW1ldGVycy5tdXggPSBtdXgubGVuZ3RoID4gMDtcblxuICByZXR1cm4gcnRjcFBhcmFtZXRlcnM7XG59O1xuXG5TRFBVdGlscy53cml0ZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocnRjcFBhcmFtZXRlcnMpIHtcbiAgbGV0IHNkcCA9ICcnO1xuICBpZiAocnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUpIHtcbiAgICBzZHAgKz0gJ2E9cnRjcC1yc2l6ZVxcclxcbic7XG4gIH1cbiAgaWYgKHJ0Y3BQYXJhbWV0ZXJzLm11eCkge1xuICAgIHNkcCArPSAnYT1ydGNwLW11eFxcclxcbic7XG4gIH1cbiAgaWYgKHJ0Y3BQYXJhbWV0ZXJzLnNzcmMgIT09IHVuZGVmaW5lZCAmJiBydGNwUGFyYW1ldGVycy5jbmFtZSkge1xuICAgIHNkcCArPSAnYT1zc3JjOicgKyBydGNwUGFyYW1ldGVycy5zc3JjICtcbiAgICAgICcgY25hbWU6JyArIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lICsgJ1xcclxcbic7XG4gIH1cbiAgcmV0dXJuIHNkcDtcbn07XG5cblxuLy8gcGFyc2VzIGVpdGhlciBhPW1zaWQ6IG9yIGE9c3NyYzouLi4gbXNpZCBsaW5lcyBhbmQgcmV0dXJuc1xuLy8gdGhlIGlkIG9mIHRoZSBNZWRpYVN0cmVhbSBhbmQgTWVkaWFTdHJlYW1UcmFjay5cblNEUFV0aWxzLnBhcnNlTXNpZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBsZXQgcGFydHM7XG4gIGNvbnN0IHNwZWMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1zaWQ6Jyk7XG4gIGlmIChzcGVjLmxlbmd0aCA9PT0gMSkge1xuICAgIHBhcnRzID0gc3BlY1swXS5zdWJzdHIoNykuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbiAgY29uc3QgcGxhbkIgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgICAubWFwKGxpbmUgPT4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSkpXG4gICAgLmZpbHRlcihtc2lkUGFydHMgPT4gbXNpZFBhcnRzLmF0dHJpYnV0ZSA9PT0gJ21zaWQnKTtcbiAgaWYgKHBsYW5CLmxlbmd0aCA+IDApIHtcbiAgICBwYXJ0cyA9IHBsYW5CWzBdLnZhbHVlLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtzdHJlYW06IHBhcnRzWzBdLCB0cmFjazogcGFydHNbMV19O1xuICB9XG59O1xuXG4vLyBTQ1RQXG4vLyBwYXJzZXMgZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMjYgZmlyc3QgYW5kIGZhbGxzIGJhY2tcbi8vIHRvIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTA1XG5TRFBVdGlscy5wYXJzZVNjdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBtbGluZSA9IFNEUFV0aWxzLnBhcnNlTUxpbmUobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgbWF4U2l6ZUxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1heC1tZXNzYWdlLXNpemU6Jyk7XG4gIGxldCBtYXhNZXNzYWdlU2l6ZTtcbiAgaWYgKG1heFNpemVMaW5lLmxlbmd0aCA+IDApIHtcbiAgICBtYXhNZXNzYWdlU2l6ZSA9IHBhcnNlSW50KG1heFNpemVMaW5lWzBdLnN1YnN0cigxOSksIDEwKTtcbiAgfVxuICBpZiAoaXNOYU4obWF4TWVzc2FnZVNpemUpKSB7XG4gICAgbWF4TWVzc2FnZVNpemUgPSA2NTUzNjtcbiAgfVxuICBjb25zdCBzY3RwUG9ydCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c2N0cC1wb3J0OicpO1xuICBpZiAoc2N0cFBvcnQubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBwb3J0OiBwYXJzZUludChzY3RwUG9ydFswXS5zdWJzdHIoMTIpLCAxMCksXG4gICAgICBwcm90b2NvbDogbWxpbmUuZm10LFxuICAgICAgbWF4TWVzc2FnZVNpemUsXG4gICAgfTtcbiAgfVxuICBjb25zdCBzY3RwTWFwTGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNjdHBtYXA6Jyk7XG4gIGlmIChzY3RwTWFwTGluZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHBhcnRzID0gc2N0cE1hcExpbmVzWzBdXG4gICAgICAuc3Vic3RyKDEwKVxuICAgICAgLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksXG4gICAgICBwcm90b2NvbDogcGFydHNbMV0sXG4gICAgICBtYXhNZXNzYWdlU2l6ZSxcbiAgICB9O1xuICB9XG59O1xuXG4vLyBTQ1RQXG4vLyBvdXRwdXRzIHRoZSBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiB2ZXJzaW9uIHRoYXQgYWxsIGJyb3dzZXJzXG4vLyBzdXBwb3J0IGJ5IG5vdyByZWNlaXZpbmcgaW4gdGhpcyBmb3JtYXQsIHVubGVzcyB3ZSBvcmlnaW5hbGx5IHBhcnNlZFxuLy8gYXMgdGhlIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTA1IGZvcm1hdCAoaW5kaWNhdGVkIGJ5IHRoZSBtLWxpbmVcbi8vIHByb3RvY29sIG9mIERUTFMvU0NUUCAtLSB3aXRob3V0IFVEUC8gb3IgVENQLylcblNEUFV0aWxzLndyaXRlU2N0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24obWVkaWEsIHNjdHApIHtcbiAgbGV0IG91dHB1dCA9IFtdO1xuICBpZiAobWVkaWEucHJvdG9jb2wgIT09ICdEVExTL1NDVFAnKSB7XG4gICAgb3V0cHV0ID0gW1xuICAgICAgJ209JyArIG1lZGlhLmtpbmQgKyAnIDkgJyArIG1lZGlhLnByb3RvY29sICsgJyAnICsgc2N0cC5wcm90b2NvbCArICdcXHJcXG4nLFxuICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nLFxuICAgICAgJ2E9c2N0cC1wb3J0OicgKyBzY3RwLnBvcnQgKyAnXFxyXFxuJyxcbiAgICBdO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IFtcbiAgICAgICdtPScgKyBtZWRpYS5raW5kICsgJyA5ICcgKyBtZWRpYS5wcm90b2NvbCArICcgJyArIHNjdHAucG9ydCArICdcXHJcXG4nLFxuICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nLFxuICAgICAgJ2E9c2N0cG1hcDonICsgc2N0cC5wb3J0ICsgJyAnICsgc2N0cC5wcm90b2NvbCArICcgNjU1MzVcXHJcXG4nLFxuICAgIF07XG4gIH1cbiAgaWYgKHNjdHAubWF4TWVzc2FnZVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIG91dHB1dC5wdXNoKCdhPW1heC1tZXNzYWdlLXNpemU6JyArIHNjdHAubWF4TWVzc2FnZVNpemUgKyAnXFxyXFxuJyk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcbn07XG5cbi8vIEdlbmVyYXRlIGEgc2Vzc2lvbiBJRCBmb3IgU0RQLlxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtcnRjd2ViLWpzZXAtMjAjc2VjdGlvbi01LjIuMVxuLy8gcmVjb21tZW5kcyB1c2luZyBhIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSArdmUgNjQtYml0IHZhbHVlXG4vLyBidXQgcmlnaHQgbm93IHRoaXMgc2hvdWxkIGJlIGFjY2VwdGFibGUgYW5kIHdpdGhpbiB0aGUgcmlnaHQgcmFuZ2VcblNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIxKTtcbn07XG5cbi8vIFdyaXRlIGJvaWxlciBwbGF0ZSBmb3Igc3RhcnQgb2YgU0RQXG4vLyBzZXNzSWQgYXJndW1lbnQgaXMgb3B0aW9uYWwgLSBpZiBub3Qgc3VwcGxpZWQgaXQgd2lsbFxuLy8gYmUgZ2VuZXJhdGVkIHJhbmRvbWx5XG4vLyBzZXNzVmVyc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gMlxuLy8gc2Vzc1VzZXIgaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvICd0aGlzaXNhZGFwdGVyb3J0YydcblNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oc2Vzc0lkLCBzZXNzVmVyLCBzZXNzVXNlcikge1xuICBsZXQgc2Vzc2lvbklkO1xuICBjb25zdCB2ZXJzaW9uID0gc2Vzc1ZlciAhPT0gdW5kZWZpbmVkID8gc2Vzc1ZlciA6IDI7XG4gIGlmIChzZXNzSWQpIHtcbiAgICBzZXNzaW9uSWQgPSBzZXNzSWQ7XG4gIH0gZWxzZSB7XG4gICAgc2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcbiAgfVxuICBjb25zdCB1c2VyID0gc2Vzc1VzZXIgfHwgJ3RoaXNpc2FkYXB0ZXJvcnRjJztcbiAgLy8gRklYTUU6IHNlc3MtaWQgc2hvdWxkIGJlIGFuIE5UUCB0aW1lc3RhbXAuXG4gIHJldHVybiAndj0wXFxyXFxuJyArXG4gICAgICAnbz0nICsgdXNlciArICcgJyArIHNlc3Npb25JZCArICcgJyArIHZlcnNpb24gK1xuICAgICAgICAnIElOIElQNCAxMjcuMC4wLjFcXHJcXG4nICtcbiAgICAgICdzPS1cXHJcXG4nICtcbiAgICAgICd0PTAgMFxcclxcbic7XG59O1xuXG4vLyBHZXRzIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgbWVkaWFTZWN0aW9uIG9yIHRoZSBzZXNzaW9ucGFydC5cblNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuXG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3dpdGNoIChsaW5lc1tpXSkge1xuICAgICAgY2FzZSAnYT1zZW5kcmVjdic6XG4gICAgICBjYXNlICdhPXNlbmRvbmx5JzpcbiAgICAgIGNhc2UgJ2E9cmVjdm9ubHknOlxuICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6XG4gICAgICAgIHJldHVybiBsaW5lc1tpXS5zdWJzdHIoMik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBGSVhNRTogV2hhdCBzaG91bGQgaGFwcGVuIGhlcmU/XG4gICAgfVxuICB9XG4gIGlmIChzZXNzaW9ucGFydCkge1xuICAgIHJldHVybiBTRFBVdGlscy5nZXREaXJlY3Rpb24oc2Vzc2lvbnBhcnQpO1xuICB9XG4gIHJldHVybiAnc2VuZHJlY3YnO1xufTtcblxuU0RQVXRpbHMuZ2V0S2luZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgbWxpbmUgPSBsaW5lc1swXS5zcGxpdCgnICcpO1xuICByZXR1cm4gbWxpbmVbMF0uc3Vic3RyKDIpO1xufTtcblxuU0RQVXRpbHMuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICByZXR1cm4gbWVkaWFTZWN0aW9uLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJztcbn07XG5cblNEUFV0aWxzLnBhcnNlTUxpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGNvbnN0IHBhcnRzID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAga2luZDogcGFydHNbMF0sXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0sXG4gICAgZm10OiBwYXJ0cy5zbGljZSgzKS5qb2luKCcgJyksXG4gIH07XG59O1xuXG5TRFBVdGlscy5wYXJzZU9MaW5lID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdvPScpWzBdO1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWU6IHBhcnRzWzBdLFxuICAgIHNlc3Npb25JZDogcGFydHNbMV0sXG4gICAgc2Vzc2lvblZlcnNpb246IHBhcnNlSW50KHBhcnRzWzJdLCAxMCksXG4gICAgbmV0VHlwZTogcGFydHNbM10sXG4gICAgYWRkcmVzc1R5cGU6IHBhcnRzWzRdLFxuICAgIGFkZHJlc3M6IHBhcnRzWzVdLFxuICB9O1xufTtcblxuLy8gYSB2ZXJ5IG5haXZlIGludGVycHJldGF0aW9uIG9mIGEgdmFsaWQgU0RQLlxuU0RQVXRpbHMuaXNWYWxpZFNEUCA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgaWYgKHR5cGVvZiBibG9iICE9PSAnc3RyaW5nJyB8fCBibG9iLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobGluZXNbaV0ubGVuZ3RoIDwgMiB8fCBsaW5lc1tpXS5jaGFyQXQoMSkgIT09ICc9Jykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBUT0RPOiBjaGVjayB0aGUgbW9kaWZpZXIgYSBiaXQgbW9yZS5cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzO1xufVxuIiwiaW1wb3J0IGFwaSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgICAgICAgaW1wb3J0IGNvbnRlbnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7YWRhcHRlckZhY3Rvcnl9IGZyb20gJy4vYWRhcHRlcl9mYWN0b3J5LmpzJztcblxuY29uc3QgYWRhcHRlciA9XG4gIGFkYXB0ZXJGYWN0b3J5KHt3aW5kb3c6IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogd2luZG93fSk7XG5leHBvcnQgZGVmYXVsdCBhZGFwdGVyO1xuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL3V0aWxzJztcblxuICAvLyBCcm93c2VyIHNoaW1zLlxuaW1wb3J0ICogYXMgY2hyb21lU2hpbSBmcm9tICcuL2Nocm9tZS9jaHJvbWVfc2hpbSc7XG5pbXBvcnQgKiBhcyBmaXJlZm94U2hpbSBmcm9tICcuL2ZpcmVmb3gvZmlyZWZveF9zaGltJztcbmltcG9ydCAqIGFzIHNhZmFyaVNoaW0gZnJvbSAnLi9zYWZhcmkvc2FmYXJpX3NoaW0nO1xuaW1wb3J0ICogYXMgY29tbW9uU2hpbSBmcm9tICcuL2NvbW1vbl9zaGltJztcbmltcG9ydCAqIGFzIHNkcCBmcm9tICdzZHAnO1xuXG4vLyBTaGltbWluZyBzdGFydHMgaGVyZS5cbmV4cG9ydCBmdW5jdGlvbiBhZGFwdGVyRmFjdG9yeSh7d2luZG93fSA9IHt9LCBvcHRpb25zID0ge1xuICBzaGltQ2hyb21lOiB0cnVlLFxuICBzaGltRmlyZWZveDogdHJ1ZSxcbiAgc2hpbVNhZmFyaTogdHJ1ZSxcbn0pIHtcbiAgLy8gVXRpbHMuXG4gIGNvbnN0IGxvZ2dpbmcgPSB1dGlscy5sb2c7XG4gIGNvbnN0IGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuXG4gIGNvbnN0IGFkYXB0ZXIgPSB7XG4gICAgYnJvd3NlckRldGFpbHMsXG4gICAgY29tbW9uU2hpbSxcbiAgICBleHRyYWN0VmVyc2lvbjogdXRpbHMuZXh0cmFjdFZlcnNpb24sXG4gICAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZyxcbiAgICBkaXNhYmxlV2FybmluZ3M6IHV0aWxzLmRpc2FibGVXYXJuaW5ncyxcbiAgICAvLyBFeHBvc2Ugc2RwIGFzIGEgY29udmVuaWVuY2UuIEZvciBwcm9kdWN0aW9uIGFwcHMgaW5jbHVkZSBkaXJlY3RseS5cbiAgICBzZHAsXG4gIH07XG5cbiAgLy8gU2hpbSBicm93c2VyIGlmIGZvdW5kLlxuICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHtcbiAgICBjYXNlICdjaHJvbWUnOlxuICAgICAgaWYgKCFjaHJvbWVTaGltIHx8ICFjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgICAgICFvcHRpb25zLnNoaW1DaHJvbWUpIHtcbiAgICAgICAgbG9nZ2luZygnQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSBudWxsKSB7XG4gICAgICAgIGxvZ2dpbmcoJ0Nocm9tZSBzaGltIGNhbiBub3QgZGV0ZXJtaW5lIHZlcnNpb24sIG5vdCBzaGltbWluZy4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gY2hyb21lU2hpbTtcblxuICAgICAgLy8gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1QZWVyQ29ubmVjdGlvbi5cbiAgICAgIGNvbW1vblNoaW0uc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltUGFyYW1ldGVybGVzc1NldExvY2FsRGVzY3JpcHRpb24od2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNocm9tZVNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbU1lZGlhU3RyZWFtKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24od2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1PblRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltQWRkVHJhY2tSZW1vdmVUcmFjayh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbUdldFNlbmRlcnNXaXRoRHRtZih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbUdldFN0YXRzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uZml4TmVnb3RpYXRpb25OZWVkZWQod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNvbm5lY3Rpb25TdGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5yZW1vdmVFeHRtYXBBbGxvd01peGVkKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZmlyZWZveCc6XG4gICAgICBpZiAoIWZpcmVmb3hTaGltIHx8ICFmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICAgICAhb3B0aW9ucy5zaGltRmlyZWZveCkge1xuICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgZmlyZWZveC4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07XG5cbiAgICAgIC8vIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltUGVlckNvbm5lY3Rpb24uXG4gICAgICBjb21tb25TaGltLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVBhcmFtZXRlcmxlc3NTZXRMb2NhbERlc2NyaXB0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbU9uVHJhY2sod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUmVtb3ZlU3RyZWFtKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVNlbmRlckdldFN0YXRzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVJlY2VpdmVyR2V0U3RhdHMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUlRDRGF0YUNoYW5uZWwod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltQWRkVHJhbnNjZWl2ZXIod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltR2V0UGFyYW1ldGVycyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1DcmVhdGVPZmZlcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1DcmVhdGVBbnN3ZXIod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNvbm5lY3Rpb25TdGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnc2FmYXJpJzpcbiAgICAgIGlmICghc2FmYXJpU2hpbSB8fCAhb3B0aW9ucy5zaGltU2FmYXJpKSB7XG4gICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTtcblxuICAgICAgLy8gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1DYWxsYmFja0FQSS5cbiAgICAgIGNvbW1vblNoaW0uc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltUGFyYW1ldGVybGVzc1NldExvY2FsRGVzY3JpcHRpb24od2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIHNhZmFyaVNoaW0uc2hpbVJUQ0ljZVNlcnZlclVybHMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1DcmVhdGVPZmZlckxlZ2FjeSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUNhbGxiYWNrc0FQSSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUxvY2FsU3RyZWFtc0FQSSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbVJlbW90ZVN0cmVhbXNBUEkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXIod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1BdWRpb0NvbnRleHQod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5yZW1vdmVFeHRtYXBBbGxvd01peGVkKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGxvZ2dpbmcoJ1Vuc3VwcG9ydGVkIGJyb3dzZXIhJyk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBhZGFwdGVyO1xufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbmV4cG9ydCB7c2hpbUdldFVzZXJNZWRpYX0gZnJvbSAnLi9nZXR1c2VybWVkaWEnO1xuZXhwb3J0IHtzaGltR2V0RGlzcGxheU1lZGlhfSBmcm9tICcuL2dldGRpc3BsYXltZWRpYSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltTWVkaWFTdHJlYW0od2luZG93KSB7XG4gIHdpbmRvdy5NZWRpYVN0cmVhbSA9IHdpbmRvdy5NZWRpYVN0cmVhbSB8fCB3aW5kb3cud2Via2l0TWVkaWFTdHJlYW07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltT25UcmFjayh3aW5kb3cpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpblxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29udHJhY2snLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbnRyYWNrO1xuICAgICAgfSxcbiAgICAgIHNldChmKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbnRyYWNrKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7XG4gICAgICB9LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgICBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9vbnRyYWNrcG9seSkge1xuICAgICAgICAgIHRoaXMuX29udHJhY2twb2x5ID0gKGUpID0+IHtcbiAgICAgICAgICAgIC8vIG9uYWRkc3RyZWFtIGRvZXMgbm90IGZpcmUgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIHRvIGFuIGV4aXN0aW5nXG4gICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC5cbiAgICAgICAgICAgIGUuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgdGUgPT4ge1xuICAgICAgICAgICAgICBsZXQgcmVjZWl2ZXI7XG4gICAgICAgICAgICAgIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycykge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gdGhpcy5nZXRSZWNlaXZlcnMoKVxuICAgICAgICAgICAgICAgICAgLmZpbmQociA9PiByLnRyYWNrICYmIHIudHJhY2suaWQgPT09IHRlLnRyYWNrLmlkKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHt0cmFjazogdGUudHJhY2t9O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7XG4gICAgICAgICAgICAgIGV2ZW50LnRyYWNrID0gdGUudHJhY2s7XG4gICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgICAgICAgICAgIGV2ZW50LnRyYW5zY2VpdmVyID0ge3JlY2VpdmVyfTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07XG4gICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgICBsZXQgcmVjZWl2ZXI7XG4gICAgICAgICAgICAgIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycykge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gdGhpcy5nZXRSZWNlaXZlcnMoKVxuICAgICAgICAgICAgICAgICAgLmZpbmQociA9PiByLnRyYWNrICYmIHIudHJhY2suaWQgPT09IHRyYWNrLmlkKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHt0cmFja307XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7XG4gICAgICAgICAgICAgIGV2ZW50LnRyYWNrID0gdHJhY2s7XG4gICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgICAgICAgICAgIGV2ZW50LnRyYW5zY2VpdmVyID0ge3JlY2VpdmVyfTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07XG4gICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gZXZlbiBpZiBSVENSdHBUcmFuc2NlaXZlciBpcyBpbiB3aW5kb3csIGl0IGlzIG9ubHkgdXNlZCBhbmRcbiAgICAvLyBlbWl0dGVkIGluIHVuaWZpZWQtcGxhbi4gVW5mb3J0dW5hdGVseSB0aGlzIG1lYW5zIHdlIG5lZWRcbiAgICAvLyB0byB1bmNvbmRpdGlvbmFsbHkgd3JhcCB0aGUgZXZlbnQuXG4gICAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAndHJhY2snLCBlID0+IHtcbiAgICAgIGlmICghZS50cmFuc2NlaXZlcikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgJ3RyYW5zY2VpdmVyJyxcbiAgICAgICAgICB7dmFsdWU6IHtyZWNlaXZlcjogZS5yZWNlaXZlcn19KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0U2VuZGVyc1dpdGhEdG1mKHdpbmRvdykge1xuICAvLyBPdmVycmlkZXMgYWRkVHJhY2svcmVtb3ZlVHJhY2ssIGRlcGVuZHMgb24gc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2suXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICEoJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpICYmXG4gICAgICAnY3JlYXRlRFRNRlNlbmRlcicgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkge1xuICAgIGNvbnN0IHNoaW1TZW5kZXJXaXRoRHRtZiA9IGZ1bmN0aW9uKHBjLCB0cmFjaykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2ssXG4gICAgICAgIGdldCBkdG1mKCkge1xuICAgICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBwYy5jcmVhdGVEVE1GU2VuZGVyKHRyYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjtcbiAgICAgICAgfSxcbiAgICAgICAgX3BjOiBwY1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgLy8gYXVnbWVudCBhZGRUcmFjayB3aGVuIGdldFNlbmRlcnMgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycykge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24gZ2V0U2VuZGVycygpIHtcbiAgICAgICAgdGhpcy5fc2VuZGVycyA9IHRoaXMuX3NlbmRlcnMgfHwgW107XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXJzLnNsaWNlKCk7IC8vIHJldHVybiBhIGNvcHkgb2YgdGhlIGludGVybmFsIHN0YXRlLlxuICAgICAgfTtcbiAgICAgIGNvbnN0IG9yaWdBZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICAgICAgZnVuY3Rpb24gYWRkVHJhY2sodHJhY2ssIHN0cmVhbSkge1xuICAgICAgICAgIGxldCBzZW5kZXIgPSBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAoIXNlbmRlcikge1xuICAgICAgICAgICAgc2VuZGVyID0gc2hpbVNlbmRlcldpdGhEdG1mKHRoaXMsIHRyYWNrKTtcbiAgICAgICAgICAgIHRoaXMuX3NlbmRlcnMucHVzaChzZW5kZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc2VuZGVyO1xuICAgICAgICB9O1xuXG4gICAgICBjb25zdCBvcmlnUmVtb3ZlVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRyYWNrKHNlbmRlcikge1xuICAgICAgICAgIG9yaWdSZW1vdmVUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX3NlbmRlcnMuaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9zZW5kZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gYWRkU3RyZWFtKHN0cmVhbSkge1xuICAgICAgdGhpcy5fc2VuZGVycyA9IHRoaXMuX3NlbmRlcnMgfHwgW107XG4gICAgICBvcmlnQWRkU3RyZWFtLmFwcGx5KHRoaXMsIFtzdHJlYW1dKTtcbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgdGhpcy5fc2VuZGVycy5wdXNoKHNoaW1TZW5kZXJXaXRoRHRtZih0aGlzLCB0cmFjaykpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9yaWdSZW1vdmVTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9XG4gICAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuX3NlbmRlcnMgPSB0aGlzLl9zZW5kZXJzIHx8IFtdO1xuICAgICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHRoaXMsIFtzdHJlYW1dKTtcblxuICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgICAgY29uc3Qgc2VuZGVyID0gdGhpcy5fc2VuZGVycy5maW5kKHMgPT4gcy50cmFjayA9PT0gdHJhY2spO1xuICAgICAgICAgIGlmIChzZW5kZXIpIHsgLy8gcmVtb3ZlIHNlbmRlclxuICAgICAgICAgICAgdGhpcy5fc2VuZGVycy5zcGxpY2UodGhpcy5fc2VuZGVycy5pbmRleE9mKHNlbmRlciksIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgICAgICAgICdnZXRTZW5kZXJzJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlICYmXG4gICAgICAgICAgICAgJ2NyZWF0ZURUTUZTZW5kZXInIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyICYmXG4gICAgICAgICAgICAgISgnZHRtZicgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgY29uc3Qgb3JpZ0dldFNlbmRlcnMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24gZ2V0U2VuZGVycygpIHtcbiAgICAgIGNvbnN0IHNlbmRlcnMgPSBvcmlnR2V0U2VuZGVycy5hcHBseSh0aGlzLCBbXSk7XG4gICAgICBzZW5kZXJzLmZvckVhY2goc2VuZGVyID0+IHNlbmRlci5fcGMgPSB0aGlzKTtcbiAgICAgIHJldHVybiBzZW5kZXJzO1xuICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsICdkdG1mJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy5fZHRtZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMudHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgdGhpcy5fZHRtZiA9IHRoaXMuX3BjLmNyZWF0ZURUTUZTZW5kZXIodGhpcy50cmFjayk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFN0YXRzKHdpbmRvdykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IG9yaWdHZXRTdGF0cyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICBjb25zdCBbc2VsZWN0b3IsIG9uU3VjYywgb25FcnJdID0gYXJndW1lbnRzO1xuXG4gICAgLy8gSWYgc2VsZWN0b3IgaXMgYSBmdW5jdGlvbiB0aGVuIHdlIGFyZSBpbiB0aGUgb2xkIHN0eWxlIHN0YXRzIHNvIGp1c3RcbiAgICAvLyBwYXNzIGJhY2sgdGhlIG9yaWdpbmFsIGdldFN0YXRzIGZvcm1hdCB0byBhdm9pZCBicmVha2luZyBvbGQgdXNlcnMuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIC8vIFdoZW4gc3BlYy1zdHlsZSBnZXRTdGF0cyBpcyBzdXBwb3J0ZWQsIHJldHVybiB0aG9zZSB3aGVuIGNhbGxlZCB3aXRoXG4gICAgLy8gZWl0aGVyIG5vIGFyZ3VtZW50cyBvciB0aGUgc2VsZWN0b3IgYXJndW1lbnQgaXMgbnVsbC5cbiAgICBpZiAob3JpZ0dldFN0YXRzLmxlbmd0aCA9PT0gMCAmJiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICB0eXBlb2Ygc2VsZWN0b3IgIT09ICdmdW5jdGlvbicpKSB7XG4gICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgY29uc3Qgc3RhbmRhcmRSZXBvcnQgPSB7fTtcbiAgICAgIGNvbnN0IHJlcG9ydHMgPSByZXNwb25zZS5yZXN1bHQoKTtcbiAgICAgIHJlcG9ydHMuZm9yRWFjaChyZXBvcnQgPT4ge1xuICAgICAgICBjb25zdCBzdGFuZGFyZFN0YXRzID0ge1xuICAgICAgICAgIGlkOiByZXBvcnQuaWQsXG4gICAgICAgICAgdGltZXN0YW1wOiByZXBvcnQudGltZXN0YW1wLFxuICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJyxcbiAgICAgICAgICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gICAgICAgICAgfVtyZXBvcnQudHlwZV0gfHwgcmVwb3J0LnR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgcmVwb3J0Lm5hbWVzKCkuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdGFuZGFyZFJlcG9ydFtzdGFuZGFyZFN0YXRzLmlkXSA9IHN0YW5kYXJkU3RhdHM7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0O1xuICAgIH07XG5cbiAgICAvLyBzaGltIGdldFN0YXRzIHdpdGggbWFwbGlrZSBzdXBwb3J0XG4gICAgY29uc3QgbWFrZU1hcFN0YXRzID0gZnVuY3Rpb24oc3RhdHMpIHtcbiAgICAgIHJldHVybiBuZXcgTWFwKE9iamVjdC5rZXlzKHN0YXRzKS5tYXAoa2V5ID0+IFtrZXksIHN0YXRzW2tleV1dKSk7XG4gICAgfTtcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDIpIHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NDYWxsYmFja1dyYXBwZXJfID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgb25TdWNjKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIFtzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyxcbiAgICAgICAgc2VsZWN0b3JdKTtcbiAgICB9XG5cbiAgICAvLyBwcm9taXNlLXN1cHBvcnRcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIFtcbiAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7XG4gICAgICAgIH0sIHJlamVjdF0pO1xuICAgIH0pLnRoZW4ob25TdWNjLCBvbkVycik7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3cpIHtcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyICYmIHdpbmRvdy5SVENSdHBSZWNlaXZlcikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzaGltIHNlbmRlciBzdGF0cy5cbiAgaWYgKCEoJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHtcbiAgICBjb25zdCBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztcbiAgICBpZiAob3JpZ0dldFNlbmRlcnMpIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uIGdldFNlbmRlcnMoKSB7XG4gICAgICAgIGNvbnN0IHNlbmRlcnMgPSBvcmlnR2V0U2VuZGVycy5hcHBseSh0aGlzLCBbXSk7XG4gICAgICAgIHNlbmRlcnMuZm9yRWFjaChzZW5kZXIgPT4gc2VuZGVyLl9wYyA9IHRoaXMpO1xuICAgICAgICByZXR1cm4gc2VuZGVycztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ0FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICBpZiAob3JpZ0FkZFRyYWNrKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2soKSB7XG4gICAgICAgIGNvbnN0IHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBzZW5kZXIuX3BjID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICAgIH07XG4gICAgfVxuICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgICBjb25zdCBzZW5kZXIgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbihyZXN1bHQgPT5cbiAgICAgICAgLyogTm90ZTogdGhpcyB3aWxsIGluY2x1ZGUgc3RhdHMgb2YgYWxsIHNlbmRlcnMgdGhhdFxuICAgICAgICAgKiAgIHNlbmQgYSB0cmFjayB3aXRoIHRoZSBzYW1lIGlkIGFzIHNlbmRlci50cmFjayBhc1xuICAgICAgICAgKiAgIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBpZGVudGlmeSB0aGUgUlRDUnRwU2VuZGVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdXRpbHMuZmlsdGVyU3RhdHMocmVzdWx0LCBzZW5kZXIudHJhY2ssIHRydWUpKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gc2hpbSByZWNlaXZlciBzdGF0cy5cbiAgaWYgKCEoJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSkge1xuICAgIGNvbnN0IG9yaWdHZXRSZWNlaXZlcnMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycztcbiAgICBpZiAob3JpZ0dldFJlY2VpdmVycykge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMgPVxuICAgICAgICBmdW5jdGlvbiBnZXRSZWNlaXZlcnMoKSB7XG4gICAgICAgICAgY29uc3QgcmVjZWl2ZXJzID0gb3JpZ0dldFJlY2VpdmVycy5hcHBseSh0aGlzLCBbXSk7XG4gICAgICAgICAgcmVjZWl2ZXJzLmZvckVhY2gocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuX3BjID0gdGhpcyk7XG4gICAgICAgICAgcmV0dXJuIHJlY2VpdmVycztcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAndHJhY2snLCBlID0+IHtcbiAgICAgIGUucmVjZWl2ZXIuX3BjID0gZS5zcmNFbGVtZW50O1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gICAgd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgICAgY29uc3QgcmVjZWl2ZXIgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbihyZXN1bHQgPT5cbiAgICAgICAgdXRpbHMuZmlsdGVyU3RhdHMocmVzdWx0LCByZWNlaXZlci50cmFjaywgZmFsc2UpKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKCEoJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSAmJlxuICAgICAgJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNoaW0gUlRDUGVlckNvbm5lY3Rpb24uZ2V0U3RhdHModHJhY2spLlxuICBjb25zdCBvcmlnR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmXG4gICAgICAgIGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrKSB7XG4gICAgICBjb25zdCB0cmFjayA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGxldCBzZW5kZXI7XG4gICAgICBsZXQgcmVjZWl2ZXI7XG4gICAgICBsZXQgZXJyO1xuICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChzID0+IHtcbiAgICAgICAgaWYgKHMudHJhY2sgPT09IHRyYWNrKSB7XG4gICAgICAgICAgaWYgKHNlbmRlcikge1xuICAgICAgICAgICAgZXJyID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VuZGVyID0gcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKHIgPT4ge1xuICAgICAgICBpZiAoci50cmFjayA9PT0gdHJhY2spIHtcbiAgICAgICAgICBpZiAocmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGVyciA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlY2VpdmVyID0gcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHIudHJhY2sgPT09IHRyYWNrO1xuICAgICAgfSk7XG4gICAgICBpZiAoZXJyIHx8IChzZW5kZXIgJiYgcmVjZWl2ZXIpKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay4nLFxuICAgICAgICAgICdJbnZhbGlkQWNjZXNzRXJyb3InKSk7XG4gICAgICB9IGVsc2UgaWYgKHNlbmRlcikge1xuICAgICAgICByZXR1cm4gc2VuZGVyLmdldFN0YXRzKCk7XG4gICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyKSB7XG4gICAgICAgIHJldHVybiByZWNlaXZlci5nZXRTdGF0cygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICdUaGVyZSBpcyBubyBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay4nLFxuICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJykpO1xuICAgIH1cbiAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFja1dpdGhOYXRpdmUod2luZG93KSB7XG4gIC8vIHNoaW0gYWRkVHJhY2svcmVtb3ZlVHJhY2sgd2l0aCBuYXRpdmUgdmFyaWFudHMgaW4gb3JkZXIgdG8gbWFrZVxuICAvLyB0aGUgaW50ZXJhY3Rpb25zIHdpdGggbGVnYWN5IGdldExvY2FsU3RyZWFtcyBiZWhhdmUgYXMgaW4gb3RoZXIgYnJvd3NlcnMuXG4gIC8vIEtlZXBzIGEgbWFwcGluZyBzdHJlYW0uaWQgPT4gW3N0cmVhbSwgcnRwc2VuZGVycy4uLl1cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPVxuICAgIGZ1bmN0aW9uIGdldExvY2FsU3RyZWFtcygpIHtcbiAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9O1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpXG4gICAgICAgIC5tYXAoc3RyZWFtSWQgPT4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF1bMF0pO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ0FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9XG4gICAgZnVuY3Rpb24gYWRkVHJhY2sodHJhY2ssIHN0cmVhbSkge1xuICAgICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgcmV0dXJuIG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG5cbiAgICAgIGNvbnN0IHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKCF0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0pIHtcbiAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdID0gW3N0cmVhbSwgc2VuZGVyXTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdLmluZGV4T2Yoc2VuZGVyKSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdLnB1c2goc2VuZGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgfTtcblxuICBjb25zdCBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gYWRkU3RyZWFtKHN0cmVhbSkge1xuICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9O1xuXG4gICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgY29uc3QgYWxyZWFkeUV4aXN0cyA9IHRoaXMuZ2V0U2VuZGVycygpLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgICBpZiAoYWxyZWFkeUV4aXN0cykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUcmFjayBhbHJlYWR5IGV4aXN0cy4nLFxuICAgICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGV4aXN0aW5nU2VuZGVycyA9IHRoaXMuZ2V0U2VuZGVycygpO1xuICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBjb25zdCBuZXdTZW5kZXJzID0gdGhpcy5nZXRTZW5kZXJzKClcbiAgICAgIC5maWx0ZXIobmV3U2VuZGVyID0+IGV4aXN0aW5nU2VuZGVycy5pbmRleE9mKG5ld1NlbmRlcikgPT09IC0xKTtcbiAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0gPSBbc3RyZWFtXS5jb25jYXQobmV3U2VuZGVycyk7XG4gIH07XG5cbiAgY29uc3Qgb3JpZ1JlbW92ZVN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG4gICAgICBkZWxldGUgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdO1xuICAgICAgcmV0dXJuIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gIGNvbnN0IG9yaWdSZW1vdmVUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZVRyYWNrKHNlbmRlcikge1xuICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG4gICAgICBpZiAoc2VuZGVyKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLmZvckVhY2goc3RyZWFtSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdLmluZGV4T2Yoc2VuZGVyKTtcbiAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdSZW1vdmVUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjayh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNoaW0gYWRkVHJhY2sgYW5kIHJlbW92ZVRyYWNrLlxuICBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayAmJlxuICAgICAgYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2NSkge1xuICAgIHJldHVybiBzaGltQWRkVHJhY2tSZW1vdmVUcmFja1dpdGhOYXRpdmUod2luZG93KTtcbiAgfVxuXG4gIC8vIGFsc28gc2hpbSBwYy5nZXRMb2NhbFN0cmVhbXMgd2hlbiBhZGRUcmFjayBpcyBzaGltbWVkXG4gIC8vIHRvIHJldHVybiB0aGUgb3JpZ2luYWwgc3RyZWFtcy5cbiAgY29uc3Qgb3JpZ0dldExvY2FsU3RyZWFtcyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVcbiAgICAgIC5nZXRMb2NhbFN0cmVhbXM7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID1cbiAgICBmdW5jdGlvbiBnZXRMb2NhbFN0cmVhbXMoKSB7XG4gICAgICBjb25zdCBuYXRpdmVTdHJlYW1zID0gb3JpZ0dldExvY2FsU3RyZWFtcy5hcHBseSh0aGlzKTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG4gICAgICByZXR1cm4gbmF0aXZlU3RyZWFtcy5tYXAoc3RyZWFtID0+IHRoaXMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF0pO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICB0aGlzLl9yZXZlcnNlU3RyZWFtcyA9IHRoaXMuX3JldmVyc2VTdHJlYW1zIHx8IHt9O1xuXG4gICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgY29uc3QgYWxyZWFkeUV4aXN0cyA9IHRoaXMuZ2V0U2VuZGVycygpLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgICBpZiAoYWxyZWFkeUV4aXN0cykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUcmFjayBhbHJlYWR5IGV4aXN0cy4nLFxuICAgICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEFkZCBpZGVudGl0eSBtYXBwaW5nIGZvciBjb25zaXN0ZW5jeSB3aXRoIGFkZFRyYWNrLlxuICAgIC8vIFVubGVzcyB0aGlzIGlzIGJlaW5nIHVzZWQgd2l0aCBhIHN0cmVhbSBmcm9tIGFkZFRyYWNrLlxuICAgIGlmICghdGhpcy5fcmV2ZXJzZVN0cmVhbXNbc3RyZWFtLmlkXSkge1xuICAgICAgY29uc3QgbmV3U3RyZWFtID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbShzdHJlYW0uZ2V0VHJhY2tzKCkpO1xuICAgICAgdGhpcy5fc3RyZWFtc1tzdHJlYW0uaWRdID0gbmV3U3RyZWFtO1xuICAgICAgdGhpcy5fcmV2ZXJzZVN0cmVhbXNbbmV3U3RyZWFtLmlkXSA9IHN0cmVhbTtcbiAgICAgIHN0cmVhbSA9IG5ld1N0cmVhbTtcbiAgICB9XG4gICAgb3JpZ0FkZFN0cmVhbS5hcHBseSh0aGlzLCBbc3RyZWFtXSk7XG4gIH07XG5cbiAgY29uc3Qgb3JpZ1JlbW92ZVN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgdGhpcy5fc3RyZWFtcyA9IHRoaXMuX3N0cmVhbXMgfHwge307XG4gICAgICB0aGlzLl9yZXZlcnNlU3RyZWFtcyA9IHRoaXMuX3JldmVyc2VTdHJlYW1zIHx8IHt9O1xuXG4gICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHRoaXMsIFsodGhpcy5fc3RyZWFtc1tzdHJlYW0uaWRdIHx8IHN0cmVhbSldKTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9yZXZlcnNlU3RyZWFtc1sodGhpcy5fc3RyZWFtc1tzdHJlYW0uaWRdID9cbiAgICAgICAgICB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0uaWQgOiBzdHJlYW0uaWQpXTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgfTtcblxuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICBpZiAodGhpcy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIFJUQ1BlZXJDb25uZWN0aW9uXFwncyBzaWduYWxpbmdTdGF0ZSBpcyBcXCdjbG9zZWRcXCcuJyxcbiAgICAgICAgICAnSW52YWxpZFN0YXRlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0cmVhbXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICBpZiAoc3RyZWFtcy5sZW5ndGggIT09IDEgfHxcbiAgICAgICAgICAhc3RyZWFtc1swXS5nZXRUcmFja3MoKS5maW5kKHQgPT4gdCA9PT0gdHJhY2spKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgbm90IGZ1bGx5IGNvcnJlY3QgYnV0IGFsbCB3ZSBjYW4gbWFuYWdlIHdpdGhvdXRcbiAgICAgICAgLy8gW1thc3NvY2lhdGVkIE1lZGlhU3RyZWFtc11dIGludGVybmFsIHNsb3QuXG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgJ1RoZSBhZGFwdGVyLmpzIGFkZFRyYWNrIHBvbHlmaWxsIG9ubHkgc3VwcG9ydHMgYSBzaW5nbGUgJyArXG4gICAgICAgICAgJyBzdHJlYW0gd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdHJhY2suJyxcbiAgICAgICAgICAnTm90U3VwcG9ydGVkRXJyb3InKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWxyZWFkeUV4aXN0cyA9IHRoaXMuZ2V0U2VuZGVycygpLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgICBpZiAoYWxyZWFkeUV4aXN0cykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUcmFjayBhbHJlYWR5IGV4aXN0cy4nLFxuICAgICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG4gICAgICBjb25zdCBvbGRTdHJlYW0gPSB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICBpZiAob2xkU3RyZWFtKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgdXNpbmcgb2RkIENocm9tZSBiZWhhdmlvdXIsIHVzZSB3aXRoIGNhdXRpb246XG4gICAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD03ODE1XG4gICAgICAgIC8vIE5vdGU6IHdlIHJlbHkgb24gdGhlIGhpZ2gtbGV2ZWwgYWRkVHJhY2svZHRtZiBzaGltIHRvXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgc2VuZGVyIHdpdGggYSBkdG1mIHNlbmRlci5cbiAgICAgICAgb2xkU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTtcblxuICAgICAgICAvLyBUcmlnZ2VyIE9OTiBhc3luYy5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3U3RyZWFtID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbShbdHJhY2tdKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtc1tzdHJlYW0uaWRdID0gbmV3U3RyZWFtO1xuICAgICAgICB0aGlzLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgICAgICB0aGlzLmFkZFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgfTtcblxuICAvLyByZXBsYWNlIHRoZSBpbnRlcm5hbCBzdHJlYW0gaWQgd2l0aCB0aGUgZXh0ZXJuYWwgb25lIGFuZFxuICAvLyB2aWNlIHZlcnNhLlxuICBmdW5jdGlvbiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHtcbiAgICBsZXQgc2RwID0gZGVzY3JpcHRpb24uc2RwO1xuICAgIE9iamVjdC5rZXlzKHBjLl9yZXZlcnNlU3RyZWFtcyB8fCBbXSkuZm9yRWFjaChpbnRlcm5hbElkID0+IHtcbiAgICAgIGNvbnN0IGV4dGVybmFsU3RyZWFtID0gcGMuX3JldmVyc2VTdHJlYW1zW2ludGVybmFsSWRdO1xuICAgICAgY29uc3QgaW50ZXJuYWxTdHJlYW0gPSBwYy5fc3RyZWFtc1tleHRlcm5hbFN0cmVhbS5pZF07XG4gICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGludGVybmFsU3RyZWFtLmlkLCAnZycpLFxuICAgICAgICAgIGV4dGVybmFsU3RyZWFtLmlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgc2RwXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gcmVwbGFjZUV4dGVybmFsU3RyZWFtSWQocGMsIGRlc2NyaXB0aW9uKSB7XG4gICAgbGV0IHNkcCA9IGRlc2NyaXB0aW9uLnNkcDtcbiAgICBPYmplY3Qua2V5cyhwYy5fcmV2ZXJzZVN0cmVhbXMgfHwgW10pLmZvckVhY2goaW50ZXJuYWxJZCA9PiB7XG4gICAgICBjb25zdCBleHRlcm5hbFN0cmVhbSA9IHBjLl9yZXZlcnNlU3RyZWFtc1tpbnRlcm5hbElkXTtcbiAgICAgIGNvbnN0IGludGVybmFsU3RyZWFtID0gcGMuX3N0cmVhbXNbZXh0ZXJuYWxTdHJlYW0uaWRdO1xuICAgICAgc2RwID0gc2RwLnJlcGxhY2UobmV3IFJlZ0V4cChleHRlcm5hbFN0cmVhbS5pZCwgJ2cnKSxcbiAgICAgICAgICBpbnRlcm5hbFN0cmVhbS5pZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSxcbiAgICAgIHNkcFxuICAgIH0pO1xuICB9XG4gIFsnY3JlYXRlT2ZmZXInLCAnY3JlYXRlQW5zd2VyJ10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICBjb25zdCBuYXRpdmVNZXRob2QgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgY29uc3QgbWV0aG9kT2JqID0ge1ttZXRob2RdKCkge1xuICAgICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGNvbnN0IGlzTGVnYWN5Q2FsbCA9IGFyZ3VtZW50cy5sZW5ndGggJiZcbiAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nO1xuICAgICAgaWYgKGlzTGVnYWN5Q2FsbCkge1xuICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIFtcbiAgICAgICAgICAoZGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2MgPSByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZCh0aGlzLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBhcmdzWzBdLmFwcGx5KG51bGwsIFtkZXNjXSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXJnc1sxXSkge1xuICAgICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgYXJndW1lbnRzWzJdXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAudGhlbihkZXNjcmlwdGlvbiA9PiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZCh0aGlzLCBkZXNjcmlwdGlvbikpO1xuICAgIH19O1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IG1ldGhvZE9ialttZXRob2RdO1xuICB9KTtcblxuICBjb25zdCBvcmlnU2V0TG9jYWxEZXNjcmlwdGlvbiA9XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb247XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9XG4gICAgZnVuY3Rpb24gc2V0TG9jYWxEZXNjcmlwdGlvbigpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCB8fCAhYXJndW1lbnRzWzBdLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICBhcmd1bWVudHNbMF0gPSByZXBsYWNlRXh0ZXJuYWxTdHJlYW1JZCh0aGlzLCBhcmd1bWVudHNbMF0pO1xuICAgICAgcmV0dXJuIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAvLyBUT0RPOiBtYW5nbGUgZ2V0U3RhdHM6IGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJydGMtc3RhdHMvI2RvbS1ydGNtZWRpYXN0cmVhbXN0YXRzLXN0cmVhbWlkZW50aWZpZXJcblxuICBjb25zdCBvcmlnTG9jYWxEZXNjcmlwdGlvbiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnbG9jYWxEZXNjcmlwdGlvbicpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcbiAgICAgICdsb2NhbERlc2NyaXB0aW9uJywge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBvcmlnTG9jYWxEZXNjcmlwdGlvbi5nZXQuYXBwbHkodGhpcyk7XG4gICAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZCh0aGlzLCBkZXNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZVRyYWNrKHNlbmRlcikge1xuICAgICAgaWYgKHRoaXMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgJ1RoZSBSVENQZWVyQ29ubmVjdGlvblxcJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgXFwnY2xvc2VkXFwnLicsXG4gICAgICAgICAgJ0ludmFsaWRTdGF0ZUVycm9yJyk7XG4gICAgICB9XG4gICAgICAvLyBXZSBjYW4gbm90IHlldCBjaGVjayBmb3Igc2VuZGVyIGluc3RhbmNlb2YgUlRDUnRwU2VuZGVyXG4gICAgICAvLyBzaW5jZSB3ZSBzaGltIFJUUFNlbmRlci4gU28gd2UgY2hlY2sgaWYgc2VuZGVyLl9wYyBpcyBzZXQuXG4gICAgICBpZiAoIXNlbmRlci5fcGMpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayAnICtcbiAgICAgICAgICAgICdkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci4nLCAnVHlwZUVycm9yJyk7XG4gICAgICB9XG4gICAgICBjb25zdCBpc0xvY2FsID0gc2VuZGVyLl9wYyA9PT0gdGhpcztcbiAgICAgIGlmICghaXNMb2NhbCkge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdTZW5kZXIgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoaXMgY29ubmVjdGlvbi4nLFxuICAgICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWFyY2ggZm9yIHRoZSBuYXRpdmUgc3RyZWFtIHRoZSBzZW5kZXJzIHRyYWNrIGJlbG9uZ3MgdG8uXG4gICAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICAgIGxldCBzdHJlYW07XG4gICAgICBPYmplY3Qua2V5cyh0aGlzLl9zdHJlYW1zKS5mb3JFYWNoKHN0cmVhbWlkID0+IHtcbiAgICAgICAgY29uc3QgaGFzVHJhY2sgPSB0aGlzLl9zdHJlYW1zW3N0cmVhbWlkXS5nZXRUcmFja3MoKVxuICAgICAgICAgIC5maW5kKHRyYWNrID0+IHNlbmRlci50cmFjayA9PT0gdHJhY2spO1xuICAgICAgICBpZiAoaGFzVHJhY2spIHtcbiAgICAgICAgICBzdHJlYW0gPSB0aGlzLl9zdHJlYW1zW3N0cmVhbWlkXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgaWYgKHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBsYXN0IHRyYWNrIG9mIHRoZSBzdHJlYW0sIHJlbW92ZSB0aGUgc3RyZWFtLiBUaGlzXG4gICAgICAgICAgLy8gdGFrZXMgY2FyZSBvZiBhbnkgc2hpbW1lZCBfc2VuZGVycy5cbiAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbSh0aGlzLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZWx5aW5nIG9uIHRoZSBzYW1lIG9kZCBjaHJvbWUgYmVoYXZpb3VyIGFzIGFib3ZlLlxuICAgICAgICAgIHN0cmVhbS5yZW1vdmVUcmFjayhzZW5kZXIudHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJykpO1xuICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUGVlckNvbm5lY3Rpb24od2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAvLyB2ZXJ5IGJhc2ljIHN1cHBvcnQgZm9yIG9sZCB2ZXJzaW9ucy5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb247XG4gIH1cbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzaGltIGltcGxpY2l0IGNyZWF0aW9uIG9mIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbi9SVENJY2VDYW5kaWRhdGVcbiAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1Mykge1xuICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICBjb25zdCBuYXRpdmVNZXRob2QgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgICAgICAgY29uc3QgbWV0aG9kT2JqID0ge1ttZXRob2RdKCkge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3ICgobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJykgP1xuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOlxuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfX07XG4gICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gbWV0aG9kT2JqW21ldGhvZF07XG4gICAgICAgIH0pO1xuICB9XG59XG5cbi8vIEF0dGVtcHQgdG8gZml4IE9OTiBpbiBwbGFuLWIgbW9kZS5cbmV4cG9ydCBmdW5jdGlvbiBmaXhOZWdvdGlhdGlvbk5lZWRlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ25lZ290aWF0aW9ubmVlZGVkJywgZSA9PiB7XG4gICAgY29uc3QgcGMgPSBlLnRhcmdldDtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDcyIHx8IChwYy5nZXRDb25maWd1cmF0aW9uICYmXG4gICAgICAgIHBjLmdldENvbmZpZ3VyYXRpb24oKS5zZHBTZW1hbnRpY3MgPT09ICdwbGFuLWInKSkge1xuICAgICAgaWYgKHBjLnNpZ25hbGluZ1N0YXRlICE9PSAnc3RhYmxlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9KTtcbn1cbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBhZGFwdGVyLmpzIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXREaXNwbGF5TWVkaWEod2luZG93LCBnZXRTb3VyY2VJZCkge1xuICBpZiAod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAnZ2V0RGlzcGxheU1lZGlhJyBpbiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZ2V0U291cmNlSWQgaXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlIHJlc29sdmluZyB3aXRoXG4gIC8vIHRoZSBzb3VyY2VJZCBvZiB0aGUgc2NyZWVuL3dpbmRvdy90YWIgdG8gYmUgc2hhcmVkLlxuICBpZiAodHlwZW9mIGdldFNvdXJjZUlkICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc29sZS5lcnJvcignc2hpbUdldERpc3BsYXlNZWRpYTogZ2V0U291cmNlSWQgYXJndW1lbnQgaXMgbm90ICcgK1xuICAgICAgICAnYSBmdW5jdGlvbicpO1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEgPVxuICAgIGZ1bmN0aW9uIGdldERpc3BsYXlNZWRpYShjb25zdHJhaW50cykge1xuICAgICAgcmV0dXJuIGdldFNvdXJjZUlkKGNvbnN0cmFpbnRzKVxuICAgICAgICAudGhlbihzb3VyY2VJZCA9PiB7XG4gICAgICAgICAgY29uc3Qgd2lkdGhTcGVjaWZpZWQgPSBjb25zdHJhaW50cy52aWRlbyAmJiBjb25zdHJhaW50cy52aWRlby53aWR0aDtcbiAgICAgICAgICBjb25zdCBoZWlnaHRTcGVjaWZpZWQgPSBjb25zdHJhaW50cy52aWRlbyAmJlxuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uaGVpZ2h0O1xuICAgICAgICAgIGNvbnN0IGZyYW1lUmF0ZVNwZWNpZmllZCA9IGNvbnN0cmFpbnRzLnZpZGVvICYmXG4gICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5mcmFtZVJhdGU7XG4gICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSB7XG4gICAgICAgICAgICBtYW5kYXRvcnk6IHtcbiAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2U6ICdkZXNrdG9wJyxcbiAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2VJZDogc291cmNlSWQsXG4gICAgICAgICAgICAgIG1heEZyYW1lUmF0ZTogZnJhbWVSYXRlU3BlY2lmaWVkIHx8IDNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmICh3aWR0aFNwZWNpZmllZCkge1xuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8ubWFuZGF0b3J5Lm1heFdpZHRoID0gd2lkdGhTcGVjaWZpZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoZWlnaHRTcGVjaWZpZWQpIHtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLm1hbmRhdG9yeS5tYXhIZWlnaHQgPSBoZWlnaHRTcGVjaWZpZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmNvbnN0IGxvZ2dpbmcgPSB1dGlscy5sb2c7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY29uc3RyYWludHNUb0Nocm9tZV8gPSBmdW5jdGlvbihjKSB7XG4gICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7XG4gICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgY29uc3QgY2MgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCByID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/IGNba2V5XSA6IHtpZGVhbDogY1trZXldfTtcbiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHIubWluID0gci5tYXggPSByLmV4YWN0O1xuICAgICAgfVxuICAgICAgY29uc3Qgb2xkbmFtZV8gPSBmdW5jdGlvbihwcmVmaXgsIG5hbWUpIHtcbiAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgIHJldHVybiBwcmVmaXggKyBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5hbWUgPT09ICdkZXZpY2VJZCcpID8gJ3NvdXJjZUlkJyA6IG5hbWU7XG4gICAgICB9O1xuICAgICAgaWYgKHIuaWRlYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYy5vcHRpb25hbCA9IGNjLm9wdGlvbmFsIHx8IFtdO1xuICAgICAgICBsZXQgb2MgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiByLmlkZWFsID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG9jW29sZG5hbWVfKCdtaW4nLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgICAgb2MgPSB7fTtcbiAgICAgICAgICBvY1tvbGRuYW1lXygnbWF4Jywga2V5KV0gPSByLmlkZWFsO1xuICAgICAgICAgIGNjLm9wdGlvbmFsLnB1c2gob2MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9jW29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgIT09ICdudW1iZXInKSB7XG4gICAgICAgIGNjLm1hbmRhdG9yeSA9IGNjLm1hbmRhdG9yeSB8fCB7fTtcbiAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBbJ21pbicsICdtYXgnXS5mb3JFYWNoKG1peCA9PiB7XG4gICAgICAgICAgaWYgKHJbbWl4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8obWl4LCBrZXkpXSA9IHJbbWl4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjLmFkdmFuY2VkKSB7XG4gICAgICBjYy5vcHRpb25hbCA9IChjYy5vcHRpb25hbCB8fCBbXSkuY29uY2F0KGMuYWR2YW5jZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2M7XG4gIH07XG5cbiAgY29uc3Qgc2hpbUNvbnN0cmFpbnRzXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBmdW5jKSB7XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjEpIHtcbiAgICAgIHJldHVybiBmdW5jKGNvbnN0cmFpbnRzKTtcbiAgICB9XG4gICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgaWYgKGNvbnN0cmFpbnRzICYmIHR5cGVvZiBjb25zdHJhaW50cy5hdWRpbyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGNvbnN0IHJlbWFwID0gZnVuY3Rpb24ob2JqLCBhLCBiKSB7XG4gICAgICAgIGlmIChhIGluIG9iaiAmJiAhKGIgaW4gb2JqKSkge1xuICAgICAgICAgIG9ialtiXSA9IG9ialthXTtcbiAgICAgICAgICBkZWxldGUgb2JqW2FdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgICByZW1hcChjb25zdHJhaW50cy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdnb29nQXV0b0dhaW5Db250cm9sJyk7XG4gICAgICByZW1hcChjb25zdHJhaW50cy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnZ29vZ05vaXNlU3VwcHJlc3Npb24nKTtcbiAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMuYXVkaW8pO1xuICAgIH1cbiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLnZpZGVvID09PSAnb2JqZWN0Jykge1xuICAgICAgLy8gU2hpbSBmYWNpbmdNb2RlIGZvciBtb2JpbGUgJiBzdXJmYWNlIHByby5cbiAgICAgIGxldCBmYWNlID0gY29uc3RyYWludHMudmlkZW8uZmFjaW5nTW9kZTtcbiAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICdvYmplY3QnKSA/IGZhY2UgOiB7aWRlYWw6IGZhY2V9KTtcbiAgICAgIGNvbnN0IGdldFN1cHBvcnRlZEZhY2luZ01vZGVMaWVzID0gYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDY2O1xuXG4gICAgICBpZiAoKGZhY2UgJiYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmV4YWN0ID09PSAnZW52aXJvbm1lbnQnIHx8XG4gICAgICAgICAgICAgICAgICAgIGZhY2UuaWRlYWwgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSkgJiZcbiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiZcbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5mYWNpbmdNb2RlICYmXG4gICAgICAgICAgICAhZ2V0U3VwcG9ydGVkRmFjaW5nTW9kZUxpZXMpKSB7XG4gICAgICAgIGRlbGV0ZSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgICBsZXQgbWF0Y2hlcztcbiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50Jykge1xuICAgICAgICAgIG1hdGNoZXMgPSBbJ2JhY2snLCAncmVhciddO1xuICAgICAgICB9IGVsc2UgaWYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAndXNlcicpIHtcbiAgICAgICAgICBtYXRjaGVzID0gWydmcm9udCddO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgLy8gTG9vayBmb3IgbWF0Y2hlcyBpbiBsYWJlbCwgb3IgdXNlIGxhc3QgY2FtIGZvciBiYWNrICh0eXBpY2FsKS5cbiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcbiAgICAgICAgICAudGhlbihkZXZpY2VzID0+IHtcbiAgICAgICAgICAgIGRldmljZXMgPSBkZXZpY2VzLmZpbHRlcihkID0+IGQua2luZCA9PT0gJ3ZpZGVvaW5wdXQnKTtcbiAgICAgICAgICAgIGxldCBkZXYgPSBkZXZpY2VzLmZpbmQoZCA9PiBtYXRjaGVzLnNvbWUobWF0Y2ggPT5cbiAgICAgICAgICAgICAgZC5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG1hdGNoKSkpO1xuICAgICAgICAgICAgaWYgKCFkZXYgJiYgZGV2aWNlcy5sZW5ndGggJiYgbWF0Y2hlcy5pbmNsdWRlcygnYmFjaycpKSB7XG4gICAgICAgICAgICAgIGRldiA9IGRldmljZXNbZGV2aWNlcy5sZW5ndGggLSAxXTsgLy8gbW9yZSBsaWtlbHkgdGhlIGJhY2sgY2FtXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGV2KSB7XG4gICAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmRldmljZUlkID0gZmFjZS5leGFjdCA/IHtleGFjdDogZGV2LmRldmljZUlkfSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpZGVhbDogZGV2LmRldmljZUlkfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pO1xuICAgICAgICAgICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7XG4gICAgfVxuICAgIGxvZ2dpbmcoJ2Nocm9tZTogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICB9O1xuXG4gIGNvbnN0IHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjQpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZToge1xuICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBQZXJtaXNzaW9uRGlzbWlzc2VkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBJbnZhbGlkU3RhdGVFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIERldmljZXNOb3RGb3VuZEVycm9yOiAnTm90Rm91bmRFcnJvcicsXG4gICAgICAgIENvbnN0cmFpbnROb3RTYXRpc2ZpZWRFcnJvcjogJ092ZXJjb25zdHJhaW5lZEVycm9yJyxcbiAgICAgICAgVHJhY2tTdGFydEVycm9yOiAnTm90UmVhZGFibGVFcnJvcicsXG4gICAgICAgIE1lZGlhRGV2aWNlRmFpbGVkRHVlVG9TaHV0ZG93bjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIE1lZGlhRGV2aWNlS2lsbFN3aXRjaE9uOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgVGFiQ2FwdHVyZUVycm9yOiAnQWJvcnRFcnJvcicsXG4gICAgICAgIFNjcmVlbkNhcHR1cmVFcnJvcjogJ0Fib3J0RXJyb3InLFxuICAgICAgICBEZXZpY2VDYXB0dXJlRXJyb3I6ICdBYm9ydEVycm9yJ1xuICAgICAgfVtlLm5hbWVdIHx8IGUubmFtZSxcbiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCB8fCBlLmNvbnN0cmFpbnROYW1lLFxuICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgZ2V0VXNlck1lZGlhXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICBzaGltQ29uc3RyYWludHNfKGNvbnN0cmFpbnRzLCBjID0+IHtcbiAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEoYywgb25TdWNjZXNzLCBlID0+IHtcbiAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICBvbkVycm9yKHNoaW1FcnJvcl8oZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV8uYmluZChuYXZpZ2F0b3IpO1xuXG4gIC8vIEV2ZW4gdGhvdWdoIENocm9tZSA0NSBoYXMgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBhbmQgYSBnZXRVc2VyTWVkaWFcbiAgLy8gZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UsIGl0IGRvZXMgbm90IGFjY2VwdCBzcGVjLXN0eWxlXG4gIC8vIGNvbnN0cmFpbnRzLlxuICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICBjb25zdCBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuXG4gICAgICAgIGJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjcykge1xuICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGMgPT4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKHN0cmVhbSA9PiB7XG4gICAgICAgIGlmIChjLmF1ZGlvICYmICFzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggfHxcbiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCcnLCAnTm90Rm91bmRFcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICB9LCBlID0+IFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpKSk7XG4gICAgfTtcbiAgfVxufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFNEUFV0aWxzIGZyb20gJ3NkcCc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93KSB7XG4gIC8vIGZvdW5kYXRpb24gaXMgYXJiaXRyYXJpbHkgY2hvc2VuIGFzIGFuIGluZGljYXRvciBmb3IgZnVsbCBzdXBwb3J0IGZvclxuICAvLyBodHRwczovL3czYy5naXRodWIuaW8vd2VicnRjLXBjLyNydGNpY2VjYW5kaWRhdGUtaW50ZXJmYWNlXG4gIGlmICghd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSB8fCAod2luZG93LlJUQ0ljZUNhbmRpZGF0ZSAmJiAnZm91bmRhdGlvbicgaW5cbiAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IE5hdGl2ZVJUQ0ljZUNhbmRpZGF0ZSA9IHdpbmRvdy5SVENJY2VDYW5kaWRhdGU7XG4gIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbiBSVENJY2VDYW5kaWRhdGUoYXJncykge1xuICAgIC8vIFJlbW92ZSB0aGUgYT0gd2hpY2ggc2hvdWxkbid0IGJlIHBhcnQgb2YgdGhlIGNhbmRpZGF0ZSBzdHJpbmcuXG4gICAgaWYgKHR5cGVvZiBhcmdzID09PSAnb2JqZWN0JyAmJiBhcmdzLmNhbmRpZGF0ZSAmJlxuICAgICAgICBhcmdzLmNhbmRpZGF0ZS5pbmRleE9mKCdhPScpID09PSAwKSB7XG4gICAgICBhcmdzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcmdzKSk7XG4gICAgICBhcmdzLmNhbmRpZGF0ZSA9IGFyZ3MuY2FuZGlkYXRlLnN1YnN0cigyKTtcbiAgICB9XG5cbiAgICBpZiAoYXJncy5jYW5kaWRhdGUgJiYgYXJncy5jYW5kaWRhdGUubGVuZ3RoKSB7XG4gICAgICAvLyBBdWdtZW50IHRoZSBuYXRpdmUgY2FuZGlkYXRlIHdpdGggdGhlIHBhcnNlZCBmaWVsZHMuXG4gICAgICBjb25zdCBuYXRpdmVDYW5kaWRhdGUgPSBuZXcgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpO1xuICAgICAgY29uc3QgcGFyc2VkQ2FuZGlkYXRlID0gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoYXJncy5jYW5kaWRhdGUpO1xuICAgICAgY29uc3QgYXVnbWVudGVkQ2FuZGlkYXRlID0gT2JqZWN0LmFzc2lnbihuYXRpdmVDYW5kaWRhdGUsXG4gICAgICAgICAgcGFyc2VkQ2FuZGlkYXRlKTtcblxuICAgICAgLy8gQWRkIGEgc2VyaWFsaXplciB0aGF0IGRvZXMgbm90IHNlcmlhbGl6ZSB0aGUgZXh0cmEgYXR0cmlidXRlcy5cbiAgICAgIGF1Z21lbnRlZENhbmRpZGF0ZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2FuZGlkYXRlOiBhdWdtZW50ZWRDYW5kaWRhdGUuY2FuZGlkYXRlLFxuICAgICAgICAgIHNkcE1pZDogYXVnbWVudGVkQ2FuZGlkYXRlLnNkcE1pZCxcbiAgICAgICAgICBzZHBNTGluZUluZGV4OiBhdWdtZW50ZWRDYW5kaWRhdGUuc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICB1c2VybmFtZUZyYWdtZW50OiBhdWdtZW50ZWRDYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gYXVnbWVudGVkQ2FuZGlkYXRlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IE5hdGl2ZVJUQ0ljZUNhbmRpZGF0ZShhcmdzKTtcbiAgfTtcbiAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUgPSBOYXRpdmVSVENJY2VDYW5kaWRhdGUucHJvdG90eXBlO1xuXG4gIC8vIEhvb2sgdXAgdGhlIGF1Z21lbnRlZCBjYW5kaWRhdGUgaW4gb25pY2VjYW5kaWRhdGUgYW5kXG4gIC8vIGFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIC4uLilcbiAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAnaWNlY2FuZGlkYXRlJywgZSA9PiB7XG4gICAgaWYgKGUuY2FuZGlkYXRlKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgJ2NhbmRpZGF0ZScsIHtcbiAgICAgICAgdmFsdWU6IG5ldyB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKSxcbiAgICAgICAgd3JpdGFibGU6ICdmYWxzZSdcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltTWF4TWVzc2FnZVNpemUod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghKCdzY3RwJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnc2N0cCcsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLl9zY3RwID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiB0aGlzLl9zY3RwO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgc2N0cEluRGVzY3JpcHRpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIGlmICghZGVzY3JpcHRpb24gfHwgIWRlc2NyaXB0aW9uLnNkcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTtcbiAgICBzZWN0aW9ucy5zaGlmdCgpO1xuICAgIHJldHVybiBzZWN0aW9ucy5zb21lKG1lZGlhU2VjdGlvbiA9PiB7XG4gICAgICBjb25zdCBtTGluZSA9IFNEUFV0aWxzLnBhcnNlTUxpbmUobWVkaWFTZWN0aW9uKTtcbiAgICAgIHJldHVybiBtTGluZSAmJiBtTGluZS5raW5kID09PSAnYXBwbGljYXRpb24nXG4gICAgICAgICAgJiYgbUxpbmUucHJvdG9jb2wuaW5kZXhPZignU0NUUCcpICE9PSAtMTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRSZW1vdGVGaXJlZm94VmVyc2lvbiA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgLy8gVE9ETzogSXMgdGhlcmUgYSBiZXR0ZXIgc29sdXRpb24gZm9yIGRldGVjdGluZyBGaXJlZm94P1xuICAgIGNvbnN0IG1hdGNoID0gZGVzY3JpcHRpb24uc2RwLm1hdGNoKC9tb3ppbGxhLi4uVEhJU19JU19TRFBBUlRBLShcXGQrKS8pO1xuICAgIGlmIChtYXRjaCA9PT0gbnVsbCB8fCBtYXRjaC5sZW5ndGggPCAyKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGNvbnN0IHZlcnNpb24gPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgIC8vIFRlc3QgZm9yIE5hTiAoeWVzLCB0aGlzIGlzIHVnbHkpXG4gICAgcmV0dXJuIHZlcnNpb24gIT09IHZlcnNpb24gPyAtMSA6IHZlcnNpb247XG4gIH07XG5cbiAgY29uc3QgZ2V0Q2FuU2VuZE1heE1lc3NhZ2VTaXplID0gZnVuY3Rpb24ocmVtb3RlSXNGaXJlZm94KSB7XG4gICAgLy8gRXZlcnkgaW1wbGVtZW50YXRpb24gd2Uga25vdyBjYW4gc2VuZCBhdCBsZWFzdCA2NCBLaUIuXG4gICAgLy8gTm90ZTogQWx0aG91Z2ggQ2hyb21lIGlzIHRlY2huaWNhbGx5IGFibGUgdG8gc2VuZCB1cCB0byAyNTYgS2lCLCB0aGVcbiAgICAvLyAgICAgICBkYXRhIGRvZXMgbm90IHJlYWNoIHRoZSBvdGhlciBwZWVyIHJlbGlhYmx5LlxuICAgIC8vICAgICAgIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTg0MTlcbiAgICBsZXQgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gNjU1MzY7XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94Jykge1xuICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1Nykge1xuICAgICAgICBpZiAocmVtb3RlSXNGaXJlZm94ID09PSAtMSkge1xuICAgICAgICAgIC8vIEZGIDwgNTcgd2lsbCBzZW5kIGluIDE2IEtpQiBjaHVua3MgdXNpbmcgdGhlIGRlcHJlY2F0ZWQgUFBJRFxuICAgICAgICAgIC8vIGZyYWdtZW50YXRpb24uXG4gICAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMTYzODQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSG93ZXZlciwgb3RoZXIgRkYgKGFuZCBSQVdSVEMpIGNhbiByZWFzc2VtYmxlIFBQSUQtZnJhZ21lbnRlZFxuICAgICAgICAgIC8vIG1lc3NhZ2VzLiBUaHVzLCBzdXBwb3J0aW5nIH4yIEdpQiB3aGVuIHNlbmRpbmcuXG4gICAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNjApIHtcbiAgICAgICAgLy8gQ3VycmVudGx5LCBhbGwgRkYgPj0gNTcgd2lsbCByZXNldCB0aGUgcmVtb3RlIG1heGltdW0gbWVzc2FnZSBzaXplXG4gICAgICAgIC8vIHRvIHRoZSBkZWZhdWx0IHZhbHVlIHdoZW4gYSBkYXRhIGNoYW5uZWwgaXMgY3JlYXRlZCBhdCBhIGxhdGVyXG4gICAgICAgIC8vIHN0YWdlLiA6KFxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjY4MzFcbiAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID1cbiAgICAgICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSA1NyA/IDY1NTM1IDogNjU1MzY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGRiA+PSA2MCBzdXBwb3J0cyBzZW5kaW5nIH4yIEdpQlxuICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPSAyMTQ3NDgzNjM3O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FuU2VuZE1heE1lc3NhZ2VTaXplO1xuICB9O1xuXG4gIGNvbnN0IGdldE1heE1lc3NhZ2VTaXplID0gZnVuY3Rpb24oZGVzY3JpcHRpb24sIHJlbW90ZUlzRmlyZWZveCkge1xuICAgIC8vIE5vdGU6IDY1NTM2IGJ5dGVzIGlzIHRoZSBkZWZhdWx0IHZhbHVlIGZyb20gdGhlIFNEUCBzcGVjLiBBbHNvLFxuICAgIC8vICAgICAgIGV2ZXJ5IGltcGxlbWVudGF0aW9uIHdlIGtub3cgc3VwcG9ydHMgcmVjZWl2aW5nIDY1NTM2IGJ5dGVzLlxuICAgIGxldCBtYXhNZXNzYWdlU2l6ZSA9IDY1NTM2O1xuXG4gICAgLy8gRkYgNTcgaGFzIGEgc2xpZ2h0bHkgaW5jb3JyZWN0IGRlZmF1bHQgcmVtb3RlIG1heCBtZXNzYWdlIHNpemUsIHNvXG4gICAgLy8gd2UgbmVlZCB0byBhZGp1c3QgaXQgaGVyZSB0byBhdm9pZCBhIGZhaWx1cmUgd2hlbiBzZW5kaW5nLlxuICAgIC8vIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNTY5N1xuICAgIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCdcbiAgICAgICAgICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPT09IDU3KSB7XG4gICAgICBtYXhNZXNzYWdlU2l6ZSA9IDY1NTM1O1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoZGVzY3JpcHRpb24uc2RwLFxuICAgICAgJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonKTtcbiAgICBpZiAobWF0Y2gubGVuZ3RoID4gMCkge1xuICAgICAgbWF4TWVzc2FnZVNpemUgPSBwYXJzZUludChtYXRjaFswXS5zdWJzdHIoMTkpLCAxMCk7XG4gICAgfSBlbHNlIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcgJiZcbiAgICAgICAgICAgICAgICByZW1vdGVJc0ZpcmVmb3ggIT09IC0xKSB7XG4gICAgICAvLyBJZiB0aGUgbWF4aW11bSBtZXNzYWdlIHNpemUgaXMgbm90IHByZXNlbnQgaW4gdGhlIHJlbW90ZSBTRFAgYW5kXG4gICAgICAvLyBib3RoIGxvY2FsIGFuZCByZW1vdGUgYXJlIEZpcmVmb3gsIHRoZSByZW1vdGUgcGVlciBjYW4gcmVjZWl2ZVxuICAgICAgLy8gfjIgR2lCLlxuICAgICAgbWF4TWVzc2FnZVNpemUgPSAyMTQ3NDgzNjM3O1xuICAgIH1cbiAgICByZXR1cm4gbWF4TWVzc2FnZVNpemU7XG4gIH07XG5cbiAgY29uc3Qgb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKCkge1xuICAgICAgdGhpcy5fc2N0cCA9IG51bGw7XG4gICAgICAvLyBDaHJvbWUgZGVjaWRlZCB0byBub3QgZXhwb3NlIC5zY3RwIGluIHBsYW4tYiBtb2RlLlxuICAgICAgLy8gQXMgdXN1YWwsIGFkYXB0ZXIuanMgaGFzIHRvIGRvIGFuICd1Z2x5IHdvcmFrYXJvdW5kJ1xuICAgICAgLy8gdG8gY292ZXIgdXAgdGhlIG1lc3MuXG4gICAgICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2Nocm9tZScgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA3Nikge1xuICAgICAgICBjb25zdCB7c2RwU2VtYW50aWNzfSA9IHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgICAgICBpZiAoc2RwU2VtYW50aWNzID09PSAncGxhbi1iJykge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc2N0cCcsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLl9zY3RwID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiB0aGlzLl9zY3RwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNjdHBJbkRlc2NyaXB0aW9uKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJlbW90ZSBpcyBGRi5cbiAgICAgICAgY29uc3QgaXNGaXJlZm94ID0gZ2V0UmVtb3RlRmlyZWZveFZlcnNpb24oYXJndW1lbnRzWzBdKTtcblxuICAgICAgICAvLyBHZXQgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIHRoZSBsb2NhbCBwZWVyIGlzIGNhcGFibGUgb2Ygc2VuZGluZ1xuICAgICAgICBjb25zdCBjYW5TZW5kTU1TID0gZ2V0Q2FuU2VuZE1heE1lc3NhZ2VTaXplKGlzRmlyZWZveCk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZSBvZiB0aGUgcmVtb3RlIHBlZXIuXG4gICAgICAgIGNvbnN0IHJlbW90ZU1NUyA9IGdldE1heE1lc3NhZ2VTaXplKGFyZ3VtZW50c1swXSwgaXNGaXJlZm94KTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgZmluYWwgbWF4aW11bSBtZXNzYWdlIHNpemVcbiAgICAgICAgbGV0IG1heE1lc3NhZ2VTaXplO1xuICAgICAgICBpZiAoY2FuU2VuZE1NUyA9PT0gMCAmJiByZW1vdGVNTVMgPT09IDApIHtcbiAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgfSBlbHNlIGlmIChjYW5TZW5kTU1TID09PSAwIHx8IHJlbW90ZU1NUyA9PT0gMCkge1xuICAgICAgICAgIG1heE1lc3NhZ2VTaXplID0gTWF0aC5tYXgoY2FuU2VuZE1NUywgcmVtb3RlTU1TKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE1hdGgubWluKGNhblNlbmRNTVMsIHJlbW90ZU1NUyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYSBkdW1teSBSVENTY3RwVHJhbnNwb3J0IG9iamVjdCBhbmQgdGhlICdtYXhNZXNzYWdlU2l6ZSdcbiAgICAgICAgLy8gYXR0cmlidXRlLlxuICAgICAgICBjb25zdCBzY3RwID0ge307XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzY3RwLCAnbWF4TWVzc2FnZVNpemUnLCB7XG4gICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIG1heE1lc3NhZ2VTaXplO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NjdHAgPSBzY3RwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1TZW5kVGhyb3dUeXBlRXJyb3Iod2luZG93KSB7XG4gIGlmICghKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgJ2NyZWF0ZURhdGFDaGFubmVsJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIE5vdGU6IEFsdGhvdWdoIEZpcmVmb3ggPj0gNTcgaGFzIGEgbmF0aXZlIGltcGxlbWVudGF0aW9uLCB0aGUgbWF4aW11bVxuICAvLyAgICAgICBtZXNzYWdlIHNpemUgY2FuIGJlIHJlc2V0IGZvciBhbGwgZGF0YSBjaGFubmVscyBhdCBhIGxhdGVyIHN0YWdlLlxuICAvLyAgICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjY4MzFcblxuICBmdW5jdGlvbiB3cmFwRGNTZW5kKGRjLCBwYykge1xuICAgIGNvbnN0IG9yaWdEYXRhQ2hhbm5lbFNlbmQgPSBkYy5zZW5kO1xuICAgIGRjLnNlbmQgPSBmdW5jdGlvbiBzZW5kKCkge1xuICAgICAgY29uc3QgZGF0YSA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGRhdGEubGVuZ3RoIHx8IGRhdGEuc2l6ZSB8fCBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICBpZiAoZGMucmVhZHlTdGF0ZSA9PT0gJ29wZW4nICYmXG4gICAgICAgICAgcGMuc2N0cCAmJiBsZW5ndGggPiBwYy5zY3RwLm1heE1lc3NhZ2VTaXplKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ01lc3NhZ2UgdG9vIGxhcmdlIChjYW4gc2VuZCBhIG1heGltdW0gb2YgJyArXG4gICAgICAgICAgcGMuc2N0cC5tYXhNZXNzYWdlU2l6ZSArICcgYnl0ZXMpJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ0RhdGFDaGFubmVsU2VuZC5hcHBseShkYywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG4gIGNvbnN0IG9yaWdDcmVhdGVEYXRhQ2hhbm5lbCA9XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbCA9XG4gICAgZnVuY3Rpb24gY3JlYXRlRGF0YUNoYW5uZWwoKSB7XG4gICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IG9yaWdDcmVhdGVEYXRhQ2hhbm5lbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgd3JhcERjU2VuZChkYXRhQ2hhbm5lbCwgdGhpcyk7XG4gICAgICByZXR1cm4gZGF0YUNoYW5uZWw7XG4gICAgfTtcbiAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAnZGF0YWNoYW5uZWwnLCBlID0+IHtcbiAgICB3cmFwRGNTZW5kKGUuY2hhbm5lbCwgZS50YXJnZXQpO1xuICAgIHJldHVybiBlO1xuICB9KTtcbn1cblxuXG4vKiBzaGltcyBSVENDb25uZWN0aW9uU3RhdGUgYnkgcHJldGVuZGluZyBpdCBpcyB0aGUgc2FtZSBhcyBpY2VDb25uZWN0aW9uU3RhdGUuXG4gKiBTZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTYxNDUjYzEyXG4gKiBmb3Igd2h5IHRoaXMgaXMgYSB2YWxpZCBoYWNrIGluIENocm9tZS4gSW4gRmlyZWZveCBpdCBpcyBzbGlnaHRseSBpbmNvcnJlY3RcbiAqIHNpbmNlIERUTFMgZmFpbHVyZXMgd291bGQgYmUgaGlkZGVuLiBTZWVcbiAqIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEyNjU4MjdcbiAqIGZvciB0aGUgRmlyZWZveCB0cmFja2luZyBidWcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ29ubmVjdGlvblN0YXRlKHdpbmRvdykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgJ2Nvbm5lY3Rpb25TdGF0ZScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwcm90byA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ2Nvbm5lY3Rpb25TdGF0ZScsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb21wbGV0ZWQ6ICdjb25uZWN0ZWQnLFxuICAgICAgICBjaGVja2luZzogJ2Nvbm5lY3RpbmcnXG4gICAgICB9W3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlXSB8fCB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZTtcbiAgICB9LFxuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgfHwgbnVsbDtcbiAgICB9LFxuICAgIHNldChjYikge1xuICAgICAgaWYgKHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29ubmVjdGlvbnN0YXRlY2hhbmdlJyxcbiAgICAgICAgICAgIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlO1xuICAgICAgfVxuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY29ubmVjdGlvbnN0YXRlY2hhbmdlJyxcbiAgICAgICAgICAgIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gY2IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG5cbiAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJ10uZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gICAgY29uc3Qgb3JpZ01ldGhvZCA9IHByb3RvW21ldGhvZF07XG4gICAgcHJvdG9bbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5KSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkgPSBlID0+IHtcbiAgICAgICAgICBjb25zdCBwYyA9IGUudGFyZ2V0O1xuICAgICAgICAgIGlmIChwYy5fbGFzdENvbm5lY3Rpb25TdGF0ZSAhPT0gcGMuY29ubmVjdGlvblN0YXRlKSB7XG4gICAgICAgICAgICBwYy5fbGFzdENvbm5lY3Rpb25TdGF0ZSA9IHBjLmNvbm5lY3Rpb25TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IEV2ZW50KCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBlKTtcbiAgICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLFxuICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4dG1hcEFsbG93TWl4ZWQod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICAvKiByZW1vdmUgYT1leHRtYXAtYWxsb3ctbWl4ZWQgZm9yIHdlYnJ0Yy5vcmcgPCBNNzEgKi9cbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNzEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdzYWZhcmknICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjA1KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG5hdGl2ZVNSRCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbihkZXNjKSB7XG4gICAgaWYgKGRlc2MgJiYgZGVzYy5zZHAgJiYgZGVzYy5zZHAuaW5kZXhPZignXFxuYT1leHRtYXAtYWxsb3ctbWl4ZWQnKSAhPT0gLTEpIHtcbiAgICAgIGNvbnN0IHNkcCA9IGRlc2Muc2RwLnNwbGl0KCdcXG4nKS5maWx0ZXIoKGxpbmUpID0+IHtcbiAgICAgICAgcmV0dXJuIGxpbmUudHJpbSgpICE9PSAnYT1leHRtYXAtYWxsb3ctbWl4ZWQnO1xuICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAvLyBTYWZhcmkgZW5mb3JjZXMgcmVhZC1vbmx5LW5lc3Mgb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uIGZpZWxkcy5cbiAgICAgIGlmICh3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uICYmXG4gICAgICAgICAgZGVzYyBpbnN0YW5jZW9mIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pIHtcbiAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgICAgIHR5cGU6IGRlc2MudHlwZSxcbiAgICAgICAgICBzZHAsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVzYy5zZHAgPSBzZHA7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuYXRpdmVTUkQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIC8vIFN1cHBvcnQgZm9yIGFkZEljZUNhbmRpZGF0ZShudWxsIG9yIHVuZGVmaW5lZClcbiAgLy8gYXMgd2VsbCBhcyBhZGRJY2VDYW5kaWRhdGUoe2NhbmRpZGF0ZTogXCJcIiwgLi4ufSlcbiAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9OTc4NTgyXG4gIC8vIE5vdGU6IG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBwb2x5ZmlsbHMgd2hpY2ggY2hhbmdlIHRoZSBzaWduYXR1cmUuXG4gIGlmICghKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuYXRpdmVBZGRJY2VDYW5kaWRhdGUgPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7XG4gIGlmICghbmF0aXZlQWRkSWNlQ2FuZGlkYXRlIHx8IG5hdGl2ZUFkZEljZUNhbmRpZGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPVxuICAgIGZ1bmN0aW9uIGFkZEljZUNhbmRpZGF0ZSgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzWzBdKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHtcbiAgICAgICAgICBhcmd1bWVudHNbMV0uYXBwbHkobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgLy8gRmlyZWZveCA2OCsgZW1pdHMgYW5kIHByb2Nlc3NlcyB7Y2FuZGlkYXRlOiBcIlwiLCAuLi59LCBpZ25vcmVcbiAgICAgIC8vIGluIG9sZGVyIHZlcnNpb25zLlxuICAgICAgLy8gTmF0aXZlIHN1cHBvcnQgZm9yIGlnbm9yaW5nIGV4aXN0cyBmb3IgQ2hyb21lIE03NysuXG4gICAgICAvLyBTYWZhcmkgaWdub3JlcyBhcyB3ZWxsLCBleGFjdCB2ZXJzaW9uIHVua25vd24gYnV0IHdvcmtzIGluIHRoZSBzYW1lXG4gICAgICAvLyB2ZXJzaW9uIHRoYXQgYWxzbyBpZ25vcmVzIGFkZEljZUNhbmRpZGF0ZShudWxsKS5cbiAgICAgIGlmICgoKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA3OClcbiAgICAgICAgICAgfHwgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94J1xuICAgICAgICAgICAgICAgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDY4KVxuICAgICAgICAgICB8fCAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ3NhZmFyaScpKVxuICAgICAgICAgICYmIGFyZ3VtZW50c1swXSAmJiBhcmd1bWVudHNbMF0uY2FuZGlkYXRlID09PSAnJykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLy8gTm90ZTogTWFrZSBzdXJlIHRvIGNhbGwgdGhpcyBhaGVhZCBvZiBBUElzIHRoYXQgbW9kaWZ5XG4vLyBzZXRMb2NhbERlc2NyaXB0aW9uLmxlbmd0aFxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QYXJhbWV0ZXJsZXNzU2V0TG9jYWxEZXNjcmlwdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICghKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuYXRpdmVTZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtcbiAgaWYgKCFuYXRpdmVTZXRMb2NhbERlc2NyaXB0aW9uIHx8IG5hdGl2ZVNldExvY2FsRGVzY3JpcHRpb24ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9XG4gICAgZnVuY3Rpb24gc2V0TG9jYWxEZXNjcmlwdGlvbigpIHtcbiAgICAgIGxldCBkZXNjID0gYXJndW1lbnRzWzBdIHx8IHt9O1xuICAgICAgaWYgKHR5cGVvZiBkZXNjICE9PSAnb2JqZWN0JyB8fCAoZGVzYy50eXBlICYmIGRlc2Muc2RwKSkge1xuICAgICAgICByZXR1cm4gbmF0aXZlU2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgLy8gVGhlIHJlbWFpbmluZyBzdGVwcyBzaG91bGQgdGVjaG5pY2FsbHkgaGFwcGVuIHdoZW4gU0xEIGNvbWVzIG9mZiB0aGVcbiAgICAgIC8vIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgb3BlcmF0aW9ucyBjaGFpbiAobm90IGFoZWFkIG9mIGdvaW5nIG9uIGl0KSwgYnV0XG4gICAgICAvLyB0aGlzIGlzIHRvbyBkaWZmaWN1bHQgdG8gc2hpbS4gSW5zdGVhZCwgdGhpcyBzaGltIG9ubHkgY292ZXJzIHRoZVxuICAgICAgLy8gY29tbW9uIGNhc2Ugd2hlcmUgdGhlIG9wZXJhdGlvbnMgY2hhaW4gaXMgZW1wdHkuIFRoaXMgaXMgaW1wZXJmZWN0LCBidXRcbiAgICAgIC8vIHNob3VsZCBjb3ZlciBtYW55IGNhc2VzLiBSYXRpb25hbGU6IEV2ZW4gaWYgd2UgY2FuJ3QgcmVkdWNlIHRoZSBnbGFyZVxuICAgICAgLy8gd2luZG93IHRvIHplcm8gb24gaW1wZXJmZWN0IGltcGxlbWVudGF0aW9ucywgdGhlcmUncyB2YWx1ZSBpbiB0YXBwaW5nXG4gICAgICAvLyBpbnRvIHRoZSBwZXJmZWN0IG5lZ290aWF0aW9uIHBhdHRlcm4gdGhhdCBzZXZlcmFsIGJyb3dzZXJzIHN1cHBvcnQuXG4gICAgICBkZXNjID0ge3R5cGU6IGRlc2MudHlwZSwgc2RwOiBkZXNjLnNkcH07XG4gICAgICBpZiAoIWRlc2MudHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbmFsaW5nU3RhdGUpIHtcbiAgICAgICAgICBjYXNlICdzdGFibGUnOlxuICAgICAgICAgIGNhc2UgJ2hhdmUtbG9jYWwtb2ZmZXInOlxuICAgICAgICAgIGNhc2UgJ2hhdmUtcmVtb3RlLXByYW5zd2VyJzpcbiAgICAgICAgICAgIGRlc2MudHlwZSA9ICdvZmZlcic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZGVzYy50eXBlID0gJ2Fuc3dlcic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlc2Muc2RwIHx8IChkZXNjLnR5cGUgIT09ICdvZmZlcicgJiYgZGVzYy50eXBlICE9PSAnYW5zd2VyJykpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZVNldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NdKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZ1bmMgPSBkZXNjLnR5cGUgPT09ICdvZmZlcicgPyB0aGlzLmNyZWF0ZU9mZmVyIDogdGhpcy5jcmVhdGVBbnN3ZXI7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzKVxuICAgICAgICAudGhlbihkID0+IG5hdGl2ZVNldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2RdKSk7XG4gICAgfTtcbn1cbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmV4cG9ydCB7c2hpbUdldFVzZXJNZWRpYX0gZnJvbSAnLi9nZXR1c2VybWVkaWEnO1xuZXhwb3J0IHtzaGltR2V0RGlzcGxheU1lZGlhfSBmcm9tICcuL2dldGRpc3BsYXltZWRpYSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltT25UcmFjayh3aW5kb3cpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENUcmFja0V2ZW50ICYmXG4gICAgICAoJ3JlY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpICYmXG4gICAgICAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsICd0cmFuc2NlaXZlcicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHtyZWNlaXZlcjogdGhpcy5yZWNlaXZlcn07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fFxuICAgICAgISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgIHJldHVybjsgLy8gcHJvYmFibHkgbWVkaWEucGVlcmNvbm5lY3Rpb24uZW5hYmxlZD1mYWxzZSBpbiBhYm91dDpjb25maWdcbiAgfVxuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAvLyB2ZXJ5IGJhc2ljIHN1cHBvcnQgZm9yIG9sZCB2ZXJzaW9ucy5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb247XG4gIH1cblxuICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzKSB7XG4gICAgLy8gc2hpbSBhd2F5IG5lZWQgZm9yIG9ic29sZXRlIFJUQ0ljZUNhbmRpZGF0ZS9SVENTZXNzaW9uRGVzY3JpcHRpb24uXG4gICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBuZXcgKChtZXRob2QgPT09ICdhZGRJY2VDYW5kaWRhdGUnKSA/XG4gICAgICAgICAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA6XG4gICAgICAgICAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9fTtcbiAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBtZXRob2RPYmpbbWV0aG9kXTtcbiAgICAgICAgfSk7XG4gIH1cblxuICBjb25zdCBtb2Rlcm5TdGF0c1R5cGVzID0ge1xuICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsXG4gICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLFxuICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsXG4gICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLFxuICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gIH07XG5cbiAgY29uc3QgbmF0aXZlR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgY29uc3QgW3NlbGVjdG9yLCBvblN1Y2MsIG9uRXJyXSA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmF0aXZlR2V0U3RhdHMuYXBwbHkodGhpcywgW3NlbGVjdG9yIHx8IG51bGxdKVxuICAgICAgLnRoZW4oc3RhdHMgPT4ge1xuICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzICYmICFvblN1Y2MpIHtcbiAgICAgICAgICAvLyBTaGltIG9ubHkgcHJvbWlzZSBnZXRTdGF0cyB3aXRoIHNwZWMtaHlwaGVucyBpbiB0eXBlIG5hbWVzXG4gICAgICAgICAgLy8gTGVhdmUgY2FsbGJhY2sgdmVyc2lvbiBhbG9uZTsgbWlzYyBvbGQgdXNlcyBvZiBmb3JFYWNoIGJlZm9yZSBNYXBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgICAgICAgICAgc3RhdC50eXBlID0gbW9kZXJuU3RhdHNUeXBlc1tzdGF0LnR5cGVdIHx8IHN0YXQudHlwZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm5hbWUgIT09ICdUeXBlRXJyb3InKSB7XG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBdm9pZCBUeXBlRXJyb3I6IFwidHlwZVwiIGlzIHJlYWQtb25seSwgaW4gb2xkIHZlcnNpb25zLiAzNC00M2lzaFxuICAgICAgICAgICAgc3RhdHMuZm9yRWFjaCgoc3RhdCwgaSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0cy5zZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgc3RhdCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGVcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0cztcbiAgICAgIH0pXG4gICAgICAudGhlbihvblN1Y2MsIG9uRXJyKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1TZW5kZXJHZXRTdGF0cyh3aW5kb3cpIHtcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJiAnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdHZXRTZW5kZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO1xuICBpZiAob3JpZ0dldFNlbmRlcnMpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgY29uc3Qgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgIHNlbmRlcnMuZm9yRWFjaChzZW5kZXIgPT4gc2VuZGVyLl9wYyA9IHRoaXMpO1xuICAgICAgcmV0dXJuIHNlbmRlcnM7XG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IG9yaWdBZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7XG4gIGlmIChvcmlnQWRkVHJhY2spIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2soKSB7XG4gICAgICBjb25zdCBzZW5kZXIgPSBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHNlbmRlci5fcGMgPSB0aGlzO1xuICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICB9O1xuICB9XG4gIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sgPyB0aGlzLl9wYy5nZXRTdGF0cyh0aGlzLnRyYWNrKSA6XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShuZXcgTWFwKCkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJlY2VpdmVyR2V0U3RhdHMod2luZG93KSB7XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgd2luZG93LlJUQ1J0cFNlbmRlcikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdHZXRSZWNlaXZlcnMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycztcbiAgaWYgKG9yaWdHZXRSZWNlaXZlcnMpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycyA9IGZ1bmN0aW9uIGdldFJlY2VpdmVycygpIHtcbiAgICAgIGNvbnN0IHJlY2VpdmVycyA9IG9yaWdHZXRSZWNlaXZlcnMuYXBwbHkodGhpcywgW10pO1xuICAgICAgcmVjZWl2ZXJzLmZvckVhY2gocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuX3BjID0gdGhpcyk7XG4gICAgICByZXR1cm4gcmVjZWl2ZXJzO1xuICAgIH07XG4gIH1cbiAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAndHJhY2snLCBlID0+IHtcbiAgICBlLnJlY2VpdmVyLl9wYyA9IGUuc3JjRWxlbWVudDtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG4gIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjayk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUmVtb3ZlU3RyZWFtKHdpbmRvdykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgJ3JlbW92ZVN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgdXRpbHMuZGVwcmVjYXRlZCgncmVtb3ZlU3RyZWFtJywgJ3JlbW92ZVRyYWNrJyk7XG4gICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKHNlbmRlciA9PiB7XG4gICAgICAgIGlmIChzZW5kZXIudHJhY2sgJiYgc3RyZWFtLmdldFRyYWNrcygpLmluY2x1ZGVzKHNlbmRlci50cmFjaykpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUlRDRGF0YUNoYW5uZWwod2luZG93KSB7XG4gIC8vIHJlbmFtZSBEYXRhQ2hhbm5lbCB0byBSVENEYXRhQ2hhbm5lbCAobmF0aXZlIGZpeCBpbiBGRjYwKTpcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTE3Mzg1MVxuICBpZiAod2luZG93LkRhdGFDaGFubmVsICYmICF3aW5kb3cuUlRDRGF0YUNoYW5uZWwpIHtcbiAgICB3aW5kb3cuUlRDRGF0YUNoYW5uZWwgPSB3aW5kb3cuRGF0YUNoYW5uZWw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRUcmFuc2NlaXZlcih3aW5kb3cpIHtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnJ0Y0hhY2tzL2FkYXB0ZXIvaXNzdWVzLzk5OCNpc3N1ZWNvbW1lbnQtNTE2OTIxNjQ3XG4gIC8vIEZpcmVmb3ggaWdub3JlcyB0aGUgaW5pdCBzZW5kRW5jb2RpbmdzIG9wdGlvbnMgcGFzc2VkIHRvIGFkZFRyYW5zY2VpdmVyXG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEzOTY5MThcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnQWRkVHJhbnNjZWl2ZXIgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyO1xuICBpZiAob3JpZ0FkZFRyYW5zY2VpdmVyKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlciA9XG4gICAgICBmdW5jdGlvbiBhZGRUcmFuc2NlaXZlcigpIHtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgY29uc3QgaW5pdFBhcmFtZXRlcnMgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGNvbnN0IHNob3VsZFBlcmZvcm1DaGVjayA9IGluaXRQYXJhbWV0ZXJzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NlbmRFbmNvZGluZ3MnIGluIGluaXRQYXJhbWV0ZXJzO1xuICAgICAgICBpZiAoc2hvdWxkUGVyZm9ybUNoZWNrKSB7XG4gICAgICAgICAgLy8gSWYgc2VuZEVuY29kaW5ncyBwYXJhbXMgYXJlIHByb3ZpZGVkLCB2YWxpZGF0ZSBncmFtbWFyXG4gICAgICAgICAgaW5pdFBhcmFtZXRlcnMuc2VuZEVuY29kaW5ncy5mb3JFYWNoKChlbmNvZGluZ1BhcmFtKSA9PiB7XG4gICAgICAgICAgICBpZiAoJ3JpZCcgaW4gZW5jb2RpbmdQYXJhbSkge1xuICAgICAgICAgICAgICBjb25zdCByaWRSZWdleCA9IC9eW2EtejAtOV17MCwxNn0kL2k7XG4gICAgICAgICAgICAgIGlmICghcmlkUmVnZXgudGVzdChlbmNvZGluZ1BhcmFtLnJpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIFJJRCB2YWx1ZSBwcm92aWRlZC4nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdzY2FsZVJlc29sdXRpb25Eb3duQnknIGluIGVuY29kaW5nUGFyYW0pIHtcbiAgICAgICAgICAgICAgaWYgKCEocGFyc2VGbG9hdChlbmNvZGluZ1BhcmFtLnNjYWxlUmVzb2x1dGlvbkRvd25CeSkgPj0gMS4wKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdzY2FsZV9yZXNvbHV0aW9uX2Rvd25fYnkgbXVzdCBiZSA+PSAxLjAnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdtYXhGcmFtZXJhdGUnIGluIGVuY29kaW5nUGFyYW0pIHtcbiAgICAgICAgICAgICAgaWYgKCEocGFyc2VGbG9hdChlbmNvZGluZ1BhcmFtLm1heEZyYW1lcmF0ZSkgPj0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbWF4X2ZyYW1lcmF0ZSBtdXN0IGJlID49IDAuMCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNjZWl2ZXIgPSBvcmlnQWRkVHJhbnNjZWl2ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKHNob3VsZFBlcmZvcm1DaGVjaykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBpbml0IG9wdGlvbnMgd2VyZSBhcHBsaWVkLiBJZiBub3Qgd2UgZG8gdGhpcyBpbiBhblxuICAgICAgICAgIC8vIGFzeW5jaHJvbm91cyB3YXkgYW5kIHNhdmUgdGhlIHByb21pc2UgcmVmZXJlbmNlIGluIGEgZ2xvYmFsIG9iamVjdC5cbiAgICAgICAgICAvLyBUaGlzIGlzIGFuIHVnbHkgaGFjaywgYnV0IGF0IHRoZSBzYW1lIHRpbWUgaXMgd2F5IG1vcmUgcm9idXN0IHRoYW5cbiAgICAgICAgICAvLyBjaGVja2luZyB0aGUgc2VuZGVyIHBhcmFtZXRlcnMgYmVmb3JlIGFuZCBhZnRlciB0aGUgY3JlYXRlT2ZmZXJcbiAgICAgICAgICAvLyBBbHNvIG5vdGUgdGhhdCBhZnRlciB0aGUgY3JlYXRlb2ZmZXIgd2UgYXJlIG5vdCAxMDAlIHN1cmUgdGhhdFxuICAgICAgICAgIC8vIHRoZSBwYXJhbXMgd2VyZSBhc3luY2hyb25vdXNseSBhcHBsaWVkIHNvIHdlIG1pZ2h0IG1pc3MgdGhlXG4gICAgICAgICAgLy8gb3Bwb3J0dW5pdHkgdG8gcmVjcmVhdGUgb2ZmZXIuXG4gICAgICAgICAgY29uc3Qge3NlbmRlcn0gPSB0cmFuc2NlaXZlcjtcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSBzZW5kZXIuZ2V0UGFyYW1ldGVycygpO1xuICAgICAgICAgIGlmICghKCdlbmNvZGluZ3MnIGluIHBhcmFtcykgfHxcbiAgICAgICAgICAgICAgLy8gQXZvaWQgYmVpbmcgZm9vbGVkIGJ5IHBhdGNoZWQgZ2V0UGFyYW1ldGVycygpIGJlbG93LlxuICAgICAgICAgICAgICAocGFyYW1zLmVuY29kaW5ncy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcy5lbmNvZGluZ3NbMF0pLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSBpbml0UGFyYW1ldGVycy5zZW5kRW5jb2RpbmdzO1xuICAgICAgICAgICAgc2VuZGVyLnNlbmRFbmNvZGluZ3MgPSBpbml0UGFyYW1ldGVycy5zZW5kRW5jb2RpbmdzO1xuICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMucHVzaChzZW5kZXIuc2V0UGFyYW1ldGVycyhwYXJhbXMpXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2VuZGVyLnNlbmRFbmNvZGluZ3M7XG4gICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2VuZGVyLnNlbmRFbmNvZGluZ3M7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXI7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0UGFyYW1ldGVycyh3aW5kb3cpIHtcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1J0cFNlbmRlcikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0dldFBhcmFtZXRlcnMgPSB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzO1xuICBpZiAob3JpZ0dldFBhcmFtZXRlcnMpIHtcbiAgICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzID1cbiAgICAgIGZ1bmN0aW9uIGdldFBhcmFtZXRlcnMoKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG9yaWdHZXRQYXJhbWV0ZXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmICghKCdlbmNvZGluZ3MnIGluIHBhcmFtcykpIHtcbiAgICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gW10uY29uY2F0KHRoaXMuc2VuZEVuY29kaW5ncyB8fCBbe31dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNyZWF0ZU9mZmVyKHdpbmRvdykge1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2VicnRjSGFja3MvYWRhcHRlci9pc3N1ZXMvOTk4I2lzc3VlY29tbWVudC01MTY5MjE2NDdcbiAgLy8gRmlyZWZveCBpZ25vcmVzIHRoZSBpbml0IHNlbmRFbmNvZGluZ3Mgb3B0aW9ucyBwYXNzZWQgdG8gYWRkVHJhbnNjZWl2ZXJcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM5NjkxOFxuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdDcmVhdGVPZmZlciA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbiBjcmVhdGVPZmZlcigpIHtcbiAgICBpZiAodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMgJiYgdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzID0gW107XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG9yaWdDcmVhdGVPZmZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNyZWF0ZUFuc3dlcih3aW5kb3cpIHtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnJ0Y0hhY2tzL2FkYXB0ZXIvaXNzdWVzLzk5OCNpc3N1ZWNvbW1lbnQtNTE2OTIxNjQ3XG4gIC8vIEZpcmVmb3ggaWdub3JlcyB0aGUgaW5pdCBzZW5kRW5jb2RpbmdzIG9wdGlvbnMgcGFzc2VkIHRvIGFkZFRyYW5zY2VpdmVyXG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEzOTY5MThcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnQ3JlYXRlQW5zd2VyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyID0gZnVuY3Rpb24gY3JlYXRlQW5zd2VyKCkge1xuICAgIGlmICh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyAmJiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcylcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIG9yaWdDcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzID0gW107XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG9yaWdDcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBhZGFwdGVyLmpzIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldERpc3BsYXlNZWRpYSh3aW5kb3csIHByZWZlcnJlZE1lZGlhU291cmNlKSB7XG4gIGlmICh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICdnZXREaXNwbGF5TWVkaWEnIGluIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEgPVxuICAgIGZ1bmN0aW9uIGdldERpc3BsYXlNZWRpYShjb25zdHJhaW50cykge1xuICAgICAgaWYgKCEoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMudmlkZW8pKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBET01FeGNlcHRpb24oJ2dldERpc3BsYXlNZWRpYSB3aXRob3V0IHZpZGVvICcgK1xuICAgICAgICAgICAgJ2NvbnN0cmFpbnRzIGlzIHVuZGVmaW5lZCcpO1xuICAgICAgICBlcnIubmFtZSA9ICdOb3RGb3VuZEVycm9yJztcbiAgICAgICAgLy8gZnJvbSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNpZGwtRE9NRXhjZXB0aW9uLWVycm9yLW5hbWVzXG4gICAgICAgIGVyci5jb2RlID0gODtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICBpZiAoY29uc3RyYWludHMudmlkZW8gPT09IHRydWUpIHtcbiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSB7bWVkaWFTb3VyY2U6IHByZWZlcnJlZE1lZGlhU291cmNlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLm1lZGlhU291cmNlID0gcHJlZmVycmVkTWVkaWFTb3VyY2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICB9O1xufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFVzZXJNZWRpYSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGNvbnN0IG5hdmlnYXRvciA9IHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yO1xuICBjb25zdCBNZWRpYVN0cmVhbVRyYWNrID0gd2luZG93ICYmIHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrO1xuXG4gIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgLy8gUmVwbGFjZSBGaXJlZm94IDQ0KydzIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2l0aCB1bnByZWZpeGVkIHZlcnNpb24uXG4gICAgdXRpbHMuZGVwcmVjYXRlZCgnbmF2aWdhdG9yLmdldFVzZXJNZWRpYScsXG4gICAgICAgICduYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYScpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH07XG5cbiAgaWYgKCEoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+IDU1ICYmXG4gICAgICAnYXV0b0dhaW5Db250cm9sJyBpbiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkpKSB7XG4gICAgY29uc3QgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgIGlmIChhIGluIG9iaiAmJiAhKGIgaW4gb2JqKSkge1xuICAgICAgICBvYmpbYl0gPSBvYmpbYV07XG4gICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG5hdGl2ZUdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oYykge1xuICAgICAgaWYgKHR5cGVvZiBjID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYy5hdWRpbyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO1xuICAgICAgICByZW1hcChjLmF1ZGlvLCAnYXV0b0dhaW5Db250cm9sJywgJ21vekF1dG9HYWluQ29udHJvbCcpO1xuICAgICAgICByZW1hcChjLmF1ZGlvLCAnbm9pc2VTdXBwcmVzc2lvbicsICdtb3pOb2lzZVN1cHByZXNzaW9uJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlR2V0VXNlck1lZGlhKGMpO1xuICAgIH07XG5cbiAgICBpZiAoTWVkaWFTdHJlYW1UcmFjayAmJiBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5nZXRTZXR0aW5ncykge1xuICAgICAgY29uc3QgbmF0aXZlR2V0U2V0dGluZ3MgPSBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5nZXRTZXR0aW5ncztcbiAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmdldFNldHRpbmdzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IG5hdGl2ZUdldFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJlbWFwKG9iaiwgJ21vekF1dG9HYWluQ29udHJvbCcsICdhdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAob2JqLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicsICdub2lzZVN1cHByZXNzaW9uJyk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChNZWRpYVN0cmVhbVRyYWNrICYmIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUFwcGx5Q29uc3RyYWludHMgPVxuICAgICAgICBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzO1xuICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgaWYgKHRoaXMua2luZCA9PT0gJ2F1ZGlvJyAmJiB0eXBlb2YgYyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjKSk7XG4gICAgICAgICAgcmVtYXAoYywgJ2F1dG9HYWluQ29udHJvbCcsICdtb3pBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgICByZW1hcChjLCAnbm9pc2VTdXBwcmVzc2lvbicsICdtb3pOb2lzZVN1cHByZXNzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5hdGl2ZUFwcGx5Q29uc3RyYWludHMuYXBwbHkodGhpcywgW2NdKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1Mb2NhbFN0cmVhbXNBUEkod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKCdnZXRMb2NhbFN0cmVhbXMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPVxuICAgICAgZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbFN0cmVhbXM7XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdhZGRTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgY29uc3QgX2FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoc3RyZWFtKSkge1xuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgfVxuICAgICAgLy8gVHJ5IHRvIGVtdWxhdGUgQ2hyb21lJ3MgYmVoYXZpb3VyIG9mIGFkZGluZyBpbiBhdWRpby12aWRlbyBvcmRlci5cbiAgICAgIC8vIFNhZmFyaSBvcmRlcnMgYnkgdHJhY2sgaWQuXG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IF9hZGRUcmFjay5jYWxsKHRoaXMsIHRyYWNrLFxuICAgICAgICBzdHJlYW0pKTtcbiAgICAgIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2godHJhY2sgPT4gX2FkZFRyYWNrLmNhbGwodGhpcywgdHJhY2ssXG4gICAgICAgIHN0cmVhbSkpO1xuICAgIH07XG5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCAuLi5zdHJlYW1zKSB7XG4gICAgICAgIGlmIChzdHJlYW1zKSB7XG4gICAgICAgICAgc3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtzdHJlYW1dO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdyZW1vdmVTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgY29uc3QgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKHNlbmRlciA9PiB7XG4gICAgICAgICAgaWYgKHRyYWNrcy5pbmNsdWRlcyhzZW5kZXIudHJhY2spKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZW1vdGVTdHJlYW1zQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISgnZ2V0UmVtb3RlU3RyZWFtcycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgPVxuICAgICAgZnVuY3Rpb24gZ2V0UmVtb3RlU3RyZWFtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbXMgPyB0aGlzLl9yZW1vdGVTdHJlYW1zIDogW107XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdvbmFkZHN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29uYWRkc3RyZWFtJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb25hZGRzdHJlYW07XG4gICAgICB9LFxuICAgICAgc2V0KGYpIHtcbiAgICAgICAgaWYgKHRoaXMuX29uYWRkc3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSA9IGYpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb25hZGRzdHJlYW1wb2x5ID0gKGUpID0+IHtcbiAgICAgICAgICBlLnN0cmVhbXMuZm9yRWFjaChzdHJlYW0gPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1vdGVTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7XG4gICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBjb25zdCBwYyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5fb25hZGRzdHJlYW1wb2x5KSB7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RyZWFtcy5mb3JFYWNoKHN0cmVhbSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcGMuX3JlbW90ZVN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBwYy5fcmVtb3RlU3RyZWFtcyA9IFtdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChwYy5fcmVtb3RlU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYy5fcmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkocGMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ2FsbGJhY2tzQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwcm90b3R5cGUgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICBjb25zdCBvcmlnQ3JlYXRlT2ZmZXIgPSBwcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gIGNvbnN0IG9yaWdDcmVhdGVBbnN3ZXIgPSBwcm90b3R5cGUuY3JlYXRlQW5zd2VyO1xuICBjb25zdCBzZXRMb2NhbERlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb247XG4gIGNvbnN0IHNldFJlbW90ZURlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICBjb25zdCBhZGRJY2VDYW5kaWRhdGUgPSBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuXG4gIHByb3RvdHlwZS5jcmVhdGVPZmZlciA9XG4gICAgZnVuY3Rpb24gY3JlYXRlT2ZmZXIoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gIHByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IChhcmd1bWVudHMubGVuZ3RoID49IDIpID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzBdO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG9yaWdDcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gIGxldCB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gc2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBbZGVzY3JpcHRpb25dKTtcbiAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBwcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9IHdpdGhDYWxsYmFjaztcblxuICB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gc2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NyaXB0aW9uXSk7XG4gICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcbiAgcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0gd2l0aENhbGxiYWNrO1xuXG4gIHdpdGhDYWxsYmFjayA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gYWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIFtjYW5kaWRhdGVdKTtcbiAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gd2l0aENhbGxiYWNrO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICAvLyBzaGltIG5vdCBuZWVkZWQgaW4gU2FmYXJpIDEyLjFcbiAgICBjb25zdCBtZWRpYURldmljZXMgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzO1xuICAgIGNvbnN0IF9nZXRVc2VyTWVkaWEgPSBtZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IChjb25zdHJhaW50cykgPT4ge1xuICAgICAgcmV0dXJuIF9nZXRVc2VyTWVkaWEoc2hpbUNvbnN0cmFpbnRzKGNvbnN0cmFpbnRzKSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghbmF2aWdhdG9yLmdldFVzZXJNZWRpYSAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBjYiwgZXJyY2IpIHtcbiAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgLnRoZW4oY2IsIGVycmNiKTtcbiAgICB9LmJpbmQobmF2aWdhdG9yKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNvbnN0cmFpbnRzKGNvbnN0cmFpbnRzKSB7XG4gIGlmIChjb25zdHJhaW50cyAmJiBjb25zdHJhaW50cy52aWRlbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sXG4gICAgICBjb25zdHJhaW50cyxcbiAgICAgIHt2aWRlbzogdXRpbHMuY29tcGFjdE9iamVjdChjb25zdHJhaW50cy52aWRlbyl9XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjb25zdHJhaW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SVENJY2VTZXJ2ZXJVcmxzKHdpbmRvdykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBtaWdyYXRlIGZyb20gbm9uLXNwZWMgUlRDSWNlU2VydmVyLnVybCB0byBSVENJY2VTZXJ2ZXIudXJsc1xuICBjb25zdCBPcmlnUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb247XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9XG4gICAgZnVuY3Rpb24gUlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgIGlmIChwY0NvbmZpZyAmJiBwY0NvbmZpZy5pY2VTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IG5ld0ljZVNlcnZlcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07XG4gICAgICAgICAgaWYgKCFzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybHMnKSAmJlxuICAgICAgICAgICAgICBzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybCcpKSB7XG4gICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNlcnZlcikpO1xuICAgICAgICAgICAgc2VydmVyLnVybHMgPSBzZXJ2ZXIudXJsO1xuICAgICAgICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2goc2VydmVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVycztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICB9O1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gT3JpZ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5cbiAgaWYgKCdnZW5lcmF0ZUNlcnRpZmljYXRlJyBpbiBPcmlnUGVlckNvbm5lY3Rpb24pIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIE9yaWdQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdykge1xuICAvLyBBZGQgZXZlbnQudHJhbnNjZWl2ZXIgbWVtYmVyIG92ZXIgZGVwcmVjYXRlZCBldmVudC5yZWNlaXZlclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1RyYWNrRXZlbnQgJiZcbiAgICAgICdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlICYmXG4gICAgICAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsICd0cmFuc2NlaXZlcicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHtyZWNlaXZlcjogdGhpcy5yZWNlaXZlcn07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1DcmVhdGVPZmZlckxlZ2FjeSh3aW5kb3cpIHtcbiAgY29uc3Qgb3JpZ0NyZWF0ZU9mZmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9XG4gICAgZnVuY3Rpb24gY3JlYXRlT2ZmZXIob2ZmZXJPcHRpb25zKSB7XG4gICAgICBpZiAob2ZmZXJPcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gc3VwcG9ydCBiaXQgdmFsdWVzXG4gICAgICAgICAgb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPVxuICAgICAgICAgICAgISFvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb1RyYW5zY2VpdmVyID0gdGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKHRyYW5zY2VpdmVyID0+XG4gICAgICAgICAgdHJhbnNjZWl2ZXIucmVjZWl2ZXIudHJhY2sua2luZCA9PT0gJ2F1ZGlvJyk7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UgJiYgYXVkaW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2Jykge1xuICAgICAgICAgICAgaWYgKGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdzZW5kb25seScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnc2VuZG9ubHknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdyZWN2b25seScpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICBhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ2luYWN0aXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IHRydWUgJiZcbiAgICAgICAgICAgICFhdWRpb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgdGhpcy5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCB7ZGlyZWN0aW9uOiAncmVjdm9ubHknfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIHN1cHBvcnQgYml0IHZhbHVlc1xuICAgICAgICAgIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID1cbiAgICAgICAgICAgICEhb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlkZW9UcmFuc2NlaXZlciA9IHRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZCh0cmFuc2NlaXZlciA9PlxuICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09ICd2aWRlbycpO1xuICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlICYmIHZpZGVvVHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICBpZiAodmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdzZW5kcmVjdicpIHtcbiAgICAgICAgICAgIGlmICh2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignc2VuZG9ubHknKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ3NlbmRvbmx5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAncmVjdm9ubHknKSB7XG4gICAgICAgICAgICBpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oJ2luYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9ICdpbmFjdGl2ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSB0cnVlICYmXG4gICAgICAgICAgICAhdmlkZW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIHRoaXMuYWRkVHJhbnNjZWl2ZXIoJ3ZpZGVvJywge2RpcmVjdGlvbjogJ3JlY3Zvbmx5J30pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BdWRpb0NvbnRleHQod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCB3aW5kb3cuQXVkaW9Db250ZXh0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xufVxuXG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxubGV0IGxvZ0Rpc2FibGVkXyA9IHRydWU7XG5sZXQgZGVwcmVjYXRpb25XYXJuaW5nc18gPSB0cnVlO1xuXG4vKipcbiAqIEV4dHJhY3QgYnJvd3NlciB2ZXJzaW9uIG91dCBvZiB0aGUgcHJvdmlkZWQgdXNlciBhZ2VudCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLlxuICogQHBhcmFtIHshc3RyaW5nfSBleHByIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIGFzIG1hdGNoIGNyaXRlcmlhLlxuICogQHBhcmFtIHshbnVtYmVyfSBwb3MgcG9zaXRpb24gaW4gdGhlIHZlcnNpb24gc3RyaW5nIHRvIGJlIHJldHVybmVkLlxuICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFZlcnNpb24odWFzdHJpbmcsIGV4cHIsIHBvcykge1xuICBjb25zdCBtYXRjaCA9IHVhc3RyaW5nLm1hdGNoKGV4cHIpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7XG59XG5cbi8vIFdyYXBzIHRoZSBwZWVyY29ubmVjdGlvbiBldmVudCBldmVudE5hbWVUb1dyYXAgaW4gYSBmdW5jdGlvblxuLy8gd2hpY2ggcmV0dXJucyB0aGUgbW9kaWZpZWQgZXZlbnQgb2JqZWN0IChvciBmYWxzZSB0byBwcmV2ZW50XG4vLyB0aGUgZXZlbnQpLlxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgZXZlbnROYW1lVG9XcmFwLCB3cmFwcGVyKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHByb3RvID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgY29uc3QgbmF0aXZlQWRkRXZlbnRMaXN0ZW5lciA9IHByb3RvLmFkZEV2ZW50TGlzdGVuZXI7XG4gIHByb3RvLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihuYXRpdmVFdmVudE5hbWUsIGNiKSB7XG4gICAgaWYgKG5hdGl2ZUV2ZW50TmFtZSAhPT0gZXZlbnROYW1lVG9XcmFwKSB7XG4gICAgICByZXR1cm4gbmF0aXZlQWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBjb25zdCB3cmFwcGVkQ2FsbGJhY2sgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgbW9kaWZpZWRFdmVudCA9IHdyYXBwZXIoZSk7XG4gICAgICBpZiAobW9kaWZpZWRFdmVudCkge1xuICAgICAgICBpZiAoY2IuaGFuZGxlRXZlbnQpIHtcbiAgICAgICAgICBjYi5oYW5kbGVFdmVudChtb2RpZmllZEV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYihtb2RpZmllZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fZXZlbnRNYXAgPSB0aGlzLl9ldmVudE1hcCB8fCB7fTtcbiAgICBpZiAoIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0pIHtcbiAgICAgIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0gPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uc2V0KGNiLCB3cmFwcGVkQ2FsbGJhY2spO1xuICAgIHJldHVybiBuYXRpdmVBZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFtuYXRpdmVFdmVudE5hbWUsXG4gICAgICB3cmFwcGVkQ2FsbGJhY2tdKTtcbiAgfTtcblxuICBjb25zdCBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyID0gcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHtcbiAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXAgfHwgIXRoaXMuX2V2ZW50TWFwXG4gICAgICAgIHx8ICF0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdKSB7XG4gICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uaGFzKGNiKSkge1xuICAgICAgcmV0dXJuIG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgY29uc3QgdW53cmFwcGVkQ2IgPSB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLmdldChjYik7XG4gICAgdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXS5kZWxldGUoY2IpO1xuICAgIGlmICh0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLnNpemUgPT09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5fZXZlbnRNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50TWFwO1xuICAgIH1cbiAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbbmF0aXZlRXZlbnROYW1lLFxuICAgICAgdW53cmFwcGVkQ2JdKTtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdvbicgKyBldmVudE5hbWVUb1dyYXAsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07XG4gICAgfSxcbiAgICBzZXQoY2IpIHtcbiAgICAgIGlmICh0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLFxuICAgICAgICAgICAgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF0pO1xuICAgICAgICBkZWxldGUgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07XG4gICAgICB9XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZVRvV3JhcCxcbiAgICAgICAgICAgIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdID0gY2IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlTG9nKGJvb2wpIHtcbiAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgK1xuICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgfVxuICBsb2dEaXNhYmxlZF8gPSBib29sO1xuICByZXR1cm4gKGJvb2wpID8gJ2FkYXB0ZXIuanMgbG9nZ2luZyBkaXNhYmxlZCcgOlxuICAgICAgJ2FkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkJztcbn1cblxuLyoqXG4gKiBEaXNhYmxlIG9yIGVuYWJsZSBkZXByZWNhdGlvbiB3YXJuaW5nc1xuICogQHBhcmFtIHshYm9vbGVhbn0gYm9vbCBzZXQgdG8gdHJ1ZSB0byBkaXNhYmxlIHdhcm5pbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVdhcm5pbmdzKGJvb2wpIHtcbiAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgK1xuICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgfVxuICBkZXByZWNhdGlvbldhcm5pbmdzXyA9ICFib29sO1xuICByZXR1cm4gJ2FkYXB0ZXIuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgJyArIChib29sID8gJ2Rpc2FibGVkJyA6ICdlbmFibGVkJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2coKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChsb2dEaXNhYmxlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2hvd3MgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHN1Z2dlc3RpbmcgdGhlIG1vZGVybiBhbmQgc3BlYy1jb21wYXRpYmxlIEFQSS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlcHJlY2F0ZWQob2xkTWV0aG9kLCBuZXdNZXRob2QpIHtcbiAgaWYgKCFkZXByZWNhdGlvbldhcm5pbmdzXykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLndhcm4ob2xkTWV0aG9kICsgJyBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlICcgKyBuZXdNZXRob2QgK1xuICAgICAgJyBpbnN0ZWFkLicpO1xufVxuXG4vKipcbiAqIEJyb3dzZXIgZGV0ZWN0b3IuXG4gKlxuICogQHJldHVybiB7b2JqZWN0fSByZXN1bHQgY29udGFpbmluZyBicm93c2VyIGFuZCB2ZXJzaW9uXG4gKiAgICAgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdEJyb3dzZXIod2luZG93KSB7XG4gIC8vIFJldHVybmVkIHJlc3VsdCBvYmplY3QuXG4gIGNvbnN0IHJlc3VsdCA9IHticm93c2VyOiBudWxsLCB2ZXJzaW9uOiBudWxsfTtcblxuICAvLyBGYWlsIGVhcmx5IGlmIGl0J3Mgbm90IGEgYnJvd3NlclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHtcbiAgICByZXN1bHQuYnJvd3NlciA9ICdOb3QgYSBicm93c2VyLic7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGNvbnN0IHtuYXZpZ2F0b3J9ID0gd2luZG93O1xuXG4gIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7IC8vIEZpcmVmb3guXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnZmlyZWZveCc7XG4gICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAvRmlyZWZveFxcLyhcXGQrKVxcLi8sIDEpO1xuICB9IGVsc2UgaWYgKG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHxcbiAgICAgICh3aW5kb3cuaXNTZWN1cmVDb250ZXh0ID09PSBmYWxzZSAmJiB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICAhd2luZG93LlJUQ0ljZUdhdGhlcmVyKSkge1xuICAgIC8vIENocm9tZSwgQ2hyb21pdW0sIFdlYnZpZXcsIE9wZXJhLlxuICAgIC8vIFZlcnNpb24gbWF0Y2hlcyBDaHJvbWUvV2ViUlRDIHZlcnNpb24uXG4gICAgLy8gQ2hyb21lIDc0IHJlbW92ZWQgd2Via2l0R2V0VXNlck1lZGlhIG9uIGh0dHAgYXMgd2VsbCBzbyB3ZSBuZWVkIHRoZVxuICAgIC8vIG1vcmUgY29tcGxpY2F0ZWQgZmFsbGJhY2sgdG8gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnY2hyb21lJztcbiAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIC9DaHJvbShlfGl1bSlcXC8oXFxkKylcXC4vLCAyKTtcbiAgfSBlbHNlIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLykpIHsgLy8gU2FmYXJpLlxuICAgIHJlc3VsdC5icm93c2VyID0gJ3NhZmFyaSc7XG4gICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLCAxKTtcbiAgICByZXN1bHQuc3VwcG9ydHNVbmlmaWVkUGxhbiA9IHdpbmRvdy5SVENSdHBUcmFuc2NlaXZlciAmJlxuICAgICAgICAnY3VycmVudERpcmVjdGlvbicgaW4gd2luZG93LlJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZTtcbiAgfSBlbHNlIHsgLy8gRGVmYXVsdCBmYWxsdGhyb3VnaDogbm90IHN1cHBvcnRlZC5cbiAgICByZXN1bHQuYnJvd3NlciA9ICdOb3QgYSBzdXBwb3J0ZWQgYnJvd3Nlci4nO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBzb21ldGhpbmcgaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSBzb21ldGhpbmcgeW91IHdhbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHRydWUgaWYgdmFsIGlzIGFuIG9iamVjdCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuLyoqXG4gKiBSZW1vdmUgYWxsIGVtcHR5IG9iamVjdHMgYW5kIHVuZGVmaW5lZCB2YWx1ZXNcbiAqIGZyb20gYSBuZXN0ZWQgb2JqZWN0IC0tIGFuIGVuaGFuY2VkIGFuZCB2YW5pbGxhIHZlcnNpb25cbiAqIG9mIExvZGFzaCdzIGBjb21wYWN0YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhY3RPYmplY3QoZGF0YSkge1xuICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMoZGF0YSkucmVkdWNlKGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCBrZXkpIHtcbiAgICBjb25zdCBpc09iaiA9IGlzT2JqZWN0KGRhdGFba2V5XSk7XG4gICAgY29uc3QgdmFsdWUgPSBpc09iaiA/IGNvbXBhY3RPYmplY3QoZGF0YVtrZXldKSA6IGRhdGFba2V5XTtcbiAgICBjb25zdCBpc0VtcHR5T2JqZWN0ID0gaXNPYmogJiYgIU9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGg7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgaXNFbXB0eU9iamVjdCkge1xuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY2N1bXVsYXRvciwge1trZXldOiB2YWx1ZX0pO1xuICB9LCB7fSk7XG59XG5cbi8qIGl0ZXJhdGVzIHRoZSBzdGF0cyBncmFwaCByZWN1cnNpdmVseS4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWxrU3RhdHMoc3RhdHMsIGJhc2UsIHJlc3VsdFNldCkge1xuICBpZiAoIWJhc2UgfHwgcmVzdWx0U2V0LmhhcyhiYXNlLmlkKSkge1xuICAgIHJldHVybjtcbiAgfVxuICByZXN1bHRTZXQuc2V0KGJhc2UuaWQsIGJhc2UpO1xuICBPYmplY3Qua2V5cyhiYXNlKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgIGlmIChuYW1lLmVuZHNXaXRoKCdJZCcpKSB7XG4gICAgICB3YWxrU3RhdHMoc3RhdHMsIHN0YXRzLmdldChiYXNlW25hbWVdKSwgcmVzdWx0U2V0KTtcbiAgICB9IGVsc2UgaWYgKG5hbWUuZW5kc1dpdGgoJ0lkcycpKSB7XG4gICAgICBiYXNlW25hbWVdLmZvckVhY2goaWQgPT4ge1xuICAgICAgICB3YWxrU3RhdHMoc3RhdHMsIHN0YXRzLmdldChpZCksIHJlc3VsdFNldCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKiBmaWx0ZXIgZ2V0U3RhdHMgZm9yIGEgc2VuZGVyL3JlY2VpdmVyIHRyYWNrLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclN0YXRzKHJlc3VsdCwgdHJhY2ssIG91dGJvdW5kKSB7XG4gIGNvbnN0IHN0cmVhbVN0YXRzVHlwZSA9IG91dGJvdW5kID8gJ291dGJvdW5kLXJ0cCcgOiAnaW5ib3VuZC1ydHAnO1xuICBjb25zdCBmaWx0ZXJlZFJlc3VsdCA9IG5ldyBNYXAoKTtcbiAgaWYgKHRyYWNrID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZpbHRlcmVkUmVzdWx0O1xuICB9XG4gIGNvbnN0IHRyYWNrU3RhdHMgPSBbXTtcbiAgcmVzdWx0LmZvckVhY2godmFsdWUgPT4ge1xuICAgIGlmICh2YWx1ZS50eXBlID09PSAndHJhY2snICYmXG4gICAgICAgIHZhbHVlLnRyYWNrSWRlbnRpZmllciA9PT0gdHJhY2suaWQpIHtcbiAgICAgIHRyYWNrU3RhdHMucHVzaCh2YWx1ZSk7XG4gICAgfVxuICB9KTtcbiAgdHJhY2tTdGF0cy5mb3JFYWNoKHRyYWNrU3RhdCA9PiB7XG4gICAgcmVzdWx0LmZvckVhY2goc3RhdHMgPT4ge1xuICAgICAgaWYgKHN0YXRzLnR5cGUgPT09IHN0cmVhbVN0YXRzVHlwZSAmJiBzdGF0cy50cmFja0lkID09PSB0cmFja1N0YXQuaWQpIHtcbiAgICAgICAgd2Fsa1N0YXRzKHJlc3VsdCwgc3RhdHMsIGZpbHRlcmVkUmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBmaWx0ZXJlZFJlc3VsdDtcbn1cblxuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBXb3JrZXJfZm4oKSB7XG4gIHJldHVybiBuZXcgV29ya2VyKF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJwZGYud29ya2VyLmpzXCIpO1xufVxuIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYXJyMltpXSA9IGFycltpXTtcbiAgfVxuXG4gIHJldHVybiBhcnIyO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn0iLCJpbXBvcnQgYXJyYXlMaWtlVG9BcnJheSBmcm9tIFwiLi9hcnJheUxpa2VUb0FycmF5LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KGFycik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gc2VsZjtcbn0iLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufSIsImltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tIFwiLi9zZXRQcm90b3R5cGVPZi5qc1wiO1xuaW1wb3J0IGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCBmcm9tIFwiLi9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfY29uc3RydWN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7XG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59IiwiaW1wb3J0IHN1cGVyUHJvcEJhc2UgZnJvbSBcIi4vc3VwZXJQcm9wQmFzZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2dldCgpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7XG4gICAgX2dldCA9IFJlZmxlY3QuZ2V0O1xuICB9IGVsc2Uge1xuICAgIF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7XG4gICAgICB2YXIgYmFzZSA9IHN1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoIWJhc2UpIHJldHVybjtcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGlmIChkZXNjLmdldCkge1xuICAgICAgICByZXR1cm4gZGVzYy5nZXQuY2FsbChhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHRhcmdldCA6IHJlY2VpdmVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlc2MudmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufSIsImltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tIFwiLi9zZXRQcm90b3R5cGVPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBzZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2lzTmF0aXZlRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoZm4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpICE9PSAtMTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkge1xuICB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFycltcIkBAaXRlcmF0b3JcIl07XG5cbiAgaWYgKF9pID09IG51bGwpIHJldHVybjtcbiAgdmFyIF9hcnIgPSBbXTtcbiAgdmFyIF9uID0gdHJ1ZTtcbiAgdmFyIF9kID0gZmFsc2U7XG5cbiAgdmFyIF9zLCBfZTtcblxuICB0cnkge1xuICAgIGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kID0gdHJ1ZTtcbiAgICBfZSA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfYXJyO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmltcG9ydCBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSBcIi4vYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGFzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn0iLCJpbXBvcnQgYXJyYXlXaXRoSG9sZXMgZnJvbSBcIi4vYXJyYXlXaXRoSG9sZXMuanNcIjtcbmltcG9ydCBpdGVyYWJsZVRvQXJyYXlMaW1pdCBmcm9tIFwiLi9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qc1wiO1xuaW1wb3J0IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IGZyb20gXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5LmpzXCI7XG5pbXBvcnQgbm9uSXRlcmFibGVSZXN0IGZyb20gXCIuL25vbkl0ZXJhYmxlUmVzdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn0iLCJpbXBvcnQgZ2V0UHJvdG90eXBlT2YgZnJvbSBcIi4vZ2V0UHJvdG90eXBlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcbiAgICBvYmplY3QgPSBnZXRQcm90b3R5cGVPZihvYmplY3QpO1xuICAgIGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIG9iamVjdDtcbn0iLCJpbXBvcnQgYXJyYXlXaXRob3V0SG9sZXMgZnJvbSBcIi4vYXJyYXlXaXRob3V0SG9sZXMuanNcIjtcbmltcG9ydCBpdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vaXRlcmFibGVUb0FycmF5LmpzXCI7XG5pbXBvcnQgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanNcIjtcbmltcG9ydCBub25JdGVyYWJsZVNwcmVhZCBmcm9tIFwiLi9ub25JdGVyYWJsZVNwcmVhZC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn0iLCJpbXBvcnQgYXJyYXlMaWtlVG9BcnJheSBmcm9tIFwiLi9hcnJheUxpa2VUb0FycmF5LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufSIsImltcG9ydCBnZXRQcm90b3R5cGVPZiBmcm9tIFwiLi9nZXRQcm90b3R5cGVPZi5qc1wiO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gXCIuL3NldFByb3RvdHlwZU9mLmpzXCI7XG5pbXBvcnQgaXNOYXRpdmVGdW5jdGlvbiBmcm9tIFwiLi9pc05hdGl2ZUZ1bmN0aW9uLmpzXCI7XG5pbXBvcnQgY29uc3RydWN0IGZyb20gXCIuL2NvbnN0cnVjdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3dyYXBOYXRpdmVTdXBlcihDbGFzcykge1xuICB2YXIgX2NhY2hlID0gdHlwZW9mIE1hcCA9PT0gXCJmdW5jdGlvblwiID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkO1xuXG4gIF93cmFwTmF0aXZlU3VwZXIgPSBmdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKSB7XG4gICAgaWYgKENsYXNzID09PSBudWxsIHx8ICFpc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuXG4gICAgaWYgKHR5cGVvZiBDbGFzcyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBfY2FjaGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChfY2FjaGUuaGFzKENsYXNzKSkgcmV0dXJuIF9jYWNoZS5nZXQoQ2xhc3MpO1xuXG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBXcmFwcGVyKCkge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdChDbGFzcywgYXJndW1lbnRzLCBnZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuXG4gICAgV3JhcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENsYXNzLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IFdyYXBwZXIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHNldFByb3RvdHlwZU9mKFdyYXBwZXIsIENsYXNzKTtcbiAgfTtcblxuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsImltcG9ydCAnLi9zdHlsZS5jc3MnO1xyXG5cclxuZXhwb3J0ICogZnJvbSAnLi9leHRlbnNpb24nO1xyXG5leHBvcnQgKiBmcm9tICcuL2NvbXBvbmVudCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdmlldyc7XHJcblxyXG5jb25zdCBwZGZqcyA9IHJlcXVpcmUoJ3BkZmpzLWRpc3QnKTtcclxuY29uc3QgUGRmanNXb3JrZXIgPSByZXF1aXJlKFwid29ya2VyLWxvYWRlcj9lc01vZHVsZT1mYWxzZSZmaWxlbmFtZT1bbmFtZV0uanMhcGRmanMtZGlzdC9idWlsZC9wZGYud29ya2VyLmpzXCIpO1xyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJXb3JrZXJcIiBpbiB3aW5kb3cpIHtcclxuXHRwZGZqcy5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclBvcnQgPSBuZXcgUGRmanNXb3JrZXIoKTtcclxufVxyXG5cclxuaW1wb3J0IHsgQ291cnNlU3RhdGUgfSBmcm9tICcuL21vZGVsL2NvdXJzZS1zdGF0ZSc7XHJcbmltcG9ydCB7IENvdXJzZVN0YXRlU2VydmljZSB9IGZyb20gJy4vc2VydmljZS9jb3Vyc2Uuc2VydmljZSc7XHJcbmltcG9ydCB7IFNsaWRlRG9jdW1lbnQgfSBmcm9tICcuL21vZGVsL2RvY3VtZW50JztcclxuaW1wb3J0IHsgSmFudXNTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2phbnVzLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBQcm9ncmVzc2l2ZURhdGFWaWV3IH0gZnJvbSAnLi9hY3Rpb24vcGFyc2VyL3Byb2dyZXNzaXZlLWRhdGEtdmlldyc7XHJcbmltcG9ydCB7IFN0cmVhbUFjdGlvblBhcnNlciB9IGZyb20gJy4vYWN0aW9uL3BhcnNlci9zdHJlYW0uYWN0aW9uLnBhcnNlcic7XHJcbmltcG9ydCB7IFN0cmVhbVBhZ2VQbGF5YmFja0FjdGlvbiB9IGZyb20gJy4vYWN0aW9uL3N0cmVhbS5wbGF5YmFjay5hY3Rpb24nO1xyXG5pbXBvcnQgeyBTdHJlYW1QYWdlU2VsZWN0ZWRBY3Rpb24gfSBmcm9tICcuL2FjdGlvbi9zdHJlYW0ucGFnZS5zZWxlY3RlZC5hY3Rpb24nO1xyXG5pbXBvcnQgeyBQYWdlQWN0aW9uIH0gZnJvbSAnLi9hY3Rpb24vcGFnZS5hY3Rpb24nO1xyXG5pbXBvcnQgeyBQbGF5ZXJWaWV3IH0gZnJvbSAnLi92aWV3JztcclxuaW1wb3J0IHsgUGxheWJhY2tTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL3BsYXliYWNrLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTdHJlYW1Eb2N1bWVudFNlbGVjdGVkQWN0aW9uIH0gZnJvbSAnLi9hY3Rpb24vc3RyZWFtLmRvY3VtZW50LnNlbGVjdGVkLmFjdGlvbic7XHJcbmltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSAnLi91dGlscy9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgUGxheWJhY2tNb2RlbCB9IGZyb20gJy4vbW9kZWwvcGxheWJhY2stbW9kZWwnO1xyXG5pbXBvcnQgeyBTdHJlYW1TcGVlY2hQdWJsaXNoZWRBY3Rpb24gfSBmcm9tICcuL2FjdGlvbi9zdHJlYW0uc3BlZWNoLnB1Ymxpc2hlZC5hY3Rpb24nO1xyXG5pbXBvcnQgeyBTdHJlYW1Eb2N1bWVudENyZWF0ZWRBY3Rpb24gfSBmcm9tICcuL2FjdGlvbi9zdHJlYW0uZG9jdW1lbnQuY3JlYXRlZC5hY3Rpb24nO1xyXG5pbXBvcnQgeyBXaGl0ZWJvYXJkRG9jdW1lbnQgfSBmcm9tICcuL21vZGVsL3doaXRlYm9hcmQuZG9jdW1lbnQnO1xyXG5pbXBvcnQgeyBDb3Vyc2VTdGF0ZURvY3VtZW50IH0gZnJvbSAnLi9tb2RlbC9jb3Vyc2Utc3RhdGUtZG9jdW1lbnQnO1xyXG5pbXBvcnQgeyBTdHJlYW1Eb2N1bWVudENsb3NlZEFjdGlvbiB9IGZyb20gJy4vYWN0aW9uL3N0cmVhbS5kb2N1bWVudC5jbG9zZWQuYWN0aW9uJztcclxuaW1wb3J0IHsgU3RyZWFtQWN0aW9uIH0gZnJvbSAnLi9hY3Rpb24vc3RyZWFtLmFjdGlvbic7XHJcblxyXG5jbGFzcyBMZWN0dXJlUGxheWVyIHtcclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBwbGF5YmFja01vZGVsOiBQbGF5YmFja01vZGVsO1xyXG5cclxuXHRwcml2YXRlIHN0cmVhbUFjdGlvbkJ1ZmZlcjoge1xyXG5cdFx0ZG9jSWQ6IGJpZ2ludDtcclxuXHRcdGJ1ZmZlcmVkQWN0aW9uczogU3RyZWFtQWN0aW9uW107XHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSBjb3Vyc2VTdGF0ZVNlcnZpY2U6IENvdXJzZVN0YXRlU2VydmljZTtcclxuXHJcblx0cHJpdmF0ZSBqYW51c1NlcnZpY2U6IEphbnVzU2VydmljZTtcclxuXHJcblx0cHJpdmF0ZSBwbGF5YmFja1NlcnZpY2U6IFBsYXliYWNrU2VydmljZTtcclxuXHJcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIG9uU2V0dGluZ3NDb25zdW1lcjogT2JzZXJ2ZXI8Ym9vbGVhbj47XHJcblxyXG5cdHByaXZhdGUgcm9vbUlkOiBudW1iZXI7XHJcblxyXG5cdHByaXZhdGUgc3RhcnRUaW1lOiBiaWdpbnQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbCA9IG5ldyBQbGF5YmFja01vZGVsKCk7XHJcblx0XHR0aGlzLmNvdXJzZVN0YXRlU2VydmljZSA9IG5ldyBDb3Vyc2VTdGF0ZVNlcnZpY2UoXCJodHRwczovL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3QpO1xyXG5cdFx0dGhpcy5qYW51c1NlcnZpY2UgPSBuZXcgSmFudXNTZXJ2aWNlKFwiaHR0cHM6Ly9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArIFwiOjgwODkvamFudXNcIiwgdGhpcy5wbGF5YmFja01vZGVsKTtcclxuXHRcdHRoaXMucGxheWJhY2tTZXJ2aWNlID0gbmV3IFBsYXliYWNrU2VydmljZSh0aGlzLnBsYXliYWNrTW9kZWwpO1xyXG5cdH1cclxuXHJcblx0c3RhcnQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNvdXJzZVN0YXRlU2VydmljZS5nZXRDb3Vyc2VTdGF0ZSh0aGlzLnJvb21JZClcclxuXHRcdFx0XHQudGhlbigoY291cnNlU3RhdGU6IENvdXJzZVN0YXRlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkNvdXJzZSBzdGF0ZVwiLCBjb3Vyc2VTdGF0ZSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTG9hZCBhbGwgaW5pdGlhbGx5IG9wZW5lZCBkb2N1bWVudHMuXHJcblx0XHRcdFx0XHRjb25zdCBwcm9taXNlcyA9IFtdO1xyXG5cclxuXHRcdFx0XHRcdGZvciAoY29uc3QgdmFsdWUgb2YgT2JqZWN0LnZhbHVlcyhjb3Vyc2VTdGF0ZS5kb2N1bWVudE1hcCkpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcHJvbWlzZSA9IHRoaXMuY291cnNlU3RhdGVTZXJ2aWNlLmdldFN0YXRlRG9jdW1lbnQodGhpcy5yb29tSWQsIHZhbHVlKTtcclxuXHJcblx0XHRcdFx0XHRcdHByb21pc2VzLnB1c2gocHJvbWlzZSk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0UHJvbWlzZS5hbGwocHJvbWlzZXMpXHJcblx0XHRcdFx0XHRcdC50aGVuKGRvY3VtZW50cyA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coZG9jdW1lbnRzKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2V0RG9jdW1lbnRzKGNvdXJzZVN0YXRlLCBkb2N1bWVudHMpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGFkZFBlZXIocGVlcklkOiBCaWdJbnQpIHtcclxuXHRcdHRoaXMuamFudXNTZXJ2aWNlLmFkZFBlZXIocGVlcklkKTtcclxuXHR9XHJcblxyXG5cdHN0YXJ0U3BlZWNoKGRldmljZUNvbnN0cmFpbnRzOiBhbnkpOiB2b2lkIHtcclxuXHRcdHRoaXMuamFudXNTZXJ2aWNlLnN0YXJ0U3BlZWNoKGRldmljZUNvbnN0cmFpbnRzKTtcclxuXHR9XHJcblxyXG5cdHN0b3BTcGVlY2goKTogdm9pZCB7XHJcblx0XHR0aGlzLmphbnVzU2VydmljZS5zdG9wU3BlZWNoKCk7XHJcblx0XHR0aGlzLnNldFJhaXNlSGFuZChmYWxzZSk7XHJcblx0fVxyXG5cclxuXHRzZXREZXZpY2VDb25zdHJhaW50cyhkZXZpY2VDb25zdHJhaW50czogYW55KTogdm9pZCB7XHJcblx0XHR0aGlzLmphbnVzU2VydmljZS5zZXREZXZpY2VDb25zdHJhaW50cyhkZXZpY2VDb25zdHJhaW50cyk7XHJcblx0fVxyXG5cclxuXHRzZXRDb250YWluZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRzZXRDb250YWluZXJBKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwuZWxlbWVudEFQcm9wZXJ0eS52YWx1ZSA9IGVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRzZXRPbkVycm9yKGNvbnN1bWVyOiBPYnNlcnZlcjxhbnk+KTogdm9pZCB7XHJcblx0XHR0aGlzLmphbnVzU2VydmljZS5zZXRPbkVycm9yKGNvbnN1bWVyKTtcclxuXHR9XHJcblxyXG5cdHNldE9uQ29ubmVjdGVkU3RhdGUoY29uc3VtZXI6IE9ic2VydmVyPGJvb2xlYW4+KTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwud2VicnRjQ29ubmVjdGVkUHJvcGVydHkuc3Vic2NyaWJlKGNvbnN1bWVyKTtcclxuXHR9XHJcblxyXG5cdHNldE9uQ29ubmVjdGVkU3BlZWNoU3RhdGUoY29uc3VtZXI6IE9ic2VydmVyPGJvb2xlYW4+KTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwud2VicnRjUHVibGlzaGVyQ29ubmVjdGVkUHJvcGVydHkuc3Vic2NyaWJlKGNvbnN1bWVyKTtcclxuXHR9XHJcblxyXG5cdHNldE9uU2V0dGluZ3MoY29uc3VtZXI6IE9ic2VydmVyPGJvb2xlYW4+KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2V0dGluZ3NDb25zdW1lciA9IGNvbnN1bWVyO1xyXG5cdH1cclxuXHJcblx0c2V0T25SYWlzZUhhbmQoY29uc3VtZXI6IE9ic2VydmVyPGJvb2xlYW4+KTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwucmFpc2VkSGFuZFByb3BlcnR5LnN1YnNjcmliZShjb25zdW1lcik7XHJcblx0fVxyXG5cclxuXHRzZXRPblNob3dRdWl6KGNvbnN1bWVyOiBPYnNlcnZlcjxib29sZWFuPik6IHZvaWQge1xyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsLnNob3dRdWl6UHJvcGVydHkuc3Vic2NyaWJlKGNvbnN1bWVyKTtcclxuXHR9XHJcblxyXG5cdHNldFNob3dRdWl6KHNob3c6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMucGxheWJhY2tNb2RlbC5zaG93UXVpeiA9IHNob3c7XHJcblx0fVxyXG5cclxuXHRzZXRRdWl6QWN0aXZlKGFjdGl2ZTogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0dGhpcy5wbGF5YmFja01vZGVsLnNob3dRdWl6QWN0aXZlID0gYWN0aXZlO1xyXG5cdH1cclxuXHJcblx0c2V0UmFpc2VIYW5kKHJhaXNlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwucmFpc2VkSGFuZCA9IHJhaXNlO1xyXG5cdH1cclxuXHJcblx0c2V0U3RhcnRUaW1lKHN0YXJ0VGltZTogYmlnaW50KSB7XHJcblx0XHR0aGlzLnN0YXJ0VGltZSA9IHN0YXJ0VGltZTtcclxuXHR9XHJcblxyXG5cdHNldE11dGVkKG11dGVkOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLnBsYXliYWNrTW9kZWwuc2V0TXV0ZWQobXV0ZWQpO1xyXG5cdH1cclxuXHJcblx0c2V0VXNlcklkKHVzZXJJZDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmphbnVzU2VydmljZS5zZXRVc2VySWQodXNlcklkKTtcclxuXHR9XHJcblxyXG5cdHNldFJvb21JZChpZDogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnJvb21JZCA9IGlkO1xyXG5cclxuXHRcdHRoaXMuamFudXNTZXJ2aWNlLnNldFJvb21JZChpZCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNldERvY3VtZW50cyhjb3Vyc2VTdGF0ZTogQ291cnNlU3RhdGUsIGRvY3VtZW50czogU2xpZGVEb2N1bWVudFtdKSB7XHJcblx0XHRjb25zdCBwbGF5ZXJWaWV3ID0gbmV3IFBsYXllclZpZXcodGhpcy5wbGF5YmFja01vZGVsKTtcclxuXHJcblx0XHR0aGlzLnNldFZpZXcocGxheWVyVmlldyk7XHJcblxyXG5cdFx0dGhpcy5wbGF5YmFja1NlcnZpY2UuaW5pdGlhbGl6ZShwbGF5ZXJWaWV3LCBjb3Vyc2VTdGF0ZSwgZG9jdW1lbnRzLCB0aGlzLnN0YXJ0VGltZSk7XHJcblxyXG5cdFx0dGhpcy5qYW51c1NlcnZpY2Uuc2V0UGxheWVyVmlldyhwbGF5ZXJWaWV3KTtcclxuXHRcdHRoaXMuamFudXNTZXJ2aWNlLnNldE9uRGF0YSh0aGlzLm9uRGF0YS5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuamFudXNTZXJ2aWNlLnN0YXJ0KCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uRGF0YShkYXRhOiBBcnJheUJ1ZmZlcikge1xyXG5cdFx0aWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcblx0XHRcdC8vIEZpcmVmb3guLi5cclxuXHRcdFx0ZGF0YS5hcnJheUJ1ZmZlcigpLnRoZW4oYnVmZmVyID0+IHtcclxuXHRcdFx0XHR0aGlzLnByb2Nlc3NEYXRhKGJ1ZmZlcik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMucHJvY2Vzc0RhdGEoZGF0YSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHByb2Nlc3NEYXRhKGRhdGE6IEFycmF5QnVmZmVyKSB7XHJcblx0XHRjb25zdCBkYXRhVmlldyA9IG5ldyBQcm9ncmVzc2l2ZURhdGFWaWV3KGRhdGEpO1xyXG5cdFx0Y29uc3QgbGVuZ3RoID0gZGF0YVZpZXcuZ2V0SW50MzIoKTtcclxuXHRcdGNvbnN0IHR5cGUgPSBkYXRhVmlldy5nZXRJbnQ4KCk7XHJcblxyXG5cdFx0Y29uc3QgYWN0aW9uID0gU3RyZWFtQWN0aW9uUGFyc2VyLnBhcnNlKGRhdGFWaWV3LCB0eXBlLCBsZW5ndGgpO1xyXG5cclxuXHRcdGlmIChhY3Rpb24gaW5zdGFuY2VvZiBTdHJlYW1Eb2N1bWVudFNlbGVjdGVkQWN0aW9uKSB7XHJcblx0XHRcdGlmICghdGhpcy5idWZmZXJBY3Rpb24oYWN0aW9uLCBhY3Rpb24uZG9jdW1lbnRJZCkpIHtcclxuXHRcdFx0XHR0aGlzLnBsYXliYWNrU2VydmljZS5zZWxlY3REb2N1bWVudChhY3Rpb24uZG9jdW1lbnRJZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIFN0cmVhbURvY3VtZW50Q3JlYXRlZEFjdGlvbikge1xyXG5cdFx0XHRpZiAoYWN0aW9uLmRvY3VtZW50VHlwZSA9PT0gMSkge1xyXG5cdFx0XHRcdGNvbnN0IHNsaWRlRG9jID0gbmV3IFdoaXRlYm9hcmREb2N1bWVudCgpO1xyXG5cdFx0XHRcdHNsaWRlRG9jLnNldERvY3VtZW50SWQoYWN0aW9uLmRvY3VtZW50SWQpO1xyXG5cclxuXHRcdFx0XHR0aGlzLnBsYXliYWNrU2VydmljZS5hZGREb2N1bWVudChzbGlkZURvYyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5zdHJlYW1BY3Rpb25CdWZmZXIgPSB7XHJcblx0XHRcdFx0XHRidWZmZXJlZEFjdGlvbnM6IFtdLFxyXG5cdFx0XHRcdFx0ZG9jSWQ6IEJpZ0ludChhY3Rpb24uZG9jdW1lbnRJZClcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnN0IHN0YXRlRG9jOiBDb3Vyc2VTdGF0ZURvY3VtZW50ID0ge1xyXG5cdFx0XHRcdFx0YWN0aXZlUGFnZTogbnVsbCxcclxuXHRcdFx0XHRcdGRvY3VtZW50RmlsZTogYWN0aW9uLmRvY3VtZW50RmlsZSxcclxuXHRcdFx0XHRcdGRvY3VtZW50SWQ6IGFjdGlvbi5kb2N1bWVudElkLFxyXG5cdFx0XHRcdFx0ZG9jdW1lbnROYW1lOiBhY3Rpb24uZG9jdW1lbnRUaXRsZSxcclxuXHRcdFx0XHRcdHBhZ2VzOiBudWxsLFxyXG5cdFx0XHRcdFx0dHlwZTogXCJwZGZcIlxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHRoaXMuY291cnNlU3RhdGVTZXJ2aWNlLmdldFN0YXRlRG9jdW1lbnQodGhpcy5yb29tSWQsIHN0YXRlRG9jKVxyXG5cdFx0XHRcdFx0LnRoZW4oKGRvYzogU2xpZGVEb2N1bWVudCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsYXliYWNrU2VydmljZS5hZGREb2N1bWVudChkb2MpO1xyXG5cclxuXHRcdFx0XHRcdFx0dGhpcy5mbHVzaEFjdGlvbkJ1ZmZlcihkb2MuZ2V0RG9jdW1lbnRJZCgpKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBTdHJlYW1Eb2N1bWVudENsb3NlZEFjdGlvbikge1xyXG5cdFx0XHR0aGlzLnBsYXliYWNrU2VydmljZS5yZW1vdmVEb2N1bWVudChhY3Rpb24uZG9jdW1lbnRJZCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBTdHJlYW1QYWdlU2VsZWN0ZWRBY3Rpb24pIHtcclxuXHRcdFx0aWYgKCF0aGlzLmJ1ZmZlckFjdGlvbihhY3Rpb24sIGFjdGlvbi5kb2N1bWVudElkKSkge1xyXG5cdFx0XHRcdGNvbnN0IHBhZ2VBY3Rpb24gPSBuZXcgUGFnZUFjdGlvbihhY3Rpb24ucGFnZU51bWJlcik7XHJcblx0XHRcdFx0cGFnZUFjdGlvbi50aW1lc3RhbXAgPSAwO1xyXG5cclxuXHRcdFx0XHR0aGlzLnBsYXliYWNrU2VydmljZS5hZGRBY3Rpb24ocGFnZUFjdGlvbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIFN0cmVhbVBhZ2VQbGF5YmFja0FjdGlvbikge1xyXG5cdFx0XHRpZiAoIXRoaXMuYnVmZmVyQWN0aW9uKGFjdGlvbiwgYWN0aW9uLmRvY3VtZW50SWQpKSB7XHJcblx0XHRcdFx0dGhpcy5wbGF5YmFja1NlcnZpY2UuYWRkQWN0aW9uKGFjdGlvbi5hY3Rpb24pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBTdHJlYW1TcGVlY2hQdWJsaXNoZWRBY3Rpb24pIHtcclxuXHRcdFx0dGhpcy5qYW51c1NlcnZpY2UuYWRkUGVlcihhY3Rpb24ucHVibGlzaGVySWQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXRWaWV3KHZpZXc6IFBsYXllclZpZXcpOiB2b2lkIHtcclxuXHRcdGlmICghKHZpZXcgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVmlldyBpcyBleHBlY3RlZCB0byBiZSBvZiB0eXBlIEhUTUxFbGVtZW50XCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCkge1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodmlldyk7XHJcblxyXG5cdFx0aWYgKHRoaXMub25TZXR0aW5nc0NvbnN1bWVyKSB7XHJcblx0XHRcdHZpZXcuc2V0T25TZXR0aW5ncyh0aGlzLm9uU2V0dGluZ3NDb25zdW1lcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGJ1ZmZlckFjdGlvbihhY3Rpb246IFN0cmVhbUFjdGlvbiwgZG9jSWQ6IGJpZ2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHRoaXMuc3RyZWFtQWN0aW9uQnVmZmVyICYmIHRoaXMuc3RyZWFtQWN0aW9uQnVmZmVyLmRvY0lkID09PSBCaWdJbnQoZG9jSWQpKSB7XHJcblx0XHRcdHRoaXMuc3RyZWFtQWN0aW9uQnVmZmVyLmJ1ZmZlcmVkQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZmx1c2hBY3Rpb25CdWZmZXIoZG9jSWQ6IGJpZ2ludCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuc3RyZWFtQWN0aW9uQnVmZmVyICYmIHRoaXMuc3RyZWFtQWN0aW9uQnVmZmVyLmRvY0lkID09PSBCaWdJbnQoZG9jSWQpKSB7XHJcblx0XHRcdHRoaXMuc3RyZWFtQWN0aW9uQnVmZmVyLmJ1ZmZlcmVkQWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XHJcblx0XHRcdFx0aWYgKGFjdGlvbiBpbnN0YW5jZW9mIFN0cmVhbURvY3VtZW50U2VsZWN0ZWRBY3Rpb24pIHtcclxuXHRcdFx0XHRcdHRoaXMucGxheWJhY2tTZXJ2aWNlLnNlbGVjdERvY3VtZW50KGFjdGlvbi5kb2N1bWVudElkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoYWN0aW9uIGluc3RhbmNlb2YgU3RyZWFtUGFnZVNlbGVjdGVkQWN0aW9uKSB7XHJcblx0XHRcdFx0XHRjb25zdCBwYWdlQWN0aW9uID0gbmV3IFBhZ2VBY3Rpb24oYWN0aW9uLnBhZ2VOdW1iZXIpO1xyXG5cdFx0XHRcdFx0cGFnZUFjdGlvbi50aW1lc3RhbXAgPSAwO1xyXG5cdFx0XHJcblx0XHRcdFx0XHR0aGlzLnBsYXliYWNrU2VydmljZS5hZGRBY3Rpb24ocGFnZUFjdGlvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIFN0cmVhbVBhZ2VQbGF5YmFja0FjdGlvbikge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5YmFja1NlcnZpY2UuYWRkQWN0aW9uKGFjdGlvbi5hY3Rpb24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zdHJlYW1BY3Rpb25CdWZmZXIgPSBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgTGVjdHVyZVBsYXllciB9OyJdLCJuYW1lcyI6WyJFeGVjdXRhYmxlQmFzZSIsIkFjdGlvblBsYXllciIsImV4ZWN1dG9yIiwiQWN0aW9uVHlwZSIsIlRvb2xDb250ZXh0IiwiUGVuUG9pbnQiLCJBdG9taWNUb29sIiwiU3RyZWFtQWN0aW9uRXhlY3V0b3IiLCJyZW5kZXJDb250cm9sbGVyIiwidG9vbENvbnRleHQiLCJvYnNlcnZlciIsInBhZ2VJbmRleE9ic2VydmVyIiwia2V5RXZlbnQiLCJzZWVrIiwic2V0U2VlayIsImRvY3VtZW50IiwicGFnZU51bWJlciIsInBhZ2UiLCJnZXRQYWdlIiwic2V0UGFnZSIsInRvb2wiLCJFcnJvciIsInNldFByZXZpb3VzVG9vbCIsImV4ZWN1dGVBdG9taWNUb29sIiwicG9pbnQiLCJiZWdpbiIsImNsb25lIiwiZXhlY3V0ZSIsImVuZCIsImNyZWF0ZVplcm8iLCJzZXRUb29sIiwiYmVnaW5Ub29sIiwiZXhlY3V0ZVRvb2wiLCJlbmRUb29sIiwicHJldmlvdXNUb29sIiwiQWN0aW9uIiwiQnJ1c2hBY3Rpb24iLCJBcnJvd1Rvb2wiLCJBcnJvd0FjdGlvbiIsInNoYXBlSGFuZGxlIiwiYnJ1c2giLCJzZXRLZXlFdmVudCIsIkNsZWFyU2hhcGVzVG9vbCIsIkNsZWFyU2hhcGVzQWN0aW9uIiwic2VsZWN0QW5kRXhlY3V0ZVRvb2wiLCJDbG9uZVRvb2wiLCJDbG9uZUFjdGlvbiIsIkVsbGlwc2VUb29sIiwiRWxsaXBzZUFjdGlvbiIsIkV4dGVuZFZpZXdUb29sIiwiRXh0ZW5kVmlld0FjdGlvbiIsInJlY3QiLCJIaWdobGlnaHRlclRvb2wiLCJIaWdobGlnaHRlckFjdGlvbiIsIktleUFjdGlvbiIsIkxhdGV4Rm9udFRvb2wiLCJMYXRleEZvbnRBY3Rpb24iLCJoYW5kbGUiLCJmb250IiwidGV4dENvbG9yIiwidGV4dEF0dHJpYnV0ZXMiLCJMYXRleFRvb2wiLCJMYXRleEFjdGlvbiIsIkxpbmVUb29sIiwiTGluZUFjdGlvbiIsIlBhZ2VBY3Rpb24iLCJzZXRQYWdlTnVtYmVyIiwiUGFuVG9vbCIsIlBhbkFjdGlvbiIsIlBlbkFjdGlvbiIsIkJydXNoIiwiQ29sb3IiLCJQb2ludGVyQWN0aW9uIiwiUmVjdGFuZ2xlQWN0aW9uIiwiVG9vbEJlZ2luQWN0aW9uIiwiVG9vbEV4ZWN1dGVBY3Rpb24iLCJUb29sRW5kQWN0aW9uIiwiVW5kb0FjdGlvbiIsIlJlZG9BY3Rpb24iLCJTZWxlY3RBY3Rpb24iLCJTZWxlY3RHcm91cEFjdGlvbiIsIlJlY3RhbmdsZSIsIlpvb21BY3Rpb24iLCJab29tT3V0QWN0aW9uIiwiUnViYmVyQWN0aW9uIiwiVGV4dEFjdGlvbiIsIlRleHRGb250QWN0aW9uIiwiVGV4dENoYW5nZUFjdGlvbiIsIlRleHRNb3ZlQWN0aW9uIiwiUG9pbnQiLCJUZXh0UmVtb3ZlQWN0aW9uIiwiRm9udCIsIlRleHRIaWdobGlnaHRBY3Rpb24iLCJBY3Rpb25QYXJzZXIiLCJkYXRhVmlldyIsInR5cGUiLCJsZW5ndGgiLCJhY3Rpb24iLCJwYXJzZUFjdGlvbkhlYWRlciIsIkNMRUFSX1NIQVBFUyIsImF0b21pY0FjdGlvbiIsIlVORE8iLCJSRURPIiwiS0VZIiwiUEVOIiwidG9vbEJydXNoQWN0aW9uIiwiSElHSExJR0hURVIiLCJQT0lOVEVSIiwiQVJST1ciLCJMSU5FIiwiUkVDVEFOR0xFIiwiRUxMSVBTRSIsIkNMT05FIiwiU0VMRUNUIiwiU0VMRUNUX0dST1VQIiwiTEFURVgiLCJ0ZXh0QWN0aW9uIiwiTEFURVhfRk9OVF9DSEFOR0UiLCJsYXRleEZvbnRBY3Rpb24iLCJURVhUIiwiVEVYVF9DSEFOR0UiLCJ0ZXh0Q2hhbmdlQWN0aW9uIiwiVEVYVF9GT05UX0NIQU5HRSIsInRleHRGb250QWN0aW9uIiwiVEVYVF9MT0NBVElPTl9DSEFOR0UiLCJ0ZXh0TW92ZUFjdGlvbiIsIlRFWFRfUkVNT1ZFIiwidGV4dFJlbW92ZUFjdGlvbiIsIlRFWFRfU0VMRUNUSU9OX0VYVCIsInRleHRIaWdobGlnaHRBY3Rpb24iLCJUT09MX0JFR0lOIiwidG9vbERyYWdBY3Rpb24iLCJUT09MX0VYRUNVVEUiLCJUT09MX0VORCIsIlBBTk5JTkciLCJFWFRFTkRfVklFVyIsImV4dGVuZFZpZXdBY3Rpb24iLCJaT09NIiwiWk9PTV9PVVQiLCJSVUJCRVJfRVhUIiwicnViYmVyQWN0aW9uIiwiaGVhZGVyIiwiZ2V0SW50MzIiLCJLRVlfRVZFTlRfTUFTSyIsInBhcnNlS2V5RXZlbnQiLCJrZXlDb2RlIiwibW9kaWZpZXJzIiwiYWN0aW9uVHlwZSIsImdldEludDgiLCJ0eXBlQXJnIiwiU0hJRlRfTUFTSyIsIkNUUkxfTUFTSyIsIkFMVF9NQVNLIiwiS2V5Ym9hcmRFdmVudCIsInNoaWZ0S2V5IiwiY3RybEtleSIsImFsdEtleSIsInJnYmEiLCJsaW5lQ2FwIiwiYnJ1c2hXaWR0aCIsImdldEZsb2F0NjQiLCJjb2xvciIsImZyb21SR0JOdW1iZXIiLCJnZXRGbG9hdDMyIiwieCIsInkiLCJ3IiwiaCIsInRleHRMZW5ndGgiLCJ0ZXh0IiwiZ2V0U3RyaW5nIiwiY291bnQiLCJ0ZXh0Qm91bmRzIiwiQXJyYXkiLCJpIiwicHVzaCIsImZvbnRGYW1pbHlMZW5ndGgiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJwb3N0dXJlIiwid2VpZ2h0Iiwic3RyaWtldGhyb3VnaCIsInVuZGVybGluZSIsImZvbnRXZWlnaHQiLCJmb250U3R5bGUiLCJjb25zb2xlIiwiZXJyb3IiLCJ0b1N0cmluZyIsImF0dHJpYnV0ZXMiLCJNYXAiLCJzZXQiLCJmb250VHlwZSIsIlByb2dyZXNzaXZlRGF0YVZpZXciLCJidWZmZXIiLCJieXRlT2Zmc2V0IiwiYnl0ZUxlbmd0aCIsIkRhdGFWaWV3Iiwib2Zmc2V0IiwibiIsInZhbCIsImdldFVpbnQ4IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwibGl0dGxlRW5kaWFuIiwidmFsdWUiLCJnZXRJbnQxNiIsImdldEJpZ0ludDY0IiwiZ2V0VWludDE2IiwiZ2V0VWludDMyIiwiUmVjb3JkZWRQYWdlIiwiUmVjb3JkZWRQYWdlUGFyc2VyIiwicmVjb3JkZWRQYWdlIiwibnVtYmVyIiwidGltZXN0YW1wIiwic3RhdGljQWN0aW9uU2l6ZSIsInBhcnNlIiwic3RhdGljQWN0aW9ucyIsInBsYXliYWNrQWN0aW9uU2l6ZSIsInBsYXliYWNrQWN0aW9ucyIsIlN0cmVhbUFjdGlvblR5cGUiLCJTdHJlYW1Eb2N1bWVudENsb3NlZEFjdGlvbiIsIlN0cmVhbURvY3VtZW50Q3JlYXRlZEFjdGlvbiIsIlN0cmVhbURvY3VtZW50U2VsZWN0ZWRBY3Rpb24iLCJTdHJlYW1QYWdlQ3JlYXRlZEFjdGlvbiIsIlN0cmVhbVBhZ2VEZWxldGVkQWN0aW9uIiwiU3RyZWFtUGFnZVNlbGVjdGVkQWN0aW9uIiwiU3RyZWFtUGFnZVBsYXliYWNrQWN0aW9uIiwiU3RyZWFtUGFnZUFjdGlvbnNBY3Rpb24iLCJTdHJlYW1TdGFydEFjdGlvbiIsIlN0cmVhbVNwZWVjaFB1Ymxpc2hlZEFjdGlvbiIsIlN0cmVhbUFjdGlvblBhcnNlciIsIlNUUkVBTV9JTklUIiwiU1RSRUFNX1NUQVJUIiwic3RhcnRBY3Rpb24iLCJTVFJFQU1fUEFHRV9BQ1RJT04iLCJwbGF5YmFja0FjdGlvbiIsIlNUUkVBTV9QQUdFX0FDVElPTlMiLCJTVFJFQU1fUEFHRV9DUkVBVEVEIiwicGFnZUFjdGlvbiIsIlNUUkVBTV9QQUdFX0RFTEVURUQiLCJTVFJFQU1fUEFHRV9TRUxFQ1RFRCIsIlNUUkVBTV9ET0NVTUVOVF9DUkVBVEVEIiwiZG9jdW1lbnRBY3Rpb24iLCJTVFJFQU1fRE9DVU1FTlRfQ0xPU0VEIiwiU1RSRUFNX0RPQ1VNRU5UX1NFTEVDVEVEIiwiU1RSRUFNX1NQRUVDSF9QVUJMSVNIRUQiLCJzcGVlY2hBY3Rpb24iLCJjb3Vyc2VJZCIsImRvY0lkIiwiZ2V0SW50NjQiLCJlbnRyeUxlbmd0aCIsInBhZ2VQYXJzZXIiLCJkb2NUeXBlIiwidGl0bGVMZW5ndGgiLCJuYW1lTGVuZ3RoIiwiY2hlY2tzdW1MZW5ndGgiLCJkb2NUaXRsZSIsImRvY05hbWUiLCJkb2NDaGVja3N1bSIsImlkTGVuZ3RoIiwiaWRTdHIiLCJwdWJsaXNoZXJJZCIsIkJpZ0ludCIsIlBlblRvb2wiLCJQb2ludGVyVG9vbCIsIlJlY3RhbmdsZVRvb2wiLCJSZWRvVG9vbCIsIkRlbGV0ZVNoYXBlVG9vbCIsIlNlbGVjdEdyb3VwVG9vbCIsIlNlbGVjdFRvb2wiLCJTaW1wbGVBY3Rpb25FeGVjdXRvciIsIlN0cmVhbUFjdGlvblBsYXllciIsInN5bmNTdGF0ZSIsInZpc2liaWxpdHlTdGF0ZSIsImNhdXNlIiwiYWN0aW9ucyIsInNldERvY3VtZW50IiwidGltZSIsImFjdGlvbkNvdW50IiwiYXVkaW9UaW1lIiwic2hpZnQiLCJydW4iLCJlIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXF1ZXN0SUQiLCJleGVjdXRlQWN0aW9ucyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJTdHJlYW1BY3Rpb24iLCJTdHJlYW1Eb2N1bWVudEFjdGlvbiIsImRvY3VtZW50SWQiLCJkb2N1bWVudFR5cGUiLCJkb2N1bWVudFRpdGxlIiwiZG9jdW1lbnRGaWxlIiwiU3RyZWFtUGFnZUFjdGlvbiIsInJlY1BhZ2UiLCJTdHJlYW1TcGVlY2hBY3Rpb24iLCJUZXh0Q2hhbmdlVG9vbCIsIlRleHRGb250VG9vbCIsIlRleHRIaWdobGlnaHRUb29sIiwiVGV4dE1vdmVUb29sIiwiVGV4dFJlbW92ZVRvb2wiLCJUZXh0VG9vbCIsIlRvb2xBY3Rpb24iLCJVbmRvVG9vbCIsIlpvb21PdXRUb29sIiwiWm9vbVRvb2wiLCJWaWV3RWxlbWVudCIsIldlYlZpZXdFbGVtZW50IiwiV2ViUGxheWVyQ29udHJvbHMiLCJzZWxlY3RvciIsInRlbXBsYXRlIiwicmVxdWlyZSIsInN0eWxlcyIsInVwZGF0ZVZvbHVtZUluZGljYXRvciIsInBhcnNlRmxvYXQiLCJ2b2x1bWVTbGlkZXIiLCJzZXRGdWxsc2NyZWVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZ1bGxzY3JlZW5FbGVtZW50Iiwidm9sdW1lSW5kaWNhdG9yIiwic2V0TXV0ZWQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImlucHV0UmFuZ2UiLCJjb250cm9sQ29udGFpbmVyIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsIm1heCIsInJhaXNlSGFuZEJ1dHRvbiIsInNldFNlbGVjdGVkIiwic2hvd1F1aXpCdXR0b24iLCJoYXNBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ2aXNpYmxlIiwiZHVyYXRpb25NcyIsImRhdGUiLCJEYXRlIiwiaG91cnMiLCJnZXRVVENIb3VycyIsIm1pbnV0ZXMiLCJnZXRVVENNaW51dGVzIiwic2Vjb25kcyIsImdldFVUQ1NlY29uZHMiLCJmb3JtYXR0ZWRUaW1lIiwic3Vic3RyIiwiZHVyYXRpb24iLCJpbm5lclRleHQiLCJ2b2x1bWUiLCJtdXRlZCIsInNldFZvbHVtZUluZGljYXRvciIsIm11dGVPYnNlcnZlciIsImZ1bGxzY3JlZW4iLCJzZXRGdWxsc2NyZWVuSW5kaWNhdG9yIiwiYnV0dG9uIiwic2VsZWN0ZWQiLCJhZGQiLCJyZW1vdmUiLCJhY3RpdmUiLCJzZXRWaXNpYmxlIiwicGxheU1lZGlhQnV0dG9uIiwidG9nZ2xlQ2xhc3MiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInNldHRpbmdzQnV0dG9uIiwiZGlzYWJsZWQiLCJmdWxsc2NyZWVuQnV0dG9uIiwicHJvcGVydHkiLCJzdWJzY3JpYmUiLCJyYWlzZSIsInNldEFjdGl2ZSIsInNob3ciLCJlbmFibGVkIiwiY2hhdEJ1dHRvbiIsIm5hbWUiLCJpbmRpY2F0b3JOYW1lIiwiU2l6ZUV2ZW50Iiwic2l6ZSIsIl9zaXplIiwicHJvdG90eXBlIiwiZXF1YWxzIiwid2FybiIsIm90aGVyIiwibCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIlRyYW5zZm9ybSIsIl9nZXRUcmFuc2Zvcm0iLCJDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiLCJnZXRUcmFuc2Zvcm0iLCJnZXRUcmFuc2Zvcm1FeHQiLCJtIiwiYXBwbHkiLCJmcm9tIiwiYXJndW1lbnRzIiwiX3RyYW5zZm9ybV9leHQiLCJzZXRWYWx1ZXMiLCJhIiwiYiIsImMiLCJkIiwiZiIsIl9yZXNldFRyYW5zZm9ybSIsInJlc2V0VHJhbnNmb3JtIiwiX3JvdGF0ZSIsInJvdGF0ZSIsIl9zY2FsZSIsInNjYWxlIiwiX3NldFRyYW5zZm9ybSIsInNldFRyYW5zZm9ybSIsIl90cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJfdHJhbnNsYXRlIiwidHJhbnNsYXRlIiwiX3NhdmUiLCJzYXZlIiwiX3Jlc3RvcmUiLCJyZXN0b3JlIiwicmVzZXQiLCJhbmdsZSIsImRvbU1hdHJpeCIsIm11bHRpcGx5IiwiX3RyYW5zZm9ybV9leHRfc3RhY2siLCJwb3AiLCJzcGVjS2V5cyIsImZ1bGxzY3JlZW5FbmFibGVkIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsImZ1bGxzY3JlZW5jaGFuZ2UiLCJmdWxsc2NyZWVuZXJyb3IiLCJ3ZWJraXQiLCJtb3oiLCJtcyIsInNwZWMiLCJrZXlzIiwidmVuZG9yIiwidiIsInByb3RvIiwiRWxlbWVudCIsIkRvY3VtZW50IiwiZ2V0IiwicHJveHlMaXN0ZW5lciIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsIm5ld0V2ZW50IiwiRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidGFyZ2V0IiwiZGlzcGF0Y2hFdmVudCIsImZvcm1hdCIsInN0ciIsImFyciIsImNhbGxiYWNrIiwiZXhwIiwicDAiLCJwMSIsInAyIiwicDMiLCJwNCIsInVuZGVmaW5lZCIsInBhcnNlSW50IiwiYmFzZSIsInRvRml4ZWQiLCJ0b1ByZWNpc2lvbiIsInRvRXhwb25lbnRpYWwiLCJKU09OIiwic3RyaW5naWZ5Iiwic3oiLCJjaCIsInJlZ2V4IiwiRGltZW5zaW9uIiwid2lkdGgiLCJoZWlnaHQiLCJFbGxpcHNlIiwicmFkaXVzWCIsInJhZGl1c1kiLCJjZW50ZXJYIiwiY2VudGVyWSIsIm5vcm1YIiwibm9ybVkiLCJjb250YWluc1BvaW50IiwiaW50ZXJzZWN0c0xpbmUiLCJ4MSIsInkxIiwieDIiLCJ5MiIsInJ4c3EiLCJyeXNxIiwiQSIsIk1hdGgiLCJwb3ciLCJCIiwiQyIsIkQiLCJ0Iiwic3FydCIsInQxIiwidDIiLCJMaW5lIiwiZHgiLCJkeSIsImFicyIsImxpbmUiLCJpbnRlcnNlY3RzIiwieDMiLCJ5MyIsIng0IiwieTQiLCJ1YSIsInViIiwiQTEiLCJCMSIsIkMxIiwiQTIiLCJCMiIsIkMyIiwicCIsIlBlblN0cm9rZSIsInN0cm9rZVdpZHRoIiwicG9pbnRzIiwic3Ryb2tlIiwiY2FwT25lUG9pbnQiLCJjYXBFbmRwb2ludCIsInBTaXplIiwiYmVnaW5QYXRoIiwiYWR2YW5jZSIsImludGVyc2VjdHNSZWN0IiwiZGVsdGEiLCJzdWJ0cmFjdCIsImFkdmFuY2VQYXRoIiwicmV2ZXJzZSIsInZlY3RvciIsIm5vcm1hbGl6ZSIsIm5vcm1hbCIsIm1pdGVyIiwidG9QcmVzc3VyZSIsIm9mZnNldEEiLCJvZmZzZXRCIiwibGFzdExpbmUiLCJsYXN0TGluZVRvcCIsImxhc3RMaW5lQm90dG9tIiwiaW50ZXIiLCJnZXRJbnRlcnNlY3Rpb25Qb2ludCIsImludGVyc2VjdCIsImdldEVuZFBvaW50IiwiZ2V0U3RhcnRQb2ludCIsInMiLCJ0b0RlZ3JlZXMiLCJjYXAiLCJhZGRQYXRoUG9pbnQiLCJjZW50ZXIiLCJzdGFydCIsInJhZGl1cyIsInN0ZXAiLCJyYWQiLCJQSSIsImNvcyIsInNpbiIsInVuc2hpZnQiLCJtaW4iLCJkZWdyZWVzIiwiYXRhbjIiLCJwYXRoIiwiaW5kZXgiLCJzY2FsYXIiLCJJTlNJREUiLCJMRUZUIiwiUklHSFQiLCJCT1RUT00iLCJUT1AiLCJweCIsInB5IiwiaXNFbXB0eSIsIngwIiwieTAiLCJ4bWluIiwieG1heCIsInltaW4iLCJ5bWF4Iiwib3V0Y29kZTAiLCJjb21wdXRlQ29kZSIsIm91dGNvZGUxIiwib3V0Y29kZU91dCIsImlYIiwiaVkiLCJpVyIsImlIIiwiY29kZSIsInNsaWNlIiwiZ2V0U2NhbGVYIiwiZ2V0U2hlYXJYIiwiZ2V0U2hlYXJZIiwiZ2V0U2NhbGVZIiwiZ2V0VHJhbnNsYXRlWCIsImdldFRyYW5zbGF0ZVkiLCJzeCIsInN5Iiwiam9pbiIsIk1lZGlhUGxheWVyIiwibWVkaWEiLCJzb3VyY2UiLCJzcmMiLCJjdXJyZW50VGltZSIsInBsYXkiLCJwYXVzZSIsImxpc3RlbmVyIiwiQWN0aW9uSGFuZGxlciIsIm1vZGVsIiwidW5kb0FjdGlvbnMiLCJyZWRvQWN0aW9ucyIsInVuZG8iLCJyZWRvIiwiU2hhcGVBY3Rpb24iLCJBZGRTaGFwZUFjdGlvbiIsInNoYXBlcyIsInNoYXBlIiwiYWRkU2hhcGUiLCJyZW1vdmVTaGFwZSIsIlJlbW92ZVNoYXBlQWN0aW9uIiwiU2xpZGVEb2N1bWVudCIsImlkIiwicGFnZXMiLCJQYWdlRXZlbnQiLCJjaGFuZ2VUeXBlIiwiZGlydHlSZWdpb24iLCJfcGFnZSIsIl9jaGFuZ2VUeXBlIiwiX3NoYXBlIiwiX2RpcnR5UmVnaW9uIiwiUGFnZUNoYW5nZVR5cGUiLCJUeXBlZEV2ZW50IiwiU2xpZGVTaGFwZSIsIlBhZ2UiLCJzbGlkZVNoYXBlIiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJvblNsaWRlVHJhbnNmb3JtIiwic2hhcGVDaGFuZ2VMaXN0ZW5lciIsIm9uU2hhcGVNb2RpZmllZCIsImNvbnRleHQiLCJ2aWV3UmVjdCIsInJlbmRlclBhZ2UiLCJyb290IiwicmVuZGVyUGFnZVRleHQiLCJnZXRTbGlkZVNoYXBlIiwiYm91bmRzIiwiY2hhbmdlRXZlbnQiLCJ1bnN1YnNjcmliZSIsInByZXZDb3VudCIsImZpcmVQYWdlRXZlbnQiLCJTaGFwZUFkZGVkIiwic2hhcGVJbmRleCIsImluZGV4T2YiLCJkZWxldGVkIiwic3BsaWNlIiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJTaGFwZVJlbW92ZWQiLCJhY3Rpb25IYW5kbGVyIiwiZXhlY3V0ZUFjdGlvbiIsImNsZWFyIiwiQ2xlYXIiLCJQYWdlVHJhbnNmb3JtIiwiU2hhcGVNb2RpZmllZCIsInB1Ymxpc2giLCJQZGZSZW5kZXJlciIsIlBkZlRleHRSZW5kZXJlciIsIlBkZkpzRG9jdW1lbnQiLCJyZW5kZXJlciIsInRleHRSZW5kZXJlciIsImxvYWRQYWdlcyIsImdldFRleHRDb250ZW50IiwiY29udGVudCIsIml0ZW1zIiwibWFwIiwiZ2V0UGRmUGFnZSIsInBhZ2VQcm94eSIsInJlbmRlciIsIm51bVBhZ2VzIiwiUHJvcGVydHkiLCJQbGF5YmFja01vZGVsIiwiX2VsZW1lbnRBIiwiX3NlbGVjdGVkUGFnZUluZGV4IiwiX3N0YXRlIiwiX3JhaXNlZEhhbmQiLCJyYWlzZWQiLCJfc2hvd0NoYXQiLCJfc2hvd1F1aXoiLCJfc2hvd1F1aXpBY3RpdmUiLCJfd2VicnRjQ29ubmVjdGVkIiwiY29ubmVjdGVkIiwiX3dlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZCIsIl92aWRlb0F2YWlsYWJsZSIsImF2YWlsYWJsZSIsIl9tYWluVmlkZW9BdmFpbGFibGUiLCJfbG9jYWxWaWRlb0F2YWlsYWJsZSIsInN0YXRlIiwiX2R1cmF0aW9uIiwiX3RpbWUiLCJfdm9sdW1lIiwiX211dGVkIiwiRm9ybVNoYXBlIiwiQXJyb3dTaGFwZSIsImdldEtleUV2ZW50IiwiaXNTZWxlY3RlZCIsIkVsbGlwc2VTaGFwZSIsImVsbGlwc2UiLCJmaWxsIiwiU3Ryb2tlU2hhcGUiLCJTaGFwZUV2ZW50IiwicHJldiIsInVwZGF0ZUJvdW5kcyIsImZpcmVTaGFwZUV2ZW50IiwiVHlwZXNldHRpbmdTaGFwZSIsIkxhdGV4U2hhcGUiLCJzZXRMb2NhdGlvbiIsInNldEZvbnQiLCJzZXRUZXh0Q29sb3IiLCJnZXRUZXh0Q29sb3IiLCJzZXRUZXh0QXR0cmlidXRlcyIsImdldFRleHRBdHRyaWJ1dGVzIiwiTGluZVNoYXBlIiwiUGVuU2hhcGUiLCJhZGRQb2ludCIsIm1vdmVCeURlbHRhIiwidXBkYXRlQm91bmRzQnlEZWx0YSIsIlBvaW50ZXJTaGFwZSIsIlJlY3RhbmdsZVNoYXBlIiwiaW50ZXJzZWN0c1NlZ21lbnQiLCJpbnRlcnNlY3Rpb24iLCJTZWxlY3RTaGFwZSIsIlNoYXBlIiwiZW1wdHkiLCJfaGFuZGxlIiwiX3BvaW50cyIsImxhc3QiLCJfYm91bmRzIiwiY3JlYXRlIiwiX2JydXNoIiwiYWRkZWQiLCJtaW5Qb2ludCIsIm1heFBvaW50IiwiZGlzdGFuY2UiLCJsMSIsImwyIiwic2VnbWVudCIsIlRleHRIaWdobGlnaHRTaGFwZSIsInVuaW9uIiwiVGV4dFNoYXBlIiwiWm9vbVNoYXBlIiwic2lnbiIsIldoaXRlYm9hcmRSZW5kZXJlciIsIldoaXRlYm9hcmREb2N1bWVudCIsIlByb21pc2UiLCJyZXNvbHZlIiwiUGFpbnQiLCJSR0JfQ09MT1JfUkVHRVgiLCJyIiwiZyIsImFscGhhIiwiaGV4IiwidHJpbSIsInJlcyIsImV4ZWMiLCJmYW1pbHkiLCJBcnJvd1JlbmRlcmVyIiwiY3JlYXRlQXJyb3dQYXRoIiwiZmlsbFN0eWxlIiwidG9SZ2JhIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJzZXRMaW5lRGFzaCIsImJvbGQiLCJ0d29TaWRlZCIsIndkIiwiYXJyb3dSYXRpbyIsImFycm93TGVuZ3RoIiwid2Fpc3RpbmciLCJ2ZWVYIiwid2Fpc3RYIiwid2Fpc3RZIiwiYXJyb3dXaWR0aCIsIm1vdmVUbyIsImxpbmVUbyIsInF1YWRyYXRpY0N1cnZlVG8iLCJjbG9zZVBhdGgiLCJFbGxpcHNlUmVuZGVyZXIiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwiSGlnaGxpZ2h0ZXJSZW5kZXJlciIsInBvaW50Q291bnQiLCJkcmF3Q2lyY2xlIiwibGluZUpvaW4iLCJnbG9iYWxBbHBoYSIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsImFyYyIsIkxhdGV4UmVuZGVyZXIiLCJnZXRUZXh0IiwiZ2V0Rm9udCIsInNjYWxlZEhlaWdodCIsInNjYWxlZEZvbnQiLCJmaWxsVGV4dCIsIkxpbmVSZW5kZXJlciIsImRhc2hXaWR0aCIsImRhc2hEaXN0IiwiY3JlYXRlRWxlbWVudCIsInJlbmRlclRhc2siLCJzY2FsZVgiLCJzY2FsZVR4IiwidHgiLCJ0eSIsInZpZXciLCJ2aWV3cG9ydCIsImdldFZpZXdwb3J0IiwiZG9udEZsaXAiLCJiYWNrQ2FudmFzIiwiY2FudmFzQ29udGV4dCIsImdldENvbnRleHQiLCJwcm9taXNlIiwidGhlbiIsImNhbnZhcyIsImRyYXdJbWFnZSIsInJlYXNvbiIsInJlbmRlclRleHRMYXllciIsInBkZlZpZXZlciIsInRleHRDb250ZW50IiwiY29udGFpbmVyIiwiZW5oYW5jZVRleHRTZWxlY3Rpb24iLCJ0ZXh0RGl2cyIsImxpbmtTZXJ2aWNlIiwiUERGTGlua1NlcnZpY2UiLCJleHRlcm5hbExpbmtUYXJnZXQiLCJhbm5vdGF0aW9uTGF5ZXIiLCJBbm5vdGF0aW9uTGF5ZXJCdWlsZGVyIiwicGFnZURpdiIsInBkZlBhZ2UiLCJQZW5SZW5kZXJlciIsInRvUmdiIiwiZ2V0UGVuU3Ryb2tlIiwiZ2V0U3Ryb2tlTGlzdCIsIlBvaW50ZXJSZW5kZXJlciIsIncyIiwidG9BbHBoYSIsIlJlY3RhbmdsZVJlbmRlcmVyIiwiU2xpZGVSZW5kZXJlciIsIlNlbGVjdFJlbmRlcmVyIiwiWm9vbVJlbmRlcmVyIiwiVGV4dFJlbmRlcmVyIiwiVGV4dEhpZ2hsaWdodFJlbmRlcmVyIiwiUmVuZGVyQ29udHJvbGxlciIsInBhZ2VDaGFuZ2VMaXN0ZW5lciIsInBhZ2VDaGFuZ2VkIiwibGFzdFRyYW5zZm9ybSIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJyZW5kZXJBbGxMYXllcnMiLCJkaXNhYmxlUmVuZGVyaW5nIiwiZW5hYmxlUmVuZGVyaW5nIiwiZ2V0UGFnZVRyYW5zZm9ybSIsInJlZnJlc2hBbm5vdGF0aW9uTGF5ZXJzIiwicmVuZGVyU3VyZmFjZSIsInNsaWRlUmVuZGVyU3VyZmFjZSIsInJlZ2lzdGVyUmVuZGVyZXIiLCJhZGRTaXplTGlzdGVuZXIiLCJzbGlkZVJlbmRlclN1cmZhY2VTaXplQ2hhbmdlZCIsImFjdGlvblJlbmRlclN1cmZhY2UiLCJhY3Rpb25SZW5kZXJTdXJmYWNlU2l6ZUNoYW5nZWQiLCJyZWdpc3RlclNoYXBlUmVuZGVyZXJzIiwidm9sYXRpbGVSZW5kZXJTdXJmYWNlIiwidGV4dExheWVyU3VyZmFjZSIsImNsZWFyQW5ub3RhdGlvbkxheWVycyIsImxhc3RTaGFwZSIsImdldFNpemUiLCJyZW5kZXJQZXJtYW5lbnRMYXllciIsInJlbmRlclZvbGF0aWxlTGF5ZXIiLCJnZXRTaGFwZXMiLCJsYXN0SW5kZXgiLCJyZW5kZXJTaGFwZXMiLCJyZW5kZXJTbGlkZUxheWVyIiwiaW1hZ2VTb3VyY2UiLCJwYWdlVHJhbnNmb3JtIiwicmVuZGVySW1hZ2VTb3VyY2UiLCJpcyIsInJlbmRlclNoYXBlIiwicmVuZGVyU2xpZGVTaGFwZSIsInBhZ2VCb3VuZHMiLCJSZW5kZXJTdXJmYWNlIiwicmVuZGVyZXJzIiwiY2xlYXJSZWN0Iiwic2hhcGVOYW1lIiwic3VyZmFjZSIsImNvbnN0cnVjdG9yIiwiZHByIiwiZGV2aWNlUGl4ZWxSYXRpbyIsInJlc2l6ZUNhbnZhcyIsImZpcmVTaXplRXZlbnQiLCJzaXplRXZlbnQiLCJzY2FsZU1vZGUiLCJnZXRBdHRyaWJ1dGUiLCJkYXNoIiwiRlJBTUVfQ09MT1IiLCJsaW5lRGFzaE9mZnNldCIsIlNsaWRlUmVuZGVyU3VyZmFjZSIsInJlamVjdCIsInBhZ2VSZWN0IiwiZ2V0Q29sb3IiLCJUZXh0TGF5ZXJTdXJmYWNlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicmVuZGVyVGV4dCIsImZpbGxSZWN0IiwiRklMTF9DT0xPUiIsIkh0dHBSZXF1ZXN0IiwiRG9jdW1lbnRTZXJ2aWNlIiwiQ291cnNlU3RhdGVTZXJ2aWNlIiwiaG9zdCIsImdldEZ1bGxQYXRoIiwic3RhdGVEb2MiLCJzZXRSZXNwb25zZVR5cGUiLCJkYXRhQnVmZmVyIiwiYnl0ZUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJkb2NTZXJ2aWNlIiwiYURvbSIsImJsb2IiLCJCbG9iIiwiaHJlZiIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImRvd25sb2FkIiwiZG9jdW1lbnROYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwibG9hZERvY3VtZW50Iiwic2xpZGVEb2MiLCJzZXREb2N1bWVudElkIiwicHJlbG9hZFNsaWRlRG9jdW1lbnQiLCJidWZmZXJMZW5ndGgiLCJyZWNvcmRlZFBhZ2VzIiwiZ2V0U3RhdGVEb2N1bWVudEFjdGlvbnMiLCJsb2FkQWN0aW9ucyIsImFwaVBhdGgiLCJnZXREb2N1bWVudCIsImxvYWRpbmdUYXNrIiwicGRmIiwiSmFudXMiLCJVdGlscyIsIkphbnVzU2VydmljZSIsInNlcnZlclVybCIsInBsYXliYWNrTW9kZWwiLCJqYW51cyIsInB1Ymxpc2hlckhhbmRsZSIsInB1Ymxpc2hlckxvY2FsU3RyZWFtIiwiZGF0YUNhbGxiYWNrIiwicmVtb3RlRmVlZHMiLCJvcGFxdWVJZCIsInJhbmRvbVN0cmluZyIsIm15dXNlcm5hbWUiLCJwbGF5ZXJWaWV3IiwiZGV2aWNlQ29uc3RyYWludHMiLCJ1c2VySWQiLCJyb29tSWQiLCJteXJvb20iLCJjb25zdW1lciIsImNoZWNrRnVuY3Rpb24iLCJlcnJvckNhbGxiYWNrIiwiaW5pdCIsImlzV2VicnRjU3VwcG9ydGVkIiwiY3JlYXRlU2Vzc2lvbiIsInBlZXJJZCIsIk51bWJlciIsImF0dGFjaFRvUHVibGlzaGVyIiwiYXR0YWNoIiwicGx1Z2luIiwic3VjY2VzcyIsInBsdWdpbkhhbmRsZSIsImxvZyIsImdldFBsdWdpbiIsImdldElkIiwiam9pbkFzUHVibGlzaGVyIiwiY29uc2VudERpYWxvZyIsIm9uIiwiaWNlU3RhdGUiLCJtZWRpYVN0YXRlIiwibWVkaXVtIiwicmVjZWl2aW5nIiwibWlkIiwid2VicnRjU3RhdGUiLCJpc0Nvbm5lY3RlZCIsIndlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZCIsImxvY2FsVmlkZW9BdmFpbGFibGUiLCJyYWlzZWRIYW5kIiwib25tZXNzYWdlIiwibWVzc2FnZSIsImpzZXAiLCJwdWJsaXNoT3duRmVlZCIsImhhbmRsZVJlbW90ZUpzZXAiLCJhdWRpbyIsInZpZGVvIiwiZ2V0QXVkaW9UcmFja3MiLCJnZXRWaWRlb1RyYWNrcyIsIm9ubG9jYWxzdHJlYW0iLCJzdHJlYW0iLCJsb2NhbFZpZGVvRmVlZCIsImdldEVsZW1lbnRCeUlkIiwiYXR0YWNoTWVkaWFTdHJlYW0iLCJoYXNWaWRlbyIsImNvbnN0cmFpbnRzIiwiaWRlYWwiLCJhc3BlY3RSYXRpbyIsImZyYW1lUmF0ZSIsImZhY2luZ01vZGUiLCJ2aWRlb1RyYWNrIiwiYXBwbHlDb25zdHJhaW50cyIsIm9ucmVtb3Rlc3RyZWFtIiwib25jbGVhbnVwIiwiZGV0YWNoZWQiLCJ1bnB1Ymxpc2giLCJyZXF1ZXN0Iiwic2VuZCIsInNlcnZlciIsImRlc3Ryb3llZCIsImdldFBhcnRpY2lwYW50cyIsImxpc3QiLCJyb29tIiwiY2FuSm9pbiIsInBhcnRpY2lwYW50cyIsInB1Ymxpc2hlciIsImRpc3BsYXkiLCJkZXRhY2giLCJpc1ByaW1hcnkiLCJyZW1vdGVGZWVkIiwicHR5cGUiLCJmZWVkIiwic3RvcFNwZWVjaCIsIndlYnJ0Y0Nvbm5lY3RlZCIsInJmaWQiLCJjcmVhdGVBbnN3ZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm9uVmlkZW9UcmFja1JlbW92ZWQiLCJ0cmFjayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRNZWRpYUVsZW1lbnQiLCJzZXRBdWRpb1NpbmsiLCJhdWRpb091dHB1dCIsIm1haW5WaWRlb0F2YWlsYWJsZSIsImF1dG9wbGF5IiwicGxheXNJbmxpbmUiLCJkaXYiLCJ2aWRlb0ZlZWRDb250YWluZXIiLCJ2aWRlb0ZlZWREaXYiLCJjaGVja1ZpZGVvQ291bnQiLCJvbmRhdGFvcGVuIiwibGFiZWwiLCJwcm90b2NvbCIsIm9uZGF0YSIsImRhdGEiLCJmaWx0ZXIiLCJpdGVtIiwiZGVzdHJveSIsImVsZW1lbnQiLCJhdWRpb1NpbmsiLCJIVE1MTWVkaWFFbGVtZW50Iiwic2V0U2lua0lkIiwidmlkZW9BdmFpbGFibGUiLCJ3YW50RGF0YSIsImF1ZGlvU2VuZCIsInZpZGVvU2VuZCIsInVzZVZpZGVvIiwidmlkZW9EZXZpY2VJZCIsImNyZWF0ZU9mZmVyIiwiYXVkaW9SZWN2IiwidmlkZW9SZWN2IiwiZGV2aWNlSWQiLCJhdWRpb0RldmljZUlkIiwiZWNob0NhbmNlbGxhdGlvbiIsImZhaWxJZk5vQXVkaW8iLCJmYWlsSWZOb1ZpZGVvIiwiZGVidWciLCJTeW5jU3RhdGUiLCJQbGF5YmFja1NlcnZpY2UiLCJkb2N1bWVudHMiLCJjb3Vyc2VTdGF0ZSIsInN0YXJ0VGltZSIsImZvckVhY2giLCJkb2MiLCJhZGREb2N1bWVudCIsInN0YXJ0VGltZU1zIiwic2xpZGVWaWV3IiwiZ2V0U2xpZGVWaWV3IiwibWVkaWFQbGF5ZXIiLCJnZXRNdXRlZCIsImFkZFRpbWVMaXN0ZW5lciIsInNldER1cmF0aW9uIiwibm93Iiwic2V0T25NdXRlIiwibXV0ZSIsInNldE9uVm9sdW1lIiwiYWN0aXZlU3RhdGVEb2MiLCJhdnRpdmVEb2N1bWVudCIsImFjdGl2ZURvYyIsImdldERvY3VtZW50SWQiLCJzZXRBY3Rpb25SZW5kZXJTdXJmYWNlIiwiZ2V0QWN0aW9uUmVuZGVyU3VyZmFjZSIsInNldFNsaWRlUmVuZGVyU3VyZmFjZSIsImdldFNsaWRlUmVuZGVyU3VyZmFjZSIsInNldFZvbGF0aWxlUmVuZGVyU3VyZmFjZSIsImdldFZvbGF0aWxlUmVuZGVyU3VyZmFjZSIsInNldFRleHRMYXllclN1cmZhY2UiLCJnZXRUZXh0TGF5ZXJTdXJmYWNlIiwiYWN0aXZlUGFnZSIsImFjdGlvblBsYXllciIsIndlYnJ0Y0Nvbm5lY3RlZFByb3BlcnR5IiwiYWRkQWN0aW9uIiwiUGFpbnRUb29sIiwic2V0UDAiLCJzZXRQMSIsImFzc2lnbiIsInNvdXJjZVBvaW50IiwiZ2V0U2VsZWN0ZWRTaGFwZXMiLCJoYXNTZWxlY3RlZFNoYXBlcyIsImhpdFNlbGVjdGVkIiwiY2xvbmVkIiwic2VsZWN0ZWRTaGFwZXMiLCJjbG9uZWRTaGFwZSIsInJlbW92ZVNlbGVjdGlvbiIsInNlbGVjdGVkU2hhcGUiLCJnZXRUb3BMZXZlbFNoYXBlIiwiYWRkU2VsZWN0aW9uIiwibW92ZVNoYXBlcyIsImJlZ2luQnVsa1JlbmRlciIsImVuZEJ1bGtSZW5kZXIiLCJzZXRQYWdlUmVjdCIsImxhc3RQb2ludCIsIk1vZGUiLCJpbml0aWFsaXplZCIsIm1vZGUiLCJNb3ZlIiwiU2VsZWN0Iiwic2VsZWN0R3JvdXAiLCJzZXRUZXh0Iiwic2VsZWN0U2hhcGUiLCJhZGRUZXh0Qm91bmRzIiwibGlzdGVuZXJzIiwiZGlzcG9zZSIsImxpc3RlbmVyc09uY2VyIiwiY2FsbGJhY2tJbmRleCIsInRlIiwiRXhlY3V0YWJsZSIsIkV4ZWN1dGFibGVTdGF0ZSIsInNldFN0YXRlIiwiSW5pdGlhbGl6aW5nIiwiaW5pdEludGVybmFsIiwiSW5pdGlhbGl6ZWQiLCJjcmVhdGVkIiwiU3RhcnRpbmciLCJzdGFydEludGVybmFsIiwiU3RhcnRlZCIsIlN0b3BwaW5nIiwic3RvcEludGVybmFsIiwiU3RvcHBlZCIsIlN1c3BlbmRpbmciLCJzdXNwZW5kSW50ZXJuYWwiLCJTdXNwZW5kZWQiLCJzdGFydGVkIiwic3VzcGVuZGVkIiwic3RvcCIsIkRlc3Ryb3lpbmciLCJkZXN0cm95SW50ZXJuYWwiLCJEZXN0cm95ZWQiLCJDcmVhdGVkIiwiX3ByZXZTdGF0ZSIsInN0YXRlRXZlbnQiLCJ2YWxpZGF0ZU5leHRTdGF0ZSIsImZpcmVTdGF0ZUNoYW5nZWQiLCJuZXh0U3RhdGUiLCJpc0FsbG93ZWQiLCJhbGxvd2VkU3RhdGVzIiwiYWxsb3dlZFN0YXRlIiwib3B0aW9ucyIsInJlcXVlc3RPcHRpb25zIiwicmV0dXJuVHlwZSIsInJlc3BvbnNlVHlwZSIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJwYXJhbXMiLCJoZWFkZXJzIiwib25Qcm9ncmVzcyIsInVybCIsIm1ldGhvZCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsImNvbXBvc2VVcmwiLCJzZXRIZWFkZXJzIiwiZXJyb3JIYW5kbGVyIiwiZ2V0UmVzcG9uc2UiLCJvbmxvYWQiLCJzdGF0dXMiLCJyZXR1cm5WYWx1ZSIsImRlY29kZUJvZHkiLCJvbnRpbWVvdXQiLCJvbmVycm9yIiwidXBsb2FkIiwib25wcm9ncmVzcyIsImVuY29kZUJvZHkiLCJyZXNwb25zZSIsImdldEhlYWRlcnMiLCJzdGF0dXNUZXh0IiwicGFyYW1zRW5jIiwicUluZGV4Iiwic2VwIiwiRm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJpc0FycmF5IiwiQXJyYXlCdWZmZXIiLCJnZXRSZXNwb25zZUhlYWRlciIsIm1hdGNoIiwiUmVnRXhwIiwia2V5Iiwic2V0UmVxdWVzdEhlYWRlciIsImhhcyIsImNvbnRlbnRUeXBlIiwiZ2V0Q29udGVudFR5cGUiLCJyZXNwb25zZUhlYWRlcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJoZWFkZXJMaXN0Iiwic3BsaXQiLCJoZWFkZXJWYWx1ZXMiLCJPYnNlcnZhYmxlIiwib2JzZXJ2ZXJzIiwic3Vic2NyaWJlciIsImRlZmF1bHRWYWx1ZSIsIl92YWx1ZSIsIm5ld1ZhbHVlIiwibm90aWZ5IiwiZnVuYyIsImlzRnVuY3Rpb24iLCJQbGF5ZXJWaWV3IiwiY2hhdENvbGxhcHNlIiwiY2hhdE1vZGFsIiwiY2hhdE1vZGFsU3RhdGUiLCJlbGVtZW50QSIsImVsZW1lbnRBUHJvcGVydHkiLCJzZXRDaGF0IiwidmlkZW9GZWVkIiwiY2Fubm90UGxheSIsIm1haW5WaWRlb0F2YWlsYWJsZVByb3BlcnR5Iiwic2V0TWFpblZpZGVvQXZhaWxhYmxlIiwibG9jYWxWaWRlb0F2YWlsYWJsZVByb3BlcnR5Iiwic2V0TG9jYWxWaWRlb0F2YWlsYWJsZSIsInNob3dDaGF0UHJvcGVydHkiLCJzaG93Q2hhdCIsInBsYXllckNvbnRyb2xzIiwic2V0T25SYWlzZUhhbmQiLCJyYWlzZWRIYW5kUHJvcGVydHkiLCJzZXRPblJhaXNlSGFuZEFjdGl2ZSIsIndlYnJ0Y1B1Ymxpc2hlckNvbm5lY3RlZFByb3BlcnR5Iiwic2V0T25TaG93UXVpeiIsInNob3dRdWl6UHJvcGVydHkiLCJzZXRPblNob3dRdWl6QWN0aXZlIiwic2hvd1F1aXpBY3RpdmVQcm9wZXJ0eSIsInNldE9uQ2hhdEFjdGlvbiIsInNldE9uRnVsbHNjcmVlbiIsInNldE9uUGxheU1lZGlhIiwic2V0UGxheU1lZGlhVmlzaWJsZSIsInZpZGVvcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGF0TW9kYWxFbGVtZW50IiwiYm9vdHN0cmFwIiwiTW9kYWwiLCJtcWwiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsIlJlc2l6ZU9ic2VydmVyIiwiY29tcHV0ZVZpZXdTaXplIiwib2JzZXJ2ZSIsInBsYXllckNvbnRhaW5lciIsImVudHJ5TW9kYWxFbGVtZW50IiwiZW50cnlNb2RhbExhYmVsIiwiZW50cnlNb2RhbCIsImdldE9yQ3JlYXRlSW5zdGFuY2UiLCJiYWNrZHJvcCIsImtleWJvYXJkIiwiaGlkZGVuSGFuZGxlciIsInNldFZvbHVtZSIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwibW96Q2FuY2VsRnVsbFNjcmVlbiIsIndlYmtpdEV4aXRGdWxsc2NyZWVuIiwibXNFeGl0RnVsbHNjcmVlbiIsInNldE9uU2V0dGluZ3MiLCJpbml0RW50cnlNb2RhbCIsImNoYXRDb250YWluZXIiLCJjaGF0Q2xvc2VCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlQ2hhdCIsImNoYXRDb2xsYXBzZUVsZW1lbnQiLCJDb2xsYXBzZSIsInRvZ2dsZSIsImNsb25lTm9kZSIsIm1lc3NhZ2VGb3JtIiwiY2hhdE1vZGFsQ29udGVudCIsInN1Ym1pdEJ1dHRvbiIsImNoYXRNb2RhbEZvb3RlciIsInByZXZlbnREZWZhdWx0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmV0Y2giLCJ0b2FzdElkIiwidG9hc3RNZXNzYWdlIiwic2hvd1RvYXN0IiwiaGlkZSIsImZpcnN0RWxlbWVudENoaWxkIiwicmVtb3ZlQWxsQ2hpbGROb2RlcyIsInNldENoYXRFbmFibGVkIiwidXBkYXRlUmlnaHRDb250YWluZXIiLCJjaGF0Iiwic2V0RWxlbWVudFZpc2libGUiLCJtZXNzYWdlSWQiLCJ0b2FzdEVsZW1lbnQiLCJ0b2FzdEJvZHkiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaW5uZXJIVE1MIiwiZGljdCIsInRvYXN0IiwiVG9hc3QiLCJtYWluVmlkZW9GZWVkQ29udGFpbmVyIiwibG9jYWxWaWRlb0ZlZWRDb250YWluZXIiLCJyaWdodENvbnRhaW5lciIsImhhc0NoaWxkTm9kZXMiLCJzbGlkZVJhdGlvIiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJ2aWV3UmF0aW8iLCJwYXJlbnQiLCJXZWJTbGlkZVZpZXciLCJzbGlkZUNhbnZhcyIsImFjdGlvbkNhbnZhcyIsInZvbGF0aWxlQ2FudmFzIiwidGV4dExheWVyIiwicmVzaXplIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzZXRTaXplIiwidmFsaWRhdGVTZWxlY3RvciIsImNvbmZpZyIsImN0b3IiLCJjb25uZWN0ZWRDYWxsYmFjayIsImNhbGwiLCJpbXBvcnROb2RlIiwidXNlU2hhZG93IiwiYXR0YWNoU2hhZG93Iiwic2hhZG93Um9vdCIsIlJlZmxlY3QiLCJvd25LZXlzIiwicHJvcE5hbWUiLCJwcm9wIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJIVE1MRWxlbWVudCIsInBkZmpzIiwiUGRmanNXb3JrZXIiLCJHbG9iYWxXb3JrZXJPcHRpb25zIiwid29ya2VyUG9ydCIsIkxlY3R1cmVQbGF5ZXIiLCJjb3Vyc2VTdGF0ZVNlcnZpY2UiLCJsb2NhdGlvbiIsImphbnVzU2VydmljZSIsImhvc3RuYW1lIiwicGxheWJhY2tTZXJ2aWNlIiwiZ2V0Q291cnNlU3RhdGUiLCJwcm9taXNlcyIsInZhbHVlcyIsImRvY3VtZW50TWFwIiwiZ2V0U3RhdGVEb2N1bWVudCIsImFsbCIsInNldERvY3VtZW50cyIsImFkZFBlZXIiLCJzdGFydFNwZWVjaCIsInNldFJhaXNlSGFuZCIsInNldERldmljZUNvbnN0cmFpbnRzIiwic2V0T25FcnJvciIsIm9uU2V0dGluZ3NDb25zdW1lciIsInNob3dRdWl6Iiwic2hvd1F1aXpBY3RpdmUiLCJzZXRVc2VySWQiLCJzZXRSb29tSWQiLCJzZXRWaWV3IiwiaW5pdGlhbGl6ZSIsInNldFBsYXllclZpZXciLCJzZXRPbkRhdGEiLCJvbkRhdGEiLCJhcnJheUJ1ZmZlciIsInByb2Nlc3NEYXRhIiwiYnVmZmVyQWN0aW9uIiwic2VsZWN0RG9jdW1lbnQiLCJzdHJlYW1BY3Rpb25CdWZmZXIiLCJidWZmZXJlZEFjdGlvbnMiLCJmbHVzaEFjdGlvbkJ1ZmZlciIsInJlbW92ZURvY3VtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==